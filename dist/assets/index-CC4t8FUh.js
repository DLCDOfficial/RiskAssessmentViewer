const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WhereClauseCache-C2fq30HW.js","./WhereClause-_cPb2R28.js","./arcadeUtils-BJejxZze.js","./arcade-CRs4DLMP.js","./aiServices-BaDcNY_e.js","./ImmutableArray-BPVd6ESQ.js","./shared-C-1JP2Fh.js","./number-BsJDiuL2.js","./featureConversionUtils-C9prAwZE.js","./OptimizedFeature-Bv0VSPNy.js","./OptimizedFeatureSet-BR8EEvDc.js","./unitConversion-DnOUn4pn.js","./batchExec-CwuTIfNk.js","./QueueProcessor-BOMNxHqO.js","./ElevationLayer-SE9YKRBS.js","./ArcGISCachedService-DJcY159h.js","./TileInfoTilemapCache-BaaGqkcZ.js","./TilemapCache-CT_5TG6-.js","./ByteSizeUnit-BsxeN7wM.js","./WorkerHandle-Cse8VrM4.js","./portalLayers-C1FGkCa8.js","./associatedFeatureServiceUtils-DE26GN17.js","./fetchService-BSy5Q2cS.js","./loadUtils-B3SSHwvf.js","./lazyLayerLoader-T2jUQ_d0.js","./arcgisLayers-CDXx3Ht6.js","./statsWorker-nM0tnCs9.js","./utils-nYpG_0r8.js","./utils-UeEaIW_Y.js","./ClassBreaksDefinition-C24XlBc8.js","./geometryEngineWorker-C3Rv6yWF.js","./geometryEngineJSON-DGETChXf.js","./geometryEngineBase-BV9OKxkg.js","./_commonjsHelpers-BcY2WciP.js","./index-BbP3371Q.js","./json-Wa8cmqdu.js","./CSVSourceWorker-Dlsv2-Jo.js","./date-Ctp1FiBW.js","./executeQueryForSnapping-CZLpYfSk.js","./queryUtils-DuRy3z0o.js","./QueryEngine-BQ3c_upV.js","./timeSupport-CgxzvHRi.js","./QueryEngineCapabilities-CsRUnGk7.js","./SnappingCandidate-DGkpYqI6.js","./FixedIntervalBinParameters-C0F4Of-B.js","./FeatureStore-B3a_PKEq.js","./BoundsStore-DLKQSb8X.js","./PooledRBush-ZSi71vAM.js","./optimizedFeatureQueryEngineAdapter-C9VQ4vHI.js","./clientSideDefaults-CosFTHh7.js","./EdgeProcessingWorker-C2hyz2tY.js","./workerHelper-D6kbVbVW.js","./InterleavedLayout-BhPKt9YT.js","./BufferView-9v5e6nNs.js","./types-BKo2foNY.js","./edgeProcessing-L5zuwn_c.js","./deduplicate-DskR1Cbb.js","./Indices-C2L6u2Tl.js","./VertexAttribute-BfkzOMLV.js","./glUtil-Cwizz-kW.js","./VertexElementDescriptor-BLyltQyJ.js","./Normals-BiqlnleA.js","./ElevationSamplerWorker-DbeCnssM.js","./MeshLocalVertexSpace-gcPMf-CD.js","./vertexSpaceConversion-DSIdGhMF.js","./mat3f64-B5o_lm6j.js","./mat4f64-q_b6UJoq.js","./spatialReferenceEllipsoidUtils-Dz2mLNZy.js","./computeTranslationToOriginAndRotation-DKWrUMA7.js","./projectPointToVector-CHG4-r7Z.js","./meshVertexSpaceUtils-DrCiL9DL.js","./vec3-BBCXovm0.js","./vec4-GxkwcTD5.js","./FeatureServiceSnappingSourceWorker-Bi03HwkC.js","./symbologySnappingCandidates-Df1i0e-0.js","./pbfQueryUtils-BcuJGOMr.js","./pbf-B0M-yHGY.js","./query-CJxNopzR.js","./GeoJSONSourceWorker-Dv-Cdjrg.js","./geojson-Dy0w6qrw.js","./sourceUtils-BVVh-5-7.js","./MemorySourceWorker-BpyUfgVu.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-_w0f-6oa.js","./dehydratedFeatures-N6oqTRLu.js","./FeaturePipelineWorker-qe3li5iL.js","./AttributeStore-DBHYyy-D.js","./Utils-T0YFU9wf.js","./UpdateTracking2D-Dv3_CmZH.js","./constants-BFLErLYb.js","./streamLayerUtils-CKwt2uXH.js","./MeshWriterRegistry-CQ5NitZE.js","./TechniqueType-pk2C5RYg.js","./PieChartMeshWriter-DGMxD79k.js","./libtess-wFsCIgAH.js","./earcut-D9gy186-.js","./operatorGeodeticDensify-_JjFddRo.js","./SimpleGeometryCursor-B92kdZ15.js","./geodeticCurveType-CirnHLSB.js","./normalizeUtilsSync-C1Rxqp44.js","./ogcFeatureUtils-gVWQnK-L.js","./bundle-f9Aq1vvB.js","./CircularArray-CujHzHWW.js","./createConnection-Dg0gZVfz.js","./PointCloudWorker-C3Kl6MT_.js","./quat-BQcoqkEr.js","./quatf64-aQ5IuZRd.js","./vec3f32-WCVSSNPR.js","./PointCloudUniqueValueRenderer-BlB9tXgL.js","./I3SBinaryReader-Dkzt4OGo.js","./orientedBoundingBox-yL0t018r.js","./plane-DhQPLlvw.js","./vectorStacks-Dj1B7nlq.js","./RasterWorker-BUKsxQHH.js","./GeographicTransformation-CIGlM9H_.js","./dataUtils-CdGqhJUt.js","./RasterSymbolizer-ZpxL6F7A.js","./rasterFunctionHelper-B0UNcqW0.js","./clipUtils-5C91abGT.js","./rasterProjectionHelper-BdMDFo4k.js","./PolynomialTransform-JyHBoy2O.js","./SceneLayerSnappingSourceWorker-Cy_fhjgV.js","./lineSegment-n3xvWeP5.js","./sphere-lT4jHEk1.js","./Octree-DAUjsidV.js","./SceneLayerWorker-BmTMhkar.js","./projectVectorToVector-VBorir6g.js","./I3SUtil-BAea4TY7.js","./edgeUtils-By2cZvAz.js","./NormalAttribute.glsl-BgviqGPH.js","./glsl-Cj7KC756.js","./ShaderOutput-Bdd80V3g.js","./BindType-BBwFZqyN.js","./WFSSourceWorker-bQuqWoT6.js","./wfsUtils-eUAfT4Ei.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-CUu-k1z9.js","./constants-BwsikM5h.js","./config-DHajyIwB.js","./StyleDefinition-Cvl5sN4y.js","./SourceLayerData-vPm2aKP1.js","./StyleRepository-B15nlGvI.js","./Feature3DPipelineWorker-CAJr3hYr.js","./dehydratedFeatureUtils-Bjt-3H3H.js","./hydratedFeatures-BkBbw7j3.js","./OutputColorHighlightOID.glsl-rjk6BECg.js","./videoUtils-C3p41cg4.js","./requestImageUtils-Bqh02_ch.js","./basicInterfaces-N86vRvDz.js","./TextureFormat-1mYWTFa-.js","./triangle-BVKjt3TI.js","./renderState-OfwbDnX1.js","./boundedPlane-Cqp7G8rW.js","./HUDMaterial.glsl-B0eTQOId.js","./ShaderBuilder-BlXlXEdp.js","./HUDMaterial-LlJyrCbI.js","./primitiveObjectSymbolUtils-DlmgQ-Xr.js","./IntersectorType-gQim6TH1.js","./RealisticTree.glsl-BUYuUMBM.js","./TextureCompressionWorker-BCnrKRIz.js","./layersLoader-CzVyBa2Y.js","./featureLayerUtils-BkBxcTzd.js","./originUtils-B9-5DzgR.js","./utils-EWUXl1qu.js","./saveUtils-D-c2pjCn.js","./FeatureLayerSource-mJN_-YUV.js","./External-CWdDqePy.js","./applyEditsUtils-C7u6-lZs.js","./MeshTransform-BMARsew2.js","./axisAngleDegrees-BeBocomO.js","./editingSupport-QAQm3eGs.js","./QueryTask-CnTFPoN5.js","./executeForIds-XJBuHTPb.js","./executeQueryJSON-BX4uoEM2.js","./AttributeBinsQuery-D2Qo_L_L.js","./Popup-BlhyPn_i.js","./unitFormatUtils-C02B0Hf2.js","./quantityUtils-Dke5ZBFg.js","./AttachmentInfo-Cu9ymcEn.js","./featureUtils-BgmjVrLC.js","./ReactiveSet-Cq1gU0lb.js","./layersCreator-BYAc1_-l.js","./webglDeps-B72dlKRj.js","./ProgramTemplate-Duc7xG90.js","./FramebufferObject-DNwzVKDE.js","./NestedMap-BVvDppQU.js","./mapViewDeps-JO4CtM-D.js","./FeatureCommandQueue-CVRwANgv.js","./GraphShaderModule-BLCGKQ3s.js","./utils-D1aunJJr.js","./WGLContainer-DcqVRYdX.js","./Container-BlbZ0xWQ.js","./SDFHelper-DbcjcW93.js","./GridShader-BDDc3kJZ.js","./testSVGPremultipliedAlpha-DuGpO55Q.js","./SymbolFader-B71k26ct.js","./RenderingContext-qdyIZik5.js","./utils-fGsrrNvP.js","./utils-ehcGqGxa.js","./projectOperator-B4Wp1W-w.js","./GraphicsView2D-BT0eJ1SS.js","./GraphicContainer-DsPHNG-y.js","./AGraphicContainer-BxwGH99b.js","./TechniqueInstance-B8bNRasI.js","./TileContainer-OJUdVmvR.js","./gridUtils-CRpdGjv1.js","./geodesicUtils-CAuugM9k.js","./TileLayerView2D-DdxyKjFV.js","./imageUtils-O2FqAHHY.js","./BitmapTechnique-B0j0e3Gg.js","./bitmapUtils-BMhs2hkL.js","./LayerView-nsd8F1uo.js","./HighlightGraphicContainer-BPkOx6Xu.js","./RefreshableLayerView-BPeGuifn.js","./MapServiceLayerViewHelper-B1RYja3L.js","./drapedUtils-CZBOMBnQ.js","./popupUtils-lpnfhTqA.js","./FeatureLayerView2D-DWV63rcx.js","./timeSupport-lsDeGPF3.js","./AttributeBinsFeatureSet-ByX2zCw6.js","./constants-B4mRqufT.js","./BaseDynamicLayerView2D-B0e-fPc8.js","./BitmapContainer-CvZ0ZXe1.js","./ExportStrategy-BUhIqYzG.js","./CatalogLayerView2D-CjUPEjBx.js","./CatalogDynamicGroupLayerView2D-Cy-8C4Tw.js","./CatalogFootprintLayerView2D-_S2Nu_HN.js","./GeoRSSLayerView2D-D8uOqKV6.js","./GraphicsLayerView2D-BugWlqTu.js","./GroupLayerView2D-CrIVzk0o.js","./ImageryLayerView2D-D5kUDuVe.js","./RasterVFDisplayObject-DOlVH6kw.js","./ImageryTileLayerView2D-C1MnQeSV.js","./rasterFieldUtils-R_DGfA5j.js","./rasterUtils-BuDtav2N.js","./RawBlockCache-CyuaYqNm.js","./KMLLayerView2D-CAvlstjW.js","./kmlUtils-BPWOTCPG.js","./KnowledgeGraphLayerView2D-Ca3Iv70P.js","./MapImageLayerView2D-C7WYjgVP.js","./MapNotesLayerView2D-9f0wvXxW.js","./MediaLayerView2D-ClmpHz4R.js","./mediaLayerUtils-CcnlVH7_.js","./OverlayContainer-0THRWuNm.js","./OGCFeatureLayerView2D-BvnPRKUZ.js","./RouteLayerView2D-D5CCcXWE.js","./Stop-BXVcEp_J.js","./networkEnums-CkPA32cS.js","./StreamLayerView2D-BmHlgZxt.js","./SubtypeGroupLayerView2D-C4GNINP1.js","./VectorTileLayerView2D-BKKUerx9.js","./VideoLayerView2D-z76qfROc.js","./videoUtils-DaVbubpv.js","./WMSLayerView2D-DcpMRZx3.js","./ExportWMSImageParameters-DklZXMFW.js","./WMTSLayerView2D-PtBemMvN.js","./apng-C7bWhGbr.js","./webdocSaveUtils-fUnLtHGt.js","./basemapUtils-DdULP2Xm.js","./resourceUtils-LcoDqvwN.js","./resourceUtils-BKmot9_j.js","./queryAssociations-C7yJYKAZ.js","./Association-DQwXf_a8.js","./synthesizeAssociationGeometries-BzG-hLYU.js"])))=>i.map(i=>d[i]);
var Eme=Object.getPrototypeOf;var Ime=Reflect.get;var N9=t=>{throw TypeError(t)};var DL=(t,e,i)=>e.has(t)||N9("Cannot "+i);var ue=(t,e,i)=>(DL(t,e,"read from private field"),i?i.call(t):e.get(t)),at=(t,e,i)=>e.has(t)?N9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Je=(t,e,i,r)=>(DL(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),us=(t,e,i)=>(DL(t,e,"access private method"),i);var NL=(t,e,i)=>Ime(Eme(t),i,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();function u(t,e,i,r){var s,n=arguments.length,o=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,i,o):s(e,i))||o);return n>3&&o&&Object.defineProperty(e,i,o),o}function ltt(t,e){return function(i,r){e(i,r,t)}}function ctt(t,e,i,r){function s(n){return n instanceof i?n:new i((function(o){o(n)}))}return new(i||(i=Promise))((function(n,o){function a(h){try{c(r.next(h))}catch(y){o(y)}}function l(h){try{c(r.throw(h))}catch(y){o(y)}}function c(h){h.done?n(h.value):s(h.value).then(a,l)}c((r=r.apply(t,[])).next())}))}function utt(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),t.stack.push({value:e,dispose:r,async:i})}return e}var Cme=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function htt(t){function e(n){t.error=t.hasError?new Cme(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}var i,r=0;function s(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(s);if(i.dispose){var n=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(n).then(s,(function(o){return e(o),s()}))}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}let sf;function ce(t){return typeof sf[t]=="function"?sf[t]=sf[t](globalThis):sf[t]}var yX,gX,vX,bX;sf=(yX=globalThis.dojoConfig)!=null&&yX.has||(gX=globalThis.esriConfig)!=null&&gX.has?{...(vX=globalThis.dojoConfig)==null?void 0:vX.has,...(bX=globalThis.esriConfig)==null?void 0:bX.has}:{},ce.add=(t,e,i,r)=>{(r||sf[t]===void 0)&&(sf[t]=e),i&&ce(t)},ce.cache=sf,ce.add("big-integer-warning-enabled",!0),ce.add("esri-deprecation-warnings",!0),ce.add("esri-tests-disable-screenshots",!1),ce.add("esri-tests-use-full-window",!1),ce.add("esri-tests-post-to-influx",!0),ce.add("esri-cim-animations-enable-status","enabled"),ce.add("esri-cim-animations-spotlight",!1),ce.add("esri-cim-animations-freeze-time",!1),(()=>{var e;ce.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ce.add("host-browser",t),ce.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ce.add("dom",t),ce("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,n=parseFloat(s);if(ce.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ce.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ce.add("khtml",s.includes("Konqueror")?n:void 0),ce.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ce.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ce.add("webkit",!ce("wp")&&!ce("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ce.add("chrome",!ce("edge")&&!ce("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ce.add("android",!ce("wp")&&parseFloat(r.split("Android ")[1])||void 0),ce.add("safari",!s.includes("Safari")||ce("wp")||ce("chrome")||ce("android")||ce("edge")||ce("opr")?void 0:parseFloat(s.split("Version/")[1])),ce.add("mac",s.includes("Macintosh")),!ce("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));ce.add(o,l),ce.add("ios",l)}ce("webkit")||(!r.includes("Gecko")||ce("wp")||ce("khtml")||ce("edge")||ce.add("mozilla",n),ce("mozilla")&&ce.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ce.add("esri-mobile",e),i&&ce.add("esri-iPhone",i),ce.add("esri-geolocation",!!navigator.geolocation)}ce.add("esri-wasm","WebAssembly"in globalThis),ce.add("esri-performance-mode-frames-between-render",20),ce.add("esri-force-performance-mode",!1),ce.add("esri-shared-array-buffer",(()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e})),ce.add("wasm-simd",(()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))})),ce.add("esri-atomics","Atomics"in globalThis),ce.add("esri-workers","Worker"in globalThis),ce.add("web-feat:cache","caches"in globalThis),ce.add("esri-workers-arraybuffer-transfer",!ce("safari")||Number(ce("safari"))>=12),ce.add("workers-pool-size",8),ce.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ce.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ce.add("featurelayer-fast-triangulation-enabled",!0),ce.add("featurelayer-animation-enabled",!0),ce.add("featurelayer-snapshot-enabled",!0),ce.add("featurelayer-snapshot-initial-tolerance",0),ce.add("featurelayer-snapshot-point-min-threshold",8e4),ce.add("featurelayer-snapshot-point-max-threshold",4e5),ce.add("featurelayer-snapshot-multipoint-min-threshold",2e4),ce.add("featurelayer-snapshot-multipoint-max-threshold",1e5),ce.add("featurelayer-snapshot-polygon-min-threshold",1e3),ce.add("featurelayer-snapshot-polygon-max-threshold",2e3),ce.add("featurelayer-snapshot-polyline-min-threshold",1e3),ce.add("featurelayer-snapshot-polyline-max-threshold",2e3),ce.add("featurelayer-snapshot-max-vertex-count",25e4),ce.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),ce.add("featurelayer-snapshot-concurrency",4),ce.add("featurelayer-snapshot-coverage",.1),ce.add("featurelayer-query-max-depth",4),ce.add("featurelayer-query-pausing-enabled",!1),ce.add("featurelayer-query-tile-concurrency",4),ce.add("featurelayer-query-tile-max-features",6e5),ce.add("featurelayer-advanced-symbols",!1),ce.add("featurelayer-pbf",!0),ce.add("featurelayer-pbf-statistics",!1),ce.add("feature-layers-workers",!0),ce.add("feature-polyline-generalization-factor",1),ce.add("mapview-transitions-duration",200),ce.add("mapview-essential-goto-duration",200),ce.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ce.add("mapserver-pbf-version-support",10.81),ce.add("mapservice-popup-identify-max-tolerance",20),ce.add("request-queue-concurrency-hosted",16),ce.add("request-queue-concurrency-non-hosted",4),ce.add("curve-densification-coarse-segments",128),ce.add("curve-densification-max-segments",2e3),ce.add("curve-densification-min-segments",3),ce.add("curve-densification-pixel-deviation",.5),ce.add("view-readyState-waiting-delay",1e3),ce.add("gradient-depth-bias",.01),ce.add("gradient-depth-epsilon",1e-8),ce.add("enable-feature:esri-compress-textures",!0),ce("host-webworker")||ce("host-browser")&&(ce.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),ce.add("esri-image-decode",(()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then((()=>{ce.add("esri-image-decode",!0,!0,!0)})).catch((()=>{ce.add("esri-image-decode",!1,!0,!0)}))}return!1})),ce.add("esri-url-encodes-apostrophe",(()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")})))})();const F9=new WeakMap;function Tme(t,e,i=!1){const r=`ðŸ›‘ DEPRECATED - ${e}`;if(!i)return void t.warn(r);let s=F9.get(t);s||(s=new Set,F9.set(t,s)),s.has(e)||(s.add(e),t.warn(r))}const QC="https://www.esriurl.com/";function Mme(t,e,i,r={}){ce("esri-deprecation-warnings")&&kf(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${QC}${i}/`,`Esri's move to web components: ${QC}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function kme(t,e,i,r={}){ce("esri-deprecation-warnings")&&kf(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${QC}${i}/`,`Esri's move to web components: ${QC}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function dtt(t,e,i={}){ce("esri-deprecation-warnings")&&kf(t,`Module: ${e}`,i)}function LX(t,e,i={}){if(ce("esri-deprecation-warnings")){const{moduleName:r}=i;kf(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function RX(t,e,i={}){if(ce("esri-deprecation-warnings")){const{moduleName:r}=i;kf(t,`Property: ${(r?r+"::":"")+e}`,i)}}function Pme(t,e,i={}){ce("esri-deprecation-warnings")&&kf(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function kf(t,e,i={}){if(ce("esri-deprecation-warnings")){const{replacement:r,version:s,see:n,warnOnce:o}=i;let a=e;if(r&&(a+=`
	ðŸ› ï¸ Replacement: ${r}`),s&&(a+=`
	âš™ï¸ Version: ${s}`),n)if(Array.isArray(n)){a+=`
	ðŸ”— See for more details:`;for(const l of n)a+=`
		${l}`}else a+=`
	ðŸ”— See ${n} for more details.`;Tme(t,a,o)}}function ptt(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function Lme(t,e){for(const i of t)if(i!=null&&e(i))return i}function JC(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let h1=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((i=>{e+=i.length})),e}add(e,i){if(JC(e)){const r=this._getOrCreateGroup(i);for(const s of e)B9(s)&&r.push(s)}else B9(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach((r=>r.forEach(e)));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(S$(e))}remove(e){if(typeof e!="string"&&JC(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(z9(this._getGroup(e)),this._groups.delete(S$(e)),this):this}removeAll(){return this._groups.forEach(z9),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(S$(e),i),i}_getGroup(e){return this._groups.get(S$(e))}};function S$(t){return t||"_default_"}function z9(t){for(const e of t)e instanceof h1?e.removeAll():e.remove()}function B9(t){return t!=null&&(!!t.remove||t instanceof h1)}function Att(t){}function Rme(t){return()=>t}function mtt(t){return t}var Lo;let q8=(Lo=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Lo._m}getInt(){return this._seed=(Lo._a*this._seed+Lo._c)%Lo._m,this._seed}getFloat(){return this.getInt()/(Lo._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Lo._m*r}},Lo._m=2147483647,Lo._a=48271,Lo._c=0,Lo);const Ome=1.5,ytt=1/Ome,gtt=.5;function vtt(t,e){return e?t.filter(((i,r,s)=>s.findIndex(e.bind(null,i))===r)):Array.from(new Set(t))}function Dme(t,e,i,r,s,n,o){if(t==null&&r==null)return!0;e=Math.max(0,e),s=Math.max(0,s),i=Math.max(0,i<0?((t==null?void 0:t.length)??0)+i:i),n=Math.max(0,n<0?((r==null?void 0:r.length)??0)+n:n);const a=i-e;if(t==null||r==null||a!==n-s)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[s+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[s+l])return!1;return!0}function rk(t,e,i){return Dme(t,0,(t==null?void 0:t.length)??0,e,0,(e==null?void 0:e.length)??0,i)}function j9(t,e,i){let r,s;return i?(r=e.filter((n=>!t.some((o=>i(o,n))))),s=t.filter((n=>!e.some((o=>i(o,n)))))):(r=e.filter((n=>!t.includes(n))),s=t.filter((n=>!e.includes(n)))),{added:r,removed:s}}function btt(t){return t&&typeof t.length=="number"}let OX=class{constructor(){this.last=0}};const DX=new OX;function gD(t,e,i,r){r=r||DX;const s=Math.max(0,r.last-10);for(let o=s;o<i;++o)if(t[o]===e)return r.last=o,o;const n=Math.min(s,i);for(let o=0;o<n;++o)if(t[o]===e)return r.last=o,o;return-1}function Nme(t,e,i,r){const s=t.length,n=gD(t,e,s,r);if(n!==-1)return t[n]=t[s-1],t.pop(),e}const ml=new Set;function Fme(t,e,i=t.length,r=e.length,s,n){if(r===0||i===0)return i;ml.clear();for(let a=0;a<r;++a)ml.add(e[a]);s=s||DX;const o=Math.max(0,s.last-10);for(let a=o;a<i;++a)if(ml.has(t[a])&&(n==null||n.push(t[a]),ml.delete(t[a]),t[a]=t[i-1],--i,--a,ml.size===0||i===0))return ml.clear(),i;for(let a=0;a<o;++a)if(ml.has(t[a])&&(n==null||n.push(t[a]),ml.delete(t[a]),t[a]=t[i-1],--i,--a,ml.size===0||i===0))return ml.clear(),i;return ml.clear(),i}function _tt(t,e,i){const r=t.length;if(e>=r)return t.slice();const s=W8(i),n=new Set,o=[];for(;o.length<e;){const a=Math.floor(s()*r);n.has(a)||(n.add(a),o.push(t[a]))}return o}function W8(t){return t?(U9.seed=t,()=>U9.getFloat()):Math.random}const U9=new q8;function NX(t,e){if(!t)return t;const i=W8(e);for(let r=t.length-1;r>0;r--){const s=Math.floor(i()*(r+1)),n=t[r];t[r]=t[s],t[s]=n}return t}function Q8(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function os(t,e){return t!=null}const Stt=[];function xtt(t){return t instanceof ArrayBuffer}function J8(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function FX(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function zX(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function Z8(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function BX(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function Y8(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function jX(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function zme(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float16Array"}function sk(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function nk(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function UX(t){return"buffer"in t}const VX=1024;function $tt(t){return nk(t)||sk(t)||Y8(t)||Z8(t)||J8(t)}function Ett(t){return nk(t)||sk(t)}function Itt(t){return nk(t)?179769e303:zme(t)?65504:sk(t)?3402823e32:jX(t)?4294967295:BX(t)?65535:FX(t)||zX(t)?255:Y8(t)?2147483647:Z8(t)?32767:J8(t)?127:256}const Ctt=-32768,Ttt=-2147483648;function Bme(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function ie(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=qX(t);if(e!=null)return e;if(ZC(t))return t.clone();if(GX(t))return t.map(ie);if(HX(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=ie(t[r]);return i}function vD(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=qX(t);if(e!=null)return e;if(GX(t)){let r=!0;const s=t.map((n=>{const o=vD(n);return n!=null&&o==null&&(r=!1),o}));return r?s:null}if(ZC(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(HX(t))return null;const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const s=t[r],n=vD(s);if(s!=null&&n==null)return null;i[r]=n}return i}function ZC(t){return typeof t.clone=="function"}function GX(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function HX(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function V9(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function qX(t){if(J8(t)||FX(t)||zX(t)||Z8(t)||BX(t)||Y8(t)||jX(t)||sk(t)||nk(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,ie(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(ie(i));return e}return null}function X8(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function WX(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&rk(t,e):t instanceof Set?e instanceof Set&&Ume(t,e):t instanceof Map?e instanceof Map&&Vme(t,e):!!V9(t)&&V9(e)&&jme(t,e))}function jme(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function Ume(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function Vme(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const s=e.get(i);if(s!==r||s===void 0&&!e.has(i))return!1}return!0}function K8(t,e,i=!1){return JX(t,e,i)}function px(t,e){if(e!=null)return e[t]||QX(t.split("."),!1,e)}function Jr(t,e,i){const r=t.split("."),s=r.pop(),n=QX(r,!0,i);n&&s&&(n[s]=e)}function G9(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(G9(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(G9(t[i],e[i]))return!0;return!1}return t!==e}function QX(t,e,i){let r=i;for(const s of t){if(r==null)return;if(!(s in r)){if(!e)return;r[s]={}}r=r[s]}return r}function JX(t,e,i){return e?Object.keys(e).reduce(((r,s)=>{if(s==="__proto__")return r;let n=r[s],o=e[s];return n===o?r:n===void 0?(r[s]=ie(o),r):(Array.isArray(o)||Array.isArray(r)?(n=n?Array.isArray(n)?r[s]=n.slice():r[s]=[n]:r[s]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach((a=>{n.includes(a)||n.push(a)})):r[s]=o.slice())):o&&typeof o=="object"?r[s]=JX(n,o,i):r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[s]=o),r)}),t||{}):t}var wX;const li={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:(wX=globalThis.location)==null?void 0:wX.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(K8(li,globalThis.esriConfig,!0),delete li.has),!li.assetsPath){{const t="4.33";li.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}li.defaultAssetsPath=li.assetsPath}const Gme=/\{([^}]+)\}/g;function H9(t){return t??""}function Hf(t,e){return e?t.replaceAll(Gme,typeof e=="object"?(i,r)=>H9(px(r,e)):(i,r)=>H9(e(r))):t}function Mtt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,(i=>e!=null&&e.includes(i)?i:`\\${i}`))}function ZX(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let q9;function Hme(t){return q9??(q9=new DOMParser),q9.parseFromString(t||"","text/html").body.innerText||""}function ktt(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function Ptt(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const W9={info:0,warn:1,error:2,none:3};var ss;let be=(ss=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,ss._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=ss.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,ss._loggers.get(e)||new ss({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!ss._throttlingDisabled){const s=Wme(r),n=this._loggedMessages[e].get(s);if(i==="once"&&n!=null||i==="oncePerTick"&&n&&n>=ss._tickCounter)return;this._loggedMessages[e].set(s,ss._tickCounter),ss._scheduleTickCounterIncrement()}for(const s of li.log.interceptors)if(s(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const s=r[e];if(s!=null)return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",qme)}_matchLevel(e){const i=li.log.level||"warn";return W9[this._parentWithMember("level",i)]<=W9[e]}static _scheduleTickCounterIncrement(){ss._tickCounterScheduled||(ss._tickCounterScheduled=!0,Promise.resolve().then((()=>{ss._tickCounter++,ss._tickCounterScheduled=!1})))}},ss._loggers=new Map,ss._tickCounter=0,ss._tickCounterScheduled=!1,ss._throttlingDisabled=!1,ss);function qme(t,e,...i){console[t](`[${e}]`,...i)}function Wme(...t){return ZX(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function fx(t,e){if(t==null)throw new Error(e??"value is None")}function tr(t){return t==null||t.destroy(),null}function Ltt(t){return t==null||t.dispose(),null}function pr(t){return t==null||t.remove(),null}function Pb(t){return t==null||t.abort(),null}function Rtt(t){return t==null||t.release(),null}function Qme(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function YC(t,e){let i;return t.some(((r,s)=>(i=e(r,s),i!=null))),i??void 0}const YX=Symbol("Accessor-beforeDestroy"),Jme={remove:()=>{}};function Ai(t){return t?{remove(){t&&(t(),t=void 0)}}:Jme}function XX(t){t.forEach((e=>e==null?void 0:e.remove()))}function Ott(t){XX(t),t.length=0}function D0(t){return Ai((()=>XX(t)))}function Dtt(t){return Ai((()=>{var e;return(e=t())==null?void 0:e.remove()}))}function Ntt(t){return Ai((()=>t==null?void 0:t.abort()))}function Ftt(t){return Ai(t!=null?()=>t.destroy():void 0)}function Zme(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function ztt(t){Zme(t)&&t.remove()}function Btt(t){return{[Symbol.dispose](){t.remove()}}}function ho(t){return t.__accessor__??null}function Yme(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function aI(t,e,i){return i?XC(t,e,{policy:i,path:""}):XC(t,e,null)}function XC(t,e,i){return e?Object.keys(e).reduce(((r,s)=>{const n=s;if(n==="__proto__")return r;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${s}`:s,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[n]))return r[n]=e[n],r;if(r[n]===void 0)return r[n]=ie(e[n]),r;let l=r[n],c=e[n];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[n]=l.slice():r[n]=[l]:r[n]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach((h=>{l.includes(h)||l.push(h)})));else if(c&&typeof c=="object")if(i){const h=i.path;i.path=o,r[n]=XC(l,c,i),i.path=h}else r[n]=XC(l,c,null);else r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[n]=c);return r}),t||{}):t}function KX(t){return Array.isArray(t)?t:t.split(".")}function Q9(t){return t.includes(",")?t.split(",").map((e=>e.trim())):[t.trim()]}function Xme(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...Q9(i));return e}return Q9(t)}function eK(t,e,i,r){const s=Xme(e);if(s.length!==1){const n=s.map((o=>r(t,o,i)));return D0(n)}return r(t,s[0],i)}function tK(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const r=ho(e);return Yme(r,i)?r.get(i):e[i]}function iK(t,e,i){if(t==null)return t;const r=tK(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:iK(r,e,i+1)}function Ax(t,e,i=0){return typeof e!="string"||e.includes(".")?iK(t,KX(e),i):tK(e,t)}function il(t,e){return Ax(t,e)}function J9(t,e){return Ax(e,t)!==void 0}const pa={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function mx(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=ie(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function yx(t,e){const i=mx(t);let r=i[e];return r||(r=i[e]={}),r}function Kme(t,e){return aI(t,e,t0e)}const e0e=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function t0e(t){return e0e.test(t)?"replace":"merge"}function i0e(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function r0e(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}var xf;let N0=(xf=class{constructor(e,i,r,s=1,n=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(xf.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):r0e(i)&&i.acquire(...e),i}release(e){e&&!xf.test.disabled&&(this._releaseFunction?this._releaseFunction(e):i0e(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},xf.test={disabled:!1},xf),s0e=class{constructor(e,i){this._observers=e,this._observer=i}remove(){Q8(this._observers,this._observer)}},rK=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return n0e;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const n=i.length;for(let o=0;o<n;++o){const a=i[o];if(a.destroyed)s=!0;else if(a===e){r=!0;break}}return r||(i.push(e),s&&this._removeDestroyedObservers()),new s0e(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&e[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;e[s]=e[s+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const n0e=Ai();var xt;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(xt||(xt={}));const bD=xt.USER+1;function fd(t){switch(t){case"defaults":return xt.DEFAULTS;case"service":return xt.SERVICE;case"portal-item":return xt.PORTAL_ITEM;case"web-scene":return xt.WEB_SCENE;case"web-map":return xt.WEB_MAP;case"link-chart":return xt.LINK_CHART;case"user":return xt.USER;default:return null}}function oS(t){switch(t){case xt.DEFAULTS:return"defaults";case xt.SERVICE:return"service";case xt.PORTAL_ITEM:return"portal-item";case xt.WEB_SCENE:return"web-scene";case xt.WEB_MAP:return"web-map";case xt.LINK_CHART:return"link-chart";case xt.USER:return"user"}}function o0e(t){return oS(t)}const ur={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let ok=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach((e=>{this._handles.push(e.observe(this._observer))})),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const KC=new ok,Qw=[];let l_=KC;function mt(t){l_.onAccessed(t)}let lI=!1,cI=!1;function ju(t,e,i){if(lI)return ez(t,e,i);let r=null;return sK(t),r=e.call(i),nK(),r}function a0e(t,e){return ju(KC,t,e)}function ez(t,e,i){const r=lI;lI=!0,sK(t);let s=null;try{s=e.call(i)}catch(n){cI&&be.getLogger("esri.core.accessorSupport.tracking").error(n)}return nK(),lI=r,s}function sK(t){l_=t,Qw.push(t)}function nK(){const t=Qw.length;if(t>1){const e=Qw.pop();l_=Qw[t-2],e.onTrackingEnd()}else if(t===1){const e=Qw.pop();l_=KC,e.onTrackingEnd()}else l_=KC}function oK(t,e){if(e.flags&ur.DepTrackingInitialized)return;e.flags|=ur.DepTrackingInitialized;const i=cI;cI=!1,e.flags&ur.AutoTracked?ez(e.trackingTarget,e.metadata.get,t):aK(t,e),cI=i}const l0e=[];function aK(t,e){e.flags&ur.ExplicitlyTracking||(e.flags|=ur.ExplicitlyTracking,ez(e.trackingTarget,(()=>{const i=e.metadata.dependsOn||l0e;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=KX(r);for(let n=0,o=t;n<s.length&&o!=null&&typeof o=="object";++n)o=Z9(o,s[n],n!==s.length-1)}else Z9(t,r,!1)})),e.flags&=-129)}function Z9(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const s=ho(t);if(s){const n=s.propertiesByName.get(r);n&&(mt(n),oK(t,n))}return i?t[r]:void 0}let Y9=class extends rK{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new ok(this),this.flags=0,this.flags=ur.Dirty|(i.nonNullable?ur.NonNullable:0)|(i.hasOwnProperty("value")?ur.HasDefaultValue:0)|(i.get===void 0?ur.DepTrackingInitialized:0)|(i.dependsOn===void 0?ur.AutoTracked:0)}destroy(){this.flags&ur.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&mt(this);const i=e.store,r=this.propertyName,s=this.flags,n=i.get(r);if(s&ur.Computing||~s&ur.Dirty&&i.has(r))return n;this.flags|=ur.Computing;const o=e.host;let a;s&ur.AutoTracked?a=ju(this.trackingTarget,this.metadata.get,o):(aK(o,this),a=this.metadata.get.call(o)),this.flags|=ur.DepTrackingInitialized,i.set(r,a,xt.COMPUTED);const l=i.get(r);return l===n?this.flags&=-2:a0e(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&ur.Overridden&&(this.flags|=ur.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}},c0e=class lK{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new lK;return this._values.forEach(((r,s)=>{e&&e.has(s)||i.set(s,ie(r))})),i}get(e){return this._values.get(e)}originOf(){return xt.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function ay(t,e,i){return t!==void 0}function X9(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&ur.NonNullable)||(r.lifecycle,!1))}let u0e=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=pa.INITIALIZING,this.store=new c0e,this.mutable=!0,this._origin=xt.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new Y9(r,i[r]);this.propertiesByName.set(r,s)}this.metadata=i}initialize(){this.lifecycle=pa.CONSTRUCTING}constructed(){this.lifecycle=pa.CONSTRUCTED}destroy(){this.lifecycle=pa.DESTROYED,this.propertiesByName.forEach((e=>e.destroy()))}get initialized(){return this.lifecycle!==pa.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!ay(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&mt(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&ur.HasDefaultValue)return"defaults"}return oS(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(ay(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);ay(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const s=this.propertiesByName.get(i);if(!ay(s))return"";const n=new ok,o=ju(n,(()=>{var c;return(c=s.metadata.get)==null?void 0:c.call(e)}));let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const l=n.accessed??new Set;if(l.size===0)return a;r+="  ";for(const c of l)c instanceof Y9&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const s=this.propertiesByName.get(e);if(ay(s))return this._setAtOrigin(s,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&ur.Overridden)}clearOrigin(e,i){const r=this.store,s=this.propertiesByName.get(e);if(!ay(s))return;const n=r.isAtOrigin(e,i)&&!(s.flags&ur.Overridden);r.delete(e,i),n&&s.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&ur.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!X9(r,e,i,this))return;const s=r.metadata.cast;if(s){const n=this._cast(s,i),{valid:o,value:a}=n;if(FL.release(n),!o)return;i=a}r.flags|=ur.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!X9(r,e,i,this))return;const s=r.metadata.cast;if(s){const o=this._cast(s,i),{valid:a,value:l}=o;if(FL.release(o),!a)return;i=l}const n=r.metadata.set;n?n.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=fd(e)}getDefaultOrigin(){return oS(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==pa.INITIALIZING?this._origin:xt.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const s=this.store,n=e.propertyName;if(s.isAtOrigin(n,r)&&X8(i,s.get(n))&&~e.flags&ur.Overridden)return;const o=s.isBelowOrigin(n,r)||s.isAtOrigin(n,r);o&&e.invalidate(),s.set(n,i,r),o&&e.commit(),oK(this.host,e)}_cast(e,i){const r=FL.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},h0e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const FL=new N0(h0e);function d0e(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((i,r)=>r===""?"$":(px(r,e)??"").toString()))}let cK=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&d0e(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},te=class uK extends cK{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ie(i)}catch{return"[object]"}})))}}catch(e){throw be.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new uK(e.name,e.message,e.details)}};te.prototype.type="error";function eT(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))eT(t,r,e[r]);else{if(e.includes(".")){const s=e.split("."),n=s.splice(-1,1)[0];return void eT(il(t,s),n,i)}const r=t.__accessor__;r!=null&&p0e(e,r),t[e]=i}}function p0e(t,e){if(ce("esri-unknown-property-errors")&&!f0e(t,e))throw new te("set:unknown-property",A0e(t,e))}function f0e(t,e){return e.metadata[t]!=null}function A0e(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let m0e;function y0e(){return m0e}var K9;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(K9||(K9={}));function g0e(t){t.length=0}let io=class{constructor(e=50,i=50){this._pool=new N0(Array,void 0,g0e,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return zL.acquire()}static release(e){return zL.release(e)}static prune(){zL.prune()}};const zL=new io(100);let hK=class extends N0{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const x$=[];function tT(t){x$.push(t),x$.length===1&&queueMicrotask((()=>{const e=x$.slice();x$.length=0;for(const i of e)i()}))}let c_=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort(((e,i)=>e-i))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((e,i)=>e+i),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var wD;(function(t){const e=(n,o,a,l)=>{let c=o,h=o;const y=a>>>1,g=n[c-1];for(;h<=y;){h=c<<1,h<a&&l(n[h-1],n[h])<0&&++h;const _=n[h-1];if(l(_,g)<=0)break;n[c-1]=_,c=h}n[c-1]=g},i=(n,o)=>n<o?-1:n>o?1:0;function r(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)e(n,h,a,l);const c=o+1;for(let h=a-1;h>o;h--){const y=n[o];n[o]=n[h],n[h]=y,e(n,c,h,l)}}function*s(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)e(n,h,a,l),yield;const c=o+1;for(let h=a-1;h>o;h--){const y=n[o];n[o]=n[h],n[h]=y,e(n,c,h,l),yield}}t.sort=r,t.iterableSort=s})(wD||(wD={}));const eU=wD,v0e=1.5,b0e=1.1;let u_=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new OX,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>tU(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];e(s)&&i.push(s)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,tU(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=gD(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(gD(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=Fme(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){eU.sort(this.data,0,this.length,e)}iterableSort(e){return eU.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)if(e.call(i,r[n]))return r[n]}filterInPlace(e,i){let r=0;for(let s=0;s<this._length;++s){const n=this.data[s];e.call(i,n,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)e.call(i,r[n],n,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=e.call(i,this.data[s],s,this.data);return r}reduce(e,i){let r=i;for(let s=0;s<this.length;++s)r=e(r,this.data[s],s,this.data);return r}has(e){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function tU(t){t.data.length>v0e*t.length&&(t.data.length=Math.floor(t.length*b0e))}function w0e(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Ai((()=>t.clearTimeout(r)))}}}const d1=w0e(globalThis);function ak(t){return _0e(t)||dK(t)}function _0e(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function dK(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function p1(t,e,i){if(!ak(t))throw new TypeError("target is not a Evented or EventTarget object");return dK(t)?S0e(t,e,i):t.on(e,i)}function S0e(t,e,i,r){if(Array.isArray(e)){const s=e.slice();for(const n of s)t.addEventListener(n,i,r);return Ai((()=>{for(const n of s)t.removeEventListener(n,i,r)}))}return t.addEventListener(e,i,r),Ai((()=>t.removeEventListener(e,i,r)))}function pK(t,e,i){if(!ak(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=p1(t,e,(s=>{r.remove(),i.call(t,s)}));return r}function Hi(t="Aborted"){return new te("AbortError",t)}function ir(t,e="Aborted"){if(cl(t))throw Hi(e)}function gx(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function cl(t){const e=gx(t);return e!=null&&e.aborted}function Jc(t){if(Zs(t))throw t}function iU(t){if(!Zs(t))throw t}function ac(t,e){const i=gx(t);if(i!=null){if(!i.aborted)return pK(i,"abort",(()=>e()));e()}}function tz(t,e){const i=gx(t);if(i!=null)return ir(i),pK(i,"abort",(()=>e(Hi())))}function fK(t,e){return gx(e)==null?t:new Promise(((i,r)=>{let s=ac(e,(()=>r(Hi())));const n=()=>{s=pr(s)};t.then(n,n),t.then(i,r)}))}function Zs(t){return(t==null?void 0:t.name)==="AbortError"}async function aS(t){try{return await t}catch(e){if(!Zs(e))throw e;return}}async function Cm(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map((o=>t[o])),s=await Cm(r),n={};return i.map(((o,a)=>n[o]=s[a])),n}const e=t;return Promise.allSettled(e).then((i=>Array.from(e,((r,s)=>{const n=i[s];return n.status==="fulfilled"?{promise:r,value:n.value}:{promise:r,error:n.reason}}))))}async function x0e(t){return(await Promise.allSettled(t)).filter((e=>e.status==="fulfilled")).map((e=>e.value))}async function Xtt(t){return(await Promise.allSettled(t)).filter((e=>e.status==="rejected")).map((e=>e.reason))}function iz(t,e=void 0,i){const r=new AbortController;return ac(i,(()=>r.abort())),new Promise(((s,n)=>{let o=setTimeout((()=>{o=0,s(e)}),t);ac(r,(()=>{o&&(clearTimeout(o),n(Hi()))}))}))}function Ktt(t,e,i,r){const s=i&&"abort"in i?i:null;r!=null||s||(r=i);let n=setTimeout((()=>{n=0,s==null||s.abort()}),e);const o=()=>r||new te("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then((a=>{if(n===0)throw o();return clearTimeout(n),a}),(a=>{throw clearTimeout(n),n===0?o():a}))}function $0e(t,e){const i=new AbortController,r=setTimeout((()=>i.abort()),e);return ac(t,(()=>{i.abort(),clearTimeout(r)})),{...t,signal:i.signal}}function Ku(t){return t&&typeof t.then=="function"}function _D(t){return Ku(t)?t:Promise.resolve(t)}function vx(t,e=-1){let i,r,s,n,o=null;const a=(...l)=>{if(i){r=l,n&&n.reject(Hi()),n=_a();const g=n.promise;if(o){const _=o;o=null,_.abort()}return g}if(s=n||_a(),n=null,e>0){const g=new AbortController;i=_D(t(...l,g.signal));const _=i;iz(e).then((()=>{i===_&&(n?g.abort():o=g)}))}else i=1,i=_D(t(...l));const c=()=>{const g=r;r=s=i=o=null,g!=null&&a(...g)},h=i,y=s;return h.then(c,c),h.then(y.resolve,y.reject),y.promise};return a}function _a(){let t,e;const i=new Promise(((s,n)=>{t=s,e=n})),r=s=>{t(s)};return r.resolve=s=>t(s),r.reject=s=>e(s),r.timeout=(s,n)=>d1.setTimeout((()=>r.reject(n)),s),r.promise=i,r}function eit(t,e){e.then(t.resolve,t.reject)}async function rU(t){await Promise.resolve(),ir(t)}function tit(t){return t}function E0e(t){return 1e3*t}function iit(t){return t}function rit(t){return .001*t}let I0e=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},C0e=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},SD=0;const iw={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},xD=["prepare","preRender","render","postRender","update","finish"],$D=[],p0=new u_;let T0e=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,AK()}};function M0e(){Wm!=null&&(cancelAnimationFrame(Wm),Wm=requestAnimationFrame(rz))}function AK(){Wm==null&&(SD=performance.now(),Wm=requestAnimationFrame(rz))}const iT={frameTasks:p0,willDispatch:!1,clearFrameTasks:k0e,dispatch:yK,executeFrameTasks:P0e,reschedule:M0e};function bx(t){const e=new C0e(t);return $D.push(e),iT.willDispatch||(iT.willDispatch=!0,tT(yK)),e}function Lb(t){const e=new I0e(t);return p0.push(e),AK(),new T0e(e)}let Wm=null;function k0e(t=!1){p0.forAll((e=>{e.removed=!0})),t&&mK()}function rz(){const t=performance.now();Wm=null,Wm=p0.some((i=>!i.paused&&!i.removed))?requestAnimationFrame(rz):null,iT.executeFrameTasks(t)}function P0e(t){const e=t-SD;SD=t;const i=1e3/60,r=Math.max(0,e-i);iw.time=t,iw.frameDuration=i-r;for(let s=0;s<xD.length;s++){const n=performance.now(),o=xD[s];p0.forAll((a=>{var l;a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(iw.elapsedFrameTime=performance.now()-t,iw.deltaTime=a.ticks===0?0:e,(l=a.phases[o])==null||l.call(a,iw)))})),D0e[s].push(performance.now()-n)}mK(),N0e.push(performance.now()-t)}const $$=new u_;function mK(){p0.forAll((t=>{t.removed&&$$.push(t)})),p0.removeUnorderedMany($$.data,$$.length),$$.clear()}function yK(){for(;$D.length;){const t=$D.shift();t.isActive&&t.callback()}iT.willDispatch=!1}function L0e(t=1,e){const i=_a(),r=()=>{cl(e)?i.reject(Hi()):t===0?i():(--t,tT((()=>r())))};return r(),i.promise}function R0e(t){return L0e(1,t)}async function O0e(t){await R0e(t),await new Promise((e=>requestAnimationFrame((()=>{t!=null&&t.aborted||e()}))))}const D0e=xD.map((t=>new c_(t))),N0e=new c_("total");function gK(t,e){for(const i of t.values())if(e(i))return!0;return!1}function rT(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function sU(t,e){return e!=null&&t.add(e),t}function sz(t,e){const i=new Set;return rT(i,t),rT(i,e),i}function F0e(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function ait(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function lit(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function z0e(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function B0e(t,e){return z0e(sz(t,e),F0e(t,e))}let j0e=0;function uI(){return++j0e}let wx=class extends ok{constructor(e){super(new U0e(e)),this._observer&&nU.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&nU.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},U0e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=V0e}};const nU=new FinalizationRegistry((t=>{var e;(e=t.deref())==null||e.destroy()}));function V0e(){}let pv=!1;const sT=[];function vK(t,e){let i=new wx(n),r=null,s=!1;function n(){if(!i||s)return;if(pv)return void _K(n);const a=r;i.clear(),pv=!0,s=!0,r=ju(i,t),s=!1,pv=!1,e(r,a),SK()}function o(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=ju(i,t),s=!1,Ai(o)}function bK(t,e){let i=new wx(s),r=null;function s(){e(r,o)}function n(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=ju(i,t),r):null}return o(),Ai(n)}function wK(t,e){let i=!1,r=!1;const s=!!(e!=null&&e.sync);let n=new wx((()=>{i||r||(r=!0,s?o():queueMicrotask(o))}));function o(){r=!1,n&&!i&&(pv?_K(o):(n.clear(),pv=!0,i=!0,ju(n,t),i=!1,pv=!1,SK()))}function a(){n&&(n.destroy(),n=null)}return i=!0,ju(n,t),i=!1,Ai(a)}function _K(t){sT.includes(t)||sT.unshift(t)}function SK(){for(;sT.length;)sT.pop()()}var h_;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(h_||(h_={}));var o0;let nz=(o0=class{constructor(){this.uid=uI(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,s,n){return this.pool.acquire(h_.Untracked,e,i,r,s,n,X8)}static acquireTracked(e,i,r,s){return this.pool.acquire(h_.Tracked,e,i,r,null,null,s)}notify(e,i){this.type===h_.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,s,n,o,a){this.uid=uI(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=uI(),this.removed=!0}},o0.pool=new hK(o0),o0);const hI=new io,_d=new Set;let nT;function oT(t){_d.delete(t),_d.add(t),nT||(nT=bx(q0e))}function G0e(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function H0e(t){for(const e of _d.values())e.target===t&&(e.removed=!0)}function q0e(){let t=10;for(;nT&&t--;){nT=null;const e=W0e(),i=hI.acquire();for(const r of e){const s=r.uid;G0e(r),s===r.uid&&r.removed&&i.push(r)}for(const r of _d)r.removed&&(i.push(r),_d.delete(r));for(const r of i)nz.pool.release(r);hI.release(i),hI.release(e),ED.forEach((r=>r()))}}function W0e(){const t=hI.acquire();t.length=_d.size;let e=0;for(const i of _d)t[e]=i,++e;return _d.clear(),t}const ED=new Set;function Q0e(t){return ED.add(t),Ai((()=>ED.delete(t)))}function J0e(t,e,i){let r=eK(t,e,i,((s,n,o)=>{let a,l,c=bK((()=>Ax(s,n)),((h,y)=>{var g;((g=s.__accessor__)==null?void 0:g.lifecycle)===pa.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=nz.acquireUntracked(h,o,y,s,n),l=a.uid),oT(a))}));return Ai((()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,oT(a)),a=null),r=c=null}))}));return r}function Z0e(t,e,i){const r=eK(t,e,i,((s,n,o)=>{let a=!1;return vK((()=>Ax(s,n)),((l,c)=>{s.__accessor__.lifecycle!==pa.DESTROYED?a||(a=!0,X8(c,l)||o.call(s,l,c,n,s),a=!1):r.remove()}))}));return r}function Y0e(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==pa.DESTROYED?r?Z0e(t,e,i):J0e(t,e,i):Ai()}function X0e(t,e,i){let r,s,n=bK(t,((o,a)=>{r&&r.uid!==s?n.remove():(r||(r=nz.acquireTracked(o,e,a,i),s=r.uid),oT(r))}));return Ai((()=>{n.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,oT(r)),r=null),n=null}))}function K0e(t,e,i){let r=!1;return vK(t,((s,n)=>{r||(r=!0,i(n,s)||e(s,n),r=!1)}))}function eye(t,e,i=!1,r=WX){return i?K0e(t,e,r):X0e(t,e,r)}function oU(t){return gK(_d,(e=>e.oldValue===t))}function tye(t,e){for(const i of t.values())if(e(i))return!0;return!1}function hit(t,e){for(const i of t.values())if(e(i))return i;return null}function F0(t,e,i){const r=t.get(e);if(r!==void 0)return r;const s=i();return t.set(e,s),s}function dit(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const Qm=()=>be.getLogger("esri.core.accessorSupport.ensureTypes");function iye(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(Qm().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function rye(t){return t==null?t:!!t}function _x(t){return t==null?t:t.toString()}function ro(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function oz(t){return t==null?t:Math.round(parseFloat(t))}function sye(t){return null}function nye(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function xK(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function aT(t,e){return e!=null&&t&&!(e instanceof t)}function $K(t){return t&&"isCollection"in t}function aU(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function oye(t,e){if(!(e!=null&&e.constructor)||!$K(e.constructor))return ID(t,e)?e:new t(e);const i=aU(t.prototype.itemType),r=aU(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(ID(t,e),e):new t(e):e}function ID(t,e){return!!xK(e)&&(Qm().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+lk(t)+"'"),!0)}function Sx(t,e){return e==null?e:$K(t)?oye(t,e):aT(t,e)?ID(t,e)?e:new t(e):e}function lk(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const aye=new WeakMap;function lye(t){switch(t){case Number:return e=>ro(e);case Kt:return oz;case Boolean:return rye;case String:return _x;case Date:return iye;case f1:return sye;default:return F0(aye,t,(()=>Sx.bind(null,t)))}}function fr(t,e){const i=lye(t);return arguments.length===1?i:i(e)}function lS(t,e,i){return arguments.length===1?lS.bind(null,t):e&&(Array.isArray(e)?e.map((r=>t(r,i))):[t(e,i)])}function cye(t,e){return arguments.length===1?lS((i=>fr(t,i))):lS((i=>fr(t,i)),e)}function EK(t,e,i){return e!==0&&Array.isArray(i)?i.map((r=>EK(t,e-1,r))):t(i)}function lT(t,e,i){if(arguments.length===2)return n=>lT(t,e,n);if(!i)return i;i=EK(t,e,i);let r=e,s=i;for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let n=0;n<r;n++)i=[i];return i}function uye(t,e,i){return arguments.length===2?lT((r=>fr(t,r)),e):lT((r=>fr(t,r)),e,i)}function IK(t){return!!Array.isArray(t)&&!t.some((e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)}))}function CD(t,e){if(arguments.length===2)return CD(t).call(null,e);const i=new Set,r=t.filter((a=>typeof a!="function")),s=t.filter((a=>typeof a=="function"));for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(i.has(a)||s.some((y=>c==="string"&&y===String||c==="number"&&y===Number)))||c==="object"&&s.some((y=>!aT(a,y)))?a:(h&&r.length?(n||(n=r.map((y=>typeof y=="string"?`'${y}'`:`${y}`)).join(", ")),Qm().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map((y=>lk(y))).join(", ")),Qm().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Qm().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Uu(t,e){if(arguments.length===2)return Uu(t).call(null,e);const i={},r=[],s=[];for(const l in t.typeMap){const c=t.typeMap[l];i[l]=fr(c),r.push(lk(c)),s.push(l)}const n=()=>`'${r.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!aT(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,h=i[c];if(!h)return Qm().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!aT(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!xK(l)){const y={};for(const g in l)g!==t.key&&(y[g]=l[g]);return h(y)}return h(l)}}let Kt=class{},f1=class{};const Ait={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function hye(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function CK(t){switch(t.type){case"native":return fr(t.value);case"array":return lS(CK(t.value));case"one-of":return dye(t);default:return null}}function dye(t){let e=null;return(i,r)=>MD(i,t)?i:(e==null&&(e=TD(t)),Qm().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function TD(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Kt:return"integer";case Date:return"date";case f1:return"null";default:return lk(t.value)}case"array":return`array of ${TD(t.value)}`;case"one-of":{const e=t.values.map((i=>TD(i)));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function MD(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Kt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case f1:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some((i=>!MD(i,e.value)));case"one-of":return e.values.some((i=>MD(t,i)))}}function A(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),s=yx(e,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in t&&be.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=r.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const n=t.aliasOf;if(n){const l=typeof n=="string"?n:n.source,c=typeof n=="string"?null:n.overridable===!0;let h;s.dependsOn=[l],s.get=function(){let y=il(this,l);if(typeof y=="function"){h||(h=l.split(".").slice(0,-1).join("."));const g=il(this,h);g&&(y=y.bind(g))}return y},s.readOnly||(s.set=c?function(y){this._override(i,y)}:function(y){eT(this,l,y)})}const o=t.type,a=t.types;if(!s.cast){let l;o?l=pye(o):a&&(l=Array.isArray(a)?lS(Uu(a[0])):Uu(a)),t.cast=fye(t.cast,l)}Kme(s,t),t.range&&(s.cast=nye(s.cast,t.range))}}function az(t,e,i){const r=yx(t,i);r.json||(r.json={});let s=r.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function pye(t){let e=0,i=t;if(hye(t))return CK(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(IK(r))return e===0?CD(r):lT(CD(r),e);if(e===1)return cye(r);if(e>1)return uye(r,e);const s=t;return s.from?s.from:fr(s)}function fye(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}function Aye(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const s=e[r];i[r].forEach((n=>{e[n]=s})),delete e[r]}}}let Sa=class extends cK{constructor(e,i,r){super(e,i,r)}};Sa.prototype.type="warning";function TK(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const kD=()=>be.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function lU(t,e,i){var r,s;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((s=e.read)==null?void 0:s.enabled)===!1||gye(t)&&Jr("read.reader",A1(t),e))}function A1(t){var i,r;const e=t.ndimArray??0;if(e>1)return yye(t);if(e===1)return cU(t);if("type"in t&&kK(t.type)){const s=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,n=cU(typeof s=="function"?{type:s}:{types:s});return(o,a,l)=>{const c=n(o,a,l);return c&&new t.type(c)}}return lz(t)}function lz(t){return"type"in t?mye(t.type):vye(t.types)}function mye(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void kD().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const n=new t;return n.read(e,r),n}:t.fromJSON}function MK(t,e,i,r){return r!==0&&Array.isArray(e)?e.map((s=>MK(t,s,i,r-1))):t(e,void 0,i)}function yye(t){const e=lz(t),i=MK.bind(null,e),r=t.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=i(s,o,r);let a=r,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)s=[s];return s}}function cU(t){const e=lz(t);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=e(i,void 0,s);return n!==void 0?[n]:void 0}}function kK(t){if(!TK(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?cz(e.Type):PK(e.Type))}function gye(t){return"types"in t?PK(t.types):cz(t.type)}function cz(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||kK(t))}function PK(t){for(const e in t.typeMap)if(!cz(t.typeMap[e]))return!1;return!0}function vye(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void kD().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=bye(t));const l=t.key;if(typeof l!="string")return;const c=s[l],h=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!h){const g=`Type '${c||"unknown"}' is not supported`;return o!=null&&o.messages&&s&&o.messages.push(new Sa(`${i}:unsupported`,g,{definition:s,context:o})),void kD().error(g)}const y=new h;return y.read(s,o),r?r(y):y}}function bye(t){var i,r;const e={};for(const s in t.typeMap){const n=t.typeMap[s],o=mx(n.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;if((i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){e[a.json.type[0]]=n;continue}const l=(r=a.json)==null?void 0:r.write;if(!(l!=null&&l.writer)){e[s]=n;continue}const c=l.target,h=typeof c=="string"?c:t.key,y={};l.writer(s,y,h),y[h]&&(e[y[h]]=n)}return e}function wye(t){if(t.json||(t.json={}),hU(t.json),dU(t.json),uU(t.json),t.json.origins)for(const e in t.json.origins)hU(t.json.origins[e]),dU(t.json.origins[e]),uU(t.json.origins[e]);return!0}function uU(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function hU(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function dU(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function pU(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&TK(t.type))?e.write.writer=xye:i>1?e.write.writer=$ye(i):e.types?Array.isArray(e.types)?e.write.writer=Sye(e.types[0]):e.write.writer=_ye(e.types):e.write.writer=cS}function _ye(t){return(e,i,r,s)=>e?LK(e,t,s)?cS(e,i,r,s):void 0:cS(e,i,r,s)}function LK(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new te(`${r}:unsupported`,s,{definition:t,context:i})),be.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function Sye(t){return(e,i,r,s)=>!e||!Array.isArray(e)?cS(e,i,r,s):cS(e.filter((n=>LK(n,t,s))),i,r,s)}function cS(t,e,i,r){Jr(i,cT(t,r),e)}function cT(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?uT(t):t}function uT(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function xye(t,e,i,r){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map((n=>cT(n,r))),typeof s.toArray=="function"&&(s=s.toArray())):s=[cT(t,r)],Jr(i,s,e)}function RK(t,e,i){return i!==0&&Array.isArray(t)?t.map((r=>RK(r,e,i-1))):cT(t,e)}function $ye(t){return(e,i,r,s)=>{let n;if(e===null)n=null;else{n=RK(e,s,t);let o=t,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}Jr(r,n,i)}}function Eye(t,e){return uz(t,"any",e==null?void 0:e.origin)}function PD(t,e){return uz(t,"read",e==null?void 0:e.origin)}function OK(t,e){return uz(t,"write",e==null?void 0:e.origin)}function uz(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let s;s=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],s&&(e==="any"||e in s)&&(r=s)}return r}function Iye(t){var i;const e=Cye(t);if(t.json.origins)for(const r in t.json.origins){const s=t.json.origins[r],n=s.types?Tye(s):e;lU(n,s,!1),s.types&&!s.write&&((i=t.json.write)!=null&&i.enabled)&&(s.write={...t.json.write}),pU(n,s)}lU(e,t.json,!0),pU(e,t.json)}function Cye(t){return t.json.types?LD(t.json):t.type?DK(t):LD(t)}function Tye(t){return t.type?DK(t):LD(t)}function DK(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!IK(i);)i=i[0],e++;return{type:i,ndimArray:e}}function LD(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function Mye(t){wye(t)&&(Aye(t),Iye(t))}const BL=new Set,jL=new Set;function B(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,Pye(e);const i=[],r=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!BL.has(s.initialize)&&(BL.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!jL.has(s.destroy)&&(jL.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);BL.clear(),jL.clear();const n=class extends e{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const c=this[YX];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=pa.DESTROYING,l=!0,c.call(this);for(let h=0;h<r.length;h++)r[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=mx(e.prototype),n.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function kye(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&mt(r);const s=i.store;return s.has(t)?s.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function Pye(t){const e=t.prototype,i=mx(e),r={};for(const s of Object.getOwnPropertyNames(i)){const n=i[s];Mye(n),r[s]={enumerable:!0,configurable:!0,get:kye(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&n.readOnly?fU("read-only",s):a.lifecycle===pa.CONSTRUCTED&&n.constructOnly?fU("construct-only",s):void a.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const fU=(t,e)=>{be.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var AU,mU;function Lye(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const mc=Symbol("Accessor-Handles"),UL=Symbol("Accessor-Initialized");var $f;let et=($f=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}mx(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const h=this.inherited;let y;this.inherited=function(...g){if(n.prototype[a])return n.prototype[a].apply(this,g)};try{y=l.apply(this,c)}catch(g){throw this.inherited=h,g}return this.inherited=h,y}:e[a]}for(const a in i){const l=Lye(i[a]);A(l)(o.prototype,a)}return B(r)(o)}static freeze(e){return e instanceof $f?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof $f?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var r;if(this[AU]=null,this[mU]=!1,this.constructor===$f)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new u0e(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[UL]=!0}initialize(){}[YX](){this[mc]=tr(this[mc])}destroy(){var e;this.destroyed||(H0e(this),this.__accessor__.destroy(),(e=y0e())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[UL]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===pa.DESTROYED||!1}get destroying(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===pa.DESTROYING||!1}commitProperty(e){il(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return eT(this,e,i),this}watch(e,i,r){return LX(be.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),Y0e(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const s of r)s.remove();return}(this[mc]??(this[mc]=new h1)).add(e,i)}removeHandles(e){var i;(i=this[mc])==null||i.remove(e)}removeAllHandles(){var e;(e=this[mc])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[mc])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[mc])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},AU=mc,mU=UL,$f);const NK=t=>{let e=class extends t{clone(){var l;const i=ho(this);fx(i,"unable to clone instance of non-accessor class");const r=i.metadata,s=i.store,n={},o=new Map;for(const c in r){const h=r[c],y=s==null?void 0:s.originOf(c),g=h.clonable;if(h.readOnly||g===!1||y!==xt.USER&&y!==xt.DEFAULTS&&y!==xt.WEB_MAP&&y!==xt.WEB_SCENE)continue;const _=this[c];let S=null;S=typeof g=="function"?g(_):g==="reference"?_:vD(_),_!=null&&S==null||(y===xt.DEFAULTS?o.set(c,S):n[c]=S)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const c=(l=ho(a))==null?void 0:l.store;if(c)for(const[h,y]of o)c.set(h,y,xt.DEFAULTS)}return a}};return e=u([B("esri.core.Clonable")],e),e};let Jw=class extends NK(et){};Jw=u([B("esri.core.Clonable")],Jw),(function(t){t.ClonableMixin=NK})(Jw||(Jw={}));const dt=Jw;let dI=class FK{constructor(){this._emitter=new FK.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){var c;let o=(c=this._listenersMap)==null?void 0:c.get(s);if(!o)return!1;const a=this._target||this;let l=!1;for(const h of o.slice()){const y="deref"in h?h.deref():h;y?y==null||y.call(a,n):l=!0}return l&&(o=o.filter((h=>!("deref"in h)||h.deref()!=null)),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map((l=>this.on(l,n)));return D0(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),Ai((()=>{var c;const a=(c=this._listenersMap)==null?void 0:c.get(s),l=(a==null?void 0:a.indexOf(n))??-1;l>=0&&a.splice(l,1)}))}once(s,n){const o=this.on(s,(a=>{o.remove();const l="deref"in n?n.deref():n;l==null||l.call(null,a)}));return o}hasEventListener(s){var o;const n=(o=this._listenersMap)==null?void 0:o.get(s);return n!=null&&n.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=u([B("esri.core.Evented")],s),s};let i=class extends et{constructor(){super(...arguments),this._emitter=new dI.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=u([B("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(dI||(dI={}));const dc=dI;var $i;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})($i||($i={}));function hz(t){return(e,i)=>{e[i]=t}}let m1=class extends rK{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};function uS(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}var gh;let Rye=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},Oye=class{constructor(e,i,r,s,n){this.target=e,this.added=i,this.removed=r,this.start=s,this.deleteCount=n}};const Pa=new N0(Rye,void 0,(t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}));function yU(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function VL(t){return t?t instanceof Lp?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function GL(t){if(t!=null&&t.length)return t[0]}function Dye(t,e,i,r){const s=Math.min(t.length-i,e.length-r);let n=0;for(;n<s&&t[i+n]===e[r+n];)n++;return n}function zK(t,e,i,r){e&&e.forEach(((s,n,o)=>{t.push(s),zK(t,i.call(r,s,n,o),i,r)}))}const Yd=new Set,Xd=new Set,Kd=new Set,HL=new Map;let Nye=0;var a0;let Lp=(a0=class extends dc.EventedAccessor{static isCollection(e){return e!=null&&e instanceof gh}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new m1,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Nye++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof gh?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return mt(this._observable),this._items}set items(e){this._emitBeforeChanges($i.ADD)||(this._splice(0,this.length,VL(e)),this._emitAfterChanges($i.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,i){if(this.destroyed)return Ai();if(e==="change"){const r=this._chgListeners,s={removed:!1,callback:i};return r.push(s),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),Ai((()=>{s.removed=!0,r.splice(r.indexOf(s),1)}))}return this._emitter.on(e,i)}once(e,i){const r="deref"in i?()=>i.deref():()=>i,s=this.on(e,(n=>{var o;(o=r())==null||o.call(null,n),s.remove()}));return s}add(e,i){if(mt(this._observable),this._emitBeforeChanges($i.ADD))return this;const r=this.getNextIndex(i??null);return this._splice(r,0,[e]),this._emitAfterChanges($i.ADD),this}addMany(e,i=this._items.length){if(mt(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges($i.ADD))return this;const r=this.getNextIndex(i);return this._splice(r,0,VL(e)),this._emitAfterChanges($i.ADD),this}at(e){if(mt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(mt(this._observable),!this.length||this._emitBeforeChanges($i.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges($i.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return mt(this._observable),this._createNewInstance({items:this._items.map(ie)})}concat(...e){mt(this._observable);const i=e.map(VL);return this._createNewInstance({items:this._items.concat(...i)})}drain(e,i){if(mt(this._observable),!this.length||this._emitBeforeChanges($i.REMOVE))return;const r=this._splice(0,this.length),s=r.length;for(let n=0;n<s;n++)e.call(i,r[n],n,r);this._emitAfterChanges($i.REMOVE)}destroyAll(){this.drain(yU)}destroyMany(e){const i=this.removeMany(e);return i.forEach(yU),i}every(e,i){return mt(this._observable),this._items.every(e,i)}filter(e,i){mt(this._observable);const r=arguments.length===2?this._items.filter(e,i):this._items.filter(e);return this._createNewInstance({items:r})}find(e,i){return mt(this._observable),this._items.find(e,i)}findIndex(e,i){return mt(this._observable),this._items.findIndex(e,i)}flatten(e,i){mt(this._observable);const r=[];return zK(r,this,e,i),new gh(r)}forEach(e,i){return mt(this._observable),this._items.forEach(e,i)}getItemAt(e){return mt(this._observable),this._items[e]}getNextIndex(e){mt(this._observable);const i=this.length;return(e=e??i)<0?e=0:e>i&&(e=i),e}includes(e,i=0){return mt(this._observable),this._items.includes(e,i)}indexOf(e,i=0){return mt(this._observable),this._items.indexOf(e,i)}join(e=","){return mt(this._observable),this._items.join(e)}lastIndexOf(e,i=this.length-1){return mt(this._observable),this._items.lastIndexOf(e,i)}map(e,i){mt(this._observable);const r=this._items.map(e,i);return new gh({items:r})}reorder(e,i=this.length-1){mt(this._observable);const r=this.indexOf(e);if(r!==-1){if(i<0?i=0:i>=this.length&&(i=this.length-1),r!==i){if(this._emitBeforeChanges($i.MOVE))return e;this._splice(r,1),this._splice(i,0,[e]),this._emitAfterChanges($i.MOVE)}return e}}pop(){if(mt(this._observable),!this.length||this._emitBeforeChanges($i.REMOVE))return;const e=GL(this._splice(this.length-1,1));return this._emitAfterChanges($i.REMOVE),e}push(...e){return mt(this._observable),this._emitBeforeChanges($i.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges($i.ADD)),this.length}reduce(e,i){mt(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,i):r.reduce(e)}reduceRight(e,i){mt(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,i):r.reduceRight(e)}remove(e){return mt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(mt(this._observable),e<0||e>=this.length||this._emitBeforeChanges($i.REMOVE))return;const i=GL(this._splice(e,1));return this._emitAfterChanges($i.REMOVE),i}removeMany(e){if(mt(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges($i.REMOVE))return[];const i=e instanceof gh?e.toArray():e,r=this._items,s=[],n=i.length;for(let o=0;o<n;o++){const a=i[o],l=r.indexOf(a);if(l>-1){const c=1+Dye(i,r,o+1,l+1),h=this._splice(l,c);h&&h.length>0&&s.push.apply(s,h),o+=c-1}}return this._emitAfterChanges($i.REMOVE),s}reverse(){if(mt(this._observable),this._emitBeforeChanges($i.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges($i.MOVE),this}shift(){if(mt(this._observable),!this.length||this._emitBeforeChanges($i.REMOVE))return;const e=GL(this._splice(0,1));return this._emitAfterChanges($i.REMOVE),e}slice(e=0,i=this.length){return mt(this._observable),this._createNewInstance({items:this._items.slice(e,i)})}some(e,i){return mt(this._observable),this._items.some(e,i)}sort(e){if(mt(this._observable),!this.length||this._emitBeforeChanges($i.MOVE)||!this._requiresSort(e))return this;const i=this._splice(0,this.length);return arguments.length?i.sort(e):i.sort(),this._splice(0,0,i),this._emitAfterChanges($i.MOVE),this}_requiresSort(e=(i,r)=>i===r?0:i<r?-1:1){const i=this.length-1;for(let r=0;r<i;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,i,...r){mt(this._observable),arguments.length===1&&(i=this.length),i??(i=0);const s=(i?$i.REMOVE:0)|(r.length?$i.ADD:0);if(this._emitBeforeChanges(s))return[];const n=this._splice(e,i,r)||[];return this._emitAfterChanges(s),n}toArray(){return mt(this._observable),this._items.slice()}toJSON(e){return mt(this._observable),this.toArray().map((i=>uS(i)?i.toJSON(e):i))}toLocaleString(){return mt(this._observable),this._items.toLocaleString()}toString(){return mt(this._observable),this._items.toString()}unshift(...e){return mt(this._observable),!e.length||this._emitBeforeChanges($i.ADD)||(this._splice(0,0,e),this._emitAfterChanges($i.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,i,r){const s=this._items,n=this.itemType;let o,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=bx((()=>this._dispatchChange()))),e<0&&(e+=this.length),i){if(a=s.splice(e,i),this.hasEventListener("before-remove")){const l=Pa.acquire();l.target=this,l.cancellable=!0;for(let c=0,h=a.length;c<h;c++)o=a[c],l.reset(o),this.emit("before-remove",l),l.defaultPrevented&&(a.splice(c,1),s.splice(e,0,o),e+=1,c-=1,h-=1);Pa.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=Pa.acquire();l.target=this,l.cancellable=!1;const c=a.length;for(let h=0;h<c;h++)l.reset(a[h]),this.emit("after-remove",l);Pa.release(l)}}if(r!=null&&r.length){if(n){const y=[];for(const g of r){const _=n.ensureType(g);_==null&&g!=null||y.push(_)}r=y}const l=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),h=e===this.length;if(l||c){const y=Pa.acquire();y.target=this,y.cancellable=!0;const g=Pa.acquire();g.target=this,g.cancellable=!1;for(const _ of r)l?(y.reset(_),this.emit("before-add",y),y.defaultPrevented||(h?s.push(_):s.splice(e++,0,_),this._set("length",s.length),c&&(g.reset(_),this.emit("after-add",g)))):(h?s.push(_):s.splice(e++,0,_),this._set("length",s.length),g.reset(_),this.emit("after-add",g));Pa.release(g),Pa.release(y)}else{if(h)for(const y of r)s.push(y);else s.splice(e,0,...r);this._set("length",s.length)}}if((r!=null&&r.length||a!=null&&a.length)&&this._notifyChangeEvent(r,a),this.hasEventListener("after-splice")){const l=new Oye(this,r,a,e,i);this.emit("after-splice",l)}return a}_emitBeforeChanges(e){let i=!1;if(this.hasEventListener("before-changes")){const r=Pa.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),i=r.defaultPrevented,Pa.release(r)}return i}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const i=Pa.acquire();i.target=this,i.cancellable=!1,i.type=e,this.emit("after-changes",i),Pa.release(i)}this._observable.notify()}_notifyChangeEvent(e,i){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:i})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const i of e){const r=i.changes;Yd.clear(),Xd.clear(),Kd.clear();for(const{added:c,removed:h}of r){if(c)if(Kd.size===0&&Xd.size===0)for(const y of c)Yd.add(y);else for(const y of c)Xd.has(y)?(Kd.add(y),Xd.delete(y)):Kd.has(y)||Yd.add(y);if(h)if(Kd.size===0&&Yd.size===0)for(const y of h)Xd.add(y);else for(const y of h)Yd.has(y)?Yd.delete(y):(Kd.delete(y),Xd.add(y))}const s=io.acquire();Yd.forEach((c=>{s.push(c)}));const n=io.acquire();Xd.forEach((c=>{n.push(c)}));const o=this._items,a=i.items,l=io.acquire();if(Kd.forEach((c=>{a.indexOf(c)!==o.indexOf(c)&&l.push(c)})),i.listeners&&(s.length||n.length||l.length)){const c={target:this,added:s,removed:n,moved:l},h=i.listeners.length;for(let y=0;y<h;y++){const g=i.listeners[y];g.removed||g.callback.call(this,c)}}io.release(s),io.release(n),io.release(l)}Yd.clear(),Xd.clear(),Kd.clear()}},gh=a0,a0.ofType=e=>{if(!e)return gh;if(HL.has(e))return HL.get(e);let i=null;if(typeof e=="function")i=e.prototype.declaredClass;else if(e.base)i=e.base.prototype.declaredClass;else for(const s in e.typeMap){const n=e.typeMap[s].prototype.declaredClass;i?i+=` | ${n}`:i=n}let r=class extends gh{};return u([hz({Type:e,ensureType:typeof e=="function"?fr(e):Uu(e)})],r.prototype,"itemType",void 0),r=u([B(`esri.core.Collection<${i}>`)],r),HL.set(e,r),r},a0);u([A()],Lp.prototype,"_updating",void 0),u([A()],Lp.prototype,"length",void 0),u([A()],Lp.prototype,"items",null),u([A({readOnly:!0})],Lp.prototype,"updating",null),Lp=gh=u([B("esri.core.Collection")],Lp);const qe=Lp;let Fye=class BK{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new BK;return this._values.forEach(((r,s)=>{e&&e.has(s)||i.set(s,ie(r.value),r.origin)})),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??xt.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter((r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===e}))}set(e,i,r){if((r=this._normalizeOrigin(r))===xt.DEFAULTS){const s=this._values.get(e);if((s==null?void 0:s.origin)!=null&&s.origin>r)return}this._values.set(e,new zye(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach((({value:i},r)=>e(i,r)))}_normalizeOrigin(e){if(e!=null)return e===xt.DEFAULTS?e:xt.USER}},zye=class{constructor(e,i){this.value=e,this.origin=i}};function jK(t,e,i){e.keys().forEach((s=>{i.set(s,e.get(s),xt.DEFAULTS)}));const r=t.metadata;Object.keys(r).forEach((s=>{t.internalGet(s)&&i.set(s,t.internalGet(s),xt.DEFAULTS)}))}function Bye(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&J9(r,i))return!0}else for(const s of r)if(s===e||s.includes(".")&&s.indexOf(e)===0&&J9(s,i))return!0;return!1}function jye(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function Uye(t,e,i,r,s){let n=PD(e[i],s);jye(n)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))n=PD(e[o],s),Bye(n,i,r)&&(t[o]=!0)}function Vye(t,e,i,r){const s=i.metadata,n=Eye(s[e],r),o=n==null?void 0:n.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const UK={origin:"service"};function VK(t,e,i=UK){if(!e||typeof e!="object")return;const r=ho(t),s=r.metadata,n={};for(const o of Object.getOwnPropertyNames(e))Uye(n,s,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(n)){const a=PD(s[o],i).read,l=a==null?void 0:a.source;let c;c=l&&typeof l=="string"?Ax(e,l):e[o],a!=null&&a.reader&&(c=a.reader.call(t,c,e,i)),c!==void 0&&r.set(o,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||Vye(t,o,r,i)}r.setDefaultOrigin("user")}function GK(t,e,i,r=UK){var n;const s={...r,messages:[]};i(s),(n=s.messages)==null||n.forEach((o=>{o.type!=="warning"||t.loaded?r!=null&&r.messages&&r.messages.push(o):t.loadWarnings.push(o)}))}function Gye(t,e,i,r,s){var o,a;const n={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,r,n,i,s),n}function HK(t,e,i,r,s,n){if(!(r!=null&&r.write))return!1;const o=il(t,i);if(!s&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,n??void 0);a!==void 0&&(s=a)}if(s||(s=r.write),!s||s.enabled===!1||s.layerContainerTypes&&(n!=null&&n.layerContainerType)&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new te("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&(n!=null&&n.messages)?n.messages.push(a):a&&!n&&be.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===xt.DEFAULTS)&&Hye(t,i,n,r,o)||!s.ignoreOrigin&&(n!=null&&n.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<fd(n.origin))}function Hye(t,e,i,r,s){const n=r.default;if(n===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(t,e,i??void 0);return rk(o,s)}return!1}return n===s}function qye(t,e,i,r){const s=ho(t),n=s.metadata,o=OK(n[e],r);return!!o&&HK(t,s,e,o,i,r)}function qK(t,e,i){var n,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return aI(e,t.toJSON(i));const r=ho(t),s=r.metadata;for(const a in s){const l=OK(s[a],i);if(!HK(t,r,a,l,void 0,i))continue;const c=il(t,a),h=Gye(t,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,i);Object.keys(h).length>0&&(e=aI(e,h),(o=(n=i==null?void 0:i.resources)==null?void 0:n.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then((()=>aI(e,h,(()=>"replace-arrays"))))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:o0e(r.store.originOf(a)),newOrigin:i.origin}))}return e}const WK=t=>{let e=class extends t{constructor(...i){super(...i);const r=ho(this),s=r.store,n=new Fye;r.store=n,jK(r,s,n)}read(i,r){VK(this,i,r)}write(i,r){return qK(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Wye.call(this,i,r)}};return e=u([B("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Wye(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let Zw=class extends WK(et){};Zw=u([B("esri.core.JSONSupport")],Zw),(function(t){t.JSONSupportMixin=WK})(Zw||(Zw={}));const pe=Zw,Qye=Object.prototype.toString;function Jye(t){const e="__accessorMetadata__"in t?fr(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Zye.apply(this,i)}}function Zye(t,e,i,r){yx(t,e).cast=r}function Yye(t){return(e,i)=>{yx(e,t).cast=e[i]}}function yi(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&Qye.call(t[0])==="[object Function]"?Jye(t[0]):t.length===1&&typeof t[0]=="string"?Yye(t[0]):void 0}function Me(t,e,i){let r,s;return e===void 0||Array.isArray(e)?(s=t,i=e,r=[void 0]):(s=e,r=Array.isArray(t)?t:[t]),(n,o)=>{const a=n.constructor.prototype;r.forEach((l=>{const c=az(n,l,s);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],i&&(c.read.source=(c.read.source||[]).concat(i))}))}}function Ne(t,e,i){let r,s;return e===void 0?(s=t,r=[void 0]):typeof e!="string"?(s=t,r=[void 0],i=e):(s=e,r=Array.isArray(t)?t:[t]),(n,o)=>{const a=n.constructor.prototype;for(const l of r){const c=az(n,l,s);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=a[o]}}}const Xye="modulepreload",Kye=function(t,e){return new URL(t,e).href},gU={},Ie=function(e,i,r){let s=Promise.resolve();if(i&&i.length>0){let o=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=o(i.map(h=>{if(h=Kye(h,r),h in gU)return;gU[h]=!0;const y=h.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(!!r)for(let E=a.length-1;E>=0;E--){const C=a[E];if(C.href===h&&(!y||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${g}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":Xye,y||(S.as="script"),S.crossOrigin="",S.href=h,c&&S.setAttribute("nonce",c),document.head.appendChild(S),y)return new Promise((E,C)=>{S.addEventListener("load",E),S.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};let qL;async function ege(){return qL==null&&(qL=Ie(()=>import("./WhereClauseCache-C2fq30HW.js"),__vite__mapDeps([0,1]),import.meta.url).then((t=>new t.WhereClauseCache(500,500)))),qL}async function dz(t,e){const i=await ege(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function d_(t,e){return t||(t=null),e||(e=null),t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function RD(t,e){return t||(t=null),e||(e=null),t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function tge(t,e){return e.length===0?null:`${t} IN (${ige(e)})`}function ige(t){return t.map((e=>typeof e=="string"?rge(e):e)).join(",")}function rge(t){return`'${t.replaceAll("'","''")}'`}function f0(t){return typeof t=="number"}function Sit(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function xit(t){return typeof t=="boolean"}function xx(t){return typeof t=="string"||t instanceof String}function sge(t){return t==null||xx(t)}function $it(t){return Array.isArray(t)}function QK(t){return(t==null?void 0:t.declaredClass)==="esri.Graphic"}function Eit(t){return t instanceof Date}class z0 extends Error{}class nge extends z0{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class oge extends z0{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class age extends z0{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Ug extends z0{}class JK extends z0{constructor(e){super(`Invalid unit ${e}`)}}class Cn extends z0{}class ep extends z0{constructor(){super("Zone is an abstract class")}}const Xe="numeric",lc="short",va="long",hT={year:Xe,month:Xe,day:Xe},ZK={year:Xe,month:lc,day:Xe},lge={year:Xe,month:lc,day:Xe,weekday:lc},YK={year:Xe,month:va,day:Xe},XK={year:Xe,month:va,day:Xe,weekday:va},KK={hour:Xe,minute:Xe},eee={hour:Xe,minute:Xe,second:Xe},tee={hour:Xe,minute:Xe,second:Xe,timeZoneName:lc},iee={hour:Xe,minute:Xe,second:Xe,timeZoneName:va},ree={hour:Xe,minute:Xe,hourCycle:"h23"},see={hour:Xe,minute:Xe,second:Xe,hourCycle:"h23"},nee={hour:Xe,minute:Xe,second:Xe,hourCycle:"h23",timeZoneName:lc},oee={hour:Xe,minute:Xe,second:Xe,hourCycle:"h23",timeZoneName:va},aee={year:Xe,month:Xe,day:Xe,hour:Xe,minute:Xe},lee={year:Xe,month:Xe,day:Xe,hour:Xe,minute:Xe,second:Xe},cee={year:Xe,month:lc,day:Xe,hour:Xe,minute:Xe},uee={year:Xe,month:lc,day:Xe,hour:Xe,minute:Xe,second:Xe},cge={year:Xe,month:lc,day:Xe,weekday:lc,hour:Xe,minute:Xe},hee={year:Xe,month:va,day:Xe,hour:Xe,minute:Xe,timeZoneName:lc},dee={year:Xe,month:va,day:Xe,hour:Xe,minute:Xe,second:Xe,timeZoneName:lc},pee={year:Xe,month:va,day:Xe,weekday:va,hour:Xe,minute:Xe,timeZoneName:va},fee={year:Xe,month:va,day:Xe,weekday:va,hour:Xe,minute:Xe,second:Xe,timeZoneName:va};class B0{get type(){throw new ep}get name(){throw new ep}get ianaName(){return this.name}get isUniversal(){throw new ep}offsetName(e,i){throw new ep}formatOffset(e,i){throw new ep}offset(e){throw new ep}equals(e){throw new ep}get isValid(){throw new ep}}let WL=null;class ck extends B0{static get instance(){return WL===null&&(WL=new ck),WL}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return $ee(e,i,r)}formatOffset(e,i){return p_(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const OD=new Map;function uge(t){let e=OD.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),OD.set(t,e)),e}const hge={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function dge(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,n,o,a,l,c,h]=r;return[o,s,n,a,l,c,h]}function pge(t,e){const i=t.formatToParts(e),r=[];for(let s=0;s<i.length;s++){const{type:n,value:o}=i[s],a=hge[n];n==="era"?r[a]=o:Ht(a)||(r[a]=parseInt(o,10))}return r}const QL=new Map;class Go extends B0{static create(e){let i=QL.get(e);return i===void 0&&QL.set(e,i=new Go(e)),i}static resetCache(){QL.clear(),OD.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Go.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return $ee(e,i,r,this.name)}formatOffset(e,i){return p_(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=uge(this.name);let[s,n,o,a,l,c,h]=r.formatToParts?pge(r,i):dge(r,i);a==="BC"&&(s=-Math.abs(s)+1);const g=hk({year:s,month:n,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let _=+i;const S=_%1e3;return _-=S>=0?S:1e3+S,(g-_)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let vU={};function fge(t,e={}){const i=JSON.stringify([t,e]);let r=vU[i];return r||(r=new Intl.ListFormat(t,e),vU[i]=r),r}const DD=new Map;function ND(t,e={}){const i=JSON.stringify([t,e]);let r=DD.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),DD.set(i,r)),r}const FD=new Map;function Age(t,e={}){const i=JSON.stringify([t,e]);let r=FD.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),FD.set(i,r)),r}const zD=new Map;function mge(t,e={}){const{base:i,...r}=e,s=JSON.stringify([t,r]);let n=zD.get(s);return n===void 0&&(n=new Intl.RelativeTimeFormat(t,e),zD.set(s,n)),n}let Yw=null;function yge(){return Yw||(Yw=new Intl.DateTimeFormat().resolvedOptions().locale,Yw)}const BD=new Map;function Aee(t){let e=BD.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),BD.set(t,e)),e}const jD=new Map;function gge(t){let e=jD.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...mee,...e}),jD.set(t,e)}return e}function vge(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,s;try{r=ND(t).resolvedOptions(),s=t}catch{const l=t.substring(0,i);r=ND(l).resolvedOptions(),s=l}const{numberingSystem:n,calendar:o}=r;return[s,n,o]}}function bge(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function wge(t){const e=[];for(let i=1;i<=12;i++){const r=tt.utc(2009,i,1);e.push(t(r))}return e}function _ge(t){const e=[];for(let i=1;i<=7;i++){const r=tt.utc(2016,11,13+i);e.push(t(r))}return e}function E$(t,e,i,r){const s=t.listingMode();return s==="error"?null:s==="en"?i(e):r(e)}function Sge(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||Aee(t.locale).numberingSystem==="latn"}class xge{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:n,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=Age(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):yz(e,3);return fs(i,this.padTo)}}}class $ge{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Go.create(a).valid?(s=a,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=ND(i,n)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Ege{constructor(e,i,r){this.opts={style:"long",...r},!i&&See()&&(this.rtf=mge(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):Qge(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const mee={firstDay:1,minimalDays:4,weekend:[6,7]};class Pi{static fromOpts(e){return Pi.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,s,n=!1){const o=e||Ur.defaultLocale,a=o||(n?"en-US":yge()),l=i||Ur.defaultNumberingSystem,c=r||Ur.defaultOutputCalendar,h=VD(s)||Ur.defaultWeekSettings;return new Pi(a,l,c,h,o)}static resetCache(){Yw=null,DD.clear(),FD.clear(),zD.clear(),BD.clear(),jD.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:s}={}){return Pi.create(e,i,r,s)}constructor(e,i,r,s,n){const[o,a,l]=vge(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||l||null,this.weekSettings=s,this.intl=bge(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Sge(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Pi.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,VD(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return E$(this,e,Cee,()=>{const r=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=wge(n=>this.extract(n,r,"month"))),this.monthsCache[s][e]})}weekdays(e,i=!1){return E$(this,e,kee,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=i?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=_ge(n=>this.extract(n,r,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return E$(this,void 0,()=>Pee,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[tt.utc(2016,11,13,9),tt.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return E$(this,e,Lee,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[tt.utc(-40,1,1),tt.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const s=this.dtFormatter(e,i),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new xge(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new $ge(e,this.intl,i)}relFormatter(e={}){return new Ege(this.intl,this.isEnglish(),e)}listFormatter(e={}){return fge(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Aee(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:xee()?gge(this.locale):mee}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let JL=null;class ms extends B0{static get utcInstance(){return JL===null&&(JL=new ms(0)),JL}static instance(e){return e===0?ms.utcInstance:new ms(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new ms(dk(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${p_(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${p_(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return p_(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Ige extends B0{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Hp(t,e){if(Ht(t)||t===null)return e;if(t instanceof B0)return t;if(Lge(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?ck.instance:i==="utc"||i==="gmt"?ms.utcInstance:ms.parseSpecifier(i)||Go.create(t)}else return gf(t)?ms.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Ige(t)}const pz={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},bU={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Cge=pz.hanidec.replace(/[\[|\]]/g,"").split("");function Tge(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(pz.hanidec)!==-1)e+=Cge.indexOf(t[i]);else for(const s in bU){const[n,o]=bU[s];r>=n&&r<=o&&(e+=r-n)}}return parseInt(e,10)}else return e}const UD=new Map;function Mge(){UD.clear()}function yl({numberingSystem:t},e=""){const i=t||"latn";let r=UD.get(i);r===void 0&&(r=new Map,UD.set(i,r));let s=r.get(e);return s===void 0&&(s=new RegExp(`${pz[i]}${e}`),r.set(e,s)),s}let wU=()=>Date.now(),_U="system",SU=null,xU=null,$U=null,EU=60,IU,CU=null;class Ur{static get now(){return wU}static set now(e){wU=e}static set defaultZone(e){_U=e}static get defaultZone(){return Hp(_U,ck.instance)}static get defaultLocale(){return SU}static set defaultLocale(e){SU=e}static get defaultNumberingSystem(){return xU}static set defaultNumberingSystem(e){xU=e}static get defaultOutputCalendar(){return $U}static set defaultOutputCalendar(e){$U=e}static get defaultWeekSettings(){return CU}static set defaultWeekSettings(e){CU=VD(e)}static get twoDigitCutoffYear(){return EU}static set twoDigitCutoffYear(e){EU=e%100}static get throwOnInvalid(){return IU}static set throwOnInvalid(e){IU=e}static resetCaches(){Pi.resetCache(),Go.resetCache(),tt.resetCache(),Mge()}}class ec{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const yee=[0,31,59,90,120,151,181,212,243,273,304,334],gee=[0,31,60,91,121,152,182,213,244,274,305,335];function rl(t,e){return new ec("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function fz(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function vee(t,e,i){return i+($x(t)?gee:yee)[e-1]}function bee(t,e){const i=$x(t)?gee:yee,r=i.findIndex(n=>n<e),s=e-i[r];return{month:r+1,day:s}}function Az(t,e){return(t-e+7)%7+1}function dT(t,e=4,i=1){const{year:r,month:s,day:n}=t,o=vee(r,s,n),a=Az(fz(r,s,n),i);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=hS(c,e,i)):l>hS(r,e,i)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...pk(t)}}function TU(t,e=4,i=1){const{weekYear:r,weekNumber:s,weekday:n}=t,o=Az(fz(r,1,e),i),a=fv(r);let l=s*7+n-o-7+e,c;l<1?(c=r-1,l+=fv(c)):l>a?(c=r+1,l-=fv(r)):c=r;const{month:h,day:y}=bee(c,l);return{year:c,month:h,day:y,...pk(t)}}function ZL(t){const{year:e,month:i,day:r}=t,s=vee(e,i,r);return{year:e,ordinal:s,...pk(t)}}function MU(t){const{year:e,ordinal:i}=t,{month:r,day:s}=bee(e,i);return{year:e,month:r,day:s,...pk(t)}}function kU(t,e){if(!Ht(t.localWeekday)||!Ht(t.localWeekNumber)||!Ht(t.localWeekYear)){if(!Ht(t.weekday)||!Ht(t.weekNumber)||!Ht(t.weekYear))throw new Ug("Cannot mix locale-based week fields with ISO-based week fields");return Ht(t.localWeekday)||(t.weekday=t.localWeekday),Ht(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Ht(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function kge(t,e=4,i=1){const r=uk(t.weekYear),s=sl(t.weekNumber,1,hS(t.weekYear,e,i)),n=sl(t.weekday,1,7);return r?s?n?!1:rl("weekday",t.weekday):rl("week",t.weekNumber):rl("weekYear",t.weekYear)}function Pge(t){const e=uk(t.year),i=sl(t.ordinal,1,fv(t.year));return e?i?!1:rl("ordinal",t.ordinal):rl("year",t.year)}function wee(t){const e=uk(t.year),i=sl(t.month,1,12),r=sl(t.day,1,pT(t.year,t.month));return e?i?r?!1:rl("day",t.day):rl("month",t.month):rl("year",t.year)}function _ee(t){const{hour:e,minute:i,second:r,millisecond:s}=t,n=sl(e,0,23)||e===24&&i===0&&r===0&&s===0,o=sl(i,0,59),a=sl(r,0,59),l=sl(s,0,999);return n?o?a?l?!1:rl("millisecond",s):rl("second",r):rl("minute",i):rl("hour",e)}function Ht(t){return typeof t>"u"}function gf(t){return typeof t=="number"}function uk(t){return typeof t=="number"&&t%1===0}function Lge(t){return typeof t=="string"}function Rge(t){return Object.prototype.toString.call(t)==="[object Date]"}function See(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function xee(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Oge(t){return Array.isArray(t)?t:[t]}function PU(t,e,i){if(t.length!==0)return t.reduce((r,s)=>{const n=[e(s),s];return r&&i(r[0],n[0])===r[0]?r:n},null)[1]}function Dge(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function Rb(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function VD(t){if(t==null)return null;if(typeof t!="object")throw new Cn("Week settings must be an object");if(!sl(t.firstDay,1,7)||!sl(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!sl(e,1,7)))throw new Cn("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function sl(t,e,i){return uk(t)&&t>=e&&t<=i}function Nge(t,e){return t-e*Math.floor(t/e)}function fs(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Rp(t){if(!(Ht(t)||t===null||t===""))return parseInt(t,10)}function oA(t){if(!(Ht(t)||t===null||t===""))return parseFloat(t)}function mz(t){if(!(Ht(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function yz(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function $x(t){return t%4===0&&(t%100!==0||t%400===0)}function fv(t){return $x(t)?366:365}function pT(t,e){const i=Nge(e-1,12)+1,r=t+(e-i)/12;return i===2?$x(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function hk(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function LU(t,e,i){return-Az(fz(t,1,e),i)+e-1}function hS(t,e=4,i=1){const r=LU(t,e,i),s=LU(t+1,e,i);return(fv(t)-r+s)/7}function GD(t){return t>99?t:t>Ur.twoDigitCutoffYear?1900+t:2e3+t}function $ee(t,e,i,r=null){const s=new Date(t),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(n.timeZone=r);const o={timeZoneName:e,...n},a=new Intl.DateTimeFormat(i,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function dk(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function Eee(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Cn(`Invalid unit value ${t}`);return e}function fT(t,e){const i={};for(const r in t)if(Rb(t,r)){const s=t[r];if(s==null)continue;i[e(r)]=Eee(s)}return i}function p_(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${fs(i,2)}:${fs(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${fs(i,2)}${fs(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function pk(t){return Dge(t,["hour","minute","second","millisecond"])}const Fge=["January","February","March","April","May","June","July","August","September","October","November","December"],Iee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],zge=["J","F","M","A","M","J","J","A","S","O","N","D"];function Cee(t){switch(t){case"narrow":return[...zge];case"short":return[...Iee];case"long":return[...Fge];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Tee=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Mee=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Bge=["M","T","W","T","F","S","S"];function kee(t){switch(t){case"narrow":return[...Bge];case"short":return[...Mee];case"long":return[...Tee];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Pee=["AM","PM"],jge=["Before Christ","Anno Domini"],Uge=["BC","AD"],Vge=["B","A"];function Lee(t){switch(t){case"narrow":return[...Vge];case"short":return[...Uge];case"long":return[...jge];default:return null}}function Gge(t){return Pee[t.hour<12?0:1]}function Hge(t,e){return kee(e)[t.weekday-1]}function qge(t,e){return Cee(e)[t.month-1]}function Wge(t,e){return Lee(e)[t.year<0?0:1]}function Qge(t,e,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&n){const y=t==="days";switch(e){case 1:return y?"tomorrow":`next ${s[t][0]}`;case-1:return y?"yesterday":`last ${s[t][0]}`;case 0:return y?"today":`this ${s[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=s[t],h=r?l?c[1]:c[2]||c[1]:l?s[t][0]:t;return o?`${a} ${h} ago`:`in ${a} ${h}`}function RU(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const Jge={D:hT,DD:ZK,DDD:YK,DDDD:XK,t:KK,tt:eee,ttt:tee,tttt:iee,T:ree,TT:see,TTT:nee,TTTT:oee,f:aee,ff:cee,fff:hee,ffff:pee,F:lee,FF:uee,FFF:dee,FFFF:fee};class Dn{static create(e,i={}){return new Dn(e,i)}static parseFormat(e){let i=null,r="",s=!1;const n=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),i=null,r="",s=!s):s||a===i?r+=a:(r.length>0&&n.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),n}static macroTokenToFormatOpts(e){return Jge[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return fs(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(_,S)=>this.loc.extract(e,_,S),o=_=>e.isOffsetFixed&&e.offset===0&&_.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,_.format):"",a=()=>r?Gge(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(_,S)=>r?qge(e,_):n(S?{month:_}:{month:_,day:"numeric"},"month"),c=(_,S)=>r?Hge(e,_):n(S?{weekday:_}:{weekday:_,month:"long",day:"numeric"},"weekday"),h=_=>{const S=Dn.macroTokenToFormatOpts(_);return S?this.formatWithSystemDefault(e,S):_},y=_=>r?Wge(e,_):n({era:_},"era"),g=_=>{switch(_){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(e.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(e.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(e.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return y("short");case"GG":return y("long");case"GGGGG":return y("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(_)}};return RU(Dn.parseFormat(i),g)}formatDurationFromString(e,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>c=>{const h=r(c);return h?this.num(l.get(h),c.length):c},n=Dn.parseFormat(i),o=n.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return RU(n,s(a))}}const Ree=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function y1(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function g1(...t){return e=>t.reduce(([i,r,s],n)=>{const[o,a,l]=n(e,s);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function v1(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const s=i.exec(t);if(s)return r(s)}return[null,null]}function Oee(...t){return(e,i)=>{const r={};let s;for(s=0;s<t.length;s++)r[t[s]]=Rp(e[i+s]);return[r,null,i+s]}}const Dee=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Zge=`(?:${Dee.source}?(?:\\[(${Ree.source})\\])?)?`,gz=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Nee=RegExp(`${gz.source}${Zge}`),vz=RegExp(`(?:T${Nee.source})?`),Yge=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Xge=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Kge=/(\d{4})-?(\d{3})/,eve=Oee("weekYear","weekNumber","weekDay"),tve=Oee("year","ordinal"),ive=/(\d{4})-(\d\d)-(\d\d)/,Fee=RegExp(`${gz.source} ?(?:${Dee.source}|(${Ree.source}))?`),rve=RegExp(`(?: ${Fee.source})?`);function Av(t,e,i){const r=t[e];return Ht(r)?i:Rp(r)}function sve(t,e){return[{year:Av(t,e),month:Av(t,e+1,1),day:Av(t,e+2,1)},null,e+3]}function b1(t,e){return[{hours:Av(t,e,0),minutes:Av(t,e+1,0),seconds:Av(t,e+2,0),milliseconds:mz(t[e+3])},null,e+4]}function Ex(t,e){const i=!t[e]&&!t[e+1],r=dk(t[e+1],t[e+2]),s=i?null:ms.instance(r);return[{},s,e+3]}function Ix(t,e){const i=t[e]?Go.create(t[e]):null;return[{},i,e+1]}const nve=RegExp(`^T?${gz.source}$`),ove=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function ave(t){const[e,i,r,s,n,o,a,l,c]=t,h=e[0]==="-",y=l&&l[0]==="-",g=(_,S=!1)=>_!==void 0&&(S||_&&h)?-_:_;return[{years:g(oA(i)),months:g(oA(r)),weeks:g(oA(s)),days:g(oA(n)),hours:g(oA(o)),minutes:g(oA(a)),seconds:g(oA(l),l==="-0"),milliseconds:g(mz(c),y)}]}const lve={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function bz(t,e,i,r,s,n,o){const a={year:e.length===2?GD(Rp(e)):Rp(e),month:Iee.indexOf(i)+1,day:Rp(r),hour:Rp(s),minute:Rp(n)};return o&&(a.second=Rp(o)),t&&(a.weekday=t.length>3?Tee.indexOf(t)+1:Mee.indexOf(t)+1),a}const cve=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function uve(t){const[,e,i,r,s,n,o,a,l,c,h,y]=t,g=bz(e,s,r,i,n,o,a);let _;return l?_=lve[l]:c?_=0:_=dk(h,y),[g,new ms(_)]}function hve(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const dve=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,pve=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,fve=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function OU(t){const[,e,i,r,s,n,o,a]=t;return[bz(e,s,r,i,n,o,a),ms.utcInstance]}function Ave(t){const[,e,i,r,s,n,o,a]=t;return[bz(e,a,i,r,s,n,o),ms.utcInstance]}const mve=y1(Yge,vz),yve=y1(Xge,vz),gve=y1(Kge,vz),vve=y1(Nee),zee=g1(sve,b1,Ex,Ix),bve=g1(eve,b1,Ex,Ix),wve=g1(tve,b1,Ex,Ix),_ve=g1(b1,Ex,Ix);function Sve(t){return v1(t,[mve,zee],[yve,bve],[gve,wve],[vve,_ve])}function xve(t){return v1(hve(t),[cve,uve])}function $ve(t){return v1(t,[dve,OU],[pve,OU],[fve,Ave])}function Eve(t){return v1(t,[ove,ave])}const Ive=g1(b1);function Cve(t){return v1(t,[nve,Ive])}const Tve=y1(ive,rve),Mve=y1(Fee),kve=g1(b1,Ex,Ix);function Pve(t){return v1(t,[Tve,zee],[Mve,kve])}const DU="Invalid Duration",Bee={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Lve={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Bee},La=146097/400,ly=146097/4800,Rve={years:{quarters:4,months:12,weeks:La/7,days:La,hours:La*24,minutes:La*24*60,seconds:La*24*60*60,milliseconds:La*24*60*60*1e3},quarters:{months:3,weeks:La/28,days:La/4,hours:La*24/4,minutes:La*24*60/4,seconds:La*24*60*60/4,milliseconds:La*24*60*60*1e3/4},months:{weeks:ly/7,days:ly,hours:ly*24,minutes:ly*24*60,seconds:ly*24*60*60,milliseconds:ly*24*60*60*1e3},...Bee},Tm=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Ove=Tm.slice(0).reverse();function tp(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new bi(r)}function jee(t,e){let i=e.milliseconds??0;for(const r of Ove.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function NU(t,e){const i=jee(t,e)<0?-1:1;Tm.reduceRight((r,s)=>{if(Ht(e[s]))return r;if(r){const n=e[r]*i,o=t[s][r],a=Math.floor(n/o);e[s]+=a*i,e[r]-=a*o*i}return s},null),Tm.reduce((r,s)=>{if(Ht(e[s]))return r;if(r){const n=e[r]%1;e[r]-=n,e[s]+=n*t[r][s]}return s},null)}function Dve(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class bi{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?Rve:Lve;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Pi.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return bi.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Cn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new bi({values:fT(e,bi.normalizeUnit),loc:Pi.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(gf(e))return bi.fromMillis(e);if(bi.isDuration(e))return e;if(typeof e=="object")return bi.fromObject(e);throw new Cn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=Eve(e);return r?bi.fromObject(r,i):bi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=Cve(e);return r?bi.fromObject(r,i):bi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Cn("need to specify a reason the Duration is invalid");const r=e instanceof ec?e:new ec(e,i);if(Ur.throwOnInvalid)throw new age(r);return new bi({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new JK(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Dn.create(this.loc,r).formatDurationFromString(this,e):DU}toHuman(e={}){if(!this.isValid)return DU;const i=Tm.map(r=>{const s=this.values[r];return Ht(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=yz(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},tt.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?jee(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=bi.fromDurationLike(e),r={};for(const s of Tm)(Rb(i.values,s)||Rb(this.values,s))&&(r[s]=i.get(s)+this.get(s));return tp(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=bi.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Eee(e(this.values[r],r));return tp(this,{values:i},!0)}get(e){return this[bi.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...fT(e,bi.normalizeUnit)};return tp(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:s,conversionAccuracy:r};return tp(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return NU(this.matrix,e),tp(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Dve(this.normalize().shiftToAll().toObject());return tp(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>bi.normalizeUnit(o));const i={},r={},s=this.toObject();let n;for(const o of Tm)if(e.indexOf(o)>=0){n=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;gf(s[o])&&(a+=s[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else gf(s[o])&&(r[o]=s[o]);for(const o in r)r[o]!==0&&(i[n]+=o===n?r[o]:r[o]/this.matrix[n][o]);return NU(this.matrix,i),tp(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return tp(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of Tm)if(!i(this.values[r],e.values[r]))return!1;return!0}}const cy="Invalid Interval";function Nve(t,e){return!t||!t.isValid?Fr.invalid("missing or invalid start"):!e||!e.isValid?Fr.invalid("missing or invalid end"):e<t?Fr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Fr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Cn("need to specify a reason the Interval is invalid");const r=e instanceof ec?e:new ec(e,i);if(Ur.throwOnInvalid)throw new oge(r);return new Fr({invalid:r})}static fromDateTimes(e,i){const r=rw(e),s=rw(i),n=Nve(r,s);return n??new Fr({start:r,end:s})}static after(e,i){const r=bi.fromDurationLike(i),s=rw(e);return Fr.fromDateTimes(s,s.plus(r))}static before(e,i){const r=bi.fromDurationLike(i),s=rw(e);return Fr.fromDateTimes(s.minus(r),s)}static fromISO(e,i){const[r,s]=(e||"").split("/",2);if(r&&s){let n,o;try{n=tt.fromISO(r,i),o=n.isValid}catch{o=!1}let a,l;try{a=tt.fromISO(s,i),l=a.isValid}catch{l=!1}if(o&&l)return Fr.fromDateTimes(n,a);if(o){const c=bi.fromISO(s,i);if(c.isValid)return Fr.after(n,c)}else if(l){const c=bi.fromISO(r,i);if(c.isValid)return Fr.before(a,c)}}return Fr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let s;return i!=null&&i.useLocaleWeeks?s=this.end.reconfigure({locale:r.locale}):s=this.end,s=s.startOf(e,i),Math.floor(s.diff(r,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Fr.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(rw).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s}=this,n=0;for(;s<this.e;){const o=i[n]||this.e,a=+o>+this.e?this.e:o;r.push(Fr.fromDateTimes(s,a)),s=a,n+=1}return r}splitBy(e){const i=bi.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,n;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push(Fr.fromDateTimes(r,n)),r=n,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Fr.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Fr.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const s=[],n=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&s.push(Fr.fromDateTimes(i,l.time)),i=null);return Fr.merge(s)}difference(...e){return Fr.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:cy}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=hT,i={}){return this.isValid?Dn.create(this.s.loc.clone(i),e).formatInterval(this):cy}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:cy}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:cy}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:cy}toFormat(e,{separator:i=" â€“ "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:cy}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):bi.invalid(this.invalidReason)}mapEndpoints(e){return Fr.fromDateTimes(e(this.s),e(this.e))}}class I${static hasDST(e=Ur.defaultZone){const i=tt.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Go.isValidZone(e)}static normalizeZone(e){return Hp(e,Ur.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Pi.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Pi.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Pi.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Pi.create(i,r,n)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Pi.create(i,r,n)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Pi.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Pi.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Pi.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Pi.create(i,null,"gregory").eras(e)}static features(){return{relative:See(),localeWeek:xee()}}}function FU(t,e){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(bi.fromMillis(r).as("days"))}function Fve(t,e,i){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=FU(l,c);return(h-h%7)/7}],["days",FU]],s={},n=t;let o,a;for(const[l,c]of r)i.indexOf(l)>=0&&(o=l,s[l]=c(t,e),a=n.plus(s),a>e?(s[l]--,t=n.plus(s),t>e&&(a=t,s[l]--,t=n.plus(s))):t=a);return[t,s,a,o]}function zve(t,e,i,r){let[s,n,o,a]=Fve(t,e,i);const l=e-s,c=i.filter(y=>["hours","minutes","seconds","milliseconds"].indexOf(y)>=0);c.length===0&&(o<e&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const h=bi.fromObject(n,r);return c.length>0?bi.fromMillis(l,r).shiftTo(...c).plus(h):h}const Bve="missing Intl.DateTimeFormat.formatToParts support";function Ci(t,e=i=>i){return{regex:t,deser:([i])=>e(Tge(i))}}const jve="Â ",Uee=`[ ${jve}]`,Vee=new RegExp(Uee,"g");function Uve(t){return t.replace(/\./g,"\\.?").replace(Vee,Uee)}function zU(t){return t.replace(/\./g,"").replace(Vee," ").toLowerCase()}function gl(t,e){return t===null?null:{regex:RegExp(t.map(Uve).join("|")),deser:([i])=>t.findIndex(r=>zU(i)===zU(r))+e}}function BU(t,e){return{regex:t,deser:([,i,r])=>dk(i,r),groups:e}}function C$(t){return{regex:t,deser:([e])=>e}}function Vve(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Gve(t,e){const i=yl(e),r=yl(e,"{2}"),s=yl(e,"{3}"),n=yl(e,"{4}"),o=yl(e,"{6}"),a=yl(e,"{1,2}"),l=yl(e,"{1,3}"),c=yl(e,"{1,6}"),h=yl(e,"{1,9}"),y=yl(e,"{2,4}"),g=yl(e,"{4,6}"),_=C=>({regex:RegExp(Vve(C.val)),deser:([M])=>M,literal:!0}),E=(C=>{if(t.literal)return _(C);switch(C.val){case"G":return gl(e.eras("short"),0);case"GG":return gl(e.eras("long"),0);case"y":return Ci(c);case"yy":return Ci(y,GD);case"yyyy":return Ci(n);case"yyyyy":return Ci(g);case"yyyyyy":return Ci(o);case"M":return Ci(a);case"MM":return Ci(r);case"MMM":return gl(e.months("short",!0),1);case"MMMM":return gl(e.months("long",!0),1);case"L":return Ci(a);case"LL":return Ci(r);case"LLL":return gl(e.months("short",!1),1);case"LLLL":return gl(e.months("long",!1),1);case"d":return Ci(a);case"dd":return Ci(r);case"o":return Ci(l);case"ooo":return Ci(s);case"HH":return Ci(r);case"H":return Ci(a);case"hh":return Ci(r);case"h":return Ci(a);case"mm":return Ci(r);case"m":return Ci(a);case"q":return Ci(a);case"qq":return Ci(r);case"s":return Ci(a);case"ss":return Ci(r);case"S":return Ci(l);case"SSS":return Ci(s);case"u":return C$(h);case"uu":return C$(a);case"uuu":return Ci(i);case"a":return gl(e.meridiems(),0);case"kkkk":return Ci(n);case"kk":return Ci(y,GD);case"W":return Ci(a);case"WW":return Ci(r);case"E":case"c":return Ci(i);case"EEE":return gl(e.weekdays("short",!1),1);case"EEEE":return gl(e.weekdays("long",!1),1);case"ccc":return gl(e.weekdays("short",!0),1);case"cccc":return gl(e.weekdays("long",!0),1);case"Z":case"ZZ":return BU(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return BU(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return C$(/[a-z_+-/]{1,256}?/i);case" ":return C$(/[^\S\n\r]/);default:return _(C)}})(t)||{invalidReason:Bve};return E.token=t,E}const Hve={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function qve(t,e,i){const{type:r,value:s}=t;if(r==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const n=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=Hve[o];if(typeof a=="object"&&(a=a[n]),a)return{literal:!1,val:a}}function Wve(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function Qve(t,e,i){const r=t.match(e);if(r){const s={};let n=1;for(const o in i)if(Rb(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(r.slice(n,n+l))),n+=l}return[r,s]}else return[r,{}]}function Jve(t){const e=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Ht(t.z)||(i=Go.create(t.z)),Ht(t.Z)||(i||(i=new ms(t.Z)),r=t.Z),Ht(t.q)||(t.M=(t.q-1)*3+1),Ht(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Ht(t.u)||(t.S=mz(t.u)),[Object.keys(t).reduce((n,o)=>{const a=e(o);return a&&(n[a]=t[o]),n},{}),i,r]}let YL=null;function Zve(){return YL||(YL=tt.fromMillis(1555555555555)),YL}function Yve(t,e){if(t.literal)return t;const i=Dn.macroTokenToFormatOpts(t.val),r=Wee(i,e);return r==null||r.includes(void 0)?t:r}function Gee(t,e){return Array.prototype.concat(...t.map(i=>Yve(i,e)))}class Hee{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=Gee(Dn.parseFormat(i),e),this.units=this.tokens.map(r=>Gve(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,s]=Wve(this.units);this.regex=RegExp(r,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[i,r]=Qve(e,this.regex,this.handlers),[s,n,o]=r?Jve(r):[null,null,void 0];if(Rb(r,"a")&&Rb(r,"H"))throw new Ug("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:s,zone:n,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function qee(t,e,i){return new Hee(t,i).explainFromTokens(e)}function Xve(t,e,i){const{result:r,zone:s,specificOffset:n,invalidReason:o}=qee(t,e,i);return[r,s,n,o]}function Wee(t,e){if(!t)return null;const r=Dn.create(e,t).dtFormatter(Zve()),s=r.formatToParts(),n=r.resolvedOptions();return s.map(o=>qve(o,t,n))}const XL="Invalid DateTime",jU=864e13;function Xw(t){return new ec("unsupported zone",`the zone "${t.name}" is not supported`)}function KL(t){return t.weekData===null&&(t.weekData=dT(t.c)),t.weekData}function eR(t){return t.localWeekData===null&&(t.localWeekData=dT(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function aA(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new tt({...i,...e,old:i})}function Qee(t,e,i){let r=t-e*60*1e3;const s=i.offset(r);if(e===s)return[r,e];r-=(s-e)*60*1e3;const n=i.offset(r);return s===n?[r,s]:[t-Math.min(s,n)*60*1e3,Math.max(s,n)]}function T$(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function pI(t,e,i){return Qee(hk(t),e,i)}function UU(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,n={...t.c,year:r,month:s,day:Math.min(t.c.day,pT(r,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=bi.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=hk(n);let[l,c]=Qee(a,i,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function uy(t,e,i,r,s,n){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=tt.fromObject(t,{...i,zone:l,specificOffset:n});return o?c:c.setZone(a)}else return tt.invalid(new ec("unparsable",`the input "${s}" can't be parsed as ${r}`))}function M$(t,e,i=!0){return t.isValid?Dn.create(Pi.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function tR(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=fs(t.c.year,i?6:4),e?(r+="-",r+=fs(t.c.month),r+="-",r+=fs(t.c.day)):(r+=fs(t.c.month),r+=fs(t.c.day)),r}function VU(t,e,i,r,s,n){let o=fs(t.c.hour);return e?(o+=":",o+=fs(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=fs(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=fs(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=fs(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!n?o+="Z":t.o<0?(o+="-",o+=fs(Math.trunc(-t.o/60)),o+=":",o+=fs(Math.trunc(-t.o%60))):(o+="+",o+=fs(Math.trunc(t.o/60)),o+=":",o+=fs(Math.trunc(t.o%60)))),n&&(o+="["+t.zone.ianaName+"]"),o}const Jee={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},ebe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Zee=["year","month","day","hour","minute","second","millisecond"],tbe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ibe=["year","ordinal","hour","minute","second","millisecond"];function rbe(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new JK(t);return e}function GU(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return rbe(t)}}function sbe(t){if(Kw===void 0&&(Kw=Ur.now()),t.type!=="iana")return t.offset(Kw);const e=t.name;let i=HD.get(e);return i===void 0&&(i=t.offset(Kw),HD.set(e,i)),i}function HU(t,e){const i=Hp(e.zone,Ur.defaultZone);if(!i.isValid)return tt.invalid(Xw(i));const r=Pi.fromObject(e);let s,n;if(Ht(t.year))s=Ur.now();else{for(const l of Zee)Ht(t[l])&&(t[l]=Jee[l]);const o=wee(t)||_ee(t);if(o)return tt.invalid(o);const a=sbe(i);[s,n]=pI(t,a,i)}return new tt({ts:s,zone:i,loc:r,o:n})}function qU(t,e,i){const r=Ht(i.round)?!0:i.round,s=(o,a)=>(o=yz(o,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),n=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return s(n(i.unit),i.unit);for(const o of i.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(t>e?-0:0,i.units[i.units.length-1])}function WU(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let Kw;const HD=new Map;class tt{constructor(e){const i=e.zone||Ur.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new ec("invalid input"):null)||(i.isValid?null:Xw(i));this.ts=Ht(e.ts)?Ur.now():e.ts;let s=null,n=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[s,n]=[e.old.c,e.old.o];else{const a=gf(e.o)&&!e.old?e.o:i.offset(this.ts);s=T$(this.ts,a),r=Number.isNaN(s.year)?new ec("invalid input"):null,s=r?null:s,n=r?null:a}this._zone=i,this.loc=e.loc||Pi.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new tt({})}static local(){const[e,i]=WU(arguments),[r,s,n,o,a,l,c]=i;return HU({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,i]=WU(arguments),[r,s,n,o,a,l,c]=i;return e.zone=ms.utcInstance,HU({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,i={}){const r=Rge(e)?e.valueOf():NaN;if(Number.isNaN(r))return tt.invalid("invalid input");const s=Hp(i.zone,Ur.defaultZone);return s.isValid?new tt({ts:r,zone:s,loc:Pi.fromObject(i)}):tt.invalid(Xw(s))}static fromMillis(e,i={}){if(gf(e))return e<-jU||e>jU?tt.invalid("Timestamp out of range"):new tt({ts:e,zone:Hp(i.zone,Ur.defaultZone),loc:Pi.fromObject(i)});throw new Cn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(gf(e))return new tt({ts:e*1e3,zone:Hp(i.zone,Ur.defaultZone),loc:Pi.fromObject(i)});throw new Cn("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=Hp(i.zone,Ur.defaultZone);if(!r.isValid)return tt.invalid(Xw(r));const s=Pi.fromObject(i),n=fT(e,GU),{minDaysInFirstWeek:o,startOfWeek:a}=kU(n,s),l=Ur.now(),c=Ht(i.specificOffset)?r.offset(l):i.specificOffset,h=!Ht(n.ordinal),y=!Ht(n.year),g=!Ht(n.month)||!Ht(n.day),_=y||g,S=n.weekYear||n.weekNumber;if((_||h)&&S)throw new Ug("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(g&&h)throw new Ug("Can't mix ordinal dates with month/day");const E=S||n.weekday&&!_;let C,M,P=T$(l,c);E?(C=tbe,M=Kve,P=dT(P,o,a)):h?(C=ibe,M=ebe,P=ZL(P)):(C=Zee,M=Jee);let D=!1;for(const K of C){const de=n[K];Ht(de)?D?n[K]=M[K]:n[K]=P[K]:D=!0}const F=E?kge(n,o,a):h?Pge(n):wee(n),U=F||_ee(n);if(U)return tt.invalid(U);const G=E?TU(n,o,a):h?MU(n):n,[Q,W]=pI(G,c,r),X=new tt({ts:Q,zone:r,o:W,loc:s});return n.weekday&&_&&e.weekday!==X.weekday?tt.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${X.toISO()}`):X.isValid?X:tt.invalid(X.invalid)}static fromISO(e,i={}){const[r,s]=Sve(e);return uy(r,s,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,s]=xve(e);return uy(r,s,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,s]=$ve(e);return uy(r,s,i,"HTTP",i)}static fromFormat(e,i,r={}){if(Ht(e)||Ht(i))throw new Cn("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=r,o=Pi.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,c,h]=Xve(o,e,i);return h?tt.invalid(h):uy(a,l,r,`format ${i}`,e,c)}static fromString(e,i,r={}){return tt.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,s]=Pve(e);return uy(r,s,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Cn("need to specify a reason the DateTime is invalid");const r=e instanceof ec?e:new ec(e,i);if(Ur.throwOnInvalid)throw new nge(r);return new tt({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=Wee(e,Pi.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(e,i={}){return Gee(Dn.parseFormat(e),Pi.fromObject(i)).map(s=>s.val).join("")}static resetCache(){Kw=void 0,HD.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?KL(this).weekYear:NaN}get weekNumber(){return this.isValid?KL(this).weekNumber:NaN}get weekday(){return this.isValid?KL(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?eR(this).weekday:NaN}get localWeekNumber(){return this.isValid?eR(this).weekNumber:NaN}get localWeekYear(){return this.isValid?eR(this).weekYear:NaN}get ordinal(){return this.isValid?ZL(this.c).ordinal:NaN}get monthShort(){return this.isValid?I$.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?I$.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?I$.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?I$.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=hk(this.c),s=this.zone.offset(r-e),n=this.zone.offset(r+e),o=this.zone.offset(r-s*i),a=this.zone.offset(r-n*i);if(o===a)return[this];const l=r-o*i,c=r-a*i,h=T$(l,o),y=T$(c,a);return h.hour===y.hour&&h.minute===y.minute&&h.second===y.second&&h.millisecond===y.millisecond?[aA(this,{ts:l}),aA(this,{ts:c})]:[this]}get isInLeapYear(){return $x(this.year)}get daysInMonth(){return pT(this.year,this.month)}get daysInYear(){return this.isValid?fv(this.year):NaN}get weeksInWeekYear(){return this.isValid?hS(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?hS(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:s}=Dn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(e=0,i={}){return this.setZone(ms.instance(e),i)}toLocal(){return this.setZone(Ur.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=Hp(e,Ur.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(i||r){const n=e.offset(this.ts),o=this.toObject();[s]=pI(o,n,e)}return aA(this,{ts:s,zone:e})}else return tt.invalid(Xw(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return aA(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=fT(e,GU),{minDaysInFirstWeek:r,startOfWeek:s}=kU(i,this.loc),n=!Ht(i.weekYear)||!Ht(i.weekNumber)||!Ht(i.weekday),o=!Ht(i.ordinal),a=!Ht(i.year),l=!Ht(i.month)||!Ht(i.day),c=a||l,h=i.weekYear||i.weekNumber;if((c||o)&&h)throw new Ug("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Ug("Can't mix ordinal dates with month/day");let y;n?y=TU({...dT(this.c,r,s),...i},r,s):Ht(i.ordinal)?(y={...this.toObject(),...i},Ht(i.day)&&(y.day=Math.min(pT(y.year,y.month),y.day))):y=MU({...ZL(this.c),...i});const[g,_]=pI(y,this.o,this.zone);return aA(this,{ts:g,o:_})}plus(e){if(!this.isValid)return this;const i=bi.fromDurationLike(e);return aA(this,UU(this,i))}minus(e){if(!this.isValid)return this;const i=bi.fromDurationLike(e).negate();return aA(this,UU(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},s=bi.normalizeUnit(e);switch(s){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(s==="weeks")if(i){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(r.weekNumber=this.weekNumber-1),r.weekday=n}else r.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Dn.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):XL}toLocaleString(e=hT,i={}){return this.isValid?Dn.create(this.loc.clone(i),e).formatDateTime(this):XL}toLocaleParts(e={}){return this.isValid?Dn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=tR(this,o);return a+="T",a+=VU(this,o,i,r,s,n),a}toISODate({format:e="extended"}={}){return this.isValid?tR(this,e==="extended"):null}toISOWeekDate(){return M$(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+VU(this,o==="extended",i,e,r,n):null}toRFC2822(){return M$(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return M$(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?tR(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||e)&&(r&&(s+=" "),i?s+="z":e&&(s+="ZZ")),M$(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():XL}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return bi.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=Oge(i).map(bi.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=zve(a,l,n,s);return o?c.negate():c}diffNow(e="milliseconds",i={}){return this.diff(tt.now(),e,i)}until(e){return this.isValid?Fr.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const s=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(i,r)<=s&&s<=n.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||tt.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(s=e.unit,n=void 0),qU(i,this.plus(r),{...e,numeric:"always",units:s,unit:n})}toRelativeCalendar(e={}){return this.isValid?qU(e.base||tt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(tt.isDateTime))throw new Cn("min requires all arguments be DateTimes");return PU(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(tt.isDateTime))throw new Cn("max requires all arguments be DateTimes");return PU(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:s=null,numberingSystem:n=null}=r,o=Pi.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return qee(o,e,i)}static fromStringExplain(e,i,r={}){return tt.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:s=null}=i,n=Pi.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return new Hee(n,e)}static fromFormatParser(e,i,r={}){if(Ht(e)||Ht(i))throw new Cn("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=r,o=Pi.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(i.locale))throw new Cn(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:h}=i.explainFromTokens(e);return h?tt.invalid(h):uy(a,l,r,`format ${i.format}`,e,c)}static get DATE_SHORT(){return hT}static get DATE_MED(){return ZK}static get DATE_MED_WITH_WEEKDAY(){return lge}static get DATE_FULL(){return YK}static get DATE_HUGE(){return XK}static get TIME_SIMPLE(){return KK}static get TIME_WITH_SECONDS(){return eee}static get TIME_WITH_SHORT_OFFSET(){return tee}static get TIME_WITH_LONG_OFFSET(){return iee}static get TIME_24_SIMPLE(){return ree}static get TIME_24_WITH_SECONDS(){return see}static get TIME_24_WITH_SHORT_OFFSET(){return nee}static get TIME_24_WITH_LONG_OFFSET(){return oee}static get DATETIME_SHORT(){return aee}static get DATETIME_SHORT_WITH_SECONDS(){return lee}static get DATETIME_MED(){return cee}static get DATETIME_MED_WITH_SECONDS(){return uee}static get DATETIME_MED_WITH_WEEKDAY(){return cge}static get DATETIME_FULL(){return hee}static get DATETIME_FULL_WITH_SECONDS(){return dee}static get DATETIME_HUGE(){return pee}static get DATETIME_HUGE_WITH_SECONDS(){return fee}}function rw(t){if(tt.isDateTime(t))return t;if(t&&t.valueOf&&gf(t.valueOf()))return tt.fromJSDate(t);if(t&&typeof t=="object")return tt.fromObject(t);throw new Cn(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const nbe="HH:mm",obe="HH:mm:ss",abe="HH:mm:ss.SSS",lbe=[abe,obe,nbe,"TT"],cbe="yyyy-MM-dd";function QU(t){if(!t||!xx(t))return null;const e=tt.fromFormat(t,cbe);return e.isValid?e:null}function JU(t){return t&&xx(t)?YC(lbe,(e=>{const i=tt.fromFormat(t,e);return i.isValid?i:null}))??null:null}function ZU(t){if(!t||!xx(t))return null;const e=tt.fromISO(t);return e.isValid?e:null}var AT;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(AT||(AT={}));const Yee=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function ube(t){return t!=null&&Yee.has(t.type)}function Xee(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Kee(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function ete(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const hbe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);sz(Yee,hbe);function Iit(t,e){const i=t==null?void 0:t.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,n=ube(t);return Xee(t)||ete(t)||Kee(t)?{...dbe(t,s,r),isInteger:n}:{min:r!=null&&typeof r=="number"?r:null,max:s!=null&&typeof s=="number"?s:null,rawMin:r,rawMax:s,isInteger:n}}function dbe(t,e,i){var r,s,n,o,a,l;return Xee(t)?{min:(r=QU(i))==null?void 0:r.toMillis(),max:(s=QU(e))==null?void 0:s.toMillis(),rawMin:i,rawMax:e}:ete(t)?{min:(n=JU(i))==null?void 0:n.toMillis(),max:(o=JU(e))==null?void 0:o.toMillis(),rawMin:i,rawMax:e}:Kee(t)?{min:(a=ZU(i))==null?void 0:a.toMillis(),max:(l=ZU(e))==null?void 0:l.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function pbe(t){if(!t)return;const e=t.match(fbe);return e!=null&&e.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const fbe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function Abe(t){var e,i;return((i=(e=t.match(mbe))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const mbe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let iR;function Md(){return iR||(iR=(async()=>{const[t,e,i]=await Promise.all([Ie(()=>import("./arcadeUtils-BJejxZze.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,1,11]),import.meta.url),Ie(()=>import("./batchExec-CwuTIfNk.js"),__vite__mapDeps([12,13]),import.meta.url),Ie(()=>import("./aiServices-BaDcNY_e.js").then(r=>r.ag),__vite__mapDeps([4,5,6,7]),import.meta.url)]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel}})()),iR}const ybe=/^([0-9_])/,gbe=/[^a-z0-9_\u0080-\uffff]+/gi;function vbe(t){return t==null?null:t.trim().replaceAll(gbe,"_").replace(ybe,"F$1")||null}const bbe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],wbe=["field","normalizationField"];function YU(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(XU(bbe,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)XU(wbe,r,e)}}function XU(t,e,i){if(t)for(const r of t){const s=px(r,e),n=s&&typeof s!="function"&&i.get(s);n&&Jr(r,n.name,e)}}function tte(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),s=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(s==null?void 0:s.name)??null}else{const r=e.get(t.startTimeField),s=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(s==null?void 0:s.name)??null}}const rR=new Set;function fk(t,e){return t&&e?(rR.clear(),Pf(rR,t,e),Array.from(rR).sort()):[]}function Pf(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:s}of e.fields)t.add(s);else for(const s of i)lo(t,e,s);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const s of i)s!=null&&t.add(s)}}function lo(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function Cit(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map((i=>i.name)):e}function Tit(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=fk(t,e);return r.length/t.fields.length>=i?["*"]:r}async function un(t,e,i){var n;if(!i)return;let r;const s=pbe(i);if(s)r=[s];else{const{arcadeUtils:o}=await Md();r=o.extractFieldNames(i,(n=e==null?void 0:e.fields)==null?void 0:n.map((a=>a.name)))}for(const o of r)lo(t,e,o)}async function wz(t,e,i){if(i&&i!=="1=1"){const r=await dz(i,e);if(!r.isStandardized)throw new te("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Pf(t,e,r.fieldNames)}}function _be({displayField:t,fields:e}){return t||(e!=null&&e.length?sR(e,"name-or-title")||sR(e,"unique-identifier")||sR(e,"type-or-category")||Sbe(e):null)}function Sbe(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function sR(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function Mit(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function xbe(t,e,i){i.onStatisticExpression?un(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function kit(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(ite(t,e,s)),i.fields&&r.push(...i.fields.map((async n=>xbe(t,e.fieldsIndex,n)))),await Promise.all(r)}async function Pit(t,e){var n,o,a;const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const s=[(n=r.latestObservations.renderer)==null?void 0:n.collectRequiredFields(t,i),(o=r.previousObservations.renderer)==null?void 0:o.collectRequiredFields(t,i),(a=r.trackLines.renderer)==null?void 0:a.collectRequiredFields(t,i)];r.popupTemplate&&s.push(ite(t,e,r.popupTemplate));for(const l of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(l)for(const c of l)s.push(nte(t,i,c));await Promise.all(s)}async function ite(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map((n=>un(t,e.fieldsIndex,n.expression))));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&r.push(un(t,e.fieldsIndex,n.expressionInfo.expression));await Promise.all(r)}async function Lit(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&Pf(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Pf(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await wz(t,e.fieldsIndex,i.where))}async function Rit(t,e,i){e&&i&&await Promise.all(i.map((r=>$be(t,e,r))))}async function $be(t,e,i){e&&i&&(i.valueExpression?await un(t,e.fieldsIndex,i.valueExpression):i.field&&lo(t,e.fieldsIndex,i.field))}function Oit(t){return t?fk(t.fieldsIndex,rte(t)):[]}function Ebe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?fk(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function Dit(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map((s=>wz(t,r,s.where))))}const Ibe=new Set(["oid","global-id","guid"]),Cbe=new Set(["oid","global-id"]),Tbe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function Mbe(t){const e=new Set;ste(t).forEach((r=>e.add(r))),Ebe(t).forEach((r=>e.add(r.toLowerCase())));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach((r=>e.add(r.toLowerCase()))),Object.values(i.transformFieldRoles).forEach((r=>e.add(r.toLowerCase())))),Array.from(e)}function rte(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:s,editorField:n}=e;return[i,r,s,n].filter(Boolean)}function ste(t){return rte(t).map((e=>e.toLowerCase()))}function kbe(t,e){var i;return t.editable&&!Ibe.has(t.type)&&!ste(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function Pbe(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||Mbe(e).includes(i)||Cbe.has(t.type)||Tbe.some((s=>s.test(i))))}async function Nit(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i!=null&&i.length&&await Promise.all(i.map((s=>nte(t,r,s))))}async function nte(t,e,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await un(t,e,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach((o=>{lo(t,e,o.slice(1,-1))}))}await wz(t,e,s)}function Lbe(t){const e=t.defaultValue;return e!==void 0&&ate(t,e)?e:t.nullable?null:void 0}function Fit(t){const e=typeof t=="string"?{type:t}:t;return ute(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function ote(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Rbe(t){return t===null||ote(t)}function Obe(t){return t===null||Number.isInteger(t)}function Dbe(){return!0}function ate(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?Obe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?Rbe:ote;break;case"string":case"esriFieldTypeString":i=t.nullable?sge:xx;break;default:i=Dbe}return arguments.length===1?i:i(e)}const Nbe=["integer","small-integer","big-integer","long"],Fbe=["single","double"],zbe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],Bbe=["esriFieldTypeSingle","esriFieldTypeDouble"],lte=new Set([...Nbe,...zbe]),jbe=new Set([...Fbe,...Bbe]),Ube=sz(lte,jbe);function Vbe(t){return t!=null&&lte.has(t.type)}function cte(t){return t!=null&&Ube.has(t.type)}function ute(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function _z(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function Gbe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Hbe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function hte(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function KU(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function eV(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function zit(t,e){return qbe(t,e)===null}var mT,yT;function Bit(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function qbe(t,e){return t==null||t.nullable&&e===null?null:ate(t,e)?cte(t)&&!Wbe(t.type,Number(e))?mT.OUT_OF_RANGE:null:yT.INVALID_TYPE}function Wbe(t,e){const i=typeof t=="string"?dte(t):t;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=s:e>=r&&e<=s}function dte(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return Qbe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return Jbe;case"esriFieldTypeBigInteger":case"big-integer":return Zbe;case"esriFieldTypeSingle":case"single":return Ybe;case"esriFieldTypeDouble":case"double":return Xbe}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(mT||(mT={})),(function(t){t.INVALID_TYPE="type-validation-error::invalid-type"})(yT||(yT={}));const Qbe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Jbe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Zbe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Ybe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Xbe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function jit(t,e,i){switch(t){case AT.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case AT.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case yT.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case mT.OUT_OF_RANGE:{const{min:r,max:s}=dte(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${s}`}}}function Kbe(t,e){return!e1e(t,e,null)}function e1e(t,e,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!r.has(n)&&(s=!0,i==null))break;return s}function t1e(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some((e=>t.toLowerCase().startsWith(e)))}function Sz(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map((i=>i.slice(1,-1).split(":")[0].trim())):[]}let fI=class extends pe{constructor(e){super(e),this.type=null}};u([A({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],fI.prototype,"type",void 0),fI=u([B("esri.popup.content.Content")],fI);const Nd=fI;let Ot=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=i1e(e),this.apiValues=tV(this._apiToJSON),this.jsonValues=tV(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,n)=>{const o=this.toJSON(r);o!==void 0&&Jr(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function i1e(t){const e={};for(const i in t)e[t[i]]=i;return e}function tV(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function ys(){return function(t,e){return new Ot(t,{ignoreUnknown:!0,...e})}}const k$=new Ot({asc:"ascending",desc:"descending"});let e2=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.field=null,this.order="ascending"}};u([A({type:String,json:{write:!0}})],e2.prototype,"field",void 0),u([A({type:k$.apiValues,json:{type:k$.jsonValues,read:k$.read,write:k$.write}})],e2.prototype,"order",void 0),e2=u([B("esri.popup.support.AttachmentsOrderByInfo")],e2);const r1e=e2;let pp=class extends dt.ClonableMixin(Nd){constructor(e){super(e),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};u([A({type:String,json:{write:!0}})],pp.prototype,"description",void 0),u([A({type:["auto","preview","list"],json:{write:!0}})],pp.prototype,"displayType",void 0),u([A({type:[r1e],json:{write:!0}})],pp.prototype,"orderByFields",void 0),u([A({type:String,json:{write:!0}})],pp.prototype,"title",void 0),u([A({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],pp.prototype,"type",void 0),pp=u([B("esri.popup.content.AttachmentsContent")],pp);const Ob=pp;var qD;let xA=qD=class extends Nd{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new qD({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ie(this.outFields):null})}};u([A()],xA.prototype,"creator",void 0),u([A()],xA.prototype,"destroyer",void 0),u([A()],xA.prototype,"outFields",void 0),u([A({type:["custom"],readOnly:!0})],xA.prototype,"type",void 0),xA=qD=u([B("esri.popup.content.CustomContent")],xA);const s1e=xA;var WD;let Vy=WD=class extends pe{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new WD({title:this.title,expression:this.expression})}};u([A({type:String,json:{write:!0}})],Vy.prototype,"title",void 0),u([A({type:String,json:{write:!0}})],Vy.prototype,"expression",void 0),u([A({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Vy.prototype,"returnType",void 0),Vy=WD=u([B("esri.popup.ElementExpressionInfo")],Vy);const n1e=Vy;var QD;let t2=QD=class extends Nd{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new QD({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};u([A({type:n1e,json:{write:!0}})],t2.prototype,"expressionInfo",void 0),u([A({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],t2.prototype,"type",void 0),t2=QD=u([B("esri.popup.content.ExpressionContent")],t2);const Ak=t2;function it(t,e={}){const i=t instanceof Ot?t:new Ot(t,e),{alwaysWriteDefaults:r,default:s,ignoreUnknown:n=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return A({type:n?i.apiValues:String,json:{type:i.jsonValues,default:s,name:o,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}let f_;var _X,SX;const o1e=((_X=globalThis.esriConfig)==null?void 0:_X.locale)??((SX=globalThis.dojoConfig)==null?void 0:SX.locale);var xX;const A_=(xX=globalThis.document)==null?void 0:xX.documentElement;function pte(){var i;const t=A_==null?void 0:A_.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return o1e??t??e??"en"}function Bo(){return f_===void 0&&(f_=pte()),f_}const a1e=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function xz(t=Bo()){var e;return(e=a1e.exec(t))==null?void 0:e.groups}const AI=[];function mk(t){return AI.push(t),Ai((()=>{AI.splice(AI.indexOf(t),1)}))}const mI=[];function $z(t){return mI.push(t),Ai((()=>mI.splice(mI.indexOf(t),1)))}function iV(){const t=pte();f_!==t&&([...mI].forEach((e=>e(t))),f_=t,[...AI].forEach((e=>e(t))))}var $X;($X=globalThis.addEventListener)==null||$X.call(globalThis,"languagechange",iV),A_&&new MutationObserver((()=>{iV()})).observe(A_,{attributeFilter:["lang"]});const ul="system",Lf="unknown",Vu="UTC",l1e=Intl.DateTimeFormat().resolvedOptions().timeZone,rV=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]),c1e="shortOffset";function u1e(t){return"timeZoneIANA"in t}function h1e(t){return t.startsWith("UTC")}function gT(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?yI(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?d1e(i):null}}}}}function yI(t,e=ul){return t?u1e(t)?t.timeZoneIANA:p1e(t,e):e}function d1e(t){return{timeZoneIANA:t}}function p1e(t,e=ul){if(!t||!rV.has(t.timeZone))return e;const i=rV.get(t.timeZone);return h1e(t.timeZone)||t.respectsDaylightSaving?i:f1e(i)}function f1e(t){const e=tt.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${ms.instance(-i).formatOffset(0,"narrow")}`}function A1e(t,e,i,r,s){if(e&&s==="date")return{timeZone:Vu,timeZoneName:void 0};const n=r.timeStyle||r.hour,o=i===Lf;return{timeZone:o?s==="timestamp-offset"?void 0:t??Vu:i,timeZoneName:o&&n?c1e:void 0}}function m1e(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map((r=>r.toLowerCase())));return t===ul||t===Lf||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const y1e={year:void 0,month:void 0,day:void 0,weekday:void 0},g1e={hour:void 0,minute:void 0,second:void 0},fte={timeZone:Vu},yc={year:"numeric",month:"numeric",day:"numeric"},sw={year:"numeric",month:"long",day:"numeric"},nw={year:"numeric",month:"short",day:"numeric"},ow={year:"numeric",month:"long",weekday:"long",day:"numeric"},Op={hour:"numeric",minute:"numeric"},$A={...Op,second:"numeric"},Ate={hourCycle:"h23"},aw={...Op,...Ate},lw={...$A,...Ate},mte={"short-date":yc,"short-date-short-time":{...yc,...Op},"short-date-short-time-24":{...yc,...aw},"short-date-long-time":{...yc,...$A},"short-date-long-time-24":{...yc,...lw},"short-date-le":yc,"short-date-le-short-time":{...yc,...Op},"short-date-le-short-time-24":{...yc,...aw},"short-date-le-long-time":{...yc,...$A},"short-date-le-long-time-24":{...yc,...lw},"long-month-day-year":sw,"long-month-day-year-short-time":{...sw,...Op},"long-month-day-year-short-time-24":{...sw,...aw},"long-month-day-year-long-time":{...sw,...$A},"long-month-day-year-long-time-24":{...sw,...lw},"day-short-month-year":nw,"day-short-month-year-short-time":{...nw,...Op},"day-short-month-year-short-time-24":{...nw,...aw},"day-short-month-year-long-time":{...nw,...$A},"day-short-month-year-long-time-24":{...nw,...lw},"long-date":ow,"long-date-short-time":{...ow,...Op},"long-date-short-time-24":{...ow,...aw},"long-date-long-time":{...ow,...$A},"long-date-long-time-24":{...ow,...lw},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Op,"long-time":$A},v1e=ys()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),yte={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},b1e=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2));var EX;const w1e=(EX=b1e.find((({type:t})=>t==="month")))==null?void 0:EX.value.toLowerCase();function gte(){var i;const t=Bo(),e=(i=xz(t))==null?void 0:i.language;return(e&&yte[e])??t}w1e!=="mart"&&(yte.bs="sr-Latn-CS");let JD=new WeakMap;const yk=mte["short-date-short-time"];function _1e(t){let e=JD.get(t);if(!e){const i=gte(),r=Ez(t.timeZone??ul),s={...t,timeZone:r};e=new Intl.DateTimeFormat(i,s),JD.set(t,e)}return e}function cw(t){return mte[t]}function nl(t,e=yk){return _1e(e).format(t)}function S1e(t,e=yk){return nl(new Date(t),{...e,...fte,...g1e})}function x1e(t,e=yk){return nl(new Date(`1970-01-01T${t}Z`),{...e,...fte,...y1e})}function $1e(t,e=yk){if(e.timeZone)return nl(new Date(t),e);const i=tt.fromISO(t,{setZone:!0}),r=i.offset===0?Vu:e.timeZone,s={...e,timeZone:r};return i.toLocaleString(s,{locale:gte()})}function Ez(t){switch(t){case ul:return l1e;case Lf:return Vu;default:return t}}$z((()=>{JD=new WeakMap}));let Gy=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([it(v1e)],Gy.prototype,"dateFormat",void 0),u([A({type:Boolean,json:{write:!0}})],Gy.prototype,"digitSeparator",void 0),u([A({type:Kt,json:{write:!0}})],Gy.prototype,"places",void 0),Gy=u([B("esri.popup.support.FieldInfoFormat")],Gy);const gI=Gy;var ZD;let Il=ZD=class extends pe{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new ZD({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([A({type:String,json:{write:!0}})],Il.prototype,"fieldName",void 0),u([A({type:gI,json:{write:!0}})],Il.prototype,"format",void 0),u([A({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Il.prototype,"isEditable",void 0),u([A({type:String,json:{write:!0}})],Il.prototype,"label",void 0),u([it(new Ot({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Il.prototype,"stringFieldOption",void 0),u([A({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Il.prototype,"statisticType",void 0),u([A({type:String,json:{write:!0}})],Il.prototype,"tooltip",void 0),u([A({type:Boolean,json:{write:!0}})],Il.prototype,"visible",void 0),Il=ZD=u([B("esri.popup.FieldInfo")],Il);const Iz=Il;var YD;let vh=YD=class extends Nd{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map((i=>i.toJSON()))}clone(){return new YD(ie({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([A({type:Object,json:{write:!0}})],vh.prototype,"attributes",void 0),u([A({type:String,json:{write:!0}})],vh.prototype,"description",void 0),u([A({type:[Iz]})],vh.prototype,"fieldInfos",void 0),u([Ne("fieldInfos")],vh.prototype,"writeFieldInfos",null),u([A({type:String,json:{write:!0}})],vh.prototype,"title",void 0),u([A({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],vh.prototype,"type",void 0),vh=YD=u([B("esri.popup.content.FieldsContent")],vh);const Db=vh;let EA=class extends pe{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};u([A({type:String,json:{write:!0}})],EA.prototype,"altText",void 0),u([A({type:String,json:{write:!0}})],EA.prototype,"caption",void 0),u([A({type:String,json:{write:!0}})],EA.prototype,"title",void 0),u([A({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],EA.prototype,"type",void 0),EA=u([B("esri.popup.content.mixins.MediaInfo")],EA);const Cz=EA,vT={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function vte(t){return!!vT[t]||!!vT[t.toLowerCase()]}function Tz(t){return vT[t]??vT[t.toLowerCase()]}function E1e(t){return[...Tz(t)]}function nR(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function bte(t,e,i,r=1){const s=(t%360+360)%360/360,n=i<=.5?i*(e+1):i+e-i*e,o=2*i-n;return[Math.round(255*nR(o,n,s+1/3)),Math.round(255*nR(o,n,s)),Math.round(255*nR(o,n,s-1/3)),r]}function I1e(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,s=e?1:17,n=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&r,o>>=i,a[3]=s*l/255),l=o&r,o>>=i,a[2]=s*l,l=o&r,o>>=i,a[1]=s*l,l=o&r,o>>=i,a[0]=s*l,a}function wte(t){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),s=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(s+16*s)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function _te(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){const s=i[0];if(s.charAt(s.length-1)==="%"){const n=i.map((o=>2.56*parseFloat(o)));return i.length===4&&(n[3]=parseFloat(i[3])),sV(n)}return sV(i.map((n=>parseFloat(n))))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return bte(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function sV(t){return t[0]=mv(t[0]),t[1]=mv(t[1]),t[2]=mv(t[2]),t[3]=t.length===4?xte(t[3]):1,t}function Ste(t){let e=vte(t)?Tz(t):null;return e??(e=_te(t)),e??(e=wte(t)),e}function Qit(t){const e=Ste(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function xte(t){return $te(t,0,1)}function mv(t){return Math.round($te(t,0,255))}function $te(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const Jit=2.2,nV=new Float32Array(1);function Zit(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Bn(t,e,i){return Math.min(Math.max(t,e),i)}function C1e(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function i2(t,e,i){return t+(e-t)*i}function Yit(t,e,i,r,s){return i2(r,s,(t-e)/(i-e))}function w1(t){return t*Math.PI/180}function Ete(t){return 180*t/Math.PI}function Xit(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function Kit(t){return Math.acos(Bn(t,-1,1))}function T1e(t){return Math.asin(Bn(t,-1,1))}function rc(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function Ite(t,e,i=1e-6){return!rc(t,e,i)&&t>e}function XD(t,e,i=1e-6){return!rc(t,e,i)&&t<e}function M1e(t,e,i=1e-6){return rc(t,e,i)||t>e}const bT=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function KD(t){return bT.setFloat64(0,t),bT.getBigInt64(0)}function k1e(t){return bT.setBigInt64(0,t),bT.getFloat64(0)}const vI=BigInt("1000000"),P1e=Cte(1);function Cte(t){const e=KD(t=Math.abs(t)),i=k1e(e<=vI?vI:e-vI);return Math.abs(t-i)}function ert(t,e,i=P1e){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&Cte(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=KD(t),s=KD(e);return r<0!=s<0?!1:!((r<s?s-r:r-s)>vI)}function trt(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),s=Math.abs(t),n=Math.abs(e);if(t===0||e===0||s<1e-12&&n<1e-12){if(r>.01*i)return!1}else if(r/(s+n)>i)return!1;return!0}function irt(t){return Tte(Math.max(-oV,Math.min(t,oV)))}function Tte(t){return nV[0]=t,nV[0]}function rrt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(rc(e,1)&&rc(i,1)&&rc(r,1))}const oV=Tte(34028234663852886e22);function srt(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}function P$(t){return Bn(oz(t),0,255)}function L$(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let bI=class vo{static blendColors(e,i,r,s=new vo){return s.r=Math.round(e.r+(i.r-e.r)*r),s.g=Math.round(e.g+(i.g-e.g)*r),s.b=Math.round(e.b+(i.b-e.b)*r),s.a=e.a+(i.a-e.a)*r,s._sanitize()}static fromRgb(e,i){const r=_te(e);return r?vo.fromArray(r,i):null}static fromHex(e,i=new vo){const r=wte(e);return r?vo.fromArray(r,i):null}static fromArray(e,i=new vo){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=Ste(e);return r?vo.fromArray(r,i):null}static fromJSON(e){return e!=null?new vo([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?vo.fromString(e,this):Array.isArray(e)?vo.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof vo||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,r=(e==null?void 0:e.digits)??6,s=r===3||r===4,n=r===4||r===8,o=`#${L$(this.r,s)}${L$(this.g,s)}${L$(this.b,s)}${n?L$(Math.round(255*this.a),s):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=vo.AlphaMode.ALWAYS){const i=P$(this.r),r=P$(this.g),s=P$(this.b);return e===vo.AlphaMode.ALWAYS||this.a!==1?[i,r,s,P$(255*this.a)]:[i,r,s]}clone(){return new vo(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=mv(this.r),this.g=mv(this.g),this.b=mv(this.b),this.a=xte(this.a),this}_set(e,i,r,s){this.r=e,this.g=i,this.b=r,this.a=s}};bI.prototype.declaredClass="esri.Color",(function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"})(bI||(bI={}));const ze=bI;var e5;let IA=e5=class extends et{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new e5({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([A()],IA.prototype,"color",void 0),u([A()],IA.prototype,"fieldName",void 0),u([A()],IA.prototype,"tooltip",void 0),u([A()],IA.prototype,"value",void 0),IA=e5=u([B("esri.popup.content.support.ChartMediaInfoValueSeries")],IA);const L1e=IA;var t5;let fp=t5=class extends pe{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new t5({colors:ie(this.colors),fields:ie(this.fields),normalizeField:this.normalizeField,series:ie(this.series),tooltipField:this.tooltipField})}};u([A({type:[ze],json:{type:[[Kt]],write:!0}})],fp.prototype,"colors",void 0),u([A({type:[String],json:{write:{isRequired:!0}}})],fp.prototype,"fields",void 0),u([A({type:String,json:{write:!0}})],fp.prototype,"normalizeField",void 0),u([A({type:[L1e],json:{read:!1}})],fp.prototype,"series",void 0),u([A({type:String,json:{write:!0}})],fp.prototype,"tooltipField",void 0),fp=t5=u([B("esri.popup.content.support.ChartMediaInfoValue")],fp);const R1e=fp;let r2=class extends Cz{constructor(e){super(e),this.type=null,this.value=void 0}};u([A({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],r2.prototype,"type",void 0),u([A({type:R1e,json:{write:{isRequired:!0}}})],r2.prototype,"value",void 0),r2=u([B("esri.popup.content.mixins.ChartMediaInfo")],r2);const gk=r2,vk=ys()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var i5;let wI=i5=class extends gk{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new i5({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([A({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:vk.write,isRequired:!0}}})],wI.prototype,"type",void 0),wI=i5=u([B("esri.popup.content.BarChartMediaInfo")],wI);const Mte=wI;var r5;let _I=r5=class extends gk{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new r5({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([A({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:vk.write,isRequired:!0}}})],_I.prototype,"type",void 0),_I=r5=u([B("esri.popup.content.ColumnChartMediaInfo")],_I);const kte=_I;var s5;let s2=s5=class extends pe{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new s5({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([A({type:String,json:{write:!0}})],s2.prototype,"linkURL",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],s2.prototype,"sourceURL",void 0),s2=s5=u([B("esri.popup.content.support.ImageMediaInfoValue")],s2);const O1e=s2;var n5;let Hy=n5=class extends Cz{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new n5({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};u([A({type:Number,json:{write:!0}})],Hy.prototype,"refreshInterval",void 0),u([A({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Hy.prototype,"type",void 0),u([A({type:O1e,json:{write:{isRequired:!0}}})],Hy.prototype,"value",void 0),Hy=n5=u([B("esri.popup.content.ImageMediaInfo")],Hy);const Pte=Hy;var o5;let SI=o5=class extends gk{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new o5({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([A({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:vk.write,isRequired:!0}}})],SI.prototype,"type",void 0),SI=o5=u([B("esri.popup.content.LineChartMediaInfo")],SI);const Lte=SI;var a5;let xI=a5=class extends gk{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new a5({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([A({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:vk.write,isRequired:!0}}})],xI.prototype,"type",void 0),xI=a5=u([B("esri.popup.content.PieChartMediaInfo")],xI);const Rte=xI,l5={base:Cz,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Mte,"column-chart":kte,"line-chart":Lte,"pie-chart":Rte,image:Pte}};var c5;let Cl=c5=class extends Nd{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map((e=>e.type==="image"?Pte.fromJSON(e):e.type==="barchart"?Mte.fromJSON(e):e.type==="columnchart"?kte.fromJSON(e):e.type==="linechart"?Lte.fromJSON(e):e.type==="piechart"?Rte.fromJSON(e):void 0)).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map((i=>i.toJSON()))}clone(){return new c5(ie({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([A()],Cl.prototype,"activeMediaInfoIndex",void 0),u([A({type:Object,json:{write:!0}})],Cl.prototype,"attributes",void 0),u([A({type:String,json:{write:!0}})],Cl.prototype,"description",void 0),u([A({types:[l5]})],Cl.prototype,"mediaInfos",void 0),u([Me("mediaInfos")],Cl.prototype,"readMediaInfos",null),u([Ne("mediaInfos")],Cl.prototype,"writeMediaInfos",null),u([A({type:String,json:{write:!0}})],Cl.prototype,"title",void 0),u([A({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Cl.prototype,"type",void 0),Cl=c5=u([B("esri.popup.content.MediaContent")],Cl);const dS=Cl;var u5;let n2=u5=class extends pe{constructor(t){super(t),this.field=null,this.order=null}clone(){return new u5({field:this.field,order:this.order})}};u([A({type:String,json:{write:!0}})],n2.prototype,"field",void 0),u([A({type:["asc","desc"],json:{write:!0}})],n2.prototype,"order",void 0),n2=u5=u([B("esri.popup.support.RelatedRecordsInfoFieldOrder")],n2);const Mz=n2;let bc=class extends dt.ClonableMixin(Nd){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([A({type:String,json:{write:!0}})],bc.prototype,"description",void 0),u([A({type:Number,json:{type:Kt,write:!0}})],bc.prototype,"displayCount",void 0),u([A({type:["list"],json:{write:{isRequired:!0}}})],bc.prototype,"displayType",void 0),u([A({type:[Mz],json:{write:!0}})],bc.prototype,"orderByFields",void 0),u([A({type:Number,json:{type:Kt,write:{isRequired:!0}}})],bc.prototype,"relationshipId",void 0),u([A({type:String,json:{write:!0}})],bc.prototype,"title",void 0),u([A({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],bc.prototype,"type",void 0),bc=u([B("esri.popup.content.RelationshipContent")],bc);const pS=bc;var h5;let o2=h5=class extends Nd{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new h5({text:this.text})}};u([A({type:String,json:{write:!0}})],o2.prototype,"text",void 0),u([A({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],o2.prototype,"type",void 0),o2=h5=u([B("esri.popup.content.TextContent")],o2);const fS=o2;let bh=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};u([A({type:String,json:{write:!0}})],bh.prototype,"title",void 0),u([A({type:String,json:{write:!0}})],bh.prototype,"description",void 0),u([A({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],bh.prototype,"type",void 0),u([A({type:Number,json:{type:Kt,write:!0}})],bh.prototype,"associatedNetworkSourceId",void 0),u([A({type:Number,json:{type:Kt,write:!0}})],bh.prototype,"associatedAssetGroup",void 0),u([A({type:Number,json:{type:Kt,write:!0}})],bh.prototype,"associatedAssetType",void 0),bh=u([B("esri.popup.support.UtilityNetworkAssociationType")],bh);const Ote=bh;let Ap=class extends dt.ClonableMixin(Nd){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};u([A({type:String,json:{write:!0}})],Ap.prototype,"description",void 0),u([A({type:Number,json:{type:Kt,write:!0}})],Ap.prototype,"displayCount",void 0),u([A({type:String,json:{write:!0}})],Ap.prototype,"title",void 0),u([A({type:[Ote],json:{write:!0}})],Ap.prototype,"associationTypes",void 0),u([it({utilityNetworkAssociations:"utility-network-associations"})],Ap.prototype,"type",void 0),Ap=u([B("esri.popup.content.UtilityNetworkAssociationsContent")],Ap);const kz=Ap,D1e={base:null,key:"type",typeMap:{attachment:Ob,media:dS,text:fS,expression:Ak,field:Db,relationship:pS,utilityNetworkAssociations:kz}},N1e={base:null,key:"type",typeMap:{attachment:Ob,media:dS,text:fS,expression:Ak,field:Db,relationship:pS}};var d5;let CA=d5=class extends pe{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new d5({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([A({type:String,json:{write:!0}})],CA.prototype,"name",void 0),u([A({type:String,json:{write:!0}})],CA.prototype,"title",void 0),u([A({type:String,json:{write:!0}})],CA.prototype,"expression",void 0),u([A({type:["string","number"],json:{write:!0}})],CA.prototype,"returnType",void 0),CA=d5=u([B("esri.popup.ExpressionInfo")],CA);const F1e=CA;var p5;let a2=p5=class extends pe{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new p5({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([A({type:Boolean,json:{write:!0}})],a2.prototype,"returnTopmostRaster",void 0),u([A({type:Boolean,json:{write:!0}})],a2.prototype,"showNoDataRecords",void 0),a2=p5=u([B("esri.popup.LayerOptions")],a2);const z1e=a2;var f5;let l2=f5=class extends pe{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new f5({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ie(this.orderByFields):null})}};u([A({type:Boolean,json:{write:!0}})],l2.prototype,"showRelatedRecords",void 0),u([A({type:[Mz],json:{write:!0}})],l2.prototype,"orderByFields",void 0),l2=f5=u([B("esri.popup.RelatedRecordsInfo")],l2);const aV=l2;let Dte=0;const Nte=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Dte++})}};return e=u([B("esri.core.Identifiable")],e),e},B1e=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Dte++})}};return e=u([B("esri.core.Identifiable.NumericIdentifiable")],e),e};let c2=class extends Nte(class{}){};c2=u([B("esri.core.Identifiable")],c2),(function(t){t.IdentifiableMixin=Nte,t.NumericIdentifiableMixin=B1e})(c2||(c2={}));const j0=c2;var A5;let Ra=A5=class extends j0.IdentifiableMixin(et){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new A5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([A()],Ra.prototype,"active",void 0),u([A()],Ra.prototype,"className",void 0),u([A()],Ra.prototype,"disabled",void 0),u([A()],Ra.prototype,"icon",void 0),u([A()],Ra.prototype,"id",void 0),u([A()],Ra.prototype,"indicator",void 0),u([A()],Ra.prototype,"title",void 0),u([A()],Ra.prototype,"type",void 0),u([A()],Ra.prototype,"visible",void 0),Ra=A5=u([B("esri.support.actions.ActionBase")],Ra);const Pz=Ra;var m5;let $I=m5=class extends Pz{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new m5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([A()],$I.prototype,"image",void 0),$I=m5=u([B("esri.support.actions.ActionButton")],$I);const j1e=$I;var y5;let u2=y5=class extends Pz{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new y5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([A()],u2.prototype,"image",void 0),u([A()],u2.prototype,"value",void 0),u2=y5=u([B("esri.support.actions.ActionToggle")],u2);const U1e=u2,uw="relationships/",lV="expression/",V1e=qe.ofType({key:"type",defaultKeyValue:"button",base:Pz,typeMap:{button:j1e,toggle:U1e}}),G1e={base:Nd,key:"type",typeMap:{media:dS,custom:s1e,text:fS,attachments:Ob,fields:Db,expression:Ak,relationship:pS,utilityNetworkAssociations:kz}},Fte=new Set(["attachments","fields","media","text","expression","relationship"]),H1e=new Set([...Fte,"utility-network-associations"]);let hs=class extends dt.ClonableMixin(pe){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map((i=>Uu(G1e,i))):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Ku(e)?e:(be.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,s){this._writePopupTemplateContent(e,i,s)}writeWebMapContent(e,i,r,s){this._writePopupTemplateContent(e,i,s)}writeFieldInfos(e,i,r,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(e){const a=o?o.filter((c=>c.type==="fields")):[],l=a.length&&a.every((c=>{var h;return(h=c.fieldInfos)==null?void 0:h.length}));i.fieldInfos=e.filter(Boolean).map((c=>{const h=c.toJSON(s);return l&&(h.visible=!1),h}))}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,r,s){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),Pf(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter((s=>(r==null?void 0:r.origin)==="web-scene"?Fte.has(s.type):H1e.has(s.type))).map((s=>s==null?void 0:s.toJSON(r))),i.popupElements.forEach((s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)}))):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=ie(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach((s=>{const n=i.fieldInfos.find((o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=s.fieldName)==null?void 0:l.toLowerCase())}));n?n.visible=!0:i.fieldInfos.push(s)})):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var n,o;const r=((n=e.orderByFields)==null?void 0:n.map((a=>this._toFieldOrderJSON(a,e.relationshipId))))||[],s=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=ie(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const s={description:!1,mediaInfos:!1};return r.map((n=>n.type==="media"?(n.mediaInfos||!i||s.mediaInfos||(n.mediaInfos=i,s.mediaInfos=!0),dS.fromJSON(n)):n.type==="text"?(n.text||!e||s.description||(n.text=e,s.description=!0),fS.fromJSON(n)):n.type==="attachments"?Ob.fromJSON(n):n.type==="fields"?Db.fromJSON(n):n.type==="expression"?Ak.fromJSON(n):n.type==="relationship"?pS.fromJSON(n):n.type==="utilityNetworkAssociations"?kz.fromJSON(n):void 0)).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(uw)))return null;const s=i.replace(uw,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?pS.fromJSON({relationshipId:n,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:s}=e;return{field:`${uw}${i}/${s}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];e?n.push(new fS({text:e})):n.push(new Db),Array.isArray(i)&&i.length&&n.push(dS.fromJSON({mediaInfos:i})),r&&n.push(Ob.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&(a!=null&&a.length)&&a.forEach((l=>{const c=this._toRelationshipContent(l);c&&n.push(c)})),n.length?n:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce(((s,n)=>[...s,...this._getMediaInfoFields(n)]),[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:s}=e,n=s||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:h}=n,y=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(c),...this._extractFieldNames(h),...o??[]];return a&&y.push(a),l&&y.push(l),y}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce(((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]]),i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce(((i,r)=>[...i,...this._getContentElementFields(r)]),[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map((s=>un(e,i,s.expression))))}_getFieldInfoFields(e){return e?e.filter((({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(uw)||i.startsWith(lV)))).map((i=>i.fieldName)):[]}_getActionsFields(e){return e?e.toArray().reduce(((i,r)=>[...i,...this._getActionFields(r)]),[]):[]}_getActionFields(e){const{className:i,title:r,type:s}=e,n=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Sz(e).filter((i=>!(i.indexOf(uw)===0||i.indexOf(lV)===0)))}};u([A({type:V1e})],hs.prototype,"actions",void 0),u([A()],hs.prototype,"content",void 0),u([yi("content")],hs.prototype,"castContent",null),u([Me("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],hs.prototype,"readContent",null),u([Ne("web-scene","content",{popupElements:{type:qe.ofType(N1e)},showAttachments:{type:Boolean},mediaInfos:{type:qe.ofType(l5)},description:{type:String},relatedRecordsInfo:{type:aV}})],hs.prototype,"writeWebSceneContent",null),u([Ne("content",{popupElements:{type:qe.ofType(D1e)},showAttachments:{type:Boolean},mediaInfos:{type:qe.ofType(l5)},description:{type:String},relatedRecordsInfo:{type:aV}})],hs.prototype,"writeWebMapContent",null),u([A({type:[F1e],json:{write:!0}})],hs.prototype,"expressionInfos",void 0),u([A({type:[Iz]})],hs.prototype,"fieldInfos",void 0),u([Ne("fieldInfos")],hs.prototype,"writeFieldInfos",null),u([A({type:z1e})],hs.prototype,"layerOptions",void 0),u([Ne("layerOptions")],hs.prototype,"writeLayerOptions",null),u([A({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],hs.prototype,"lastEditInfoEnabled",void 0),u([A()],hs.prototype,"outFields",void 0),u([A()],hs.prototype,"overwriteActions",void 0),u([A()],hs.prototype,"returnGeometry",void 0),u([A({json:{type:String}})],hs.prototype,"title",void 0),u([Ne("title")],hs.prototype,"writeTitle",null),hs=u([B("esri.PopupTemplate")],hs);const Gu=hs;function He(t,e,i={}){return Lz(t,e,i,zte)}function hn(t,e,i={}){return Lz(t,e,i,Bte)}function Lz(t,e,i={},r){let s=null;const n=i.once?(o,a)=>{r(o)&&(pr(s),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(s=eye(t,n,i.sync,i.equals),i.initial){const o=t();n(o,o)}return s}function ll(t,e,i,r={}){let s=null,n=null,o=null;function a(){var h;s&&n&&(n.remove(),(h=r.onListenerRemove)==null||h.call(r,s),s=null,n=null)}function l(h){r.once&&r.once&&pr(o),i(h)}const c=He(t,((h,y)=>{var g;a(),ak(h)&&(s=h,n=p1(h,e,l),(g=r.onListenerAdd)==null||g.call(r,h))}),{sync:r.sync,initial:!0});return o=Ai((()=>{c.remove(),a()})),o}function A0(t,e){return q1e(t,Bte,e)}function q1e(t,e,i){if(cl(i))return Promise.reject(Hi());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let s=null;function n(){s=pr(s)}return new Promise(((o,a)=>{s=D0([ac(i,(()=>{n(),a(Hi())})),Lz(t,(l=>{n(),o(l)}),{sync:!1,once:!0},e??zte)])}))}function zte(t){return!0}function Bte(t){return!!t}function hrt(t,e,i={}){let r=!1;const s=He(t,((n,o)=>{r||e(n,o)}),i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}const Hu={sync:!0},wr={initial:!0},eo={sync:!0,initial:!0};let Rz=class{constructor(e,i,r,s,n,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=s,this.scaleHeight=n;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const kr=new Rz(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ru=new Rz(3396190,1/169.8944472236118,23e4,6e4,.111),Rf=new Rz(1737400,0,0,0,0),W1e=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Q1e={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function cV(t){const e=t==null?void 0:t.match(W1e);if(!e)return null;const[,i,r,s]=e;if(!i)return null;let n=null,o=null,a=null;const{devext:l,qaext:c,www:h}=Q1e;if(r)if(n=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function jte(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function Ute(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function Vte(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function J1e(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const Z1e=()=>be.getLogger("esri.core.urlUtils"),_1=li.request,uV="esri/config: esriConfig.request.proxyUrl is not set.",Gte=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Hte=/^\s*http:/i,Y1e=/^\s*https:/i,X1e=/^\s*file:/i,qte=/:\d+$/,K1e=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ewe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),twe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Jm=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(ewe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(twe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const R$={},iwe=new Jm(li.applicationUrl);let Nn=iwe;const rwe=swe();let Oz=rwe;const Dz=()=>Nn,frt=()=>Oz;function swe(){const t=Nn.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${Nn.scheme}://${Nn.host}${Nn.port!=null?`:${Nn.port}`:""}`}${e}`}function Yr(t){if(!t)return null;const e={path:null,query:null},i=new Jm(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=Nz(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function Nz(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const s=r.indexOf("=");let n,o;s<0?(n=decodeURIComponent(r),o=""):(n=decodeURIComponent(r.slice(0,s)),o=decodeURIComponent(r.slice(s+1)));let a=i[n];typeof a=="string"&&(a=i[n]=[a]),Array.isArray(a)?a.push(o):i[n]=o}return i}function AS(t,e){return t?Object.keys(t).map((i=>{const r=t[i];if(r==null)return"";const s=encodeURIComponent(i)+"=";return Array.isArray(r)?r.map((n=>uS(n)?s+encodeURIComponent(JSON.stringify(n)):s+encodeURIComponent(n))).join("&"):uS(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)})).filter((i=>i)).join("&"):""}function Wte(t=!1){let e,i=_1.proxyUrl;if(typeof t=="string"){e=Yte(t);const r=bk(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw Z1e().warn(uV),new te("urlUtils:proxy-not-set",uV);return e&&v5()&&(i=Uz(i)),Yr(i)}function Art(t,e=!1){const i=bk(t);let r,s;if(i){const n=Fz(i.proxyUrl);r=n.path,s=n.query?Nz(n.query):null}else if(e){const n=Wte(t);r=n.path,s=n.query}if(r){const n=Yr(t);t=r+"?"+n.path;const o=AS({...s,...n.query});o&&(t=`${t}?${o}`)}return t}const hw={path:"",query:""};function Fz(t){const e=t.indexOf("?");return e!==-1?(hw.path=t.slice(0,e),hw.query=t.slice(e+1)):(hw.path=t,hw.query=null),hw}function Qte(t){return t=(t=_T(t=Awe(t=Fz(t).path),!0)).toLowerCase()}function nwe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:Qte(t.urlPrefix)},i=_1.proxyRules,r=e.urlPrefix;let s=i.length;for(let n=0;n<i.length;n++){const o=i[n].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;s=n;break}o.indexOf(r)===0&&(s=n+1)}return i.splice(s,0,e),s}function bk(t){const e=_1.proxyRules,i=Qte(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function owe(t,e){if(!t||!e)return!1;t=wT(t),e=wT(e);const i=cV(t),r=cV(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&Ou(t,e,!0)}function Jte(t,e){return t=wT(t),e=wT(e),_T(t)===_T(e)}function wT(t){const e=(t=sc(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function g5(t,e=_1.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function Ou(t,e,i=!1){if(!t||!e)return!1;const r=w5(t),s=w5(e);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function zz(t){if(typeof t=="string"){if(!jo(t))return!0;t=w5(t)}if(Ou(t,Nn))return!0;const e=_1.trustedServers||[];for(let i=0;i<e.length;i++){const r=awe(e[i]);for(let s=0;s<r.length;s++)if(Ou(t,r[s]))return!0}return!1}function awe(t){return R$[t]||(jz(t)||qu(t)?R$[t]=[new Jm(fa(t))]:R$[t]=[new Jm(`http://${t}`),new Jm(`https://${t}`)]),R$[t]}function fa(t,e=Oz,i){return qu(t)?i!=null&&i.preserveProtocolRelative?t:Nn.scheme==="http"&&Nn.authority===ba(t).slice(2)?`http:${t}`:`https:${t}`:jz(t)?t:m0(t[0]==="/"?fwe(e):e,t)}function Bz(t,e=Oz,i){if(t==null||!jo(t))return t;const r=sc(t),s=r.toLowerCase(),n=sc(e).toLowerCase().replace(/\/+$/,""),o=i?sc(i).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return t;const a=(y,g,_)=>(_=y.indexOf(g,_))===-1?y.length:_;let l=a(s,"/",s.indexOf("//")+2),c=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(c=l+1,l!==s.length);)l=a(s,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const h=n.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let y=0;y<h;y++)t=`../${t}`;else t=`./${t}`;return t}function sc(t){return t=gwe(t=ywe(t=mwe(t=fa(t=t.trim()))))}function m0(...t){const e=t.filter(os);if(!(e!=null&&e.length))return;const i=[];if(jo(e[0])){const s=e[0],n=s.indexOf("//");n!==-1&&(i.push(s.slice(0,n+1)),dwe(e[0])&&(i[0]+="/"),e[0]=s.slice(n+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce(((s,n)=>n?s.concat(n.split("/")):s),[]);for(let s=0;s<r.length;s++){const n=r[s];n===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!n&&s===r.length-1||n&&(n!=="."||i.length===0))&&i.push(n)}return i.join("/")}function ba(t,e=!1){if(t==null||S1(t)||Fd(t))return null;let i=t.indexOf("://");if(i===-1&&qu(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=_T(t,!0)),t}function jo(t){return qu(t)||jz(t)}function S1(t){return t!=null&&t.slice(0,5)==="blob:"}function Fd(t){return t!=null&&t.slice(0,5)==="data:"}function lwe(t){const e=y0(t);return e!=null&&e.isBase64?Vte(e.data):null}function mrt(t){return J1e(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const cwe=/^data:(.*?)(;base64)?,(.*)$/;function y0(t){const e=t.match(cwe);if(!e)return null;const[,i,r,s]=e;return{mediaType:i,isBase64:!!r,data:s}}function Zte(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function uwe(t){return(await fetch(t)).blob()}function yrt(t){const e=lwe(t);if(!e)return null;const i=y0(t);return new Blob([e],{type:i.mediaType})}function qu(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function jz(t){return t!=null&&Gte.test(t)}function Yte(t){return t!=null&&Y1e.test(t)||Nn.scheme==="https"&&qu(t)}function hwe(t){return t!=null&&Hte.test(t)||Nn.scheme==="http"&&qu(t)}function dwe(t){return t!=null&&X1e.test(t)}function Uz(t){return qu(t)?`https:${t}`:t.replace(Hte,"https:")}function pwe(){return Nn.scheme==="http"}function v5(){return Nn.scheme==="https"}function _T(t,e=!1){return qu(t)?t.slice(2):(t=t.replace(Gte,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function fwe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function Vz(t){let e=0;if(jo(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function grt(t,e){if(!t)return"";const i=Yr(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const s=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(s,"")}function Awe(t){return t.endsWith("/")?t:`${t}/`}function Xte(t){return t.replace(/\/+$/,"")}function mwe(t){if(/^https?:\/\//i.test(t)){const e=Fz(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function ywe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function gwe(t){const e=_1.httpsDomains;if(!hwe(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),qte.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return pwe()&&r===Nn.authority&&!K1e.test(t)||(v5()&&r===Nn.authority||e&&e.some((s=>r===s||r.endsWith(`.${s}`)))||v5()&&!bk(t))&&(t=Uz(t)),t}function b5(t,e,i){if(!(e&&i&&t&&jo(t)))return t;const r=t.indexOf("//"),s=t.indexOf("/",r+2),n=t.indexOf(":",r+2),o=Math.min(s<0?t.length:s,n<0?t.length:n);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function Kte(t,e){const i=new URL(t);return i.host=e,i.port&&!qte.test(e)&&(i.port=""),i.toString()}function vwe(t){return new URL(t).host}function w5(t){return typeof t=="string"?new Jm(fa(t)):(t.scheme||(t.scheme=Nn.scheme),t)}function vrt(t){return bwe.test(t)}function eie(t,e){const i=Yr(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function tie(t,e,i){const r=Yr(t),s=r.query||{};return s[e]=String(i),`${r.path}?${AS(s)}`}function EI(t,e){if(!e)return t;const i=Yr(t),r=i.query||{};for(const[n,o]of Object.entries(e))o!=null&&(r[n]=o);const s=AS(r);return s?`${i.path}?${s}`:i.path}function iie(t){if(t==null)return null;const e=t.match(rie);return e?e[2]:null}function hV(t){if(t==null)return null;const e=t.match(rie);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function brt(t){return typeof t=="string"?y0(t)??{data:t}:new Promise(((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(y0(r.result)),r.onerror=s=>i(s)}))}const rie=/([^.]*)\.([^/]*)$/,bwe=/(^data:image\/svg|\.svg$)/i,sie="20250917",nie="2136612b0849a0d597a86ff9f672ef9f9b4016c4";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const oie="4.33";let _t,Gz=oie;Gz="4.33.14";function wrt(t){_t=t}function wwe(t){const e=_t==null?void 0:_t.findCredential(t);return e!=null&&e.token?tie(t,"token",e.token):t}ce("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ce("host-webworker");function kd(t,e){var r;const i=(r=e==null?void 0:e.url)==null?void 0:r.path;if(t&&i&&(t=fa(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const s=Bz(t,e.portalItem.itemUrl);s!=null&&_we.test(s)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(s).path)}return(t=_5(t,e==null?void 0:e.portal))&&_k.test(t)?Hz(t):t}function g0(t,e,i=Nb.YES){var s,n;if((t=t&&_k.test(t)?uie(t):t)==null)return t;!jo(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let r=fa(t);if(e){const o=((s=e.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((n=e.url)==null?void 0:n.path);if(o){const a=_5(o,e.portal),l=_5(r,e.portal);r=Bz(l,a,a),r!=null&&r!==l&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=cie(r,e==null?void 0:e.portal),jo(r)&&(r=sc(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!jo(r)&&!Fd(r)&&i===Nb.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function wk(t,e,i){return kd(t,i)}function v0(t,e,i,r){const s=g0(t,r);s!==void 0&&(e[i]=s)}const _k=/\/items\/([^/]+)\/resources\/(.*)/,_we=/^\.\/resources\//;function aie(t){const e=(t==null?void 0:t.match(_k))??null;return(e==null?void 0:e[1])??null}function lie(t){const e=(t==null?void 0:t.match(_k))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=hV(i);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=hV(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:n}}function cie(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?b5(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function _5(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=Dz();return Ou(r,`${r.scheme}://${i}`)?b5(t,e.portalHostname,i):b5(t,i,e.portalHostname)}function Hz(t){if(!t)return t||null;let e=t;return e&&_t&&!_t.findCredential(e)&&(e=Ute(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function uie(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&_t&&!_t.findCredential(e)&&(e=Ute(e)),e}var Nb;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(Nb||(Nb={}));const Swe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Nb},ensureMainOnlineDomain:cie,fromCDNUrl:uie,fromJSON:kd,itemIdFromResourceUrl:aie,prefixAndFilenameFromResourceUrl:lie,read:wk,toCDNUrl:Hz,toJSON:g0,write:v0},Symbol.toStringTag,{value:"Module"})),hie={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},die=Object.values(hie),pie=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${die.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),xwe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${die.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),$we=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function _rt(t){return pie.test(t)}function Wu(t){if(t==null)return null;const e=Yr(t),i=(e==null?void 0:e.path.match(pie))||(e==null?void 0:e.path.match(xwe));if(!i)return null;const[,r,s,n,o]=i,a=s.indexOf("/");return{title:qz(a!==-1?s.slice(a+1):s),serverType:hie[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function Ewe(t){const e=Yr(t).path.match($we);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function qz(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function Iwe(t,e){const i=[];if(t){const r=Wu(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=qz(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function ST(t){let e=ba(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function Cwe(t,e){return t&&Xte(eie(t,e))}function Twe(t){let{url:e}=t;if(!e)return{url:e};e=eie(e,t.logger);const i=Yr(e),r=Wu(i.path);let s;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(s=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const n=Ewe(i.path);n!=null&&(e=n.serviceUrl,s=n.sublayerId)}return{url:Xte(e),layerId:s}}function Mwe(t,e,i,r,s){v0(e,r,"url",s),r.url&&t.layerId!=null&&(r.url=m0(r.url,i,t.layerId.toString()))}function Srt(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),s=e.includes("/imageserver/wmsserver"),n=e.includes("/wmsserver");return i&&(r||s||n)}function xrt(t){var r;if(!t)return!1;const e=new Jm(fa(t)),i=(r=e.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const kwe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function Wz(t){if(!Qz(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=li.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:li.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?li.apiKey:null}function S5(){return li.apiKey!=null||li.apiKeys.basemapStyles!=null}function fie(t,e){return e?Qz(t):Wz(t)!=null}function Qz(t){const e=ba(t,!0);return!!e&&!kwe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function Pwe(t,e,i=!1,r){return new Promise(((s,n)=>{if(cl(r))return void n(dV());let o=()=>{c(),n(new Error(`Unable to load ${e}`))},a=()=>{const h=t;c(),s(h)},l=()=>{if(!t)return;const h=t;c(),h.src="",n(dV())};const c=()=>{ce("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,r!=null&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",l),ce("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))}))}function dV(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Aie="Timeout exceeded";function Lwe(){return new Error(Aie)}function $rt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===Aie}function Rwe(t){li.request.crossOriginNoCorsDomains||(li.request.crossOriginNoCorsDomains={});const e=li.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[ba(i)??""]=0:(e[ba("http://"+i)??""]=0,e[ba("https://"+i)??""]=0)}function Owe(t){const e=li.request.crossOriginNoCorsDomains;if(e){let i=ba(t);if(i)return i=i.toLowerCase(),!Ou(i,Dz())&&e[i]<Date.now()-36e5}return!1}async function Dwe(t){var s;const e=Yr(t);t=e.path,((s=e.query)==null?void 0:s.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=li.request.crossOriginNoCorsDomains,r=ba(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const x5=new Map;function Nwe(t,e){const i=e==null?void 0:e.preferredHost;if(!i||Ou(t,`https://${i}`,!0))return;const r=Wu(t);if(!r||r.serverType!=="FeatureServer"||jte(t))return;const s=r.url.path.toLowerCase();x5.has(s)||x5.set(s,i)}function pV(t){var r;const e=(r=Wu(t))==null?void 0:r.url.path.toLowerCase();if(!e)return t;const i=x5.get(e);return i?Kte(t,i):t}async function ei(t,e){var _;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=Nz(e.query.toString().replaceAll("+"," ")));const i=Fd(t),r=S1(t);r||i||(t=sc(t));const s={url:t,requestOptions:{...e}},n=S=>({data:S,getAllHeaders:Fb,getHeader:Fb,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=g5(t,Ja.internalInterceptors);if(o){const S=await AV(o,s);if(S!=null)return n(S)}let a=g5(t);if(a){const S=await AV(a,s);if(S!=null)return n(S);a.after||a.error||(a=null)}if(t=s.url,(e=s.requestOptions).responseType==="image"&&(ce("host-webworker")||ce("host-node")))throw nc("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(e.method==="head"){if(e.body)throw nc("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw nc("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await Uwe(),xT)return xT.execute(t,e);const l=new AbortController,c=ac(e,(()=>l.abort())),h={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:Ja.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},y=e.useRequestQueue?Wwe(h):E5(h),g=await y.finally((()=>c==null?void 0:c.remove()));return(_=a==null?void 0:a.after)==null||_.call(a,g),g}let xT,mie=!1;const Ja=li.request,yie="FormData"in globalThis,Fwe=new Set([499,498,403,401]),zwe=new Set(["COM_0056","COM_0057","SB_0008"]),Bwe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Fb=()=>null,$T=Symbol();function jwe(t){const e=ba(t);e&&!ei._corsServers.includes(e)&&ei._corsServers.push(e)}function fV(t){const e=ba(t);return!e||e.endsWith(".arcgis.com")||ei._corsServers.includes(e)||zz(e)}function nc(t,e,i,r){var o;let s;const n={url:i.url,requestOptions:i.requestOptions,getAllHeaders:Fb,getHeader:Fb,ssl:!1};if(e instanceof te)return e.details?(e.details=ie(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=n,e;if(e){const a=r&&(()=>Array.from(r.headers)),l=r&&(y=>r.headers.get(y)),c=r==null?void 0:r.status,h=e.message;h&&(s=h),a&&l&&(n.getAllHeaders=a,n.getHeader=l),n.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||c||0,n.subCode=e.subcode,n.messageCode=e.messageCode,typeof e.details=="string"?(n.messages=[e.details],s??(s=e.details)):(n.messages=e.details,s??(s=(o=n.messages)==null?void 0:o[0])),n.raw=$T in e?e[$T]:e}return s??(s="Error"),Zs(e)?Hi():new te(t,s,n)}async function Uwe(){ce("host-webworker")&&(!xT&&globalThis.invokeStaticMessage?xT=await Ie(()=>import("./request-CJQU-o6T.js"),[],import.meta.url):mie=!0)}async function $5(){_t||await Ie(()=>import("./IdentityManager-skfNaG39.js"),[],import.meta.url)}async function Vwe(t){var a;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,s=i.body;let n=null,o=null;if(yie&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Ja.priority,redirect:"follow",signal:r},(n||o)&&(t.fetchOptions.body=n||o),(mie||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||n!=null&&n.get("token")),!t.hasToken){const l=Wz(e);l&&(i.query??(i.query={}),i.query.token=l,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!gie(e)&&!cl(r)){let l;i.authMode==="immediate"?(await $5(),l=await _t.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await $5(),l=await _t.getCredential(e,{prompt:!1,signal:r}).catch((()=>{}))):_t&&(l=_t.findCredential(e)),l&&(t.credential=l,t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function gie(t){return Bwe.some((e=>e.test(t)))}async function Gwe(t){let e=t.params.url,i=pV(e);const r=t.params.requestOptions,s=t.fetchOptions??{},n=S1(e)||Fd(e),o=r.responseType||"json",a=n?0:r.timeout!=null?r.timeout:Ja.timeout;let l=!1;if(!n){t.useSSL&&(e=Uz(e));let _={...r.query};t.credentialToken&&(_.token=t.credentialToken);let S=AS(_);ce("esri-url-encodes-apostrophe")&&(S=S.replaceAll("'","%27"));const E=i.length+1+S.length;let C;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||E>Ja.maxUrlLength;const M=r.useProxy||!!bk(e);if(M){const P=Wte(e);C=P.path,!l&&C.length+1+E>Ja.maxUrlLength&&(l=!0),P.query&&(_={...P.query,..._})}if(s.method==="HEAD"&&(l||M)){if(l)throw E>Ja.maxUrlLength?nc("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):nc("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(M)throw nc("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(l?(s.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=EI(e,_):(s.body=AS(_),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):e=EI(e,_),M&&(t.useProxy=!0,e=`${C}?${e}`),_.token&&yie&&s.body instanceof FormData&&!jte(e)&&s.body.set("token",_.token),r.hasOwnProperty("withCredentials"))t.withCredentials=r.withCredentials;else if(!Ou(e,Dz())){if(zz(e))t.withCredentials=!0;else if(_t){const P=_t.findServerInfo(e);P!=null&&P.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(s.credentials="include",Owe(e)&&await Dwe(l?EI(e,_):e)),i=pV(e)}let c,h,y=0,g=!1;a>0&&(y=setTimeout((()=>{g=!0,t.controller.abort()}),a));try{if(r.responseType==="native-request-init")h=s,h.url=i,r.signal?h.signal=r.signal:delete h.signal;else if(r.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||l||Hwe(r.headers)||!n&&!t.useProxy&&Ja.proxyUrl&&!fV(e)){if(ei._beforeFetch&&await ei._beforeFetch(e,s),c=await fetch(i,s),ei._afterFetch&&await ei._afterFetch(c),t.useProxy||jwe(e),r.responseType==="native")h=c;else if(s.method!=="HEAD")if(c.ok){switch(o){case"array-buffer":h=await c.arrayBuffer();break;case"blob":case"image":h=await c.blob();break;default:h=await c.text()}if(y&&(clearTimeout(y),y=0),o==="json"||o==="xml"||o==="document")if(h)switch(o){case"json":h=JSON.parse(h);break;case"xml":h=mV(h,"application/xml");break;case"document":h=mV(h,"text/html")}else h=null;if(h){if(o==="array-buffer"||o==="blob"){const _=c.headers.get("Content-Type");if(_&&/application\/json|text\/plain/i.test(_)&&h[o==="blob"?"size":"byteLength"]<=750)try{const S=await new Response(h).json();S.error&&(h=S)}catch{}}o==="image"&&h instanceof Blob&&(h=await yV(URL.createObjectURL(h),t,!0))}}else{h=await c.text();try{h=JSON.parse(h)}catch{}}}else h=await yV(i,t)}catch(_){if(_.name==="AbortError")throw g?Lwe():Hi("Request canceled");if(!(!c&&_ instanceof TypeError&&Ja.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||fV(e))throw _;t.redoRequest=!0,nwe({proxyUrl:Ja.proxyUrl,urlPrefix:ba(e)??""})}finally{y&&clearTimeout(y)}return[c,h]}async function AV(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(s){i=nc("request:interceptor",s,e)}if((r instanceof Error||r instanceof te)&&(i=nc("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function Hwe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function mV(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}ei._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],ei._beforeFetch=void 0,ei._afterFetch=void 0;const qwe=new Map;async function Wwe(t){const e=Jwe(t.params.url);if(!e)return E5(t);const{QueueProcessor:i}=await Ie(()=>import("./QueueProcessor-BOMNxHqO.js"),[],import.meta.url);return F0(qwe,e.origin,(()=>{const s=e.isHosted?ce("request-queue-concurrency-hosted"):ce("request-queue-concurrency-non-hosted");return new i({concurrency:s,process:n=>{if(cl(n.params.requestOptions))throw nc("",Hi("Request canceled"),n.params);return E5(n)}})})).push(t)}async function E5(t){var n,o;let e,i;await Vwe(t);try{do[e,i]=await Gwe(t);while(!await Qwe(t,e,i))}catch(a){const l=nc("request:server",a,t.params,e);throw l.details.ssl=t.useSSL,(n=t.interceptor)!=null&&n.error&&t.interceptor.error(l),l}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!zz(r)){const a=ba(r,!0);a&&Ja.trustedServers.push(a)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Rwe(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&Nwe(r,i);const s=t.credential;if(s&&_t){const a=_t.findServerInfo(s.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=_t.findCredential(l,s.userId);c&&_t._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):Fb,getHeader:e?a=>e.headers.get(a):Fb,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function Qwe(t,e,i){var c;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,n;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[$T]=i,s.details=i.messages)),!s&&!e.ok)throw s=new Error(`Unable to load ${e.url} status: ${e.status}`),s[$T]=i,s;let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o==null?void 0:o.toUpperCase());const l=r.authMode;if(n===403&&(a===4||(c=s.message)!=null&&c.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||n===498)&&n!==void 0&&Fwe.has(n)&&!gie(t.params.url)&&(n!==403||(!o||!zwe.has(o))&&(a==null||a===2&&t.credentialToken))){await $5();try{const h=await _t.getCredential(t.params.url,{error:nc("request:server",s,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=h,t.credentialToken=h.token,t.useSSL=t.useSSL||h.ssl,!1}catch(h){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;s=h}}if(s)throw s;return!0}function yV(t,e,i=!1){const r=e.controller.signal,s=new Image;return e.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Ja.priority,s.src=t,Pwe(s,t,i,r)}function Jwe(t){let e,i;return typeof t=="string"?(e=ba(t,!0),i=ST(t)):(e=t.origin,i=ST(t.toString())),e==null?null:{origin:e,isHosted:i}}function er(t){if(!li.assetsPath)throw be.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new te("assets:path-not-set","config.assetsPath is not set");return m0(li.assetsPath,t)}let oR,ae=null;function Jz(){return!!ae}function Zwe(){return!!ce("esri-wasm")}function vie(){return oR||(oR=Ie(()=>import("./pe-wasm-dPKcsouR.js"),[],import.meta.url).then((({default:t})=>t({locateFile:e=>er(`esri/geometry/support/${e}`)}))).then((t=>{_ie(t)})),oR)}var I5,hr;(function(t){function e(n,o,a){ae.ensureCache.prepare();const l=mm(a),c=a===l,h=ae.ensureFloat64(l),y=ae._pe_geog_to_proj(ae.getPointer(n),o,h);return y&&qp(a,o,h,c),y}function i(n,o,a,l){switch(l){case hr.PE_TRANSFORM_P_TO_G:return r(n,o,a);case hr.PE_TRANSFORM_G_TO_P:return e(n,o,a)}return 0}function r(n,o,a){return s(n,o,a,0)}function s(n,o,a,l){ae.ensureCache.prepare();const c=mm(a),h=a===c,y=ae.ensureFloat64(c),g=ae._pe_proj_to_geog_center(ae.getPointer(n),o,y,l);return g&&qp(a,o,y,h),g}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=s})(I5||(I5={})),(function(t){function e(){t.PE_BUFFER_MAX=ae.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=ae.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=ae.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=ae.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=ae.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=ae.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=ae.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=ae.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=ae.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=ae.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=ae.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=ae.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=ae.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=ae.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=ae.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=ae.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=ae.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=ae.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=ae.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=ae.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=ae.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=ae.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=ae.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=ae.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=ae.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=ae.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=ae.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=ae.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=ae.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=ae.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=ae.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=ae.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e})(hr||(hr={}));let bie=null;var C5;(function(t){const e={},i={},r=_=>{const S=_.getType();switch(S){case hr.PE_TYPE_GEOGCS:_=ae.castObject(_,ae.PeGeogcs);break;case hr.PE_TYPE_PROJCS:_=ae.castObject(_,ae.PeProjcs);break;case hr.PE_TYPE_GEOGTRAN:_=ae.castObject(_,ae.PeGeogtran);break;default:S&hr.PE_TYPE_UNIT&&(_=ae.castObject(_,ae.PeUnit))}return _};function s(){ae.PeFactory.prototype.initialize(null)}function n(_){return o(hr.PE_TYPE_COORDSYS,_)}function o(_,S){let E=null,C=e[_];if(C||(C={},e[_]=C),C.hasOwnProperty(String(S))&&(E=C[S],ae.compare(E,ae.NULL)&&(E=null)),!E){const M=ae.PeFactory.prototype.factoryByType(_,S);ae.compare(M,ae.NULL)||(E=r(M),C[S]=E)}return E}function a(_,S){let E=null,C=i[_];if(C||(C={},i[_]=C),C.hasOwnProperty(S)&&(E=C[S],ae.compare(E,ae.NULL)&&(E=null)),!E){const M=ae.PeFactory.prototype.fromString(_,S);ae.compare(M,ae.NULL)||(E=r(M),C[S]=E)}return E}function l(_){return o(hr.PE_TYPE_GEOGCS,_)}function c(_){return o(hr.PE_TYPE_GEOGTRAN,_)}function h(_){return ae.PeFactory.prototype.getCode(_)}function y(_){return o(hr.PE_TYPE_PROJCS,_)}function g(_){return o(hr.PE_TYPE_UNIT,_)}t.initialize=s,t.coordsys=n,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=c,t.getCode=h,t.projcs=y,t.unit=g})(C5||(C5={}));let wie=null;var ET,T5,M5,k5,P5,L5,IT,R5,CT,TT,O5;function _ie(t){function e(n,o,a){n[o]=a(n[o])}ae=t,hr.init(),ET.init(),IT.init(),CT.init(),TT.init(),bie=class extends ae.PeDouble{constructor(n=NaN){super(n)}destroy(){ae.destroy(this)}[Symbol.dispose](){this.destroy()}},wie=class extends ae.PeGCSExtent{destroy(){ae.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[ae.PeAngunit,ae.PeDatum,ae.PeGeogcs,ae.PeGeogtran,ae.PeObject,ae.PeParameter,ae.PePrimem,ae.PeProjcs,ae.PeSpheroid,ae.PeUnit];for(const n of i)e(n.prototype,"getName",(o=>function(){return o.call(this,new Array(hr.PE_NAME_MAX))}));for(const n of[ae.PeGeogtran,ae.PeProjcs])e(n.prototype,"getParameters",(o=>function(){const a=new Array(hr.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const h=ae.getValue(l,"*");a[c]=h?ae.wrapPointer(h,ae.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a}));e(ae.PeHorizon.prototype,"getCoord",(n=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return qp(l,a,n.call(this),o),l})),e(ae.PeGTlistExtendedEntry.prototype,"getEntries",(n=>{const o=ae._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!ae.compare(l,ae.NULL)){a=[l];const c=this.getSteps();if(c>1){const h=ae.getPointer(l);for(let y=1;y<c;y++)a.push(ae.wrapPointer(h+o*y,ae.PeGTlistExtendedGTs))}}return a}}));const r=ae._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!ae.compare(l,ae.NULL)){a=[l];const c=l.getNump();if(c>1){const h=ae.getPointer(l);for(let y=1;y<c;y++)a.push(ae.wrapPointer(h+r*y,ae.PeHorizon))}}return o.set(n,a),a};e(ae.PeProjcs.prototype,"horizonGcsGenerate",s),e(ae.PeProjcs.prototype,"horizonPcsGenerate",s),ae.PeObject.prototype.toString=function(n=hr.PE_STR_OPTS_NONE){ae.ensureCache.prepare();const o=ae.getPointer(this),a=ae.ensureInt8(new Array(hr.PE_BUFFER_MAX));return ae.UTF8ToString(ae._pe_object_to_string_ext(o,n,a))},ae.PeGeogcs.prototype.destroy=function(){this.Delete(),Fl(this),this.ptr=0},ae.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},ae.PeProjcs.prototype.destroy=function(){this.Delete(),Fl(this),this.ptr=0},ae.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Fl(t){if(!t)return;const e=ae.getClass(t);if(!e)return;const i=ae.getCache(e);if(!i)return;const r=ae.getPointer(t);r&&delete i[r]}function O$(t,e){const i=[],r=new Array(e);for(let s=0;s<t;s++)i.push(ae.ensureInt8(r));return i}function mm(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function qp(t,e,i,r=!1){if(r)for(let s=0;s<2*e;s++)t[s]=ae.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let n=0;n<e;n++)s&&(t[n]=new Array(2)),t[n][0]=ae.getValue(i,"double"),t[n][1]=ae.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=ae.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=ae._pe_getPeGTlistExtendedEntrySize()}function r(s,n,o,a,l,c){let h=null;const y=new ae.PeInteger(c);try{const g=ae.PeGTlistExtended.prototype.getGTlist(s,n,o,a,l,y);if((c=y.val)&&(h=[g],c>1)){const _=ae.getPointer(g);for(let S=1;S<c;S++)h.push(ae.wrapPointer(_+e*S,ae.PeGTlistExtendedEntry))}}finally{ae.destroy(y)}return h}t.init=i,t.getGTlist=r})(ET||(ET={})),(function(t){function e(i){if(i!=null&&i.length){for(const r of i)Fl(r),r.getEntries().forEach((s=>{Fl(s);const n=s.getGeogtran();Fl(n),n.getParameters().forEach(Fl),[n.getGeogcs1(),n.getGeogcs2()].forEach((o=>{Fl(o);const a=o.getDatum();Fl(a),Fl(a.getSpheroid()),Fl(o.getPrimem()),Fl(o.getUnit())}))}));ae.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e})(T5||(T5={})),(function(t){function e(i,r,s,n,o){ae.ensureCache.prepare();const a=mm(s),l=s===a,c=ae.ensureFloat64(a);let h=0;n&&(h=ae.ensureFloat64(n));const y=ae._pe_geog_to_geog(ae.getPointer(i),r,c,h,o);return y&&qp(s,r,c,l),y}t.geogToGeog=e})(M5||(M5={})),(function(t){function e(n,o,a,l,c,h,y,g){ae.PeLineType.prototype.geodesic_coordinate(n,o,a,l,c,h,y,g)}function i(n,o,a,l,c,h,y,g,_){ae.PeLineType.prototype.geodetic_coordinate(n,o,a,l,c,h,y,g,_)}function r(n,o,a,l,c,h,y,g,_,S){ae.PeLineType.prototype.geodetic_distance(n,o,a,l,c,h,y,g,_,S)}function s(n,o,a,l,c,h,y,g,_){ae.PeLineType.prototype.great_elliptic_distance(n,o,a,l,c,h,y,g,_)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=r,t.greatEllipticDistance=s})(k5||(k5={})),(function(t){function e(o,a){return ae.PeMath.prototype.phi_to_eta(o,a)}function i(o,a){return ae.PeMath.prototype.eta_to_phi(o,a)}function r(o,a){return ae.PeMath.prototype.phi_to_phig(o,a)}function s(o,a,l){return ae.PeMath.prototype.q(o,a,l)}function n(o,a){return ae.PeMath.prototype.q90(o,a)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=r,t.q=s,t.q90=n})(P5||(P5={})),(function(t){const e=(c,h,y,g,_,S)=>{let E,C;switch(ae.ensureCache.prepare(),c){case"dd":E=ae._pe_geog_to_dd,C=hr.PE_DD_MAX;break;case"ddm":E=ae._pe_geog_to_ddm,C=hr.PE_DDM_MAX;break;case"dms":E=ae._pe_geog_to_dms,C=hr.PE_DMS_MAX}let M=0;h&&(M=ae.getPointer(h));const P=mm(g),D=ae.ensureFloat64(P),F=O$(y,C),U=E(M,y,D,_,ae.ensureInt32(F));if(U)for(let G=0;G<y;G++)S[G]=ae.UTF8ToString(F[G]);return U},i=(c,h,y,g,_)=>{let S;switch(ae.ensureCache.prepare(),c){case"dd":S=ae._pe_dd_to_geog;break;case"ddm":S=ae._pe_ddm_to_geog;break;case"dms":S=ae._pe_dms_to_geog}let E=0;h&&(E=ae.getPointer(h));const C=g.map((F=>ae.ensureString(F))),M=ae.ensureInt32(C),P=ae.ensureFloat64(new Array(2*y)),D=S(E,y,M,P);return D&&qp(_,y,P),D};function r(c,h,y,g,_){return e("dms",c,h,y,g,_)}function s(c,h,y,g){return i("dms",c,h,y,g)}function n(c,h,y,g,_){return e("ddm",c,h,y,g,_)}function o(c,h,y,g){return i("ddm",c,h,y,g)}function a(c,h,y,g,_){return e("dd",c,h,y,g,_)}function l(c,h,y,g){return i("dd",c,h,y,g)}t.geogToDms=r,t.dmsToGeog=s,t.geogToDdm=n,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l})(L5||(L5={})),(function(t){function e(){t.PE_MGRS_STYLE_NEW=ae.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=ae.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=ae.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=ae.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=ae.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,n,o,a,l,c,h){ae.ensureCache.prepare();let y=0;s&&(y=ae.getPointer(s));const g=mm(o),_=ae.ensureFloat64(g),S=O$(n,hr.PE_MGRS_MAX),E=ae.ensureInt32(S),C=ae._pe_geog_to_mgrs_extended(y,n,_,a,l,c,E);if(C)for(let M=0;M<n;M++)h[M]=ae.UTF8ToString(S[M]);return C}function r(s,n,o,a,l){ae.ensureCache.prepare();let c=0;s&&(c=ae.getPointer(s));const h=o.map((S=>ae.ensureString(S))),y=ae.ensureInt32(h),g=ae.ensureFloat64(new Array(2*n)),_=ae._pe_mgrs_to_geog_extended(c,n,y,a,g);return _&&qp(l,n,g),_}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r})(IT||(IT={})),(function(t){function e(r,s,n,o,a,l,c){ae.ensureCache.prepare();let h=0;r&&(h=ae.getPointer(r));const y=mm(n),g=ae.ensureFloat64(y),_=O$(s,hr.PE_MGRS_MAX),S=ae.ensureInt32(_),E=ae._pe_geog_to_usng(h,s,g,o,a,l,S);if(E)for(let C=0;C<s;C++)c[C]=ae.UTF8ToString(_[C]);return E}function i(r,s,n,o){ae.ensureCache.prepare();let a=0;r&&(a=ae.getPointer(r));const l=n.map((g=>ae.ensureString(g))),c=ae.ensureInt32(l),h=ae.ensureFloat64(new Array(2*s)),y=ae._pe_usng_to_geog(a,s,c,h);return y&&qp(o,s,h),y}t.geogToUsng=e,t.usngToGeog=i})(R5||(R5={})),(function(t){function e(){t.PE_UTM_OPTS_NONE=ae.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=ae.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=ae.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,n,o,a,l){ae.ensureCache.prepare();let c=0;s&&(c=ae.getPointer(s));const h=mm(o),y=ae.ensureFloat64(h),g=O$(n,hr.PE_UTM_MAX),_=ae.ensureInt32(g),S=ae._pe_geog_to_utm(c,n,y,a,_);if(S)for(let E=0;E<n;E++)l[E]=ae.UTF8ToString(g[E]);return S}function r(s,n,o,a,l){ae.ensureCache.prepare();let c=0;s&&(c=ae.getPointer(s));const h=o.map((S=>ae.ensureString(S))),y=ae.ensureInt32(h),g=ae.ensureFloat64(new Array(2*n)),_=ae._pe_utm_to_geog(c,n,y,a,g);return _&&qp(l,n,g),_}t.init=e,t.geogToUtm=i,t.utmToGeog=r})(CT||(CT={})),(function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=ae.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=ae.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=ae.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=ae.PePCSInfo.prototype.PE_POLE_POINT}function r(s,n=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(s)&&(a=e.get(s),a[n]&&(o=a[n])),o||(o=ae.PePCSInfo.prototype.generate(s,n),a||(a=[],e.set(s,a)),a[n]=o),o}t.init=i,t.generate=r})(TT||(TT={})),(function(t){function e(){return ae.PeVersion.prototype.version_string()}t.versionString=e})(O5||(O5={}));const Ywe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return I5},get PeDefs(){return hr},get PeDouble(){return bie},get PeFactory(){return C5},get PeGCSExtent(){return wie},get PeGTTransformations(){return M5},get PeGTlistExtended(){return ET},get PeGTlistExtendedEntry(){return T5},get PeLineType(){return k5},get PeMath(){return P5},get PeNotationDms(){return L5},get PeNotationMgrs(){return IT},get PeNotationUsng(){return R5},get PeNotationUtm(){return CT},get PePCSInfo(){return TT},get PeVersion(){return O5},_init:_ie,get _pe(){return ae},isLoaded:Jz,isSupported:Zwe,load:vie},Symbol.toStringTag,{value:"Module"}));var b0;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(b0||(b0={}));let b;const V={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(b=2e3;b<=2045;b++)V[b]=0;for(b=2056;b<=2065;b++)V[b]=0;for(b=2067;b<=2135;b++)V[b]=0;for(b=2137;b<=2154;b++)V[b]=0;for(b=2161;b<=2170;b++)V[b]=0;for(b=2172;b<=2193;b++)V[b]=0;for(b=2195;b<=2198;b++)V[b]=0;for(b=2200;b<=2203;b++)V[b]=0;for(b=2205;b<=2217;b++)V[b]=0;for(b=2222;b<=2224;b++)V[b]=1;for(b=2225;b<=2250;b++)V[b]=2;for(b=2251;b<=2253;b++)V[b]=1;for(b=2257;b<=2264;b++)V[b]=2;for(b=2274;b<=2279;b++)V[b]=2;for(b=2280;b<=2282;b++)V[b]=1;for(b=2283;b<=2289;b++)V[b]=2;for(b=2290;b<=2292;b++)V[b]=0;for(b=2308;b<=2313;b++)V[b]=0;for(b=2315;b<=2491;b++)V[b]=0;for(b=2494;b<=2866;b++)V[b]=0;for(b=2867;b<=2869;b++)V[b]=1;for(b=2870;b<=2888;b++)V[b]=2;for(b=2891;b<=2895;b++)V[b]=2;for(b=2896;b<=2898;b++)V[b]=1;for(b=2902;b<=2908;b++)V[b]=2;for(b=2915;b<=2920;b++)V[b]=2;for(b=2921;b<=2923;b++)V[b]=1;for(b=2924;b<=2930;b++)V[b]=2;for(b=2931;b<=2962;b++)V[b]=0;for(b=2964;b<=2968;b++)V[b]=2;for(b=2969;b<=2973;b++)V[b]=0;for(b=2975;b<=2991;b++)V[b]=0;for(b=2995;b<=3051;b++)V[b]=0;for(b=3054;b<=3079;b++)V[b]=0;for(b=3081;b<=3088;b++)V[b]=0;for(b=3092;b<=3101;b++)V[b]=0;for(b=3106;b<=3138;b++)V[b]=0;for(b=3146;b<=3151;b++)V[b]=0;for(b=3153;b<=3166;b++)V[b]=0;for(b=3168;b<=3172;b++)V[b]=0;for(b=3174;b<=3203;b++)V[b]=0;for(b=3294;b<=3358;b++)V[b]=0;for(b=3367;b<=3403;b++)V[b]=0;for(b=3408;b<=3416;b++)V[b]=0;for(b=3417;b<=3438;b++)V[b]=2;for(b=3441;b<=3446;b++)V[b]=2;for(b=3447;b<=3450;b++)V[b]=0;for(b=3451;b<=3459;b++)V[b]=2;for(b=3460;b<=3478;b++)V[b]=0;for(b=3554;b<=3559;b++)V[b]=0;for(b=3560;b<=3570;b++)V[b]=2;for(b=3571;b<=3581;b++)V[b]=0;for(b=3594;b<=3597;b++)V[b]=0;for(b=3601;b<=3604;b++)V[b]=0;for(b=3637;b<=3639;b++)V[b]=0;for(b=3665;b<=3667;b++)V[b]=0;for(b=3693;b<=3695;b++)V[b]=0;for(b=3701;b<=3727;b++)V[b]=0;for(b=3728;b<=3739;b++)V[b]=2;for(b=3740;b<=3751;b++)V[b]=0;for(b=3753;b<=3760;b++)V[b]=2;for(b=3761;b<=3773;b++)V[b]=0;for(b=3775;b<=3777;b++)V[b]=0;for(b=3779;b<=3781;b++)V[b]=0;for(b=3783;b<=3785;b++)V[b]=0;for(b=3788;b<=3791;b++)V[b]=0;for(b=3797;b<=3802;b++)V[b]=0;for(b=3814;b<=3816;b++)V[b]=0;for(b=3825;b<=3829;b++)V[b]=0;for(b=3832;b<=3841;b++)V[b]=0;for(b=3844;b<=3852;b++)V[b]=0;for(b=3873;b<=3885;b++)V[b]=0;for(b=3890;b<=3893;b++)V[b]=0;for(b=3907;b<=3912;b++)V[b]=0;for(b=3942;b<=3950;b++)V[b]=0;for(b=3968;b<=3970;b++)V[b]=0;for(b=3973;b<=3976;b++)V[b]=0;for(b=3986;b<=3989;b++)V[b]=0;for(b=3994;b<=3997;b++)V[b]=0;for(b=4048;b<=4051;b++)V[b]=0;for(b=4056;b<=4063;b++)V[b]=0;for(b=4093;b<=4096;b++)V[b]=0;for(b=4390;b<=4398;b++)V[b]=0;for(b=4399;b<=4413;b++)V[b]=2;for(b=4418;b<=4433;b++)V[b]=2;for(b=4455;b<=4457;b++)V[b]=2;for(b=4484;b<=4489;b++)V[b]=0;for(b=4491;b<=4554;b++)V[b]=0;for(b=4568;b<=4589;b++)V[b]=0;for(b=4652;b<=4656;b++)V[b]=0;for(b=4766;b<=4800;b++)V[b]=0;for(b=5014;b<=5016;b++)V[b]=0;for(b=5069;b<=5072;b++)V[b]=0;for(b=5105;b<=5130;b++)V[b]=0;for(b=5167;b<=5188;b++)V[b]=0;for(b=5253;b<=5259;b++)V[b]=0;for(b=5269;b<=5275;b++)V[b]=0;for(b=5292;b<=5311;b++)V[b]=0;for(b=5329;b<=5331;b++)V[b]=0;for(b=5343;b<=5349;b++)V[b]=0;for(b=5355;b<=5357;b++)V[b]=0;for(b=5387;b<=5389;b++)V[b]=0;for(b=5459;b<=5463;b++)V[b]=0;for(b=5479;b<=5482;b++)V[b]=0;for(b=5518;b<=5520;b++)V[b]=0;for(b=5530;b<=5539;b++)V[b]=0;for(b=5550;b<=5552;b++)V[b]=0;for(b=5562;b<=5583;b++)V[b]=0;for(b=5623;b<=5625;b++)V[b]=2;for(b=5631;b<=5639;b++)V[b]=0;for(b=5649;b<=5653;b++)V[b]=0;for(b=5663;b<=5680;b++)V[b]=0;for(b=5682;b<=5685;b++)V[b]=0;for(b=5875;b<=5877;b++)V[b]=0;for(b=5896;b<=5899;b++)V[b]=0;for(b=5921;b<=5940;b++)V[b]=0;for(b=6050;b<=6125;b++)V[b]=0;for(b=6244;b<=6275;b++)V[b]=0;for(b=6328;b<=6348;b++)V[b]=0;for(b=6350;b<=6356;b++)V[b]=0;for(b=6366;b<=6372;b++)V[b]=0;for(b=6381;b<=6387;b++)V[b]=0;for(b=6393;b<=6404;b++)V[b]=0;for(b=6480;b<=6483;b++)V[b]=0;for(b=6511;b<=6514;b++)V[b]=0;for(b=6579;b<=6581;b++)V[b]=0;for(b=6619;b<=6624;b++)V[b]=0;for(b=6625;b<=6627;b++)V[b]=2;for(b=6628;b<=6632;b++)V[b]=0;for(b=6634;b<=6637;b++)V[b]=0;for(b=6669;b<=6692;b++)V[b]=0;for(b=6707;b<=6709;b++)V[b]=0;for(b=6720;b<=6723;b++)V[b]=0;for(b=6732;b<=6738;b++)V[b]=0;for(b=6931;b<=6933;b++)V[b]=0;for(b=6956;b<=6959;b++)V[b]=0;for(b=7005;b<=7007;b++)V[b]=0;for(b=7057;b<=7070;b++)V[b]=2;for(b=7074;b<=7082;b++)V[b]=0;for(b=7109;b<=7118;b++)V[b]=0;for(b=7119;b<=7127;b++)V[b]=1;for(b=7374;b<=7376;b++)V[b]=0;for(b=7528;b<=7586;b++)V[b]=0;for(b=7587;b<=7645;b++)V[b]=2;for(b=7692;b<=7696;b++)V[b]=0;for(b=7755;b<=7787;b++)V[b]=0;for(b=7791;b<=7795;b++)V[b]=0;for(b=7799;b<=7801;b++)V[b]=0;for(b=7803;b<=7805;b++)V[b]=0;for(b=7825;b<=7831;b++)V[b]=0;for(b=7845;b<=7859;b++)V[b]=0;for(b=8013;b<=8032;b++)V[b]=0;for(b=8065;b<=8068;b++)V[b]=1;for(b=8518;b<=8529;b++)V[b]=2;for(b=8533;b<=8536;b++)V[b]=2;for(b=8538;b<=8540;b++)V[b]=2;for(b=8677;b<=8679;b++)V[b]=0;for(b=8836;b<=8840;b++)V[b]=0;for(b=8857;b<=8859;b++)V[b]=0;for(b=8908;b<=8910;b++)V[b]=0;for(b=9154;b<=9159;b++)V[b]=0;for(b=9205;b<=9218;b++)V[b]=0;for(b=9271;b<=9273;b++)V[b]=0;for(b=9295;b<=9297;b++)V[b]=0;for(b=9356;b<=9360;b++)V[b]=0;for(b=9404;b<=9407;b++)V[b]=0;for(b=9476;b<=9482;b++)V[b]=0;for(b=9487;b<=9494;b++)V[b]=0;for(b=9697;b<=9699;b++)V[b]=0;for(b=9821;b<=9865;b++)V[b]=0;for(b=10285;b<=10291;b++)V[b]=0;for(b=10314;b<=10317;b++)V[b]=0;for(b=10448;b<=10465;b++)V[b]=0;for(b=10726;b<=10729;b++)V[b]=0;for(b=10731;b<=10733;b++)V[b]=0;for(b=11114;b<=11118;b++)V[b]=0;for(b=20004;b<=20032;b++)V[b]=0;for(b=20047;b<=20049;b++)V[b]=0;for(b=20062;b<=20092;b++)V[b]=0;for(b=20135;b<=20138;b++)V[b]=0;for(b=20248;b<=20258;b++)V[b]=0;for(b=20348;b<=20358;b++)V[b]=0;for(b=20436;b<=20440;b++)V[b]=0;for(b=20822;b<=20824;b++)V[b]=0;for(b=20904;b<=20932;b++)V[b]=0;for(b=20934;b<=20936;b++)V[b]=0;for(b=21004;b<=21032;b++)V[b]=0;for(b=21035;b<=21037;b++)V[b]=0;for(b=21095;b<=21097;b++)V[b]=0;for(b=21148;b<=21150;b++)V[b]=0;for(b=21207;b<=21264;b++)V[b]=0;for(b=21307;b<=21364;b++)V[b]=0;for(b=21413;b<=21423;b++)V[b]=0;for(b=21453;b<=21463;b++)V[b]=0;for(b=21473;b<=21483;b++)V[b]=0;for(b=21780;b<=21782;b++)V[b]=0;for(b=21891;b<=21894;b++)V[b]=0;for(b=21896;b<=21899;b++)V[b]=0;for(b=22171;b<=22177;b++)V[b]=0;for(b=22181;b<=22187;b++)V[b]=0;for(b=22191;b<=22197;b++)V[b]=0;for(b=22207;b<=22222;b++)V[b]=0;for(b=22229;b<=22232;b++)V[b]=0;for(b=22234;b<=22236;b++)V[b]=0;for(b=22243;b<=22250;b++)V[b]=0;for(b=22262;b<=22265;b++)V[b]=0;for(b=22307;b<=22322;b++)V[b]=0;for(b=22348;b<=22357;b++)V[b]=0;for(b=22407;b<=22422;b++)V[b]=0;for(b=22462;b<=22465;b++)V[b]=0;for(b=22521;b<=22525;b++)V[b]=0;for(b=22607;b<=22622;b++)V[b]=0;for(b=22641;b<=22646;b++)V[b]=0;for(b=22648;b<=22657;b++)V[b]=0;for(b=22707;b<=22722;b++)V[b]=0;for(b=22762;b<=22765;b++)V[b]=0;for(b=22807;b<=22822;b++)V[b]=0;for(b=22991;b<=22994;b++)V[b]=0;for(b=23028;b<=23038;b++)V[b]=0;for(b=23301;b<=23333;b++)V[b]=2;for(b=23830;b<=23853;b++)V[b]=0;for(b=23866;b<=23872;b++)V[b]=0;for(b=23877;b<=23884;b++)V[b]=0;for(b=23886;b<=23894;b++)V[b]=0;for(b=23946;b<=23948;b++)V[b]=0;for(b=24311;b<=24313;b++)V[b]=0;for(b=24342;b<=24347;b++)V[b]=0;for(b=24370;b<=24374;b++)V[b]=10;for(b=24375;b<=24381;b++)V[b]=0;for(b=24718;b<=24721;b++)V[b]=0;for(b=24817;b<=24821;b++)V[b]=0;for(b=24877;b<=24882;b++)V[b]=0;for(b=24891;b<=24893;b++)V[b]=0;for(b=25391;b<=25395;b++)V[b]=0;for(b=25828;b<=25838;b++)V[b]=0;for(b=26191;b<=26195;b++)V[b]=0;for(b=26391;b<=26393;b++)V[b]=0;for(b=26701;b<=26722;b++)V[b]=0;for(b=26729;b<=26799;b++)V[b]=2;for(b=26801;b<=26803;b++)V[b]=2;for(b=26811;b<=26813;b++)V[b]=2;for(b=26847;b<=26870;b++)V[b]=2;for(b=26891;b<=26899;b++)V[b]=0;for(b=26901;b<=26923;b++)V[b]=0;for(b=26929;b<=26946;b++)V[b]=0;for(b=26948;b<=26998;b++)V[b]=0;for(b=27037;b<=27040;b++)V[b]=0;for(b=27205;b<=27232;b++)V[b]=0;for(b=27258;b<=27260;b++)V[b]=0;for(b=27391;b<=27398;b++)V[b]=0;for(b=27561;b<=27564;b++)V[b]=0;for(b=27571;b<=27574;b++)V[b]=0;for(b=27581;b<=27584;b++)V[b]=0;for(b=27591;b<=27594;b++)V[b]=0;for(b=27700;b<=27707;b++)V[b]=0;for(b=28191;b<=28193;b++)V[b]=0;for(b=28348;b<=28358;b++)V[b]=0;for(b=28402;b<=28432;b++)V[b]=0;for(b=28462;b<=28492;b++)V[b]=0;for(b=29118;b<=29122;b++)V[b]=0;for(b=29168;b<=29172;b++)V[b]=0;for(b=29177;b<=29185;b++)V[b]=0;for(b=29187;b<=29195;b++)V[b]=0;for(b=29900;b<=29903;b++)V[b]=0;for(b=30161;b<=30179;b++)V[b]=0;for(b=30491;b<=30494;b++)V[b]=0;for(b=30729;b<=30732;b++)V[b]=0;for(b=31251;b<=31259;b++)V[b]=0;for(b=31265;b<=31268;b++)V[b]=0;for(b=31275;b<=31279;b++)V[b]=0;for(b=31281;b<=31297;b++)V[b]=0;for(b=31461;b<=31469;b++)V[b]=0;for(b=31491;b<=31495;b++)V[b]=0;for(b=31917;b<=31922;b++)V[b]=0;for(b=31965;b<=32e3;b++)V[b]=0;for(b=32001;b<=32003;b++)V[b]=2;for(b=32005;b<=32031;b++)V[b]=2;for(b=32033;b<=32060;b++)V[b]=2;for(b=32064;b<=32067;b++)V[b]=2;for(b=32074;b<=32077;b++)V[b]=2;for(b=32081;b<=32086;b++)V[b]=0;for(b=32107;b<=32130;b++)V[b]=0;for(b=32133;b<=32159;b++)V[b]=0;for(b=32164;b<=32167;b++)V[b]=2;for(b=32180;b<=32199;b++)V[b]=0;for(b=32201;b<=32260;b++)V[b]=0;for(b=32301;b<=32360;b++)V[b]=0;for(b=32401;b<=32460;b++)V[b]=0;for(b=32501;b<=32560;b++)V[b]=0;for(b=32601;b<=32662;b++)V[b]=0;for(b=32664;b<=32667;b++)V[b]=2;for(b=32701;b<=32761;b++)V[b]=0;for(b=53001;b<=53004;b++)V[b]=0;for(b=53008;b<=53019;b++)V[b]=0;for(b=53021;b<=53032;b++)V[b]=0;for(b=53034;b<=53037;b++)V[b]=0;for(b=53042;b<=53046;b++)V[b]=0;for(b=53074;b<=53080;b++)V[b]=0;for(b=54001;b<=54004;b++)V[b]=0;for(b=54008;b<=54019;b++)V[b]=0;for(b=54021;b<=54032;b++)V[b]=0;for(b=54034;b<=54037;b++)V[b]=0;for(b=54042;b<=54046;b++)V[b]=0;for(b=54048;b<=54053;b++)V[b]=0;for(b=54074;b<=54080;b++)V[b]=0;for(b=54090;b<=54096;b++)V[b]=0;for(b=54098;b<=54101;b++)V[b]=0;for(b=65161;b<=65163;b++)V[b]=0;for(b=102001;b<=102040;b++)V[b]=0;for(b=102042;b<=102063;b++)V[b]=0;for(b=102065;b<=102067;b++)V[b]=0;for(b=102070;b<=102117;b++)V[b]=0;for(b=102122;b<=102216;b++)V[b]=0;for(b=102221;b<=102377;b++)V[b]=0;for(b=102382;b<=102388;b++)V[b]=0;for(b=102389;b<=102398;b++)V[b]=2;for(b=102399;b<=102444;b++)V[b]=0;for(b=102445;b<=102447;b++)V[b]=2;for(b=102448;b<=102458;b++)V[b]=0;for(b=102459;b<=102468;b++)V[b]=2;for(b=102469;b<=102499;b++)V[b]=0;for(b=102500;b<=102519;b++)V[b]=1;for(b=102520;b<=102524;b++)V[b]=0;for(b=102525;b<=102529;b++)V[b]=2;for(b=102530;b<=102588;b++)V[b]=0;for(b=102590;b<=102598;b++)V[b]=0;for(b=102601;b<=102603;b++)V[b]=0;for(b=102605;b<=102628;b++)V[b]=0;for(b=102629;b<=102646;b++)V[b]=2;for(b=102648;b<=102700;b++)V[b]=2;for(b=102701;b<=102703;b++)V[b]=0;for(b=102707;b<=102730;b++)V[b]=2;for(b=102733;b<=102758;b++)V[b]=2;for(b=102767;b<=102900;b++)V[b]=0;for(b=102901;b<=102933;b++)V[b]=2;for(b=102934;b<=102950;b++)V[b]=13;for(b=102951;b<=102963;b++)V[b]=0;for(b=102965;b<=102969;b++)V[b]=0;for(b=102971;b<=102973;b++)V[b]=0;for(b=102975;b<=102989;b++)V[b]=0;for(b=102990;b<=102992;b++)V[b]=1;for(b=102997;b<=103002;b++)V[b]=0;for(b=103003;b<=103008;b++)V[b]=2;for(b=103009;b<=103011;b++)V[b]=0;for(b=103012;b<=103014;b++)V[b]=2;for(b=103019;b<=103021;b++)V[b]=0;for(b=103022;b<=103024;b++)V[b]=2;for(b=103029;b<=103031;b++)V[b]=0;for(b=103032;b<=103034;b++)V[b]=2;for(b=103065;b<=103068;b++)V[b]=0;for(b=103074;b<=103076;b++)V[b]=0;for(b=103077;b<=103079;b++)V[b]=1;for(b=103080;b<=103082;b++)V[b]=0;for(b=103083;b<=103085;b++)V[b]=2;for(b=103090;b<=103093;b++)V[b]=0;for(b=103097;b<=103099;b++)V[b]=0;for(b=103100;b<=103102;b++)V[b]=2;for(b=103107;b<=103109;b++)V[b]=0;for(b=103110;b<=103112;b++)V[b]=2;for(b=103113;b<=103116;b++)V[b]=0;for(b=103117;b<=103120;b++)V[b]=2;for(b=103153;b<=103157;b++)V[b]=0;for(b=103158;b<=103162;b++)V[b]=2;for(b=103163;b<=103165;b++)V[b]=0;for(b=103166;b<=103168;b++)V[b]=1;for(b=103169;b<=103171;b++)V[b]=2;for(b=103186;b<=103188;b++)V[b]=0;for(b=103189;b<=103191;b++)V[b]=2;for(b=103192;b<=103195;b++)V[b]=0;for(b=103196;b<=103199;b++)V[b]=2;for(b=103200;b<=103224;b++)V[b]=0;for(b=103225;b<=103227;b++)V[b]=1;for(b=103232;b<=103237;b++)V[b]=0;for(b=103238;b<=103243;b++)V[b]=2;for(b=103244;b<=103246;b++)V[b]=0;for(b=103247;b<=103249;b++)V[b]=2;for(b=103254;b<=103256;b++)V[b]=0;for(b=103257;b<=103259;b++)V[b]=2;for(b=103264;b<=103266;b++)V[b]=0;for(b=103267;b<=103269;b++)V[b]=2;for(b=103300;b<=103375;b++)V[b]=0;for(b=103381;b<=103383;b++)V[b]=0;for(b=103384;b<=103386;b++)V[b]=1;for(b=103387;b<=103389;b++)V[b]=0;for(b=103390;b<=103392;b++)V[b]=2;for(b=103397;b<=103399;b++)V[b]=0;for(b=103400;b<=103471;b++)V[b]=2;for(b=103476;b<=103478;b++)V[b]=0;for(b=103479;b<=103481;b++)V[b]=2;for(b=103486;b<=103488;b++)V[b]=0;for(b=103489;b<=103491;b++)V[b]=2;for(b=103492;b<=103495;b++)V[b]=0;for(b=103496;b<=103499;b++)V[b]=2;for(b=103528;b<=103543;b++)V[b]=0;for(b=103544;b<=103548;b++)V[b]=2;for(b=103549;b<=103551;b++)V[b]=0;for(b=103552;b<=103554;b++)V[b]=1;for(b=103555;b<=103557;b++)V[b]=2;for(b=103558;b<=103560;b++)V[b]=0;for(b=103571;b<=103573;b++)V[b]=0;for(b=103574;b<=103576;b++)V[b]=2;for(b=103577;b<=103580;b++)V[b]=0;for(b=103581;b<=103583;b++)V[b]=2;for(b=103595;b<=103694;b++)V[b]=0;for(b=103696;b<=103699;b++)V[b]=0;for(b=103700;b<=103793;b++)V[b]=2;for(b=103794;b<=103890;b++)V[b]=0;for(b=103891;b<=103896;b++)V[b]=2;for(b=103900;b<=103971;b++)V[b]=2;for(b=103972;b<=103977;b++)V[b]=0;for(b=112e3;b<=112101;b++)V[b]=0;const Sie=[102100,102113,3857,3785,900913],Xwe=[104905,104971],Kwe=[4326,...Sie,...Xwe],mS=[-20037508342788905e-9,20037508342788905e-9],D5=[-20037508342787e-6,20037508342787e-6],aR={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:mS,origin:D5,dx:1e-5},xie={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:mS,origin:D5,dx:1e-5},102100:aR,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:mS,origin:D5,dx:1e-5},3857:aR,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:aR};function Ts(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||Qu(t)&&Qu(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&i===a}let s,n;return t.wkt2&&e.wkt2?(s=t.wkt2,n=e.wkt2):t.wkt&&e.wkt&&(s=t.wkt,n=e.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function co(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&xie[e]||null}function MT(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function x1(t){if(!ma(t))return!1;const{wkid:e}=t;if(e)return V[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function e2e(t){return!($ie(t)||Eie(t))}function w0(t){return(t==null?void 0:t.wkid)===4326}function Ert(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function gV(t){return(t==null?void 0:t.wkid)===b0.CGCS2000}function Qu(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Sie.includes(e)}function t2e(t){return(t==null?void 0:t.wkid)===32662}function Sk(t){return t===b0.GCSMARS2000||t===b0.GCSMARS2000_SPHERE}function $ie(t){return Sk(t==null?void 0:t.wkid)}function xk(t){return t===b0.GCSMOON2000}function Eie(t){return xk(t==null?void 0:t.wkid)}function i2e(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Kwe.includes(e)}function ma(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const Iie={wkid:4326,wkt:Hf(xie[4326].wkTemplate,{Central_Meridian:"0.0"})},Cie={wkid:102100,latestWkid:3857},r2e={wkid:32662};function Zz(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const s2e=Zz(kr),Yz=Zz(Ru),Xz=Zz(Rf),n2e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${kr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},o2e=Yz.wkt.toUpperCase(),a2e=Xz.wkt.toUpperCase();function l2e(t){if(t!=null&&ma(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(Sk(e))return Ru;const r=i==null?void 0:i.toUpperCase();if(i&&r===o2e)return Ru;if(xk(e)||r&&r===a2e)return Rf}return kr}function Irt(t){return Sk(t)?Ru:xk(t)?Rf:kr}function kT(t){return Ts(t,s2e)}function Of(t){return kT(t)||Ts(t,Yz)||Ts(t,Xz)}const Tie=39.37,c2e=kr.radius*Math.PI/200,Mie=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,zb=V,kie=/UNIT\[([^\]]+)]/i,u2e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),h2e=ys()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),vl=t=>t*t,ip=t=>t*t*t,yS={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:vl(.001)},"square-centimeters":{inBaseUnits:vl(.01)},"square-decimeters":{inBaseUnits:vl(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:vl(1e3)},"square-inches":{inBaseUnits:vl(.0254)},"square-feet":{inBaseUnits:vl(.3048)},"square-yards":{inBaseUnits:vl(.9144)},"square-miles":{inBaseUnits:vl(1609.344)},"square-nautical-miles":{inBaseUnits:vl(1852)},"square-us-feet":{inBaseUnits:vl(1200/3937)},acres:{inBaseUnits:.0015625*vl(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*ip(.001)},"cubic-centimeters":{inBaseUnits:1e3*ip(.01)},"cubic-decimeters":{inBaseUnits:1e3*ip(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*ip(1e3)},"cubic-inches":{inBaseUnits:1e3*ip(.0254)},"cubic-feet":{inBaseUnits:1e3*ip(.3048)},"cubic-yards":{inBaseUnits:1e3*ip(.9144)},"cubic-miles":{inBaseUnits:1e3*ip(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},d2e=(()=>{const t={};for(const e in yS)for(const i in yS[e].units)t[i]=e;return t})();function p2e(t,e,i){return t*yS[i].units[e].inBaseUnits}function f2e(t,e,i){return t/yS[i].units[e].inBaseUnits}const A2e=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],m2e=["metric","imperial"],Pie=[...m2e,...A2e],y2e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function N5(t){const e=d2e[t];if(!e)throw new Error("unknown type");return e}function vV(t,e=null){return e=e||N5(t),yS[e].baseUnit===t}function Br(t,e,i){if(e===i)return t;const r=N5(e);if(r!==N5(i))throw new Error("incompatible units");const s=vV(e,r)?t:p2e(t,e,r);return vV(i,r)?s:f2e(s,i,r)}function Crt(t,e,i,r=!1){if(!r&&x1(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=U0(e);return s!==i&&(t=s?Br(t,s,i):Br(t*=xa(e),"meters",i)),t}function Trt(t,e,i,r=!1){if(!r&&x1(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=U0(i);return e!==s&&(t=s?Br(t,e,s):Br(t,e,"meters")/xa(i)),t}function g2e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function Mrt(t){return g2e(t)}function krt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function Prt(t,e){const i=Br(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Lrt(t,e){const i=Br(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function Rrt(t,e){const i=Br(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function Ort(t,e){const i=Br(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Drt(t,e){const i=Br(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Nrt(t,e){const i=Br(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function v2e(t,e,i){return Br(t,e,"meters")/(i*Math.PI/180)}function Kz(t){return h2e.fromJSON(t.toLowerCase())||null}function PT(t){if(t!=null&&!e2e(t))return 1;const e=xa(t);return e>1e5?1:e}function Lie(t){return xa(t)>=l2e(t).metersPerDegree?"meters":U0(t)}function xa(t,e=kr.metersPerDegree){return b2e(t,!0)??e}function b2e(t,e=!1){const i=(t==null?void 0:t.wkid)??null,r=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let s=null;if(i){if(Sk(i))return Ru.metersPerDegree;if(xk(i))return Rf.metersPerDegree;s=zb.values[zb[i]],!s&&e&&u2e.has(i)&&(s=c2e)}else r&&(Die(r)?s=bV(Mie.exec(r),s):Oie(r)&&(s=bV(kie.exec(r),s)));return s}function Frt(t){return x1(t)?1:xa(t)}function bV(t,e){return t!=null&&t[1]?Rie(t[1]):e}function Rie(t){return parseFloat(t.split(",")[1])}function U0(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let r=null;if(e)r=zb.units[zb[e]];else if(i){const s=Die(i)?Mie:Oie(i)?kie:null;if(s){const n=s.exec(i);n!=null&&n[1]&&(r=_2e(n[1]))}}return r!=null?Kz(r):null}function zrt(t){const e=U0(t);return e!=null&&Pie.includes(e)?e:null}function Brt(t){const e=Lie(t);return e!=null&&Pie.includes(e)?e:null}function jrt(t){const e=U0(t);return e==null?null:y2e.get(e)}function Oie(t){return/^GEOCCS/i.test(t)}function Die(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const w2e=1e-7;function _2e(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!Kz(i)){const r=Rie(t);i=null;const s=zb.values;for(let n=0;n<s.length;++n)if(Math.abs(r-s[n])<w2e){i=zb.units[n];break}}return i}function Urt(t){const e=U0(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const S2e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},x2e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},$2e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},E2e=ys()(S2e),I2e=ys()(x2e),Vrt=ys()($2e);var wc,ru;let We=(ru=class extends pe{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return wc.WebMercator;if((e==null?void 0:e.wkid)===4326)return wc.WGS84;const i=new wc;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return w0(this)}get isWebMercator(){return Qu(this)}get isGeographic(){return x1(this)}get isWrappable(){return i2e(this)}get metersPerUnit(){return xa(this)}get unit(){return U0(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===wc.WGS84)return new wc(Iie);if(this===wc.WebMercator)return new wc(Cie);const e=new wc;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=ie(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return i==null||s?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===i&&n.referenceServiceName===r:n.id===i}return Ts(this,e)}toJSON(e){return this.write(void 0,e)}},wc=ru,ru.GCS_NAD_1927=null,ru.WGS84=null,ru.WebMercator=null,ru.PlateCarree=null,ru);u([A({readOnly:!0})],We.prototype,"isWGS84",null),u([A({readOnly:!0})],We.prototype,"isWebMercator",null),u([A({readOnly:!0})],We.prototype,"isGeographic",null),u([A({readOnly:!0})],We.prototype,"isWrappable",null),u([A({type:Kt,json:{write:!0}})],We.prototype,"latestWkid",void 0),u([A({readOnly:!0})],We.prototype,"metersPerUnit",null),u([A({readOnly:!0})],We.prototype,"unit",null),u([A({type:Kt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],We.prototype,"wkid",void 0),u([A({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],We.prototype,"wkt",void 0),u([Ne("wkt"),Ne("web-scene","wkt")],We.prototype,"writeWkt",null),u([A({type:String,json:{write:!1}})],We.prototype,"wkt2",void 0),u([A({type:Kt,json:{write:!0}})],We.prototype,"vcsWkid",void 0),u([A({type:Kt,json:{write:!0}})],We.prototype,"latestVcsWkid",void 0),u([A()],We.prototype,"imageCoordinateSystem",void 0),We=wc=u([B("esri.geometry.SpatialReference")],We),We.prototype.toJSON.isDefaultToJSON=!0,We.GCS_NAD_1927=et.freeze(new We({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),We.WGS84=et.freeze(new We(Iie)),We.WebMercator=et.freeze(new We(Cie)),We.PlateCarree=et.freeze(new We(r2e));let qs=class extends pe{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=We.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof We)return e;if(e!=null){const r=new We;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};u([A()],qs.prototype,"type",void 0),u([A({readOnly:!0})],qs.prototype,"cache",null),u([A({readOnly:!0})],qs.prototype,"extent",null),u([A({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],qs.prototype,"hasM",void 0),u([A({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],qs.prototype,"hasZ",void 0),u([A({type:We,json:{write:!0},value:We.WGS84})],qs.prototype,"spatialReference",void 0),u([Me("spatialReference")],qs.prototype,"readSpatialReference",null),qs=u([B("esri.geometry.Geometry")],qs);function Bb(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new te("internal:mesh","Mesh geometries are not supported for this operation")}function C2e(t){t.forEach(Bb)}const T2e=57.29577951308232,M2e=.017453292519943;function wV(t){return t*T2e}function _V(t){return t*M2e}function Hrt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/kr.radius))}function F5(t){return t.wkid!=null||t.wkt!=null}const lR=[0,0];function LT(t,e,i,r,s){const n=t,o=s;if(o.spatialReference=i,"x"in n&&"x"in o)[o.x,o.y]=e(n.x,n.y,lR,r);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=e(n.xmin,n.ymin,lR,r),[o.xmax,o.ymax]=e(n.xmax,n.ymax,lR,r);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let c;for(let h=0;h<a.length;h++){const y=a[h];c=[],l.push(c);for(let g=0;g<y.length;g++)c.push(e(y[g][0],y[g][1],[0,0],r)),y[g].length>2&&c[g].push(y[g][2]),y[g].length>3&&c[g].push(y[g][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return s}function II(t,e){const i=t&&(F5(t)?t:t.spatialReference),r=e&&(F5(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Ts(r,i)||Qu(r)&&w0(i)||Qu(i)&&w0(r))}function $k(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(F5(e)?e:e.spatialReference);return II(i,r)?Ts(i,r)?ie(t):Qu(r)?LT(t,Vg,We.WebMercator,!1,ie(t)):w0(r)?LT(t,Ek,We.WGS84,!1,ie(t)):null:null}function Vg(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=_V(e);return i[0]=_V(t)*kr.radius,i[1]=kr.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Ek(t,e,i=[0,0],r=!1){if(t===mS[0])i[0]=-180;else if(t===mS[1])i[0]=180;else{const s=wV(t/kr.radius);i[0]=r?s:s-360*Math.floor((s+180)/360)}return i[1]=wV(Math.PI/2-2*Math.atan(Math.exp(-e/kr.radius))),i}function Sd(t,e=!1,i=ie(t)){return Bb(t),Bb(i),LT(t,Vg,We.WebMercator,e,i)}function Gg(t,e=!1,i=ie(t)){return Bb(t),Bb(i),LT(t,Ek,We.WGS84,e,i)}function Nie(t,e){const i=t.x-e.x,r=t.y-e.y,s=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+s*s)}function k2e(t){var e;return((e=Fie(t,zie))==null?void 0:e[0])??null}function P2e(t){var e;return((e=Fie(t,zie))==null?void 0:e[1])??null}function Fie({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(Qu(i))return Ek(t,e,r);if(x1(i))return r[0]=t,r[1]=e,r}return null}const zie=[0,0];var CI;const cR=[0,0];function SV(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ct=CI=class extends qs{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",et.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,s){let n;if(Array.isArray(t))n=t,s=e,t=n[0],e=n[1],i=n[2],r=n[3];else if(t&&typeof t=="object"){if(n=t,t=n.x!=null?n.x:n.longitude,e=n.y!=null?n.y:n.latitude,i=n.z,r=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new We(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)be.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)be.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&(s!=null&&s.isWebMercator)){const a=Vg(n.longitude,n.latitude,cR);t=a[0],e=a[1]}}}else SV(i)?(s=i,i=null):SV(r)&&(s=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?be.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&be.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return P2e(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Vg(i,t,cR)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return k2e(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Vg(t,e,cR)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new CI;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return CI.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:s,spatialReference:n}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:h}=t;if(!n.equals(h))if(n.isWebMercator&&h.isWGS84)[l,c]=Vg(l,c),h=n;else{if(!n.isWGS84||!h.isWebMercator)return!1;[l,c]=Ek(l,c),h=n}return e===l&&i===c&&r===o&&s===a&&n.wkid===h.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=co(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,s=2*r;let n;return e>r?(n=Math.ceil(Math.abs(e-r)/s),e-=n*s):e<i&&(n=Math.ceil(Math.abs(e-i)/s),e+=n*s),this._set("x",e),this}distance(t){return Nie(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};u([A({readOnly:!0})],ct.prototype,"cache",null),u([A({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ct.prototype,"hasM",null),u([A({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ct.prototype,"hasZ",null),u([A({type:Number})],ct.prototype,"latitude",null),u([A({type:Number})],ct.prototype,"longitude",null),u([A({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),yi((t=>isNaN(t)?t:ro(t)))],ct.prototype,"x",void 0),u([Ne("x")],ct.prototype,"writeX",null),u([Me("x")],ct.prototype,"readX",null),u([A({type:Number,json:{write:!0}})],ct.prototype,"y",void 0),u([A({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ct.prototype,"z",void 0),u([A({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ct.prototype,"m",void 0),ct=CI=u([B("esri.geometry.Point")],ct),ct.prototype.toJSON.isDefaultToJSON=!0;const uR=[0,0];function Cx(t,e){return e!=null&&Zn(t,e.x,e.y,e.z)}function qrt(t,e){var i;if(!((i=e.points)!=null&&i.length))return!1;for(const r of e.points)if(!jb(t,r))return!1;return!0}function L2e(t,e){const{xmin:i,ymin:r,zmin:s,xmax:n,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Zn(t,i,r,s)&&Zn(t,i,o,s)&&Zn(t,n,o,s)&&Zn(t,n,r,s)&&Zn(t,i,r,a)&&Zn(t,i,o,a)&&Zn(t,n,o,a)&&Zn(t,n,r,a):Zn(t,i,r)&&Zn(t,i,o)&&Zn(t,n,o)&&Zn(t,n,r)}function jb(t,e){return Zn(t,e[0],e[1])}function R2e(t,e){return Zn(t,e[0],e[1],e[2])}function Zn(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function e7(t,e){return uR[1]=e.y,uR[0]=e.x,O2e(t,uR)}function O2e(t,e){return t7(t.rings,e)}function t7(t,e){if(!t)return!1;if(D2e(t))return xV(!1,t,e);let i=!1;for(let r=0,s=t.length;r<s;r++)i=xV(i,t[r],e);return i}function D2e(t){return!Array.isArray(t[0][0])}function xV(t,e,i){const[r,s]=i;let n=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,h]=e[a],[y,g]=e[o];(h<s&&g>=s||g<s&&h>=s)&&c+(s-h)/(g-h)*(y-c)<r&&(n=!n)}return n}function N2e(t,e){return Cx(t,e)}function F2e(t,e){const i=t.hasZ&&e.hasZ;let r,s,n;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(n=e.zmin,t.zmax<n)return!1}else if(n=t.zmin,e.zmax<n)return!1}return!0}function z2e(t,e){const{points:i,hasZ:r}=e,s=r?R2e:jb;for(const n of i)if(s(t,n))return!0;return!1}const _0=[0,0],S0=[0,0],x0=[0,0],$0=[0,0],B2e=[_0,S0,x0,$0],Bie=[[x0,_0],[_0,S0],[S0,$0],[$0,x0]];function j2e(t,e){return U2e(t,e.rings)}function U2e(t,e){_0[0]=t.xmin,_0[1]=t.ymax,S0[0]=t.xmax,S0[1]=t.ymax,x0[0]=t.xmin,x0[1]=t.ymin,$0[0]=t.xmax,$0[1]=t.ymin;for(const i of B2e)if(t7(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(jb(t,r))return!0;for(let s=1;s<i.length;s++){const n=i[s];if(jb(t,n)||jie(r,n,Bie))return!0;r=n}}return!1}function V2e(t,e){_0[0]=t.xmin,_0[1]=t.ymax,S0[0]=t.xmax,S0[1]=t.ymax,x0[0]=t.xmin,x0[1]=t.ymin,$0[0]=t.xmax,$0[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(jb(t,s))return!0;for(let n=1;n<r.length;n++){const o=r[n];if(jb(t,o)||jie(s,o,Bie))return!0;s=o}}return!1}const Ns=[0,0];function G2e(t){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.length-1;s++){const n=i[s],o=i[s+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],h=t[a][l+1];if(RT(n,o,c,h,Ns)&&!(Ns[0]===n[0]&&Ns[1]===n[1]||Ns[0]===c[0]&&Ns[1]===c[1]||Ns[0]===o[0]&&Ns[1]===o[1]||Ns[0]===h[0]&&Ns[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let n=r-1;s===0&&(n=r-2);const o=i[s],a=i[s+1];for(let l=s+2;l<n;l++){const c=i[l],h=i[l+1];if(RT(o,a,c,h,Ns)&&!(Ns[0]===o[0]&&Ns[1]===o[1]||Ns[0]===c[0]&&Ns[1]===c[1]||Ns[0]===a[0]&&Ns[1]===a[1]||Ns[0]===h[0]&&Ns[1]===h[1]))return!0}}}return!1}function jie(t,e,i){for(let r=0;r<i.length;r++)if(RT(t,e,i[r][0],i[r][1]))return!0;return!1}function RT(t,e,i,r,s){const[n,o]=t,[a,l]=e,[c,h]=i,[y,g]=r,_=y-c,S=n-c,E=a-n,C=g-h,M=o-h,P=l-o,D=C*E-_*P;if(D===0)return!1;const F=(_*M-C*S)/D,U=(E*M-P*S)/D;return F>=0&&F<=1&&U>=0&&U<=1&&(s&&(s[0]=n+F*(a-n),s[1]=o+F*(l-o)),!0)}function H2e(t){switch(t){case"esriGeometryEnvelope":case"extent":return F2e;case"esriGeometryMultipoint":case"multipoint":return z2e;case"esriGeometryPoint":case"point":return N2e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return j2e;case"esriGeometryPolyline":case"polyline":return V2e}}var Tl;function q2e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function rp(t,e,i){return e==null?i:i==null?e:t(e,i)}let Rt=Tl=class extends qs{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,s){return q2e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?We.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:s??We.WGS84}}static fromPoint(t){return new Tl({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new ct({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Tl;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&II(e,i)&&(t=e.isWebMercator?Sd(t):Gg(t,!0)),t.type==="point"?Cx(this,t):t.type==="extent"&&L2e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&II(e,i)&&(t=e.isWebMercator?Sd(t):Gg(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Ts(e,i)&&II(e,i)&&(t=e.isWebMercator?Sd(t):Gg(t,!0)),H2e(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=rp(Math.min,this.zmin,t.zmin),this.zmax=rp(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=rp(Math.min,this.mmin,t.mmin),this.mmax=rp(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=rp(Math.max,this.zmin,t.zmin),this.zmax=rp(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=rp(Math.max,this.mmin,t.mmin),this.mmax=rp(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=co(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Gg(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=hR(r.x,t).x),this.spatialReference=new We(Hf((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,s=this.xmin,n=this.xmax;return s>=i&&s<=r&&n>=i&&n<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const s=i??co(r);if(s==null)return this;const n=this._getParts(s).map((l=>l.extent));if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return n;let o=!0,a=!0;return n.forEach((l=>{l.hasZ||(o=!1),l.hasM||(a=!1)})),{rings:n.map((l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let y=0;y<c.length;y++)c[y].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let y=0;y<c.length;y++)c[y].push(h)}return c})),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let h;t=t||co(o);const[y,g]=t.valid;h=hR(this.xmin,t);const _=h.x,S=h.frameId;h=hR(this.xmax,t);const E=h.x,C=h.frameId,M=_===E&&a>0;if(a>2*g){const P=new Tl(l<c?_:E,s,g,n,o),D=new Tl(y,s,l<c?E:_,n,o),F=new Tl(0,s,g,n,o),U=new Tl(y,s,0,n,o),G=[],Q=[];P.contains(F)&&G.push(S),P.contains(U)&&Q.push(S),D.contains(F)&&G.push(C),D.contains(U)&&Q.push(C);for(let W=S+1;W<C;W++)G.push(W),Q.push(W);e.push({extent:P,frameIds:[S]},{extent:D,frameIds:[C]},{extent:F,frameIds:G},{extent:U,frameIds:Q})}else _>E||M?e.push({extent:new Tl(_,s,g,n,o),frameIds:[S]},{extent:new Tl(y,s,E,n,o),frameIds:[C]}):e.push({extent:new Tl(_,s,E,n,o),frameIds:[S]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<e.length;n++)e[n].extent.set(s)}return e}};function hR(t,e){const[i,r]=e.valid,s=2*r;let n,o=0;return t>r?(n=Math.ceil(Math.abs(t-r)/s),t-=n*s,o=n):t<i&&(n=Math.ceil(Math.abs(t-i)/s),t+=n*s,o=-n),{x:t,frameId:o}}u([A({readOnly:!0})],Rt.prototype,"cache",null),u([A({readOnly:!0})],Rt.prototype,"center",null),u([A({readOnly:!0})],Rt.prototype,"extent",null),u([A({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Rt.prototype,"hasM",null),u([A({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Rt.prototype,"hasZ",null),u([A({readOnly:!0})],Rt.prototype,"height",null),u([A({readOnly:!0})],Rt.prototype,"width",null),u([A({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Rt.prototype,"xmin",void 0),u([A({type:Number,json:{write:!0}})],Rt.prototype,"ymin",void 0),u([A({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Rt.prototype,"mmin",void 0),u([A({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Rt.prototype,"zmin",void 0),u([A({type:Number,json:{write:!0}})],Rt.prototype,"xmax",void 0),u([A({type:Number,json:{write:!0}})],Rt.prototype,"ymax",void 0),u([A({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Rt.prototype,"mmax",void 0),u([A({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Rt.prototype,"zmax",void 0),Rt=Tl=u([B("esri.geometry.Extent")],Rt),Rt.prototype.toJSON.isDefaultToJSON=!0;function Ub(t,e,i=!1){let{hasM:r,hasZ:s}=t;Array.isArray(e)?e.length!==4||r||s?e.length===3&&i&&!r?(s=!0,r=!1):e.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=r}var z5;function $V(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function W2e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Za=z5=class extends qs{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var s;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):W2e(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=(s=i.points)==null?void 0:s[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Rt,i=this.hasZ,r=this.hasM,s=i?3:2,n=t[0],o=$V(Math.min),a=$V(Math.max);let l,c,h,y,[g,_]=n,[S,E]=n;for(let C=0,M=t.length;C<M;C++){const P=t[C],[D,F]=P;if(g=o(g,D),_=o(_,F),S=a(S,D),E=a(E,F),i&&P.length>2){const U=P[2];l=o(l,U),h=a(h,U)}if(r&&P.length>s){const U=P[s];c=o(c,U),y=a(y,U)}}return e.xmin=g,e.ymin=_,e.xmax=S,e.ymax=E,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=h):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=c,e.mmax=y):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=ie(this.points)}addPoint(t){return Ub(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:ie(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new z5(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new ct(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new ct(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Ub(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};u([A({readOnly:!0})],Za.prototype,"cache",null),u([A()],Za.prototype,"extent",null),u([A({type:[[Number]],json:{write:{isRequired:!0}}})],Za.prototype,"points",void 0),u([Ne("points")],Za.prototype,"writePoints",null),Za=z5=u([B("esri.geometry.Multipoint")],Za),Za.prototype.toJSON.isDefaultToJSON=!0;function Ik(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function vf(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var OT;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(OT||(OT={}));function Wrt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let s=!1,n=!1;return r.forEach((o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)})),r.map((o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}))}return null}function Ck(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function Uie(t,e,i){const r=t[0]+i*(e[0]-t[0]),s=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,s,t[2]+i*(e[2]-t[2])]:[r,s]}function Q2e(t,e,i,r){return Vie(t,e,i[r],i[r+1])}function Vie(t,e,i,r){const[s,n]=e,[o,a]=i,[l,c]=r,h=l-o,y=c-a,g=h*h+y*y,_=(s-o)*h+(n-a)*y,S=Math.min(1,Math.max(0,_/g));return t[0]=o+h*S,t[1]=a+y*S,t}function J2e(t,e,i,r,s,n){let o=i,a=r,l=s-o,c=n-a;if(l!==0||c!==0){const h=((t-o)*l+(e-a)*c)/(l*l+c*c);h>1?(o=s,a=n):h>0&&(o+=l*h,a+=c*h)}return l=t-o,c=e-a,l*l+c*c}function Gie(t,e){return Uie(t,e,.5)}function Z2e(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=Ck(t[r],t[r+1]);return i}function Qrt(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let s=0;s<i-1;++s){const n=Ck(t[s],t[s+1]);if(e-r<n){const o=(e-r)/n;return Uie(t[s],t[s+1],o)}r+=n}return t[i-1]}function Hie(t,e=OT.X,i=OT.Y){let r=0;const s=t.length;let n=t[0];for(let o=1;o<s;o++){const a=t[o];r+=(a[e]-n[e])*(a[i]+n[i]),n=a}if(qie(t)){const o=t[0];r+=(o[e]-n[e])*(o[i]+n[i])}return r>=0}function qie(t){const e=t.length;return e>0&&!rk(t[0],t[e-1])}function Y2e(t){"rings"in t&&(X2e(t),K2e(t))}function X2e(t){if("rings"in t)for(const e of t.rings)qie(e)&&e.push(e[0].slice())}function K2e(t){if(!("rings"in t)||t.rings.length===0||Hie(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function Jrt(t){return t.type!=="polygon"&&t.type!=="polyline"||e_e(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function e_e(t,e){const i=co(e);if(!i)return;const r=i.valid[0],s=i.valid[1],n=s-r;for(const o of t){let a=1/0,l=-1/0;for(const h of o){const y=t_e(h[0],r,s);a=Math.min(a,y),l=Math.max(l,y),h[0]=y}const c=l-a;n-c<c&&o.forEach((h=>{h[0]<0&&(h[0]+=n)}))}}function t_e(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function Zrt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every(((s,n)=>s.length===r[n].length))}function Yrt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function Wie(t){return t?i_e(t.rings,t.hasZ??!1):null}function i_e(t,e){if(!(t!=null&&t.length))return null;const i=[],r=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=t.length;n<o;n++){const a=Qie(t[n],e,s);a&&r.push(a)}if(r.sort(((n,o)=>{let a=n[2]-o[2];return a===0&&e&&(a=n[4]-o[4]),a})),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const n=t[0]&&t[0].length?s_e(t[0],e):null;if(!n)return null;i[0]=n[0],i[1]=n[1],e&&n.length>2&&(i[2]=n[2])}return i}function Qie(t,e,i){let r=0,s=0,n=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let g=0;g<t.length;g++){const _=t[g],S=t[(g+1)%t.length],[E,C,M]=_,P=E-l,D=C-c,[F,U,G]=S,Q=F-l,W=U-c,X=P*W-Q*D;if(o+=X,r+=(P+Q)*X,s+=(D+W)*X,e&&_.length>2&&S.length>2){const K=M-h,de=G-h,ye=P*de-Q*K;n+=(K+de)*ye,a+=ye}E<i[0]&&(i[0]=E),E>i[1]&&(i[1]=E),C<i[2]&&(i[2]=C),C>i[3]&&(i[3]=C),e&&(M<i[4]&&(i[4]=M),M>i[5]&&(i[5]=M))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const y=[r/(6*o)+l,s/(6*o)+c,o];return e&&(i[4]===i[5]||a===0?(y[3]=(i[4]+i[5])/2,y[4]=0):(y[3]=n/(6*a)+h,y[4]=a)),y}function r_e(t,e){let i=0,r=0,s=0;t.nextPoint();const n=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const c=[t.x,t.y],[h,y]=l,g=h-n,_=y-o,[S,E]=c,C=S-n,M=E-o,P=g*M-C*_;s+=P,i+=(g+C)*P,r+=(_+M)*P,h<e[0]&&(e[0]=h),h>e[1]&&(e[1]=h),y<e[2]&&(e[2]=y),y>e[3]&&(e[3]=y)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+n,r/(6*s)+o,s]):null}function s_e(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const h=t[l],y=t[l+1];if(h&&y){i[0]=h[0],i[1]=h[1],r[0]=y[0],r[1]=y[1],e&&h.length>2&&y.length>2&&(i[2]=h[2],r[2]=y[2]);const g=Ck(i,r);if(g){s+=g;const _=Gie(h,y);n+=g*_[0],o+=g*_[1],e&&_.length>2&&(a+=g*_[2])}}}return s>0?e?[n/s,o/s,a/s]:[n/s,o/s]:t.length?t[0]:null}function Jie(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],s=[],n=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=Qie(vf(t),t.hasZ,n);o&&s.push(o)}if(s.sort(((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l})),s.length&&(r[0]=s[0][0],r[1]=s[0][1],e&&(r[2]=s[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||e&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?n_e(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function n_e(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,h=t.z;for(;t.nextPoint();){const y=t.x,g=t.y,_=t.z;i[0]=l,i[1]=c,r[0]=y,r[1]=g,e&&(i[2]=h,r[2]=_);const S=Ck(i,r);if(S){s+=S;const E=Gie(i,r);n+=S*E[0],o+=S*E[1],e&&E.length>2&&(a+=S*E[2])}l=y,c=g,h=_}}return s>0?e?[n/s,o/s,a/s]:[n/s,o/s]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const o_e=1e-6;function a_e(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<o_e){const s=Jie(t);return s?[s[0],s[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)c_e(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const l_e=1/3;function c_e(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,s=i.y;i.nextPoint();let n,o=i.x-r,a=i.y-s,l=0,c=0;for(;i.nextPoint();)l=i.x-r,c=i.y-s,n=.5*l_e*(l*a-c*o),t[0]+=n*(o+l),t[1]+=n*(a+c),o=l,a=c;const h=i.getCurrentRingArea(),y=[r,s];return y[0]-=e[0],y[1]-=e[1],y[0]*=h,y[1]*=h,t[0]+=y[0],t[1]+=y[1],t}function Qr(t=m_e){return[t[0],t[1],t[2],t[3]]}function Zie(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function u_e(t,e,i,r,s=Qr()){return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s}function Xrt(t,e=Qr()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function h_e(t,e,i=new Rt){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function h2(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Krt(t,e,i){if(e!=null)if("length"in e)B5(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else Zie(i,t)}function est(t,e,i=t){const r=e.length;let s=t[0],n=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];s=Math.min(s,c[0]),n=Math.min(n,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return i[0]=s,i[1]=n,i[2]=o,i[3]=a,i}function tst(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function Tk(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function Mk(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function ist(t){return Tk(t)*Mk(t)}function EV(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function d_e(t){const e=Tk(t),i=Mk(t);return Math.sqrt(e*e+i*i)}function rst(t,e){return p_e(t,e.x,e.y)}function p_e(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function sst(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function nst(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function f_e(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function ost(t,e,i,r=t){return r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function A_e(t){return t?Zie(t,IV):Qr(IV)}function B5(t){return t!=null&&t.length===4}function ast(t,e){return B5(t)&&B5(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const IV=[1/0,1/0,-1/0,-1/0],m_e=[0,0,0,0];function Yie(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Xie(t){return t.points!==void 0}function Kie(t){return t.x!==void 0&&t.y!==void 0}function ere(t){return t.paths!==void 0}function tre(t){return t.rings!==void 0}function ire(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const nf=ire(Math.min),of=ire(Math.max);function i7(t,e){return ere(e)?Vb(t,e.paths,!1,!1):tre(e)?Vb(t,e.rings,!1,!1):Xie(e)?r7(t,e.points,!1,!1,!1,!1):Yie(e)?sre(t,e):(Kie(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function Tx(t){let e,i,r,s;for(t.reset(),e=r=1/0,i=s=-1/0;t.nextPath();){const n=rre(t);e=Math.min(n[0],e),r=Math.min(n[1],r),i=Math.max(n[2],i),s=Math.max(n[3],s)}return Qr([e,r,i,s])}function rre(t){let e,i,r,s;for(e=r=1/0,i=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),s=Math.max(t.y,s);return Qr([e,r,i,s])}function lst(t,e){return ere(e)?Vb(t,e.paths,!0,!1):tre(e)?Vb(t,e.rings,!0,!1):Xie(e)?r7(t,e.points,!0,!1,!0,!1):Yie(e)?sre(t,e,!0,!1,!0,!1):(Kie(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Vb(t,e,i,r){const s=i?3:2;if(!e.length||!e[0].length)return null;let n,o,a,l,[c,h]=e[0][0],[y,g]=e[0][0];for(let _=0;_<e.length;_++){const S=e[_];for(let E=0;E<S.length;E++){const C=S[E],[M,P]=C;if(c=nf(c,M),h=nf(h,P),y=of(y,M),g=of(g,P),i&&C.length>2){const D=C[2];n=nf(n,D),o=of(o,D)}if(r&&C.length>s){const D=C[s];a=nf(n,D),l=of(o,D)}}}return i?r?(t[0]=c,t[1]=h,t[2]=n,t[3]=a,t[4]=y,t[5]=g,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=h,t[2]=n,t[3]=y,t[4]=g,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=h,t[2]=a,t[3]=y,t[4]=g,t[5]=l,t.length=6,t):(t[0]=c,t[1]=h,t[2]=y,t[3]=g,t.length=4,t)}function sre(t,e,i,r,s,n){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let h=e.zmin,y=e.zmax,g=e.mmin,_=e.mmax;return s?(h=h||0,y=y||0,n?(g=g||0,_=_||0,t[0]=o,t[1]=l,t[2]=h,t[3]=g,t[4]=a,t[5]=c,t[6]=y,t[7]=_,t):(t[0]=o,t[1]=l,t[2]=h,t[3]=a,t[4]=c,t[5]=y,t)):n?(g=g||0,_=_||0,t[0]=o,t[1]=l,t[2]=g,t[3]=a,t[4]=c,t[5]=_,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function r7(t,e,i,r,s,n){const o=i?3:2,a=r&&n,l=i&&s;if(!e.length||!e[0].length)return null;let c,h,y,g,[_,S]=e[0],[E,C]=e[0];for(let M=0;M<e.length;M++){const P=e[M],[D,F]=P;if(_=nf(_,D),S=nf(S,F),E=of(E,D),C=of(C,F),l&&P.length>2){const U=P[2];c=nf(c,U),h=of(h,U)}if(a&&P.length>o){const U=P[o];y=nf(c,U),g=of(h,U)}}return s?(c=c||0,h=h||0,n?(y=y||0,g=g||0,t[0]=_,t[1]=S,t[2]=c,t[3]=y,t[4]=E,t[5]=C,t[6]=h,t[7]=g,t):(t[0]=_,t[1]=S,t[2]=c,t[3]=E,t[4]=C,t[5]=h,t)):n?(y=y||0,g=g||0,t[0]=_,t[1]=S,t[2]=y,t[3]=E,t[4]=C,t[5]=g,t):(t[0]=_,t[1]=S,t[2]=E,t[3]=C,t)}function y_e(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function g_e(t){return t.points!==void 0}function v_e(t){return t.x!==void 0&&t.y!==void 0}function b_e(t){return t.paths!==void 0}function w_e(t){return t.rings!==void 0}const s7=[];function nre(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function ore(t,e,i,r,s,n){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:s,zmax:n}}function are(t,e,i,r,s,n){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:s,mmax:n}}function lre(t,e,i,r,s,n,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:s,ymax:n,zmax:o,mmax:a}}function n7(t,e=!1,i=!1){return e?i?lre(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):ore(t[0],t[1],t[2],t[3],t[4],t[5]):i?are(t[0],t[1],t[2],t[3],t[4],t[5]):nre(t[0],t[1],t[2],t[3])}function cst(t){return t?y_e(t)?t:v_e(t)?S_e(t):w_e(t)?cre(t):b_e(t)?ure(t):g_e(t)?__e(t):null:null}function __e(t){const{hasZ:e,hasM:i,points:r}=t;return n7(r7(s7,r,e??!1,i??!1),e,i)}function S_e(t){const{x:e,y:i,z:r,m:s}=t,n=s!=null;return r!=null?n?lre(e,i,r,s,e,i,r,s):ore(e,i,r,e,i,r):n?are(e,i,s,e,i,s):nre(e,i,e,i)}function cre(t){const{hasZ:e,hasM:i,rings:r}=t,s=Vb(s7,r,e??!1,i??!1);return s?n7(s,e,i):null}function ure(t){const{hasZ:e,hasM:i,paths:r}=t,s=Vb(s7,r,e??!1,i??!1);return s?n7(s,e,i):null}var TI;function CV(t){return!Array.isArray(t[0])}function x_e(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function $_e(t){var n,o;if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??(e=[]),x_e(e)&&(e=[e]),(o=(n=e[0])==null?void 0:n[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return s??(s=We.WGS84),{...t,hasM:i,hasZ:r,rings:e,spatialReference:s}}let zi=TI=class extends qs{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,s=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(s=!0);const n={rings:e.map((o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})),spatialReference:i};return r&&(n.hasZ=!0),s&&(n.hasM=!0),new TI(n)}constructor(t){super($_e(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const t=Wie(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new ct;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}writeCurveRings(t,e){e.curveRings=ie(t)}get extent(){const t=cre(this),{spatialReference:e}=this;return t?new Rt({...t,spatialReference:e}):null}get isSelfIntersecting(){return RX(be.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),G2e(this.rings)}writeRings(t,e){e.rings=ie(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(CV(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new TI;return t.spatialReference=this.spatialReference,t.rings=ie(this.rings),t.curveRings=ie(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([s,n,o,a],[l,c,h,y])=>s===l&&n===c&&(o==null&&h==null||o===h)&&(a==null&&y==null||a===y);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=t.rings[s];if(!rk(n,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=$k(t,this.spatialReference);return e7(this,e??t)}isClockwise(t){const e=CV(t)?t.map((i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y])):t;return Hie(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new ct(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new ct(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new ct(i[0],i[1],i[2],i[3],this.spatialReference):new ct(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Ub(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ct(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map((s=>new ct(s,i)));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(Ub(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([A({readOnly:!0})],zi.prototype,"cache",null),u([A({readOnly:!0})],zi.prototype,"centroid",null),u([A({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],zi.prototype,"curveRings",void 0),u([Ne("curveRings")],zi.prototype,"writeCurveRings",null),u([A({readOnly:!0})],zi.prototype,"extent",null),u([A({readOnly:!0})],zi.prototype,"isSelfIntersecting",null),u([A({type:[[[Number]]],json:{write:{isRequired:!0}}})],zi.prototype,"rings",void 0),u([Ne("rings")],zi.prototype,"writeRings",null),zi=TI=u([B("esri.geometry.Polygon")],zi),zi.prototype.toJSON.isDefaultToJSON=!0;var j5;function E_e(t){return!Array.isArray(t[0])}function I_e(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function C_e(t){var n,o;if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??(e=[]),I_e(e)&&(e=[e]),(o=(n=e[0])==null?void 0:n[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return s??(s=We.WGS84),{...t,hasM:i,hasZ:r,paths:e,spatialReference:s}}let Tr=j5=class extends qs{constructor(t){super(C_e(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=ie(t)}get extent(){const t=ure(this),{spatialReference:e}=this;return t?new Rt({...t,spatialReference:e}):null}writePaths(t,e){e.paths=ie(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(E_e(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new j5;return t.spatialReference=this.spatialReference,t.paths=ie(this.paths),t.curvePaths=ie(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new ct(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new ct(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new ct(i[0],i[1],i[2],i[3],this.spatialReference):new ct(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Ub(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map((s=>new ct(s,i)));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ct(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(Ub(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([A({readOnly:!0})],Tr.prototype,"cache",null),u([A({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Tr.prototype,"curvePaths",void 0),u([Ne("curvePaths")],Tr.prototype,"writeCurvePaths",null),u([A({readOnly:!0})],Tr.prototype,"extent",null),u([A({type:[[[Number]]],json:{write:{isRequired:!0}}})],Tr.prototype,"paths",void 0),u([Ne("paths")],Tr.prototype,"writePaths",null),Tr=j5=u([B("esri.geometry.Polyline")],Tr),Tr.prototype.toJSON.isDefaultToJSON=!0;function to(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function yv(t){return t.points!==void 0}function gS(t){return t.x!==void 0&&t.y!==void 0}function cn(t){return t.paths!==void 0||t.curvePaths!==void 0}function Hr(t){return t.rings!==void 0||t.curveRings!==void 0}function Ju(t){return t==null?null:t instanceof qs?t:gS(t)?ct.fromJSON(t):cn(t)?Tr.fromJSON(t):Hr(t)?zi.fromJSON(t):yv(t)?Za.fromJSON(t):to(t)?Rt.fromJSON(t):null}function $1(t){return t?gS(t)?"esriGeometryPoint":cn(t)?"esriGeometryPolyline":Hr(t)?"esriGeometryPolygon":to(t)?"esriGeometryEnvelope":yv(t)?"esriGeometryMultipoint":null:null}const T_e={esriGeometryPoint:ct,esriGeometryPolyline:Tr,esriGeometryPolygon:zi,esriGeometryEnvelope:Rt,esriGeometryMultipoint:Za,esriGeometryMultiPatch:zi};function M_e(t){return t&&T_e[t]||null}const k_e=ys()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),TV=ys()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),E1={base:qs,key:"type",typeMap:{extent:Rt,multipoint:Za,point:ct,polyline:Tr,polygon:zi}};function ust(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function P_e(t,e){var i,r,s;if("uniqueIdFields"in e&&((i=e.uniqueIdFields)!=null&&i.length)){if(e.uniqueIdFields.length===1)return(r=t.attributes)==null?void 0:r[e.uniqueIdFields[0]];const n=e.uniqueIdFields.map((o=>{var a;return(a=t.attributes)==null?void 0:a[o]}));return JSON.stringify(n)}return"objectIdField"in e&&e.objectIdField?(s=t.attributes)==null?void 0:s[e.objectIdField]:null}const MV=new Ot({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let L_e=0,Wr=class extends pe{constructor(e){super(e),this.id="sym"+L_e++,this.type=null,this.color=new ze([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([A({type:MV.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:MV.write,isRequired:!0}}})],Wr.prototype,"type",void 0),u([A({type:ze,json:{write:{allowNull:!0}}})],Wr.prototype,"color",void 0),u([Me("color")],Wr.prototype,"readColor",null),Wr=u([B("esri.symbols.Symbol")],Wr);var U5;let kn=U5=class extends Wr{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const s=r.map((n=>{const o=n.valueExpressionInfo;return o?un(t,e,o.expression):null}));await Promise.all(s)}}}clone(){return new U5({data:ie(this.data)})}hash(){return ZX(JSON.stringify(this.data)).toString()}};u([A({json:{write:!1}})],kn.prototype,"color",void 0),u([A({json:{write:!0}})],kn.prototype,"data",void 0),u([Me("data",["symbol"])],kn.prototype,"readData",null),u([Ne("data",{})],kn.prototype,"writeData",null),u([it({CIMSymbolReference:"cim"},{readOnly:!0})],kn.prototype,"type",void 0),kn=U5=u([B("esri.symbols.CIMSymbol")],kn);function Pd(t,e,i=qe){return e||(e=new i),e===t||(e.removeAll(),R_e(t)?e.addMany(t):t&&e.add(t)),e}function hre(t){return t}function R_e(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var Dp;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Dp||(Dp={}));let O_e=class{constructor(){this._resolver=_a(),this._status=Dp.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=Dp.RESOLVED,this._cleanUp()}),(()=>{this._status=Dp.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Dp.RESOLVED}isRejected(){return this._status===Dp.REJECTED}isFulfilled(){return this._status!==Dp.PENDING}abort(){this._resolver.reject(Hi())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=_a(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then((()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()}),(s=>{this.isFulfilled()||this._allPromise!==r||Zs(s)||this._resolver.reject(s)})),e.resolve()}};const dre=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new O_e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then((()=>this)).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=u([B("esri.core.Promise")],e),e};let Mu=class extends dre(et){};Mu=u([B("esri.core.Promise")],Mu),(function(t){t.EsriPromiseMixin=dre})(Mu||(Mu={}));const D_e="not-loaded",N_e="loading",F_e="failed",kV="loaded",pre=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((r=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise(((a,l)=>{const c=tz(n,l);this.destroyed&&l(new te("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally((()=>{c&&c.remove()}))}));if(this.loadStatus===D_e){this._set("loadStatus",N_e);const a=this._loadController=new AbortController;s({signal:a.signal})}return r(),o}}))),this.when((()=>{this._set("loadStatus",kV),this._loadController=null}),(r=>{this._set("loadStatus",F_e),this._set("loadError",r),this._loadController=null}))}destroy(){this._loadController&&(this._loadController=Pb(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===kV}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new te("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return u([A({readOnly:!0})],e.prototype,"loaded",null),u([A({readOnly:!0})],e.prototype,"loadError",void 0),u([A({clonable:!1})],e.prototype,"loadStatus",void 0),u([A({type:[Sa],readOnly:!0})],e.prototype,"loadWarnings",null),e=u([B("esri.core.Loadable")],e),e};let Fn=class extends pre(Mu){};Fn=u([B("esri.core.Loadable")],Fn),(function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=pre,t.isLoadable=e})(Fn||(Fn={}));let D$;function z_e(t){return D$&&!D$.destroyed||(D$=t()),D$}var V5;const B_e=new Ot({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let jr=V5=class extends et{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new V5({categories:this.categories?ie(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map((o=>Array.isArray(o)?JSON.stringify(o):o)));let r="";if(this.extent){const o=$k(this.extent,We.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const n={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map((o=>B_e.toJSON(o.trim()))).join(","),n.sortOrder=this.sortOrder),{query:{...e,...n}}}};u([A()],jr.prototype,"categories",void 0),u([A()],jr.prototype,"disableExtraQuery",void 0),u([A({type:Rt})],jr.prototype,"extent",void 0),u([A()],jr.prototype,"filter",void 0),u([A()],jr.prototype,"num",void 0),u([A()],jr.prototype,"query",void 0),u([A()],jr.prototype,"sortField",void 0),u([A()],jr.prototype,"sortOrder",null),u([A()],jr.prototype,"start",void 0),jr=V5=u([B("esri.portal.PortalQueryParams")],jr);var G5;let Nr=G5=class extends pe{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then((e=>{const i=e.categorySchema||[];return i.some((r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas"))?this._fetchCategorySchemaSet("LivingAtlas",t):i}))}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new te("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new G5({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=fr(jr,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new jr,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new jr,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then((r=>{const s=r.contentCategorySetsGroupQuery;if(s){const n=new jr({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(n,e)}throw new te("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((r=>{if(r.total){const s=r.results[0],n=new jr({num:1,query:`typekeywords:"${t}"`});return s.queryItems(n,e)}throw new te("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((r=>r.total?r.results[0].fetchData("json",e).then((s=>{const n=s==null?void 0:s.categorySchema;return n!=null&&n.length?n:[]})):[]))}};u([A()],Nr.prototype,"access",void 0),u([A({type:Date})],Nr.prototype,"created",void 0),u([A()],Nr.prototype,"description",void 0),u([A()],Nr.prototype,"id",void 0),u([A()],Nr.prototype,"isInvitationOnly",void 0),u([A({type:Date})],Nr.prototype,"modified",void 0),u([A()],Nr.prototype,"owner",void 0),u([A()],Nr.prototype,"portal",void 0),u([A()],Nr.prototype,"snippet",void 0),u([A()],Nr.prototype,"sortField",void 0),u([A()],Nr.prototype,"sortOrder",void 0),u([A()],Nr.prototype,"sourceJSON",void 0),u([A()],Nr.prototype,"tags",void 0),u([A()],Nr.prototype,"thumbnail",void 0),u([A({readOnly:!0})],Nr.prototype,"thumbnailUrl",null),u([A()],Nr.prototype,"title",void 0),u([A({readOnly:!0})],Nr.prototype,"url",null),Nr=G5=u([B("esri.portal.PortalGroup")],Nr);let TA=class extends et{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([A()],TA.prototype,"nextQueryParams",void 0),u([A()],TA.prototype,"queryParams",void 0),u([A()],TA.prototype,"results",void 0),u([A()],TA.prototype,"total",void 0),TA=u([B("esri.portal.PortalQueryResult")],TA);let wh=class extends pe{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new te("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([A({type:Date})],wh.prototype,"created",void 0),u([A()],wh.prototype,"id",void 0),u([A()],wh.prototype,"portal",void 0),u([A()],wh.prototype,"title",void 0),u([A({readOnly:!0})],wh.prototype,"url",null),u([A()],wh.prototype,"username",void 0),wh=u([B("esri.portal.PortalFolder")],wh);var H5;let ki=H5=class extends pe{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,r=t==null?void 0:t.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let n=this.userContentUrl;return r&&(n+="/"+(typeof r=="string"?r:r.id)),this.portal.request(n+"/addItem",s).then((o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load())))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],s=t.map((n=>n.id));if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:e}},o=await this.portal.request(i,n);for(const a of o.results){const l=t.find((y=>a.itemId===y.id)),c=a.success;let h=null;c?(l.id=null,l.portal=null):a.error&&(h=new te("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:c,error:h})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then((e=>{let i;return i=e&&e.folders?e.folders.map((r=>{const s=wh.fromJSON(r);return s.portal=this.portal,s})):[],i}))}fetchGroups(){return this.portal.request(this.url??"").then((t=>{let e;return e=t&&t.groups?t.groups.map((i=>{const r=Nr.fromJSON(i);return r.portal=this.portal,r})):[],e}))}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await Ie(()=>Promise.resolve().then(()=>koe),void 0,import.meta.url),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},s=await this.portal.request(e,{query:r});let n;return s!=null&&s.items?(n=s.items.map((o=>{const a=i.fromJSON(o);return a.portal=this.portal,a})),await Promise.all(n.map((o=>o.load()))),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then((t=>t.tags))}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Nr({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new te("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new te("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new H5({sourceJSON:t});return e.read(t),e}};u([A()],ki.prototype,"access",void 0),u([A({type:Date})],ki.prototype,"created",void 0),u([A()],ki.prototype,"culture",void 0),u([A()],ki.prototype,"description",void 0),u([A()],ki.prototype,"email",void 0),u([A()],ki.prototype,"favGroupId",void 0),u([A()],ki.prototype,"fullName",void 0),u([A()],ki.prototype,"id",void 0),u([A({type:Date})],ki.prototype,"modified",void 0),u([A()],ki.prototype,"orgId",void 0),u([A()],ki.prototype,"portal",void 0),u([A()],ki.prototype,"preferredView",void 0),u([A()],ki.prototype,"privileges",void 0),u([A()],ki.prototype,"region",void 0),u([A()],ki.prototype,"role",void 0),u([A()],ki.prototype,"roleId",void 0),u([A()],ki.prototype,"sourceJSON",void 0),u([A()],ki.prototype,"thumbnail",void 0),u([A({readOnly:!0})],ki.prototype,"thumbnailUrl",null),u([A()],ki.prototype,"units",void 0),u([A({readOnly:!0})],ki.prototype,"userContentUrl",null),u([A({readOnly:!0})],ki.prototype,"url",null),u([A()],ki.prototype,"username",void 0),u([A()],ki.prototype,"userLicenseTypeId",void 0),u([A()],ki.prototype,"userType",void 0),ki=H5=u([B("esri.portal.PortalUser")],ki);var Jo;let dw;const PV={PortalGroup:()=>Promise.resolve({default:Nr}),PortalItem:()=>Ie(()=>Promise.resolve().then(()=>koe),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:ki})};var su;let Oe=(su=class extends pe.JSONSupportMixin(Fn){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=li.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){LV.unregister(this),this.defaultBasemap=tr(this.defaultBasemap),this.defaultDevBasemap=tr(this.defaultDevBasemap),this.defaultVectorBasemap=tr(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=pr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)li.request.trustedServers.includes(i)||li.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return fie(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=ki.fromJSON(e),i.portal=this),i}load(e){const i=Ie(()=>Promise.resolve().then(()=>oDe),void 0,import.meta.url).then((({default:r})=>{ir(e),dw=r})).then((()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e))).then((r=>{var s;if(!this.hasAPIKey&&_t){const n=_t;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Jo.AUTH_MODE_AUTO&&this.authMode!==Jo.AUTH_MODE_NO_PROMPT||((s=this._esriIdCredentialCreateHandle)==null||s.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",j_e(new WeakRef(this))),LV.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)}));return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await Ie(async()=>{const{default:r}=await import("./ElevationLayer-SE9YKRBS.js");return{default:r}},__vite__mapDeps([14,15,16,17,18,19]),import.meta.url)).default;return e?e.map((r=>new i({id:r.id,url:r.url}))):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if((i==null?void 0:i.include3d)===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(e,i);r.unshift(...s)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new jr;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find((s=>s.type==="Web Scene"));return r?new dw({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then((i=>i.categorySchema)):cl(e)?Promise.reject(Hi()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then((i=>i.classificationSchema)):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new jr({num:100,sortField:"title"});if(i!=null&&i.length){const s=[];for(const n of i)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=s.join(" OR "),this.queryGroups(r,e).then((n=>n.results))}return cl(e)?Promise.reject(Hi()):Promise.resolve([])}fetchRegions(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||Bo();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||Bo();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return z_e((()=>new Jo))}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const s=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Bo().toLowerCase()},withCredentials:!0,...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),i&&(n.query.default=!0),this.request(s,n)}queryPortal(e,i,r,s){const n=fr(jr,i),o=a=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...s}).then((l=>{const c=n.clone();return c.start=l.nextStart,new TA({nextQueryParams:c,queryParams:n,total:l.total,results:Jo._resultsToTypedArray(a,{portal:this},l,s)})})).then((l=>Promise.all(l.results.map((c=>typeof c.when=="function"?c.when():l))).then((()=>l),(c=>(Jc(c),l)))));return r&&PV[r]?PV[r]().then((({default:a})=>(ir(s),o(a)))):o()}signIn(){if(this.hasAPIKey)return this.load().then((()=>{if(!this.user)throw new te("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")}));if(this.authMode===Jo.AUTH_MODE_ANONYMOUS||this.authMode===Jo.AUTH_MODE_NO_PROMPT&&!_t)return Promise.reject(new te("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then((()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then((()=>null))):this.loadStatus==="loading"?this.load().then((()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate")))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate")))).then((r=>{r&&(this.sourceJSON=r,this.read(r))}));return _t?_t.getCredential(this.restUrl,{prompt:this.authMode!==Jo.AUTH_MODE_NO_PROMPT}).then((i=>e(i))):e(this.credential)}normalizeUrl(e){var r;const i=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then((s=>{const n=Jo._resultsToTypedArray(r,{portal:this},s);return Promise.all(n.map((o=>typeof o.when=="function"?o.when():s))).then((()=>n),(()=>n))}))}request(e,i={}){const r={f:"json",...i.query},{authMode:s=this.authMode===Jo.AUTH_MODE_ANONYMOUS||this.authMode===Jo.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:c}=i,h={authMode:s,body:n,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:c};return i.withCredentials&&(h.withCredentials=!0),ei(this._normalizeSSL(e),h).then((y=>y.data))}toJSON(){throw new te("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Jo({sourceJSON:e})}_getHelperService(e){const i=this.helperServices&&this.helperServices[e];if(!i)throw new te("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new jr;r.query=e||(S5()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const s=await this.queryGroups(r,i);if(!s.total)return[];const n=s.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(r,i);return o.total?o.results.filter((a=>a.type==="Web Map")).map((a=>new dw({portalItem:a}))):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(S5())return[];const s=new jr({query:r,disableExtraQuery:!0}),n=await this.queryGroups(s,i);if(!n.total)return[];const o=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=o.sortField||"name",s.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(s,i);return a.total?a.results.filter((l=>l.type==="Web Scene")).map((l=>new dw({portalItem:l}))):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=dw.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,s){let n;if(r){const o=s!=null?s.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(n=n.map((a=>{const l=Object.assign(e?e.fromJSON(a):a,i);return typeof l.load=="function"&&l.load(o),l})))}else n=[];return n}},Jo=su,su.AUTH_MODE_ANONYMOUS="anonymous",su.AUTH_MODE_AUTO="auto",su.AUTH_MODE_IMMEDIATE="immediate",su.AUTH_MODE_NO_PROMPT="no-prompt",su);u([A()],Oe.prototype,"access",void 0),u([A()],Oe.prototype,"allSSL",void 0),u([A()],Oe.prototype,"authMode",void 0),u([A()],Oe.prototype,"authorizedCrossOriginDomains",void 0),u([Me("authorizedCrossOriginDomains")],Oe.prototype,"readAuthorizedCrossOriginDomains",null),u([A()],Oe.prototype,"basemapGalleryGroupQuery",void 0),u([A({json:{name:"3DBasemapGalleryGroupQuery"}})],Oe.prototype,"basemapGalleryGroupQuery3D",void 0),u([A()],Oe.prototype,"bingKey",void 0),u([A()],Oe.prototype,"canListApps",void 0),u([A()],Oe.prototype,"canListData",void 0),u([A()],Oe.prototype,"canListPreProvisionedItems",void 0),u([A()],Oe.prototype,"canProvisionDirectPurchase",void 0),u([A()],Oe.prototype,"canSearchPublic",void 0),u([A()],Oe.prototype,"canShareBingPublic",void 0),u([A()],Oe.prototype,"canSharePublic",void 0),u([A()],Oe.prototype,"canSignInArcGIS",void 0),u([A()],Oe.prototype,"canSignInIDP",void 0),u([A()],Oe.prototype,"colorSetsGroupQuery",void 0),u([A()],Oe.prototype,"commentsEnabled",void 0),u([A({type:Date})],Oe.prototype,"created",void 0),u([A()],Oe.prototype,"credential",void 0),u([A()],Oe.prototype,"culture",void 0),u([A()],Oe.prototype,"currentVersion",void 0),u([A()],Oe.prototype,"customBaseUrl",void 0),u([A()],Oe.prototype,"default3DBasemapQuery",void 0),u([A()],Oe.prototype,"defaultBasemap",void 0),u([Me("defaultBasemap")],Oe.prototype,"readDefaultBasemap",null),u([A()],Oe.prototype,"defaultDevBasemap",void 0),u([Me("defaultDevBasemap")],Oe.prototype,"readDefaultDevBasemap",null),u([A({type:Rt})],Oe.prototype,"defaultExtent",void 0),u([A()],Oe.prototype,"defaultVectorBasemap",void 0),u([Me("defaultVectorBasemap")],Oe.prototype,"readDefaultVectorBasemap",null),u([A()],Oe.prototype,"description",void 0),u([A()],Oe.prototype,"devBasemapGalleryGroupQuery",void 0),u([A()],Oe.prototype,"eueiEnabled",void 0),u([A({readOnly:!0})],Oe.prototype,"extraQuery",null),u([A()],Oe.prototype,"featuredGroups",void 0),u([A()],Oe.prototype,"featuredItemsGroupQuery",void 0),u([A()],Oe.prototype,"galleryTemplatesGroupQuery",void 0),u([A()],Oe.prototype,"layoutGroupQuery",void 0),u([A()],Oe.prototype,"livingAtlasGroupQuery",void 0),u([A({readOnly:!0})],Oe.prototype,"hasAPIKey",null),u([A()],Oe.prototype,"hasCategorySchema",void 0),u([A()],Oe.prototype,"hasClassificationSchema",void 0),u([A()],Oe.prototype,"helpBase",void 0),u([A()],Oe.prototype,"helperServices",void 0),u([A()],Oe.prototype,"helpMap",void 0),u([A()],Oe.prototype,"homePageFeaturedContent",void 0),u([A()],Oe.prototype,"homePageFeaturedContentCount",void 0),u([A()],Oe.prototype,"httpPort",void 0),u([A()],Oe.prototype,"httpsPort",void 0),u([A()],Oe.prototype,"id",void 0),u([A()],Oe.prototype,"ipCntryCode",void 0),u([A({readOnly:!0})],Oe.prototype,"isOrganization",null),u([A()],Oe.prototype,"isPortal",void 0),u([A()],Oe.prototype,"isReadOnly",void 0),u([A({readOnly:!0})],Oe.prototype,"itemPageUrl",null),u([A()],Oe.prototype,"layerTemplatesGroupQuery",void 0),u([A()],Oe.prototype,"maxTokenExpirationMinutes",void 0),u([A({type:Date})],Oe.prototype,"modified",void 0),u([A()],Oe.prototype,"name",void 0),u([A()],Oe.prototype,"portalHostname",void 0),u([A()],Oe.prototype,"portalMode",void 0),u([A()],Oe.prototype,"portalProperties",void 0),u([A()],Oe.prototype,"region",void 0),u([A()],Oe.prototype,"recycleBinEnabled",void 0),u([A({readOnly:!0})],Oe.prototype,"restUrl",null),u([A()],Oe.prototype,"rotatorPanels",void 0),u([A()],Oe.prototype,"showHomePageDescription",void 0),u([A()],Oe.prototype,"sourceJSON",void 0),u([A()],Oe.prototype,"staticImagesUrl",void 0),u([A({json:{name:"2DStylesGroupQuery"}})],Oe.prototype,"stylesGroupQuery2d",void 0),u([A({json:{name:"stylesGroupQuery"}})],Oe.prototype,"stylesGroupQuery3d",void 0),u([A()],Oe.prototype,"supportsHostedServices",void 0),u([A()],Oe.prototype,"symbolSetsGroupQuery",void 0),u([A()],Oe.prototype,"templatesGroupQuery",void 0),u([A()],Oe.prototype,"thumbnail",void 0),u([A({readOnly:!0})],Oe.prototype,"thumbnailUrl",null),u([A()],Oe.prototype,"units",void 0),u([A()],Oe.prototype,"url",void 0),u([A()],Oe.prototype,"urlKey",void 0),u([Me("urlKey")],Oe.prototype,"readUrlKey",null),u([A()],Oe.prototype,"user",void 0),u([Me("user")],Oe.prototype,"readUser",null),u([A()],Oe.prototype,"use3dBasemaps",void 0),u([A()],Oe.prototype,"useDefault3dBasemap",void 0),u([A()],Oe.prototype,"useStandardizedQuery",void 0),u([A()],Oe.prototype,"useVectorBasemaps",void 0),u([A()],Oe.prototype,"vectorBasemapGalleryGroupQuery",void 0),Oe=Jo=u([B("esri.portal.Portal")],Oe);const LV=new FinalizationRegistry((t=>{t.remove()}));function j_e(t){const e=_t;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch((()=>{}))}}let oo=class extends pe{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};u([A({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],oo.prototype,"enabled",void 0),u([Ne("enabled")],oo.prototype,"writeEnabled",null),u([A({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],oo.prototype,"type",void 0),oo=u([B("esri.symbols.Symbol3DLayer")],oo);const U_e=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,V_e="screenUtils.toPt: input not recognized!",fre=96;function ri(t){return t?t/72*fre:0}function Ei(t){return t?72*t/fre:0}function di(t){if(typeof t=="string"){const e=t.match(U_e);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),s=t.charAt(0)==="-",n=r==="px"?Ei(i):i;return s?-n:n}return console.warn(V_e),null}return t}function Js(t=0,e=0){return{x:t,y:e}}function gst(t){return t?Js(t.x,t.y):null}function vst(t=0,e=0){return[t,e]}function bst(t=0,e=0,i=0){return[t,e,i]}function wst(t){return t}function _st(t){return t}function Sst(t){return t}function xst(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function kk(t){const e=oz(100*(1-t));return Math.max(0,Math.min(e,100))}function vS(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}function G_e(t,e){const i=e.transparency!=null?vS(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new ze([r[0]||0,r[1]||0,r[2]||0,i]):null}function H_e(t,e){e.color=t.toJSON().slice(0,3);const i=kk(t.a);i!==0&&(e.transparency=i)}function qf(t){return{type:ze,nonNullable:t==null?void 0:t.nonNullable,json:{type:[Kt],default:null,read:{source:["color","transparency"],reader:G_e},write:{target:{color:{type:[Kt],isRequired:t==null?void 0:t.colorRequiredOnWrite},transparency:{type:Kt}},writer:H_e}}}}const Zu={type:Number,cast:di,json:{write:!0}};var DT;function $st(t){return t==="emissive"?DT.Emissive:DT.Color}(function(t){t[t.Emissive=0]="Emissive",t[t.Color=1]="Color"})(DT||(DT={}));let MA=class extends pe{constructor(e){super(e),this.color=new ze([0,0,0,1]),this.extensionLength=0,this.size=Ei(1)}clone(){}cloneProperties(){return{color:ie(this.color),size:this.size,extensionLength:this.extensionLength}}};u([A({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],MA.prototype,"type",void 0),u([A(qf({colorRequiredOnWrite:!0}))],MA.prototype,"color",void 0),u([A({...Zu,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],MA.prototype,"extensionLength",void 0),u([A(Zu)],MA.prototype,"size",void 0),MA=u([B("esri.symbols.edges.Edges3D")],MA);const o7=MA;var q5;let MI=q5=class extends o7{constructor(t){super(t),this.type="sketch"}clone(){return new q5(this.cloneProperties())}};u([it({sketch:"sketch"},{readOnly:!0})],MI.prototype,"type",void 0),MI=q5=u([B("esri.symbols.edges.SketchEdges3D")],MI);const q_e=MI;var W5;let kI=W5=class extends o7{constructor(t){super(t),this.type="solid"}clone(){return new W5(this.cloneProperties())}};u([it({solid:"solid"},{readOnly:!0})],kI.prototype,"type",void 0),kI=W5=u([B("esri.symbols.edges.SolidEdges3D")],kI);const Are=kI,mre={types:{key:"type",base:o7,typeMap:{solid:Are,sketch:q_e}},json:{write:!0}};var Q5;let Hg=Q5=class extends pe{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new Q5(t)}};u([A({json:{write:!1}})],Hg.prototype,"strength",void 0),u([A({json:{write:!1}})],Hg.prototype,"source",void 0),Hg=Q5=u([B("esri.symbols.support.Symbol3DEmissive")],Hg);var J5;let Fo=J5=class extends pe{constructor(t){super(t),this.color=null,this.emissive=new Hg({source:"emissive"})}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new J5(t)}};u([A(qf())],Fo.prototype,"color",void 0),u([A({type:Hg,json:{write:!1}})],Fo.prototype,"emissive",void 0),Fo=J5=u([B("esri.symbols.support.Symbol3DMaterial")],Fo);var Z5,Lv;let jh=(Lv=class extends oo{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,i;return new Z5({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(i=this.material)==null?void 0:i.clone(),castShadows:this.castShadows,size:this.size})}},Z5=Lv,Lv);u([it({Extrude:"extrude"},{readOnly:!0})],jh.prototype,"type",void 0),u([A({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],jh.prototype,"size",void 0),u([A({type:Fo,json:{write:!0}})],jh.prototype,"material",void 0),u([A({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],jh.prototype,"castShadows",void 0),u([A(mre)],jh.prototype,"edges",void 0),jh=Z5=u([B("esri.symbols.ExtrudeSymbol3DLayer")],jh);let m_=class extends pe{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([A({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],m_.prototype,"type",void 0),m_=u([B("esri.symbols.patterns.LinePattern3D")],m_);const W_e=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Y5;const Q_e=ys()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Mm=Y5=class extends m_{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new Y5(t)}};u([A({type:["style"],json:{write:{isRequired:!0}}})],Mm.prototype,"type",void 0),u([it(Q_e),A({type:W_e,json:{write:{isRequired:!0}}})],Mm.prototype,"style",void 0),Mm=Y5=u([B("esri.symbols.patterns.LineStylePattern3D")],Mm);let y_=class extends pe{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([A({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],y_.prototype,"type",void 0),y_=u([B("esri.symbols.patterns.Pattern3D")],y_);const J_e=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var X5;let qg=X5=class extends y_{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new X5({style:this.style})}};u([A({type:["style"],json:{write:{isRequired:!0}}})],qg.prototype,"type",void 0),u([A({type:J_e,json:{read:!0,write:{isRequired:!0}}})],qg.prototype,"style",void 0),qg=X5=u([B("esri.symbols.patterns.StylePattern3D")],qg);const Z_e={types:{key:"type",base:y_,typeMap:{style:qg}},json:{write:!0}},yre={types:{key:"type",base:m_,typeMap:{style:Mm}},json:{write:!0}},g_=new ze("white"),Y_e=new ze([255,255,255,0]);function X_e(t){return t.r===0&&t.g===0&&t.b===0}var K5;let v_=K5=class extends Fo{constructor(t){super(t),this.colorMixMode=null}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,colorMixMode:this.colorMixMode,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new K5(t)}};u([it({multiply:"multiply",replace:"replace",tint:"tint"})],v_.prototype,"colorMixMode",void 0),v_=K5=u([B("esri.symbols.support.Symbol3DFillMaterial")],v_);function Wf(){return[0,0,0]}function K_e(t){return[t[0],t[1],t[2]]}function I1(t,e,i){return[t,e,i]}function eSe(t,e,i){return[t,e,i]}function tSe(t,e=Wf()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function gre(){return Wf()}function vre(){return I1(1,1,1)}function bre(){return I1(1,0,0)}function wre(){return I1(0,1,0)}function _re(){return I1(0,0,1)}const iSe=gre(),Sre=vre(),rSe=bre(),sSe=wre(),nSe=_re();Object.freeze(Object.defineProperty({__proto__:null,ONES:Sre,UNIT_X:rSe,UNIT_Y:sSe,UNIT_Z:nSe,ZEROS:iSe,clone:K_e,create:Wf,freeze:eSe,fromArray:tSe,fromValues:I1,ones:vre,unitX:bre,unitY:wre,unitZ:_re,zeros:gre},Symbol.toStringTag,{value:"Module"}));function oSe(t,e=!1){return t<=VX?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function Tst(t){return(UX(t)?t.byteLength/8:t.length)<=VX?Array.from(t):new Float64Array(t)}function Mst(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function Mx(t=uSe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function a7(t,e,i,r,s,n,o=Mx()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function kst(t,e=Mx()){return aSe(t,0,t.length/3,e)}function aSe(t,e,i,r=Mx()){return xre(r,e4),lSe(r,t,e,i),r}function Pst(t,e=oSe(24)){const[i,r,s,n,o,a]=t;return e[0]=i,e[1]=r,e[2]=s,e[3]=i,e[4]=r,e[5]=a,e[6]=i,e[7]=o,e[8]=s,e[9]=i,e[10]=o,e[11]=a,e[12]=n,e[13]=r,e[14]=s,e[15]=n,e[16]=r,e[17]=a,e[18]=n,e[19]=o,e[20]=s,e[21]=n,e[22]=o,e[23]=a,e}function Lst(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Rt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Rst(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Ost(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function Dst(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function lSe(t,e,i=0,r=e.length/3){let s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let h=0;h<r;h++)s=Math.min(s,e[i+3*h]),n=Math.min(n,e[i+3*h+1]),o=Math.min(o,e[i+3*h+2]),a=Math.max(a,e[i+3*h]),l=Math.max(l,e[i+3*h+1]),c=Math.max(c,e[i+3*h+2]);t[0]=s,t[1]=n,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function Nst(t,e,i){const r=e.length;let s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(i)for(let h=0;h<r;h++){const y=e[h];s=Math.min(s,y[0]),n=Math.min(n,y[1]),o=Math.min(o,y[2]),a=Math.max(a,y[0]),l=Math.max(l,y[1]),c=Math.max(c,y[2])}else for(let h=0;h<r;h++){const y=e[h];s=Math.min(s,y[0]),n=Math.min(n,y[1]),a=Math.max(a,y[0]),l=Math.max(l,y[1])}t[0]=s,t[1]=n,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function Fst(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function kx(t){return t[0]>=t[3]?0:t[3]-t[0]}function Px(t){return t[1]>=t[4]?0:t[4]-t[1]}function Lx(t){return t[2]>=t[5]?0:t[5]-t[2]}function zst(t){const e=kx(t),i=Lx(t),r=Px(t);return Math.sqrt(e*e+i*i+r*r)}function Bst(t,e=[0,0,0]){return e[0]=t[0]+kx(t)/2,e[1]=t[1]+Px(t)/2,e[2]=t[2]+Lx(t)/2,e}function jst(t,e=[0,0,0]){return e[0]=kx(t),e[1]=Px(t),e[2]=Lx(t),e}function Ust(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function cSe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function Vst(t,e){return e==null||cSe(t,e)}function Gst(t,e,i,r,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+r,s[3]=t[3]+e,s[4]=t[4]+i,s[5]=t[5]+r,s}function Hst(t,e,i=t){const r=t[0]+kx(t)/2,s=t[1]+Px(t)/2,n=t[2]+Lx(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=s+(t[1]-s)*e,i[2]=n+(t[2]-n)*e,i[3]=r+(t[3]-r)*e,i[4]=s+(t[4]-s)*e,i[5]=n+(t[5]-n)*e,i}function qst(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Wst(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function Qst(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function xre(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Jst(t){return t?xre(t,e4):Mx(e4)}function Zst(t,e){return e||(e=Qr()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function Yst(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function Xst(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function RV(t){return t.length===6}function Kst(t){return kx(t)===0&&Px(t)===0&&Lx(t)===0}function ent(t,e,i){if(t==null||e==null)return t===e;if(!RV(t)||!RV(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const e4=[1/0,1/0,1/0,-1/0,-1/0,-1/0],uSe=[0,0,0,0,0,0];Mx();function tnt(t,{isPrimitive:e,width:i,depth:r,height:s}){const n=e?10:1;if(i==null&&s==null&&r==null)return[n*t[0],n*t[1],n*t[2]];const o=I1(i,r,s);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const hSe=a7(-.5,-.5,-.5,.5,.5,.5),dSe=a7(-.5,-.5,0,.5,.5,1),pSe=a7(-.5,-.5,0,.5,.5,.5);function int(t){switch(t){case"sphere":case"cube":case"diamond":return hSe;case"cylinder":case"cone":case"inverted-cone":return dSe;case"tetrahedron":return pSe;default:return}}const l7=["butt","square","round"],fSe=[...l7,"none"],$re=["miter","bevel","round"];var t4;let kA=t4=class extends pe{constructor(t){super(t),this.color=new ze([0,0,0,1]),this.size=Ei(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new t4(t)}};u([A(qf({colorRequiredOnWrite:!0}))],kA.prototype,"color",void 0),u([A({...Zu,json:{write:{isRequired:!0}}})],kA.prototype,"size",void 0),u([A(yre)],kA.prototype,"pattern",void 0),u([A({type:l7,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],kA.prototype,"patternCap",void 0),kA=t4=u([B("esri.symbols.support.Symbol3DOutline")],kA);var PI,Rv;let Kn=(Rv=class extends oo{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new PI(e)}static fromSimpleFillSymbol(e){var s,n,o;const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Mm({style:e.outline.style}):null,r={size:((s=e.outline)==null?void 0:s.width)??0,color:(((n=e.outline)==null?void 0:n.color)??g_).clone(),pattern:i};return i&&((o=e.outline)!=null&&o.cap)&&(r.patternCap=e.outline.cap),new PI({material:new v_({color:(e.color??Y_e).clone()}),pattern:e.style&&e.style!=="solid"?new qg({style:e.style}):null,outline:r})}},PI=Rv,Rv);u([it({Fill:"fill"},{readOnly:!0})],Kn.prototype,"type",void 0),u([A({type:v_,json:{write:!0}})],Kn.prototype,"material",void 0),u([A(Z_e)],Kn.prototype,"pattern",void 0),u([A({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Kn.prototype,"castShadows",void 0),u([A({type:kA,json:{write:!0}})],Kn.prototype,"outline",void 0),u([A(mre)],Kn.prototype,"edges",void 0),Kn=PI=u([B("esri.symbols.FillSymbol3DLayer")],Kn);var i4;const ASe=ys()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let PA=i4=class extends pe{constructor(t){super(t)}readHref(t,e,i){return t?kd(t,i):e.dataURI}writeHref(t,e,i,r){t&&(Fd(t)?e.dataURI=t:(e.href=g0(t,r),jo(e.href)&&(e.href=sc(e.href))))}clone(){return new i4({href:this.href,primitive:this.primitive})}};u([A({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],PA.prototype,"href",void 0),u([Me("href")],PA.prototype,"readHref",null),u([Ne("href",{href:{type:String},dataURI:{type:String}})],PA.prototype,"writeHref",null),u([it(ASe)],PA.prototype,"primitive",void 0),PA=i4=u([B("esri.symbols.support.IconSymbol3DLayerResource")],PA);const mSe="circle";var r4;let Wg=r4=class extends et{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new r4({x:this.x,y:this.y})}};u([A({type:Number})],Wg.prototype,"x",void 0),u([A({type:Number})],Wg.prototype,"y",void 0),Wg=r4=u([B("esri.symbols.support.Symbol3DAnchorPosition2D")],Wg);var s4;let d2=s4=class extends pe{constructor(t){super(t),this.color=new ze([0,0,0,1]),this.size=Ei(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new s4(t)}};u([A(qf({colorRequiredOnWrite:!0}))],d2.prototype,"color",void 0),u([A({...Zu,json:{write:{isRequired:!0}}})],d2.prototype,"size",void 0),d2=s4=u([B("esri.symbols.support.Symbol3DIconOutline")],d2);var qy,Ov;let an=(Ov=class extends oo{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new qy({anchor:this.anchor,anchorPosition:ie(this.anchorPosition),enabled:this.enabled,material:ie(this.material),outline:ie(this.outline),resource:ie(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const i=e.color||g_,r=OV(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||g_).clone()}:null;return new qy({size:e.size,angle:e.angle,resource:{primitive:gSe((()=>be.getLogger(this.prototype)),e.style)},material:{color:i},outline:s,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||X_e(e.color)?g_:e.color,r=OV(e);return new qy({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new qy({resource:{href:Zte({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},qy=Ov,Ov);function OV(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=DV(t.xoffset),s=DV(t.yoffset);return(r||s)&&e&&i?{x:-r/e,y:s/i}:null}function DV(t){return isFinite(t)?t:0}u([A({type:Fo,json:{write:!0}})],an.prototype,"material",void 0),u([A({type:PA,json:{write:!0}})],an.prototype,"resource",void 0),u([it({Icon:"icon"},{readOnly:!0})],an.prototype,"type",void 0),u([A({...Zu,json:{write:{isRequired:!0}}})],an.prototype,"size",void 0),u([it({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],an.prototype,"anchor",void 0),u([A({type:Wg,json:{type:[Number],read:{reader:t=>new Wg({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],an.prototype,"anchorPosition",void 0),u([A({type:d2,json:{write:!0}})],an.prototype,"outline",void 0),u([A({type:Number,json:{write:!0,default:0}})],an.prototype,"angle",void 0),an=qy=u([B("esri.symbols.IconSymbol3DLayer")],an);const ySe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function gSe(t,e){return ySe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const vSe=["begin","end","begin-end"],Ere=["arrow","circle","square","diamond","cross","x"];let Kh=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};u([A({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Kh.prototype,"type",void 0),u([A({type:vSe,json:{default:"begin-end",write:!0}})],Kh.prototype,"placement",void 0),u([A({type:Ere,json:{default:"arrow",write:!0}})],Kh.prototype,"style",void 0),u([A({type:ze,json:{type:[Kt],default:null,write:!0}})],Kh.prototype,"color",void 0),Kh=u([B("esri.symbols.LineStyleMarker3D")],Kh);var LI,Dv;let Xn=(Dv=class extends oo{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Ei(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new LI(e)}static fromSimpleLineSymbol(e){var r;const i={enabled:!0,size:e.width??Ei(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Mm({style:e.style}):null,material:new Fo({color:(e.color||g_).clone()}),marker:e.marker?new Kh({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new LI(i)}},LI=Dv,Dv);u([A({type:Fo,json:{write:!0}})],Xn.prototype,"material",void 0),u([it({Line:"line"},{readOnly:!0})],Xn.prototype,"type",void 0),u([A({type:$re,json:{write:!0,default:"miter"}})],Xn.prototype,"join",void 0),u([A({type:l7,json:{write:!0,default:"butt"}})],Xn.prototype,"cap",void 0),u([A({...Zu,json:{write:{isRequired:!0}}})],Xn.prototype,"size",void 0),u([A(yre)],Xn.prototype,"pattern",void 0),u([A({types:{key:"type",base:Kh,typeMap:{style:Kh}},json:{write:!0}})],Xn.prototype,"marker",void 0),Xn=LI=u([B("esri.symbols.LineSymbol3DLayer")],Xn);var n4;const bSe=ys()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let p2=n4=class extends pe{clone(){return new n4({href:this.href,primitive:this.primitive})}};u([A({type:String,json:{read:wk,write:v0}})],p2.prototype,"href",void 0),u([it(bSe)],p2.prototype,"primitive",void 0),p2=n4=u([B("esri.symbols.support.ObjectSymbol3DLayerResource")],p2);const wSe="sphere";var o4;let ym=o4=class extends et{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new o4({x:this.x,y:this.y,z:this.z})}};u([A({type:Number})],ym.prototype,"x",void 0),u([A({type:Number})],ym.prototype,"y",void 0),u([A({type:Number})],ym.prototype,"z",void 0),ym=o4=u([B("esri.symbols.support.Symbol3DAnchorPosition3D")],ym);var a4,Nv;let Us=(Nv=class extends oo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,i,r;return new a4({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((i=this.material)==null?void 0:i.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},a4=Nv,Nv);u([A({type:Fo,json:{write:!0}})],Us.prototype,"material",void 0),u([A({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Us.prototype,"castShadows",void 0),u([A({type:p2,json:{write:!0}})],Us.prototype,"resource",void 0),u([it({Object:"object"},{readOnly:!0})],Us.prototype,"type",void 0),u([A({type:Number,json:{write:!0}})],Us.prototype,"width",void 0),u([A({type:Number,json:{write:!0}})],Us.prototype,"height",void 0),u([A({type:Number,json:{write:!0}})],Us.prototype,"depth",void 0),u([it({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Us.prototype,"anchor",void 0),u([A({type:ym,json:{type:[Number],read:{reader:t=>new ym({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Us.prototype,"anchorPosition",void 0),u([A({type:Number,json:{write:!0}})],Us.prototype,"heading",void 0),u([A({type:Number,json:{write:!0}})],Us.prototype,"tilt",void 0),u([A({type:Number,json:{write:!0}})],Us.prototype,"roll",void 0),u([A({readOnly:!0})],Us.prototype,"isPrimitive",null),Us=a4=u([B("esri.symbols.ObjectSymbol3DLayer")],Us);var l4,Fv;let nn=(Fv=class extends oo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new l4({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},l4=Fv,Fv);u([A({type:Fo,json:{write:!0}})],nn.prototype,"material",void 0),u([A({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],nn.prototype,"castShadows",void 0),u([it({Path:"path"},{readOnly:!0})],nn.prototype,"type",void 0),u([A({type:["circle","quad"],json:{write:!0,default:"circle"}})],nn.prototype,"profile",void 0),u([A({type:$re,json:{write:!0,default:"miter"}})],nn.prototype,"join",void 0),u([A({type:fSe,json:{write:!0,default:"butt"}})],nn.prototype,"cap",void 0),u([A({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],nn.prototype,"width",void 0),u([Me("width",["width","size","height"])],nn.prototype,"readWidth",null),u([A({type:Number,json:{write:!0}})],nn.prototype,"height",void 0),u([Me("height",["height","size","width"])],nn.prototype,"readHeight",null),u([A({type:["center","bottom","top"],json:{write:!0,default:"center"}})],nn.prototype,"anchor",void 0),u([A({type:["heading","all"],json:{write:!0,default:"all"}})],nn.prototype,"profileRotation",void 0),nn=l4=u([B("esri.symbols.PathSymbol3DLayer")],nn);const _Se=["none","underline","line-through"],SSe=["normal","italic","oblique"],xSe=["normal","lighter","bold","bolder"],Ire={type:Number,cast:t=>{const e=ro(t);return e===0?1:Bn(e,.1,4)},nonNullable:!0},$Se=["left","right","center"],ESe=["baseline","top","middle","bottom"],Cre={type:$Se,nonNullable:!0},Tre={type:ESe,nonNullable:!0},ISe=8;var c4;let ha=c4=class extends pe{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return di(t)}clone(){return new c4({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([A({type:_Se,json:{default:"none",write:!0}})],ha.prototype,"decoration",void 0),u([A({type:String,json:{write:!0}})],ha.prototype,"family",void 0),u([A({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],ha.prototype,"size",void 0),u([yi("size")],ha.prototype,"castSize",null),u([A({type:SSe,json:{default:"normal",write:!0}})],ha.prototype,"style",void 0),u([A({type:xSe,json:{default:"normal",write:!0}})],ha.prototype,"weight",void 0),ha=c4=u([B("esri.symbols.Font")],ha);var u4;let Qg=u4=class extends pe{constructor(){super(...arguments),this.color=new ze([0,0,0,1]),this.size=0}clone(){const t={color:ie(this.color),size:this.size};return new u4(t)}};u([A(qf())],Qg.prototype,"color",void 0),u([A(Zu)],Qg.prototype,"size",void 0),Qg=u4=u([B("esri.symbols.support.Symbol3DHalo")],Qg);let b_=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.color=null}};u([A(qf())],b_.prototype,"color",void 0),b_=u([B("esri.symbols.support.Symbol3DTextBackground")],b_);var RI,zv;let $s=(zv=class extends oo{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,s){const n={...s,textSymbol3D:!0};i.font=e.write({},n),delete i.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new RI({enabled:this.enabled,font:this.font&&ie(this.font),halo:this.halo&&ie(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ie(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new RI({font:e.font!=null?e.font.clone():new ha,halo:CSe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Fo({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new b_({color:e.backgroundColor.clone()}):null})}},RI=zv,zv);function CSe(t,e){return t&&e!=null&&e>0?new Qg({color:ie(t),size:e}):null}u([A({type:ha,json:{write:!0}})],$s.prototype,"font",null),u([Ne("font")],$s.prototype,"writeFont",null),u([A({type:Qg,json:{write:!0}})],$s.prototype,"halo",void 0),u([A({...Cre,json:{default:"center",write:!0}})],$s.prototype,"horizontalAlignment",void 0),u([A({...Ire,json:{default:1,write:!0}})],$s.prototype,"lineHeight",void 0),u([A({type:Fo,json:{write:!0}})],$s.prototype,"material",void 0),u([A({type:b_,json:{write:!0}})],$s.prototype,"background",void 0),u([A(Zu)],$s.prototype,"size",null),u([A({type:String,json:{write:!0}})],$s.prototype,"text",void 0),u([it({Text:"text"},{readOnly:!0})],$s.prototype,"type",void 0),u([A({...Tre,json:{default:"baseline",write:!0}})],$s.prototype,"verticalAlignment",void 0),$s=RI=u([B("esri.symbols.TextSymbol3DLayer")],$s);var h4,Bv;let Uh=(Bv=class extends oo{constructor(e){super(e),this.color=d4.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new h4({color:ie(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},h4=Bv,Bv);u([A({type:ze,nonNullable:!0,json:{type:[Kt],write:(t,e,i)=>e[i]=t.toArray(ze.AlphaMode.UNLESS_OPAQUE),default:()=>d4.clone(),defaultEquals:t=>t.toCss(!0)===d4.toCss(!0)}})],Uh.prototype,"color",void 0),u([it({Water:"water"},{readOnly:!0})],Uh.prototype,"type",void 0),u([A({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Uh.prototype,"waterbodySize",void 0),u([A({type:Number,json:{write:!0,default:null}})],Uh.prototype,"waveDirection",void 0),u([A({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Uh.prototype,"waveStrength",void 0),Uh=h4=u([B("esri.symbols.WaterSymbol3DLayer")],Uh);const d4=new ze([0,119,190]);var p4;let Yl=p4=class extends et{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new p4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([A({type:String})],Yl.prototype,"name",void 0),u([A({type:String})],Yl.prototype,"styleUrl",void 0),u([A({type:String})],Yl.prototype,"styleName",void 0),u([A({type:Oe})],Yl.prototype,"portal",void 0),Yl=p4=u([B("esri.symbols.support.StyleOrigin")],Yl);var f4;let Zm=f4=class extends et{constructor(){super(...arguments),this.url=""}clone(){return new f4({url:this.url})}};u([A({type:String})],Zm.prototype,"url",void 0),Zm=f4=u([B("esri.symbols.support.Thumbnail")],Zm);const Mre={icon:an,object:Us,line:Xn,path:nn,fill:Kn,extrude:jh,text:$s,water:Uh},TSe=qe.ofType({base:oo,key:"type",typeMap:Mre,errorContext:"symbol-layer"});let Po=class extends Wr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,s=r||qe;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&be.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Pd(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const s=kd(e.styleUrl,r);return new Yl({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new Yl({portal:(r==null?void 0:r.portal)||Oe.getDefault(),styleName:e.styleName,name:e.name});r!=null&&r.messages&&r.messages.push(new Sa("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,s){if(e.styleUrl&&e.name){let n=g0(e.styleUrl,s);jo(n)&&(n=sc(n)),i.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&(s!=null&&s.portal)&&!Jte(e.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new Sa("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof oo||e&&Mre[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};u([A({json:{read:!1,write:!1}})],Po.prototype,"color",null),u([A({type:TSe,nonNullable:!0,json:{write:!0}}),yi(hre)],Po.prototype,"symbolLayers",null),u([A({type:Yl})],Po.prototype,"styleOrigin",void 0),u([Me("styleOrigin")],Po.prototype,"readStyleOrigin",null),u([Ne("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Po.prototype,"writeStyleOrigin",null),u([A({type:Zm,json:{read:!1}})],Po.prototype,"thumbnail",void 0),u([A({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Po.prototype,"type",void 0),Po=u([B("esri.symbols.Symbol3D")],Po);let Jg=class extends pe{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([A({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Jg.prototype,"type",void 0),u([A({readOnly:!0})],Jg.prototype,"visible",void 0),Jg=u([B("esri.symbols.callouts.Callout3D")],Jg);var A4;let OI=A4=class extends pe{constructor(t){super(t),this.color=new ze("white")}clone(){return new A4({color:ie(this.color)})}};u([A(qf({colorRequiredOnWrite:!0}))],OI.prototype,"color",void 0),OI=A4=u([B("esri.symbols.callouts.LineCallout3DBorder")],OI);const MSe=OI;var m4;let Vh=m4=class extends Jg{constructor(t){super(t),this.type="line",this.color=new ze([0,0,0,1]),this.size=Ei(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new m4({color:ie(this.color),size:this.size,border:ie(this.border)})}};u([it({line:"line"})],Vh.prototype,"type",void 0),u([A(qf({colorRequiredOnWrite:!0}))],Vh.prototype,"color",void 0),u([A({...Zu,json:{write:{isRequired:!0}}})],Vh.prototype,"size",void 0),u([A({type:MSe,json:{write:!0}})],Vh.prototype,"border",void 0),u([A({readOnly:!0})],Vh.prototype,"visible",null),Vh=m4=u([B("esri.symbols.callouts.LineCallout3D")],Vh);function c7(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function kre(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!(e!=null&&e.visible)&&!!c7(t)}function ant(t){return t.type==="point-3d"||t.type==="label-3d"}function lnt(t){return t.horizontalAlignment==="center"}const Pre={types:{key:"type",base:Jg,typeMap:{line:Vh}},json:{write:!0}};var y4;let Wp=y4=class extends pe{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new y4({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([A({...Zu,json:{write:{isRequired:!0}}})],Wp.prototype,"screenLength",void 0),u([A({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Wp.prototype,"minWorldLength",void 0),u([A({type:Number,json:{write:!0}})],Wp.prototype,"maxWorldLength",void 0),Wp=y4=u([B("esri.symbols.support.Symbol3DVerticalOffset")],Wp);var DI;const Lre=qe.ofType({base:null,key:"type",typeMap:{text:$s}});let Vl=DI=class extends Po{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Lre,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return kre(this)}hasVisibleVerticalOffset(){return c7(this)}clone(){return new DI({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail),callout:ie(this.callout),verticalOffset:ie(this.verticalOffset)})}static fromTextSymbol(t){return new DI({symbolLayers:new qe([$s.fromTextSymbol(t)])})}};u([A({type:Wp,json:{write:!0}})],Vl.prototype,"verticalOffset",void 0),u([A(Pre)],Vl.prototype,"callout",void 0),u([A({json:{read:!1,write:!1}})],Vl.prototype,"styleOrigin",void 0),u([A({type:Lre})],Vl.prototype,"symbolLayers",void 0),u([it({LabelSymbol3D:"label-3d"},{readOnly:!0})],Vl.prototype,"type",void 0),Vl=DI=u([B("esri.symbols.LabelSymbol3D")],Vl);var NI;const Rre=qe.ofType({base:null,key:"type",typeMap:{line:Xn,path:nn}}),kSe=qe.ofType({base:null,key:"type",typeMap:{line:Xn,path:nn}});let tc=NI=class extends Po{constructor(t){super(t),this.symbolLayers=new Rre,this.type="line-3d"}clone(){return new NI({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleLineSymbol(t){return new NI({symbolLayers:new qe([Xn.fromSimpleLineSymbol(t)])})}};u([A({type:Rre,json:{type:kSe}})],tc.prototype,"symbolLayers",void 0),u([it({LineSymbol3D:"line-3d"},{readOnly:!0})],tc.prototype,"type",void 0),tc=NI=u([B("esri.symbols.LineSymbol3D")],tc);var FI;const Ore=qe.ofType({base:null,key:"type",typeMap:{fill:Kn}});let Ad=FI=class extends Po{constructor(t){super(t),this.symbolLayers=new Ore,this.type="mesh-3d"}clone(){return new FI({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleFillSymbol(t){return new FI({symbolLayers:new qe([Kn.fromSimpleFillSymbol(t)])})}};u([A({type:Ore})],Ad.prototype,"symbolLayers",void 0),u([it({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Ad.prototype,"type",void 0),Ad=FI=u([B("esri.symbols.MeshSymbol3D")],Ad);let f2=class extends Wr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([it({esriSLS:"simple-line"},{readOnly:!0})],f2.prototype,"type",void 0),u([A({type:Number,cast:di,json:{write:!0}})],f2.prototype,"width",void 0),f2=u([B("esri.symbols.LineSymbol")],f2);var g4;let _c=g4=class extends pe{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new g4({color:ie(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};u([A({type:["begin","end","begin-end"],json:{write:!0}})],_c.prototype,"placement",void 0),u([it({"line-marker":"line-marker"},{readOnly:!0}),A({json:{origins:{"web-map":{write:!1}}}})],_c.prototype,"type",void 0),u([A({type:Ere})],_c.prototype,"style",void 0),u([Ne("style")],_c.prototype,"writeStyle",null),u([A({type:ze,value:null,json:{write:{allowNull:!0}}})],_c.prototype,"color",null),u([Me("color")],_c.prototype,"readColor",null),u([Ne("color")],_c.prototype,"writeColor",null),_c=g4=u([B("esri.symbols.LineSymbolMarker")],_c);const PSe=_c;var v4;const dR=new Ot({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let br=v4=class extends f2{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,s,n){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=di(i)),r!=null&&(o.cap=r),s!=null&&(o.join=s),n!=null&&(o.miterLimit=di(n)),o}clone(){var t;return new v4({color:ie(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};u([it({esriSLS:"simple-line"},{readOnly:!0})],br.prototype,"type",void 0),u([A({type:dR.apiValues,json:{read:dR.read,write:dR.write}})],br.prototype,"style",void 0),u([A({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],br.prototype,"cap",void 0),u([A({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],br.prototype,"join",void 0),u([A({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":PSe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],br.prototype,"marker",void 0),u([A({type:Number,json:{read:!1,write:!1}})],br.prototype,"miterLimit",void 0),br=v4=u([B("esri.symbols.SimpleLineSymbol")],br);let Zg=class extends Wr{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};u([A({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":br}},json:{default:null,write:!0}})],Zg.prototype,"outline",void 0),u([A({type:["simple-fill","picture-fill"],readOnly:!0})],Zg.prototype,"type",void 0),Zg=u([B("esri.symbols.FillSymbol")],Zg);function LSe(t,e,i){return e.imageData?Zte({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Dre(e.url,i)}function Dre(t,e){if(!jo(t)){const i=OSe(e);if(i)return m0(i,"images",t)}return kd(t,e)}function RSe(t,e,i,r){if(Fd(t)){const s=y0(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,i&&i.imageData===e.imageData&&i.url&&v0(i.url,e,"url",r)}else v0(t,e,"url",r)}const Nre={json:{read:{source:["imageData","url"],reader:LSe},write:{writer(t,e,i,r){RSe(t,e,this.source,r)}}}},Fre={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=Dre(e.url,i)),r}}}};function OSe(t){var s,n;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(s=i.parsedUrl)==null?void 0:s.path:r==="map-image"||r==="tile"?(n=t.url)==null?void 0:n.path:null}var b4;let Eo=b4=class extends Zg{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),i!=null&&(s.width=di(i)),r!=null&&(s.height=di(r)),s}clone(){const t=new b4({color:ie(this.color),height:this.height,outline:ie(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",ie(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([it({esriPFS:"picture-fill"},{readOnly:!0})],Eo.prototype,"type",void 0),u([A(Nre)],Eo.prototype,"url",void 0),u([A({type:Number,json:{write:!0}})],Eo.prototype,"xscale",void 0),u([A({type:Number,json:{write:!0}})],Eo.prototype,"yscale",void 0),u([A({type:Number,cast:di,json:{write:!0}})],Eo.prototype,"width",void 0),u([A({type:Number,cast:di,json:{write:!0}})],Eo.prototype,"height",void 0),u([A({type:Number,cast:di,json:{write:!0}})],Eo.prototype,"xoffset",void 0),u([A({type:Number,cast:di,json:{write:!0}})],Eo.prototype,"yoffset",void 0),u([A(Fre)],Eo.prototype,"source",void 0),Eo=b4=u([B("esri.symbols.PictureFillSymbol")],Eo);let Gh=class extends Wr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([A({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Gh.prototype,"angle",void 0),u([A({type:["simple-marker","picture-marker"],readOnly:!0})],Gh.prototype,"type",void 0),u([A({type:Number,cast:di,json:{write:!0}})],Gh.prototype,"xoffset",void 0),u([A({type:Number,cast:di,json:{write:!0}})],Gh.prototype,"yoffset",void 0),u([A({cast:t=>t==="auto"?t:ro(di(t)),json:{write:!0}})],Gh.prototype,"size",void 0),Gh=u([B("esri.symbols.MarkerSymbol")],Gh);var w4;let $n=w4=class extends Gh{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=di(e)),i!=null&&(r.height=di(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new w4({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",ie(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([A({json:{write:!1}})],$n.prototype,"color",void 0),u([it({esriPMS:"picture-marker"},{readOnly:!0})],$n.prototype,"type",void 0),u([A(Nre)],$n.prototype,"url",void 0),u([A(Fre)],$n.prototype,"source",void 0),u([A({type:Number,cast:di,json:{write:!0}})],$n.prototype,"height",void 0),u([Me("height",["height","size"])],$n.prototype,"readHeight",null),u([A({type:Number,cast:di,json:{write:!0}})],$n.prototype,"width",void 0),u([A({json:{write:!1}})],$n.prototype,"size",void 0),$n=w4=u([B("esri.symbols.PictureMarkerSymbol")],$n);var LA;const zre=qe.ofType({base:null,key:"type",typeMap:{icon:an,object:Us,text:$s}});let so=LA=class extends Po{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new zre,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return kre(this)}hasVisibleVerticalOffset(){return c7(this)}clone(){return new LA({verticalOffset:ie(this.verticalOffset),callout:ie(this.callout),styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new LA({symbolLayers:new qe([an.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new LA({symbolLayers:new qe([an.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var r,s;if(((s=(r=t.data)==null?void 0:r.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new LA(i!=null&&i.callout?{symbolLayers:new qe([an.fromCIMSymbol(t)]),callout:new Vh({size:.5,color:new ze([0,0,0])}),verticalOffset:new Wp({screenLength:40})}:{symbolLayers:new qe([an.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new LA({symbolLayers:new qe([$s.fromTextSymbol(t)])})}};u([A({type:Wp,json:{write:!0}})],so.prototype,"verticalOffset",void 0),u([A(Pre)],so.prototype,"callout",void 0),u([A({type:zre,json:{origins:{"web-scene":{write:!0}}}})],so.prototype,"symbolLayers",void 0),u([it({PointSymbol3D:"point-3d"},{readOnly:!0})],so.prototype,"type",void 0),so=LA=u([B("esri.symbols.PointSymbol3D")],so);var A2;const Bre=qe.ofType({base:null,key:"type",typeMap:{extrude:jh,fill:Kn,icon:an,line:Xn,object:Us,text:$s,water:Uh}});let ol=A2=class extends Po{constructor(t){super(t),this.symbolLayers=new Bre,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&kf(be.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&kf(be.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(ll((()=>this.symbolLayers),"after-add",(({item:e})=>t(e)),Hu))}clone(){return new A2({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromJSON(t){var i;const e=new A2;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),s=e.symbolLayers.at(1);!s.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:s.size,color:s.material!=null?s.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new A2({symbolLayers:new qe([Kn.fromSimpleFillSymbol(t)])})}};u([A({type:Bre,json:{write:!0}})],ol.prototype,"symbolLayers",void 0),u([it({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],ol.prototype,"type",void 0),ol=A2=u([B("esri.symbols.PolygonSymbol3D")],ol);var _4;const pR=new Ot({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Pn=_4=class extends Zg{constructor(...t){super(...t),this.color=new ze([0,0,0,.25]),this.outline=new br,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new _4({color:ie(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([A()],Pn.prototype,"color",void 0),u([A()],Pn.prototype,"outline",void 0),u([it({esriSFS:"simple-fill"},{readOnly:!0})],Pn.prototype,"type",void 0),u([A({type:pR.apiValues,json:{read:pR.read,write:pR.write}})],Pn.prototype,"style",void 0),Pn=_4=u([B("esri.symbols.SimpleFillSymbol")],Pn);var S4;const fR=new Ot({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let dr=S4=class extends Gh{constructor(...t){super(...t),this.color=new ze([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new br}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=di(e)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new S4({angle:this.angle,color:ie(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};u([A()],dr.prototype,"color",void 0),u([Ne("color")],dr.prototype,"writeColor",null),u([it({esriSMS:"simple-marker"},{readOnly:!0})],dr.prototype,"type",void 0),u([A()],dr.prototype,"size",void 0),u([A({type:fR.apiValues,json:{read:fR.read,write:fR.write}})],dr.prototype,"style",void 0),u([A({type:String,json:{write:!0}})],dr.prototype,"path",null),u([A({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":br}},json:{default:null,write:!0}})],dr.prototype,"outline",void 0),dr=S4=u([B("esri.symbols.SimpleMarkerSymbol")],dr);var x4;let Ti=x4=class extends Wr{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new ha,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return di(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new x4({angle:this.angle,backgroundColor:ie(this.backgroundColor),borderLineColor:ie(this.borderLineColor),borderLineSize:this.borderLineSize,color:ie(this.color),font:this.font&&this.font.clone(),haloColor:ie(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([A({type:ze,json:{write:!0}})],Ti.prototype,"backgroundColor",void 0),u([A({type:ze,json:{write:!0}})],Ti.prototype,"borderLineColor",void 0),u([A({type:Number,json:{write:!0},cast:di})],Ti.prototype,"borderLineSize",void 0),u([A({type:ha,json:{write:!0}})],Ti.prototype,"font",void 0),u([A({...Cre,json:{write:!0}})],Ti.prototype,"horizontalAlignment",void 0),u([A({type:Boolean,json:{write:!0}})],Ti.prototype,"kerning",void 0),u([A({type:ze,json:{write:!0}})],Ti.prototype,"haloColor",void 0),u([A({type:Number,cast:di,json:{write:!0}})],Ti.prototype,"haloSize",void 0),u([A({type:Boolean,json:{write:!0}})],Ti.prototype,"rightToLeft",void 0),u([A({type:Boolean,json:{write:!0}})],Ti.prototype,"rotated",void 0),u([A({type:String,json:{write:!0}})],Ti.prototype,"text",void 0),u([it({esriTS:"text"},{readOnly:!0})],Ti.prototype,"type",void 0),u([A({...Tre,json:{write:!0}})],Ti.prototype,"verticalAlignment",void 0),u([A({type:Number,cast:di,json:{write:!0}})],Ti.prototype,"xoffset",void 0),u([A({type:Number,cast:di,json:{write:!0}})],Ti.prototype,"yoffset",void 0),u([A({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Ti.prototype,"angle",void 0),u([A({type:Number,json:{write:!0}})],Ti.prototype,"width",void 0),u([A({type:Number})],Ti.prototype,"lineWidth",void 0),u([Ne("lineWidth")],Ti.prototype,"writeLineWidth",null),u([yi("lineWidth")],Ti.prototype,"castLineWidth",null),u([A(Ire)],Ti.prototype,"lineHeight",void 0),u([Ne("lineHeight")],Ti.prototype,"writeLineHeight",null),Ti=x4=u([B("esri.symbols.TextSymbol")],Ti);var $4;let Hs=$4=class extends Wr{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:Oe.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new $4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){LX(be.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if((e==null?void 0:e.type)!=="cim")throw new te("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const o=i&&e.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await Ie(()=>Promise.resolve().then(()=>vGe),void 0,import.meta.url);ir(t);const s=r(this,{portal:this.portal},t);s.catch((o=>{be.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)}));const n=await s;return e!=null&&e.set(i,n.clone()),n}};u([A({json:{write:!1}})],Hs.prototype,"color",void 0),u([A({type:String,json:{write:!0}})],Hs.prototype,"styleName",void 0),u([A({type:Oe,json:{write:!1}})],Hs.prototype,"portal",void 0),u([A({type:String,json:{read:wk,write:v0}})],Hs.prototype,"styleUrl",void 0),u([A({type:Zm,json:{read:!1}})],Hs.prototype,"thumbnail",void 0),u([A({type:String,json:{write:!0}})],Hs.prototype,"name",void 0),u([it({styleSymbolReference:"web-style"},{readOnly:!0})],Hs.prototype,"type",void 0),u([A()],Hs.prototype,"_fetchCacheKey",null),Hs=$4=u([B("esri.symbols.WebStyleSymbol")],Hs);function Pk(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function eh(t){switch(t==null?void 0:t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const af={base:Wr,key:"type",typeMap:{"simple-fill":Pn,"picture-fill":Eo,"picture-marker":$n,"simple-line":br,"simple-marker":dr,text:Ti,"label-3d":Vl,"line-3d":tc,"mesh-3d":Ad,"point-3d":so,"polygon-3d":ol,"web-style":Hs,cim:kn},errorContext:"symbol"},dnt={base:Wr,key:"type",typeMap:{"picture-marker":$n,"simple-marker":dr,"point-3d":so,cim:kn},errorContext:"symbol"},pnt={base:Wr,key:"type",typeMap:{"simple-line":br,"line-3d":tc,cim:kn},errorContext:"symbol"},fnt={base:Wr,key:"type",typeMap:{"simple-fill":Pn,"picture-fill":Eo,"polygon-3d":ol,cim:kn},errorContext:"symbol"},DSe={base:Wr,key:"type",typeMap:{"picture-marker":$n,"simple-marker":dr,text:Ti,"web-style":Hs,cim:kn},errorContext:"symbol"},NSe=A1({types:af}),jre={base:Wr,key:"type",typeMap:{"simple-fill":Pn,"picture-fill":Eo,"picture-marker":$n,"simple-line":br,"simple-marker":dr,text:Ti,"line-3d":tc,"mesh-3d":Ad,"point-3d":so,"polygon-3d":ol,"web-style":Hs,cim:kn},errorContext:"symbol"},FSe={base:Wr,key:"type",typeMap:{text:Ti,"label-3d":Vl},errorContext:"symbol"},NV={base:Wr,key:"type",typeMap:{"line-3d":tc,"mesh-3d":Ad,"point-3d":so,"polygon-3d":ol,"web-style":Hs,cim:kn},errorContext:"symbol"},zSe={base:Wr,key:"type",typeMap:{"label-3d":Vl},errorContext:"symbol"},Ure=Uu(af);var E4;function BSe(t){if(!t)return null;const e={};for(const i in t){const r=Ju(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function jSe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var jv;let Qi=(jv=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:uI(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Pme(be.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new E4({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[i,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=this.sourceLayer??this.layer;return e?P_e(this,e):null}getGlobalId(){const e=this.sourceLayer??this.layer;return e&&"globalIdField"in e&&e.globalIdField?this.getAttribute(e.globalIdField):null}toJSON(){var e;return{aggregateGeometries:jSe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:uS(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if((i==null?void 0:i.type)==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(n.action=s),e==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([hn((()=>{var e,i;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(i=this.geometry.transform)==null?void 0:i.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0}),(({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())})),hn((()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0}),(()=>{var i;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(i=e.transform)==null?void 0:i.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)}),{equals:(e,i)=>e===i,sync:!0})])}},E4=jv,jv);u([A({value:null,json:{read:BSe}})],Qi.prototype,"aggregateGeometries",null),u([A({value:null})],Qi.prototype,"attributes",null),u([A({value:null,types:E1,json:{read:Ju}})],Qi.prototype,"geometry",null),u([A({type:Boolean})],Qi.prototype,"isAggregate",void 0),u([A({clonable:!1})],Qi.prototype,"layer",void 0),u([A({clonable:"reference"})],Qi.prototype,"origin",void 0),u([A({type:Gu,value:null})],Qi.prototype,"popupTemplate",null),u([A({clonable:"reference"})],Qi.prototype,"sourceLayer",void 0),u([A({value:null,types:af})],Qi.prototype,"symbol",null),u([A({clonable:!1,json:{read:!1,write:!1}})],Qi.prototype,"_version",void 0),u([A({type:Boolean,value:!0})],Qi.prototype,"visible",null),Qi=E4=u([B("esri.Graphic")],Qi);let USe=class Vre{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(bD),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new Vre,r=this._originStores[xt.DEFAULTS];r&&r.forEach(((s,n)=>{i.set(n,ie(s),xt.DEFAULTS)}));for(let s=xt.SERVICE;s<bD;s++){const n=this._originStores[s];n&&n.forEach(((o,a)=>{e&&e.has(a)||i.set(a,ie(o),s)}))}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=xt.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),n!==i}return!1}delete(e,i=xt.USER){const r=this._originStores[i];if(!r)return;const s=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let n=i-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,n);break}}}return s}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],s=r==null?void 0:r.get(e),n=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,i),n!==s}originOf(e){return this._propertyOriginMap.get(e)||xt.DEFAULTS}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const Gre=t=>{let e=class extends t{constructor(...i){super(...i);const r=ho(this),s=r.store,n=new USe;r.store=n,jK(r,s,n)}read(i,r){VK(this,i,r)}getAtOrigin(i,r){const s=AR(this),n=fd(r);if(typeof i=="string")return s.get(i,n);const o={};return i.forEach((a=>{o[a]=s.get(a,n)})),o}originOf(i){return oS(this.originIdOf(i))}originIdOf(i){return AR(this).originOf(i)}revert(i,r){const s=AR(this),n=fd(r),o=ho(this);let a;a=typeof i=="string"?i==="*"?s.keys(n):[i]:i,a.forEach((l=>{o.invalidate(l),s.revert(l,n),o.commit(l)}))}};return e=u([B("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function AR(t){return ho(t).store}let FV=class extends Gre(et){};FV=u([B("esri.core.ReadOnlyMultiOriginJSONSupport")],FV);const VSe=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){ho(this).clearOrigin(i,fd(r))}write(i,r){return qK(this,i=i||{},r),i}setAtOrigin(i,r,s){ho(this).setAtOrigin(i,r,fd(s))}removeOrigin(i){const r=zV(this),s=fd(i),n=r.keys(s);for(const o of n)r.originOf(o)===s&&r.set(o,r.get(o,s),xt.USER)}updateOrigin(i,r){const s=zV(this),n=fd(r),o=il(this,i);for(let a=n+1;a<bD;++a)s.delete(i,a);s.set(i,o,n)}toJSON(i){return this.write({},i)}};return e=u([B("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function zV(t){return ho(t).store}const Lk=t=>{let e=class extends VSe(Gre(t)){constructor(...i){super(...i)}};return e=u([B("esri.core.MultiOriginJSONSupport")],e),e};let I4=class extends Lk(et){};I4=u([B("esri.core.MultiOriginJSONSupport")],I4);const Gi=(t=>t)(["operational-layers","basemap","ground"]);var C4;let RA=C4=class extends pe{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new C4({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([A({type:String,json:{write:!0}})],RA.prototype,"expression",void 0),u([A({type:String,json:{write:!0}})],RA.prototype,"name",void 0),u([A({type:["boolean","date","number","string"],json:{write:!0}})],RA.prototype,"returnType",void 0),u([A({type:String,json:{write:!0}})],RA.prototype,"title",void 0),RA=C4=u([B("esri.form.ExpressionInfo")],RA);const GSe=RA;let OA=class extends pe{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([A({type:String,json:{write:!0}})],OA.prototype,"description",void 0),u([A({type:String,json:{write:!0}})],OA.prototype,"label",void 0),u([A()],OA.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],OA.prototype,"visibilityExpression",void 0),OA=u([B("esri.form.elements.Element")],OA);const Df=OA;let zI=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.type=null}};u([A()],zI.prototype,"type",void 0),zI=u([B("esri.form.elements.inputs.attachments.Input")],zI);const Nf=zI,Rk=["any","capture","upload"];let Wy=class extends Nf{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};u([A({type:["audio"],readOnly:!0,json:{write:!0}})],Wy.prototype,"type",void 0),u([A({type:Rk,json:{write:!0}})],Wy.prototype,"inputMethod",void 0),u([A({type:Number,json:{write:!0}})],Wy.prototype,"maxDuration",void 0),Wy=u([B("esri.form.elements.inputs.attachments.AudioInput")],Wy);const BV=Wy;let m2=class extends Nf{constructor(e){super(e),this.type="document",this.maxFileSize=null}};u([A({type:["document"],readOnly:!0,json:{write:!0}})],m2.prototype,"type",void 0),u([A({type:Number,json:{write:!0}})],m2.prototype,"maxFileSize",void 0),m2=u([B("esri.form.elements.inputs.attachments.DocumentInput")],m2);const jV=m2;let Qy=class extends Nf{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};u([A({type:["image"],readOnly:!0,json:{write:!0}})],Qy.prototype,"type",void 0),u([A({type:Rk,json:{write:!0}})],Qy.prototype,"inputMethod",void 0),u([A({type:Number,json:{write:!0}})],Qy.prototype,"maxImageSize",void 0),Qy=u([B("esri.form.elements.inputs.attachments.ImageInput")],Qy);const UV=Qy;let y2=class extends Nf{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};u([A({type:["signature"],readOnly:!0,json:{write:!0}})],y2.prototype,"type",void 0),u([A({type:Rk,json:{write:!0}})],y2.prototype,"inputMethod",void 0),y2=u([B("esri.form.elements.inputs.attachments.SignatureInput")],y2);const VV=y2;let Jy=class extends Nf{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};u([A({type:["video"],readOnly:!0,json:{write:!0}})],Jy.prototype,"type",void 0),u([A({type:Rk,json:{write:!0}})],Jy.prototype,"inputMethod",void 0),u([A({type:Number,json:{write:!0}})],Jy.prototype,"maxDuration",void 0),Jy=u([B("esri.form.elements.inputs.attachments.VideoInput")],Jy);const GV=Jy;function Hre(t){return{nestableTypes:{base:Nf,key:"type",typeMap:{audio:BV,document:jV,image:UV,signature:VV,video:GV}},allTypes:{base:Nf,key:"type",typeMap:{attachment:t,audio:BV,document:jV,image:UV,signature:VV,video:GV}}}}function HSe(t,e,i){return t?t.map((r=>Uu(e.nestableTypes,r))):null}function qSe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter((s=>r[s.type])).map((s=>r[s.type].fromJSON(s)))}function WSe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter((s=>r[s.type])).map((s=>s.toJSON()))}let Oc=class extends Nf{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return HSe(e,mR)}readInputs(e,i){return qSe(i.inputTypes,mR)}writeInputs(e,i){i.inputTypes=WSe(e,mR)}};u([A({type:["attachment"],readOnly:!0,json:{write:!0}})],Oc.prototype,"type",void 0),u([A({type:["any","exact","exactOrNone"],json:{write:!0}})],Oc.prototype,"attachmentAssociationType",void 0),u([A({json:{write:{isRequired:!0}}})],Oc.prototype,"inputTypes",void 0),u([yi("inputTypes")],Oc.prototype,"castInputs",null),u([Me("inputTypes")],Oc.prototype,"readInputs",null),u([Ne("inputTypes")],Oc.prototype,"writeInputs",null),Oc=u([B("esri.form.elements.inputs.attachments.AttachmentInput")],Oc);const mR=Hre(Oc),QSe=Oc;var T4;const JSe=Hre(QSe);let Zo=T4=class extends Df{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new T4({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};u([A({type:Boolean,json:{write:!0}})],Zo.prototype,"allowUserRename",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],Zo.prototype,"attachmentKeyword",void 0),u([A({type:Boolean,json:{write:!0}})],Zo.prototype,"displayFilename",void 0),u([A({type:String,json:{write:!0}})],Zo.prototype,"editableExpression",void 0),u([A({type:String,json:{write:!0}})],Zo.prototype,"filenameExpression",void 0),u([A({types:JSe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Zo.prototype,"input",void 0),u([A({type:Number,json:{write:!0}})],Zo.prototype,"maxAttachmentCount",void 0),u([A({type:Number,json:{write:!0}})],Zo.prototype,"minAttachmentCount",void 0),u([A({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Zo.prototype,"type",void 0),u([A({type:Boolean,json:{write:!0}})],Zo.prototype,"useOriginalFilename",void 0),Zo=T4=u([B("esri.form.elements.AttachmentElement")],Zo);const HV=Zo;let BI=class extends pe{constructor(e){super(e),this.type=null}};u([A()],BI.prototype,"type",void 0),BI=u([B("esri.form.elements.inputs.Input")],BI);const zd=BI;let g2=class extends zd{constructor(e){super(e),this.maxLength=null,this.minLength=0}};u([A({type:Number,json:{write:!0}})],g2.prototype,"maxLength",void 0),u([A({type:Number,json:{write:!0}})],g2.prototype,"minLength",void 0),g2=u([B("esri.form.elements.inputs.TextInput")],g2);const u7=g2;var M4;let jI=M4=class extends u7{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new M4({maxLength:this.maxLength,minLength:this.minLength})}};u([A({type:["barcode-scanner"],json:{read:!1,write:!0}})],jI.prototype,"type",void 0),jI=M4=u([B("esri.form.elements.inputs.BarcodeScannerInput")],jI);const ZSe=jI;var k4;let Zy=k4=class extends zd{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new k4({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([A({type:String,json:{write:!0}})],Zy.prototype,"noValueOptionLabel",void 0),u([A({type:Boolean,json:{write:!0}})],Zy.prototype,"showNoValueOption",void 0),u([A({type:["combo-box"],json:{read:!1,write:!0}})],Zy.prototype,"type",void 0),Zy=k4=u([B("esri.form.elements.inputs.ComboBoxInput")],Zy);const YSe=Zy;var P4;function qV(t){return t??null}function WV(t){return t??null}let Sc=P4=class extends zd{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return qV(e.max)}writeMax(t,e){e.max=WV(t)}readMin(t,e){return qV(e.min)}writeMin(t,e){e.min=WV(t)}clone(){return new P4({max:this.max,min:this.min})}};u([A({type:String,json:{type:String,write:!0}})],Sc.prototype,"max",void 0),u([Me("max")],Sc.prototype,"readMax",null),u([Ne("max")],Sc.prototype,"writeMax",null),u([A({type:String,json:{type:String,write:!0}})],Sc.prototype,"min",void 0),u([Me("min")],Sc.prototype,"readMin",null),u([Ne("min")],Sc.prototype,"writeMin",null),u([A({type:["date-picker"],json:{read:!1,write:!0}})],Sc.prototype,"type",void 0),Sc=P4=u([B("esri.form.elements.inputs.DatePickerInput")],Sc);const XSe=Sc;var L4;function yR(t){return t??null}function gR(t){return t??null}let bo=L4=class extends zd{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return yR(e.max)}writeMax(t,e){e.max=gR(t)}readMin(t,e){return yR(e.min)}writeMin(t,e){e.min=gR(t)}readTimeResolution(t,e){return yR(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=gR(t)}clone(){return new L4({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([A({type:Boolean,json:{write:!0}})],bo.prototype,"includeTimeOffset",void 0),u([A({type:String,json:{type:String,write:!0}})],bo.prototype,"max",void 0),u([Me("max")],bo.prototype,"readMax",null),u([Ne("max")],bo.prototype,"writeMax",null),u([A({type:String,json:{type:String,write:!0}})],bo.prototype,"min",void 0),u([Me("min")],bo.prototype,"readMin",null),u([Ne("min")],bo.prototype,"writeMin",null),u([A({type:String,json:{type:String,write:!0}})],bo.prototype,"timeResolution",void 0),u([Me("timeResolution")],bo.prototype,"readTimeResolution",null),u([Ne("timeResolution")],bo.prototype,"writeTimeResolution",null),u([A({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],bo.prototype,"type",void 0),bo=L4=u([B("esri.form.elements.inputs.DateTimeOffsetPickerInput")],bo);const KSe=bo;var R4;function QV(t){return t!=null?new Date(t):null}function JV(t){return t?t.getTime():null}let Ml=R4=class extends zd{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return QV(e.max)}writeMax(t,e){e.max=JV(t)}readMin(t,e){return QV(e.min)}writeMin(t,e){e.min=JV(t)}clone(){return new R4({includeTime:this.includeTime,max:this.max,min:this.min})}};u([A({type:Boolean,json:{write:!0}})],Ml.prototype,"includeTime",void 0),u([A({type:Date,json:{type:Number,write:!0}})],Ml.prototype,"max",void 0),u([Me("max")],Ml.prototype,"readMax",null),u([Ne("max")],Ml.prototype,"writeMax",null),u([A({type:Date,json:{type:Number,write:!0}})],Ml.prototype,"min",void 0),u([Me("min")],Ml.prototype,"readMin",null),u([Ne("min")],Ml.prototype,"writeMin",null),u([A({type:["datetime-picker"],json:{read:!1,write:!0}})],Ml.prototype,"type",void 0),Ml=R4=u([B("esri.form.elements.inputs.DateTimePickerInput")],Ml);const exe=Ml;var O4;let Yy=O4=class extends zd{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new O4({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([A({type:String,json:{write:!0}})],Yy.prototype,"noValueOptionLabel",void 0),u([A({type:Boolean,json:{write:!0}})],Yy.prototype,"showNoValueOption",void 0),u([A({type:["radio-buttons"],json:{read:!1,write:!0}})],Yy.prototype,"type",void 0),Yy=O4=u([B("esri.form.elements.inputs.RadioButtonsInput")],Yy);const txe=Yy;var D4;let Xy=D4=class extends zd{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new D4({offValue:this.offValue,onValue:this.onValue})}};u([A({type:[String,Number],json:{write:!0}})],Xy.prototype,"offValue",void 0),u([A({type:[String,Number],json:{write:!0}})],Xy.prototype,"onValue",void 0),u([A({type:["switch"],json:{read:!1,write:!0}})],Xy.prototype,"type",void 0),Xy=D4=u([B("esri.form.elements.inputs.SwitchInput")],Xy);const ixe=Xy;var N4;let UI=N4=class extends u7{constructor(t){super(t),this.type="text-area"}clone(){return new N4({maxLength:this.maxLength,minLength:this.minLength})}};u([A({type:["text-area"],json:{read:!1,write:!0}})],UI.prototype,"type",void 0),UI=N4=u([B("esri.form.elements.inputs.TextAreaInput")],UI);const rxe=UI;var F4;let VI=F4=class extends u7{constructor(t){super(t),this.type="text-box"}clone(){return new F4({maxLength:this.maxLength,minLength:this.minLength})}};u([A({type:["text-box"],json:{read:!1,write:!0}})],VI.prototype,"type",void 0),VI=F4=u([B("esri.form.elements.inputs.TextBoxInput")],VI);const sxe=VI;var z4;function vR(t){return t??null}function bR(t){return t??null}let Yo=z4=class extends zd{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return vR(e.max)}writeMax(t,e){e.max=bR(t)}readMin(t,e){return vR(e.min)}writeMin(t,e){e.min=bR(t)}readTimeResolution(t,e){return vR(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=bR(t)}clone(){return new z4({max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([A({type:String,json:{type:String,write:!0}})],Yo.prototype,"max",void 0),u([Me("max")],Yo.prototype,"readMax",null),u([Ne("max")],Yo.prototype,"writeMax",null),u([A({type:String,json:{type:String,write:!0}})],Yo.prototype,"min",void 0),u([Me("min")],Yo.prototype,"readMin",null),u([Ne("min")],Yo.prototype,"writeMin",null),u([A({type:String,json:{type:String,write:!0}})],Yo.prototype,"timeResolution",void 0),u([Me("timeResolution")],Yo.prototype,"readTimeResolution",null),u([Ne("timeResolution")],Yo.prototype,"writeTimeResolution",null),u([A({type:["time-picker"],json:{read:!1,write:!0}})],Yo.prototype,"type",void 0),Yo=z4=u([B("esri.form.elements.inputs.TimePickerInput")],Yo);const nxe=Yo,oxe={base:zd,key:"type",typeMap:{"barcode-scanner":ZSe,"combo-box":YSe,"date-picker":XSe,"datetime-picker":exe,"datetimeoffset-picker":KSe,"radio-buttons":txe,switch:ixe,"text-area":rxe,"text-box":sxe,"time-picker":nxe}};var B4;let km=B4=class extends pe{constructor(t){super(t),this.name=null,this.code=null}clone(){return new B4({name:this.name,code:this.code})}};u([A({type:String,json:{write:{isRequired:!0}}})],km.prototype,"name",void 0),u([A({type:[String,Number],json:{write:{isRequired:!0}}})],km.prototype,"code",void 0),km=B4=u([B("esri.layers.support.CodedValue")],km);const axe=new Ot({inherited:"inherited",codedValue:"coded-value",range:"range"});let lf=class extends pe{constructor(e){super(e),this.name=null,this.type=null}};u([A({type:String,json:{write:!0}})],lf.prototype,"name",void 0),u([it(axe),A({json:{write:{isRequired:!0}}})],lf.prototype,"type",void 0),lf=u([B("esri.layers.support.Domain")],lf);var j4,Uv;let cf=(Uv=class extends lf{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some((s=>(String(s.code)===r&&(i=s.name),!!i)))}return i}clone(){return new j4({codedValues:ie(this.codedValues),name:this.name})}},j4=Uv,Uv);u([A({type:[km],json:{write:{isRequired:!0}}})],cf.prototype,"codedValues",void 0),u([it({codedValue:"coded-value"})],cf.prototype,"type",void 0),cf=j4=u([B("esri.layers.support.CodedValueDomain")],cf);var U4,Vv;let w_=(Vv=class extends lf{constructor(e){super(e),this.type="inherited"}clone(){return new U4}},U4=Vv,Vv);u([it({inherited:"inherited"})],w_.prototype,"type",void 0),w_=U4=u([B("esri.layers.support.InheritedDomain")],w_);var V4,Gv;let gm=(Gv=class extends lf{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new V4({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},V4=Gv,Gv);u([A({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],gm.prototype,"maxValue",void 0),u([A({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],gm.prototype,"minValue",void 0),u([it({range:"range"})],gm.prototype,"type",void 0),gm=V4=u([B("esri.layers.support.RangeDomain")],gm);const qre={key:"type",base:lf,typeMap:{range:gm,"coded-value":cf,inherited:w_}};function Ok(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return gm.fromJSON(t);case"codedValue":return cf.fromJSON(t);case"inherited":return w_.fromJSON(t)}return null}var G4;let Oa=G4=class extends Df{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new G4({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([A({types:qre,json:{read:{reader:Ok},write:!0}})],Oa.prototype,"domain",void 0),u([A({type:Boolean,json:{write:!0}})],Oa.prototype,"editable",void 0),u([A({type:String,json:{write:!0}})],Oa.prototype,"editableExpression",void 0),u([A({type:String,json:{write:!0}})],Oa.prototype,"fieldName",void 0),u([A({type:String,json:{write:!0}})],Oa.prototype,"hint",void 0),u([A({types:oxe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Oa.prototype,"input",void 0),u([A({type:String,json:{write:!0}})],Oa.prototype,"requiredExpression",void 0),u([A({type:String,json:{read:!1,write:!0}})],Oa.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],Oa.prototype,"valueExpression",void 0),Oa=G4=u([B("esri.form.elements.FieldElement")],Oa);const ZV=Oa;var H4;let _h=H4=class extends Df{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new H4({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:ie(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([A({type:Number,json:{write:!0}})],_h.prototype,"displayCount",void 0),u([A({type:["list"],json:{write:!0}})],_h.prototype,"displayType",void 0),u([A({type:String,json:{write:!0}})],_h.prototype,"editableExpression",void 0),u([A({type:[Mz],json:{write:!0}})],_h.prototype,"orderByFields",void 0),u([A({type:Number,json:{write:!0}})],_h.prototype,"relationshipId",void 0),u([A({type:["relationship"],json:{read:!1,write:!0}})],_h.prototype,"type",void 0),_h=H4=u([B("esri.form.elements.RelationshipElement")],_h);const YV=_h;var q4;let Ky=q4=class extends Df{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new q4({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};u([A({type:String,json:{write:!0}})],Ky.prototype,"text",void 0),u([A({type:String,json:{write:!0}})],Ky.prototype,"textFormat",void 0),u([A({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Ky.prototype,"type",void 0),Ky=q4=u([B("esri.form.elements.TextElement")],Ky);const XV=Ky;let eg=class extends dt.ClonableMixin(Df){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};u([A({type:[Ote],json:{write:{isRequired:!0}}})],eg.prototype,"associationTypes",void 0),u([A({type:String,json:{write:!0}})],eg.prototype,"editableExpression",void 0),u([A({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],eg.prototype,"type",void 0),eg=u([B("esri.form.elements.UtilityNetworkAssociationsElement")],eg);const KV=eg,lxe=t=>t.type==="field",cxe=t=>t.type==="group",uxe=t=>t.type==="text";function Wre(t){return{typesWithGroup:{base:Df,key:"type",typeMap:{attachment:HV,field:ZV,group:t,relationship:YV,text:XV,utilityNetworkAssociations:KV}},typesWithoutGroup:{base:Df,key:"type",typeMap:{attachment:HV,field:ZV,relationship:YV,text:XV,utilityNetworkAssociations:KV}}}}function Qre(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((s=>r[s.type])).map((s=>r[s.type].fromJSON(s)))}function Jre(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((s=>r[s.type])).map((s=>s.toJSON()))}function Zre(t,e,i=!0){return t?t.map((r=>Uu(i?e.typesWithGroup:e.typesWithoutGroup,r))):null}var W4;let Dc=W4=class extends Df{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return Zre(t,wR,!1)}readElements(t,e){return Qre(e.formElements,wR,!1)}writeElements(t,e){e.formElements=Jre(t,wR,!1)}clone(){return new W4({description:this.description,elements:ie(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([A({json:{write:!0}})],Dc.prototype,"elements",void 0),u([yi("elements")],Dc.prototype,"castElements",null),u([Me("elements",["formElements"])],Dc.prototype,"readElements",null),u([Ne("elements")],Dc.prototype,"writeElements",null),u([A({type:["collapsed","expanded"],json:{write:!0}})],Dc.prototype,"initialState",void 0),u([A({type:String,json:{read:!1,write:!0}})],Dc.prototype,"type",void 0),Dc=W4=u([B("esri.form.elements.GroupElement")],Dc);const wR=Wre(Dc),hxe=Dc;var Q4;const _R=Wre(hxe);let kl=Q4=class extends pe{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return Zre(t,_R)}readElements(t,e){return Qre(e.formElements,_R)}writeElements(t,e){e.formElements=Jre(t,_R)}clone(){return new Q4({description:this.description,expressionInfos:ie(this.expressionInfos),elements:ie(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:s,expressionInfos:n,title:o}=this;if(__(i,t,r),__(i,t,o),!s)return[];const a=dxe(s,n).map((l=>un(i,t,l)));await Promise.all(a);for(const l of s)Yre(i,{fieldsIndex:t,relationships:e},l);return Array.from(i).sort()}};function Yre(t,e,i){var s;const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(__(t,r,i.label),__(t,r,i.description),i.type){case"field":lo(t,r,i.fieldName);break;case"group":i.elements.forEach((n=>Yre(t,e,n)));break;case"relationship":if(e.relationships){const n=e.relationships.find((o=>o.id===i.relationshipId));n&&lo(t,r,n.keyField)}Pf(t,r,(s=i.orderByFields)==null?void 0:s.map((n=>n.field)));break;case"text":__(t,r,i.text)}}function dxe(t,e){if(!e||e.length===0)return[];const i=Xre(t),r=[];for(const s of e)i.has(s.name)&&r.push(s.expression);return r}function Xre(t){const e=new Set;for(const i of t)if(sU(e,i.visibilityExpression),!uxe(i)){if(cxe(i))rT(e,Xre(i.elements));else if(sU(e,i.editableExpression),lxe(i)){const{requiredExpression:r,valueExpression:s}=i;rT(e,[r,s])}}return e}function __(t,e,i){Pf(t,e,Sz(i))}u([A({type:String,json:{write:!0}})],kl.prototype,"description",void 0),u([A({json:{write:!0}})],kl.prototype,"elements",void 0),u([yi("elements")],kl.prototype,"castElements",null),u([Me("elements",["formElements"])],kl.prototype,"readElements",null),u([Ne("elements")],kl.prototype,"writeElements",null),u([A({type:[GSe],json:{write:!0}})],kl.prototype,"expressionInfos",void 0),u([A({type:Boolean,json:{default:!1,write:!0}})],kl.prototype,"preserveFieldValuesWhenHidden",void 0),u([A({type:String,json:{write:!0}})],kl.prototype,"title",void 0),kl=Q4=u([B("esri.form.FormTemplate")],kl);const pxe=kl;async function fxe(t){var r;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await Ie(async()=>{const{fromItem:s}=await import("./portalLayers-C1FGkCa8.js");return{fromItem:s}},__vite__mapDeps([20,21,22,23,24]),import.meta.url);try{return await i(e)}catch(s){const n=e==null?void 0:e.portalItem,o=(n==null?void 0:n.id)||"unset",a=((r=n==null?void 0:n.portal)==null?void 0:r.url)||li.portalUrl;throw be.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",s),s}}const J4={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function SR(t,e,i,r=ul){const s=new Go(Ez(r)),n=tt.fromJSDate(t,{zone:s}),o=i==="decades"||i==="centuries"?"year":ese(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),n.plus({[o]:e}).toJSDate()}function Tnt(t,e,i="milliseconds"){const r=t.getTime(),s=Kre(e,i,"milliseconds");return new Date(r+s)}function eG(t,e,i=ul){const r=new Go(Ez(i)),s=tt.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=s.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const n=ese(e);return s.startOf(n).toJSDate()}function Kre(t,e,i){return t===0?0:t*J4[e]/J4[i]}function Mnt(t,e){return t&&e?t.intersection(e):t||e}function ese(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Da,Hv;let Mi=(Hv=class extends pe{static get allTime(){return tG}static get empty(){return Axe}static fromArray(e){return new Da({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Da.allTime)}get isEmpty(){return this.equals(Da.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=(e==null?void 0:e.getTime())??null}clone(){return new Da({end:this.end,start:this.start})}equals(e){var o,a,l,c;if(!e)return!1;const i=((o=this.start)==null?void 0:o.getTime())??this.start,r=((a=this.end)==null?void 0:a.getTime())??this.end,s=((l=e.start)==null?void 0:l.getTime())??e.start,n=((c=e.end)==null?void 0:c.getTime())??e.end;return i===s&&r===n}expandTo(e,i=ul){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=eG(r,e,i));let s=this.end;if(s){const n=eG(s,e,i);s=s.getTime()===n.getTime()?n:SR(n,1,e,i)}return new Da({start:r,end:s})}intersection(e){var l,c,h,y;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Da.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=((l=this.start)==null?void 0:l.getTime())??-1/0,r=((c=this.end)==null?void 0:c.getTime())??1/0,s=((h=e.start)==null?void 0:h.getTime())??-1/0,n=((y=e.end)==null?void 0:y.getTime())??1/0;let o,a;return s>=i&&s<=r?o=s:i>=s&&i<=n&&(o=i),r>=s&&r<=n?a=r:n>=i&&n<=r&&(a=n),o==null||a==null||isNaN(o)||isNaN(a)?Da.empty:new Da({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,i,r=ul){if(this.isEmpty||this.isAllTime)return this.clone();const s=new Da,{start:n,end:o}=this;return n!=null&&(s.start=SR(n,e,i,r)),o!=null&&(s.end=SR(o,e,i,r)),s}toArray(){var e,i;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((i=this.end)==null?void 0:i.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return tG.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Da({start:i,end:r})}},Da=Hv,Hv);u([A({type:Date,json:{write:{allowNull:!0}}})],Mi.prototype,"end",void 0),u([Me("end")],Mi.prototype,"readEnd",null),u([Ne("end")],Mi.prototype,"writeEnd",null),u([A({readOnly:!0,json:{read:!1}})],Mi.prototype,"isAllTime",null),u([A({readOnly:!0,json:{read:!1}})],Mi.prototype,"isEmpty",null),u([A({type:Date,json:{write:{allowNull:!0}}})],Mi.prototype,"start",void 0),u([Me("start")],Mi.prototype,"readStart",null),u([Ne("start")],Mi.prototype,"writeStart",null),Mi=Da=u([B("esri.time.TimeExtent")],Mi);const tG=new Mi,Axe=new Mi({start:void 0,end:void 0});let mxe=0,cr=class extends dc.EventedMixin(j0.IdentifiableMixin(Fn)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Rt(-180,-90,180,90,We.WGS84),this.id=Date.now().toString(16)+"-layer-"+mxe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=We.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await Ie(async()=>{const{fromUrl:r}=await import("./arcgisLayers-CDXx3Ht6.js");return{fromUrl:r}},__vite__mapDeps([25,21,22,24]),import.meta.url)).fromUrl(i)}static fromPortalItem(e){return fxe(e)}initialize(){this.when().catch((e=>{Zs(e)||be.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&e&&(e=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Yr(this.url)}createLayerView(e,i){return Promise.reject(new te("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ei(e,{query:{f:"json"},responseType:"json"})).data;throw new te("layer:no-attribution-data","Layer does not have attribution data")}};u([A({type:String})],cr.prototype,"attributionDataUrl",void 0),u([A({readOnly:!0})],cr.prototype,"effectiveVisible",null),u([A({type:Rt})],cr.prototype,"fullExtent",void 0),u([A({readOnly:!0})],cr.prototype,"hasAttributionData",null),u([A({type:String,clonable:!1})],cr.prototype,"id",void 0),u([A({type:Boolean,nonNullable:!0})],cr.prototype,"legendEnabled",void 0),u([A({type:["show","hide","hide-children"]})],cr.prototype,"listMode",void 0),u([A({type:Number,range:{min:0,max:1},nonNullable:!0})],cr.prototype,"opacity",void 0),u([A({clonable:!1})],cr.prototype,"parent",void 0),u([A({readOnly:!0})],cr.prototype,"parsedUrl",null),u([A({type:Boolean,readOnly:!0})],cr.prototype,"persistenceEnabled",void 0),u([A({type:Boolean})],cr.prototype,"popupEnabled",void 0),u([A({type:Boolean})],cr.prototype,"attributionVisible",void 0),u([A({type:We})],cr.prototype,"spatialReference",void 0),u([A({type:String})],cr.prototype,"title",void 0),u([A({readOnly:!0,json:{read:!1}})],cr.prototype,"type",void 0),u([A()],cr.prototype,"url",void 0),u([A({type:Mi})],cr.prototype,"visibilityTimeExtent",void 0),u([A({type:Boolean,nonNullable:!0})],cr.prototype,"visible",void 0),cr=u([B("esri.layers.Layer")],cr);let bS=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new m1,this._items=new Set}get length(){return mt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return mt(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach((r=>{e(r)||this._items.delete(r)})),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){mt(this._observable),yield*this._items}};const tse=new FinalizationRegistry((t=>{t.close()}));function yxe(t,e){tse.register(t,e,e)}function gxe(t){tse.unregister(t)}function ise(t,e){return new Proxy({},{get:(i,r,s)=>(...n)=>{let o,a;const l=n[n.length-1];return vxe(l)&&(o=l.signal,a=l.transferList,n.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),n,{transferList:a,signal:o})}})}function vxe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const bxe={statsWorker:()=>Ie(()=>import("./statsWorker-nM0tnCs9.js"),__vite__mapDeps([26,27,28,29]),import.meta.url),geometryEngineWorker:()=>Ie(()=>import("./geometryEngineWorker-C3Rv6yWF.js"),__vite__mapDeps([30,31,32,33,34,35]),import.meta.url),arcadeGeometryOperatorsWorker:()=>Ie(()=>import("./operatorsWorker-CipMOQuo.js"),[],import.meta.url),CSVSourceWorker:()=>Ie(()=>import("./CSVSourceWorker-Dlsv2-Jo.js"),__vite__mapDeps([36,37,35,9,38,39,40,8,10,0,1,41,42,27,28,29,43,44,45,46,47,48,7,49]),import.meta.url),EdgeProcessingWorker:()=>Ie(()=>import("./EdgeProcessingWorker-C2hyz2tY.js"),__vite__mapDeps([50,51,52,53,54,55,56,57,58,59,60,61]),import.meta.url),ElevationSamplerWorker:()=>Ie(()=>import("./ElevationSamplerWorker-DbeCnssM.js"),__vite__mapDeps([62,47,63,64,65,66,67,68,69,70,71,53,72]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>Ie(()=>import("./FeatureServiceSnappingSourceWorker-Bi03HwkC.js"),__vite__mapDeps([73,38,39,35,40,8,9,10,0,1,41,42,27,28,29,43,44,45,46,47,48,74,75,76,77,18]),import.meta.url),GeoJSONSourceWorker:()=>Ie(()=>import("./GeoJSONSourceWorker-Dv-Cdjrg.js"),__vite__mapDeps([78,8,9,10,38,39,35,40,0,1,41,42,27,28,29,43,44,45,46,47,48,79,37,49,80]),import.meta.url),LercWorker:()=>Ie(()=>import("./LercWorker-rVms8UzX.js"),[],import.meta.url),MemorySourceWorker:()=>Ie(()=>import("./MemorySourceWorker-BpyUfgVu.js"),__vite__mapDeps([81,8,9,10,82,38,39,35,40,0,1,41,42,27,28,29,43,44,45,46,47,48,49,80,37]),import.meta.url),PBFDecoderWorker:()=>Ie(()=>import("./PBFDecoderWorker-_w0f-6oa.js"),__vite__mapDeps([83,84,8,9,10,75,76]),import.meta.url),FeaturePipelineWorker:()=>Ie(()=>import("./FeaturePipelineWorker-qe3li5iL.js"),__vite__mapDeps([85,86,87,60,88,89,39,35,41,8,9,10,90,91,92,93,94,95,13,48,40,0,1,42,27,28,29,43,44,96,97,98,99,77,75,76,100,79,37,49,80,101,34,102,103]),import.meta.url),PointCloudWorker:()=>Ie(()=>import("./PointCloudWorker-C3Kl6MT_.js"),__vite__mapDeps([104,105,65,106,107,108,109,58,110,66,67,68,111,112]),import.meta.url),RasterWorker:()=>Ie(()=>import("./RasterWorker-BUKsxQHH.js"),__vite__mapDeps([113,114,115,116,33,34,117,118,119,120]),import.meta.url),SceneLayerSnappingSourceWorker:()=>Ie(()=>import("./SceneLayerSnappingSourceWorker-Cy_fhjgV.js"),__vite__mapDeps([121,122,123,65,112,66,106,124,111,53,55,56,57,52,54,58,59,60,61]),import.meta.url),SceneLayerWorker:()=>Ie(()=>import("./SceneLayerWorker-BmTMhkar.js"),__vite__mapDeps([125,63,71,126,69,123,65,112,66,106,127,109,58,128,129,130,131,132,110,105,67,68,111]),import.meta.url),WFSSourceWorker:()=>Ie(()=>import("./WFSSourceWorker-bQuqWoT6.js"),__vite__mapDeps([133,8,9,10,38,39,35,40,0,1,41,42,27,28,29,43,44,45,46,47,48,79,37,80,134,135]),import.meta.url),WorkerTileHandler:()=>Ie(()=>import("./WorkerTileHandler-CUu-k1z9.js"),__vite__mapDeps([136,137,138,139,76,94,140,141,60,95]),import.meta.url),Lyr3DWorker:()=>Ie(()=>import("./Lyr3DWorker-C9si4xqS.js"),[],import.meta.url),Feature3DPipelineWorker:()=>Ie(()=>import("./Feature3DPipelineWorker-CAJr3hYr.js"),__vite__mapDeps([142,40,8,9,10,0,1,41,39,35,42,27,28,29,43,44,66,143,130,70,63,126,69,144,107,145,146,147,148,149,53,57,150,123,65,112,106,122,58,132,131,151,110,105,67,68,111,152,153,154,155,52,54,156,157,158,129,47,77,75,76]),import.meta.url),TextureCompressionWorker:()=>Ie(()=>import("./TextureCompressionWorker-BCnrKRIz.js"),__vite__mapDeps([159,149]),import.meta.url)},rse="worker:port-closed";var Qs;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Qs||(Qs={}));let wxe=0;function sse(){return wxe++}function _xe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function wS(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function h7(t,e,i,r){if(e.type===Qs.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Qs.INVOKE&&e.type!==Qs.RESPONSE)return void t.postMessage(e);let s;if(_xe(i)?(s=iG(i.transferList),e.data=i.result):(s=iG(r),e.data=i),s){if(ce("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Qs.INVOKE:throw o;case Qs.RESPONSE:return void h7(t,{type:Qs.RESPONSE,jobId:e.jobId,error:wS(o)})}}}t.postMessage(e,s)}else t.postMessage(e)}function _S(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function iG(t){if(!(t!=null&&t.length))return null;if(ce("esri-workers-arraybuffer-transfer"))return t;const e=t.filter((i=>!Sxe(i)));return e.length?e:null}function Sxe(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function Lnt(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===rse;if(!(Zs(e)||i))throw e;return}}const{CLOSE:rG,ABORT:sG,INVOKE:nG,RESPONSE:pw,OPEN_PORT:oG,ON:xxe}=Qs,$xe=2;let Exe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Qs.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Ya;let Gb=(Ya=class{static connect(e,i){const r=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new Ya(r.port1,{channel:r,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),Ya.clients.set(n,s),r.port2}static loadWorker(e){const i=bxe[e];return i?i():Promise.resolve(null)}constructor(e,i,r,s){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Exe((n=>this._onInvokeMessage(n))),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:rG}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const s=r==null?void 0:r.signal,n=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new te(rse,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=sse();return new Promise(((a,l)=>{if(cl(s))return this._processWork(),void l(Hi());const c=ac(s,(()=>{const y=this._outJobs.get(o);y&&(this._outJobs.delete(o),this._processWork(),pr(y.abortHandle),this._post({type:sG,jobId:o}),l(Hi()))})),h={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,h),this._post({type:nG,jobId:o,methodName:e,abortable:s!=null},i,n)}))}createInvokeProxy(e){return ise(this,e)}on(e,i){const r=new MessageChannel;function s(n){i(n.data)}return this._port.postMessage({type:Qs.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),Ai((()=>{r.port1.postMessage({type:Qs.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)}))}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:oG,port:e.port2}),e.port1}_processWork(){var o,a;if(this._outJobs.size>=$xe)return;const e=((o=this._jobQueue)==null?void 0:o.pop())??((a=this._lowPriorityJobQueue)==null?void 0:a.pop());if(!e)return;const{methodName:i,data:r,invokeOptions:s,resolver:n}=e;this.apply(i,r,s).then((l=>n.resolve(l))).catch((l=>n.reject(l)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{pr(e.abortHandle),e.reject(Hi(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule((()=>this._processMessage(e,!0))):this._processMessage(e,!1)}_processMessage(e,i){const r=_S(e);if(r)switch(r.type){case pw:this._onResponseMessage(r);break;case nG:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case sG:this._onAbortMessage(r);break;case rG:this._onCloseMessage();break;case oG:this._onOpenPortMessage(r);break;case xxe:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Ya.clients.get(this)===e&&e.destroy(),Ya.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s=[],abortable:n}=e,o=n?new AbortController:null,a=this._inJobs;let l,c=this._client,h=c[i];try{if(!h&&i&&i.includes(".")){const y=i.split(".");for(let g=0;g<y.length-1;g++)c=c[y[g]],h=c[y[g+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:o?o.signal:null}),l=h.apply(c,s)}catch(y){return void this._post({type:pw,jobId:r,error:wS(y)})}Ku(l)?(a.set(r,{controller:o,promise:l}),l.then((y=>{a.has(r)&&(a.delete(r),this._post({type:pw,jobId:r},y))}),(y=>{a.has(r)&&(a.delete(r),Zs(y)||this._post({type:pw,jobId:r,error:wS(y||{message:`Error encountered at method ${i}`})}))}))):this._post({type:pw,jobId:r},l)}_onOpenPortMessage(e){new Ya(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,(n=>{i.postMessage(n)})),s=p1(e.port,"message",(n=>{const o=_S(n);(o==null?void 0:o.type)===Qs.CLOSE&&(s.remove(),r.remove(),i.close())}))}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs;if(!n.has(i))return;const o=n.get(i);n.delete(i),this._processWork(),pr(o.abortHandle),r?o.reject(te.fromJSON(JSON.parse(r))):o.resolve(s)}_post(e,i,r){return h7(this._port,e,i,r)}},Ya.kernelInfo={buildDate:sie,fullVersion:Gz,revision:nie},Ya.clients=new Map,Ya),Ixe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new bS,this._ongoingLowPriorityJobsQueue=new bS}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise(((r,s)=>{let n=!0;const o=a=>{ir(i.signal),n&&(n=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];Ku(l)?this._clientPromises[a]=l.then((c=>(this._clients[a]=new Gb(c,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a])),(()=>(o(s),null))):(this._clients[a]=new Gb(l,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}}))}broadcast(e,i,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then((a=>a==null?void 0:a.invoke(e,i,r)))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Hi(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Hi(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then((r=>r==null?void 0:r.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,gxe(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const s=_a();((r==null?void 0:r.priority)==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then((a=>a==null?void 0:a.jobAdded()))}return s.promise}createInvokeProxy(e){return ise(this,e)}on(e,i){return Promise.all(this._clientPromises).then((()=>D0(this._clients.map((r=>r.on(e,i))))))}openPorts(){return new Promise((e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then((n=>{n&&(i[s]=n.openPort()),--r===0&&e(i)}))}))}get test(){}};const Cxe={async request(t,e){var o,a;const i=t.options,r=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=g5(t.url))!=null&&o.after)?r:"array-buffer";const s=await ei(t.url,i),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((a=s.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},Txe={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let GI=new WeakMap,nse={};function Z4(t){var i;const e=t||nse;if(!GI.has(e)){const r=Bo(),s=(i=xz(r))==null?void 0:i.language,n=s&&Txe[s]||r;GI.set(e,new Intl.NumberFormat(n,t))}return GI.get(e)}function Dnt(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function E0(t,e){return Object.is(t,-0)&&(t=0),Z4(e).format(t)}function Nnt(t,e=Bo()){var r,s;if(!t)return null;let i=aG.get(e);if(!i){const n=Z4().formatToParts(12345.6),o=[...Z4({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map(((_,S)=>[_,S]))),l=new RegExp(`[${(r=n.find((_=>_.type==="group")))==null?void 0:r.value}]`,"g"),c=new RegExp(`[${(s=n.find((_=>_.type==="decimal")))==null?void 0:s.value}]`),h=new RegExp(`[${o.join("")}]`,"g"),y=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,g=/[-\u2212\u2013\u2014\u2015]/g;i=_=>{if((_=_.trim().replaceAll(l,"").replace(c,".").replace(h,(E=>String(a.get(E)))).replaceAll(y,"").replaceAll(g,"-"))==="")return null;const S=Number(_);return isNaN(S)?null:S},aG.set(e,i)}return i(t)}$z((()=>{GI=new WeakMap,nse={}}));const aG=new Map,ose=()=>be.getLogger("esri.intl.substitute");function I0(t,e,i={}){const{format:r={}}=i;return Hf(t,(s=>Mxe(s,e,r)))}function Mxe(t,e,i){let r,s;const n=t.indexOf(":");if(n===-1?r=t.trim():(r=t.slice(0,n).trim(),s=t.slice(n+1).trim()),!r)return"";const o=px(r,e);if(o==null)return"";const a=(s?i==null?void 0:i[s]:null)??(i==null?void 0:i[r]);return a?kxe(o,a):s?Pxe(o,s):d7(o)}function kxe(t,e){switch(e.type){case"date":return nl(t,e.intlOptions);case"number":return E0(t,e.intlOptions);default:return ose().warn("missing format descriptor for key {key}"),d7(t)}}function Pxe(t,e){switch(e.toLowerCase()){case"dateformat":return nl(t);case"numberformat":return E0(t);default:return ose().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?nl(t):/^numberformat/i.test(e)?E0(t):d7(t)}}function d7(t){switch(typeof t){case"string":return t;case"number":return E0(t);case"boolean":return""+t;default:return t instanceof Date?nl(t):""}}const ase={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Lxe(t){return t in ase}function lG(t){if(Lxe(t)){const e=ase[t];return e===!0?t:e}return null}const v2=[],gv=new Map;function cG(t){for(const e of gv.keys())cse(t.pattern,e)&&gv.delete(e)}function Rxe(t){return v2.includes(t)||(cG(t),v2.unshift(t)),Ai((()=>{const e=v2.indexOf(t);e>-1&&(v2.splice(e,1),cG(t))}))}async function Dk(t){const e=Bo();gv.has(t)||gv.set(t,Oxe(t,e));const i=gv.get(t);return i&&await Dxe.add(i),i}function lse(t){const e=xz(t);return e?lG(t)??lG(e.language):null}async function Oxe(t,e){const i=[];for(const r of v2)if(cse(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(s){i.push(s)}throw i.length?new te("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new te("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function cse(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}$z((()=>{gv.clear()}));const Dxe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=_a())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Nxe(t,e,i,r){const s=e.exec(i);if(!s)throw new te("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=lse(r),l=`${n}${o}.json`,c=a?`${n}${o}_${a}.json`:l;let h;try{h=await uG(t(c))}catch(y){if(c===l)throw new te("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:y});try{h=await uG(t(l))}catch(g){throw new te("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:g})}}return h}async function uG(t){if(hG.fetchBundleAsset!=null)return hG.fetchBundleAsset(t);const e=await ei(t,{responseType:"text"});return JSON.parse(e.data)}let Fxe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?n=>new URL(n,new URL(r,window.location.href)).href:r instanceof URL?n=>new URL(n,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return Nxe(this.getAssetUrl,this.matcher,e,i)}};function zxe(t){return new Fxe(t)}const hG={};Rxe(zxe({pattern:"esri/",location:er}));const dG={};function Bxe(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...dG.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=dG.baseUrl),e}let jxe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((i=>{this[i]=(...r)=>e[i](...r)}))}},HI=class{constructor(){this._dispatcher=new jxe,this._workerPostMessage({type:Qs.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){tT((()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){tT((()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))}))}async _workerMessageHandler(e){const i=_S(e);if(i&&i.type===Qs.OPEN){const{modulePath:r,jobId:s}=i;let n=await Gb.loadWorker(r);n||(n=await import(r));const o=Gb.connect(n);this._workerPostMessage({type:Qs.OPENED,jobId:s,data:o})}}};const Y4=()=>be.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Uxe}=Qs,Vxe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let N$,F$;const pG="Failed to create Worker. Fallback to execute module in main thread";async function Gxe(){if(!ce("esri-workers"))return fG(new HI);if(!N$&&!F$)try{const e=Vxe.split("{CONFIGURATION}").join(Hxe());N$=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){F$=e||{}}let t;if(N$)try{t=new Worker(N$,{name:"esri-worker-"+qxe++})}catch{Y4().warn(pG,F$),t=new HI}else Y4().warn(pG,F$),t=new HI;return fG(t)}async function fG(t){return new Promise((e=>{function i(s){const n=_S(s);n&&n.type===Uxe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(s){s.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),Y4().warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new HI).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)}))}function Hxe(){let t;if(li.default!=null){const s={...li};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(li));t.assetsPath=fa(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?fa(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Bo(),t.has={"esri-csp-restrictions":ce("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ce("esri-2d-update-debug"),"esri-2d-log-updating":ce("esri-2d-log-updating"),"featurelayer-pbf":ce("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ce("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ce("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ce("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ce("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ce("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":ce("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":ce("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":ce("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":ce("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":ce("featurelayer-snapshot-enabled"),"esri-atomics":ce("esri-atomics"),"esri-shared-array-buffer":ce("esri-shared-array-buffer"),"esri-tiles-debug":ce("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ce("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ce("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=fa(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=fa(t.workers.workerPath):t.workers.workerPath=fa(er("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=li.workers.loaderConfig,i=Bxe({baseUrl:e==null?void 0:e.baseUrl,locale:Bo(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:sie,fullVersion:Gz,revision:nie}})}let qxe=0;const{ABORT:AG,INVOKE:Wxe,OPEN:Qxe,OPENED:Jxe,RESPONSE:fw}=Qs;let Zxe=class use{static async create(e){const i=await Gxe();return new use(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(r=>{r.preventDefault(),be.getLogger("esri.core.workers.WorkerOwner").error(r)}))}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,s=sse();return new Promise(((n,o)=>{const a={resolve:n,reject:o,abortHandle:tz(r,(()=>{this._outJobs.delete(s),this._post({type:AG,jobId:s})}))};this._outJobs.set(s,a),this._post({type:Qxe,jobId:s,modulePath:e})}))}_onMessage(e){const i=_S(e);if(i)switch(i.type){case Jxe:this._onOpenedMessage(i);break;case fw:this._onResponseMessage(i);break;case AG:this._onAbortMessage(i);break;case Wxe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s,abortable:n}=e,o=n?new AbortController:null,a=this._inJobs,l=Cxe[i];let c;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);c=l.call(null,s,{signal:o?o.signal:null})}catch(h){return void this._post({type:fw,jobId:r,error:wS(h)})}Ku(c)?(a.set(r,{controller:o,promise:c}),c.then((h=>{a.has(r)&&(a.delete(r),this._post({type:fw,jobId:r},h))}),(h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),Zs(h)||this._post({type:fw,jobId:r,error:wS(h||{message:`Error encountered at method ${i}`})}))}))):this._post({type:fw,jobId:r},c)}_onOpenedMessage(e){const{jobId:i,data:r}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),pr(s.abortHandle),s.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),pr(n.abortHandle),r?n.reject(te.fromJSON(JSON.parse(r))):n.resolve(s))}_post(e,i,r){return h7(this.worker,e,i,r)}};const mG=ce("host-browser")?Math.min(navigator.hardwareConcurrency-1,ce("workers-pool-size")??8):0;let Pm=ce("esri-mobile")?Math.min(mG,3):mG;Pm||(Pm=ce("safari")&&ce("mac")?7:2);let yG=0;const qI=[];function Yxe(){hse()}async function z$(t,e){const i=new Ixe,{registryTarget:r,...s}=e;return await i.open(t,s),r&&yxe(r,i),i}async function Xxe(t,e={}){if(typeof t!="string")throw new te("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ce("host-webworker")&&!ce("esri-workers")&&(i="local"),i==="local"){let r=await Gb.loadWorker(t);r||(r=await import(t)),ir(e.signal);const s=e.client||r;return z$([Gb.connect(r,e.schedule)],{...e,client:s})}if(await hse(),ir(e.signal),i==="dedicated"){const r=yG++%Pm;return z$([await qI[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Pm);if(r<Pm){const s=new Array(r);for(let n=0;n<r;++n){const o=yG++%Pm;s[n]=qI[o].open(t,e)}return z$(s,e)}}return z$(qI.map((r=>r.open(t,e))),e)}let B$=null;async function hse(){if(B$)return B$;new AbortController;const t=[];for(let e=0;e<Pm;e++){const i=Zxe.create(e).then((r=>(qI[e]=r,r)));t.push(i)}return B$=Promise.all(t),B$}function gG(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const s of r)s.length>2&&(s[2]*=i)}function Kxe(t,e,i){if(!t&&!e||!i)return;const r=PT(i);vG(t,i,r),vG(e,i,r)}function vG(t,e,i){if(t)for(const r of t)e$e(r.geometry,e,i)}function e$e(t,e,i){if(!(t!=null&&t.spatialReference)||Ts(t.spatialReference,e))return;const r=PT(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)gG(t,t.rings,r);else if("paths"in t)gG(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const s of t.points)s.length>2&&(s[2]*=r)}}function dse(t,e,i){if(e==null||i==null||i.vcsWkid||Ts(e,i)||Of(e)||Of(i))return null;const r=PT(e)/PT(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>t$e(s,r);case"polyline":case"esriGeometryPolyline":return s=>r$e(s,r);case"polygon":case"esriGeometryPolygon":return s=>i$e(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>s$e(s,r);case"extent":case"esriGeometryEnvelope":return s=>n$e(s,r);default:return null}}function t$e(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function i$e(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function r$e(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function s$e(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function n$e(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}function bG(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=dse(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const s of i.features)r(s.geometry)}const p7=new Ot({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var X4;const o$e=new Ot({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var qv;let Vs=(qv=class extends pe{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?o$e.fromJSON(r.fieldValueType):null}clone(){var e;return new X4({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},X4=qv,qv);u([A({type:String,json:{write:!0}})],Vs.prototype,"alias",void 0),u([A({type:[String,Number],json:{write:{allowNull:!0}}})],Vs.prototype,"defaultValue",void 0),u([A()],Vs.prototype,"description",void 0),u([Me("description")],Vs.prototype,"readDescription",null),u([A({types:qre,json:{read:{reader:Ok},write:!0}})],Vs.prototype,"domain",void 0),u([A({type:Boolean,json:{write:!0}})],Vs.prototype,"editable",void 0),u([A({type:Kt,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Vs.prototype,"length",void 0),u([A({type:String,json:{write:!0}})],Vs.prototype,"name",void 0),u([A({type:Boolean,json:{write:!0}})],Vs.prototype,"nullable",void 0),u([it(p7)],Vs.prototype,"type",void 0),u([A()],Vs.prototype,"valueType",void 0),u([Me("valueType",["description"])],Vs.prototype,"readValueType",null),u([A({type:Boolean,json:{read:!1}})],Vs.prototype,"visible",void 0),Vs=X4=u([B("esri.layers.support.Field")],Vs);var K4;const eN=new Ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ss=K4=class extends pe{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,Qi)}writeGeometryType(t,e,i,r){if(t)return void eN.write(t,e,i,r);const{features:s}=this;if(s){for(const n of s)if((n==null?void 0:n.geometry)!=null)return void eN.write(n.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Ju(t);return r&&!i&&e.spatialReference&&(r.spatialReference=We.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new K4(this.cloneProperties())}cloneProperties(){return ie({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const s=t==null?void 0:t[i];r.geometry=(s==null?void 0:s.toJSON())||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,s]}=t,n=c=>Math.round((c-r)/e),o=c=>Math.round((s-c)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,n,o);for(let c=0,h=a.length;c<h;c++)l!=null&&l(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=t,this}unquantize(){var g,_;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[n,o]}=i,a=S=>S*n+r,l=S=>s-S*o;let c=null,h=null;if(this.hasZ&&((g=i==null?void 0:i.scale)==null?void 0:g[2])!=null){const{translate:[,,S],scale:[,,E]}=i;c=C=>C*E+S}if(this.hasM&&((_=i==null?void 0:i.scale)==null?void 0:_[3])!=null){const{translate:[,,,S],scale:[,,,E]}=i;h=C=>C==null?C:C*E+S}const y=this._getHydrationFunction(t,a,l,c,h);for(const{geometry:S}of e)S!=null&&y&&y(S);return this.transform=null,this}readFeaturesWithClass(t,e,i){var n;const r=We.fromJSON(e.spatialReference),s=[];for(let o=0;o<t.length;o++){const a=t[o],l=i.fromJSON(a),c=(n=a.geometry)==null?void 0:n.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=r);const h=a.aggregateGeometries,y=l.aggregateGeometries;if(h&&y!=null)for(const g in y){const _=y[g],S=h[g],E=S==null?void 0:S.spatialReference;_==null||E||(_.spatialReference=r)}s.push(l)}return s}_quantizePoints(t,e,i){let r,s;const n=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const c=e(l[0]),h=i(l[1]);c===r&&h===s||(n.push([c-r,h-s]),r=c,s=h)}else r=e(l[0]),s=i(l[1]),n.push([r,s])}return n.length>0?n:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const s=Hr(r)?r.rings:r.paths,n=[];for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._quantizePoints(l,e,i);c&&n.push(c)}return n.length>0?(Hr(r)?r.rings=n:r.paths=n,r):null}:t==="multipoint"?r=>{const s=this._quantizePoints(r.points,e,i);return s&&s.length>0?(r.points=s,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,s){return t==="point"?n=>{n.x=e(n.x),n.y=i(n.y),r&&(n.z=r(n.z))}:t==="polyline"||t==="polygon"?n=>{const o=Hr(n)?n.rings:n.paths;let a,l;for(let c=0,h=o.length;c<h;c++){const y=o[c];for(let g=0,_=y.length;g<_;g++){const S=y[g];g>0?(a+=S[0],l+=S[1]):(a=S[0],l=S[1]),S[0]=e(a),S[1]=i(l)}}if(r&&s)for(let c=0,h=o.length;c<h;c++){const y=o[c];for(let g=0,_=y.length;g<_;g++){const S=y[g];S[2]=r(S[2]),S[3]=s(S[3])}}else if(r)for(let c=0,h=o.length;c<h;c++){const y=o[c];for(let g=0,_=y.length;g<_;g++){const S=y[g];S[2]=r(S[2])}}else if(s)for(let c=0,h=o.length;c<h;c++){const y=o[c];for(let g=0,_=y.length;g<_;g++){const S=y[g];S[2]=s(S[2])}}}:t==="extent"?n=>{n.xmin=e(n.xmin),n.ymin=i(n.ymin),n.xmax=e(n.xmax),n.ymax=i(n.ymax),r&&n.zmax!=null&&n.zmin!=null&&(n.zmax=r(n.zmax),n.zmin=r(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:t==="multipoint"?n=>{const o=n.points;let a,l;for(let c=0,h=o.length;c<h;c++){const y=o[c];c>0?(a+=y[0],l+=y[1]):(a=y[0],l=y[1]),y[0]=e(a),y[1]=i(l)}if(r&&s)for(let c=0,h=o.length;c<h;c++){const y=o[c];y[2]=r(y[2]),y[3]=s(y[3])}else if(r)for(let c=0,h=o.length;c<h;c++){const y=o[c];y[2]=r(y[2])}else if(s)for(let c=0,h=o.length;c<h;c++){const y=o[c];y[2]=s(y[2])}}:null}};u([A({type:String,json:{write:!0}})],Ss.prototype,"displayFieldName",void 0),u([A({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ss.prototype,"exceededTransferLimit",void 0),u([A({type:[Qi],json:{write:!0}})],Ss.prototype,"features",void 0),u([Me("features")],Ss.prototype,"readFeatures",null),u([A({type:[Vs],json:{write:!0}})],Ss.prototype,"fields",void 0),u([A({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:eN.read}}})],Ss.prototype,"geometryType",void 0),u([Ne("geometryType")],Ss.prototype,"writeGeometryType",null),u([A({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ss.prototype,"hasM",void 0),u([A({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ss.prototype,"hasZ",void 0),u([A({types:E1,json:{write:!0}})],Ss.prototype,"queryGeometry",void 0),u([Me("queryGeometry")],Ss.prototype,"readQueryGeometry",null),u([A({type:We,json:{write:!0}})],Ss.prototype,"spatialReference",void 0),u([Ne("spatialReference")],Ss.prototype,"writeSpatialReference",null),u([A({json:{write:!0}})],Ss.prototype,"transform",void 0),Ss=K4=u([B("esri.rest.support.FeatureSet")],Ss),Ss.prototype.toJSON.isDefaultToJSON=!0;let a$e=0,Hh=class extends Fn.LoadableMixin(Mu.EsriPromiseMixin(qe)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then((()=>this._applyEdits(e)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);bG(e,this.layer.spatialReference,r);const s=Ss.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return s;const n=this.layer.objectIdField;for(const o of s.features){const a=o.attributes[n],l=this._idToClientGeometry.get(a);l!==void 0&&(o.geometry=l)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new te("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return bG(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then((()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i)))}queryObjectIds(e,i={}){return this.load(i).then((()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i)))}queryExtent(e,i={}){return this.load(i).then((()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i))).then((r=>({count:r.count,extent:Rt.fromJSON(r.extent)})))}querySnapping(e,i={}){return this.load(i).then((()=>this._connection.invoke("querySnapping",e,i)))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e==null?void 0:e.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new te("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const y=o(h);y!=null&&s.push(y)}const a=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(n.push(this._serializeFeature(h)),a&&h.geometry!=null){const y=o(h);y!=null&&a.set(y,h)}}Kxe(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:s});return this.fullExtent=l,r&&r.finish(c.uidToObjectId),this._updateIdToClientGeometries(a,c),this._createEditsResult(c)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:s}of e)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const s=e.get(r.objectId);s!=null&&this._addIdToClientGeometry(s)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new te("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let s=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);s||a.geometry==null||(s=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const n=this;return{features:r,inferredGeometryType:s,finish(o){const a=n.sourceJSON.objectIdField;for(const l in o){const c=o[l],h=i.get(l);h&&(h.attributes||(h.attributes={}),c===-1?delete h.attributes[a]:h.attributes[a]=c,n._addIdToClientGeometry(h))}}}}_addIdToClientGeometry(e){var s;if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=(s=e.attributes)==null?void 0:s[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),s=(a$e++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:i}:{uid:s,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?zi.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await Xxe("MemorySourceWorker",{strategy:ce("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:s,hasM:n,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",(S=>{be.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),S.preventDefault()})));const y={features:h.features,fields:i==null?void 0:i.map((S=>S.toJSON())),geometryType:TV.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:c?null:r&&r.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:l},g=await this._connection.invoke("load",y,{signal:e});for(const S of g.warnings)be.getLogger(this.layer).warn("#load()",`${S.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:S});g.featureErrors.length&&be.getLogger(this.layer).warn("#load()",`Encountered ${g.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:g.featureErrors});const _=g.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(_.geometryType=TV.toJSON(h.inferredGeometryType)),this.sourceJSON=_,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),h.finish(g.assignedObjectIds)}};u([hz({Type:Qi,ensureType:fr(Qi)})],Hh.prototype,"itemType",void 0),u([A()],Hh.prototype,"type",void 0),u([A({constructOnly:!0})],Hh.prototype,"layer",void 0),u([A({readOnly:!0})],Hh.prototype,"_workerGeometryType",null),u([A()],Hh.prototype,"sourceJSON",void 0),Hh=u([B("esri.layers.graphics.sources.MemorySource")],Hh);function l$e(t){return"portalItem"in t}const c$e=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):l$e(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([A({type:String})],e.prototype,"apiKey",null),e=u([B("esri.layers.mixins.APIKeyMixin")],e),e},u$e=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Wu(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Cwe(i,be.getLogger(this)))}};return u([A()],e.prototype,"title",null),u([A({type:String})],e.prototype,"url",null),e=u([B("esri.layers.mixins.ArcGISService")],e),e};function Nk(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function h$e(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function d$e(t,e,i,r,s,n,o,a,l,c,h,y,g,_,S,E){const C=new Float32Array(16);return C[0]=t,C[1]=e,C[2]=i,C[3]=r,C[4]=s,C[5]=n,C[6]=o,C[7]=a,C[8]=l,C[9]=c,C[10]=h,C[11]=y,C[12]=g,C[13]=_,C[14]=S,C[15]=E,C}const p$e=Nk();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:p$e,clone:h$e,create:Nk,fromValues:d$e},Symbol.toStringTag,{value:"Module"}));let f7=1e-6;function uo(){return f7}function f$e(t){f7=t}const Fk=Math.random,A$e=Math.PI/180,m$e=180/Math.PI;function A7(t){return t*A$e}function y$e(t){return t*m$e}function g$e(t,e){return Math.abs(t-e)<=f7*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Fk,equals:g$e,getEpsilon:uo,setEpsilon:f$e,toDegree:y$e,toRadian:A7},Symbol.toStringTag,{value:"Module"}));function pse(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Qf(t,e,i,r,s,n,o,a,l,c,h,y,g,_,S,E,C){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=h,t[10]=y,t[11]=g,t[12]=_,t[13]=S,t[14]=E,t[15]=C,t}function zk(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Jf(t,e){if(t===e){const i=e[1],r=e[2],s=e[3],n=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=n,t[11]=e[14],t[12]=s,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function v$e(t,e){return fse(t,e)||zk(t),t}function fse(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],y=e[9],g=e[10],_=e[11],S=e[12],E=e[13],C=e[14],M=e[15],P=i*a-r*o,D=i*l-s*o,F=i*c-n*o,U=r*l-s*a,G=r*c-n*a,Q=s*c-n*l,W=h*E-y*S,X=h*C-g*S,K=h*M-_*S,de=y*C-g*E,ye=y*M-_*E,xe=g*M-_*C;let ee=P*xe-D*ye+F*de+U*K-G*X+Q*W;return ee?(ee=1/ee,t[0]=(a*xe-l*ye+c*de)*ee,t[1]=(s*ye-r*xe-n*de)*ee,t[2]=(E*Q-C*G+M*U)*ee,t[3]=(g*G-y*Q-_*U)*ee,t[4]=(l*K-o*xe-c*X)*ee,t[5]=(i*xe-s*K+n*X)*ee,t[6]=(C*F-S*Q-M*D)*ee,t[7]=(h*Q-g*F+_*D)*ee,t[8]=(o*ye-a*K+c*W)*ee,t[9]=(r*K-i*ye-n*W)*ee,t[10]=(S*G-E*F+M*P)*ee,t[11]=(y*F-h*G-_*P)*ee,t[12]=(a*X-o*de-l*W)*ee,t[13]=(i*de-r*X+s*W)*ee,t[14]=(E*D-S*U-C*P)*ee,t[15]=(h*U-y*D+g*P)*ee,t):null}function b$e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],y=e[9],g=e[10],_=e[11],S=e[12],E=e[13],C=e[14],M=e[15];return t[0]=a*(g*M-_*C)-y*(l*M-c*C)+E*(l*_-c*g),t[1]=-(r*(g*M-_*C)-y*(s*M-n*C)+E*(s*_-n*g)),t[2]=r*(l*M-c*C)-a*(s*M-n*C)+E*(s*c-n*l),t[3]=-(r*(l*_-c*g)-a*(s*_-n*g)+y*(s*c-n*l)),t[4]=-(o*(g*M-_*C)-h*(l*M-c*C)+S*(l*_-c*g)),t[5]=i*(g*M-_*C)-h*(s*M-n*C)+S*(s*_-n*g),t[6]=-(i*(l*M-c*C)-o*(s*M-n*C)+S*(s*c-n*l)),t[7]=i*(l*_-c*g)-o*(s*_-n*g)+h*(s*c-n*l),t[8]=o*(y*M-_*E)-h*(a*M-c*E)+S*(a*_-c*y),t[9]=-(i*(y*M-_*E)-h*(r*M-n*E)+S*(r*_-n*y)),t[10]=i*(a*M-c*E)-o*(r*M-n*E)+S*(r*c-n*a),t[11]=-(i*(a*_-c*y)-o*(r*_-n*y)+h*(r*c-n*a)),t[12]=-(o*(y*C-g*E)-h*(a*C-l*E)+S*(a*g-l*y)),t[13]=i*(y*C-g*E)-h*(r*C-s*E)+S*(r*g-s*y),t[14]=-(i*(a*C-l*E)-o*(r*C-s*E)+S*(r*l-s*a)),t[15]=i*(a*g-l*y)-o*(r*g-s*y)+h*(r*l-s*a),t}function w$e(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],y=t[10],g=t[11],_=t[12],S=t[13],E=t[14],C=t[15];return(e*o-i*n)*(y*C-g*E)-(e*a-r*n)*(h*C-g*S)+(e*l-s*n)*(h*E-y*S)+(i*a-r*o)*(c*C-g*_)-(i*l-s*o)*(c*E-y*_)+(r*l-s*a)*(c*S-h*_)}function Ase(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],y=e[8],g=e[9],_=e[10],S=e[11],E=e[12],C=e[13],M=e[14],P=e[15];let D=i[0],F=i[1],U=i[2],G=i[3];return t[0]=D*r+F*a+U*y+G*E,t[1]=D*s+F*l+U*g+G*C,t[2]=D*n+F*c+U*_+G*M,t[3]=D*o+F*h+U*S+G*P,D=i[4],F=i[5],U=i[6],G=i[7],t[4]=D*r+F*a+U*y+G*E,t[5]=D*s+F*l+U*g+G*C,t[6]=D*n+F*c+U*_+G*M,t[7]=D*o+F*h+U*S+G*P,D=i[8],F=i[9],U=i[10],G=i[11],t[8]=D*r+F*a+U*y+G*E,t[9]=D*s+F*l+U*g+G*C,t[10]=D*n+F*c+U*_+G*M,t[11]=D*o+F*h+U*S+G*P,D=i[12],F=i[13],U=i[14],G=i[15],t[12]=D*r+F*a+U*y+G*E,t[13]=D*s+F*l+U*g+G*C,t[14]=D*n+F*c+U*_+G*M,t[15]=D*o+F*h+U*S+G*P,t}function _$e(t,e,i){const r=i[0],s=i[1],n=i[2];if(e===t)t[12]=e[0]*r+e[4]*s+e[8]*n+e[12],t[13]=e[1]*r+e[5]*s+e[9]*n+e[13],t[14]=e[2]*r+e[6]*s+e[10]*n+e[14],t[15]=e[3]*r+e[7]*s+e[11]*n+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],h=e[4],y=e[5],g=e[6],_=e[7],S=e[8],E=e[9],C=e[10],M=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=h,t[5]=y,t[6]=g,t[7]=_,t[8]=S,t[9]=E,t[10]=C,t[11]=M,t[12]=o*r+h*s+S*n+e[12],t[13]=a*r+y*s+E*n+e[13],t[14]=l*r+g*s+C*n+e[14],t[15]=c*r+_*s+M*n+e[15]}return t}function S$e(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function x$e(t,e,i,r){let s=r[0],n=r[1],o=r[2],a=Math.sqrt(s*s+n*n+o*o);if(a<=uo())return void pse(t,e);a=1/a,s*=a,n*=a,o*=a;const l=Math.sin(i),c=Math.cos(i),h=1-c,y=e[0],g=e[1],_=e[2],S=e[3],E=e[4],C=e[5],M=e[6],P=e[7],D=e[8],F=e[9],U=e[10],G=e[11],Q=s*s*h+c,W=n*s*h+o*l,X=o*s*h-n*l,K=s*n*h-o*l,de=n*n*h+c,ye=o*n*h+s*l,xe=s*o*h+n*l,ee=n*o*h-s*l,le=o*o*h+c;t[0]=y*Q+E*W+D*X,t[1]=g*Q+C*W+F*X,t[2]=_*Q+M*W+U*X,t[3]=S*Q+P*W+G*X,t[4]=y*K+E*de+D*ye,t[5]=g*K+C*de+F*ye,t[6]=_*K+M*de+U*ye,t[7]=S*K+P*de+G*ye,t[8]=y*xe+E*ee+D*le,t[9]=g*xe+C*ee+F*le,t[10]=_*xe+M*ee+U*le,t[11]=S*xe+P*ee+G*le,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function $$e(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],y=e[10],g=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*s+c*r,t[5]=o*s+h*r,t[6]=a*s+y*r,t[7]=l*s+g*r,t[8]=c*s-n*r,t[9]=h*s-o*r,t[10]=y*s-a*r,t[11]=g*s-l*r,t}function E$e(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],l=e[3],c=e[8],h=e[9],y=e[10],g=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s-c*r,t[1]=o*s-h*r,t[2]=a*s-y*r,t[3]=l*s-g*r,t[8]=n*r+c*s,t[9]=o*r+h*s,t[10]=a*r+y*s,t[11]=l*r+g*s,t}function I$e(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],l=e[3],c=e[4],h=e[5],y=e[6],g=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s+c*r,t[1]=o*s+h*r,t[2]=a*s+y*r,t[3]=l*s+g*r,t[4]=c*s-n*r,t[5]=h*s-o*r,t[6]=y*s-a*r,t[7]=g*s-l*r,t}function C$e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function T$e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M$e(t,e,i){if(e===0)return zk(t);let r=i[0],s=i[1],n=i[2],o=Math.sqrt(r*r+s*s+n*n);if(o<=uo())return null;o=1/o,r*=o,s*=o,n*=o;const a=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=s*r*c+n*a,t[2]=n*r*c-s*a,t[3]=0,t[4]=r*s*c-n*a,t[5]=s*s*c+l,t[6]=n*s*c+r*a,t[7]=0,t[8]=r*n*c+s*a,t[9]=s*n*c-r*a,t[10]=n*n*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function k$e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P$e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L$e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mse(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=r+r,l=s+s,c=n+n,h=r*a,y=r*l,g=r*c,_=s*l,S=s*c,E=n*c,C=o*a,M=o*l,P=o*c;return t[0]=1-(_+E),t[1]=y+P,t[2]=g-M,t[3]=0,t[4]=y-P,t[5]=1-(h+E),t[6]=S+C,t[7]=0,t[8]=g+M,t[9]=S-C,t[10]=1-(h+_),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function R$e(t,e){const i=O$e,r=-e[0],s=-e[1],n=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],y=r*r+s*s+n*n+o*o;return y>0?(i[0]=2*(a*o+h*r+l*n-c*s)/y,i[1]=2*(l*o+h*s+c*r-a*n)/y,i[2]=2*(c*o+h*n+a*s-l*r)/y):(i[0]=2*(a*o+h*r+l*n-c*s),i[1]=2*(l*o+h*s+c*r-a*n),i[2]=2*(c*o+h*n+a*s-l*r)),mse(t,e,i),t}const O$e=Wf();function D$e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function N$e(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.sqrt(i*i+r*r+s*s),t[1]=Math.sqrt(n*n+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+h*h),t}function F$e(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function z$e(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=e[3],l=s+s,c=n+n,h=o+o,y=s*l,g=s*c,_=s*h,S=n*c,E=n*h,C=o*h,M=a*l,P=a*c,D=a*h,F=r[0],U=r[1],G=r[2];return t[0]=(1-(S+C))*F,t[1]=(g+D)*F,t[2]=(_-P)*F,t[3]=0,t[4]=(g-D)*U,t[5]=(1-(y+C))*U,t[6]=(E+M)*U,t[7]=0,t[8]=(_+P)*G,t[9]=(E-M)*G,t[10]=(1-(y+S))*G,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function B$e(t,e,i,r,s){const n=e[0],o=e[1],a=e[2],l=e[3],c=n+n,h=o+o,y=a+a,g=n*c,_=n*h,S=n*y,E=o*h,C=o*y,M=a*y,P=l*c,D=l*h,F=l*y,U=r[0],G=r[1],Q=r[2],W=s[0],X=s[1],K=s[2],de=(1-(E+M))*U,ye=(_+F)*U,xe=(S-D)*U,ee=(_-F)*G,le=(1-(g+M))*G,Te=(C+P)*G,ke=(S+D)*Q,De=(C-P)*Q,Ke=(1-(g+E))*Q;return t[0]=de,t[1]=ye,t[2]=xe,t[3]=0,t[4]=ee,t[5]=le,t[6]=Te,t[7]=0,t[8]=ke,t[9]=De,t[10]=Ke,t[11]=0,t[12]=i[0]+W-(de*W+ee*X+ke*K),t[13]=i[1]+X-(ye*W+le*X+De*K),t[14]=i[2]+K-(xe*W+Te*X+Ke*K),t[15]=1,t}function j$e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,l=s+s,c=i*o,h=r*o,y=r*a,g=s*o,_=s*a,S=s*l,E=n*o,C=n*a,M=n*l;return t[0]=1-y-S,t[1]=h+M,t[2]=g-C,t[3]=0,t[4]=h-M,t[5]=1-c-S,t[6]=_+E,t[7]=0,t[8]=g+C,t[9]=_-E,t[10]=1-c-y,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U$e(t,e,i,r,s,n,o){const a=1/(i-e),l=1/(s-r),c=1/(n-o);return t[0]=2*n*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(s+r)*l,t[10]=(o+n)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n*2*c,t[15]=0,t}function V$e(t,e,i,r,s){const n=1/Math.tan(e/2);let o;return t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(r-s),t[10]=(s+r)*o,t[14]=2*s*r*o):(t[10]=-1,t[14]=-2*r),t}function G$e(t,e,i,r){const s=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(s+n);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(s-n)*c*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function H$e(t,e,i,r,s,n,o){const a=1/(e-i),l=1/(r-s),c=1/(n-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(s+r)*l,t[14]=(o+n)*c,t[15]=1,t}function q$e(t,e,i,r){const s=e[0],n=e[1],o=e[2];let a=s-i[0],l=n-i[1],c=o-i[2];const h=uo();if(Math.abs(a)<h&&Math.abs(l)<h&&Math.abs(c)<h)return void zk(t);let y=1/Math.sqrt(a*a+l*l+c*c);a*=y,l*=y,c*=y;const g=r[0],_=r[1],S=r[2];let E=_*c-S*l,C=S*a-g*c,M=g*l-_*a;y=Math.sqrt(E*E+C*C+M*M),y?(y=1/y,E*=y,C*=y,M*=y):(E=0,C=0,M=0);let P=l*M-c*C,D=c*E-a*M,F=a*C-l*E;y=Math.sqrt(P*P+D*D+F*F),y?(y=1/y,P*=y,D*=y,F*=y):(P=0,D=0,F=0),t[0]=E,t[1]=P,t[2]=a,t[3]=0,t[4]=C,t[5]=D,t[6]=l,t[7]=0,t[8]=M,t[9]=F,t[10]=c,t[11]=0,t[12]=-(E*s+C*n+M*o),t[13]=-(P*s+D*n+F*o),t[14]=-(a*s+l*n+c*o),t[15]=1}function W$e(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let h=s-i[0],y=n-i[1],g=o-i[2],_=h*h+y*y+g*g;_>0&&(_=1/Math.sqrt(_),h*=_,y*=_,g*=_);let S=l*g-c*y,E=c*h-a*g,C=a*y-l*h;return _=S*S+E*E+C*C,_>0&&(_=1/Math.sqrt(_),S*=_,E*=_,C*=_),t[0]=S,t[1]=E,t[2]=C,t[3]=0,t[4]=y*C-g*E,t[5]=g*S-h*C,t[6]=h*E-y*S,t[7]=0,t[8]=h,t[9]=y,t[10]=g,t[11]=0,t[12]=s,t[13]=n,t[14]=o,t[15]=1,t}function Q$e(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function J$e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function Z$e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function yse(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function Y$e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function X$e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function K$e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function eEe(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],y=t[9],g=t[10],_=t[11],S=t[12],E=t[13],C=t[14],M=t[15],P=e[0],D=e[1],F=e[2],U=e[3],G=e[4],Q=e[5],W=e[6],X=e[7],K=e[8],de=e[9],ye=e[10],xe=e[11],ee=e[12],le=e[13],Te=e[14],ke=e[15],De=uo();return Math.abs(i-P)<=De*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(r-D)<=De*Math.max(1,Math.abs(r),Math.abs(D))&&Math.abs(s-F)<=De*Math.max(1,Math.abs(s),Math.abs(F))&&Math.abs(n-U)<=De*Math.max(1,Math.abs(n),Math.abs(U))&&Math.abs(o-G)<=De*Math.max(1,Math.abs(o),Math.abs(G))&&Math.abs(a-Q)<=De*Math.max(1,Math.abs(a),Math.abs(Q))&&Math.abs(l-W)<=De*Math.max(1,Math.abs(l),Math.abs(W))&&Math.abs(c-X)<=De*Math.max(1,Math.abs(c),Math.abs(X))&&Math.abs(h-K)<=De*Math.max(1,Math.abs(h),Math.abs(K))&&Math.abs(y-de)<=De*Math.max(1,Math.abs(y),Math.abs(de))&&Math.abs(g-ye)<=De*Math.max(1,Math.abs(g),Math.abs(ye))&&Math.abs(_-xe)<=De*Math.max(1,Math.abs(_),Math.abs(xe))&&Math.abs(S-ee)<=De*Math.max(1,Math.abs(S),Math.abs(ee))&&Math.abs(E-le)<=De*Math.max(1,Math.abs(E),Math.abs(le))&&Math.abs(C-Te)<=De*Math.max(1,Math.abs(C),Math.abs(Te))&&Math.abs(M-ke)<=De*Math.max(1,Math.abs(M),Math.abs(ke))}function tEe(t){const e=uo(),i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return Math.abs(1-(i*i+n*n+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(s*s+a*a+h*h))<=e}function iEe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const rEe=Ase,sEe=yse;Object.freeze(Object.defineProperty({__proto__:null,add:Z$e,adjoint:b$e,copy:pse,determinant:w$e,equals:eEe,exactEquals:K$e,frob:J$e,fromQuat:j$e,fromQuat2:R$e,fromRotation:M$e,fromRotationTranslation:mse,fromRotationTranslationScale:z$e,fromRotationTranslationScaleOrigin:B$e,fromScaling:T$e,fromTranslation:C$e,fromXRotation:k$e,fromYRotation:P$e,fromZRotation:L$e,frustum:U$e,getRotation:F$e,getScale:N$e,getTranslation:D$e,hasIdentityRotation:iEe,identity:zk,invert:fse,invertOrIdentity:v$e,isOrthoNormal:tEe,lookAt:q$e,mul:rEe,multiply:Ase,multiplyScalar:Y$e,multiplyScalarAndAdd:X$e,ortho:H$e,perspective:V$e,perspectiveFromFieldOfView:G$e,rotate:x$e,rotateX:$$e,rotateY:E$e,rotateZ:I$e,scale:S$e,set:Qf,str:Q$e,sub:sEe,subtract:yse,targetTo:W$e,translate:_$e,transpose:Jf},Symbol.toStringTag,{value:"Module"}));const nEe=(t,e)=>{const i=Qf(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Jf(i,i)},oEe=(t,e)=>{const i=Qf(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Jf(i,i)},aEe=(t,e)=>{const i=1-e,r=Qf(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Jf(r,r)},lEe=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),s=Qf(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Jf(s,s)},cEe=(t,e)=>{const i=1-2*e,r=Qf(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Jf(r,r)},uEe=(t,e)=>{const i=Qf(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Jf(i,i)},hEe=(t,e)=>{const i=1-e,r=Qf(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Jf(r,r)};let gse=class vse{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=Oo(e.strength,i.strength,r),this.radius=Oo(e.radius,i.radius,r),this.threshold=Oo(e.threshold,i.threshold,r)}clone(){return new vse(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:S_(this.radius),strength:this.strength,threshold:this.threshold}}},bse=class wse{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(Oo(e.radius,i.radius,r))}clone(){return new wse(this.radius)}toJSON(){return{type:"blur",radius:S_(this.radius)}}},tN=class _se{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=Oo(e.amount,i.amount,r),this._updateMatrix()}clone(){return new _se(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||Nk();switch(this.type){case"brightness":this._colorMatrix=nEe(e,this.amount);break;case"contrast":this._colorMatrix=oEe(e,this.amount);break;case"grayscale":this._colorMatrix=aEe(e,this.amount);break;case"invert":this._colorMatrix=cEe(e,this.amount);break;case"saturate":this._colorMatrix=uEe(e,this.amount);break;case"sepia":this._colorMatrix=hEe(e,this.amount)}}},Sse=class xse{constructor(e,i,r,s){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=Oo(e.offsetX,i.offsetX,r),this.offsetY=Oo(e.offsetY,i.offsetY,r),this.blurRadius=Oo(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Oo(e.color[0],i.color[0],r)),this.color[1]=Math.round(Oo(e.color[1],i.color[1],r)),this.color[2]=Math.round(Oo(e.color[2],i.color[2],r)),this.color[3]=Oo(e.color[3],i.color[3],r)}clone(){return new xse(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:S_(this.offsetX),yoffset:S_(this.offsetY),blurRadius:S_(this.blurRadius),color:e}}},$se=class Ese{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=Oo(e.angle,i.angle,r),this._updateMatrix()}clone(){return new Ese(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||Nk();this._colorMatrix=lEe(e,this.angle)}},Ise=class Cse{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=Oo(e.amount,i.amount,r)}clone(){return new Cse(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Oo(t,e,i){return t+(e-t)*i}function S_(t){return Math.round(1e3*Ei(t))/1e3}function dEe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new tN(t.type,0);case"saturate":case"brightness":case"contrast":return new tN(t.type,1);case"opacity":return new Ise(1);case"hue-rotate":return new $se(0);case"blur":return new bse(0);case"drop-shadow":return new Sse(0,0,0,[...Tz("transparent")]);case"bloom":return new gse(0,0,1)}}function Tse(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every(((r,s)=>r.type===i[s].type))}function Mse(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let s=r.length;s<i.length;s++)r.push(dEe(i[s]))}function pEe(t){const e=t[0];return!!e&&"type"in e}let wG=class extends SyntaxError{constructor(e,i,r,s){super(e),this.expected=i,this.found=r,this.location=s,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const s=e.find((l=>l.source===this.location.source));s&&(r=s.text.split(/\r\n|\n|\r/g));const n=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,a=this.location.source+":"+o.line+":"+o.column;if(r){const l=this.location.end,c="".padEnd(o.line.toString().length," "),h=r[n.line-1],y=(n.line===l.line?l.column:h.length+1)-n.column||1;i+=`
 --> `+a+`
`+c+` |
`+o.line+" | "+h+`
`+c+" | "+"".padEnd(n.column-1," ")+"".padEnd(y,"^")}else i+=`
 at `+a}return i}static buildMessage(e,i){function r(g){return g.codePointAt(0).toString(16).toUpperCase()}const s=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function n(g){return s?g.replace(s,(_=>"\\u{"+r(_)+"}")):g}function o(g){return n(g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(_=>"\\x0"+r(_))).replace(/[\x10-\x1F\x7F-\x9F]/g,(_=>"\\x"+r(_))))}function a(g){return n(g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(_=>"\\x0"+r(_))).replace(/[\x10-\x1F\x7F-\x9F]/g,(_=>"\\x"+r(_))))}const l={literal:g=>'"'+o(g.text)+'"',class(g){const _=g.parts.map((S=>Array.isArray(S)?a(S[0])+"-"+a(S[1]):a(S)));return"["+(g.inverted?"^":"")+_.join("")+"]"+(g.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:g=>g.description};function c(g){return l[g.type](g)}function h(g){const _=g.map(c);if(_.sort(),_.length>0){let S=1;for(let E=1;E<_.length;E++)_[E-1]!==_[E]&&(_[S]=_[E],S++);_.length=S}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function y(g){return g?'"'+o(g)+'"':"end of input"}return"Expected "+h(e)+" but "+y(i)+" found."}};function fEe(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,s={start:Wt};let n=Wt;const o="none",a=")",l=",",c="(",h="%",y="px",g="cm",_="mm",S="in",E="pt",C="pc",M="deg",P="rad",D="grad",F="turn",U="#",G=".",Q="e",W=/^[ \t\n\r]/,X=/^[a-z\-]/,K=/^[0-9a-fA-F]/,de=/^[+\-]/,ye=/^[0-9]/,xe=qi("none"),ee=j("none",!1),le=j(")",!1),Te=j(",",!1),ke=si([" ","	",`
`,"\r"],!1,!1,!1),De=qi("function"),Ke=j("(",!1),vt=qi("identifier"),Pt=si([["a","z"],"-"],!1,!1,!1),Zt=qi("percentage"),Ar=j("%",!1),ks=qi("length"),Ps=j("px",!1),jn=j("cm",!1),pn=j("mm",!1),fl=j("in",!1),po=j("pt",!1),J0=j("pc",!1),Z0=qi("angle"),Y0=j("deg",!1),ih=j("rad",!1),Vd=j("grad",!1),qP=j("turn",!1),WP=qi("number"),rh=qi("color"),eA=j("#",!1),o$=si([["0","9"],["a","f"],["A","F"]],!1,!1,!1),a$=si(["+","-"],!1,!1,!1),Ls=si([["0","9"]],!1,!1,!1),U1=j(".",!1),l$=j("e",!1);function Gd(){return[]}function V1(L,we){return{type:"function",name:L,parameters:we||[]}}function QP(L,we){return we.length>0?cL(L,we,3):[L]}function JP(L){return{type:"quantity",value:L.value,unit:L.unit}}function c$(L){return{type:"color",colorType:L.type,value:L.value}}function Gj(L){return L}function ZP(){return Le()}function YP(L){return{value:L,unit:"%"}}function XP(L){return{value:L,unit:"px"}}function KP(L){return{value:L,unit:"cm"}}function eL(L){return{value:L,unit:"mm"}}function tL(L){return{value:L,unit:"in"}}function G1(L){return{value:L,unit:"pt"}}function iL(L){return{value:L,unit:"pc"}}function rL(L){return{value:L,unit:"deg"}}function Fe(L){return{value:L,unit:"rad"}}function sL(L){return{value:L,unit:"grad"}}function u$(L){return{value:L,unit:"turn"}}function nL(L){return{value:L,unit:null}}function oL(){return{type:"hex",value:Le()}}function H1(L){return{type:"function",value:L}}function h$(){return{type:"named",value:Le()}}function d$(){return parseFloat(Le())}let _e=0|e.peg$currPos,Ri=_e;const pc=[{line:1,column:1}];let Ca,ge=_e,Pe=e.peg$maxFailExpected||[],Ee=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in s))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');n=s[e.startRule]}function Le(){return t.substring(Ri,_e)}function f(L=_e){const we=t.codePointAt(L);return we===void 0?"":String.fromCodePoint(we)}function j(L,we){return{type:"literal",text:L,ignoreCase:we}}function si(L,we,Ue,$t){return{type:"class",parts:L,inverted:we,ignoreCase:Ue,unicode:$t}}function wi(){return{type:"end"}}function qi(L){return{type:"other",description:L}}function qt(L){let we,Ue=pc[L];if(Ue)return Ue;if(L>=pc.length)we=pc.length-1;else for(we=L;!pc[--we];);for(Ue=pc[we],Ue={line:Ue.line,column:Ue.column};we<L;)t.charCodeAt(we)===10?(Ue.line++,Ue.column=1):Ue.column++,we++;return pc[L]=Ue,Ue}function ui(L,we,Ue){const $t=qt(L),_i=qt(we);return{source:r,start:{offset:L,line:$t.line,column:$t.column},end:{offset:we,line:_i.line,column:_i.column}}}function It(L){_e<ge||(_e>ge&&(ge=_e,Pe=[]),Pe.push(L))}function gi(L,we,Ue){return new wG(wG.buildMessage(L,we),L,we,Ue)}function Wt(){let L;return L=fo(),L===i&&(L=X0()),L}function fo(){let L,we;return Ee++,L=_e,sr(),t.substr(_e,4)===o?(we=o,_e+=4):(we=i,Ee===0&&It(ee)),we!==i?(sr(),Ri=L,L=Gd()):(_e=L,L=i),Ee--,L===i&&Ee===0&&It(xe),L}function X0(){let L,we;if(L=[],we=q1(),we!==i)for(;we!==i;)L.push(we),we=q1();else L=i;return L}function q1(){let L,we,Ue,$t;return L=_e,sr(),we=Ta(),we!==i?(sr(),Ue=W1(),Ue===i&&(Ue=null),sr(),t.charCodeAt(_e)===41?($t=a,_e++):($t=i,Ee===0&&It(le)),$t!==i?(sr(),Ri=L,L=V1(we,Ue)):(_e=L,L=i)):(_e=L,L=i),L}function W1(){let L,we,Ue,$t,_i,mr,Xr,gs;if(L=_e,we=fn(),we!==i){for(Ue=[],$t=_e,_i=sr(),t.charCodeAt(_e)===44?(mr=l,_e++):(mr=i,Ee===0&&It(Te)),mr===i&&(mr=null),Xr=sr(),gs=fn(),gs!==i?(_i=[_i,mr,Xr,gs],$t=_i):(_e=$t,$t=i);$t!==i;)Ue.push($t),$t=_e,_i=sr(),t.charCodeAt(_e)===44?(mr=l,_e++):(mr=i,Ee===0&&It(Te)),mr===i&&(mr=null),Xr=sr(),gs=fn(),gs!==i?(_i=[_i,mr,Xr,gs],$t=_i):(_e=$t,$t=i);Ri=L,L=QP(we,Ue)}else _e=L,L=i;return L}function fn(){let L,we;return L=_e,we=aL(),we===i&&(we=Al(),we===i&&(we=zt(),we===i&&(we=q()))),we!==i&&(Ri=L,we=JP(we)),L=we,L===i&&(L=_e,we=Mt(),we!==i&&(Ri=L,we=c$(we)),L=we),L}function sr(){let L,we;for(Ee++,L=[],we=t.charAt(_e),W.test(we)?_e++:(we=i,Ee===0&&It(ke));we!==i;)L.push(we),we=t.charAt(_e),W.test(we)?_e++:(we=i,Ee===0&&It(ke));return Ee--,L}function Ta(){let L,we,Ue;return Ee++,L=_e,we=K0(),we!==i?(t.charCodeAt(_e)===40?(Ue=c,_e++):(Ue=i,Ee===0&&It(Ke)),Ue!==i?(Ri=L,L=we):(_e=L,L=i)):(_e=L,L=i),Ee--,L===i&&(we=i,Ee===0&&It(De)),L}function K0(){let L,we,Ue;if(Ee++,L=_e,we=[],Ue=t.charAt(_e),X.test(Ue)?_e++:(Ue=i,Ee===0&&It(Pt)),Ue!==i)for(;Ue!==i;)we.push(Ue),Ue=t.charAt(_e),X.test(Ue)?_e++:(Ue=i,Ee===0&&It(Pt));else we=i;return we!==i&&(Ri=L,we=ZP()),L=we,Ee--,L===i&&(we=i,Ee===0&&It(vt)),L}function aL(){let L,we,Ue;return Ee++,L=_e,sr(),we=Un(),we!==i?(t.charCodeAt(_e)===37?(Ue=h,_e++):(Ue=i,Ee===0&&It(Ar)),Ue!==i?(Ri=L,L=YP(we)):(_e=L,L=i)):(_e=L,L=i),Ee--,L===i&&Ee===0&&It(Zt),L}function Al(){let L,we,Ue;return Ee++,L=_e,sr(),we=Un(),we!==i?(t.substr(_e,2)===y?(Ue=y,_e+=2):(Ue=i,Ee===0&&It(Ps)),Ue!==i?(Ri=L,L=XP(we)):(_e=L,L=i)):(_e=L,L=i),L===i&&(L=_e,sr(),we=Un(),we!==i?(t.substr(_e,2)===g?(Ue=g,_e+=2):(Ue=i,Ee===0&&It(jn)),Ue!==i?(Ri=L,L=KP(we)):(_e=L,L=i)):(_e=L,L=i),L===i&&(L=_e,sr(),we=Un(),we!==i?(t.substr(_e,2)===_?(Ue=_,_e+=2):(Ue=i,Ee===0&&It(pn)),Ue!==i?(Ri=L,L=eL(we)):(_e=L,L=i)):(_e=L,L=i),L===i&&(L=_e,sr(),we=Un(),we!==i?(t.substr(_e,2)===S?(Ue=S,_e+=2):(Ue=i,Ee===0&&It(fl)),Ue!==i?(Ri=L,L=tL(we)):(_e=L,L=i)):(_e=L,L=i),L===i&&(L=_e,sr(),we=Un(),we!==i?(t.substr(_e,2)===E?(Ue=E,_e+=2):(Ue=i,Ee===0&&It(po)),Ue!==i?(Ri=L,L=G1(we)):(_e=L,L=i)):(_e=L,L=i),L===i&&(L=_e,sr(),we=Un(),we!==i?(t.substr(_e,2)===C?(Ue=C,_e+=2):(Ue=i,Ee===0&&It(J0)),Ue!==i?(Ri=L,L=iL(we)):(_e=L,L=i)):(_e=L,L=i)))))),Ee--,L===i&&Ee===0&&It(ks),L}function zt(){let L,we,Ue;return Ee++,L=_e,we=Un(),we!==i?(t.substr(_e,3)===M?(Ue=M,_e+=3):(Ue=i,Ee===0&&It(Y0)),Ue!==i?(Ri=L,L=rL(we)):(_e=L,L=i)):(_e=L,L=i),L===i&&(L=_e,we=Un(),we!==i?(t.substr(_e,3)===P?(Ue=P,_e+=3):(Ue=i,Ee===0&&It(ih)),Ue!==i?(Ri=L,L=Fe(we)):(_e=L,L=i)):(_e=L,L=i),L===i&&(L=_e,we=Un(),we!==i?(t.substr(_e,4)===D?(Ue=D,_e+=4):(Ue=i,Ee===0&&It(Vd)),Ue!==i?(Ri=L,L=sL(we)):(_e=L,L=i)):(_e=L,L=i),L===i&&(L=_e,we=Un(),we!==i?(t.substr(_e,4)===F?(Ue=F,_e+=4):(Ue=i,Ee===0&&It(qP)),Ue!==i?(Ri=L,L=u$(we)):(_e=L,L=i)):(_e=L,L=i)))),Ee--,L===i&&(we=i,Ee===0&&It(Z0)),L}function q(){let L,we;return Ee++,L=_e,sr(),we=Un(),we!==i?(Ri=L,L=nL(we)):(_e=L,L=i),Ee--,L===i&&Ee===0&&It(WP),L}function Mt(){let L,we,Ue,$t;if(Ee++,L=_e,t.charCodeAt(_e)===35?(we=U,_e++):(we=i,Ee===0&&It(eA)),we!==i){if(Ue=[],$t=t.charAt(_e),K.test($t)?_e++:($t=i,Ee===0&&It(o$)),$t!==i)for(;$t!==i;)Ue.push($t),$t=t.charAt(_e),K.test($t)?_e++:($t=i,Ee===0&&It(o$));else Ue=i;Ue!==i?(Ri=L,L=oL()):(_e=L,L=i)}else _e=L,L=i;return L===i&&(L=_e,we=q1(),we!==i&&(Ri=L,we=H1(we)),L=we,L===i&&(L=_e,we=K0(),we!==i&&(Ri=L,we=h$()),L=we)),Ee--,L===i&&(we=i,Ee===0&&It(rh)),L}function Un(){let L,we,Ue,$t,_i,mr,Xr,gs;for(L=_e,we=t.charAt(_e),de.test(we)?_e++:(we=i,Ee===0&&It(a$)),we===i&&(we=null),Ue=_e,$t=[],_i=t.charAt(_e),ye.test(_i)?_e++:(_i=i,Ee===0&&It(Ls));_i!==i;)$t.push(_i),_i=t.charAt(_e),ye.test(_i)?_e++:(_i=i,Ee===0&&It(Ls));if(t.charCodeAt(_e)===46?(_i=G,_e++):(_i=i,Ee===0&&It(U1)),_i!==i){if(mr=[],Xr=t.charAt(_e),ye.test(Xr)?_e++:(Xr=i,Ee===0&&It(Ls)),Xr!==i)for(;Xr!==i;)mr.push(Xr),Xr=t.charAt(_e),ye.test(Xr)?_e++:(Xr=i,Ee===0&&It(Ls));else mr=i;mr!==i?($t=[$t,_i,mr],Ue=$t):(_e=Ue,Ue=i)}else _e=Ue,Ue=i;if(Ue===i)if(Ue=[],$t=t.charAt(_e),ye.test($t)?_e++:($t=i,Ee===0&&It(Ls)),$t!==i)for(;$t!==i;)Ue.push($t),$t=t.charAt(_e),ye.test($t)?_e++:($t=i,Ee===0&&It(Ls));else Ue=i;if(Ue!==i){if($t=_e,t.charCodeAt(_e)===101?(_i=Q,_e++):(_i=i,Ee===0&&It(l$)),_i!==i){if(mr=t.charAt(_e),de.test(mr)?_e++:(mr=i,Ee===0&&It(a$)),mr===i&&(mr=null),Xr=[],gs=t.charAt(_e),ye.test(gs)?_e++:(gs=i,Ee===0&&It(Ls)),gs!==i)for(;gs!==i;)Xr.push(gs),gs=t.charAt(_e),ye.test(gs)?_e++:(gs=i,Ee===0&&It(Ls));else Xr=i;Xr!==i?(_i=[_i,mr,Xr],$t=_i):(_e=$t,$t=i)}else _e=$t,$t=i;$t===i&&($t=null),Ri=L,L=d$()}else _e=L,L=i;return L}function lL(L,we){return L.map((function(Ue){return Ue[we]}))}function cL(L,we,Ue){return[L].concat(lL(we,Ue))}Ca=n();const Q1=Ca!==i&&_e===t.length;function p$(){throw Ca!==i&&_e<t.length&&It(wi()),gi(Pe,ge<t.length?f(ge):null,ge<t.length?ui(ge,ge+1):ui(ge,ge))}return e.peg$library?{peg$result:Ca,peg$currPos:_e,peg$FAILED:i,peg$maxFailExpected:Pe,peg$maxFailPos:ge,peg$success:Q1,peg$throw:Q1?void 0:p$}:Q1?Ca:void p$()}function m7(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=_G(t);return i&&i.length!==0?i:null}const e=t.map((i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new te("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:_G(i.value)}}));e.sort(((i,r)=>r.effects.length-i.effects.length));for(let i=0;i<e.length-1;i++){if(!Tse(e[i].effects,e[i+1].effects))throw new te("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});Mse(e[i].effects,e[i+1].effects)}return e.sort(((i,r)=>r.scale-i.scale)),e}function _G(t){let e;if(!t)return[];try{e=fEe(t)}catch(i){throw new te("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map((i=>AEe(i)))}function AEe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return mEe(t);case"opacity":return yEe(t);case"hue-rotate":return gEe(t);case"blur":return vEe(t);case"drop-shadow":return bEe(t);case"bloom":return wEe(t)}}catch(e){throw e.details.filter=t,e}throw new te("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function mEe(t){let e=1;return C1(t.parameters,1),t.parameters.length===1&&(e=Gl(t.parameters[0])),new tN(t.name,e)}function yEe(t){let e=1;return C1(t.parameters,1),t.parameters.length===1&&(e=Gl(t.parameters[0])),new Ise(e)}function gEe(t){let e=0;return C1(t.parameters,1),t.parameters.length===1&&(e=IEe(t.parameters[0])),new $se(e)}function vEe(t){let e=0;return C1(t.parameters,1),t.parameters.length===1&&(e=v7(t.parameters[0]),Rx(e,t.parameters[0])),new bse(e)}function bEe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new te("effect:type-error","Accepts only one color",{});i=CEe(r)}else{const s=v7(r);if(Object.isFrozen(e))throw new te("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&Rx(s,r)}if(e.length<2||e.length>3)throw new te("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new Sse(e[0],e[1],e[2]||0,i||kse("black"))}function wEe(t){let e=1,i=0,r=0;return C1(t.parameters,3),t.parameters[0]&&(e=Gl(t.parameters[0])),t.parameters[1]&&(i=v7(t.parameters[1]),Rx(i,t.parameters[1])),t.parameters[2]&&(r=Gl(t.parameters[2])),new gse(e,i,r)}function C1(t,e){if(t.length>e)throw new te("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function Bk(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in g7)return"<length>";if(t.unit in y7)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Rx(t,e){if(t<0)throw new te("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function _Ee(t){if(t.type!=="quantity"||t.unit!==null)throw new te("effect:type-error",`Expected <double>, Actual: ${Bk(t)}`,{term:t})}function SEe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new te("effect:type-error",`Expected <double> or <percentage>, Actual: ${Bk(t)}`,{term:t})}const y7={deg:1,grad:.9,rad:180/Math.PI,turn:360};function xEe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&y7[t.unit]!=null))throw new te("effect:type-error",`Expected <angle>, Actual: ${Bk(t)}`,{term:t})}const g7={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function $Ee(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&g7[t.unit]!=null))throw new te("effect:type-error",`Expected <length>, Actual: ${Bk(t)}`,{term:t})}function Gl(t){SEe(t);const e=t.value;return Rx(e,t),t.unit==="%"?.01*e:e}function EEe(t){return _Ee(t),Rx(t.value,t),t.value}function IEe(t){return xEe(t),t.value*y7[t.unit]||0}function v7(t){return $Ee(t),t.value*g7[t.unit]||0}function CEe(t){switch(t.colorType){case"hex":return I1e(t.value);case"named":return kse(t.value);case"function":return kEe(t.value)}}function kse(t){if(!vte(t))throw new te("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return E1e(t)}const TEe=/^rgba?/i,MEe=/^hsla?/i;function kEe(t){if(C1(t.parameters,4),TEe.test(t.name))return[Gl(t.parameters[0]),Gl(t.parameters[1]),Gl(t.parameters[2]),t.parameters[3]?Gl(t.parameters[3]):1];if(MEe.test(t.name))return bte(EEe(t.parameters[0]),Gl(t.parameters[1]),Gl(t.parameters[2]),t.parameters[3]?Gl(t.parameters[3]):1);throw new te("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function SS(t,e,i){var r;try{return LEe(t)}catch(s){(r=i==null?void 0:i.messages)==null||r.push(s)}return null}function xS(t,e,i,r){try{const s=PEe(t);Jr(i,s,e)}catch(s){r.messages&&r.messages.push(s)}}function PEe(t){const e=m7(t);return e?pEe(e)?e.map((i=>i.toJSON())):e.map((({scale:i,effects:r})=>({scale:i,value:r.map((s=>s.toJSON()))}))):null}function LEe(t){if(!t||t.length===0)return null;if(REe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:NT(i.value)});return e}return NT(t)}function REe(t){const e=t[0];return!!e&&"scale"in e}function NT(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[nh(i,"amount")];break;case"blur":r=[nh(i,"radius","pt")];break;case"hue-rotate":r=[nh(i,"angle","deg")];break;case"drop-shadow":r=[nh(i,"xoffset","pt"),nh(i,"yoffset","pt"),nh(i,"blurRadius","pt"),OEe(i,"color")];break;case"bloom":r=[nh(i,"strength"),nh(i,"radius","pt"),nh(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;m7(s),e.push(s)}return e.join(" ")}function nh(t,e,i){if(t[e]==null)throw new te("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function OEe(t,e){if(t[e]==null)throw new te("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const DEe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Gi}},"portal-item":{read:!0,write:{layerContainerTypes:Gi}}}}},SG={read:{reader:SS},write:{allowNull:!0,writer:xS,layerContainerTypes:Gi}},NEe={json:{read:!1,write:!1,origins:{"web-map":SG,"portal-item":SG}}},Pse=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([A(DEe)],e.prototype,"blendMode",void 0),u([A(NEe)],e.prototype,"effect",void 0),e=u([B("esri.layers.mixins.BlendLayer")],e),e},FEe=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return u([A({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=u([B("esri.layers.mixins.CustomParametersMixin")],e),e},Lse=96;function Vnt(t,e){const i=t.extent,r=t.width,s=xa(i==null?void 0:i.spatialReference);return i&&r?i.width/r*s*Tie*Lse:0}function zEe(t,e){return t/(xa(e)*Tie*Lse)}function BEe(t,e){const i=t.extent,r=t.width-(t.padding?t.padding.left+t.padding.right:0),s=zEe(e,i.spatialReference);return i.clone().expand(s*r/i.width)}function jEe(t,e,i){return UEe(t,e)&&VEe(t,i)}function UEe(t,e){return e===0||rc(t,e)||t<e}function VEe(t,e){return e===0||rc(t,e)||t>e}function GEe(t,e){return rc(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const HEe="randomUUID"in crypto;function T1(){if(HEe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function Gnt(){return`{${T1().toUpperCase()}}`}function qEe(){return`{${T1()}}`}function WEe(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}const xG={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let qh=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.id=T1(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};u([A({type:String,json:{write:!0}})],qh.prototype,"id",void 0),u([A({type:Number,json:xG})],qh.prototype,"maxScale",void 0),u([A({type:Number,json:xG})],qh.prototype,"minScale",void 0),u([A({type:String,json:{write:!0}})],qh.prototype,"title",void 0),u([A({type:String,json:{write:!0}})],qh.prototype,"where",void 0),qh=u([B("esri.layers.support.DisplayFilter")],qh);function QEe(t,e){return{...e,filterMode:t.mode}}function JEe(t,e){return Rse(t,e).next().value??null}function qnt(t,e,i){const r=ZEe(t);if(r&&(Ite(e,r[0])||XD(i,r[1])))return"";const s=Array.from(Rse(t,e,i)),n=YEe(s,e,i)?"1=1":s.map((o=>o.where||"1=1")).reduce(((o,a)=>RD(o,a)),"");return n&&n!=="1=1"?n:""}function ZEe(t){if(Ose(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],$S(i)),e[1]=Math.min(e[1],FT(r));return e}function*Rse(t,e,i){if(Ose(t)==="manual"){const r=t.filters.find((s=>s.id===t.activeFilterId));r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)XEe(r.minScale,r.maxScale,e,i)&&(yield r)}}function YEe(t,e,i){var n,o;if(t.length===0)return!0;const r=$S((n=t.at(0))==null?void 0:n.minScale),s=FT((o=t.at(-1))==null?void 0:o.maxScale);if(XD(r,e)||Ite(s,i))return!0;for(let a=0;a<t.length-1;a++){const l=t[a],c=t[a+1];if(XD($S(c.minScale),FT(l.maxScale)))return!0}return!1}function XEe(t,e,i,r){return t=$S(t),i=$S(i),e=FT(e),!(!rc(i,t)&&(r??i)>t)&&!M1e(e,i)&&(r===void 0||!rc(r,t))}function Ose(t){return"mode"in t?t.mode:t.filterMode}function $S(t){return t||Number.POSITIVE_INFINITY}function FT(t){return t||0}let DA=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.activeFilterId=null,this.filters=new(qe.ofType(qh)),this.mode="manual"}writeFilters(e,i,r,s){const n=e.toArray();this.mode==="scale"&&n.sort(((o,a)=>{const l=GEe(a.minScale,o.minScale),c=o.maxScale-a.maxScale;return l===0?c:l})),i[r]=n.map((o=>o.toJSON(s)))}write(e,i){return super.write(e,QEe(this,i))}};u([A({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],DA.prototype,"activeFilterId",void 0),u([A({type:qe.ofType(qh),nonNullable:!0,json:{write:!0}})],DA.prototype,"filters",void 0),u([Ne("filters")],DA.prototype,"writeFilters",null),u([A({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],DA.prototype,"mode",void 0),DA=u([B("esri.layers.support.DisplayFilterInfo")],DA);const KEe=t=>{let e=class extends t{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return u([A(eIe)],e.prototype,"displayFilterEnabled",void 0),u([A(tIe)],e.prototype,"displayFilterInfo",void 0),e=u([B("esri.layers.mixins.DisplayFilteredLayer")],e),e},eIe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:Gi,writer(t,e,i){Jr(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},tIe={type:DA,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Gi},origins:{"web-scene":{write:!1,read:!1}}}},iN=qEe(),Dse=new Map,Nse=new Map;async function Qnt(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let s=Dse.get(r);if(!s){const n=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await ei(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===e}async function $G(t,e,i=!1){var n,o,a;if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(n=Nse.get(r))==null?void 0:n.entries();if(s){for(const[l,c]of s)if(c.name===e){const h=!((o=c.stack)!=null&&o.hasForwardEdits());if(!h&&i){const[{deleteForwardEdits:y},{default:g}]=await Promise.all([Ie(()=>import("./deleteForwardEdits-BNpMT9qy.js"),[],import.meta.url),Ie(()=>import("./DeleteForwardEditsParameters-DeWev82X.js"),[],import.meta.url)]),_=await y(r,l,new g({sessionId:iN,moment:c.moment}));return _.success&&((a=c.stack)==null||a.clearForwardEdits()),_.success}return h}}return!0}function WI(t,e){var s;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(s=Nse.get(i))==null?void 0:s.entries();if(r){for(const[n,o]of r)if(o.name===e)return o.lockType==="edit"}return!1}const b7=new dc.EventEmitter;function Fse(t){return b7.on("apply-edits",new WeakRef(t))}function zse(t){return b7.on("update-moment",new WeakRef(t))}function EG(t,e,i=null,r=!1){const s=_a();return r=e==null||r,b7.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:s.promise}),s}const Bse=Symbol();function Jnt(t){return t!=null&&typeof t=="object"&&Bse in t}function Aw(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function x_(t,e,i){const r=new URL(t).host,s=Dse.get(r),n=o=>!o||o===s;return n(e)&&n(i)||e===i}const iIe=t=>{var r;var e;let i=(r=class extends t{constructor(...s){super(...s),this[e]=!0,this._applyEditsHandler=n=>{const{serviceUrl:o,layerId:a,gdbVersion:l,mayReceiveServiceEdits:c,result:h}=n,y=o===this.url,g=a!=null&&this.layerId!=null&&a===this.layerId,_=Aw(this),S=Aw(this)&&x_(o,l,this.gdbVersion);if(!y||_&&!S||!g&&!c)return;const E=h.then((C=>{var D;if(this.lastEditsEventDate=new Date,g&&(C.addedFeatures.length||C.updatedFeatures.length||C.deletedFeatures.length||C.addedAttachments.length||C.updatedAttachments.length||C.deletedAttachments.length))return this.emit("edits",ie(C)),C;const M=(D=C.editedFeatures)==null?void 0:D.find((({layerId:F})=>F===this.layerId));if(M){const{adds:F,updates:U,deletes:G}=M.editedFeatures,Q={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:F?F.map((({attributes:W})=>({objectId:this.objectIdField&&W[this.objectIdField],globalId:this.globalIdField&&W[this.globalIdField]}))):[],deletedFeatures:G?G.map((({attributes:W})=>({objectId:this.objectIdField&&W[this.objectIdField],globalId:this.globalIdField&&W[this.globalIdField]}))):[],updatedFeatures:U?U.map((({current:{attributes:W}})=>({objectId:this.objectIdField&&W[this.objectIdField],globalId:this.globalIdField&&W[this.globalIdField]}))):[],editedFeatures:ie(C.editedFeatures),exceededTransferLimit:!1,historicMoment:ie(C.historicMoment)};return this.emit("edits",Q),Q}const P={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:ie(C.editedFeatures),exceededTransferLimit:!1,historicMoment:ie(C.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(o,l,P.historicMoment)&&this.emit("edits",P),P})).then((C=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(o,l,C.historicMoment)&&(this.historicMoment=C.historicMoment),C)));this.emit("apply-edits",{result:E})},this._updateMomentHandler=n=>{const{serviceUrl:o,gdbVersion:a,moment:l}=n,c=o===this.url,h=Aw(this),y=Aw(this)&&x_(o,a,this.gdbVersion),g=Aw(this)&&!x_(o,this.gdbVersion,null);c&&h&&y&&g&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then((()=>{this.addHandles(Fse(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(zse(this._updateMomentHandler))}),(()=>{}))}_shouldUpdateHistoricMoment(s,n,o){return"historicMoment"in this&&this.historicMoment!==o&&WI(s,n)}},e=Bse,r);return u([A()],i.prototype,"lastEditsEventDate",void 0),i=u([B("esri.layers.mixins.EditBusLayer")],i),i};var rN;let tg=rN=class extends pe{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new rN({mapLayerId:t,gdbVersion:e})}};u([it({mapLayer:"map-layer"}),A({json:{write:{isRequired:!0}}})],tg.prototype,"type",void 0),u([A({type:Kt,json:{write:{isRequired:!0}}})],tg.prototype,"mapLayerId",void 0),u([A({type:String,json:{write:!0}})],tg.prototype,"gdbVersion",void 0),tg=rN=u([B("esri.layers.support.source.MapLayerSource")],tg);var sN;let Sh=sN=class extends pe{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:s}=this,n={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:s};return new sN(n)}};u([it({queryTable:"query-table"}),A({json:{write:{isRequired:!0}}})],Sh.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],Sh.prototype,"workspaceId",void 0),u([A({type:String,json:{write:!0}})],Sh.prototype,"query",void 0),u([A({type:String,json:{write:!0}})],Sh.prototype,"oidFields",void 0),u([A({type:We,json:{write:!0}})],Sh.prototype,"spatialReference",void 0),u([it(k_e)],Sh.prototype,"geometryType",void 0),Sh=sN=u([B("esri.layers.support.source.QueryTableDataSource")],Sh);var nN;let ig=nN=class extends pe{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new nN({workspaceId:t,dataSourceName:e})}};u([it({raster:"raster"}),A({json:{write:{isRequired:!0}}})],ig.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],ig.prototype,"dataSourceName",void 0),u([A({type:String,json:{write:!0}})],ig.prototype,"workspaceId",void 0),ig=nN=u([B("esri.layers.support.source.RasterDataSource")],ig);var oN;let NA=oN=class extends pe{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new oN({workspaceId:t,gdbVersion:e,dataSourceName:i})}};u([it({table:"table"}),A({json:{write:{isRequired:!0}}})],NA.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],NA.prototype,"workspaceId",void 0),u([A({type:String,json:{write:!0}})],NA.prototype,"gdbVersion",void 0),u([A({type:String,json:{write:!0}})],NA.prototype,"dataSourceName",void 0),NA=oN=u([B("esri.layers.support.source.TableDataSource")],NA);var aN,lN;const rIe=ys()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Xo=aN=class extends pe{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return IG()(t,e,i)}castLeftTableSource(t){return Uu(cN(),t)}readRightTableSource(t,e,i){return IG()(t,e,i)}castRightTableSource(t){return Uu(cN(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:s}=this,n={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:s};return new aN(n)}};u([it({joinTable:"join-table"}),A({json:{write:{isRequired:!0}}})],Xo.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],Xo.prototype,"leftTableKey",void 0),u([A({type:String,json:{write:!0}})],Xo.prototype,"rightTableKey",void 0),u([A({json:{write:!0}})],Xo.prototype,"leftTableSource",void 0),u([Me("leftTableSource")],Xo.prototype,"readLeftTableSource",null),u([yi("leftTableSource")],Xo.prototype,"castLeftTableSource",null),u([A({json:{write:!0}})],Xo.prototype,"rightTableSource",void 0),u([Me("rightTableSource")],Xo.prototype,"readRightTableSource",null),u([yi("rightTableSource")],Xo.prototype,"castRightTableSource",null),u([it(rIe)],Xo.prototype,"joinType",void 0),Xo=aN=u([B("esri.layers.support.source.JoinTableDataSource")],Xo);let xR=null;function IG(){return xR||(xR=A1({types:cN()})),xR}let $R=null;function cN(){return $R||($R={key:"type",base:null,typeMap:{"data-layer":Hl,"map-layer":tg}}),$R}const sIe={key:"type",base:null,typeMap:{"join-table":Xo,"query-table":Sh,raster:ig,table:NA}};var Wv;let Hl=(Wv=class extends pe{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new lN({fields:e,dataSource:i})}},lN=Wv,Wv);u([it({dataLayer:"data-layer"}),A({json:{write:{isRequired:!0}}})],Hl.prototype,"type",void 0),u([A({type:[Vs],json:{write:!0}})],Hl.prototype,"fields",void 0),u([A({types:sIe,json:{write:!0}})],Hl.prototype,"dataSource",void 0),Hl=lN=u([B("esri.layers.support.source.DataLayerSource")],Hl),Hl.from=fr(Hl);let FA=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([A({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],FA.prototype,"onFields",void 0),u([A({type:String,json:{write:!0}})],FA.prototype,"operator",void 0),u([A({type:String,json:{write:!0}})],FA.prototype,"searchTerm",void 0),u([A({type:String,json:{write:!0}})],FA.prototype,"searchType",void 0),FA=u([B("esri.rest.support.FullTextSearch")],FA);const jse=FA;var uN;const CG=new Ot({upperLeft:"upper-left",lowerLeft:"lower-left"});let Np=uN=class extends pe{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new uN(ie({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([A({type:Rt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Np.prototype,"extent",void 0),u([A({type:["view","edit"],json:{write:!0}})],Np.prototype,"mode",void 0),u([A({type:String,json:{read:CG.read,write:CG.write}})],Np.prototype,"originPosition",void 0),u([A({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Np.prototype,"tolerance",void 0),Np=uN=u([B("esri.rest.support.QuantizationParameters")],Np);const nIe=new Ot({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var hN;const TG=new Ot({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Pl=hN=class extends pe{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=ie(t))}clone(){return new hN({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ie(this.statisticParameters)})}};u([A({type:Number,json:{write:!0}})],Pl.prototype,"maxPointCount",void 0),u([A({type:Number,json:{write:!0}})],Pl.prototype,"maxRecordCount",void 0),u([A({type:Number,json:{write:!0}})],Pl.prototype,"maxVertexCount",void 0),u([A({type:String,json:{write:!0}})],Pl.prototype,"onStatisticField",void 0),u([A({type:String,json:{write:!0}})],Pl.prototype,"outStatisticFieldName",void 0),u([A({type:String,json:{read:{source:"statisticType",reader:TG.read},write:{target:"statisticType",writer:TG.write}}})],Pl.prototype,"statisticType",void 0),u([A({type:Object})],Pl.prototype,"statisticParameters",void 0),u([Ne("statisticParameters")],Pl.prototype,"writeStatisticParameters",null),Pl=hN=u([B("esri.rest.support.StatisticDefinition")],Pl);var QI;const oIe=new Ot({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var l0;let ut=(l0=class extends pe{static from(e){return Sx(QI,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const s in e){const n=e[s];Array.isArray(n)?r[s]=n.map((o=>o instanceof Date?o.getTime():o)):n instanceof Date?r[s]=n.getTime():r[s]=n}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new QI(ie({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},QI=l0,l0.MAX_MAX_RECORD_COUNT_FACTOR=5,l0);u([A({json:{write:!0}})],ut.prototype,"aggregateIds",void 0),u([A({type:Boolean,json:{write:!0}})],ut.prototype,"cacheHint",void 0),u([A({type:Boolean,json:{default:!1,write:!0}})],ut.prototype,"compactGeometryEnabled",void 0),u([A({json:{write:!0}})],ut.prototype,"datumTransformation",void 0),u([yi("datumTransformation")],ut.prototype,"castDatumTransformation",null),u([A({type:Boolean,json:{default:!1,write:!0}})],ut.prototype,"defaultSpatialReferenceEnabled",void 0),u([A({type:Number,json:{write:!0}})],ut.prototype,"distance",void 0),u([A({type:Hl,json:{write:!0}})],ut.prototype,"dynamicDataSource",void 0),u([A({type:String,json:{write:!0}})],ut.prototype,"formatOf3DObjects",void 0),u([A({type:[jse],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],ut.prototype,"fullText",void 0),u([A({type:String,json:{write:!0}})],ut.prototype,"gdbVersion",void 0),u([A({types:E1,json:{read:Ju,write:!0}})],ut.prototype,"geometry",void 0),u([A({type:Number,json:{write:!0}})],ut.prototype,"geometryPrecision",void 0),u([A({type:[String],json:{write:!0}})],ut.prototype,"groupByFieldsForStatistics",void 0),u([A({type:String,json:{write:!0}})],ut.prototype,"having",void 0),u([A({type:Date})],ut.prototype,"historicMoment",void 0),u([Ne("historicMoment")],ut.prototype,"writeHistoricMoment",null),u([A({type:Number,json:{write:!0}})],ut.prototype,"maxAllowableOffset",void 0),u([A({type:Number,cast:t=>t<1?1:t>ut.MAX_MAX_RECORD_COUNT_FACTOR?ut.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],ut.prototype,"maxRecordCountFactor",void 0),u([A({type:["xyFootprint"],json:{write:!0}})],ut.prototype,"multipatchOption",void 0),u([A({type:Number,json:{read:{source:"resultRecordCount"}}})],ut.prototype,"num",void 0),u([A({json:{write:!0}})],ut.prototype,"objectIds",void 0),u([A({type:[String],json:{write:!0}})],ut.prototype,"orderByFields",void 0),u([A({type:[String],json:{write:!0}})],ut.prototype,"outFields",void 0),u([A({type:We,json:{name:"outSR",write:!0}})],ut.prototype,"outSpatialReference",void 0),u([A({type:[Pl],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],ut.prototype,"outStatistics",void 0),u([A({json:{write:!0}})],ut.prototype,"parameterValues",void 0),u([Ne("parameterValues")],ut.prototype,"writeParameterValues",null),u([A({type:ct,json:{write:!0}})],ut.prototype,"pixelSize",void 0),u([A({type:Np,json:{write:!0}})],ut.prototype,"quantizationParameters",void 0),u([A({type:[Object],json:{write:!0}})],ut.prototype,"rangeValues",void 0),u([A({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ut.prototype,"relationParameter",void 0),u([A({type:String,json:{write:!0}})],ut.prototype,"resultType",void 0),u([A({type:Boolean,json:{default:!1,write:!0}})],ut.prototype,"returnCentroid",void 0),u([A({type:Boolean,json:{default:!1,write:!0}})],ut.prototype,"returnDistinctValues",void 0),u([A({type:Boolean,json:{default:!0,write:!0}})],ut.prototype,"returnExceededLimitFeatures",void 0),u([A({type:Boolean,json:{write:!0}})],ut.prototype,"returnGeometry",void 0),u([A({type:Boolean,json:{default:!1,write:!0}})],ut.prototype,"returnQueryGeometry",void 0),u([A({type:Boolean,json:{default:!1,write:!0}})],ut.prototype,"returnM",void 0),u([A({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ut.prototype,"returnZ",void 0),u([A({type:Boolean,json:{write:!0}})],ut.prototype,"returnTrueCurves",void 0),u([A({type:We,json:{write:!0}})],ut.prototype,"sourceSpatialReference",void 0),u([it(nIe,{ignoreUnknown:!1,name:"spatialRel"})],ut.prototype,"spatialRelationship",void 0),u([A({type:Number,json:{read:{source:"resultOffset"}}})],ut.prototype,"start",void 0),u([Ne("start"),Ne("num")],ut.prototype,"writeStart",null),u([A({type:String,json:{write:!0}})],ut.prototype,"sqlFormat",void 0),u([A({type:String,json:{write:!0}})],ut.prototype,"text",void 0),u([A({type:Mi,json:{write:!0}})],ut.prototype,"timeExtent",void 0),u([A({type:Boolean,json:{default:!1,write:!0}})],ut.prototype,"timeReferenceUnknownClient",void 0),u([it(oIe,{ignoreUnknown:!1}),A({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],ut.prototype,"units",void 0),u([A({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],ut.prototype,"where",void 0),u([Ne("where")],ut.prototype,"writeWhere",null),ut=QI=u([B("esri.rest.support.Query")],ut);var dN;const ER=new Ot({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),IR=new Ot({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let xc=dN=class extends pe{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:o,distance:a}=this;return new ut({geometry:ie(i),objectIds:ie(n),spatialRelationship:r,timeExtent:ie(s),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:o}=this;return new dN({geometry:ie(e),objectIds:ie(s),spatialRelationship:i,timeExtent:ie(r),where:t,units:n,distance:o})}};u([A({type:String,json:{write:!0}})],xc.prototype,"where",void 0),u([A({types:E1,json:{write:!0}})],xc.prototype,"geometry",void 0),u([A({type:ER.apiValues,json:{name:"spatialRel",read:{reader:ER.read},write:{allowNull:!1,writer:ER.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],xc.prototype,"spatialRelationship",void 0),u([A({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],xc.prototype,"distance",void 0),u([A({type:[Number],json:{write:!0}})],xc.prototype,"objectIds",void 0),u([A({type:IR.apiValues,json:{read:IR.read,write:{writer:IR.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],xc.prototype,"units",void 0),u([A({type:Mi,json:{write:!0}})],xc.prototype,"timeExtent",void 0),xc=dN=u([B("esri.layers.support.FeatureFilter")],xc);const aIe=xc;var pN;const MG={read:{reader:SS},write:{writer:xS,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},kG={read:{reader:SS},write:{writer:xS,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},PG={name:"showExcludedLabels",default:!0};let zA=pN=class extends pe{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,s;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const n=Object.keys(i.filter);if(n.length>1||n[0]!=="where")return(r=e.messages)==null||r.push(new te("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=e.messages)==null||s.push(new te("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new pN({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([A({type:aIe,json:{write:{allowNull:!0,writer(t,e,i,r){const s=t==null?void 0:t.write({},r);s&&Object.keys(s).length!==0?Jr(i,s,e):Jr(i,null,e)}}}})],zA.prototype,"filter",void 0),u([A({json:{read:SS,write:{writer:xS,allowNull:!0},origins:{"web-map":MG,"portal-item":MG}}})],zA.prototype,"includedEffect",void 0),u([A({json:{read:SS,write:{writer:xS,allowNull:!0},origins:{"web-map":kG,"portal-item":kG}}})],zA.prototype,"excludedEffect",void 0),u([A({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":PG,"portal-item":PG}}})],zA.prototype,"excludedLabelsVisible",void 0),zA=pN=u([B("esri.layers.support.FeatureEffect")],zA);const LG={write:{allowNull:!0}},lIe={type:zA,json:{origins:{"web-map":LG,"portal-item":LG}}},cIe=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return u([A(lIe)],e.prototype,"featureEffect",void 0),e=u([B("esri.layers.mixins.FeatureEffectLayer")],e),e};var b2;const zT=ys()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Use=zT.jsonValues.slice();Nme(Use,"orthometric");const $_=ys()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Yn=b2=class extends pe{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return zT.write(t,e,i)}readHeightModel(t,e,i){return zT.read(t)||(i!=null&&i.messages&&i.messages.push(uIe(t,{context:i})),null)}readHeightUnit(t,e,i){return $_.read(t)||(i!=null&&i.messages&&i.messages.push(RG(t,{context:i})),null)}readHeightUnitService(t,e,i){return Kz(t)||$_.read(t)||(i!=null&&i.messages&&i.messages.push(RG(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new b2({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=Lie(e);return new b2({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new b2;return e.read(t,{origin:"web-scene"}),e}};function RG(t,e){return new Sa("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function uIe(t,e){return new Sa("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}u([A({type:zT.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Use,default:"ellipsoidal",write:{isRequired:!0}}}}})],Yn.prototype,"heightModel",void 0),u([Ne("web-scene","heightModel")],Yn.prototype,"writeHeightModel",null),u([Me(["web-scene","service"],"heightModel")],Yn.prototype,"readHeightModel",null),u([A({type:$_.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:$_.jsonValues,write:{writer:$_.write,isRequired:!0}}}}})],Yn.prototype,"heightUnit",void 0),u([Me("web-scene","heightUnit")],Yn.prototype,"readHeightUnit",null),u([Me("service","heightUnit")],Yn.prototype,"readHeightUnitService",null),u([A({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Yn.prototype,"vertCRS",void 0),u([Me("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Yn.prototype,"readVertCRS",null),Yn=b2=u([B("esri.geometry.HeightModelInfo")],Yn);var fN;let w2=fN=class extends pe{constructor(t){super(t)}async collectRequiredFields(t,e){return un(t,e,this.expression)}clone(){return new fN({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};u([A({type:String,json:{write:{isRequired:!0}}})],w2.prototype,"expression",void 0),u([A({type:String,json:{write:!0}})],w2.prototype,"title",void 0),w2=fN=u([B("esri.symbols.support.FeatureExpressionInfo")],w2);const OG=w2,jk={unknown:1,inches:Br(1,"meters","inches"),feet:Br(1,"meters","feet"),"us-feet":Br(1,"meters","us-feet"),yards:Br(1,"meters","yards"),miles:Br(1,"meters","miles"),"nautical-miles":Br(1,"meters","nautical-miles"),millimeters:Br(1,"meters","millimeters"),centimeters:Br(1,"meters","centimeters"),decimeters:Br(1,"meters","decimeters"),meters:Br(1,"meters","meters"),kilometers:Br(1,"meters","kilometers"),"decimal-degrees":1/v2e(1,"meters",kr.radius)};function Ynt(t){return!!t&&jk[t]!=null}function Xnt(t){return 1/(jk[t]||1)}function hIe(){const t=Object.keys(jk);return Q8(t,"decimal-degrees"),t.sort(),t}const dIe=hIe();var AN;const j$=ys()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),DG=new Ot({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});var Qv;let Nc=(Qv=class extends pe{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,s){i[r]=e.write({},s),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}clone(){return new AN({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Qme(this.featureExpressionInfo,e.featureExpressionInfo)}},AN=Qv,Qv);u([A({type:OG,json:{write:!0}})],Nc.prototype,"featureExpressionInfo",void 0),u([Me("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Nc.prototype,"readFeatureExpressionInfo",null),u([Ne("featureExpressionInfo",{featureExpressionInfo:{type:OG},"featureExpression.value":{type:[0]}})],Nc.prototype,"writeFeatureExpressionInfo",null),u([A({type:j$.apiValues,nonNullable:!0,json:{type:j$.jsonValues,read:j$.read,write:{writer:j$.write,isRequired:!0}}})],Nc.prototype,"mode",null),u([A({type:Number,json:{write:!0}})],Nc.prototype,"offset",void 0),u([A({type:dIe,json:{type:String,read:DG.read,write:DG.write}})],Nc.prototype,"unit",null),Nc=AN=u([B("esri.symbols.support.ElevationInfo")],Nc);let rg=class extends pe{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};u([A({type:String,json:{write:!0}})],rg.prototype,"description",void 0),u([A({type:String,json:{write:!0}})],rg.prototype,"label",void 0),u([A()],rg.prototype,"type",void 0),rg=u([B("esri.tables.elements.AttributeTableElement")],rg);const M1=rg;let _2=class extends dt.ClonableMixin(M1){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};u([A({type:["auto"],json:{write:!0}})],_2.prototype,"displayType",void 0),u([A({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],_2.prototype,"type",void 0),_2=u([B("esri.tables.elements.AttributeTableAttachmentElement")],_2);const Vse=_2;let BA=class extends dt.ClonableMixin(M1){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};u([A({type:String,json:{read:!1,write:!1}})],BA.prototype,"description",void 0),u([A({type:String,json:{write:{enabled:!0,isRequired:!0}}})],BA.prototype,"fieldName",void 0),u([A({type:String,json:{read:!1,write:!1}})],BA.prototype,"label",void 0),u([A({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],BA.prototype,"type",void 0),BA=u([B("esri.tables.elements.AttributeTableFieldElement")],BA);const Gse=BA;let S2=class extends dt.ClonableMixin(M1){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};u([A({type:Number,json:{type:Kt,write:{enabled:!0,isRequired:!0}}})],S2.prototype,"relationshipId",void 0),u([A({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],S2.prototype,"type",void 0),S2=u([B("esri.tables.elements.AttributeTableRelationshipElement")],S2);const Hse=S2,qse={base:M1,key:"type",typeMap:{attachment:Vse,field:Gse,relationship:Hse}};function pIe(t){return{typesWithGroup:{base:M1,key:"type",typeMap:{attachment:Vse,field:Gse,group:t,relationship:Hse}},typesWithoutGroup:qse}}let x2=class extends dt.ClonableMixin(M1){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};u([A({types:[qse],json:{name:"attributeTableElements",write:!0}})],x2.prototype,"elements",void 0),u([A({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],x2.prototype,"type",void 0),x2=u([B("esri.tables.elements.AttributeTableGroupElement")],x2);const fIe=x2;let $2=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.field=null,this.order=null}};u([A({type:String,json:{write:!0}})],$2.prototype,"field",void 0),u([A({type:["asc","desc"],json:{write:!0}})],$2.prototype,"order",void 0),$2=u([B("esri.tables.support.FieldOrder")],$2);const AIe=$2;var mN;const mIe=pIe(fIe);let E2=mN=class extends pe{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new mN({elements:ie(this.elements),orderByFields:ie(this.orderByFields)})}};u([A({types:[mIe.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],E2.prototype,"elements",void 0),u([A({type:[AIe],json:{write:!0}})],E2.prototype,"orderByFields",void 0),E2=mN=u([B("esri.tables.AttributeTableTemplate")],E2);const yIe=E2,gIe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Gi}}},Uk={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},Vk={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Gi}}},vIe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:v0}}},bIe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Gi}}},wIe={value:null,type:Nc,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Gi}}};function not(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Wse={write:{enabled:!0,layerContainerTypes:Gi},read:!0},yN={type:Number,json:{origins:{"web-document":Wse,"portal-item":{write:{layerContainerTypes:Gi}}}}},_Ie={...yN,json:{...yN.json,origins:{"web-document":{...Wse,write:{enabled:!0,layerContainerTypes:Gi,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var r;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(r=e.layerDefinition)!=null&&r.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?vS(e.layerDefinition.drawingInfo.transparency):void 0:vS(e.drawingInfo.transparency)}}}},oot={type:Rt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Rt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=We.fromJSON(e.spatialReference)),i}}}},read:!1}},SIe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},xIe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Gi}}},$Ie={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Gi}}},Qse={json:{write:{ignoreOrigin:!0,layerContainerTypes:Gi},origins:{"web-map":{read:!1,write:!1}}}},EIe={type:yIe,json:{name:"attributeTableInfo",write:!0}};let xh=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};u([A()],xh.prototype,"creatorField",void 0),u([A()],xh.prototype,"creationDateField",void 0),u([A()],xh.prototype,"editorField",void 0),u([A()],xh.prototype,"editDateField",void 0),u([A()],xh.prototype,"realm",void 0),u([A(gT("dateFieldsTimeReference",!0))],xh.prototype,"timeZone",void 0),xh=u([B("esri.layers.support.EditFieldsInfo")],xh);let Fc=class extends dt.ClonableMixin(pe){constructor(e){super(e)}};u([A({constructOnly:!0,json:{write:!0}})],Fc.prototype,"name",void 0),u([A({constructOnly:!0,json:{write:!0}})],Fc.prototype,"fields",void 0),u([A({constructOnly:!0,json:{write:!0}})],Fc.prototype,"isAscending",void 0),u([A({constructOnly:!0,json:{write:!0}})],Fc.prototype,"indexType",void 0),u([A({constructOnly:!0,json:{write:!0}})],Fc.prototype,"isUnique",void 0),u([A({constructOnly:!0,json:{write:!0}})],Fc.prototype,"description",void 0),Fc=u([B("esri.layers.support.FeatureIndex")],Fc);function IIe(t,e,i){return Cm(t.map(((r,s)=>e.apply(i,[r,s]))))}async function CIe(t,e,i){return(await Cm(t.map(((r,s)=>e.apply(i,[r,s]))))).map((r=>r.value))}function w7(t){return{ok:!0,value:t}}function _7(t){return{ok:!1,error:t}}function TIe(t){return t!=null&&t.ok===!0?t.value:null}function MIe(t){return t!=null&&t.ok===!1?t.error:null}async function Gk(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return w7(await t)}catch(e){return _7(e)}}async function kIe(t){try{return w7(await t)}catch(e){return Jc(e),_7(e)}}function Hk(t,e){return new mp(t,e)}let mp=class extends et{get value(){return TIe(this._result)}get error(){return MIe(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Pb(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then((s=>{this._result=w7(s),this._cleanup()}),(s=>{this._result=_7(s),this._cleanup()})),this._abortHandle=ac(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=pr(this._abortHandle),this._abortController=null}};u([A()],mp.prototype,"value",null),u([A()],mp.prototype,"error",null),u([A()],mp.prototype,"finished",null),u([A()],mp.prototype,"promise",void 0),u([A()],mp.prototype,"_result",void 0),mp=u([B("esri.core.asyncUtils.ReactiveTask")],mp);async function Jse(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=Zse(t));const r=PIe(t),s=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let n=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;e.start+=r}return n}function PIe(t){return Zse(t)*LIe(t)}function LIe(t){return t.capabilities.query.maxRecordCount||2e3}function Zse(t){return t.capabilities.query.supportsMaxRecordCountFactor?ut.MAX_MAX_RECORD_COUNT_FACTOR:1}const U$=new WeakMap;function S7(t){return!t.destroyed&&(U$.has(t)||t.addHandles([He((()=>{const e=t.parent;return!(!e||!("type"in e))&&(e.type==="catalog-dynamic-group"||S7(e))}),(e=>U$.set(t,e)),eo),Ai((()=>U$.delete(t)))]),U$.get(t))}function Yse(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function uot(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function RIe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function OIe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function hot(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function NG(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Qp(t){return(t==null?void 0:t.type)==="subtype-sublayer"}const dot={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function gN(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function pot(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function qk(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function fot(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t==null?void 0:t.source)==null?void 0:i.type)==="feature-layer"}async function x7(t,e){const i=_t==null?void 0:_t.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${t.slice(0,r)}/rest/info`,n=e!=null?e.signal:null,{data:o}=await ei(s,{query:{f:"json"},responseType:"json",signal:n});return(o==null?void 0:o.owningSystemUrl)||null}function Xse(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function DIe(t){return Xse(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function NIe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function FIe(t){return!!NIe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Aot(t){const e=new qe;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||S7(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function zIe(t,e){return null}function mot(t){return null}function vN(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function yot(t,e){!e||!vN(t)||zIe(t.url)}var bN;let I2=bN=class extends pe{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new bN({minValue:this.minValue,maxValue:this.maxValue})}};u([A({type:Number,json:{write:!0}})],I2.prototype,"minValue",void 0),u([A({type:Number,json:{write:!0}})],I2.prototype,"maxValue",void 0),I2=bN=u([B("esri.renderers.support.AuthoringInfoClassBreakInfo")],I2);var wN;let Fp=wN=class extends pe{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new wN({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ie(this.classBreakInfos)})}};u([A({type:String,json:{write:!0}})],Fp.prototype,"field",void 0),u([A({type:String,json:{write:!0}})],Fp.prototype,"normalizationField",void 0),u([A({type:String,json:{write:!0}})],Fp.prototype,"label",void 0),u([A({type:[I2],json:{write:!0}})],Fp.prototype,"classBreakInfos",void 0),Fp=wN=u([B("esri.renderers.support.AuthoringInfoFieldInfo")],Fp);var _N;let sg=_N=class extends pe{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new _N({label:this.label,value:this.value,size:this.size})}};u([A({type:String,json:{write:!0}})],sg.prototype,"label",void 0),u([A({type:Number,json:{write:!0}})],sg.prototype,"size",void 0),u([A({type:Number,json:{write:!0}})],sg.prototype,"value",void 0),sg=_N=u([B("esri.renderers.support.AuthoringInfoSizeStop")],sg);const BIe=sg;var SN;const V$=new Ot({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),G$=new Ot({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),FG={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},zG=["high-to-low","above-and-below","centered-on","extremes"],BG=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],jG=["seconds","minutes","hours","days","months","years"],jIe=["circle","diamond","hexagon-flat","hexagon-pointy","square"],UIe=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let vs=SN=class extends pe{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new SN({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:ie(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([A({types:FG,json:{write:!0}})],vs.prototype,"endTime",void 0),u([yi("endTime")],vs.prototype,"castEndTime",null),u([A({type:String,json:{write:!0}})],vs.prototype,"field",void 0),u([A({type:Number,json:{write:!0}})],vs.prototype,"maxSliderValue",void 0),u([A({type:Number,json:{write:!0}})],vs.prototype,"minSliderValue",void 0),u([A({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],vs.prototype,"normalizationField",null),u([A({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],vs.prototype,"referenceSizeScale",null),u([A({type:jIe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],vs.prototype,"referenceSizeSymbolStyle",null),u([A({type:UIe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],vs.prototype,"spikeSymbolStyle",null),u([A({types:FG,json:{write:!0}})],vs.prototype,"startTime",void 0),u([yi("startTime")],vs.prototype,"castStartTime",null),u([A({type:[BIe],json:{origins:{"web-scene":{write:!1}},write:!0}})],vs.prototype,"sizeStops",null),u([A({type:V$.apiValues,value:null,json:{type:V$.jsonValues,read:V$.read,write:V$.write}})],vs.prototype,"style",null),u([A({type:BG,value:null,json:{type:BG,origins:{"web-scene":{type:zG,write:{writer:(t,e)=>{zG.includes(t)&&(e.theme=t)}}}},write:!0}})],vs.prototype,"theme",null),u([A({type:G$.apiValues,json:{type:G$.jsonValues,read:G$.read,write:G$.write}})],vs.prototype,"type",void 0),u([A({type:jG,json:{type:jG,write:!0}})],vs.prototype,"units",void 0),vs=SN=u([B("esri.renderers.support.AuthoringInfoVisualVariable")],vs);const VIe=vs;let vv=class extends pe{constructor(e){super(e),this.type=null}};u([A({readOnly:!0,json:{read:!1,write:!0}})],vv.prototype,"type",void 0),vv=u([B("esri.rest.support.ColorRamp")],vv);var xN;let ed=xN=class extends vv{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new xN({fromColor:ie(this.fromColor),toColor:ie(this.toColor),algorithm:this.algorithm})}};u([it({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],ed.prototype,"algorithm",void 0),u([A({type:ze,json:{type:[Kt],write:!0}})],ed.prototype,"fromColor",void 0),u([A({type:ze,json:{type:[Kt],write:!0}})],ed.prototype,"toColor",void 0),u([A({type:["algorithmic"]})],ed.prototype,"type",void 0),ed=xN=u([B("esri.rest.support.AlgorithmicColorRamp")],ed);var $N;let Yg=$N=class extends vv{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new $N({colorRamps:ie(this.colorRamps)})}};u([A({type:[ed],json:{write:!0}})],Yg.prototype,"colorRamps",void 0),u([A({type:["multipart"]})],Yg.prototype,"type",void 0),Yg=$N=u([B("esri.rest.support.MultipartColorRamp")],Yg);const GIe={key:"type",base:vv,typeMap:{algorithmic:ed,multipart:Yg}};function HIe(t){return t!=null&&t.type?t.type==="algorithmic"?ed.fromJSON(t):t.type==="multipart"?Yg.fromJSON(t):null:null}var EN;const lA=new Ot({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),H$=new Ot({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),UG=new Ot({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),VG=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],qIe=["high-to-low","above-and-below","above","below"],WIe=["flow-line","wave-front"],QIe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ar=EN=class extends pe{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?HIe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new EN({classificationMethod:this.classificationMethod,colorRamp:ie(this.colorRamp),fadeRatio:ie(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:ie(this.field1),field2:ie(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([A({type:lA.apiValues,value:null,json:{type:lA.jsonValues,read:lA.read,write:lA.write,origins:{"web-document":{default:"manual",type:lA.jsonValues,read:lA.read,write:lA.write}}}})],ar.prototype,"classificationMethod",null),u([A({types:GIe,json:{write:!0}})],ar.prototype,"colorRamp",void 0),u([Me("colorRamp")],ar.prototype,"readColorRamp",null),u([A({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ar.prototype,"fadeRatio",void 0),u([A({type:[String],value:null,json:{write:!0}})],ar.prototype,"fields",null),u([A({type:Fp,value:null,json:{write:!0}})],ar.prototype,"field1",null),u([A({type:Fp,value:null,json:{write:!0}})],ar.prototype,"field2",null),u([A({type:WIe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ar.prototype,"flowTheme",null),u([A({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ar.prototype,"focus",null),u([A({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ar.prototype,"isAutoGenerated",void 0),u([A({type:Number,value:null,json:{type:Kt,write:!0}})],ar.prototype,"numClasses",null),u([A({type:VG,json:{type:VG,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ar.prototype,"lengthUnit",void 0),u([A({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ar.prototype,"maxSliderValue",void 0),u([A({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ar.prototype,"minSliderValue",void 0),u([A({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ar.prototype,"statistics",null),u([A({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ar.prototype,"standardDeviationInterval",null),u([A({type:H$.apiValues,value:null,json:{type:H$.jsonValues,read:H$.read,write:H$.write,origins:{"web-scene":{type:UG.jsonValues,write:{writer:UG.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],ar.prototype,"type",null),u([A({type:[VIe],json:{write:!0}})],ar.prototype,"visualVariables",void 0),u([A({type:QIe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ar.prototype,"univariateSymbolStyle",null),u([A({type:qIe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ar.prototype,"univariateTheme",null),ar=EN=u([B("esri.renderers.support.AuthoringInfo")],ar);const CR=new Ot({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let ya=class extends pe{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([A({type:ar,json:{write:!0}})],ya.prototype,"authoringInfo",void 0),u([A({type:CR.apiValues,readOnly:!0,json:{type:CR.jsonValues,read:!1,write:{writer:CR.write,ignoreOrigin:!0,isRequired:!0}}})],ya.prototype,"type",void 0),ya=u([B("esri.renderers.Renderer")],ya);let C2=class extends dt.ClonableMixin(pe){constructor(){super(...arguments),this.showLegend=null,this.title=null}};u([A({type:Boolean,json:{write:!0}})],C2.prototype,"showLegend",void 0),u([A({type:String,json:{write:!0}})],C2.prototype,"title",void 0),C2=u([B("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],C2);const Kse=C2,TR=new Ot({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let En=class extends pe{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(be.getLogger(this).error(".field: field must be a string value"),null):_x(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([A()],En.prototype,"index",void 0),u([A({type:TR.apiValues,readOnly:!0,json:{read:TR.read,write:{writer:TR.write,isRequired:!0}}})],En.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],En.prototype,"field",void 0),u([yi("field")],En.prototype,"castField",null),u([A({type:String,json:{write:!0}})],En.prototype,"valueExpression",void 0),u([A({type:String,json:{write:!0}})],En.prototype,"valueExpressionTitle",void 0),u([A({readOnly:!0})],En.prototype,"arcadeRequired",null),u([A({type:Kse,json:{write:!0}})],En.prototype,"legendOptions",void 0),En=u([B("esri.renderers.visualVariables.VisualVariable")],En);var IN;let jA=IN=class extends pe{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new IN({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([A({type:ze,json:{type:[Kt],write:{isRequired:!0}}})],jA.prototype,"color",void 0),u([A({type:String,json:{write:!0}})],jA.prototype,"label",void 0),u([A({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],jA.prototype,"value",void 0),u([Ne("value")],jA.prototype,"writeValue",null),jA=IN=u([B("esri.renderers.visualVariables.support.ColorStop")],jA);const JIe=jA;var CN;let zp=CN=class extends En{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((e=>!!e))).sort(((e,i)=>e.value-i.value)),this._set("stops",t)}clone(){var t;return new CN({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};u([A({readOnly:!0})],zp.prototype,"cache",null),u([A({type:["color"],json:{type:["colorInfo"]}})],zp.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],zp.prototype,"normalizationField",void 0),u([A({type:[JIe],json:{write:!0}})],zp.prototype,"stops",null),zp=CN=u([B("esri.renderers.visualVariables.ColorVariable")],zp);var TN;let yp=TN=class extends pe{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return vS(e.transparency)}writeOpacity(t,e,i){e[i]=kk(t)}clone(){return new TN({label:this.label,opacity:this.opacity,value:this.value})}};u([A({type:String,json:{write:!0}})],yp.prototype,"label",void 0),u([A({type:Number,json:{type:Kt,write:{target:"transparency",isRequired:!0}}})],yp.prototype,"opacity",void 0),u([Me("opacity",["transparency"])],yp.prototype,"readOpacity",null),u([Ne("opacity")],yp.prototype,"writeOpacity",null),u([A({type:Number,json:{write:{isRequired:!0}}})],yp.prototype,"value",void 0),yp=TN=u([B("esri.renderers.visualVariables.support.OpacityStop")],yp);const ZIe=yp;var MN;let td=MN=class extends En{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((e=>!!e))).sort(((e,i)=>e.value-i.value)),this._set("stops",t)}clone(){var t;return new MN({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};u([A({readOnly:!0})],td.prototype,"cache",null),u([A({type:["opacity"],json:{type:["transparencyInfo"]}})],td.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],td.prototype,"normalizationField",void 0),u([A({type:[ZIe],json:{write:!0}})],td.prototype,"stops",null),td=MN=u([B("esri.renderers.visualVariables.OpacityVariable")],td);var kN;let Bp=kN=class extends En{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new kN({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};u([A({readOnly:!0})],Bp.prototype,"cache",null),u([A({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Bp.prototype,"axis",void 0),u([A({type:["rotation"],json:{type:["rotationInfo"]}})],Bp.prototype,"type",void 0),u([A({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Bp.prototype,"rotationType",void 0),Bp=kN=u([B("esri.renderers.visualVariables.RotationVariable")],Bp);function YIe(t){return di(t)}var PN;let ql=PN=class extends pe{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new PN({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};u([A({type:String,json:{write:!0}})],ql.prototype,"label",void 0),u([A({type:Number,cast:di,json:{write:{isRequired:!0}}})],ql.prototype,"size",void 0),u([A({type:Number,json:{write:{isRequired:!0}}})],ql.prototype,"value",void 0),u([A({type:Boolean,json:{write:!1}})],ql.prototype,"useMinValue",void 0),u([A({type:Boolean,json:{write:!1}})],ql.prototype,"useMaxValue",void 0),ql=PN=u([B("esri.renderers.visualVariables.support.SizeStop")],ql);let JI=class extends Kse{constructor(){super(...arguments),this.customValues=null}};u([A({type:[Number],json:{write:!0}})],JI.prototype,"customValues",void 0),JI=u([B("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],JI);const ene=JI;var xd,Is;function Xg(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function C0(t){return t!=null&&!isNaN(t)&&isFinite(t)}function tne(t){return t.valueExpression?xd.Expression:t.field&&typeof t.field=="string"?xd.Field:xd.Unknown}function XIe(t,e){const i=e||tne(t),r=t.valueUnit||"unknown";return i===xd.Unknown?Is.Constant:t.stops?Is.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?Is.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?Is.Proportional:Is.Additive:Is.Identity:Is.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(xd||(xd={})),(function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"})(Is||(Is={}));const ine=()=>be.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),Wk=t=>ine().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),Qk=()=>ine().error("Use of arcade expressions requires an arcade context"),GG=new Qi,ZI=Math.PI,rne=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function sne(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((S=>S.type==="color")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Wk("ColorVariable");const s=typeof e=="number",n=s?null:e,o=n==null?void 0:n.attributes;let a=s?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let y=r.cache.compiledFunc;if(!l&&!h){const S=r.stops;return S&&S[0]&&S[0].color}if(typeof a!="number")if(h){if((i==null?void 0:i.arcade)==null)return void Qk();const S={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},E=i.arcade.arcadeUtils,C=E.getViewInfo(S),M=E.createExecContext(n,C,i.timeZone);if(!y){const P=E.createSyntaxTree(r.valueExpression);y=E.createFunction(P),r.cache.compiledFunc=y}a=E.executeFunction(y,M)}else o&&(a=o[l]);const g=r.normalizationField,_=o!=null&&g!=null?parseFloat(o[g]):void 0;if(a!=null&&(!g||s||!isNaN(_)&&_!==0)){C0(_)&&!s&&(a/=_);const S=$7(a,c);if(S){const E=S[0],C=S[1],M=E===C?r.stops[E].color:ze.blendColors(r.stops[E].color,r.stops[C].color,S[2],i!=null?i.color:void 0);return new ze(M)}}}function nne(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((S=>S.type==="opacity")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Wk("OpacityVariable");const s=typeof e=="number",n=s?null:e,o=n==null?void 0:n.attributes;let a=s?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let y=r.cache.compiledFunc;if(!l&&!h){const S=r.stops;return S&&S[0]&&S[0].opacity}if(typeof a!="number")if(h){if((i==null?void 0:i.arcade)==null)return void Qk();const S={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},E=i.arcade.arcadeUtils,C=E.getViewInfo(S),M=E.createExecContext(n,C,i.timeZone);if(!y){const P=E.createSyntaxTree(r.valueExpression);y=E.createFunction(P),r.cache.compiledFunc=y}a=E.executeFunction(y,M)}else o&&(a=o[l]);const g=r.normalizationField,_=o!=null&&g!=null?parseFloat(o[g]):void 0;if(a!=null&&(!g||s||!isNaN(_)&&_!==0)){C0(_)&&!s&&(a/=_);const S=$7(a,c);if(S){const E=S[0],C=S[1];if(E===C)return r.stops[E].opacity;{const M=r.stops[E].opacity;return M+(r.stops[C].opacity-M)*S[2]}}}}function one(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((_=>_.type==="rotation")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Wk("RotationVariable");const s=r.axis||"heading",n=s==="heading"&&r.rotationType==="arithmetic"?90:0,o=s==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a==null?void 0:a.attributes,c=r.field,{hasExpression:h}=r.cache;let y=r.cache.compiledFunc,g=null;if(!c&&!h)return g;if(h){if((i==null?void 0:i.arcade)==null)return void Qk();const _={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},S=i.arcade.arcadeUtils,E=S.getViewInfo(_),C=S.createExecContext(a,E,i.timeZone);if(!y){const M=S.createSyntaxTree(r.valueExpression);y=S.createFunction(M),r.cache.compiledFunc=y}g=S.executeFunction(y,C)}else l&&(g=l[c]);return g=typeof g!="number"||isNaN(g)?null:n+o*g,g}function KIe(t,e,i){const r=typeof e=="number",s=r?null:e,n=s==null?void 0:s.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const h=i!=null?i.scale:void 0,y=i!=null?i.view:void 0;o=h==null||y==="3d"?eCe(t):h}else if(!r)switch(t.inputValueType){case xd.Expression:{if((i==null?void 0:i.arcade)==null)return void Qk();const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},y=i.arcade.arcadeUtils,g=y.getViewInfo(h),_=y.createExecContext(s,g,i.timeZone);if(!l){const S=y.createSyntaxTree(t.valueExpression);l=y.createFunction(S),t.cache.compiledFunc=l}o=y.executeFunction(l,_);break}case xd.Field:n&&(o=n[t.field]);break;case xd.Unknown:o=null}if(!C0(o))return null;if(r||!t.normalizationField)return o;const c=n?parseFloat(n[t.normalizationField]):null;return C0(c)&&c!==0?o/c:null}function eCe(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function Jk(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((n=>n.type==="size")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Wk("SizeVariable");const s=lne(KIe(r,e,i),r,e,i,r.cache.ipData);return s==null||isNaN(s)?void 0:s}function Uo(t,e,i){return t==null?null:Xg(t)?Jk(t,e,i):C0(t)?t:null}function ane(t,e,i){return C0(i)&&t>i?i:C0(e)&&t<e?e:t}function tCe(t,e,i,r){const s=Uo(e.minSize,i,r)||e.minDataValue;return t==null&&s==null?null:(t??0)+(s??0)}function iCe(t,e,i){const r=t.stops;let s=(r==null?void 0:r.length)&&r[0].size;return s==null&&(s=t.minSize),Uo(s,e,i)}function rCe(t,e,i,r){const s=Uo(e.minSize,i,r);if(t==null)return s;const{minDataValue:n,maxDataValue:o}=e;if(n==null||o==null)return null;const a=(t-n)/(o-n),l=Uo(e.maxSize,i,r),c=r!=null?r.shape:void 0;if(t<=n)return s;if(t>=o)return l;if(s==null||l==null)return null;if(e.scaleBy==="area"&&c){const h=c==="circle",y=h?ZI*(s/2)**2:s*s,g=y+a*((h?ZI*(l/2)**2:l*l)-y);return h?2*Math.sqrt(g/ZI):Math.sqrt(g)}return s+a*(l-s)}function sCe(t,e,i,r){const s=Uo(e.minSize,i,r);if(t==null||s==null)return s;const n=r!=null?r.shape:void 0,{minDataValue:o}=e;if(o==null)return null;const a=t/o,l=Uo(e.maxSize,i,r);let c=null;return c=n==="circle"?2*Math.sqrt(a*(s/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(a*s**2):a*s,ane(c,s,l)}function nCe(t,e,i,r,s){var l,c,h;if(t==null)return null;const[n,o,a]=$7(t,s);if(n===o)return Uo((l=e.stops)==null?void 0:l[n].size,i,r);{const y=Uo((c=e.stops)==null?void 0:c[n].size,i,r),g=Uo((h=e.stops)==null?void 0:h[o].size,i,r);return y==null||g==null?null:y+(g-y)*a}}function oCe(t,e,i,r){const s=((r==null?void 0:r.resolution)??1)*jk[e.valueUnit],n=Uo(e.minSize,i,r),o=Uo(e.maxSize,i,r),{valueRepresentation:a}=e;if(t==null)return n;let l=null;return l=a==="area"?2*Math.sqrt(t/ZI)/s:a==="radius"||a==="distance"?2*t/s:t/s,ane(l,n,o)}function lne(t,e,i,r,s){switch(e.transformationType){case Is.Additive:return tCe(t,e,i,r);case Is.Constant:return iCe(e,i,r);case Is.ClampedLinear:return rCe(t,e,i,r);case Is.Proportional:return sCe(t,e,i,r);case Is.Stops:return nCe(t,e,i,r,s);case Is.RealWorldSize:return oCe(t,e,i,r);case Is.Identity:return t;case Is.Unknown:return null}}function aCe(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const s={scale:e,view:i};let n=Uo(t.minSize,GG,s),o=Uo(t.maxSize,GG,s);if(n!=null||o!=null){if(n>o){const a=o;o=n,n=a}return{minSize:n,maxSize:o}}}function lCe(t,e,i){if(!t.visualVariables)return;const r=[],s=[],n=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":s.push(l);break;case"opacity":n.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return s.forEach((l=>{const c=sne(l,e,i);r.push({variable:l,value:c})})),n.forEach((l=>{const c=nne(l,e,i);r.push({variable:l,value:c})})),a.forEach((l=>{const c=one(l,e,i);r.push({variable:l,value:c})})),o.forEach((l=>{const c=Jk(l,e,i);r.push({variable:l,value:c})})),r}function $7(t,e){if(!e)return;let i=0,r=e.length-1;return e.some(((s,n)=>t<s?(r=n,!0):(i=n,!1))),[i,r,(t-e[i])/(e[r]-e[i])]}function cCe(t,e,i){const r=["proportional","proportional","proportional"];for(const s of t){const n=s.useSymbolValue?"symbol-value":Jk(s,e,i)??"proportional";switch(s.axis){case"width":r[0]=n;break;case"depth":r[1]=n;break;case"height":r[2]=n;break;case"width-and-depth":r[0]=n,r[1]=n;break;case"all":case void 0:case null:r[0]=n,r[1]=n,r[2]=n;break;default:s.axis}}return r}const V0=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:cCe,getColor:sne,getOpacity:nne,getRotationAngle:one,getSize:Jk,getSizeForValue:lne,getSizeFromNumberOrVariable:Uo,getSizeRangeAtScale:aCe,getVisualVariableValues:lCe,viewScaleRE:rne},Symbol.toStringTag,{value:"Module"}));var LN;const q$=new Ot({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),RN=new Ot({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function HG(t){if(t!=null)return typeof t=="string"||typeof t=="number"?YIe(t):t.type==="size"?Xg(t)?t:(delete(t={...t}).type,new hi(t)):void 0}function qG(t,e,i){if(typeof t!="object")return t;const r=new hi;return r.read(t,i),r}let hi=LN=class extends En{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&rne.test(this.valueExpression)}}set index(t){Xg(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),Xg(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return tne(this)}set maxDataValue(t){t&&this.stops&&(be.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(be.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return HG(t)}readMaxSize(t,e,i){return qG(t,e,i)}set minDataValue(t){t&&this.stops&&(be.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(be.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return HG(t)}readMinSize(t,e,i){return qG(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter((e=>!!e))).sort(((e,i)=>e.value-i.value)):t&&(be.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return XIe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r!=null&&r.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new te("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?RN.read(t):null}clone(){var t,e;return new LN({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Xg(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Xg(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map((i=>i.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType===Is.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===Is.Stops){const t=this.stops;if(!t)return this;const e=t.map((r=>r.size)).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map((e=>e.value||0))}};u([A({readOnly:!0})],hi.prototype,"cache",null),u([A({type:q$.apiValues,json:{type:q$.jsonValues,origins:{"web-map":{read:!1}},read:q$.read,write:q$.write}})],hi.prototype,"axis",void 0),u([A()],hi.prototype,"index",null),u([A({type:String,readOnly:!0})],hi.prototype,"inputValueType",null),u([A({type:ene,json:{write:!0}})],hi.prototype,"legendOptions",void 0),u([A({type:Number,value:null,json:{write:!0}})],hi.prototype,"maxDataValue",null),u([A({type:Number,value:null,json:{write:!0}})],hi.prototype,"maxSize",null),u([yi("maxSize")],hi.prototype,"castMaxSize",null),u([Me("maxSize")],hi.prototype,"readMaxSize",null),u([A({type:Number,value:null,json:{write:!0}})],hi.prototype,"minDataValue",null),u([A({type:Number,value:null,json:{write:!0}})],hi.prototype,"minSize",null),u([yi("minSize")],hi.prototype,"castMinSize",null),u([Me("minSize")],hi.prototype,"readMinSize",null),u([A({type:String,json:{write:!0}})],hi.prototype,"normalizationField",void 0),u([A({readOnly:!0})],hi.prototype,"arcadeRequired",null),u([A({type:String})],hi.prototype,"scaleBy",void 0),u([A({type:[ql],value:null,json:{write:!0}})],hi.prototype,"stops",null),u([A({type:["outline"],json:{write:!0}})],hi.prototype,"target",void 0),u([A({type:String,readOnly:!0})],hi.prototype,"transformationType",null),u([A({type:["size"],json:{type:["sizeInfo"]}})],hi.prototype,"type",void 0),u([A({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],hi.prototype,"useSymbolValue",void 0),u([A({type:String,json:{write:!0}})],hi.prototype,"valueExpression",void 0),u([Me("valueExpression",["valueExpression","expression"])],hi.prototype,"readValueExpression",null),u([Ne("web-scene","valueExpression")],hi.prototype,"writeValueExpressionWebScene",null),u([A({type:["radius","diameter","area","width","distance"],json:{write:!0}})],hi.prototype,"valueRepresentation",void 0),u([A({type:RN.apiValues,json:{write:RN.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],hi.prototype,"valueUnit",void 0),u([Me("valueUnit")],hi.prototype,"readValueUnit",null),hi=LN=u([B("esri.renderers.visualVariables.SizeVariable")],hi);const uCe={color:zp,size:hi,opacity:td,rotation:Bp},hCe=new Ot({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),dCe=/^\[([^\]]+)\]$/i;let YI=class extends et{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter((i=>!!i)),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some((i=>!!i.target))&&e.sort(((i,r)=>{let s=null;return s=i.target===r.target?0:i.target?1:-1,s}));for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:s,rotationType:n}=i,o=s==null?void 0:s.match(dCe),a=o==null?void 0:o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:a})),e)return e.map((l=>{const c=hCe.read(l.type),h=uCe[c];h||(be.getLogger(this).warn(`Unknown variable type: ${c}`),r!=null&&r.messages&&r.messages.push(new Sa("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:r})));const y=new h;return y.read(l,r),y}))}writeVariables(e,i){const r=[];for(const s of e){const n=s.toJSON(i);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([A()],YI.prototype,"visualVariables",null),YI=u([B("esri.renderers.visualVariables.VisualVariableFactory")],YI);const pCe={base:En,key:"type",typeMap:{opacity:td,color:zp,rotation:Bp,size:hi}},k1=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new YI}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,n){r[s]=this._vvFactory.writeVariables(i,n)}get arcadeRequiredForVisualVariables(){var i;return((i=this.visualVariables)==null?void 0:i.some((({arcadeRequired:r})=>r)))??!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){var s;return((s=this.visualVariables)==null?void 0:s.filter((n=>n.type===i&&(typeof r=="string"?n.target===r:r!==!1||!n.target))))??[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&lo(i,r,n.field),n.normalizationField&&lo(i,r,n.normalizationField),n.valueExpression&&(fCe(n.valueExpression,i,r)||await un(i,r,n.valueExpression)))}};return u([A({types:[pCe],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),u([Me("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),u([Ne("visualVariables")],e.prototype,"writeVisualVariables",null),e=u([B("esri.renderers.mixins.VisualVariablesMixin")],e),e};function fCe(t,e,i){const r=Abe(t);return r!=null&&(lo(e,i,r),!0)}const E7=[252,146,31,255],ACe=[153,153,153,255],mCe={type:"esriSMS",style:"esriSMSCircle",size:6,color:E7,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},yCe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:E7},gCe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},vCe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},bCe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},wCe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},_Ce={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},BT=dr.fromJSON(mCe),Zk=br.fromJSON(yCe),cne=Pn.fromJSON(gCe),SCe=Ti.fromJSON(vCe);function xot(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return BT;case"polyline":return Zk;case"polygon":case"extent":return cne}return null}const $ot=dr.fromJSON(bCe),Eot=br.fromJSON(wCe),Iot=Pn.fromJSON(_Ce),xCe=so.fromSimpleMarkerSymbol(BT),$Ce=tc.fromSimpleLineSymbol(Zk),ECe=ol.fromSimpleFillSymbol(cne),ICe=new Ad({symbolLayers:new qe([new Kn({material:{color:E7},edges:new Are({size:Ei(1),color:new ze(ACe)})})])}),CCe=new tc({symbolLayers:new qe([new Xn({material:{color:new ze([0,0,0])},size:Ei(1)})])}),TCe=new ol({symbolLayers:new qe([new Kn({outline:{color:new ze([0,0,0]),size:Ei(1)}})])});function Cot(t){if(t==null)return null;switch(t.type){case"mesh":return ICe;case"point":case"multipoint":return xCe;case"polyline":return $Ce;case"polygon":case"extent":return ECe}return null}const WG="#useCIMFallbackSymbology()",id={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Hb(t,e=id){var l,c,h,y;if(!t)return{symbol:null};const{retainId:i=id.retainId,ignoreDrivers:r=id.ignoreDrivers,hasLabelingContext:s=id.hasLabelingContext,retainCIM:n=id.retainCIM,cimFallbackEnabled:o=id.cimFallbackEnabled}=e;let a=null;if(eh(t)||t instanceof Hs)a=t.clone();else if(t.type==="cim"){const g=(c=(l=t.data)==null?void 0:l.symbol)==null?void 0:c.type;switch(g){case"CIMPointSymbol":a=n?t.clone():so.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(a=CCe.clone(),(h=e==null?void 0:e.logWarning)==null||h.call(e,WG,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=TCe.clone(),(y=e==null?void 0:e.logWarning)==null||y.call(e,WG,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new te("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${g||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof br)a=tc.fromSimpleLineSymbol(t);else if(t instanceof dr)a=so.fromSimpleMarkerSymbol(t);else if(t instanceof $n)a=so.fromPictureMarkerSymbol(t);else if(t instanceof Pn)a=e.geometryType&&e.geometryType==="mesh"?Ad.fromSimpleFillSymbol(t):ol.fromSimpleFillSymbol(t);else{if(!(t instanceof Ti))return{error:new te("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};a=s?Vl.fromTextSymbol(t):so.fromTextSymbol(t)}return i&&a&&a.type!=="cim"&&(a.id=t.id),!r||a.type==="cim"||a instanceof Hs||a.symbolLayers.forEach((g=>g.ignoreDrivers=!0)),{symbol:a}}function jT(t,e,i,r){const s=une(t,{},{context:r,isLabelSymbol:!1});s!=null&&Jr(i,s,e)}function QG(t,e,i,r){const s=une(t,{},{context:r,isLabelSymbol:!0});s!=null&&(e[i]=s)}function JG(t){return eh(t)||t instanceof Hs}function MCe(t){return(t==null?void 0:t.type)==="polygon-3d"||(t==null?void 0:t.type)==="line-3d"}function une(t,e,i){var a;if(t==null)return null;const{context:r,isLabelSymbol:s}=i,n=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(n==="web-scene"&&!JG(t)){const l=Hb(t,{retainCIM:!0,hasLabelingContext:s});return l.symbol!=null?l.symbol.write(e,r):(o==null||o.push(new te("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:l.error})),null)}return gN(r==null?void 0:r.layer)&&MCe(t)?(o==null||o.push(new te("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(a=r==null?void 0:r.layer)==null?void 0:a.declaredClass}'.`,{symbol:t,context:r})),null):(n==="web-map"||n==="portal-item"&&!gN(r==null?void 0:r.layer))&&JG(t)?(o==null||o.push(new te("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function hne(t,e){return NSe(t,null,e)}const Yk={types:jre,json:{write:{writer:jT},origins:{"web-scene":{types:NV,write:{writer:jT},read:{reader:A1({types:NV})}}}}},I7=K8({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},Yk),C7={types:{base:Wr,key:"type",typeMap:{"simple-fill":af.typeMap["simple-fill"],"picture-fill":af.typeMap["picture-fill"],"polygon-3d":af.typeMap["polygon-3d"],cim:af.typeMap.cim}},json:{write:{writer:jT},origins:{"web-scene":{type:ol,write:{writer:jT}}}}},XI={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var ON;let no=ON=class extends k1(ya){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map((i=>i.collectRequiredFields(t,e))))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((t,e)=>t+JSON.stringify(e)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new ON({description:this.description,label:this.label,symbol:ie(this.symbol),visualVariables:ie(this.visualVariables),authoringInfo:ie(this.authoringInfo)})}};u([A({type:String,json:{write:!0}})],no.prototype,"description",void 0),u([A({type:String,json:{write:!0}})],no.prototype,"label",void 0),u([A(I7)],no.prototype,"symbol",void 0),u([it({simple:"simple"})],no.prototype,"type",void 0),no=ON=u([B("esri.renderers.SimpleRenderer")],no);const kCe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function DN(t){return t instanceof et}function ZG(t){return t instanceof qe?Object.keys(t.items):DN(t)?ho(t).keys():t?Object.keys(t):[]}function W$(t,e){return t instanceof qe?t.items[e]:t[e]}function PCe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function E_(t){return t?t.declaredClass:null}function dne(t,e){var y;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=ZG(t),s=ZG(e);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||PCe(t,e))return{type:"complete",oldValue:t,newValue:e};const n=s.filter((g=>!r.includes(g))),o=r.filter((g=>!s.includes(g))),a=r.filter((g=>s.includes(g)&&W$(t,g)!==W$(e,g))).concat(n,o).sort(),l=E_(t);if(l&&kCe.has(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let c;const h=DN(t)&&DN(e);for(const g of a){const _=W$(t,g),S=W$(e,g);let E;if((h||typeof _!="function"&&typeof S!="function")&&_!==S&&(_!=null||S!=null)){if(i&&i[g]&&typeof i[g]=="function")E=(y=i[g])==null?void 0:y.call(i,_,S);else if(_ instanceof Date&&S instanceof Date){if(_.getTime()===S.getTime())continue;E={type:"complete",oldValue:_,newValue:S}}else E=typeof _=="object"&&typeof S=="object"&&E_(_)===E_(S)?dne(_,S):{type:"complete",oldValue:_,newValue:S};E!=null&&(c!=null?c.diff[g]=E:c={type:"partial",diff:{[g]:E}})}}return c}function Tot(t,e){return LCe(t,e)}function LCe(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const n=r.diff[s];if(!n)return!1;r=n}}return!0}function Mot(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function RCe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&E_(t)!==E_(e)?{type:"complete",oldValue:t,newValue:e}:dne(t,e)}function Q$(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!Q$(i))return!1;for(const i of e.removed)if(!Q$(i))return!1;for(const i of e.changed)if(!Q$(i))return!1;return!0}case"partial":for(const e in t.diff)if(!Q$(t.diff[e]))return!1;return!0}}var NN;const OCe=ys()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let T2=NN=class extends dt.ClonableMixin(pe){static from(t){return Sx(NN,t)}constructor(t){super(t),this.title=null,this.order=null}};u([A({type:String,json:{write:!0}})],T2.prototype,"title",void 0),u([it(OCe)],T2.prototype,"order",void 0),T2=NN=u([B("esri.renderers.support.RendererLegendOptions")],T2);const T7=T2;let Kl=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};u([A(XI)],Kl.prototype,"value",void 0),u([A(XI)],Kl.prototype,"value2",void 0),u([A(XI)],Kl.prototype,"value3",void 0),Kl=u([B("esri.renderers.support.UniqueValue")],Kl);let Wh=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map((r=>new Kl({value:r}))):i==="object"?e[0]instanceof Kl?e:e.map((r=>new Kl(r))):null}};u([A({type:String,json:{write:!0}})],Wh.prototype,"description",void 0),u([A({type:String,json:{write:!0}})],Wh.prototype,"label",void 0),u([A(Yk)],Wh.prototype,"symbol",void 0),u([A({type:[Kl],json:{type:[[String]],read:{reader:t=>t?t.map((e=>new Kl({value:e[0],value2:e[1],value3:e[2]}))):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const s=[r.value,r.value2,r.value3].filter(os).map((n=>n.toString()));i.push(s)}e.values=i}}}})],Wh.prototype,"values",void 0),u([yi("values")],Wh.prototype,"castValues",null),Wh=u([B("esri.renderers.support.UniqueValueClass")],Wh);let Lm=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.heading=null,this.classes=null}};u([A({type:String,json:{write:!0}})],Lm.prototype,"heading",void 0),u([A({type:[Wh],json:{write:{isRequired:!0}}})],Lm.prototype,"classes",void 0),Lm=u([B("esri.renderers.support.UniqueValueGroup")],Lm);var FN;let Xl=FN=class extends pe{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new FN({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};u([A({type:String,json:{write:!0}})],Xl.prototype,"description",void 0),u([A({type:String,json:{write:!0}})],Xl.prototype,"label",void 0),u([A(I7)],Xl.prototype,"symbol",void 0),u([A(XI)],Xl.prototype,"value",void 0),Xl=FN=u([B("esri.renderers.support.UniqueValueInfo")],Xl);const YG=new Map;async function DCe(t,e){try{return{data:(await M7(t,e)).data,baseUrl:Vz(t),styleUrl:t}}catch(i){return Jc(i),null}}function NCe(t,e,i){var l;const r=e.portal!=null?e.portal:Oe.getDefault();let s;const n=`${r.url} - ${(l=r.user)==null?void 0:l.username} - ${t}`,o=YG.get(n);if(o)return o;const a=FCe(t,r,i).then((c=>(s=c,c.fetchData()))).then((c=>({data:c,baseUrl:s.itemUrl??"",styleName:t})));return YG.set(n,a),a}function FCe(t,e,i){return e.load(i).then((()=>{const r=new jr({disableExtraQuery:!0,query:`owner:${XG} AND type:${KG} AND typekeywords:"${t}"`});return e.queryItems(r,i)})).then((({results:r})=>{var o;let s=null;const n=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some((c=>c.toLowerCase()===n)))&&a.type===KG&&a.owner===XG){s=a;break}}if(!s)throw new te("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(i)}))}function pne(t,e,i){return(t==null?void 0:t.styleUrl)!=null?DCe(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?NCe(t.styleName,e,i):Promise.reject(new te("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function fne(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function zCe(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=MR(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=MR(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=MR(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function MR(t,e){var i,r;if(!ce("enable-feature:force-wosr"))return(r=(i=t.formatInfos)==null?void 0:i.find((s=>s.type===e)))==null?void 0:r.href}function M7(t,e){const i={responseType:"json",query:{f:"json"},...e};return ei(sc(t),i)}const XG="esri_en",KG="Style",BCe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var M2;const eH="uvInfos-watcher",tH="uvGroups-watcher",jCe=",",UCe=fr(Xl);function VCe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=t,a=!(!e||!i);return[{classes:(n??[]).map((l=>{var M;const{symbol:c,label:h,value:y,description:g}=l,[_,S,E]=a?((M=y==null?void 0:y.toString())==null?void 0:M.split(s||""))||[]:[y],C=[];return(e||o)&&C.push(_),i&&C.push(S),r&&C.push(E),{symbol:c,label:h,values:[C],description:g}}))}]}function hy(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let Wi=M2=class extends k1(ya){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<i.length;n++){const o=e.find((a=>a.value===i[n].value));o?RCe(o,i[n])?(s.changed.push({type:"complete",oldValue:o,newValue:i[n]}),r=!0):s.unchanged.push({oldValue:o,newValue:i[n]}):(s.added.push(i[n]),r=!0)}for(let n=0;n<e.length;n++)i.find((o=>o.value===e[n].value))||(s.removed.push(e[n]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:_x(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r!=null&&r.messages?r.messages.push(new te("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):be.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Oe.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=kd(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=g0(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?be.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?be.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void be.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?UCe(t):new Xl({value:t,symbol:Ure(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[hy(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void be.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[hy(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await Md()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void be.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const s=await Md(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this._getUniqueValueInfo(t,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce(((s,n)=>s+n.getMeshHash()),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new M2({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ie(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ie(this.visualVariables),legendOptions:ie(this.legendOptions),authoringInfo:ie(this.authoringInfo),backgroundFillSymbol:ie(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=ie(this.uniqueValueInfos),i=ie(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(ie(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map((r=>r.collectRequiredFields(t,e))),un(t,e,this.valueExpression)];lo(t,e,this.field),lo(t,e,this.field2),lo(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return pne(this.styleOrigin,{portal:this.portal}).then((t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach((r=>{const s=new Hs({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const n=new Xl({value:r.name,symbol:s});e.push(n),this._valueInfoMap[hy(r.name)]=n})),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",jCe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[hy(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(eH);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(He((()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description})),((r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(e,eH)}}_watchUniqueValueGroups(){this.removeHandles(tH);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(He((()=>({classes:i.classes})),((r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const r of i.classes??[])e.push(He((()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description})),((s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(e,tH)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of n)for(const c of l.classes??[]){const{symbol:h,label:y,values:g,description:_}=c;for(const S of g??[]){const{value:E,value2:C,value3:M}=S,P=[E];i&&P.push(C),r&&P.push(M);const D=a?P.join(s||""):P[0]??void 0;t.push(new Xl({symbol:h,label:y,value:D,description:_}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!e&&!r||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=n.map((c=>{var M;const{symbol:h,label:y,value:g,description:_}=c,[S,E,C]=o?((M=g==null?void 0:g.toString())==null?void 0:M.split(s||""))||[]:[g];return new Wh({symbol:h,label:y,description:_,values:[new Kl({value:S,value2:E,value3:C})]})})),l=[new Lm({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=e??{};let a=this._cache.compiledFunc;const l=n.arcadeUtils;if(!a){const h=l.createSyntaxTree(this.valueExpression);a=l.createFunction(h),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._valueInfoMap[hy(c)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const s=this.field2,n=this.field3,o=[];e&&o.push(i[e]),s&&o.push(i[s]),n&&o.push(i[n]),r=o.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[hy(r)]}static fromPortalStyle(t,e){const i=new M2(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||Oe.getDefault());const r=i.populateFromStyle();return r.catch((s=>{be.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",s)})),r}static fromStyleUrl(t,e){const i=new M2(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch((s=>{be.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",s)})),r}};u([A({readOnly:!0})],Wi.prototype,"_cache",null),u([it({uniqueValue:"unique-value"})],Wi.prototype,"type",void 0),u([A(C7)],Wi.prototype,"backgroundFillSymbol",void 0),u([A({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Wi.prototype,"field",null),u([yi("field")],Wi.prototype,"castField",null),u([Ne("field")],Wi.prototype,"writeField",null),u([A({type:String,value:null,json:{write:!0}})],Wi.prototype,"field2",null),u([A({type:String,value:null,json:{write:!0}})],Wi.prototype,"field3",null),u([A({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Wi.prototype,"orderByClassesEnabled",void 0),u([A({type:String,value:null,json:{write:!0}})],Wi.prototype,"valueExpression",null),u([A({type:String,json:{write:!0}})],Wi.prototype,"valueExpressionTitle",void 0),u([A({type:T7,json:{write:!0}})],Wi.prototype,"legendOptions",void 0),u([A({type:String,json:{write:!0}})],Wi.prototype,"defaultLabel",void 0),u([A(K8({...Yk},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Wi.prototype,"defaultSymbol",null),u([A({type:String,value:null,json:{write:!0}})],Wi.prototype,"fieldDelimiter",null),u([A({type:Oe,readOnly:!0})],Wi.prototype,"portal",void 0),u([Me("portal",["styleName"])],Wi.prototype,"readPortal",null),u([A({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Wi.prototype,"styleOrigin",void 0),u([Me("styleOrigin",["styleName","styleUrl"])],Wi.prototype,"readStyleOrigin",null),u([Ne("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Wi.prototype,"writeStyleOrigin",null),u([A({type:[Lm],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||VCe(e)).map((r=>Lm.fromJSON(r,i)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Wi.prototype,"uniqueValueGroups",null),u([A({type:[Xl],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Wi.prototype,"uniqueValueInfos",null),Wi=M2=u([B("esri.renderers.UniqueValueRenderer")],Wi);var zN,Jv;let bs=(Jv=class extends pe{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new zN(ie({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},zN=Jv,Jv);u([A({type:[String],json:{write:!0}})],bs.prototype,"attachmentTypes",void 0),u([A({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],bs.prototype,"attachmentsWhere",void 0),u([A({type:Boolean,json:{write:!0}})],bs.prototype,"cacheHint",void 0),u([A({type:[String],json:{write:!0}})],bs.prototype,"keywords",void 0),u([A({type:[String],json:{write:!0}})],bs.prototype,"globalIds",void 0),u([A({json:{write:!0}})],bs.prototype,"name",void 0),u([A({type:Number,json:{read:{source:"resultRecordCount"}}})],bs.prototype,"num",void 0),u([A({type:[Number],json:{write:!0}})],bs.prototype,"objectIds",void 0),u([A({type:[String],json:{write:!0}})],bs.prototype,"orderByFields",void 0),u([A({type:Boolean,json:{default:!1,write:!0}})],bs.prototype,"returnMetadata",void 0),u([A({type:[Number],json:{write:!0}})],bs.prototype,"size",void 0),u([A({type:Number,json:{read:{source:"resultOffset"}}})],bs.prototype,"start",void 0),u([Ne("start"),Ne("num")],bs.prototype,"writeStart",null),u([A({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],bs.prototype,"where",void 0),bs=zN=u([B("esri.rest.support.AttachmentQuery")],bs),bs.from=fr(bs);const Ane=ys()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),iH="percent-of-total",rH="field",Rot=t=>{let e=class extends t{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const r=!!this.normalizationField,s=this.normalizationTotal!=null;return r||s?(i=r&&rH||s&&iH||null,r&&s&&be.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==rH&&i!==iH||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return u([A({type:String,json:{name:"parameters.normalizationField",write:!0}})],e.prototype,"normalizationField",void 0),u([A({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],e.prototype,"normalizationMaxValue",void 0),u([A({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],e.prototype,"normalizationMinValue",void 0),u([A({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],e.prototype,"normalizationTotal",void 0),u([it(Ane,{name:"parameters.normalizationType"})],e.prototype,"normalizationType",null),e=u([B("esri.rest.support.NormalizationBinParametersMixin")],e),e};var BN,Zv;let Xi=(Zv=class extends pe{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new BN(ie({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},BN=Zv,Zv);u([A({type:Boolean,json:{write:!0}})],Xi.prototype,"cacheHint",void 0),u([A({type:Hl,json:{write:!0}})],Xi.prototype,"dynamicDataSource",void 0),u([A({type:String,json:{write:!0}})],Xi.prototype,"gdbVersion",void 0),u([A({type:Number,json:{write:!0}})],Xi.prototype,"geometryPrecision",void 0),u([A({type:Date})],Xi.prototype,"historicMoment",void 0),u([Ne("historicMoment")],Xi.prototype,"_writeHistoricMoment",null),u([A({type:Number,json:{write:!0}})],Xi.prototype,"maxAllowableOffset",void 0),u([A({json:{write:!0}})],Xi.prototype,"objectIds",void 0),u([A({type:[String],json:{write:!0}})],Xi.prototype,"orderByFields",void 0),u([A({type:[String],json:{write:!0}})],Xi.prototype,"outFields",void 0),u([A({type:We,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Xi.prototype,"outSpatialReference",void 0),u([A({json:{write:!0}})],Xi.prototype,"relationshipId",void 0),u([A({type:Number,json:{read:{source:"resultOffset"}}})],Xi.prototype,"start",void 0),u([Ne("start"),Ne("num")],Xi.prototype,"writeStart",null),u([A({type:Number,json:{read:{source:"resultRecordCount"}}})],Xi.prototype,"num",void 0),u([A({json:{write:!0}})],Xi.prototype,"returnGeometry",void 0),u([A({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Xi.prototype,"returnM",void 0),u([A({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Xi.prototype,"returnZ",void 0),u([A({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Xi.prototype,"where",void 0),Xi=BN=u([B("esri.rest.support.RelationshipQuery")],Xi),Xi.from=fr(Xi);const Oot=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Xi}},Symbol.toStringTag,{value:"Module"})),jN=new Ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function GCe(t,e,i,r){const s=await Zf(t);if(await k7(t,e,r),!s.addAttachment)throw new te(r,"Layer source does not support addAttachment capability");return s.addAttachment(e,i)}function k7(t,e,i){var n,o;const{attributes:r}=e,{objectIdField:s}=t;return(o=(n=t.capabilities)==null?void 0:n.data)!=null&&o.supportsAttachment?e?r?s&&r[s]?Promise.resolve():Promise.reject(new te(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new te(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new te(i,"A feature is required to add/delete/update attachments")):Promise.reject(new te(i,"this layer doesn't support attachments"))}async function HCe(t,e,i,r,s){const n=await Zf(t);if(await k7(t,e,s),!n.updateAttachment)throw new te(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(e,i,r)}async function qCe(t,e,i){const{applyEdits:r}=await Ie(()=>import("./editingSupport-QAQm3eGs.js"),[],import.meta.url),s=await t.load();let n=i;return s.type==="feature"&&s.infoFor3D&&e.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await fTe(s,e.deleteFeatures,s.globalIdField)}),r(s,s.source,e,i)}async function WCe(t,e,i){const{uploadAssets:r}=await Ie(()=>import("./editingSupport-QAQm3eGs.js"),[],import.meta.url),s=await t.load();return r(s,s.source,e,i)}async function QCe(t,e,i,r){const s=await Zf(t);if(await k7(t,e,r),!s.deleteAttachments)throw new te(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(e,i)}async function JCe(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new te(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function ZCe(t,e,i,r){var _,S,E,C;e=bs.from(e),await t.load();const s=t.source,n=t.capabilities;if(!((_=n==null?void 0:n.data)!=null&&_.supportsAttachment))throw new te(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:c,size:h,start:y,where:g}=e;if(!((S=n==null?void 0:n.operations)!=null&&S.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(h==null?void 0:h.length)>0||c||y||g))throw new te(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a!=null&&a.length||l!=null&&l.length||g))throw new te(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!s.queryAttachments)throw new te(r,"Layer source does not support queryAttachments capability",e);return!((E=n==null?void 0:n.attachment)!=null&&E.supportsOrderByFields)&&((C=e.orderByFields)!=null&&C.length)&&((e=e.clone()).orderByFields=null),s.queryAttachments(e)}async function YCe(t,e,i,r){const s=await Zf(t);if(!s.queryObjectIds)throw new te(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(ut.from(e)??t.createQuery(),i)}async function XCe(t,e,i,r){const s=await Zf(t);if(!s.queryFeatureCount)throw new te(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(ut.from(e)??t.createQuery(),i)}async function KCe(t,e,i,r){const s=await Zf(t);if(!s.queryExtent)throw new te(r,"Layer source does not support queryExtent capability");return s.queryExtent(ut.from(e)??t.createQuery(),i)}async function eTe(t,e,i,r){const s=await Zf(t);if(!s.queryRelatedFeatures)throw new te(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(Xi.from(e),i)}async function tTe(t,e,i,r){const s=await Zf(t);if(!s.queryRelatedFeaturesCount)throw new te(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(Xi.from(e),i)}async function iTe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await dz(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function rTe(t){var o,a;const e=new ut;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=(o=t.capabilities)==null?void 0:o.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=(a=t.capabilities)==null?void 0:a.data;r!=null&&r.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r!=null&&r.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:s,timeExtent:n}=t;return e.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,e}function mne(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function yne(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function sTe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function nTe(t,e,i,r){var l,c;const s=i==null?void 0:i.feature,n=!!((l=t.subtypes)!=null&&l.length);if(n&&!(i!=null&&i.excludeImpliedDomains)){const h=aTe(t,e);if(h)return h}const o=n&&oTe(t,s);if(o){const h=(c=o==null?void 0:o.domains)==null?void 0:c[e];return(h==null?void 0:h.type)==="inherited"?r:h}const a=bne(t.types,t.typeIdField,s);if(a){const h=a.domains&&a.domains[e];if(h&&(h==null?void 0:h.type)!=="inherited")return h}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const h=lTe(t,e);if(h)return h}return null}function oTe(t,e){const{subtypes:i,subtypeField:r}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!r)return null;const s=e.attributes[r];return s==null?null:i.find((n=>n.code===s))}function aTe(t,e){var o,a;const{fieldsIndex:i,subtypeField:r}=t,{name:s,type:n}=i.get(e)??{};if(!s)return null;if((r&&((o=i.get(r))==null?void 0:o.name))===s&&((a=t.subtypes)!=null&&a.length)){const l=t.subtypes.map((c=>new km({code:gne(c.code,n),name:c.name})));if(l!=null&&l.length)return new cf({codedValues:l})}return null}function lTe(t,e){var n,o;const{fieldsIndex:i}=t,{name:r,type:s}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?(n=i.get(t.typeIdField))==null?void 0:n.name:null)===r&&"types"in t&&((o=t.types)!=null&&o.length)){const a=t.types.map((l=>new km({code:gne(l.id,s),name:l.name})));return new cf({codedValues:a})}return null}function gne(t,e){return e?ute({type:e})&&typeof t=="number"?`${t}`:Vbe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function Zf(t){return(await t.load()).source}async function Dot(t,e){if(!_t)return;const i=_t.findCredential(t);if(i)return i.userId;let r;try{const s=await x7(t,e);s&&(r=await _t.checkSignInStatus(`${s}/sharing`))}catch{}return r?r.userId:null}async function vne(t,e){if(!_t||_t.findCredential(t))return;let i;try{const r=await x7(t,e);r&&(i=await _t.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await _t.getCredential(t,{signal:r})}catch{}}async function cTe(t,e,i){var s;const r=(s=t.parsedUrl)==null?void 0:s.path;r&&t.authenticationTriggerEvent===e&&await vne(r,i)}async function Not(t){var i;const e=(i=t.parsedUrl)==null?void 0:i.path;e&&uTe(t)&&await vne(e)}function uTe(t){return hTe(t)&&("serviceDefinitionExpression"in t&&UT(t.serviceDefinitionExpression)||"definitionExpression"in t&&UT(t.definitionExpression))}function hTe(t){var e;return!(!Xse(t)||!((e=t.capabilities)!=null&&e.query.supportsCurrentUser))}function UT(t){return!!(t!=null&&t.toLowerCase().includes("current_user"))}function dTe(t){return!KI(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const kR=A1({types:jre});function P7(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new Wi({defaultSymbol:kR(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map((r=>({id:r.id,symbol:kR(r.symbol,r,e)})))}):new no({symbol:kR(t.defaultSymbol,t,e)})}function pTe(t){var r,s,n;let e=(r=t.sourceJSON)==null?void 0:r.cacheMaxAge;if(!e)return!1;const i=(n=(s=t.editingInfo)==null?void 0:s.lastEditDate)==null?void 0:n.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function fTe(t,e,i){if(e==null)return null;const r=[],{objectIdField:s}=t;if(e.forEach((c=>{let h=null;if("attributes"in c){const{attributes:y}=c;h={globalId:y[i],objectId:y[s]!=null&&y[s]!==-1?y[s]:null}}else h={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||r.push(h.globalId))})),r.length===0)return null;const n=t.createQuery();n.where=r.map((c=>`${i}='${c}'`)).join(" OR "),n.returnGeometry=!1,n.outFields=[s,i],n.cacheHint=!1;const o=await kIe(Jse(t,n));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const c of l){const h=c.attributes[i],y=c.attributes[s];h!=null&&y!=null&&y!==-1&&a.set(WEe(h),y)}return a}function bne(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find((s=>{const{id:n}=s;return n!=null&&n.toString()===r.toString()}))??null}function KI(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||ATe(t)}function ATe(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map((r=>r.trim())).includes("map"))}function mTe(t,e,i){var n;const r=e==null?void 0:e.queryAttributeBins;if(!((n=e==null?void 0:e.operations)!=null&&n.supportsQueryBins)||!r)throw new te(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new te(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!sH(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new te(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new te(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new te(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new te(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new te(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new te(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!sH(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new te(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new te(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new te(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new te(i,"Layer source does not support firstDayOfWeek binning");const s=r==null?void 0:r.supportedStatistics;if(t.outStatistics&&s){const o=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:a}of t.outStatistics){const l=o.get(a);if(l&&!s[l])throw new te(i,`Layer source does not support ${a} statistic type`)}}}function sH(t,e){return t!=null&&!!(e!=null&&e[Ane.toJSON(t)])}let ng=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([A({type:String,json:{read:{source:"shapeAreaFieldName"}}})],ng.prototype,"shapeAreaField",void 0),u([A({type:String,json:{read:{source:"shapeLengthFieldName"}}})],ng.prototype,"shapeLengthField",void 0),u([A({type:String,json:{read:t=>E2e.read(t)||I2e.read(t)}})],ng.prototype,"units",void 0),ng=u([B("esri.layers.support.GeometryFieldsInfo")],ng);var UN;let og=UN=class extends pe{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new qe}clone(){return new UN({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([A({type:String,json:{write:{isRequired:!0}}})],og.prototype,"floorField",void 0),u([A({json:{read:!1,write:!1}})],og.prototype,"viewAllMode",void 0),u([A({json:{read:!1,write:!1}})],og.prototype,"viewAllLevelIds",void 0),og=UN=u([B("esri.layers.support.LayerFloorInfo")],og);const nH=new Ot({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),oH=new Ot({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Ko=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([A({json:{read:nH.read,write:nH.write}})],Ko.prototype,"cardinality",void 0),u([A({json:{name:"catalogID"}})],Ko.prototype,"catalogId",void 0),u([A({json:{read:!0,write:!0}})],Ko.prototype,"composite",void 0),u([A({json:{read:!0,write:!0}})],Ko.prototype,"id",void 0),u([A({json:{read:!0,write:!0}})],Ko.prototype,"keyField",void 0),u([A({json:{read:!0,write:!0}})],Ko.prototype,"keyFieldInRelationshipTable",void 0),u([A({json:{read:!0,write:!0}})],Ko.prototype,"name",void 0),u([A({json:{read:!0,write:!0}})],Ko.prototype,"relatedTableId",void 0),u([A({json:{read:!0,write:!0}})],Ko.prototype,"relationshipTableId",void 0),u([A({json:{read:oH.read,write:oH.write}})],Ko.prototype,"role",void 0),Ko=u([B("esri.layers.support.Relationship")],Ko);const yTe=[["binary","application/octet-stream","bin",""]];function Bot(t,e){return xne(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function jot(t,e){if(!t)return!1;const i=gTe(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function wne(t,e){return R7(_Te(t,e))}function _ne(t,e){return R7(xne(t,e))}function Uot(t,e){return $ne(wTe(t,e))}function gTe(t,e){return _ne(t.name,e)??wne(t.type,e)}function Xk(t,e,i){return wne(t,i)??_ne(e,i)}function Sne({supportedFormats:t}){return Xk("model/gltf-binary","glb",t)}function Vot(t){const e=Sne(t);return e!=null&&t.editFormats.includes(e)}function vTe({supportedFormats:t}){return Xk("model/gltf+json","gltf",t)}function bTe(t){if(!t)return null;const e=Sne(t),i=vTe(t);let r=null;for(const s of t.queryFormats){if(s===e)return s;s===i&&(r=s)}return r}function Got({supportedFormats:t}){return Xk("application/esri3do-SR_world","wld",t)}function Hot({supportedFormats:t}){return Xk("application/esri3do-SR_prj","prj",t)}function L7(t){return[...yTe,...t]}function wTe(t,e){return L7(e).find((i=>R7(i)===t))}function _Te(t,e){const i=t.toLowerCase();return L7(e).find((r=>$ne(r)===i))}function xne(t,e){const i=t.toLowerCase();return L7(e).find((r=>STe(r).some((s=>i.endsWith(s)))))}function R7(t){return t==null?void 0:t[0]}function $ne(t){return t==null?void 0:t[1].toLowerCase()}function STe(t){return(t==null?void 0:t[2].split(",").map((e=>e.toLowerCase())))??[]}function qot(t){var e;return(e=t.tables)==null?void 0:e.find((i=>i.role==="assetMaps"))}function Ze(t,e,i){return!!Ene(t,e,i)}function ag(t,e,i){return Ene(t,e,i)}function Ene(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const xTe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function $Te(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map((r=>r.toLowerCase()));return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function Ox(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map((s=>s.toLowerCase()));return!!(i!=null&&i.includes(e.toLowerCase()))}function ETe(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map((r=>r.toLowerCase()));return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_cont")),percentileDiscrete:!!(e!=null&&e.includes("percentile_disc")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function ITe(t){var i;const e=(i=t==null?void 0:t.supportedNormalizationTypes)==null?void 0:i.map((r=>r.toLowerCase()));return{field:!!(e!=null&&e.includes("field")),log:!!(e!=null&&e.includes("log")),naturalLog:!!(e!=null&&e.includes("naturallog")),percentOfTotal:!!(e!=null&&e.includes("percentoftotal")),squareRoot:!!(e!=null&&e.includes("squareroot"))}}function Ine(t,e){return{analytics:CTe(t),attachment:TTe(t),data:MTe(t),metadata:kTe(t),operations:PTe(t.capabilities,t,e),query:LTe(t,e),queryAttributeBins:DTe(t),queryRelated:RTe(t),queryTopFeatures:OTe(t),editing:NTe(t)}}function CTe(t){return{supportsCacheHint:Ox(t.advancedQueryCapabilities,"queryAnalytics")}}function TTe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Ox(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:Ze(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:Ze(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach((r=>{const s=xTe[r.name];s&&(i[s]=!!r.isEnabled)})),i}function MTe(t){return{isVersioned:Ze(t,"isDataVersioned",!1),isBranchVersioned:Ze(t,"isDataBranchVersioned",!1),supportsAttachment:Ze(t,"hasAttachments",!1),supportsM:Ze(t,"hasM",!1),supportsZ:Ze(t,"hasZ",!1)}}function kTe(t){return{supportsAdvancedFieldProperties:Ze(t,"supportsFieldDescriptionProperty",!1)}}function PTe(t,e,i){var g;const r=(t==null?void 0:t.toLowerCase().split(",").map((_=>_.trim())))??[],s=i?Wu(i):null,n=r.includes((s==null?void 0:s.serverType)==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone&&((g=e.uniqueIdInfo)==null?void 0:g.OIDFieldContainsHashValue)!==!0;let a=o&&r.includes("create"),l=o&&r.includes("delete"),c=o&&r.includes("update");const h=r.includes("changetracking"),y=e.advancedQueryCapabilities;return o&&!(a||l||c)&&(a=l=c=!0),{supportsCalculate:Ze(e,"supportsCalculate",!1),supportsTruncate:Ze(e,"supportsTruncate",!1),supportsValidateSql:Ze(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:h,supportsQuery:n,supportsQueryAnalytics:Ze(y,"supportsQueryAnalytic",!1),supportsQueryAttachments:Ze(y,"supportsQueryAttachments",!1),supportsQueryBins:Ze(y,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryTopFeatures:Ze(y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Ze(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:Ze(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Ze(e,"supportsAsyncConvert3D",!1)}}function LTe(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,s=t.archivingInfo,n=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),a=!o||n>=ce("mapserver-pbf-version-support"),l=ST(e),c=new Set((t.supportedQueryFormats??"").split(",").map((h=>h.toLowerCase().trim())));return{maxRecordCount:ag(t,"maxRecordCount",void 0),maxRecordCountFactor:ag(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:ag(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:ag(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:$Te(i),supportsCacheHint:Ze(i,"supportsQueryWithCacheHint",!1)||Ox(i,"query"),supportsCentroid:Ze(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsCurrentUser:Ze(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:Ze(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Ze(i,"supportsDisjointSpatialRel",!1),supportsDistance:Ze(i,"supportsQueryWithDistance",!1),supportsDistinct:Ze(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Ze(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&c.has("pbf"),supportsFullTextSearch:Ze(i,"supportsFullTextSearch",!1),supportsGeometryProperties:Ze(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Ze(i,"supportsHavingClause",!1),supportsHistoricMoment:Ze(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Ze(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Ze(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Ze(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:Ze(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:Ze(i,"supportsPercentileStatistics",!1),supportsQuantization:Ze(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Ze(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Ze(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:Ze(r,"allowOthersToQuery",!0),supportsQueryGeometry:Ze(t,"supportsReturningQueryGeometry",!1),supportsResultType:Ze(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!bTe(t.infoFor3D),supportsSpatialAggregationStatistics:Ze(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Ze(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Ze(t,"useStandardizedQueries",!1),supportsStatistics:Ze(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:Ze(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:Ze(i,"supportsTrueCurve",!1),tileMaxRecordCount:ag(t,"tileMaxRecordCount",void 0)}}function RTe(t){const e=t.advancedQueryCapabilities,i=Ze(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Ze(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Ox(e,"queryRelated")}}function OTe(t){return{supportsCacheHint:Ox(t.advancedQueryCapabilities,"queryTopFilter")}}function DTe(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:Ze(e,"supportsDateBin",!1),supportsFixedInterval:Ze(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:Ze(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Ze(e,"supportsFixedBoundariesBin",!1),supportsStackBy:Ze(e,"supportsStackBy",!1),supportsSplitBy:Ze(e,"supportsSplitBy",!1),supportsSnapToData:Ze(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:Ze(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:Ze(e,"supportsFirstDayOfWeek",!1),supportsNormalization:Ze(e,"supportsNormalization",!1),supportedStatistics:ETe(e),supportedNormalizationTypes:ITe(e)}}function NTe(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Ze(t,"allowGeometryUpdates",!0),supportsGlobalId:Ze(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Ze(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Ze(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Ze(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Ze(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Ze(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Ze(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Ze(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Ze(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Ze(i,"supportsAsyncApplyEdits",!1),zDefault:ag(t,"zDefault",void 0)}}function Wot(t){var e;return{operations:{supportsAppend:Ze(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:Ze(t,"supportsExportClip",!1),supportsExportFrameset:Ze(t,"supportsExportFrameset",!1),supportsMensuration:Ze(t,"supportsMensuration",!1),supportsPreviews:Ze(t,"supportsPreviews",!1),supportsUpdate:Ze(t,"supportsUpdate",!1)}}}let $h=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=Ok(e[r]);return i}writeDomains(e,i){var s;if(!e)return;const r={};for(const n of Object.keys(e))e[n]&&(r[n]=(s=e[n])==null?void 0:s.toJSON());i.domains=r}};u([A({type:Number,json:{write:!0}})],$h.prototype,"code",void 0),u([A({type:Object,json:{write:!0}})],$h.prototype,"defaultValues",void 0),u([A({json:{write:!0}})],$h.prototype,"domains",void 0),u([Me("domains")],$h.prototype,"readDomains",null),u([Ne("domains")],$h.prototype,"writeDomains",null),u([A({type:String,json:{write:!0}})],$h.prototype,"name",void 0),$h=u([B("esri.layers.support.Subtype")],$h);const Jot=Math.PI/180,Zot=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,sp=kr.radius,bl=kr.eccentricitySquared,FTe={a1:sp*bl,a2:sp*bl*sp*bl,a3:sp*bl*bl/2,a4:sp*bl*sp*bl*2.5,a5:sp*bl+sp*bl*bl/2,a6:1-bl},Yot={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:kr.radius,f:kr.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Rf.radius,f:Rf.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ru.radius,f:Ru.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ru.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var Ae;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(Ae||(Ae={}));const zTe={[Ae.WGS84]:{[Ae.CGCS2000]:lr,[Ae.GCSMARS2000]:null,[Ae.GCSMOON2000]:null,[Ae.LON_LAT]:lr,[Ae.SPHERICAL_ECEF]:C_,[Ae.SPHERICAL_MARS_PCPF]:null,[Ae.SPHERICAL_MOON_PCPF]:null,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:bv,[Ae.PLATE_CARREE]:wv,[Ae.WGS84]:lr,[Ae.WGS84_ECEF]:xv},[Ae.CGCS2000]:{[Ae.CGCS2000]:lr,[Ae.GCSMARS2000]:null,[Ae.GCSMOON2000]:null,[Ae.LON_LAT]:lr,[Ae.SPHERICAL_ECEF]:C_,[Ae.SPHERICAL_MARS_PCPF]:null,[Ae.SPHERICAL_MOON_PCPF]:null,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:bv,[Ae.PLATE_CARREE]:wv,[Ae.WGS84]:lr,[Ae.WGS84_ECEF]:xv},[Ae.GCSMARS2000]:{[Ae.CGCS2000]:null,[Ae.GCSMARS2000]:lr,[Ae.GCSMOON2000]:null,[Ae.LON_LAT]:lr,[Ae.SPHERICAL_ECEF]:null,[Ae.SPHERICAL_MARS_PCPF]:cH,[Ae.SPHERICAL_MOON_PCPF]:null,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:null,[Ae.PLATE_CARREE]:null,[Ae.WGS84]:null,[Ae.WGS84_ECEF]:null},[Ae.GCSMOON2000]:{[Ae.CGCS2000]:null,[Ae.GCSMARS2000]:null,[Ae.GCSMOON2000]:lr,[Ae.LON_LAT]:lr,[Ae.SPHERICAL_ECEF]:null,[Ae.SPHERICAL_MARS_PCPF]:null,[Ae.SPHERICAL_MOON_PCPF]:lH,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:null,[Ae.PLATE_CARREE]:null,[Ae.WGS84]:null,[Ae.WGS84_ECEF]:null},[Ae.WEB_MERCATOR]:{[Ae.CGCS2000]:I_,[Ae.GCSMARS2000]:null,[Ae.GCSMOON2000]:null,[Ae.LON_LAT]:I_,[Ae.SPHERICAL_ECEF]:jTe,[Ae.SPHERICAL_MARS_PCPF]:null,[Ae.SPHERICAL_MOON_PCPF]:null,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:lr,[Ae.PLATE_CARREE]:GTe,[Ae.WGS84]:I_,[Ae.WGS84_ECEF]:UTe},[Ae.WGS84_ECEF]:{[Ae.CGCS2000]:$v,[Ae.GCSMARS2000]:null,[Ae.GCSMOON2000]:null,[Ae.LON_LAT]:$v,[Ae.SPHERICAL_ECEF]:KTe,[Ae.SPHERICAL_MARS_PCPF]:null,[Ae.SPHERICAL_MOON_PCPF]:null,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:eMe,[Ae.PLATE_CARREE]:HTe,[Ae.WGS84]:$v,[Ae.WGS84_ECEF]:lr},[Ae.SPHERICAL_ECEF]:{[Ae.CGCS2000]:Sv,[Ae.GCSMARS2000]:null,[Ae.GCSMOON2000]:null,[Ae.LON_LAT]:Sv,[Ae.SPHERICAL_ECEF]:lr,[Ae.SPHERICAL_MARS_PCPF]:null,[Ae.SPHERICAL_MOON_PCPF]:null,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:ZTe,[Ae.PLATE_CARREE]:qTe,[Ae.WGS84]:Sv,[Ae.WGS84_ECEF]:YTe},[Ae.SPHERICAL_MARS_PCPF]:{[Ae.CGCS2000]:null,[Ae.GCSMARS2000]:hH,[Ae.GCSMOON2000]:null,[Ae.LON_LAT]:hH,[Ae.SPHERICAL_ECEF]:null,[Ae.SPHERICAL_MARS_PCPF]:lr,[Ae.SPHERICAL_MOON_PCPF]:null,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:null,[Ae.PLATE_CARREE]:null,[Ae.WGS84]:null,[Ae.WGS84_ECEF]:null},[Ae.SPHERICAL_MOON_PCPF]:{[Ae.CGCS2000]:null,[Ae.GCSMARS2000]:null,[Ae.GCSMOON2000]:uH,[Ae.LON_LAT]:uH,[Ae.SPHERICAL_ECEF]:null,[Ae.SPHERICAL_MARS_PCPF]:null,[Ae.SPHERICAL_MOON_PCPF]:lr,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:null,[Ae.PLATE_CARREE]:null,[Ae.WGS84]:null,[Ae.WGS84_ECEF]:null},[Ae.UNKNOWN]:{[Ae.CGCS2000]:null,[Ae.GCSMARS2000]:null,[Ae.GCSMOON2000]:null,[Ae.LON_LAT]:null,[Ae.SPHERICAL_ECEF]:null,[Ae.SPHERICAL_MARS_PCPF]:null,[Ae.SPHERICAL_MOON_PCPF]:null,[Ae.UNKNOWN]:lr,[Ae.WEB_MERCATOR]:null,[Ae.PLATE_CARREE]:null,[Ae.WGS84]:null,[Ae.WGS84_ECEF]:null},[Ae.LON_LAT]:{[Ae.CGCS2000]:lr,[Ae.GCSMARS2000]:lr,[Ae.GCSMOON2000]:lr,[Ae.LON_LAT]:lr,[Ae.SPHERICAL_ECEF]:C_,[Ae.SPHERICAL_MARS_PCPF]:cH,[Ae.SPHERICAL_MOON_PCPF]:lH,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:bv,[Ae.PLATE_CARREE]:wv,[Ae.WGS84]:lr,[Ae.WGS84_ECEF]:xv},[Ae.PLATE_CARREE]:{[Ae.CGCS2000]:_v,[Ae.GCSMARS2000]:null,[Ae.GCSMOON2000]:null,[Ae.LON_LAT]:_v,[Ae.SPHERICAL_ECEF]:WTe,[Ae.SPHERICAL_MARS_PCPF]:null,[Ae.SPHERICAL_MOON_PCPF]:null,[Ae.UNKNOWN]:null,[Ae.WEB_MERCATOR]:QTe,[Ae.PLATE_CARREE]:lr,[Ae.WGS84]:_v,[Ae.WGS84_ECEF]:JTe}};function Cne(t,e){var i;return(i=BTe(t,e))==null?void 0:i.projector}function BTe(t,e){if(t==null||e==null)return null;if(oh.source.spatialReference===t&&oh.dest.spatialReference===e)return oh;const i=aH(t,oh.source),r=aH(e,oh.dest);return i===Ae.UNKNOWN&&r===Ae.UNKNOWN?Ts(t,e)?oh.projector=lr:oh.projector=null:oh.projector=zTe[i][r],oh}function aH(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=xa(t,1)),kT(t)?e.spatialReferenceId=Ae.SPHERICAL_ECEF:w0(t)?e.spatialReferenceId=Ae.WGS84:Qu(t)?e.spatialReferenceId=Ae.WEB_MERCATOR:t2e(t)?e.spatialReferenceId=Ae.PLATE_CARREE:t.wkt===n2e.wkt?e.spatialReferenceId=Ae.WGS84_ECEF:t.wkid===b0.CGCS2000?e.spatialReferenceId=Ae.CGCS2000:t.wkt===Yz.wkt?e.spatialReferenceId=Ae.SPHERICAL_MARS_PCPF:t.wkt===Xz.wkt?e.spatialReferenceId=Ae.SPHERICAL_MOON_PCPF:$ie(t)?e.spatialReferenceId=Ae.GCSMARS2000:Eie(t)?e.spatialReferenceId=Ae.GCSMOON2000:e.spatialReferenceId=Ae.UNKNOWN):Ae.UNKNOWN}function lr(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function I_(t,e,i,r){i[r]=Wb*(t[e]/Ym),i[r+1]=Wb*(Tne-2*Math.atan(Math.exp(-t[e+1]/Ym))),i[r+2]=t[e+2]}function jTe(t,e,i,r){const s=t[e]/Ym,n=Tne-2*Math.atan(Math.exp(-t[e+1]/Ym)),o=Ym+t[e+2],a=Math.cos(n)*o;i[r]=Math.cos(s)*a,i[r+1]=Math.sin(s)*a,i[r+2]=Math.sin(n)*o}function UTe(t,e,i,r){I_(t,e,i,r),xv(i,r,i,r)}function VTe(t,e,i,r,s){const n=.4999999*Math.PI,o=Bn(qb*t[e+1],-n,n),a=Math.sin(o);i[r++]=qb*t[e]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function bv(t,e,i,r){VTe(t,e,i,r,kr)}function wv(t,e,i,r){i[r]=t[e]*dH,i[r+1]=t[e+1]*dH,i[r+2]=t[e+2]}function _v(t,e,i,r){i[r]=t[e]*pH,i[r+1]=t[e+1]*pH,i[r+2]=t[e+2]}function GTe(t,e,i,r){I_(t,e,i,r),wv(i,r,i,r)}function HTe(t,e,i,r){$v(t,e,i,r),wv(i,r,i,r)}function qTe(t,e,i,r){Sv(t,e,i,r),wv(i,r,i,r)}function WTe(t,e,i,r){_v(t,e,i,r),C_(i,r,i,r)}function QTe(t,e,i,r){_v(t,e,i,r),bv(i,r,i,r)}function JTe(t,e,i,r){_v(t,e,i,r),xv(i,r,i,r)}function O7(t,e,i,r,s){const n=s+t[e+2],o=qb*t[e+1],a=qb*t[e],l=Math.cos(o)*n;i[r]=Math.cos(a)*l,i[r+1]=Math.sin(a)*l,i[r+2]=Math.sin(o)*n}function lH(t,e,i,r){O7(t,e,i,r,Rf.radius)}function cH(t,e,i,r){O7(t,e,i,r,Ru.radius)}function C_(t,e,i,r){O7(t,e,i,r,kr.radius)}function D7(t,e,i,r,s){const n=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(n*n+o*o+a*a),c=T1e(a/(l===0?1:l)),h=Math.atan2(o,n);i[r++]=Wb*h,i[r++]=Wb*c,i[r]=l-s}function uH(t,e,i,r){D7(t,e,i,r,Rf.radius)}function hH(t,e,i,r){D7(t,e,i,r,Ru.radius)}function Sv(t,e,i,r){D7(t,e,i,r,kr.radius)}function ZTe(t,e,i,r){Sv(t,e,i,r),bv(i,r,i,r)}function YTe(t,e,i,r){Sv(t,e,i,r),xv(i,r,i,r)}function XTe(t,e,i,r,s){const n=qb*t[e],o=qb*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),h=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);i[r++]=(h+a)*c*Math.cos(n),i[r++]=(h+a)*c*Math.sin(n),i[r++]=(h*(1-s.eccentricitySquared)+a)*l}function xv(t,e,i,r){XTe(t,e,i,r,kr)}function $v(t,e,i,r){const s=FTe,n=t[e],o=t[e+1],a=t[e+2];let l,c,h,y,g,_,S,E,C,M,P,D,F,U,G,Q,W,X,K,de,ye;l=Math.abs(a),c=n*n+o*o,h=Math.sqrt(c),y=c+a*a,g=Math.sqrt(y),de=Math.atan2(o,n),_=a*a/y,S=c/y,U=s.a2/g,G=s.a3-s.a4/g,S>.3?(E=l/g*(1+S*(s.a1+U+_*G)/g),K=Math.asin(E),M=E*E,C=Math.sqrt(1-M)):(C=h/g*(1-_*(s.a5-U-S*G)/g),K=Math.acos(C),M=1-C*C,E=Math.sqrt(M)),P=1-kr.eccentricitySquared*M,D=kr.radius/Math.sqrt(P),F=s.a6*D,U=h-D*C,G=l-F*E,W=C*U+E*G,Q=C*G-E*U,X=Q/(F/P+W),K+=X,ye=W+Q*X/2,a<0&&(K=-K),i[r++]=Wb*de,i[r++]=Wb*K,i[r]=ye}function KTe(t,e,i,r){$v(t,e,i,r),C_(i,r,i,r)}function eMe(t,e,i,r){$v(t,e,i,r),bv(i,r,i,r)}const oh={source:{spatialReference:null,spatialReferenceId:Ae.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Ae.UNKNOWN,metersPerUnit:1},projector:lr},qb=w1(1),Wb=Ete(1),Tne=.5*Math.PI,Ym=kr.radius,dH=Ym*Math.PI/180,pH=180/(Ym*Math.PI);function Dx(t,e,i,r,s,n,o=Math.floor(t.length/3)){const a=Cne(e,s);if(a==null)return!1;if(a===lr){if(t===r&&i===n)return!0;const c=i+3*o;for(let h=i,y=n;h<c;h++,y++)r[y]=t[h];return!0}const l=i+3*o;for(let c=i,h=n;c<l;c+=3,h+=3)a(t,c,r,h);return!0}const Xot=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Dx},Symbol.toStringTag,{value:"Module"}));function fH(t,e,i,r,s,n){return J$[0]=t,J$[1]=e,J$[2]=i,Dx(J$,r,0,s,n,0)}const J$=Wf();let Z$=0,PR=class VN{static fromGE(e){const i=new VN;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=Z$++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=Z$++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=Z$++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=Z$++}getInverse(){const e=new VN;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},VT=class k2{static cacheKey(e,i){var r,s,n,o,a,l;return[((r=e.wkid)==null?void 0:r.toString())??"-1",((s=e.wkt)==null?void 0:s.toString())??"",((n=e.wkt2)==null?void 0:n.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((a=i.wkt)==null?void 0:a.toString())??"",((l=i.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(e){const i=new k2;let r="";for(const s of e.steps){const n=PR.fromGE(s);i.steps.push(n),r+=n.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof PR?this.steps.push(i):this.steps.push(new PR({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new k2;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[k2.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const n of this.steps)r+=n.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[k2.cacheKey(e,i)];return s===void 0?null:s}},oc=null,Ff=null,T_=null,eC={};const N7=new m1;function Yf(){return!!oc&&Jz()}function Mne(){return!!Yf()||(mt(N7),zf(),!1)}function kne(t,e){return!t||!e||cc(t,e)||Mne()}function tMe(t,e){return!cc(t,e)&&!Yf()}function zf(t){return T_==null&&(T_=Promise.all([vie(),Ie(()=>import("./geometryEngineBase-BV9OKxkg.js"),__vite__mapDeps([32,33,34]),import.meta.url).then((e=>e.g)),Ie(()=>import("./hydrated-qxTT1omX.js"),[],import.meta.url)])),T_.then((([,e,{hydratedAdapter:i}])=>{ir(t),Ff=i,oc=e.default,oc._enableProjection(Ywe),N7.notify()}))}function Xf(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:(C2e(t),GN(Ff,t,t[0].spatialReference,e,i,r)):(Bb(t),GN(Ff,[t],t.spatialReference,e,i,r)[0])}function GN(t,e,i,r,s=null,n=null){if(i==null||r==null)return e;if(cc(i,r,s))return e.map((o=>tC(o,i,r)));if(s==null&&kT(i))return e.map((o=>tC(o,i,We.WGS84))).map((o=>ES(o,r)));if(s==null&&kT(r))return e.map((o=>ES(o,We.WGS84))).map((o=>tC(o,We.WGS84,r)));if(s==null){const o=VT.cacheKey(i,r);eC[o]!==void 0?s=eC[o]:((s=Lne(i,r,void 0))==null&&(s=new VT),eC[o]=s)}if(oc==null||t==null)throw new Kk;return n!=null?oc._project(t,e,i,r,s,n):oc._project(t,e,i,r,s)}function iMe(t,e){const i=Pne([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Pne(t,e){if(!Yf()){for(const i of t)if(i!=null&&!Ts(i.spatialReference,e)&&ma(i.spatialReference)&&ma(e)&&!cc(i.spatialReference,e))return mt(N7),{pending:zf(),geometries:null}}return{pending:null,geometries:t.map((i=>i==null?null:Ts(i.spatialReference,e)?i:ma(i.spatialReference)&&ma(e)?ES(i,e):null))}}function Lne(t,e,i=null){if(t==null||e==null)return null;if(oc==null||Ff==null)throw new Kk;const r=oc._getTransformation(Ff,t,e,i,i==null?void 0:i.spatialReference);return r!==null?VT.fromGE(r):null}function rMe(t,e,i=null){if(oc==null||Ff==null)throw new Kk;const r=oc._getTransformationBySuitability(Ff,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const s=[];for(const n of r)s.push(VT.fromGE(n));return s}return[]}let Kk=class extends te{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function sMe(){oc=null,Ff=null,T_=null,eC={}}const nMe={get loadPromise(){return T_}};function ES(t,e){try{const i=Xf(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=dse(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof Kk))throw i;return null}}async function Rne(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await F7(r,e,null,i),ES(t,e)}function cc(t,e,i){return!i&&(!!Ts(t,e)||ma(t)&&ma(e)&&!!Cne(t,e))}function oMe(t,e){if(Ts(t,e))return!0;if(!ma(t)||!ma(e))return!1;const i=w0(t)||Qu(t)||gV(t),r=w0(e)||Qu(e)||gV(e);return i&&r}async function F7(t,e,i,r){if(Yf())return rU(r);if(Array.isArray(t)){for(const{source:s,dest:n,geographicTransformation:o}of t)if(s&&n&&!cc(s,n,o))return zf(r)}else if(t&&e&&!cc(t,e,i))return zf(r);return rU(r)}function tC(t,e,i){return t?"x"in t?One(t,e,new ct,i,0):"xmin"in t?Bne(t,e,new Rt,i,0):"rings"in t?zne(t,e,new zi,i,0):"paths"in t?Nne(t,e,new Tr,i,0):"points"in t?Dne(t,e,new Za,i,0):null:null}function aMe(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&One(t,t.spatialReference,e,i,r)!=null}function One(t,e,i,r,s){Tn[0]=t.x,Tn[1]=t.y;const n=t.z;return Tn[2]=n!==void 0?n:s,Dx(Tn,e,0,Tn,r,0)?(i.x=Tn[0],i.y=Tn[1],i.spatialReference=r,n!==void 0||Of(r)?(i.z=Tn[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function lMe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Dne(t,t.spatialReference,e,i,r)!=null}function Dne(t,e,i,r,s){const{points:n,hasZ:o,hasM:a}=t,l=[],c=n.length,h=[];for(const g of n)h.push(g[0],g[1],o?g[2]:s);if(!Dx(h,e,0,h,r,0,c))return null;const y=o||Of(r);for(let g=0;g<c;++g){const _=3*g,S=h[_],E=h[_+1];y&&a?l.push([S,E,h[_+2],n[g][3]]):y?l.push([S,E,h[_+2]]):a?l.push([S,E,n[g][2]]):l.push([S,E])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function cMe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Nne(t,t.spatialReference,e,i,r)!=null}function Nne(t,e,i,r,s){const{paths:n,hasZ:o,hasM:a}=t,l=[];if(!jne(n,o??!1,a??!1,e,l,r,s))return null;const c=o||Of(r);return i.paths=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function Fne(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&zne(t,t.spatialReference,e,i,r)!=null}function zne(t,e,i,r,s){const{rings:n,hasZ:o,hasM:a}=t,l=[];if(!jne(n,o??!1,a??!1,e,l,r,s))return null;const c=o||Of(r);return i.rings=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function uMe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Bne(t,t.spatialReference,e,i,r)!=null}function Bne(t,e,i,r,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:h}=t,y=c?t.zmin:s;if(!fH(n,o,y,e,Tn,r))return null;const g=c||Of(r);i.xmin=Tn[0],i.ymin=Tn[1],g&&(i.zmin=Tn[2]);const _=c?t.zmax:s;return fH(a,l,_,e,Tn,r)?(i.xmax=Tn[0],i.ymax=Tn[1],g&&(i.zmax=Tn[2]),h&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function jne(t,e,i,r,s,n,o=0){const a=new Array;for(const h of t)for(const y of h)a.push(y[0],y[1],e?y[2]:o);if(!Dx(a,r,0,a,n,0))return!1;let l=0;s.length=0;const c=e||Of(n);for(const h of t){const y=new Array;for(const g of h)c&&i?y.push([a[l++],a[l++],a[l++],g[3]]):c?y.push([a[l++],a[l++],a[l++]]):i?(y.push([a[l++],a[l++],g[2]]),l++):(y.push([a[l++],a[l++]]),l++);s.push(y)}return!0}const Tn=Wf(),eat=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:cc,getTransformation:Lne,getTransformations:rMe,initializeProjection:F7,isEqualBaseGCS:oMe,isLoaded:Yf,isLoadedOrLoad:Mne,isLoadedOrLoadFor:kne,load:zf,project:Xf,projectExtent:uMe,projectMany:GN,projectMultipoint:lMe,projectOrLoad:iMe,projectOrLoadMany:Pne,projectPoint:aMe,projectPolygon:Fne,projectPolyline:cMe,projectWithZConversion:Rne,projectWithoutEngine:tC,requiresLoad:tMe,test:nMe,tryProjectWithZConversion:ES,unload:sMe},Symbol.toStringTag,{value:"Module"}));async function hMe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Gg(t);const i=We.WGS84;return await F7(e,i),Xf(t,i)}function dMe(t,e){if(!z7(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function z7(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function tat(t){return z7(t,B7.HOSTED_SERVICE)}function pMe(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function iat(t,e,i){i?dMe(t,e):pMe(t,e)}async function rat(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return hMe(i)}const B7={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function fMe(t){var l;const{portal:e,isOrgItem:i,itemControl:r}=t,s=(l=e.user)==null?void 0:l.privileges;let n=!s||s.includes("features:user:edit"),o=!!i&&!!(s!=null&&s.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:a}}}const AMe=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(qe.ofType(Fc)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=We.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:s,operations:n,editing:o}=i;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||n.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(UT(this.serviceDefinitionExpression)||UT(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(pTe(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,r){return Ine(r,this.url)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=ie(i),{operations:s,editing:n}=r;return KI(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=n.supportsDeleteByOthers=n.supportsGeometryUpdate=n.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=n.supportsGeometryUpdate=!0),r)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,r){return mne(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||KI(this))return!1;const{operations:r,editing:s}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:s}=i;return KI(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return yne(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}readUniqueIdFields(i,r){var s;return(s=r.uniqueIdInfo)!=null&&s.OIDFieldContainsHashValue?r.uniqueIdInfo.fields:null}set url(i){if(i==null)return void this._set("url",i);const r=Twe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:be.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,n){Mwe(this,i,null,r,n)}readVersion(i,r){return sTe(r)}get isUrlHostModified(){var o;const{loaded:i,url:r,_isUrlHostModified:s}=this;if(s)return!0;if(!i||!r||this.originIdOf("url")<xt.USER)return!1;const n=(o=this.sourceJSON)==null?void 0:o.preferredHost;if(!n||!Ou(r,`https://${n}`,!0))return!1;for(let a=xt.USER-1;a>=xt.PORTAL_ITEM;a--){const l=this.getAtOrigin("url",oS(a));if(l)return!Ou(r,l,!0)}return!1}applyPreferredHost(i){const{url:r,portalItem:s}=this;!r||vN(s)}applyHostFromPortalItem(){const{url:i,portalItem:r}=this;if(!i||this.originIdOf("url")===xt.USER||!(r!=null&&r.url)||!vN(r)||!z7(r,B7.HOSTED_SERVICE)||Ou(i,r.url,!0)||!this._isUrlHostModificationEnabled)return;const s=vwe(r.url);this._set("url",Kte(i,s)),this._isUrlHostModified=!0}};return u([A({readOnly:!0})],e.prototype,"authenticationTriggerEvent",null),u([A({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),u([A({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),u([Me("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),u([A(gT("dateFieldsTimeReference"))],e.prototype,"dateFieldsTimeZone",void 0),u([A({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),u([A({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),u([A({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),u([A({readOnly:!0,type:xh})],e.prototype,"editFieldsInfo",void 0),u([A({readOnly:!0})],e.prototype,"editingInfo",void 0),u([Me("editingInfo")],e.prototype,"readEditingInfo",null),u([A({readOnly:!0})],e.prototype,"effectiveCapabilities",null),u([A()],e.prototype,"effectiveEditingEnabled",null),u([A((()=>{const i=ie(wIe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),u([A()],e.prototype,"fieldsIndex",void 0),u([A({type:og,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Gi}}})],e.prototype,"floorInfo",void 0),u([A({type:Rt,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),u([A()],e.prototype,"gdbVersion",void 0),u([A({readOnly:!0,type:ng,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),u([A({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:jN.read}}}})],e.prototype,"geometryType",void 0),u([A({type:String})],e.prototype,"globalIdField",void 0),u([Me("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),u([A({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),u([A({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),u([A({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),u([A({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),u([A({readOnly:!0,type:Yn})],e.prototype,"heightModelInfo",void 0),u([A({type:Date})],e.prototype,"historicMoment",void 0),u([A({type:qe.ofType(Fc),readOnly:!0})],e.prototype,"indexes",void 0),u([A({readOnly:!0})],e.prototype,"isTable",void 0),u([Me("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),u([A({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),u([A($Ie)],e.prototype,"maxScale",void 0),u([Me("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),u([A(xIe)],e.prototype,"minScale",void 0),u([Me("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),u([A({type:String})],e.prototype,"objectIdField",void 0),u([Me("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),u([A(gT("preferredTimeReference"))],e.prototype,"preferredTimeZone",void 0),u([A({type:[Ko],readOnly:!0})],e.prototype,"relationships",void 0),u([A({type:Boolean})],e.prototype,"returnM",void 0),u([A({type:Boolean})],e.prototype,"returnZ",void 0),u([A({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),u([A({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),u([Me("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),u([A({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),u([A()],e.prototype,"sourceJSON",void 0),u([A({type:We,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),u([A({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),u([A({type:[$h],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"subtypes",void 0),u([A({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),u([A({type:[String],readOnly:!0})],e.prototype,"uniqueIdFields",void 0),u([Me("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],e.prototype,"readUniqueIdFields",null),u([A(vIe)],e.prototype,"url",null),u([Ne("url")],e.prototype,"writeUrl",null),u([A({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),u([Me("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),u([A({readOnly:!0})],e.prototype,"isUrlHostModified",null),e=u([B("esri.layers.mixins.FeatureLayerBase")],e),e};let Jp=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};u([A({type:String,json:{write:!0}})],Jp.prototype,"expression",void 0),u([A({type:String,json:{write:!0}})],Jp.prototype,"title",void 0),u([A({type:String,json:{write:!0}})],Jp.prototype,"returnType",void 0),Jp=u([B("esri.layers.support.ExpressionInfo")],Jp);var HN,Yv;let Mn=(Yv=class extends pe{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new HN({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:ie(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},HN=Yv,Yv);u([A({type:Boolean,json:{write:!0}})],Mn.prototype,"isAutoGenerated",void 0),u([A({type:String,json:{write:!0}})],Mn.prototype,"name",void 0),u([A({type:String,json:{write:!0}})],Mn.prototype,"alias",void 0),u([A({type:String,json:{write:!0}})],Mn.prototype,"onStatisticField",void 0),u([A({type:Jp,json:{write:!0}})],Mn.prototype,"onStatisticExpression",void 0),u([A({type:String,json:{write:!0}})],Mn.prototype,"statisticType",void 0),Mn=HN=u([B("esri.layers.support.AggregateField")],Mn);let bf=class extends pe{constructor(){super(...arguments),this.type=null}};u([A({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],bf.prototype,"type",void 0),bf=u([B("esri.layers.support.FeatureReduction")],bf);const j7="__begin__",U7="__end__",mMe=new RegExp(j7,"ig"),yMe=new RegExp(U7,"ig"),AH=new RegExp("^"+j7,"i"),mH=new RegExp(U7+"$","i"),GT='"',gMe=GT+" + ",vMe=" + "+GT;function bMe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function wMe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function V7(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=bMe(t.labelExpression),e.type="conventional"),e}function _Me(t){const e=V7(t);if(!e)return null;switch(e.type){case"conventional":return qN(e.expression);case"arcade":return e.expression}return null}function SMe(t){const e=V7(t);if(!e)return null;switch(e.type){case"conventional":return $Me(e.expression);case"arcade":return Une(e.expression)}return null}function qN(t){let e;return t?(e=Hf(t,(i=>j7+'$feature["'+i+'"]'+U7)),e=AH.test(e)?e.replace(AH,""):GT+e,e=mH.test(e)?e.replace(mH,""):e+GT,e=e.replaceAll(mMe,gMe).replaceAll(yMe,vMe)):e='""',e}const xMe=/^\s*\{([^}]+)\}\s*$/i;function $Me(t){const e=t==null?void 0:t.match(xMe);return(e==null?void 0:e[1].trim())||null}const EMe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,IMe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,CMe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Une(t){if(!t)return null;let e=EMe.exec(t)||IMe.exec(t);return e?e[1]||e[3]:(e=CMe.exec(t),e?e[2]:null)}var WN,Xv;let Qh=(Xv=class extends pe{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?qN(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=qN(this.value)),e!=null&&(i[r]=e)}clone(){return new WN({expression:this.expression,title:this.title,value:this.value})}},WN=Xv,Xv);u([A({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Qh.prototype,"expression",void 0),u([Me("expression",["expression","value"])],Qh.prototype,"readExpression",null),u([Ne("expression")],Qh.prototype,"writeExpression",null),u([A({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qh.prototype,"title",void 0),u([A({json:{read:!1,write:!1}})],Qh.prototype,"value",void 0),Qh=WN=u([B("esri.layers.support.LabelExpressionInfo")],Qh);var QN;const Y$=new Ot({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function X$(t,e,i){return{enabled:!gN(i==null?void 0:i.layer)}}function Vne(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function TMe(t){return(t==null?void 0:t.type)==="map-image"}function Gne(t){var e,i;return!!TMe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function MMe(t){return Vne(t)||Gne(t==null?void 0:t.layer)}var Kv;let Ki=(Kv=class extends pe{static evaluateWhere(e,i){const r=(s,n,o)=>{switch(n){case"=":return s==o;case"<>":return s!=o;case">":return s>o;case">=":return s>=o;case"<":return s<o;case"<=":return s<=o}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return r(i[s[0]],s[1],s[2]);if(s.length===7){const n=r(i[s[0]],s[1],s[2]),o=s[3],a=r(i[s[4]],s[5],s[6]);switch(o){case"AND":return n&&a;case"OR":return n||a}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=SCe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=wMe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=Une(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,s){if(e==null&&this.labelExpression!=null&&Vne(s))e=new Qh({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(s);n.expression&&(i[r]=n)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return V7(this)}getLabelExpressionArcade(){return _Me(this)}getLabelExpressionSingleField(){return SMe(this)}hash(){return JSON.stringify(this)}clone(){return new QN({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ie(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ie(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},QN=Kv,Kv);u([A({type:String,json:{write:!0}})],Ki.prototype,"name",void 0),u([A({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:X$}}}}})],Ki.prototype,"allowOverrun",void 0),u([A({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:X$}}}}})],Ki.prototype,"deconflictionStrategy",void 0),u([A({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&Gne(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Ki.prototype,"labelExpression",void 0),u([Me("labelExpression")],Ki.prototype,"readLabelExpression",null),u([Ne("labelExpression")],Ki.prototype,"writeLabelExpression",null),u([A({type:Qh,json:{write:{overridePolicy:(t,e,i)=>MMe(i)?{allowNull:!0}:{enabled:!1}}}})],Ki.prototype,"labelExpressionInfo",void 0),u([Ne("labelExpressionInfo")],Ki.prototype,"writeLabelExpressionInfo",null),u([A({type:Y$.apiValues,json:{type:Y$.jsonValues,read:Y$.read,write:Y$.write}})],Ki.prototype,"labelPlacement",void 0),u([A({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Ki.prototype,"labelPosition",void 0),u([A({type:Number})],Ki.prototype,"maxScale",void 0),u([Ne("maxScale")],Ki.prototype,"writeMaxScale",null),u([A({type:Number})],Ki.prototype,"minScale",void 0),u([Ne("minScale")],Ki.prototype,"writeMinScale",null),u([A({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:X$}}}}})],Ki.prototype,"repeatLabel",void 0),u([A({type:Number,cast:di,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:X$}}}}})],Ki.prototype,"repeatLabelDistance",void 0),u([A({types:FSe,json:{origins:{"web-scene":{types:zSe,write:QG,default:null}},write:QG,default:null}})],Ki.prototype,"symbol",void 0),u([A({type:Boolean,json:{write:!0}})],Ki.prototype,"useCodedValues",void 0),u([A({type:String,json:{write:!0}})],Ki.prototype,"where",void 0),Ki=QN=u([B("esri.layers.support.LabelClass")],Ki);var JN;let Wl=JN=class extends pe{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new JN({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};u([A({type:String,json:{write:!0}})],Wl.prototype,"description",void 0),u([A({type:String,json:{write:!0}})],Wl.prototype,"label",void 0),u([A({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Wl.prototype,"minValue",void 0),u([A({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Wl.prototype,"maxValue",void 0),u([A(I7)],Wl.prototype,"symbol",void 0),Wl=JN=u([B("esri.renderers.support.ClassBreakInfo")],Wl);var ZN;const Hne="log",iC="percent-of-total",rC="field",K$=new Ot({esriNormalizeByLog:Hne,esriNormalizeByPercentOfTotal:iC,esriNormalizeByField:rC}),kMe=fr(Wl);let is=ZN=class extends k1(ya){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map((s=>{const n=new Wl;return n.read(s,i),n.minValue==null&&(n.minValue=r),n.maxValue==null&&(n.maxValue=n.minValue),r=n.maxValue,n}))}writeClassBreakInfos(t,e,i,r){const s=t.map((n=>n.write({},r)));this._areClassBreaksConsecutive()&&s.forEach((n=>delete n.classMinValue)),e[i]=s}castField(t){return t==null?t:typeof t=="function"?(be.getLogger(this).error(".field: field must be a string value"),null):_x(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&rC||i&&iC||null,e&&i&&be.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==rC&&t!==iC||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new Wl({minValue:t,maxValue:e,symbol:Ure(i)}):kMe(ie(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===t&&s[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&be.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await Md()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void be.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const s=await Md(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach((e=>{e.symbol&&t.push(e.symbol)})),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce(((r,s)=>r+s.getMeshHash()),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new ZN({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ie(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ie(this.visualVariables),legendOptions:ie(this.legendOptions),authoringInfo:ie(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map((r=>r.collectRequiredFields(t,e))),un(t,e,this.valueExpression)];lo(t,e,this.field),lo(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=e??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=n.arcadeUtils;if(!l){const y=c.createSyntaxTree(a);l=c.createFunction(y),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const h=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let s=parseFloat(i[e]);if(r){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Hne)s=Math.log(s)*Math.LOG10E;else if(r!==iC||n==null||isNaN(n)){if(r===rC&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};u([A(C7)],is.prototype,"backgroundFillSymbol",void 0),u([A({type:[Wl],json:{write:{isRequired:!0}}})],is.prototype,"classBreakInfos",void 0),u([Me("classBreakInfos")],is.prototype,"readClassBreakInfos",null),u([Ne("classBreakInfos")],is.prototype,"writeClassBreakInfos",null),u([A({type:String,json:{write:!0}})],is.prototype,"defaultLabel",void 0),u([A(Yk)],is.prototype,"defaultSymbol",void 0),u([A({type:String,json:{write:!0}})],is.prototype,"field",void 0),u([yi("field")],is.prototype,"castField",null),u([A({type:Boolean})],is.prototype,"isMaxInclusive",void 0),u([A({type:T7,json:{write:!0}})],is.prototype,"legendOptions",void 0),u([A({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],is.prototype,"minValue",null),u([A({type:String,json:{write:!0}})],is.prototype,"normalizationField",void 0),u([A({type:Number,json:{write:!0}})],is.prototype,"normalizationTotal",void 0),u([A({type:K$.apiValues,value:null,json:{type:K$.jsonValues,read:K$.read,write:K$.write}})],is.prototype,"normalizationType",null),u([it({classBreaks:"class-breaks"})],is.prototype,"type",void 0),u([A({type:String,json:{write:!0}})],is.prototype,"valueExpression",void 0),u([A({type:String,json:{write:!0}})],is.prototype,"valueExpressionTitle",void 0),is=ZN=u([B("esri.renderers.ClassBreaksRenderer")],is);const YN=-3,PMe=YN-1;var Jh;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(Jh||(Jh={}));let LMe=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear()}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const r=this._db.get(e.id+i);return(r==null?void 0:r.size)??0}put(e,i,r,s,n){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,Jh.ALL)),s>this._maxSize)return void this._notifyRemove(i,r,s,Jh.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${i}`),void this._notifyRemove(i,r,0,Jh.ALL);const a=1+Math.max(n,PMe)-YN;this._db.set(i,new RMe(r,s,a)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,i,r,s){i=e.id+i;const n=this._db.get(i);if(n&&n.entry===r){for(this._size-=n.size,e.size-=n.size;s>this._maxSize;){const o=this._notifyRemove(i,r,s,Jh.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);s=o}n.size=s,this._size+=s,e.size+=s,this._checkSize()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach(((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forEach((c=>{const{id:h,name:y}=c;if(a.startsWith(h)){const g=i[y]||0;i[y]=g+o.size}}))}));const s={};this._users.forEach((o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,s[a]=Math.round(100*o.hitRate)+"%"}else s[a]="0%"}));const n=Object.keys(i);n.sort(((o,a)=>i[a]-i[o])),n.forEach((o=>e[o]=Math.round(i[o]/2**20)+"MB / "+s[o]));for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+YN-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach((e=>e.resetHitRate()))}clear(e){const i=e.id;this._db.forEach(((r,s)=>{s.startsWith(i)&&(this._size-=r.size,this._db.delete(s),this._notifyRemove(s,r.entry,r.size,Jh.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,i)=>this._notifyRemove(i,e.entry,e.size,Jh.ALL))),this._users.forEach((e=>e.size=0)),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,s){var a;const n=(a=this._users.get(e.split(LR)[0]))==null?void 0:a.removeFunc,o=n==null?void 0:n(i,s,r);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach(((e,i)=>this._checkSizeLimits(e,i))),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const s=i==null?void 0:i.id;let n=!0;for(;n;){n=!1;for(const[o,a]of this._db)if(a.lifetime===0&&(!s||o.startsWith(s))){const l=i??this._users.get(o.split(LR)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return;n||(n=this._db.has(o))}}for(const[o,a]of this._db)if(!s||o.startsWith(s)){const l=i??this._users.get(o.split(LR)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const s=this._notifyRemove(e,i.entry,i.size,Jh.SOME);s!=null&&s>0&&(this._size+=s,r&&(r.size+=s),i.lives=i.lifetime,i.size=s,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},RMe=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const LR=":";let qne=class{constructor(e,i){this.removeFunc=i,this._storage=new LMe,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},yH=class Wne{static parse(e,i,r){const s=[],n=[],o=e.split(";");for(let a=0;a<o.length;a++){const l=o[a];if(l){if(l.includes("po:")){const c=l.slice(3).split("|");if(c.length===3){const[h,y,g]=c,_=DMe(h,y,g);_&&n.push(_)}}else if(l.includes("|")){for(const c of l.split("|"))if(i.has(c)){s.push(c);break}}else if(i.has(l))s.push(l);else if(a===0){s.length=0,s.push(NMe(r));break}}}return new Wne(s,n)}constructor(e,i){this.partNames=e,this.overrides=i}};function OMe(t,e){if(t==="DashTemplate")return e.split(" ").map((i=>Number(i)));if(t==="Color"){const i=new ze(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function DMe(t,e,i){return{primitiveName:t,propertyName:e,value:OMe(e,i),defaultValue:null}}function NMe(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}let Qne=class XN{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new te(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new XN(this.major,this.minor,this._context)}static parse(e,i=""){const[r,s]=e.split("."),n=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!n.test(r))throw new te((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(s!=null&&s.match)||!n.test(s))throw new te((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(s,10);return new XN(o,a,i)}};var eb;let Zc=(eb=class{},eb.instance=new Go("Etc/UTC"),eb);function FMe(t){return t instanceof B0?t===Zc.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function cat(t){return FMe(t)?Zc.instance:t}function zMe(t){return"timeZone"in t}function BMe(t){return"timeZone"in t}function jMe(t){return"dateFieldsTimeZone"in t}const UMe=new Map;let IS=class sC{static fromJSON(e){return new sC(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new sC(e.fields??[],vH(e))}static fromLayerJSON(e){return new sC(e.fields??[],vH(e))}constructor(e=[],i){var s;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const n of this.fields){const o=n==null?void 0:n.name,a=gH(o);if(o&&a){const l=vm(o);this._fieldsMap.set(o,n),this._fieldsMap.set(l,n),this._normalizedFieldsMap.set(a,n),r.push(`${l}:${n.type}:${(s=this._timeZoneByFieldName)==null?void 0:s.get(o)}`),_z(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):cte(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),KU(n)||eV(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)KU(e)||eV(e)||e.nullable||Lbe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(vm(e))??this._normalizedFieldsMap.get(gH(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(be.getLogger("esri.layers.support.FieldsIndex").errorOnce(new te("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Vu):Jne.has(i.type)?Lf:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===Lf?Zc.instance:i===Vu?ms.utcInstance:F0(UMe,i,(()=>Go.create(i))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return hte(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map((e=>uS(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function vm(t){return t.trim().toLowerCase()}function gH(t){var e;return((e=vbe(t))==null?void 0:e.toLowerCase())??""}const Jne=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function vH(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:s}=t,n=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=jMe(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?yI(t.dateFieldsTimeReference):null,l=s?zMe(s)?s.timeZone??a:s.dateFieldsTimeReference?yI(s.dateFieldsTimeReference):a??Vu:null,c=r?BMe(r)?r.timeZone??a:r.timeReference?yI(r.timeReference):a:null,h=new Map([[vm((s==null?void 0:s.creationDateField)??""),l],[vm((s==null?void 0:s.editDateField)??""),l],[vm(n),c],[vm(o),c]]);for(const{name:y,type:g}of t.fields)if(Jne.has(g))e.set(y,Lf);else if(g!=="date"&&g!=="esriFieldTypeDate")e.set(y,null);else if(i)e.set(y,Lf);else{const _=h.get(vm(y??""))??a;e.set(y,_)}return e}var Gt;(function(t){t.AsyncNotEnabled="AsyncNotEnabled",t.ModulesNotSupported="ModulesNotSupported",t.CircularModules="CircularModules",t.CannotCompareDateAndTime="CannotCompareDateAndTime",t.NeverReach="NeverReach",t.UnsupportedHashType="UnsupportedHashType",t.InvalidParameter="InvalidParameter",t.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",t.UnexpectedToken="UnexpectedToken",t.Unrecognized="Unrecognized",t.UnrecognizedType="UnrecognizedType",t.MaximumCallDepth="MaximumCallDepth",t.BooleanConditionRequired="BooleanConditionRequired",t.TypeNotAllowedInFeature="TypeNotAllowedInFeature",t.KeyMustBeString="KeyMustBeString",t.WrongNumberOfParameters="WrongNumberOfParameters",t.CallNonFunction="CallNonFunction",t.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",t.NoFunctionInDictionary="NoFunctionInDictionary",t.NoFunctionInArray="NoFunctionInArray",t.AssignModuleFunction="AssignModuleFunction",t.LogicExpressionOrAnd="LogicExpressionOrAnd",t.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",t.FunctionNotFound="FunctionNotFound",t.InvalidMemberAccessKey="InvalidMemberAccessKey",t.UnsupportedUnaryOperator="UnsupportUnaryOperator",t.InvalidIdentifier="InvalidIdentifier",t.MemberOfNull="MemberOfNull",t.UnsupportedOperator="UnsupportedOperator",t.Cancelled="Cancelled",t.ModuleAccessorMustBeString="ModuleAccessorMustBeString",t.ModuleExportNotFound="ModuleExportNotFound",t.Immutable="Immutable",t.OutOfBounds="OutOfBounds",t.IllegalResult="IllegalResult",t.FieldNotFound="FieldNotFound",t.PortalRequired="PortalRequired",t.LogicError="LogicError",t.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",t.KeyAccessorMustBeString="KeyAccessorMustBeString",t.WrongSpatialReference="WrongSpatialReference",t.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",t.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(Gt||(Gt={}));const Zne={[Gt.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[Gt.LogicError]:"Logic error - {reason}",[Gt.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[Gt.NeverReach]:"Encountered unreachable logic",[Gt.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[Gt.ModuleAccessorMustBeString]:"Module accessor must be a string",[Gt.ModuleExportNotFound]:"Module has no export with provided identifier",[Gt.ModulesNotSupported]:"Current profile does not support modules",[Gt.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[Gt.FunctionNotFound]:"Function not found",[Gt.FieldNotFound]:"Key not found - {key}",[Gt.CircularModules]:"Circular module dependencies are not allowed",[Gt.Cancelled]:"Execution cancelled",[Gt.UnsupportedHashType]:"Type not supported in hash function",[Gt.IllegalResult]:"Value is not a supported return type",[Gt.PortalRequired]:"Portal is required",[Gt.InvalidParameter]:"Invalid parameter",[Gt.WrongNumberOfParameters]:"Call with wrong number of parameters",[Gt.Unrecognized]:"Unrecognized code structure",[Gt.UnrecognizedType]:"Unrecognized type",[Gt.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[Gt.BooleanConditionRequired]:"Conditions must use booleans",[Gt.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[Gt.NoFunctionInArray]:"Arrays cannot contain functions.",[Gt.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[Gt.KeyAccessorMustBeString]:"Accessor must be a string",[Gt.KeyMustBeString]:"Object keys must be a string",[Gt.Immutable]:"Object is immutable",[Gt.UnexpectedToken]:"Unexpected token",[Gt.MemberOfNull]:"Cannot access property of null object",[Gt.MaximumCallDepth]:"Exceeded maximum function depth",[Gt.OutOfBounds]:"Out of bounds",[Gt.InvalidIdentifier]:"Identifier not recognized",[Gt.CallNonFunction]:"Expression is not a function",[Gt.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[Gt.AssignModuleFunction]:"Cannot assign function to module variable",[Gt.UnsupportedUnaryOperator]:"Unsupported unary operator",[Gt.UnsupportedOperator]:"Unsupported operator",[Gt.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[Gt.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[Gt.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[Gt.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[Gt.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};let VMe=class extends Error{constructor(...e){super(...e)}},bH=class Yne extends VMe{constructor(e,i){super(G7(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,Yne),i!=null&&i.loc&&(this.loc=i.loc)}},GMe=class Xne extends Error{constructor(e,i,r,s){super("Execution error - "+G7(r)+Hf(Zne[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,Xne),r!=null&&r.loc&&(this.loc=r.loc)}};function G7(t){var e,i;return t&&t.loc?`Line : ${(e=t.loc.start)==null?void 0:e.line}, ${(i=t.loc.start)==null?void 0:i.column}: `:""}let hat=class Kne extends Error{constructor(e,i,r,s){super("Compilation error - "+G7(r)+Hf(Zne[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,Kne),r!=null&&r.loc&&(this.loc=r.loc)}},dat=class eoe extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,eoe)}};function pat(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&(e!=null&&e.loc)?new bH(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e!=null&&e.loc?new bH(i,{cause:i}):i)}var HT;(function(t){t.UnrecognizedUri="UnrecognizedUri",t.UnsupportedUriProtocol="UnsupportedUriProtocol"})(HT||(HT={}));const HMe={[HT.UnrecognizedUri]:"Unrecognized uri - {uri}",[HT.UnsupportedUriProtocol]:"Unrecognized uri protocol"};let fat=class toe extends Error{constructor(e,i){super(Hf(HMe[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,toe)}};function nC(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let Aat=class{constructor(e,i){const r=new Map;for(const s of e){const n=nC(s);if(r.has(n))throw new Error(`${s} already added as ${r.get(n)}`);r.set(n,s)}if(i!=null)for(const[s,n]of i){const o=nC(s);if(r.has(o))throw new Error(`${s} already associated with ${r.get(o)}`);r.set(o,n)}this._enumMap=r}lookup(e){return this._enumMap.get(nC(e))}get(e){const i=this.lookup(e);if(i==null)throw new GMe(null,Gt.InvalidParameter,null);return i}};var qT;(function(t){t.TimeZoneNotRecognized="TimeZoneNotRecognized"})(qT||(qT={}));const qMe={[qT.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let WMe=class ioe extends Error{constructor(e,i){super(Hf(qMe[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,ioe)}};function dy(t,e,i){return t<e?t-e:t>i?t-i:0}function py(t,e,i){return t<e?e:t>i?i:t}let md=class Kr{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,s=0,n=0,o=0,a=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(a))return null;const c=tt.local(e,i).daysInMonth;let h=tt.fromObject({day:py(r,1,c),year:e,month:py(i,1,12),hour:py(s,0,23),minute:py(n,0,59),second:py(o,0,59),millisecond:py(a,0,999)},{zone:Uc(l)});return h=h.plus({months:dy(i,1,12),days:dy(r,1,c),hours:dy(s,0,23),minutes:dy(n,0,59),seconds:dy(o,0,59),milliseconds:dy(a,0,999)}),new Kr(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=Uc(i);return e.isUnknownTimeZone||r===Zc.instance?Kr.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Kr(e._date.setZone(r))}static dateJSToArcadeDate(e){return new Kr(tt.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=Uc(i);return new Kr(tt.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new Kr(tt.fromMillis(e,{zone:Zc.instance}))}static unknownDateJSToArcadeDate(e){return new Kr(tt.fromMillis(e.getTime(),{zone:Zc.instance}))}static epochToArcadeDate(e,i="system"){const r=Uc(i);return new Kr(tt.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new Kr(e)}clone(){return new Kr(this._date)}changeTimeZone(e){const i=Uc(e);return Kr.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=Uc(i);return e.zone===Zc.instance||r===Zc.instance?Kr.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Kr(e.setZone(r))}static nowToArcadeDate(e){const i=Uc(e);return new Kr(tt.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Kr(tt.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Kr.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===Zc.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new Kr(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Kr(this._date.toUTC())}toLocal(){return new Kr(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=tt.fromISO(e,{setZone:!0});return new Kr(i)}};function Uc(t,e=!0){if(t instanceof B0)return t;switch(nC(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return Zc.instance}if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){const r=ms.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=Go.create(t);if(!i.isValid){if(e)throw new WMe(qT.TimeZoneNotRecognized);return null}return i}function wH(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const _H="esri.core.sql.dateonly";let QMe=class ea{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=_H}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===_H}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return ea.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new ea(this._year,this._month,this._day)}toDateTime(e){return tt.fromObject({day:this.day,month:this.month,year:this.year},{zone:Uc(e)})}toDateTimeLuxon(e){return tt.fromObject({day:this.day,month:this.month,year:this.year},{zone:Uc(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=wH(e)),!e)return"";const r=this.toDateTime("unknown");return md.dateTimeToArcadeDate(r).toFormat(e,{locale:Bo(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return md.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return ea.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return tt.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=tt.fromMillis(e,{zone:ms.utcInstance});return i.isValid?ea.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=tt.fromSeconds(e,{zone:ms.utcInstance});return i.isValid?ea.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new ea(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const s=new ea(e,i,r);return s.isValid===!1?null:s}static fromDateJS(e){return ea.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return ea.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=wH(i))&&r.push(i);else if(i===null||i===""){const s=tt.fromISO(e,{setZone:!0});return s.isValid?ea.fromParts(s.year,s.month,s.day):null}for(const s of r){const n=tt.fromFormat(e,i??s);if(n.isValid)return new ea(n.year,n.month,n.day)}return null}static fromNow(e="system"){const i=tt.fromJSDate(new Date).setZone(Uc(e));return new ea(i.year,i.month,i.day)}};function yat(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new Rt({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function gat(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function eE(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function SH(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const xH="esri.core.sql.timeonly";let JMe=class $c{constructor(e,i,r,s){this._hour=e,this._minute=i,this._second=r,this._millisecond=s,this.declaredRootClass=xH}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===xH}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return $c.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new $c(this.hour,this.minute,this.second,this.millisecond)}isValid(){return eE(this.hour)&&eE(this.minute)&&eE(this.second)&&eE(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=SH(e))?tt.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:Bo(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,s){const n=new $c(e,i,r,s);return n.isValid()?n:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new $c(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),n=Math.floor(e%1e3);return new $c(s,r,i,n)}static fromDateJS(e){return new $c(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new $c(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=SH(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const s of r){const n=tt.fromFormat(e,s);if(n.isValid)return new $c(n.hour,n.minute,n.second,n.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return $c.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return tt.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const ZMe=["geometry","scale","timeProperties"];function vat(t,e){if(e!=null)for(const i of ZMe)e.hasArcadeDependency(i)&&t.add(i);return t}function YMe(t,e){return roe.create(t,e,null,["$feature","$view"])}function XMe(t,e,i){return roe.create(t,e,i,["$feature","$view","$config"])}let roe=class soe{static async create(e,i,r,s){const{arcade:n,Dictionary:o}=await Md();let a;try{a=n.parseScript(e)}catch(_){throw new te("arcade-bad-expression","Failed to parse arcade script",{script:e,error:_})}const l=n.scriptUsesGeometryEngine(a);l&&await n.enableGeometrySupport(),await n.loadDependentModules(new Set,a,null,!1,l);const c={vars:s.reduce(((_,S)=>({..._,[S]:null})),{}),spatialReference:i,useAsync:!1},h=n.compileScript(a,c);let y=null;r!=null&&(y=new o(r),y.immutable=!0);const g=new o;return g.immutable=!1,g.setField("scale",0),new soe(e,n,a,h,i,g,y,o)}constructor(e,i,r,s,n,o,a,l){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=s,this._spatialReference=n,this._viewDict=o,this._configDict=a,this._dictionaryCtor=l,this._dependencies=new Map,this._featureReader=new noe,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){var s;const r=(s=i.$view)==null?void 0:s.timeZone;if(i.$view){let n;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:o,currentEnd:a}=i.$view.timeProperties;n=new this._dictionaryCtor({currentStart:o!=null?r!=null?md.epochToArcadeDate(o,r):md.unknownEpochToArcadeDate(o):void 0,currentEnd:a!=null?r!=null?md.epochToArcadeDate(a,r):md.unknownEpochToArcadeDate(a):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",n)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},noe=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const s=i??new IS(ooe(e.attributes));this._boundTarget=e,this._boundSchema.fields=s.fields,this._boundSchema.fieldsIndex=s,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=Ju(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===Lf}field(e,i=!0){const r=this._getField(e);if(r){const s=this._boundTarget.attributes[r.name];if(s==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return QMe.fromReader(s);case"time-only":case"esriFieldTypeTimeOnly":return JMe.fromReader(s);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return md.fromReaderAsTimeStampOffset(s);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?md.unknownEpochToArcadeDate(s):md.epochToArcadeDate(s,this.contextTimeZone??ul);default:return s}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map((e=>e.name))}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){var i;return{attributes:this._boundTarget.attributes,geometry:(e==null?void 0:e.keepGeometryType)===!0?this.geometry():((i=this.geometry())==null?void 0:i.toJSON())??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function ooe(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let KMe=class aoe{static async from(e,i,r){const s=e.dictionary_version?Qne.parse(e.dictionary_version):null,n=new Set(e.itemsNames),o={};if(i)for(const y in i)o[y]=i[y];if(e.authoringInfo.configuration)for(const y of e.authoringInfo.configuration)o.hasOwnProperty(y.name)||(o[y.name]=y.value);const a=new Set(e.authoringInfo.symbol);for(const y of Object.keys(r))a.delete(y);a.size&&be.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:a});const l=await XMe(e.expression,null,o);if(!l)throw new te("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const c=!s||!s.greaterEqual(4,0);c&&be.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:s});const h=new e3e(r,c);return new aoe(c,n,l,h)}constructor(e,i,r,s){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=s}get itemNames(){return this._itemNames}evaluate(e,i,r,s){try{return this._reader.bind(e,r,s),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(n){be.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:n})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new IS(e);const i=e.map((r=>({...r,type:"esriFieldTypeString"})));return new IS(i)}},e3e=class extends noe{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};var $H,EH,IH,CH,ku,TH,KN,eF,tF,MH,iF,rF,kH,PH,LH,RH,sF,nF,OH,DH,Ev,Ft,bm,WT,NH,yd,FH,zH,Kg,oF,BH,jH,UH,VH,GH,HH,qH,zo,on,WH,QH,al,JH,ZH,YH,XH,zl,M_,wm,ev,KH,eq,tq,aF,iq,QT,rq,JT,tv,sq,lF,nq,oq;(function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"})($H||($H={})),(function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"})(EH||(EH={})),(function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"})(IH||(IH={})),(function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"})(CH||(CH={})),(function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"})(ku||(ku={})),(function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"})(TH||(TH={})),(function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"})(KN||(KN={})),(function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"})(eF||(eF={})),(function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"})(tF||(tF={})),(function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"})(MH||(MH={})),(function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"})(iF||(iF={})),(function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"})(rF||(rF={})),(function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"})(kH||(kH={})),(function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"})(PH||(PH={})),(function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"})(LH||(LH={})),(function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"})(RH||(RH={})),(function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"})(sF||(sF={})),(function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"})(nF||(nF={})),(function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"})(OH||(OH={})),(function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"})(DH||(DH={})),(function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"})(Ev||(Ev={})),(function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"})(Ft||(Ft={})),(function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"})(bm||(bm={})),(function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"})(WT||(WT={})),(function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"})(NH||(NH={})),(function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"})(yd||(yd={})),(function(t){t.Fast="Fast",t.Accurate="Accurate"})(FH||(FH={})),(function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"})(zH||(zH={})),(function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"})(Kg||(Kg={})),(function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"})(oF||(oF={})),(function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"})(BH||(BH={})),(function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"})(jH||(jH={})),(function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"})(UH||(UH={})),(function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AlongLine=1]="AlongLine"})(VH||(VH={})),(function(t){t[t.Auto=0]="Auto",t[t.Clockwise=1]="Clockwise",t[t.Counterclockwise=2]="Counterclockwise"})(GH||(GH={})),(function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"})(HH||(HH={})),(function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"})(qH||(qH={})),(function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"})(zo||(zo={})),(function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"})(on||(on={})),(function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"})(WH||(WH={})),(function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"})(QH||(QH={})),(function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"})(al||(al={})),(function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"})(JH||(JH={})),(function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(ZH||(ZH={})),(function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"})(YH||(YH={})),(function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"})(XH||(XH={})),(function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"})(zl||(zl={})),(function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"})(M_||(M_={})),(function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"})(wm||(wm={})),(function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"})(ev||(ev={})),(function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"})(KH||(KH={})),(function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"})(eq||(eq={})),(function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"})(tq||(tq={})),(function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"})(aF||(aF={})),(function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(iq||(iq={})),(function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"})(QT||(QT={})),(function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"})(rq||(rq={})),(function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"})(JT||(JT={})),(function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"})(tv||(tv={})),(function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"})(sq||(sq={})),(function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"})(lF||(lF={})),(function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"})(nq||(nq={})),(function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"})(oq||(oq={}));const t3e={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Zr={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:QT.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:QT.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:iF.Loop,repeatdelay:0,easing:rF.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function i3e(t){return typeof t=="function"}function _at(t,e,i,r){return i3e(t)?t(e,i,r):t}function Sat(t){return[t.r,t.g,t.b,t.a]}const r3e=` /-,
`;function aq(t){let e=t.length;for(;e--;)if(!r3e.includes(t.charAt(e)))return!1;return!0}function s3e(t,e){const i=[];let r=0,s=-1;do if(s=t.indexOf("[",r),s>=r){if(s>r){const n=t.slice(r,s);i.push([n,null,aq(n)])}if(r=s+1,s=t.indexOf("]",r),s>=r){if(s>r){const n=e[t.slice(r,s)];n&&i.push([null,n,!1])}r=s+1}}while(s!==-1);if(r<t.length){const n=t.slice(r);i.push([n,null,aq(n)])}return i}function xat(t,e,i){let r="",s=null;for(const n of e){const[o,a,l]=n;if(o!=null&&o!=="")l?s=o:(s!=null&&(r+=s,s=null),r+=o);else{const c=t.readAttribute(a);c!=null&&c!==""&&(s!==null&&(r+=s,s=null),r+=c)}}return loe(r,i)}function n3e(t,e,i,r){let s="",n=null;for(const o of e){const[a,l,c]=o;if(a!=null&&a!=="")c?n=a:(n!=null&&(s+=n,n=null),s+=a);else{let h=l;i!=null&&(h=v3e(l,i));const y=t.attributes[h];y!=null&&y!==""&&(n!=null&&(s+=n,n=null),s+=y)}}return loe(s,r)}function loe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function $at(t,e,i,r,s,n,o=!0){const a=e/s,l=i/n,c=Math.ceil(a/2),h=Math.ceil(l/2);for(let y=0;y<n;y++)for(let g=0;g<s;g++){const _=4*(g+(o?n-y-1:y)*s);let S=0,E=0,C=0,M=0,P=0,D=0,F=0;const U=(y+.5)*l;for(let G=Math.floor(y*l);G<(y+1)*l;G++){const Q=Math.abs(U-(G+.5))/h,W=(g+.5)*a,X=Q*Q;for(let K=Math.floor(g*a);K<(g+1)*a;K++){let de=Math.abs(W-(K+.5))/c;const ye=Math.sqrt(X+de*de);ye>=-1&&ye<=1&&(S=2*ye*ye*ye-3*ye*ye+1,S>0&&(de=4*(K+G*e),F+=S*t[de+3],C+=S,t[de+3]<255&&(S=S*t[de+3]/250),M+=S*t[de],P+=S*t[de+1],D+=S*t[de+2],E+=S))}}r[_]=M/E,r[_+1]=P/E,r[_+2]=D/E,r[_+3]=F/C}}function coe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function H7(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function q7(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function uoe(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function o3e(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function eP(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const Tt=(t,e=0)=>t==null||isNaN(t)?e:t,Eat=(t,e)=>t??e,Iat=(t,e)=>t??e,Cat=t=>t.tintColor?coe(t.tintColor):[255,255,255,1],a3e=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function l3e(){return Ie(()=>import("./geometryEngineJSON-DGETChXf.js").then(t=>t.g),__vite__mapDeps([31,32,33,34,35]),import.meta.url)}function c3e(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function u3e(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function hoe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function doe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function k_(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=k_(e);if(i!=null)return i}break;case"CIMTextSymbol":return k_(t.symbol);case"CIMSolidFill":return t.color}return null}function ZT(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=ZT(i);if(r!=null)return r}break}case"CIMTextSymbol":return ZT(t.symbol);case"CIMSolidStroke":return t.color}}function Tat(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function YT(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=YT(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return YT(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function h3e(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function d3e(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function p3e(t){return(t?Object.keys(t):[]).map((e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"})))}const fy=t=>t.includes("data:image/svg+xml");function XT(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Nx(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Mat(t,e,i,r,s,n,o=!0){const{infos:a}=n;let l=1,c=0,h=0,y=0,g=1;for(const{absoluteAnchorPoint:E,offsetX:C,offsetY:M,rotation:P,size:D,frameHeight:F,rotateClockWise:U,scaleSymbolsProportionally:G}of a)g=E?1:l,h=uq(C,M,c,g,h),y=cq(C,M,c,g,y),F&&(G||o)&&(l*=D/F),c=hq(P,U,c);const _=uq(r,s,c,g,h),S=cq(r,s,c,g,y);return{size:t*l,rotation:hq(e,i,c),offsetX:_,offsetY:S}}function f3e(t){if(t==null)return!1;if(Array.isArray(t))return t.every((e=>f3e(e)));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function A3e(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...t3e[e]];const i=Zr[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function m3e(t){return t.split(" ").map((e=>Number(e)))}function y3e(t){return typeof t=="string"?m3e(t):t}function poe(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=y3e(t.dashTemplate)),t}function cF(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return cF(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return cF(i.symbol)}}return"Normal"}function g3e(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??Zr.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&eP(i.markerPlacement)){const r=i.size??Zr.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function v3e(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function b3e(t){return t.map((e=>({...e,propertyName:Nx(e.propertyName)})))}function lq(t){const e={};for(const i in t){const r=t[i];e[Nx(i)]=r}return e}function cq(t,e,i,r,s){const n=i*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*t+o*e)*r+s}return e*r+s}function uq(t,e,i,r,s){const n=i*Math.PI/180;return n?(Math.cos(n)*t-Math.sin(n)*e)*r+s:t*r+s}function hq(t,e,i){return e?i-t:i+t}function kat(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",s=i==="Rotation"||i==="Angle"||i==="ToRotation";let n=e[Nx(i)];if(n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=A3e(e.type,i.toLowerCase()),n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(n=a,n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:a,defaultValue:n},n!=null&&(r?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return n}function Pat(t,e,i){if(e[Nx(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function mw(t,e){return Math.max(Math.min((t??e)/100,1),0)}const w3e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let foe=class{constructor(e,i,r,s){this.url=e,this.fieldMap=r,this.dictionaryInfo=s,this._symbolPartCache=new qne(100);const n=async()=>KMe.from(await s,i,r);this._evaluator=n()}async getSymbolAsync(e,i,r=!0){var y;const s=await this._evaluator,n=(i==null?void 0:i.fields)??ooe(e.attributes),o=s.createDictionaryFieldsIndex(n),a=s.evaluate(e,(i==null?void 0:i.scale)??0,o,i==null?void 0:i.spatialReference);if(a==null)return null;const l=$1(e.geometry),c=yH.parse(a,s.itemNames,l),h=l==="esriGeometryPoint"&&!((y=e.geometry)!=null&&y.hasZ);return await this._cimPartsToCIMSymbol(e,c.partNames,c.overrides,h,i,r,o)}async getSymbolForControlString(e,i,r){const s=await this._evaluator,n=yH.parse(e,s.itemNames,i),o=i==="esriGeometryPoint"&&!r,a=dq(await Promise.all(n.partNames.map((l=>this._getSymbolPart(l)))),n.overrides,o);return new kn({data:a})}async _cimPartsToCIMSymbol(e,i,r,s,n,o,a){const l=i.map((y=>this._getSymbolPart(y,n)));let c=await Promise.all(l);if(o&&this.fieldMap&&c.length>0){const{OverrideHelper:y}=await Ie(()=>Promise.resolve().then(()=>WQe),void 0,import.meta.url);c=ie(c);for(const g of c)y.applyDictionaryTextOverrides(g,e,this.fieldMap,a,cF(g))}const h=dq(c,r,s);return new kn({data:h})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,s=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:n}=await ei(s,{responseType:"json",query:{f:"json"},...i});return n}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function dq(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const s of t){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);r.symbolLayers.unshift(...n.symbolLayers)}}return i&&(r.callout=w3e),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var uF;let Ll=uF=class extends k1(ya){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new foe(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new uF({config:ie(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ie(this.fieldMap),url:ie(this.url),visualVariables:ie(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await un(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await ei(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};u([A({type:foe})],Ll.prototype,"_loader",null),u([A({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ll.prototype,"config",void 0),u([A({type:Object,json:{write:!0}})],Ll.prototype,"fieldMap",void 0),u([A({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ll.prototype,"scaleExpression",void 0),u([Ne("scaleExpression")],Ll.prototype,"writeData",null),u([A({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Ll.prototype,"scaleExpressionTitle",void 0),u([A({type:String,json:{write:!0}})],Ll.prototype,"url",void 0),u([Ne("visualVariables")],Ll.prototype,"writeVisualVariables",null),Ll=uF=u([B("esri.renderers.DictionaryRenderer")],Ll);var hF;let Eh=hF=class extends pe{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(be.getLogger(this).error(".field: field must be a string value"),null):_x(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new hF({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([A({type:ze,json:{type:[Number],write:!0}})],Eh.prototype,"color",void 0),u([A({type:String,json:{write:!0}})],Eh.prototype,"field",void 0),u([yi("field")],Eh.prototype,"castField",null),u([A({type:String,json:{write:!0}})],Eh.prototype,"label",void 0),u([A({type:String,json:{write:!0}})],Eh.prototype,"valueExpression",void 0),u([A({type:String,json:{write:!0}})],Eh.prototype,"valueExpressionTitle",void 0),Eh=hF=u([B("esri.renderers.support.AttributeColorInfo")],Eh);const Aoe=Eh;var dF;let oC=dF=class extends pe{constructor(){super(...arguments),this.unit=null}clone(){return new dF({unit:this.unit})}};u([A({type:String,json:{write:!0}})],oC.prototype,"unit",void 0),oC=dF=u([B("esri.renderers.support.DotDensityLegendOptions")],oC);const _3e=oC;var pF;let wo=pF=class extends k1(ya){constructor(t){super(t),this.attributes=null,this.backgroundColor=new ze([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new br,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Pn({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new pF({attributes:ie(this.attributes),backgroundColor:ie(this.backgroundColor),dotBlendingEnabled:ie(this.dotBlendingEnabled),dotShape:ie(this.dotShape),dotSize:ie(this.dotSize),dotValue:ie(this.dotValue),legendOptions:ie(this.legendOptions),outline:ie(this.outline),referenceScale:ie(this.referenceScale),seed:ie(this.seed),visualVariables:ie(this.visualVariables),authoringInfo:ie(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map((i=>i.field||i.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await un(t,e,i.valueExpression),i.field&&t.add(i.field)}};u([A({type:[Aoe],json:{write:!0}})],wo.prototype,"attributes",void 0),u([A({type:ze,json:{write:!0}})],wo.prototype,"backgroundColor",void 0),u([A({type:Boolean,json:{write:!0}})],wo.prototype,"dotBlendingEnabled",void 0),u([A({type:String,json:{write:!1}})],wo.prototype,"dotShape",void 0),u([A({type:Number,json:{write:!0}})],wo.prototype,"dotSize",void 0),u([A({type:_3e,json:{write:!0}})],wo.prototype,"legendOptions",void 0),u([A({type:br,json:{default:null,write:!0}})],wo.prototype,"outline",void 0),u([A({type:Number,json:{write:!0}})],wo.prototype,"dotValue",void 0),u([A({type:Number,json:{write:!0}})],wo.prototype,"referenceScale",void 0),u([A({type:Number,json:{write:!0}})],wo.prototype,"seed",void 0),u([it({dotDensity:"dot-density"})],wo.prototype,"type",void 0),wo=pF=u([B("esri.renderers.DotDensityRenderer")],wo);var fF;let gd=fF=class extends pe{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new fF({color:this.color&&this.color.clone(),ratio:this.ratio})}};u([A({type:ze,json:{type:[Kt],default:null,write:{isRequired:!0}}})],gd.prototype,"color",void 0),u([A({type:Number,json:{write:{isRequired:!0}}})],gd.prototype,"ratio",void 0),gd=fF=u([B("esri.renderers.support.HeatmapColorStop")],gd);let lg=class extends dt.ClonableMixin(pe){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([A({type:String,json:{write:!0}})],lg.prototype,"minLabel",void 0),u([A({type:String,json:{write:!0}})],lg.prototype,"maxLabel",void 0),u([A({type:String,json:{write:!0}})],lg.prototype,"title",void 0),lg=u([B("esri.renderers.support.HeatmapLegendOptions")],lg);function S3e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function x3e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function $3e(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}function E3e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function moe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function yoe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function goe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function I3e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function C3e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function T3e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function M3e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function k3e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function P3e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function L3e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function voe(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return Math.sqrt(i*i+r*r+s*s+n*n)}function boe(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return i*i+r*r+s*s+n*n}function woe(t){const e=t[0],i=t[1],r=t[2],s=t[3];return Math.sqrt(e*e+i*i+r*r+s*s)}function _oe(t){const e=t[0],i=t[1],r=t[2],s=t[3];return e*e+i*i+r*r+s*s}function R3e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function O3e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function D3e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3];let o=i*i+r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=s*o,t[3]=n*o),t}function N3e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Soe(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=e[3];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function F3e(t,e=1){const i=Fk;let r,s,n,o,a,l;do r=2*i()-1,s=2*i()-1,a=r*r+s*s;while(a>=1);do n=2*i()-1,o=2*i()-1,l=n*n+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*s,t[2]=e*n*c,t[3]=e*o*c,t}function z3e(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*o,t[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*o,t[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*o,t[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*o,t}function B3e(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2],c=i[3],h=c*r+a*n-l*s,y=c*s+l*r-o*n,g=c*n+o*s-a*r,_=-o*r-a*s-l*n;return t[0]=h*c+_*-o+y*-l-g*-a,t[1]=y*c+_*-a+g*-o-h*-l,t[2]=g*c+_*-l+h*-a-y*-o,t[3]=e[3],t}function j3e(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function U3e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function V3e(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=e[0],a=e[1],l=e[2],c=e[3],h=uo();return Math.abs(i-o)<=h*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-l)<=h*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-c)<=h*Math.max(1,Math.abs(n),Math.abs(c))}const G3e=moe,H3e=yoe,q3e=goe,W3e=voe,Q3e=boe,J3e=woe,Z3e=_oe;Object.freeze(Object.defineProperty({__proto__:null,add:E3e,ceil:I3e,copy:S3e,copyVec3:x3e,dist:W3e,distance:voe,div:q3e,divide:goe,dot:N3e,equals:V3e,exactEquals:U3e,floor:C3e,inverse:O3e,len:J3e,length:woe,lerp:Soe,max:M3e,min:T3e,mul:H3e,multiply:yoe,negate:R3e,normalize:D3e,random:F3e,round:k3e,scale:P3e,scaleAndAdd:L3e,set:$3e,sqrDist:Q3e,sqrLen:Z3e,squaredDistance:boe,squaredLength:_oe,str:j3e,sub:G3e,subtract:moe,transformMat4:z3e,transformQuat:B3e},Symbol.toStringTag,{value:"Module"}));function tP(){return[0,0,0,0]}function Y3e(t){return[t[0],t[1],t[2],t[3]]}function G0(t,e,i,r){return[t,e,i,r]}function X3e(t,e,i,r){return[t,e,i,r]}function K3e(t,e=tP()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function xoe(){return tP()}function $oe(){return G0(1,1,1,1)}function Eoe(){return G0(1,0,0,0)}function Ioe(){return G0(0,1,0,0)}function Coe(){return G0(0,0,1,0)}function Toe(){return G0(0,0,0,1)}const eke=xoe(),tke=$oe(),ike=Eoe(),rke=Ioe(),ske=Coe(),nke=Toe();Object.freeze(Object.defineProperty({__proto__:null,ONES:tke,UNIT_W:nke,UNIT_X:ike,UNIT_Y:rke,UNIT_Z:ske,ZEROS:eke,clone:Y3e,create:tP,freeze:X3e,fromArray:K3e,fromValues:G0,ones:$oe,unitW:Toe,unitX:Eoe,unitY:Ioe,unitZ:Coe,zeros:xoe},Symbol.toStringTag,{value:"Module"}));const W7=2.4;function oke(t){return Ei(t*W7)}function ake(t){return ri(t)/W7}function lke(t,e,i,r){let{color:s,ratio:n}=e,{color:o,ratio:a}=i;a===n&&(a===1?n-=1e-6:a+=1e-6);const l=Bn((r-n)/(a-n),0,1);Soe(t,s.toArray(),o.toArray(),l)}function Oat(t){const i=new Uint8ClampedArray(2048);if(t=t.filter((({ratio:a})=>a>=0&&a<=1)).sort(((a,l)=>a.ratio-l.ratio)).map((({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)}))),t.length<1)return i;let r=t[0],s=t[0],n=1;const o=tP();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>s.ratio&&n<t.length;)r=s,s=t[n++];lke(o,r,s,l),i.set(o,4*a)}return i}function Dat(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Nat(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var AF;function pq(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...a}=t;return a}}return t}let xs=AF=class extends ya{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new gd({ratio:0,color:new ze("rgba(255, 140, 0, 0)")}),new gd({ratio:.75,color:new ze("rgba(255, 140, 0, 1)")}),new gd({ratio:.9,color:new ze("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return pq(t)}get blurRadius(){return ake(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",oke(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(W7**2*this.blurRadius**4)}read(t,e){t=pq(t),super.read(t,e)}getSymbol(){return new dr}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&lo(t,e,i),r&&typeof r=="string"&&await un(t,e,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new AF({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:ie(this.colorStops),field:this.field,legendOptions:ie(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([A({type:ar,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],xs.prototype,"authoringInfo",void 0),u([A({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],xs.prototype,"blurRadius",null),u([A({type:[gd],json:{write:{isRequired:!0}}})],xs.prototype,"colorStops",void 0),u([A({type:String,json:{write:!0}})],xs.prototype,"field",void 0),u([A({type:lg,json:{write:!0}})],xs.prototype,"legendOptions",void 0),u([A({type:Number,json:{write:!0}})],xs.prototype,"maxDensity",void 0),u([A({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],xs.prototype,"maxPixelIntensity",null),u([A({type:Number,json:{write:!0}})],xs.prototype,"minDensity",void 0),u([A({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],xs.prototype,"minPixelIntensity",null),u([A({type:Number,cast:di,json:{write:!0}})],xs.prototype,"radius",void 0),u([A({type:Number,range:{min:0},json:{default:0,write:!0}})],xs.prototype,"referenceScale",void 0),u([it({heatmap:"heatmap"})],xs.prototype,"type",void 0),u([A({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],xs.prototype,"valueExpression",void 0),u([A({type:String})],xs.prototype,"valueExpressionTitle",void 0),u([A({readOnly:!0})],xs.prototype,"_pixelIntensityToDensity",null),xs=AF=u([B("esri.renderers.HeatmapRenderer")],xs);let _m=class extends dt.ClonableMixin(pe){constructor(){super(...arguments),this.color=new ze([0,0,0,0]),this.label=null,this.threshold=0}};u([A({type:ze,json:{write:!0}})],_m.prototype,"color",void 0),u([A({type:String,json:{write:!0}})],_m.prototype,"label",void 0),u([A({type:Number,range:{min:0,max:1},json:{write:!0}})],_m.prototype,"threshold",void 0),_m=u([B("esri.renderers.support.OthersCategory")],_m);const cke={base:En,key:"type",typeMap:{size:hi,opacity:td}};let _o=class extends k1(dt.ClonableMixin(ya)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ze([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new _m,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var e;return new dr({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(os)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((i,r)=>i+r.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((e,i)=>e+JSON.stringify(i)),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await un(e,i,r.valueExpression),r.field&&e.add(r.field)}};u([A({type:[Aoe],json:{write:!0}})],_o.prototype,"attributes",void 0),u([A(C7)],_o.prototype,"backgroundFillSymbol",void 0),u([A({type:ze,json:{write:!0}})],_o.prototype,"defaultColor",void 0),u([A({type:String,json:{write:!0}})],_o.prototype,"defaultLabel",void 0),u([A({type:Number,range:{min:0,max:1},json:{write:!0}})],_o.prototype,"holePercentage",void 0),u([A({type:_m,json:{write:!0}})],_o.prototype,"othersCategory",void 0),u([A({type:T7,json:{write:!0}})],_o.prototype,"legendOptions",void 0),u([A({type:br,json:{default:null,write:!0}})],_o.prototype,"outline",void 0),u([A({type:Number,cast:di,json:{write:!0}})],_o.prototype,"size",void 0),u([it({pieChart:"pie-chart"})],_o.prototype,"type",void 0),u([A({types:[cke]})],_o.prototype,"visualVariables",void 0),_o=u([B("esri.renderers.PieChartRenderer")],_o);const Fx={key:"type",base:ya,typeMap:{heatmap:xs,simple:no,"unique-value":Wi,"class-breaks":is,"dot-density":wo,dictionary:Ll,"pie-chart":_o},errorContext:"renderer"},uke={key:"type",base:ya,typeMap:{simple:no,"unique-value":Wi,"class-breaks":is,heatmap:xs},errorContext:"renderer",validate:hke};function hke(t){switch(t.type){case"simple":return dke(t);case"unique-value":return pke(t);case"class-breaks":return fke(t);case"heatmap":return t}}function dke(t){if(t.symbol)return t;be.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function pke(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter((({symbol:r,label:s},n)=>(r||be.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!r)));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function fke(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter((({symbol:r,label:s},n)=>(r||be.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!r)));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function Ake(t,e){return CS(t,null,e)}const mke=A1({types:Fx});function CS(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new Sa("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):mke(t,e,i):null}var mF;let rn=mF=class extends bf{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=di("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter((s=>s.statisticType!=="avg_angle")).map((s=>s.toJSON()));Jr(i,r,e)}readRenderer(t,e,i){var s;const r=(s=e.drawingInfo)==null?void 0:s.renderer;return r?CS(r,e,i)??void 0:P7(e,i)}clone(){return new mF({fields:ie(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:ie(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:ie(this.popupTemplate),renderer:ie(this.renderer),binType:ie(this.binType),size:this.size})}};u([it({binning:"binning"})],rn.prototype,"type",void 0),u([it({geohash:"geohash",square:"square"}),A({type:["geohash","square"]})],rn.prototype,"binType",void 0),u([A({type:Number,json:{write:!0}})],rn.prototype,"fixedBinLevel",void 0),u([A({type:[Ki],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],rn.prototype,"labelingInfo",void 0),u([A(Vk)],rn.prototype,"labelsVisible",void 0),u([A({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],rn.prototype,"maxScale",void 0),u([A(Uk)],rn.prototype,"popupEnabled",void 0),u([A({type:Gu,json:{name:"popupInfo",write:!0}})],rn.prototype,"popupTemplate",void 0),u([A({cast:t=>t==="auto"?t:ro(di(t))})],rn.prototype,"size",void 0),u([A({type:[Mn],json:{write:!0}})],rn.prototype,"fields",void 0),u([Ne("fields")],rn.prototype,"writeFields",null),u([A({types:Fx,json:{write:{target:"drawingInfo.renderer"}}})],rn.prototype,"renderer",void 0),u([Me("renderer",["drawingInfo.renderer"])],rn.prototype,"readRenderer",null),rn=mF=u([B("esri.layers.support.FeatureReductionBinning")],rn);var yF;function fq(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let rs=yF=class extends pe{constructor(t){super(t),this.type="cluster",this.clusterRadius=di("80px"),this.clusterMinSize=di("12px"),this.clusterMaxSize=di("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){var s,n;const r=(s=e.drawingInfo)==null?void 0:s.renderer;return(n=r==null?void 0:r.authoringInfo)!=null&&n.isAutoGenerated?null:r?fq(r)?null:CS(r,e,i)??void 0:P7(e,i)}readSymbol(t,e,i){var s,n;const r=(s=e.drawingInfo)==null?void 0:s.renderer;if((n=r==null?void 0:r.authoringInfo)!=null&&n.isAutoGenerated)return null;if(r&&fq(r)){const o=CS(r,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,r){var n,o;const s=(o=(n=this.renderer)==null?void 0:n.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||s){const a=new no({symbol:t});e.drawingInfo={renderer:a.write({},r)}}}writeFields(t,e,i){const r=t.filter((s=>s.statisticType!=="avg_angle")).map((s=>s.toJSON()));Jr(i,r,e)}readFields(t,e,i){return t.filter((r=>!r.isAutoGenerated)).map((r=>Mn.fromJSON(r)))}clone(){return new yF({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ie(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ie(this.fields),maxScale:this.maxScale,renderer:ie(this.renderer),symbol:ie(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:ie(this.popupTemplate)})}};u([A({type:["cluster"],readOnly:!0,json:{write:!0}})],rs.prototype,"type",void 0),u([A({cast:t=>t==="auto"?t:ro(di(t)),json:{write:!0}})],rs.prototype,"clusterRadius",void 0),u([A({type:Number,cast:di,json:{write:!0}})],rs.prototype,"clusterMinSize",void 0),u([A({type:Number,cast:di,json:{write:!0}})],rs.prototype,"clusterMaxSize",void 0),u([A({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],rs.prototype,"maxScale",void 0),u([A(Uk)],rs.prototype,"popupEnabled",void 0),u([A({type:Gu,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],rs.prototype,"popupTemplate",void 0),u([A({types:Fx,json:{write:{target:"drawingInfo.renderer"}}})],rs.prototype,"renderer",void 0),u([Me("renderer",["drawingInfo.renderer"])],rs.prototype,"readRenderer",null),u([A({types:DSe})],rs.prototype,"symbol",void 0),u([Me("symbol",["drawingInfo.renderer"])],rs.prototype,"readSymbol",null),u([Ne("symbol")],rs.prototype,"writeSymbol",null),u([A({type:[Ki],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],rs.prototype,"labelingInfo",void 0),u([A(Vk)],rs.prototype,"labelsVisible",void 0),u([A({type:[Mn],json:{write:!0}})],rs.prototype,"fields",void 0),u([Ne("fields")],rs.prototype,"writeFields",null),u([Me("fields")],rs.prototype,"readFields",null),rs=yF=u([B("esri.layers.support.FeatureReductionCluster")],rs);var gF;let P_=gF=class extends bf{constructor(t){super(t),this.type="selection"}clone(){return new gF}};u([A({type:["selection"]})],P_.prototype,"type",void 0),P_=gF=u([B("esri.layers.support.FeatureReductionSelection")],P_);const Aq={key:"type",base:bf,typeMap:{cluster:rs,binning:rn}},yke={types:{key:"type",base:bf,typeMap:{selection:P_,cluster:rs,binning:rn}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:Aq},"portal-item":{types:Aq},"web-scene":{types:{key:"type",base:bf,typeMap:{selection:P_}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Gi}}}}},Ay={Base64:0,Hex:1,String:2,Raw:3},Iv=8,Moe=(1<<Iv)-1;function uf(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function gke(t){const e=[];for(let i=0,r=t.length*Iv;i<r;i+=Iv)e[i>>5]|=(t.charCodeAt(i/Iv)&Moe)<<i%32;return e}function vke(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=Iv)e.push(String.fromCharCode(t[i>>5]>>>i%32&Moe));return e.join("")}function bke(t){const e="0123456789abcdef",i=[];for(let r=0,s=4*t.length;r<s;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function wke(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,n=4*t.length;s<n;s+=3){const o=(t[s>>2]>>s%4*8&255)<<16|(t[s+1>>2]>>(s+1)%4*8&255)<<8|t[s+2>>2]>>(s+2)%4*8&255;for(let a=0;a<4;a++)8*s+6*a>32*t.length?r.push("="):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function _ke(t,e){return t<<e|t>>>32-e}function iP(t,e,i,r,s,n){return uf(_ke(uf(uf(e,t),uf(r,n)),s),i)}function mn(t,e,i,r,s,n,o){return iP(e&i|~e&r,t,e,s,n,o)}function yn(t,e,i,r,s,n,o){return iP(e&r|i&~r,t,e,s,n,o)}function gn(t,e,i,r,s,n,o){return iP(e^i^r,t,e,s,n,o)}function vn(t,e,i,r,s,n,o){return iP(i^(e|~r),t,e,s,n,o)}function Ske(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,c=s,h=n;i=mn(i,r,s,n,t[o],7,-680876936),n=mn(n,i,r,s,t[o+1],12,-389564586),s=mn(s,n,i,r,t[o+2],17,606105819),r=mn(r,s,n,i,t[o+3],22,-1044525330),i=mn(i,r,s,n,t[o+4],7,-176418897),n=mn(n,i,r,s,t[o+5],12,1200080426),s=mn(s,n,i,r,t[o+6],17,-1473231341),r=mn(r,s,n,i,t[o+7],22,-45705983),i=mn(i,r,s,n,t[o+8],7,1770035416),n=mn(n,i,r,s,t[o+9],12,-1958414417),s=mn(s,n,i,r,t[o+10],17,-42063),r=mn(r,s,n,i,t[o+11],22,-1990404162),i=mn(i,r,s,n,t[o+12],7,1804603682),n=mn(n,i,r,s,t[o+13],12,-40341101),s=mn(s,n,i,r,t[o+14],17,-1502002290),r=mn(r,s,n,i,t[o+15],22,1236535329),i=yn(i,r,s,n,t[o+1],5,-165796510),n=yn(n,i,r,s,t[o+6],9,-1069501632),s=yn(s,n,i,r,t[o+11],14,643717713),r=yn(r,s,n,i,t[o],20,-373897302),i=yn(i,r,s,n,t[o+5],5,-701558691),n=yn(n,i,r,s,t[o+10],9,38016083),s=yn(s,n,i,r,t[o+15],14,-660478335),r=yn(r,s,n,i,t[o+4],20,-405537848),i=yn(i,r,s,n,t[o+9],5,568446438),n=yn(n,i,r,s,t[o+14],9,-1019803690),s=yn(s,n,i,r,t[o+3],14,-187363961),r=yn(r,s,n,i,t[o+8],20,1163531501),i=yn(i,r,s,n,t[o+13],5,-1444681467),n=yn(n,i,r,s,t[o+2],9,-51403784),s=yn(s,n,i,r,t[o+7],14,1735328473),r=yn(r,s,n,i,t[o+12],20,-1926607734),i=gn(i,r,s,n,t[o+5],4,-378558),n=gn(n,i,r,s,t[o+8],11,-2022574463),s=gn(s,n,i,r,t[o+11],16,1839030562),r=gn(r,s,n,i,t[o+14],23,-35309556),i=gn(i,r,s,n,t[o+1],4,-1530992060),n=gn(n,i,r,s,t[o+4],11,1272893353),s=gn(s,n,i,r,t[o+7],16,-155497632),r=gn(r,s,n,i,t[o+10],23,-1094730640),i=gn(i,r,s,n,t[o+13],4,681279174),n=gn(n,i,r,s,t[o],11,-358537222),s=gn(s,n,i,r,t[o+3],16,-722521979),r=gn(r,s,n,i,t[o+6],23,76029189),i=gn(i,r,s,n,t[o+9],4,-640364487),n=gn(n,i,r,s,t[o+12],11,-421815835),s=gn(s,n,i,r,t[o+15],16,530742520),r=gn(r,s,n,i,t[o+2],23,-995338651),i=vn(i,r,s,n,t[o],6,-198630844),n=vn(n,i,r,s,t[o+7],10,1126891415),s=vn(s,n,i,r,t[o+14],15,-1416354905),r=vn(r,s,n,i,t[o+5],21,-57434055),i=vn(i,r,s,n,t[o+12],6,1700485571),n=vn(n,i,r,s,t[o+3],10,-1894986606),s=vn(s,n,i,r,t[o+10],15,-1051523),r=vn(r,s,n,i,t[o+1],21,-2054922799),i=vn(i,r,s,n,t[o+8],6,1873313359),n=vn(n,i,r,s,t[o+15],10,-30611744),s=vn(s,n,i,r,t[o+6],15,-1560198380),r=vn(r,s,n,i,t[o+13],21,1309151649),i=vn(i,r,s,n,t[o+4],6,-145523070),n=vn(n,i,r,s,t[o+11],10,-1120210379),s=vn(s,n,i,r,t[o+2],15,718787259),r=vn(r,s,n,i,t[o+9],21,-343485551),i=uf(i,a),r=uf(r,l),s=uf(s,c),n=uf(n,h)}return[i,r,s,n]}function Q7(t,e=Ay.Hex){const i=e||Ay.Base64,r=Ske(gke(t),t.length*Iv);switch(i){case Ay.Raw:return r;case Ay.Hex:return bke(r);case Ay.String:return vke(r);case Ay.Base64:return wke(r)}}const xke=()=>be.getLogger("esri.views.2d.layers.support.clusterUtils");ce.add("esri-cluster-arcade-enabled",!0);const $ke=ce("esri-cluster-arcade-enabled"),Eke=new Set(["simple-line","simple-fill","picture-fill"]);function mq(t,e){let i=e.clone();if(!Ike(i))return i;if(e.symbols.some((r=>Eke.has(r.type)))&&(i=new no({symbol:new dr})),i.authoringInfo||(i.authoringInfo=new ar),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter((s=>s.valueExpression!=="$view.scale"));r.forEach((s=>{s.type==="rotation"?s.field?s.field=cA(t,s.field,"avg_angle","number"):s.valueExpression&&(s.field=yw(t,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=cA(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=cA(t,s.field,"avg","number"):s.valueExpression&&(s.field=yw(t,s.valueExpression,"avg","number"),s.valueExpression=null)})),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=cA(t,r.field,"sum","number"):r.valueExpression&&(r.field=yw(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=cA(t,i.field,"mode","string"):i.valueExpression&&(i.field=yw(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=cA(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=cA(t,i.field,"avg","number"):i.valueExpression&&(i.field=yw(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const Ike=t=>{const e=i=>xke().error(new te("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!$ke){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some((i=>!(!("valueExpression"in i)||!i.valueExpression))))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Cke(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,s="field",n=e.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+Q7(n)}}}function yw(t,e,i,r){const s=Q7(e),n=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return t.some((o=>o.name===n))||t.push(new Mn({name:n,isAutoGenerated:!0,onStatisticExpression:new Jp({expression:e,returnType:r}),statisticType:i})),n}function cA(t,e,i,r,s){if(e==="cluster_count"||t.some((o=>o.name===e)))return e;const n=Cke(i,e,s);return t.some((o=>o.name===n))||(i==="avg_norm"?t.push(new Mn({name:n,isAutoGenerated:!0,onStatisticExpression:new Jp({expression:`$feature.${e} / $feature.${s}`,returnType:r}),statisticType:"avg"})):t.push(new Mn({name:n,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),n}const Tke=t=>{let e=class extends t{constructor(...i){super(...i),this.addHandles(He((()=>this.renderer),(()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}}),Hu))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,s){const n=i.clone();return"visualVariables"in n&&(n.visualVariables||(n.visualVariables=[]),n.visualVariables.some((o=>o.type==="size"))||n.visualVariables.push(new hi({field:"cluster_count",stops:[new ql({value:1}),new ql({useMinValue:!0,size:r}),new ql({useMaxValue:!0,size:s})]}))),n}_normalizeFeatureReduction(i){var y;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),s=[new Mn({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],n=(r.fields??[]).filter((g=>!g.isAutoGenerated)),o=i.renderer&&!((y=i.renderer.authoringInfo)!=null&&y.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:l}=r;if(o){r.fields=[...s,...n];const g=this._withClusterVariable(r.renderer,a,l);return r.effectiveFeatureRenderer=g,r.effectiveClusterRenderer=g,r}if(i.symbol){if(r.fields=[...s,...n],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const g=mq(s,this.renderer),_=this._withClusterVariable(g,a,l),S="visualVariables"in _&&_.visualVariables?_.visualVariables:[],E=new no({symbol:i.symbol,visualVariables:S});return r.fields=[...s,...n],r.effectiveFeatureRenderer=_,r.effectiveClusterRenderer=E,r}if(!this.renderer)return i;const c=mq(s,this.renderer);r.fields=[...s,...n],r.renderer=c;const h=this._withClusterVariable(c,a,l);return r.effectiveFeatureRenderer=h,r.effectiveClusterRenderer=h,r}};return u([A(yke)],e.prototype,"featureReduction",null),e=u([B("esri.layers.mixins.FeatureReductionLayer")],e),e},yq={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},gq={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},vq={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Mke={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":yq,"web-map/basemap":gq,"web-map/tables":vq,"link-chart/operational-layers":{...yq,LinkChartLayer:!0},"link-chart/basemap":gq,"link-chart/tables":vq,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},kke=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,s){var n;return((n=s==null?void 0:s.portalItem)==null?void 0:n.type)==="Group Layer"?void 0:i}writeListMode(i,r,s,n){(n&&n.layerContainerType==="ground"||i&&qye(this,s,{},n))&&(r[s]=i)}writeOperationalLayerType(i,r,s){i&&(r[s]=i)}writeTitle(i,r){r.title=i??"Layer"}readVisibilityTimeExtent(i){return i?Mi.fromArray(i):null}writeVisibilityTimeExtent(i,r,s,n){i&&n.layerContainerType!=="tables"&&(i.isEmpty?n!=null&&n.messages&&n.messages.push(new te("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[s]=i.toArray())}read(i,r){r&&(r.layer=this),GK(this,i,(s=>super.read(i,s)),r)}write(i,r){var o,a;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const l=`${r.origin}/${r.layerContainerType||"operational-layers"}`,c=Mke[l];let h=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(h=!1),!h)return(o=r.messages)==null||o.push(new te("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),n=!!r&&!!r.messages&&!!r.messages.filter((l=>l instanceof te&&l.name==="web-document-write:property-required")).length;return S1(s==null?void 0:s.url)?((a=r==null?void 0:r.messages)==null||a.push(new te("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:s}beforeSave(){}};return u([A({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),u([Me("id",["id"])],e.prototype,"readId",null),u([A(Qse)],e.prototype,"listMode",void 0),u([Ne("listMode")],e.prototype,"writeListMode",null),u([A({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Gi,isRequired:!0}}}}})],e.prototype,"operationalLayerType",void 0),u([Ne("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),u([A(yN)],e.prototype,"opacity",void 0),u([A({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),u([A({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),u([Ne("title"),Ne(["web-scene"],"title")],e.prototype,"writeTitle",null),u([A({type:Mi,json:{origins:{"web-scene":{write:{layerContainerTypes:Gi}}}}})],e.prototype,"visibilityTimeExtent",void 0),u([Me("visibilityTimeExtent")],e.prototype,"readVisibilityTimeExtent",null),u([Ne(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Kt,f1]]}})],e.prototype,"writeVisibilityTimeExtent",null),u([A({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Gi}}})],e.prototype,"visible",void 0),e=u([B("esri.layers.mixins.OperationalLayer")],e),e};var vF;const tE=new Ot({asc:"ascending",desc:"descending"});var tb;let Sm=(tb=class extends pe{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new vF({field:this.field,valueExpression:this.valueExpression,order:this.order})}},vF=tb,tb);u([A({type:String,json:{write:!0}})],Sm.prototype,"field",void 0),u([A({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Sm.prototype,"valueExpression",void 0),u([A({type:tE.apiValues,json:{type:tE.jsonValues,read:tE.read,write:tE.write}})],Sm.prototype,"order",void 0),Sm=vF=u([B("esri.layers.support.OrderByInfo")],Sm);function Pke(t,e,i){if(!t)return null;const r=t.find((n=>!!n.field));if(!r)return null;const s=new Sm;return s.read(r,i),[s]}function Lke(t,e,i,r){const s=t.find((n=>!!n.field));s&&Jr(i,[s.toJSON()],e)}const Rke={type:[Sm],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:Pke},write:{writer:Lke}}},Oke=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return u([A(Rke)],e.prototype,"orderBy",void 0),e=u([B("esri.layers.mixins.OrderedLayer")],e),e};let Ih=class extends et{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:bq(e.path,e.portalItem)}:e}set path(e){e!=null&&jo(e)?be.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return bq(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new te("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:r}=await Ie(()=>import("./resourceUtils-BKmot9_j.js"),[],import.meta.url);return await r(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function bq(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&jo(t)&&(t=Bz(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([A()],Ih.prototype,"portalItem",void 0),u([A({type:String,value:null})],Ih.prototype,"path",null),u([yi("path")],Ih.prototype,"_castPath",null),u([A({type:String,readOnly:!0})],Ih.prototype,"url",null),u([A({type:String,readOnly:!0})],Ih.prototype,"cdnUrl",null),u([A({type:String,readOnly:!0})],Ih.prototype,"itemRelativeUrl",null),Ih=u([B("esri.portal.PortalItemResource")],Ih);let Rm=class extends et{constructor(e){super(e),this.created=null,this.rating=null}};u([A({type:Date})],Rm.prototype,"created",void 0),u([A()],Rm.prototype,"rating",void 0),Rm=u([B("esri.portal.PortalRating")],Rm);var UA;const Dke=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),Nke=new Set(["KML","GeoJson","CSV"]);let wt=UA=class extends pe.JSONSupportMixin(Fn){static from(t){return Sx(UA,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Rt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var _;const t=((_=this.type)==null?void 0:_.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,n=!1,o=!1,a=!1,l=!1,c=!1,h=!1,y=!1,g=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(n=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),s=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":h?"utilitynetwork":n?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),y=e.includes("Relational"),s=c||y?"mapimages":n||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):s=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?s="maps":t==="web scene"?s=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?s="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?s="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?s="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?s="datafiles":t==="360 vr experience"?s="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?s="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?s="addindesktop":t==="pdf"?s="pdf":t==="microsoft word"?s="word":t==="microsoft excel"?s="excel":t==="microsoft powerpoint"?s="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?s="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?s="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?s="layersgray":t==="analysis model"?s="analysismodel":t==="scene package"?s="scenepackage":t==="3dtiles package"?s="3dtileslayerpackage":t==="3dtiles service"?s="3dtileslayer":t==="mobile scene package"?s="mobilescenepackage":t==="tile package"||t==="compact tile package"?s="tilepackage":t==="task file"?s="taskfile":t==="report template"?s="report-template":t==="statistical data collection"?s="statisticaldatacollection":t==="insights workbook"?s="workbook":t==="insights model"?s="insightsmodel":t==="insights page"?s="insightspage":t==="insights theme"?s="insightstheme":t==="hub initiative"?s="hubinitiative":t==="hub page"?s="hubpage":t==="hub site application"?s="hubsite":t==="hub event"?s="hubevent":t==="hub project"?s="hubproject":t==="relational database connection"?s="relationaldatabaseconnection":t==="big data file share"?s="datastorecollection":t==="image collection"?s="imagecollection":t==="desktop style"?s="desktopstyle":t==="style"?s=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?s="dashboard":t==="raster function template"?s="rasterprocessingtemplate":t==="vector tile package"?s="vectortilepackage":t==="ortho mapping project"?s="orthomappingproject":t==="ortho mapping template"?s="orthomappingtemplate":t==="solution"?s="solutions":t==="geopackage"?s="geopackage":t==="deep learning package"?s="deeplearningpackage":t==="real time analytic"?s="realtimeanalytics":t==="reality mapping project"?s="realitymappingproject":t==="big data analytic"?s="bigdataanalytics":t==="feed"?s="feed":t==="excalibur imagery project"?s="excaliburimageryproject":t==="notebook"?s="notebook":t==="storymap"?s="storymap":t==="survey123 add in"?s="survey123addin":t==="mission"?s="mission":t==="mission report"?s="missionreport":t==="mission template"?s="missiontemplate":t==="quickcapture project"?s="quickcaptureproject":t==="pro report"?s="proreport":t==="pro report template"?s="proreporttemplate":t==="urban model"?s="urbanmodel":t==="urban project"?s="urbanproject":t==="web experience"?s="experiencebuilder":t==="web experience template"?s="webexperiencetemplate":t==="experience builder widget"?s="experiencebuilderwidget":t==="experience builder widget package"?s="experiencebuilderwidgetpackage":t==="workflow"?s="workflow":t==="kernel gateway connection"?s="kernelgatewayconnection":t==="insights script"?s="insightsscript":t==="hub initiative template"?s="hubinitiativetemplate":t==="storymap theme"?s="storymaptheme":t==="knowledge graph"?s="knowledgegraph":t==="knowledge graph layer"?s="knowledgegraphlayer":t==="knowledge studio project"?s="knowledgestudio":t==="native application"?s="nativeapp":t==="native application installer"?s="nativeappinstaller":t==="web link chart"?s="linkchart":t==="knowledge graph web investigation"?s="investigation":t==="ogcfeatureserver"?s="features":t==="pro presentation"?s="propresentation":t==="pro project"?s="proproject":t==="insights workbook package"?s="insightsworkbookpackage":t==="apache parquet"?s="apacheparquet":t==="notebook code snippet library"?s="notebookcodesnippets":t==="suitability model"?s="suitabilitymodel":t==="esri classifier definition"?s="classifierdefinition":t==="esri classification schema"?s="classificationschema":t==="insights data engineering workbook"?s="dataengineeringworkbook":t==="insights data engineering model"?s="dataengineeringmodel":t==="deep learning studio project"?s="deeplearningproject":t==="discussion"?s="discussion":t==="allsource project"?s="allsourceproject":t==="api key"?s="apikey":t==="data pipeline"?s="datapipelines":t==="group layer"?(g=e.includes("Map"),s=g?"layergroup2d":"layergroup"):s=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",s?er(i+s+r+".png"):null}get isLayer(){return this.type!=null&&Dke.has(this.type)}get itemCdnUrl(){return Hz(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,r,s;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((s=(r=this.portal)==null?void 0:r.user)==null?void 0:s.id);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Oe.getDefault()),i=e.load(t).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{})).then((r=>{this.sourceJSON=r,this.read(r)}));return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof Rm?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Rm({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:ie(this.applicationProxies),avgRating:this.avgRating,categories:ie(this.categories),classification:ie(this.classification),created:ie(this.created),culture:this.culture,description:this.description,extent:ie(this.extent),groupCategories:ie(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ie(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ie(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ie(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ie(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new UA({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const r=t[i];r&&(t[i]=JSON.stringify(r))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Rm(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},UA)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then((t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this)))}update(t){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then((()=>this.reload()))})):Promise.reject(new te("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new te("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:s,tags:n,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!r,tags:n==null?void 0:n.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new UA({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")Fd(e)?r.query={data:e}:r.query={url:fa(e)},i!=null&&(r.query.filename=i);else{const s=new FormData;i!=null?s.append("file",e,i):s.append("file",e),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then((()=>this.reload()))})):Promise.reject(new te("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await Ie(()=>import("./resourceUtils-BKmot9_j.js"),[],import.meta.url);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await Ie(()=>import("./resourceUtils-BKmot9_j.js"),[],import.meta.url);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await Ie(()=>import("./resourceUtils-BKmot9_j.js"),[],import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new te("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await Ie(()=>import("./resourceUtils-BKmot9_j.js"),[],import.meta.url);return e(this,t)}resourceFromPath(t){return new Ih({portalItem:this,path:t})}toJSON(){var i,r;const t=this.extent,e={accessInformation:this.accessInformation,categories:ie(this.categories),classification:ie(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ie(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ie(this.typeKeywords),url:this.url};return Bme(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new UA({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};u([A({type:["private","shared","org","public"]})],wt.prototype,"access",void 0),u([A()],wt.prototype,"accessInformation",void 0),u([A({type:String})],wt.prototype,"apiKey",void 0),u([A({json:{read:{source:"appProxies"}}})],wt.prototype,"applicationProxies",void 0),u([A()],wt.prototype,"avgRating",void 0),u([A()],wt.prototype,"categories",void 0),u([A()],wt.prototype,"classification",void 0),u([A({type:Date})],wt.prototype,"created",void 0),u([A()],wt.prototype,"culture",void 0),u([A()],wt.prototype,"description",void 0),u([A({readOnly:!0})],wt.prototype,"displayName",null),u([A({type:Rt})],wt.prototype,"extent",void 0),u([Me("extent")],wt.prototype,"readExtent",null),u([A()],wt.prototype,"groupCategories",void 0),u([A({readOnly:!0})],wt.prototype,"iconUrl",null),u([A()],wt.prototype,"id",void 0),u([A({readOnly:!0})],wt.prototype,"isLayer",null),u([A({type:Boolean,readOnly:!0})],wt.prototype,"isOrgItem",void 0),u([A()],wt.prototype,"itemControl",void 0),u([A({readOnly:!0})],wt.prototype,"itemPageUrl",null),u([A({readOnly:!0})],wt.prototype,"itemUrl",null),u([A()],wt.prototype,"licenseInfo",void 0),u([A({type:Date})],wt.prototype,"modified",void 0),u([A()],wt.prototype,"name",void 0),u([A()],wt.prototype,"numComments",void 0),u([A()],wt.prototype,"numRatings",void 0),u([A()],wt.prototype,"numViews",void 0),u([A()],wt.prototype,"owner",void 0),u([A()],wt.prototype,"ownerFolder",void 0),u([A({type:Oe})],wt.prototype,"portal",void 0),u([A()],wt.prototype,"screenshots",void 0),u([A()],wt.prototype,"size",void 0),u([A()],wt.prototype,"snippet",void 0),u([A()],wt.prototype,"sourceJSON",void 0),u([A({type:String})],wt.prototype,"sourceUrl",void 0),u([A({type:String})],wt.prototype,"spatialReference",void 0),u([A()],wt.prototype,"tags",void 0),u([A()],wt.prototype,"thumbnail",void 0),u([A({readOnly:!0})],wt.prototype,"thumbnailUrl",null),u([A()],wt.prototype,"title",void 0),u([A()],wt.prototype,"type",void 0),u([A()],wt.prototype,"typeKeywords",void 0),u([A({type:String,json:{read(t,e){var i;if(Nke.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],wt.prototype,"url",void 0),u([A({readOnly:!0})],wt.prototype,"userItemUrl",null),wt=UA=u([B("esri.portal.PortalItem")],wt);const koe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return wt}},Symbol.toStringTag,{value:"Module"})),Fke=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=tr(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new wt({id:r.itemId,portal:s==null?void 0:s.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:n}=await Ie(()=>import("./layersLoader-CzVyBa2Y.js"),__vite__mapDeps([160,22,23,21]),import.meta.url);return ir(r),await n({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},r)}catch(n){throw Zs(n)||be.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch((r=>(Jc(r),!0))))}async setUserPrivileges(i,r){if(!li.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:s,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(s){Jc(s)}}async _fetchUserPrivileges(i,r){let s=this.portalItem;if(!i||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(r);const n=!(_t!=null&&_t.findCredential(this.url)),o=i===s.id;if(o&&s.portal.user)return this._getUserPrivileges(s,n);let a,l;if(o)a=s.portal.url;else try{a=await x7(this.url,r)}catch(g){Jc(g)}if(!a||!owe(a,s.portal.url))return this._fetchFallbackUserPrivileges(r);try{const g=r!=null?r.signal:null;l=await(_t==null?void 0:_t.getCredential(`${a}/sharing`,{prompt:!1,signal:g}))}catch(g){Jc(g)}const c=!0,h=!1,y=!1;if(!l)return{features:{edit:c,fullEdit:h},content:{updateItem:y}};try{if(o?await s.reload():(s=new wt({id:i,portal:{url:a}}),await s.load(r)),s.portal.user)return this._getUserPrivileges(s,n)}catch(g){Jc(g)}return{features:{edit:c,fullEdit:h},content:{updateItem:y}}}_getUserPrivileges(i,r){const s=fMe(i);return r&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(s){Jc(s)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?_t==null?void 0:_t.findCredential(this.url):null;if(!r)return!0;const s=iE.credential===r?iE.user:await this._fetchEditingUser(i);return iE.credential=r,iE.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var h,y;const r=(y=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:y.user;if(r)return r;const s=_t==null?void 0:_t.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const n=`${s.owningSystemUrl}/sharing/rest`,o=Oe.getDefault();if(o&&o.loaded&&sc(o.restUrl)===sc(n))return o.user;const a=`${n}/community/self`,l=i!=null?i.signal:null,c=await Gk(ei(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?ki.fromJSON(c.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var o;const s=r==null?void 0:r.portal,n=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Oe.getDefault());return s&&n&&!Jte(n.restUrl,s.restUrl)?(r.messages&&r.messages.push(new te("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return u([A({type:wt})],e.prototype,"portalItem",null),u([Me("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),u([Ne("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),u([A({clonable:!1})],e.prototype,"resourceReferences",void 0),u([A({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),u([A({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),u([A({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=u([B("esri.layers.mixins.PortalLayer")],e),e},iE={credential:null,user:null};let P2=class extends et{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([A()],P2.prototype,"updating",void 0),u([A()],P2.prototype,"status",void 0),P2=u([B("esri.layers.support.PublishingInfo")],P2);const zke=Symbol(),Bke=t=>{var r;var e;let i=(r=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const n=new P2;return this._checkPublishingStatus(n),n}_checkPublishingStatus(s){let a=0;const l=async h=>{let y;s.updating=!0;try{y=await this.fetchPublishingStatus()}catch{y="unavailable"}y!=="published"&&y!=="unavailable"||(s.status==="publishing"&&this.refresh(),c.remove()),s.status=y,s.updating=!1,c.removed||(a=setTimeout(l,h,h+125))},c={removed:!1,remove(){this.removed=!0,clearTimeout(a)}};this.when().catch((()=>c.remove())),l(250),this.addHandles(c)}},e=zke,r);return u([A({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=u([B("esri.layers.mixins.PublishableLayer")],i),i},hf=new qe,L_=new WeakMap;function jke(t){Vke(t)&&hf.push(new WeakRef(t))}function Uke(t){const e=hf.find((i=>i.deref()===t));e&&hf.remove(e)}function Vke(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function Poe(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:Poe(e,t%e):0}let RR=0,rE=0;function Gke(){const t=Date.now();let e=!1;for(const i of hf){const r=i.deref();r?r.refreshInterval&&t-(L_.get(r)??0)+5>=6e4*r.refreshInterval&&(L_.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=hf.length-1;i>=0;i--)hf.at(i).deref()||hf.removeAt(i)}wK((()=>{const t=Date.now();let e=0;for(const i of hf){const r=i.deref();r&&(e=Poe(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?L_.get(r)||L_.set(r,t):L_.delete(r))}if(e!==rE){if(rE=e,clearInterval(RR),rE===0)return void(RR=0);RR=setInterval(Gke,rE)}}),Hu);const wq=.1,Hke=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=vx((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||jke(this)}),(()=>{}))}destroy(){Uke(this)}castRefreshInterval(i){return i>=wq?i:i<=0?0:wq}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){aS(this._debounceHasDataChanged()).then((r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})}),(r=>{be.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})}))}async hasDataChanged(){return!0}get test(){}};return u([A({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Gi}}}}})],e.prototype,"refreshInterval",void 0),u([yi("refreshInterval")],e.prototype,"castRefreshInterval",null),u([A({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),u([A({readOnly:!0})],e.prototype,"refreshParameters",null),e=u([B("esri.layers.mixins.RefreshableLayer")],e),e},Loe=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&qke(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return u([A({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),u([A({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),u([A({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=u([B("esri.layers.mixins.ScaleRangeLayer")],e),e};function qke(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const J7=ys()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let ic=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Kre(this.value,this.unit,"milliseconds")}};u([it(J7,{nonNullable:!0})],ic.prototype,"unit",void 0),u([A({type:Number,json:{write:!0},nonNullable:!0})],ic.prototype,"value",void 0),ic=u([B("esri.time.TimeInterval")],ic);function _q(t,e){return ic.fromJSON({value:t,unit:e})}let Bs=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?Mi.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?_q(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?_q(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};u([A({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Bs.prototype,"cumulative",void 0),u([A({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"endField",void 0),u([A({type:Mi,json:{write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"fullTimeExtent",void 0),u([Me("fullTimeExtent",["timeExtent"])],Bs.prototype,"readFullTimeExtent",null),u([Ne("fullTimeExtent")],Bs.prototype,"writeFullTimeExtent",null),u([A({type:Boolean,json:{write:!0}})],Bs.prototype,"hasLiveData",void 0),u([A({type:ic,json:{write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"interval",void 0),u([Me("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Bs.prototype,"readInterval",null),u([Ne("interval")],Bs.prototype,"writeInterval",null),u([A({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"startField",void 0),u([A(gT("timeReference",!0))],Bs.prototype,"timeZone",void 0),u([A({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"trackIdField",void 0),u([A({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Bs.prototype,"useTime",void 0),u([A({type:[Date],json:{read:!1}})],Bs.prototype,"stops",void 0),Bs=u([B("esri.layers.support.TimeInfo")],Bs);const Wke={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Gi}}},Qke=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=J7.fromJSON(s.timeOffsetUnits);return n&&o?new ic({value:n,unit:o}):null}set timeInfo(i){tte(i,this.fieldsIndex),this._set("timeInfo",i)}};return u([A({type:Mi,json:{write:!1}})],e.prototype,"timeExtent",void 0),u([A({type:ic})],e.prototype,"timeOffset",void 0),u([Me("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),u([A({value:null,type:Bs,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),u([A(Wke)],e.prototype,"useViewTime",void 0),e=u([B("esri.layers.mixins.TemporalLayer")],e),e};let Xa=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};u([A({type:[Ki],json:{write:!0}})],Xa.prototype,"labelingInfo",void 0),u([A(Vk)],Xa.prototype,"labelsVisible",void 0),u([A({types:Fx,json:{write:!0}})],Xa.prototype,"renderer",void 0),u([A({type:Boolean,json:{write:!0}})],Xa.prototype,"visible",void 0),Xa=u([B("esri.layers.support.TrackPartInfo")],Xa);let So=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new Xa({renderer:new no({symbol:BT.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new Xa({renderer:new no({symbol:BT.clone()})}),this.trackLines=new Xa({renderer:new no({symbol:Zk.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const s=e.filter((n=>n.statisticType!=="avg_angle")).map((n=>n.toJSON()));Jr(r,s,i)}};u([A({type:Boolean,json:{write:!0}})],So.prototype,"enabled",void 0),u([A({type:[Mn],json:{write:!0}})],So.prototype,"fields",void 0),u([Ne("fields")],So.prototype,"writeFields",null),u([A({type:Xa,json:{write:!0}})],So.prototype,"latestObservations",void 0),u([A({type:ic,json:{write:!0}})],So.prototype,"maxDisplayDuration",void 0),u([A({type:Number,json:{write:!0}})],So.prototype,"maxDisplayObservationsPerTrack",void 0),u([A(Uk)],So.prototype,"popupEnabled",void 0),u([A({type:Gu,json:{name:"popupInfo",write:!0}})],So.prototype,"popupTemplate",void 0),u([A({type:Xa,json:{write:!0}})],So.prototype,"previousObservations",void 0),u([A({type:Xa,json:{write:!0}})],So.prototype,"trackLines",void 0),u([A({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],So.prototype,"timeField",void 0),So=u([B("esri.layers.support.TrackInfo")],So);const Jke=t=>{let e=class extends t{constructor(){super(...arguments),this.trackInfo=null}};return u([A({type:So})],e.prototype,"trackInfo",void 0),e=u([B("esri.layers.mixins.TrackableLayer")],e),e},Sq=new Ot({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Vc=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([A({json:{write:!0}})],Vc.prototype,"name",void 0),u([A({json:{write:!0}})],Vc.prototype,"description",void 0),u([A({json:{read:Sq.read,write:Sq.write}})],Vc.prototype,"drawingTool",void 0),u([A({json:{write:!0}})],Vc.prototype,"prototype",void 0),u([A({json:{write:!0}})],Vc.prototype,"thumbnail",void 0),Vc=u([B("esri.layers.support.FeatureTemplate")],Vc);let zc=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=Ok(e[r]);return i}writeDomains(e,i){var s;const r={};for(const n of Object.keys(e))e[n]&&(r[n]=(s=e[n])==null?void 0:s.toJSON());i.domains=r}};u([A({json:{write:!0}})],zc.prototype,"id",void 0),u([A({json:{write:!0}})],zc.prototype,"name",void 0),u([A({json:{write:!0}})],zc.prototype,"domains",void 0),u([Me("domains")],zc.prototype,"readDomains",null),u([Ne("domains")],zc.prototype,"writeDomains",null),u([A({type:[Vc],json:{write:!0}})],zc.prototype,"templates",void 0),zc=u([B("esri.layers.support.FeatureType")],zc);function Zke(){return{fields:{type:[Vs],value:null,set:function(t){if(t&&ce("big-integer-warning-enabled")){const e=t.filter((i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8));if(e.length){const i=e.map((r=>`'${r.name}'`)).join(", ");be.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return IS.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||be.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return fk(this.fieldsIndex,t)}}}}const OR=()=>be.getLogger("esri.layers.support.labelingInfo"),Yke=/\[([^[\]]+)\]/gi;function xq(t,e,i){return t?t.map((r=>{var n;const s=new Ki;if(s.read(r,i),s.labelExpression){const o=e.fields||((n=e.layerDefinition)==null?void 0:n.fields)||this.fields;s.labelExpression=s.labelExpression.replaceAll(Yke,((a,l)=>`[${Xke(l,o)}]`))}return s})):null}function Xke(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const s=e[r].name;if(s.toLowerCase()===i)return s}return t}const $q=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],Kke={esriGeometryPoint:$q,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:$q,esriGeometryEnvelope:null};function Jat(t,e){const i=[];for(const r of t){const s=r.labelPlacement,n=Kke[e];if(!r.symbol)return OR().warn("No ILabelClass symbol specified."),[];if(!n)return OR().error(new te("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(n.includes(s))i.push(r);else{const o=n[0];s&&OR().warn(`Found invalid label placement type ${s} for ${e}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const ePe="relationships/",tPe="expression/";let Wn=class extends et{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||Hk((()=>Md())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??Ie(()=>import("./featureUtils-BgmjVrLC.js"),[],import.meta.url).then((e=>this._featureUtils=e))}get calculatedExpressions(){var i;const e=new qe;if(!this.expressionsUsedInTitle.length)return e;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const s=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(s.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:s,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(s,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){var i,r,s;let e=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof e!="string"?[]:(e=e.toLowerCase(),((s=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:s.filter((n=>e.includes(`{expression/${n.name.toLowerCase()}}`))))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>e.invalid===!0))}get requiredFields(){var r,s;const e=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const n of((s=this.calculatedExpressions)==null?void 0:s.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(n.syntax);for(const a of o){const l=a.split("."),c=this.fieldsIndex.get(l.at(-1)??"");c&&e.add(c.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const n of i){const o=this.fieldsIndex.get(n);o&&e.add(o.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){var i,r;let e="";return this.displayField&&(e=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),e||(e=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const s=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(s)??""}async getTitles(e,i,r){var o;const s=new Map,n=(r==null?void 0:r.timeZone)??"system";try{const[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,(o=this._arcadeTask)==null?void 0:o.promise]);r!=null&&r.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:l,workingTitle:c}=this,h=c&&l;i.forEach((y=>{const g=y.getObjectId()??y.attributes[e.objectIdField],_=h?a({attributes:y.attributes,expressionAttributes:null,fieldInfoMap:l,globalAttributes:this._createFormattedAttributes(e,y,n).global,layer:e,text:c}):"";s.set(g,_)}))}catch{}return s}async _checkAndReQueryGraphics(e,i){const r=i.map((s=>s.getObjectId()??s.attributes[e.objectIdField])).filter(os);if(r.length!==i.length)return i;if(i.some((s=>!Kbe(s,this.requiredFields)))){const s=e.createQuery();s.where="1=1",s.outFields=[...this.requiredFields],s.objectIds=r;const n=await e.queryFeatures(s);if((n==null?void 0:n.features.length)===i.length)return n.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const s=this.fieldsIndex.get(r.fieldName),n=(s==null?void 0:s.name)??r.fieldName;r.fieldName=n,i.set(n.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){var a,l;const s=((a=this.effectivePopupTemplate)==null?void 0:a.fieldInfos)??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((l=this._arcadeTask)!=null&&l.value)){const c=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const h of this.calculatedExpressions)try{n[`expression/${h.name}`]=h.func({vars:{$feature:c}})}catch{}}const o={...i.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:s,attributes:o,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return Sz(e).filter((i=>!(i.indexOf(ePe)===0||i.indexOf(tPe)===0)))}};u([A({readOnly:!0})],Wn.prototype,"_arcadeTask",null),u([A()],Wn.prototype,"_featureUtils",void 0),u([A({readOnly:!0})],Wn.prototype,"featureUtilsPromise",null),u([A({readOnly:!0})],Wn.prototype,"calculatedExpressions",null),u([A()],Wn.prototype,"displayField",void 0),u([A()],Wn.prototype,"effectivePopupTemplate",void 0),u([A()],Wn.prototype,"expressionsUsedInTitle",null),u([A()],Wn.prototype,"fieldsIndex",void 0),u([A()],Wn.prototype,"fieldInfoMap",null),u([A()],Wn.prototype,"fields",void 0),u([A()],Wn.prototype,"objectIdField",void 0),u([A()],Wn.prototype,"requiredFields",null),Wn=u([B("esri.layers.support.TitleCreator")],Wn);const cg=[];function iPe(t,e){if(ST(t.url??""))return!0;const{wkid:i}=e;for(const r of cg){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}cg.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),cg.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),cg.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),cg.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),cg.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function rPe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await Gk(r.populateFromStyle());if(ir(i),s.ok===!1){const n=s.error;e!=null&&e.messages&&e.messages.push(new Sa("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function sPe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:s},n){if(!i)return null;const o=lPe({editFieldsInfo:e,fields:i,objectIdField:r},n);if(!o.length)return null;const a=hPe({titleBase:s,fields:i,displayField:t}),l=uPe();return new Gu({title:a,content:l,fieldInfos:o})}const nPe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):Pbe(t,e);function oPe({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter((s=>!e.includes(s.type)))),t===r&&(t=t.slice()),i!==!0&&t.sort(aPe),t}function aPe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:Eq(t)?-1:Eq(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function lPe(t,e){const i=e==null?void 0:e.visibleFieldNames;return oPe({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||dPe,sortDisabled:e==null?void 0:e.sortDisabled}).map((r=>new Iz({fieldName:r.name,isEditable:kbe(r,t),label:r.alias,format:cPe(r),visible:nPe(r,{...t,visibleFieldNames:i})})))}function cPe(t){switch(t.type){case"small-integer":case"integer":case"single":return new gI({digitSeparator:!0,places:0});case"double":return new gI({digitSeparator:!0,places:2});case"string":return t1e(t.name)?new gI({digitSeparator:!0,places:0}):void 0;default:return}}function uPe(){return[new Db,new Ob]}function hPe(t){const e=_be(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function Eq(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const dPe=["geometry","blob","raster","guid","xml"];var Pu;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(Pu||(Pu={}));const Ys="FeatureLayer";function sE(t,e){return new te("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function Iq(t){return t&&t instanceof qe}const DR=Zke();function NR(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let rt=class extends AMe(Tke(cIe(Bke(iIe(KEe(Pse(Oke(Qke(Jke(Loe(Hke(u$e(kke(Fke(Lk(FEe(c$e(dt.ClonableMixin(cr))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=We.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=vx((async(i,r,s)=>{const{save:n,saveAs:o}=await Ie(()=>import("./featureLayerUtils-BkBxcTzd.js"),__vite__mapDeps([161,162,163,164,22]),import.meta.url);switch(i){case Pu.SAVE:return n(this,r);case Pu.SAVE_AS:return o(this,s,r)}}))}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var s;const i=e!=null?e.signal:null;if((s=this.portalItem)!=null&&s.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then((n=>this.initLayerProperties(n)))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Jc).then((async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(i);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new te("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))})).then((()=>cTe(this,"load",e)));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return tr(e),new Wn({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,i){return i=i.layerDefinition||i,Ine(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,s){this._writeEditingEnabled(e,i,!0,s)}get effectiveEditingEnabled(){return dTe(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,s){s!=null&&s.writeLayerSchema&&Jr(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return mne(i.layerDefinition||i)}readObjectIdField(e,i){return yne(i.layerDefinition||i)}get parsedUrl(){const e=Yr(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=m0(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=m0(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){YU(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){var n;i=i.layerDefinition||i;const s=(n=i.drawingInfo)==null?void 0:n.renderer;if(s){const o=CS(s,i,r)??void 0;return o||be.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),o}return P7(i,r)}set source(e){const i=this._get("source");i!==e&&(Iq(i)&&this._resetMemorySource(i),Iq(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof qe?new Hh({layer:this,items:e}):e:null}readSource(e,i){const r=Ss.fromJSON(i.featureSet);return new Hh({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,i){const r=i.editFieldsInfo,s=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e=e==null?void 0:e.map((o=>Vc.fromJSON(o))),this._fixTemplates(e,s),this._fixTemplates(e,n),e}readTitle(e,i){var n,o,a;const r=((n=i.layerDefinition)==null?void 0:n.name)??i.name,s=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(r){const l=(a=this.portalItem)==null?void 0:a.title;if(this.sublayerTitleMode==="item-title")return this.url?Iwe(this.url,r):r;let c=r;if(!c&&this.url){const h=Wu(this.url);h!=null&&(c=h.title)}return c?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==c&&(c=l+" - "+c),qz(c)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const s=i.fields.find((n=>n.name.toLowerCase()===r));s&&(r=s.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,s=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e==null?void 0:e.map((o=>(o=zc.fromJSON(o),this._fixTemplates(o.templates,s),this._fixTemplates(o.templates,n),o)))}readVisible(e,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const r=await GCe(this,e,i,Ys);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,i,r){const s=await HCe(this,e,i,r,Ys);return this.lastEditsEventDate=new Date,s}async applyEdits(e,i){return qCe(this,e,i)}async uploadAssets(e,i){return WCe(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return sPe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await fK(Ie(()=>import("./FeatureLayerSource-mJN_-YUV.js"),__vite__mapDeps([165,63,70,166,167,168,66,105,65,106,169,170,49,42,171,172,77,75,76,9,10,173,8]),import.meta.url),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=rTe(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=d_(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){const r=await QCe(this,e,i,Ys);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return JCe(this,e,Ys)}async getFeatureTitle(e,i){return this._titleCreator.getTitle(this,e,i)}async getFeatureTitles(e,i){return this._titleCreator.getTitles(this,e,i)}getFeatureType(e){return bne(this.types,this.typeIdField,e)}getFieldDomain(e,i){var r;return nTe(this,e,i,((r=this.getField(e))==null?void 0:r.domain)??null)}async queryAttachments(e,i){return ZCe(this,e,i,Ys)}async queryFeatures(e,i){const r=await this.load(),s=await r.source.queryFeatures(ut.from(e)??r.createQuery(),i);if(s!=null&&s.features)for(const n of s.features)n.layer=n.sourceLayer=r;return s}async queryObjectIds(e,i){return await YCe(this,e,i,Ys)}async queryFeatureCount(e,i){return XCe(this,e,i,Ys)}async queryExtent(e,i){return KCe(this,e,i,Ys)}async queryRelatedFeatures(e,i){return eTe(this,e,i,Ys)}async queryRelatedFeaturesCount(e,i){return tTe(this,e,i,Ys)}async queryTopFeatures(e,i){var a;const{source:r,capabilities:s}=await this.load();if(!r.queryTopFeatures||!((a=s==null?void 0:s.query)!=null&&a.supportsTopFeaturesQuery))throw new te(Ys,"Layer source does not support queryTopFeatures capability");const n=await Ie(()=>import("./TopFeaturesQuery-BFaXhF5E.js"),[],import.meta.url),o=await r.queryTopFeatures(n.default.from(e),i);if(o!=null&&o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryAttributeBins(e,i){const{source:r,capabilities:s}=await this.load();if(!r.queryAttributeBins)throw new te(Ys,"Layer source does not support queryAttributeBins capability");mTe(e,s,Ys);const n=await Ie(()=>import("./AttributeBinsQuery-D2Qo_L_L.js"),__vite__mapDeps([174,39,35,44]),import.meta.url),o=await r.queryAttributeBins(n.default.from(e),i);if(o.features)for(const a of o.features)a.layer=a.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:r,capabilities:s}=await this.load();if(!r.queryTopObjectIds||!(s!=null&&s.query.supportsTopFeaturesQuery))throw new te(Ys,"Layer source does not support queryTopObjectIds capability");const n=await Ie(()=>import("./TopFeaturesQuery-BFaXhF5E.js"),[],import.meta.url);return(await r.queryTopObjectIds(n.default.from(e),i)).filter(f0)}async queryTopFeaturesExtent(e,i){var o;const{source:r,capabilities:s}=await this.load();if(!r.queryTopExtents||!((o=s==null?void 0:s.query)!=null&&o.supportsTopFeaturesQuery))throw new te(Ys,"Layer source does not support queryTopExtents capability");const n=await Ie(()=>import("./TopFeaturesQuery-BFaXhF5E.js"),[],import.meta.url);return r.queryTopExtents(n.default.from(e),i)}async queryTopFeatureCount(e,i){var o;const{source:r,capabilities:s}=await this.load();if(!r.queryTopCount||!((o=s==null?void 0:s.query)!=null&&o.supportsTopFeaturesQuery))throw new te(Ys,"Layer source does not support queryFeatureCount capability");const n=await Ie(()=>import("./TopFeaturesQuery-BFaXhF5E.js"),[],import.meta.url);return r.queryTopCount(n.default.from(e),i)}read(e,i){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:s,showLegend:n}=r;(s==null?void 0:s.length)===1&&(super.read(s[0],i),n!=null&&super.read({showLegend:n},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:s,messages:n}=i;if(this.dynamicDataSource)return n==null||n.push(sE(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&s!=="tables")return n==null||n.push(sE(this,`a table source can only be written to tables, not ${s}`)),null;if(this._hasMemorySource())return n==null||n.push(sE(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&s==="tables")return n==null||n.push(sE(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new te(Ys,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||iPe(this,e))}async save(e){return this._debouncedSaveOperations(Pu.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(Pu.SAVE_AS,i,e)}_readEditingEnabled(e,i,r){var n;let s=(n=e.layerDefinition)==null?void 0:n.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((i=>i.trim())).includes("editing")}_writeEditingEnabled(e,i,r,s){var n,o;if(!e){const a=(o=(n=this.capabilities)==null?void 0:n.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Jr("layerDefinition.capabilities",a,i),r&&!(s!=null&&s.writeLayerSchema)&&(i.capabilities=a)}}_fetchFirstValidLayerId(e){return ei(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((i=>{const r=i.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)}))}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),YU(this.renderer,this.fieldsIndex),tte(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),rPe(this,{origin:"service"})}async hasDataChanged(){return iTe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some((s=>s.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach((r=>{var n;const s=(n=r.prototype)==null?void 0:n.attributes;s&&i&&delete s[i]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new te("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new te("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((i=>{i.layer=this,i.sourceLayer=this})),this.addHandles([e.on("after-add",(i=>{i.item.layer=this,i.item.sourceLayer=this})),e.on("after-remove",(i=>{i.item.layer=null,i.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((i=>{i.layer=null,i.sourceLayer=null})),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};u([A({clonable:!1,readOnly:!0})],rt.prototype,"_titleCreator",null),u([A(EIe)],rt.prototype,"attributeTableTemplate",void 0),u([Me("service","capabilities")],rt.prototype,"readCapabilities",null),u([A({json:{origins:{"web-scene":{write:!1}},write:!0}})],rt.prototype,"charts",void 0),u([A({readOnly:!0})],rt.prototype,"createQueryVersion",null),u([A({json:{read:{source:"layerDefinition.copyrightText"}}})],rt.prototype,"copyright",void 0),u([A({json:{read:{source:"layerDefinition.displayField"}}})],rt.prototype,"displayField",void 0),u([A({types:af,readOnly:!0})],rt.prototype,"defaultSymbol",void 0),u([A({type:Hl})],rt.prototype,"dynamicDataSource",void 0),u([A({type:Boolean})],rt.prototype,"editingEnabled",null),u([Me(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],rt.prototype,"readEditingEnabled",null),u([Me("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],rt.prototype,"readEditingEnabledFromWebMap",null),u([Ne(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],rt.prototype,"writeEditingEnabled",null),u([Ne("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],rt.prototype,"writeEditingEnabledToWebMap",null),u([A({readOnly:!0})],rt.prototype,"effectiveEditingEnabled",null),u([A({clonable:!1,readOnly:!0})],rt.prototype,"featureTitleFields",null),u([A({...DR.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:NR}}}}})],rt.prototype,"fields",void 0),u([A(DR.fieldsIndex)],rt.prototype,"fieldsIndex",void 0),u([A({type:pxe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],rt.prototype,"formTemplate",void 0),u([A({json:{read:{source:"layerDefinition.extent"}}})],rt.prototype,"fullExtent",void 0),u([A({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:NR,writer(t,e,i){const r=t?jN.toJSON(t):null;r&&Jr(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:jN.read}}})],rt.prototype,"geometryType",void 0),u([A({json:{read:{source:"layerDefinition.hasM"}}})],rt.prototype,"hasM",void 0),u([A({json:{read:{source:"layerDefinition.hasZ"}}})],rt.prototype,"hasZ",void 0),u([A(SIe)],rt.prototype,"id",void 0),u([A({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],rt.prototype,"infoFor3D",void 0),u([A({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],rt.prototype,"isTable",void 0),u([Me("service","isTable",["type","geometryType"]),Me("isTable",["layerDefinition.type","layerDefinition.geometryType"])],rt.prototype,"readIsTable",null),u([Ne("web-map","isTable")],rt.prototype,"writeIsTable",null),u([A(Vk)],rt.prototype,"labelsVisible",void 0),u([A({type:[Ki],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:xq,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:xq,write:{layerContainerTypes:Gi}}})],rt.prototype,"labelingInfo",void 0),u([A((()=>{const t=ie(_Ie);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Jr(r,kk(e),i)}}},t})())],rt.prototype,"opacity",void 0),u([A(bIe)],rt.prototype,"legendEnabled",void 0),u([A({type:["show","hide"],json:(()=>{const t=ie(Qse.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],rt.prototype,"listMode",void 0),u([Me("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],rt.prototype,"readGlobalIdField",null),u([A({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:NR}}}}})],rt.prototype,"objectIdField",void 0),u([Me("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],rt.prototype,"readObjectIdField",null),u([A({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Gi}}})],rt.prototype,"operationalLayerType",void 0),u([A(DR.outFields)],rt.prototype,"outFields",void 0),u([A({readOnly:!0})],rt.prototype,"parsedUrl",null),u([A({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],rt.prototype,"path",void 0),u([A(Uk)],rt.prototype,"popupEnabled",void 0),u([A({type:Gu,json:{name:"popupInfo",write:!0}})],rt.prototype,"popupTemplate",void 0),u([A({readOnly:!0})],rt.prototype,"defaultPopupTemplate",null),u([A({types:Fx,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:uke,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Gi,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:Gi})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:Gi})}}})],rt.prototype,"renderer",null),u([Me("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Me("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],rt.prototype,"readRenderer",null),u([A()],rt.prototype,"resourceInfo",void 0),u([A((()=>{const t=ie(gIe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],rt.prototype,"screenSizePerspectiveEnabled",void 0),u([A({clonable:!1})],rt.prototype,"source",null),u([yi("source")],rt.prototype,"castSource",null),u([Me("portal-item","source",["featureSet"]),Me("web-map","source",["featureSet"])],rt.prototype,"readSource",null),u([A({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],rt.prototype,"spatialReference",void 0),u([A({type:Number})],rt.prototype,"subtypeCode",void 0),u([A({type:[Vc]})],rt.prototype,"templates",void 0),u([Me("templates",["editFieldsInfo","creatorField","editorField","templates"])],rt.prototype,"readTemplates",null),u([A({type:Bs})],rt.prototype,"timeInfo",void 0),u([A()],rt.prototype,"title",void 0),u([Me("service","title",["name"]),Me("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],rt.prototype,"readTitle",null),u([Me("web-map","title",["layerDefinition.name","title"])],rt.prototype,"readTitleFromWebMap",null),u([A({type:String})],rt.prototype,"sublayerTitleMode",void 0),u([A({json:{read:!1}})],rt.prototype,"type",void 0),u([A({type:String})],rt.prototype,"typeIdField",void 0),u([Me("service","typeIdField"),Me("typeIdField",["layerDefinition.typeIdField"])],rt.prototype,"readTypeIdField",null),u([A({type:[zc]})],rt.prototype,"types",void 0),u([Me("service","types",["types"]),Me("types",["layerDefinition.types"])],rt.prototype,"readTypes",null),u([A({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:Gi}}}}})],rt.prototype,"visible",void 0),u([Me("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],rt.prototype,"readVisible",null),rt=u([B("esri.layers.FeatureLayer")],rt);const Xat=Object.freeze(Object.defineProperty({__proto__:null,get default(){return rt}},Symbol.toStringTag,{value:"Module"}));let R_=class extends qe{constructor(e){super(e),this.addHandles([this.on("before-add",(i=>{i.item==null&&i.preventDefault()})),this.on("after-add",(i=>this._own(i.item))),this.on("after-remove",(i=>this._release(i.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(qe.ofType(this.itemType.Type))(e):new qe(e)}};function bF(t,e){return{type:t,cast:hre,set(i){const r=Pd(i,this._get(e),t);r.owner=this,this._set(e,r)}}}u([A()],R_.prototype,"owner",null),R_=u([B("esri.core.support.OwningCollection")],R_);let Xm=class extends R_{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};u([hz({Type:Qi,ensureType:fr(Qi)})],Xm.prototype,"itemType",void 0),Xm=u([B("esri.support.GraphicsCollection")],Xm);let np=class extends Pse(Loe(cr)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new Xm,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};u([A({type:Nc})],np.prototype,"elevationInfo",void 0),u([A(bF(Xm,"graphics"))],np.prototype,"graphics",void 0),u([A({type:["show","hide"]})],np.prototype,"listMode",void 0),u([A()],np.prototype,"screenSizePerspectiveEnabled",void 0),u([A({readOnly:!0})],np.prototype,"type",void 0),u([A({constructOnly:!0})],np.prototype,"internal",void 0),np=u([B("esri.layers.GraphicsLayer")],np);var Bf=(function(t){t=t||{};var e=typeof t<"u"?t:{},i={},r;for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);var s="";function n(ge){return e.locateFile?e.locateFile(ge,s):s+ge}var o;typeof document<"u"&&document.currentScript&&(s=document.currentScript.src),s.indexOf("blob:")!==0?s=s.substr(0,s.lastIndexOf("/")+1):s="",o=function(Pe,Ee,Le){var f=new XMLHttpRequest;f.open("GET",Pe,!0),f.responseType="arraybuffer",f.onload=function(){if(f.status==200||f.status==0&&f.response){Ee(f.response);return}var si=G1(Pe);if(si){Ee(si.buffer);return}Le()},f.onerror=Le,f.send(null)};var a=e.print||console.log.bind(console),l=e.printErr||console.warn.bind(console);for(r in i)i.hasOwnProperty(r)&&(e[r]=i[r]);i=null,e.arguments&&e.arguments;var c=0,h=function(ge){c=ge},y=function(){return c},g=8;function _(ge,Pe,Ee,Le){switch(Ee=Ee||"i8",Ee.charAt(Ee.length-1)==="*"&&(Ee="i32"),Ee){case"i1":ye[ge>>0]=Pe;break;case"i8":ye[ge>>0]=Pe;break;case"i16":ee[ge>>1]=Pe;break;case"i32":le[ge>>2]=Pe;break;case"i64":V1=[Pe>>>0,(Gd=Pe,+ih(Gd)>=1?Gd>0?(WP(+qP(Gd/4294967296),4294967295)|0)>>>0:~~+Vd((Gd-+(~~Gd>>>0))/4294967296)>>>0:0)],le[ge>>2]=V1[0],le[ge+4>>2]=V1[1];break;case"float":Te[ge>>2]=Pe;break;case"double":ke[ge>>3]=Pe;break;default:Ca("invalid type for setValue: "+Ee)}}function S(ge,Pe,Ee){switch(Pe=Pe||"i8",Pe.charAt(Pe.length-1)==="*"&&(Pe="i32"),Pe){case"i1":return ye[ge>>0];case"i8":return ye[ge>>0];case"i16":return ee[ge>>1];case"i32":return le[ge>>2];case"i64":return le[ge>>2];case"float":return Te[ge>>2];case"double":return ke[ge>>3];default:Ca("invalid type for getValue: "+Pe)}return null}var E=!1;function C(ge,Pe){ge||Ca("Assertion failed: "+Pe)}function M(ge){var Pe=e["_"+ge];return C(Pe,"Cannot call unknown function "+ge+", make sure it is exported"),Pe}function P(ge,Pe,Ee,Le,f){var j={string:function(Wt){var fo=0;if(Wt!=null&&Wt!==0){var X0=(Wt.length<<2)+1;fo=u$(X0),W(Wt,fo,X0)}return fo},array:function(Wt){var fo=u$(Wt.length);return X(Wt,fo),fo}};function si(Wt){return Pe==="string"?G(Wt):Pe==="boolean"?!!Wt:Wt}var wi=M(ge),qi=[],qt=0;if(Le)for(var ui=0;ui<Le.length;ui++){var It=j[Ee[ui]];It?(qt===0&&(qt=oL()),qi[ui]=It(Le[ui])):qi[ui]=Le[ui]}var gi=wi.apply(null,qi);return gi=si(gi),qt!==0&&nL(qt),gi}function D(ge,Pe,Ee,Le){Ee=Ee||[];var f=Ee.every(function(si){return si==="number"}),j=Pe!=="string";return j&&f&&!Le?M(ge):function(){return P(ge,Pe,Ee,arguments)}}var F=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function U(ge,Pe,Ee){for(var Le=Pe+Ee,f=Pe;ge[f]&&!(f>=Le);)++f;if(f-Pe>16&&ge.subarray&&F)return F.decode(ge.subarray(Pe,f));for(var j="";Pe<f;){var si=ge[Pe++];if(!(si&128)){j+=String.fromCharCode(si);continue}var wi=ge[Pe++]&63;if((si&224)==192){j+=String.fromCharCode((si&31)<<6|wi);continue}var qi=ge[Pe++]&63;if((si&240)==224?si=(si&15)<<12|wi<<6|qi:si=(si&7)<<18|wi<<12|qi<<6|ge[Pe++]&63,si<65536)j+=String.fromCharCode(si);else{var qt=si-65536;j+=String.fromCharCode(55296|qt>>10,56320|qt&1023)}}return j}function G(ge,Pe){return ge?U(xe,ge,Pe):""}function Q(ge,Pe,Ee,Le){if(!(Le>0))return 0;for(var f=Ee,j=Ee+Le-1,si=0;si<ge.length;++si){var wi=ge.charCodeAt(si);if(wi>=55296&&wi<=57343){var qi=ge.charCodeAt(++si);wi=65536+((wi&1023)<<10)|qi&1023}if(wi<=127){if(Ee>=j)break;Pe[Ee++]=wi}else if(wi<=2047){if(Ee+1>=j)break;Pe[Ee++]=192|wi>>6,Pe[Ee++]=128|wi&63}else if(wi<=65535){if(Ee+2>=j)break;Pe[Ee++]=224|wi>>12,Pe[Ee++]=128|wi>>6&63,Pe[Ee++]=128|wi&63}else{if(Ee+3>=j)break;Pe[Ee++]=240|wi>>18,Pe[Ee++]=128|wi>>12&63,Pe[Ee++]=128|wi>>6&63,Pe[Ee++]=128|wi&63}}return Pe[Ee]=0,Ee-f}function W(ge,Pe,Ee){return Q(ge,xe,Pe,Ee)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function X(ge,Pe){ye.set(ge,Pe)}function K(ge,Pe){return ge%Pe>0&&(ge+=Pe-ge%Pe),ge}var de,ye,xe,ee,le,Te,ke;function De(ge){de=ge,e.HEAP8=ye=new Int8Array(ge),e.HEAP16=ee=new Int16Array(ge),e.HEAP32=le=new Int32Array(ge),e.HEAPU8=xe=new Uint8Array(ge),e.HEAPU16=new Uint16Array(ge),e.HEAPU32=new Uint32Array(ge),e.HEAPF32=Te=new Float32Array(ge),e.HEAPF64=ke=new Float64Array(ge)}var Ke=5271536,vt=28624,Pt=e.TOTAL_MEMORY||33554432;e.buffer?de=e.buffer:de=new ArrayBuffer(Pt),Pt=de.byteLength,De(de),le[vt>>2]=Ke;function Zt(ge){for(;ge.length>0;){var Pe=ge.shift();if(typeof Pe=="function"){Pe();continue}var Ee=Pe.func;typeof Ee=="number"?Pe.arg===void 0?e.dynCall_v(Ee):e.dynCall_vi(Ee,Pe.arg):Ee(Pe.arg===void 0?null:Pe.arg)}}var Ar=[],ks=[],Ps=[],jn=[];function pn(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Z0(e.preRun.shift());Zt(Ar)}function fl(){Zt(ks)}function po(){Zt(Ps)}function J0(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Y0(e.postRun.shift());Zt(jn)}function Z0(ge){Ar.unshift(ge)}function Y0(ge){jn.unshift(ge)}var ih=Math.abs,Vd=Math.ceil,qP=Math.floor,WP=Math.min,rh=0,eA=null;function o$(ge){rh++,e.monitorRunDependencies&&e.monitorRunDependencies(rh)}function a$(ge){if(rh--,e.monitorRunDependencies&&e.monitorRunDependencies(rh),rh==0&&eA){var Pe=eA;eA=null,Pe()}}e.preloadedImages={},e.preloadedAudios={};var Ls=null,U1="data:application/octet-stream;base64,";function l$(ge){return String.prototype.startsWith?ge.startsWith(U1):ge.indexOf(U1)===0}var Gd,V1;Ls="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAdmVydGV4Um90YXRpb25zAGNlbGxUb1ZlcnRleABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var QP=28640;function JP(ge,Pe,Ee,Le){Ca("Assertion failed: "+G(ge)+", at: "+[Pe?G(Pe):"unknown filename",Ee,Le?G(Le):"unknown function"])}function c$(){return ye.length}function Gj(ge,Pe,Ee){xe.set(xe.subarray(Pe,Pe+Ee),ge)}function ZP(ge){return e.___errno_location&&(le[e.___errno_location()>>2]=ge),ge}function YP(ge){Ca("OOM")}function XP(ge){try{var Pe=new ArrayBuffer(ge);return Pe.byteLength!=ge?void 0:(new Int8Array(Pe).set(ye),sL(Pe),De(Pe),1)}catch{}}function KP(ge){var Pe=c$(),Ee=16777216,Le=2147483648-Ee;if(ge>Le)return!1;for(var f=16777216,j=Math.max(Pe,f);j<ge;)j<=536870912?j=K(2*j,Ee):j=Math.min(K((3*j+2147483648)/4,Ee),Le);var si=XP(j);return!!si}var eL=typeof atob=="function"?atob:function(ge){var Pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ee="",Le,f,j,si,wi,qi,qt,ui=0;ge=ge.replace(/[^A-Za-z0-9\+\/\=]/g,"");do si=Pe.indexOf(ge.charAt(ui++)),wi=Pe.indexOf(ge.charAt(ui++)),qi=Pe.indexOf(ge.charAt(ui++)),qt=Pe.indexOf(ge.charAt(ui++)),Le=si<<2|wi>>4,f=(wi&15)<<4|qi>>2,j=(qi&3)<<6|qt,Ee=Ee+String.fromCharCode(Le),qi!==64&&(Ee=Ee+String.fromCharCode(f)),qt!==64&&(Ee=Ee+String.fromCharCode(j));while(ui<ge.length);return Ee};function tL(ge){try{for(var Pe=eL(ge),Ee=new Uint8Array(Pe.length),Le=0;Le<Pe.length;++Le)Ee[Le]=Pe.charCodeAt(Le);return Ee}catch{throw new Error("Converting base64 string to bytes failed.")}}function G1(ge){if(l$(ge))return tL(ge.slice(U1.length))}var iL={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},rL={b:h,c:y,d:JP,e:ZP,f:c$,g:Gj,h:KP,i:YP,o:QP,p:vt},Fe=(function(ge,Pe,Ee){"almost asm";var Le=new ge.Int8Array(Ee),f=new ge.Int32Array(Ee);new ge.Uint8Array(Ee),new ge.Float32Array(Ee);var j=new ge.Float64Array(Ee),si=Pe.o|0,wi=Pe.p|0,qi=ge.Math.floor,qt=ge.Math.abs,ui=ge.Math.sqrt,It=ge.Math.pow,gi=ge.Math.cos,Wt=ge.Math.sin,fo=ge.Math.tan,X0=ge.Math.acos,q1=ge.Math.asin,W1=ge.Math.atan,fn=ge.Math.atan2,sr=ge.Math.ceil,Ta=ge.Math.imul,K0=ge.Math.min,aL=ge.Math.max,Al=ge.Math.clz32,zt=Pe.b,q=Pe.c,Mt=Pe.d,Un=Pe.e,lL=Pe.f,cL=Pe.g,Q1=Pe.h,p$=Pe.i,L=28656;function we(p){return Le=new Int8Array(p),f=new Int32Array(p),j=new Float64Array(p),Ee=p,!0}function Ue(p){p=p|0;var d=0;return d=L,L=L+p|0,L=L+15&-16,d|0}function $t(){return L|0}function _i(p){p=p|0,L=p}function mr(p,d){p=p|0,L=p}function Xr(p,d){p=p|0,d=d|0;var m=0,v=0,w=0;return(p|0)<0?(d=2,d|0):(p|0)>13780509?(d=g$(15,d)|0,d|0):(m=((p|0)<0)<<31>>31,w=Ds(p|0,m|0,3,0)|0,v=q()|0,m=gt(p|0,m|0,1,0)|0,m=Ds(w|0,v|0,m|0,q()|0)|0,m=gt(m|0,q()|0,1,0)|0,p=q()|0,f[d>>2]=m,f[d+4>>2]=p,d=0,d|0)}function gs(p,d,m,v){return p=p|0,d=d|0,m=m|0,v=v|0,Hj(p,d,m,v,0)|0}function Hj(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0;if(T=L,L=L+16|0,$=T,!(qj(p,d,m,v,w)|0))return v=0,L=T,v|0;do if((m|0)>=0){if((m|0)>13780509){if(x=g$(15,$)|0,x|0)break;I=$,$=f[I>>2]|0,I=f[I+4>>2]|0}else x=((m|0)<0)<<31>>31,k=Ds(m|0,x|0,3,0)|0,I=q()|0,x=gt(m|0,x|0,1,0)|0,x=Ds(k|0,I|0,x|0,q()|0)|0,x=gt(x|0,q()|0,1,0)|0,I=q()|0,f[$>>2]=x,f[$+4>>2]=I,$=x;if(Jd(v|0,0,$<<3|0)|0,w|0){Jd(w|0,0,$<<2|0)|0,x=fc(p,d,m,v,w,$,I,0)|0;break}x=mo($,4)|0,x?(k=fc(p,d,m,v,x,$,I,0)|0,bt(x),x=k):x=13}else x=2;while(!1);return k=x,L=T,k|0}function qj(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0;if(re=L,L=L+16|0,Z=re,Y=re+8|0,J=Z,f[J>>2]=p,f[J+4>>2]=d,(m|0)<0)return Y=2,L=re,Y|0;if(x=v,f[x>>2]=p,f[x+4>>2]=d,x=(w|0)!=0,x&&(f[w>>2]=0),Bi(p,d)|0)return Y=9,L=re,Y|0;f[Y>>2]=0;e:do if((m|0)>=1)if(x)for(N=1,k=0,H=0,J=1,x=p;;){if(!(k|H)){if(x=Rs(x,d,4,Y,Z)|0,x|0)break e;if(d=Z,x=f[d>>2]|0,d=f[d+4>>2]|0,Bi(x,d)|0){x=9;break e}}if(x=Rs(x,d,f[26800+(H<<2)>>2]|0,Y,Z)|0,x|0)break e;if(d=Z,x=f[d>>2]|0,d=f[d+4>>2]|0,p=v+(N<<3)|0,f[p>>2]=x,f[p+4>>2]=d,f[w+(N<<2)>>2]=J,p=k+1|0,$=(p|0)==(J|0),I=H+1|0,T=(I|0)==6,Bi(x,d)|0){x=9;break e}if(J=J+(T&$&1)|0,(J|0)>(m|0)){x=0;break}else N=N+1|0,k=$?0:p,H=$?T?0:I:H}else for(N=1,k=0,H=0,J=1,x=p;;){if(!(k|H)){if(x=Rs(x,d,4,Y,Z)|0,x|0)break e;if(d=Z,x=f[d>>2]|0,d=f[d+4>>2]|0,Bi(x,d)|0){x=9;break e}}if(x=Rs(x,d,f[26800+(H<<2)>>2]|0,Y,Z)|0,x|0)break e;if(d=Z,x=f[d>>2]|0,d=f[d+4>>2]|0,p=v+(N<<3)|0,f[p>>2]=x,f[p+4>>2]=d,p=k+1|0,$=(p|0)==(J|0),I=H+1|0,T=(I|0)==6,Bi(x,d)|0){x=9;break e}if(J=J+(T&$&1)|0,(J|0)>(m|0)){x=0;break}else N=N+1|0,k=$?0:p,H=$?T?0:I:H}else x=0;while(!1);return Y=x,L=re,Y|0}function fc(p,d,m,v,w,x,$,I){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0,x=x|0,$=$|0,I=I|0;var T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0;if(re=L,L=L+16|0,Z=re+8|0,Y=re,T=ny(p|0,d|0,x|0,$|0)|0,N=q()|0,H=v+(T<<3)|0,he=H,ve=f[he>>2]|0,he=f[he+4>>2]|0,k=(ve|0)==(p|0)&(he|0)==(d|0),!((ve|0)==0&(he|0)==0|k))do T=gt(T|0,N|0,1,0)|0,T=sy(T|0,q()|0,x|0,$|0)|0,N=q()|0,H=v+(T<<3)|0,ve=H,he=f[ve>>2]|0,ve=f[ve+4>>2]|0,k=(he|0)==(p|0)&(ve|0)==(d|0);while(!((he|0)==0&(ve|0)==0|k));if(T=w+(T<<2)|0,k&&(f[T>>2]|0)<=(I|0)||(ve=H,f[ve>>2]=p,f[ve+4>>2]=d,f[T>>2]=I,(I|0)>=(m|0)))return ve=0,L=re,ve|0;switch(k=I+1|0,f[Z>>2]=0,T=Rs(p,d,2,Z,Y)|0,T|0){case 9:{J=9;break}case 0:{T=Y,T=fc(f[T>>2]|0,f[T+4>>2]|0,m,v,w,x,$,k)|0,T||(J=9);break}}e:do if((J|0)==9){switch(f[Z>>2]=0,T=Rs(p,d,3,Z,Y)|0,T|0){case 9:break;case 0:{if(T=Y,T=fc(f[T>>2]|0,f[T+4>>2]|0,m,v,w,x,$,k)|0,T|0)break e;break}default:break e}switch(f[Z>>2]=0,T=Rs(p,d,1,Z,Y)|0,T|0){case 9:break;case 0:{if(T=Y,T=fc(f[T>>2]|0,f[T+4>>2]|0,m,v,w,x,$,k)|0,T|0)break e;break}default:break e}switch(f[Z>>2]=0,T=Rs(p,d,5,Z,Y)|0,T|0){case 9:break;case 0:{if(T=Y,T=fc(f[T>>2]|0,f[T+4>>2]|0,m,v,w,x,$,k)|0,T|0)break e;break}default:break e}switch(f[Z>>2]=0,T=Rs(p,d,4,Z,Y)|0,T|0){case 9:break;case 0:{if(T=Y,T=fc(f[T>>2]|0,f[T+4>>2]|0,m,v,w,x,$,k)|0,T|0)break e;break}default:break e}switch(f[Z>>2]=0,T=Rs(p,d,6,Z,Y)|0,T|0){case 9:break;case 0:{if(T=Y,T=fc(f[T>>2]|0,f[T+4>>2]|0,m,v,w,x,$,k)|0,T|0)break e;break}default:break e}return ve=0,L=re,ve|0}while(!1);return ve=T,L=re,ve|0}function Rs(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0;if(m>>>0>6)return w=1,w|0;if(H=(f[v>>2]|0)%6|0,f[v>>2]=H,(H|0)>0){x=0;do m=rA(m)|0,x=x+1|0;while((x|0)<(f[v>>2]|0))}if(H=Re(p|0,d|0,45)|0,q()|0,N=H&127,N>>>0>121)return w=5,w|0;T=Ao(p,d)|0,x=Re(p|0,d|0,52)|0,q()|0,x=x&15;e:do if(!x)k=8;else{for(;;){if($=(15-x|0)*3|0,I=Re(p|0,d|0,$|0)|0,q()|0,I=I&7,(I|0)==7){d=5;break}if(Y=(Ma(x)|0)==0,x=x+-1|0,J=Be(7,0,$|0)|0,d=d&~(q()|0),Z=Be(f[(Y?432:16)+(I*28|0)+(m<<2)>>2]|0,0,$|0)|0,$=q()|0,m=f[(Y?640:224)+(I*28|0)+(m<<2)>>2]|0,p=Z|p&~J,d=$|d,!m){m=0;break e}if(!x){k=8;break e}}return d|0}while(!1);(k|0)==8&&(Y=f[848+(N*28|0)+(m<<2)>>2]|0,Z=Be(Y|0,0,45)|0,p=Z|p,d=q()|0|d&-1040385,m=f[4272+(N*28|0)+(m<<2)>>2]|0,(Y&127|0)==127&&(Y=Be(f[848+(N*28|0)+20>>2]|0,0,45)|0,d=q()|0|d&-1040385,m=f[4272+(N*28|0)+20>>2]|0,p=sA(Y|p,d)|0,d=q()|0,f[v>>2]=(f[v>>2]|0)+1)),I=Re(p|0,d|0,45)|0,q()|0,I=I&127;e:do if(nr(I)|0){t:do if((Ao(p,d)|0)==1){if((N|0)!=(I|0))if(Zj(I,f[7696+(N*28|0)>>2]|0)|0){p=xL(p,d)|0,$=1,d=q()|0;break}else Mt(27795,26864,533,26872);switch(T|0){case 3:{p=sA(p,d)|0,d=q()|0,f[v>>2]=(f[v>>2]|0)+1,$=0;break t}case 5:{p=xL(p,d)|0,d=q()|0,f[v>>2]=(f[v>>2]|0)+5,$=0;break t}case 0:return Y=9,Y|0;default:return Y=1,Y|0}}else $=0;while(!1);if((m|0)>0){x=0;do p=SL(p,d)|0,d=q()|0,x=x+1|0;while((x|0)!=(m|0))}if((N|0)!=(I|0)){if(!(hL(I)|0)){if(($|0)!=0|(Ao(p,d)|0)!=5)break;f[v>>2]=(f[v>>2]|0)+1;break}switch(H&127){case 8:case 118:break e}(Ao(p,d)|0)!=3&&(f[v>>2]=(f[v>>2]|0)+1)}}else if((m|0)>0){x=0;do p=sA(p,d)|0,d=q()|0,x=x+1|0;while((x|0)!=(m|0))}while(!1);return f[v>>2]=((f[v>>2]|0)+m|0)%6|0,Y=w,f[Y>>2]=p,f[Y+4>>2]=d,Y=0,Y|0}function Vfe(p,d,m,v){return p=p|0,d=d|0,m=m|0,v=v|0,Wj(p,d,m,v)|0?(Jd(v|0,0,m*48|0)|0,v=Gfe(p,d,m,v)|0,v|0):(v=0,v|0)}function Wj(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0;if(Y=L,L=L+16|0,J=Y,Z=Y+8|0,H=J,f[H>>2]=p,f[H+4>>2]=d,(m|0)<0)return Z=2,L=Y,Z|0;if(!m)return Z=v,f[Z>>2]=p,f[Z+4>>2]=d,Z=0,L=Y,Z|0;f[Z>>2]=0;e:do if(Bi(p,d)|0)p=9;else{w=0,H=p;do{if(p=Rs(H,d,4,Z,J)|0,p|0)break e;if(d=J,H=f[d>>2]|0,d=f[d+4>>2]|0,w=w+1|0,Bi(H,d)|0){p=9;break e}}while((w|0)<(m|0));N=v,f[N>>2]=H,f[N+4>>2]=d,N=m+-1|0,k=0,p=1;do{if(w=26800+(k<<2)|0,(k|0)==5)for($=f[w>>2]|0,x=0,w=p;;){if(p=J,p=Rs(f[p>>2]|0,f[p+4>>2]|0,$,Z,J)|0,p|0)break e;if((x|0)!=(N|0))if(T=J,I=f[T>>2]|0,T=f[T+4>>2]|0,p=v+(w<<3)|0,f[p>>2]=I,f[p+4>>2]=T,!(Bi(I,T)|0))p=w+1|0;else{p=9;break e}else p=w;if(x=x+1|0,(x|0)>=(m|0))break;w=p}else for($=J,T=f[w>>2]|0,I=0,w=p,x=f[$>>2]|0,$=f[$+4>>2]|0;;){if(p=Rs(x,$,T,Z,J)|0,p|0)break e;if($=J,x=f[$>>2]|0,$=f[$+4>>2]|0,p=v+(w<<3)|0,f[p>>2]=x,f[p+4>>2]=$,p=w+1|0,Bi(x,$)|0){p=9;break e}if(I=I+1|0,(I|0)>=(m|0))break;w=p}k=k+1|0}while(k>>>0<6);p=J,p=(H|0)==(f[p>>2]|0)&&(d|0)==(f[p+4>>2]|0)?0:9}while(!1);return Z=p,L=Y,Z|0}function Gfe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0;if(H=L,L=L+16|0,$=H,!m)return f[v>>2]=p,f[v+4>>2]=d,v=0,L=H,v|0;do if((m|0)>=0){if((m|0)>13780509){if(w=g$(15,$)|0,w|0)break;x=$,w=f[x>>2]|0,x=f[x+4>>2]|0}else w=((m|0)<0)<<31>>31,N=Ds(m|0,w|0,3,0)|0,x=q()|0,w=gt(m|0,w|0,1,0)|0,w=Ds(N|0,x|0,w|0,q()|0)|0,w=gt(w|0,q()|0,1,0)|0,x=q()|0,N=$,f[N>>2]=w,f[N+4>>2]=x;if(k=mo(w,8)|0,!k)w=13;else{if(N=mo(w,4)|0,!N){bt(k),w=13;break}if(w=fc(p,d,m,k,N,w,x,0)|0,w|0){bt(k),bt(N);break}if(d=f[$>>2]|0,$=f[$+4>>2]|0,($|0)>0|($|0)==0&d>>>0>0){w=0,I=0,T=0;do p=k+(I<<3)|0,x=f[p>>2]|0,p=f[p+4>>2]|0,!((x|0)==0&(p|0)==0)&&(f[N+(I<<2)>>2]|0)==(m|0)&&(J=v+(w<<3)|0,f[J>>2]=x,f[J+4>>2]=p,w=w+1|0),I=gt(I|0,T|0,1,0)|0,T=q()|0;while((T|0)<($|0)|(T|0)==($|0)&I>>>0<d>>>0)}bt(k),bt(N),w=0}}else w=2;while(!1);return J=w,L=H,J|0}function uL(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0;for(I=L,L=L+16|0,x=I,$=I+8|0,w=(Bi(p,d)|0)==0,w=w?1:2;;){if(f[$>>2]=0,k=(Rs(p,d,w,$,x)|0)==0,T=x,k&((f[T>>2]|0)==(m|0)?(f[T+4>>2]|0)==(v|0):0)){p=4;break}if(w=w+1|0,w>>>0>=7){w=7,p=4;break}}return(p|0)==4?(L=I,w|0):0}function Hfe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0;if(I=L,L=L+48|0,w=I+16|0,x=I+8|0,$=I,m=ew(m)|0,m|0)return $=m,L=I,$|0;if(k=p,T=f[k+4>>2]|0,m=x,f[m>>2]=f[k>>2],f[m+4>>2]=T,_9(x,w),m=e9(w,d,$)|0,!m){if(d=f[x>>2]|0,x=f[p+8>>2]|0,(x|0)>0){w=f[p+12>>2]|0,m=0;do d=(f[w+(m<<3)>>2]|0)+d|0,m=m+1|0;while((m|0)<(x|0))}m=$,w=f[m>>2]|0,m=f[m+4>>2]|0,x=((d|0)<0)<<31>>31,(m|0)<(x|0)|(m|0)==(x|0)&w>>>0<d>>>0?(m=$,f[m>>2]=d,f[m+4>>2]=x,m=x):d=w,T=gt(d|0,m|0,12,0)|0,k=q()|0,m=$,f[m>>2]=T,f[m+4>>2]=k,m=v,f[m>>2]=T,f[m+4>>2]=k,m=0}return k=m,L=I,k|0}function Qj(p,d,m,v,w,x,$){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0,x=x|0,$=$|0;var I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0,pt=0,ot=0,Ut=0,Vt=0,ni=0,Lt=0,ft=0,je=0,Xt=0,Oi=0,Qt=0,Di=0,Gn=0,D9=0;if(Oi=L,L=L+64|0,Lt=Oi+48|0,ft=Oi+32|0,je=Oi+24|0,Ve=Oi+8|0,pt=Oi,T=f[p>>2]|0,(T|0)<=0)return Xt=0,L=Oi,Xt|0;for(ot=p+4|0,Ut=Lt+8|0,Vt=ft+8|0,ni=Ve+8|0,I=0,fe=0;;){k=f[ot>>2]|0,me=k+(fe<<4)|0,f[Lt>>2]=f[me>>2],f[Lt+4>>2]=f[me+4>>2],f[Lt+8>>2]=f[me+8>>2],f[Lt+12>>2]=f[me+12>>2],(fe|0)==(T+-1|0)?(f[ft>>2]=f[k>>2],f[ft+4>>2]=f[k+4>>2],f[ft+8>>2]=f[k+8>>2],f[ft+12>>2]=f[k+12>>2]):(me=k+(fe+1<<4)|0,f[ft>>2]=f[me>>2],f[ft+4>>2]=f[me+4>>2],f[ft+8>>2]=f[me+8>>2],f[ft+12>>2]=f[me+12>>2]),T=rAe(Lt,ft,v,je)|0;e:do if(T)k=0,I=T;else if(T=je,k=f[T>>2]|0,T=f[T+4>>2]|0,(T|0)>0|(T|0)==0&k>>>0>0){ve=0,me=0;t:for(;;){if(Di=1/(+(k>>>0)+4294967296*+(T|0)),D9=+j[Lt>>3],T=Os(k|0,T|0,ve|0,me|0)|0,Gn=+(T>>>0)+4294967296*+(q()|0),Qt=+(ve>>>0)+4294967296*+(me|0),j[Ve>>3]=Di*(D9*Gn)+Di*(+j[ft>>3]*Qt),j[ni>>3]=Di*(+j[Ut>>3]*Gn)+Di*(+j[Vt>>3]*Qt),T=$L(Ve,v,pt)|0,T|0){I=T;break}he=pt,re=f[he>>2]|0,he=f[he+4>>2]|0,J=ny(re|0,he|0,d|0,m|0)|0,N=q()|0,T=$+(J<<3)|0,H=T,k=f[H>>2]|0,H=f[H+4>>2]|0;i:do if((k|0)==0&(H|0)==0)ne=T,Xt=16;else for(Z=0,Y=0;;){if((Z|0)>(m|0)|(Z|0)==(m|0)&Y>>>0>d>>>0){I=1;break t}if((k|0)==(re|0)&(H|0)==(he|0))break i;if(T=gt(J|0,N|0,1,0)|0,J=sy(T|0,q()|0,d|0,m|0)|0,N=q()|0,Y=gt(Y|0,Z|0,1,0)|0,Z=q()|0,T=$+(J<<3)|0,H=T,k=f[H>>2]|0,H=f[H+4>>2]|0,(k|0)==0&(H|0)==0){ne=T,Xt=16;break}}while(!1);if((Xt|0)==16&&(Xt=0,!((re|0)==0&(he|0)==0))&&(Y=ne,f[Y>>2]=re,f[Y+4>>2]=he,Y=x+(f[w>>2]<<3)|0,f[Y>>2]=re,f[Y+4>>2]=he,Y=w,Y=gt(f[Y>>2]|0,f[Y+4>>2]|0,1,0)|0,re=q()|0,he=w,f[he>>2]=Y,f[he+4>>2]=re),ve=gt(ve|0,me|0,1,0)|0,me=q()|0,T=je,k=f[T>>2]|0,T=f[T+4>>2]|0,!((T|0)>(me|0)|(T|0)==(me|0)&k>>>0>ve>>>0)){k=1;break e}}k=0}else k=1;while(!1);if(fe=fe+1|0,!k){Xt=21;break}if(T=f[p>>2]|0,(fe|0)>=(T|0)){I=0,Xt=21;break}}return(Xt|0)==21?(L=Oi,I|0):0}function qfe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0,pt=0,ot=0,Ut=0,Vt=0,ni=0,Lt=0,ft=0,je=0,Xt=0,Oi=0,Qt=0,Di=0,Gn=0;if(Gn=L,L=L+112|0,Xt=Gn+80|0,T=Gn+72|0,Oi=Gn,Qt=Gn+56|0,w=ew(m)|0,w|0)return Di=w,L=Gn,Di|0;if(k=p+8|0,Di=Ac((f[k>>2]<<5)+32|0)|0,!Di)return Di=13,L=Gn,Di|0;if(PL(p,Di),w=ew(m)|0,!w){if(ft=p,je=f[ft+4>>2]|0,w=T,f[w>>2]=f[ft>>2],f[w+4>>2]=je,_9(T,Xt),w=e9(Xt,d,Oi)|0,w)ft=0,je=0;else{if(w=f[T>>2]|0,x=f[k>>2]|0,(x|0)>0){$=f[p+12>>2]|0,m=0;do w=(f[$+(m<<3)>>2]|0)+w|0,m=m+1|0;while((m|0)!=(x|0));m=w}else m=w;w=Oi,x=f[w>>2]|0,w=f[w+4>>2]|0,$=((m|0)<0)<<31>>31,(w|0)<($|0)|(w|0)==($|0)&x>>>0<m>>>0?(w=Oi,f[w>>2]=m,f[w+4>>2]=$,w=$):m=x,ft=gt(m|0,w|0,12,0)|0,je=q()|0,w=Oi,f[w>>2]=ft,f[w+4>>2]=je,w=0}if(!w){if(m=mo(ft,8)|0,!m)return bt(Di),Di=13,L=Gn,Di|0;if(I=mo(ft,8)|0,!I)return bt(Di),bt(m),Di=13,L=Gn,Di|0;ni=Xt,f[ni>>2]=0,f[ni+4>>2]=0,ni=p,Lt=f[ni+4>>2]|0,w=T,f[w>>2]=f[ni>>2],f[w+4>>2]=Lt,w=Qj(T,ft,je,d,Xt,m,I)|0;e:do if(w)bt(m),bt(I),bt(Di);else{t:do if((f[k>>2]|0)>0){for($=p+12|0,x=0;w=Qj((f[$>>2]|0)+(x<<3)|0,ft,je,d,Xt,m,I)|0,x=x+1|0,!(w|0);)if((x|0)>=(f[k>>2]|0))break t;bt(m),bt(I),bt(Di);break e}while(!1);(je|0)>0|(je|0)==0&ft>>>0>0&&Jd(I|0,0,ft<<3|0)|0,Lt=Xt,ni=f[Lt+4>>2]|0;t:do if((ni|0)>0|(ni|0)==0&(f[Lt>>2]|0)>>>0>0){ot=m,Ut=I,Vt=m,ni=I,Lt=m,w=m,ne=m,Ve=I,pt=I,m=I;i:for(;;){for(he=0,ve=0,me=0,fe=0,x=0,$=0;;){I=Oi,T=I+56|0;do f[I>>2]=0,I=I+4|0;while((I|0)<(T|0));if(d=ot+(he<<3)|0,k=f[d>>2]|0,d=f[d+4>>2]|0,qj(k,d,1,Oi,0)|0){I=Oi,T=I+56|0;do f[I>>2]=0,I=I+4|0;while((I|0)<(T|0));I=mo(7,4)|0,I|0&&(fc(k,d,1,Oi,I,7,0,0)|0,bt(I))}for(re=0;;){Y=Oi+(re<<3)|0,Z=f[Y>>2]|0,Y=f[Y+4>>2]|0;r:do if((Z|0)==0&(Y|0)==0)I=x,T=$;else{if(N=ny(Z|0,Y|0,ft|0,je|0)|0,k=q()|0,I=v+(N<<3)|0,d=I,T=f[d>>2]|0,d=f[d+4>>2]|0,!((T|0)==0&(d|0)==0)){H=0,J=0;do{if((H|0)>(je|0)|(H|0)==(je|0)&J>>>0>ft>>>0)break i;if((T|0)==(Z|0)&(d|0)==(Y|0)){I=x,T=$;break r}I=gt(N|0,k|0,1,0)|0,N=sy(I|0,q()|0,ft|0,je|0)|0,k=q()|0,J=gt(J|0,H|0,1,0)|0,H=q()|0,I=v+(N<<3)|0,d=I,T=f[d>>2]|0,d=f[d+4>>2]|0}while(!((T|0)==0&(d|0)==0))}if((Z|0)==0&(Y|0)==0){I=x,T=$;break}nA(Z,Y,Qt)|0,LL(p,Di,Qt)|0&&(J=gt(x|0,$|0,1,0)|0,$=q()|0,H=I,f[H>>2]=Z,f[H+4>>2]=Y,x=Ut+(x<<3)|0,f[x>>2]=Z,f[x+4>>2]=Y,x=J),I=x,T=$}while(!1);if(re=re+1|0,re>>>0>=7)break;x=I,$=T}if(he=gt(he|0,ve|0,1,0)|0,ve=q()|0,me=gt(me|0,fe|0,1,0)|0,fe=q()|0,$=Xt,x=f[$>>2]|0,$=f[$+4>>2]|0,(fe|0)<($|0)|(fe|0)==($|0)&me>>>0<x>>>0)x=I,$=T;else break}if(($|0)>0|($|0)==0&x>>>0>0){x=0,$=0;do fe=ot+(x<<3)|0,f[fe>>2]=0,f[fe+4>>2]=0,x=gt(x|0,$|0,1,0)|0,$=q()|0,fe=Xt,me=f[fe+4>>2]|0;while(($|0)<(me|0)|(($|0)==(me|0)?x>>>0<(f[fe>>2]|0)>>>0:0))}if(fe=Xt,f[fe>>2]=I,f[fe+4>>2]=T,(T|0)>0|(T|0)==0&I>>>0>0)re=m,he=pt,ve=Lt,me=Ve,fe=Ut,m=ne,pt=w,Ve=Vt,ne=re,w=he,Lt=ni,ni=ve,Vt=me,Ut=ot,ot=fe;else break t}bt(Vt),bt(ni),bt(Di),w=1;break e}else w=I;while(!1);bt(Di),bt(m),bt(w),w=0}while(!1);return Di=w,L=Gn,Di|0}}return bt(Di),Di=w,L=Gn,Di|0}function Wfe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;if(N=L,L=L+176|0,T=N,(d|0)<1)return C9(m,0,0),k=0,L=N,k|0;for(I=p,I=Re(f[I>>2]|0,f[I+4>>2]|0,52)|0,q()|0,C9(m,(d|0)>6?d:6,I&15),I=0;v=p+(I<<3)|0,v=iy(f[v>>2]|0,f[v+4>>2]|0,T)|0,!(v|0);){if(v=f[T>>2]|0,(v|0)>0){$=0;do x=T+8+($<<4)|0,$=$+1|0,v=T+8+((($|0)%(v|0)|0)<<4)|0,w=_me(m,v,x)|0,w?k9(m,w)|0:wme(m,x,v)|0,v=f[T>>2]|0;while(($|0)<(v|0))}if(I=I+1|0,(I|0)>=(d|0)){v=0,k=13;break}}return(k|0)==13?(L=N,v|0):(T9(m),k=v,L=N,k|0)}function Qfe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0;if(x=L,L=L+32|0,v=x,w=x+16|0,p=Wfe(p,d,w)|0,p|0)return m=p,L=x,m|0;if(f[m>>2]=0,f[m+4>>2]=0,f[m+8>>2]=0,p=M9(w)|0,p|0)do{d=YAe(m)|0;do XAe(d,p)|0,$=p+16|0,f[v>>2]=f[$>>2],f[v+4>>2]=f[$+4>>2],f[v+8>>2]=f[$+8>>2],f[v+12>>2]=f[$+12>>2],k9(w,p)|0,p=Sme(w,v)|0;while((p|0)!=0);p=M9(w)|0}while((p|0)!=0);return T9(w),p=KAe(m)|0,p?(g9(m),$=p,L=x,$|0):($=0,L=x,$|0)}function nr(p){return p=p|0,p>>>0>121?(p=0,p|0):(p=f[7696+(p*28|0)+16>>2]|0,p|0)}function hL(p){return p=p|0,(p|0)==4|(p|0)==117|0}function Jj(p){return p=p|0,f[11120+((f[p>>2]|0)*216|0)+((f[p+4>>2]|0)*72|0)+((f[p+8>>2]|0)*24|0)+(f[p+12>>2]<<3)>>2]|0}function Jfe(p){return p=p|0,f[11120+((f[p>>2]|0)*216|0)+((f[p+4>>2]|0)*72|0)+((f[p+8>>2]|0)*24|0)+(f[p+12>>2]<<3)+4>>2]|0}function Zfe(p,d){p=p|0,d=d|0,p=7696+(p*28|0)|0,f[d>>2]=f[p>>2],f[d+4>>2]=f[p+4>>2],f[d+8>>2]=f[p+8>>2],f[d+12>>2]=f[p+12>>2]}function Yfe(p,d){p=p|0,d=d|0;var m=0,v=0;if(d>>>0>20)return d=-1,d|0;do if((f[11120+(d*216|0)>>2]|0)!=(p|0))if((f[11120+(d*216|0)+8>>2]|0)!=(p|0))if((f[11120+(d*216|0)+16>>2]|0)!=(p|0))if((f[11120+(d*216|0)+24>>2]|0)!=(p|0))if((f[11120+(d*216|0)+32>>2]|0)!=(p|0))if((f[11120+(d*216|0)+40>>2]|0)!=(p|0))if((f[11120+(d*216|0)+48>>2]|0)!=(p|0))if((f[11120+(d*216|0)+56>>2]|0)!=(p|0))if((f[11120+(d*216|0)+64>>2]|0)!=(p|0))if((f[11120+(d*216|0)+72>>2]|0)!=(p|0))if((f[11120+(d*216|0)+80>>2]|0)!=(p|0))if((f[11120+(d*216|0)+88>>2]|0)!=(p|0))if((f[11120+(d*216|0)+96>>2]|0)!=(p|0))if((f[11120+(d*216|0)+104>>2]|0)!=(p|0))if((f[11120+(d*216|0)+112>>2]|0)!=(p|0))if((f[11120+(d*216|0)+120>>2]|0)!=(p|0))if((f[11120+(d*216|0)+128>>2]|0)!=(p|0))if((f[11120+(d*216|0)+136>>2]|0)==(p|0))p=2,m=1,v=2;else{if((f[11120+(d*216|0)+144>>2]|0)==(p|0)){p=0,m=2,v=0;break}if((f[11120+(d*216|0)+152>>2]|0)==(p|0)){p=0,m=2,v=1;break}if((f[11120+(d*216|0)+160>>2]|0)==(p|0)){p=0,m=2,v=2;break}if((f[11120+(d*216|0)+168>>2]|0)==(p|0)){p=1,m=2,v=0;break}if((f[11120+(d*216|0)+176>>2]|0)==(p|0)){p=1,m=2,v=1;break}if((f[11120+(d*216|0)+184>>2]|0)==(p|0)){p=1,m=2,v=2;break}if((f[11120+(d*216|0)+192>>2]|0)==(p|0)){p=2,m=2,v=0;break}if((f[11120+(d*216|0)+200>>2]|0)==(p|0)){p=2,m=2,v=1;break}if((f[11120+(d*216|0)+208>>2]|0)==(p|0)){p=2,m=2,v=2;break}else p=-1;return p|0}else p=2,m=1,v=1;else p=2,m=1,v=0;else p=1,m=1,v=2;else p=1,m=1,v=1;else p=1,m=1,v=0;else p=0,m=1,v=2;else p=0,m=1,v=1;else p=0,m=1,v=0;else p=2,m=0,v=2;else p=2,m=0,v=1;else p=2,m=0,v=0;else p=1,m=0,v=2;else p=1,m=0,v=1;else p=1,m=0,v=0;else p=0,m=0,v=2;else p=0,m=0,v=1;else p=0,m=0,v=0;while(!1);return d=f[11120+(d*216|0)+(m*72|0)+(p*24|0)+(v<<3)+4>>2]|0,d|0}function Zj(p,d){return p=p|0,d=d|0,(f[7696+(p*28|0)+20>>2]|0)==(d|0)?(d=1,d|0):(d=(f[7696+(p*28|0)+24>>2]|0)==(d|0),d|0)}function dL(p,d){return p=p|0,d=d|0,f[848+(p*28|0)+(d<<2)>>2]|0}function pL(p,d){return p=p|0,d=d|0,(f[848+(p*28|0)>>2]|0)==(d|0)?(d=0,d|0):(f[848+(p*28|0)+4>>2]|0)==(d|0)?(d=1,d|0):(f[848+(p*28|0)+8>>2]|0)==(d|0)?(d=2,d|0):(f[848+(p*28|0)+12>>2]|0)==(d|0)?(d=3,d|0):(f[848+(p*28|0)+16>>2]|0)==(d|0)?(d=4,d|0):(f[848+(p*28|0)+20>>2]|0)==(d|0)?(d=5,d|0):((f[848+(p*28|0)+24>>2]|0)==(d|0)?6:7)|0}function Xfe(){return 122}function Kfe(p){p=p|0;var d=0,m=0,v=0;d=0;do Be(d|0,0,45)|0,v=q()|0|134225919,m=p+(d<<3)|0,f[m>>2]=-1,f[m+4>>2]=v,d=d+1|0;while((d|0)!=122);return 0}function eAe(p){p=p|0;var d=0,m=0,v=0;return v=+j[p+16>>3],m=+j[p+24>>3],d=v-m,+(v<m?d+6.283185307179586:d)}function Yj(p){return p=p|0,+j[p+16>>3]<+j[p+24>>3]|0}function tAe(p){return p=p|0,+(+j[p>>3]-+j[p+8>>3])}function fL(p,d){p=p|0,d=d|0;var m=0,v=0,w=0;return m=+j[d>>3],!(m>=+j[p+8>>3])||!(m<=+j[p>>3])?(d=0,d|0):(v=+j[p+16>>3],m=+j[p+24>>3],w=+j[d+8>>3],d=w>=m,p=w<=v&1,v<m?d&&(p=1):d||(p=0),d=(p|0)!=0,d|0)}function AL(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;return+j[p>>3]<+j[d+8>>3]||+j[p+8>>3]>+j[d>>3]?(v=0,v|0):(x=+j[p+16>>3],m=p+24|0,N=+j[m>>3],$=x<N,v=d+16|0,k=+j[v>>3],w=d+24|0,T=+j[w>>3],I=k<T,d=N-k<T-x,p=$?I|d?1:2:0,d=I?$?1:d?2:1:0,x=+qo(x,p),x<+qo(+j[w>>3],d)||(N=+qo(+j[m>>3],p),N>+qo(+j[v>>3],d))?(I=0,I|0):(I=1,I|0))}function iAe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0;x=+j[p+16>>3],T=+j[p+24>>3],p=x<T,I=+j[d+16>>3],$=+j[d+24>>3],w=I<$,d=T-I<$-x,f[m>>2]=p?w|d?1:2:0,f[v>>2]=w?p?1:d?2:1:0}function Xj(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;return+j[p>>3]<+j[d>>3]||+j[p+8>>3]>+j[d+8>>3]?(v=0,v|0):(v=p+16|0,T=+j[v>>3],x=+j[p+24>>3],$=T<x,m=d+16|0,N=+j[m>>3],w=d+24|0,k=+j[w>>3],I=N<k,d=x-N<k-T,p=$?I|d?1:2:0,d=I?$?1:d?2:1:0,x=+qo(x,p),x<=+qo(+j[w>>3],d)?(N=+qo(+j[v>>3],p),I=N>=+qo(+j[m>>3],d),I|0):(I=0,I|0))}function Kj(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0;w=L,L=L+176|0,v=w,f[v>>2]=4,I=+j[d>>3],j[v+8>>3]=I,x=+j[d+16>>3],j[v+16>>3]=x,j[v+24>>3]=I,I=+j[d+24>>3],j[v+32>>3]=I,$=+j[d+8>>3],j[v+40>>3]=$,j[v+48>>3]=I,j[v+56>>3]=$,j[v+64>>3]=x,d=v+72|0,m=d+96|0;do f[d>>2]=0,d=d+4|0;while((d|0)<(m|0));oy(p|0,v|0,168)|0,L=w}function e9(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0;Y=L,L=L+288|0,N=Y+264|0,H=Y+96|0,k=Y,I=k,T=I+96|0;do f[I>>2]=0,I=I+4|0;while((I|0)<(T|0));return d=IL(d,k)|0,d|0?(Z=d,L=Y,Z|0):(T=k,k=f[T>>2]|0,T=f[T+4>>2]|0,nA(k,T,N)|0,iy(k,T,H)|0,$=+X1(N,H+8|0),j[N>>3]=+j[p>>3],T=N+8|0,j[T>>3]=+j[p+16>>3],j[H>>3]=+j[p+8>>3],k=H+8|0,j[k>>3]=+j[p+24>>3],w=+X1(N,H),he=+j[T>>3]-+j[k>>3],x=+qt(+he),re=+j[N>>3]-+j[H>>3],v=+qt(+re),!(he==0|re==0)&&(he=+R9(+x,+v),he=+sr(+(w*w/+w$(+(he/+w$(+x,+v)),3)/($*($*2.59807621135)*.8))),j[si>>3]=he,J=~~he>>>0,Z=+qt(he)>=1?he>0?~~+K0(+qi(he/4294967296),4294967295)>>>0:~~+sr((he-+(~~he>>>0))/4294967296)>>>0:0,(f[si+4>>2]&2146435072|0)!=2146435072)?(H=(J|0)==0&(Z|0)==0,d=m,f[d>>2]=H?1:J,f[d+4>>2]=H?0:Z,d=0):d=1,Z=d,L=Y,Z|0)}function rAe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0;k=L,L=L+288|0,$=k+264|0,I=k+96|0,T=k,w=T,x=w+96|0;do f[w>>2]=0,w=w+4|0;while((w|0)<(x|0));return m=IL(m,T)|0,m|0?(v=m,L=k,v|0):(m=T,w=f[m>>2]|0,m=f[m+4>>2]|0,nA(w,m,$)|0,iy(w,m,I)|0,N=+X1($,I+8|0),N=+sr(+(+X1(p,d)/(N*2))),j[si>>3]=N,m=~~N>>>0,w=+qt(N)>=1?N>0?~~+K0(+qi(N/4294967296),4294967295)>>>0:~~+sr((N-+(~~N>>>0))/4294967296)>>>0:0,(f[si+4>>2]&2146435072|0)==2146435072?(v=1,L=k,v|0):(T=(m|0)==0&(w|0)==0,f[v>>2]=T?1:m,f[v+4>>2]=T?0:w,v=0,L=k,v|0))}function sAe(p,d){p=p|0,d=+d;var m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;x=p+16|0,$=+j[x>>3],m=p+24|0,w=+j[m>>3],v=$-w,v=$<w?v+6.283185307179586:v,k=+j[p>>3],I=p+8|0,T=+j[I>>3],N=k-T,v=(v*d-v)*.5,d=(N*d-N)*.5,k=k+d,j[p>>3]=k>1.5707963267948966?1.5707963267948966:k,d=T-d,j[I>>3]=d<-1.5707963267948966?-1.5707963267948966:d,d=$+v,d=d>3.141592653589793?d+-6.283185307179586:d,j[x>>3]=d<-3.141592653589793?d+6.283185307179586:d,d=w-v,d=d>3.141592653589793?d+-6.283185307179586:d,j[m>>3]=d<-3.141592653589793?d+6.283185307179586:d}function nAe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0,f[p>>2]=d,f[p+4>>2]=m,f[p+8>>2]=v}function oAe(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0;H=d+8|0,f[H>>2]=0,T=+j[p>>3],$=+qt(+T),k=+j[p+8>>3],I=+qt(+k)*1.1547005383792515,$=$+I*.5,m=~~$,p=~~I,$=$-+(m|0),I=I-+(p|0);do if($<.5)if($<.3333333333333333)if(f[d>>2]=m,I<($+1)*.5){f[d+4>>2]=p;break}else{p=p+1|0,f[d+4>>2]=p;break}else if(J=1-$,p=(!(I<J)&1)+p|0,f[d+4>>2]=p,J<=I&I<$*2){m=m+1|0,f[d>>2]=m;break}else{f[d>>2]=m;break}else{if(!($<.6666666666666666))if(m=m+1|0,f[d>>2]=m,I<$*.5){f[d+4>>2]=p;break}else{p=p+1|0,f[d+4>>2]=p;break}if(I<1-$){if(f[d+4>>2]=p,$*2+-1<I){f[d>>2]=m;break}}else p=p+1|0,f[d+4>>2]=p;m=m+1|0,f[d>>2]=m}while(!1);do if(T<0)if(p&1){N=(p+1|0)/2|0,N=Os(m|0,((m|0)<0)<<31>>31|0,N|0,((N|0)<0)<<31>>31|0)|0,m=~~(+(m|0)-((+(N>>>0)+4294967296*+(q()|0))*2+1)),f[d>>2]=m;break}else{N=(p|0)/2|0,N=Os(m|0,((m|0)<0)<<31>>31|0,N|0,((N|0)<0)<<31>>31|0)|0,m=~~(+(m|0)-(+(N>>>0)+4294967296*+(q()|0))*2),f[d>>2]=m;break}while(!1);N=d+4|0,k<0&&(m=m-((p<<1|1|0)/2|0)|0,f[d>>2]=m,p=0-p|0,f[N>>2]=p),v=p-m|0,(m|0)<0?(w=0-m|0,f[N>>2]=v,f[H>>2]=w,f[d>>2]=0,p=v,m=0):w=0,(p|0)<0&&(m=m-p|0,f[d>>2]=m,w=w-p|0,f[H>>2]=w,f[N>>2]=0,p=0),x=m-w|0,v=p-w|0,(w|0)<0&&(f[d>>2]=x,f[N>>2]=v,f[H>>2]=0,p=v,m=x,w=0),v=(p|0)<(m|0)?p:m,v=(w|0)<(v|0)?w:v,!((v|0)<=0)&&(f[d>>2]=m-v,f[N>>2]=p-v,f[H>>2]=w-v)}function An(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0;d=f[p>>2]|0,$=p+4|0,m=f[$>>2]|0,(d|0)<0&&(m=m-d|0,f[$>>2]=m,x=p+8|0,f[x>>2]=(f[x>>2]|0)-d,f[p>>2]=0,d=0),(m|0)<0?(d=d-m|0,f[p>>2]=d,x=p+8|0,w=(f[x>>2]|0)-m|0,f[x>>2]=w,f[$>>2]=0,m=0):(w=p+8|0,x=w,w=f[w>>2]|0),(w|0)<0&&(d=d-w|0,f[p>>2]=d,m=m-w|0,f[$>>2]=m,f[x>>2]=0,w=0),v=(m|0)<(d|0)?m:d,v=(w|0)<(v|0)?w:v,!((v|0)<=0)&&(f[p>>2]=d-v,f[$>>2]=m-v,f[x>>2]=w-v)}function tA(p,d){p=p|0,d=d|0;var m=0,v=0;v=f[p+8>>2]|0,m=+((f[p+4>>2]|0)-v|0),j[d>>3]=+((f[p>>2]|0)-v|0)-m*.5,j[d+8>>3]=m*.8660254037844386}function Vn(p,d,m){p=p|0,d=d|0,m=m|0,f[m>>2]=(f[d>>2]|0)+(f[p>>2]|0),f[m+4>>2]=(f[d+4>>2]|0)+(f[p+4>>2]|0),f[m+8>>2]=(f[d+8>>2]|0)+(f[p+8>>2]|0)}function mL(p,d,m){p=p|0,d=d|0,m=m|0,f[m>>2]=(f[p>>2]|0)-(f[d>>2]|0),f[m+4>>2]=(f[p+4>>2]|0)-(f[d+4>>2]|0),f[m+8>>2]=(f[p+8>>2]|0)-(f[d+8>>2]|0)}function t9(p,d){p=p|0,d=d|0;var m=0,v=0;m=Ta(f[p>>2]|0,d)|0,f[p>>2]=m,m=p+4|0,v=Ta(f[m>>2]|0,d)|0,f[m>>2]=v,p=p+8|0,d=Ta(f[p>>2]|0,d)|0,f[p>>2]=d}function f$(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;$=f[p>>2]|0,I=($|0)<0,v=(f[p+4>>2]|0)-(I?$:0)|0,x=(v|0)<0,w=(x?0-v|0:0)+((f[p+8>>2]|0)-(I?$:0))|0,m=(w|0)<0,p=m?0:w,d=(x?0:v)-(m?w:0)|0,w=(I?0:$)-(x?v:0)-(m?w:0)|0,m=(d|0)<(w|0)?d:w,m=(p|0)<(m|0)?p:m,v=(m|0)>0,p=p-(v?m:0)|0,d=d-(v?m:0)|0;e:do switch(w-(v?m:0)|0){case 0:switch(d|0){case 0:return I=(p|0)==0?0:(p|0)==1?1:7,I|0;case 1:return I=(p|0)==0?2:(p|0)==1?3:7,I|0;default:break e}case 1:switch(d|0){case 0:return I=(p|0)==0?4:(p|0)==1?5:7,I|0;case 1:{if(!p)p=6;else break e;return p|0}default:break e}}while(!1);return I=7,I|0}function aAe(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0;if(T=p+8|0,$=f[T>>2]|0,I=(f[p>>2]|0)-$|0,k=p+4|0,$=(f[k>>2]|0)-$|0,I>>>0>715827881|$>>>0>715827881){if(v=(I|0)>0,w=2147483647-I|0,x=-2147483648-I|0,(v?(w|0)<(I|0):(x|0)>(I|0))||(m=I<<1,v?(2147483647-m|0)<(I|0):(-2147483648-m|0)>(I|0))||(($|0)>0?(2147483647-$|0)<($|0):(-2147483648-$|0)>($|0))||(d=I*3|0,m=$<<1,(v?(w|0)<(m|0):(x|0)>(m|0))||((I|0)>-1?(d|-2147483648|0)>=($|0):(d^-2147483648|0)<($|0))))return k=1,k|0}else m=$<<1,d=I*3|0;return v=Wd(+(d-$|0)*.14285714285714285)|0,f[p>>2]=v,w=Wd(+(m+I|0)*.14285714285714285)|0,f[k>>2]=w,f[T>>2]=0,m=(w|0)<(v|0),d=m?v:w,m=m?w:v,(m|0)<0&&(((m|0)==-2147483648||((d|0)>0?(2147483647-d|0)<(m|0):(-2147483648-d|0)>(m|0)))&&Mt(27795,26892,354,26903),((d|0)>-1?(d|-2147483648|0)>=(m|0):(d^-2147483648|0)<(m|0))&&Mt(27795,26892,354,26903)),d=w-v|0,(v|0)<0?(m=0-v|0,f[k>>2]=d,f[T>>2]=m,f[p>>2]=0,v=0):(d=w,m=0),(d|0)<0&&(v=v-d|0,f[p>>2]=v,m=m-d|0,f[T>>2]=m,f[k>>2]=0,d=0),x=v-m|0,w=d-m|0,(m|0)<0?(f[p>>2]=x,f[k>>2]=w,f[T>>2]=0,d=w,w=x,m=0):w=v,v=(d|0)<(w|0)?d:w,v=(m|0)<(v|0)?m:v,(v|0)<=0?(k=0,k|0):(f[p>>2]=w-v,f[k>>2]=d-v,f[T>>2]=m-v,k=0,k|0)}function lAe(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0,T=0;if($=p+8|0,w=f[$>>2]|0,x=(f[p>>2]|0)-w|0,I=p+4|0,w=(f[I>>2]|0)-w|0,x>>>0>715827881|w>>>0>715827881){if(m=(x|0)>0,(m?(2147483647-x|0)<(x|0):(-2147483648-x|0)>(x|0))||(d=x<<1,v=(w|0)>0,v?(2147483647-w|0)<(w|0):(-2147483648-w|0)>(w|0)))return I=1,I|0;if(T=w<<1,(v?(2147483647-T|0)<(w|0):(-2147483648-T|0)>(w|0))||(m?(2147483647-d|0)<(w|0):(-2147483648-d|0)>(w|0))||(m=w*3|0,(w|0)>-1?(m|-2147483648|0)>=(x|0):(m^-2147483648|0)<(x|0)))return T=1,T|0}else m=w*3|0,d=x<<1;return v=Wd(+(d+w|0)*.14285714285714285)|0,f[p>>2]=v,w=Wd(+(m-x|0)*.14285714285714285)|0,f[I>>2]=w,f[$>>2]=0,m=(w|0)<(v|0),d=m?v:w,m=m?w:v,(m|0)<0&&(((m|0)==-2147483648||((d|0)>0?(2147483647-d|0)<(m|0):(-2147483648-d|0)>(m|0)))&&Mt(27795,26892,402,26917),((d|0)>-1?(d|-2147483648|0)>=(m|0):(d^-2147483648|0)<(m|0))&&Mt(27795,26892,402,26917)),d=w-v|0,(v|0)<0?(m=0-v|0,f[I>>2]=d,f[$>>2]=m,f[p>>2]=0,v=0):(d=w,m=0),(d|0)<0&&(v=v-d|0,f[p>>2]=v,m=m-d|0,f[$>>2]=m,f[I>>2]=0,d=0),x=v-m|0,w=d-m|0,(m|0)<0?(f[p>>2]=x,f[I>>2]=w,f[$>>2]=0,d=w,w=x,m=0):w=v,v=(d|0)<(w|0)?d:w,v=(m|0)<(v|0)?m:v,(v|0)<=0?(T=0,T|0):(f[p>>2]=w-v,f[I>>2]=d-v,f[$>>2]=m-v,T=0,T|0)}function cAe(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;$=p+8|0,m=f[$>>2]|0,d=(f[p>>2]|0)-m|0,I=p+4|0,m=(f[I>>2]|0)-m|0,v=Wd(+((d*3|0)-m|0)*.14285714285714285)|0,f[p>>2]=v,d=Wd(+((m<<1)+d|0)*.14285714285714285)|0,f[I>>2]=d,f[$>>2]=0,m=d-v|0,(v|0)<0?(x=0-v|0,f[I>>2]=m,f[$>>2]=x,f[p>>2]=0,d=m,v=0,m=x):m=0,(d|0)<0&&(v=v-d|0,f[p>>2]=v,m=m-d|0,f[$>>2]=m,f[I>>2]=0,d=0),x=v-m|0,w=d-m|0,(m|0)<0?(f[p>>2]=x,f[I>>2]=w,f[$>>2]=0,d=w,w=x,m=0):w=v,v=(d|0)<(w|0)?d:w,v=(m|0)<(v|0)?m:v,!((v|0)<=0)&&(f[p>>2]=w-v,f[I>>2]=d-v,f[$>>2]=m-v)}function i9(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;$=p+8|0,m=f[$>>2]|0,d=(f[p>>2]|0)-m|0,I=p+4|0,m=(f[I>>2]|0)-m|0,v=Wd(+((d<<1)+m|0)*.14285714285714285)|0,f[p>>2]=v,d=Wd(+((m*3|0)-d|0)*.14285714285714285)|0,f[I>>2]=d,f[$>>2]=0,m=d-v|0,(v|0)<0?(x=0-v|0,f[I>>2]=m,f[$>>2]=x,f[p>>2]=0,d=m,v=0,m=x):m=0,(d|0)<0&&(v=v-d|0,f[p>>2]=v,m=m-d|0,f[$>>2]=m,f[I>>2]=0,d=0),x=v-m|0,w=d-m|0,(m|0)<0?(f[p>>2]=x,f[I>>2]=w,f[$>>2]=0,d=w,w=x,m=0):w=v,v=(d|0)<(w|0)?d:w,v=(m|0)<(v|0)?m:v,!((v|0)<=0)&&(f[p>>2]=w-v,f[I>>2]=d-v,f[$>>2]=m-v)}function A$(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;d=f[p>>2]|0,$=p+4|0,m=f[$>>2]|0,I=p+8|0,v=f[I>>2]|0,w=m+(d*3|0)|0,f[p>>2]=w,m=v+(m*3|0)|0,f[$>>2]=m,d=(v*3|0)+d|0,f[I>>2]=d,v=m-w|0,(w|0)<0?(d=d-w|0,f[$>>2]=v,f[I>>2]=d,f[p>>2]=0,m=v,v=0):v=w,(m|0)<0&&(v=v-m|0,f[p>>2]=v,d=d-m|0,f[I>>2]=d,f[$>>2]=0,m=0),x=v-d|0,w=m-d|0,(d|0)<0?(f[p>>2]=x,f[$>>2]=w,f[I>>2]=0,v=x,d=0):w=m,m=(w|0)<(v|0)?w:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[p>>2]=v-m,f[$>>2]=w-m,f[I>>2]=d-m)}function iA(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;w=f[p>>2]|0,$=p+4|0,d=f[$>>2]|0,I=p+8|0,m=f[I>>2]|0,v=(d*3|0)+w|0,w=m+(w*3|0)|0,f[p>>2]=w,f[$>>2]=v,d=(m*3|0)+d|0,f[I>>2]=d,m=v-w|0,(w|0)<0?(d=d-w|0,f[$>>2]=m,f[I>>2]=d,f[p>>2]=0,w=0):m=v,(m|0)<0&&(w=w-m|0,f[p>>2]=w,d=d-m|0,f[I>>2]=d,f[$>>2]=0,m=0),x=w-d|0,v=m-d|0,(d|0)<0?(f[p>>2]=x,f[$>>2]=v,f[I>>2]=0,w=x,d=0):v=m,m=(v|0)<(w|0)?v:w,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[p>>2]=w-m,f[$>>2]=v-m,f[I>>2]=d-m)}function r9(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0;(d+-1|0)>>>0>=6||(w=(f[15440+(d*12|0)>>2]|0)+(f[p>>2]|0)|0,f[p>>2]=w,I=p+4|0,v=(f[15440+(d*12|0)+4>>2]|0)+(f[I>>2]|0)|0,f[I>>2]=v,$=p+8|0,d=(f[15440+(d*12|0)+8>>2]|0)+(f[$>>2]|0)|0,f[$>>2]=d,m=v-w|0,(w|0)<0?(d=d-w|0,f[I>>2]=m,f[$>>2]=d,f[p>>2]=0,v=0):(m=v,v=w),(m|0)<0&&(v=v-m|0,f[p>>2]=v,d=d-m|0,f[$>>2]=d,f[I>>2]=0,m=0),x=v-d|0,w=m-d|0,(d|0)<0?(f[p>>2]=x,f[I>>2]=w,f[$>>2]=0,v=x,d=0):w=m,m=(w|0)<(v|0)?w:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[p>>2]=v-m,f[I>>2]=w-m,f[$>>2]=d-m))}function s9(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;w=f[p>>2]|0,$=p+4|0,d=f[$>>2]|0,I=p+8|0,m=f[I>>2]|0,v=d+w|0,w=m+w|0,f[p>>2]=w,f[$>>2]=v,d=m+d|0,f[I>>2]=d,m=v-w|0,(w|0)<0?(d=d-w|0,f[$>>2]=m,f[I>>2]=d,f[p>>2]=0,v=0):(m=v,v=w),(m|0)<0&&(v=v-m|0,f[p>>2]=v,d=d-m|0,f[I>>2]=d,f[$>>2]=0,m=0),x=v-d|0,w=m-d|0,(d|0)<0?(f[p>>2]=x,f[$>>2]=w,f[I>>2]=0,v=x,d=0):w=m,m=(w|0)<(v|0)?w:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[p>>2]=v-m,f[$>>2]=w-m,f[I>>2]=d-m)}function m$(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;d=f[p>>2]|0,$=p+4|0,v=f[$>>2]|0,I=p+8|0,m=f[I>>2]|0,w=v+d|0,f[p>>2]=w,v=m+v|0,f[$>>2]=v,d=m+d|0,f[I>>2]=d,m=v-w|0,(w|0)<0?(d=d-w|0,f[$>>2]=m,f[I>>2]=d,f[p>>2]=0,v=0):(m=v,v=w),(m|0)<0&&(v=v-m|0,f[p>>2]=v,d=d-m|0,f[I>>2]=d,f[$>>2]=0,m=0),x=v-d|0,w=m-d|0,(d|0)<0?(f[p>>2]=x,f[$>>2]=w,f[I>>2]=0,v=x,d=0):w=m,m=(w|0)<(v|0)?w:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[p>>2]=v-m,f[$>>2]=w-m,f[I>>2]=d-m)}function rA(p){switch(p=p|0,p|0){case 1:{p=5;break}case 5:{p=4;break}case 4:{p=6;break}case 6:{p=2;break}case 2:{p=3;break}case 3:{p=1;break}}return p|0}function Hd(p){switch(p=p|0,p|0){case 1:{p=3;break}case 3:{p=2;break}case 2:{p=6;break}case 6:{p=4;break}case 4:{p=5;break}case 5:{p=1;break}}return p|0}function n9(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;d=f[p>>2]|0,$=p+4|0,m=f[$>>2]|0,I=p+8|0,v=f[I>>2]|0,w=m+(d<<1)|0,f[p>>2]=w,m=v+(m<<1)|0,f[$>>2]=m,d=(v<<1)+d|0,f[I>>2]=d,v=m-w|0,(w|0)<0?(d=d-w|0,f[$>>2]=v,f[I>>2]=d,f[p>>2]=0,m=v,v=0):v=w,(m|0)<0&&(v=v-m|0,f[p>>2]=v,d=d-m|0,f[I>>2]=d,f[$>>2]=0,m=0),x=v-d|0,w=m-d|0,(d|0)<0?(f[p>>2]=x,f[$>>2]=w,f[I>>2]=0,v=x,d=0):w=m,m=(w|0)<(v|0)?w:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[p>>2]=v-m,f[$>>2]=w-m,f[I>>2]=d-m)}function o9(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;w=f[p>>2]|0,$=p+4|0,d=f[$>>2]|0,I=p+8|0,m=f[I>>2]|0,v=(d<<1)+w|0,w=m+(w<<1)|0,f[p>>2]=w,f[$>>2]=v,d=(m<<1)+d|0,f[I>>2]=d,m=v-w|0,(w|0)<0?(d=d-w|0,f[$>>2]=m,f[I>>2]=d,f[p>>2]=0,w=0):m=v,(m|0)<0&&(w=w-m|0,f[p>>2]=w,d=d-m|0,f[I>>2]=d,f[$>>2]=0,m=0),x=w-d|0,v=m-d|0,(d|0)<0?(f[p>>2]=x,f[$>>2]=v,f[I>>2]=0,w=x,d=0):v=m,m=(v|0)<(w|0)?v:w,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[p>>2]=w-m,f[$>>2]=v-m,f[I>>2]=d-m)}function yL(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0;return $=(f[p>>2]|0)-(f[d>>2]|0)|0,I=($|0)<0,v=(f[p+4>>2]|0)-(f[d+4>>2]|0)-(I?$:0)|0,x=(v|0)<0,w=(I?0-$|0:0)+(f[p+8>>2]|0)-(f[d+8>>2]|0)+(x?0-v|0:0)|0,p=(w|0)<0,d=p?0:w,m=(x?0:v)-(p?w:0)|0,w=(I?0:$)-(x?v:0)-(p?w:0)|0,p=(m|0)<(w|0)?m:w,p=(d|0)<(p|0)?d:p,v=(p|0)>0,d=d-(v?p:0)|0,m=m-(v?p:0)|0,p=w-(v?p:0)|0,p=(p|0)>-1?p:0-p|0,m=(m|0)>-1?m:0-m|0,d=(d|0)>-1?d:0-d|0,d=(m|0)>(d|0)?m:d,((p|0)>(d|0)?p:d)|0}function uAe(p,d){p=p|0,d=d|0;var m=0;m=f[p+8>>2]|0,f[d>>2]=(f[p>>2]|0)-m,f[d+4>>2]=(f[p+4>>2]|0)-m}function hAe(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0;return v=f[p>>2]|0,f[d>>2]=v,w=f[p+4>>2]|0,$=d+4|0,f[$>>2]=w,I=d+8|0,f[I>>2]=0,m=(w|0)<(v|0),p=m?v:w,m=m?w:v,(m|0)<0&&((m|0)==-2147483648||((p|0)>0?(2147483647-p|0)<(m|0):(-2147483648-p|0)>(m|0))||((p|0)>-1?(p|-2147483648|0)>=(m|0):(p^-2147483648|0)<(m|0)))?(d=1,d|0):(p=w-v|0,(v|0)<0?(m=0-v|0,f[$>>2]=p,f[I>>2]=m,f[d>>2]=0,v=0):(p=w,m=0),(p|0)<0&&(v=v-p|0,f[d>>2]=v,m=m-p|0,f[I>>2]=m,f[$>>2]=0,p=0),x=v-m|0,w=p-m|0,(m|0)<0?(f[d>>2]=x,f[$>>2]=w,f[I>>2]=0,p=w,w=x,m=0):w=v,v=(p|0)<(w|0)?p:w,v=(m|0)<(v|0)?m:v,(v|0)<=0?(d=0,d|0):(f[d>>2]=w-v,f[$>>2]=p-v,f[I>>2]=m-v,d=0,d|0))}function a9(p){p=p|0;var d=0,m=0,v=0,w=0;d=p+8|0,w=f[d>>2]|0,m=w-(f[p>>2]|0)|0,f[p>>2]=m,v=p+4|0,p=(f[v>>2]|0)-w|0,f[v>>2]=p,f[d>>2]=0-(p+m)}function dAe(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;m=f[p>>2]|0,d=0-m|0,f[p>>2]=d,$=p+8|0,f[$>>2]=0,I=p+4|0,v=f[I>>2]|0,w=v+m|0,(m|0)>0?(f[I>>2]=w,f[$>>2]=m,f[p>>2]=0,d=0,v=w):m=0,(v|0)<0?(x=d-v|0,f[p>>2]=x,m=m-v|0,f[$>>2]=m,f[I>>2]=0,w=x-m|0,d=0-m|0,(m|0)<0?(f[p>>2]=w,f[I>>2]=d,f[$>>2]=0,v=d,m=0):(v=0,w=x)):w=d,d=(v|0)<(w|0)?v:w,d=(m|0)<(d|0)?m:d,!((d|0)<=0)&&(f[p>>2]=w-d,f[I>>2]=v-d,f[$>>2]=m-d)}function pAe(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0;if(H=L,L=L+64|0,N=H,I=H+56|0,!(!0&(d&2013265920|0)==134217728&(!0&(v&2013265920|0)==134217728)))return w=5,L=H,w|0;if((p|0)==(m|0)&(d|0)==(v|0))return f[w>>2]=0,w=0,L=H,w|0;if($=Re(p|0,d|0,52)|0,q()|0,$=$&15,k=Re(m|0,v|0,52)|0,q()|0,($|0)!=(k&15|0))return w=12,L=H,w|0;if(x=$+-1|0,$>>>0>1){_L(p,d,x,N)|0,_L(m,v,x,I)|0,k=N,T=f[k>>2]|0,k=f[k+4>>2]|0;e:do if((T|0)==(f[I>>2]|0)&&(k|0)==(f[I+4>>2]|0)){$=($^15)*3|0,x=Re(p|0,d|0,$|0)|0,q()|0,x=x&7,$=Re(m|0,v|0,$|0)|0,q()|0,$=$&7;do if((x|0)==0|($|0)==0)f[w>>2]=1,x=0;else if((x|0)==7)x=5;else{if((x|0)==1|($|0)==1&&Bi(T,k)|0){x=5;break}if((f[15536+(x<<2)>>2]|0)!=($|0)&&(f[15568+(x<<2)>>2]|0)!=($|0))break e;f[w>>2]=1,x=0}while(!1);return w=x,L=H,w|0}while(!1)}x=N,$=x+56|0;do f[x>>2]=0,x=x+4|0;while((x|0)<($|0));return gs(p,d,1,N)|0,d=N,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0))&&(d=N+8|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))&&(d=N+16|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))&&(d=N+24|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))&&(d=N+32|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))&&(d=N+40|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))?(x=N+48|0,x=((f[x>>2]|0)==(m|0)?(f[x+4>>2]|0)==(v|0):0)&1):x=1,f[w>>2]=x,w=0,L=H,w|0}function fAe(p,d,m,v,w){return p=p|0,d=d|0,m=m|0,v=v|0,w=w|0,m=uL(p,d,m,v)|0,(m|0)==7?(w=11,w|0):(v=Be(m|0,0,56)|0,d=d&-2130706433|(q()|0)|268435456,f[w>>2]=p|v,f[w+4>>2]=d,w=0,w|0)}function AAe(p,d,m){return p=p|0,d=d|0,m=m|0,!0&(d&2013265920|0)==268435456?(f[m>>2]=p,f[m+4>>2]=d&-2130706433|134217728,m=0,m|0):(m=6,m|0)}function mAe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0;return w=L,L=L+16|0,v=w,f[v>>2]=0,!0&(d&2013265920|0)==268435456?(x=Re(p|0,d|0,56)|0,q()|0,v=Rs(p,d&-2130706433|134217728,x&7,v,m)|0,L=w,v|0):(v=6,L=w,v|0)}function l9(p,d){p=p|0,d=d|0;var m=0;switch(m=Re(p|0,d|0,56)|0,q()|0,m&7){case 0:case 7:return m=0,m|0}return m=d&-2130706433|134217728,!(!0&(d&2013265920|0)==268435456)||!0&(d&117440512|0)==16777216&(Bi(p,m)|0)!=0?(m=0,m|0):(m=bL(p,m)|0,m|0)}function yAe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0;return w=L,L=L+16|0,v=w,!0&(d&2013265920|0)==268435456?(x=d&-2130706433|134217728,$=m,f[$>>2]=p,f[$+4>>2]=x,f[v>>2]=0,d=Re(p|0,d|0,56)|0,q()|0,v=Rs(p,x,d&7,v,m+8|0)|0,L=w,v|0):(v=6,L=w,v|0)}function gAe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0;return w=(Bi(p,d)|0)==0,d=d&-2130706433,v=m,f[v>>2]=w?p:0,f[v+4>>2]=w?d|285212672:0,v=m+8|0,f[v>>2]=p,f[v+4>>2]=d|301989888,v=m+16|0,f[v>>2]=p,f[v+4>>2]=d|318767104,v=m+24|0,f[v>>2]=p,f[v+4>>2]=d|335544320,v=m+32|0,f[v>>2]=p,f[v+4>>2]=d|352321536,m=m+40|0,f[m>>2]=p,f[m+4>>2]=d|369098752,0}function y$(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0;return $=L,L=L+16|0,w=$,x=d&-2130706433|134217728,!0&(d&2013265920|0)==268435456?(v=Re(p|0,d|0,56)|0,q()|0,v=gme(p,x,v&7)|0,(v|0)==-1?(f[m>>2]=0,x=6,L=$,x|0):(ty(p,x,w)|0&&Mt(27795,26932,282,26947),d=Re(p|0,d|0,52)|0,q()|0,d=d&15,Bi(p,x)|0?gL(w,d,v,2,m):vL(w,d,v,2,m),x=0,L=$,x|0)):(x=6,L=$,x|0)}function vAe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0;v=L,L=L+16|0,w=v,bAe(p,d,m,w),oAe(w,m+4|0),L=v}function bAe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0;if(I=L,L=L+16|0,T=I,wAe(p,m,T),x=+X0(+(1-+j[T>>3]*.5)),x<1e-16){f[v>>2]=0,f[v+4>>2]=0,f[v+8>>2]=0,f[v+12>>2]=0,L=I;return}if(T=f[m>>2]|0,w=+j[15920+(T*24|0)>>3],w=+Y1(w-+Y1(+jAe(15600+(T<<4)|0,p))),Ma(d)|0?$=+Y1(w+-.3334731722518321):$=w,w=+fo(+x)*2.618033988749896,(d|0)>0){p=0;do w=w*2.6457513110645907,p=p+1|0;while((p|0)!=(d|0))}x=+gi(+$)*w,j[v>>3]=x,$=+Wt(+$)*w,j[v+8>>3]=$,L=I}function wAe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0;if(x=L,L=L+32|0,w=x,yme(p,w),f[d>>2]=0,j[m>>3]=5,v=+cs(16400,w),v<+j[m>>3]&&(f[d>>2]=0,j[m>>3]=v),v=+cs(16424,w),v<+j[m>>3]&&(f[d>>2]=1,j[m>>3]=v),v=+cs(16448,w),v<+j[m>>3]&&(f[d>>2]=2,j[m>>3]=v),v=+cs(16472,w),v<+j[m>>3]&&(f[d>>2]=3,j[m>>3]=v),v=+cs(16496,w),v<+j[m>>3]&&(f[d>>2]=4,j[m>>3]=v),v=+cs(16520,w),v<+j[m>>3]&&(f[d>>2]=5,j[m>>3]=v),v=+cs(16544,w),v<+j[m>>3]&&(f[d>>2]=6,j[m>>3]=v),v=+cs(16568,w),v<+j[m>>3]&&(f[d>>2]=7,j[m>>3]=v),v=+cs(16592,w),v<+j[m>>3]&&(f[d>>2]=8,j[m>>3]=v),v=+cs(16616,w),v<+j[m>>3]&&(f[d>>2]=9,j[m>>3]=v),v=+cs(16640,w),v<+j[m>>3]&&(f[d>>2]=10,j[m>>3]=v),v=+cs(16664,w),v<+j[m>>3]&&(f[d>>2]=11,j[m>>3]=v),v=+cs(16688,w),v<+j[m>>3]&&(f[d>>2]=12,j[m>>3]=v),v=+cs(16712,w),v<+j[m>>3]&&(f[d>>2]=13,j[m>>3]=v),v=+cs(16736,w),v<+j[m>>3]&&(f[d>>2]=14,j[m>>3]=v),v=+cs(16760,w),v<+j[m>>3]&&(f[d>>2]=15,j[m>>3]=v),v=+cs(16784,w),v<+j[m>>3]&&(f[d>>2]=16,j[m>>3]=v),v=+cs(16808,w),v<+j[m>>3]&&(f[d>>2]=17,j[m>>3]=v),v=+cs(16832,w),v<+j[m>>3]&&(f[d>>2]=18,j[m>>3]=v),v=+cs(16856,w),!(v<+j[m>>3])){L=x;return}f[d>>2]=19,j[m>>3]=v,L=x}function J1(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0;if(x=+mme(p),x<1e-16){d=15600+(d<<4)|0,f[w>>2]=f[d>>2],f[w+4>>2]=f[d+4>>2],f[w+8>>2]=f[d+8>>2],f[w+12>>2]=f[d+12>>2];return}if($=+fn(+ +j[p+8>>3],+ +j[p>>3]),(m|0)>0){p=0;do x=x*.37796447300922725,p=p+1|0;while((p|0)!=(m|0))}I=x*.3333333333333333,v?(m=(Ma(m)|0)==0,x=+W1(+((m?I:I*.37796447300922725)*.381966011250105))):(x=+W1(+(x*.381966011250105)),Ma(m)|0&&($=+Y1($+.3334731722518321))),UAe(15600+(d<<4)|0,+Y1(+j[15920+(d*24|0)>>3]-$),x,w)}function _Ae(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0;v=L,L=L+16|0,w=v,tA(p+4|0,w),J1(w,f[p>>2]|0,d,0,m),L=v}function gL(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0,pt=0,ot=0,Ut=0,Vt=0,ni=0,Lt=0,ft=0,je=0,Xt=0,Oi=0,Qt=0;if(Xt=L,L=L+272|0,x=Xt+256|0,me=Xt+240|0,Lt=Xt,ft=Xt+224|0,je=Xt+208|0,fe=Xt+176|0,ne=Xt+160|0,Ve=Xt+192|0,pt=Xt+144|0,ot=Xt+128|0,Ut=Xt+112|0,Vt=Xt+96|0,ni=Xt+80|0,f[x>>2]=d,f[me>>2]=f[p>>2],f[me+4>>2]=f[p+4>>2],f[me+8>>2]=f[p+8>>2],f[me+12>>2]=f[p+12>>2],c9(me,x,Lt),f[w>>2]=0,me=v+m+((v|0)==5&1)|0,(me|0)<=(m|0)){L=Xt;return}T=f[x>>2]|0,k=ft+4|0,N=fe+4|0,H=m+5|0,J=16880+(T<<2)|0,Z=16960+(T<<2)|0,Y=ot+8|0,re=Ut+8|0,he=Vt+8|0,ve=je+4|0,I=m;e:for(;;){$=Lt+(((I|0)%5|0)<<4)|0,f[je>>2]=f[$>>2],f[je+4>>2]=f[$+4>>2],f[je+8>>2]=f[$+8>>2],f[je+12>>2]=f[$+12>>2];do;while((ey(je,T,0,1)|0)==2);if((I|0)>(m|0)&(Ma(d)|0)!=0){if(f[fe>>2]=f[je>>2],f[fe+4>>2]=f[je+4>>2],f[fe+8>>2]=f[je+8>>2],f[fe+12>>2]=f[je+12>>2],tA(k,ne),v=f[fe>>2]|0,x=f[17040+(v*80|0)+(f[ft>>2]<<2)>>2]|0,f[fe>>2]=f[18640+(v*80|0)+(x*20|0)>>2],$=f[18640+(v*80|0)+(x*20|0)+16>>2]|0,($|0)>0){p=0;do s9(N),p=p+1|0;while((p|0)<($|0))}switch($=18640+(v*80|0)+(x*20|0)+4|0,f[Ve>>2]=f[$>>2],f[Ve+4>>2]=f[$+4>>2],f[Ve+8>>2]=f[$+8>>2],t9(Ve,(f[J>>2]|0)*3|0),Vn(N,Ve,N),An(N),tA(N,pt),Oi=+(f[Z>>2]|0),j[ot>>3]=Oi*3,j[Y>>3]=0,Qt=Oi*-1.5,j[Ut>>3]=Qt,j[re>>3]=Oi*2.598076211353316,j[Vt>>3]=Qt,j[he>>3]=Oi*-2.598076211353316,f[17040+((f[fe>>2]|0)*80|0)+(f[je>>2]<<2)>>2]|0){case 1:{p=Ut,v=ot;break}case 3:{p=Vt,v=Ut;break}case 2:{p=ot,v=Vt;break}default:{p=12;break e}}$9(ne,pt,v,p,ni),J1(ni,f[fe>>2]|0,T,1,w+8+(f[w>>2]<<4)|0),f[w>>2]=(f[w>>2]|0)+1}if((I|0)<(H|0)&&(tA(ve,fe),J1(fe,f[je>>2]|0,T,1,w+8+(f[w>>2]<<4)|0),f[w>>2]=(f[w>>2]|0)+1),f[ft>>2]=f[je>>2],f[ft+4>>2]=f[je+4>>2],f[ft+8>>2]=f[je+8>>2],f[ft+12>>2]=f[je+12>>2],I=I+1|0,(I|0)>=(me|0)){p=3;break}}if((p|0)==3){L=Xt;return}else(p|0)==12&&Mt(26970,27017,572,27027)}function c9(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0;T=L,L=L+128|0,v=T+64|0,w=T,x=v,$=20240,I=x+60|0;do f[x>>2]=f[$>>2],x=x+4|0,$=$+4|0;while((x|0)<(I|0));x=w,$=20304,I=x+60|0;do f[x>>2]=f[$>>2],x=x+4|0,$=$+4|0;while((x|0)<(I|0));I=(Ma(f[d>>2]|0)|0)==0,v=I?v:w,w=p+4|0,n9(w),o9(w),Ma(f[d>>2]|0)|0&&(iA(w),f[d>>2]=(f[d>>2]|0)+1),f[m>>2]=f[p>>2],d=m+4|0,Vn(w,v,d),An(d),f[m+16>>2]=f[p>>2],d=m+20|0,Vn(w,v+12|0,d),An(d),f[m+32>>2]=f[p>>2],d=m+36|0,Vn(w,v+24|0,d),An(d),f[m+48>>2]=f[p>>2],d=m+52|0,Vn(w,v+36|0,d),An(d),f[m+64>>2]=f[p>>2],m=m+68|0,Vn(w,v+48|0,m),An(m),L=T}function ey(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0;if(Y=L,L=L+32|0,J=Y+12|0,I=Y,Z=p+4|0,H=f[16960+(d<<2)>>2]|0,N=(v|0)!=0,H=N?H*3|0:H,w=f[Z>>2]|0,k=p+8|0,$=f[k>>2]|0,N){if(x=p+12|0,v=f[x>>2]|0,w=$+w+v|0,(w|0)==(H|0))return Z=1,L=Y,Z|0;T=x}else T=p+12|0,v=f[T>>2]|0,w=$+w+v|0;if((w|0)<=(H|0))return Z=0,L=Y,Z|0;do if((v|0)>0){if(v=f[p>>2]|0,($|0)>0){x=18640+(v*80|0)+60|0,v=p;break}v=18640+(v*80|0)+40|0,m?(nAe(J,H,0,0),mL(Z,J,I),m$(I),Vn(I,J,Z),x=v,v=p):(x=v,v=p)}else x=18640+((f[p>>2]|0)*80|0)+20|0,v=p;while(!1);if(f[v>>2]=f[x>>2],w=x+16|0,(f[w>>2]|0)>0){v=0;do s9(Z),v=v+1|0;while((v|0)<(f[w>>2]|0))}return p=x+4|0,f[J>>2]=f[p>>2],f[J+4>>2]=f[p+4>>2],f[J+8>>2]=f[p+8>>2],d=f[16880+(d<<2)>>2]|0,t9(J,N?d*3|0:d),Vn(Z,J,Z),An(Z),N?v=((f[k>>2]|0)+(f[Z>>2]|0)+(f[T>>2]|0)|0)==(H|0)?1:2:v=2,Z=v,L=Y,Z|0}function SAe(p,d){p=p|0,d=d|0;var m=0;do m=ey(p,d,0,1)|0;while((m|0)==2);return m|0}function vL(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0,pt=0,ot=0,Ut=0,Vt=0,ni=0,Lt=0;if(Vt=L,L=L+240|0,x=Vt+224|0,Ve=Vt+208|0,pt=Vt,ot=Vt+192|0,Ut=Vt+176|0,he=Vt+160|0,ve=Vt+144|0,me=Vt+128|0,fe=Vt+112|0,ne=Vt+96|0,f[x>>2]=d,f[Ve>>2]=f[p>>2],f[Ve+4>>2]=f[p+4>>2],f[Ve+8>>2]=f[p+8>>2],f[Ve+12>>2]=f[p+12>>2],u9(Ve,x,pt),f[w>>2]=0,re=v+m+((v|0)==6&1)|0,(re|0)<=(m|0)){L=Vt;return}T=f[x>>2]|0,k=m+6|0,N=16960+(T<<2)|0,H=ve+8|0,J=me+8|0,Z=fe+8|0,Y=ot+4|0,$=0,I=m,v=-1;e:for(;;){if(x=(I|0)%6|0,p=pt+(x<<4)|0,f[ot>>2]=f[p>>2],f[ot+4>>2]=f[p+4>>2],f[ot+8>>2]=f[p+8>>2],f[ot+12>>2]=f[p+12>>2],p=$,$=ey(ot,T,0,1)|0,(I|0)>(m|0)&(Ma(d)|0)!=0&&(p|0)!=1&&(f[ot>>2]|0)!=(v|0)){switch(tA(pt+(((x+5|0)%6|0)<<4)+4|0,Ut),tA(pt+(x<<4)+4|0,he),ni=+(f[N>>2]|0),j[ve>>3]=ni*3,j[H>>3]=0,Lt=ni*-1.5,j[me>>3]=Lt,j[J>>3]=ni*2.598076211353316,j[fe>>3]=Lt,j[Z>>3]=ni*-2.598076211353316,x=f[Ve>>2]|0,f[17040+(x*80|0)+(((v|0)==(x|0)?f[ot>>2]|0:v)<<2)>>2]|0){case 1:{p=me,v=ve;break}case 3:{p=fe,v=me;break}case 2:{p=ve,v=fe;break}default:{p=8;break e}}$9(Ut,he,v,p,ne),!(E9(Ut,ne)|0)&&!(E9(he,ne)|0)&&(J1(ne,f[Ve>>2]|0,T,1,w+8+(f[w>>2]<<4)|0),f[w>>2]=(f[w>>2]|0)+1)}if((I|0)<(k|0)&&(tA(Y,Ut),J1(Ut,f[ot>>2]|0,T,1,w+8+(f[w>>2]<<4)|0),f[w>>2]=(f[w>>2]|0)+1),I=I+1|0,(I|0)>=(re|0)){p=3;break}else v=f[ot>>2]|0}if((p|0)==3){L=Vt;return}else(p|0)==8&&Mt(27054,27017,737,27099)}function u9(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0;T=L,L=L+160|0,v=T+80|0,w=T,x=v,$=20368,I=x+72|0;do f[x>>2]=f[$>>2],x=x+4|0,$=$+4|0;while((x|0)<(I|0));x=w,$=20448,I=x+72|0;do f[x>>2]=f[$>>2],x=x+4|0,$=$+4|0;while((x|0)<(I|0));I=(Ma(f[d>>2]|0)|0)==0,v=I?v:w,w=p+4|0,n9(w),o9(w),Ma(f[d>>2]|0)|0&&(iA(w),f[d>>2]=(f[d>>2]|0)+1),f[m>>2]=f[p>>2],d=m+4|0,Vn(w,v,d),An(d),f[m+16>>2]=f[p>>2],d=m+20|0,Vn(w,v+12|0,d),An(d),f[m+32>>2]=f[p>>2],d=m+36|0,Vn(w,v+24|0,d),An(d),f[m+48>>2]=f[p>>2],d=m+52|0,Vn(w,v+36|0,d),An(d),f[m+64>>2]=f[p>>2],d=m+68|0,Vn(w,v+48|0,d),An(d),f[m+80>>2]=f[p>>2],m=m+84|0,Vn(w,v+60|0,m),An(m),L=T}function xAe(p,d){return p=p|0,d=d|0,d=Re(p|0,d|0,52)|0,q()|0,d&15|0}function h9(p,d){return p=p|0,d=d|0,d=Re(p|0,d|0,45)|0,q()|0,d&127|0}function $Ae(p,d,m,v){return p=p|0,d=d|0,m=m|0,v=v|0,(m+-1|0)>>>0>14?(v=4,v|0):(m=Re(p|0,d|0,(15-m|0)*3|0)|0,q()|0,f[v>>2]=m&7,v=0,v|0)}function EAe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0;if(p>>>0>15)return v=4,v|0;if(d>>>0>121)return v=17,v|0;$=Be(p|0,0,52)|0,w=q()|0,I=Be(d|0,0,45)|0,w=w|(q()|0)|134225919;e:do if((p|0)>=1){for(I=1,$=(Le[20528+d>>0]|0)!=0,x=-1;;){if(d=f[m+(I+-1<<2)>>2]|0,d>>>0>6){w=18,d=10;break}if(!((d|0)==0|$^1))if((d|0)==1){w=19,d=10;break}else $=0;if(k=(15-I|0)*3|0,T=Be(7,0,k|0)|0,w=w&~(q()|0),d=Be(d|0,((d|0)<0)<<31>>31|0,k|0)|0,x=d|x&~T,w=q()|0|w,(I|0)<(p|0))I=I+1|0;else break e}if((d|0)==10)return w|0}else x=-1;while(!1);return k=v,f[k>>2]=x,f[k+4>>2]=w,k=0,k|0}function bL(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0;return!(!0&(d&-16777216|0)==134217728)||(v=Re(p|0,d|0,52)|0,q()|0,v=v&15,m=Re(p|0,d|0,45)|0,q()|0,m=m&127,m>>>0>121)?(p=0,p|0):($=(v^15)*3|0,w=Re(p|0,d|0,$|0)|0,$=Be(w|0,q()|0,$|0)|0,w=q()|0,x=Os(-1227133514,-1171,$|0,w|0)|0,!(($&613566756&x|0)==0&(w&4681&(q()|0)|0)==0)||($=(v*3|0)+19|0,x=Be(~p|0,~d|0,$|0)|0,$=Re(x|0,q()|0,$|0)|0,!((v|0)==15|($|0)==0&(q()|0)==0))?($=0,$|0):!(Le[20528+m>>0]|0)||(d=d&8191,(p|0)==0&(d|0)==0)?($=1,$|0):($=OL(p|0,d|0)|0,q()|0,((63-$|0)%3|0|0)!=0|0))}function IAe(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0;return!0&(d&-16777216|0)==134217728&&(v=Re(p|0,d|0,52)|0,q()|0,v=v&15,m=Re(p|0,d|0,45)|0,q()|0,m=m&127,m>>>0<=121)&&($=(v^15)*3|0,w=Re(p|0,d|0,$|0)|0,$=Be(w|0,q()|0,$|0)|0,w=q()|0,x=Os(-1227133514,-1171,$|0,w|0)|0,($&613566756&x|0)==0&(w&4681&(q()|0)|0)==0)&&($=(v*3|0)+19|0,x=Be(~p|0,~d|0,$|0)|0,$=Re(x|0,q()|0,$|0)|0,(v|0)==15|($|0)==0&(q()|0)==0)&&(!(Le[20528+m>>0]|0)||(m=d&8191,(p|0)==0&(m|0)==0)||($=OL(p|0,m|0)|0,q()|0,(63-$|0)%3|0|0))||l9(p,d)|0?($=1,$|0):($=(I9(p,d)|0)!=0&1,$|0)}function wL(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0;if(w=Be(d|0,0,52)|0,x=q()|0,m=Be(m|0,0,45)|0,m=x|(q()|0)|134225919,(d|0)<1){x=-1,v=m,d=p,f[d>>2]=x,p=p+4|0,f[p>>2]=v;return}for(x=1,w=-1;$=(15-x|0)*3|0,I=Be(7,0,$|0)|0,m=m&~(q()|0),$=Be(v|0,0,$|0)|0,w=w&~I|$,m=m|(q()|0),(x|0)!=(d|0);)x=x+1|0;I=p,$=I,f[$>>2]=w,I=I+4|0,f[I>>2]=m}function _L(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0;if(x=Re(p|0,d|0,52)|0,q()|0,x=x&15,m>>>0>15)return v=4,v|0;if((x|0)<(m|0))return v=12,v|0;if((x|0)==(m|0))return f[v>>2]=p,f[v+4>>2]=d,v=0,v|0;if(w=Be(m|0,0,52)|0,w=w|p,p=q()|0|d&-15728641,(x|0)>(m|0))do d=Be(7,0,(14-m|0)*3|0)|0,m=m+1|0,w=d|w,p=q()|0|p;while((m|0)<(x|0));return f[v>>2]=w,f[v+4>>2]=p,v=0,v|0}function Z1(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0;if(x=Re(p|0,d|0,52)|0,q()|0,x=x&15,!((m|0)<16&(x|0)<=(m|0)))return v=4,v|0;w=m-x|0,m=Re(p|0,d|0,45)|0,q()|0;e:do if(!(nr(m&127)|0))m=qd(7,0,w,((w|0)<0)<<31>>31)|0,w=q()|0;else{t:do if(x|0){for(m=1;$=Be(7,0,(15-m|0)*3|0)|0,!!(($&p|0)==0&((q()|0)&d|0)==0);)if(m>>>0<x>>>0)m=m+1|0;else break t;m=qd(7,0,w,((w|0)<0)<<31>>31)|0,w=q()|0;break e}while(!1);m=qd(7,0,w,((w|0)<0)<<31>>31)|0,m=Ds(m|0,q()|0,5,0)|0,m=gt(m|0,q()|0,-5,-1)|0,m=Qd(m|0,q()|0,6,0)|0,m=gt(m|0,q()|0,1,0)|0,w=q()|0}while(!1);return $=v,f[$>>2]=m,f[$+4>>2]=w,$=0,$|0}function Bi(p,d){p=p|0,d=d|0;var m=0,v=0,w=0;if(w=Re(p|0,d|0,45)|0,q()|0,!(nr(w&127)|0))return w=0,w|0;w=Re(p|0,d|0,52)|0,q()|0,w=w&15;e:do if(!w)m=0;else for(v=1;;){if(m=Re(p|0,d|0,(15-v|0)*3|0)|0,q()|0,m=m&7,m|0)break e;if(v>>>0<w>>>0)v=v+1|0;else{m=0;break}}while(!1);return w=(m|0)==0&1,w|0}function CAe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0;if($=L,L=L+16|0,x=$,CL(x,p,d,m),d=x,p=f[d>>2]|0,d=f[d+4>>2]|0,(p|0)==0&(d|0)==0)return L=$,0;w=0,m=0;do I=v+(w<<3)|0,f[I>>2]=p,f[I+4>>2]=d,w=gt(w|0,m|0,1,0)|0,m=q()|0,TL(x),I=x,p=f[I>>2]|0,d=f[I+4>>2]|0;while(!((p|0)==0&(d|0)==0));return L=$,0}function d9(p,d,m,v){return p=p|0,d=d|0,m=m|0,v=v|0,(v|0)<(m|0)?(m=d,v=p,zt(m|0),v|0):(m=Be(-1,-1,((v-m|0)*3|0)+3|0)|0,v=Be(~m|0,~(q()|0)|0,(15-v|0)*3|0)|0,m=~(q()|0)&d,v=~v&p,zt(m|0),v|0)}function p9(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0;return w=Re(p|0,d|0,52)|0,q()|0,w=w&15,(m|0)<16&(w|0)<=(m|0)?((w|0)<(m|0)&&(w=Be(-1,-1,((m+-1-w|0)*3|0)+3|0)|0,w=Be(~w|0,~(q()|0)|0,(15-m|0)*3|0)|0,d=~(q()|0)&d,p=~w&p),w=Be(m|0,0,52)|0,m=d&-15728641|(q()|0),f[v>>2]=p|w,f[v+4>>2]=m,v=0,v|0):(v=4,v|0)}function TAe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0,pt=0,ot=0,Ut=0,Vt=0,ni=0,Lt=0,ft=0,je=0;if((m|0)==0&(v|0)==0)return je=0,je|0;if(w=p,x=f[w>>2]|0,w=f[w+4>>2]|0,!0&(w&15728640|0)==0){if(!((v|0)>0|(v|0)==0&m>>>0>0)||(je=d,f[je>>2]=x,f[je+4>>2]=w,(m|0)==1&(v|0)==0))return je=0,je|0;w=1,x=0;do Lt=p+(w<<3)|0,ft=f[Lt+4>>2]|0,je=d+(w<<3)|0,f[je>>2]=f[Lt>>2],f[je+4>>2]=ft,w=gt(w|0,x|0,1,0)|0,x=q()|0;while((x|0)<(v|0)|(x|0)==(v|0)&w>>>0<m>>>0);return w=0,w|0}if(ni=m<<3,ft=Ac(ni)|0,!ft)return je=13,je|0;if(oy(ft|0,p|0,ni|0)|0,Lt=mo(m,8)|0,!Lt)return bt(ft),je=13,je|0;e:for(;;){w=ft,k=f[w>>2]|0,w=f[w+4>>2]|0,Ut=Re(k|0,w|0,52)|0,q()|0,Ut=Ut&15,Vt=Ut+-1|0,ot=(Ut|0)!=0,pt=(v|0)>0|(v|0)==0&m>>>0>0;t:do if(ot&pt){if(me=Be(Vt|0,0,52)|0,fe=q()|0,Vt>>>0>15){if(!((k|0)==0&(w|0)==0)){je=16;break e}for(x=0,p=0;;){if(x=gt(x|0,p|0,1,0)|0,p=q()|0,!((p|0)<(v|0)|(p|0)==(v|0)&x>>>0<m>>>0))break t;if($=ft+(x<<3)|0,Ve=f[$>>2]|0,$=f[$+4>>2]|0,!((Ve|0)==0&($|0)==0)){w=$,je=16;break e}}}for(I=k,p=w,x=0,$=0;;){if(!((I|0)==0&(p|0)==0)){if(!(!0&(p&117440512|0)==0)){je=21;break e}if(N=Re(I|0,p|0,52)|0,q()|0,N=N&15,(N|0)<(Vt|0)){w=12,je=27;break e}if((N|0)!=(Vt|0)&&(I=I|me,p=p&-15728641|fe,N>>>0>=Ut>>>0)){T=Vt;do Ve=Be(7,0,(14-T|0)*3|0)|0,T=T+1|0,I=Ve|I,p=q()|0|p;while(T>>>0<N>>>0)}if(J=ny(I|0,p|0,m|0,v|0)|0,Z=q()|0,T=Lt+(J<<3)|0,N=T,H=f[N>>2]|0,N=f[N+4>>2]|0,!((H|0)==0&(N|0)==0)){he=0,ve=0;do{if((he|0)>(v|0)|(he|0)==(v|0)&ve>>>0>m>>>0){je=31;break e}if((H|0)==(I|0)&(N&-117440513|0)==(p|0)){Y=Re(H|0,N|0,56)|0,q()|0,Y=Y&7,re=Y+1|0,Ve=Re(H|0,N|0,45)|0,q()|0;i:do if(!(nr(Ve&127)|0))N=7;else{if(H=Re(H|0,N|0,52)|0,q()|0,H=H&15,!H){N=6;break}for(N=1;;){if(Ve=Be(7,0,(15-N|0)*3|0)|0,!((Ve&I|0)==0&((q()|0)&p|0)==0)){N=7;break i}if(N>>>0<H>>>0)N=N+1|0;else{N=6;break}}}while(!1);if((Y+2|0)>>>0>N>>>0){je=41;break e}Ve=Be(re|0,0,56)|0,p=q()|0|p&-117440513,ne=T,f[ne>>2]=0,f[ne+4>>2]=0,I=Ve|I}else J=gt(J|0,Z|0,1,0)|0,J=sy(J|0,q()|0,m|0,v|0)|0,Z=q()|0;ve=gt(ve|0,he|0,1,0)|0,he=q()|0,T=Lt+(J<<3)|0,N=T,H=f[N>>2]|0,N=f[N+4>>2]|0}while(!((H|0)==0&(N|0)==0))}Ve=T,f[Ve>>2]=I,f[Ve+4>>2]=p}if(x=gt(x|0,$|0,1,0)|0,$=q()|0,!(($|0)<(v|0)|($|0)==(v|0)&x>>>0<m>>>0))break t;p=ft+(x<<3)|0,I=f[p>>2]|0,p=f[p+4>>2]|0}}while(!1);if(Ve=gt(m|0,v|0,5,0)|0,ne=q()|0,ne>>>0<0|(ne|0)==0&Ve>>>0<11){je=85;break}if(Ve=Qd(m|0,v|0,6,0)|0,q()|0,Ve=mo(Ve,8)|0,!Ve){je=48;break}do if(pt){for(re=0,p=0,Y=0,he=0;;){if(N=Lt+(re<<3)|0,$=N,x=f[$>>2]|0,$=f[$+4>>2]|0,(x|0)==0&($|0)==0)ne=Y;else{H=Re(x|0,$|0,56)|0,q()|0,H=H&7,I=H+1|0,J=$&-117440513,ne=Re(x|0,$|0,45)|0,q()|0;t:do if(nr(ne&127)|0){if(Z=Re(x|0,$|0,52)|0,q()|0,Z=Z&15,Z|0)for(T=1;;){if(ne=Be(7,0,(15-T|0)*3|0)|0,!((x&ne|0)==0&(J&(q()|0)|0)==0))break t;if(T>>>0<Z>>>0)T=T+1|0;else break}$=Be(I|0,0,56)|0,x=$|x,$=q()|0|J,I=N,f[I>>2]=x,f[I+4>>2]=$,I=H+2|0}while(!1);(I|0)==7?(ne=Ve+(p<<3)|0,f[ne>>2]=x,f[ne+4>>2]=$&-117440513,p=gt(p|0,Y|0,1,0)|0,ne=q()|0):ne=Y}if(re=gt(re|0,he|0,1,0)|0,he=q()|0,(he|0)<(v|0)|(he|0)==(v|0)&re>>>0<m>>>0)Y=ne;else break}if(pt){if(ve=Vt>>>0>15,me=Be(Vt|0,0,52)|0,fe=q()|0,!ot){for(x=0,T=0,I=0,$=0;(k|0)==0&(w|0)==0||(Vt=d+(x<<3)|0,f[Vt>>2]=k,f[Vt+4>>2]=w,x=gt(x|0,T|0,1,0)|0,T=q()|0),I=gt(I|0,$|0,1,0)|0,$=q()|0,!!(($|0)<(v|0)|($|0)==(v|0)&I>>>0<m>>>0);)w=ft+(I<<3)|0,k=f[w>>2]|0,w=f[w+4>>2]|0;w=ne;break}for(x=0,T=0,$=0,I=0;;){do if(!((k|0)==0&(w|0)==0)){if(Z=Re(k|0,w|0,52)|0,q()|0,Z=Z&15,ve|(Z|0)<(Vt|0)){je=80;break e}if((Z|0)!=(Vt|0)){if(N=k|me,H=w&-15728641|fe,Z>>>0>=Ut>>>0){J=Vt;do ot=Be(7,0,(14-J|0)*3|0)|0,J=J+1|0,N=ot|N,H=q()|0|H;while(J>>>0<Z>>>0)}}else N=k,H=w;Y=ny(N|0,H|0,m|0,v|0)|0,J=0,Z=0,he=q()|0;do{if((J|0)>(v|0)|(J|0)==(v|0)&Z>>>0>m>>>0){je=81;break e}if(ot=Lt+(Y<<3)|0,re=f[ot+4>>2]|0,(re&-117440513|0)==(H|0)&&(f[ot>>2]|0)==(N|0)){je=65;break}ot=gt(Y|0,he|0,1,0)|0,Y=sy(ot|0,q()|0,m|0,v|0)|0,he=q()|0,Z=gt(Z|0,J|0,1,0)|0,J=q()|0,ot=Lt+(Y<<3)|0}while(!((f[ot>>2]|0)==(N|0)&&(f[ot+4>>2]|0)==(H|0)));if((je|0)==65&&(je=0,!0&(re&117440512|0)==100663296))break;ot=d+(x<<3)|0,f[ot>>2]=k,f[ot+4>>2]=w,x=gt(x|0,T|0,1,0)|0,T=q()|0}while(!1);if($=gt($|0,I|0,1,0)|0,I=q()|0,!((I|0)<(v|0)|(I|0)==(v|0)&$>>>0<m>>>0))break;w=ft+($<<3)|0,k=f[w>>2]|0,w=f[w+4>>2]|0}w=ne}else x=0,w=ne}else x=0,p=0,w=0;while(!1);if(Jd(Lt|0,0,ni|0)|0,oy(ft|0,Ve|0,p<<3|0)|0,bt(Ve),(p|0)==0&(w|0)==0){je=89;break}else d=d+(x<<3)|0,v=w,m=p}if((je|0)==16)!0&(w&117440512|0)==0?(w=4,je=27):je=21;else if((je|0)==31)Mt(27795,27122,620,27132);else{if((je|0)==41)return bt(ft),bt(Lt),je=10,je|0;if((je|0)==48)return bt(ft),bt(Lt),je=13,je|0;(je|0)==80?Mt(27795,27122,711,27132):(je|0)==81?Mt(27795,27122,723,27132):(je|0)==85&&(oy(d|0,ft|0,m<<3|0)|0,je=89)}return(je|0)==21?(bt(ft),bt(Lt),je=5,je|0):(je|0)==27?(bt(ft),bt(Lt),je=w,je|0):(je|0)==89?(bt(ft),bt(Lt),je=0,je|0):0}function MAe(p,d,m,v,w,x,$){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0,x=x|0,$=$|0;var I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0;if(re=L,L=L+16|0,Y=re,!((m|0)>0|(m|0)==0&d>>>0>0))return Y=0,L=re,Y|0;if(($|0)>=16)return Y=12,L=re,Y|0;J=0,Z=0,H=0,I=0;e:for(;;){if(k=p+(J<<3)|0,T=f[k>>2]|0,k=f[k+4>>2]|0,N=Re(T|0,k|0,52)|0,q()|0,(N&15|0)>($|0)){I=12,T=11;break}if(CL(Y,T,k,$),N=Y,k=f[N>>2]|0,N=f[N+4>>2]|0,(k|0)==0&(N|0)==0)T=H;else{T=H;do{if(!((I|0)<(x|0)|(I|0)==(x|0)&T>>>0<w>>>0)){T=10;break e}H=v+(T<<3)|0,f[H>>2]=k,f[H+4>>2]=N,T=gt(T|0,I|0,1,0)|0,I=q()|0,TL(Y),H=Y,k=f[H>>2]|0,N=f[H+4>>2]|0}while(!((k|0)==0&(N|0)==0))}if(J=gt(J|0,Z|0,1,0)|0,Z=q()|0,(Z|0)<(m|0)|(Z|0)==(m|0)&J>>>0<d>>>0)H=T;else{I=0,T=11;break}}return(T|0)==10?(Y=14,L=re,Y|0):(T|0)==11?(L=re,I|0):0}function kAe(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0;J=L,L=L+16|0,H=J;e:do if((m|0)>0|(m|0)==0&d>>>0>0){for(k=0,$=0,x=0,N=0;;){if(T=p+(k<<3)|0,I=f[T>>2]|0,T=f[T+4>>2]|0,!((I|0)==0&(T|0)==0)&&(T=(Z1(I,T,v,H)|0)==0,I=H,$=gt(f[I>>2]|0,f[I+4>>2]|0,$|0,x|0)|0,x=q()|0,!T)){x=12;break}if(k=gt(k|0,N|0,1,0)|0,N=q()|0,!((N|0)<(m|0)|(N|0)==(m|0)&k>>>0<d>>>0))break e}return L=J,x|0}else $=0,x=0;while(!1);return f[w>>2]=$,f[w+4>>2]=x,w=0,L=J,w|0}function PAe(p,d){return p=p|0,d=d|0,d=Re(p|0,d|0,52)|0,q()|0,d&1|0}function Ao(p,d){p=p|0,d=d|0;var m=0,v=0,w=0;if(w=Re(p|0,d|0,52)|0,q()|0,w=w&15,!w)return w=0,w|0;for(v=1;;){if(m=Re(p|0,d|0,(15-v|0)*3|0)|0,q()|0,m=m&7,m|0){v=5;break}if(v>>>0<w>>>0)v=v+1|0;else{m=0,v=5;break}}return(v|0)==5?m|0:0}function SL(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0;if(T=Re(p|0,d|0,52)|0,q()|0,T=T&15,!T)return I=d,T=p,zt(I|0),T|0;for(I=1,m=0;;){x=(15-I|0)*3|0,v=Be(7,0,x|0)|0,w=q()|0,$=Re(p|0,d|0,x|0)|0,q()|0,x=Be(rA($&7)|0,0,x|0)|0,$=q()|0,p=x|p&~v,d=$|d&~w;e:do if(!m)if((x&v|0)==0&($&w|0)==0)m=0;else if(v=Re(p|0,d|0,52)|0,q()|0,v=v&15,!v)m=1;else{m=1;t:for(;;){switch($=Re(p|0,d|0,(15-m|0)*3|0)|0,q()|0,$&7){case 1:break t;case 0:break;default:{m=1;break e}}if(m>>>0<v>>>0)m=m+1|0;else{m=1;break e}}for(m=1;;)if($=(15-m|0)*3|0,w=Re(p|0,d|0,$|0)|0,q()|0,x=Be(7,0,$|0)|0,d=d&~(q()|0),$=Be(rA(w&7)|0,0,$|0)|0,p=p&~x|$,d=d|(q()|0),m>>>0<v>>>0)m=m+1|0;else{m=1;break}}while(!1);if(I>>>0<T>>>0)I=I+1|0;else break}return zt(d|0),p|0}function sA(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0;if(v=Re(p|0,d|0,52)|0,q()|0,v=v&15,!v)return m=d,v=p,zt(m|0),v|0;for(m=1;x=(15-m|0)*3|0,$=Re(p|0,d|0,x|0)|0,q()|0,w=Be(7,0,x|0)|0,d=d&~(q()|0),x=Be(rA($&7)|0,0,x|0)|0,p=x|p&~w,d=q()|0|d,m>>>0<v>>>0;)m=m+1|0;return zt(d|0),p|0}function LAe(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0;if(T=Re(p|0,d|0,52)|0,q()|0,T=T&15,!T)return I=d,T=p,zt(I|0),T|0;for(I=1,m=0;;){x=(15-I|0)*3|0,v=Be(7,0,x|0)|0,w=q()|0,$=Re(p|0,d|0,x|0)|0,q()|0,x=Be(Hd($&7)|0,0,x|0)|0,$=q()|0,p=x|p&~v,d=$|d&~w;e:do if(!m)if((x&v|0)==0&($&w|0)==0)m=0;else if(v=Re(p|0,d|0,52)|0,q()|0,v=v&15,!v)m=1;else{m=1;t:for(;;){switch($=Re(p|0,d|0,(15-m|0)*3|0)|0,q()|0,$&7){case 1:break t;case 0:break;default:{m=1;break e}}if(m>>>0<v>>>0)m=m+1|0;else{m=1;break e}}for(m=1;;)if(w=(15-m|0)*3|0,x=Be(7,0,w|0)|0,$=d&~(q()|0),d=Re(p|0,d|0,w|0)|0,q()|0,d=Be(Hd(d&7)|0,0,w|0)|0,p=p&~x|d,d=$|(q()|0),m>>>0<v>>>0)m=m+1|0;else{m=1;break}}while(!1);if(I>>>0<T>>>0)I=I+1|0;else break}return zt(d|0),p|0}function xL(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0;if(v=Re(p|0,d|0,52)|0,q()|0,v=v&15,!v)return m=d,v=p,zt(m|0),v|0;for(m=1;$=(15-m|0)*3|0,x=Be(7,0,$|0)|0,w=d&~(q()|0),d=Re(p|0,d|0,$|0)|0,q()|0,d=Be(Hd(d&7)|0,0,$|0)|0,p=d|p&~x,d=q()|0|w,m>>>0<v>>>0;)m=m+1|0;return zt(d|0),p|0}function RAe(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;if(T=L,L=L+64|0,I=T+40|0,v=T+24|0,w=T+12|0,x=T,Be(d|0,0,52)|0,m=q()|0|134225919,!d)return(f[p+4>>2]|0)>2||(f[p+8>>2]|0)>2||(f[p+12>>2]|0)>2?($=0,I=0,zt($|0),L=T,I|0):(Be(Jj(p)|0,0,45)|0,$=q()|0|m,I=-1,zt($|0),L=T,I|0);if(f[I>>2]=f[p>>2],f[I+4>>2]=f[p+4>>2],f[I+8>>2]=f[p+8>>2],f[I+12>>2]=f[p+12>>2],$=I+4|0,(d|0)>0)for(p=-1;f[v>>2]=f[$>>2],f[v+4>>2]=f[$+4>>2],f[v+8>>2]=f[$+8>>2],d&1?(cAe($),f[w>>2]=f[$>>2],f[w+4>>2]=f[$+4>>2],f[w+8>>2]=f[$+8>>2],A$(w)):(i9($),f[w>>2]=f[$>>2],f[w+4>>2]=f[$+4>>2],f[w+8>>2]=f[$+8>>2],iA(w)),mL(v,w,x),An(x),N=(15-d|0)*3|0,k=Be(7,0,N|0)|0,m=m&~(q()|0),N=Be(f$(x)|0,0,N|0)|0,p=N|p&~k,m=q()|0|m,(d|0)>1;)d=d+-1|0;else p=-1;e:do if((f[$>>2]|0)<=2&&(f[I+8>>2]|0)<=2&&(f[I+12>>2]|0)<=2){if(v=Jj(I)|0,d=Be(v|0,0,45)|0,d=d|p,p=q()|0|m&-1040385,x=Jfe(I)|0,!(nr(v)|0)){if((x|0)<=0)break;for(w=0;;){if(v=Re(d|0,p|0,52)|0,q()|0,v=v&15,v)for(m=1;N=(15-m|0)*3|0,I=Re(d|0,p|0,N|0)|0,q()|0,k=Be(7,0,N|0)|0,p=p&~(q()|0),N=Be(rA(I&7)|0,0,N|0)|0,d=d&~k|N,p=p|(q()|0),m>>>0<v>>>0;)m=m+1|0;if(w=w+1|0,(w|0)==(x|0))break e}}w=Re(d|0,p|0,52)|0,q()|0,w=w&15;t:do if(w){m=1;i:for(;;){switch(N=Re(d|0,p|0,(15-m|0)*3|0)|0,q()|0,N&7){case 1:break i;case 0:break;default:break t}if(m>>>0<w>>>0)m=m+1|0;else break t}if(Zj(v,f[I>>2]|0)|0)for(m=1;I=(15-m|0)*3|0,k=Be(7,0,I|0)|0,N=p&~(q()|0),p=Re(d|0,p|0,I|0)|0,q()|0,p=Be(Hd(p&7)|0,0,I|0)|0,d=d&~k|p,p=N|(q()|0),m>>>0<w>>>0;)m=m+1|0;else for(m=1;N=(15-m|0)*3|0,I=Re(d|0,p|0,N|0)|0,q()|0,k=Be(7,0,N|0)|0,p=p&~(q()|0),N=Be(rA(I&7)|0,0,N|0)|0,d=d&~k|N,p=p|(q()|0),m>>>0<w>>>0;)m=m+1|0}while(!1);if((x|0)>0){m=0;do d=SL(d,p)|0,p=q()|0,m=m+1|0;while((m|0)!=(x|0))}}else d=0,p=0;while(!1);return k=p,N=d,zt(k|0),L=T,N|0}function Ma(p){return p=p|0,(p|0)%2|0|0}function $L(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0;return w=L,L=L+16|0,v=w,d>>>0>15?(v=4,L=w,v|0):(f[p+4>>2]&2146435072|0)==2146435072||(f[p+8+4>>2]&2146435072|0)==2146435072?(v=3,L=w,v|0):(vAe(p,d,v),d=RAe(v,d)|0,v=q()|0,f[m>>2]=d,f[m+4>>2]=v,(d|0)==0&(v|0)==0&&Mt(27795,27122,1050,27145),v=0,L=w,v|0)}function EL(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0;if(w=m+4|0,x=Re(p|0,d|0,52)|0,q()|0,x=x&15,$=Re(p|0,d|0,45)|0,q()|0,v=(x|0)==0,nr($&127)|0){if(v)return $=1,$|0;v=1}else{if(v)return $=0,$|0;(f[w>>2]|0)==0&&(f[m+8>>2]|0)==0?v=(f[m+12>>2]|0)!=0&1:v=1}for(m=1;m&1?A$(w):iA(w),$=Re(p|0,d|0,(15-m|0)*3|0)|0,q()|0,r9(w,$&7),m>>>0<x>>>0;)m=m+1|0;return v|0}function ty(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;if(N=L,L=L+16|0,T=N,k=Re(p|0,d|0,45)|0,q()|0,k=k&127,k>>>0>121)return f[m>>2]=0,f[m+4>>2]=0,f[m+8>>2]=0,f[m+12>>2]=0,k=5,L=N,k|0;e:do if((nr(k)|0)!=0&&(x=Re(p|0,d|0,52)|0,q()|0,x=x&15,(x|0)!=0)){v=1;t:for(;;){switch(I=Re(p|0,d|0,(15-v|0)*3|0)|0,q()|0,I&7){case 5:break t;case 0:break;default:{v=d;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=d;break e}}for(w=1,v=d;d=(15-w|0)*3|0,$=Be(7,0,d|0)|0,I=v&~(q()|0),v=Re(p|0,v|0,d|0)|0,q()|0,v=Be(Hd(v&7)|0,0,d|0)|0,p=p&~$|v,v=I|(q()|0),w>>>0<x>>>0;)w=w+1|0}else v=d;while(!1);if(I=7696+(k*28|0)|0,f[m>>2]=f[I>>2],f[m+4>>2]=f[I+4>>2],f[m+8>>2]=f[I+8>>2],f[m+12>>2]=f[I+12>>2],!(EL(p,v,m)|0))return k=0,L=N,k|0;if($=m+4|0,f[T>>2]=f[$>>2],f[T+4>>2]=f[$+4>>2],f[T+8>>2]=f[$+8>>2],x=Re(p|0,v|0,52)|0,q()|0,I=x&15,x&1?(iA($),x=I+1|0):x=I,!(nr(k)|0))v=0;else{e:do if(!I)v=0;else for(d=1;;){if(w=Re(p|0,v|0,(15-d|0)*3|0)|0,q()|0,w=w&7,w|0){v=w;break e}if(d>>>0<I>>>0)d=d+1|0;else{v=0;break}}while(!1);v=(v|0)==4&1}if(!(ey(m,x,v,0)|0))(x|0)!=(I|0)&&(f[$>>2]=f[T>>2],f[$+4>>2]=f[T+4>>2],f[$+8>>2]=f[T+8>>2]);else{if(nr(k)|0)do;while((ey(m,x,0,0)|0)!=0);(x|0)!=(I|0)&&i9($)}return k=0,L=N,k|0}function nA(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0;return x=L,L=L+16|0,v=x,w=ty(p,d,v)|0,w|0?(L=x,w|0):(w=Re(p|0,d|0,52)|0,q()|0,_Ae(v,w&15,m),w=0,L=x,w|0)}function iy(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0;if($=L,L=L+16|0,x=$,v=ty(p,d,x)|0,v|0)return x=v,L=$,x|0;v=Re(p|0,d|0,45)|0,q()|0,v=(nr(v&127)|0)==0,w=Re(p|0,d|0,52)|0,q()|0,w=w&15;e:do if(!v){if(w|0)for(v=1;;){if(I=Be(7,0,(15-v|0)*3|0)|0,!((I&p|0)==0&((q()|0)&d|0)==0))break e;if(v>>>0<w>>>0)v=v+1|0;else break}return gL(x,w,0,5,m),I=0,L=$,I|0}while(!1);return vL(x,w,0,6,m),I=0,L=$,I|0}function OAe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0;if(w=Re(p|0,d|0,45)|0,q()|0,!(nr(w&127)|0))return w=2,f[m>>2]=w,0;if(w=Re(p|0,d|0,52)|0,q()|0,w=w&15,!w)return w=5,f[m>>2]=w,0;for(v=1;;){if(x=Be(7,0,(15-v|0)*3|0)|0,!((x&p|0)==0&((q()|0)&d|0)==0)){v=2,p=6;break}if(v>>>0<w>>>0)v=v+1|0;else{v=5,p=6;break}}return(p|0)==6&&(f[m>>2]=v),0}function f9(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0;H=L,L=L+128|0,k=H+112|0,x=H+96|0,N=H,w=Re(p|0,d|0,52)|0,q()|0,I=w&15,f[k>>2]=I,$=Re(p|0,d|0,45)|0,q()|0,$=$&127;e:do if(nr($)|0){if(I|0)for(v=1;;){if(T=Be(7,0,(15-v|0)*3|0)|0,!((T&p|0)==0&((q()|0)&d|0)==0)){w=0;break e}if(v>>>0<I>>>0)v=v+1|0;else break}if(w&1)w=1;else return T=Be(I+1|0,0,52)|0,N=q()|0|d&-15728641,k=Be(7,0,(14-I|0)*3|0)|0,N=f9((T|p)&~k,N&~(q()|0),m)|0,L=H,N|0}else w=0;while(!1);if(v=ty(p,d,x)|0,!v){w?(c9(x,k,N),T=5):(u9(x,k,N),T=6);e:do if(nr($)|0)if(!I)p=5;else for(v=1;;){if($=Be(7,0,(15-v|0)*3|0)|0,!(($&p|0)==0&((q()|0)&d|0)==0)){p=2;break e}if(v>>>0<I>>>0)v=v+1|0;else{p=5;break}}else p=2;while(!1);Jd(m|0,-1,p<<2|0)|0;e:do if(w)for(x=0;;){if($=N+(x<<4)|0,SAe($,f[k>>2]|0)|0,$=f[$>>2]|0,I=f[m>>2]|0,(I|0)==-1|(I|0)==($|0))v=m;else{w=0;do{if(w=w+1|0,w>>>0>=p>>>0){v=1;break e}v=m+(w<<2)|0,I=f[v>>2]|0}while(!((I|0)==-1|(I|0)==($|0)))}if(f[v>>2]=$,x=x+1|0,x>>>0>=T>>>0){v=0;break}}else for(x=0;;){if($=N+(x<<4)|0,ey($,f[k>>2]|0,0,1)|0,$=f[$>>2]|0,I=f[m>>2]|0,(I|0)==-1|(I|0)==($|0))v=m;else{w=0;do{if(w=w+1|0,w>>>0>=p>>>0){v=1;break e}v=m+(w<<2)|0,I=f[v>>2]|0}while(!((I|0)==-1|(I|0)==($|0)))}if(f[v>>2]=$,x=x+1|0,x>>>0>=T>>>0){v=0;break}}while(!1)}return N=v,L=H,N|0}function DAe(){return 12}function IL(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0;if(p>>>0>15)return I=4,I|0;if(Be(p|0,0,52)|0,I=q()|0|134225919,!p){m=0,v=0;do nr(v)|0&&(Be(v|0,0,45)|0,$=I|(q()|0),p=d+(m<<3)|0,f[p>>2]=-1,f[p+4>>2]=$,m=m+1|0),v=v+1|0;while((v|0)!=122);return m=0,m|0}m=0,$=0;do{if(nr($)|0){for(Be($|0,0,45)|0,v=1,w=-1,x=I|(q()|0);T=Be(7,0,(15-v|0)*3|0)|0,w=w&~T,x=x&~(q()|0),(v|0)!=(p|0);)v=v+1|0;T=d+(m<<3)|0,f[T>>2]=w,f[T+4>>2]=x,m=m+1|0}$=$+1|0}while(($|0)!=122);return m=0,m|0}function NAe(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0;if(me=L,L=L+16|0,he=me,ve=Re(p|0,d|0,52)|0,q()|0,ve=ve&15,m>>>0>15)return ve=4,L=me,ve|0;if((ve|0)<(m|0))return ve=12,L=me,ve|0;if((ve|0)!=(m|0))if(x=Be(m|0,0,52)|0,x=x|p,I=q()|0|d&-15728641,(ve|0)>(m|0)){T=m;do re=Be(7,0,(14-T|0)*3|0)|0,T=T+1|0,x=re|x,I=q()|0|I;while((T|0)<(ve|0));re=x}else re=x;else re=p,I=d;Y=Re(re|0,I|0,45)|0,q()|0;e:do if(nr(Y&127)|0){if(T=Re(re|0,I|0,52)|0,q()|0,T=T&15,T|0)for(x=1;;){if(Y=Be(7,0,(15-x|0)*3|0)|0,!((Y&re|0)==0&((q()|0)&I|0)==0)){k=33;break e}if(x>>>0<T>>>0)x=x+1|0;else break}if(Y=v,f[Y>>2]=0,f[Y+4>>2]=0,(ve|0)>(m|0)){for(Y=d&-15728641,Z=ve;;){if(J=Z,Z=Z+-1|0,Z>>>0>15|(ve|0)<(Z|0)){k=19;break}if((ve|0)!=(Z|0))if(x=Be(Z|0,0,52)|0,x=x|p,T=q()|0|Y,(ve|0)<(J|0))H=x;else{k=Z;do H=Be(7,0,(14-k|0)*3|0)|0,k=k+1|0,x=H|x,T=q()|0|T;while((k|0)<(ve|0));H=x}else H=p,T=d;if(N=Re(H|0,T|0,45)|0,q()|0,!(nr(N&127)|0))x=0;else{N=Re(H|0,T|0,52)|0,q()|0,N=N&15;t:do if(!N)x=0;else for(k=1;;){if(x=Re(H|0,T|0,(15-k|0)*3|0)|0,q()|0,x=x&7,x|0)break t;if(k>>>0<N>>>0)k=k+1|0;else{x=0;break}}while(!1);x=(x|0)==0&1}if(T=Re(p|0,d|0,(15-J|0)*3|0)|0,q()|0,T=T&7,(T|0)==7){w=5,k=42;break}if(x=(x|0)!=0,(T|0)==1&x){w=5,k=42;break}if(H=T+(((T|0)!=0&x)<<31>>31)|0,H|0&&(k=ve-J|0,k=qd(7,0,k,((k|0)<0)<<31>>31)|0,N=q()|0,x?(x=Ds(k|0,N|0,5,0)|0,x=gt(x|0,q()|0,-5,-1)|0,x=Qd(x|0,q()|0,6,0)|0,x=gt(x|0,q()|0,1,0)|0,T=q()|0):(x=k,T=N),J=H+-1|0,J=Ds(k|0,N|0,J|0,((J|0)<0)<<31>>31|0)|0,J=gt(x|0,T|0,J|0,q()|0)|0,H=q()|0,N=v,N=gt(J|0,H|0,f[N>>2]|0,f[N+4>>2]|0)|0,H=q()|0,J=v,f[J>>2]=N,f[J+4>>2]=H),(Z|0)<=(m|0)){k=37;break}}if((k|0)==19)Mt(27795,27122,1367,27158);else if((k|0)==37){$=v,w=f[$+4>>2]|0,$=f[$>>2]|0;break}else if((k|0)==42)return L=me,w|0}else w=0,$=0}else k=33;while(!1);e:do if((k|0)==33)if(Y=v,f[Y>>2]=0,f[Y+4>>2]=0,(ve|0)>(m|0)){for(x=ve;;){if(w=Re(p|0,d|0,(15-x|0)*3|0)|0,q()|0,w=w&7,(w|0)==7){w=5;break}if($=ve-x|0,$=qd(7,0,$,(($|0)<0)<<31>>31)|0,w=Ds($|0,q()|0,w|0,0)|0,$=q()|0,Y=v,$=gt(f[Y>>2]|0,f[Y+4>>2]|0,w|0,$|0)|0,w=q()|0,Y=v,f[Y>>2]=$,f[Y+4>>2]=w,x=x+-1|0,(x|0)<=(m|0))break e}return L=me,w|0}else w=0,$=0;while(!1);return Z1(re,I,ve,he)|0&&Mt(27795,27122,1327,27173),ve=he,he=f[ve+4>>2]|0,((w|0)>-1|(w|0)==-1&$>>>0>4294967295)&((he|0)>(w|0)|((he|0)==(w|0)?(f[ve>>2]|0)>>>0>$>>>0:0))?(ve=0,L=me,ve|0):(Mt(27795,27122,1407,27158),0)}function FAe(p,d,m,v,w,x){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0,x=x|0;var $=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0;if(H=L,L=L+16|0,$=H,w>>>0>15)return x=4,L=H,x|0;if(I=Re(m|0,v|0,52)|0,q()|0,I=I&15,(I|0)>(w|0))return x=12,L=H,x|0;if(Z1(m,v,w,$)|0&&Mt(27795,27122,1327,27173),N=$,k=f[N+4>>2]|0,!(((d|0)>-1|(d|0)==-1&p>>>0>4294967295)&((k|0)>(d|0)|((k|0)==(d|0)?(f[N>>2]|0)>>>0>p>>>0:0))))return x=2,L=H,x|0;N=w-I|0,w=Be(w|0,0,52)|0,T=q()|0|v&-15728641,k=x,f[k>>2]=w|m,f[k+4>>2]=T,k=Re(m|0,v|0,45)|0,q()|0;e:do if(nr(k&127)|0){if(I|0)for($=1;;){if(k=Be(7,0,(15-$|0)*3|0)|0,!((k&m|0)==0&((q()|0)&v|0)==0))break e;if($>>>0<I>>>0)$=$+1|0;else break}if((N|0)<1)return x=0,L=H,x|0;for(k=I^15,v=-1,T=1,$=1;;){I=N-T|0,I=qd(7,0,I,((I|0)<0)<<31>>31)|0,m=q()|0;do if($)if($=Ds(I|0,m|0,5,0)|0,$=gt($|0,q()|0,-5,-1)|0,$=Qd($|0,q()|0,6,0)|0,w=q()|0,(d|0)>(w|0)|(d|0)==(w|0)&p>>>0>$>>>0){d=gt(p|0,d|0,-1,-1)|0,d=Os(d|0,q()|0,$|0,w|0)|0,$=q()|0,J=x,Y=f[J>>2]|0,J=f[J+4>>2]|0,re=(k+v|0)*3|0,Z=Be(7,0,re|0)|0,J=J&~(q()|0),v=Qd(d|0,$|0,I|0,m|0)|0,p=q()|0,w=gt(v|0,p|0,2,0)|0,re=Be(w|0,q()|0,re|0)|0,J=q()|0|J,w=x,f[w>>2]=re|Y&~Z,f[w+4>>2]=J,p=Ds(v|0,p|0,I|0,m|0)|0,p=Os(d|0,$|0,p|0,q()|0)|0,$=0,d=q()|0;break}else{re=x,Z=f[re>>2]|0,re=f[re+4>>2]|0,Y=Be(7,0,(k+v|0)*3|0)|0,re=re&~(q()|0),$=x,f[$>>2]=Z&~Y,f[$+4>>2]=re,$=1;break}else Z=x,w=f[Z>>2]|0,Z=f[Z+4>>2]|0,v=(k+v|0)*3|0,J=Be(7,0,v|0)|0,Z=Z&~(q()|0),re=Qd(p|0,d|0,I|0,m|0)|0,$=q()|0,v=Be(re|0,$|0,v|0)|0,Z=q()|0|Z,Y=x,f[Y>>2]=v|w&~J,f[Y+4>>2]=Z,$=Ds(re|0,$|0,I|0,m|0)|0,p=Os(p|0,d|0,$|0,q()|0)|0,$=0,d=q()|0;while(!1);if((N|0)>(T|0))v=~T,T=T+1|0;else{d=0;break}}return L=H,d|0}while(!1);if((N|0)<1)return re=0,L=H,re|0;for(w=I^15,$=1;;)if(Y=N-$|0,Y=qd(7,0,Y,((Y|0)<0)<<31>>31)|0,re=q()|0,T=x,m=f[T>>2]|0,T=f[T+4>>2]|0,I=(w-$|0)*3|0,v=Be(7,0,I|0)|0,T=T&~(q()|0),J=Qd(p|0,d|0,Y|0,re|0)|0,Z=q()|0,I=Be(J|0,Z|0,I|0)|0,T=q()|0|T,k=x,f[k>>2]=I|m&~v,f[k+4>>2]=T,re=Ds(J|0,Z|0,Y|0,re|0)|0,p=Os(p|0,d|0,re|0,q()|0)|0,d=q()|0,(N|0)<=($|0)){d=0;break}else $=$+1|0;return L=H,d|0}function CL(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0;w=Re(d|0,m|0,52)|0,q()|0,w=w&15,(d|0)==0&(m|0)==0|((v|0)>15|(w|0)>(v|0))?(x=-1,d=-1,m=0,w=0):(d=d9(d,m,w+1|0,v)|0,$=(q()|0)&-15728641,m=Be(v|0,0,52)|0,m=d|m,$=$|(q()|0),d=(Bi(m,$)|0)==0,x=w,d=d?-1:v,w=$),$=p,f[$>>2]=m,f[$+4>>2]=w,f[p+8>>2]=x,f[p+12>>2]=d}function A9(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0;if(w=Re(p|0,d|0,52)|0,q()|0,w=w&15,x=v+8|0,f[x>>2]=w,(p|0)==0&(d|0)==0|((m|0)>15|(w|0)>(m|0))){m=v,f[m>>2]=0,f[m+4>>2]=0,f[x>>2]=-1,f[v+12>>2]=-1;return}if(p=d9(p,d,w+1|0,m)|0,x=(q()|0)&-15728641,w=Be(m|0,0,52)|0,w=p|w,x=x|(q()|0),p=v,f[p>>2]=w,f[p+4>>2]=x,p=v+12|0,Bi(w,x)|0){f[p>>2]=m;return}else{f[p>>2]=-1;return}}function TL(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0;if(m=p,d=f[m>>2]|0,m=f[m+4>>2]|0,!((d|0)==0&(m|0)==0)&&(v=Re(d|0,m|0,52)|0,q()|0,v=v&15,I=Be(1,0,(v^15)*3|0)|0,d=gt(I|0,q()|0,d|0,m|0)|0,m=q()|0,I=p,f[I>>2]=d,f[I+4>>2]=m,I=p+8|0,$=f[I>>2]|0,!((v|0)<($|0)))){for(T=p+12|0,x=v;;){if((x|0)==($|0)){v=5;break}if(k=(x|0)==(f[T>>2]|0),w=(15-x|0)*3|0,v=Re(d|0,m|0,w|0)|0,q()|0,v=v&7,k&((v|0)==1&!0)){v=7;break}if(!((v|0)==7&!0)){v=10;break}if(k=Be(1,0,w|0)|0,d=gt(d|0,m|0,k|0,q()|0)|0,m=q()|0,k=p,f[k>>2]=d,f[k+4>>2]=m,(x|0)>($|0))x=x+-1|0;else{v=10;break}}if((v|0)==5){k=p,f[k>>2]=0,f[k+4>>2]=0,f[I>>2]=-1,f[T>>2]=-1;return}else if((v|0)==7){$=Be(1,0,w|0)|0,$=gt(d|0,m|0,$|0,q()|0)|0,I=q()|0,k=p,f[k>>2]=$,f[k+4>>2]=I,f[T>>2]=x+-1;return}else if((v|0)==10)return}}function Y1(p){p=+p;var d=0;return d=p<0?p+6.283185307179586:p,+(p>=6.283185307179586?d+-6.283185307179586:d)}function ry(p,d){return p=p|0,d=d|0,+qt(+(+j[p>>3]-+j[d>>3]))<17453292519943298e-27?(d=+qt(+(+j[p+8>>3]-+j[d+8>>3]))<17453292519943298e-27,d|0):(d=0,d|0)}function qo(p,d){switch(p=+p,d=d|0,d|0){case 1:{p=p<0?p+6.283185307179586:p;break}case 2:{p=p>0?p+-6.283185307179586:p;break}}return+p}function zAe(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0;return w=+j[d>>3],v=+j[p>>3],x=+Wt(+((w-v)*.5)),m=+Wt(+((+j[d+8>>3]-+j[p+8>>3])*.5)),m=x*x+m*(+gi(+w)*+gi(+v)*m),+(+fn(+ +ui(+m),+ +ui(+(1-m)))*2)}function X1(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0;return w=+j[d>>3],v=+j[p>>3],x=+Wt(+((w-v)*.5)),m=+Wt(+((+j[d+8>>3]-+j[p+8>>3])*.5)),m=x*x+m*(+gi(+w)*+gi(+v)*m),+(+fn(+ +ui(+m),+ +ui(+(1-m)))*2*6371.007180918475)}function BAe(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0;return w=+j[d>>3],v=+j[p>>3],x=+Wt(+((w-v)*.5)),m=+Wt(+((+j[d+8>>3]-+j[p+8>>3])*.5)),m=x*x+m*(+gi(+w)*+gi(+v)*m),+(+fn(+ +ui(+m),+ +ui(+(1-m)))*2*6371.007180918475*1e3)}function jAe(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0;return x=+j[d>>3],v=+gi(+x),w=+j[d+8>>3]-+j[p+8>>3],$=v*+Wt(+w),m=+j[p>>3],+ +fn(+$,+(+Wt(+x)*+gi(+m)-+gi(+w)*(v*+Wt(+m))))}function UAe(p,d,m,v){p=p|0,d=+d,m=+m,v=v|0;var w=0,x=0,$=0,I=0;if(m<1e-16){f[v>>2]=f[p>>2],f[v+4>>2]=f[p+4>>2],f[v+8>>2]=f[p+8>>2],f[v+12>>2]=f[p+12>>2];return}x=d<0?d+6.283185307179586:d,x=d>=6.283185307179586?x+-6.283185307179586:x;do if(x<1e-16)d=+j[p>>3]+m,j[v>>3]=d,w=v;else{if(w=+qt(+(x+-3.141592653589793))<1e-16,d=+j[p>>3],w){d=d-m,j[v>>3]=d,w=v;break}if($=+gi(+m),m=+Wt(+m),d=$*+Wt(+d)+ +gi(+x)*(m*+gi(+d)),d=d>1?1:d,d=+q1(+(d<-1?-1:d)),j[v>>3]=d,+qt(+(d+-1.5707963267948966))<1e-16){j[v>>3]=1.5707963267948966,j[v+8>>3]=0;return}if(+qt(+(d+1.5707963267948966))<1e-16){j[v>>3]=-1.5707963267948966,j[v+8>>3]=0;return}if(I=1/+gi(+d),x=m*+Wt(+x)*I,m=+j[p>>3],d=I*(($-+Wt(+d)*+Wt(+m))/+gi(+m)),$=x>1?1:x,d=d>1?1:d,d=+j[p+8>>3]+ +fn(+($<-1?-1:$),+(d<-1?-1:d)),d>3.141592653589793)do d=d+-6.283185307179586;while(d>3.141592653589793);if(d<-3.141592653589793)do d=d+6.283185307179586;while(d<-3.141592653589793);j[v+8>>3]=d;return}while(!1);if(+qt(+(d+-1.5707963267948966))<1e-16){j[w>>3]=1.5707963267948966,j[v+8>>3]=0;return}if(+qt(+(d+1.5707963267948966))<1e-16){j[w>>3]=-1.5707963267948966,j[v+8>>3]=0;return}if(d=+j[p+8>>3],d>3.141592653589793)do d=d+-6.283185307179586;while(d>3.141592653589793);if(d<-3.141592653589793)do d=d+6.283185307179586;while(d<-3.141592653589793);j[v+8>>3]=d}function m9(p,d){return p=p|0,d=d|0,p>>>0>15?(d=4,d|0):(j[d>>3]=+j[20656+(p<<3)>>3],d=0,d|0)}function VAe(p,d){return p=p|0,d=d|0,p>>>0>15?(d=4,d|0):(j[d>>3]=+j[20784+(p<<3)>>3],d=0,d|0)}function GAe(p,d){return p=p|0,d=d|0,p>>>0>15?(d=4,d|0):(j[d>>3]=+j[20912+(p<<3)>>3],d=0,d|0)}function HAe(p,d){return p=p|0,d=d|0,p>>>0>15?(d=4,d|0):(j[d>>3]=+j[21040+(p<<3)>>3],d=0,d|0)}function g$(p,d){p=p|0,d=d|0;var m=0;return p>>>0>15?(d=4,d|0):(m=qd(7,0,p,((p|0)<0)<<31>>31)|0,m=Ds(m|0,q()|0,120,0)|0,p=q()|0,f[d>>2]=m|2,f[d+4>>2]=p,d=0,d|0)}function y9(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0;return J=+j[d>>3],N=+j[p>>3],T=+Wt(+((J-N)*.5)),x=+j[d+8>>3],k=+j[p+8>>3],$=+Wt(+((x-k)*.5)),I=+gi(+N),H=+gi(+J),$=T*T+$*(H*I*$),$=+fn(+ +ui(+$),+ +ui(+(1-$)))*2,T=+j[m>>3],J=+Wt(+((T-J)*.5)),v=+j[m+8>>3],x=+Wt(+((v-x)*.5)),w=+gi(+T),x=J*J+x*(H*w*x),x=+fn(+ +ui(+x),+ +ui(+(1-x)))*2,T=+Wt(+((N-T)*.5)),v=+Wt(+((k-v)*.5)),v=T*T+v*(I*w*v),v=+fn(+ +ui(+v),+ +ui(+(1-v)))*2,w=($+x+v)*.5,+(+W1(+ +ui(+(+fo(+(w*.5))*+fo(+((w-$)*.5))*+fo(+((w-x)*.5))*+fo(+((w-v)*.5)))))*4)}function ML(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0;if(I=L,L=L+192|0,x=I+168|0,$=I,w=nA(p,d,x)|0,w|0)return m=w,L=I,m|0;if(iy(p,d,$)|0&&Mt(27795,27190,415,27199),d=f[$>>2]|0,(d|0)>0){if(v=+y9($+8|0,$+8+(((d|0)!=1&1)<<4)|0,x)+0,(d|0)!=1){p=1;do w=p,p=p+1|0,v=v+ +y9($+8+(w<<4)|0,$+8+(((p|0)%(d|0)|0)<<4)|0,x);while((p|0)<(d|0))}}else v=0;return j[m>>3]=v,m=0,L=I,m|0}function qAe(p,d,m){return p=p|0,d=d|0,m=m|0,p=ML(p,d,m)|0,p|0||(j[m>>3]=+j[m>>3]*6371.007180918475*6371.007180918475),p|0}function WAe(p,d,m){return p=p|0,d=d|0,m=m|0,p=ML(p,d,m)|0,p|0||(j[m>>3]=+j[m>>3]*6371.007180918475*6371.007180918475*1e3*1e3),p|0}function QAe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;if(I=L,L=L+176|0,$=I,p=y$(p,d,$)|0,p|0)return $=p,L=I,$|0;if(j[m>>3]=0,p=f[$>>2]|0,(p|0)<=1)return $=0,L=I,$|0;d=p+-1|0,p=0,v=+j[$+8>>3],w=+j[$+16>>3],x=0;do p=p+1|0,k=v,v=+j[$+8+(p<<4)>>3],N=+Wt(+((v-k)*.5)),T=w,w=+j[$+8+(p<<4)+8>>3],T=+Wt(+((w-T)*.5)),T=N*N+T*(+gi(+v)*+gi(+k)*T),x=x+ +fn(+ +ui(+T),+ +ui(+(1-T)))*2;while((p|0)<(d|0));return j[m>>3]=x,$=0,L=I,$|0}function JAe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;if(I=L,L=L+176|0,$=I,p=y$(p,d,$)|0,p|0)return $=p,x=+j[m>>3],x=x*6371.007180918475,j[m>>3]=x,L=I,$|0;if(j[m>>3]=0,p=f[$>>2]|0,(p|0)<=1)return $=0,x=0,x=x*6371.007180918475,j[m>>3]=x,L=I,$|0;d=p+-1|0,p=0,v=+j[$+8>>3],w=+j[$+16>>3],x=0;do p=p+1|0,k=v,v=+j[$+8+(p<<4)>>3],N=+Wt(+((v-k)*.5)),T=w,w=+j[$+8+(p<<4)+8>>3],T=+Wt(+((w-T)*.5)),T=N*N+T*(+gi(+k)*+gi(+v)*T),x=x+ +fn(+ +ui(+T),+ +ui(+(1-T)))*2;while((p|0)!=(d|0));return j[m>>3]=x,$=0,N=x,N=N*6371.007180918475,j[m>>3]=N,L=I,$|0}function ZAe(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;if(I=L,L=L+176|0,$=I,p=y$(p,d,$)|0,p|0)return $=p,x=+j[m>>3],x=x*6371.007180918475,x=x*1e3,j[m>>3]=x,L=I,$|0;if(j[m>>3]=0,p=f[$>>2]|0,(p|0)<=1)return $=0,x=0,x=x*6371.007180918475,x=x*1e3,j[m>>3]=x,L=I,$|0;d=p+-1|0,p=0,v=+j[$+8>>3],w=+j[$+16>>3],x=0;do p=p+1|0,k=v,v=+j[$+8+(p<<4)>>3],N=+Wt(+((v-k)*.5)),T=w,w=+j[$+8+(p<<4)+8>>3],T=+Wt(+((w-T)*.5)),T=N*N+T*(+gi(+k)*+gi(+v)*T),x=x+ +fn(+ +ui(+T),+ +ui(+(1-T)))*2;while((p|0)!=(d|0));return j[m>>3]=x,$=0,N=x,N=N*6371.007180918475,N=N*1e3,j[m>>3]=N,L=I,$|0}function YAe(p){p=p|0;var d=0,m=0,v=0;return d=mo(1,12)|0,d||Mt(27280,27235,49,27293),m=p+4|0,v=f[m>>2]|0,v|0?(v=v+8|0,f[v>>2]=d,f[m>>2]=d,d|0):(f[p>>2]|0&&Mt(27310,27235,61,27333),v=p,f[v>>2]=d,f[m>>2]=d,d|0)}function XAe(p,d){p=p|0,d=d|0;var m=0,v=0;return v=Ac(24)|0,v||Mt(27347,27235,78,27361),f[v>>2]=f[d>>2],f[v+4>>2]=f[d+4>>2],f[v+8>>2]=f[d+8>>2],f[v+12>>2]=f[d+12>>2],f[v+16>>2]=0,d=p+4|0,m=f[d>>2]|0,m|0?(f[m+16>>2]=v,f[d>>2]=v,v|0):(f[p>>2]|0&&Mt(27376,27235,82,27361),f[p>>2]=v,f[d>>2]=v,v|0)}function g9(p){p=p|0;var d=0,m=0,v=0,w=0;if(p)for(v=1;;){if(d=f[p>>2]|0,d|0)do{if(m=f[d>>2]|0,m|0)do w=m,m=f[m+16>>2]|0,bt(w);while((m|0)!=0);w=d,d=f[d+8>>2]|0,bt(w)}while((d|0)!=0);if(d=p,p=f[p+8>>2]|0,v||bt(d),p)v=0;else break}}function KAe(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0,pt=0,ot=0,Ut=0,Vt=0,ni=0,Lt=0,ft=0,je=0,Xt=0,Oi=0,Qt=0;if(w=p+8|0,f[w>>2]|0)return Qt=1,Qt|0;if(v=f[p>>2]|0,!v)return Qt=0,Qt|0;d=v,m=0;do m=m+1|0,d=f[d+8>>2]|0;while((d|0)!=0);if(m>>>0<2)return Qt=0,Qt|0;Xt=Ac(m<<2)|0,Xt||Mt(27396,27235,317,27415),je=Ac(m<<5)|0,je||Mt(27437,27235,321,27415),f[p>>2]=0,pt=p+4|0,f[pt>>2]=0,f[w>>2]=0,m=0,ft=0,Ve=0,H=0;e:for(;;){if(N=f[v>>2]|0,N){x=0,$=N;do{if(T=+j[$+8>>3],d=$,$=f[$+16>>2]|0,k=($|0)==0,w=k?N:$,I=+j[w+8>>3],+qt(+(T-I))>3.141592653589793){Qt=14;break}x=x+(I-T)*(+j[d>>3]+ +j[w>>3])}while(!k);if((Qt|0)==14){Qt=0,x=0,d=N;do ne=+j[d+8>>3],Lt=d+16|0,ni=f[Lt>>2]|0,ni=(ni|0)==0?N:ni,fe=+j[ni+8>>3],x=x+(+j[d>>3]+ +j[ni>>3])*((fe<0?fe+6.283185307179586:fe)-(ne<0?ne+6.283185307179586:ne)),d=f[((d|0)==0?v:Lt)>>2]|0;while((d|0)!=0)}x>0?(f[Xt+(ft<<2)>>2]=v,ft=ft+1|0,w=Ve,d=H):Qt=19}else Qt=19;if((Qt|0)==19){Qt=0;do if(m){if(d=m+8|0,f[d>>2]|0){Qt=21;break e}if(m=mo(1,12)|0,!m){Qt=23;break e}f[d>>2]=m,w=m+4|0,$=m,d=H}else if(H){w=pt,$=H+8|0,d=v,m=p;break}else if(f[p>>2]|0){Qt=27;break e}else{w=pt,$=p,d=v,m=p;break}while(!1);if(f[$>>2]=v,f[w>>2]=v,$=je+(Ve<<5)|0,k=f[v>>2]|0,k){for(N=je+(Ve<<5)+8|0,j[N>>3]=17976931348623157e292,H=je+(Ve<<5)+24|0,j[H>>3]=17976931348623157e292,j[$>>3]=-17976931348623157e292,J=je+(Ve<<5)+16|0,j[J>>3]=-17976931348623157e292,ve=17976931348623157e292,me=-17976931348623157e292,w=0,Z=k,T=17976931348623157e292,re=17976931348623157e292,he=-17976931348623157e292,I=-17976931348623157e292;x=+j[Z>>3],ne=+j[Z+8>>3],Z=f[Z+16>>2]|0,Y=(Z|0)==0,fe=+j[(Y?k:Z)+8>>3],x<T&&(j[N>>3]=x,T=x),ne<re&&(j[H>>3]=ne,re=ne),x>he?j[$>>3]=x:x=he,ne>I&&(j[J>>3]=ne,I=ne),ve=ne>0&ne<ve?ne:ve,me=ne<0&ne>me?ne:me,w=w|+qt(+(ne-fe))>3.141592653589793,!Y;)he=x;w&&(j[J>>3]=me,j[H>>3]=ve)}else f[$>>2]=0,f[$+4>>2]=0,f[$+8>>2]=0,f[$+12>>2]=0,f[$+16>>2]=0,f[$+20>>2]=0,f[$+24>>2]=0,f[$+28>>2]=0;w=Ve+1|0}if(Lt=v+8|0,v=f[Lt>>2]|0,f[Lt>>2]=0,v)Ve=w,H=d;else{Qt=45;break}}if((Qt|0)==21)Mt(27213,27235,35,27247);else if((Qt|0)==23)Mt(27267,27235,37,27247);else if((Qt|0)==27)Mt(27310,27235,61,27333);else if((Qt|0)==45){e:do if((ft|0)>0){for(Lt=(w|0)==0,Vt=w<<2,ni=(p|0)==0,Ut=0,d=0;;){if(ot=f[Xt+(Ut<<2)>>2]|0,Lt)Qt=73;else{if(Ve=Ac(Vt)|0,!Ve){Qt=50;break}if(pt=Ac(Vt)|0,!pt){Qt=52;break}t:do if(ni)m=0;else{for(w=0,m=0,$=p;v=je+(w<<5)|0,v9(f[$>>2]|0,v,f[ot>>2]|0)|0?(f[Ve+(m<<2)>>2]=$,f[pt+(m<<2)>>2]=v,Y=m+1|0):Y=m,$=f[$+8>>2]|0,$;)w=w+1|0,m=Y;if((Y|0)>0)if(v=f[Ve>>2]|0,(Y|0)==1)m=v;else for(J=0,Z=-1,m=v,H=v;;){for(k=f[H>>2]|0,v=0,$=0;w=f[f[Ve+($<<2)>>2]>>2]|0,(w|0)==(k|0)?N=v:N=v+((v9(w,f[pt+($<<2)>>2]|0,f[k>>2]|0)|0)&1)|0,$=$+1|0,($|0)!=(Y|0);)v=N;if(w=(N|0)>(Z|0),m=w?H:m,v=J+1|0,(v|0)==(Y|0))break t;J=v,Z=w?N:Z,H=f[Ve+(v<<2)>>2]|0}else m=0}while(!1);if(bt(Ve),bt(pt),m){if(w=m+4|0,v=f[w>>2]|0,v)m=v+8|0;else if(f[m>>2]|0){Qt=70;break}f[m>>2]=ot,f[w>>2]=ot}else Qt=73}if((Qt|0)==73){if(Qt=0,d=f[ot>>2]|0,d|0)do pt=d,d=f[d+16>>2]|0,bt(pt);while((d|0)!=0);bt(ot),d=1}if(Ut=Ut+1|0,(Ut|0)>=(ft|0)){Oi=d;break e}}(Qt|0)==50?Mt(27452,27235,249,27471):(Qt|0)==52?Mt(27490,27235,252,27471):(Qt|0)==70&&Mt(27310,27235,61,27333)}else Oi=0;while(!1);return bt(Xt),bt(je),Qt=Oi,Qt|0}return 0}function v9(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;if(!(fL(d,m)|0)||(d=Yj(d)|0,v=+j[m>>3],w=+j[m+8>>3],w=d&w<0?w+6.283185307179586:w,p=f[p>>2]|0,!p))return p=0,p|0;if(d){d=0,k=w,m=p;e:for(;;){for(;$=+j[m>>3],w=+j[m+8>>3],m=m+16|0,N=f[m>>2]|0,N=(N|0)==0?p:N,x=+j[N>>3],I=+j[N+8>>3],$>x?(T=$,$=I):(T=x,x=$,$=w,w=I),v=v==x|v==T?v+2220446049250313e-31:v,!!(v<x|v>T);)if(m=f[m>>2]|0,!m){m=22;break e}if(I=$<0?$+6.283185307179586:$,$=w<0?w+6.283185307179586:w,k=I==k|$==k?k+-2220446049250313e-31:k,T=I+($-I)*((v-x)/(T-x)),(T<0?T+6.283185307179586:T)>k&&(d=d^1),m=f[m>>2]|0,!m){m=22;break}}if((m|0)==22)return d|0}else{d=0,k=w,m=p;e:for(;;){for(;$=+j[m>>3],w=+j[m+8>>3],m=m+16|0,N=f[m>>2]|0,N=(N|0)==0?p:N,x=+j[N>>3],I=+j[N+8>>3],$>x?(T=$,$=I):(T=x,x=$,$=w,w=I),v=v==x|v==T?v+2220446049250313e-31:v,!!(v<x|v>T);)if(m=f[m>>2]|0,!m){m=22;break e}if(k=$==k|w==k?k+-2220446049250313e-31:k,$+(w-$)*((v-x)/(T-x))>k&&(d=d^1),m=f[m>>2]|0,!m){m=22;break}}if((m|0)==22)return d|0}return 0}function sh(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0;if(me=L,L=L+32|0,ve=me+16|0,he=me,x=Re(p|0,d|0,52)|0,q()|0,x=x&15,Z=Re(m|0,v|0,52)|0,q()|0,(x|0)!=(Z&15|0))return ve=12,L=me,ve|0;if(k=Re(p|0,d|0,45)|0,q()|0,k=k&127,N=Re(m|0,v|0,45)|0,q()|0,N=N&127,k>>>0>121|N>>>0>121)return ve=5,L=me,ve|0;if(Z=(k|0)!=(N|0),Z){if(I=pL(k,N)|0,(I|0)==7)return ve=1,L=me,ve|0;T=pL(N,k)|0,(T|0)==7?Mt(27514,27538,161,27548):(Y=I,$=T)}else Y=0,$=0;H=nr(k)|0,J=nr(N)|0,f[ve>>2]=0,f[ve+4>>2]=0,f[ve+8>>2]=0,f[ve+12>>2]=0;do if(Y){if(N=f[4272+(k*28|0)+(Y<<2)>>2]|0,I=(N|0)>0,J)if(I){k=0,T=m,I=v;do T=LAe(T,I)|0,I=q()|0,$=Hd($)|0,($|0)==1&&($=Hd(1)|0),k=k+1|0;while((k|0)!=(N|0));N=$,k=T,T=I}else N=$,k=m,T=v;else if(I){k=0,T=m,I=v;do T=xL(T,I)|0,I=q()|0,$=Hd($)|0,k=k+1|0;while((k|0)!=(N|0));N=$,k=T,T=I}else N=$,k=m,T=v;if(EL(k,T,ve)|0,Z||Mt(27563,27538,191,27548),I=(H|0)!=0,$=(J|0)!=0,I&$&&Mt(27590,27538,192,27548),I){if($=Ao(p,d)|0,($|0)==7){x=5;break}if(Le[22e3+($*7|0)+Y>>0]|0){x=1;break}T=f[21168+($*28|0)+(Y<<2)>>2]|0,k=T}else if($){if($=Ao(k,T)|0,($|0)==7){x=5;break}if(Le[22e3+($*7|0)+N>>0]|0){x=1;break}k=0,T=f[21168+(N*28|0)+($<<2)>>2]|0}else k=0,T=0;if((k|T|0)<0)x=5;else{if((T|0)>0){I=ve+4|0,$=0;do m$(I),$=$+1|0;while(($|0)!=(T|0))}if(f[he>>2]=0,f[he+4>>2]=0,f[he+8>>2]=0,r9(he,Y),x|0)for(;Ma(x)|0?A$(he):iA(he),(x|0)>1;)x=x+-1|0;if((k|0)>0){x=0;do m$(he),x=x+1|0;while((x|0)!=(k|0))}re=ve+4|0,Vn(re,he,re),An(re),re=51}}else if(EL(m,v,ve)|0,(H|0)!=0&(J|0)!=0)if((N|0)!=(k|0)&&Mt(27621,27538,261,27548),$=Ao(p,d)|0,x=Ao(m,v)|0,($|0)==7|(x|0)==7)x=5;else if(Le[22e3+($*7|0)+x>>0]|0)x=1;else if($=f[21168+($*28|0)+(x<<2)>>2]|0,($|0)>0){I=ve+4|0,x=0;do m$(I),x=x+1|0;while((x|0)!=($|0));re=51}else re=51;else re=51;while(!1);return(re|0)==51&&(x=ve+4|0,f[w>>2]=f[x>>2],f[w+4>>2]=f[x+4>>2],f[w+8>>2]=f[x+8>>2],x=0),ve=x,L=me,ve|0}function b9(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0;if(re=L,L=L+48|0,k=re+36|0,$=re+24|0,I=re+12|0,T=re,w=Re(p|0,d|0,52)|0,q()|0,w=w&15,J=Re(p|0,d|0,45)|0,q()|0,J=J&127,J>>>0>121)return v=5,L=re,v|0;if(N=nr(J)|0,Be(w|0,0,52)|0,he=q()|0|134225919,x=v,f[x>>2]=-1,f[x+4>>2]=he,!w)return w=f$(m)|0,(w|0)==7||(w=dL(J,w)|0,(w|0)==127)?(he=1,L=re,he|0):(Z=Be(w|0,0,45)|0,Y=q()|0,J=v,Y=f[J+4>>2]&-1040385|Y,he=v,f[he>>2]=f[J>>2]|Z,f[he+4>>2]=Y,he=0,L=re,he|0);for(f[k>>2]=f[m>>2],f[k+4>>2]=f[m+4>>2],f[k+8>>2]=f[m+8>>2],m=w;;){if(x=m,m=m+-1|0,f[$>>2]=f[k>>2],f[$+4>>2]=f[k+4>>2],f[$+8>>2]=f[k+8>>2],Ma(x)|0){if(w=aAe(k)|0,w|0){m=13;break}f[I>>2]=f[k>>2],f[I+4>>2]=f[k+4>>2],f[I+8>>2]=f[k+8>>2],A$(I)}else{if(w=lAe(k)|0,w|0){m=13;break}f[I>>2]=f[k>>2],f[I+4>>2]=f[k+4>>2],f[I+8>>2]=f[k+8>>2],iA(I)}if(mL($,I,T),An(T),w=v,me=f[w>>2]|0,w=f[w+4>>2]|0,fe=(15-x|0)*3|0,ve=Be(7,0,fe|0)|0,w=w&~(q()|0),fe=Be(f$(T)|0,0,fe|0)|0,w=q()|0|w,he=v,f[he>>2]=fe|me&~ve,f[he+4>>2]=w,(x|0)<=1){m=14;break}}e:do if((m|0)!=13&&(m|0)==14)if((f[k>>2]|0)<=1&&(f[k+4>>2]|0)<=1&&(f[k+8>>2]|0)<=1){m=f$(k)|0,w=dL(J,m)|0,(w|0)==127?T=0:T=nr(w)|0;t:do if(m){if(N){if(w=Ao(p,d)|0,(w|0)==7){w=5;break e}if(x=f[21376+(w*28|0)+(m<<2)>>2]|0,(x|0)>0){w=m,m=0;do w=rA(w)|0,m=m+1|0;while((m|0)!=(x|0))}else w=m;if((w|0)==1){w=9;break e}m=dL(J,w)|0,(m|0)==127&&Mt(27648,27538,411,27678),nr(m)|0?Mt(27693,27538,412,27678):(Y=m,Z=x,H=w)}else Y=w,Z=0,H=m;if(I=f[4272+(J*28|0)+(H<<2)>>2]|0,(I|0)<=-1&&Mt(27724,27538,419,27678),!T){if((Z|0)<0){w=5;break e}if(Z|0){x=v,w=0,m=f[x>>2]|0,x=f[x+4>>2]|0;do m=sA(m,x)|0,x=q()|0,fe=v,f[fe>>2]=m,f[fe+4>>2]=x,w=w+1|0;while((w|0)<(Z|0))}if((I|0)<=0){w=Y,m=58;break}for(x=v,w=0,m=f[x>>2]|0,x=f[x+4>>2]|0;;)if(m=sA(m,x)|0,x=q()|0,fe=v,f[fe>>2]=m,f[fe+4>>2]=x,w=w+1|0,(w|0)==(I|0)){w=Y,m=58;break t}}if($=pL(Y,J)|0,($|0)==7&&Mt(27514,27538,428,27678),w=v,m=f[w>>2]|0,w=f[w+4>>2]|0,(I|0)>0){x=0;do m=sA(m,w)|0,w=q()|0,fe=v,f[fe>>2]=m,f[fe+4>>2]=w,x=x+1|0;while((x|0)!=(I|0))}if(w=Ao(m,w)|0,(w|0)==7&&Mt(27795,27538,440,27678),m=hL(Y)|0,m=f[(m?21792:21584)+($*28|0)+(w<<2)>>2]|0,(m|0)<0&&Mt(27795,27538,454,27678),!m)w=Y,m=58;else{$=v,w=0,x=f[$>>2]|0,$=f[$+4>>2]|0;do x=SL(x,$)|0,$=q()|0,fe=v,f[fe>>2]=x,f[fe+4>>2]=$,w=w+1|0;while((w|0)<(m|0));w=Y,m=58}}else if((N|0)!=0&(T|0)!=0){if(m=Ao(p,d)|0,x=v,x=Ao(f[x>>2]|0,f[x+4>>2]|0)|0,(m|0)==7|(x|0)==7){w=5;break e}if(x=f[21376+(m*28|0)+(x<<2)>>2]|0,(x|0)<0){w=5;break e}if(!x)m=59;else{I=v,m=0,$=f[I>>2]|0,I=f[I+4>>2]|0;do $=sA($,I)|0,I=q()|0,fe=v,f[fe>>2]=$,f[fe+4>>2]=I,m=m+1|0;while((m|0)<(x|0));m=58}}else m=58;while(!1);if((m|0)==58&&T&&(m=59),(m|0)==59&&(fe=v,(Ao(f[fe>>2]|0,f[fe+4>>2]|0)|0)==1)){w=9;break}fe=v,ve=f[fe>>2]|0,fe=f[fe+4>>2]&-1040385,me=Be(w|0,0,45)|0,fe=fe|(q()|0),w=v,f[w>>2]=ve|me,f[w+4>>2]=fe,w=0}else w=1;while(!1);return fe=w,L=re,fe|0}function eme(p,d,m,v,w,x){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0,x=x|0;var $=0,I=0;return I=L,L=L+16|0,$=I,w?p=15:(p=sh(p,d,m,v,$)|0,p||(uAe($,x),p=0)),L=I,p|0}function tme(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0;return $=L,L=L+16|0,x=$,v?m=15:(m=hAe(m,x)|0,m||(m=b9(p,d,x,w)|0)),L=$,m|0}function ime(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0;return T=L,L=L+32|0,$=T+12|0,I=T,x=sh(p,d,p,d,$)|0,x|0?(I=x,L=T,I|0):(p=sh(p,d,m,v,I)|0,p|0?(I=p,L=T,I|0):($=yL($,I)|0,I=w,f[I>>2]=$,f[I+4>>2]=(($|0)<0)<<31>>31,I=0,L=T,I|0))}function rme(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0;return T=L,L=L+32|0,$=T+12|0,I=T,x=sh(p,d,p,d,$)|0,!x&&(x=sh(p,d,m,v,I)|0,!x)?(v=yL($,I)|0,v=gt(v|0,((v|0)<0)<<31>>31|0,1,0)|0,$=q()|0,I=w,f[I>>2]=v,f[I+4>>2]=$,I=0,L=T,I|0):(I=x,L=T,I|0)}function sme(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0,pt=0,ot=0,Ut=0;if(ot=L,L=L+48|0,Ve=ot+24|0,$=ot+12|0,pt=ot,x=sh(p,d,p,d,Ve)|0,!x&&(x=sh(p,d,m,v,$)|0,!x)){fe=yL(Ve,$)|0,ne=((fe|0)<0)<<31>>31,f[Ve>>2]=0,f[Ve+4>>2]=0,f[Ve+8>>2]=0,f[$>>2]=0,f[$+4>>2]=0,f[$+8>>2]=0,sh(p,d,p,d,Ve)|0&&Mt(27795,27538,692,27747),sh(p,d,m,v,$)|0&&Mt(27795,27538,697,27747),a9(Ve),a9($),N=(fe|0)==0?0:1/+(fe|0),m=f[Ve>>2]|0,re=N*+((f[$>>2]|0)-m|0),he=Ve+4|0,v=f[he>>2]|0,ve=N*+((f[$+4>>2]|0)-v|0),me=Ve+8|0,x=f[me>>2]|0,N=N*+((f[$+8>>2]|0)-x|0),f[pt>>2]=m,H=pt+4|0,f[H>>2]=v,J=pt+8|0,f[J>>2]=x;e:do if((fe|0)<0)x=0;else for(Z=0,Y=0;;){T=+(Y>>>0)+4294967296*+(Z|0),Ut=re*T+ +(m|0),I=ve*T+ +(v|0),T=N*T+ +(x|0),m=~~+_$(+Ut),$=~~+_$(+I),x=~~+_$(+T),Ut=+qt(+(+(m|0)-Ut)),I=+qt(+(+($|0)-I)),T=+qt(+(+(x|0)-T));do if(Ut>I&Ut>T)m=0-($+x)|0,v=$;else if(k=0-m|0,I>T){v=k-x|0;break}else{v=$,x=k-$|0;break}while(!1);if(f[pt>>2]=m,f[H>>2]=v,f[J>>2]=x,dAe(pt),x=b9(p,d,pt,w+(Y<<3)|0)|0,x|0)break e;if(!((Z|0)<(ne|0)|(Z|0)==(ne|0)&Y>>>0<fe>>>0)){x=0;break e}m=gt(Y|0,Z|0,1,0)|0,v=q()|0,Z=v,Y=m,m=f[Ve>>2]|0,v=f[he>>2]|0,x=f[me>>2]|0}while(!1);return pt=x,L=ot,pt|0}return pt=x,L=ot,pt|0}function qd(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0;if((m|0)==0&(v|0)==0)return w=0,x=1,zt(w|0),x|0;x=p,w=d,p=1,d=0;do $=(m&1|0)==0&!0,p=Ds(($?1:x)|0,($?0:w)|0,p|0,d|0)|0,d=q()|0,m=L9(m|0,v|0,1)|0,v=q()|0,x=Ds(x|0,w|0,x|0,w|0)|0,w=q()|0;while(!((m|0)==0&(v|0)==0));return zt(d|0),p|0}function kL(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0;I=L,L=L+16|0,x=I,$=Re(p|0,d|0,52)|0,q()|0,$=$&15;do if($){if(w=nA(p,d,x)|0,!w){k=+j[x>>3],T=1/+gi(+k),N=+j[25968+($<<3)>>3],j[m>>3]=k+N,j[m+8>>3]=k-N,k=+j[x+8>>3],T=N*T,j[m+16>>3]=T+k,j[m+24>>3]=k-T;break}return $=w,L=I,$|0}else{if(w=Re(p|0,d|0,45)|0,q()|0,w=w&127,w>>>0>121)return $=5,L=I,$|0;x=22064+(w<<5)|0,f[m>>2]=f[x>>2],f[m+4>>2]=f[x+4>>2],f[m+8>>2]=f[x+8>>2],f[m+12>>2]=f[x+12>>2],f[m+16>>2]=f[x+16>>2],f[m+20>>2]=f[x+20>>2],f[m+24>>2]=f[x+24>>2],f[m+28>>2]=f[x+28>>2];break}while(!1);return sAe(m,v?1.4:1.1),v=26096+($<<3)|0,(f[v>>2]|0)==(p|0)&&(f[v+4>>2]|0)==(d|0)&&(j[m>>3]=1.5707963267948966),$=26224+($<<3)|0,(f[$>>2]|0)==(p|0)&&(f[$+4>>2]|0)==(d|0)&&(j[m+8>>3]=-1.5707963267948966),+j[m>>3]!=1.5707963267948966&&+j[m+8>>3]!=-1.5707963267948966?($=0,L=I,$|0):(j[m+16>>3]=3.141592653589793,j[m+24>>3]=-3.141592653589793,$=0,L=I,$|0)}function nme(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0;k=L,L=L+48|0,$=k+32|0,x=k+40|0,I=k,wL($,0,0,0),T=f[$>>2]|0,$=f[$+4>>2]|0;do if(m>>>0<=15){if(w=ew(v)|0,w|0){v=I,f[v>>2]=0,f[v+4>>2]=0,f[I+8>>2]=w,f[I+12>>2]=-1,v=I+16|0,T=I+29|0,f[v>>2]=0,f[v+4>>2]=0,f[v+8>>2]=0,Le[v+12>>0]=0,Le[T>>0]=Le[x>>0]|0,Le[T+1>>0]=Le[x+1>>0]|0,Le[T+2>>0]=Le[x+2>>0]|0;break}if(w=mo((f[d+8>>2]|0)+1|0,32)|0,w){PL(d,w),N=I,f[N>>2]=T,f[N+4>>2]=$,f[I+8>>2]=0,f[I+12>>2]=m,f[I+16>>2]=v,f[I+20>>2]=d,f[I+24>>2]=w,Le[I+28>>0]=0,T=I+29|0,Le[T>>0]=Le[x>>0]|0,Le[T+1>>0]=Le[x+1>>0]|0,Le[T+2>>0]=Le[x+2>>0]|0;break}else{v=I,f[v>>2]=0,f[v+4>>2]=0,f[I+8>>2]=13,f[I+12>>2]=-1,v=I+16|0,T=I+29|0,f[v>>2]=0,f[v+4>>2]=0,f[v+8>>2]=0,Le[v+12>>0]=0,Le[T>>0]=Le[x>>0]|0,Le[T+1>>0]=Le[x+1>>0]|0,Le[T+2>>0]=Le[x+2>>0]|0;break}}else T=I,f[T>>2]=0,f[T+4>>2]=0,f[I+8>>2]=4,f[I+12>>2]=-1,T=I+16|0,N=I+29|0,f[T>>2]=0,f[T+4>>2]=0,f[T+8>>2]=0,Le[T+12>>0]=0,Le[N>>0]=Le[x>>0]|0,Le[N+1>>0]=Le[x+1>>0]|0,Le[N+2>>0]=Le[x+2>>0]|0;while(!1);v$(I),f[p>>2]=f[I>>2],f[p+4>>2]=f[I+4>>2],f[p+8>>2]=f[I+8>>2],f[p+12>>2]=f[I+12>>2],f[p+16>>2]=f[I+16>>2],f[p+20>>2]=f[I+20>>2],f[p+24>>2]=f[I+24>>2],f[p+28>>2]=f[I+28>>2],L=k}function v$(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0;if(ne=L,L=L+336|0,Z=ne+168|0,Y=ne,v=p,m=f[v>>2]|0,v=f[v+4>>2]|0,(m|0)==0&(v|0)==0){L=ne;return}if(d=p+28|0,Le[d>>0]|0?(m=w9(m,v)|0,v=q()|0):Le[d>>0]=1,fe=p+20|0,!(f[f[fe>>2]>>2]|0)){d=p+24|0,m=f[d>>2]|0,m|0&&bt(m),me=p,f[me>>2]=0,f[me+4>>2]=0,f[p+8>>2]=0,f[fe>>2]=0,f[p+12>>2]=-1,f[p+16>>2]=0,f[d>>2]=0,L=ne;return}me=p+16|0,d=f[me>>2]|0,w=d&15;e:do if((m|0)==0&(v|0)==0)ve=p+24|0;else{re=p+12|0,H=(w|0)==3,N=d&255,T=(w|1|0)==3,J=p+24|0,k=(w+-1|0)>>>0<3,$=(w|2|0)==3,I=Y+8|0;t:for(;;){if(x=Re(m|0,v|0,52)|0,q()|0,x=x&15,(x|0)==(f[re>>2]|0)){switch(N&15){case 0:case 2:case 3:{if(w=nA(m,v,Z)|0,w|0){he=15;break t}if(LL(f[fe>>2]|0,f[J>>2]|0,Z)|0){he=19;break t}break}}if(T&&(w=f[(f[fe>>2]|0)+4>>2]|0,f[Z>>2]=f[w>>2],f[Z+4>>2]=f[w+4>>2],f[Z+8>>2]=f[w+8>>2],f[Z+12>>2]=f[w+12>>2],fL(26832,Z)|0)){if($L(f[(f[fe>>2]|0)+4>>2]|0,x,Y)|0){he=25;break}if(w=Y,(f[w>>2]|0)==(m|0)&&(f[w+4>>2]|0)==(v|0)){he=29;break}}if(k){if(w=iy(m,v,Z)|0,w|0){he=32;break}if(kL(m,v,Y,0)|0){he=36;break}if($&&S9(f[fe>>2]|0,f[J>>2]|0,Z,Y)|0){he=42;break}if(T&&x9(f[fe>>2]|0,f[J>>2]|0,Z,Y)|0){he=42;break}}if(H){if(d=kL(m,v,Z,1)|0,w=f[J>>2]|0,d|0){he=45;break}if(AL(w,Z)|0){if(Kj(Y,Z),Xj(Z,f[J>>2]|0)|0){he=53;break}if(LL(f[fe>>2]|0,f[J>>2]|0,I)|0){he=53;break}if(x9(f[fe>>2]|0,f[J>>2]|0,Y,Z)|0){he=53;break}}}}do if((x|0)<(f[re>>2]|0)){if(d=kL(m,v,Z,1)|0,w=f[J>>2]|0,d|0){he=58;break t}if(!(AL(w,Z)|0)){he=73;break}if(Xj(f[J>>2]|0,Z)|0&&(Kj(Y,Z),S9(f[fe>>2]|0,f[J>>2]|0,Y,Z)|0)){he=65;break t}if(m=p9(m,v,x+1|0,Y)|0,m|0){he=67;break t}v=Y,m=f[v>>2]|0,v=f[v+4>>2]|0}else he=73;while(!1);if((he|0)==73&&(he=0,m=w9(m,v)|0,v=q()|0),(m|0)==0&(v|0)==0){ve=J;break e}}switch(he|0){case 15:{d=f[J>>2]|0,d|0&&bt(d),he=p,f[he>>2]=0,f[he+4>>2]=0,f[fe>>2]=0,f[re>>2]=-1,f[me>>2]=0,f[J>>2]=0,f[p+8>>2]=w,he=20;break}case 19:{f[p>>2]=m,f[p+4>>2]=v,he=20;break}case 25:{Mt(27795,27761,470,27772);break}case 29:{f[p>>2]=m,f[p+4>>2]=v,L=ne;return}case 32:{d=f[J>>2]|0,d|0&&bt(d),ve=p,f[ve>>2]=0,f[ve+4>>2]=0,f[fe>>2]=0,f[re>>2]=-1,f[me>>2]=0,f[J>>2]=0,f[p+8>>2]=w,L=ne;return}case 36:{Mt(27795,27761,493,27772);break}case 42:{f[p>>2]=m,f[p+4>>2]=v,L=ne;return}case 45:{w|0&&bt(w),he=p,f[he>>2]=0,f[he+4>>2]=0,f[fe>>2]=0,f[re>>2]=-1,f[me>>2]=0,f[J>>2]=0,f[p+8>>2]=d,he=55;break}case 53:{f[p>>2]=m,f[p+4>>2]=v,he=55;break}case 58:{w|0&&bt(w),he=p,f[he>>2]=0,f[he+4>>2]=0,f[fe>>2]=0,f[re>>2]=-1,f[me>>2]=0,f[J>>2]=0,f[p+8>>2]=d,he=71;break}case 65:{f[p>>2]=m,f[p+4>>2]=v,he=71;break}case 67:{d=f[J>>2]|0,d|0&&bt(d),ve=p,f[ve>>2]=0,f[ve+4>>2]=0,f[fe>>2]=0,f[re>>2]=-1,f[me>>2]=0,f[J>>2]=0,f[p+8>>2]=m,L=ne;return}}if((he|0)==20){L=ne;return}else if((he|0)==55){L=ne;return}else if((he|0)==71){L=ne;return}}while(!1);d=f[ve>>2]|0,d|0&&bt(d),he=p,f[he>>2]=0,f[he+4>>2]=0,f[p+8>>2]=0,f[fe>>2]=0,f[p+12>>2]=-1,f[me>>2]=0,f[ve>>2]=0,L=ne}function w9(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0;H=L,L=L+16|0,N=H,v=Re(p|0,d|0,52)|0,q()|0,v=v&15,m=Re(p|0,d|0,45)|0,q()|0;do if(v){for(;m=Be(v+4095|0,0,52)|0,w=q()|0|d&-15728641,x=(15-v|0)*3|0,$=Be(7,0,x|0)|0,I=q()|0,m=m|p|$,w=w|I,T=Re(p|0,d|0,x|0)|0,q()|0,T=T&7,v=v+-1|0,!(T>>>0<6);)if(v)d=w,p=m;else{k=4;break}if((k|0)==4){m=Re(m|0,w|0,45)|0,q()|0;break}return N=(T|0)==0&(Bi(m,w)|0)!=0,N=Be((N?2:1)+T|0,0,x|0)|0,k=q()|0|d&~I,N=N|p&~$,zt(k|0),L=H,N|0}while(!1);return m=m&127,m>>>0>120?(k=0,N=0,zt(k|0),L=H,N|0):(wL(N,0,m+1|0,0),k=f[N+4>>2]|0,N=f[N>>2]|0,zt(k|0),L=H,N|0)}function ome(p,d,m,v,w,x){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0,x=x|0;var $=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0;he=L,L=L+160|0,H=he+80|0,I=he+64|0,J=he+112|0,re=he,nme(H,p,d,m),k=H,CL(I,f[k>>2]|0,f[k+4>>2]|0,d),k=I,T=f[k>>2]|0,k=f[k+4>>2]|0,$=f[H+8>>2]|0,Z=J+4|0,f[Z>>2]=f[H>>2],f[Z+4>>2]=f[H+4>>2],f[Z+8>>2]=f[H+8>>2],f[Z+12>>2]=f[H+12>>2],f[Z+16>>2]=f[H+16>>2],f[Z+20>>2]=f[H+20>>2],f[Z+24>>2]=f[H+24>>2],f[Z+28>>2]=f[H+28>>2],Z=re,f[Z>>2]=T,f[Z+4>>2]=k,Z=re+8|0,f[Z>>2]=$,p=re+12|0,d=J,m=p+36|0;do f[p>>2]=f[d>>2],p=p+4|0,d=d+4|0;while((p|0)<(m|0));if(J=re+48|0,f[J>>2]=f[I>>2],f[J+4>>2]=f[I+4>>2],f[J+8>>2]=f[I+8>>2],f[J+12>>2]=f[I+12>>2],(T|0)==0&(k|0)==0)return re=$,L=he,re|0;m=re+16|0,N=re+24|0,H=re+28|0,$=0,I=0,d=T,p=k;do{if(!(($|0)<(w|0)|($|0)==(w|0)&I>>>0<v>>>0)){Y=4;break}if(k=I,I=gt(I|0,$|0,1,0)|0,$=q()|0,k=x+(k<<3)|0,f[k>>2]=d,f[k+4>>2]=p,TL(J),p=J,d=f[p>>2]|0,p=f[p+4>>2]|0,(d|0)==0&(p|0)==0){if(v$(m),d=m,p=f[d>>2]|0,d=f[d+4>>2]|0,(p|0)==0&(d|0)==0){Y=10;break}A9(p,d,f[H>>2]|0,J),p=J,d=f[p>>2]|0,p=f[p+4>>2]|0}k=re,f[k>>2]=d,f[k+4>>2]=p}while(!((d|0)==0&(p|0)==0));return(Y|0)==4?(p=re+40|0,d=f[p>>2]|0,d|0&&bt(d),Y=re+16|0,f[Y>>2]=0,f[Y+4>>2]=0,f[N>>2]=0,f[re+36>>2]=0,f[H>>2]=-1,f[re+32>>2]=0,f[p>>2]=0,A9(0,0,0,J),f[re>>2]=0,f[re+4>>2]=0,f[Z>>2]=0,re=14,L=he,re|0):((Y|0)==10&&(f[re>>2]=0,f[re+4>>2]=0,f[Z>>2]=f[N>>2]),re=f[Z>>2]|0,L=he,re|0)}function ame(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0;if(H=L,L=L+48|0,T=H+32|0,I=H+40|0,k=H,!(f[p>>2]|0))return N=v,f[N>>2]=0,f[N+4>>2]=0,N=0,L=H,N|0;wL(T,0,0,0),$=T,w=f[$>>2]|0,$=f[$+4>>2]|0;do if(d>>>0>15)N=k,f[N>>2]=0,f[N+4>>2]=0,f[k+8>>2]=4,f[k+12>>2]=-1,N=k+16|0,m=k+29|0,f[N>>2]=0,f[N+4>>2]=0,f[N+8>>2]=0,Le[N+12>>0]=0,Le[m>>0]=Le[I>>0]|0,Le[m+1>>0]=Le[I+1>>0]|0,Le[m+2>>0]=Le[I+2>>0]|0,m=4,N=9;else{if(m=ew(m)|0,m|0){T=k,f[T>>2]=0,f[T+4>>2]=0,f[k+8>>2]=m,f[k+12>>2]=-1,T=k+16|0,N=k+29|0,f[T>>2]=0,f[T+4>>2]=0,f[T+8>>2]=0,Le[T+12>>0]=0,Le[N>>0]=Le[I>>0]|0,Le[N+1>>0]=Le[I+1>>0]|0,Le[N+2>>0]=Le[I+2>>0]|0,N=9;break}if(m=mo((f[p+8>>2]|0)+1|0,32)|0,!m){N=k,f[N>>2]=0,f[N+4>>2]=0,f[k+8>>2]=13,f[k+12>>2]=-1,N=k+16|0,m=k+29|0,f[N>>2]=0,f[N+4>>2]=0,f[N+8>>2]=0,Le[N+12>>0]=0,Le[m>>0]=Le[I>>0]|0,Le[m+1>>0]=Le[I+1>>0]|0,Le[m+2>>0]=Le[I+2>>0]|0,m=13,N=9;break}PL(p,m),Z=k,f[Z>>2]=w,f[Z+4>>2]=$,$=k+8|0,f[$>>2]=0,f[k+12>>2]=d,f[k+20>>2]=p,f[k+24>>2]=m,Le[k+28>>0]=0,w=k+29|0,Le[w>>0]=Le[I>>0]|0,Le[w+1>>0]=Le[I+1>>0]|0,Le[w+2>>0]=Le[I+2>>0]|0,f[k+16>>2]=3,J=+tAe(m),J=J*+eAe(m),x=+qt(+ +j[m>>3]),x=J/+gi(+ +w$(+x,+ +qt(+ +j[m+8>>3])))*6371.007180918475*6371.007180918475,w=k+12|0,m=f[w>>2]|0;e:do if((m|0)>0)do{if(m9(m+-1|0,T)|0,!(x/+j[T>>3]>10))break e;Z=f[w>>2]|0,m=Z+-1|0,f[w>>2]=m}while((Z|0)>1);while(!1);if(v$(k),w=v,f[w>>2]=0,f[w+4>>2]=0,w=k,m=f[w>>2]|0,w=f[w+4>>2]|0,!((m|0)==0&(w|0)==0))do Z1(m,w,d,T)|0,I=T,p=v,I=gt(f[p>>2]|0,f[p+4>>2]|0,f[I>>2]|0,f[I+4>>2]|0)|0,p=q()|0,Z=v,f[Z>>2]=I,f[Z+4>>2]=p,v$(k),Z=k,m=f[Z>>2]|0,w=f[Z+4>>2]|0;while(!((m|0)==0&(w|0)==0));m=f[$>>2]|0}while(!1);return Z=m,L=H,Z|0}function K1(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0;if(!(fL(d,m)|0)||(d=Yj(d)|0,v=+j[m>>3],w=+j[m+8>>3],w=d&w<0?w+6.283185307179586:w,J=f[p>>2]|0,(J|0)<=0))return J=0,J|0;if(H=f[p+4>>2]|0,d){d=0,N=w,m=-1,p=0;e:for(;;){for(k=p;$=+j[H+(k<<4)>>3],w=+j[H+(k<<4)+8>>3],p=(m+2|0)%(J|0)|0,x=+j[H+(p<<4)>>3],I=+j[H+(p<<4)+8>>3],$>x?(T=$,$=I):(T=x,x=$,$=w,w=I),v=v==x|v==T?v+2220446049250313e-31:v,!!(v<x|v>T);)if(m=k+1|0,(m|0)>=(J|0)){m=22;break e}else p=k,k=m,m=p;if(I=$<0?$+6.283185307179586:$,$=w<0?w+6.283185307179586:w,N=I==N|$==N?N+-2220446049250313e-31:N,T=I+($-I)*((v-x)/(T-x)),(T<0?T+6.283185307179586:T)>N&&(d=d^1),p=k+1|0,(p|0)>=(J|0)){m=22;break}else m=k}if((m|0)==22)return d|0}else{d=0,N=w,m=-1,p=0;e:for(;;){for(k=p;$=+j[H+(k<<4)>>3],w=+j[H+(k<<4)+8>>3],p=(m+2|0)%(J|0)|0,x=+j[H+(p<<4)>>3],I=+j[H+(p<<4)+8>>3],$>x?(T=$,$=I):(T=x,x=$,$=w,w=I),v=v==x|v==T?v+2220446049250313e-31:v,!!(v<x|v>T);)if(m=k+1|0,(m|0)>=(J|0)){m=22;break e}else p=k,k=m,m=p;if(N=$==N|w==N?N+-2220446049250313e-31:N,$+(w-$)*((v-x)/(T-x))>N&&(d=d^1),p=k+1|0,(p|0)>=(J|0)){m=22;break}else m=k}if((m|0)==22)return d|0}return 0}function _9(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0;if(Y=f[p>>2]|0,!Y){f[d>>2]=0,f[d+4>>2]=0,f[d+8>>2]=0,f[d+12>>2]=0,f[d+16>>2]=0,f[d+20>>2]=0,f[d+24>>2]=0,f[d+28>>2]=0;return}if(re=d+8|0,j[re>>3]=17976931348623157e292,he=d+24|0,j[he>>3]=17976931348623157e292,j[d>>3]=-17976931348623157e292,ve=d+16|0,j[ve>>3]=-17976931348623157e292,!((Y|0)<=0)){for(J=f[p+4>>2]|0,k=17976931348623157e292,N=-17976931348623157e292,H=0,p=-1,x=17976931348623157e292,$=17976931348623157e292,T=-17976931348623157e292,v=-17976931348623157e292,Z=0;m=+j[J+(Z<<4)>>3],I=+j[J+(Z<<4)+8>>3],p=p+2|0,w=+j[J+(((p|0)==(Y|0)?0:p)<<4)+8>>3],m<x&&(j[re>>3]=m,x=m),I<$&&(j[he>>3]=I,$=I),m>T?j[d>>3]=m:m=T,I>v&&(j[ve>>3]=I,v=I),k=I>0&I<k?I:k,N=I<0&I>N?I:N,H=H|+qt(+(I-w))>3.141592653589793,p=Z+1|0,(p|0)!=(Y|0);)me=Z,T=m,Z=p,p=me;H&&(j[ve>>3]=N,j[he>>3]=k)}}function ew(p){return p=p|0,(p>>>0<4?0:15)|0}function PL(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0,pt=0,ot=0;if(Y=f[p>>2]|0,Y){if(re=d+8|0,j[re>>3]=17976931348623157e292,he=d+24|0,j[he>>3]=17976931348623157e292,j[d>>3]=-17976931348623157e292,ve=d+16|0,j[ve>>3]=-17976931348623157e292,(Y|0)>0){for(w=f[p+4>>2]|0,J=17976931348623157e292,Z=-17976931348623157e292,v=0,m=-1,T=17976931348623157e292,k=17976931348623157e292,H=-17976931348623157e292,$=-17976931348623157e292,me=0;x=+j[w+(me<<4)>>3],N=+j[w+(me<<4)+8>>3],pt=m+2|0,I=+j[w+(((pt|0)==(Y|0)?0:pt)<<4)+8>>3],x<T&&(j[re>>3]=x,T=x),N<k&&(j[he>>3]=N,k=N),x>H?j[d>>3]=x:x=H,N>$&&(j[ve>>3]=N,$=N),J=N>0&N<J?N:J,Z=N<0&N>Z?N:Z,v=v|+qt(+(N-I))>3.141592653589793,m=me+1|0,(m|0)!=(Y|0);)pt=me,H=x,me=m,m=pt;v&&(j[ve>>3]=Z,j[he>>3]=J)}}else f[d>>2]=0,f[d+4>>2]=0,f[d+8>>2]=0,f[d+12>>2]=0,f[d+16>>2]=0,f[d+20>>2]=0,f[d+24>>2]=0,f[d+28>>2]=0;if(pt=p+8|0,m=f[pt>>2]|0,!((m|0)<=0)){Ve=p+12|0,ne=0;do if(w=f[Ve>>2]|0,v=ne,ne=ne+1|0,he=d+(ne<<5)|0,ve=f[w+(v<<3)>>2]|0,ve){if(me=d+(ne<<5)+8|0,j[me>>3]=17976931348623157e292,p=d+(ne<<5)+24|0,j[p>>3]=17976931348623157e292,j[he>>3]=-17976931348623157e292,fe=d+(ne<<5)+16|0,j[fe>>3]=-17976931348623157e292,(ve|0)>0){for(Y=f[w+(v<<3)+4>>2]|0,J=17976931348623157e292,Z=-17976931348623157e292,w=0,v=-1,re=0,T=17976931348623157e292,k=17976931348623157e292,N=-17976931348623157e292,$=-17976931348623157e292;x=+j[Y+(re<<4)>>3],H=+j[Y+(re<<4)+8>>3],v=v+2|0,I=+j[Y+(((v|0)==(ve|0)?0:v)<<4)+8>>3],x<T&&(j[me>>3]=x,T=x),H<k&&(j[p>>3]=H,k=H),x>N?j[he>>3]=x:x=N,H>$&&(j[fe>>3]=H,$=H),J=H>0&H<J?H:J,Z=H<0&H>Z?H:Z,w=w|+qt(+(H-I))>3.141592653589793,v=re+1|0,(v|0)!=(ve|0);)ot=re,re=v,N=x,v=ot;w&&(j[fe>>3]=Z,j[p>>3]=J)}}else f[he>>2]=0,f[he+4>>2]=0,f[he+8>>2]=0,f[he+12>>2]=0,f[he+16>>2]=0,f[he+20>>2]=0,f[he+24>>2]=0,f[he+28>>2]=0,m=f[pt>>2]|0;while((ne|0)<(m|0))}}function LL(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0;if(!(K1(p,d,m)|0))return w=0,w|0;if(w=p+8|0,(f[w>>2]|0)<=0)return w=1,w|0;for(v=p+12|0,p=0;;){if(x=p,p=p+1|0,K1((f[v>>2]|0)+(x<<3)|0,d+(p<<5)|0,m)|0){p=0,v=6;break}if((p|0)>=(f[w>>2]|0)){p=1,v=6;break}}return(v|0)==6?p|0:0}function S9(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0;if(k=L,L=L+16|0,I=k,$=m+8|0,!(K1(p,d,$)|0))return T=0,L=k,T|0;T=p+8|0;e:do if((f[T>>2]|0)>0){for(x=p+12|0,w=0;;){if(N=w,w=w+1|0,K1((f[x>>2]|0)+(N<<3)|0,d+(w<<5)|0,$)|0){w=0;break}if((w|0)>=(f[T>>2]|0))break e}return L=k,w|0}while(!1);if(b$(p,d,m,v)|0)return N=0,L=k,N|0;f[I>>2]=f[m>>2],f[I+4>>2]=$,w=f[T>>2]|0;e:do if((w|0)>0)for(p=p+12|0,$=0,x=w;;){if(w=f[p>>2]|0,(f[w+($<<3)>>2]|0)>0){if(K1(I,v,f[w+($<<3)+4>>2]|0)|0){w=0;break e}if(w=$+1|0,b$((f[p>>2]|0)+($<<3)|0,d+(w<<5)|0,m,v)|0){w=0;break e}x=f[T>>2]|0}else w=$+1|0;if((w|0)<(x|0))$=w;else{w=1;break}}else w=1;while(!1);return N=w,L=k,N|0}function b$(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0,pt=0,ot=0,Ut=0;if(pt=L,L=L+176|0,me=pt+172|0,w=pt+168|0,fe=pt,!(AL(d,v)|0))return p=0,L=pt,p|0;if(iAe(d,v,me,w),oy(fe|0,m|0,168)|0,(f[m>>2]|0)>0){d=0;do ot=fe+8+(d<<4)+8|0,ve=+qo(+j[ot>>3],f[w>>2]|0),j[ot>>3]=ve,d=d+1|0;while((d|0)<(f[m>>2]|0))}re=+j[v>>3],he=+j[v+8>>3],ve=+qo(+j[v+16>>3],f[w>>2]|0),Z=+qo(+j[v+24>>3],f[w>>2]|0);e:do if((f[p>>2]|0)>0){if(v=p+4|0,w=f[fe>>2]|0,(w|0)<=0){for(d=0;;)if(d=d+1|0,(d|0)>=(f[p>>2]|0)){d=0;break e}}for(m=0;;){if(d=f[v>>2]|0,J=+j[d+(m<<4)>>3],Y=+qo(+j[d+(m<<4)+8>>3],f[me>>2]|0),d=f[v>>2]|0,m=m+1|0,ot=(m|0)%(f[p>>2]|0)|0,x=+j[d+(ot<<4)>>3],$=+qo(+j[d+(ot<<4)+8>>3],f[me>>2]|0),!(J>=re)|!(x>=re)&&!(J<=he)|!(x<=he)&&!(Y<=Z)|!($<=Z)&&!(Y>=ve)|!($>=ve)){H=x-J,k=$-Y,d=0;do if(Ut=d,d=d+1|0,ot=(d|0)==(w|0)?0:d,x=+j[fe+8+(Ut<<4)+8>>3],$=+j[fe+8+(ot<<4)+8>>3]-x,I=+j[fe+8+(Ut<<4)>>3],T=+j[fe+8+(ot<<4)>>3]-I,N=H*$-k*T,N!=0&&(ne=Y-x,Ve=J-I,T=(ne*T-$*Ve)/N,!(T<0|T>1))&&(N=(H*ne-k*Ve)/N,N>=0&N<=1)){d=1;break e}while((d|0)<(w|0))}if((m|0)>=(f[p>>2]|0)){d=0;break}}}else d=0;while(!1);return Ut=d,L=pt,Ut|0}function x9(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0;if(b$(p,d,m,v)|0)return x=1,x|0;if(x=p+8|0,(f[x>>2]|0)<=0)return x=0,x|0;for(w=p+12|0,p=0;;){if($=p,p=p+1|0,b$((f[w>>2]|0)+($<<3)|0,d+(p<<5)|0,m,v)|0){p=1,w=6;break}if((p|0)>=(f[x>>2]|0)){p=0,w=6;break}}return(w|0)==6?p|0:0}function lme(){return 8}function cme(){return 16}function ume(){return 168}function hme(){return 8}function dme(){return 16}function pme(){return 12}function fme(){return 8}function Ame(p){return p=p|0,+(+((f[p>>2]|0)>>>0)+4294967296*+(f[p+4>>2]|0))}function mme(p){p=p|0;var d=0,m=0;return m=+j[p>>3],d=+j[p+8>>3],+ +ui(+(m*m+d*d))}function $9(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0;k=+j[p>>3],T=+j[d>>3]-k,I=+j[p+8>>3],$=+j[d+8>>3]-I,H=+j[m>>3],x=+j[v>>3]-H,J=+j[m+8>>3],N=+j[v+8>>3]-J,x=(x*(I-J)-(k-H)*N)/(T*N-$*x),j[w>>3]=k+T*x,j[w+8>>3]=I+$*x}function E9(p,d){return p=p|0,d=d|0,+qt(+(+j[p>>3]-+j[d>>3]))<11920928955078125e-23?(d=+qt(+(+j[p+8>>3]-+j[d+8>>3]))<11920928955078125e-23,d|0):(d=0,d|0)}function cs(p,d){p=p|0,d=d|0;var m=0,v=0,w=0;return w=+j[p>>3]-+j[d>>3],v=+j[p+8>>3]-+j[d+8>>3],m=+j[p+16>>3]-+j[d+16>>3],+(w*w+v*v+m*m)}function yme(p,d){p=p|0,d=d|0;var m=0,v=0,w=0;m=+j[p>>3],v=+gi(+m),m=+Wt(+m),j[d+16>>3]=m,m=+j[p+8>>3],w=v*+gi(+m),j[d>>3]=w,m=v*+Wt(+m),j[d+8>>3]=m}function gme(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0;if(x=L,L=L+16|0,w=x,v=Bi(p,d)|0,(m+-1|0)>>>0>5||(v=(v|0)!=0,(m|0)==1&v))return w=-1,L=x,w|0;do if(tw(p,d,w)|0)v=-1;else if(v){v=((f[26352+(m<<2)>>2]|0)+5-(f[w>>2]|0)|0)%5|0;break}else{v=((f[26384+(m<<2)>>2]|0)+6-(f[w>>2]|0)|0)%6|0;break}while(!1);return w=v,L=x,w|0}function tw(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0;if(N=L,L=L+32|0,I=N+16|0,T=N,v=ty(p,d,I)|0,v|0)return m=v,L=N,m|0;x=h9(p,d)|0,k=Ao(p,d)|0,Zfe(x,T),v=Yfe(x,f[I>>2]|0)|0;do if(nr(x)|0){do switch(x|0){case 4:{w=0;break}case 14:{w=1;break}case 24:{w=2;break}case 38:{w=3;break}case 49:{w=4;break}case 58:{w=5;break}case 63:{w=6;break}case 72:{w=7;break}case 83:{w=8;break}case 97:{w=9;break}case 107:{w=10;break}case 117:{w=11;break}default:Mt(27795,27797,75,27806)}while(!1);if($=f[26416+(w*24|0)+8>>2]|0,d=f[26416+(w*24|0)+16>>2]|0,p=f[I>>2]|0,(p|0)!=(f[T>>2]|0)&&(T=hL(x)|0,p=f[I>>2]|0,T|(p|0)==(d|0)&&(v=(v+1|0)%6|0)),(k|0)==3&(p|0)==(d|0)){v=(v+5|0)%6|0;break}(k|0)==5&(p|0)==($|0)&&(v=(v+1|0)%6|0)}while(!1);return f[m>>2]=v,m=0,L=N,m|0}function ka(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0;if(fe=L,L=L+32|0,me=fe+24|0,he=fe+20|0,Y=fe+8|0,Z=fe+16|0,J=fe,T=(Bi(p,d)|0)==0,T=T?6:5,N=Re(p|0,d|0,52)|0,q()|0,N=N&15,T>>>0<=m>>>0)return v=2,L=fe,v|0;H=(N|0)==0,!H&&(re=Be(7,0,(N^15)*3|0)|0,(re&p|0)==0&((q()|0)&d|0)==0)?w=m:x=4;e:do if((x|0)==4){if(w=(Bi(p,d)|0)!=0,((w?4:5)|0)<(m|0)||tw(p,d,me)|0||(x=(f[me>>2]|0)+m|0,w?w=26704+(((x|0)%5|0)<<2)|0:w=26736+(((x|0)%6|0)<<2)|0,re=f[w>>2]|0,(re|0)==7))return v=1,L=fe,v|0;f[he>>2]=0,w=Rs(p,d,re,he,Y)|0;do if(!w){if(I=Y,k=f[I>>2]|0,I=f[I+4>>2]|0,$=I>>>0<d>>>0|(I|0)==(d|0)&k>>>0<p>>>0,x=$?k:p,$=$?I:d,!H&&(H=Be(7,0,(N^15)*3|0)|0,(k&H|0)==0&(I&(q()|0)|0)==0))w=m;else{if(I=(m+-1+T|0)%(T|0)|0,w=Bi(p,d)|0,(I|0)<0&&Mt(27795,27797,248,27822),T=(w|0)!=0,((T?4:5)|0)<(I|0)&&Mt(27795,27797,248,27822),tw(p,d,me)|0&&Mt(27795,27797,248,27822),w=(f[me>>2]|0)+I|0,T?w=26704+(((w|0)%5|0)<<2)|0:w=26736+(((w|0)%6|0)<<2)|0,I=f[w>>2]|0,(I|0)==7&&Mt(27795,27797,248,27822),f[Z>>2]=0,w=Rs(p,d,I,Z,J)|0,w|0)break;k=J,T=f[k>>2]|0,k=f[k+4>>2]|0;do if(k>>>0<$>>>0|(k|0)==($|0)&T>>>0<x>>>0){if(Bi(T,k)|0?x=uL(T,k,p,d)|0:x=f[26800+((((f[Z>>2]|0)+(f[26768+(I<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,w=Bi(T,k)|0,(x+-1|0)>>>0>5){w=-1,x=T,$=k;break}if(w=(w|0)!=0,(x|0)==1&w){w=-1,x=T,$=k;break}do if(tw(T,k,me)|0)w=-1;else if(w){w=((f[26352+(x<<2)>>2]|0)+5-(f[me>>2]|0)|0)%5|0;break}else{w=((f[26384+(x<<2)>>2]|0)+6-(f[me>>2]|0)|0)%6|0;break}while(!1);x=T,$=k}else w=m;while(!1);I=Y,k=f[I>>2]|0,I=f[I+4>>2]|0}if((x|0)==(k|0)&($|0)==(I|0)){if(T=(Bi(k,I)|0)!=0,T?p=uL(k,I,p,d)|0:p=f[26800+((((f[he>>2]|0)+(f[26768+(re<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,w=Bi(k,I)|0,(p+-1|0)>>>0<=5&&(ve=(w|0)!=0,!((p|0)==1&ve)))do if(tw(k,I,me)|0)w=-1;else if(ve){w=((f[26352+(p<<2)>>2]|0)+5-(f[me>>2]|0)|0)%5|0;break}else{w=((f[26384+(p<<2)>>2]|0)+6-(f[me>>2]|0)|0)%6|0;break}while(!1);else w=-1;w=w+1|0,w=(w|0)==6|T&(w|0)==5?0:w}d=$,p=x;break e}while(!1);return v=w,L=fe,v|0}while(!1);return ve=Be(w|0,0,56)|0,me=q()|0|d&-2130706433|536870912,f[v>>2]=ve|p,f[v+4>>2]=me,v=0,L=fe,v|0}function vme(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0;return x=(Bi(p,d)|0)==0,v=ka(p,d,0,m)|0,w=(v|0)==0,x?!w||(v=ka(p,d,1,m+8|0)|0,v|0)||(v=ka(p,d,2,m+16|0)|0,v|0)||(v=ka(p,d,3,m+24|0)|0,v|0)||(v=ka(p,d,4,m+32|0)|0,v)?(x=v,x|0):ka(p,d,5,m+40|0)|0:!w||(v=ka(p,d,1,m+8|0)|0,v|0)||(v=ka(p,d,2,m+16|0)|0,v|0)||(v=ka(p,d,3,m+24|0)|0,v|0)||(v=ka(p,d,4,m+32|0)|0,v|0)?(x=v,x|0):(x=m+40|0,f[x>>2]=0,f[x+4>>2]=0,x=0,x|0)}function bme(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0,I=0,T=0;return T=L,L=L+192|0,w=T,x=T+168|0,$=Re(p|0,d|0,56)|0,q()|0,$=$&7,I=d&-2130706433|134217728,v=ty(p,I,x)|0,v|0?(I=v,L=T,I|0):(d=Re(p|0,d|0,52)|0,q()|0,d=d&15,Bi(p,I)|0?gL(x,d,$,1,w):vL(x,d,$,1,w),I=w+8|0,f[m>>2]=f[I>>2],f[m+4>>2]=f[I+4>>2],f[m+8>>2]=f[I+8>>2],f[m+12>>2]=f[I+12>>2],I=0,L=T,I|0)}function I9(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0;return w=L,L=L+16|0,m=w,!(!0&(d&2013265920|0)==536870912)||(v=d&-2130706433|134217728,!(bL(p,v)|0))?(v=0,L=w,v|0):(x=Re(p|0,d|0,56)|0,q()|0,x=(ka(p,v,x&7,m)|0)==0,v=m,v=x&((f[v>>2]|0)==(p|0)?(f[v+4>>2]|0)==(d|0):0)&1,L=w,v|0)}function C9(p,d,m){p=p|0,d=d|0,m=m|0;var v=0;(d|0)>0?(v=mo(d,4)|0,f[p>>2]=v,v||Mt(27835,27858,40,27872)):f[p>>2]=0,f[p+4>>2]=d,f[p+8>>2]=0,f[p+12>>2]=m}function T9(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0;w=p+4|0,x=p+12|0,$=p+8|0;e:for(;;){for(m=f[w>>2]|0,d=0;;){if((d|0)>=(m|0))break e;if(v=f[p>>2]|0,I=f[v+(d<<2)>>2]|0,!I)d=d+1|0;else break}d=v+(~~(+qt(+(+It(10,+ +(15-(f[x>>2]|0)|0))*(+j[I>>3]+ +j[I+8>>3])))%+(m|0))>>>0<<2)|0,m=f[d>>2]|0;t:do if(m|0){if(v=I+32|0,(m|0)==(I|0))f[d>>2]=f[v>>2];else{if(m=m+32|0,d=f[m>>2]|0,!d)break;for(;(d|0)!=(I|0);)if(m=d+32|0,d=f[m>>2]|0,!d)break t;f[m>>2]=f[v>>2]}bt(I),f[$>>2]=(f[$>>2]|0)+-1}while(!1)}bt(f[p>>2]|0)}function M9(p){p=p|0;var d=0,m=0,v=0;for(v=f[p+4>>2]|0,m=0;;){if((m|0)>=(v|0)){d=0,m=4;break}if(d=f[(f[p>>2]|0)+(m<<2)>>2]|0,!d)m=m+1|0;else{m=4;break}}return(m|0)==4?d|0:0}function k9(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0;if(m=~~(+qt(+(+It(10,+ +(15-(f[p+12>>2]|0)|0))*(+j[d>>3]+ +j[d+8>>3])))%+(f[p+4>>2]|0))>>>0,m=(f[p>>2]|0)+(m<<2)|0,v=f[m>>2]|0,!v)return x=1,x|0;x=d+32|0;do if((v|0)!=(d|0)){if(m=f[v+32>>2]|0,!m)return x=1,x|0;for(w=m;;){if((w|0)==(d|0)){w=8;break}if(m=f[w+32>>2]|0,m)v=w,w=m;else{m=1,w=10;break}}if((w|0)==8){f[v+32>>2]=f[x>>2];break}else if((w|0)==10)return m|0}else f[m>>2]=f[x>>2];while(!1);return bt(d),x=p+8|0,f[x>>2]=(f[x>>2]|0)+-1,x=0,x|0}function wme(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0;x=Ac(40)|0,x||Mt(27888,27858,98,27901),f[x>>2]=f[d>>2],f[x+4>>2]=f[d+4>>2],f[x+8>>2]=f[d+8>>2],f[x+12>>2]=f[d+12>>2],w=x+16|0,f[w>>2]=f[m>>2],f[w+4>>2]=f[m+4>>2],f[w+8>>2]=f[m+8>>2],f[w+12>>2]=f[m+12>>2],f[x+32>>2]=0,w=~~(+qt(+(+It(10,+ +(15-(f[p+12>>2]|0)|0))*(+j[d>>3]+ +j[d+8>>3])))%+(f[p+4>>2]|0))>>>0,w=(f[p>>2]|0)+(w<<2)|0,v=f[w>>2]|0;do if(!v)f[w>>2]=x;else{for(;!(ry(v,d)|0&&ry(v+16|0,m)|0);)if(w=f[v+32>>2]|0,v=(w|0)==0?v:w,!(f[v+32>>2]|0)){$=10;break}if(($|0)==10){f[v+32>>2]=x;break}return bt(x),$=v,$|0}while(!1);return $=p+8|0,f[$>>2]=(f[$>>2]|0)+1,$=x,$|0}function _me(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0;if(w=~~(+qt(+(+It(10,+ +(15-(f[p+12>>2]|0)|0))*(+j[d>>3]+ +j[d+8>>3])))%+(f[p+4>>2]|0))>>>0,w=f[(f[p>>2]|0)+(w<<2)>>2]|0,!w)return m=0,m|0;if(!m){for(p=w;;){if(ry(p,d)|0){v=10;break}if(p=f[p+32>>2]|0,!p){p=0,v=10;break}}if((v|0)==10)return p|0}for(p=w;;){if(ry(p,d)|0&&ry(p+16|0,m)|0){v=10;break}if(p=f[p+32>>2]|0,!p){p=0,v=10;break}}return(v|0)==10?p|0:0}function Sme(p,d){p=p|0,d=d|0;var m=0;if(m=~~(+qt(+(+It(10,+ +(15-(f[p+12>>2]|0)|0))*(+j[d>>3]+ +j[d+8>>3])))%+(f[p+4>>2]|0))>>>0,p=f[(f[p>>2]|0)+(m<<2)>>2]|0,!p)return m=0,m|0;for(;;){if(ry(p,d)|0){d=5;break}if(p=f[p+32>>2]|0,!p){p=0,d=5;break}}return(d|0)==5?p|0:0}function xme(){return 27920}function Wd(p){return p=+p,~~+O9(+p)|0}function Ac(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0,re=0,he=0,ve=0,me=0,fe=0,ne=0,Ve=0;Ve=L,L=L+16|0,J=Ve;do if(p>>>0<245){if(k=p>>>0<11?16:p+11&-8,p=k>>>3,H=f[6981]|0,m=H>>>p,m&3|0)return d=(m&1^1)+p|0,p=27964+(d<<1<<2)|0,m=p+8|0,v=f[m>>2]|0,w=v+8|0,x=f[w>>2]|0,(x|0)==(p|0)?f[6981]=H&~(1<<d):(f[x+12>>2]=p,f[m>>2]=x),ne=d<<3,f[v+4>>2]=ne|3,ne=v+ne+4|0,f[ne>>2]=f[ne>>2]|1,ne=w,L=Ve,ne|0;if(N=f[6983]|0,k>>>0>N>>>0){if(m|0)return d=2<<p,d=m<<p&(d|0-d),d=(d&0-d)+-1|0,I=d>>>12&16,d=d>>>I,m=d>>>5&8,d=d>>>m,x=d>>>2&4,d=d>>>x,p=d>>>1&2,d=d>>>p,v=d>>>1&1,v=(m|I|x|p|v)+(d>>>v)|0,d=27964+(v<<1<<2)|0,p=d+8|0,x=f[p>>2]|0,I=x+8|0,m=f[I>>2]|0,(m|0)==(d|0)?(p=H&~(1<<v),f[6981]=p):(f[m+12>>2]=d,f[p>>2]=m,p=H),ne=v<<3,$=ne-k|0,f[x+4>>2]=k|3,w=x+k|0,f[w+4>>2]=$|1,f[x+ne>>2]=$,N|0&&(v=f[6986]|0,d=N>>>3,m=27964+(d<<1<<2)|0,d=1<<d,p&d?(p=m+8|0,d=f[p>>2]|0):(f[6981]=p|d,d=m,p=m+8|0),f[p>>2]=v,f[d+12>>2]=v,f[v+8>>2]=d,f[v+12>>2]=m),f[6983]=$,f[6986]=w,ne=I,L=Ve,ne|0;if(x=f[6982]|0,x){for(m=(x&0-x)+-1|0,w=m>>>12&16,m=m>>>w,v=m>>>5&8,m=m>>>v,$=m>>>2&4,m=m>>>$,I=m>>>1&2,m=m>>>I,T=m>>>1&1,T=f[28228+((v|w|$|I|T)+(m>>>T)<<2)>>2]|0,m=T,I=T,T=(f[T+4>>2]&-8)-k|0;p=f[m+16>>2]|0,!(!p&&(p=f[m+20>>2]|0,!p));)$=(f[p+4>>2]&-8)-k|0,w=$>>>0<T>>>0,m=p,I=w?p:I,T=w?$:T;if($=I+k|0,$>>>0>I>>>0){w=f[I+24>>2]|0,d=f[I+12>>2]|0;do if((d|0)==(I|0)){if(p=I+20|0,d=f[p>>2]|0,!d&&(p=I+16|0,d=f[p>>2]|0,!d)){m=0;break}for(;;)if(v=d+20|0,m=f[v>>2]|0,m)d=m,p=v;else if(v=d+16|0,m=f[v>>2]|0,m)d=m,p=v;else break;f[p>>2]=0,m=d}else m=f[I+8>>2]|0,f[m+12>>2]=d,f[d+8>>2]=m,m=d;while(!1);do if(w|0){if(d=f[I+28>>2]|0,p=28228+(d<<2)|0,(I|0)==(f[p>>2]|0)){if(f[p>>2]=m,!m){f[6982]=x&~(1<<d);break}}else if(ne=w+16|0,f[((f[ne>>2]|0)==(I|0)?ne:w+20|0)>>2]=m,!m)break;f[m+24>>2]=w,d=f[I+16>>2]|0,d|0&&(f[m+16>>2]=d,f[d+24>>2]=m),d=f[I+20>>2]|0,d|0&&(f[m+20>>2]=d,f[d+24>>2]=m)}while(!1);return T>>>0<16?(ne=T+k|0,f[I+4>>2]=ne|3,ne=I+ne+4|0,f[ne>>2]=f[ne>>2]|1):(f[I+4>>2]=k|3,f[$+4>>2]=T|1,f[$+T>>2]=T,N|0&&(v=f[6986]|0,d=N>>>3,m=27964+(d<<1<<2)|0,d=1<<d,d&H?(p=m+8|0,d=f[p>>2]|0):(f[6981]=d|H,d=m,p=m+8|0),f[p>>2]=v,f[d+12>>2]=v,f[v+8>>2]=d,f[v+12>>2]=m),f[6983]=T,f[6986]=$),ne=I+8|0,L=Ve,ne|0}else H=k}else H=k}else H=k}else if(p>>>0<=4294967231)if(p=p+11|0,k=p&-8,v=f[6982]|0,v){w=0-k|0,p=p>>>8,p?k>>>0>16777215?T=31:(H=(p+1048320|0)>>>16&8,re=p<<H,I=(re+520192|0)>>>16&4,re=re<<I,T=(re+245760|0)>>>16&2,T=14-(I|H|T)+(re<<T>>>15)|0,T=k>>>(T+7|0)&1|T<<1):T=0,m=f[28228+(T<<2)>>2]|0;e:do if(!m)m=0,p=0,re=61;else for(p=0,I=k<<((T|0)==31?0:25-(T>>>1)|0),x=0;;){if($=(f[m+4>>2]&-8)-k|0,$>>>0<w>>>0)if($)p=m,w=$;else{p=m,w=0,re=65;break e}if(re=f[m+20>>2]|0,m=f[m+16+(I>>>31<<2)>>2]|0,x=(re|0)==0|(re|0)==(m|0)?x:re,m)I=I<<1;else{m=x,re=61;break}}while(!1);if((re|0)==61){if((m|0)==0&(p|0)==0){if(p=2<<T,p=(p|0-p)&v,!p){H=k;break}H=(p&0-p)+-1|0,$=H>>>12&16,H=H>>>$,x=H>>>5&8,H=H>>>x,I=H>>>2&4,H=H>>>I,T=H>>>1&2,H=H>>>T,m=H>>>1&1,p=0,m=f[28228+((x|$|I|T|m)+(H>>>m)<<2)>>2]|0}m?re=65:(I=p,$=w)}if((re|0)==65)for(x=m;;)if(H=(f[x+4>>2]&-8)-k|0,m=H>>>0<w>>>0,w=m?H:w,p=m?x:p,m=f[x+16>>2]|0,m||(m=f[x+20>>2]|0),m)x=m;else{I=p,$=w;break}if((I|0)!=0&&$>>>0<((f[6983]|0)-k|0)>>>0&&(N=I+k|0,N>>>0>I>>>0)){x=f[I+24>>2]|0,d=f[I+12>>2]|0;do if((d|0)==(I|0)){if(p=I+20|0,d=f[p>>2]|0,!d&&(p=I+16|0,d=f[p>>2]|0,!d)){d=0;break}for(;;)if(w=d+20|0,m=f[w>>2]|0,m)d=m,p=w;else if(w=d+16|0,m=f[w>>2]|0,m)d=m,p=w;else break;f[p>>2]=0}else ne=f[I+8>>2]|0,f[ne+12>>2]=d,f[d+8>>2]=ne;while(!1);do if(x){if(p=f[I+28>>2]|0,m=28228+(p<<2)|0,(I|0)==(f[m>>2]|0)){if(f[m>>2]=d,!d){v=v&~(1<<p),f[6982]=v;break}}else if(ne=x+16|0,f[((f[ne>>2]|0)==(I|0)?ne:x+20|0)>>2]=d,!d)break;f[d+24>>2]=x,p=f[I+16>>2]|0,p|0&&(f[d+16>>2]=p,f[p+24>>2]=d),p=f[I+20>>2]|0,p&&(f[d+20>>2]=p,f[p+24>>2]=d)}while(!1);e:do if($>>>0<16)ne=$+k|0,f[I+4>>2]=ne|3,ne=I+ne+4|0,f[ne>>2]=f[ne>>2]|1;else{if(f[I+4>>2]=k|3,f[N+4>>2]=$|1,f[N+$>>2]=$,d=$>>>3,$>>>0<256){m=27964+(d<<1<<2)|0,p=f[6981]|0,d=1<<d,p&d?(p=m+8|0,d=f[p>>2]|0):(f[6981]=p|d,d=m,p=m+8|0),f[p>>2]=N,f[d+12>>2]=N,f[N+8>>2]=d,f[N+12>>2]=m;break}if(d=$>>>8,d?$>>>0>16777215?m=31:(fe=(d+1048320|0)>>>16&8,ne=d<<fe,me=(ne+520192|0)>>>16&4,ne=ne<<me,m=(ne+245760|0)>>>16&2,m=14-(me|fe|m)+(ne<<m>>>15)|0,m=$>>>(m+7|0)&1|m<<1):m=0,d=28228+(m<<2)|0,f[N+28>>2]=m,p=N+16|0,f[p+4>>2]=0,f[p>>2]=0,p=1<<m,!(v&p)){f[6982]=v|p,f[d>>2]=N,f[N+24>>2]=d,f[N+12>>2]=N,f[N+8>>2]=N;break}d=f[d>>2]|0;t:do if((f[d+4>>2]&-8|0)!=($|0)){for(v=$<<((m|0)==31?0:25-(m>>>1)|0);m=d+16+(v>>>31<<2)|0,p=f[m>>2]|0,!!p;)if((f[p+4>>2]&-8|0)==($|0)){d=p;break t}else v=v<<1,d=p;f[m>>2]=N,f[N+24>>2]=d,f[N+12>>2]=N,f[N+8>>2]=N;break e}while(!1);fe=d+8|0,ne=f[fe>>2]|0,f[ne+12>>2]=N,f[fe>>2]=N,f[N+8>>2]=ne,f[N+12>>2]=d,f[N+24>>2]=0}while(!1);return ne=I+8|0,L=Ve,ne|0}else H=k}else H=k;else H=-1;while(!1);if(m=f[6983]|0,m>>>0>=H>>>0)return d=m-H|0,p=f[6986]|0,d>>>0>15?(ne=p+H|0,f[6986]=ne,f[6983]=d,f[ne+4>>2]=d|1,f[p+m>>2]=d,f[p+4>>2]=H|3):(f[6983]=0,f[6986]=0,f[p+4>>2]=m|3,ne=p+m+4|0,f[ne>>2]=f[ne>>2]|1),ne=p+8|0,L=Ve,ne|0;if($=f[6984]|0,$>>>0>H>>>0)return me=$-H|0,f[6984]=me,ne=f[6987]|0,fe=ne+H|0,f[6987]=fe,f[fe+4>>2]=me|1,f[ne+4>>2]=H|3,ne=ne+8|0,L=Ve,ne|0;if(f[7099]|0?p=f[7101]|0:(f[7101]=4096,f[7100]=4096,f[7102]=-1,f[7103]=-1,f[7104]=0,f[7092]=0,f[7099]=J&-16^1431655768,p=4096),I=H+48|0,T=H+47|0,x=p+T|0,w=0-p|0,k=x&w,k>>>0<=H>>>0||(p=f[7091]|0,p|0&&(N=f[7089]|0,J=N+k|0,J>>>0<=N>>>0|J>>>0>p>>>0)))return ne=0,L=Ve,ne|0;e:do if(f[7092]&4)d=0,re=143;else{m=f[6987]|0;t:do if(m){for(v=28372;J=f[v>>2]|0,!(J>>>0<=m>>>0&&(J+(f[v+4>>2]|0)|0)>>>0>m>>>0);)if(p=f[v+8>>2]|0,p)v=p;else{re=128;break t}if(d=x-$&w,d>>>0<2147483647)if(p=Zd(d|0)|0,(p|0)==((f[v>>2]|0)+(f[v+4>>2]|0)|0)){if((p|0)!=-1){$=d,x=p,re=145;break e}}else v=p,re=136;else d=0}else re=128;while(!1);do if((re|0)==128)if(m=Zd(0)|0,(m|0)!=-1&&(d=m,Z=f[7100]|0,Y=Z+-1|0,d=((Y&d|0)==0?0:(Y+d&0-Z)-d|0)+k|0,Z=f[7089]|0,Y=d+Z|0,d>>>0>H>>>0&d>>>0<2147483647)){if(J=f[7091]|0,J|0&&Y>>>0<=Z>>>0|Y>>>0>J>>>0){d=0;break}if(p=Zd(d|0)|0,(p|0)==(m|0)){$=d,x=m,re=145;break e}else v=p,re=136}else d=0;while(!1);do if((re|0)==136){if(m=0-d|0,!(I>>>0>d>>>0&(d>>>0<2147483647&(v|0)!=-1)))if((v|0)==-1){d=0;break}else{$=d,x=v,re=145;break e}if(p=f[7101]|0,p=T-d+p&0-p,p>>>0>=2147483647){$=d,x=v,re=145;break e}if((Zd(p|0)|0)==-1){Zd(m|0)|0,d=0;break}else{$=p+d|0,x=v,re=145;break e}}while(!1);f[7092]=f[7092]|4,re=143}while(!1);if((re|0)==143&&k>>>0<2147483647&&(me=Zd(k|0)|0,Y=Zd(0)|0,he=Y-me|0,ve=he>>>0>(H+40|0)>>>0,!((me|0)==-1|ve^1|me>>>0<Y>>>0&((me|0)!=-1&(Y|0)!=-1)^1))&&($=ve?he:d,x=me,re=145),(re|0)==145){d=(f[7089]|0)+$|0,f[7089]=d,d>>>0>(f[7090]|0)>>>0&&(f[7090]=d),T=f[6987]|0;e:do if(T){for(d=28372;;){if(p=f[d>>2]|0,m=f[d+4>>2]|0,(x|0)==(p+m|0)){re=154;break}if(v=f[d+8>>2]|0,v)d=v;else break}if((re|0)==154&&(fe=d+4|0,(f[d+12>>2]&8|0)==0)&&x>>>0>T>>>0&p>>>0<=T>>>0){f[fe>>2]=m+$,ne=(f[6984]|0)+$|0,me=T+8|0,me=(me&7|0)==0?0:0-me&7,fe=T+me|0,me=ne-me|0,f[6987]=fe,f[6984]=me,f[fe+4>>2]=me|1,f[T+ne+4>>2]=40,f[6988]=f[7103];break}for(x>>>0<(f[6985]|0)>>>0&&(f[6985]=x),m=x+$|0,d=28372;;){if((f[d>>2]|0)==(m|0)){re=162;break}if(p=f[d+8>>2]|0,p)d=p;else break}if((re|0)==162&&(f[d+12>>2]&8|0)==0){f[d>>2]=x,N=d+4|0,f[N>>2]=(f[N>>2]|0)+$,N=x+8|0,N=x+((N&7|0)==0?0:0-N&7)|0,d=m+8|0,d=m+((d&7|0)==0?0:0-d&7)|0,k=N+H|0,I=d-N-H|0,f[N+4>>2]=H|3;t:do if((T|0)==(d|0))ne=(f[6984]|0)+I|0,f[6984]=ne,f[6987]=k,f[k+4>>2]=ne|1;else{if((f[6986]|0)==(d|0)){ne=(f[6983]|0)+I|0,f[6983]=ne,f[6986]=k,f[k+4>>2]=ne|1,f[k+ne>>2]=ne;break}if(p=f[d+4>>2]|0,(p&3|0)==1){$=p&-8,v=p>>>3;i:do if(p>>>0<256)if(p=f[d+8>>2]|0,m=f[d+12>>2]|0,(m|0)==(p|0)){f[6981]=f[6981]&~(1<<v);break}else{f[p+12>>2]=m,f[m+8>>2]=p;break}else{x=f[d+24>>2]|0,p=f[d+12>>2]|0;do if((p|0)==(d|0)){if(m=d+16|0,v=m+4|0,p=f[v>>2]|0,p)m=v;else if(p=f[m>>2]|0,!p){p=0;break}for(;;)if(w=p+20|0,v=f[w>>2]|0,v)p=v,m=w;else if(w=p+16|0,v=f[w>>2]|0,v)p=v,m=w;else break;f[m>>2]=0}else ne=f[d+8>>2]|0,f[ne+12>>2]=p,f[p+8>>2]=ne;while(!1);if(!x)break;m=f[d+28>>2]|0,v=28228+(m<<2)|0;do if((f[v>>2]|0)!=(d|0)){if(ne=x+16|0,f[((f[ne>>2]|0)==(d|0)?ne:x+20|0)>>2]=p,!p)break i}else{if(f[v>>2]=p,p|0)break;f[6982]=f[6982]&~(1<<m);break i}while(!1);if(f[p+24>>2]=x,m=d+16|0,v=f[m>>2]|0,v|0&&(f[p+16>>2]=v,f[v+24>>2]=p),m=f[m+4>>2]|0,!m)break;f[p+20>>2]=m,f[m+24>>2]=p}while(!1);d=d+$|0,w=$+I|0}else w=I;if(d=d+4|0,f[d>>2]=f[d>>2]&-2,f[k+4>>2]=w|1,f[k+w>>2]=w,d=w>>>3,w>>>0<256){m=27964+(d<<1<<2)|0,p=f[6981]|0,d=1<<d,p&d?(p=m+8|0,d=f[p>>2]|0):(f[6981]=p|d,d=m,p=m+8|0),f[p>>2]=k,f[d+12>>2]=k,f[k+8>>2]=d,f[k+12>>2]=m;break}d=w>>>8;do if(!d)v=0;else{if(w>>>0>16777215){v=31;break}fe=(d+1048320|0)>>>16&8,ne=d<<fe,me=(ne+520192|0)>>>16&4,ne=ne<<me,v=(ne+245760|0)>>>16&2,v=14-(me|fe|v)+(ne<<v>>>15)|0,v=w>>>(v+7|0)&1|v<<1}while(!1);if(d=28228+(v<<2)|0,f[k+28>>2]=v,p=k+16|0,f[p+4>>2]=0,f[p>>2]=0,p=f[6982]|0,m=1<<v,!(p&m)){f[6982]=p|m,f[d>>2]=k,f[k+24>>2]=d,f[k+12>>2]=k,f[k+8>>2]=k;break}d=f[d>>2]|0;i:do if((f[d+4>>2]&-8|0)!=(w|0)){for(v=w<<((v|0)==31?0:25-(v>>>1)|0);m=d+16+(v>>>31<<2)|0,p=f[m>>2]|0,!!p;)if((f[p+4>>2]&-8|0)==(w|0)){d=p;break i}else v=v<<1,d=p;f[m>>2]=k,f[k+24>>2]=d,f[k+12>>2]=k,f[k+8>>2]=k;break t}while(!1);fe=d+8|0,ne=f[fe>>2]|0,f[ne+12>>2]=k,f[fe>>2]=k,f[k+8>>2]=ne,f[k+12>>2]=d,f[k+24>>2]=0}while(!1);return ne=N+8|0,L=Ve,ne|0}for(d=28372;p=f[d>>2]|0,!(p>>>0<=T>>>0&&(ne=p+(f[d+4>>2]|0)|0,ne>>>0>T>>>0));)d=f[d+8>>2]|0;w=ne+-47|0,p=w+8|0,p=w+((p&7|0)==0?0:0-p&7)|0,w=T+16|0,p=p>>>0<w>>>0?T:p,d=p+8|0,m=$+-40|0,me=x+8|0,me=(me&7|0)==0?0:0-me&7,fe=x+me|0,me=m-me|0,f[6987]=fe,f[6984]=me,f[fe+4>>2]=me|1,f[x+m+4>>2]=40,f[6988]=f[7103],m=p+4|0,f[m>>2]=27,f[d>>2]=f[7093],f[d+4>>2]=f[7094],f[d+8>>2]=f[7095],f[d+12>>2]=f[7096],f[7093]=x,f[7094]=$,f[7096]=0,f[7095]=d,d=p+24|0;do fe=d,d=d+4|0,f[d>>2]=7;while((fe+8|0)>>>0<ne>>>0);if((p|0)!=(T|0)){if(x=p-T|0,f[m>>2]=f[m>>2]&-2,f[T+4>>2]=x|1,f[p>>2]=x,d=x>>>3,x>>>0<256){m=27964+(d<<1<<2)|0,p=f[6981]|0,d=1<<d,p&d?(p=m+8|0,d=f[p>>2]|0):(f[6981]=p|d,d=m,p=m+8|0),f[p>>2]=T,f[d+12>>2]=T,f[T+8>>2]=d,f[T+12>>2]=m;break}if(d=x>>>8,d?x>>>0>16777215?v=31:(fe=(d+1048320|0)>>>16&8,ne=d<<fe,me=(ne+520192|0)>>>16&4,ne=ne<<me,v=(ne+245760|0)>>>16&2,v=14-(me|fe|v)+(ne<<v>>>15)|0,v=x>>>(v+7|0)&1|v<<1):v=0,m=28228+(v<<2)|0,f[T+28>>2]=v,f[T+20>>2]=0,f[w>>2]=0,d=f[6982]|0,p=1<<v,!(d&p)){f[6982]=d|p,f[m>>2]=T,f[T+24>>2]=m,f[T+12>>2]=T,f[T+8>>2]=T;break}d=f[m>>2]|0;t:do if((f[d+4>>2]&-8|0)!=(x|0)){for(v=x<<((v|0)==31?0:25-(v>>>1)|0);m=d+16+(v>>>31<<2)|0,p=f[m>>2]|0,!!p;)if((f[p+4>>2]&-8|0)==(x|0)){d=p;break t}else v=v<<1,d=p;f[m>>2]=T,f[T+24>>2]=d,f[T+12>>2]=T,f[T+8>>2]=T;break e}while(!1);fe=d+8|0,ne=f[fe>>2]|0,f[ne+12>>2]=T,f[fe>>2]=T,f[T+8>>2]=ne,f[T+12>>2]=d,f[T+24>>2]=0}}else ne=f[6985]|0,(ne|0)==0|x>>>0<ne>>>0&&(f[6985]=x),f[7093]=x,f[7094]=$,f[7096]=0,f[6990]=f[7099],f[6989]=-1,f[6994]=27964,f[6993]=27964,f[6996]=27972,f[6995]=27972,f[6998]=27980,f[6997]=27980,f[7e3]=27988,f[6999]=27988,f[7002]=27996,f[7001]=27996,f[7004]=28004,f[7003]=28004,f[7006]=28012,f[7005]=28012,f[7008]=28020,f[7007]=28020,f[7010]=28028,f[7009]=28028,f[7012]=28036,f[7011]=28036,f[7014]=28044,f[7013]=28044,f[7016]=28052,f[7015]=28052,f[7018]=28060,f[7017]=28060,f[7020]=28068,f[7019]=28068,f[7022]=28076,f[7021]=28076,f[7024]=28084,f[7023]=28084,f[7026]=28092,f[7025]=28092,f[7028]=28100,f[7027]=28100,f[7030]=28108,f[7029]=28108,f[7032]=28116,f[7031]=28116,f[7034]=28124,f[7033]=28124,f[7036]=28132,f[7035]=28132,f[7038]=28140,f[7037]=28140,f[7040]=28148,f[7039]=28148,f[7042]=28156,f[7041]=28156,f[7044]=28164,f[7043]=28164,f[7046]=28172,f[7045]=28172,f[7048]=28180,f[7047]=28180,f[7050]=28188,f[7049]=28188,f[7052]=28196,f[7051]=28196,f[7054]=28204,f[7053]=28204,f[7056]=28212,f[7055]=28212,ne=$+-40|0,me=x+8|0,me=(me&7|0)==0?0:0-me&7,fe=x+me|0,me=ne-me|0,f[6987]=fe,f[6984]=me,f[fe+4>>2]=me|1,f[x+ne+4>>2]=40,f[6988]=f[7103];while(!1);if(d=f[6984]|0,d>>>0>H>>>0)return me=d-H|0,f[6984]=me,ne=f[6987]|0,fe=ne+H|0,f[6987]=fe,f[fe+4>>2]=me|1,f[ne+4>>2]=H|3,ne=ne+8|0,L=Ve,ne|0}return ne=xme()|0,f[ne>>2]=12,ne=0,L=Ve,ne|0}function bt(p){p=p|0;var d=0,m=0,v=0,w=0,x=0,$=0,I=0,T=0;if(p){m=p+-8|0,w=f[6985]|0,p=f[p+-4>>2]|0,d=p&-8,T=m+d|0;do if(p&1)I=m,$=m;else{if(v=f[m>>2]|0,!(p&3)||($=m+(0-v)|0,x=v+d|0,$>>>0<w>>>0))return;if((f[6986]|0)==($|0)){if(p=T+4|0,d=f[p>>2]|0,(d&3|0)!=3){I=$,d=x;break}f[6983]=x,f[p>>2]=d&-2,f[$+4>>2]=x|1,f[$+x>>2]=x;return}if(m=v>>>3,v>>>0<256)if(p=f[$+8>>2]|0,d=f[$+12>>2]|0,(d|0)==(p|0)){f[6981]=f[6981]&~(1<<m),I=$,d=x;break}else{f[p+12>>2]=d,f[d+8>>2]=p,I=$,d=x;break}w=f[$+24>>2]|0,p=f[$+12>>2]|0;do if((p|0)==($|0)){if(d=$+16|0,m=d+4|0,p=f[m>>2]|0,p)d=m;else if(p=f[d>>2]|0,!p){p=0;break}for(;;)if(v=p+20|0,m=f[v>>2]|0,m)p=m,d=v;else if(v=p+16|0,m=f[v>>2]|0,m)p=m,d=v;else break;f[d>>2]=0}else I=f[$+8>>2]|0,f[I+12>>2]=p,f[p+8>>2]=I;while(!1);if(w){if(d=f[$+28>>2]|0,m=28228+(d<<2)|0,(f[m>>2]|0)==($|0)){if(f[m>>2]=p,!p){f[6982]=f[6982]&~(1<<d),I=$,d=x;break}}else if(I=w+16|0,f[((f[I>>2]|0)==($|0)?I:w+20|0)>>2]=p,!p){I=$,d=x;break}f[p+24>>2]=w,d=$+16|0,m=f[d>>2]|0,m|0&&(f[p+16>>2]=m,f[m+24>>2]=p),d=f[d+4>>2]|0,d?(f[p+20>>2]=d,f[d+24>>2]=p,I=$,d=x):(I=$,d=x)}else I=$,d=x}while(!1);if(!($>>>0>=T>>>0)&&(p=T+4|0,v=f[p>>2]|0,!!(v&1))){if(v&2)f[p>>2]=v&-2,f[I+4>>2]=d|1,f[$+d>>2]=d,w=d;else{if((f[6987]|0)==(T|0)){if(T=(f[6984]|0)+d|0,f[6984]=T,f[6987]=I,f[I+4>>2]=T|1,(I|0)!=(f[6986]|0))return;f[6986]=0,f[6983]=0;return}if((f[6986]|0)==(T|0)){T=(f[6983]|0)+d|0,f[6983]=T,f[6986]=$,f[I+4>>2]=T|1,f[$+T>>2]=T;return}w=(v&-8)+d|0,m=v>>>3;do if(v>>>0<256)if(d=f[T+8>>2]|0,p=f[T+12>>2]|0,(p|0)==(d|0)){f[6981]=f[6981]&~(1<<m);break}else{f[d+12>>2]=p,f[p+8>>2]=d;break}else{x=f[T+24>>2]|0,p=f[T+12>>2]|0;do if((p|0)==(T|0)){if(d=T+16|0,m=d+4|0,p=f[m>>2]|0,p)d=m;else if(p=f[d>>2]|0,!p){m=0;break}for(;;)if(v=p+20|0,m=f[v>>2]|0,m)p=m,d=v;else if(v=p+16|0,m=f[v>>2]|0,m)p=m,d=v;else break;f[d>>2]=0,m=p}else m=f[T+8>>2]|0,f[m+12>>2]=p,f[p+8>>2]=m,m=p;while(!1);if(x|0){if(p=f[T+28>>2]|0,d=28228+(p<<2)|0,(f[d>>2]|0)==(T|0)){if(f[d>>2]=m,!m){f[6982]=f[6982]&~(1<<p);break}}else if(v=x+16|0,f[((f[v>>2]|0)==(T|0)?v:x+20|0)>>2]=m,!m)break;f[m+24>>2]=x,p=T+16|0,d=f[p>>2]|0,d|0&&(f[m+16>>2]=d,f[d+24>>2]=m),p=f[p+4>>2]|0,p|0&&(f[m+20>>2]=p,f[p+24>>2]=m)}}while(!1);if(f[I+4>>2]=w|1,f[$+w>>2]=w,(I|0)==(f[6986]|0)){f[6983]=w;return}}if(p=w>>>3,w>>>0<256){m=27964+(p<<1<<2)|0,d=f[6981]|0,p=1<<p,d&p?(d=m+8|0,p=f[d>>2]|0):(f[6981]=d|p,p=m,d=m+8|0),f[d>>2]=I,f[p+12>>2]=I,f[I+8>>2]=p,f[I+12>>2]=m;return}p=w>>>8,p?w>>>0>16777215?v=31:($=(p+1048320|0)>>>16&8,T=p<<$,x=(T+520192|0)>>>16&4,T=T<<x,v=(T+245760|0)>>>16&2,v=14-(x|$|v)+(T<<v>>>15)|0,v=w>>>(v+7|0)&1|v<<1):v=0,p=28228+(v<<2)|0,f[I+28>>2]=v,f[I+20>>2]=0,f[I+16>>2]=0,d=f[6982]|0,m=1<<v;e:do if(!(d&m))f[6982]=d|m,f[p>>2]=I,f[I+24>>2]=p,f[I+12>>2]=I,f[I+8>>2]=I;else{p=f[p>>2]|0;t:do if((f[p+4>>2]&-8|0)!=(w|0)){for(v=w<<((v|0)==31?0:25-(v>>>1)|0);m=p+16+(v>>>31<<2)|0,d=f[m>>2]|0,!!d;)if((f[d+4>>2]&-8|0)==(w|0)){p=d;break t}else v=v<<1,p=d;f[m>>2]=I,f[I+24>>2]=p,f[I+12>>2]=I,f[I+8>>2]=I;break e}while(!1);$=p+8|0,T=f[$>>2]|0,f[T+12>>2]=I,f[$>>2]=I,f[I+8>>2]=T,f[I+12>>2]=p,f[I+24>>2]=0}while(!1);if(T=(f[6989]|0)+-1|0,f[6989]=T,!(T|0)){for(p=28380;p=f[p>>2]|0,p;)p=p+8|0;f[6989]=-1}}}}function mo(p,d){p=p|0,d=d|0;var m=0;return p?(m=Ta(d,p)|0,(d|p)>>>0>65535&&(m=((m>>>0)/(p>>>0)|0|0)==(d|0)?m:-1)):m=0,p=Ac(m)|0,!p||!(f[p+-4>>2]&3)||Jd(p|0,0,m|0)|0,p|0}function gt(p,d,m,v){return p=p|0,d=d|0,m=m|0,v=v|0,m=p+m>>>0,zt(d+v+(m>>>0<p>>>0|0)>>>0|0),m|0|0}function Os(p,d,m,v){return p=p|0,d=d|0,m=m|0,v=v|0,v=d-v-(m>>>0>p>>>0|0)>>>0,zt(v|0),p-m>>>0|0|0}function P9(p){return p=p|0,(p?31-(Al(p^p-1)|0)|0:32)|0}function RL(p,d,m,v,w){p=p|0,d=d|0,m=m|0,v=v|0,w=w|0;var x=0,$=0,I=0,T=0,k=0,N=0,H=0,J=0,Z=0,Y=0;if(N=p,T=d,k=T,$=m,J=v,I=J,!k)return x=(w|0)!=0,I?x?(f[w>>2]=p|0,f[w+4>>2]=d&0,J=0,w=0,zt(J|0),w|0):(J=0,w=0,zt(J|0),w|0):(x&&(f[w>>2]=(N>>>0)%($>>>0),f[w+4>>2]=0),J=0,w=(N>>>0)/($>>>0)>>>0,zt(J|0),w|0);x=(I|0)==0;do if($){if(!x){if(x=(Al(I|0)|0)-(Al(k|0)|0)|0,x>>>0<=31){H=x+1|0,I=31-x|0,d=x-31>>31,$=H,p=N>>>(H>>>0)&d|k<<I,d=k>>>(H>>>0)&d,x=0,I=N<<I;break}return w?(f[w>>2]=p|0,f[w+4>>2]=T|d&0,J=0,w=0,zt(J|0),w|0):(J=0,w=0,zt(J|0),w|0)}if(x=$-1|0,x&$|0){I=(Al($|0)|0)+33-(Al(k|0)|0)|0,Y=64-I|0,H=32-I|0,T=H>>31,Z=I-32|0,d=Z>>31,$=I,p=H-1>>31&k>>>(Z>>>0)|(k<<H|N>>>(I>>>0))&d,d=d&k>>>(I>>>0),x=N<<Y&T,I=(k<<Y|N>>>(Z>>>0))&T|N<<H&I-33>>31;break}return w|0&&(f[w>>2]=x&N,f[w+4>>2]=0),($|0)==1?(Z=T|d&0,Y=p|0|0,zt(Z|0),Y|0):(Y=P9($|0)|0,Z=k>>>(Y>>>0)|0,Y=k<<32-Y|N>>>(Y>>>0)|0,zt(Z|0),Y|0)}else{if(x)return w|0&&(f[w>>2]=(k>>>0)%($>>>0),f[w+4>>2]=0),Z=0,Y=(k>>>0)/($>>>0)>>>0,zt(Z|0),Y|0;if(!N)return w|0&&(f[w>>2]=0,f[w+4>>2]=(k>>>0)%(I>>>0)),Z=0,Y=(k>>>0)/(I>>>0)>>>0,zt(Z|0),Y|0;if(x=I-1|0,!(x&I))return w|0&&(f[w>>2]=p|0,f[w+4>>2]=x&k|d&0),Z=0,Y=k>>>((P9(I|0)|0)>>>0),zt(Z|0),Y|0;if(x=(Al(I|0)|0)-(Al(k|0)|0)|0,x>>>0<=30){d=x+1|0,I=31-x|0,$=d,p=k<<I|N>>>(d>>>0),d=k>>>(d>>>0),x=0,I=N<<I;break}return w?(f[w>>2]=p|0,f[w+4>>2]=T|d&0,Z=0,Y=0,zt(Z|0),Y|0):(Z=0,Y=0,zt(Z|0),Y|0)}while(!1);if(!$)k=I,T=0,I=0;else{H=m|0|0,N=J|v&0,k=gt(H|0,N|0,-1,-1)|0,m=q()|0,T=I,I=0;do v=T,T=x>>>31|T<<1,x=I|x<<1,v=p<<1|v>>>31|0,J=p>>>31|d<<1|0,Os(k|0,m|0,v|0,J|0)|0,Y=q()|0,Z=Y>>31|((Y|0)<0?-1:0)<<1,I=Z&1,p=Os(v|0,J|0,Z&H|0,(((Y|0)<0?-1:0)>>31|((Y|0)<0?-1:0)<<1)&N|0)|0,d=q()|0,$=$-1|0;while(($|0)!=0);k=T,T=0}return $=0,w|0&&(f[w>>2]=p,f[w+4>>2]=d),Z=(x|0)>>>31|(k|$)<<1|($<<1|x>>>31)&0|T,Y=(x<<1|0)&-2|I,zt(Z|0),Y|0}function Qd(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0;return k=d>>31|((d|0)<0?-1:0)<<1,T=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1,x=v>>31|((v|0)<0?-1:0)<<1,w=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,I=Os(k^p|0,T^d|0,k|0,T|0)|0,$=q()|0,p=x^k,d=w^T,Os((RL(I,$,Os(x^m|0,w^v|0,x|0,w|0)|0,q()|0,0)|0)^p|0,(q()|0)^d|0,p|0,d|0)|0}function $me(p,d){p=p|0,d=d|0;var m=0,v=0,w=0,x=0;return x=p&65535,w=d&65535,m=Ta(w,x)|0,v=p>>>16,p=(m>>>16)+(Ta(w,v)|0)|0,w=d>>>16,d=Ta(w,x)|0,zt((p>>>16)+(Ta(w,v)|0)+(((p&65535)+d|0)>>>16)|0),p+d<<16|m&65535|0|0}function Ds(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0;return w=p,x=m,m=$me(w,x)|0,p=q()|0,zt((Ta(d,x)|0)+(Ta(v,w)|0)+p|p&0|0),m|0|0|0}function sy(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0,$=0,I=0,T=0,k=0;return w=L,L=L+16|0,I=w|0,$=d>>31|((d|0)<0?-1:0)<<1,x=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1,k=v>>31|((v|0)<0?-1:0)<<1,T=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,p=Os($^p|0,x^d|0,$|0,x|0)|0,d=q()|0,RL(p,d,Os(k^m|0,T^v|0,k|0,T|0)|0,q()|0,I)|0,v=Os(f[I>>2]^$|0,f[I+4>>2]^x|0,$|0,x|0)|0,m=q()|0,L=w,zt(m|0),v|0}function ny(p,d,m,v){p=p|0,d=d|0,m=m|0,v=v|0;var w=0,x=0;return x=L,L=L+16|0,w=x|0,RL(p,d,m,v,w)|0,L=x,zt(f[w+4>>2]|0),f[w>>2]|0|0}function L9(p,d,m){return p=p|0,d=d|0,m=m|0,(m|0)<32?(zt(d>>m|0),p>>>m|(d&(1<<m)-1)<<32-m):(zt(((d|0)<0?-1:0)|0),d>>m-32|0)}function Re(p,d,m){return p=p|0,d=d|0,m=m|0,(m|0)<32?(zt(d>>>m|0),p>>>m|(d&(1<<m)-1)<<32-m):(zt(0),d>>>m-32|0)}function Be(p,d,m){return p=p|0,d=d|0,m=m|0,(m|0)<32?(zt(d<<m|(p&(1<<m)-1<<32-m)>>>32-m|0),p<<m):(zt(p<<m-32|0),0)}function OL(p,d,m){return p=p|0,d=d|0,d=Al(d)|0,(d|0)==32&&(d=d+(Al(p)|0)|0),zt(0),d|0}function R9(p,d){return p=+p,d=+d,p!=p?+d:d!=d?+p:+aL(+p,+d)}function w$(p,d){return p=+p,d=+d,p!=p?+d:d!=d?+p:+K0(+p,+d)}function _$(p){return p=+p,p>=0?+qi(p+.5):+sr(p-.5)}function oy(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0;if((m|0)>=8192)return cL(p|0,d|0,m|0)|0,p|0;if(x=p|0,w=p+m|0,(p&3)==(d&3)){for(;p&3;){if(!m)return x|0;Le[p>>0]=Le[d>>0]|0,p=p+1|0,d=d+1|0,m=m-1|0}for(m=w&-4|0,v=m-64|0;(p|0)<=(v|0);)f[p>>2]=f[d>>2],f[p+4>>2]=f[d+4>>2],f[p+8>>2]=f[d+8>>2],f[p+12>>2]=f[d+12>>2],f[p+16>>2]=f[d+16>>2],f[p+20>>2]=f[d+20>>2],f[p+24>>2]=f[d+24>>2],f[p+28>>2]=f[d+28>>2],f[p+32>>2]=f[d+32>>2],f[p+36>>2]=f[d+36>>2],f[p+40>>2]=f[d+40>>2],f[p+44>>2]=f[d+44>>2],f[p+48>>2]=f[d+48>>2],f[p+52>>2]=f[d+52>>2],f[p+56>>2]=f[d+56>>2],f[p+60>>2]=f[d+60>>2],p=p+64|0,d=d+64|0;for(;(p|0)<(m|0);)f[p>>2]=f[d>>2],p=p+4|0,d=d+4|0}else for(m=w-4|0;(p|0)<(m|0);)Le[p>>0]=Le[d>>0]|0,Le[p+1>>0]=Le[d+1>>0]|0,Le[p+2>>0]=Le[d+2>>0]|0,Le[p+3>>0]=Le[d+3>>0]|0,p=p+4|0,d=d+4|0;for(;(p|0)<(w|0);)Le[p>>0]=Le[d>>0]|0,p=p+1|0,d=d+1|0;return x|0}function Jd(p,d,m){p=p|0,d=d|0,m=m|0;var v=0,w=0,x=0,$=0;if(x=p+m|0,d=d&255,(m|0)>=67){for(;p&3;)Le[p>>0]=d,p=p+1|0;for(v=x&-4|0,$=d|d<<8|d<<16|d<<24,w=v-64|0;(p|0)<=(w|0);)f[p>>2]=$,f[p+4>>2]=$,f[p+8>>2]=$,f[p+12>>2]=$,f[p+16>>2]=$,f[p+20>>2]=$,f[p+24>>2]=$,f[p+28>>2]=$,f[p+32>>2]=$,f[p+36>>2]=$,f[p+40>>2]=$,f[p+44>>2]=$,f[p+48>>2]=$,f[p+52>>2]=$,f[p+56>>2]=$,f[p+60>>2]=$,p=p+64|0;for(;(p|0)<(v|0);)f[p>>2]=$,p=p+4|0}for(;(p|0)<(x|0);)Le[p>>0]=d,p=p+1|0;return x-m|0}function O9(p){return p=+p,p>=0?+qi(p+.5):+sr(p-.5)}function Zd(p){p=p|0;var d=0,m=0,v=0;return v=lL()|0,m=f[wi>>2]|0,d=m+p|0,(p|0)>0&(d|0)<(m|0)|(d|0)<0?(p$(d|0)|0,Un(12),-1):(d|0)>(v|0)&&!(Q1(d|0)|0)?(Un(12),-1):(f[wi>>2]=d,m|0)}return{___divdi3:Qd,___muldi3:Ds,___remdi3:sy,___uremdi3:ny,_areNeighborCells:pAe,_bitshift64Ashr:L9,_bitshift64Lshr:Re,_bitshift64Shl:Be,_calloc:mo,_cellAreaKm2:qAe,_cellAreaM2:WAe,_cellAreaRads2:ML,_cellToBoundary:iy,_cellToCenterChild:p9,_cellToChildPos:NAe,_cellToChildren:CAe,_cellToChildrenSize:Z1,_cellToLatLng:nA,_cellToLocalIj:eme,_cellToParent:_L,_cellToVertex:ka,_cellToVertexes:vme,_cellsToDirectedEdge:fAe,_cellsToLinkedMultiPolygon:Qfe,_childPosToCell:FAe,_compactCells:TAe,_constructCell:EAe,_destroyLinkedMultiPolygon:g9,_directedEdgeToBoundary:y$,_directedEdgeToCells:yAe,_edgeLengthKm:JAe,_edgeLengthM:ZAe,_edgeLengthRads:QAe,_emscripten_replace_memory:we,_free:bt,_getBaseCellNumber:h9,_getDirectedEdgeDestination:mAe,_getDirectedEdgeOrigin:AAe,_getHexagonAreaAvgKm2:m9,_getHexagonAreaAvgM2:VAe,_getHexagonEdgeLengthAvgKm:GAe,_getHexagonEdgeLengthAvgM:HAe,_getIcosahedronFaces:f9,_getIndexDigit:$Ae,_getNumCells:g$,_getPentagons:IL,_getRes0Cells:Kfe,_getResolution:xAe,_greatCircleDistanceKm:X1,_greatCircleDistanceM:BAe,_greatCircleDistanceRads:zAe,_gridDisk:gs,_gridDiskDistances:Hj,_gridDistance:ime,_gridPathCells:sme,_gridPathCellsSize:rme,_gridRing:Vfe,_gridRingUnsafe:Wj,_i64Add:gt,_i64Subtract:Os,_isPentagon:Bi,_isResClassIII:PAe,_isValidCell:bL,_isValidDirectedEdge:l9,_isValidIndex:IAe,_isValidVertex:I9,_latLngToCell:$L,_llvm_ctlz_i64:OL,_llvm_maxnum_f64:R9,_llvm_minnum_f64:w$,_llvm_round_f64:_$,_localIjToCell:tme,_malloc:Ac,_maxFaceCount:OAe,_maxGridDiskSize:Xr,_maxPolygonToCellsSize:Hfe,_maxPolygonToCellsSizeExperimental:ame,_memcpy:oy,_memset:Jd,_originToDirectedEdges:gAe,_pentagonCount:DAe,_polygonToCells:qfe,_polygonToCellsExperimental:ome,_readInt64AsDoubleFromPointer:Ame,_res0CellCount:Xfe,_round:O9,_sbrk:Zd,_sizeOfCellBoundary:ume,_sizeOfCoordIJ:fme,_sizeOfGeoLoop:hme,_sizeOfGeoPolygon:dme,_sizeOfH3Index:lme,_sizeOfLatLng:cme,_sizeOfLinkedGeoPolygon:pme,_uncompactCells:MAe,_uncompactCellsSize:kAe,_vertexToLatLng:bme,establishStackSpace:mr,stackAlloc:Ue,stackRestore:_i,stackSave:$t}})(iL,rL,de);e.___divdi3=Fe.___divdi3,e.___muldi3=Fe.___muldi3,e.___remdi3=Fe.___remdi3,e.___uremdi3=Fe.___uremdi3,e._areNeighborCells=Fe._areNeighborCells,e._bitshift64Ashr=Fe._bitshift64Ashr,e._bitshift64Lshr=Fe._bitshift64Lshr,e._bitshift64Shl=Fe._bitshift64Shl,e._calloc=Fe._calloc,e._cellAreaKm2=Fe._cellAreaKm2,e._cellAreaM2=Fe._cellAreaM2,e._cellAreaRads2=Fe._cellAreaRads2,e._cellToBoundary=Fe._cellToBoundary,e._cellToCenterChild=Fe._cellToCenterChild,e._cellToChildPos=Fe._cellToChildPos,e._cellToChildren=Fe._cellToChildren,e._cellToChildrenSize=Fe._cellToChildrenSize,e._cellToLatLng=Fe._cellToLatLng,e._cellToLocalIj=Fe._cellToLocalIj,e._cellToParent=Fe._cellToParent,e._cellToVertex=Fe._cellToVertex,e._cellToVertexes=Fe._cellToVertexes,e._cellsToDirectedEdge=Fe._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=Fe._cellsToLinkedMultiPolygon,e._childPosToCell=Fe._childPosToCell,e._compactCells=Fe._compactCells,e._constructCell=Fe._constructCell,e._destroyLinkedMultiPolygon=Fe._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=Fe._directedEdgeToBoundary,e._directedEdgeToCells=Fe._directedEdgeToCells,e._edgeLengthKm=Fe._edgeLengthKm,e._edgeLengthM=Fe._edgeLengthM,e._edgeLengthRads=Fe._edgeLengthRads;var sL=e._emscripten_replace_memory=Fe._emscripten_replace_memory;e._free=Fe._free,e._getBaseCellNumber=Fe._getBaseCellNumber,e._getDirectedEdgeDestination=Fe._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=Fe._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=Fe._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=Fe._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=Fe._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=Fe._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=Fe._getIcosahedronFaces,e._getIndexDigit=Fe._getIndexDigit,e._getNumCells=Fe._getNumCells,e._getPentagons=Fe._getPentagons,e._getRes0Cells=Fe._getRes0Cells,e._getResolution=Fe._getResolution,e._greatCircleDistanceKm=Fe._greatCircleDistanceKm,e._greatCircleDistanceM=Fe._greatCircleDistanceM,e._greatCircleDistanceRads=Fe._greatCircleDistanceRads,e._gridDisk=Fe._gridDisk,e._gridDiskDistances=Fe._gridDiskDistances,e._gridDistance=Fe._gridDistance,e._gridPathCells=Fe._gridPathCells,e._gridPathCellsSize=Fe._gridPathCellsSize,e._gridRing=Fe._gridRing,e._gridRingUnsafe=Fe._gridRingUnsafe,e._i64Add=Fe._i64Add,e._i64Subtract=Fe._i64Subtract,e._isPentagon=Fe._isPentagon,e._isResClassIII=Fe._isResClassIII,e._isValidCell=Fe._isValidCell,e._isValidDirectedEdge=Fe._isValidDirectedEdge,e._isValidIndex=Fe._isValidIndex,e._isValidVertex=Fe._isValidVertex,e._latLngToCell=Fe._latLngToCell,e._llvm_ctlz_i64=Fe._llvm_ctlz_i64,e._llvm_maxnum_f64=Fe._llvm_maxnum_f64,e._llvm_minnum_f64=Fe._llvm_minnum_f64,e._llvm_round_f64=Fe._llvm_round_f64,e._localIjToCell=Fe._localIjToCell,e._malloc=Fe._malloc,e._maxFaceCount=Fe._maxFaceCount,e._maxGridDiskSize=Fe._maxGridDiskSize,e._maxPolygonToCellsSize=Fe._maxPolygonToCellsSize,e._maxPolygonToCellsSizeExperimental=Fe._maxPolygonToCellsSizeExperimental,e._memcpy=Fe._memcpy,e._memset=Fe._memset,e._originToDirectedEdges=Fe._originToDirectedEdges,e._pentagonCount=Fe._pentagonCount,e._polygonToCells=Fe._polygonToCells,e._polygonToCellsExperimental=Fe._polygonToCellsExperimental,e._readInt64AsDoubleFromPointer=Fe._readInt64AsDoubleFromPointer,e._res0CellCount=Fe._res0CellCount,e._round=Fe._round,e._sbrk=Fe._sbrk,e._sizeOfCellBoundary=Fe._sizeOfCellBoundary,e._sizeOfCoordIJ=Fe._sizeOfCoordIJ,e._sizeOfGeoLoop=Fe._sizeOfGeoLoop,e._sizeOfGeoPolygon=Fe._sizeOfGeoPolygon,e._sizeOfH3Index=Fe._sizeOfH3Index,e._sizeOfLatLng=Fe._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=Fe._sizeOfLinkedGeoPolygon,e._uncompactCells=Fe._uncompactCells,e._uncompactCellsSize=Fe._uncompactCellsSize,e._vertexToLatLng=Fe._vertexToLatLng,e.establishStackSpace=Fe.establishStackSpace;var u$=e.stackAlloc=Fe.stackAlloc,nL=e.stackRestore=Fe.stackRestore,oL=e.stackSave=Fe.stackSave;if(e.asm=Fe,e.cwrap=D,e.setValue=_,e.getValue=S,Ls){l$(Ls)||(Ls=n(Ls));{o$();var H1=function(ge){ge.byteLength&&(ge=new Uint8Array(ge)),xe.set(ge,g),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,a$()},h$=function(){o(Ls,H1,function(){throw"could not load memory initializer "+Ls})},d$=G1(Ls);if(d$)H1(d$.buffer);else if(e.memoryInitializerRequest){var _e=function(){var ge=e.memoryInitializerRequest,Pe=ge.response;if(ge.status!==200&&ge.status!==0){var Ee=G1(e.memoryInitializerRequestURL);if(Ee)Pe=Ee.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+ge.status+", retrying "+Ls),h$();return}}H1(Pe)};e.memoryInitializerRequest.response?setTimeout(_e,0):e.memoryInitializerRequest.addEventListener("load",_e)}else h$()}}var Ri;eA=function ge(){Ri||pc(),Ri||(eA=ge)};function pc(ge){if(rh>0||(pn(),rh>0))return;function Pe(){Ri||(Ri=!0,!E&&(fl(),po(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),J0()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),Pe()},1)):Pe()}e.run=pc;function Ca(ge){throw e.onAbort&&e.onAbort(ge),ge+="",a(ge),l(ge),E=!0,"abort("+ge+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=Ca,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return pc(),t})(typeof Bf=="object"?Bf:{}),kt="number",Ct=kt,my=kt,Dt=kt,Nt=kt,Fs=kt,st=kt,pPe=[["sizeOfH3Index",kt],["sizeOfLatLng",kt],["sizeOfCellBoundary",kt],["sizeOfGeoLoop",kt],["sizeOfGeoPolygon",kt],["sizeOfLinkedGeoPolygon",kt],["sizeOfCoordIJ",kt],["readInt64AsDoubleFromPointer",kt],["isValidCell",my,[Dt,Nt]],["isValidIndex",my,[Dt,Nt]],["latLngToCell",Ct,[kt,kt,Fs,st]],["cellToLatLng",Ct,[Dt,Nt,st]],["cellToBoundary",Ct,[Dt,Nt,st]],["maxGridDiskSize",Ct,[kt,st]],["gridDisk",Ct,[Dt,Nt,kt,st]],["gridDiskDistances",Ct,[Dt,Nt,kt,st,st]],["gridRing",Ct,[Dt,Nt,kt,st]],["gridRingUnsafe",Ct,[Dt,Nt,kt,st]],["maxPolygonToCellsSize",Ct,[st,Fs,kt,st]],["polygonToCells",Ct,[st,Fs,kt,st]],["maxPolygonToCellsSizeExperimental",Ct,[st,Fs,kt,st]],["polygonToCellsExperimental",Ct,[st,Fs,kt,kt,kt,st]],["cellsToLinkedMultiPolygon",Ct,[st,kt,st]],["destroyLinkedMultiPolygon",null,[st]],["compactCells",Ct,[st,st,kt,kt]],["uncompactCells",Ct,[st,kt,kt,st,kt,Fs]],["uncompactCellsSize",Ct,[st,kt,kt,Fs,st]],["isPentagon",my,[Dt,Nt]],["isResClassIII",my,[Dt,Nt]],["getBaseCellNumber",kt,[Dt,Nt]],["getResolution",kt,[Dt,Nt]],["getIndexDigit",kt,[Dt,Nt,kt]],["constructCell",Ct,[kt,kt,st,st]],["maxFaceCount",Ct,[Dt,Nt,st]],["getIcosahedronFaces",Ct,[Dt,Nt,st]],["cellToParent",Ct,[Dt,Nt,Fs,st]],["cellToChildren",Ct,[Dt,Nt,Fs,st]],["cellToCenterChild",Ct,[Dt,Nt,Fs,st]],["cellToChildrenSize",Ct,[Dt,Nt,Fs,st]],["cellToChildPos",Ct,[Dt,Nt,Fs,st]],["childPosToCell",Ct,[kt,kt,Dt,Nt,Fs,st]],["areNeighborCells",Ct,[Dt,Nt,Dt,Nt,st]],["cellsToDirectedEdge",Ct,[Dt,Nt,Dt,Nt,st]],["getDirectedEdgeOrigin",Ct,[Dt,Nt,st]],["getDirectedEdgeDestination",Ct,[Dt,Nt,st]],["isValidDirectedEdge",my,[Dt,Nt]],["directedEdgeToCells",Ct,[Dt,Nt,st]],["originToDirectedEdges",Ct,[Dt,Nt,st]],["directedEdgeToBoundary",Ct,[Dt,Nt,st]],["gridDistance",Ct,[Dt,Nt,Dt,Nt,st]],["gridPathCells",Ct,[Dt,Nt,Dt,Nt,st]],["gridPathCellsSize",Ct,[Dt,Nt,Dt,Nt,st]],["cellToLocalIj",Ct,[Dt,Nt,Dt,Nt,kt,st]],["localIjToCell",Ct,[Dt,Nt,st,kt,st]],["getHexagonAreaAvgM2",Ct,[Fs,st]],["getHexagonAreaAvgKm2",Ct,[Fs,st]],["getHexagonEdgeLengthAvgM",Ct,[Fs,st]],["getHexagonEdgeLengthAvgKm",Ct,[Fs,st]],["greatCircleDistanceM",kt,[st,st]],["greatCircleDistanceKm",kt,[st,st]],["greatCircleDistanceRads",kt,[st,st]],["cellAreaM2",Ct,[Dt,Nt,st]],["cellAreaKm2",Ct,[Dt,Nt,st]],["cellAreaRads2",Ct,[Dt,Nt,st]],["edgeLengthM",Ct,[Dt,Nt,st]],["edgeLengthKm",Ct,[Dt,Nt,st]],["edgeLengthRads",Ct,[Dt,Nt,st]],["getNumCells",Ct,[Fs,st]],["getRes0Cells",Ct,[st]],["res0CellCount",kt],["getPentagons",Ct,[kt,st]],["pentagonCount",kt],["cellToVertex",Ct,[Dt,Nt,kt,st]],["cellToVertexes",Ct,[Dt,Nt,st]],["vertexToLatLng",Ct,[Dt,Nt,st]],["isValidVertex",my,[Dt,Nt]]],fPe=0,APe=1,mPe=2,yPe=3,gPe=4,vPe=5,bPe=6,wPe=7,_Pe=8,SPe=9,xPe=10,$Pe=11,EPe=12,IPe=13,CPe=14,TPe=15,MPe=16,kPe=17,PPe=18,LPe=19,ls={};ls[fPe]="Success";ls[APe]="The operation failed but a more specific error is not available";ls[mPe]="Argument was outside of acceptable range";ls[yPe]="Latitude or longitude arguments were outside of acceptable range";ls[gPe]="Resolution argument was outside of acceptable range";ls[vPe]="Cell argument was not valid";ls[bPe]="Directed edge argument was not valid";ls[wPe]="Undirected edge argument was not valid";ls[_Pe]="Vertex argument was not valid";ls[SPe]="Pentagon distortion was encountered";ls[xPe]="Duplicate input";ls[$Pe]="Cell arguments were not neighbors";ls[EPe]="Cell arguments had incompatible resolutions";ls[IPe]="Memory allocation failed";ls[CPe]="Bounds of provided memory were insufficient";ls[TPe]="Mode or flags argument was not valid";ls[MPe]="Index argument was not valid";ls[kPe]="Base cell number was outside of acceptable range";ls[PPe]="Child indexing digits invalid";ls[LPe]="Child indexing digits refer to a deleted subsequence";var RPe="Unknown error";function OPe(t,e,i){var r=i&&"value"in i,s=new Error((t[e]||RPe)+" (code: "+e+(r?", value: "+i.value:"")+")");return s.code=e,s}function DPe(t,e){var i=arguments.length===2?{value:e}:{};return OPe(ls,t,i)}function NPe(t){if(t!==0)throw DPe(t)}var Bd={};pPe.forEach(function(e){Bd[e[0]]=Bf.cwrap.apply(Bf,e)});var Cq=16,wF=8;Bd.sizeOfH3Index();Bd.sizeOfLatLng();var FPe=Bd.sizeOfCellBoundary();Bd.sizeOfGeoPolygon();Bd.sizeOfGeoLoop();Bd.sizeOfLinkedGeoPolygon();Bd.sizeOfCoordIJ();var zPe=/[^0-9a-fA-F]/;function BPe(t){if(Array.isArray(t)&&t.length===2&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if(typeof t!="string"||zPe.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),Cq),i=parseInt(t.substring(t.length-8),Cq);return[i,e]}function Tq(t){return GPe(Bf.getValue(t,"double"))}function jPe(t){return[Tq(t+wF),Tq(t)]}function UPe(t,e,i){for(var r=Bf.getValue(t,"i32"),s=t+wF,n=[],o=jPe,a=0;a<r*2;a+=2)n.push(o(s+wF*a));return n.push(n[0]),n}function VPe(t,e){var i=Bf._malloc(FPe),r=BPe(t),s=r[0],n=r[1];try{return NPe(Bd.cellToBoundary(s,n,i)),UPe(i,e,e)}finally{Bf._free(i)}}function GPe(t){return t*180/Math.PI}const HPe=(t="compositeKey")=>(console.time("RENDERER"),{type:"unique-value",field:t,legendOptions:{title:"UGB Assets vs Harms"},defaultSymbol:{type:"simple-fill",color:"#cccccc",outline:{color:[0,0,0,.2],width:.5}},uniqueValueInfos:[{value:"1,1",label:"Assets:1, Harms:1",symbol:{type:"simple-fill",color:"#d3d3d3",outline:{color:[0,0,0,.2],width:.5}}},{value:"1,2",label:"Assets:1, Harms:2",symbol:{type:"simple-fill",color:"#d6b3a0",outline:{color:[0,0,0,.2],width:.5}}},{value:"1,3",label:"Assets:1, Harms:3",symbol:{type:"simple-fill",color:"#d9926a",outline:{color:[0,0,0,.2],width:.5}}},{value:"1,4",label:"Assets:1, Harms:4",symbol:{type:"simple-fill",color:"#dd6a29",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,1",label:"Assets:2, Harms:1",symbol:{type:"simple-fill",color:"#9cc4d2",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,2",label:"Assets:2, Harms:2",symbol:{type:"simple-fill",color:"#9ea69f",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,3",label:"Assets:2, Harms:3",symbol:{type:"simple-fill",color:"#a08769",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,4",label:"Assets:2, Harms:4",symbol:{type:"simple-fill",color:"#a36229",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,1",label:"Assets:3, Harms:1",symbol:{type:"simple-fill",color:"#5fb2d1",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,2",label:"Assets:3, Harms:2",symbol:{type:"simple-fill",color:"#60979f",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,3",label:"Assets:3, Harms:3",symbol:{type:"simple-fill",color:"#617b69",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,4",label:"Assets:3, Harms:4",symbol:{type:"simple-fill",color:"#635929",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,1",label:"Assets:4, Harms:1",symbol:{type:"simple-fill",color:"#169dd0",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,2",label:"Assets:4, Harms:2",symbol:{type:"simple-fill",color:"#16869e",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,3",label:"Assets:4, Harms:3",symbol:{type:"simple-fill",color:"#166d68",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,4",label:"Assets:4, Harms:4",symbol:{type:"simple-fill",color:"#174f28",outline:{color:[0,0,0,.2],width:.5}}}]});function qPe(){const t=WPe();return(e,i)=>{const{memory:r,uncompress:s}=t.exports,n=68e3,o=n+e.byteLength,a=n+e.byteLength+i;if(r.buffer.byteLength<a){const y=r.buffer.byteLength/65536,_=Math.ceil(a/65536)-y;r.grow(_)}const l=new Uint8Array(r.buffer);l.set(e,n);const c=s(n,e.byteLength,o);if(c===-1)throw new Error("invalid snappy length header");if(c===-2)throw new Error("missing eof marker");if(c===-3)throw new Error("premature end of input");if(c)throw new Error(`failed to uncompress data ${c}`);return l.slice(o,o+i)}}function WPe(){const t=atob(QPe),e=new Uint8Array(t.length);for(let r=0;r<t.length;r+=1)e[r]=t.charCodeAt(r);const i=new WebAssembly.Module(e);return new WebAssembly.Instance(i)}const QPe="AGFzbQEAAAABEANgAABgA39/fwF/YAF/AX8DBgUAAQEBAgUDAQACBj8KfwFBoIwEC38AQYAIC38AQaAMC38AQaAMC38AQaCMBAt/AEGACAt/AEGgjAQLfwBBgIAIC38AQQALfwBBAQsHwQEOBm1lbW9yeQIAEV9fd2FzbV9jYWxsX2N0b3JzAAAGbWVtY3B5AAEHbWVtbW92ZQACCnVuY29tcHJlc3MAAwxfX2Rzb19oYW5kbGUDAQpfX2RhdGFfZW5kAwILX19zdGFja19sb3cDAwxfX3N0YWNrX2hpZ2gDBA1fX2dsb2JhbF9iYXNlAwULX19oZWFwX2Jhc2UDBgpfX2hlYXBfZW5kAwcNX19tZW1vcnlfYmFzZQMIDF9fdGFibGVfYmFzZQMJCuASBQIAC8sBAQN/AkAgAkUNAAJAAkAgAkEHcSIDDQAgACEEIAIhBQwBCyAAIQQgAiEFA0AgBCABLQAAOgAAIARBAWohBCABQQFqIQEgBUF/aiEFIANBf2oiAw0ACwsgAkEISQ0AA0AgBCABLQAAOgAAIAQgAS0AAToAASAEIAEtAAI6AAIgBCABLQADOgADIAQgAS0ABDoABCAEIAEtAAU6AAUgBCABLQAGOgAGIAQgAS0ABzoAByAEQQhqIQQgAUEIaiEBIAVBeGoiBQ0ACwsgAAugAwEEfwJAIAAgAUYNAAJAAkAgACABSQ0AIAEgAmoiAyAASw0BCyACRQ0BAkACQCACQQdxIgMNACAAIQQgAiEFDAELIAAhBCACIQUDQCAEIAEtAAA6AAAgBEEBaiEEIAFBAWohASAFQX9qIQUgA0F/aiIDDQALCyACQQhJDQEDQCAEIAEtAAA6AAAgBCABLQABOgABIAQgAS0AAjoAAiAEIAEtAAM6AAMgBCABLQAEOgAEIAQgAS0ABToABSAEIAEtAAY6AAYgBCABLQAHOgAHIARBCGohBCABQQhqIQEgBUF4aiIFDQAMAgsLIAJFDQACQAJAIAJBA3EiBA0AIAAgAmohBiACIQUMAQsgAiEFA0AgBUF/aiIFIABqIgYgBSABaiIDLQAAOgAAIARBf2oiBA0ACwsgAkEESQ0AIAZBfGohASADQXxqIQQDQCABQQNqIARBA2otAAA6AAAgAUECaiAEQQJqLQAAOgAAIAFBAWogBEEBai0AADoAACABIAQtAAA6AAAgAUF8aiEBIARBfGohBCAFQXxqIgUNAAsLIAALswoBCX8jgICAgABBIGsiAySAgICAACADQQlqQgA3AAAgA0IANwIEIAMgA0EYajYCAEF/IQQCQCABRQ0AIAMgAUF/aiIFNgIcIAMgAEEBajYCGCAALAAAIgZB/wBxIQcCQCAGQX9KDQAgBUUNASADIAFBfmoiBTYCHCADIABBAmo2AhggACwAASIGQf8AcUEHdCAHciEHQX8hBCAGQX9KDQAgBUUNASADIAFBfWoiBTYCHCADIABBA2o2AhggACwAAiIGQf8AcUEOdCAHciEHQX8hBCAGQX9KDQAgBUUNASADIAFBfGoiBTYCHCADIABBBGo2AhggACwAAyIGQf8AcUEVdCAHciEHQX8hBCAGQX9KDQAgBUUNASADIAFBe2o2AhwgAyAAQQVqNgIYIAAsAAQiAUEASA0BIAFBHHQgB3IhBwsgAiAHaiEIAkACQCADEISAgIAADQAgAiEADAELIAMoAgQhASACIQADQAJAIAMoAgggAWtBBEoNACADIAE2AgQgAxCEgICAAEUNAiADKAIEIQELIAFBAWohBQJAAkAgAS0AACIGQQNxDQAgCCAAayEJIAMoAggiCiAFayEEIAZBAnYiC0EBaiEHAkAgBkE/Sw0AIARBEEkNACAJQRBIDQAgACABKAIBNgIAIAAgASgCBTYCBCAAIAEoAgk2AgggACABKAINNgIMIAAgB2ohACADKAIIIAUgB2oiAWtBBEoNAyADIAE2AgQgAxCEgICAAEUNBAwCCwJAAkAgBkHwAU8NACAFIQYMAQsgCiAFIAtBRWoiAWoiBmshBCABQQJ0QYCIgIAAaigCACAFKAIAcUEBaiEHCwJAIAcgBE0NAANAIAggAGsgBEkNBSAAIAYgBBCBgICAACEAIAMoAgAiASABKAIAIgkgAygCDCIFaiIGNgIAIAFBBGoiASABKAIAIgogBWsiATYCACADIAE2AgwgACAEaiEAIAFFDQUgAyAJIApqNgIIIAcgBGshByABIQQgByABSw0ACyAIIABrIQkLIAkgB0kNAyAAIAYgBxCBgICAACAHaiEAIAMoAgggBiAHaiIBa0EESg0CIAMgATYCBCADEISAgIAADQEMAwsgACACayAGQQF0QaCIgIAAai8BACIBQQt2IgpBAnRBgIiAgABqKAIAIAUoAgBxIAFBgA5xaiIHQX9qTQ0CIAggAGshBAJAAkAgAUH/AXEiCUEQSw0AIAdBCEkNACAEQRBJDQAgACAAIAdrIgEoAgA2AgAgACABKAIENgIEIAAgASgCCDYCCCAAIAFBDGooAgA2AgwMAQsCQAJAAkAgBCAJQQpqSQ0AIAAgB2shBCAAIQEgCSEGIAdBB0wNAQwCCyAEIAlJDQUgCUEBaiEEQQAgB2shByAAIQEDQCABIAEgB2otAAA6AAAgAUEBaiEBIARBf2oiBEEBSw0ADAMLCwNAIAEgBCgCADYCACABIAQoAgQ2AgQgBiAHayEGIAEgB2oiASAEayIHQQhIDQALCyAGQQFIDQAgBkEIaiEHA0AgASAEKAIANgIAIAEgBCgCBDYCBCABQQhqIQEgBEEIaiEEIAdBeGoiB0EISw0ACwsgACAJaiEAIAMoAgggBSAKaiIBa0EESg0BIAMgATYCBCADEISAgIAARQ0CCyADKAIEIQEMAAsLIAMoAgAiASABKAIEIAMoAgwiBGs2AgQgASAEIAEoAgBqNgIAAkAgAy0AEA0AQX4hBAwBC0EAQX0gCCAARhshBAsgA0EgaiSAgICAACAEC7YDAQd/AkAgACgCBCIBIAAoAggiAkcNACAAKAIAIgIgAigCACIDIAAoAgwiBGoiATYCACACQQRqIgIgAigCACICIARrIgU2AgAgACAFNgIMAkAgAiAERw0AIABBAToAEEEADwsgACADIAJqIgI2AggLAkACQAJAIAIgAWsiAiABLQAAQQF0QaCIgIAAai8BAEELdkEBaiIFTw0AIABBEWogASACEIKAgIAAIQYgACgCDCEEQQAhByAAQQA2AgwgACgCACIBIAEoAgQgBGs2AgQgASAEIAEoAgBqIgM2AgADQCABQQRqKAIAIgFFDQMgBiACaiADIAUgAmsiBCABIAQgAUkbIgQQgYCAgAAaIAAoAgAiASABKAIEIARrNgIEIAEgASgCACAEaiIDNgIAIAQgAmoiAiAFSQ0ACyAAIAY2AgQgACAGIAVqNgIIDAELAkAgAkEESw0AIAAgAEERaiABIAIQgoCAgAAiASACajYCCCAAIAE2AgQgACgCDCECIABBADYCDCAAKAIAIgEgASgCBCACazYCBCABIAIgASgCAGo2AgAMAQsgACABNgIEC0EBIQcLIAcLC6gEAQBBgAgLoAQAAAAA/wAAAP//AAD///8A/////wAAAAAAAAAAAAAAAAEABAgBEAEgAgAFCAIQAiADAAYIAxADIAQABwgEEAQgBQAICAUQBSAGAAkIBhAGIAcACggHEAcgCAALCAgQCCAJAAQJCRAJIAoABQkKEAogCwAGCQsQCyAMAAcJDBAMIA0ACAkNEA0gDgAJCQ4QDiAPAAoJDxAPIBAACwkQEBAgEQAEChEQESASAAUKEhASIBMABgoTEBMgFAAHChQQFCAVAAgKFRAVIBYACQoWEBYgFwAKChcQFyAYAAsKGBAYIBkABAsZEBkgGgAFCxoQGiAbAAYLGxAbIBwABwscEBwgHQAICx0QHSAeAAkLHhAeIB8ACgsfEB8gIAALCyAQICAhAAQMIRAhICIABQwiECIgIwAGDCMQIyAkAAcMJBAkICUACAwlECUgJgAJDCYQJiAnAAoMJxAnICgACwwoECggKQAEDSkQKSAqAAUNKhAqICsABg0rECsgLAAHDSwQLCAtAAgNLRAtIC4ACQ0uEC4gLwAKDS8QLyAwAAsNMBAwIDEABA4xEDEgMgAFDjIQMiAzAAYOMxAzIDQABw40EDQgNQAIDjUQNSA2AAkONhA2IDcACg43EDcgOAALDjgQOCA5AAQPORA5IDoABQ86EDogOwAGDzsQOyA8AAcPPBA8IAEICA89ED0gARAJDz4QPiABGAoPPxA/IAEgCw9AEEAgAGQEbmFtZQE9BQARX193YXNtX2NhbGxfY3RvcnMBBm1lbWNweQIHbWVtbW92ZQMKdW5jb21wcmVzcwQKcmVmaWxsX3RhZwcSAQAPX19zdGFja19wb2ludGVyCQoBAAcucm9kYXRhADIJcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBDFVidW50dSBjbGFuZwsxNi4wLjYgKDE1KQAsD3RhcmdldF9mZWF0dXJlcwIrD211dGFibGUtZ2xvYmFscysIc2lnbi1leHQ=";async function Z7(t){const{asyncBufferFromUrl:e,parquetQuery:i}=await Ie(async()=>{const{asyncBufferFromUrl:n,parquetQuery:o}=await import("./index-CYkGMpLt.js");return{asyncBufferFromUrl:n,parquetQuery:o}},[],import.meta.url),s=await e({url:`https://raw.githubusercontent.com/DLCDOFFICIAL/RiskAssessmentViewer/main/dist/data/${t}`});return i({file:s,compressors:{SNAPPY:qPe()}})}async function JPe(t){console.time("LoadParquet TIME:");const e=await Z7(t);console.timeEnd("LoadParquet TIME:"),console.time("Create Hex Store TIME:");const i={electric_transmission_lines:[],highway:[],tsunami_zone:[]},r={};e.forEach(n=>{const o=n.GRID_ID;r[o]||(r[o]=[]),r[o].push(n)});const s=Object.keys(r);return console.timeEnd("Create Hex Store TIME:"),{hexStore:r,uniqueHexes:s,flags_data:i}}function Roe(t,e){t&&e.sort().forEach(i=>{const r=document.createElement("calcite-combobox-item");r.setAttribute("value",i);const s=Ooe(i);r.setAttribute("heading",s),t.append(r)})}function Ooe(t){if(!t)return"";const e={community_center_dist:"Community Center Distance",library_dist:"Library Distance",burn_prob:"Burn Probability",flame_length:"Flame Length"};return e[t]?e[t]:t.replace(/_/g," ").split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ")}function Doe(t,e){t&&t.addEventListener("calciteComboboxChange",()=>{var r;const i=((r=t.selectedItems)==null?void 0:r.map(s=>s.value))||[];e(i)})}function Mq(t,e,i){if(!t)return;const r=e.filter(s=>s.type===i).map(s=>s.value);Roe(t,r)}async function ZPe(t,e,i="places.parquet"){try{const s=(await Z7(i)).map(n=>n.name);Roe(t,s),Doe(t,n=>{var a;const o=((a=n[0])==null?void 0:a.replaceAll(/[ /]/g,"_").toLowerCase())||null;e(o)})}catch(r){console.error("Failed to create place elements:",r)}}async function YPe(t,e,i="harms_assets.parquet"){try{const r=await Z7(i),s=t.querySelector('calcite-combobox-item-group[label="Harms"]'),n=t.querySelector('calcite-combobox-item-group[label="Vulnerabilities"]');Mq(n,r,"asset"),Mq(s,r,"harm"),Doe(t,o=>{e(o.length?o:null)})}catch(r){console.error("Failed to create indicator elements:",r)}}function XPe(t,e){const i=typeof t=="string"?document.getElementById(t):t;i&&i.addEventListener("calciteRadioButtonGroupChange",()=>{e(i.value)})}function gw(t){const e={q1:.25,q2:.5,q3:.75};return t<=e.q1?1:t<=e.q2?2:t<=e.q3?3:4}function FR(t){return{1:"0-25%",2:"25-50%",3:"50-75%",4:"75-100%"}[t]||null}function KPe(t,e,i){if(t==1){e[1]+=i;return}if(t==2){e[2]+=i;return}if(t==3){e[3]+=i;return}if(t==4){e[4]+=i;return}}const eLe=(t="ugb_pct_rank",e=[],i)=>{let r=0,s=0,n=0,o=0,a={1:"",2:"",3:"",4:""},l="";e.forEach(C=>{if(!i.has(C.var))return;const M=C[t],P=gw(M),D=FR(P);let U=`${Ooe(C.var)}: ${D} <br>`;KPe(P,a,U),C.type==="harm"?(r+=M,n+=1):(s+=M,o+=1)}),Object.keys(a).sort((C,M)=>M-C).forEach(C=>{a[C]!==""&&(l+=a[C],a[C]="")});const c=n>0?r/n:0,h=o>0?s/o:0,y=gw(c),g=gw(h),_=FR(y),S=FR(g),E=`${gw(h)},${gw(c)}`;return{avg_harms:_,avg_assets:S,quartile_string:E,displayString:l}},O_=(...t)=>{const e=[];for(let r=0;r<t.length;r++){const s=t[r];if(typeof s=="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(typeof s=="object")for(const n in s)s[n]&&e.push(n)}const i=e.join(" ");return e.length=0,i};let TS=class{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};const tLe=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},iLe=(t,e,i)=>{const r=rLe(e).subscribe;return r(s=>{s.some(o=>tLe(t,o.target))&&i()})},zR={},rLe=t=>{const e=t.join(","),i=zR[e];if(i!==void 0)return i;const r=new Set,s=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const n={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(s.disconnect(),zR[e]=void 0)})};return zR[e]=n,n},sLe=(t,e)=>{var r,s;let i=t;for(;i;){const n=(r=i.closest)==null?void 0:r.call(i,e);if(n)return n;const o=(s=i.getRootNode)==null?void 0:s.call(i);if(o===globalThis.document)return null;i=o.host}return null},nLe=(t,e,i)=>{const r=sLe(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},Ir=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},_F=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},oLe="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),aLe=new Set(oLe),KT="en",lLe={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},cLe=async(t,e,i="")=>{const r=`${e}/${i}`,s=`${r}${t}.json`;return BR[s]??(BR[s]=Noe(t,r)),await BR[s]},BR={},Noe=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===KT?{}:await Noe(KT,e)},Foe=t=>{var i;const e=nLe(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||KT);return{lang:e,t9nLocale:zoe(e)}},zoe=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let s=r;return i&&(s=`${r}-${i.toUpperCase()}`),s=lLe[s]??s,aLe.has(s)?s:i?zoe(r):KT},uLe=(t,e,i,r)=>{let s;const n=()=>hLe(t,e(),r).then(o=>{((s==null?void 0:s.lang)!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&i(o),s=o}).catch(console.error);return queueMicrotask(n),iLe(t,["lang"],n)},hLe=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:s}=Foe(t),n=`${e}/${i}/t9n`,a=i===null?{}:await cLe(s,n,"messages.");return{lang:r,t9nLocale:s,t9nStrings:a}},dLe=t=>t.replace(pLe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),pLe=/[A-Z]+(?![a-z])|[A-Z]/gu,fLe=(t,e)=>{const i=e/ALe;let r=0;const s=setInterval(()=>{r+=i,r>=e&&(clearInterval(s),t())},i);return s},ALe=4;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const aC=globalThis,Y7=aC.ShadowRoot&&(aC.ShadyCSS===void 0||aC.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,X7=Symbol(),kq=new WeakMap;let Boe=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==X7)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(Y7&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=kq.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&kq.set(i,e))}return e}toString(){return this.cssText}};const mLe=t=>new Boe(typeof t=="string"?t:t+"",void 0,X7),Li=(t,...e)=>{const i=t.length===1?t[0]:e.reduce((r,s,n)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[n+1],t[0]);return new Boe(i,t,X7)},yLe=(t,e)=>{if(Y7)t.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),s=aC.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=i.cssText,t.appendChild(r)}},Pq=Y7?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return mLe(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:gLe,defineProperty:vLe,getOwnPropertyDescriptor:bLe,getOwnPropertyNames:wLe,getOwnPropertySymbols:_Le,getPrototypeOf:SLe}=Object,wf=globalThis,Lq=wf.trustedTypes,xLe=Lq?Lq.emptyScript:"",jR=wf.reactiveElementPolyfillSupport,D_=(t,e)=>t,SF={toAttribute(t,e){switch(e){case Boolean:t=t?xLe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},rP=(t,e)=>!gLe(t,e),Rq={attribute:!0,type:String,converter:SF,reflect:!1,useDefault:!1,hasChanged:rP};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),wf.litPropertyMetadata??(wf.litPropertyMetadata=new WeakMap);let ug=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=Rq){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,i);s!==void 0&&vLe(this.prototype,e,s)}}static getPropertyDescriptor(e,i,r){const{get:s,set:n}=bLe(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);n==null||n.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Rq}static _$Ei(){if(this.hasOwnProperty(D_("elementProperties")))return;const e=SLe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(D_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(D_("properties"))){const i=this.properties,r=[...wLe(i),..._Le(i)];for(const s of r)this.createProperty(s,i[s])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,s]of i)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const s=this._$Eu(i,r);s!==void 0&&this._$Eh.set(s,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)i.unshift(Pq(s))}else e!==void 0&&i.push(Pq(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(i=>i(this))}addController(e){var i;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)==null||i.call(e))}removeController(e){var i;(i=this._$EO)==null||i.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return yLe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)})}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){var n;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((n=r.converter)==null?void 0:n.toAttribute)!==void 0?r.converter:SF).toAttribute(i,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,i){var n,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((n=a.converter)==null?void 0:n.fromAttribute)!==void 0?a.converter:SF;this._$Em=s;const c=l.fromAttribute(i,a.type);this[s]=c??((o=this._$Ej)==null?void 0:o.get(s))??c,this._$Em=null}}requestUpdate(e,i,r,s=!1,n){var o;if(e!==void 0){const a=this.constructor;if(s===!1&&(n=this[e]),r??(r=a.getPropertyOptions(e)),!((r.hasChanged??rP)(n,i)||r.useDefault&&r.reflect&&n===((o=this._$Ej)==null?void 0:o.get(e))&&!this.hasAttribute(a._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:s,wrapped:n},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??i??this[e]),n!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[n,o]of this._$Ep)this[n]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[n,o]of s){const{wrapped:a}=o,l=this[n];a!==!0||this._$AL.has(n)||l===void 0||this.C(n,void 0,o,l)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(r=this._$EO)==null||r.forEach(s=>{var n;return(n=s.hostUpdate)==null?void 0:n.call(s)}),this.update(i)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(i)}willUpdate(e){}_$AE(e){var i;(i=this._$EO)==null||i.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(i=>this._$ET(i,this[i]))),this._$EM()}updated(e){}firstUpdated(e){}};ug.elementStyles=[],ug.shadowRootOptions={mode:"open"},ug[D_("elementProperties")]=new Map,ug[D_("finalized")]=new Map,jR==null||jR({ReactiveElement:ug}),(wf.reactiveElementVersions??(wf.reactiveElementVersions=[])).push("2.1.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const N_=globalThis,Oq=t=>t,eM=N_.trustedTypes,Dq=eM?eM.createPolicy("lit-html",{createHTML:t=>t}):void 0,joe="$lit$",Zp=`lit$${Math.random().toFixed(9).slice(2)}$`,Uoe="?"+Zp,$Le=`<${Uoe}>`,T0=document,MS=()=>T0.createComment(""),kS=t=>t===null||typeof t!="object"&&typeof t!="function",K7=Array.isArray,ELe=t=>K7(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",UR=`[ 	
\f\r]`,vw=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Nq=/-->/g,Fq=/>/g,uA=RegExp(`>|${UR}(?:([^\\s"'>=/]+)(${UR}*=${UR}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),zq=/'/g,Bq=/"/g,Voe=/^(?:script|style|textarea|title)$/i,Goe=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),Se=Goe(1),PS=Goe(2),ga=Symbol.for("lit-noChange"),Ge=Symbol.for("lit-nothing"),jq=new WeakMap,Om=T0.createTreeWalker(T0,129);function Hoe(t,e){if(!K7(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Dq!==void 0?Dq.createHTML(e):e}const ILe=(t,e)=>{const i=t.length-1,r=[];let s,n=e===2?"<svg>":e===3?"<math>":"",o=vw;for(let a=0;a<i;a++){const l=t[a];let c,h,y=-1,g=0;for(;g<l.length&&(o.lastIndex=g,h=o.exec(l),h!==null);)g=o.lastIndex,o===vw?h[1]==="!--"?o=Nq:h[1]!==void 0?o=Fq:h[2]!==void 0?(Voe.test(h[2])&&(s=RegExp("</"+h[2],"g")),o=uA):h[3]!==void 0&&(o=uA):o===uA?h[0]===">"?(o=s??vw,y=-1):h[1]===void 0?y=-2:(y=o.lastIndex-h[2].length,c=h[1],o=h[3]===void 0?uA:h[3]==='"'?Bq:zq):o===Bq||o===zq?o=uA:o===Nq||o===Fq?o=vw:(o=uA,s=void 0);const _=o===uA&&t[a+1].startsWith("/>")?" ":"";n+=o===vw?l+$Le:y>=0?(r.push(c),l.slice(0,y)+joe+l.slice(y)+Zp+_):l+Zp+(y===-2?a:_)}return[Hoe(t,n+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let xF=class qoe{constructor({strings:e,_$litType$:i},r){let s;this.parts=[];let n=0,o=0;const a=e.length-1,l=this.parts,[c,h]=ILe(e,i);if(this.el=qoe.createElement(c,r),Om.currentNode=this.el.content,i===2||i===3){const y=this.el.content.firstChild;y.replaceWith(...y.childNodes)}for(;(s=Om.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const y of s.getAttributeNames())if(y.endsWith(joe)){const g=h[o++],_=s.getAttribute(y).split(Zp),S=/([.?@])?(.*)/.exec(g);l.push({type:1,index:n,name:S[2],strings:_,ctor:S[1]==="."?TLe:S[1]==="?"?MLe:S[1]==="@"?kLe:nP}),s.removeAttribute(y)}else y.startsWith(Zp)&&(l.push({type:6,index:n}),s.removeAttribute(y));if(Voe.test(s.tagName)){const y=s.textContent.split(Zp),g=y.length-1;if(g>0){s.textContent=eM?eM.emptyScript:"";for(let _=0;_<g;_++)s.append(y[_],MS()),Om.nextNode(),l.push({type:2,index:++n});s.append(y[g],MS())}}}else if(s.nodeType===8)if(s.data===Uoe)l.push({type:2,index:n});else{let y=-1;for(;(y=s.data.indexOf(Zp,y+1))!==-1;)l.push({type:7,index:n}),y+=Zp.length-1}n++}}static createElement(e,i){const r=T0.createElement("template");return r.innerHTML=e,r}};function Qb(t,e,i=t,r){var o,a;if(e===ga)return e;let s=r!==void 0?(o=i._$Co)==null?void 0:o[r]:i._$Cl;const n=kS(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==n&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),n===void 0?s=void 0:(s=new n(t),s._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=s:i._$Cl=s),s!==void 0&&(e=Qb(t,s._$AS(t,e.values),s,r)),e}let CLe=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??T0).importNode(i,!0);Om.currentNode=s;let n=Om.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new sP(n,n.nextSibling,this,e):l.type===1?c=new l.ctor(n,l.name,l.strings,this,e):l.type===6&&(c=new PLe(n,this,e)),this._$AV.push(c),l=r[++a]}o!==(l==null?void 0:l.index)&&(n=Om.nextNode(),o++)}return Om.currentNode=T0,s}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},sP=class Woe{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,i,r,s){this.type=2,this._$AH=Ge,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=Qb(this,e,i),kS(e)?e===Ge||e==null||e===""?(this._$AH!==Ge&&this._$AR(),this._$AH=Ge):e!==this._$AH&&e!==ga&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):ELe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ge&&kS(this._$AH)?this._$AA.nextSibling.data=e:this.T(T0.createTextNode(e)),this._$AH=e}$(e){var n;const{values:i,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=xF.createElement(Hoe(r.h,r.h[0]),this.options)),r);if(((n=this._$AH)==null?void 0:n._$AD)===s)this._$AH.p(i);else{const o=new CLe(s,this),a=o.u(this.options);o.p(i),this.T(a),this._$AH=o}}_$AC(e){let i=jq.get(e.strings);return i===void 0&&jq.set(e.strings,i=new xF(e)),i}k(e){K7(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,s=0;for(const n of e)s===i.length?i.push(r=new Woe(this.O(MS()),this.O(MS()),this,this.options)):r=i[s],r._$AI(n),s++;s<i.length&&(this._$AR(r&&r._$AB.nextSibling,s),i.length=s)}_$AR(e=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);e!==this._$AB;){const s=Oq(e).nextSibling;Oq(e).remove(),e=s}}setConnected(e){var i;this._$AM===void 0&&(this._$Cv=e,(i=this._$AP)==null||i.call(this,e))}},nP=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,s,n){this.type=1,this._$AH=Ge,this._$AN=void 0,this.element=e,this.name=i,this._$AM=s,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ge}_$AI(e,i=this,r,s){const n=this.strings;let o=!1;if(n===void 0)e=Qb(this,e,i,0),o=!kS(e)||e!==this._$AH&&e!==ga,o&&(this._$AH=e);else{const a=e;let l,c;for(e=n[0],l=0;l<n.length-1;l++)c=Qb(this,a[r+l],i,l),c===ga&&(c=this._$AH[l]),o||(o=!kS(c)||c!==this._$AH[l]),c===Ge?e=Ge:e!==Ge&&(e+=(c??"")+n[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===Ge?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},TLe=class extends nP{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ge?void 0:e}},MLe=class extends nP{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ge)}},kLe=class extends nP{constructor(e,i,r,s,n){super(e,i,r,s,n),this.type=5}_$AI(e,i=this){if((e=Qb(this,e,i,0)??Ge)===ga)return;const r=this._$AH,s=e===Ge&&r!==Ge||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==Ge&&(r===Ge||s);s&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,e):this._$AH.handleEvent(e)}},PLe=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Qb(this,e)}};const LLe={I:sP},VR=N_.litHtmlPolyfillSupport;VR==null||VR(xF,sP),(N_.litHtmlVersions??(N_.litHtmlVersions=[])).push("3.3.2");const Qoe=(t,e,i)=>{const r=(i==null?void 0:i.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const n=(i==null?void 0:i.renderBefore)??null;r._$litPart$=s=new sP(e.insertBefore(MS(),n),n,void 0,i??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Km=globalThis;let $d=class extends ug{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Qoe(i,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ga}};var IX;$d._$litElement$=!0,$d.finalized=!0,(IX=Km.litElementHydrateSupport)==null||IX.call(Km,{LitElement:$d});const GR=Km.litElementPolyfillSupport;GR==null||GR({LitElement:$d});(Km.litElementVersions??(Km.litElementVersions=[])).push("4.2.2");const eB=Symbol.for("controller"),RLe=t=>typeof t=="object"&&t!==null&&(eB in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),OLe=t=>typeof(t==null?void 0:t.then)=="function",DLe=t=>t.M.length;let L2;const iv=t=>{L2!==t&&(L2=t,queueMicrotask(()=>L2===t?L2=void 0:0))},P1=t=>L2;let VA=[];const Joe=t=>{if(t===void 0){VA=[];return}const e=VA.indexOf(t);VA=e===-1?[...VA,t]:VA.slice(0,e+1),queueMicrotask(()=>VA=[])},Zoe=()=>VA;let rv;const NLe=t=>{rv!==t&&(rv=t,queueMicrotask(()=>rv===t?rv=void 0:0))},FLe=()=>{const t=rv;return rv=void 0,t},zLe=async(t,e)=>{const i=tB(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(s=>e(s,r))}return i.exports},BLe=async t=>{const e=tB(t);return await e.ready,e},tB=t=>{const i=P1().manager.X(t);if(i!==void 0)return i;if(RLe(t))return t;const r=FLe();if(r!==void 0)return r};let $F=!1;const jLe=t=>{$F=!0;try{return t()}finally{$F=!1}},ULe=(t,e,i)=>{const r=Object.keys(t),s=r.length;df===void 0&&queueMicrotask(iB),df??(df=new Map);let n=df.get(t);return n===void 0&&(n={callbacks:[],keyCount:s},df.set(t,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(r)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const a=c=>Ir(e,null,c),l=o[s];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let df;const iB=()=>{df==null||df.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),df=void 0},rB=(t,e,i)=>{const r=t.manager;return r.V!==Ge&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((s,n)=>Ir(e,void 0,i===n?s:void 0)),i},sB=(t=[P1(),...Zoe()],e,i)=>{const r=Array.isArray(t)?t:[t];let s=r.length+1;const n=o=>{s-=1,o!==void 0&&(s=Math.min(s,0)),s===0&&e(o)};r.forEach(o=>ULe(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){rB(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},nB=(t="",e={},i=P1())=>{const r={emit:s=>{t===""&&iB();const n=new CustomEvent(t,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(n),n}};return t===""&&sB(void 0,s=>t=s.key,r),r},Jb=nB.bind(null,"");var Yoe;Yoe=eB;var ib,rb,Fm,sb,nb,ob,ab,lb,Kp,zm,Co,Hc,od,cb,lC,CX;let Xoe=(CX=class{constructor(e){at(this,cb);at(this,ib);at(this,rb);at(this,Fm);at(this,sb);at(this,nb);at(this,ob);at(this,ab);at(this,lb);at(this,Kp);at(this,zm);at(this,Co);at(this,Hc);at(this,od);Je(this,ib,[]),Je(this,rb,[]),Je(this,Fm,[]),Je(this,sb,[]),Je(this,nb,[]),Je(this,ob,[]),Je(this,ab,[]),Je(this,lb,[]),Je(this,Kp,[]),Je(this,zm,!1),this.P=new TS,this.connectedCalled=!1,this.loadedCalled=!1,this[Yoe]=!0,Je(this,od,[]);const i=this,r=e??P1();Je(i,Co,r),i.ready=i.P.promise,Je(i,Hc,Vq(i)),i.component=r,ue(i,Co).addController(i),ue(i,Co).manager===void 0||(Joe(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=ue(this,Co);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),ue(e,zm)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return ue(this,Hc)}set exports(e){const i=ue(this,Hc);i!==e&&(Je(this,Hc,e),ue(this,od).forEach(Ir),this.connectedCalled&&this.O!==!1&&ue(this,Co).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){Je(this,Hc,i?Vq(e):e),ue(this,od).forEach(Ir)}watchExports(e){const i=()=>e(ue(this,Hc));return ue(this,od).push(i),()=>void ue(this,od).splice(ue(this,od).indexOf(i),1)}get use(){return iv(ue(this,Co)),zLe}get useRef(){return iv(ue(this,Co)),BLe}get useRefSync(){return iv(ue(this,Co)),tB}controllerRemoved(){ue(this,Co).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){ue(this,ib).push(e)}onDisconnected(e){ue(this,rb).push(e)}onLoad(e){ue(this,Fm).push(e)}onLoaded(e){ue(this,sb).push(e)}onUpdate(e){ue(this,nb).push(e)}onUpdated(e){ue(this,ob).push(e)}onDestroy(e){ue(this,ab).push(e)}onLifecycle(e){ue(this,lb).push(e),this.connectedCalled&&ue(this,Co).el.isConnected&&us(this,cb,lC).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&Ir(e.hostConnected,e),ue(e,ib).forEach(Ir),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Ir(e.hostDisconnected,e),ue(e,rb).forEach(Ir),ue(e,Kp).forEach(Ir),Je(e,Kp,[])}async triggerLoad(){if(ue(this,zm))return;Je(this,zm,!0);const e=this;e.hostLoad&&await _F(e.hostLoad,e),ue(this,Fm).length>0&&await Promise.allSettled(ue(this,Fm).map(_F)),this.P.resolve(ue(this,Hc))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Ir(this.hostLoaded,this),ue(this,sb).forEach(Ir),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Ir(this.hostUpdate,this,e),ue(this,nb).forEach(Uq,e)}triggerUpdated(e){this.hostUpdated&&Ir(this.hostUpdated,this,e),ue(this,ob).forEach(Uq,e)}triggerDestroy(){this.hostDestroy&&Ir(this.hostDestroy,this),ue(this,ab).forEach(Ir)}triggerLifecycle(){this.hostLifecycle&&us(this,cb,lC).call(this,()=>this.hostLifecycle()),ue(this,lb).forEach(us(this,cb,lC),this)}},ib=new WeakMap,rb=new WeakMap,Fm=new WeakMap,sb=new WeakMap,nb=new WeakMap,ob=new WeakMap,ab=new WeakMap,lb=new WeakMap,Kp=new WeakMap,zm=new WeakMap,Co=new WeakMap,Hc=new WeakMap,od=new WeakMap,cb=new WeakSet,lC=function(e){iv(ue(this,Co));const i=Ir(e);(Array.isArray(i)?i:[i]).forEach(s=>{typeof s=="function"?ue(this,Kp).push(s):typeof s=="object"&&typeof s.remove=="function"&&ue(this,Kp).push(s.remove)})},CX);function Uq(t){Ir(t,void 0,this)}const oB=Xoe,Vq=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,s,n){if(!((s==="exports"||s==="_exports")&&s in r&&r[s]===i)&&(s in r||s in Promise.prototype||typeof s=="symbol"))return typeof r=="function"?r[s]:Reflect.get(r,s,n)}},i=new Proxy(t,e);return i},VLe=1,GLe=2,HLe=4,qLe=8,WLe=16,QLe=32,JLe=64,Koe=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const s=e;return(r=s.manager)!=null&&r.loadedCalled||(s.J??s._offspring).push(t),(s.I??s._postLoad).promise}return!1},M0={};function eae(){}const cC=Object.defineProperty,ZLe=globalThis.HTMLElement??eae;var To,ad,ub,tx,EF,hb;let plt=(hb=class extends ZLe{constructor(){var s,n;super();at(this,tx);at(this,To);at(this,ad);at(this,ub);Je(this,ad,{}),Je(this,ub,[]),this.I=new TS,this.H=new TS,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(s=r.C)==null||s.forEach(o=>{Object.hasOwn(i,o)&&(ue(i,ad)[o]=i[o],delete i[o])}),r.A?us(n=i,tx,EF).call(n,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,us(l=i,tx,EF).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])cC(this.prototype,i,{configurable:!0,enumerable:!0,get(){return ue(this,ad)[i]},set(r){ue(this,ad)[i]=r}});for(const i of this.E??[])cC(this.prototype,i,{async value(...r){return ue(this,To)||await this.H.promise,await ue(this,To)[i](...r)},configurable:!0});for(const i of this.D??[])cC(this.prototype,i,{value(...r){return ue(this,To)[i](...r)},configurable:!0})}get manager(){var i;return(i=ue(this,To))==null?void 0:i.manager}attributeChangedCallback(i,r,s){var n;(n=ue(this,To))==null||n.attributeChangedCallback(i,r,s),ue(this,To)||ue(this,ub).push(i)}connectedCallback(){var i,r;ue(this,To)?(r=(i=ue(this,To)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=Koe(this))}disconnectedCallback(){var i,r;(r=(i=ue(this,To))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=ue(this,To))==null||i.requestUpdate()}},To=new WeakMap,ad=new WeakMap,ub=new WeakMap,tx=new WeakSet,EF=function(i){var g;const r=this.constructor,s=r.L,n=ue(this,ad),o=Object.values(i).find(_=>_.L===s),a=`${s}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);XLe(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,Je(this,To,h),Je(this,ad,h),ue(this,ub).forEach(_=>h.attributeChangedCallback(_,null,this.getAttribute(_))),Object.entries(n).forEach(YLe,h);const y=this.isConnected;(y||this.G)&&((g=h.connectedCallback)==null||g.call(h),y||h.disconnectedCallback())},hb.lumina=!0,hb);function YLe([t,e]){this[t]=e}const XLe=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(s,n){i.setAttribute.call(this.el,s,n)},e.removeAttribute=function(s){i.removeAttribute.call(this.el,s)},cC(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yc={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},L1=t=>(...e)=>({_$litDirective$:t,values:e});let R1=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tae=L1(class extends R1{constructor(t){var e;if(super(t),t.type!==Yc.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,s;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(n=>n!=="")));for(const n in e)e[n]&&!((r=this.nt)!=null&&r.has(n))&&this.st.add(n);return this.render(e)}const i=t.element.classList;for(const n of this.st)n in e||(i.remove(n),this.st.delete(n));for(const n in e){const o=!!e[n];o===this.st.has(n)||(s=this.nt)!=null&&s.has(n)||(o?(i.add(n),this.st.add(n)):(i.remove(n),this.st.delete(n)))}return ga}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const iae="important",KLe=" !"+iae,eRe=L1(class extends R1{constructor(t){var e;if(super(t),t.type!==Yc.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const s=e[r];if(s!=null){this.ft.add(r);const n=typeof s=="string"&&s.endsWith(KLe);r.includes("-")||n?i.setProperty(r,n?s.slice(0,-11):s,n?iae:""):i[r]=s}}return ga}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:tRe}=LLe,Gq=t=>t,rae=t=>t.strings===void 0,Hq=()=>document.createComment(""),bw=(t,e,i)=>{var n;const r=t._$AA.parentNode,s=e===void 0?t._$AB:e._$AA;if(i===void 0){const o=r.insertBefore(Hq(),s),a=r.insertBefore(Hq(),s);i=new tRe(o,a,t,t.options)}else{const o=i._$AB.nextSibling,a=i._$AM,l=a!==t;if(l){let c;(n=i._$AQ)==null||n.call(i,t),i._$AM=t,i._$AP!==void 0&&(c=t._$AU)!==a._$AU&&i._$AP(c)}if(o!==s||l){let c=i._$AA;for(;c!==o;){const h=Gq(c).nextSibling;Gq(r).insertBefore(c,s),c=h}}}return i},hA=(t,e,i=t)=>(t._$AI(e,i),t),iRe={},aB=(t,e=iRe)=>t._$AH=e,rRe=t=>t._$AH,HR=t=>{t._$AR(),t._$AA.remove()};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qq=L1(class extends R1{constructor(t){if(super(t),t.type!==Yc.PROPERTY&&t.type!==Yc.ATTRIBUTE&&t.type!==Yc.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!rae(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===ga||e===Ge)return e;const i=t.element,r=t.name;if(t.type===Yc.PROPERTY){if(e===i[r])return ga}else if(t.type===Yc.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(r))return ga}else if(t.type===Yc.ATTRIBUTE&&i.getAttribute(r)===e+"")return ga;return aB(t),e}});var ld,jl,db,TX;let sRe=(TX=class extends oB{constructor(i){super(i);at(this,ld);at(this,jl);at(this,db);this.destroyed=!1,this.R=!1,this.V=Ge,this.T=[],Je(this,db,new WeakMap),Je(this,jl,i),this.exports=void 0,this.hasDestroy=IF in i&&typeof i.destroy=="function",$d.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${IF} prop.`)}ue(this,ld)!==void 0&&clearTimeout(ue(this,ld)),iB();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():Ir(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():Ir(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):Ir(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):Ir(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),iv(i)}async destroy(){if(!this.destroyed){ue(this,jl).el.isConnected&&(this.hasDestroy=!1,ue(this,jl).el.remove()),Je(this,ld,void 0),this.destroyed=!0;for(const i of ue(this,jl).M)"triggerDestroy"in i?i.triggerDestroy():Ir(i.hostDestroy,i);ue(this,jl).M.splice(0)}}U(){ue(this,ld)!==void 0&&clearTimeout(ue(this,ld)),!ue(this,jl).el.isConnected&&!ue(this,jl).autoDestroyDisabled&&Je(this,ld,fLe(()=>void ue(this,jl).destroy(),nRe))}S(i,r){const s=this.T;this.V=Ge,this.T=[],s.forEach(n=>n(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&ue(this,db).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return ue(this,db).get(i)}},ld=new WeakMap,jl=new WeakMap,db=new WeakMap,TX),nRe=1e3;const IF="autoDestroyDisabled";var Bm,ix,rx,jm,qc,c1,sae,nae,Ef;let zx=(Ef=class extends $d{constructor(){super();at(this,c1);at(this,Bm);at(this,ix);at(this,rx);at(this,jm);at(this,qc);this.M=[],this.manager=new sRe(this);const i=this,r=i.constructor,s=r.N,n=r.K.o,o=Ef.prototype.shouldUpdate;Je(i,jm,(s==null?void 0:s.H)??new TS),i.I=(s==null?void 0:s.I)??new TS,i.J=(s==null?void 0:s.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=s??i,Je(i,rx,i.enableUpdating),i.enableUpdating=eae,i.shouldUpdate!==o&&(Je(i,ix,i.shouldUpdate),i.shouldUpdate=o),n&&(Je(i,Bm,new Map),r.elementProperties.forEach((a,l)=>ue(i,Bm).set(l,n())))}static finalizeStyles(i){var n;const r=super.finalizeStyles(i),s=this.shadowRootOptions===M0;return((n=this.K)==null?void 0:n.commonStyles)===void 0||s?r:[this.K.commonStyles,...r]}static createProperty(i,r){const s=typeof r=="number"?r:Array.isArray(r)?r[0]:0,n=Array.isArray(r)?r[1]:void 0,o=(n==null?void 0:n.hasChanged)??rP,a={attribute:s&VLe&&typeof i=="string"?dLe(i):!1,reflect:!!(s&GLe),type:s&HLe?Boolean:s&qLe?Number:void 0,state:!!(s&WLe),readOnly:!!(s&QLe),noAccessor:!!(s&JLe),c:!1,...n,hasChanged(l,c){const h=o(l,c);return a.c=h,h}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,s){const n=this.K,o=super.getPropertyDescriptor(i,r,s);return s.d=o,{...o,get(){var a,l;return(a=n.t)==null||a.call(n,ue(this,Bm).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,h;const l=this.manager;if(s.readOnly&&!$F&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),s.c&&((h=(c=ue(this,Bm))==null?void 0:c.get(i))==null||h.notify()),l.T.length>0&&(l==null||l.S(i,a))}}}connectedCallback(){var s,n;if(this.el.hasAttribute("defer-hydration"))return;const i=(n=(s=this.constructor.K).c)==null?void 0:n.call(s,()=>this.requestUpdate());Je(this,qc,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>us(this,c1,nae).call(this).catch(o=>{ue(this,jm).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=ue(this,qc))==null||i.destroy(),Je(this,qc,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,s=r.shadowRootOptions,o=i??(s===M0?this.el:this.el.attachShadow(s));if(i)return $d.prototype.createRenderRoot.call(this),i;if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=ue(this,ix))==null?void 0:r.call(this,i))??!0}update(i){ue(this,qc)?us(this,c1,sae).call(this,i):super.update(i)}listen(i,r,s){const n=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,n,s),()=>this.el.removeEventListener(i,n,s)))}listenOn(i,r,s,n){const o=(s==null?void 0:s.bind(this))??s;this.manager.onLifecycle(()=>(i.addEventListener(r,o,n),()=>i.removeEventListener(r,o,n)))}async componentOnReady(){return await ue(this,jm).promise,this}addController(i){var r;this.M.push(i),!(eB in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}},Bm=new WeakMap,ix=new WeakMap,rx=new WeakMap,jm=new WeakMap,qc=new WeakMap,c1=new WeakSet,sae=function(i){try{ue(this,qc).clear(),this.constructor.K.r(ue(this,qc),()=>NL(Ef.prototype,this,"update").call(this,i))}catch(r){throw ue(this,qc).clear(),r}},nae=async function(){var n,o;const i=this.el.G??Koe(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(_F(a.hostLoad,a));await Promise.all(r),await((n=this.load)==null?void 0:n.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(IF)&&this.manager.U()),ue(this,rx).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const s=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});s.length&&await Promise.allSettled(s.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():Ir(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),ue(this,jm).resolve()},Ef.lumina=!0,Ef);const oRe=t=>{let e;const i=s=>{var n;e=new URL(s,((n=globalThis.location)==null?void 0:n.href)||void 0).href},r={...t,getAssetPath(s){var o;const n=new URL(s,e);return n.origin!==((o=globalThis.location)==null?void 0:o.origin)?n.href:n.pathname},setAssetPath:i,customElement(s,n){n.K=r,n.L=s,customElements.get(s)||customElements.define(s,n)}};return i(t.defaultAssetPath),r},Xc=t=>typeof t=="object"&&t!=null?tae(t):t,CF=Ge;let aRe=class{constructor(e,i){this._observable=new m1,this._value=e,this._equalityFunction=i}get value(){return mt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function k0(t,e=WX){return new aRe(t,e)}function lRe(t,e){return k0(t,e)}function oae(){return new m1}function cRe(t){return new wx(t)}function aae(t){mt(t)}function uRe(t,e){return ju(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const Bx=oRe({defaultAssetPath:"https://js.arcgis.com/4.33/map-components/",hydratedAttribute:"hydrated"}),{customElement:jx,getAssetPath:hRe,setAssetPath:ylt}=Bx;Bx.t=aae;Bx.o=oae;Bx.c=cRe;Bx.r=uRe;const Ux=t=>(...e)=>{const i=Zoe(),r=new t(...e),s=r.exports;Joe(i.at(-1));const n=r.component.manager;n.W(r,s),r.watchExports(n.W.bind(n,r)),NLe(r);const o=[r.component,...i].reverse();return sB(o,a=>a===void 0?void 0:dRe(r,a,s),s)},dRe=(t,{host:e,key:i,isReactive:r},s)=>{var y;const n=e,o=n[i]!==t.exports,a=n[i]!==s,l=s!==t.exports;if(o&&!a&&l&&(n[i]=t.exports),e===t.component){if(r){const g=t.component.manager;a&&g.W(t,n[i]),t.onUpdate(_=>{if(_.has(i)){const S=n[i];S!==t.exports&&g.W(t,S)}})}t.O=r?void 0:i}const h=(y=t.component.constructor.elementProperties.get(i))==null?void 0:y.readOnly;t.watchExports(()=>{n[i]!==t.exports&&(h?jLe(()=>{n[i]=t.exports}):n[i]=t.exports)})},Er=(t,e)=>{const r=P1().manager;r.onLoaded(()=>r.onLifecycle(()=>ll(t,e,s.emit)));const s=nB();return s},lae=(t,e)=>i=>pRe(i,t);var Um,pb,ef;class lB extends oB{constructor(i,r){super(i);at(this,Um);at(this,pb);at(this,ef);this.Y=new Map,this.A=void 0,Je(this,pb,oae());const s=this;Je(s,ef,r),s.Z(),s.setProvisionalExports(cae(i,new WeakRef(s),i.M.length-1,s.instance,s.Y),!1),rB(i,n=>{if(n){const o=He(()=>i[n],a=>{if(a===s.instance)return;const l=s.instance;s.exports=a,s.instance=a,s.Y.forEach((c,h)=>i.requestUpdate(c,l[h])),ue(s,Um)&&l.destroy(),Je(s,Um,!1)},{sync:!0});s.onDestroy(o.remove)}},s.exports)}get exports(){return aae(ue(this,pb)),super.exports}set exports(i){super.exports=i,ue(this,pb).notify()}Z(){var r;const i=this;i.instance="prototype"in ue(i,ef)&&"declaredClass"in ue(i,ef).prototype?new(ue(i,ef)):ue(r=i,ef).call(r),Je(i,Um,!0)}hostConnected(){this.exports=this.instance}hostDestroy(){var i,r;ue(this,Um)&&((r=(i=this.instance).destroy)==null||r.call(i))}}Um=new WeakMap,pb=new WeakMap,ef=new WeakMap;const pRe=Ux(lB),cae=(t,e,i,r,s)=>new Proxy(r,{get:(n,o)=>{const a=n[o];if(typeof o=="symbol"||s.has(o))return a;const l=t.M[i];return l.A=o,sB(t,c=>{if(l.A=void 0,c!==void 0){const h=c.key;s.set(o,h);const y=t.constructor.getPropertyOptions(h),g=o!==h&&h.toLowerCase().includes("disable");fRe(e,y,o,h,g),y.i===void 0&&ARe(y,i,o,g)}},a)}}),fRe=(t,e,i,r,s,n)=>n=He(()=>{const o=t.deref();return o===void 0||o.component.manager.destroyed?n=n.remove():o.exports[i]},(o,a)=>{if(!n)return;const l=t.deref().component;l==null||l.requestUpdate(r,s?!a:a),e.c=!1},{sync:!0}),ARe=(t,e,i,r)=>{t.d.get=function(){var n;const s=(n=this.M[e])==null?void 0:n.exports[i];return r?!s:s},t.d.set=function(s){const n=this.M[e];n.A!==i&&(n.exports[i]=r?!s:s)}},mRe=t=>t.Y,yRe=(t,e)=>{const i=e.manager.useRefSync(t);i==null||i.hostDestroy(),i==null||i.Z(),i==null||i.hostConnected()};let GA=class extends dt{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};u([A({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],GA.prototype,"row",void 0),u([A({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],GA.prototype,"column",void 0),u([A({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],GA.prototype,"rows",void 0),u([A({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],GA.prototype,"columns",void 0),GA=u([B("esri.CameraLayout")],GA);const uae=GA;let cB=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return Wq(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return Bn(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+TF(this.range,e-i,r)}minimalMonotonic(e,i,r){return Wq(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,s=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(s)?r:s}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function Wq(t,e,i,r,s=0,n=!1){return(r-=s)<e?r+=TF(t,e-r):r>i&&(r-=TF(t,r-i)),n&&r===i&&(r=e),r+s}function TF(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const blt=new cB(0,2*Math.PI),wlt=new cB(-Math.PI,Math.PI),gRe=new cB(0,360);let Ec=class extends dt.ClonableMixin(pe){constructor(...e){super(...e),this.position=new ct([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new uae}normalizeCtorArgs(e,i,r,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return i!=null&&(n.heading=i),r!=null&&(n.tilt=r),s!=null&&(n.fov=s),n}return e}writePosition(e,i,r,s){const n=e.clone();n.x=ro(e.x||0),n.y=ro(e.y||0),n.z=e.hasZ?ro(e.z||0):e.z,i[r]=n.write({},s)}readPosition(e,i){const r=new ct;return r.read(e,i),r.x=ro(r.x||0),r.y=ro(r.y||0),r.z=r.hasZ?ro(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};u([A({type:ct,json:{write:{isRequired:!0}}})],Ec.prototype,"position",void 0),u([Ne("position")],Ec.prototype,"writePosition",null),u([Me("position")],Ec.prototype,"readPosition",null),u([A({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),yi((t=>gRe.normalize(ro(t))))],Ec.prototype,"heading",void 0),u([A({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),yi((t=>Bn(ro(t),-180,180)))],Ec.prototype,"tilt",void 0),u([A({type:Number,nonNullable:!0,json:{default:55,write:!0}}),yi((t=>Bn(ro(t,55),1,170)))],Ec.prototype,"fov",void 0),u([A({type:uae,nonNullable:!0,json:{read:!1,write:!1}})],Ec.prototype,"layout",void 0),Ec=u([B("esri.Camera")],Ec);const vRe=Ec;var MF;let gp=MF=class extends pe{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new MF({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([A({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:qR}}}}})],gp.prototype,"rotation",void 0),u([yi("rotation")],gp.prototype,"castRotation",null),u([A({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:qR}}}}})],gp.prototype,"scale",void 0),u([A({types:E1,json:{read:Ju,write:!0,origins:{"web-scene":{read:Ju,write:{overridePolicy:qR}}}}})],gp.prototype,"targetGeometry",void 0),u([A({type:vRe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],gp.prototype,"camera",void 0),gp=MF=u([B("esri.Viewpoint")],gp);const Cs=gp;function qR(){return{enabled:!this.camera}}let Kc=class extends qe{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(wK((()=>this._refresh()),Hu))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(e){return new qe(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(r(s)){const n=this.indexOf(s,e);n>=0?n!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)e=this._processCollection(e,o);else e=this._processCollection(e,n)}}return e}};u([A()],Kc.prototype,"getCollections",void 0),u([A()],Kc.prototype,"getChildrenFunction",void 0),u([A()],Kc.prototype,"itemFilterFunction",void 0),Kc=u([B("esri.core.CollectionFlattener")],Kc);var kF,fb;let ln=(fb=class extends pe{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new kF({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},kF=fb,fb);u([A({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ln.prototype,"cols",void 0),u([A({type:Kt,json:{write:!0}})],ln.prototype,"level",void 0),u([A({type:String,json:{write:!0}})],ln.prototype,"levelValue",void 0),u([A({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ln.prototype,"origin",void 0),u([A({type:Number,json:{write:!0}})],ln.prototype,"resolution",void 0),u([A({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ln.prototype,"rows",void 0),u([A({type:Number,json:{write:!0}})],ln.prototype,"scale",void 0),ln=kF=u([B("esri.layers.support.LOD")],ln);let bRe=class{constructor(e,i,r,s,n=void 0){this.id=e,this.level=i,this.row=r,this.col=s,this.extent=n}};var vp;const Qq=new Ot({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var Ab;let en=(Ab=class extends pe{static create(e={}){const{resolutionFactor:i=1,scales:r,size:s=256,spatialReference:n=We.WebMercator,numLODs:o=24}=e;if(!ma(n)){const g=[];if(r)for(let _=0;_<r.length;_++){const S=r[_];g.push(new ln({level:_,scale:S,resolution:S}))}else{let _=5e-4;for(let S=o-1;S>=0;S--)g.unshift(new ln({level:S,scale:_,resolution:_})),_*=2}return new vp({dpi:96,lods:g,origin:new ct(0,0,n),size:[s,s],spatialReference:n})}const a=co(n),l=e.origin?new ct({x:e.origin.x,y:e.origin.y,spatialReference:n}):new ct(a?{x:a.origin[0],y:a.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),c=96,h=1/(xa(n)*39.37*c),y=[];if(r)for(let g=0;g<r.length;g++){const _=r[g],S=_*h;y.push(new ln({level:g,scale:_,resolution:S}))}else{let g=x1(n)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const _=Math.ceil(o/i);y.push(new ln({level:0,scale:g,resolution:g*h}));for(let S=1;S<_;S++){const E=g/2**i,C=E*h;y.push(new ln({level:S,scale:E,resolution:C})),g=E}}return new vp({dpi:c,lods:y,origin:l,size:[s,s],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=co(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return ct.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const s=[],n=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach((o=>{s.push(o.scale),i=o.scale>i?o.scale:i,r=o.scale<r?o.scale:r,n[o.level]=o}))),this._set("scales",s),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),s=r+1;return i[r]/(i[r]/i[s])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let s=0;for(;s<r;s++){const n=i[s],o=i[s+1];if(n<=e)return s;if(o===e)return s+1;if(n>e&&o<e)return s+Math.log(n/e)/Math.log(n/o)}return s}tileAt(e,i,r,s){const n=this.lodAt(e);if(!n)return null;let o,a;if(typeof i=="number")o=i,a=r;else if(Ts(i.spatialReference,this.spatialReference))o=i.x,a=i.y,s=r;else{const h=$k(i,this.spatialReference);if(h==null)return null;o=h.x,a=h.y,s=r}const l=n.resolution*this.size[0],c=n.resolution*this.size[1];return s||(s=new bRe(null,0,0,0,Qr())),s.level=e,s.row=Math.floor((this.origin.y-a)/c+.001),s.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(s),s}updateTileInfo(e,i=vp.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&i===vp.ExtrapolateOptions.POWER_OF_TWO){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return;const s=e.level-r.level,n=r.resolution*this.size[0]/2**s,o=r.resolution*this.size[1]/2**s;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Qr()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:s}=r,n=s*this.size[0],o=s*this.size[1];return e[0]=this.origin.x+i.col*n,e[1]=this.origin.y-(i.row+1)*o,e[2]=e[0]+n,e[3]=e[1]+o,e}lodAt(e){var i;return((i=this._levelToLOD)==null?void 0:i[e])??null}clone(){return vp.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],s=this.lods.length-i;for(let n=0;n<s;n++){const o=n+i,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new ln({level:n,scale:a,resolution:l}))}return new vp({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const s=e[r];this._upsampleLevels[s.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/s.resolution:0},i=s}}},vp=Ab,Ab);u([A({type:Number,json:{write:!0}})],en.prototype,"compressionQuality",void 0),u([A({type:Number,json:{write:!0}})],en.prototype,"dpi",void 0),u([A({type:String,json:{read:Qq.read,write:Qq.write,origins:{"web-scene":{read:!1,write:!1}}}})],en.prototype,"format",void 0),u([A({readOnly:!0})],en.prototype,"isWrappable",null),u([A({type:ct,json:{write:!0}})],en.prototype,"origin",void 0),u([Me("origin")],en.prototype,"readOrigin",null),u([A({type:[ln],value:null,json:{write:!0}})],en.prototype,"lods",null),u([A({readOnly:!0})],en.prototype,"scales",void 0),u([A({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],en.prototype,"size",void 0),u([Me("size",["rows","cols"])],en.prototype,"readSize",null),u([Ne("size",{cols:{type:Kt},rows:{type:Kt}})],en.prototype,"writeSize",null),u([A({type:We,json:{write:!0}})],en.prototype,"spatialReference",void 0),en=vp=u([B("esri.layers.support.TileInfo")],en),(function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"})(en||(en={}));const uC={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},WR={xsmall:544,small:768,medium:992,large:1200};function wRe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function QR(t,e){return e?uC[t].valueToClassName[e].split(" "):[]}const _Re=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=WR}initialize(){this.addHandles(He((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),wr))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!wRe(i)){const r=JSON.stringify(WR,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=WR}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=io.acquire(),r=io.acquire();let s,n=!1;for(s in uC){const o=this[s],a=uC[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,QR(s,o).forEach((l=>r.push(l))),QR(s,a).forEach((l=>i.push(l))))}n&&(this._applyClassNameChanges(i,r),io.release(i),io.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach((n=>s.classList.remove(n))),i.forEach((n=>s.classList.add(n))))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in uC)QR(r,this[r]).forEach((s=>i.classList.remove(s)))}};return u([A()],e.prototype,"breakpoints",null),u([A()],e.prototype,"orientation",void 0),u([A()],e.prototype,"widthBreakpoint",void 0),u([A()],e.prototype,"heightBreakpoint",void 0),e=u([B("esri.views.BreakpointsOwner")],e),e};function uB(t){return typeof t=="string"?document.getElementById(t):t??null}function Jq(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let e0=class extends et{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,He)}addWhen(e,i,r={}){return this._installWatch(e,i,r,hn)}addOnCollectionChange(e,i,{initial:r=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([ll(e,"after-changes",this._createSyncUpdatingCallback(),Hu),ll(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>i({added:[],removed:o.toArray()}):void 0})],n),Ai((()=>this.removeHandles(n)))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Ai((()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(nE)||this._set("updating",!1))})),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},s){const n=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,n);const o=s(e,i,r);return this.addHandles(o,n),Ai((()=>this.removeHandles(n)))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),s=He(e,r,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(nE),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(bx((()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(nE))})),nE)}}};u([A({readOnly:!0})],e0.prototype,"updating",void 0),e0=u([B("esri.core.support.UpdatingHandles")],e0);const nE=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(é›·å®—æ°‘) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tM=function(){return tM=Object.assign||function(e){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},tM.apply(this,arguments)},PF={exports:{}},Lr={},LF={exports:{}},H0={};function hae(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function SRe(t,e,i){}function xRe(t,e,i){}var $Re=/javascript\s*\:/img;function ERe(t,e){return $Re.test(e)?"":e}H0.whiteList=hae();H0.getDefaultWhiteList=hae;H0.onAttr=SRe;H0.onIgnoreAttr=xRe;H0.safeAttrValue=ERe;var IRe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},ww=IRe;function CRe(t,e){t=ww.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,s=0,n=0,o="";function a(){if(!r){var h=ww.trim(t.slice(s,n)),y=h.indexOf(":");if(y!==-1){var g=ww.trim(h.slice(0,y)),_=ww.trim(h.slice(y+1));if(g){var S=e(s,o.length,g,_,h);S&&(o+=S+"; ")}}}s=n+1}for(;n<i;n++){var l=t[n];if(l==="/"&&t[n+1]==="*"){var c=t.indexOf("*/",n+2);if(c===-1)break;n=c+1,s=n+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return ww.trim(o)}var TRe=CRe,oE=H0,MRe=TRe;function Zq(t){return t==null}function kRe(t){var e={};for(var i in t)e[i]=t[i];return e}function dae(t){t=kRe(t||{}),t.whiteList=t.whiteList||oE.whiteList,t.onAttr=t.onAttr||oE.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||oE.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||oE.safeAttrValue,this.options=t}dae.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onAttr,n=i.onIgnoreAttr,o=i.safeAttrValue,a=MRe(t,function(l,c,h,y,g){var _=r[h],S=!1;if(_===!0?S=_:typeof _=="function"?S=_(y):_ instanceof RegExp&&(S=_.test(y)),S!==!0&&(S=!1),y=o(h,y),!!y){var E={position:c,sourcePosition:l,source:g,isWhite:S};if(S){var C=s(h,y,E);return Zq(C)?h+":"+y:C}else{var C=n(h,y,E);if(!Zq(C))return C}}});return a};var PRe=dae;(function(t,e){var i=H0,r=PRe;function s(o,a){var l=new r(a);return l.process(o)}e=t.exports=s,e.FilterCSS=r;for(var n in i)e[n]=i[n]})(LF,LF.exports);var hB=LF.exports,dB={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},LRe=hB.FilterCSS,RRe=hB.getDefaultWhiteList,iM=dB;function pae(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var fae=new LRe;function ORe(t,e,i){}function DRe(t,e,i){}function NRe(t,e,i){}function FRe(t,e,i){}function Aae(t){return t.replace(BRe,"&lt;").replace(jRe,"&gt;")}function zRe(t,e,i,r){if(i=wae(i),e==="href"||e==="src"){if(i=iM.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(aE.lastIndex=0,aE.test(i))return""}else if(e==="style"){if(Yq.lastIndex=0,Yq.test(i)||(Xq.lastIndex=0,Xq.test(i)&&(aE.lastIndex=0,aE.test(i))))return"";r!==!1&&(r=r||fae,i=r.process(i))}return i=_ae(i),i}var BRe=/</g,jRe=/>/g,URe=/"/g,VRe=/&quot;/g,GRe=/&#([a-zA-Z0-9]*);?/gim,HRe=/&colon;?/gim,qRe=/&newline;?/gim,aE=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Yq=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Xq=/u\s*r\s*l\s*\(.*/gi;function mae(t){return t.replace(URe,"&quot;")}function yae(t){return t.replace(VRe,'"')}function gae(t){return t.replace(GRe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function vae(t){return t.replace(HRe,":").replace(qRe," ")}function bae(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return iM.trim(e)}function wae(t){return t=yae(t),t=gae(t),t=vae(t),t=bae(t),t}function _ae(t){return t=mae(t),t=Aae(t),t}function WRe(){return""}function QRe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:iM.indexOf(t,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return s.push([n!==!1?n:l.position,h]),n=!1,c}else return n||(n=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return iM.forEach(s,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function JRe(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var s=t.indexOf("-->",r);if(s===-1)break;i=s+3}return e}function ZRe(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Lr.whiteList=pae();Lr.getDefaultWhiteList=pae;Lr.onTag=ORe;Lr.onIgnoreTag=DRe;Lr.onTagAttr=NRe;Lr.onIgnoreTagAttr=FRe;Lr.safeAttrValue=zRe;Lr.escapeHtml=Aae;Lr.escapeQuote=mae;Lr.unescapeQuote=yae;Lr.escapeHtmlEntities=gae;Lr.escapeDangerHtml5Entities=vae;Lr.clearNonPrintableCharacter=bae;Lr.friendlyAttrValue=wae;Lr.escapeAttrValue=_ae;Lr.onIgnoreTagStripAll=WRe;Lr.StripTagBody=QRe;Lr.stripCommentTag=JRe;Lr.stripBlankChar=ZRe;Lr.cssFilter=fae;Lr.getDefaultCSSWhiteList=RRe;var oP={},jp=dB;function YRe(t){var e=jp.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=jp.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function XRe(t){return t.slice(0,2)==="</"}function KRe(t,e,i){var r="",s=0,n=!1,o=!1,a=0,l=t.length,c="",h="";e:for(a=0;a<l;a++){var y=t.charAt(a);if(n===!1){if(y==="<"){n=a;continue}}else if(o===!1){if(y==="<"){r+=i(t.slice(s,a)),n=a,s=a;continue}if(y===">"){r+=i(t.slice(s,n)),h=t.slice(n,a+1),c=YRe(h),r+=e(n,r.length,c,h,XRe(h)),s=a+1,n=!1;continue}if(y==='"'||y==="'")for(var g=1,_=t.charAt(a-g);_.trim()===""||_==="=";){if(_==="="){o=y;continue e}_=t.charAt(a-++g)}}else if(y===o){o=!1;continue}}return s<t.length&&(r+=i(t.substr(s))),r}var eOe=/[^a-zA-Z0-9\\_:.-]/gim;function tOe(t,e){var i=0,r=0,s=[],n=!1,o=t.length;function a(g,_){if(g=jp.trim(g),g=g.replace(eOe,"").toLowerCase(),!(g.length<1)){var S=e(g,_||"");S&&s.push(S)}}for(var l=0;l<o;l++){var c=t.charAt(l),h,y;if(n===!1&&c==="="){n=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:rOe(t,l+1);continue}if(n!==!1&&l===r){if(y=t.indexOf(c,l+1),y===-1)break;h=jp.trim(t.slice(r+1,y)),a(n,h),n=!1,l=y,i=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),n===!1)if(y=iOe(t,l),y===-1){h=jp.trim(t.slice(i,l)),a(h),n=!1,i=l+1;continue}else{l=y-1;continue}else if(y=sOe(t,l-1),y===-1){h=jp.trim(t.slice(i,l)),h=Kq(h),a(n,h),n=!1,i=l+1;continue}else continue}return i<t.length&&(n===!1?a(t.slice(i)):a(n,Kq(jp.trim(t.slice(i))))),jp.trim(s.join(" "))}function iOe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function rOe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function sOe(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function nOe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function Kq(t){return nOe(t)?t.substr(1,t.length-2):t}oP.parseTag=KRe;oP.parseAttr=tOe;var oOe=hB.FilterCSS,Bl=Lr,Sae=oP,aOe=Sae.parseTag,lOe=Sae.parseAttr,hC=dB;function lE(t){return t==null}function cOe(t){var e=hC.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=hC.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=hC.trim(t.slice(0,-1))),{html:t,closing:i}}function uOe(t){var e={};for(var i in t)e[i]=t[i];return e}function hOe(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function xae(t){t=uOe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Bl.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=hOe(t.whiteList||t.allowList):t.whiteList=Bl.whiteList,t.onTag=t.onTag||Bl.onTag,t.onTagAttr=t.onTagAttr||Bl.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Bl.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Bl.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Bl.safeAttrValue,t.escapeHtml=t.escapeHtml||Bl.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new oOe(t.css))}xae.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onTag,n=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,c=i.escapeHtml,h=e.cssFilter;i.stripBlankChar&&(t=Bl.stripBlankChar(t)),i.allowCommentTag||(t=Bl.stripCommentTag(t));var y=!1;i.stripIgnoreTagBody&&(y=Bl.StripTagBody(i.stripIgnoreTagBody,n),n=y.onIgnoreTag);var g=aOe(t,function(_,S,E,C,M){var P={sourcePosition:_,position:S,isClosing:M,isWhite:Object.prototype.hasOwnProperty.call(r,E)},D=s(E,C,P);if(!lE(D))return D;if(P.isWhite){if(P.isClosing)return"</"+E+">";var F=cOe(C),U=r[E],G=lOe(F.html,function(Q,W){var X=hC.indexOf(U,Q)!==-1,K=o(E,Q,W,X);return lE(K)?X?(W=l(E,Q,W,h),W?Q+'="'+W+'"':Q):(K=a(E,Q,W,X),lE(K)?void 0:K):K});return C="<"+E,G&&(C+=" "+G),F.closing&&(C+=" /"),C+=">",C}else return D=n(E,C,P),lE(D)?c(C):D},c);return y&&(g=y.remove(g)),g};var dOe=xae;(function(t,e){var i=Lr,r=oP,s=dOe;function n(a,l){var c=new s(l);return c.process(a)}e=t.exports=n,e.filterXSS=n,e.FilterXSS=s,(function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]})();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(PF,PF.exports);var yy=PF.exports,pOe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},fOe=(function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=tM(tM({},yy.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?r.sanitizeUrl(a):yy.safeAttrValue(n,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;e&&!i?s=e:e&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(n){if(n==="whiteList")s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(n==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return s.css.whiteList[a]=o[a]})}else s[n]=e[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new yy.FilterXSS(s)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,s=r===void 0?!0:r,n=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?yy.escapeAttrValue(e):!n&&!s?yy.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,s):yy.safeAttrValue(e,i,r,s)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var s=!1,n=void 0;if(Array.isArray(e))n=e.reduce(function(a,l){var c=r.validate(l,i);return c.isValid?a.concat([l]):(s=!0,a.concat([c.sanitized]))},[]);else if(pOe(e)){var o=Object.keys(e);n=o.reduce(function(a,l){var c=e[l],h=r.validate(c,i);return h.isValid?a[l]=c:(s=!0,a[l]=h.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return s?n:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const AOe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],mOe=AOe.reduce(((t,e)=>(t[e]=[],t)),{}),yOe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],$ae=new fOe({whiteList:mOe,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(yOe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),Eae="http://www.w3.org/",aP=`${Eae}2000/svg`,Iae=`${Eae}1999/xlink`;let eW=[],pB=(t,e)=>{let i={};return Object.keys(t).forEach((r=>{i[r]=t[r]})),e&&Object.keys(e).forEach((r=>{i[r]=e[r]})),i},fB=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Cae=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},gOe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(fB(t[r],e))return r}return-1},JR=(t,e,i,r)=>{let s=t[e];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(fB(a,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},vOe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},RF=[],OF=!1,Tae=t=>{(t.children||[]).forEach(Tae),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},tW=()=>{OF=!1,RF.forEach(Tae),RF.length=0},iW=t=>{RF.push(t),OF||(OF=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(tW,{timeout:16}):setTimeout(tW,16))},rW=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),iW(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),iW(t))},bOe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,s=Object.keys(e),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")NF(t,l,!0);else if(a==="classes"){let c=Object.keys(l),h=c.length;for(let y=0;y<h;y++){let g=c[y];l[g]&&t.classList.add(g)}}else if(a==="styles"){let c=Object.keys(l),h=c.length;for(let y=0;y<h;y++){let g=c[y],_=l[g];_&&(Cae(_),i.styleApplyer(t,g,_))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&(function(){let h=l;l=function(y){h.apply(this,[y]),y.target["oninput-value"]=y.target.value}})()),t[a]=l):i.namespace===aP?a==="href"?t.setAttributeNS(Iae,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=$ae.sanitize(l):DF(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function DF(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let rM,wOe=(t,e,i)=>{if(e)for(let r of e)F_(r,t,void 0,i)},Mae=(t,e,i)=>{wOe(t,e.children,i),e.text&&(t.textContent=e.text),bOe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},F_=(t,e,i,r)=>{let s,n=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")s=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(s,i):e.appendChild(s);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let h=o.charAt(n-1),y=o.slice(n,l);h==="."?s.classList.add(y):h==="#"?s.id=y:(y==="svg"&&(r=pB(r,{namespace:aP})),r.namespace!==void 0?s=t.domNode=a.createElementNS(r.namespace,y):(s=t.domNode=t.domNode||a.createElement(y),y==="input"&&t.properties&&t.properties.type!==void 0&&s.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(s,i):s.parentNode!==e&&e.appendChild(s)),n=l+1}}Mae(s,t,r)}},NF=(t,e,i)=>{e&&e.split(" ").forEach((r=>{r&&t.classList.toggle(r,i)}))},_Oe=(t,e,i,r)=>{if(!i)return;let s=!1,n=Object.keys(i),o=n.length;for(let a=0;a<o;a++){let l=n[a],c=i[l],h=e[l];if(l==="class")h!==c&&(NF(t,h,!1),NF(t,c,!0));else if(l==="classes"){let y=t.classList,g=Object.keys(c),_=g.length;for(let S=0;S<_;S++){let E=g[S],C=!!c[E];C!==!!h[E]&&(s=!0,C?y.add(E):y.remove(E))}}else if(l==="styles"){let y=Object.keys(c),g=y.length;for(let _=0;_<g;_++){let S=y[_],E=c[S];E!==h[S]&&(s=!0,E?(Cae(E),r.styleApplyer(t,S,E)):r.styleApplyer(t,S,""))}}else if(c||typeof h!="string"||(c=""),l!=="value"||DF(t)){if(c!==h){let y=typeof c;y==="function"&&r.eventHandlerInterceptor||(r.namespace===aP?l==="href"?t.setAttributeNS(Iae,l,c):t.setAttribute(l,c):y==="string"?l==="innerHTML"?t[l]=$ae.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):DF(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),s=!0)}}else{let y=t[l];y!==c&&(t["oninput-value"]?y===t["oninput-value"]:c!==h)&&(t[l]=c,t["oninput-value"]=void 0),c!==h&&(s=!0)}}return s},SOe=(t,e,i,r,s)=>{if(i===r)return!1;r=r||eW;let n,o=(i=i||eW).length,a=r.length,l=0,c=0,h=!1;for(;c<a;){let y=l<o?i[l]:void 0,g=r[c];if(y!==void 0&&fB(y,g))h=rM(y,g,s)||h,l++;else{let _=gOe(i,g,l+1);if(_>=0){for(n=l;n<_;n++)rW(i[n]),JR(i,n,t,"removed");h=rM(i[_],g,s)||h,l=_+1}else F_(g,e,l<o?i[l].domNode:void 0,s),vOe(g),JR(r,c,t,"added")}c++}if(o>l)for(n=l;n<o;n++)rW(i[n]),JR(i,n,t,"removed");return h};rM=(t,e,i)=>{let r=t.domNode,s=!1;if(t===e)return!1;let n=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,s=!0,s}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=pB(i,{namespace:aP})),t.text!==e.text&&(n=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,n=SOe(e,r,t.children,e.children,i)||n,n=_Oe(r,t.properties,e.properties,i)||n,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return n&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),s};let cE=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,rM(r,i,e)},domNode:t.domNode});const xOe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let R2=t=>pB(xOe,t),pf={append:(t,e,i)=>(i=R2(i),F_(e,t,void 0,i),cE(e,i)),insertBefore:(t,e,i)=>(i=R2(i),F_(e,t.parentNode,t,i),cE(e,i)),merge:(t,e,i)=>(i=R2(i),e.domNode=t,Mae(t,e,i),cE(e,i)),replace:(t,e,i)=>(i=R2(i),F_(e,t.parentNode,t,i),t.parentNode.removeChild(t),cE(e,i))},kae,$Oe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};kae=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let EOe=(t,e)=>{let i=t;return e.forEach((r=>{i=i&&i.children?kae(i.children,(s=>s.domNode===r)):void 0})),i},IOe=(t,e,i)=>{let r=function(s){i("domEvent",s);let n=e(),o=$Oe(s.currentTarget,n.domNode);o.reverse();let a,l=EOe(n.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",s),a};return(s,n,o,a)=>r},sM=t=>{let e,i,r=R2(t),s=r.performanceLogger,n=!0,o=!1,a=[],l=[],c=(y,g,_)=>{let S,E=()=>S;r.eventHandlerInterceptor=IOe(e,E,s),S=y(g,_(),r),a.push(S),l.push(_)},h=()=>{if(i=void 0,n){n=!1,s("renderStart",void 0);for(let y=0;y<a.length;y++){let g=l[y]();s("rendered",void 0),a[y].update(g),s("patched",void 0)}s("renderDone",void 0),n=!0}};return e={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,n=!0,e.scheduleRender()},append:(y,g)=>{c(pf.append,y,g)},insertBefore:(y,g)=>{c(pf.insertBefore,y,g)},merge:(y,g)=>{c(pf.merge,y,g)},replace:(y,g)=>{c(pf.replace,y,g)},detach:y=>{for(let g=0;g<l.length;g++)if(l[g]===y)return l.splice(g,1),a.splice(g,1)[0];throw new Error("renderFunction was not found")}},e},bp=class extends et{constructor(){super(...arguments),this.items=new qe,this._watchUpdatingTracking=new e0,this._callbacks=new Map,this._projector=sM(),this._hiddenProjector=sM()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(i=>{for(const r of i.added){const s=()=>r.render();this._callbacks.set(r,s),this._projector.append(this.surface,s)}for(const r of i.removed){const s=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(s.domNode),this._callbacks.delete(r)}}))}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach((e=>this._projector.detach(e))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let s;const n=()=>(s=e.render(),s);r.append(i,n),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s!=null&&s.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(n);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),s=this.computeBoundingRect(i);return Math.max(r.left,s.left)<=Math.min(r.right,s.right)&&Math.max(r.top,s.top)<=Math.min(r.bottom,s.bottom)}get hasVisibleItems(){return this.items.some((e=>e.visible))}async prepare(){await document.fonts.load(this._fontString()).catch((()=>{}))}renderCanvas(e,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some((n=>n.visible&&!(r&&n.isDecoration))))return;const s=e.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach((n=>{r&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())})),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([A({readOnly:!0})],bp.prototype,"surface",void 0),u([A({readOnly:!0})],bp.prototype,"items",void 0),u([A({readOnly:!0})],bp.prototype,"needsRender",null),u([A({readOnly:!0})],bp.prototype,"_watchUpdatingTracking",void 0),u([A({readOnly:!0})],bp.prototype,"updating",null),bp=u([B("esri.views.overlay.ViewOverlay")],bp);const sW=bp,ZR=[0,0];function COe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return ZR[0]=i.left+((e==null?void 0:e.pageXOffset)??0),ZR[1]=i.top+((e==null?void 0:e.pageYOffset)??0),ZR}function nW(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function TOe(t){const e=document.createElement("div");return t.appendChild(e),e}const gy=16,_w=750,MOe=512,kOe=2,POe=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:gy,time:_w},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([He((()=>this.cursor),(r=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",r)})),He((()=>this.navigating),(r=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",r.toString())}))])}initialize(){this.addHandles([He((()=>this.ui),((i,r)=>this._handleUIChange(i,r)),wr),this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){var i;this.destroyed||((i=this.ui)==null||i.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),s=uB(i);if(s||typeof i!="string"||be.getLogger(this).error("#container",`element with id '${i}' not found`),r===s)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(nW(this.root),this._set("root",null)),this.userContent&&(Jq(this.userContent,r),nW(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",Jq(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new sW;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(He((()=>l.needsRender),(c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Lb({render:()=>{var h;return(h=this.overlay)==null?void 0:h.render()}}):this._overlayRenderTaskHandle=pr(this._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}set ui(i){const r=this._get("ui");r!==i&&(r==null||r.destroy()),this._set("ui",i)}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,s){const n=this.position;return i-=n?n[0]:0,r-=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const n=this.position;return i+=n?n[0]:0,r+=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(He((()=>this.root),(s=>{i.container=s?TOe(s):null}),wr),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=gy,i.time=_w;const r=Lb({prepare:o=>{const a=this._measure(),l=this._freqInfo;if(l.time+=o.deltaTime,a&&(l.freq=gy,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const c=this._position();l.freq=c||a?gy:Math.min(_w,l.freq*kOe),!a&&l.freq>=MOe&&(r.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver((o=>{i.freq=gy,i.time=_w,r.resume()}));this.container!=null&&s.observe(this.container);const n=Ai((()=>s.disconnect()));this.addHandles([p1(window,"resize",(()=>{i.freq=gy,i.time=_w,r.resume()})),n,r],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return r===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&COe(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return u([A()],e.prototype,"container",null),u([A({readOnly:!0})],e.prototype,"focused",null),u([A({readOnly:!0})],e.prototype,"height",void 0),u([A()],e.prototype,"messagesCommon",void 0),u([A({type:sW})],e.prototype,"overlay",void 0),u([A({readOnly:!0})],e.prototype,"position",void 0),u([A({readOnly:!0})],e.prototype,"resizing",void 0),u([A({readOnly:!0})],e.prototype,"root",void 0),u([A({value:null,readOnly:!0})],e.prototype,"size",null),u([A({readOnly:!0})],e.prototype,"surface",void 0),u([A({readOnly:!0})],e.prototype,"suspended",void 0),u([A({nonNullable:!0})],e.prototype,"ui",null),u([A({readOnly:!0})],e.prototype,"userContent",void 0),u([A({readOnly:!0})],e.prototype,"width",void 0),u([A()],e.prototype,"widthBreakpoint",void 0),e=u([B("esri.views.DOMContainer")],e),e},Pae=ce("mac")?"Meta":"Control",LOe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),ROe=t=>LOe.has(t);let OOe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},Ms=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback((i=>this._handleEvent(i))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const n=typeof e=="string"?new OOe(e,s):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const y=this._incoming[h.match.eventType];if(y){const g=y.indexOf(h);y.splice(g,1),o(),this._manager&&this._manager.updateDependencies()}},l=new DOe(n,r,{onPause:a,onRemove:a,onResume:h=>{const y=this._incoming[h.match.eventType];y&&!y.includes(h)&&(y.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[n.eventType];return c||(c=[],this._incoming[n.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new NOe(e,{onEmit:(r,s,n,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,s,n,o)},onRemove:r=>{var s;delete this._outgoing[r.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const s of i)if(s.match.matches(e)&&((r=s.callback)==null||r.call(s,e),e.shouldStopPropagation()))break}}},DOe=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},NOe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},FOe=class extends Ms{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",(i=>this._update(i.data)))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=e;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}},zOe=class extends Ms{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=k0(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},BOe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const s=e[r],n=new hK(s,void 0,void 0,2,2);this._properties[r]={pool:n,acquired:[]}}this._afterDispatchHandle=Q0e((()=>this._release()))}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)oU(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const s of i.acquired)oU(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}},Na=class extends et{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Pae,this._latestPointerType="mouse",this._propertiesPool=new BOe({latestPointerLocation:VOe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=Ed.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const s={name:e,handlers:i.map((n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,h,y)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,y,h)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach((r=>{var s;r.removed=!0,(s=r.uninstallCallback)==null||s.call(r)})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):be.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const s=this._handlers[r];s.priorityIndex=r,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const s=this._handlersPriority[r];s.priorityIndex=r;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(e.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)ROe(a)||i.add(a)}s.active=n}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(s==null||s.x!==i||s.y!==r){const n=this._propertiesPool.get("latestPointerLocation");n.x=i,n.y=r,this._set("latestPointerLocation",n)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const n=i;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,s)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const s=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},n=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&n(a,e==="key-down")}const o=i.native;n("Alt",!!(o!=null&&o.altKey)),n("Control",!!(o!=null&&o.ctrlKey)),n("Ctrl",!!(o!=null&&o.ctrlKey)),n("Shift",!!(o!=null&&o.shiftKey)),n("Meta",!!(o!=null&&o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new FOe(((e,i,r)=>this._setLatestPointer(e,i,r))),this._multiTouchHandler=new zOe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Ed.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Ed.INTERNAL)}_setPointerCapture(e,i,r,s){const n=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,i,r,s){this._emitInputEvent(0,e,i,r,s)}_emitInputEvent(e,i,r,s,n,o){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=n!==void 0&&n,c={event:new jOe(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new bS,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r,s;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:n,priorityIndex:o}=e.events.pop(),a=(i=n.data)==null?void 0:i.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&((s=(r=e.currentHandler).eventCallback)==null||s.call(r,n)),n.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(n.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new bS;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(r.eventType!==s.eventType)continue;const n=r.keyModifiers.filter((o=>s.keyModifiers.includes(o)));if(n.length===r.keyModifiers.length!=(n.length===s.keyModifiers.length))return r.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let s=0;for(;s<i.length&&this._compareHandlerPriority(r,i[s])>=0;)s++;i.splice(s,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e((()=>this._onEventReceived(i,r)))},disablePointerCapture:e}}};u([A({readOnly:!0})],Na.prototype,"hasPendingInputs",null),u([A({constructOnly:!0})],Na.prototype,"eventSource",void 0),u([A({constructOnly:!0})],Na.prototype,"recognizers",void 0),u([A()],Na.prototype,"_latestPointerType",void 0),u([A()],Na.prototype,"latestPointerType",null),u([A()],Na.prototype,"multiTouchActive",null),u([A({readOnly:!0})],Na.prototype,"latestPointerLocation",void 0),u([A()],Na.prototype,"_paused",void 0),u([A({readOnly:!0})],Na.prototype,"updating",null),Na=u([B("esri.views.input.InputManager")],Na);let jOe=class{constructor(e,i,r,s,n){this.type=e,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=n,this._propagationState=Up.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Up.STOPPED}shouldStopPropagation(){return(this._propagationState&Up.STOPPED)!==0}defer(e){this._propagationState|=Up.PAUSED;const i=(r,s)=>{this._propagationState&=~Up.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw r;return r};return(typeof e=="function"?e():e).then((r=>i(r,!1)),(r=>i(r,!0)))}shouldPausePropagation(e){return!!(this._propagationState&Up.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Up;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Up||(Up={}));const Ed={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let UOe=class{};const VOe=UOe;function op(t){return t!=null&&"open"in t&&"declaredClass"in t}function oW(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const GOe=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([He((()=>[this.ui,this.popup]),(([i,r],s)=>{const n="popup",o="manual";if(s){const[a,l]=s;a&&op(l)&&(l.view=null,oW(l)&&(a.remove(l,n),l!==r&&r&&l.destroy()))}i&&op(r)&&(r.view=this,oW(r)&&i.add(r,{key:n,position:o,internal:!0}))}),eo),this.on("click",(i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(op(this.popup)?this.popup.viewModel.handleViewClick(i):i.defer((async()=>{await this.setupPopup(),op(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))}),Ed.WIDGET)]),A0((()=>this.ready&&this.popupEnabled&&!this.updating)).then((()=>{Ie(()=>import("./Popup-BlhyPn_i.js").then(i=>i.P),__vite__mapDeps([175,176,18,177,178,179,173,77,75,76,9,10,6,180]),import.meta.url)}))}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(op(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void be.getLogger(this).error(new te("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),op(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!op(this.popup))return this._popupSetupTask=Hk((async r=>{const{default:s}=await Ie(()=>import("./Popup-BlhyPn_i.js").then(o=>o.P),__vite__mapDeps([175,176,18,177,178,179,173,77,75,76,9,10,6,180]),import.meta.url);if(ir(r),!this.popup||op(this.popup))return;const n=this.popup;delete n.open,delete n.close,this.popup=new s(n)})),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},s){const n=[],o=[];let a=!1;const l=$0e(s,ce("popup-view-fetch-timeout")??qOe),c=g=>{const _=new HOe(g);return o.push(_),n.push(_.promise),_},h=g=>{const _=o.at(-1);return _&&_.layerView===g&&!a?_:c(g)};for(const g of r)"graphic"in g?(h(g.layerView).graphics.push(g.graphic),a=!1):(n.push(g.layerView.fetchPopupFeaturesAtLocation(g.mapPoint,l)),a=!0);o.map((g=>g.resolve(l)));const y=x0e(n).then((g=>g.filter((_=>!!_)).flat()));return{pendingFeatures:n,allGraphicsPromise:y,location:i}}async _getPopupHits(i,r){const{hits:s,location:n}=await this.popupHitTest(i);ir(r);const o=[];for(const a of s)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,r)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:n}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return u([A()],e.prototype,"popup",void 0),u([A()],e.prototype,"popupEnabled",void 0),e=u([B("esri.views.PopupView")],e),e};let HOe=class{constructor(e){this.layerView=e,this._resolver=_a(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:s}=this;if(!i)return s.resolve(r),s.promise;let n;return i.fetchPopupFeaturesFromGraphics(r,e).catch((o=>(n=o,null))).then((o=>{o?s.resolve(o):s.reject(n)})),s.promise}};const qOe=5e3;async function lP(t,e){return await t.load(),WOe(t,e)}async function WOe(t,e){const i=[],r=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?r(...o):qe.isCollection(o)?o.forEach((a=>r(a))):Fn.isLoadable(o)&&i.push(o))};e(r);let s=null;if(await CIe(i,(async n=>{const o=await Gk(QOe(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)})),s)throw s.error;return t}function QOe(t){return"loadAll"in t&&typeof t.loadAll=="function"}async function JOe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await Dk("esri/t9n/basemaps");return i[t]||i[e]}const FF={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return er("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return er("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return er("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return er("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return er("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return er("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};let Ch=class extends et{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:lse(e??Bo())??"global";return i=i==="no"?"nb":i,i}};u([A()],Ch.prototype,"apiKey",void 0),u([A()],Ch.prototype,"id",void 0),u([A()],Ch.prototype,"language",void 0),u([A()],Ch.prototype,"places",void 0),u([A()],Ch.prototype,"serviceUrl",void 0),u([A()],Ch.prototype,"worldview",void 0),Ch=u([B("esri.support.BasemapStyle")],Ch);const ZOe=Ch,YOe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),Lae=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),XOe=new Set([...Lae,"link-chart"]);function KOe(t){switch(t.layerContainerType){case"basemap":return YOe;case"operational-layers":return t.origin==="link-chart"?XOe:Lae;default:return null}}function eDe(t,e){if(e.restrictedWebMapWriting){const i=KOe(e);return i==null||i.has(t.type)&&!qk(t)}return!0}function tDe(t,e){var i;if(e)if(qk(t)){const r=px("featureCollection.layers",e),s=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;s&&aW(t,s)}else t.type!=="group"&&aW(t,e)}function aW(t,e){"maxScale"in t&&(e.maxScale=uT(t.maxScale)??void 0),"minScale"in t&&(e.minScale=uT(t.minScale)??void 0)}function iDe(t,e){if(tDe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=uT(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(qk(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function zF(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new te("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(qk(t)&&!t.isTable)e=t.resourceInfo;else if(eDe(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&iDe(t,e=ie(e)),e}var O2;let rDe=0,ta=O2=class extends pe.JSONSupportMixin(Fn){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+rDe++,this.baseLayers=new qe,this.referenceLayers=new qe;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&be.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",(r=>e(r.item))),this.referenceLayers.on("after-add",(r=>e(r.item))),this.baseLayers.on("after-remove",(r=>i(r.item))),this.referenceLayers.on("after-remove",(r=>i(r.item)))])}initialize(){this.when().catch((t=>{be.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=tr(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",Pd(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach((s=>{const n=zF(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&r.push(n)})),this.referenceLayers.forEach((s=>{const n=zF(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&(s.type!=="scene"&&(n.isReference=!0),r.push(n))}))),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",Pd(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return lP(this,(t=>{t(this.baseLayers,this.referenceLayers)}))}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map((e=>ZC(e)?e.clone():e)),referenceLayers:this.referenceLayers.map((e=>ZC(e)?e.clone():e))};return this.loaded&&(t.loadStatus="loaded"),new O2({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){var i;return t=t||{},e!=null&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((r=>{const s=ie(r);return s.url&&qu(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&qu(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s}))),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:r}=this;ir(t);const s=[];if(e){const n=e.context?e.context.url:null;if(s.push(this._loadLayersFromJSON(e.data,n,t)),e.data.id&&!e.data.title){const o=e.data.id;s.push(JOe(o).then((a=>{a&&this.read({title:a},e.context)})))}}else i?s.push(this._loadFromItem(i,t)):r&&s.push(this._loadFromStylesService(r,t));await Promise.all(s)}async _loadLayersFromJSON(t,e,i){var l,c;const r=(l=this.resourceInfo)==null?void 0:l.context,s=((c=this.portalItem)==null?void 0:c.portal)||(r==null?void 0:r.portal)||null,n=nDe[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await Ie(async()=>{const{populateOperationalLayers:h}=await import("./layersCreator-BYAc1_-l.js");return{populateOperationalLayers:h}},__vite__mapDeps([181,23,22,21,24,20]),import.meta.url),a=[];if(ir(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const h={context:{...r,origin:n,url:e,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},y=S=>n==="web-scene"&&S.layerType==="ArcGISSceneServiceLayer"||S.isReference,g=o(this.baseLayers,t.baseMapLayers.filter((S=>!y(S))),h);a.push(g);const _=o(this.referenceLayers,t.baseMapLayers.filter(y),h);a.push(_)}await Promise.allSettled(a)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),s=Yr(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:sDe[t.type||""]??"web-map",portal:t.portal||Oe.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||Oe.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,e)}async _loadFromStylesService(t,e){const i=t.serviceUrl.endsWith("/webmaps")?t.serviceUrl.slice(0,-8):t.serviceUrl,r=`${i}/styles/${t.id}/self`,s=`${i}/webmaps/${t.id}`,n=t.apiKey??li.apiKeys.basemapStyles,[o,a]=await Promise.all([(await ei(r,{query:{token:n},signal:e==null?void 0:e.signal})).data,(await ei(s,{query:{language:t.languageParameter,places:t.places,worldview:t.worldview,token:n},signal:e==null?void 0:e.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=o.thumbnailUrl);const l=Yr(s);if(this._set("resourceInfo",{data:a.baseMap??{},context:{origin:"web-map",url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:a.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,l,e),n)for(const c of[...this.baseLayers,...this.referenceLayers])"apiKey"in c&&(c.apiKey=n)}static fromId(t){const e=FF[t];return e?e.itemId?new O2({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):O2.fromJSON(e,e.is3d?{origin:"web-scene",portal:new Oe({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}};u([A({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:qe}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],ta.prototype,"baseLayers",null),u([A({type:String,json:{origins:{"web-scene":{write:!0}}}})],ta.prototype,"id",void 0),u([A({type:wt})],ta.prototype,"portalItem",void 0),u([A()],ta.prototype,"referenceLayers",null),u([A({readOnly:!0})],ta.prototype,"resourceInfo",void 0),u([A({type:We})],ta.prototype,"spatialReference",void 0),u([A({type:ZOe})],ta.prototype,"style",void 0),u([A()],ta.prototype,"thumbnailUrl",void 0),u([A({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ta.prototype,"title",void 0),u([Ne("title")],ta.prototype,"writeTitle",null),ta=O2=u([B("esri.Basemap")],ta);const sDe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},nDe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},z_=ta,oDe=Object.freeze(Object.defineProperty({__proto__:null,default:z_},Symbol.toStringTag,{value:"Module"}));var BF;let dC=BF=class extends pe{constructor(t){super(t),this.type="none"}clone(){return new BF({type:this.type})}};u([it({none:"none",stayAbove:"stay-above"}),A({json:{write:{isRequired:!0}}})],dC.prototype,"type",void 0),dC=BF=u([B("esri.ground.NavigationConstraint")],dC);const aDe=Symbol("GroundInstance");var lW,jF,MX;let Th=jF=(MX=class extends pe.JSONSupportMixin(Fn){constructor(t){super(t),this[lW]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new qe;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&be.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",(r=>e(r.item))),this.layers.on("after-remove",(r=>i(r.item)))])}initialize(){this.when().catch((t=>{Zs(t)||be.getLogger(this).error("#load()","Failed to load ground",t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)tr(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get layers(){return this._get("layers")}set layers(t){this._set("layers",Pd(t,this._get("layers")))}writeLayers(t,e,i,r){const s=[];t&&(r={...r,layerContainerType:"ground"},t.forEach((n=>{if("write"in n){const o={};Rme(n)().write(o,r)&&s.push(o)}else r!=null&&r.messages&&r.messages.push(new te("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))}))),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return lP(this,(t=>{t(this.layers)}))}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await Ie(()=>import("./ElevationQuery-BJ7NQcM7.js"),[],import.meta.url);ir(e);const r=new i,s=this.layers.filter(cW).toArray();return r.queryAll(s,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await Ie(()=>import("./ElevationQuery-BJ7NQcM7.js"),[],import.meta.url);ir(e);const r=new i,s=this.layers.filter(cW).toArray();return r.createSamplerAll(s,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:ie(this.surfaceColor),navigationConstraint:ie(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new jF({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=(e==null?void 0:e.origin)||"web-scene",s=(e==null?void 0:e.portal)||null,n=(e==null?void 0:e.url)||null,{populateOperationalLayers:o}=await Ie(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-BYAc1_-l.js");return{populateOperationalLayers:l}},__vite__mapDeps([181,23,22,21,24,20]),import.meta.url);ir(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},lW=aDe,MX);function lDe(t){return t&&"createElevationSampler"in t}function cW(t){return t.type==="elevation"||lDe(t)}u([A({json:{read:!1,write:{isRequired:!0}}})],Th.prototype,"layers",null),u([Ne("layers")],Th.prototype,"writeLayers",null),u([A({readOnly:!0})],Th.prototype,"resourceInfo",void 0),u([A({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Kt,read:{reader:vS,source:"transparency"},write:{writer:(t,e)=>{e.transparency=kk(t)},target:"transparency"}}})],Th.prototype,"opacity",void 0),u([A({type:ze,json:{type:[Kt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Th.prototype,"surfaceColor",void 0),u([A({type:dC,json:{write:!0}})],Th.prototype,"navigationConstraint",void 0),Th=jF=u([B("esri.Ground")],Th);const nM=Th;function cDe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function UF(t){return AB[uDe(t)]||dDe}function uDe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:hDe(t.url)}function hDe(t){const e=iie(t);return VF[e]||Rae}const AB={},Rae="text/plain",dDe=AB[Rae],VF={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in VF)AB[VF[t]]=t;function pDe(t){const e=(t==null?void 0:t.origins)??[void 0];return(i,r)=>{const s=fDe(t,i,r);for(const n of e){const o=az(i,n,r);for(const a in s)o[a]=s[a]}}}function fDe(t,e,i){if((t==null?void 0:t.type)==="resource")return ADe(t,e,i);switch((t==null?void 0:t.type)??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:s}=Swe;return{read:r,write:s}}}}function ADe(t,e,i){var s,n;const r=yx(e,i);return{type:String,read:(o,a,l)=>{const c=wk(o,a,l);return r.type===String?c:typeof r.type=="function"?new r.type({url:c}):void 0},write:{isRequired:(n=(s=r.json)==null?void 0:s.write)==null?void 0:n.isRequired,writer(o,a,l,c){if(!(c!=null&&c.resources))return typeof o=="string"?void(a[l]=g0(o,c)):void(a[l]=o.write({},c));const h=gDe(o),y=g0(h,{...c,verifyItemRelativeUrls:c!=null&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},Nb.NO),g=r.type!==String&&(!cDe(this)||(c==null?void 0:c.origin)&&this.originIdOf(i)>fd(c.origin)),_={object:this,propertyName:i,value:o,targetUrl:y,dest:a,targetPropertyName:l,context:c,params:t};c!=null&&c.portalItem&&y&&!jo(y)?g&&(t!=null&&t.contentAddressed)?GF(_):g?mDe(_):yDe(_):c!=null&&c.portalItem&&(y==null||aie(y)!=null||S1(y)||g)?GF(_):a[l]=y}}}}function GF(t){var S;const{targetUrl:e,params:i,value:r,context:s,dest:n,targetPropertyName:o}=t;if(!s.portalItem)return;const a=lie(e),l=Dae(r,e,s);if(i!=null&&i.contentAddressed&&l.type!=="json")return void((S=s.messages)==null?void 0:S.push(new te("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l})));const c=i!=null&&i.contentAddressed&&l.type==="json"?Q7(l.jsonString):(a==null?void 0:a.filename)??T1(),h=m0((i==null?void 0:i.prefix)??(a==null?void 0:a.prefix),c),y=`${h}.${UF(l)}`;if(i!=null&&i.contentAddressed&&s.resources&&l.type==="json"){const E=s.resources.toKeep.find((({resource:C})=>C.path===y))??s.resources.toAdd.find((({resource:C})=>C.path===y));if(E)return void(n[o]=E.resource.itemRelativeUrl)}const g=s.portalItem.resourceFromPath(y);S1(e)&&s.resources&&s.resources.pendingOperations.push(uwe(e).then((E=>{g.path=`${h}.${UF({type:"blob",blob:E})}`,n[o]=g.itemRelativeUrl})).catch((()=>{})));const _=(i==null?void 0:i.compress)??!1;s.resources&&Oae({...t,resource:g,content:l,compress:_,updates:s.resources.toAdd}),n[o]=g.itemRelativeUrl}function mDe(t){const{context:e,targetUrl:i,params:r,value:s,dest:n,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(i),l=Dae(s,i,e),c=UF(l),h=iie(a.path),y=(r==null?void 0:r.compress)??!1;c===h?(e.resources&&Oae({...t,resource:a,content:l,compress:y,updates:e.resources.toUpdate}),n[o]=i):GF(t)}function yDe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function Oae({object:t,propertyName:e,updates:i,resource:r,content:s,compress:n}){const o=a=>{vDe(t,e,a)};i.push({resource:r,content:s,compress:n,finish:o})}function Dae(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function gDe(t){return t==null?null:typeof t=="string"?t:t.url}function vDe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let pC=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.color=null}};u([A({type:ze,json:{type:[Kt],write:!0}})],pC.prototype,"color",void 0),pC=u([B("esri.effects.FocusAreaOutline")],pC);const bDe=pC;var fC;let HF=fC=class extends pe.JSONSupportMixin(qe.ofType(zi)){constructor(t){super(t)}clone(){return new fC(this.items.map((t=>t.clone())))}write(t,e){return this.toJSON(e)}toJSON(t){var i;const e=(i=t==null?void 0:t.layer)==null?void 0:i.spatialReference;return e?this.toArray().map((r=>{var n;if(!e.equals(r.spatialReference)){if(!cc(r.spatialReference,e))return(n=t==null?void 0:t.messages)==null||n.push(new Sa("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const o=new zi;Fne(r,o,e),r=o}const s=r.toJSON(t);return delete s.spatialReference,s})).filter((r=>r!=null)):this.toArray().map((r=>r.toJSON(t)))}static fromJSON(t,e){const i=new fC;return t.forEach((r=>i.add(zi.fromJSON(r,e)))),i}};HF=fC=u([B("esri.layers.support.PolygonCollection")],HF);const B_=HF;let Mh=class extends pe.JSONSupportMixin(dt){constructor(e){super(e),this.id=`focusarea-${T1()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new B_}readGeometries(e,i,r){var s,n;Array.isArray(e)?this.geometries=B_.fromJSON(e,r):(n=(s=r.hooks)==null?void 0:s.onAfterLoad)==null||n.call(s,(()=>this._loadGeometries(kd(e,r),r)))}async _loadGeometries(e,i){const r=await ei(e,{responseType:"json"});this.geometries=B_.fromJSON(r.data,i)}};u([A({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),A()],Mh.prototype,"id",void 0),u([A({type:String,json:{write:!0}})],Mh.prototype,"title",void 0),u([A({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Mh.prototype,"enabled",void 0),u([A({type:bDe,json:{write:!0}})],Mh.prototype,"outline",void 0),u([A({type:B_,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new B_(t.items.map((e=>e.clone())))}),pDe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Mh.prototype,"geometries",void 0),u([Me(["web-scene","portal-item"],"geometries")],Mh.prototype,"readGeometries",null),Mh=u([B("esri.effects.FocusArea")],Mh);const wDe=Mh;let D2=class extends pe.JSONSupportMixin(dt){constructor(e){super(e),this.areas=new qe,this.style="bright"}};u([A({type:qe.ofType(wDe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new qe(t.items.map((e=>e.clone())))})],D2.prototype,"areas",void 0),u([A({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],D2.prototype,"style",void 0),D2=u([B("esri.effects.FocusAreas")],D2);const Nae=D2;function _De(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function SDe(t){var e,i;return!(!_De(t)||!((i=(e=DIe(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!FIe(t)||S7(t))}const YR=()=>be.getLogger("esri.support.basemapUtils");function xDe(){return{}}function $De(t){for(const e in t){const i=t[e];tr(i),delete t[e]}}function EDe(t,e){let i;if(typeof t=="string"){const r=t in FF,s=!r&&t.includes("/");if(!r&&!s){if(S5())YR().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(FF).filter((([o,a])=>a.classic||a.is3d)).map((([o])=>`"${o}"`)).sort().join(", ");YR().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${n}`)}return null}e&&(i=e[t]),i||(i=r?z_.fromId(t):new z_({style:{id:t}}),e&&(e[t]=i))}else i=fr(z_,t);return i!=null&&i.destroyed&&(YR().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function IDe(t){return new Kc({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function XR(t){for(const e of t.values())e==null||e.destroy();t.clear()}const uW={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function CDe(t){let e=null;if(typeof t=="string")if(t in uW){const i=uW[t];e=new nM({resourceInfo:{data:{layers:[i]}}})}else be.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=fr(nM,t);return e}function qF(t,e,i){let r,s;if(t)for(let n=0,o=t.length;n<o;n++){if(r=t.at(n),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(s=qF(r.layers,e,i),s))return s}}const TDe=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new qe;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||be.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",(o=>{if(o.item===this)return o.preventDefault(),void be.getLogger(this).error("#add()","Cannot add layer to itself.");r(o.item)})),this.layers.on("after-add",(o=>s(o.item))),this.layers.on("after-remove",(o=>n(o.item)))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Pd(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof cr){const n=i;n.parent===this?this.reorder(n,r):s.add(n,r)}else Ku(i)?i.then((n=>{this.destroyed||this.add(n,r)})):be.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;let n=s.getNextIndex(r);i.slice().forEach((o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)}))}findLayerById(i){return qF(this.layers,"id",i)}findLayerByUid(i){return qF(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return u([A()],e.prototype,"layers",null),e=u([B("esri.support.LayersMixin")],e),e},MDe=new Set(["feature","subtype-group"]);function WF(t,e,i){if(t)for(let r=0,s=t.length;r<s;r++){const n=t.at(r);if(n[e]===i)return n;if((n==null?void 0:n.type)==="group"){const o=WF(n.tables,e,i);if(o)return o}}}const kDe=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new qe,this.addHandles([this.tables.on("after-add",(r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,MDe.has(s.type)||be.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(r=>{r.item.parent=null}))])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Pd(i,this._get("tables")))}findTableById(i){return WF(this.tables,"id",i)}findTableByUid(i){return WF(this.tables,"uid",i)}};return u([A()],e.prototype,"tables",null),e=u([B("esri.support.TablesMixin")],e),e};let Fa=class extends kDe(TDe(dc.EventedMixin(et))){constructor(e){super(e),this.allLayers=new Kc({getCollections:()=>{var i,r,s;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new Nae,this.allTables=IDe(this),this.basemap=null,this.editableLayers=new Kc({getCollections:()=>[this.allLayers],itemFilterFunction:SDe}),this.ground=new nM,this._basemapCache=xDe()}destroy(){$De(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=tr(this.basemap),tr(this.ground),this._set("ground",null)}castBasemap(e){return EDe(e,this._basemapCache)}castGround(e){return CDe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find((i=>i.id===e))}findTableById(e){return this.allTables.find((i=>i.id===e))}};u([A({readOnly:!0,dependsOn:[]})],Fa.prototype,"allLayers",void 0),u([A({type:Nae,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Fa.prototype,"focusAreas",void 0),u([A({readOnly:!0})],Fa.prototype,"allTables",void 0),u([A({type:z_,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Fa.prototype,"basemap",void 0),u([yi("basemap")],Fa.prototype,"castBasemap",null),u([A({readOnly:!0})],Fa.prototype,"editableLayers",void 0),u([A({type:nM,nonNullable:!0})],Fa.prototype,"ground",void 0),u([yi("ground")],Fa.prototype,"castGround",null),u([A()],Fa.prototype,"undoRedo",void 0),Fa=u([B("esri.Map")],Fa);const Fae=Fa;let oM=class extends R_{constructor(e){super(e),this.addHandles(this.on("before-add",(i=>{i.item!=null&&i.item.parent===this.owner&&(be.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())})))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};oM=u([B("esri.support.AnalysesCollection")],oM);let wp=class extends et{constructor(e){super(e),this.view=null,this.baseLayerViews=new qe,this.referenceLayerViews=new qe,this._loadingHandle=He((()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap}),(i=>{i&&i.load().catch((()=>{}))}),wr)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){var e;return((e=this.view)==null?void 0:e.suspended)??!0}get updating(){var i,r,s;if((i=this.view)!=null&&i.suspended)return!1;const e=(s=(r=this.view)==null?void 0:r.map)==null?void 0:s.basemap;return!!(e!=null&&e.loaded)&&(this.baseLayerViews.some((n=>n.updating))||this.referenceLayerViews.some((n=>n.updating)))}};u([A({constructOnly:!0})],wp.prototype,"view",void 0),u([A({readOnly:!0})],wp.prototype,"baseLayerViews",void 0),u([A({readOnly:!0})],wp.prototype,"referenceLayerViews",void 0),u([A({readOnly:!0})],wp.prototype,"suspended",null),u([A({type:Boolean,readOnly:!0})],wp.prototype,"updating",null),wp=u([B("esri.views.BasemapView")],wp);const PDe=wp;let ia=class extends et{constructor(e){super(e),this.factor=1.5,this.offset=Js(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([A({type:Number})],ia.prototype,"factor",void 0),u([A({nonNullable:!0})],ia.prototype,"offset",void 0),u([A()],ia.prototype,"position",void 0),u([A({type:Number,range:{min:0}})],ia.prototype,"size",void 0),u([A()],ia.prototype,"maskUrl",void 0),u([A()],ia.prototype,"maskEnabled",void 0),u([A()],ia.prototype,"overlayUrl",void 0),u([A()],ia.prototype,"overlayEnabled",void 0),u([A({readOnly:!0})],ia.prototype,"version",null),u([A({type:Boolean})],ia.prototype,"visible",void 0),ia=u([B("esri.views.Magnifier")],ia);const zae=ia;let AC=class{constructor(e){this._observable=new m1,this._map=new Map(e)}get size(){return mt(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return mt(this._observable),this._map.entries()}forEach(e,i){mt(this._observable),this._map.forEach(((r,s)=>e.call(i,r,s,this)),i)}get(e){return mt(this._observable),this._map.get(e)}has(e){return mt(this._observable),this._map.has(e)}keys(){return mt(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return mt(this._observable),this._map.values()}[Symbol.iterator](){return mt(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};function ap(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let za=class extends dc.EventedAccessor{constructor(e){super(e),this._selectionMap=new AC,this._sources=new qe,this._trashCan=[],this._layerEditHandles=new qe,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([He((()=>[this.view,this.showHighlight]),(()=>this._refreshVisualization())),He((()=>this.view),(e=>{e==null||e.when().then((()=>this.syncSources()))}),wr),ll((()=>this.sources),"change",(e=>{var s;const i=this._selectionMap,r=[];for(const n of e.removed){const o=i.get(n);o&&(i.delete(n),(s=o.highlightHandle)==null||s.remove(),r.push({layer:n,selection:[],added:[],removed:[...o.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)}),{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(pr)}get selections(){return Array.from(this._selectionMap.entries()).map((e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}}))}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Pd(e,this._sources)}syncSources(){var s;const e=new Set,i=(s=this.view)==null?void 0:s.map;if(!i)return;const r=n=>{var o,a,l,c,h;OIe(n)?((o=n.layers)==null||o.forEach(r),(a=n.tables)==null||a.forEach(r)):RIe(n)?((l=n.sublayers)==null||l.forEach(r),(c=n.subtables)==null||c.forEach(r)):NG(n)?(h=n.sublayers)==null||h.forEach(r):ap(n)&&e.add(n)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:s,selections:n}=this;if(!s&&r==="layerView")return be.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e!=null&&e.length?n.filter((a=>e.includes(a.layer))):n).map((async a=>{const{layer:l,selection:c}=a;if(!c.length)return;const h=Qp(l)?l.parent:l;if(h!=null){if(s&&r==="layerView"&&!hW(h)&&dW(h)){const y=await s.whenLayerView(h).catch((()=>null));if(y)return pW(y,c,i)}return pW(h,c,i)}})).filter(os);return(await Promise.all(o)).filter(os)}updateSelection(e){const i=new Map;for(const[n,o]of this._selectionMap)i.set(n,[...o.selection]);let r=!1;const s=e.current.concat(e.added);for(const n of s){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(ap(o)||Qp(o))&&a!==null){const l=F0(i,o,(()=>[]));l.includes(a)||(l.push(a),r=!0)}}for(const n of e.removed){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(ap(o)||Qp(o))&&a!==null){const l=i.get(o),c=l==null?void 0:l.indexOf(a);c!==void 0&&c>=0&&(l==null||l.splice(c,1),r=!0)}}if(r){const{_selectionMap:n,_trashCan:o}=this,a=[];for(const[l,c]of i){const h=n.get(l);h!==void 0&&o.push(h),n.set(l,{selection:c}),a.push({layer:l,selection:c,...j9(h!==void 0?h.selection:[],c)})}this._onSelectionChange(a)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){const i=this._selectionMap.get(e);return i==null?void 0:i.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),s=r!==void 0?[...r.selection]:[];for(const n of i)s.includes(n)||s.push(n);this._setSelection(e,s)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const s=[];for(const n of r.selection)i.includes(n)||s.push(n);this._setSelection(e,s)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const s=new Set(r.selection),n=new Set(i),o=B0e(s,n);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,s]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){var o;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:s}=this,n=this._vizTaskId;for(const a of e){const l=r.get(a),c=Qp(a)?a.parent:a;if(c!=null&&dW(c)){if(hW(c))continue;i.whenLayerView(c).then((h=>{var y;(y=l==null?void 0:l.highlightHandle)==null||y.remove(),l!=null&&s&&n===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=h.highlight(l.selection,this.highlightName))})).catch((()=>{var h;(h=l==null?void 0:l.highlightHandle)==null||h.remove()}))}}}_refreshListeners(){this._layerEditHandles.drain(pr);const e=new Set(this.sources.map((i=>Qp(i)?i.parent:i)));for(const i of e)ap(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",(r=>this._onLayerEdit(r,i))))}_onLayerEdit(e,i){if(NG(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach((({error:s,objectId:n})=>{n!=null&&s==null&&r.push(n)})),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){var o;const{deletedFeatures:r,edits:s,updatedFeatures:n}=e;if((o=s==null?void 0:s.updateFeatures)==null||o.forEach((a=>{var y;const l=a.getObjectId()??a.attributes[i.objectIdField];if(l==null||(y=n.find((g=>g.objectId===l)))!=null&&y.error)return;const c=i.findSublayerForFeature(a);if(!ap(c))return;const h=i.sublayers.find((g=>{var _;return!(!ap(g)||!((_=this.getSelection(g))!=null&&_.includes(l)))}));ap(h)&&h!==c&&(this.removeFromSelection(h,[l]),this.appendToSelection(c,[l]))})),r.length){const a=[];r.forEach((({error:l,objectId:c})=>{c!=null&&l==null&&a.push(c)})),i.sublayers.forEach((l=>{ap(l)&&this._selectionMap.has(l)&&this.removeFromSelection(l,a)}))}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!RDe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const s={layer:e,selection:[...i],...j9(r!==void 0?r.selection:[],i)};this._onSelectionChange([s])}}};u([A()],za.prototype,"_selectionMap",void 0),u([A()],za.prototype,"_sources",void 0),u([A({readOnly:!0,nonNullable:!0})],za.prototype,"selections",null),u([A({readOnly:!0,nonNullable:!0})],za.prototype,"count",null),u([A()],za.prototype,"view",void 0),u([A({readOnly:!0,nonNullable:!0})],za.prototype,"hasSelection",null),u([A()],za.prototype,"showHighlight",void 0),u([A()],za.prototype,"sources",null),u([A()],za.prototype,"highlightName",void 0),za=u([B("esri.views.SelectionManager")],za);const hW=t=>{var e;return Qp(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},LDe=t=>t.layer!==void 0,dW=t=>(t==null?void 0:t.when)!==void 0,RDe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let s=0;s<i.length;s++)if(i[s]!==r[s])return!1}return!0},pW=async(t,e,i={})=>{let r;if(LDe(t)){const s=t;r=s===void 0?null:await s.queryFeatures(new ut({...i,objectIds:e})).then((n=>({data:n,layer:t.layer})))}else{const s=t;r=s===void 0?null:await s.queryFeatures(new ut({...i,objectIds:e})).then((n=>({data:n,layer:s})))}return r},ODe=za;let N2=class extends dt.ClonableMixin(et){constructor(e){super(e),this.accentColor=new ze([255,127,0]),this.textColor=new ze([255,255,255])}};u([A({type:ze,nonNullable:!0})],N2.prototype,"accentColor",void 0),u([A({type:ze,nonNullable:!0})],N2.prototype,"textColor",void 0),N2=u([B("esri.views.Theme")],N2);const QF=N2;var fW;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(fW||(fW={}));const Bae=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],jae={};function Uae(t){return!!jae[t]}function DDe(t){for(const e of t)if(!Uae(e))return!1;return!0}Bae.forEach((t=>{jae[t]=!0}));let Vae=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach((({handler:i,priority:r},s)=>{var n;return(n=this.inputManager)==null?void 0:n.installHandlers(s,[i],r)}))}disconnect(){this.inputManager&&this._handlers.forEach(((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)})),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,s){const n=Array.isArray(e)?e:e.split(",");if(!DDe(n))return n.some(Uae)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:s=r,s=s??Ed.DEFAULT;const l=this._createUniqueGroupName(),c=new NDe(this.view,n,a,o);this._handlers.set(l,{handler:c,priority:s});for(const h of n){const y=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,y+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],s),Ai((()=>this._removeHandler(l,n)))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const s=this._handlerCounts.get(r);s===void 0||(s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},NDe=class extends Ms{constructor(e,i,r,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const n of i)switch(n){case"click":this.registerIncoming("click",r,(o=>s(BDe(e,o))));break;case"double-click":this.registerIncoming("double-click",r,(o=>s(jDe(e,o))));break;case"immediate-click":this.registerIncoming("immediate-click",r,(o=>s(UDe(e,o))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,(o=>s(VDe(e,o))));break;case"hold":this.registerIncoming("hold",r,(o=>s(GDe(e,o))));break;case"drag":this.registerIncoming("drag",r,(o=>{const a=this._wrapDrag(o);a&&s(a)}));break;case"key-down":this.registerIncoming("key-down",r,(o=>s(HDe(o))));break;case"key-up":this.registerIncoming("key-up",r,(o=>s(qDe(o))));break;case"pointer-down":this.registerIncoming("pointer-down",r,(o=>s(Sw(o,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",r,(o=>s(Sw(o,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",r,(o=>s(Sw(o,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,(o=>s(WDe(o))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,(o=>s(QDe(o))));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,(o=>s(Sw(o,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,(o=>s(Sw(o,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",r,(o=>{s(JDe(o))}));break;case"focus":this.registerIncoming("focus",r,(o=>{s(FDe(o))}));break;case"blur":this.registerIncoming("blur",r,(o=>{s(zDe(o))}))}}_wrapDrag(e){const i=e.data,{x:r,y:s}=i.center,{action:n,pointerType:o,button:a}=i;if(n==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,c=i.buttons,{cancelable:h,timestamp:y}=e,g={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:r,y:s,origin:g,pointerType:o,button:a,buttons:c,radius:i.radius,angle:Ete(i.angle),native:l,timestamp:y,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:_=>e.defer(_),preventDefault:()=>e.preventDefault()}}};function FDe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function zDe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function BDe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,screenPoint:Js(n,o),mapPoint:Vx(t,n,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function jDe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"double-click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:Vx(t,n,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function UDe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:h,timestamp:y}=e;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:y,mapPoint:Vx(t,n,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}function VDe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:h,timestamp:y}=e;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:y,mapPoint:Vx(t,n,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}function GDe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:c,mapPoint:Vx(t,n,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function Vx(t,e,i){return t.toMap(Js(e,i),{exclude:[]})}function HDe(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:s,timestamp:n}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:n,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function qDe(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:s}=t;return{type:"key-up",key:e,native:i,timestamp:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:n=>t.defer(n),preventDefault:()=>t.preventDefault()}}function Sw(t,e){const{x:i,y:r,button:s,buttons:n,native:o,eventId:a}=t.data,l=o.pointerId,c=o.pointerType,{cancelable:h,timestamp:y}=t;return{type:e,x:i,y:r,pointerId:l,pointerType:c,button:s,buttons:n,native:o,timestamp:y,eventId:a,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function WDe(t){const{x:e,y:i,buttons:r,native:s,eventId:n}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:y,timestamp:g}=t;return{type:"pointer-drag",x:e,y:i,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:h,native:s,timestamp:g,eventId:n,cancelable:y,stopPropagation:()=>t.stopPropagation(),defer:_=>t.defer(_),preventDefault:()=>t.preventDefault()}}function QDe(t){const{cancelable:e,data:i,timestamp:r}=t,{x:s,y:n,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function JDe(t){const{action:e,state:i,device:r}=t.data,{cancelable:s,timestamp:n}=t,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:n,action:e,buttons:o,axes:a,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}var LS,AW,mW;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(LS||(LS={})),(function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"})(AW||(AW={})),(function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"})(mW||(mW={}));const ZDe="z",YDe="r",Gae={cancel:"Escape",complete:"Enter"},Ylt={...Gae,redo:YDe,undo:ZDe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},Xlt={toggle:"Control"},Klt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},ect={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:Pae,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let tct=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,(r=>{r.type==="key-down"&&i(r)}))}addToggle(e,i){const r=XDe.fromDefinition(e,i),s=F0(this._bindings,r.key,(()=>[]));return s.push(r),Ai((()=>Q8(s,r)))}register(e,i=Ed.WIDGET){return D0([e.on("key-down",(r=>this.dispatch(e.inputManager,r)),i),e.on("key-up",(r=>this.dispatch(e.inputManager,r)),i)])}dispatch(e,i){const r=i.key,s=this._bindings.get(r);if(s)for(const n of s)n.process(e,i)}},XDe=class JF{constructor(e,i,r,s,n){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=s,this.callback=n}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new JF(e,[],!1,!1,i);const{key:r,modifier:s,repeats:n,continuePropagation:o}=e;return new JF(r,s?Array.isArray(s)?s:[s]:[],!!n,!!o,i)}};function KDe(t){return[t.on("before-add",(e=>{const i=e.item;if(i==null||t.includes(i))return be.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()})),t.on("after-remove",(e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()}))]}function ZF(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(LS.USER)&&t.getEditableFlag(LS.MANAGER)}function e5e(t){return t.type==="key-down"&&t.key===Gae.cancel}function Ic(t){return Js(t.x,t.y)}function Hae(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?Js(e.clientX-i.left,e.clientY-i.top):Js(0,0)}function qae(t,e){return e instanceof Event?Hae(t,e):Ic(e)}function Wae(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let t5e=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":gW(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!vW(e))break;const s=Ic(e),n=vy(s,e.pointerType,i.forEachTool);if(n==null)break;const o=n.manipulator,a=n.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!vW(e))break;const s=this._grabbedManipulators.get(e.pointerId),n=s==null?void 0:s.manipulator,o=s==null?void 0:s.tool;if(n==null||o==null)break;const a=Ic(e);a.x=Bn(a.x,0,i.view.width),a.y=Bn(a.y,0,i.view.height);const l=s.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,c?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,c&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const s=Ic(e),n=vy(s,e.pointerType,i.forEachTool);if(i5e(e)||i.forEachTool((c=>{if((n==null||n.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach((({manipulator:y})=>{y.selected&&(y.selected=!1,h=!0)})),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}})),n==null)break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),KR(o,r);break}case"click":{const s=Ic(e),n=vy(s,e.pointerType,i.forEachTool),o=n==null?void 0:n.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const s=Ic(e),n=vy(s,e.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),KR(o,r);break}case"immediate-double-click":{const s=Ic(e),n=vy(s,e.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&KR(o,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Ic(i)}),this._grabbedManipulators.forEach((({manipulator:s},n)=>{s===e&&this._grabbedManipulators.delete(n)})),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){var s;const r=(s=this._grabbedManipulators.get(e.pointerId))==null?void 0:s.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Ic(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=yW(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=yW(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach((({tool:s})=>{i.add(s)})),this._hoveredManipulators.forEach((({tool:s})=>{r.add(s)})),e((s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const n=this._grabbedManipulators.values(),o=Lme(n,(({tool:a})=>a===s));s.firstGrabbedManipulator=o!=null?o.manipulator:null}))}clearPointers(e,{forEachTool:i,setActiveTool:r},s=!0,n){const o=(a,l)=>a===e&&(n==null||n===l);this._grabbedManipulators.forEach((({tool:a,manipulator:l,pointerType:c},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))})),this._draggedManipulators.forEach((({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))})),s&&this._hoveredManipulators.forEach((({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)})),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach(((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Js(i.x,i.y),r,i.pointerType,e)}))}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!gW(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Ic(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,s){var a;let n=vy(e,r,s);const o=(a=this._hoveredManipulators.get(i))==null?void 0:a.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(i,n)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach((({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)}))}};function yW(t){for(const{manipulator:e}of t.values())if(e!=null&&e.interactive){if(e.grabbing&&e.grabCursor)return e.grabCursor;if(e.cursor)return e.cursor}return null}function vy(t,e,i){let r=null;return i((s=>{if(s.manipulators==null||!ZF(s))return!1;const n=s.manipulators.intersect(t,e);return n!=null&&(r={tool:s,manipulator:n},!0)})),r}function gW(t){return t==="mouse"}function vW(t){return t.pointerType!=="mouse"||t.button===0}function i5e(t){return!!t.native.shiftKey}function KR(t,e){t!=null&&t.consumesClicks&&e()}const bW="attached",eO="tools",r5e=1e3;let Cc=class extends et{constructor(e){super(e),this._updatingHandles=new e0,this._clock=d1,this._manipulatorState=new t5e,this.tools=new qe,this.cursor=null,this._interacting=!1,this._interactingTimeout=r5e,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(Bae,(e=>{this._handleInputEvent(e)}),Ed.TOOL),...KDe(this.tools),this.tools.on("before-add",(({item:e})=>{this._updateToolEditableFlag(e)})),this.tools.on("before-remove",(({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.activeTool=null,this.tools.drain((e=>e.destroy())),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void be.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const s=ZF(r);this.activeTool!=null&&s||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some((e=>e.updating))}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=pr(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout((()=>this._interacting=!1),this._interactingTimeout)}attach(){var e;this.view.type==="3d"?this.addHandles([He((()=>{const{state:i}=this.view;return"camera"in i&&i.camera}),(()=>this._forEachManipulator((i=>i.onViewChange())))),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",(i=>this._forEachManipulator((r=>r.onElevationChange(i)))))],bW):this.addHandles(He((()=>this.view.extent),(()=>this._forEachManipulator((i=>i.onViewChange())))))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(bW),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool((i=>{i.manipulators&&i.manipulators.forEach((({manipulator:r})=>e(r,i)))}))}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool((s=>{!i&&s.visible&&s.handleInputEvent(r)})),!i&&e5e(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(eO),this._forEachTool((e=>{if(e instanceof et){const i=He((()=>[e.cursor,e.visible,e.editable]),(()=>{ZF(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}));this.addHandles(i,eO)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",(i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)})),e.manipulators.on("change",(()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}))],eO)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,LS.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool((i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0))),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter((i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel)).forEach((i=>{this.tools.remove(i)}))}get test(){}};u([A({constructOnly:!0,nonNullable:!0})],Cc.prototype,"view",void 0),u([A({value:null})],Cc.prototype,"activeTool",null),u([A({readOnly:!0,type:qe})],Cc.prototype,"tools",void 0),u([A({readOnly:!0})],Cc.prototype,"cursor",void 0),u([A({readOnly:!0})],Cc.prototype,"updating",null),u([A()],Cc.prototype,"_interacting",void 0),u([A({readOnly:!0})],Cc.prototype,"interacting",null),Cc=u([B("esri.views.ToolViewManager")],Cc);const s5e=new ze("cyan"),n5e=1,o5e=.25,a5e=new ze("black"),l5e=.4,c5e=.2,nct=.25,Qae="default",u5e="temporary",h5e=new ze("yellow");var YF;let ra=YF=class extends et{constructor(t){super(t),this.name=Qae,this.color=s5e.clone(),this.haloColor=null,this.haloOpacity=n5e,this.fillOpacity=o5e,this.shadowColor=a5e.clone(),this.shadowOpacity=l5e,this.shadowDifference=c5e,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){var t,e;return new YF({...this,color:this.color.clone(),haloColor:(t=this.haloColor)==null?void 0:t.clone(),shadowColor:(e=this.shadowColor)==null?void 0:e.clone()})}assignFrom(t){var e;this.color=t.color.clone(),this.haloColor=(e=t.haloColor)==null?void 0:e.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};u([A({type:String,constructOnly:!0,nonNullable:!0})],ra.prototype,"name",void 0),u([A({type:ze,nonNullable:!0})],ra.prototype,"color",void 0),u([A({type:ze})],ra.prototype,"haloColor",void 0),u([A({nonNullable:!0})],ra.prototype,"haloOpacity",void 0),u([A({nonNullable:!0})],ra.prototype,"fillOpacity",void 0),u([A({type:ze,nonNullable:!0})],ra.prototype,"shadowColor",void 0),u([A({nonNullable:!0})],ra.prototype,"shadowOpacity",void 0),u([A({nonNullable:!0})],ra.prototype,"shadowDifference",void 0),u([A({nonNullable:!0})],ra.prototype,"haloWidth",void 0),u([A({nonNullable:!0})],ra.prototype,"haloBlur",void 0),ra=YF=u([B("esri.views.support.HighlightOptions")],ra);const _f=ra;function d5e(){return new(qe.ofType(_f))([new _f({name:Qae}),new _f({name:u5e,color:h5e})])}let hg=class extends et{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":p5e.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return f5e[this.deviceType]}};u([A({nonNullable:!0,readOnly:!0})],hg.prototype,"nativeIndex",void 0),u([A({type:String,readOnly:!0})],hg.prototype,"deviceType",null),u([A({type:Number,readOnly:!0})],hg.prototype,"axisThreshold",null),hg=u([B("esri.views.input.gamepad.GamepadInputDevice")],hg);const mB=hg,p5e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),f5e={standard:.15,spacemouse:.025,unknown:0};let F2=class extends et{constructor(...e){super(...e),this.devices=new qe,this.enabledFocusMode="document"}};u([A({type:qe.ofType(mB),readOnly:!0})],F2.prototype,"devices",void 0),u([A({type:["document","view","none"]})],F2.prototype,"enabledFocusMode",void 0),F2=u([B("esri.views.input.gamepad.GamepadSettings")],F2);const A5e=F2;let mC=class extends et{constructor(){super(...arguments),this.gamepad=new A5e}};u([A({readOnly:!0})],mC.prototype,"gamepad",void 0),mC=u([B("esri.views.input.Input")],mC);const m5e=mC,Jae=()=>li.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,tO=()=>A({type:["pan","rotate","zoom","none"],nonNullable:!0});let HA=class extends et{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};u([tO()],HA.prototype,"dragPrimary",void 0),u([tO()],HA.prototype,"dragSecondary",void 0),u([tO()],HA.prototype,"dragTertiary",void 0),u([A({type:["zoom","none"],nonNullable:!0})],HA.prototype,"mouseWheel",void 0),HA=u([B("esri.views.navigation.NavigationActionMap")],HA);const yB=HA;let _p=class extends et{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([A({type:Boolean,nonNullable:!0})],_p.prototype,"enabled",void 0),u([A({type:mB})],_p.prototype,"device",void 0),u([A({type:["pan","zoom"],nonNullable:!0})],_p.prototype,"mode",void 0),u([A({type:["forward-down","forward-up"],nonNullable:!0})],_p.prototype,"tiltDirection",void 0),u([A({type:Number,nonNullable:!0})],_p.prototype,"velocityFactor",void 0),_p=u([B("esri.views.navigation.gamepad.GamepadSettings")],_p);const Zae=_p;let Sp=class extends et{constructor(e){super(e),this.actionMap=new yB,this.browserTouchPanEnabled=!0,this.gamepad=new Zae,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!Jae()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){RX(be.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};u([A({type:yB,nonNullable:!0})],Sp.prototype,"actionMap",void 0),u([A({type:Boolean})],Sp.prototype,"browserTouchPanEnabled",void 0),u([A({type:Zae,nonNullable:!0})],Sp.prototype,"gamepad",void 0),u([A({type:Boolean})],Sp.prototype,"momentumEnabled",void 0),u([A({type:Boolean})],Sp.prototype,"mouseWheelZoomEnabled",null),Sp=u([B("esri.views.navigation.Navigation")],Sp);const cP=Sp;function dct(t,e,i){const r=Yae(t),s=e,n=y5e(r,s,i);if(r){const o=Yn.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new te("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new te("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!g5e(t)||n===Ro.Unsupported)return new te("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(n){case Ro.Units:{const o=(r==null?void 0:r.heightUnit)||"unknown",a=(s==null?void 0:s.heightUnit)||"unknown",l=new te("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new te("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:l})}case Ro.HeightModel:{const o=(r==null?void 0:r.heightModel)||"unknown",a=(s==null?void 0:s.heightModel)||"unknown",l=new te("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new te("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:l})}case Ro.CRS:{const o=(r==null?void 0:r.vertCRS)||"unknown",a=(s==null?void 0:s.vertCRS)||"unknown",l=new te("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new te("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:l})}}return null}function y5e(t,e,i){if(!wW(t)||!wW(e))return Ro.Unsupported;if(t==null||e==null)return Ro.Ok;if(!i&&t.heightUnit!==e.heightUnit)return Ro.Units;if(t.heightModel!==e.heightModel)return Ro.HeightModel;switch(t.heightModel){case"gravity-related-height":return Ro.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?Ro.Ok:Ro.CRS;default:return Ro.Unsupported}}var Ro;function wW(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function g5e(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!ele(t)}function Yae(t){var r;if(t.type==="integrated-mesh-3dtiles")return null;const e=t.url?Wu(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&Xae(t)&&t.heightModelInfo?t.heightModelInfo:ele(t)?Yn.deriveUnitFromSR(b5e,t.spatialReference):null}function Xae(t){return"heightModelInfo"in t}function Kae(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function ele(t){return Kae(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):tle(t)}function v5e(t){return t.layers!=null||tle(t)||Kae(t)||Xae(t)}function tle(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(Ro||(Ro={}));const b5e=new Yn({heightModel:"gravity-related-height"});var aM;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(aM||(aM={}));let XF,iO=null;async function w5e(t){iO||(iO=Ie(()=>import("./geometryServiceUtils-B9e3SLXt.js"),[],import.meta.url).then((e=>XF=e))),await iO,ir(t)}async function ile(t,e,i,r){if(!t)return null;const s=t.spatialReference;return Yf()||cc(s,e)?Xf(t,e):XF?XF.projectGeometry(t,e,i,r):(await Promise.race([w5e(r),zf(r)]),ile(t,e,i,r))}async function pct(t,e){try{return t!=null&&t.spatialReference?await Rne(t,e):null}catch{return null}}let ji=class extends et{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Pb(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,s,n,o;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(n=e==null?void 0:e.ground)==null?void 0:n.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,(r=>{const s=this._getSupportedSpatialReferences(r);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(e,s);n!=null&&(e=n)}return(e==null?void 0:e.length)===1}))&&(e==null?void 0:e.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var n,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=(n=this.map)==null?void 0:n.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const s=this._collectLayers([{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.baseLayers},{layers:e==null?void 0:e.layers}],(a=>{var l;return!(!("tileInfo"in a)||!((l=a.tileInfo)!=null&&l.spatialReference.equals(i)))&&(r=a,!0)}),(a=>"tileInfo"in a));return r?{tileInfo:r.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,(s=>{var o,a;const n=Yae(s);return!!n&&(e={heightModelInfo:n,vcsWkid:(o=s.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=s.spatialReference)==null?void 0:a.latestVcsWkid},!0)}),(s=>v5e(s)));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,(r=>{const s="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find((a=>a.spatialReference.equals(this.spatialReference)))??n;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of s)e.push({extent:a,layer:r});return!1}));return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),s=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Pb(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:s.clone(),task:Hk((async n=>{try{const o=await ile(r.extent,s,"portalItem"in r.layer?r.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(cl(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const s of e)for(const n of i){if(!s.spatialReference.equals(n.spatialReference))continue;const o=S5e(s.viewingMode,n.viewingMode);if(o!==!1){r.push({spatialReference:s.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some((({spatialReference:r})=>r.equals(i)))&&(e=e.filter((({spatialReference:r})=>r.equals(i)))),e.length>1&&e.some((({viewingMode:r})=>r!==aM.Local))&&(e=e.filter((({viewingMode:r})=>r!==aM.Local))),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const s of i){const n=this.getSpatialReferenceSupport(s,e);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find((({extent:r})=>i.equals(r.spatialReference)))||e[0]}_collectLayers(e,i,r=()=>!0){var n;switch(this._loadMaybe((n=this.map)==null?void 0:n.call(this))){case"loading":return!0;case"failed":return!1}const s=new _5e(r,i);for(const o of e)if(this._collectCollection(o,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch((i=>{Zs(i)})),"loading"):e.loadStatus:"loaded"}};u([A()],ji.prototype,"required",void 0),u([A({constructOnly:!0})],ji.prototype,"map",void 0),u([A({constructOnly:!0})],ji.prototype,"getSpatialReferenceSupport",void 0),u([A()],ji.prototype,"defaultSpatialReference",void 0),u([A()],ji.prototype,"userSpatialReference",void 0),u([A()],ji.prototype,"sourcePreloadCount",void 0),u([A()],ji.prototype,"priorityCollection",void 0),u([A()],ji.prototype,"requiresExtentInSpatialReference",void 0),u([A()],ji.prototype,"suspended",void 0),u([A({readOnly:!0})],ji.prototype,"ready",null),u([A({readOnly:!0})],ji.prototype,"heightModelInfoReady",null),u([A({readOnly:!0})],ji.prototype,"spatialReference",null),u([A({readOnly:!0})],ji.prototype,"extent",null),u([A({readOnly:!0})],ji.prototype,"heightModelInfo",null),u([A({readOnly:!0})],ji.prototype,"vcsWkid",null),u([A({readOnly:!0})],ji.prototype,"latestVcsWkid",null),u([A({readOnly:!0})],ji.prototype,"viewingMode",null),u([A({readOnly:!0})],ji.prototype,"tileInfo",null),u([A({readOnly:!0})],ji.prototype,"mapCollections",null),u([A({readOnly:!0})],ji.prototype,"_spatialReferenceTask",null),u([A({readOnly:!0})],ji.prototype,"_tileInfoTask",null),u([A({readOnly:!0})],ji.prototype,"_heightModelInfoTask",null),u([A({readOnly:!0})],ji.prototype,"_extentCandidatesTask",null),u([A()],ji.prototype,"_extentTask",null),u([A()],ji.prototype,"_projectExtentTask",void 0),ji=u([B("esri.views.support.DefaultsFromMap")],ji);let _5e=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function S5e(t,e){return t!=null?e!=null?t===e&&t:t:e}function x5e(t){return"tryRecycleWith"in t}let $5e=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=_a(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,ac(this._controller.signal,(()=>{var n;(n=this._recycleController)==null||n.abort();const s=new te("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(s)}))}tryRecycle(e){var s;if(!this.done||!this.layerView||!x5e(this.layerView))return null;(s=this._recycleController)==null||s.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let n=0;n<e.length;n++){const o=e[n];if(o.type!==i)continue;const a=this.layerView.tryRecycleWith(o,{signal:r});if(a){e.splice(n,1),this.layer=o;const l=this.layerView,c=l.view;return this.promise=a.then((()=>(ir(r),o.emit("layerview-destroy",{view:c,layerView:l}),c.emit("layerview-destroy",{view:c,layerView:l}),o.emit("layerview-create",{view:c,layerView:l}),c.emit("layerview-create",{view:c,layerView:l}),l))),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){var s,n;const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let o,a;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),E5e(r))o=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new te("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(r);ir(i),o="default"in h?new h.default({layer:r,view:e}):new h({layer:r,view:e})}const l=()=>{a=pr(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=ac(i,l),ir(i);try{await o.when()}catch(h){throw l(),h}if(!((n=(s=this._map)==null?void 0:s.allLayers)==null?void 0:n.includes(r)))return l(),void this._deferred.reject(new te("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:e,layerView:o}),e.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:e,error:o}),e.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new te("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}};function E5e(t){return t.createLayerView!==cr.prototype.createLayerView}function I5e(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let sa=class extends et{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new e0,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r,s;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const n of i)((s=this.layerViewFilter)==null?void 0:s.call(this,n))!==!1&&this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=_a(),this._workPromise.promise.catch((()=>{}))),this.removeHandles("reschedule"),this.addHandles(bx(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var h,y,g;const i=this.view.map;if(this.destroyed||!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,s=[],n=this.view.ready,o=_=>{var S;if(_!=null){for(const E of _)if(E){if(((S=this.layerViewFilter)==null?void 0:S.call(this,E))===!1)continue;r.add(E);const C=this._layerLayerViewInfoMap.get(E);C&&n?C.start():C||this._recyclingInfoMap.has(E)||s.push(E),"layers"in E&&E.layers&&o(E.layers)}}};for(const _ of this._rootCollectionNames)o(il(this,_));const a=new Array,l=_=>{const S=_.tryRecycle(s);S?(this._recyclingInfoMap.set(_.layer,_),this.notifyChange("updating"),S.then((()=>{this._recyclingInfoMap.delete(_.layer),this._layerLayerViewInfoMap.set(_.layer,_),this._reschedule(),this.notifyChange("updating")})).catch((E=>{Zs(E)||(this._recyclingInfoMap.delete(_.layer),_.destroy(),this._reschedule(),this.notifyChange("updating"))}))):a.push(_)};for(const _ of this._layerLayerViewInfoMap.values())r.has(_.layer)||(this._layerLayerViewInfoMap.delete(_.layer),l(_));for(const _ of this._recyclingInfoMap.values())r.has(_.layer)||(this._recyclingInfoMap.delete(_.layer),l(_));for(const _ of s)this._createLayerView(_);this._refreshCollections(),a.forEach((_=>_.destroy()));const c=[(h=i==null?void 0:i.ground)==null?void 0:h.layers,(y=i==null?void 0:i.basemap)==null?void 0:y.baseLayers,(g=i==null?void 0:i.basemap)==null?void 0:g.referenceLayers,i==null?void 0:i.layers].filter((_=>!!_));r.forEach((_=>"layers"in _&&c.push(_.layers))),this.addHandles(c.map((_=>this._watchUpdatingTracking.addOnCollectionChange((()=>_),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([ll((()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers}),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),He((()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]}),(()=>this._reschedule()),eo)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),XR(this._recyclingInfoMap),XR(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Hi()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||tye(this._layerLayerViewInfoMap,(e=>!e.done))||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),XR(this._layerLayerViewInfoMap))}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new te("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,i){var n;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!(r!=null&&r.done))return!0;const s=r.layerView;return!(!s||!i||s.parent===i)||!!(r.done&&s&&"layers"in e&&((n=e.layers)!=null&&n.length))&&e.layers.some((o=>this.isCreatingLayerViewsForLayer(o,s)))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(il(this,e),il(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){var e;for(const i of this._layersToLayerViews.values())(e=il(this,i))==null||e.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i==null?void 0:i.removeAll());let s=0;for(const n of e){const o=this._layerLayerViewInfoMap.get(n);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=n,a.parent=r,i.at(s)!==a&&i.splice(s,0,a),"layers"in n&&I5e(a)&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),s+=1}s<i.length&&i.splice(s)}_createLayerView(e){e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new $5e(e,this.view,this.layerViewImporter);i.promise.then((()=>this._refreshCollections()),(r=>{r&&(Zs(r)||r.name==="cancelled:layerview-create")||be.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([A()],sa.prototype,"_workPromise",void 0),u([A({readOnly:!0})],sa.prototype,"_watchUpdatingTracking",void 0),u([A({readOnly:!0})],sa.prototype,"_layersToLayerViews",null),u([A({readOnly:!0})],sa.prototype,"_rootCollectionNames",null),u([A({constructOnly:!0})],sa.prototype,"layerViewFilter",void 0),u([A()],sa.prototype,"layerViewImporter",void 0),u([A()],sa.prototype,"supportsGround",void 0),u([A({readOnly:!0})],sa.prototype,"updating",null),u([A({readOnly:!0})],sa.prototype,"updatingRemaining",null),u([A({constructOnly:!0})],sa.prototype,"view",void 0),sa=u([B("esri.views.support.LayerViewManager")],sa);const C5e=sa;let dg=class extends et{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};u([A()],dg.prototype,"featureTitleFields",void 0),u([A()],dg.prototype,"utilityNetworkFields",void 0),u([A()],dg.prototype,"globalIdField",void 0),dg=u([B("esri.views.support.RequiredFieldsOptions")],dg);const T5e=dg;var z2,c0;let lt=(c0=class extends dc.EventedMixin(Mu.EsriPromiseMixin(et)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new h1,this.updatingHandles=new e0,this.allLayerViews=new Kc({getCollections:()=>{var i,r,s;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:k5e}),this.analyses=new oM,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Xm,this.groundView=null,this.typeSpecificPreconditionsReady=!0,this.layerViews=new qe,this.magnifier=new zae,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new m5e,this.navigation=new cP,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Vae(this),this.persistableViewModels=new qe,this.requiredFieldsOptions=new T5e,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(He((()=>this.preconditionsReady),(i=>{var s,n;const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,z2.views.add(this)):(this._lockedSpatialReference=null,z2.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)(s=this.toolViewManager)==null||s.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(o){return void queueMicrotask((()=>{this.fatalError=new te("view:startup-error","View._startup failed",o)}))}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}}),Hu))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then((()=>(this._isValid=!0,A0((()=>this.ready)))))),this.basemapView=new PDe({view:this}),this.layerViewManager=new C5e({view:this,layerViewFilter:e=>{var i;return((i=this.layerViewFilter)==null?void 0:i.call(this,e))??!0},layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Cc({view:this}),this.selectionManager=new ODe({view:this}),this.addHandles([hn((()=>this.readyState==="map-content-error"&&!this.spatialReference),(()=>{be.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),He((()=>this.initialExtentRequired),(e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e}),eo),He((()=>this.ready),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)}),Hu),He((()=>this._userSpatialReference),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)}),eo)])}destroy(){var e,i;this.destroyed||(z2.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=tr(this.graphics),this.analyses=tr(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),tr(this.analysisViewManager),this.toolViewManager=tr(this.toolViewManager),this.layerViewManager=tr(this.layerViewManager),this.selectionManager=tr(this.selectionManager),this.basemapView=tr(this.basemapView),(e=this.groundView)==null||e.destroy(),(i=this.layerViews)==null||i.forEach((r=>r.destroy())),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=tr(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return be.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ji({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??d5e()}set highlights(e){this._set("highlights",Pd(e,this._get("highlights"),qe.ofType(_f)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Fn.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(be.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Fn.isLoadable(e)&&e.load().catch((()=>{})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,i,r,s;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const n=!("loaded"in this.map)||this.map.loaded,o=this.map.ground.loaded,a=((i=this.map.basemap)==null?void 0:i.loaded)??!0;return n&&a&&o&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=Hk((l=>iz(ce("view-readyState-waiting-delay"),null,l))),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(s=this._readyStateWaitingTask)!=null&&s.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=Pb(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var i,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(i=this.defaultsFromMap)==null?void 0:i.required)!=null&&r.heightModelInfo)){const s=e.clone();return s.vcsWkid=this.defaultsFromMap.vcsWkid,s.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,s}return e}set spatialReference(e){const i=!Ts(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??ul}set timeZone(e){this._userTimeZone=e,m1e(e)||be.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new QF}whenLayerView(e){var i;return((i=this.layerViewManager)==null?void 0:i.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new te("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&be.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(hn((()=>this.destroyed||this.preconditionsReady===!1),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}},z2=c0,c0.views=new qe,c0);u([A()],lt.prototype,"_userSpatialReference",void 0),u([A()],lt.prototype,"activeTool",null),u([A({readOnly:!0})],lt.prototype,"allLayerViews",void 0),u([A(bF(oM,"analyses"))],lt.prototype,"analyses",void 0),u([A()],lt.prototype,"animation",null),u([A()],lt.prototype,"basemapView",void 0),u([A()],lt.prototype,"center",null),u([A()],lt.prototype,"defaultsFromMapSettings",null),u([A()],lt.prototype,"defaultsFromMap",null),u([A()],lt.prototype,"displayFilterEnabled",void 0),u([A({type:Rt})],lt.prototype,"extent",null),u([A()],lt.prototype,"fatalError",void 0),u([A(bF(Xm,"graphics"))],lt.prototype,"graphics",void 0),u([A()],lt.prototype,"groundView",void 0),u([A({readOnly:!0,type:Yn})],lt.prototype,"heightModelInfo",null),u([A({type:qe.ofType(_f)})],lt.prototype,"highlights",null),u([A({readOnly:!0})],lt.prototype,"interacting",null),u([A({constructOnly:!0})],lt.prototype,"layerViewFilter",void 0),u([A({readOnly:!0})],lt.prototype,"navigating",null),u([A({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],lt.prototype,"preconditionsReady",null),u([A({readOnly:!0})],lt.prototype,"typeSpecificPreconditionsReady",void 0),u([A({type:qe,readOnly:!0})],lt.prototype,"layerViews",void 0),u([A()],lt.prototype,"resolution",null),u([A({type:zae})],lt.prototype,"magnifier",void 0),u([A({value:null,type:Fae})],lt.prototype,"map",null),u([A()],lt.prototype,"padding",void 0),u([A({readOnly:!0})],lt.prototype,"ready",void 0),u([A()],lt.prototype,"_readyStateWaitingTask",void 0),u([A({readOnly:!0})],lt.prototype,"readyState",null),u([A({type:We})],lt.prototype,"spatialReference",null),u([A()],lt.prototype,"stationary",null),u([A({readOnly:!0})],lt.prototype,"supportsGround",void 0),u([A({type:Mi})],lt.prototype,"timeExtent",null),u([A({type:String,nonNullable:!0})],lt.prototype,"timeZone",null),u([A()],lt.prototype,"tools",null),u([A()],lt.prototype,"toolViewManager",void 0),u([A({readOnly:!0})],lt.prototype,"type",void 0),u([A({type:Number})],lt.prototype,"scale",void 0),u([A({readOnly:!0})],lt.prototype,"updating",void 0),u([A({readOnly:!0})],lt.prototype,"initialExtentRequired",void 0),u([A({readOnly:!0})],lt.prototype,"initialExtent",null),u([A()],lt.prototype,"cursor",null),u([A({readOnly:!0})],lt.prototype,"input",void 0),u([A({type:cP,nonNullable:!0})],lt.prototype,"navigation",void 0),u([A()],lt.prototype,"layerViewManager",void 0),u([A()],lt.prototype,"analysisViewManager",void 0),u([A()],lt.prototype,"selectionManager",void 0),u([A()],lt.prototype,"width",void 0),u([A()],lt.prototype,"height",void 0),u([A({readOnly:!0})],lt.prototype,"resizing",void 0),u([A({value:null,readOnly:!0})],lt.prototype,"size",null),u([A({readOnly:!0})],lt.prototype,"suspended",void 0),u([A({readOnly:!0})],lt.prototype,"viewEvents",void 0),u([A({readOnly:!0})],lt.prototype,"persistableViewModels",void 0),u([A()],lt.prototype,"_isValid",void 0),u([A()],lt.prototype,"_readyCycleForced",void 0),u([A()],lt.prototype,"_lockedSpatialReference",void 0),u([A()],lt.prototype,"_userTimeZone",void 0),u([A()],lt.prototype,"_lockedTimeZone",void 0),u([A()],lt.prototype,"_userTimeExtent",void 0),u([A()],lt.prototype,"_lockedTimeExtent",void 0),u([A({type:QF})],lt.prototype,"theme",void 0),u([A({readOnly:!0,type:QF})],lt.prototype,"effectiveTheme",null),lt=z2=u([B("esri.views.View")],lt);const rO=globalThis.$arcgis;rO&&!rO.views&&Object.defineProperty(rO,"views",{configurable:!1,enumerable:!0,writable:!1,value:lt.views});const M5e=lt;function k5e(t){return t.layerViews}function Cv(t,e){return t[0]=e[0],t[1]=e[1],t}function Vr(t,e,i){return t[0]=e,t[1]=i,t}function rle(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function RS(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function sle(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function nle(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function P5e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function L5e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function R5e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function O5e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function D5e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Gx(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function N5e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function uP(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function lM(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function cM(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function ole(t){const e=t[0],i=t[1];return e*e+i*i}function ale(t,e){return t[0]=-e[0],t[1]=-e[1],t}function F5e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function KF(t,e){const i=e[0],r=e[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function lle(t,e){return t[0]*e[0]+t[1]*e[1]}function cle(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function z5e(t,e,i,r){const s=e[0],n=e[1];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t}function B5e(t,e=1){const i=2*Fk()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function j5e(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s,t[1]=i[1]*r+i[3]*s,t}function Ln(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s+i[4],t[1]=i[1]*r+i[3]*s+i[5],t}function U5e(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[3]*s+i[6],t[1]=i[1]*r+i[4]*s+i[7],t}function V5e(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[4]*s+i[12],t[1]=i[1]*r+i[5]*s+i[13],t}function G5e(t,e,i,r){const s=e[0]-i[0],n=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=s*a-n*o+i[0],t[1]=s*o+n*a+i[1],t}function H5e(t,e){const i=t[0],r=t[1],s=e[0],n=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(i*s+r*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function q5e(t){return"vec2("+t[0]+", "+t[1]+")"}function W5e(t,e){return t[0]===e[0]&&t[1]===e[1]}function Q5e(t,e){const i=t[0],r=t[1],s=e[0],n=e[1],o=uo();return Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))}function J5e(t,e,i,r,s){let n=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*n+r[1]*o)*(s-1);return n=r[0]*a,o=r[1]*a,t[0]=e[0]+n,t[1]=e[1]+o,t}const Z5e=cM,gB=RS,Y5e=sle,X5e=nle,K5e=uP,e4e=lM,t4e=ole;Object.freeze(Object.defineProperty({__proto__:null,add:rle,angle:H5e,ceil:P5e,copy:Cv,cross:cle,dist:K5e,distance:uP,div:X5e,divide:nle,dot:lle,equals:Q5e,exactEquals:W5e,floor:L5e,inverse:F5e,len:Z5e,length:cM,lerp:z5e,max:O5e,min:R5e,mul:Y5e,multiply:sle,negate:ale,normalize:KF,projectAndScale:J5e,random:B5e,rotate:G5e,round:D5e,scale:Gx,scaleAndAdd:N5e,set:Vr,sqrDist:e4e,sqrLen:t4e,squaredDistance:lM,squaredLength:ole,str:q5e,sub:gB,subtract:RS,transformMat2:j5e,transformMat2d:Ln,transformMat3:U5e,transformMat4:V5e},Symbol.toStringTag,{value:"Module"}));function Mr(){return[0,0]}function i4e(t){return[t[0],t[1]]}function Hx(t,e){return[t,e]}function r4e(t,e){return[t,e]}function s4e(t,e=Mr()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function ule(){return Mr()}function hle(){return Hx(1,1)}function dle(){return Hx(1,0)}function ple(){return Hx(0,1)}const n4e=ule(),o4e=hle(),a4e=dle(),l4e=ple();Object.freeze(Object.defineProperty({__proto__:null,ONES:o4e,UNIT_X:a4e,UNIT_Y:l4e,ZEROS:n4e,clone:i4e,create:Mr,freeze:r4e,fromArray:s4e,fromValues:Hx,ones:hle,unitX:dle,unitY:ple,zeros:ule},Symbol.toStringTag,{value:"Module"}));function c4e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function qx(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function u4e(t,e,i,r,s,n,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t}function vB(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5];let l=i*n-r*s;return l?(l=1/l,t[0]=n*l,t[1]=-r*l,t[2]=-s*l,t[3]=i*l,t[4]=(s*a-n*o)*l,t[5]=(r*o-i*a)*l,t):null}function h4e(t){return t[0]*t[3]-t[1]*t[2]}function eu(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=i[0],h=i[1],y=i[2],g=i[3],_=i[4],S=i[5];return t[0]=r*c+n*h,t[1]=s*c+o*h,t[2]=r*y+n*g,t[3]=s*y+o*g,t[4]=r*_+n*S+a,t[5]=s*_+o*S+l,t}function jf(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(i),h=Math.cos(i);return t[0]=r*h+n*c,t[1]=s*h+o*c,t[2]=r*-c+n*h,t[3]=s*-c+o*h,t[4]=a,t[5]=l,t}function Wx(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r*c,t[1]=s*c,t[2]=n*h,t[3]=o*h,t[4]=a,t[5]=l,t}function Du(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=r*c+n*h+a,t[5]=s*c+o*h+l,t}function hP(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function fle(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function bB(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function d4e(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function p4e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function f4e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function Ale(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function A4e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function m4e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function y4e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function g4e(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=e[0],c=e[1],h=e[2],y=e[3],g=e[4],_=e[5],S=uo();return Math.abs(i-l)<=S*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=S*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(s-h)<=S*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-y)<=S*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-g)<=S*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-_)<=S*Math.max(1,Math.abs(a),Math.abs(_))}const v4e=eu,b4e=Ale;Object.freeze(Object.defineProperty({__proto__:null,add:f4e,copy:c4e,determinant:h4e,equals:g4e,exactEquals:y4e,frob:p4e,fromRotation:hP,fromScaling:fle,fromTranslation:bB,identity:qx,invert:vB,mul:v4e,multiply:eu,multiplyScalar:A4e,multiplyScalarAndAdd:m4e,rotate:jf,scale:Wx,set:u4e,str:d4e,sub:b4e,subtract:Ale,translate:Du},Symbol.toStringTag,{value:"Module"}));function Nu(){return[1,0,0,1,0,0]}function w4e(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function _4e(t,e,i,r,s,n){return[t,e,i,r,s,n]}const S4e=Nu();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:S4e,clone:w4e,create:Nu,fromValues:_4e},Symbol.toStringTag,{value:"Module"}));const uE={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Tr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:We.WebMercator}),minus180Line:new Tr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:We.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Tr({paths:[[[180,-180],[180,180]]],spatialReference:We.WGS84}),minus180Line:new Tr({paths:[[[-180,-180],[-180,180]]],spatialReference:We.WGS84})}};function Dm(t,e){return Math.ceil((t-e)/(2*e))}function mle(t,e){const i=j_(t);for(const r of i)for(const s of r)s[0]+=e;return t}function j_(t){return Hr(t)?t.rings:t.paths}function dP(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function Qx(t){return typeof t=="string"?Yr(t):ie(t)}function pP(t,e,i){const r={};for(const s in t){if(s==="declaredClass")continue;const n=t[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))r[s]=n.map((o=>pP(o)));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(i==null?void 0:i[s]);r[s]=e?o:JSON.stringify(o)}else r[s]=e?n:JSON.stringify(n);else r[s]=n}return r}function x4e(t,e){var i;return t?e&&Qz(t)?e:Wz(t)??((i=_t==null?void 0:_t.findCredential(t))==null?void 0:i.token):null}async function vct(t,e,i){const r=x4e(t,e);if(r)return r;!_t&&li.request.useIdentity&&await Ie(()=>import("./IdentityManager-skfNaG39.js"),[],import.meta.url);const s=await _t.getCredential(t,i);return s==null?void 0:s.token}async function $4e(t,e,i,r){const s=Qx(t),n=e[0].spatialReference,o={...r,responseType:"json",query:{...s.query,f:"json",sr:MT(n),target:JSON.stringify({geometryType:$1(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await ei(s.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map((h=>{const y=Ju(h);return y.spatialReference=n,y}))}}function E4e(t){return{geometryType:$1(t[0]),geometries:t.map((e=>e.toJSON()))}}function yle(t,e,i){const r=M_e(e);return t.map((s=>{const n=r.fromJSON(s);return n.spatialReference=i,n}))}async function I4e(t,e,i){const r=typeof t=="string"?Yr(t):t,s=e[0].spatialReference,n=$1(e[0]),o={...i,query:{...r.query,f:"json",sr:MT(s),geometries:JSON.stringify(E4e(e))}},{data:a}=await ei(r.path+"/simplify",o);return yle(a.geometries,n,s)}const gle=()=>be.getLogger("esri.geometry.support.normalizeUtils");function C4e(t){return t.type==="polygon"}function T4e(t){return t[0].type==="polygon"}function M4e(t){return t[0].type==="polyline"}function _W(t){const e=[];let i=0,r=0;for(let s=0;s<t.length;s++){const n=t[s];let o=null;for(let a=0;a<n.length;a++)o=n[a],e.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function k4e(t,e){if(!(t instanceof Tr||t instanceof zi)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw gle().error(s),new te("internal:geometry",s)}const i=j_(t),r=[];for(const s of i){const n=[];r.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],c=s[o+1][0],h=s[o+1][1],y=Math.sqrt((c-a)*(c-a)+(h-l)*(h-l)),g=(h-l)/y,_=(c-a)/y,S=y/e;if(S>1){for(let P=1;P<=S-1;P++){const D=P*e,F=_*D+a,U=g*D+l;n.push([F,U])}const E=(y+Math.floor(S-1)*e)/2,C=_*E+a,M=g*E+l;n.push([C,M])}n.push([c,h])}}return C4e(t)?new zi({rings:r,spatialReference:t.spatialReference}):new Tr({paths:r,spatialReference:t.spatialReference})}function SW(t,e,i){if(e){const r=k4e(t,1e6);t=Gg(r,!0)}return i&&(t=mle(t,i)),t}function xW(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const s=Dm(r,e);t[0]=r+s*(-2*e)}else if(r<i){const s=Dm(r,i);t[0]=r+s*(-2*i)}}else{const r=t.x;if(r>e){const s=Dm(r,e);t=t.clone().offset(s*(-2*e),0)}else if(r<i){const s=Dm(r,i);t=t.clone().offset(s*(-2*i),0)}}return t}function P4e(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const s=e.cutIndexes[r],n=e.geometries[r],o=j_(n);for(let a=0;a<o.length;a++){const l=o[a];l.some((c=>{if(c[0]<180)return!0;{let h=0;for(let g=0;g<l.length;g++){const _=l[g][0];h=_>h?_:h}h=Number(h.toFixed(9));const y=-360*Dm(h,180);for(let g=0;g<l.length;g++){const _=n.getPoint(a,g);n.setPoint(a,g,_.clone().offset(y,0))}return!0}}))}if(s===i){if(T4e(t))for(const a of j_(n))t[s]=t[s].addRing(a);else if(M4e(t))for(const a of j_(n))t[s]=t[s].addPath(a)}else i=s,t[s]=n}return t}async function L4e(t,e,i){if(!Array.isArray(t))return L4e([t],e);e&&typeof e!="string"&&gle().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??li.geometryServiceUrl;let s,n,o,a,l,c,h,y,g=0;const _=[],S=[];for(const F of t)if(F!=null)if(s||(s=F.spatialReference,n=co(s),o=s.isWebMercator,c=o?102100:4326,a=uE[c].maxX,l=uE[c].minX,h=uE[c].plus180Line,y=uE[c].minus180Line),n)if(F.type==="mesh")S.push(F);else if(F.type==="point")S.push(xW(F.clone(),a,l));else if(F.type==="multipoint"){const U=F.clone();U.points=U.points.map((G=>xW(G,a,l))),S.push(U)}else if(F.type==="extent"){const U=F.clone()._normalize(!1,!1,n);S.push(U.rings?new zi(U):U)}else if(F.extent){const U=F.extent,G=Dm(U.xmin,l)*(2*a);let Q=G===0?F.clone():mle(F.clone(),G);U.offset(G,0);let{xmin:W,xmax:X}=U;W=Number(W.toFixed(9)),X=Number(X.toFixed(9)),U.intersects(h)&&X!==a?(g=X>g?X:g,Q=SW(Q,o),_.push(Q),S.push("cut")):U.intersects(y)&&W!==l?(g=X*(2*a)>g?X*(2*a):g,Q=SW(Q,o,360),_.push(Q),S.push("cut")):S.push(Q)}else S.push(F.clone());else S.push(F);else S.push(F);let E=Dm(g,a),C=-90;const M=E,P=new Tr;for(;E>0;){const F=360*E-180;P.addPath([[F,C],[F,-1*C]]),C*=-1,E--}if(_.length>0&&M>0){const F=P4e(_,await $4e(r,_,P,i)),U=[],G=[];for(let X=0;X<S.length;X++){const K=S[X];if(K!=="cut")G.push(K);else{const de=F.shift(),ye=t[X];ye!=null&&ye.type==="polygon"&&ye.rings&&ye.rings.length>1&&de.rings.length>=ye.rings.length?(U.push(de),G.push("simplify")):G.push(o?Sd(de):de)}}if(!U.length)return G;const Q=await I4e(r,U,i),W=[];for(let X=0;X<G.length;X++){const K=G[X];K!=="simplify"?W.push(K):W.push(o?Sd(Q.shift()):Q.shift())}return W}const D=[];for(let F=0;F<S.length;F++){const U=S[F];if(U!=="cut")D.push(U);else{const G=_.shift();D.push(o===!0?Sd(G):G)}}return D}function R4e(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&co(t.spatialReference);if(!i)return e;const[r,s]=i.valid,n=2*s,{width:o}=e;let a,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||o===0||o<=s||o>n||l<r||c>s)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=_W(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=_W(t.paths);break;case"multipoint":a=t.points}const h=e.clone();for(let y=0;y<a.length;y++){let g=a[y][0];g<0?(g+=s,c=Math.max(g,c)):(g-=s,l=Math.min(g,l))}return h.xmin=l,h.xmax=c,h.width<o?(h.xmin-=s,h.xmax-=s,h):e}function wB(t,e,i){const r=co(i);if(r==null)return t;const[s,n]=r.valid,o=2*n;let a=0,l=0;e>n?a=Math.ceil(Math.abs(e-n)/o):e<s&&(a=-Math.ceil(Math.abs(e-s)/o)),t>n?l=Math.ceil(Math.abs(t-n)/o):t<s&&(l=-Math.ceil(Math.abs(t-s)/o));let c=t+(a-l)*o;const h=c-e;return h>n?c-=o:h<s&&(c+=o),c}function bct(t,e){const i=co(e);if(i){const[r,s]=i.valid,n=s-r;if(t<r)for(;t<r;)t+=n;if(t>s)for(;t>s;)t-=n}return t}const vle=96,ble=39.37,O4e=180/Math.PI;function wle(t){return t.wkid?t:t.spatialReference||We.WGS84}function _B(t,e){return e.type?Vr(t,e.x,e.y):Cv(t,e)}function _le(t){return xa(t)}function fP(t,e,i=0){let r=t.width,s=t.height;if(i!==0){const a=w1(i),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=t.width*l+t.height*c,s=t.width*c+t.height*l}const n=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/n,s/o)*V4e(t.spatialReference)}async function B2(t,e,i,r){var a,l,c;let s,n;if(!t||Array.isArray(t)&&!t.length)return null;if(qe.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const h=t.every((_=>"attributes"in _)),y=t.some((_=>!_.geometry));let g=t;if(h&&y&&e&&e.allLayerViews){const _=new Map;for(const M of t){const P=M.layer,D=_.get(P)||[],F=M.attributes[P.objectIdField];F!=null&&D.push(F),_.set(P,D)}const S=[];_.forEach(((M,P)=>{var F;const D=(F=e.allLayerViews)==null?void 0:F.find((U=>U.layer.id===P.id));if(D&&"queryFeatures"in D){const U=P.createQuery();U.objectIds=M,U.returnGeometry=!0,S.push(D.queryFeatures(U))}}));const E=await Promise.all(S),C=[];for(const M of E)if(M&&M.features&&M.features.length)for(const P of M.features)P.geometry!=null&&C.push(P.geometry);g=C}for(const _ of g)r=await B2(_,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new ct(t);else if(t instanceof qs)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const h=t.layer,y=(a=e.allLayerViews)==null?void 0:a.find((g=>g.layer.id===h.id));if(y&&"queryFeatures"in y){const g=h.createQuery();g.objectIds=[t.attributes[h.objectIdField]],g.returnGeometry=!0;const _=await y.queryFeatures(g);s=(c=(l=_==null?void 0:_.features)==null?void 0:l[0])==null?void 0:c.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new Rt({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=R4e(s);break;default:n=s.extent}if(!n)return null;Yf()||cc(n.spatialReference,i)||await zf();const o=Xf(n,i);if(!o)return null;if(r){const h=o.center,y=h.clone();y.x=wB(h.x,r.center.x,i),y.x!==h.x&&o.centerAt(y),r=r.union(o)}else r=o;return r}function D4e(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every((i=>"layer"in i))){let i=0,r=0;for(const s of t){const n=s.layer;n!=null&&n.minScale&&n.maxScale&&(i=n.minScale<i?n.minScale:i,r=n.maxScale>r?n.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function $W(t,e){const i=wle(t);return Ts(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:Xf(t,e)}async function N4e(t,e){var C;if(!t||!e)return new Cs({targetGeometry:new ct,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:s,viewpoint:n,size:o}=e,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;t instanceof Cs?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l!=null&&l.targetGeometry?c=l.targetGeometry:t instanceof Rt?c=t:t instanceof qs?c=await B2(t,e,i):t&&(c=await B2(t.center,e,i)||await B2(t.target,e,i)||await B2(t,e,i)),!c&&(n!=null&&n.targetGeometry)?c=n.targetGeometry:!c&&e.extent&&(c=e.extent),i||(i=wle(e.spatialReference||e.extent||c)),Yf()||Ts(c.spatialReference,i)||cc(c.spatialReference,i)||await zf();const h=$W(c,i),y="center"in h?h.center:h;e.pickClosestTarget!==!1&&y.type==="point"&&((C=n.targetGeometry)==null?void 0:C.type)==="point"&&(y.x=wB(y.x,n.targetGeometry.x,y.spatialReference));let g=0;l?g=l.rotation:t.hasOwnProperty("rotation")?g=t.rotation:n&&(g=n.rotation);let _=0;_=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?n.scale:fP($W(c.extent,i),a,g);const S=D4e(t.target??t);S&&(S.min&&S.min<_?_=S.min:S.max&&S.max>_&&(_=S.max));let E=new Cs({targetGeometry:y,scale:_,rotation:g});return r&&(E=r.fit(E),r.constrainByGeometry(E),r.rotationEnabled||(E.rotation=n.rotation)),E}function zn(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function F4e(t,e,i){return i?Vr(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Gx(t,e,.5)}const z4e=(function(){const t=Mr();return function(e,i,r){const s=i.targetGeometry;_B(t,s);const n=.5*O1(i);return e.xmin=t[0]-n*r[0],e.ymin=t[1]-n*r[1],e.xmax=t[0]+n*r[0],e.ymax=t[1]+n*r[1],e.spatialReference=s.spatialReference,e}})();function B4e(t,e,i,r,s){var n;return e6(t,e,i.center),t.scale=fP(i,r),(n=s==null?void 0:s.constraints)==null||n.constrain(t),t}function j4e(t,e,i,r){return $B(t,e,i,r),vB(t,t)}const Sle=(function(){const t=Mr();return function(e,i,r){return gB(e,G4e(e,i),F4e(t,i,r))}})(),U4e=(function(){const t=Nu(),e=Mr();return function(i,r,s,n){const o=O1(r),a=SB(r);return Vr(e,o,o),fle(t,e),jf(t,t,a),Du(t,t,Sle(e,s,n)),Du(t,t,[0,n.top-n.bottom]),Vr(i,t[4],t[5])}})();function O1(t){var e;return t.scale*xle((e=t.targetGeometry)==null?void 0:e.spatialReference)}function xle(t){return ma(t)?1/(_le(t)*ble*vle):1}function SB(t){return A7(t.rotation)||0}function V4e(t){return ma(t)?_le(t)*ble*vle:1}function G4e(t,e){return Gx(t,e,.5)}const xB=(function(){const t=Mr(),e=Mr(),i=Mr();return function(r,s,n,o,a,l){return ale(t,s),Gx(e,n,.5*l),Vr(i,1/o*l,-1/o*l),bB(r,e),a&&jf(r,r,a),Wx(r,r,i),Du(r,r,t),r}})(),$B=(function(){const t=Mr();return function(e,i,r,s){const n=O1(i),o=SB(i);return _B(t,i.targetGeometry),xB(e,t,r,n,o,s)}})(),H4e=(function(){const t=Mr();return function(e,i,r,s){const n=O1(i);return _B(t,i.targetGeometry),xB(e,t,r,n,0,s)}})();function $le(t){const e=co(t);return e?e.valid[1]-e.valid[0]:0}function q4e(t,e){return Math.round($le(t)/e)}const W4e=(function(){const t=Mr(),e=Mr(),i=[0,0,0];return function(r,s,n){RS(t,r,s),KF(t,t),RS(e,r,n),KF(e,e),cle(i,t,e);let o=Math.acos(lle(t,e)/(cM(t)*cM(e)))*O4e;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),Q4e=(function(){const t=Mr();return function(e,i,r,s){const n=e.targetGeometry;return zn(e,i),U4e(t,i,r,s),n.x+=t[0],n.y+=t[1],e}})(),e6=function(t,e,i){zn(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},J4e=(function(){const t=Mr();return function(e,i,r,s,n){n||(n="center"),gB(t,r,s),Gx(t,t,.5);const o=t[0],a=t[1];switch(n){case"center":Vr(t,0,0);break;case"left":Vr(t,-o,0);break;case"top":Vr(t,0,a);break;case"right":Vr(t,o,0);break;case"bottom":Vr(t,0,-a);break;case"top-left":Vr(t,-o,a);break;case"bottom-left":Vr(t,-o,-a);break;case"top-right":Vr(t,o,a);break;case"bottom-right":Vr(t,o,-a)}return AP(e,i,t),e}})();function wct(t,e,i){return zn(t,e),t.rotation+=i,t}function Z4e(t,e,i){return zn(t,e),t.rotation=i,t}const Y4e=(function(){const t=Mr();return function(e,i,r,s,n){return zn(e,i),isNaN(r)||r===0||(Ile(t,s,i,n),e.scale=i.scale*r,Cle(t,t,e,n),AP(e,e,Vr(t,t[0]-s[0],s[1]-t[1]))),e}})();function EW(t,e,i){return zn(t,e),t.scale=i,t}const Ele=(function(){const t=Mr();return function(e,i,r,s,n,o){return zn(e,i),isNaN(r)||r===0||(Ile(t,n,i,o),e.scale=i.scale*r,e.rotation+=s,Cle(t,t,e,o),AP(e,e,Vr(t,t[0]-n[0],n[1]-t[1]))),e}})(),_ct=(function(){const t=Mr(),e=Mr();return function(i,r,s,n,o,a,l){return Sle(e,a,l),rle(t,o,e),n?Ele(i,r,s,n,t,a):Y4e(i,r,s,t,a)}})(),Ile=(function(){const t=Nu();return function(e,i,r,s){return Ln(e,i,j4e(t,r,s,1))}})(),Cle=(function(){const t=Nu();return function(e,i,r,s){return Ln(e,i,$B(t,r,s,1))}})(),AP=(function(){const t=Mr(),e=Nu();return function(i,r,s){zn(i,r);const n=O1(r),o=i.targetGeometry;return hP(e,SB(r)),Wx(e,e,Hx(n,n)),Ln(t,s,e),o.x+=t[0],o.y+=t[1],i}})();function Id(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function X4e(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function K4e(t,e,i,r,s,n){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function Tle(t,e,i,r){const s=e[r],n=e[r+1];t[r]=i[0]*s+i[2]*n+i[4],t[r+1]=i[1]*s+i[3]*n+i[5]}function Mle(t,e,i,r=0,s=0,n=2){const o=s||e.length/n;for(let a=r;a<o;a++)Tle(t,e,i,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:X4e,create:Id,fromValues:K4e,transform:Tle,transformMany:Mle},Symbol.toStringTag,{value:"Module"}));function eNe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function tNe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function kle(t,e,i,r,s,n,o,a,l,c){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function Ple(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function iNe(t,e){if(t===e){const i=e[1],r=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function rNe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],y=h*o-a*c,g=-h*n+a*l,_=c*n-o*l;let S=i*y+r*g+s*_;return S?(S=1/S,t[0]=y*S,t[1]=(-h*r+s*c)*S,t[2]=(a*r-s*o)*S,t[3]=g*S,t[4]=(h*i-s*l)*S,t[5]=(-a*i+s*n)*S,t[6]=_*S,t[7]=(-c*i+r*l)*S,t[8]=(o*i-r*n)*S,t):null}function sNe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t[0]=o*h-a*c,t[1]=s*c-r*h,t[2]=r*a-s*o,t[3]=a*l-n*h,t[4]=i*h-s*l,t[5]=s*n-i*a,t[6]=n*c-o*l,t[7]=r*l-i*c,t[8]=i*o-r*n,t}function nNe(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*n-o*l)+i*(-c*s+o*a)+r*(l*s-n*a)}function EB(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],y=e[8],g=i[0],_=i[1],S=i[2],E=i[3],C=i[4],M=i[5],P=i[6],D=i[7],F=i[8];return t[0]=g*r+_*o+S*c,t[1]=g*s+_*a+S*h,t[2]=g*n+_*l+S*y,t[3]=E*r+C*o+M*c,t[4]=E*s+C*a+M*h,t[5]=E*n+C*l+M*y,t[6]=P*r+D*o+F*c,t[7]=P*s+D*a+F*h,t[8]=P*n+D*l+F*y,t}function t6(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],y=e[8],g=i[0],_=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=a,t[5]=l,t[6]=g*r+_*o+c,t[7]=g*s+_*a+h,t[8]=g*n+_*l+y,t}function Lle(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],y=e[8],g=Math.sin(i),_=Math.cos(i);return t[0]=_*r+g*o,t[1]=_*s+g*a,t[2]=_*n+g*l,t[3]=_*o-g*r,t[4]=_*a-g*s,t[5]=_*l-g*n,t[6]=c,t[7]=h,t[8]=y,t}function oNe(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=n*e[6],t[7]=n*e[7],t[8]=n*e[8],t}function aNe(t,e,i){const r=i[0],s=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function lNe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function cNe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function uNe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function hNe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function dNe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,l=s+s,c=i*o,h=r*o,y=r*a,g=s*o,_=s*a,S=s*l,E=n*o,C=n*a,M=n*l;return t[0]=1-y-S,t[3]=h-M,t[6]=g+C,t[1]=h+M,t[4]=1-c-S,t[7]=_-E,t[2]=g-C,t[5]=_+E,t[8]=1-c-y,t}function pNe(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10],y=h*o-a*c,g=-h*n+a*l,_=c*n-o*l,S=i*y+r*g+s*_;if(!S)return null;const E=1/S;return t[0]=y*E,t[1]=(-h*r+s*c)*E,t[2]=(a*r-s*o)*E,t[3]=g*E,t[4]=(h*i-s*l)*E,t[5]=(-a*i+s*n)*E,t[6]=_*E,t[7]=(-c*i+r*l)*E,t[8]=(o*i-r*n)*E,t}function fNe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],y=e[9],g=e[10],_=e[11],S=e[12],E=e[13],C=e[14],M=e[15],P=i*a-r*o,D=i*l-s*o,F=i*c-n*o,U=r*l-s*a,G=r*c-n*a,Q=s*c-n*l,W=h*E-y*S,X=h*C-g*S,K=h*M-_*S,de=y*C-g*E,ye=y*M-_*E,xe=g*M-_*C;let ee=P*xe-D*ye+F*de+U*K-G*X+Q*W;return ee?(ee=1/ee,t[0]=(a*xe-l*ye+c*de)*ee,t[1]=(l*K-o*xe-c*X)*ee,t[2]=(o*ye-a*K+c*W)*ee,t[3]=(s*ye-r*xe-n*de)*ee,t[4]=(i*xe-s*K+n*X)*ee,t[5]=(r*K-i*ye-n*W)*ee,t[6]=(E*Q-C*G+M*U)*ee,t[7]=(C*F-S*Q-M*D)*ee,t[8]=(S*G-E*F+M*P)*ee,t):null}function ANe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function mNe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function yNe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function gNe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Rle(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function vNe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function bNe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function wNe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function _Ne(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],y=e[0],g=e[1],_=e[2],S=e[3],E=e[4],C=e[5],M=e[6],P=e[7],D=e[8],F=uo();return Math.abs(i-y)<=F*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-g)<=F*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(s-_)<=F*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(n-S)<=F*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(o-E)<=F*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(a-C)<=F*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-M)<=F*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-P)<=F*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(h-D)<=F*Math.max(1,Math.abs(h),Math.abs(D))}function SNe(t){const e=uo(),i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return Math.abs(1-(i*i+n*n+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(s*s+a*a+h*h))<=e}const xNe=EB,$Ne=Rle;Object.freeze(Object.defineProperty({__proto__:null,add:gNe,adjoint:sNe,copy:tNe,determinant:nNe,equals:_Ne,exactEquals:wNe,frob:yNe,fromMat2d:hNe,fromMat4:eNe,fromQuat:dNe,fromRotation:cNe,fromScaling:uNe,fromTranslation:lNe,identity:Ple,invert:rNe,isOrthoNormal:SNe,mul:xNe,multiply:EB,multiplyScalar:vNe,multiplyScalarAndAdd:bNe,normalFromMat4:fNe,normalFromMat4Legacy:pNe,projection:ANe,rotate:Lle,scale:oNe,scaleByVec2:aNe,set:kle,str:mNe,sub:$Ne,subtract:Rle,translate:t6,transpose:iNe},Symbol.toStringTag,{value:"Module"}));function yC(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function ENe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function INe(t,e,i,r,s,n,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=i,c[3]=r,c[4]=s,c[5]=n,c[6]=o,c[7]=a,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:ENe,create:yC,fromValues:INe},Symbol.toStringTag,{value:"Module"}));function OS(){return new Float32Array(2)}function CNe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function P0(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function Ole(){return OS()}function Dle(){return P0(1,1)}function Nle(){return P0(1,0)}function Fle(){return P0(0,1)}const TNe=Ole(),MNe=Dle(),kNe=Nle(),PNe=Fle();Object.freeze(Object.defineProperty({__proto__:null,ONES:MNe,UNIT_X:kNe,UNIT_Y:PNe,ZEROS:TNe,clone:CNe,create:OS,fromValues:P0,ones:Dle,unitX:Nle,unitY:Fle,zeros:Ole},Symbol.toStringTag,{value:"Module"}));function LNe(t){return t instanceof Float32Array&&t.length>=2}function RNe(t){return Array.isArray(t)&&t.length>=2}function sO(t){return LNe(t)||RNe(t)}var i6;const ah=[0,0];let kh=i6=class extends pe{constructor(t){super(t),this._viewpoint2D={center:Mr(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Rt,this.id=0,this.inverseTransform=Nu(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Nu(),this.transformNoRotation=Nu(),this.displayMat3=yC(),this.displayViewMat3=yC(),this.viewMat3=yC(),this.viewMat2d=Id(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=zn(i,t.viewpoint),this._set("size",Cv(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new i6({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return sO(e)?Ln(t,e,this.inverseTransform):(ah[0]=e,ah[1]=i,Ln(t,ah,this.inverseTransform))}toScreen(t,e,i){return sO(e)?Ln(t,e,this.transform):(ah[0]=e,ah[1]=i,Ln(t,ah,this.transform))}toScreenNoRotation(t,e,i){return sO(e)?Ln(t,e,this.transformNoRotation):(ah[0]=e,ah[1]=i,Ln(t,ah,this.transformNoRotation))}wrapMapCoordinate(t,e){Cv(t,e);const[i]=e,[r]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:a}=s;if(n.isWrappable){const l=$le(n)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(i<o||i>a)&&(t[0]=wB(i,r,n)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return xB(t,i,s,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Cs({targetGeometry:new ct(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!n||!e||!i)return;this.resolution=O1(o),this.rotation=r,this.scale=i,this.spatialReference=e,Cv(this.center,t);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;kle(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=Ple(this.viewMat3),h=P0(n[0]/2,n[1]/2),y=P0(-n[0]/2,-n[1]/2),g=A7(r);t6(c,c,h),Lle(c,c,g),t6(c,c,y),EB(this.displayViewMat3,this.displayMat3,c);const _=bB(this.viewMat2d,h);return jf(_,_,g),Du(_,_,y),z4e(this.extent,o,n),$B(this.transform,o,n,s),vB(this.inverseTransform,this.transform),H4e(this.transformNoRotation,o,n,s),this.worldScreenWidth=q4e(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};u([A({readOnly:!0})],kh.prototype,"id",void 0),u([A({value:1,json:{write:!0}})],kh.prototype,"pixelRatio",null),u([A({json:{write:!0}})],kh.prototype,"size",null),u([A()],kh.prototype,"spatialReference",void 0),u([A({type:Cs,json:{write:!0}})],kh.prototype,"viewpoint",null),u([A({readOnly:!0})],kh.prototype,"visibleArea",null),kh=i6=u([B("esri.views.2d.ViewState")],kh);const IW=kh;var r6,s6;let rd=r6=class extends et{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new r6({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([A()],rd.prototype,"left",void 0),u([A()],rd.prototype,"top",void 0),u([A()],rd.prototype,"right",void 0),u([A()],rd.prototype,"bottom",void 0),rd=r6=u([B("esri.views.2d.PaddedViewState.Padding")],rd);let pg=s6=class extends IW{constructor(...t){super(...t),this.paddedViewState=new IW,this._updateContent=(()=>{const e=Mr();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;Vr(e,r.left+r.right,r.top+r.bottom),RS(e,i,e),Cv(s.size,e);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(He((()=>[this.size,this.padding]),(()=>this._updateContent()),Hu)),this.padding=new rd,this.size=[0,0]}set padding(t){this._set("padding",t||new rd)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=Q4e(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:s,scale:n}=e,{x:o,y:a,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=s,c.scale=n,c.spatialReference=l,this._update()}}clone(){return new s6({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([A()],pg.prototype,"paddedViewState",void 0),u([A({type:rd})],pg.prototype,"padding",null),u([A()],pg.prototype,"viewpoint",null),pg=s6=u([B("esri.views.2d.PaddedViewState")],pg);const IB=pg;var In;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(In||(In={}));const zle=Symbol("Yield");let ONe=class{constructor(){this._tasks=new Array,this._numPendingTasks=k0(0),this._running=k0(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get running(){return this._running.value}_updateRunning(){this._running.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return zle;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return new Promise(((s,n)=>{this._tasks.push(new CW(s,n,e,i,r)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}unshift(e,i,r){return new Promise(((s,n)=>{this._tasks.unshift(new CW(s,n,e,i,r)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateRunning();try{const s=cl(i.signal);if(s&&!i.abortCallback)i.reject(Hi());else{const n=s?(r=i.abortCallback)==null?void 0:r.call(i,Hi()):i.callback(e);Ku(n)?n.then(i.resolve,i.reject):i.resolve(n)}}catch(s){i.reject(s)}return!0}cancelAll(){const e=Hi();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._updateRunning()}},CW=class{constructor(e,i,r,s=void 0,n=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=n}},j2=class extends et{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([A()],j2.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([A()],j2.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),j2=u([B("esri.views.support.debugFlags")],j2);const DNe=new j2;function NNe(){return new uM.Scheduler}var Jt;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.OVERLAY_RENDERER="overlay renderer",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(Jt||(Jt={}));const Ha=0,TW=new Map([[Jt.RESOURCE_CONTROLLER_IMMEDIATE,Ha],[Jt.RESOURCE_CONTROLLER,4],[Jt.SLIDE,Ha],[Jt.STREAM_DATA_LOADER,Ha],[Jt.ELEVATION_QUERY,Ha],[Jt.TERRAIN_SURFACE,1],[Jt.SURFACE_GEOMETRY_UPDATES,1],[Jt.LOD_RENDERER,2],[Jt.GRAPHICS_CORE,2],[Jt.I3S_CONTROLLER,2],[Jt.POINT_CLOUD_LAYER,2],[Jt.FEATURE_TILE_FETCHER,2],[Jt.CLOUDS_GENERATOR,2],[Jt.OVERLAY,4],[Jt.OVERLAY_RENDERER,4],[Jt.STAGE,4],[Jt.GRAPHICS_DECONFLICTOR,4],[Jt.FILTER_VISIBILITY,4],[Jt.SCALE_VISIBILITY,4],[Jt.FRUSTUM_VISIBILITY,4],[Jt.POINT_OF_INTEREST_FREQUENT,6],[Jt.POINT_OF_INTEREST_INFREQUENT,30],[Jt.LABELER,8],[Jt.FEATURE_QUERY_ENGINE,8],[Jt.FEATURE_TILE_TREE,16],[Jt.FEATURE_TILE_TREE_ACTIVE,Ha],[Jt.ELEVATION_ALIGNMENT,12],[Jt.ELEVATION_ALIGNMENT_SCENE,14],[Jt.TEXT_TEXTURE_ATLAS,12],[Jt.TEXTURE_UNLOAD,12],[Jt.LINE_OF_SIGHT_TOOL,16],[Jt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Ha],[Jt.SNAPPING,Ha],[Jt.SHADOW_ACCUMULATOR,30],[Jt.MAPVIEW_FETCH_QUEUE,Ha],[Jt.MAPVIEW_LAYERVIEW_UPDATE,2],[Jt.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Ha]]);function MW(t){return TW.has(t)?TW.get(t):typeof t=="number"?t:1}const FNe=6.5,kW=1,zNe=30,BNe=1e3/30,jNe=100,PW=.9;var uM,dA;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((n=>n.needsUpdate))}constructor(){this._updating=k0(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new c_("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=In.INTERACTING,this._tasks=new u_,this._runQueue=new u_,this._load=0,this._idleStateCallbacks=new u_,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=He((()=>DNe.SCHEDULER_LOG_SLOW_TASKS),(n=>this._debug=n),wr);for(const n of Object.keys(Jt))this.performanceInfo.tasks.set(Jt[n],new c_(Jt[n]))}destroy(){this._tasks.toArray().forEach((n=>n.remove())),this._tasks.clear(),pr(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())})))}registerTask(n,o){const a=new i(this,n,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new c_(n)),a}registerIdleStateCallbacks(n,o){const a={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(a),this.state===In.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(c){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===In.IDLE&&c()),a.idleBegin=c},set idleEnd(c){a.idleEnd=c}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==In.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((o=>o.idleEnd()))))}get state(){return this._state}frame(n){this._startFrameTaskTimes();const o=this._updateBudget(n);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(n){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=FNe,a=n.frameDuration,l=kW;switch(this.state){case In.IDLE:o=0,a=Math.max(jNe,n.frameDuration),l=zNe;break;case In.INTERACTING:a=Math.max(BNe,n.frameDuration);case In.ANIMATING:}return a=a-n.elapsedFrameTime-o,this.state!==In.IDLE&&a<kW&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case In.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((n=>n.idleBegin()))),this._runIdle();break;case In.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll((o=>{o.name===n&&o.setPriority(n)}))}_getState(n){if(this._runQueue.some((a=>a.name===n)))return dA.SCHEDULED;let o=dA.IDLE;return this._tasks.forAll((a=>{a.name===n&&a.needsUpdate&&(a.schedulePriority<=1?o=dA.READY:o!==dA.READY&&(o=dA.WAITING))})),o}_getRuntime(n){let o=0;return this._tasks.forAll((a=>{a.name===n&&(o+=a.runtime)})),o}_resetRuntimes(){this._tasks.forAll((n=>n.runtime=0))}_getRunning(){const n=new Map;if(this._tasks.forAll((a=>{a.needsUpdate&&n.set(a.name,(n.get(a.name)||0)+1)})),n.size===0)return null;let o="";return n.forEach(((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`})),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce(((o,a)=>a.needsUpdate?++o:o),0);this._load=this._load*PW+n*(1-PW)}_schedule(){for(this._runQueue.filterInPlace((n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1))),this._tasks.forAll((n=>{n.basePriority===Ha&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)}));this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll((a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==Ha&&a.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)})),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const n=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===zle&&(o.blockFrame=this._frameNumber)}catch(l){be.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,l),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,Jt.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-n;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const n of Object.keys(Jt))this._frameTaskTimes.set(Jt[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach(((o,a)=>this.performanceInfo.tasks.get(a).push(o))),this.performanceInfo.total.push(n)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,o,a){this._scheduler=n,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new ONe,this._handles=new h1,this._basePriority=MW(o),this.schedulePriority=this._basePriority,this._task=k0(a??this._queue),this._handles.add(hn((()=>this.task.running),(l=>n.taskRunningChanged(l))))}remove(){this.processQueue(CB),this._scheduler.removeTask(this),this.schedule=LW.schedule,this.reschedule=LW.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){if(this.name===n)return;this.name=n;const o=MW(n);this._basePriority!==Ha&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,a){return this._queue.push(n,o,a)}reschedule(n,o,a){return this._queue.unshift(n,o,a)}processQueue(n){return this._queue.runTask(n)}}class r{constructor(){this._begin=(performance==null?void 0:performance.now())??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n){this._begin=this.now(),this._budget=n,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(uM||(uM={})),(function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"})(dA||(dA={}));const CB=new uM.Budget;CB.enabled=!1;let UNe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(cl(i)){const s=Hi();return r?Promise.resolve(r(s)):Promise.reject(s)}return _D(e(CB))}catch(s){return Promise.reject(s)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const LW=new UNe;let VNe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=NNe(),this._schedulerHandle=hn((()=>this._scheduler.updating),(()=>this.requestFrame())),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||Ku(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var a,l,c;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:r,graphicsView:s,labelManager:n,state:{id:o}}=this.view;r==null||r.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),(l=this.view.graphicsTileStore)==null||l.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=In.ANIMATING:this.view.interacting?this._scheduler.state=In.INTERACTING:this._scheduler.state=In.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==In.IDLE||((c=this._frameTaskHandle)==null||c.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new IB,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=He((()=>e.stationary),(i=>{this.stationary=i,this.requestFrame()})),this._frameTaskHandle=Lb(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var s;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((s=e.layerViews)==null||s.forEach(this._updateLayerView,this))}};function GNe(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let s,n,o,a;const l=[0,0],c=HNe(t);for(let g=0;g<c.length;g++){const _=c[g];for(let S=0;S<_.length-1;S++){Q2e(l,r,_,S);const E=uP(r,l);(s==null||E<s)&&(s=E,n=[...l],o=g,a=S)}}if(s==null||!n||o==null||a==null)throw new te("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,y]=n;return{coordinate:new ct({x:h,y,spatialReference:i}),distance:s}}function HNe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var n6;let xm=n6=class extends j0.NumericIdentifiableMixin(et){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Xf(this.geometry,this.spatialReference)}catch(t){return be.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?Cx(this.normalizedGeometry,i):e7(this.normalizedGeometry,i))return t;const{coordinate:r}=GNe(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new n6({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};u([A({constructOnly:!0})],xm.prototype,"geometry",void 0),u([A({readOnly:!0})],xm.prototype,"normalizedGeometry",null),u([A({constructOnly:!0})],xm.prototype,"spatialReference",void 0),xm=n6=u([B("esri.views.2d.constraints.GeometryConstraint")],xm);var o6;let U2=o6=class extends j0.NumericIdentifiableMixin(et){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new o6({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([A()],U2.prototype,"enabled",void 0),u([A()],U2.prototype,"rotationEnabled",void 0),U2=o6=u([B("esri.views.2d.constraints.RotationConstraint")],U2);const Ble=U2;var a6;let xo=a6=class extends j0.NumericIdentifiableMixin(et){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map((h=>h.clone())),e.sort(((h,y)=>y.scale-h.scale)),e.forEach(((h,y)=>h.level=y));for(const h of e)!l&&i>0&&i>=h.scale&&(o=h.level,l=!0),!c&&r>0&&r>=h.scale&&(a=t?t.level:-1,c=!0),t=h;s===-1&&(s=i===0?0:o),n===-1&&(n=r===0?e.length-1:a),s=Math.max(s,0),s=Math.min(s,e.length-1),n=Math.max(n,0),n=Math.min(n,e.length-1),s>n&&([s,n]=[n,s]),i=e[s].scale,r=e[n].scale,e.splice(0,s),e.splice(n-s+1),e.forEach(((h,y)=>{this._lodByScale[h.scale]=h,this._scales[y]=h.scale})),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=t.targetGeometry,n=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&n){const c=(l-e.scale)/(t.scale-e.scale);s.x=n.x+(s.x-n.x)*c,s.y=n.y+(s.y-n.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(i=e[s],r=e[s+1],r===t)return s+this.effectiveMinZoom+1;if(i>t&&r<t)return s+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new a6({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce(((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e),this._scales[0])),this._lodByScale[t].scale}};u([A({readOnly:!0})],xo.prototype,"effectiveLODs",void 0),u([A({readOnly:!0})],xo.prototype,"effectiveMinZoom",void 0),u([A({readOnly:!0})],xo.prototype,"effectiveMaxZoom",void 0),u([A({readOnly:!0})],xo.prototype,"effectiveMinScale",void 0),u([A({readOnly:!0})],xo.prototype,"effectiveMaxScale",void 0),u([A()],xo.prototype,"lods",void 0),u([A()],xo.prototype,"minZoom",void 0),u([A()],xo.prototype,"maxZoom",void 0),u([A()],xo.prototype,"minScale",void 0),u([A()],xo.prototype,"maxScale",void 0),u([A()],xo.prototype,"snapToZoom",void 0),xo=a6=u([B("esri.views.2d.constraints.ZoomConstraint")],xo);const jle=xo,qNe={base:null,key:"type",typeMap:{extent:Rt,polygon:zi}};let Rr=class extends et{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new qe}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new xm({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new Ble({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const e=this._get("_zoom"),i=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),r=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===s&&e.minScale===n&&e.maxScale===o&&e.snapToZoom===a?e:new jle({lods:i,minZoom:r,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach((r=>r.constrain(e,i))),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach((i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,e)})),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};u([A({readOnly:!0})],Rr.prototype,"effectiveLODs",null),u([A({readOnly:!0})],Rr.prototype,"effectiveMinScale",null),u([A({readOnly:!0})],Rr.prototype,"effectiveMaxScale",null),u([A({readOnly:!0})],Rr.prototype,"effectiveMinZoom",null),u([A({readOnly:!0})],Rr.prototype,"effectiveMaxZoom",null),u([A({types:qNe,value:null})],Rr.prototype,"geometry",null),u([A({type:[ln]})],Rr.prototype,"lods",void 0),u([A()],Rr.prototype,"minScale",void 0),u([A()],Rr.prototype,"maxScale",void 0),u([A()],Rr.prototype,"minZoom",void 0),u([A()],Rr.prototype,"maxZoom",void 0),u([A()],Rr.prototype,"rotationEnabled",void 0),u([A()],Rr.prototype,"snapToZoom",void 0),u([A({type:qe})],Rr.prototype,"customConstraints",void 0),u([A()],Rr.prototype,"view",void 0),u([A({readOnly:!0})],Rr.prototype,"version",null),u([A({type:xm,readOnly:!0})],Rr.prototype,"_geometry",null),u([A({type:Ble})],Rr.prototype,"_rotation",null),u([A({readOnly:!0,type:jle})],Rr.prototype,"_zoom",null),Rr=u([B("esri.views.2d.MapViewConstraints")],Rr);const RW=Rr;let _n=class extends et{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([He((()=>{var i;return(i=this.constraints)==null?void 0:i.version}),(i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))}),Hu)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new ct({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void be.getLogger(this).error(new te("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const r=this.viewpoint;e6(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void be.getLogger(this).error(new te("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void be.getLogger(this).error(new te("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const r=this.viewpoint;B4e(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;Z4e(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;EW(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var n;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new te("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new te("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new te("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void be.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const s=new Cs({targetGeometry:new ct,scale:0,rotation:0});zn(s,i),(n=this.constraints)==null||n.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var s,n;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((s=this.constraints)==null?void 0:s.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;EW(r,r,i),this.viewpoint=r,this._set("zoom",((n=this.constraints)==null?void 0:n.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let y,g,_;const S=l==null?void 0:l.rotation,E=l==null?void 0:l.targetGeometry;(E==null?void 0:E.type)==="extent"?y=E:(E==null?void 0:E.type)==="point"&&(g=E,_=l==null?void 0:l.scale);const C=n??y;return{center:s??g??(C==null?void 0:C.center),rotation:a??S,scale:(o??h??_??(C&&fP(C,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,s){var o;const n=e.targetGeometry;try{this._project(e,r)}catch(a){be.getLogger(this).warn(new Sa("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:r,error:a})),e.targetGeometry=s||new ct({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(e),this._set("state",new IB({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:s,scale:n}=this.state.paddedViewState,o=new ct({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(e){var l;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const c=i.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=c}const r=i.clone(),[s,n]=i.center;let o=null;try{o=this._project(new ct({x:s,y:n,spatialReference:i.spatialReference}),e)}catch(c){Jz()||be.getLogger(this).warn(new Sa("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:c}))}o||(o=new ct({x:0,y:0,spatialReference:e}));const a=e6(new Cs({targetGeometry:new ct,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const h=[i.size[0]/2,i.size[1]/2],y=[h[0]+20,h[1]],g=i.toMap([0,0],y),{x:_,y:S}=this._project(new ct({x:g[0],y:g[1],spatialReference:i.spatialReference}),e);g[0]=_,g[1]=S,r.toScreen(g,g);const E=W4e(h,g,y),C=Math.hypot(g[0]-h[0],g[1]-h[1])/20;!Number.isFinite(C)||Math.abs(C)>4?(a.rotation=0,a.targetGeometry=new ct({x:0,y:0,spatialReference:e})):(a.scale*=C,a.scale>ce("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(E)?E:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){var o;if(!this.ready)return;const r=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();r.size=[e,i],J4e(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=((o=this.constraints)==null?void 0:o.constrain(s,void 0))??s,this.state.viewpoint=s}toMap(e){if(!this.ready)return null;const i=[0,0],[r,s]=this.state.toMap(i,[e.x,e.y]),n=this.state.spatialReference;return new ct({x:r,y:s,spatialReference:n})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),s=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Js(s[0],s[1])}_project(e,i){var n;const r=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(n=r.spatialReference)!=null&&n.imageCoordinateSystem||Ts(i,r.spatialReference))return e;const s=Xf(r,i);if(!s)throw new te("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return WNe(e)?(e.targetGeometry=s,e):s}};function WNe(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}u([A({type:ct})],_n.prototype,"center",null),u([A()],_n.prototype,"constraints",void 0),u([A({type:Rt})],_n.prototype,"extent",null),u([A({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],_n.prototype,"padding",null),u([A()],_n.prototype,"ready",void 0),u([A()],_n.prototype,"resizeAlign",void 0),u([A({readOnly:!0})],_n.prototype,"resolution",null),u([A({type:Number})],_n.prototype,"rotation",null),u([A({type:Number})],_n.prototype,"scale",null),u([A({readOnly:!0})],_n.prototype,"state",void 0),u([A({type:Cs})],_n.prototype,"viewpoint",null),u([A({readOnly:!0})],_n.prototype,"visibleArea",null),u([A()],_n.prototype,"zoom",null),_n=u([B("esri.views.2d.ViewStateManager")],_n);const OW=160;let V2=class extends et{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval((()=>{performance.now()-this._timestamp>=OW&&this.clear()}),OW))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};u([A()],V2.prototype,"_timer",void 0),u([A()],V2.prototype,"stationary",null),V2=u([B("esri.views.2d.support.StationaryManager")],V2);const QNe=t=>{let e=class extends t{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new _n({constraints:new RW({view:this})}),this.stationaryManager=new V2,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new VNe(this),this.viewEvents=new Vae(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([He((()=>this.viewpoint),(()=>this.stationaryManager.flip()),Hu)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var i;return((i=this.stateManager)==null?void 0:i.extent)??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(i){const r=this._get("animation");if(i===r)return;if(r&&r.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const s=()=>{var n;this.destroyed||i===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame())};i.when(s,s)}get constraints(){var i;return(i=this.stateManager)==null?void 0:i.constraints}set constraints(i){i.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=i,r==null||r.destroy()}get padding(){var i;return(i=this.stateManager)==null?void 0:i.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}};return u([A({readOnly:!0})],e.prototype,"animationManager",void 0),u([A({readOnly:!0})],e.prototype,"fullOpacity",void 0),u([A()],e.prototype,"stateManager",void 0),u([A()],e.prototype,"constraintsInfo",null),u([A()],e.prototype,"extent",null),u([A({readOnly:!0})],e.prototype,"state",null),u([A({readOnly:!0})],e.prototype,"mapViewNavigation",void 0),u([A()],e.prototype,"renderingOptions",void 0),u([A({readOnly:!0})],e.prototype,"interacting",null),u([A()],e.prototype,"stationary",null),u([A()],e.prototype,"animation",null),u([A({type:RW})],e.prototype,"constraints",null),u([A()],e.prototype,"padding",null),u([A()],e.prototype,"resizeAlign",null),u([A()],e.prototype,"rotation",null),u([A({readOnly:!0})],e.prototype,"viewEvents",void 0),u([A({type:Cs})],e.prototype,"viewpoint",null),e=u([B("esri.views.Viewport2DBaseMixin")],e),e};let xp=class extends Mu{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=_a(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new te("view:animation-stopped","ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Ku(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};u([A({readOnly:!0})],xp.prototype,"done",null),u([A({readOnly:!0,type:String})],xp.prototype,"state",void 0),u([A()],xp.prototype,"target",void 0),xp=u([B("esri.views.ViewAnimation")],xp),(function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}})(xp||(xp={}));const l6=xp;let gC=class extends et{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void be.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new l6;this.view.animation=r,await A0((()=>this.view.ready),i);const s={...i,animate:(i==null?void 0:i.animate)??!Jae(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:h,allLayerViews:y}=this.view,g=N4e(e,{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:h,allLayerViews:y,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(g),this._gotoTask={},s.animate?this._gotoAnimated(g,s):this._gotoImmediate(g,s)}_gotoImmediate(e,i){const r=this._gotoTask,s=this.view.animation,n=e.then((o=>{if(ir(i),r!==this._gotoTask)throw new te("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()}));return this._cancellableGoTo(r,s,n,i)}_gotoAnimated(e,i){const r=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=e.then((o=>{if(ir(i),r!==this._gotoTask)throw new te("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,i),s.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(r,s,n,i)}_cancellableGoTo(e,i,r,s){const n=()=>e===this._gotoTask;return fK(r,s).finally((()=>{n()&&(i.done||i.stop())}))}};u([A({constructOnly:!0})],gC.prototype,"view",void 0),gC=u([B("esri.views.2d.GoToManager")],gC);function Ule(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function Vle(t,e){return e.some((i=>Ule(t,i)))}function DW(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter((s=>s.value===t)).map((s=>s.key))}let NW=class extends Ms{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,(r=>this._handleDoubleClick(r,i)))}_handleDoubleClick(e,i){Ule(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},JNe=class extends Ms{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,(s=>this._handleDoubleTapDrag(s)))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:s,delta:n}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,c=this._startScale*l,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void a.end();const y=l.snapScale(this._currentScale),g=(n.y>0?Math.max(y,l.snapToPreviousScale(this._startScale)):Math.min(y,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(g).then((()=>{a.end()}));break}}}},mP=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},ZNe=class extends Ms{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,(s=>this._handleDrag(s))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(e){super.onInstall(e),this._dragEventSeparator=new mP({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&Vle(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},YNe=class extends Ms{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new mP({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&Vle(o.data,this.pointerActions)}),this.registerIncoming("drag",r,(n=>this._dragEventSeparator.handle(n)))}};function Gle(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function XNe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function KNe(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function eFe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function Hle(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function qle(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function Wle(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function tFe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function iFe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function rFe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function sFe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function nFe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function oFe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function aFe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function lFe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Qle(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function cFe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function Jle(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}function Zle(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return i*i+r*r+s*s}function Yle(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function uFe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function hFe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function c6(t,e){const i=e[0],r=e[1],s=e[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n),t}function Xle(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dFe(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2];return t[0]=s*l-n*a,t[1]=n*o-r*l,t[2]=r*a-s*o,t}function pFe(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2],c=s*l-n*a,h=n*o-r*l,y=r*a-s*o,g=Math.sqrt(c*c+h*h+y*y);return t[0]=c/g,t[1]=h/g,t[2]=y/g,t}function fFe(t,e,i,r){const s=e[0],n=e[1],o=e[2];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t}function AFe(t,e,i,r,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,c=o*(n-1),h=o*(3-2*n);return t[0]=e[0]*a+i[0]*l+r[0]*c+s[0]*h,t[1]=e[1]*a+i[1]*l+r[1]*c+s[1]*h,t[2]=e[2]*a+i[2]*l+r[2]*c+s[2]*h,t}function mFe(t,e,i,r,s,n){const o=1-n,a=o*o,l=n*n,c=a*o,h=3*n*a,y=3*l*o,g=l*n;return t[0]=e[0]*c+i[0]*h+r[0]*y+s[0]*g,t[1]=e[1]*c+i[1]*h+r[1]*y+s[1]*g,t[2]=e[2]*c+i[2]*h+r[2]*y+s[2]*g,t}function yFe(t,e=1){const i=Fk,r=2*i()*Math.PI,s=2*i()-1,n=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=s*e,t}function gFe(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12],t[1]=i[1]*r+i[5]*s+i[9]*n+i[13],t[2]=i[2]*r+i[6]*s+i[10]*n+i[14],t}function vFe(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=r*i[0]+s*i[3]+n*i[6],t[1]=r*i[1]+s*i[4]+n*i[7],t[2]=r*i[2]+s*i[5]+n*i[8],t}function bFe(t,e,i){const r=i[0],s=i[1],n=i[2],o=i[3],a=e[0],l=e[1],c=e[2],h=s*c-n*l,y=n*a-r*c,g=r*l-s*a,_=s*g-n*y,S=n*h-r*g,E=r*y-s*h,C=2*o;return t[0]=a+h*C+2*_,t[1]=l+y*C+2*S,t[2]=c+g*C+2*E,t}function wFe(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function _Fe(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function SFe(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function xFe(t,e){c6(FW,t),c6(zW,e);const i=Xle(FW,zW);return i>1?0:i<-1?Math.PI:Math.acos(i)}const FW=Wf(),zW=Wf();function $Fe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function EFe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function IFe(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=e[0],o=e[1],a=e[2],l=uo();return Math.abs(i-n)<=l*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-a)<=l*Math.max(1,Math.abs(s),Math.abs(a))}function CFe(t,e,i){const r=i[0]-e[0],s=i[1]-e[1],n=i[2]-e[2];let o=r*r+s*s+n*n;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=s*o,t[2]=n*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const TFe=Hle,MFe=qle,kFe=Wle,PFe=Jle,LFe=Zle,RFe=Gle,OFe=Yle;Object.freeze(Object.defineProperty({__proto__:null,abs:rFe,add:eFe,angle:xFe,bezier:mFe,ceil:tFe,clamp:aFe,copy:XNe,cross:dFe,crossAndNormalize:pFe,direction:CFe,dist:PFe,distance:Jle,div:kFe,divide:Wle,dot:Xle,equals:IFe,exactEquals:EFe,floor:iFe,hermite:AFe,inverse:hFe,len:RFe,length:Gle,lerp:fFe,max:oFe,min:nFe,mul:MFe,multiply:qle,negate:uFe,normalize:c6,random:yFe,rotateX:wFe,rotateY:_Fe,rotateZ:SFe,round:lFe,scale:Qle,scaleAndAdd:cFe,set:KNe,sign:sFe,sqrDist:LFe,sqrLen:OFe,squaredDistance:Zle,squaredLength:Yle,str:$Fe,sub:TFe,subtract:Hle,transformMat3:vFe,transformMat4:gFe,transformQuat:bFe},Symbol.toStringTag,{value:"Module"}));function wl(t){let e=t*t;return t<0&&(e*=-1),e}function DFe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function NFe(t,e,i){const r=i,s=t.state,n=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(r.translation[0]=wl(s.axes[0]),r.translation[1]=wl(s.axes[1]),r.translation[2]=wl(s.buttons[7])-wl(s.buttons[6]),r.heading=wl(s.axes[2]),r.tilt=wl(s.axes[3])):n.deviceType==="spacemouse"&&(r.translation[0]=1.2*wl(s.axes[0]),r.translation[1]=1.2*wl(s.axes[1]),r.translation[2]=2*-wl(s.axes[2]),r.heading=1.2*wl(s.axes[5]),r.tilt=1.2*wl(s.axes[3])),r.tilt*=o,Qle(r.translation,r.translation,a),r}function FFe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let zFe=class extends Ms{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new h1,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",(i=>this._handleGamePadEvent(i))),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([He((()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled}),(i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Lb({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),wr)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){var r;const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,DFe(this._transformation)):(this._currentDevice=e.data.device,NFe(e.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(e){var y;const i=this._transformation;if(FFe(i))return void((y=this._frameTask)==null?void 0:y.pause());const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=jFe*s*e;AP(r,r,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*UFe*e,a=this._view.constraints.rotationEnabled?-i.heading*BFe*e:0,l=this._view.size,c=[l[0]/2,l[1]];Ele(r,r,o,a,c,l);const h=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=h}};const BFe=.06,jFe=.7,UFe=6e-4;function Kle(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Ai((()=>document.removeEventListener("visibilitychange",e)))}let VFe=class extends Ms{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout((()=>{this._isSticky&&this._handlePopKey()}))}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=Kle((s=>s?null:this._stopMovement()))}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout((()=>{this._timeout=void 0,e()}),this._stickyKeyDuration)}},GFe=class extends Ms{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,(s=>this._handleKeyDown(s))),this.registerIncoming("key-up",r,(s=>this._handleKeyUp(s))),this.registerIncoming("blur",r,(()=>this._handleStop())),this._visibilityHandle=Kle((s=>s?null:this._handleStop()))}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(e.data.key);if(this._pressed=s!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var sv;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(sv||(sv={}));let HFe=class extends Ms{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,(s=>this._handleKeyDown(s))),i.zoomIn.forEach((s=>this._keysToZoomAction[s]=sv.IN)),i.zoomOut.forEach((s=>this._keysToZoomAction[s]=sv.OUT))}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:n}=this.view;let o=null;switch(s){case sv.IN:o=n.zoomIn();break;case sv.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then((()=>n.end())),e.stopPropagation()}};const qFe=.6;let WFe=class extends Ms{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,(r=>this._handleMouseWheel(r)))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:n}=e.data,o=1/qFe**(1/60*n),a=i.zoom(o,[r,s]);a&&(this._canZoom=!1,a.catch((()=>{})).then((()=>{this._canZoom=!0,i.end()})))}},QFe=class extends Ms{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",(r=>this._handleDrag(r))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const i=this.view.mapViewNavigation;this._dragEventSeparator=new mP({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function BW(t){const e=t.native;return e?{buttons:e.buttons.map((i=>i.pressed?i.value||1:0)),axes:e.axes.map((i=>YFe(i,t.axisThreshold)))}:{buttons:[],axes:[]}}function JFe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function ZFe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function YFe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let XFe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,BW(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(jW((n=>this._connectGamepad(n))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new mB(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Lb({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;jW((s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=BW(n),l=r||ZFe(a);o&&(o.timestamp===s.timestamp||!o.active&&l||JFe(o.state,a))||this._emitGamepadEvent(s,a,!l)}))}_emitGamepadEvent(e,i,r){const s=this._latestUpdate[e.index],n=s&&s.active;if(!n&&!r)return;const o=!n&&r?"start":n&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}};function KFe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function jW(t){for(const e of navigator.getGamepads())KFe(e)&&t(e)}const UW=ce("edge"),e6e=ce("chrome"),t6e=ce("ff"),i6e=ce("safari"),VW="esri-view-surface",by={touchNone:`${VW}--touch-none`,touchPan:`${VW}--touch-pan`};var u0;let r6e=(u0=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new XFe(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach((e=>this._releasePointerCaptureSafe(e))),this._activePointerCaptures.clear(),this._gamepadSource=tr(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(nO[i],r),delete this._active[i]}e&&e.forEach((i=>{if(!this._active[i]&&nO[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(nO[i],r),this._active[i]=r}})),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?by.touchNone:by.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?by.touchPan:by.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(by.touchNone),this._element.classList.remove(by.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=Hae(this._element,e);return u0.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&ce("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:UW&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}UW?r*=.7:e6e||i6e?r*=.6:t6e&&(r*=1.375);const s=100,n=Math.abs(r);n>s&&(r=r/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},u0.test={disableSubpixelCoordinates:!1},u0);const nO={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let s6e=class extends Ms{constructor(){super(!0),this.registerIncoming("context-menu",(e=>e.data.native.preventDefault()))}};const ece=()=>({maximumClickDelay:300}),n6e=(t={})=>({...ece(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),TB=(t={})=>({...ece(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function hM(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function o6e(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function a6e(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Js()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[D,F]=t,[U,G]=[F.x-D.x,F.y-D.y];return e.radius=Math.sqrt(U*U+G*G)/2,e.center.x=(D.x+F.x)/2,e.center.y=(D.y+F.y)/2,e}let i=0,r=0;for(let D=0;D<t.length;D++)i+=t[D].x,r+=t[D].y;i/=t.length,r/=t.length;const s=t.map((D=>D.x-i)),n=t.map((D=>D.y-r));let o=0,a=0,l=0,c=0,h=0,y=0,g=0;for(let D=0;D<s.length;D++){const F=s[D],U=n[D],G=F*F,Q=U*U;o+=G,a+=Q,l+=F*U,c+=G*F,h+=Q*U,y+=F*Q,g+=U*G}const _=.5*(c+y),S=.5*(h+g),E=o*a-l*l,C=(_*a-S*l)/E,M=(o*S-l*_)/E,P=Js(C+i,M+r);return{radius:Math.sqrt(C*C+M*M+(o+a)/t.length),center:P}}function t0(t){const{native:e}=t,{pointerId:i,button:r,pointerType:s}=e;return s==="mouse"?`${i}:${r}`:`${s}`}let l6e=class extends Ms{constructor(e={},i=d1){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Js(0,0),this._pointerState=new Map,this._parameters=TB(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new mP({start:(r,s)=>this._dragStart(r,s),update:(r,s)=>this._dragUpdate(s),end:(r,s)=>this._dragEnd(s)}),this.registerIncoming("drag",(r=>this._dragEventSeparator.handle(r))),this.registerIncoming("pointer-down",(r=>this._handlePointerDown(r))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((e=>{e.doubleTapTimeout=pr(e.doubleTapTimeout)}))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=pr(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:n}=r;this._dragStartCenter=n;const o=oO("begin",Js(0,0),r);this._doubleTapDrag.emit(o,void 0,s),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=oO("update",Js(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=oO("end",Js(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=t0(i),s=this._pointerState.get(r),{pointerType:n}=i.native;if(s){const o=n==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),hM(s.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,s=t0(i),n=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._clearPointerDown(s)),n);this._pointerState.set(s,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function oO(t,e,i){const{button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}=i;return{action:t,delta:e,button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}}let c6e=class extends Ms{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:u6e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=hE(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const n=vC(s,tce(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=hE(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=hE(this._activePointerMap);this._activePointerMap.forEach((r=>{r.initialAngle=vC(r,i)-e,r.lastAngle=vC(r,i)-e}))}_emitEvent(e,i,r){const s=hE(this._activePointerMap);this._drag.emit(this._createPayload(e,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,s=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function tce(t){const e=[];return t.forEach((i=>{e.push(Js(i.event.x,i.event.y))})),a6e(e)}function hE(t){const e=tce(t);let i=0;return t.forEach((r=>{let s=vC(r,e),n=s-r.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=r.lastAngle+n,r.lastAngle=s;const o=s-r.initialAngle;i+=o})),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function u6e(t){const e=new Map;return t.forEach(((i,r)=>e.set(r,i.event))),e}function vC(t,e){const i=t.event,r=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,r)}var GW;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(GW||(GW={}));let h6e=class extends Ms{constructor(e={},i=d1){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=TB(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=t0(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=t0(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const n=s.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),hM(n,e.data)>o?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,n.modifiers),this._removeState(i))):hM(s,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(e.data)),r)}}_removeState(e){const i=t0(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},d6e=class extends Ms{constructor(e={},i=d1){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=n6e(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",(r=>this._handlePointerDown(r))),this.registerIncoming("pointer-up",(r=>this._handlePointerLoss(r,"pointer-up"))),this.registerIncoming("pointer-capture-lost",(r=>this._handlePointerLoss(r,"pointer-capture-lost"))),this.registerIncoming("pointer-cancel",(r=>this._handlePointerLoss(r,"pointer-cancel"))),this._moveHandle=this.registerIncoming("pointer-move",(r=>this._handlePointerMove(r))),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((e=>{e.holdTimeout=pr(e.holdTimeout)})),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout((()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}}),this._parameters.holdDelay));const n={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,n),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(dE("update",s,i),void 0,s.modifiers):o6e(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),s.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach((s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(dE("start",s,i)):this._pointerDrag.emit(dE("start",s,s.previousEvent),e.timestamp))}))}_handlePointerLoss(e,i){const r=e.data,s=r.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(dE("end",n,i==="pointer-up"?r:n.previousEvent),void 0,n.modifiers):i==="pointer-up"&&n.downButton===r.native.button&&e.timestamp-n.startTimestamp<=this._parameters.maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function dE(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let p6e=class extends Ms{constructor(e={},i=d1){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=TB(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",(r=>this._handleImmediateClick(r))),this.registerIncoming("pointer-down",(r=>this._handlePointerDown(r)))}onUninstall(){this._pointerState.forEach((e=>e.doubleClickTimer=pr(e.doubleClickTimer)))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=pr(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,s=f6e(i);if(!this._pointerState.has(s))return void this._startClick(e);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;hM(o,i)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=t0(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,s=t0(i),n=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(s)),n);this._pointerState.set(s,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function f6e(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const pE={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},HW=Symbol("handles");let qA=class extends et{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([hn((()=>!e()),(()=>this._disconnect())),hn(e,(()=>this._connect()))])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(HW),this._inputManager=tr(this._inputManager)}_connect(){const e=this.view.surface,i=new r6e(e,this.view.input),r=[new h6e,new d6e,new p6e,new c6e(this.view.navigation),new l6e],s=new Na({eventSource:i,recognizers:r}),n=new ZNe(this.view,["primary"]),o=new YNe(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new s6e],Ed.INTERNAL),s.installHandlers("navigation",[new QFe(this.view),new zFe(this.view),new WFe(this.view),new NW(this.view),new NW(this.view,[pE.counter]),n,new VFe(this.view,pE.pan),new HFe(this.view,pE.zoom),new GFe(this.view,pE.rotate),o,new JNe(this.view,"touch")],Ed.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,this.addHandles([He((()=>{var a,l;return(l=(a=this.view)==null?void 0:a.navigation)==null?void 0:l.browserTouchPanEnabled}),(a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)}),wr),He((()=>{const{actionMap:a}=this.view.navigation;return{panActions:DW("pan",a),rotateActions:DW("rotate",a)}}),(({panActions:a,rotateActions:l})=>{n.pointerActions=a,o.pointerActions=l}),eo)],HW)}get test(){}};u([A()],qA.prototype,"view",void 0),u([A()],qA.prototype,"latestPointerType",null),u([A()],qA.prototype,"latestPointerLocation",null),u([A()],qA.prototype,"multiTouchActive",null),qA=u([B("esri.views.2d.input.MapViewInputManager")],qA);const A6e=qA,m6e=t=>{let e=class extends t{constructor(...i){super(...i),this.goToManager=new gC({view:this}),this.inputManager=new A6e({view:this}),this.addHandles([this.on("resize",(r=>this.stateManager.resize(r.width,r.height)))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(i,r,s,n){return this.inputManager&&this.viewEvents.on(i,r,s,n)||super.on(i,r)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,r){return this.goToManager.goTo(i,r)}toMap(i){if(!this.ready)return null;const r=Wae(i)?qae(this,i):i;return this.stateManager.toMap(r)}};return u([A()],e.prototype,"goToManager",void 0),u([A({readOnly:!0})],e.prototype,"interacting",null),u([A()],e.prototype,"stationary",null),u([A({readOnly:!0})],e.prototype,"inputManager",void 0),e=u([B("esri.views.Viewport2DMixin")],e),e};let qW=class{constructor(e){this._view=e,this.viewpoint=new Cs({targetGeometry:new ct,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return xle(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=Nie(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=w1(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:s,rotate:n,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=i2(e.center.x,i.center.x,s),l.y=i2(e.center.y,i.center.y,s),this.viewpoint.scale=i2(e.scale,i.scale+a,o);let c=e.rotation;const h=i.rotation;Math.abs(h-c)>=180&&(c+=360*(c<h?1:-1)),this.viewpoint.rotation=i2(c,h,n)}copyFrom(e){zn(this.viewpoint,e.viewpoint),this._view=e.view}};function xw(t,e,i,r){const s=3*t,n=3*(i-t)-s,o=1-s-n,a=3*e,l=3*(r-e)-a,c=1-a-l;function h(S){return((o*S+n)*S+s)*S}function y(S){return((c*S+l)*S+a)*S}function g(S){return(3*o*S+2*n)*S+s}function _(S,E){let C,M,P,D,F,U;for(P=S,U=0;U<8;U++){if(D=h(P)-S,Math.abs(D)<E)return P;if(F=g(P),Math.abs(F)<1e-6)break;P-=D/F}if(C=0,M=1,P=S,P<C)return C;if(P>M)return M;for(;C<M;){if(D=h(P),Math.abs(D-S)<E)return P;S>D?C=P:M=P,P=.5*(M-C)+C}return P}return function(S,E=1e-6){return y(_(S,E))}}const Qa={};Qa.ease=xw(.25,.1,.25,1),Qa.linear=xw(0,0,1,1),Qa.easeIn=Qa["ease-in"]=xw(.42,0,1,1),Qa.easeOut=Qa["ease-out"]=xw(0,0,.58,1),Qa.easeInOut=Qa["ease-in-out"]=xw(.42,0,.58,1);const y6e=t=>t,DS=t=>t*t,dM=t=>1-DS(1-t),WW=t=>t<.5?DS(2*t)/2:(dM(2*(t-.5))+1)/2,pM=t=>t*t*t,u6=t=>1-pM(1-t),QW=t=>t<.5?pM(2*t)/2:(u6(2*(t-.5))+1)/2,fM=t=>t*t*t*t,h6=t=>1-fM(1-t),JW=t=>t<.5?fM(2*t)/2:(h6(2*(t-.5))+1)/2,AM=t=>t*t*t*t*t,d6=t=>1-AM(1-t),ZW=t=>t<.5?AM(2*t)/2:(d6(2*(t-.5))+1)/2,mM=t=>1-Math.cos(t*Math.PI/2),p6=t=>1-mM(1-t),YW=t=>t<.5?mM(2*t)/2:(p6(2*(t-.5))+1)/2,yM=t=>2**(10*(t-1)),gM=t=>1-yM(1-t),XW=t=>t<.5?yM(2*t)/2:(gM(2*(t-.5))+1)/2,vM=t=>-(Math.sqrt(1-t*t)-1),f6=t=>1-vM(1-t),KW=t=>t<.5?vM(2*t)/2:(f6(2*(t-.5))+1)/2;function dl(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function pl(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const eQ=pl(dl(1),1),tQ=pl(dl(1),0),bM=pl(dl(1),.5),iQ=pl(dl(2),1),rQ=pl(dl(2),0),sQ=pl(dl(2),.5),nQ=pl(dl(3),1),oQ=pl(dl(3),0),aQ=pl(dl(3),.5),lQ=pl(dl(4),1),cQ=pl(dl(4),0),uQ=pl(dl(4),.5),hQ={linear:y6e,"in-quad":DS,"out-quad":dM,"in-out-quad":WW,"in-coast-quad":eQ,"out-coast-quad":tQ,"in-out-coast-quad":bM,"in-cubic":pM,"out-cubic":u6,"in-out-cubic":QW,"in-coast-cubic":iQ,"out-coast-cubic":rQ,"in-out-coast-cubic":sQ,"in-quart":fM,"out-quart":h6,"in-out-quart":JW,"in-coast-quart":nQ,"out-coast-quart":oQ,"in-out-coast-quart":aQ,"in-quint":AM,"out-quint":d6,"in-out-quint":ZW,"in-coast-quint":lQ,"out-coast-quint":cQ,"in-out-coast-quint":uQ,"in-sine":mM,"out-sine":p6,"in-out-sine":YW,"in-expo":yM,"out-expo":gM,"in-out-expo":XW,"in-circ":vM,"out-circ":f6,"in-out-circ":KW,"quad-in":DS,"quad-out":dM,"quad-in-out":WW,"quad-in-coast":eQ,"quad-out-coast":tQ,"quad-in-out-coast":bM,"cubic-in":pM,"cubic-out":u6,"cubic-in-out":QW,"cubic-in-coast":iQ,"cubic-out-coast":rQ,"cubic-in-out-coast":sQ,"quart-in":fM,"quart-out":h6,"quart-in-out":JW,"quart-in-coast":nQ,"quart-out-coast":oQ,"quart-in-out-coast":aQ,"quint-in":AM,"quint-out":d6,"quint-in-out":ZW,"quint-in-coast":lQ,"quint-out-coast":cQ,"quint-in-out-coast":uQ,"sine-in":mM,"sine-out":p6,"sine-in-out":YW,"expo-in":yM,"expo-out":gM,"expo-in-out":XW,"circ-in":vM,"circ-out":f6,"circ-in-out":KW,ease:t=>Qa.ease(t),"ease-in":t=>Qa.easeIn(t),"ease-out":t=>Qa.easeOut(t),"ease-in-out":t=>Qa.easeInOut(t)};let g6e=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const wM={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},ice={maxDuration:4e3};let v6e=class rce{constructor(e){this._createCamera=e,this.compared=new g6e,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:wM.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new rce(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??wM.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>uo()}get hasFov(){return Math.abs(this.compared.fov)>uo()}get hasRotate(){return this.compared.rotate>uo()}},b6e=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},w6e=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce(((e,i)=>e+i.time),0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,s=0;const n=this.definition,o=this.segments.reduce(((a,l)=>a||l.definition.hasZoom),!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,i),n.hasPan&&!isNaN(i.pan)&&isFinite(n.compared.pan)?i.pan=(r+c.compared.pan*i.pan)/n.compared.pan:i.pan=1,n.hasRotate&&!isNaN(i.rotate)&&isFinite(n.compared.rotate)?i.rotate=(s+c.compared.rotate*i.rotate)/n.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:h,targetZoom:y}=c.compared,g=i.zoom*(y-h)+h,_=this.segments[0].definition.compared.sourceZoom,S=this.segments[this.segments.length-1].definition.compared.targetZoom,E=Math.abs(y-_)>Math.abs(h-_)?y:h;i.zoomOffset=E-S,i.zoom=(g-_)/(E-_)}else i.zoom=1;return i}e-=l.time,r+=c.compared.pan,s+=c.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},aO=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,s=i.targetZoom;this._zoomSign=r>s?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const n=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*n}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:s,hasRotate:n}=this.definition;let o=0,a=0;r&&(s&&(o=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(a=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&s&&n){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(r&&s){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(r&&n){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(s&&n){const c=this._panPixelsAtSource/this._rotatePixels,h=1+c;this._panPixelFlow=c/h*l,this._rotatePixelFlow=1/h*l}else s?this._panPixelFlow=l:r?this._zoomPixelFlow=l:n&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/_6e:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const _6e=w1(45);function S6e(t,e,i){const r=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function x6e(t,e,i){const r=1/e,s=Math.log(t.compared.sourceZoom*r),n=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,c=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*n*o*l*c-t.halfWindowSize*s*n*o*l+t.halfWindowSize*s*n*o*c/(a*a)}function $6e(t,e,i){const r=e-t.compared.sourceZoom,s=1/r,n=1/e,o=Math.log(t.compared.sourceZoom*n),a=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*a+2*s*o+2*n-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function E6e(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function I6e(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function C6e(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function T6e(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function M6e(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function k6e(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function P6e(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function L6e(t,e,i){const r=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,n=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*s*n*a+t.halfWindowSize*r*s*n*l/(o*o)+t.halfWindowSize*s*n*a*l/e}function R6e(t,e,i){const r=e-t.compared.targetZoom,s=1/r,n=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*a-2*s*o+2*n+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function O6e(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function D6e(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function N6e(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function F6e(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,s=t.halfWindowPanAtZoom(r),n=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*s);return t.compared.sourceZoom<=t.compared.targetZoom?n*(i-s):n*(i+s)}function z6e(t,e){let i=B6e(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=r.ascensionFactor===0,n=r.descensionFactor===0,o=s?E6e:S6e,a=s?I6e:x6e,l=s?C6e:$6e,c=n?O6e:P6e,h=n?D6e:L6e,y=n?N6e:R6e,g=U=>o(t,U,r)+T6e(t,U,r)+c(t,U,r),_=U=>a(t,U,r)+M6e(t,U,r)+h(t,U,r),S=U=>l(t,U,r)+k6e(t,U,r)+y(t,U,r);let E=g(i);const C=F6e(t);let M;const P=e.maximumIterations||20,D=e.maximumDistance!=null?e.maximumDistance:1/0;for(M=0;M<P;M++){const U=e.desiredSlope??1e-6;let G=_(i);Math.abs(G)>U&&(G+=U);const Q=G/S(i);if(isNaN(Q)||i>=D&&Q<0){if(!isFinite(D))return null;i=D,E=g(i);break}if(i-=Q,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const W=g(i);if(Math.abs(W-E)/E<=.005)break;E=W}return isNaN(E)||E>C*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function B6e(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let j6e=class extends w6e{constructor(e,i){super(),this._preallocSegments=[new aO,new aO,new aO],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i!=null&&i.apex?z6e(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=dM(r.zoom):e===this._descensionSegment&&(r.zoom=DS(r.zoom))}_updateWithApex(e,i){const[r,s,n]=this._preallocSegments,o=(i==null?void 0:i.ascensionFactor)??.5,a=Math.min(1-o,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=e,s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*l,s.definition.compared.rotate=this.definition.compared.rotate*l,s.definition.segmentStart=r.definition.segmentEnd,s.definition.segmentEnd=r.definition.segmentEnd+l,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=e,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=o+l,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const U6e=new b6e;let V6e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=bM,this.definition=new v6e(e),this.path=new j6e}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(E0e(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?bM:gM)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,U6e);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,s=i.minDuration??wM.minDuration/r,n=i.maxDuration??wM.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,s),n)}};const G6e=2e3,H6e=64;let q6e=class{constructor(e){this._view=e,this._animation=new V6e((()=>new qW(this._view))),this._current=new qW(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){zn(this._current.viewpoint,e),zn(this._source.viewpoint,e),zn(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),zn(e,this._current.viewpoint)}},fg=class extends et{constructor(e){super(e),this._animation=null,this._destinationViewState=new IB,this.updateFunction=null,this.easing=hQ.ease,this.viewpoint=new Cs({targetGeometry:new ct,scale:0,rotation:0}),this._updateTask=Lb({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new q6e(e.view)}destroy(){this._updateTask=pr(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const s=this.viewpoint;zn(s,i);const n=e.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(i.scale,n.scale)*H6e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??ice.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?hQ[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,W6e(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new l6({target:e.clone()}),s=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,s;const i=this.animation;if(i&&i.state!==l6.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const n=performance.now()-this._startTime,o=this._transition.duration,a=o>0?n/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((s=this.animation)==null||s.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function W6e(t,e,i,r){if((e==null?void 0:e.duration)!=null)return!0;const{time:s,isLinear:n}=t,o=(e==null?void 0:e.speedFactor)||1;if(s>((e==null?void 0:e.maxDuration)??ice.maxDuration/o))return!1;if(n){const l=Mr(),c=Js(...r.toScreen(l,...i.center)),h=Js(...i.toScreen(l,...r.center)),y=h!=null&&h.x>-1*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-1*i.size[1]&&h.y<(1.5+.5)*i.size[1],g=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(s>G6e/o&&!y&&!g)return!1}return!0}u([A()],fg.prototype,"easing",void 0),u([A()],fg.prototype,"view",void 0),u([A()],fg.prototype,"viewpoint",void 0),fg=u([B("esri.views.2d.AnimationManager")],fg);const Q6e=fg;function Yi(){return Promise.all([Ie(()=>import("./webglDeps-B72dlKRj.js"),__vite__mapDeps([182,183,184,185]),import.meta.url),Ie(()=>import("./mapViewDeps-JO4CtM-D.js"),__vite__mapDeps([186,187,92,188,184,183,154,132,88,189,89,60,190,87,107,191,139,138,95,8,9,10,90,13,192,93,94,137,182,185,193,102,194,195,196,151,148,130,76,86,39,35,41,197,198,91,199,97,200,99,65,84,201,202,203,204,147,205,206]),import.meta.url)])}const $w=()=>Yi().then((()=>Ie(()=>import("./TileLayerView2D-DdxyKjFV.js"),__vite__mapDeps([207,88,191,190,87,60,183,107,139,138,95,8,9,10,137,193,188,184,154,132,189,89,102,194,195,76,92,187,90,13,93,94,151,148,130,200,86,39,35,41,99,65,84,208,209,210,204,211,212,202,203,213,214,215,216]),import.meta.url))),pA=()=>Yi().then((()=>Ie(()=>import("./FeatureLayerView2D-DWV63rcx.js").then(t=>t.F),__vite__mapDeps([217,8,9,10,218,219,174,39,35,44,211,191,203,88,87,60,184,183,204,190,107,139,138,95,187,92,188,154,132,189,89,90,13,102,192,220,101,34,216,213]),import.meta.url))),dQ={"base-dynamic":()=>Yi().then((()=>Ie(()=>import("./BaseDynamicLayerView2D-B0e-fPc8.js"),__vite__mapDeps([221,222,190,87,60,183,107,191,139,138,95,8,9,10,209,188,184,154,132,92,210,211,223,213]),import.meta.url))),"base-tile":$w,"bing-maps":$w,catalog:()=>Yi().then((()=>Ie(()=>import("./CatalogLayerView2D-CjUPEjBx.js"),__vite__mapDeps([224,211,191]),import.meta.url))),"catalog-dynamic-group":()=>Yi().then((()=>Ie(()=>import("./CatalogDynamicGroupLayerView2D-Cy-8C4Tw.js"),__vite__mapDeps([225,211,191]),import.meta.url))),"catalog-footprint":()=>Yi().then((()=>Ie(()=>import("./CatalogFootprintLayerView2D-_S2Nu_HN.js"),__vite__mapDeps([226,217,8,9,10,218,219,174,39,35,44,211,191,203,88,87,60,184,183,204,190,107,139,138,95,187,92,188,154,132,189,89,90,13,102,192,220,101,34,216,213]),import.meta.url))),csv:pA,"geo-rss":()=>Yi().then((()=>Ie(()=>import("./GeoRSSLayerView2D-D8uOqKV6.js"),__vite__mapDeps([227,211,191,201,202,203,88,87,60,184,183,204,190,107,139,138,95,8,9,10,187,92,188,154,132,189,89,90,13,200,86,39,35,41,99,65,84]),import.meta.url))),feature:pA,geojson:pA,parquet:pA,graphics:()=>Yi().then((()=>Ie(()=>import("./GraphicsLayerView2D-BugWlqTu.js"),__vite__mapDeps([228,211,191,201,202,203,88,87,60,184,183,204,190,107,139,138,95,8,9,10,187,92,188,154,132,189,89,90,13,200,86,39,35,41,99,65,84]),import.meta.url))),group:()=>Yi().then((()=>Ie(()=>import("./GroupLayerView2D-CrIVzk0o.js"),__vite__mapDeps([229,211,191]),import.meta.url))),imagery:()=>Yi().then((()=>Ie(()=>import("./ImageryLayerView2D-D5kUDuVe.js"),__vite__mapDeps([230,231,183,60,115,190,87,107,191,139,138,95,8,9,10,211,200,86,88,89,39,35,41,187,92,188,184,154,132,189,90,13,99,65,84,212,202,203,204,222,209,210,223,119,218,216,213]),import.meta.url))),"imagery-tile":()=>Yi().then((()=>Ie(()=>import("./ImageryTileLayerView2D-C1MnQeSV.js"),__vite__mapDeps([232,233,231,183,60,115,190,87,107,191,139,138,95,8,9,10,211,118,234,204,188,184,154,132,92,210,189,89,235,119,218,216,213]),import.meta.url))),kml:()=>Yi().then((()=>Ie(()=>import("./KMLLayerView2D-CAvlstjW.js"),__vite__mapDeps([236,237,209,191,188,184,183,154,132,92,210,222,190,87,60,107,139,138,95,8,9,10,211,201,202,203,88,204,187,189,89,90,13,200,86,39,35,41,99,65,84,199,97,119,196,182,185,151,148,130,194,234]),import.meta.url))),"knowledge-graph":()=>Yi().then((()=>Ie(()=>import("./KnowledgeGraphLayerView2D-Ca3Iv70P.js"),__vite__mapDeps([238,211,191]),import.meta.url))),"link-chart":()=>Yi().then((()=>Ie(()=>import("./KnowledgeGraphLayerView2D-Ca3Iv70P.js"),__vite__mapDeps([238,211,191]),import.meta.url))),"knowledge-graph-sublayer":pA,"map-image":()=>Yi().then((()=>Ie(()=>import("./MapImageLayerView2D-C7WYjgVP.js"),__vite__mapDeps([239,222,190,87,60,183,107,191,139,138,95,8,9,10,209,188,184,154,132,92,210,211,200,86,88,89,39,35,41,187,189,90,13,99,65,84,212,202,203,204,223,218,213,214,215,216]),import.meta.url))),"map-notes":()=>Yi().then((()=>Ie(()=>import("./MapNotesLayerView2D-9f0wvXxW.js"),__vite__mapDeps([240,211,191,201,202,203,88,87,60,184,183,204,190,107,139,138,95,8,9,10,187,92,188,154,132,189,89,90,13,200,86,39,35,41,99,65,84]),import.meta.url))),media:()=>Yi().then((()=>Ie(()=>import("./MediaLayerView2D-ClmpHz4R.js"),__vite__mapDeps([241,242,99,65,88,191,190,87,60,183,107,139,138,95,8,9,10,137,193,188,184,154,132,189,89,102,194,195,76,92,187,90,13,93,94,151,148,130,200,86,39,35,41,84,197,243,198,211]),import.meta.url))),"ogc-feature":()=>Yi().then((()=>Ie(()=>import("./OGCFeatureLayerView2D-BvnPRKUZ.js"),__vite__mapDeps([244,217,8,9,10,218,219,174,39,35,44,211,191,203,88,87,60,184,183,204,190,107,139,138,95,187,92,188,154,132,189,89,90,13,102,192,220,101,34,216,213]),import.meta.url))),"open-street-map":$w,"oriented-imagery":pA,route:()=>Yi().then((()=>Ie(()=>import("./RouteLayerView2D-D5CCcXWE.js"),__vite__mapDeps([245,246,247,211,191,201,202,203,88,87,60,184,183,204,190,107,139,138,95,8,9,10,187,92,188,154,132,189,89,90,13,200,86,39,35,41,99,65,84]),import.meta.url))),stream:()=>Yi().then((()=>Ie(()=>import("./StreamLayerView2D-BmHlgZxt.js"),__vite__mapDeps([248,217,8,9,10,218,219,174,39,35,44,211,191,203,88,87,60,184,183,204,190,107,139,138,95,187,92,188,154,132,189,89,90,13,102,192,220,101,34,216,213]),import.meta.url))),"subtype-group":()=>Yi().then((()=>Ie(()=>import("./SubtypeGroupLayerView2D-C4GNINP1.js"),__vite__mapDeps([249,217,8,9,10,218,219,174,39,35,44,211,191,203,88,87,60,184,183,204,190,107,139,138,95,187,92,188,154,132,189,89,90,13,102,192,220,101,34,216,213]),import.meta.url))),tile:$w,"vector-tile":()=>Yi().then((()=>Ie(()=>import("./VectorTileLayerView2D-BKKUerx9.js"),__vite__mapDeps([250,137,76,195,138,139,183,190,87,60,107,191,95,8,9,10,204,47,140,141,211,213]),import.meta.url))),video:()=>Yi().then((()=>Ie(()=>import("./VideoLayerView2D-z76qfROc.js"),__vite__mapDeps([251,252,243,107,190,87,60,183,191,139,138,95,8,9,10,187,92,188,184,154,132,88,189,89,90,13,198,211,201,202,203,204,200,86,39,35,41,99,65,84]),import.meta.url))),wcs:()=>Yi().then((()=>Ie(()=>import("./ImageryTileLayerView2D-C1MnQeSV.js"),__vite__mapDeps([232,233,231,183,60,115,190,87,107,191,139,138,95,8,9,10,211,118,234,204,188,184,154,132,92,210,189,89,235,119,218,216,213]),import.meta.url))),"web-tile":$w,wfs:pA,wms:()=>Yi().then((()=>Ie(()=>import("./WMSLayerView2D-DcpMRZx3.js"),__vite__mapDeps([253,222,190,87,60,183,107,191,139,138,95,8,9,10,209,188,184,154,132,92,210,211,223,213,254,218]),import.meta.url))),wmts:()=>Yi().then((()=>Ie(()=>import("./WMTSLayerView2D-PtBemMvN.js"),__vite__mapDeps([255,208,209,191,188,184,183,154,132,92,210,190,87,60,107,139,138,95,8,9,10,204,211,213]),import.meta.url))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function J6e(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new te(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const pQ={hasLayerViewModule:t=>dQ[t.type]!=null,importLayerView:t=>{const e=dQ[t.type];if(e==null)throw J6e(t);return e(t)}};var da;let D1=(da=class{static getId(e,i,r,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${s}`}constructor(e,i,r,s){this.set(e,i,r,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,s){this.set(e,i,r,s)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new da(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[n,o,a,l]=e.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new da(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const s=this.clone();return s.col+=e,s.row+=i,r.normalizeKey(s),s}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new da(e,i,r,s),new da(e,i,r+1,s),new da(e,i+1,r,s),new da(e,i+1,r+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},da.pool=new N0(da,null,null,25,50),da);function wy(t,e){return[t,e]}function fA(t,e,i){return t[0]=e,t[1]=i,t}function Z6e(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}const _l=new D1("0/0/0/0");let Y6e=class sce{static create(e,i,r=null){const s=co(e.spatialReference),n=i.origin||wy(e.origin.x,e.origin.y),o=wy(e.size[0]*i.resolution,e.size[1]*i.resolution),a=wy(-1/0,-1/0),l=wy(1/0,1/0),c=wy(1/0,1/0);r!=null&&(fA(a,Math.max(0,Math.floor((r.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymax)/o[1]))),fA(l,Math.max(0,Math.floor((r.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymin)/o[1]))),fA(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:y}=i;let g,_,S,E;return!r&&h&&y&&(fA(a,h[0],y[0]),fA(l,h[1],y[1]),fA(c,h[1]-h[0]+1,y[1]-y[0]+1)),e.isWrappable?(g=wy(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/e.size[0]),c[1]),_=!0,S=s.origin,E=s.valid):(g=c,_=!1),new sce(i.level,i.resolution,i.scale,n,a,l,c,o,g,_,S,E)}constructor(e,i,r,s,n,o,a,l,c,h,y,g){this.level=e,this.resolution=i,this.scale=r,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=h,this._spatialReferenceOrigin=y,this._spatialReferenceValid=g}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&r&&s?i===r[0]?s[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?s[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){_l.set(i);const s=r?_l.col:this.denormalizeCol(_l.col,_l.world),n=_l.row;return Z6e(e,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),e}getTileCoords(e,i,r=!1){_l.set(i);const s=r?_l.col:this.denormalizeCol(_l.col,_l.world);return Array.isArray(e)?fA(e,this.getXForColumn(s),this.getYForRow(_l.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(_l.row)),e}};var h0;let MB=(h0=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:s}of this.spans)for(let n=r;n<=s;n++){const o=e.getWorldForColumn(n);yield new D1(e.level,i,e.normalizeCol(n),o)}}forEach(e,i){const{spans:r,lodInfo:s}=this,{level:n}=s;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(i,n,o,s.normalizeCol(c),s.getWorldForColumn(c))}},h0.pool=new N0(h0),h0),lO=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const or=new D1("0/0/0/0");let X6e=class nce{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,s]=e,[n,o]=i,a=n-r,l=o-s,c=l!==0?a/l:0,h=(Math.ceil(s)-s)*c,y=(Math.floor(s)-s)*c;return new nce(r,Math.floor(s),Math.ceil(o),c,a<0?h:y,a<0?y:h,a<0?n:r,a<0?r:n)}constructor(e,i,r,s,n,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Wo=[[0,0],[0,0],[0,0],[0,0]],K6e=1e-6;let e8e=class{constructor(e,i=null,r=e.lods[0].level,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=e.lods.filter((a=>a.level>=r&&a.level<=s));this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map((a=>Y6e.create(e,a,i)));n.forEach(((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale}),this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){or.set(i);const s=this._infoByLevel[or.level];return s?s.getTileBounds(e,or,r):e}getTileCoords(e,i,r=!1){or.set(i);const s=this._infoByLevel[or.level];return s?s.getTileCoords(e,or,r):e}getTileCoverage(e,i=192,r=!0,s="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=MB.pool.acquire(n),a=this._wrap;let l,c,h,y=1/0,g=-1/0;const _=o.spans;Wo[0][0]=Wo[0][1]=Wo[1][1]=Wo[3][0]=-i,Wo[1][0]=Wo[2][0]=e.size[0]+i,Wo[2][1]=Wo[3][1]=e.size[1]+i;for(const M of Wo)e.toMap(M,M),M[0]=n.getColumnForX(M[0]),M[1]=n.getRowForY(M[1]);const S=[];let E=3;for(let M=0;M<4;M++){if(Wo[M][1]===Wo[E][1]){E=M;continue}const P=X6e.create(Wo[M],Wo[E]);y=Math.min(P.ymin,y),g=Math.max(P.ymax,g),S[P.ymin]===void 0&&(S[P.ymin]=[]),S[P.ymin].push(P),E=M}if(y==null||g==null||g-y>100)return null;let C=[];for(l=y;l<g;){S[l]!=null&&(C=C.concat(S[l])),c=1/0,h=-1/0;for(let M=C.length-1;M>=0;M--){const P=C[M];c=Math.min(c,P.getLeftCol()),h=Math.max(h,P.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),l>=n.first[1]&&l<=n.last[1])if(a)if(n.size[0]<n.worldSize[0]){const M=Math.floor(h/n.worldSize[0]);for(let P=Math.floor(c/n.worldSize[0]);P<=M;P++)_.push(new lO(l,Math.max(n.getFirstColumnForWorld(P),c),Math.min(n.getLastColumnForWorld(P),h)))}else _.push(new lO(l,c,h));else c>n.last[0]||h<n.first[0]||(c=Math.max(c,n.first[0]),h=Math.min(h,n.last[0]),_.push(new lO(l,c,h)));l+=1;for(let M=C.length-1;M>=0;M--){const P=C[M];P.ymax>=l?P.incrRow():C.splice(M,1)}}return o}getTileParentId(e){or.set(e);const i=this._infoByLevel[or.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(or,this._lodInfos[r],or),or.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){or.set(i);const r=this._infoByLevel[or.level],s=e.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(or,s,or);const o=s.denormalizeCol(or.col,or.world);for(const a of e.spans)if(a.row===or.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce(((E,C)=>(E[0]=Math.min(E[0],C.row),E[1]=Math.max(E[1],C.row),E[2]=Math.min(E[2],C.colFrom),E[3]=Math.max(E[3],C.colTo),E)),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(or.col,or.world),y=s.getColumnForX(r.getXForColumn(h)),g=s.getRowForY(r.getYForRow(or.row)),_=s.getColumnForX(r.getXForColumn(h+1))-1,S=s.getRowForY(r.getYForRow(or.row+1))-1;return!(y>c||_<l||g>a||S<o)}const n=s.denormalizeCol(or.col,or.world);return e.spans.some((o=>o.row===or.row&&o.colFrom<=n&&o.colTo>=n))}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const s=co(this.tileInfo.spatialReference),n=-r*(s.valid[1]-s.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+K6e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce(((r,s)=>Math.abs(s-e)<Math.abs(r-e)?s:r),i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const s=this._infoByLevel[r.level];return e.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(e.level=i.level,e.col=Math.floor(r.col*s.resolution/i.resolution+.01),e.row=Math.floor(r.row*s.resolution/i.resolution+.01)),e)}},t8e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},i8e=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new AC,this._controllers=new AC,this._processingItems=new AC,this._pausedSignal=k0(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new bS(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=pr(this._schedule),this._task=pr(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((i=>e.push(i))),this._controllers.clear(),e.forEach((i=>i.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((i,r)=>e(r)))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const s=new AbortController;let n=null;i&&(n=ac(i,(()=>s.abort())));const o=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),a(),c.reject(Hi())},a=()=>{l.remove(),n!=null&&n.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=tz(s.signal,o),c=_a();return this._deferreds.set(e,c),this._controllers.set(e,s),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var i;const e=this._queue.popLast();return e&&((i=this._deferreds.get(e))==null||i.reject(Hi()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=bx((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,s=new t8e(e,r);this._processingItems.set(e,s);try{i=this.process(e,r.signal)}catch(n){this._processError(s,n)}Ku(i)?(s.promise=i,i.then((n=>this._processResult(s,n)),(n=>this._processError(s,n)))):this._processResult(s,i)}get test(){}};const fQ=[0,0];let Ph=class extends et{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:s}=this;this._queue=new i8e({concurrency:e,scheduler:r,priority:s,process:(n,o)=>{const a=this._keyToItem.get(n);return i(a,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=tr(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),s=this.tileInfoView.getTileScale(e.key),n=F0(this._tilesByScale,s,(()=>new Set)),o=()=>{n.delete(e.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(i)};return n.add(e.key),this._keyToItem.set(i,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const o of e)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(gK(a,(l=>i.has(l)))){const l=Math.abs(o-r);l<n&&(s=a,n=l)}return this._getClosestTileKey(s,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const a of e)if(i.has(a.id)){r.getTileCoords(fQ,a);const l=uP(fQ,s);l<o&&(o=l,n=a)}return n}};u([A({constructOnly:!0})],Ph.prototype,"concurrency",void 0),u([A({constructOnly:!0})],Ph.prototype,"priority",void 0),u([A({constructOnly:!0})],Ph.prototype,"process",void 0),u([A({constructOnly:!0})],Ph.prototype,"scheduler",void 0),u([A()],Ph.prototype,"state",void 0),u([A({constructOnly:!0})],Ph.prototype,"tileInfoView",void 0),Ph=u([B("esri.views.2d.tiling.TileQueue")],Ph);const dut=Ph;let r8e=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];AQ(this._tilePerId,e);for(let n=0;n<s.length;n++)if(s[n].id===e){s.splice(n,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(e,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==e&&(s=this._pruneAroundCenterTile(s,i,r,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,e))}_pruneAroundCenterTile(e,i,r,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],h=[0,0],y=[0,0];for(n.sort(((g,_)=>(h[0]=a.x+l*(g.col+.5),h[1]=a.y-c*(g.row+.5),y[0]=a.x+l*(_.col+.5),y[1]=a.y-c*(_.row+.5),lM(h,i)-lM(y,i))));n.length>0;){const g=n.pop();if(this._removeTile(g.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),AQ(this._tilePerId,e)}};function AQ(t,e){t.delete(e)}const AA=new D1(0,0,0,0),lh=new Map,Ew=[],cO=[];let fut=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new r8e(e.cacheSize,this.tileInfoView,(i=>{this.releaseTile(i)})))}destroy(){this.tileIndex.clear()}update(e){var M,P;const{resampling:i,tileIndex:r}=this,{scale:s,center:n,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>a||s<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:y,lodInfo:g}=h,{level:_}=g;this.tiles.length=0,r.forEach((D=>D.visible=!0));let S=0,E=0;if(y.length>0)for(const{row:D,colFrom:F,colTo:U}of y)for(let G=F;G<=U;G++){S++;const Q=AA.set(_,D,g.normalizeCol(G),g.getWorldForColumn(G)).id;let W=r.get(Q);if(W)W.isReady?(lh.set(Q,W),E++):c||this._addParentTile(Q,lh);else{if((M=this._tileCache)!=null&&M.has(Q)){if(W=this._tileCache.pop(Q),this.tileIndex.set(Q,W),W.isReady){lh.set(Q,W),E++;continue}}else W=this.acquireTile(AA),this.tileIndex.set(Q,W);c||this._addParentTile(Q,lh)}}const C=E===S;for(const[D,F]of r){if(lh.has(D))continue;AA.set(D);const U=this.tileInfoView.intersects(h,AA),G=this.cachePolicy==="purge"?AA.level!==_:AA.level>_;!U||!c&&C?!G&&U||Ew.push(F):F.isReady?G&&this.cachePolicy==="purge"&&this._hasReadyAncestor(AA,_)?Ew.push(F):cO.push(F):G&&Ew.push(F)}for(const D of cO)D.isReady&&lh.set(D.key.id,D);for(const D of Ew)this._tileCache?this._tileCache.add(D):this.releaseTile(D),r.delete(D.key.id);for(const D of lh.values())this.tiles.push(D);for(const D of r.values())lh.has(D.key.id)||(D.visible=!1);(P=this._tileCache)==null||P.prune(_,n,o),MB.pool.release(h),cO.length=0,Ew.length=0,lh.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())e(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var n;let r=e,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s==null?void 0:s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if((n=this._tileCache)!=null&&n.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s==null?void 0:s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(e,i){const r=Qr();this.tileInfoView.getTileBounds(r,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<e.level){const n=Qr();if(this.tileInfoView.getTileBounds(n,s.key,!0),f_e(n,r))return!0}return!1}},s8e=class{constructor(e,i={}){this.events=new dc,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let s=this._canvas.getContext("webgl2",r);s||(s=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=s,this._handles=D0([p1(this._canvas,"webglcontextlost",(n=>this.events.emit("webgl-context-lost",n)))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||ce("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=ce("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,s,n,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${s}, ${n}, ${o}, ${a}, ${l})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:s},pixelRatio:n}=e,o=s[0],a=s[1],l=Math.round(o*n),c=Math.round(a*n);i.width===l&&i.height===c||(i.width=l,i.height=c),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,i){const[r,s]=e.center,[n,o]=i.center,[a,l]=e.toScreen([0,0],n,o),[c,h]=e.toScreen([0,0],r,s),y=c-a,g=h-l,_=e.scale/i.scale,S=i.rotation-e.rotation,E=Nu();return qx(E),Wx(E,E,[_,_]),jf(E,E,w1(S)),Du(E,E,[y,g]),E}};function n8e(t,e,i,r,s){oce(t,e,i||0,r||t.length-1,s||o8e)}function oce(t,e,i,r,s){for(;r>i;){if(r-i>600){var n=r-i+1,o=e-i+1,a=Math.log(n),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(n-l)/n)*(o-n/2<0?-1:1);oce(t,e,Math.max(i,Math.floor(e-o*l/n+c)),Math.min(r,Math.floor(e+(n-o)*l/n+c)),s)}var h=t[e],y=i,g=r;for(Iw(t,i,e),s(t[r],h)>0&&Iw(t,i,r);y<g;){for(Iw(t,y,g),y++,g--;s(t[y],h)<0;)y++;for(;s(t[g],h)>0;)g--}s(t[i],h)===0?Iw(t,i,g):Iw(t,++g,r),g<=e&&(i=g+1),e<=g&&(r=g-1)}}function Iw(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function o8e(t,e){return t<e?-1:t>e?1:0}function _M(t,e){if(!(this instanceof _M))return new _M(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function a8e(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function _y(t,e){G2(t,0,t.children.length,e,t)}function G2(t,e,i,r,s){s||(s=Ag(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=e;o<i;o++)n=t.children[o],H2(s,t.leaf?r(n):n);return s}function H2(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function mQ(t,e){return t.minX-e.minX}function yQ(t,e){return t.minY-e.minY}function uO(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function fE(t){return t.maxX-t.minX+(t.maxY-t.minY)}function l8e(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function c8e(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),n=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function hO(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function AE(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ag(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gQ(t,e,i,r,s){for(var n,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(n=e+Math.ceil((i-e)/r/2)*r,n8e(t,n,e,i,s),o.push(e,n,n,i))}_M.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!AE(t,e))return i;for(var s,n,o,a,l=[];e;){for(s=0,n=e.children.length;s<n;s++)o=e.children[s],AE(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):hO(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!AE(t,e))return!1;for(var r,s,n,o,a=[];e;){for(r=0,s=e.children.length;r<s;r++)if(n=e.children[r],AE(t,o=e.leaf?i(n):n)){if(e.leaf||hO(t,o))return!0;a.push(n)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ag([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,s,n,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=c.pop(),n=!0),o.leaf&&(s=a8e(t,o.children,e))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!hO(o,a)?r?(i++,o=r.children[i],n=!1):o=null:(l.push(o),c.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:mQ,compareMinY:yQ,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var s,n=i-e+1,o=this._maxEntries;if(n<=o)return _y(s=Ag(t.slice(e,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,r-1))),(s=Ag([])).leaf=!1,s.height=r;var a,l,c,h,y=Math.ceil(n/o),g=y*Math.ceil(Math.sqrt(o));for(gQ(t,e,i,g,this.compareMinX),a=e;a<=i;a+=g)for(gQ(t,a,c=Math.min(a+g-1,i),y,this.compareMinY),l=a;l<=c;l+=y)h=Math.min(l+y-1,c),s.children.push(this._build(t,l,h,r-1));return _y(s,this.toBBox),s},_chooseSubtree:function(t,e,i,r){for(var s,n,o,a,l,c,h,y;r.push(e),!e.leaf&&r.length-1!==i;){for(h=y=1/0,s=0,n=e.children.length;s<n;s++)l=uO(o=e.children[s]),(c=l8e(t,o)-l)<y?(y=c,h=l<h?l:h,a=o):c===y&&l<h&&(h=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,s=i?t:r(t),n=[],o=this._chooseSubtree(s,this.data,e,n);for(o.children.push(t),H2(o,s);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(s,n,e)},_split:function(t,e){var i=t[e],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),o=Ag(i.children.splice(n,i.children.length-n));o.height=i.height,o.leaf=i.leaf,_y(i,this.toBBox),_y(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=Ag([t,e]),this.data.height=t.height+1,this.data.leaf=!1,_y(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,s,n,o,a,l,c,h;for(l=c=1/0,r=e;r<=i-e;r++)o=c8e(s=G2(t,0,r,this.toBBox),n=G2(t,r,i,this.toBBox)),a=uO(s)+uO(n),o<l?(l=o,h=r,c=a<c?a:c):o===l&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:mQ,s=t.leaf?this.compareMinY:yQ;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,s)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var s,n,o=this.toBBox,a=G2(t,0,e,o),l=G2(t,i-e,i,o),c=fE(a)+fE(l);for(s=e;s<i-e;s++)n=t.children[s],H2(a,t.leaf?o(n):n),c+=fE(a);for(s=i-e-1;s>=e;s--)n=t.children[s],H2(l,t.leaf?o(n):n),c+=fE(l);return c},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)H2(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():_y(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function u8e(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let vQ=class ace{constructor(e,i){this.key=new D1(0,0,0,0),this.bounds=Qr(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return h_e(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return u8e(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=io.acquire();for(let r=0;r<e.length;r++)i[r]=new ace(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return Np.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const mA={added:[],removed:[]},dO=new Set,h8e=new D1(0,0,0,0);function d8e(t,e){const i=co(e);if(!i)return null;const[r,s]=i.valid;return t[2]>s?[Qr([t[0],t[1],s,t[3]]),Qr([r,t[1],r+t[2]-s,t[3]])]:t[0]<r?[Qr([r,t[1],t[2],t[3]]),Qr([s-(r-t[0]),t[1],s,t[3]])]:null}let p8e=class extends dc{constructor(e){super(),this._tiles=new Map,this._index=_M(9,ce("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||Tk(e)===0||Mk(e)===0)return[];const i=d8e(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const s=new vQ(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of e.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach((r=>this.tiles.push(r))),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:n}=s;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const h=h8e.set(n,o,s.normalizeCol(c),s.getWorldForColumn(c)).id;if(dO.add(h),!this.has(h)){const y=new vQ(this.tileScheme,h);this._tiles.set(h,y),this._index.insert(y),this.tiles.push(y),mA.added.push(y)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];dO.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),mA.removed.push(a))}(mA.added.length||mA.removed.length)&&this.emit("update",mA),MB.pool.release(i),dO.clear(),mA.added.length=0,mA.removed.length=0}};const gut=1e-30,nv=512,mE=16777216,vut=8,lce=29,cce=24,but=4,wut=0,_ut=0,Sut=0,xut=1,$ut=2,Eut=3,Iut=4,Cut=5,Tut=6,Mut=12,kut=13,Put=5,f8e=6,Lut=5,Rut=6;var bQ;(function(t){t[t.FilterFlags=0]="FilterFlags",t[t.Animation=1]="Animation",t[t.GPGPU=2]="GPGPU",t[t.VV=3]="VV",t[t.DD0=4]="DD0",t[t.DD1=5]="DD1",t[t.DD2=6]="DD2",t[t.LocalTimeOrigin=7]="LocalTimeOrigin"})(bQ||(bQ={}));const uce=6,A8e=1<<uce,Out=A8e<<1,Dut=1.05,Nut=3,Fut=1,m8e=3,y8e=3,zut=5,But=6,jut=1.15,g8e=4,Uut=128,v8e=256,Vut=v8e-2*g8e,Gut=2,Hut=128,hce=1,qut=10,b8e=1024,Wut=128,Qut=4,Jut=1,Zut=1<<20,Yut=.75,Xut=10,Kut=.75,eht=256,w8e=32,_8e=512,tht=0,iht=1,S8e=1,rht=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],sht=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Cw=256;var wQ,_Q,SQ,xQ,$Q,A6,EQ,IQ,Bc,m6,U_,gr,SM,el,y6,ns,ht,xM,Zb,i0,g6,NS,CQ,TQ,MQ;(function(t){t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t[t.COLOR=16384]="COLOR"})(wQ||(wQ={})),(function(t){t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(_Q||(_Q={})),(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(SQ||(SQ={})),(function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(xQ||(xQ={})),(function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})($Q||($Q={})),(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(A6||(A6={})),(function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(EQ||(EQ={})),(function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"})(IQ||(IQ={})),(function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"})(Bc||(Bc={})),(function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"})(m6||(m6={})),(function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"})(U_||(U_={})),(function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(gr||(gr={})),(function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(SM||(SM={})),(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(el||(el={})),(function(t){t[t.MIN_LOD=33082]="MIN_LOD",t[t.MAX_LOD=33083]="MAX_LOD",t[t.BASE_LEVEL=33084]="BASE_LEVEL",t[t.MAX_LEVEL=33085]="MAX_LEVEL",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE"})(y6||(y6={})),(function(t){t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"})(ns||(ns={})),(function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"})(ht||(ht={})),(function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(xM||(xM={})),(function(t){t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(Zb||(Zb={})),(function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F"})(i0||(i0={})),(function(t){t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8"})(g6||(g6={})),(function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(NS||(NS={})),(function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"})(CQ||(CQ={})),(function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"})(TQ||(TQ={})),(function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(MQ||(MQ={}));const nht=33984;var $M,kQ;(function(t){t[t.Texture=0]="Texture",t[t.TileTexture=1]="TileTexture",t[t.BufferObject=2]="BufferObject",t[t.VertexArrayObject=3]="VertexArrayObject",t[t.Shader=4]="Shader",t[t.Program=5]="Program",t[t.FramebufferObject=6]="FramebufferObject",t[t.Renderbuffer=7]="Renderbuffer",t[t.TransformFeedback=8]="TransformFeedback",t[t.Sync=9]="Sync",t[t.UNCOUNTED=10]="UNCOUNTED",t[t.LinesOfCode=10]="LinesOfCode",t[t.Uniform=11]="Uniform",t[t.COUNT=12]="COUNT"})($M||($M={})),(function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"})(kQ||(kQ={}));const oht=36064,aht=36065,lht=36066,cht=33306,uht=36096,hht=36128;var Gs,PQ,LQ,RQ,OQ,DQ,NQ,Vp,FQ;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Gs||(Gs={})),(function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(PQ||(PQ={})),(function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"})(LQ||(LQ={})),(function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"})(RQ||(RQ={})),(function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"})(OQ||(OQ={})),(function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(DQ||(DQ={})),(function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(NQ||(NQ={})),(function(t){t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL"})(Vp||(Vp={})),(function(t){t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR"})(FQ||(FQ={}));const x8e=()=>be.getLogger("esri.views.webgl.checkWebGLError");function $8e(t){switch(t){case Vp.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case Vp.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case Vp.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case Vp.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case Vp.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case Vp.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const dce=!!ce("enable-feature:webgl-debug");function pce(){return dce}function dht(){return dce}function yA(t,e=pce()){if(e){const i=t.getError();if(i){const r=$8e(i),s=new Error().stack;x8e().error(new te("webgl-error","WebGL error occurred",{message:r,stack:s}))}}}var EM;(function(t){t[t.TextureDescriptor=0]="TextureDescriptor",t[t.Texture=1]="Texture",t[t.Renderbuffer=2]="Renderbuffer"})(EM||(EM={}));function E8e(t){switch(t){case Bc.BYTE:case Bc.UNSIGNED_BYTE:return 1;case Bc.SHORT:case Bc.UNSIGNED_SHORT:case Bc.HALF_FLOAT:return 2;case Bc.FLOAT:case Bc.INT:case Bc.UNSIGNED_INT:return 4}}function I8e(t){const e=t.gl;switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case e.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case e.INVALID_OPERATION:return"The specified command is not allowed for the current state";case e.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case e.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case e.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function pht(t,e,i,r,s=0){var o;const n=t.gl;t.bindBuffer(i);for(const a of r){const l=e.get(a.name);if(l==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const c=s*a.stride;if(a.count<=4)n.vertexAttribPointer(l,a.count,a.type,a.normalized,a.stride,a.offset+c),n.enableVertexAttribArray(l),a.divisor>0&&t.gl.vertexAttribDivisor(l,a.divisor);else if(a.count===9)for(let h=0;h<3;h++)n.vertexAttribPointer(l+h,3,a.type,a.normalized,a.stride,a.offset+12*h+c),n.enableVertexAttribArray(l+h),a.divisor>0&&t.gl.vertexAttribDivisor(l+h,a.divisor);else if(a.count===16)for(let h=0;h<4;h++)n.vertexAttribPointer(l+h,4,a.type,a.normalized,a.stride,a.offset+16*h+c),n.enableVertexAttribArray(l+h),a.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(l+h,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(pce()){const h=I8e(t),y=E8e(a.type),g=a.offset,_=Math.round(y/g)!==y/g?`. Offset not a multiple of stride. DataType requires ${y} bytes, but descriptor has an offset of ${g}`:"";h&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${c}${_}:`,h,a)}}}function fht(t,e,i,r){var n,o,a;const s=t.gl;t.bindBuffer(i);for(const l of r){const c=e.get(l.name);if(l.count<=4)s.disableVertexAttribArray(c),l.divisor&&l.divisor>0&&((n=t.gl)==null||n.vertexAttribDivisor(c,0));else if(l.count===9)for(let h=0;h<3;h++)s.disableVertexAttribArray(c+h),l.divisor&&l.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(c+h,0));else if(l.count===16)for(let h=0;h<4;h++)s.disableVertexAttribArray(c+h),l.divisor&&l.divisor>0&&((a=t.gl)==null||a.vertexAttribDivisor(c+h,0));else console.error("Unsupported vertex attribute element count: "+l.count)}t.unbindBuffer(A6.ARRAY_BUFFER)}function C8e(t){switch(t){case ns.ALPHA:case ns.LUMINANCE:case ns.RED:case ns.RED_INTEGER:case ht.R8:case ht.R8I:case ht.R8UI:case ht.R8_SNORM:case g6.STENCIL_INDEX8:return 1;case ns.LUMINANCE_ALPHA:case ns.RG:case ns.RG_INTEGER:case ht.RGBA4:case ht.R16F:case ht.R16I:case ht.R16UI:case ht.RG8:case ht.RG8I:case ht.RG8UI:case ht.RG8_SNORM:case ht.RGB565:case ht.RGB5_A1:case i0.DEPTH_COMPONENT16:return 2;case ns.RGB:case ns.RGB_INTEGER:case ht.RGB8:case ht.RGB8I:case ht.RGB8UI:case ht.RGB8_SNORM:case ht.SRGB8:case i0.DEPTH_COMPONENT24:return 3;case ns.RGBA:case ns.RGBA_INTEGER:case ht.RGBA8:case ht.R32F:case ht.R11F_G11F_B10F:case ht.RG16F:case ht.R32I:case ht.R32UI:case ht.RG16I:case ht.RG16UI:case ht.RGBA8I:case ht.RGBA8UI:case ht.RGBA8_SNORM:case ht.SRGB8_ALPHA8:case ht.RGB9_E5:case ht.RGB10_A2UI:case ht.RGB10_A2:case i0.DEPTH_COMPONENT32F:case Zb.DEPTH24_STENCIL8:return 4;case Zb.DEPTH32F_STENCIL8:return 5;case ht.RGB16F:case ht.RGB16I:case ht.RGB16UI:return 6;case ht.RG32F:case ht.RG32I:case ht.RG32UI:case ht.RGBA16F:case ht.RGBA16I:case ht.RGBA16UI:return 8;case ht.RGB32F:case ht.RGB32I:case ht.RGB32UI:return 12;case ht.RGBA32F:case ht.RGBA32I:case ht.RGBA32UI:return 16;case Gs.COMPRESSED_RGB_S3TC_DXT1_EXT:case Gs.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Gs.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Gs.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Gs.COMPRESSED_R11_EAC:case Gs.COMPRESSED_SIGNED_R11_EAC:case Gs.COMPRESSED_RGB8_ETC2:case Gs.COMPRESSED_SRGB8_ETC2:case Gs.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Gs.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Gs.COMPRESSED_RG11_EAC:case Gs.COMPRESSED_SIGNED_RG11_EAC:case Gs.COMPRESSED_RGBA8_ETC2_EAC:case Gs.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let fce=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=EM.TextureDescriptor,this.target=el.TEXTURE_2D,this.pixelFormat=ns.RGBA,this.dataType=NS.UNSIGNED_BYTE,this.samplingMode=gr.LINEAR,this.wrapMode=SM.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function T8e(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:C8e(t.internalFormat))*(t.target===el.TEXTURE_CUBE_MAP?6:1))}const Tw=()=>be.getLogger("esri/views/webgl/textureUtils");function Mw(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&Tw().error("Negative dimension parameters are not allowed!");const{internalFormat:s}=t;if(s&&(Ace(s)||mce(s))){const{linearFilterDepth:n,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&Tw().error("Depth textures cannot have mipmaps"),n?a!==gr.LINEAR&&a!==gr.NEAREST&&Tw().error("Depth textures cannot sample mipmaps"):(a!==gr.NEAREST&&Tw().error("Depth textures without filtering must use NEAREST filtering"),o&&Tw().error("Depth textures without filtering cannot use compare function"))}}function M8e(t){return t in ht}function Ace(t){return t in i0}function mce(t){return t in Zb}function k8e(t){return t!=null&&t in Gs}function mg(t){return t!=null&&"type"in t&&t.type==="compressed"}function P8e(t){return t!=null&&"byteLength"in t}function zQ(t){return t!=null&&!mg(t)&&!P8e(t)}function Sy(t){return t===el.TEXTURE_3D||t===el.TEXTURE_2D_ARRAY}function BQ(t,e,i,r=1){let s=Math.max(e,i);return t===el.TEXTURE_3D&&(s=Math.max(s,r)),Math.floor(Math.log2(s))+1}function yE(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case NS.FLOAT:switch(t.pixelFormat){case ns.RGBA:return ht.RGBA32F;case ns.RGB:return ht.RGB32F;default:throw new te("texture:unknown-format","Unable to derive format")}case NS.UNSIGNED_BYTE:switch(t.pixelFormat){case ns.RGBA:return ht.RGBA8;case ns.RGB:return ht.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===xM.DEPTH_STENCIL?Zb.DEPTH24_STENCIL8:e===xM.DEPTH_COMPONENT?i0.DEPTH_COMPONENT24:e,t.internalFormat}function L8e(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let R8e=class yce extends fce{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case ht.R16F:case ht.R32F:case ht.R8_SNORM:case ht.R8:this.pixelFormat=ns.RED;break;case ht.R8I:case ht.R8UI:case ht.R16I:case ht.R16UI:case ht.R32I:case ht.R32UI:this.pixelFormat=ns.RED_INTEGER}}static validate(e,i){return new yce(e,i)}};const ch=()=>be.getLogger("esri/views/webgl/Texture");var ps;let O8e=(ps=class{constructor(e,i=null,r=null){if(this.type=EM.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const s=R8e.validate(e,i);if(!s)throw new te("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=s}this._descriptor.target===el.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return T8e(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this._descriptor.context.gl&&this.hasWebGLTextureObject&&(this._descriptor.context.instanceCounter.decrement($M.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new te("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===el.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!mg(e)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in Gs&&(this._descriptor.internalFormat=void 0),this._setData(e),!mg(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,s,n,o,a=0){o||ch().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||ch().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=yE(l);const{context:c,pixelFormat:h,dataType:y,target:g,isImmutable:_}=l;if(_&&!this._wasImmutablyAllocated)throw new te("texture:uninitialized","Cannot update immutable texture before allocation!");const S=c.bindTexture(this,ps.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+s>l.width||r+n>l.height)&&ch().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:E}=c;a&&(s&&n||ch().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),E.pixelStorei(E.UNPACK_SKIP_ROWS,a)),zQ(o)?E.texSubImage2D(g,e,i,r,s,n,h,y,o):mg(o)?E.compressedTexSubImage2D(g,e,i,r,s,n,l.internalFormat,o.levels[e]):E.texSubImage2D(g,e,i,r,s,n,h,y,o),a&&E.pixelStorei(E.UNPACK_SKIP_ROWS,0),c.bindTexture(S,ps.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,s,n,o,a,l){l||ch().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||ch().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=yE(c);const{context:h,pixelFormat:y,dataType:g,isImmutable:_,target:S}=c;if(_&&!this._wasImmutablyAllocated)throw new te("texture:uninitialized","Cannot update immutable texture before allocation!");Sy(S)||ch().warn("Attempting to set 3D texture data on a non-3D texture");const E=h.bindTexture(this,ps.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(ps.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||i+n>c.width||r+o>c.height||s+a>c.depth)&&ch().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:C}=h;if(mg(l))l=l.levels[e],C.compressedTexSubImage3D(S,e,i,r,s,n,o,a,c.internalFormat,l);else{const M=l;C.texSubImage3D(S,e,i,r,s,n,o,a,y,g,M)}h.bindTexture(E,ps.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new te("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,Mw(e)}e.samplingMode===gr.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=gr.LINEAR_MIPMAP_NEAREST):e.samplingMode===gr.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=gr.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,ps.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(ps.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,ps.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new te("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,Mw(e)}e.samplingMode===gr.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=gr.LINEAR):e.samplingMode===gr.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=gr.NEAREST)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,Mw(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?gr.LINEAR:gr.NEAREST),Mw(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=Pb(this._compressionAbortController)}_setData(e,i){var l;const r=this._descriptor,s=(l=r.context)==null?void 0:l.gl;if(!s)return;yA(s),this.hasWebGLTextureObject||(this._glName=s.createTexture(),r.context.instanceCounter.increment($M.Texture,this)),Mw(r);const n=r.context.bindTexture(this,ps.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(ps.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),yA(s);const o=i??r.target,a=Sy(o);if(zQ(e))this._setDataFromTexImageSource(e,o);else{const{width:c,height:h,depth:y}=r;if(c==null||h==null)throw new te("texture:missing-size","Width and height must be specified!");if(a&&y==null)throw new te("texture:missing-depth","Depth must be specified!");if(r.internalFormat=yE(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,c,h,y),mg(e)){if(!k8e(r.internalFormat))throw new te("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,c,h,y,e),yA(s),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),yA(s),r.context.bindTexture(n,ps.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=el.TEXTURE_CUBE_MAP_POSITIVE_X;i<=el.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:s}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,s=this._descriptor;s.internalFormat=yE(s);const n=Sy(i),{width:o,height:a,depth:l}=L8e(e);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=a),n&&s.depth,n&&(s.depth=l),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,s.internalFormat,s.hasMipmap,o,a,l),this._texImage(i,0,s.internalFormat,o,a,l,e),yA(r),s.hasMipmap&&(this.generateMipmap(),yA(r))}_setDataFromCompressedSource(e,i,r){const s=this._descriptor,{width:n,height:o,depth:a}=s,l=e.levels,c=BQ(r,n,o,a),h=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(s.target,y6.MAX_LEVEL,h),this._forEachMipmapLevel(((y,g,_,S)=>{const E=l[Math.min(y,l.length-1)];this._compressedTexImage(r,y,i,g,_,S,E)}),h)}_texStorage(e,i,r,s,n,o){const{gl:a}=this._descriptor.context;if(!M8e(i)&&!Ace(i)&&!mce(i))throw new te("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?BQ(e,s,n,o):1;if(Sy(e)){if(o==null)throw new te("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,i,s,n,o)}else a.texStorage2D(e,l,i,s,n);this._wasImmutablyAllocated=!0}_texImage(e,i,r,s,n,o,a){const l=this._descriptor.context.gl,c=Sy(e),{isImmutable:h,pixelFormat:y,dataType:g}=this._descriptor;if(h){if(a!=null){const _=a;if(c){if(o==null)throw new te("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,i,0,0,0,s,n,o,y,g,_)}else l.texSubImage2D(e,i,0,0,s,n,y,g,_)}}else{const _=a;if(c){if(o==null)throw new te("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,i,r,s,n,o,0,y,g,_)}else l.texImage2D(e,i,r,s,n,0,y,g,_)}}_compressedTexImage(e,i,r,s,n,o,a){const l=this._descriptor.context.gl,c=Sy(e);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new te("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,s,n,o,r,a)}else l.compressedTexSubImage2D(e,i,0,0,s,n,r,a)}else if(c){if(o==null)throw new te("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,r,s,n,o,0,a)}else l.compressedTexImage2D(e,i,r,s,n,0,a)}async _compressOnWorker(e){var _,S,E,C;const{width:i,height:r,context:s,flipped:n,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=(_=this._descriptor.compress)==null?void 0:_.compressionTracker,c=(S=this._descriptor.compress)==null?void 0:S.compressionCallback,{compressedTextureETC:h,compressedTextureS3TC:y}=s.capabilities;if(!((E=ps.compressionWorkerHandle)!=null&&E.isCompressible(e,this._descriptor))||!h&&!y)return;this.abortCompression();const g=new AbortController;this._compressionAbortController=g,l==null||l.increment();try{let M;e instanceof Uint8Array?M=e.buffer:(M=await createImageBitmap(e,{imageOrientation:n?"flipY":"none"}),ir(g));const P={data:M,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===ns.RGBA?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!h,hasS3TC:!!y},D=await ps.compressionWorkerHandle.invoke(P,g.signal,"low");if(ir(g),D.compressedTexture&&this.hasWebGLTextureObject){const F=this.usedMemory;this._descriptor.internalFormat=D.internalFormat,this._setData(D.compressedTexture),c==null||c(F-this.usedMemory)}}catch(M){Zs(M)||ch().error("Texture compression failed!")}finally{l==null||l.decrement(),(C=this._compressionAbortController)!=null&&C.signal.aborted&&(this._compressionAbortController=null)}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:s,depth:n,hasMipmap:o,target:a}=this._descriptor;const l=a===el.TEXTURE_3D;if(r==null||s==null||l&&n==null)throw new te("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,s,n),o&&(r!==1||s!==1||l&&n!==1)&&!(c>=i);++c)r=Math.max(1,r>>1),s=Math.max(1,s>>1),l&&(n=Math.max(1,n>>1))}_applySamplingMode(){var n;const e=this._descriptor,i=(n=e.context)==null?void 0:n.gl;let r=e.samplingMode,s=e.samplingMode;r===gr.LINEAR_MIPMAP_NEAREST||r===gr.LINEAR_MIPMAP_LINEAR?(r=gr.LINEAR,e.hasMipmap||(s=gr.LINEAR)):r!==gr.NEAREST_MIPMAP_NEAREST&&r!==gr.NEAREST_MIPMAP_LINEAR||(r=gr.NEAREST,e.hasMipmap||(s=gr.NEAREST)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){var r;const e=this._descriptor,i=(r=e.context)==null?void 0:r.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){var s;const e=this._descriptor,i=(s=e.context)==null?void 0:s.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),yA(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},ps.TEXTURE_UNIT_FOR_UPDATES=0,ps.compressionWorkerHandle=null,ps);const pO=()=>be.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function D8e(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const N8e=[0,0,0,0];let gce=class{constructor(){this.type="single",this._highlightOptions=new _f,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*Cw),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,f8e),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var e;(e=this._shadeTex)==null||e.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<uce)-1,activeGradient:this}]}_updateGradientTexture(e){const i=F8e(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,D8e(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,s=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,n=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*S8e,c=Math.abs(s)>l?Math.round(10*(Math.abs(s)-l))/10:0,h=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let y;c&&!h?pO().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&h?pO().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&h&&pO().error("The highlight is "+Math.max(c,h)+"px away from the edge of the feature; consider reducing some width values.");const g=[void 0,void 0,void 0,void 0];function _(E,C,M){g[0]=(1-M)*E[0]+M*C[0],g[1]=(1-M)*E[1]+M*C[1],g[2]=(1-M)*E[2]+M*C[2],g[3]=(1-M)*E[3]+M*C[3]}const{_texelData:S}=this;for(let E=0;E<Cw;++E)y=s+E/(Cw-1)*(a-s),y<s?(g[0]=0,g[1]=0,g[2]=0,g[3]=0):y<n?_(N8e,r.outlineColor,(y-s)/(n-s)):y<o?[g[0],g[1],g[2],g[3]]=r.outlineColor:y<a?_(r.outlineColor,r.fillColor,(y-o)/(a-o)):[g[0],g[1],g[2],g[3]]=r.fillColor,S[4*E]=255*g[0],S[4*E+1]=255*g[1],S[4*E+2]=255*g[2],S[4*E+3]=255*g[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=a,!this._shadeTex){const E=new fce;E.wrapMode=SM.CLAMP_TO_EDGE,E.width=Cw,E.height=1,this._shadeTex=new O8e(e,E)}this._shadeTex.updateData(0,0,0,Cw,1,this._texelData)}};function F8e(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let z8e=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new gce),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const s=this.gradients[r];i.push({activeReasons:e,activeGradient:s}),e<<=1}return i}};var jQ,UQ,VQ,GQ,HQ,qQ,IM,WQ,QQ;(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"})(jQ||(jQ={})),(function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(UQ||(UQ={})),(function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"})(VQ||(VQ={})),(function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(GQ||(GQ={})),(function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"})(HQ||(HQ={})),(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SIMPLE=1]="SIMPLE",t[t.DOT_DENSITY=2]="DOT_DENSITY",t[t.OUTLINE_FILL=3]="OUTLINE_FILL",t[t.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",t[t.HEATMAP=5]="HEATMAP",t[t.PIE_CHART=6]="PIE_CHART"})(qQ||(qQ={})),(function(t){t[t.All=0]="All",t[t.Highlight=1]="Highlight",t[t.InsideEffect=2]="InsideEffect",t[t.OutsideEffect=3]="OutsideEffect"})(IM||(IM={})),(function(t){t[t.BATCHING=0]="BATCHING",t[t.STRICT_ORDER=1]="STRICT_ORDER",t[t.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"})(WQ||(WQ={})),(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT"})(QQ||(QQ={}));const vce={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:t=>t.stencilRef,compare:m6.EQUAL,mask:255,op:{fail:U_.KEEP,zFail:U_.KEEP,zPass:U_.REPLACE}}}},B8e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},j8e={...vce,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function U8e({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},s){const n=1/2**(i-s.key.level),o=1/2**(r-s.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:xa(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function bce(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="highlight"}function wce(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="hittest"}function V8e(t){if(!wce(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}}function G8e(t){if(!bce(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function ght(t,e,i){const r={};for(const s in i)typeof i[s]!="function"?r[s]=i[s]:r[s]=i[s](t,e);return r}function vht(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:U8e(t,e),hittestRequest:V8e(t),highlight:G8e(t)}}function bht(t){return{inside:t.selection===IM.InsideEffect,outside:t.selection===IM.OutsideEffect}}function H8e(t){return wce(t)?B8e:bce(t)&&t.passOptions.stepType==="clear"?j8e:vce}function wht(t){const{row:e,col:i}=t.key,r=i*nv,s=e*nv;return{tileOffsetFromLocalOrigin:[r%mE,s%mE],maxIntsToLocalOrigin:[Math.floor(r/mE),Math.floor(s/mE)]}}const q8e=new Ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function _ht(t){return q8e.toJSON(t)}function Sht(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:s}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||s==="u8"||s==="s8")}function W8e(t,e){return e==null?(t==null||t.destroy(),null):((t==null?void 0:t.type)==="single"&&Array.isArray(e)&&(t.destroy(),t=null),(t==null?void 0:t.type)!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new z8e:new gce),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function xht(t,e,i,r){const{painter:s,highlightGradient:n}=t,{highlight:o}=s.effects;if(!n)return;const a=t.passOptions,l=n.getReasonsWithGradients();for(let c=0;c<l.length;c++){const h={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(h),i(h),c<l.length-1){let g=0;for(let _=c+1;_<l.length;_++)g|=l[_].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:g,stepType:"clear",highlightAll:e}})}const y={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};s.setPipelineState(H8e(t)),s.updatePipelineState(t.context),o.draw(y),o.unbind()}t.passOptions=a}const gE=t=>parseFloat(t)/100;function Q8e(t,e,i){const r=typeof t.left=="string"?gE(t.left)*e:t.left,s=typeof t.right=="string"?gE(t.right)*e:t.right,n=typeof t.top=="string"?gE(t.top)*i:t.top,o=typeof t.bottom=="string"?gE(t.bottom)*i:t.bottom,a=n;return{xmin:r,xmax:Math.max(e-s,r),ymin:a,ymax:Math.max(i-o,n)}}function _ce(t,e,i,r){switch(e.type){case"rect":{const{width:s,height:n}=t,{xmin:o,xmax:a,ymin:l,ymax:c}=Q8e(e,s,n),{x:h,y}=i;return h>o&&h<a&&y>l&&y<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||t7(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?e7(e.geometry,r):Cx(e.geometry,r))}}function J8e(t){if(!t.highlights)return null;const e=t.highlights.findIndex((i=>i.name==="default"));return e===-1?null:t.highlights.items[e]}function Z8e(t,e){if(!t.highlights){if(!e)return;t.highlights=new qe([new _f])}const i=t.highlights.findIndex((r=>r.name==="default"));e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function Y8e(t,e,i){const r=Wae(e)?qae(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let s=new Set;const n=new Set;let o=!1,a=null,l=null;i!=null&&i.include?ZQ(i.include,JQ(t,(g=>{s.add(g),fO(g,(_=>n.add(_)))}),((g,_)=>{n.add(g),s.add(_)}),(g=>{a||(a=new Set),a.add(g)}),(g=>s.add(g)),(()=>o=!0))):(o=!0,s=new Set(t.allLayerViews),s.forEach((g=>{fO(g,(_=>n.add(_)))}))),i!=null&&i.exclude&&ZQ(i.exclude,JQ(t,(g=>{s.delete(g),fO(g,(_=>n.delete(_)))}),(g=>n.delete(g)),(g=>{l||(l=new Set),l.add(g)})));const c=t.toMap(r),h=t.allLayerViews.filter((g=>!g.suspended&&s.has(g)&&g.clips.every((_=>_ce(t,_,r,c))))).reverse();let y=[...o?t.graphicsView.hitTest(c).map((g=>({type:"graphic",graphic:g,layer:null,mapPoint:c}))):[],...await Promise.all(h.map((g=>g.hitTest(c,r))).toArray())].filter(os).flat().filter(os);return y=y.filter((g=>{var _;return g.type!=="graphic"||((_=g.layer)==null?void 0:_.type)!=="subtype-group"||n.has(g.graphic.layer)})),a&&(y=y.filter((g=>!("graphic"in g)||!g.graphic||(a==null?void 0:a.has(v6(g.graphic)))))),l&&(y=y.filter((g=>!("graphic"in g)||!g.graphic||!(l!=null&&l.has(v6(g.graphic)))))),{screenPoint:r,results:y}}function JQ(t,e,i,r,s,n){return o=>{if(o instanceof Qi){if(o.layer===t)n==null||n();else{const a=t.allLayerViews.find((l=>l.layer===o.layer));a&&(s==null||s(a))}r(v6(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find((l=>l.layer===o.parent));a&&i(o,a)}else{const a=t.allLayerViews.find((l=>l.layer===o));a&&e(a)}}}function ZQ(t,e){if(t)if(JC(t))for(const i of t)if(JC(i))for(const r of i)e(r);else e(i);else e(t)}function v6(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function fO({layer:t},e){(t==null?void 0:t.type)==="subtype-group"&&t.sublayers.forEach((i=>{e(i)}))}let kw=null,CM=!0;function X8e(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(CM)try{return new ImageData(t,e)}catch{CM=!1}return Sce(t,e,i)}function $ht(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(CM)try{return new ImageData(t,e,i)}catch{CM=!1}const s=Sce(e,i,r);return s.data.set(t,0),s}function K8e(){return kw||(kw=document.createElement("canvas"),kw.width=1,kw.height=1),kw}function Sce(t,e,i){return i||(i=K8e()),i.getContext("2d").createImageData(t,e)}async function eze(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await ei(i,{...e,responseType:"image"});return r}catch(r){throw Zs(r)?r:new te("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function tze(t,e){const{arrayBuffer:i,mediaType:r}=await ize(t,e),s=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await Ie(()=>import("./gif-DU1NIFv9.js"),[],import.meta.url);if(n(i))return o(i,e)}if(s){const{isAnimatedPNG:n,parseApng:o}=await Ie(()=>import("./apng-C7bWhGbr.js"),__vite__mapDeps([256,33,34]),import.meta.url);if(n(i))return o(i,e)}return eze(new Blob([i],{type:r}),e)}async function ize(t,e){var s;const i=y0(t);if(i!=null&&i.isBase64)return{arrayBuffer:Vte(i.data),mediaType:i.mediaType};const r=await ei(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:((s=r.getHeader)==null?void 0:s.call(r,"Content-Type"))??""}}function xce(t,e,i){const{ctx:r,canvas:s}=Ece(t,i),n=r.getImageData(0,0,t.width,t.height),o=Cce(s,e);return Ice(s),{dataUrl:o,data:n}}function $ce(t,e){const{ctx:i,canvas:r}=Ece(t,e),s=i.getImageData(0,0,t.width,t.height);return Ice(r),s}function Ece(t,e){const i=rze();e.premultipliedAlpha&&aze(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&oze(r),{ctx:r,canvas:i}}function Ice(t){t.width=0,t.height=0}function rze(){return AO==null&&(AO=document.createElement("canvas")),AO}let AO=null;function Cce(t,e){const i=lze[e.format],r=e.quality/100;return t.toDataURL(i,r)}function Tce(t,e){const i=nze(t),r=uze[i];return{format:i,quality:Bn(e??r,0,100)}}function Mce(t,e){return e/Math.max(t[0],t[1])}function sze(t,e,i,r=0,s=0,n=t.width-r,o=t.height-s,a=!1){const{data:l}=t,{width:c,height:h,data:y}=e,g=n/c,_=o/h,S=Math.ceil(g/2),E=Math.ceil(_/2),C=t.width;for(let M=0;M<h;M++)for(let P=0;P<c;P++){const D=4*(P+(a?h-M-1:M)*c);let F=0,U=0,G=0,Q=0,W=0,X=0;const K=(M+.5)*_;for(let de=Math.floor(M*_);de<(M+1)*_;de++){const ye=Math.abs(K-(de+.5))/E,xe=(P+.5)*g,ee=ye*ye;for(let le=Math.floor(P*g);le<(P+1)*g;le++){const Te=Math.abs(xe-(le+.5))/S,ke=Math.sqrt(ee+Te*Te);if(ke>=1)continue;let De=2*ke*ke*ke-3*ke*ke+1;const Ke=4*(r+le+(s+de)*C);X+=De*l[Ke+3],U+=De,!i&&l[Ke+3]<255&&(De=De*l[Ke+3]/255),G+=De*l[Ke],Q+=De*l[Ke+1],W+=De*l[Ke+2],F+=De}}y[D]=G/F,y[D+1]=Q/F,y[D+2]=W/F,y[D+3]=X/U}return e}function nze(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return cze}}function oze(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function aze(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const s=e[r+3];if(s!==255&&s>0){const n=255/s;e[r]=e[r]*n,e[r+1]=e[r+1]*n,e[r+2]=e[r+2]*n}}}const lze={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},YQ=98,cze="png",uze={png:100,jpg:YQ,jpeg:YQ},Eht=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:X8e,encode:xce,encodeData:$ce,getFormatAndQuality:Tce,getMaximumResolutionScale:Mce,resampleHermite:sze,toDataUrl:Cce},Symbol.toStringTag,{value:"Module"})),kce={flipY:!0,premultipliedAlpha:!0};async function hze(t,e){const i=await Pce(t,e),{format:r,quality:s}=Tce(e==null?void 0:e.format,e==null?void 0:e.quality);return xce(i,{format:r,quality:s},kce)}async function dze(t,e){const i=await Pce(t,e);return $ce(i,kce)}function Pce(t,e){const i=Aze(e||{},fze(t.stage,t.size),t.size,t.padding),r=pze(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e==null?void 0:e.rotation)}function pze(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach((r=>{const s=e.find((n=>n.layer.id===r.id));s!=null&&s.container&&i.push(s.container)})),i}function fze(t,e){return Math.min(4,Mce(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function Aze(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let s=null;t.width!=null&&t.height!=null?s=[t.width,t.height]:t.width==null&&t.height!=null?s=[t.height,t.height]:t.width!=null&&t.height==null?s=[t.width,t.width]:t.width==null&&t.height==null&&(s=null);const n=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,c=t.area||{x:0,y:0,width:n,height:o};if(s){const h=n/o,y=s[0]/s[1];if(y>h){const g=c.width/y;c={x:c.x,y:Math.round(c.y+(c.height-g)/2),width:c.width,height:Math.round(g)}}else{const g=c.height*y;c={x:Math.round(c.x+(c.width-g)/2),y:c.y,width:Math.round(g),height:c.height}}}else s=[c.width,c.height];return s[0]>c.width?(a=Math.min(s[0]/c.width,e),l=s[0]/c.width/a):(a=1,l=s[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const mze=t=>t.includes("Brush");let Lce=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),mze(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}},yze=class{constructor(e){this.getUnmaskedRenderer=e}};function gze(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new yze((()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL))):null}let XQ;function vze(){return XQ??(XQ=_ze()),XQ}let bze=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function wze(t){var s;if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=((s=gze(i))==null?void 0:s.getUnmaskedRenderer())??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function _ze(){const t=new bze,e=wze(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Sze(t){const e=vze();return e.available?t==="3d"&&e.majorPerformanceCaveat?new te("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new te("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new te("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new te("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function xze(t){return t&&"nodeType"in t}function $ze(t){return t&&typeof t.render=="function"}const KQ={component:"esri-component"};let WA=class extends et{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(KQ.component),i&&i.classList.remove(KQ.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||xze(e)?(this._set("widget",null),uB(e)):($ze(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};u([A()],WA.prototype,"id",null),u([A()],WA.prototype,"node",null),u([yi("node")],WA.prototype,"castNode",null),u([A({readOnly:!0})],WA.prototype,"widget",void 0),WA=u([B("esri.views.ui.Component")],WA);const bC=WA,Rce="calcite-mode-",Oce="dark",Eze="light",Ize=/\W/g,Cze="--esri-calcite-mode-name";function Dce(){return getComputedStyle(document.body).getPropertyValue(Cze).replaceAll(Ize,"").toLowerCase()}function Nce(){return Dce()===Oce}function Tze(){const t=Dce();switch(t){case Oce:case Eze:return`${Rce}${t}`;default:return null}}function Mze(t){const e=Tze();e&&(kze(t),t.classList.add(e))}function kze(t){Array.from(t.classList).forEach((e=>{e.startsWith(Rce)&&t.classList.remove(e)}))}const yP=new Map;function Fce(){yP.clear()}function Pze(t){return yP.get(t)}function Lze(t,e){yP.set(t,e)}function mO(t){yP.delete(t)}function ov(...t){const e=io.acquire();for(let r=0;r<t.length;r++){const s=t[r],n=typeof s;if(n==="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(n==="object")for(const o in s)s[o]&&e.push(o)}const i=e.join(" ");return io.release(e),i}(()=>{const t=new Map,e=new ResizeObserver((r=>{var s;Fce();for(const n of r)(s=t.get(n.target))==null||s(n)})),i=(r,s,n)=>(t.set(r,s),e.observe(r,n),Ai((()=>{e.unobserve(r),t.delete(r)})));return(r,s,n)=>{let o=null;return D0([He((()=>typeof r=="function"?r():r),(a=>{o==null||o.remove(),a&&(o=i(a,s,n))}),eo),Ai((()=>o==null?void 0:o.remove()))])}})();function gP(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function kht(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Pht(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function Rze(t){return t==="Enter"||t===" "}async function Oze(t,e){await O0e(gx(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const Dze={left:0,top:0,bottom:0,right:0},zce={bottom:30,top:15,right:15,left:15},uh="esri-ui",yo={ui:uh,corner:`${uh}-corner`,innerContainer:`${uh}-inner-container`,manualContainer:`${uh}-manual-container`,cornerContainer:`${uh}-corner-container`,topLeft:`${uh}-top-left`,topRight:`${uh}-top-right`,bottomLeft:`${uh}-bottom-left`,bottomRight:`${uh}-bottom-right`};function Nze(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function vE(t){return t===0?"0":`${t}px`}function yO(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function gO(t,{top:e,bottom:i,left:r,right:s}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=s}let Tc=class extends dc.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Bo(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&gO(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&gO(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([He((()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]}),this._applyViewPadding,wr),He((()=>this.padding),this._applyUIPadding,wr),He((()=>[this.container,this._locale]),(([e,i])=>{e&&e.setAttribute("lang",i)}),wr),mk((e=>{this._locale=e}))])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(yo.ui),Mze(e),this._attachContainers(e)),i&&(i.classList.remove(yo.ui),gO(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){var n;const e=((n=this.view)==null?void 0:n.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:s}=i;return Math.max(e-r-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...zce,...e}}get width(){var n;const e=((n=this.view)==null?void 0:n.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:s}=i;return Math.max(e-r-s,0)}add(e,i){let r,s,n;if(Array.isArray(e))return void e.forEach((a=>this.add(a,i)));const o=yO(e);o&&({index:r,position:i,component:e,key:s}=o),i&&typeof i=="object"&&({index:r,key:s,position:i,internal:n}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),s,n)}remove(e,i){var s;if(!e)return;if(Array.isArray(e))return e.map((n=>this.remove(n,i)));const r=this._find(e);if(r){const n=this._componentMap.get(r);if(!n||n.key!==i)return;const o=this._components.indexOf(r),a=r.node.parentNode;return a==null||a.removeChild(r.node),this._componentMap.delete(r),(s=r.widget)==null||s.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach((l=>{const c=this._componentMap.get(l);c&&c.position===n.position&&c.index>n.index&&c.index--})),this._components.splice(o,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const n of e)this.empty(n,i);return}const r=this._positionNameToContainerLookup[e??"manual"],s=Array.prototype.slice.call(r.children).map((n=>this._findByNode(n))).filter((n=>{var o;return n==null?!1:!(((o=this._componentMap.get(n))==null?void 0:o.internal)??!1)||i.removeInternal}));for(const n of s)this.remove(n)}move(e,i){if(Array.isArray(e)&&e.forEach((o=>this.move(o,i))),!e)return;let r;const s=yO(e)||yO(i);if(s&&(r=s.index,i=s.position,e=s.component||e),i&&!this._isValidPosition(i))return;const n=this.remove(e);n&&this.add(n,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap((r=>this._getComponentsAtPosition(r,i))):this._getComponentsAtPosition(e,i):this._components.filter((r=>{var s;return i.includeInternal||!((s=this._componentMap.get(r))!=null&&s.internal)})).map((({widget:r,node:s})=>r??s))}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,s,n){e instanceof bC||(e=new bC({node:e}));const{widget:o}=e;o!=null&&o instanceof et&&o.addHandles(Ai((()=>{queueMicrotask((()=>this.remove(e)))})),this._removeWidgetHandleKey),this._components.some((a=>{var l,c;return((l=this._componentMap.get(a))==null?void 0:l.position)===i&&((c=this._componentMap.get(a))==null?void 0:c.index)===r}))&&this._components.forEach((a=>{const l=this._componentMap.get(a);l&&l.position===i&&l.index>=r&&l.index++})),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:s,position:i,internal:n,index:r})}_find(e){return e?e instanceof bC?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??Dze}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(yo.innerContainer,yo.cornerContainer);const i=document.createElement("div");i.classList.add(yo.innerContainer,yo.manualContainer);const r=document.createElement("div");r.classList.add(yo.topLeft,yo.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(yo.topRight,yo.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(yo.bottomLeft,yo.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add(yo.bottomRight,yo.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=gP();this._cornerNameToContainerLookup={"top-left":r,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":a?s:r,"top-trailing":a?r:s,"bottom-leading":a?o:n,"bottom-trailing":a?n:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var l,c;const i=e.position??"manual",{component:r,index:s}=e,n=this._positionNameToContainerLookup[i],o=s!=null&&s>-1;if(Nze(r.widget)&&r.widget.startup(),!o)return void n.appendChild(r.node);const a=Array.from(n.children);if(a.length!==0){for(const h of a){const y=this._findByNode(h);if(y&&s<(((l=this._componentMap.get(y))==null?void 0:l.index)??0))return void((c=h.parentNode)==null?void 0:c.insertBefore(r.node,h))}n.appendChild(r.node)}else n.appendChild(r.node)}_toPixelPosition(e){return{top:vE(e.top),left:vE(e.left),right:vE(e.right),bottom:vE(e.bottom)}}_findByComponent(e){return this._components.find((i=>i===e))??null}_findById(e){return this._components.find((({id:i})=>i===e))??null}_findByNode(e){return e?this._components.find((({node:i})=>i===e)):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map((s=>this._findByNode(s))).filter(os).filter((s=>{var n;return i.includeInternal||!((n=this._componentMap.get(s))!=null&&n.internal)})).map((({widget:s,node:n})=>s??n))}_getNumComponentsAtPosition(e){const i=this._positionNameToContainerLookup[e];return(i==null?void 0:i.children.length)??0}};u([A()],Tc.prototype,"_locale",void 0),u([A()],Tc.prototype,"container",null),u([A()],Tc.prototype,"height",null),u([A({value:zce})],Tc.prototype,"padding",null),u([yi("padding")],Tc.prototype,"castPadding",null),u([A()],Tc.prototype,"view",void 0),u([A()],Tc.prototype,"width",null),Tc=u([B("esri.views.ui.UI")],Tc);const Fze=Tc,zze={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},Bze={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},jze=t=>({...Bze,...t}),Uze=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},Vze=(t,e)=>t.find(e),eJ=(t,e,i=!1)=>{let r=t;return e.forEach(((s,n)=>{const o=r!=null&&r.children?Vze(r.children,(a=>a.domNode===s)):void 0;i&&!o&&n!==e.length-1||(r=o)})),r},Gze=t=>{let e;const i={...zze,...t},r=jze(i),s=r.performanceLogger;let n,o=!0,a=!1;const l=[],c=[],h=(g,_,S)=>{var M;let E;r.eventHandlerInterceptor=(P,D,F,U)=>function(G){let Q;s("domEvent",G);const W=Uze(G.currentTarget,E.domNode),X=W.some((de=>{var ye;return customElements.get((ye=de==null?void 0:de.tagName)==null?void 0:ye.toLowerCase())}));if(G.eventPhase===Event.CAPTURING_PHASE||!X)W.reverse(),Q=eJ(E.getLastRender(),W);else{const de=G.composedPath(),ye=de.slice(de.indexOf(G.currentTarget),de.indexOf(E.domNode)).reverse();Q=eJ(E.getLastRender(),ye,!0)}let K;return Q&&(K=i.handleInterceptedEvent(e,Q,this,G)),s("domEventProcessed",G),K},(M=i.postProcessProjectionOptions)==null||M.call(i,r);const C=S();E=g(_,C,r),r.eventHandlerInterceptor=void 0,l.push(E),c.push(S),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(E,C)};let y=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let g=0;g<l.length;g++){const _=c[g]();s("rendered",void 0);try{l[g].update(_)}catch(S){console.error(S)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(y=i.modifyDoRenderImplementation(y,l,c)),e={renderNow:y,scheduleRender:()=>{n||a||(n=requestAnimationFrame(y))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(g,_)=>{h(pf.append,g,_)},insertBefore:(g,_)=>{h(pf.insertBefore,g,_)},merge:(g,_)=>{h(pf.merge,g,_)},replace:(g,_)=>{h(pf.replace,g,_)},detach:g=>{for(let _=0;_<c.length;_++)if(c[_]===g)return c.splice(_,1),l.splice(_,1)[0];throw new Error("renderFunction was not found")}},e},Cr=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},b6=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},kB=Symbol.for("controller"),Hze=t=>typeof t=="object"&&t!==null&&(kB in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),qze=t=>typeof(t==null?void 0:t.then)=="function";let q2;const av=t=>{q2!==t&&(q2=t,queueMicrotask(()=>q2===t?q2=void 0:0))},vP=t=>q2;let QA=[];const Bce=t=>{if(t===void 0){QA=[];return}const e=QA.indexOf(t);QA=e===-1?[...QA,t]:QA.slice(0,e+1),queueMicrotask(()=>QA=[])},jce=()=>QA;let lv;const Wze=t=>{lv!==t&&(lv=t,queueMicrotask(()=>lv===t?lv=void 0:0))},Qze=()=>{const t=lv;return lv=void 0,t},Jze=async(t,e)=>{const i=PB(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(s=>e(s,r))}return i.exports},Zze=async t=>{const e=PB(t);return await e.ready,e},PB=t=>{const i=vP().manager.X(t);if(i!==void 0)return i;if(Hze(t))return t;const r=Qze();if(r!==void 0)return r};let w6=!1;const Yze=t=>{w6=!0;try{return t()}finally{w6=!1}};class FS{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const Xze=(t,e)=>{const i=e/Kze;let r=0;const s=setInterval(()=>{r+=i,r>=e&&(clearInterval(s),t())},i);return s},Kze=4,e7e=(t,e,i)=>{const r=Object.keys(t),s=r.length;ff===void 0&&queueMicrotask(bP),ff??(ff=new Map);let n=ff.get(t);return n===void 0&&(n={callbacks:[],keyCount:s},ff.set(t,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(r)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const a=c=>Cr(e,null,c),l=o[s];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let ff;const bP=()=>{ff==null||ff.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),ff=void 0},t7e=(t,e,i)=>{const r=t.manager;return r.V!==Ge&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((s,n)=>Cr(e,void 0,i===n?s:void 0)),i},Uce=(t=[vP(),...jce()],e,i)=>{const r=Array.isArray(t)?t:[t];let s=r.length+1;const n=o=>{s-=1,o!==void 0&&(s=Math.min(s,0)),s===0&&e(o)};r.forEach(o=>e7e(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){t7e(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},i7e=(t="",e={},i=vP())=>{const r={emit:s=>{t===""&&bP();const n=new CustomEvent(t,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(n),n}};return t===""&&Uce(void 0,s=>t=s.key,r),r},Ye=i7e.bind(null,"");var Vce;Vce=kB;var mb,yb,Vm,gb,vb,bb,wb,_b,tf,Gm,Mo,Wc,cd,Sb,wC;class LB{constructor(e){at(this,Sb);at(this,mb);at(this,yb);at(this,Vm);at(this,gb);at(this,vb);at(this,bb);at(this,wb);at(this,_b);at(this,tf);at(this,Gm);at(this,Mo);at(this,Wc);at(this,cd);Je(this,mb,[]),Je(this,yb,[]),Je(this,Vm,[]),Je(this,gb,[]),Je(this,vb,[]),Je(this,bb,[]),Je(this,wb,[]),Je(this,_b,[]),Je(this,tf,[]),Je(this,Gm,!1),this.P=new FS,this.connectedCalled=!1,this.loadedCalled=!1,this[Vce]=!0,Je(this,cd,[]);const i=this,r=e??vP();Je(i,Mo,r),i.ready=i.P.promise,Je(i,Wc,iJ(i)),i.component=r,ue(i,Mo).addController(i),ue(i,Mo).manager===void 0||(Bce(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=ue(this,Mo);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),ue(e,Gm)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return ue(this,Wc)}set exports(e){const i=ue(this,Wc);i!==e&&(Je(this,Wc,e),ue(this,cd).forEach(Cr),this.connectedCalled&&this.O!==!1&&ue(this,Mo).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){Je(this,Wc,i?iJ(e):e),ue(this,cd).forEach(Cr)}watchExports(e){const i=()=>e(ue(this,Wc));return ue(this,cd).push(i),()=>void ue(this,cd).splice(ue(this,cd).indexOf(i),1)}get use(){return av(ue(this,Mo)),Jze}get useRef(){return av(ue(this,Mo)),Zze}get useRefSync(){return av(ue(this,Mo)),PB}controllerRemoved(){ue(this,Mo).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){ue(this,mb).push(e)}onDisconnected(e){ue(this,yb).push(e)}onLoad(e){ue(this,Vm).push(e)}onLoaded(e){ue(this,gb).push(e)}onUpdate(e){ue(this,vb).push(e)}onUpdated(e){ue(this,bb).push(e)}onDestroy(e){ue(this,wb).push(e)}onLifecycle(e){ue(this,_b).push(e),this.connectedCalled&&ue(this,Mo).el.isConnected&&us(this,Sb,wC).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&Cr(e.hostConnected,e),ue(e,mb).forEach(Cr),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Cr(e.hostDisconnected,e),ue(e,yb).forEach(Cr),ue(e,tf).forEach(Cr),Je(e,tf,[])}async triggerLoad(){if(ue(this,Gm))return;Je(this,Gm,!0);const e=this;e.hostLoad&&await b6(e.hostLoad,e),ue(this,Vm).length>0&&await Promise.allSettled(ue(this,Vm).map(b6)),this.P.resolve(ue(this,Wc))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Cr(this.hostLoaded,this),ue(this,gb).forEach(Cr),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Cr(this.hostUpdate,this,e),ue(this,vb).forEach(tJ,e)}triggerUpdated(e){this.hostUpdated&&Cr(this.hostUpdated,this,e),ue(this,bb).forEach(tJ,e)}triggerDestroy(){this.hostDestroy&&Cr(this.hostDestroy,this),ue(this,wb).forEach(Cr)}triggerLifecycle(){this.hostLifecycle&&us(this,Sb,wC).call(this,()=>this.hostLifecycle()),ue(this,_b).forEach(us(this,Sb,wC),this)}}mb=new WeakMap,yb=new WeakMap,Vm=new WeakMap,gb=new WeakMap,vb=new WeakMap,bb=new WeakMap,wb=new WeakMap,_b=new WeakMap,tf=new WeakMap,Gm=new WeakMap,Mo=new WeakMap,Wc=new WeakMap,cd=new WeakMap,Sb=new WeakSet,wC=function(e){av(ue(this,Mo));const i=Cr(e);(Array.isArray(i)?i:[i]).forEach(s=>{typeof s=="function"?ue(this,tf).push(s):typeof s=="object"&&typeof s.remove=="function"&&ue(this,tf).push(s.remove)})};function tJ(t){Cr(t,void 0,this)}const r7e=LB,iJ=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,s,n){if(!((s==="exports"||s==="_exports")&&s in r&&r[s]===i)&&(s in r||s in Promise.prototype||typeof s=="symbol"))return typeof r=="function"?r[s]:Reflect.get(r,s,n)}},i=new Proxy(t,e);return i},s7e=t=>t.replace(n7e,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),n7e=/[A-Z]+(?![a-z])|[A-Z]/gu,o7e=1,a7e=2,l7e=4,c7e=8,u7e=16,h7e=32,d7e=64,Gce=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const s=e;return(r=s.manager)!=null&&r.loadedCalled||(s.J??s._offspring).push(t),(s.I??s._postLoad).promise}return!1},rJ={};function Hce(){}const _C=Object.defineProperty,p7e=globalThis.HTMLElement??Hce;var ko,ud,xb,sx,_6;const Vj=class Vj extends p7e{constructor(){var s,n;super();at(this,sx);at(this,ko);at(this,ud);at(this,xb);Je(this,ud,{}),Je(this,xb,[]),this.I=new FS,this.H=new FS,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(s=r.C)==null||s.forEach(o=>{Object.hasOwn(i,o)&&(ue(i,ud)[o]=i[o],delete i[o])}),r.A?us(n=i,sx,_6).call(n,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,us(l=i,sx,_6).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])_C(this.prototype,i,{configurable:!0,enumerable:!0,get(){return ue(this,ud)[i]},set(r){ue(this,ud)[i]=r}});for(const i of this.E??[])_C(this.prototype,i,{async value(...r){return ue(this,ko)||await this.H.promise,await ue(this,ko)[i](...r)},configurable:!0});for(const i of this.D??[])_C(this.prototype,i,{value(...r){return ue(this,ko)[i](...r)},configurable:!0})}get manager(){var i;return(i=ue(this,ko))==null?void 0:i.manager}attributeChangedCallback(i,r,s){var n;(n=ue(this,ko))==null||n.attributeChangedCallback(i,r,s),ue(this,ko)||ue(this,xb).push(i)}connectedCallback(){var i,r;ue(this,ko)?(r=(i=ue(this,ko)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=Gce(this))}disconnectedCallback(){var i,r;(r=(i=ue(this,ko))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=ue(this,ko))==null||i.requestUpdate()}};ko=new WeakMap,ud=new WeakMap,xb=new WeakMap,sx=new WeakSet,_6=function(i){var g;const r=this.constructor,s=r.L,n=ue(this,ud),o=Object.values(i).find(_=>_.L===s),a=`${s}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);A7e(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,Je(this,ko,h),Je(this,ud,h),ue(this,xb).forEach(_=>h.attributeChangedCallback(_,null,this.getAttribute(_))),Object.entries(n).forEach(f7e,h);const y=this.isConnected;(y||this.G)&&((g=h.connectedCallback)==null||g.call(h),y||h.disconnectedCallback())},Vj.lumina=!0;let sJ=Vj;function f7e([t,e]){this[t]=e}const A7e=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(s,n){i.setAttribute.call(this.el,s,n)},e.removeAttribute=function(s){i.removeAttribute.call(this.el,s)},_C(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const V_=(t,e)=>{var r;const i=t._$AN;if(i===void 0)return!1;for(const s of i)(r=s._$AO)==null||r.call(s,e,!1),V_(s,e);return!0},TM=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while((i==null?void 0:i.size)===0)},qce=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),g7e(e)}};function m7e(t){this._$AN!==void 0?(TM(this),this._$AM=t,qce(this)):this._$AM=t}function y7e(t,e=!1,i=0){const r=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(r))for(let n=i;n<r.length;n++)V_(r[n],!1),TM(r[n]);else r!=null&&(V_(r,!1),TM(r));else V_(this,t)}const g7e=t=>{t.type==Yc.CHILD&&(t._$AP??(t._$AP=y7e),t._$AQ??(t._$AQ=m7e))};let v7e=class extends R1{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),qce(this),this.isConnected=e._$AU}_$AO(e,i=!0){var r,s;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(s=this.disconnected)==null||s.call(this)),i&&(V_(this,e),TM(this))}setValue(e){if(rae(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Rn=()=>new b7e;let b7e=class{};const vO=new WeakMap,ai=L1(class extends v7e{render(t){return Ge}update(t,[e]){var r;const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=(r=t.options)==null?void 0:r.host,this.rt(this.ct=t.element)),Ge}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=vO.get(e);i===void 0&&(i=new WeakMap,vO.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){var t,e;return typeof this.G=="function"?(t=vO.get(this.ht??globalThis))==null?void 0:t.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var hd,Ul,$b;class w7e extends r7e{constructor(i){super(i);at(this,hd);at(this,Ul);at(this,$b);this.destroyed=!1,this.R=!1,this.V=Ge,this.T=[],Je(this,$b,new WeakMap),Je(this,Ul,i),this.exports=void 0,this.hasDestroy=S6 in i&&typeof i.destroy=="function",$d.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${S6} prop.`)}ue(this,hd)!==void 0&&clearTimeout(ue(this,hd)),bP();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():Cr(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():Cr(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):Cr(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):Cr(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),av(i)}async destroy(){if(!this.destroyed){ue(this,Ul).el.isConnected&&(this.hasDestroy=!1,ue(this,Ul).el.remove()),Je(this,hd,void 0),this.destroyed=!0;for(const i of ue(this,Ul).M)"triggerDestroy"in i?i.triggerDestroy():Cr(i.hostDestroy,i);ue(this,Ul).M.splice(0)}}U(){ue(this,hd)!==void 0&&clearTimeout(ue(this,hd)),!ue(this,Ul).el.isConnected&&!ue(this,Ul).autoDestroyDisabled&&Je(this,hd,Xze(()=>void ue(this,Ul).destroy(),_7e))}S(i,r){const s=this.T;this.V=Ge,this.T=[],s.forEach(n=>n(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&ue(this,$b).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return ue(this,$b).get(i)}}hd=new WeakMap,Ul=new WeakMap,$b=new WeakMap;let _7e=1e3;const S6="autoDestroyDisabled";var Hm,nx,ox,qm,Qc,u1,Wce,Qce;const tS=class tS extends $d{constructor(){super();at(this,u1);at(this,Hm);at(this,nx);at(this,ox);at(this,qm);at(this,Qc);this.M=[],this.manager=new w7e(this);const i=this,r=i.constructor,s=r.N,n=r.K.o,o=tS.prototype.shouldUpdate;Je(i,qm,(s==null?void 0:s.H)??new FS),i.I=(s==null?void 0:s.I)??new FS,i.J=(s==null?void 0:s.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=s??i,Je(i,ox,i.enableUpdating),i.enableUpdating=Hce,i.shouldUpdate!==o&&(Je(i,nx,i.shouldUpdate),i.shouldUpdate=o),n&&(Je(i,Hm,new Map),r.elementProperties.forEach((a,l)=>ue(i,Hm).set(l,n())))}static finalizeStyles(i){var n;const r=super.finalizeStyles(i),s=this.shadowRootOptions===rJ;return((n=this.K)==null?void 0:n.commonStyles)===void 0||s?r:[this.K.commonStyles,...r]}static createProperty(i,r){const s=typeof r=="number"?r:Array.isArray(r)?r[0]:0,n=Array.isArray(r)?r[1]:void 0,o=(n==null?void 0:n.hasChanged)??rP,a={attribute:s&o7e&&typeof i=="string"?s7e(i):!1,reflect:!!(s&a7e),type:s&l7e?Boolean:s&c7e?Number:void 0,state:!!(s&u7e),readOnly:!!(s&h7e),noAccessor:!!(s&d7e),c:!1,...n,hasChanged(l,c){const h=o(l,c);return a.c=h,h}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,s){const n=this.K,o=super.getPropertyDescriptor(i,r,s);return s.d=o,{...o,get(){var a,l;return(a=n.t)==null||a.call(n,ue(this,Hm).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,h;const l=this.manager;if(s.readOnly&&!w6&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),s.c&&((h=(c=ue(this,Hm))==null?void 0:c.get(i))==null||h.notify()),l.T.length>0&&(bP(),l==null||l.S(i,a))}}}connectedCallback(){var s,n;if(this.el.hasAttribute("defer-hydration"))return;const i=(n=(s=this.constructor.K).c)==null?void 0:n.call(s,()=>this.requestUpdate());Je(this,Qc,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>us(this,u1,Qce).call(this).catch(o=>{ue(this,qm).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=ue(this,Qc))==null||i.destroy(),Je(this,Qc,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,s=r.shadowRootOptions,o=i??(s===rJ?this.el:this.el.attachShadow(s));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=ue(this,nx))==null?void 0:r.call(this,i))??!0}update(i){ue(this,Qc)?us(this,u1,Wce).call(this,i):super.update(i)}listen(i,r,s){const n=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,n,s),()=>this.el.removeEventListener(i,n,s)))}listenOn(i,r,s,n){const o=(s==null?void 0:s.bind(this))??s;this.manager.onLifecycle(()=>(i.addEventListener(r,o,n),()=>i.removeEventListener(r,o,n)))}async componentOnReady(){return await ue(this,qm).promise,this}addController(i){var r;this.M.push(i),!(kB in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}};Hm=new WeakMap,nx=new WeakMap,ox=new WeakMap,qm=new WeakMap,Qc=new WeakMap,u1=new WeakSet,Wce=function(i){try{ue(this,Qc).clear(),this.constructor.K.r(ue(this,Qc),()=>NL(tS.prototype,this,"update").call(this,i))}catch(r){throw ue(this,Qc).clear(),r}},Qce=async function(){var n,o;const i=this.el.G??Gce(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(b6(a.hostLoad,a));await Promise.all(r),await((n=this.load)==null?void 0:n.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(S6)&&this.manager.U()),ue(this,ox).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const s=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});s.length&&await Promise.allSettled(s.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():Cr(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),ue(this,qm).resolve()},tS.lumina=!0;let rr=tS;const S7e=t=>{let e;const i=s=>{var n;e=new URL(s,((n=globalThis.location)==null?void 0:n.href)||void 0).href},r={...t,getAssetPath(s){var o;const n=new URL(s,e);return n.origin!==((o=globalThis.location)==null?void 0:o.origin)?n.href:n.pathname},setAssetPath:i,customElement(s,n){n.K=r,n.L=s,customElements.get(s)||customElements.define(s,n)}};return i(t.defaultAssetPath),r},$e=t=>typeof t=="object"&&t!=null?tae(t):t,Jce=t=>typeof t=="object"&&t!=null?eRe(t):t,r0=Ge;function wP(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const L0={toAttribute:t=>t===!0?"":t===!1?null:t},x7e="calcite-mode-auto",$7e="calcite-mode-dark",Zce={rtl:"calcite--rtl"},RB={filter:250,nextTick:0,resize:150,reposition:100},Dht=25;function nJ(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains($7e)||t.contains(x7e)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&r(o),n=o};let n=i();r(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Cd=globalThis.calciteConfig,E7e=(Cd==null?void 0:Cd.focusTrapStack)||[],I7e=(Cd==null?void 0:Cd.logLevel)||"info",oJ="3.3.3",C7e="2025-10-08",T7e="7391af08e";function M7e(){if(Cd&&Cd.version)return;console.info(`Using Calcite Components ${oJ} [Date: ${C7e}, Revision: ${T7e}]`);const t=Cd||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:oJ,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?nJ():document.addEventListener("DOMContentLoaded",nJ,{once:!0});queueMicrotask(M7e);const k7e=S7e({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:Sr,getAssetPath:Yce,setAssetPath:P7e}=k7e;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */let Xce=!1;const L7e=t=>{Xce=!0,P7e(t)};let Kce;function R7e(){Xce||L7e(fa(er(Kce)))}function _P(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}Kce="components/assets";const eue=Symbol("widget"),tue=Symbol("widget-test-data"),O7e=[],D7e={},MM=new WeakMap;function iue(t,e){let i=e.children;if(i!=null&&i.length)for(let s=0;s<i.length;++s)i[s]=iue(t,i[s]);else i=O7e;const r=e.vnodeSelector;if(kM(r)){const s=e.properties||D7e,n=s.key||r,o={key:n,afterCreate:N7e,afterUpdate:F7e,afterRemoved:rue,parentWidget:t,widgetConstructor:r,widgetProperties:{...s,key:n,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function N7e(t,e,i,{parentWidget:r,widgetConstructor:s,widgetProperties:n}){var a;const o=new s(n);o.container=t,MM.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),r.addHandles(Ai((()=>rue(t)))),queueMicrotask((()=>{o[tue].projector.renderNow()}))}function F7e(t,e,i,{widgetProperties:r}){var n;const s=MM.get(t);s&&(s.set(r),(n=s.afterUpdate)==null||n.call(s,s,t))}function rue(t){var i;const e=MM.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),MM.delete(t))}function kM(t){return typeof t=="function"&&t[eue]}const aJ=new Set;function z7e(t){aJ.add(t),t.finally((()=>aJ.delete(t)))}function B7e(t){return Ai()}var lJ;let j7e=0;function sue(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?sue(t[r],e[r]):t[r]=e[r]);return t}const U7e=Gze({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,s,n,o)=>{const a=e==null?void 0:e(r,s,n,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in n)||l){const c=r[2].toLowerCase()+r.slice(3),h=_=>a==null?void 0:a.call(n,_);n.addEventListener(c,h,l);const y=()=>n.removeEventListener(c,h,l),g=o.afterRemoved;o.afterRemoved=_=>{g==null||g(_),y()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:s,type:n}=r,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,l&&a in l))&&(Fce(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let bO=!1;var d0;let zs=(d0=class extends Mu.EsriPromiseMixin(dc.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=U7e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=vx((async()=>{var l;if((l=this._messageBundleProps)!=null&&l.length){const c=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:h,propertyName:y})=>{if(this.destroyed)return;let g=await Dk(h);this.uiStrings&&Object.keys(this.uiStrings)&&(g=sue(ie(g),this.uiStrings)),this[y]=g})));if(this.destroyed)return;for(const h of c)h.status==="rejected"&&be.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()})),this.addHandles(B7e()),R7e();const r="esri-widget-uid-"+T1(),s=this.render.bind(this);this._trackingTarget=new wx((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const n=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var y,g;if(!this._readyForTrueRender||this.destroyed)return null;const l=s()??n(),c=l.properties??(l.properties={});if(c.key??(c.key=r),kM(l.vnodeSelector)){if(!this.visible)return n()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(y=c.styles).display??(y.display="");let h=0;return(g=l.children)==null||g.forEach((_=>{var S;kM(_.vnodeSelector)||(_.properties??(_.properties={}),(S=_.properties).key??(S.key=`${this.id}--${h++}`))})),iue(this,l)};this.render=()=>{if(bO)return o();let l=Pze(this)??null;if(l)return l;this._trackingTarget.clear(),bO=!0;try{l=ju(this._trackingTarget,o)}catch(c){throw be.getLogger(this).error(c),c}finally{bO=!1}return l&&Lze(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),z7e(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then((()=>{})).catch(iU):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(tr(this._trackingTarget),tr(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,mO(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return uB(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+j7e++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(lJ=eue,tue)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(mO(this),this._projector.scheduleRender())}classes(...e){return ov.apply(this,e)}renderNow(){mO(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(He((()=>this.viewModel),((r,s)=>{s&&this.removeHandles("delegated-events"),r&&ak(r)&&this.addHandles(this._delegatedEventNames.map((n=>p1(r,n,(o=>{this.emit(n,o)})))),"delegated-events")}),eo)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(iU),this.scheduleRender()};this.addHandles([mk(e),He((()=>this.uiStrings),e)]),this.addHandles(hn((()=>this.container),(r=>{this.destroyed||this._attach(r)}),{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}},d0[lJ]=!0,d0.vnodeSelector="div",d0);u([A()],zs.prototype,"_readyForTrueRender",void 0),u([A({value:null})],zs.prototype,"container",null),u([yi("container")],zs.prototype,"castContainer",null),u([A()],zs.prototype,"icon",null),u([A()],zs.prototype,"id",null),u([A()],zs.prototype,"label",null),u([A()],zs.prototype,"renderable",null),u([A()],zs.prototype,"uiStrings",void 0),u([A()],zs.prototype,"viewModel",void 0),u([A({value:!0})],zs.prototype,"visible",null),u([A()],zs.prototype,"key",void 0),u([A()],zs.prototype,"children",void 0),u([A()],zs.prototype,"afterCreate",void 0),u([A()],zs.prototype,"afterUpdate",void 0),u([A()],zs.prototype,"afterRemoved",void 0),zs=u([B("esri.widgets.Widget")],zs);const dn=zs;var cJ,uJ,hJ,dJ,pJ,fJ,AJ,mJ,yJ,gJ,vJ,bJ,wJ,_J,SJ;(function(t){t.U8="U8",t.I8="I8",t.U16="U16",t.I16="I16",t.U32="U32",t.I32="I32",t.F32="F32",t.F64="F64",t.Utf8String="Utf8String",t.NotSet="NotSet"})(cJ||(cJ={})),(function(t){t.Png="Png",t.Jpeg="Jpeg",t.Dds="Dds",t.Raw="Raw",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.Basis="Basis",t.Etc1="Etc1",t.Etc2="Etc2",t.Astc="Astc",t.Pvrtc="Pvrtc",t.NotSet="NotSet"})(uJ||(uJ={})),(function(t){t.Position="Position",t.Normal="Normal",t.TexCoord="TexCoord",t.Color="Color",t.Tangent="Tangent",t.FeatureIndex="FeatureIndex",t.UvRegion="UvRegion",t.FeatureVariable="FeatureVariable",t.NotSet="NotSet"})(hJ||(hJ={})),(function(t){t.Opaque="Opaque",t.Mask="Mask",t.Blend="Blend"})(dJ||(dJ={})),(function(t){t.None="None",t.Mask="Mask",t.Alpha="Alpha",t.PreMultAlpha="PreMultAlpha",t.NotSet="NotSet"})(pJ||(pJ={})),(function(t){t.Points="Points",t.Lines="Lines",t.LineStrip="LineStrip",t.Triangles="Triangles",t.TriangleStrip="TriangleStrip",t.NotSet="NotSet"})(fJ||(fJ={})),(function(t){t.None="None",t.WrapXBit="WrapXBit",t.WrapYBit="WrapYBit",t.WrapXy="WrapXy",t.NotSet="NotSet"})(AJ||(AJ={})),(function(t){t.Linear="Linear",t.Nearest="Nearest",t.NotSet="NotSet"})(mJ||(mJ={})),(function(t){t.Linear="Linear",t.Nearest="Nearest",t.NearestMipmapNearest="NearestMipmapNearest",t.LinearMipmapNearest="LinearMipmapNearest",t.NearestMipmapLinear="NearestMipmapLinear",t.LinearMipmapLinear="LinearMipmapLinear",t.NotSet="NotSet"})(yJ||(yJ={})),(function(t){t.FeatureId="FeatureId",t.GlobalUid="GlobalUid",t.UnspecifiedDateTime="UnspecifiedDateTime",t.EcmaIso8601DateTime="EcmaIso8601DateTime",t.EcmaIso8601DateOnly="EcmaIso8601DateOnly",t.TimeOnly="TimeOnly",t.TimeStamp="TimeStamp",t.ColorRgb="ColorRgb",t.ColorRgba="ColorRgba",t.Unrecognized="Unrecognized",t.NotSet="NotSet"})(gJ||(gJ={})),(function(t){t.Texture="Texture",t.VertexAtrb="VertexAtrb",t.Implicit="Implicit",t.NotSet="NotSet"})(vJ||(vJ={})),(function(t){t.Front="Front",t.Back="Back",t.None="None",t.NotSet="NotSet"})(bJ||(bJ={})),(function(t){t.Pbr="Pbr",t.Unlit="Unlit"})(wJ||(wJ={})),(function(t){t.Rgb8="Rgb8",t.Rgba8="Rgba8",t.R8="R8",t.Bgr8="Bgr8",t.Bgra8="Bgra8",t.Rg8="Rg8",t.Ga8="Ga8",t.Etc1="Etc1",t.Etc2="Etc2",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.NotSet="NotSet"})(_J||(_J={})),(function(t){t[t.Succeeded=0]="Succeeded",t[t.Failed=1]="Failed",t[t.MissingInputs=2]="MissingInputs"})(SJ||(SJ={}));const V7e=new Map;function G7e(t){return V7e.get(t)}function xJ(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function H7e(t,e){return t.length!==e.length||t.some(((i,r)=>i.text!==e[r].text))}function Pw(t,e,i){!i||!e||t.find((r=>r.layerView===e&&r.text===i))||t.push({text:i,layerView:e})}function q7e(t){return t.type==="bing-maps"}const hh=[];let yg=class extends et{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new qe,this.view=null,this._allLayerViewsChange=i=>{var s;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(s=this.view)==null?void 0:s.allLayerViews;r&&(this.addHandles(r.map((n=>He((()=>{var o;return[n.suspended,(o=n.layer)==null?void 0:o.attributionVisible]}),(()=>this._updateAttributionItems())))).toArray(),"suspension"),r.forEach((n=>{n.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(n.on("visible-geometry-changed",(()=>this._updateAttributionItems())),"visible-geometry-changed")}))),i!=null&&i.removed&&i.removed.forEach((n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)})),this._updateAttributionItems()},this.addHandles([ll((()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews}),"change",(i=>this._allLayerViewsChange(i)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),hn((()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0}),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;if(hh.length=0,!e||!i)return void this._clear();i.forEach((s=>{var a,l;if(s.suspended||!((a=s.layer)!=null&&a.attributionVisible))return;const n=s.layer;if(xJ(n,"user"))return void Pw(hh,s,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(s)){const c=this._fetchedAttributionData.get(s);return void(c?Pw(hh,s,this._getDynamicAttribution(c,e,n)):xJ(n)&&Pw(hh,s,n.copyright))}return void this._fetchAttributionData(s)}const o="portalItem"in n?(l=n.portalItem)==null?void 0:l.accessInformation:void 0;Pw(hh,s,o||n.copyright)}));const r=i.find((s=>{var n;return((n=s.layer)==null?void 0:n.type)==="integrated-mesh-3dtiles"}));if(this.view&&r){const s=G7e(this.view);if(s){const n=s.getAttributionText();for(let o=0;o<n.length;++o)Pw(hh,r,n[o])}}H7e(this.items,hh)&&(this.items.removeAll(),this.items.addMany(hh)),hh.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await Gk(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,q7e(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,s={};if(!r)return s;for(let n=0;n<r.length;n++){const o=r[n],a=o.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,h=l.zoomMin-(i&&l.zoomMin?1:0),y=l.zoomMax-(i&&l.zoomMax?1:0),g=new Rt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:We.WGS84}),_={extent:Sd(g),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:n};for(let S=h;S<=y;S++)s[S]??(s[S]=[]),s[S].push(_)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,i,r){var h;const{extent:s,scale:n}=i;let o=((h=r.tileInfo)==null?void 0:h.scaleToZoom(n))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!s||o==null||o<=-1)return"";const a=e[o],l=$k(s.center.clone().normalize(),We.WebMercator),c=new Set;return a?a.filter((y=>{const g=y.id,_=!c.has(g)&&l&&y.extent&&Cx(y.extent,l);return _&&c.add(g),_})).sort(((y,g)=>g.score-y.score||y.objectId-g.objectId)).map((y=>y.attribution)).join(", "):""}};u([A({readOnly:!0,type:qe})],yg.prototype,"items",void 0),u([A({readOnly:!0})],yg.prototype,"state",null),u([A()],yg.prototype,"view",void 0),yg=u([B("esri.widgets.Attribution.AttributionViewModel")],yg);const nue=yg,Vo={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function W7e(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:J7e(t[e])}}}function Q7e(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function J7e(t){return function(e,...i){Q7e(e)?Rze(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Uf(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var Z7e=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},oue=function(t,e){for(var i=0,r=t.length;i<r;i++){var s=t[i];Array.isArray(s)?oue(s,e):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=Z7e(s)),e.push(s))}},Y7e=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var s=[];return oue(i,s),{vnodeSelector:t,properties:e||void 0,children:s,text:void 0,domNode:null}};function se(t,e,...i){return typeof t!="function"||kM(t)?Y7e(t,e??null,...i):t(e,...i)}function Fht(...t){return t}const xy="esri-attribution",$y={base:xy,poweredBy:`${xy}__powered-by`,sources:`${xy}__sources`,open:`${xy}--open`,sourcesOpen:`${xy}__sources--open`,link:`${xy}__link`};let Qn=class extends dn{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((r=>r.forEach((({target:s})=>this._checkSourceTextOverflow(s))))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new nue}initialize(){this.addHandles(ll((()=>{var e;return(e=this.viewModel)==null?void 0:e.items}),"change",(()=>this.scheduleRender())))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,i)=>(e.includes(i.text)||e.push(i.text),e)),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[$y.open]:this._isOpen};return se("div",{bind:this,class:this.classes($y.base,Vo.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return se("div",{class:$y.poweredBy},"Powered by"," ",se("a",{class:$y.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:s}=this,n={[$y.sourcesOpen]:e,[Vo.interactive]:i};return se("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes($y.sources,n),innerHTML:s,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:s,scrollWidth:n}=e,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([A()],Qn.prototype,"_isOpen",void 0),u([A()],Qn.prototype,"_isInteractive",null),u([A()],Qn.prototype,"_attributionTextOverflowed",void 0),u([A()],Qn.prototype,"_prevSourceNodeHeight",void 0),u([A({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Qn.prototype,"attributionText",null),u([A()],Qn.prototype,"icon",null),u([A()],Qn.prototype,"itemDelimiter",void 0),u([A()],Qn.prototype,"label",null),u([A(),Uf("esri/widgets/Attribution/t9n/Attribution")],Qn.prototype,"messages",void 0),u([A()],Qn.prototype,"view",null),u([A({type:nue})],Qn.prototype,"viewModel",void 0),u([W7e()],Qn.prototype,"_toggleState",null),Qn=u([B("esri.widgets.Attribution")],Qn);const X7e=Qn;function K7e(){const t=ce("mapview-essential-goto-duration");return t==null?t:t}function eBe(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}function tBe(t,e,i){return t.goTo(e,i)}const aue=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return fx(r),this.goToOverride?this.goToOverride(r,i):tBe(r,i.target,i.options)}};return u([A()],e.prototype,"goToOverride",void 0),u([A()],e.prototype,"view",void 0),e=u([B("esri.widgets.support.GoTo")],e),e};let JA=class extends aue(et){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(wr)}destroy(){this.view=null}get canShowNorth(){return eBe(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var e,i;(e=this.view)!=null&&e.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:K7e()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?He((()=>e==null?void 0:e.rotation),this._updateForRotation,wr):He((()=>e==null?void 0:e.camera),this._updateForCamera,wr))}_watchForView(e){this.addHandles(He((()=>this.view),this._updateRotationWatcher,e))}};u([A({readOnly:!0})],JA.prototype,"canShowNorth",null),u([A({readOnly:!0})],JA.prototype,"orientation",void 0),u([A({readOnly:!0})],JA.prototype,"state",null),u([A()],JA.prototype,"view",void 0),JA=u([B("esri.widgets.Compass.CompassViewModel")],JA);const lue=JA,$J="esri-compass",EJ={base:$J,iconContainer:`${$J}__icon-container`};let Lh=class extends dn{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new lue,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return _P({button:()=>Ie(()=>Promise.resolve().then(()=>QB),void 0,import.meta.url),icon:()=>Ie(()=>Promise.resolve().then(()=>V9e),void 0,import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return se("div",{class:this.classes(EJ.base,Vo.widget)},se("calcite-button",{class:Vo.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},se("div",{"aria-hidden":"true",class:EJ.iconContainer,title:r.reset},se("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};u([A()],Lh.prototype,"goToOverride",null),u([A()],Lh.prototype,"icon",null),u([A()],Lh.prototype,"label",null),u([A(),Uf("esri/widgets/Compass/t9n/Compass")],Lh.prototype,"messages",void 0),u([A()],Lh.prototype,"view",null),u([A({type:lue})],Lh.prototype,"viewModel",void 0),Lh=u([B("esri.widgets.Compass")],Lh);const iBe=Lh,IJ="esri-navigation-toggle",CJ={base:IJ,isLayoutHorizontal:`${IJ}--horizontal`};let gg=class extends et{constructor(e){super(e),this._navigationMode="pan",this.view=null,e!=null&&e.isDefaultViewModel||kme(be.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(hn((()=>{var e,i;return(i=(e=this.view)==null?void 0:e.navigation)==null?void 0:i.actionMap}),(()=>this._updateNavigationActionMap())))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,s;const e=(s=(r=this.view)==null?void 0:r.navigation)==null?void 0:s.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};u([A({readOnly:!0})],gg.prototype,"state",null),u([A()],gg.prototype,"_navigationMode",void 0),u([A()],gg.prototype,"view",void 0),gg=u([B("esri.widgets.NavigationToggle.NavigationToggleViewModel")],gg);const cue=gg;let Rh=class extends dn{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new cue({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var s;const r=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan"?this._rotateButton:this._panButton;Oze(r),this.toggle()},e!=null&&e.isDefaultUI||Mme(be.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return _P({button:()=>Ie(()=>Promise.resolve().then(()=>QB),void 0,import.meta.url)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var s,n;const e=((s=this.viewModel)==null?void 0:s.state)==="disabled",i=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan",r=this.messages.toggle;return se("div",{class:this.classes(CJ.base,Vo.widget,{[CJ.isLayoutHorizontal]:this.layout==="horizontal"})},se("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:i?"outline-fill":"solid",class:Vo.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),se("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:i?"solid":"outline-fill",class:Vo.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};u([A()],Rh.prototype,"icon",null),u([A()],Rh.prototype,"label",null),u([A({value:"vertical"})],Rh.prototype,"layout",null),u([A(),Uf("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Rh.prototype,"messages",void 0),u([A()],Rh.prototype,"view",null),u([A({type:cue})],Rh.prototype,"viewModel",void 0),Rh=u([B("esri.widgets.NavigationToggle")],Rh);const rBe=Rh;let ZA=class extends et{get canZoomIn(){var r,s,n;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(n=(s=this.view)==null?void 0:s.constraints)==null?void 0:n.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var s;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const r=(s=e.constraints)==null?void 0:s.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,s;const e=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(e&&"then"in e||e==null?void 0:e.scale)??((s=this.view)==null?void 0:s.scale)??0}};u([A({readOnly:!0})],ZA.prototype,"canZoomIn",null),u([A({readOnly:!0})],ZA.prototype,"canZoomOut",null),u([A()],ZA.prototype,"view",void 0),u([A()],ZA.prototype,"_scale",null),ZA=u([B("esri.widgets.Zoom.ZoomConditions2D")],ZA);const sBe=ZA;let vg=class extends et{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([A({readOnly:!0})],vg.prototype,"canZoomIn",null),u([A({readOnly:!0})],vg.prototype,"canZoomOut",null),u([A()],vg.prototype,"view",void 0),vg=u([B("esri.widgets.Zoom.ZoomConditions3D")],vg);const nBe=vg;let $p=class extends et{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new sBe({view:e}):e.type==="3d"&&(this._zoomConditions=new nBe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():aS(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():aS(e.goTo({zoomFactor:.5})))}};u([A()],$p.prototype,"_zoomConditions",void 0),u([A()],$p.prototype,"canZoomIn",null),u([A()],$p.prototype,"canZoomOut",null),u([A({readOnly:!0})],$p.prototype,"state",null),u([A()],$p.prototype,"view",null),$p=u([B("esri.widgets.Zoom.ZoomViewModel")],$p);const uue=$p,TJ={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Oh=class extends dn{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new uue,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return _P({button:()=>Ie(()=>Promise.resolve().then(()=>QB),void 0,import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[TJ.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return se("div",{class:this.classes(TJ.base,Vo.widget,e)},se("calcite-button",{class:Vo.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),se("calcite-button",{class:Vo.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};u([A()],Oh.prototype,"icon",null),u([A()],Oh.prototype,"label",null),u([A({value:"vertical"})],Oh.prototype,"layout",null),u([A(),Uf("esri/widgets/Zoom/t9n/Zoom")],Oh.prototype,"messages",void 0),u([A()],Oh.prototype,"view",null),u([A({type:uue})],Oh.prototype,"viewModel",void 0),Oh=u([B("esri.widgets.Zoom")],Oh);const oBe=Oh;function aBe(t){return(t==null?void 0:t.view)!==void 0}let SC=class extends Fze{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach((r=>{const s=this._find(r),n=s==null?void 0:s.widget;aBe(n)&&(n.view=i)}))},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([He((()=>this.components),this._componentsWatcher,wr),He((()=>this.view),this._updateViewAwareWidgets,wr)])}_add(e,i,r,s,n){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,s,n)}_removeComponents(e){e.forEach((i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())}))}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach((i=>this.add(this._createComponent(i),this._defaultPositionLookup[i])))}_createComponent(e){const i=this._createWidget(e);return new bC({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new X7e({view:i});case"compass":return new iBe({view:i});case"navigation-toggle":return new rBe({view:i,isDefaultUI:!0});case"zoom":return new oBe({view:i})}}};u([A()],SC.prototype,"components",void 0),SC=u([B("esri.views.ui.DefaultUI")],SC);const hue=SC;let xC=class extends hue{constructor(e){super(e),this.components=["attribution","zoom"]}};u([A()],xC.prototype,"components",void 0),xC=u([B("esri.views.ui.2d.DefaultUI2D")],xC);const due=xC;let Tv=class extends Qne{constructor(e,i){super(e,i,"webmap")}};function wO(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const pue=new Tv(2,34);var x6;let $C=x6=class extends pe{constructor(t){super(t),this.color=new ze([0,0,0,1])}clone(){return new x6(ie({color:this.color}))}};u([A({type:ze,json:{write:!0}})],$C.prototype,"color",void 0),$C=x6=u([B("esri.webmap.background.ColorBackground")],$C);const SP=$C;let fue,Aue,mue,yue,gue,vue,bue;async function lBe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([Ie(()=>import("./webglDeps-B72dlKRj.js"),__vite__mapDeps([182,183,184,185]),import.meta.url),Ie(()=>import("./mapViewDeps-JO4CtM-D.js"),__vite__mapDeps([186,187,92,188,184,183,154,132,88,189,89,60,190,87,107,191,139,138,95,8,9,10,90,13,192,93,94,137,182,185,193,102,194,195,196,151,148,130,76,86,39,35,41,197,198,91,199,97,200,99,65,84,201,202,203,204,147,205,206]),import.meta.url)]);Aue=t,mue=e,yue=i,gue=r,vue=s,bue=n,fue=o}var Eb;let ci=(Eb=class extends m6e(QNe(_Re(GOe(POe(M5e))))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Kc({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new cP({actionMap:new yB({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new qe,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Lce,this.type="2d",this.view2dType=null,this.ui=new due,this.test={takeScreenshot:async i=>dze(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},Yxe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=tr(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new p8e(this.featuresTilingScheme)}get constraintsInfo(){var r,s;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(s=e==null?void 0:e.spatialReference)!=null&&s.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!n&&(i!=null&&i.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&((s==null?void 0:s.targetGeometry)==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return kne(i.spatialReference,r)}get background(){return wO(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get highlightOptions(){return J8e(this)}set highlightOptions(e){Z8e(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,s,n,o;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some((a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0))||e);if(ce("esri-2d-log-updating")){const a=this.allLayerViews.reduce(((l,c)=>({...l,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating})),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(s=this.layerViewManager)==null?void 0:s.updating}
-> labelManager.updating: ${(n=this.labelManager)==null?void 0:n.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${e}
`)}return i}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new zi({rings:[e.map((i=>[i[0],i[1]]))],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,i){return Y8e(this,e,i)}async takeScreenshot(e){return hze(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return wO(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return wO(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return pQ.hasLayerViewModule(e)}importLayerView(e){return pQ.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(be.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var c;const i=this.toMap(e),r=await this.hitTest(e),s=this.allLayerViews.toArray().filter((h=>h.clips.every((y=>_ce(this,y,e,i))))).reverse(),n=new globalThis.Map(s.map((h=>[h.layer.uid,h]))),o=[];let a=0,l=0;for(;a<r.results.length||l<s.length;){const h=r.results.at(a);if(h&&h.type!=="graphic"){++a;continue}const y=n.get((c=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:c.uid);if((!h||y)&&l<s.length&&s.at(l)!==y){const g=s.at(l);"fetchPopupFeaturesAtLocation"in g&&o.push({mapPoint:i,layerView:g}),++l}else h&&(o.push({graphic:h.graphic,layerView:y}),++a)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=Sze(this.type);if(ce("safari")&&ce("safari")<9&&(e=new te("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ce("safari")})),e!=null){be.getLogger(this).warn("#validate()",e.message);const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const s=document.createElement("div");s.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",s.setAttribute("style","font-size: 18px;");const n=document.createElement("a");throw n.innerHTML="https://esriurl.com/systemRequirements",n.target="_blank",n.setAttribute("style","font-size: 18px;"),n.href="https://esriurl.com/systemRequirements",i.appendChild(r),i.appendChild(s),i.appendChild(n),this.surface.appendChild(i),e}}loadAsyncDependencies(){return lBe()}_getDefaultViewpoint(){var C;const{constraints:e,initialExtent:i,map:r,padding:s,size:n}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,c=((C=l==null?void 0:l.targetGeometry)==null?void 0:C.extent)??i,h=c==null?void 0:c.center,y=(l==null?void 0:l.rotation)??0,g=(l==null?void 0:l.scale)||c&&fP(c,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),_=a.center??h,S=a.rotation??y,E=a.scale??g;return _&&E?new Cs({targetGeometry:_,scale:E,rotation:S}):null}_startup(){var l;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(l=this.defaultsFromMap.extent)==null?void 0:l.center),this.graphics.owner=this;const i=new s8e(this.surface),r=new fue(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new vue,this._magnifierView.magnifier=this.magnifier,this._gridView=new bue;const s=new yue({view:this});this._set("labelManager",s);const n=new Q6e({view:this});this._set("animationManager",n);const o=new gue({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),r.on("webgl-error",(c=>this.fatalError=c.error)),He((()=>this.stationary),(c=>r.stationary=c),eo),He((()=>this.background),(c=>{r.backgroundColor=c==null?void 0:c.color,this._magnifierView.backgroundColor=c==null?void 0:c.color}),eo),He((()=>this.magnifier),(c=>this._magnifierView.magnifier=c),eo),He((()=>this.grid),(c=>this._gridView.grid=c),eo),He((()=>this.renderingOptions),(c=>r.renderingOptions=c),eo),He((()=>this.highlights.items.map((c=>({name:c.name,options:{fillColor:c.color,haloColor:c.haloColor,fillOpacity:c.fillOpacity,haloOpacity:c.haloOpacity,haloWidth:c.haloWidth,haloBlur:c.haloBlur}})))),(()=>{r.highlightGradient=W8e(r.highlightGradient,this.highlights.items)}),eo),He((()=>this.state.id),(()=>r.state=this.state),eo)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach((c=>c(this))),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach((i=>{this.stage.addChild(i.container)}));const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new e8e(en.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new Aue({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new mue(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var o;const{allLayerViews:i,padding:r,size:s,stage:n}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:r,size:s,stage:n}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},Eb.type="2d",Eb);u([A({constructOnly:!0})],ci.prototype,"deactivatedWebGLExtensions",void 0),u([A({constructOnly:!0})],ci.prototype,"debugWebGLExtensions",void 0),u([A({readOnly:!0})],ci.prototype,"featuresTilingScheme",void 0),u([A({readOnly:!0})],ci.prototype,"graphicsTileStore",null),u([A()],ci.prototype,"graphicsView",void 0),u([A()],ci.prototype,"constraintsInfo",null),u([A()],ci.prototype,"initialExtentRequired",null),u([A()],ci.prototype,"labelManager",void 0),u([A({type:cP,nonNullable:!0})],ci.prototype,"navigation",void 0),u([A({constructOnly:!0})],ci.prototype,"renderCanvas",void 0),u([A()],ci.prototype,"renderingOptions",void 0),u([A({constructOnly:!0})],ci.prototype,"supersampleScreenshotsEnabled",void 0),u([A({readOnly:!0})],ci.prototype,"supportsGround",void 0),u([A()],ci.prototype,"defaultsFromMapSettings",null),u([A({readOnly:!0})],ci.prototype,"typeSpecificPreconditionsReady",null),u([A({type:SP})],ci.prototype,"background",null),u([A()],ci.prototype,"center",null),u([A({type:qe})],ci.prototype,"floors",void 0),u([A()],ci.prototype,"grid",void 0),u([A({type:_f})],ci.prototype,"highlightOptions",null),u([A()],ci.prototype,"map",void 0),u([A()],ci.prototype,"padding",null),u([A({readOnly:!0})],ci.prototype,"rendering",null),u([A({readOnly:!0})],ci.prototype,"resolution",null),u([A()],ci.prototype,"scale",null),u([A({constructOnly:!0})],ci.prototype,"spatialReferenceLocked",void 0),u([A({readOnly:!0})],ci.prototype,"tileInfo",null),u([A({type:Lce,readOnly:!0})],ci.prototype,"timeline",void 0),u([A({readOnly:!0})],ci.prototype,"type",void 0),u([A({readOnly:!0})],ci.prototype,"updating",null),u([A({readOnly:!0})],ci.prototype,"view2dType",void 0),u([A({readOnly:!0})],ci.prototype,"visibleArea",null),u([A()],ci.prototype,"zoom",null),u([A({readOnly:!0})],ci.prototype,"navigating",null),u([A(),yi((t=>t instanceof hue?t:Sx(due,t)))],ci.prototype,"ui",void 0),ci=u([B("esri.views.View2D")],ci);const cBe=ci;let EC=class extends cBe{constructor(e){super(e),this.view2dType="map"}};u([A({readOnly:!0})],EC.prototype,"view2dType",void 0),EC=u([B("esri.views.MapView")],EC);const uBe=EC;let Ep=class extends pe{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([A({type:String,json:{write:{isRequired:!0}}})],Ep.prototype,"facilityIdField",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],Ep.prototype,"layerId",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],Ep.prototype,"nameField",void 0),u([A({type:String,json:{write:!0}})],Ep.prototype,"siteIdField",void 0),u([A({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Ep.prototype,"sublayerId",void 0),Ep=u([B("esri.layers.support.FacilityLayerInfo")],Ep);const hBe=Ep;let Rl=class extends pe{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};u([A({type:String,json:{write:{isRequired:!0}}})],Rl.prototype,"facilityIdField",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],Rl.prototype,"layerId",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],Rl.prototype,"levelIdField",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],Rl.prototype,"levelNumberField",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],Rl.prototype,"longNameField",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],Rl.prototype,"shortNameField",void 0),u([A({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Rl.prototype,"sublayerId",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],Rl.prototype,"verticalOrderField",void 0),Rl=u([B("esri.layers.support.LevelLayerInfo")],Rl);const dBe=Rl;let YA=class extends pe{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([A({type:String,json:{write:{isRequired:!0}}})],YA.prototype,"layerId",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],YA.prototype,"nameField",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],YA.prototype,"siteIdField",void 0),u([A({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],YA.prototype,"sublayerId",void 0),YA=u([B("esri.layers.support.SiteLayerInfo")],YA);const pBe=YA;let bg=class extends pe{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};u([A({type:dBe,json:{write:{isRequired:!0}}})],bg.prototype,"levelLayer",void 0),u([A({type:hBe,json:{write:{isRequired:!0}}})],bg.prototype,"facilityLayer",void 0),u([A({type:pBe,json:{write:!0}})],bg.prototype,"siteLayer",void 0),bg=u([B("esri.support.MapFloorInfo")],bg);const fBe=bg;var $6;let wg=$6=class extends pe{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new $6(ie({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};u([A({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],wg.prototype,"activeRange",void 0),u([A({type:[Number],json:{write:!0}})],wg.prototype,"currentRangeExtent",void 0),u([A({type:[Number],json:{write:!0}})],wg.prototype,"fullRangeExtent",void 0),wg=$6=u([B("esri.webdoc.RangeInfo")],wg);const OB=wg;var E6;let Mc=E6=class extends pe{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new E6(ie({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};u([A({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Mc.prototype,"enabled",void 0),u([A({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Mc.prototype,"longNames",void 0),u([A({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Mc.prototype,"minimized",void 0),u([A({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Mc.prototype,"pinnedLevels",void 0),u([A({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Mc.prototype,"site",void 0),u([A({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Mc.prototype,"facility",void 0),u([A({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Mc.prototype,"level",void 0),Mc=E6=u([B("esri.webdoc.widgets.FloorFilter")],Mc);const ABe=Mc;var I6;const bE=new Ot({slider:"slider",picker:"picker"});let _g=I6=class extends pe{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new I6({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};u([A({type:bE.apiValues,nonNullable:!0,json:{type:bE.jsonValues,default:null,read:{reader:bE.read},write:{isRequired:!0,writer:bE.write}}})],_g.prototype,"interactionMode",void 0),u([A({type:Kt,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],_g.prototype,"numStops",void 0),u([A({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],_g.prototype,"stopInterval",void 0),_g=I6=u([B("esri.webdoc.widgets.Range")],_g);const mBe=_g;var C6;let ws=C6=class extends pe{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?Mi.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&Jr(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,s=i.startTime!=null?new Date(i.startTime):null;return new Mi({start:s,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,s=t.start;r&&(i.endTime=r!=null?r.getTime():null),s&&(i.startTime=s!=null?s.getTime():null)}readStopInterval(t,e,i){return t?ic.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const s=t.toJSON(r);Jr("properties.timeStopInterval",{interval:s.value,units:s.unit},e)}readStops(t){return t!=null&&t.length?t.map((e=>new Date(e))):null}writeStops(t,e,i){t!=null&&t.length&&Jr(i,t.map((r=>r.getTime())),e)}clone(){return new C6(ie({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};u([A({type:Mi,json:{type:[[Kt,f1]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],ws.prototype,"currentTimeExtent",void 0),u([Me("currentTimeExtent")],ws.prototype,"readCurrentTimeExtent",null),u([Ne("currentTimeExtent")],ws.prototype,"writeCurrentTimeExtent",null),u([A({type:Mi,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],ws.prototype,"fullTimeExtent",void 0),u([Me("fullTimeExtent")],ws.prototype,"readFullTimeExtent",null),u([Ne("fullTimeExtent")],ws.prototype,"writeFullTimeExtent",null),u([A({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],ws.prototype,"loop",void 0),u([A({type:Kt,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const t=!!this.stopInterval,e=!!((r=this.stops)!=null&&r.length),i=!(t||e);return{enabled:i,isRequired:i}}}}})],ws.prototype,"numStops",void 0),u([A({type:[1,2],nonNullable:!0,json:{type:Kt,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],ws.prototype,"numThumbs",void 0),u([A({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],ws.prototype,"stopDelay",void 0),u([A({type:ic,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:J7.jsonValues.filter((t=>t!=="esriTimeUnitsUnknown"))}},overridePolicy(){var i;const t=this.numStops!=null,e=!!((i=this.stops)!=null&&i.length);return{enabled:!e,isRequired:!(t||e)}}}}})],ws.prototype,"stopInterval",void 0),u([Me("stopInterval")],ws.prototype,"readStopInterval",null),u([Ne("stopInterval")],ws.prototype,"writeStopInterval",null),u([A({type:[Date],json:{type:[Kt],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],ws.prototype,"stops",void 0),u([Me("stops")],ws.prototype,"readStops",null),u([Ne("stops")],ws.prototype,"writeStops",null),ws=C6=u([B("esri.webdoc.widgets.TimeSlider")],ws);const yBe=ws;var T6;let Sg=T6=class extends pe{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new T6(ie({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};u([A({type:mBe,json:{write:!0}})],Sg.prototype,"range",void 0),u([A({type:yBe,json:{write:!0}})],Sg.prototype,"timeSlider",void 0),u([A({type:ABe,json:{write:!0}})],Sg.prototype,"floorFilter",void 0),Sg=T6=u([B("esri.webdoc.Widgets")],Sg);const gBe=Sg,vBe={width:600,height:400},wE=1.5;function bBe(t,e){e=e||vBe;let{width:i,height:r}=e;const s=i/r;return s<wE?r=i/wE:s>wE&&(i=r*wE),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function wBe(t,e){return{...wue(t,e),readResourcePaths:[]}}function idt(t,e,i){const r=Yr(t.itemUrl);return{...wue(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function wue(t,e){return{origin:e,url:Yr(t.itemUrl),portal:t.portal||Oe.getDefault(),portalItem:t}}let sd=class extends pe{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((s=>s.toJSON())),i=this.geometries[0],r={};return r.outSR=MT(this.outSpatialReference),r.inSR=MT(i.spatialReference),r.geometries=JSON.stringify({geometryType:$1(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};u([A()],sd.prototype,"geometries",void 0),u([A({type:We,json:{read:{source:"outSR"}}})],sd.prototype,"outSpatialReference",void 0),u([A()],sd.prototype,"transformation",void 0),u([A()],sd.prototype,"transformForward",void 0),sd=u([B("esri.rest.support.ProjectParameters")],sd);const _Be=fr(sd);async function _ue(t,e,i){e=_Be(e);const r=Qx(t),s={...r.query,f:"json",...e.toJSON()},n=e.outSpatialReference,o=$1(e.geometries[0]),a=dP(s,i);return ei(r.path+"/project",a).then((({data:{geometries:l}})=>yle(l,o,n)))}function SBe(t,e){var i;return e.resourceInfo?Sue(e,e.resourceInfo,{origin:t.origin}):(i=e.portalItem)!=null&&i.id?xBe(t,e,e.portalItem):Promise.resolve()}function Sue(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||Oe.getDefault()),Ie(()=>import("./layersCreator-BYAc1_-l.js"),__vite__mapDeps([181,23,22,21,24,20]),import.meta.url).then((({populateOperationalLayers:s})=>{const n=[],o=e.operationalLayers;o!=null&&o.length&&n.push(s(t.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l!=null&&l.length&&n.push(s(t.tables,l,a)),Promise.allSettled(n).then((()=>{}))}))}async function xBe(t,e,i){var o;if(await i.load().catch((a=>{throw new te(`${t.name}:load-portal-item`,"Failed to load portal item",{error:a})})),i.type!==t.itemType)throw new te(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const s=wBe(i,t.origin);await $Be(t,e,r,s),e.resourceReferences={portalItem:i,paths:s.readResourcePaths};const n=await IBe(e.initialViewProperties,i,be.getLogger(e));if(n){const a=((o=e.initialViewProperties)==null?void 0:o.clone())??t.createInitialViewProperties();a.viewpoint=n,e.initialViewProperties=a}}function $Be(t,e,i,r){const s=EBe(t,i);return e.read(s,r),Sue(e,s,r)}function EBe(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function IBe(t,e,i){var n;if((n=t==null?void 0:t.viewpoint)==null?void 0:n.targetGeometry)return null;const s=await CBe(t,e,i);return s?new Cs({targetGeometry:s}):null}async function CBe(t,e,i){const r=t==null?void 0:t.spatialReference,s=e==null?void 0:e.extent;if(!r||!s)return null;if(r.isWGS84)return s.clone();if(r.isWebMercator)return Sd(s);const{getGeometryServiceURL:n}=await Ie(()=>import("./geometryServiceUtils-B9e3SLXt.js"),[],import.meta.url);try{const o=await n(e),a=new sd({geometries:[s],outSpatialReference:r});return(await _ue(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function MJ(t){return{enabled:!!(t!=null&&t.length)}}var M6;let xg=M6=class extends pe{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new M6({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([A({type:Boolean,json:{write:!0}})],xg.prototype,"exactMatch",void 0),u([A({type:String,json:{write:!0}})],xg.prototype,"name",void 0),u([it(p7)],xg.prototype,"type",void 0),xg=M6=u([B("esri.webdoc.applicationProperties.SearchLayerField")],xg);const TBe=xg;var k6;let $g=k6=class extends pe{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new k6(ie({field:this.field,id:this.id,subLayer:this.subLayer}))}};u([A({type:TBe,json:{write:{isRequired:!0}}})],$g.prototype,"field",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],$g.prototype,"id",void 0),u([A({type:Kt,json:{write:!0}})],$g.prototype,"subLayer",void 0),$g=k6=u([B("esri.webdoc.applicationProperties.SearchLayer")],$g);const MBe=$g;var P6;let Eg=P6=class extends pe{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new P6({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([A({type:Boolean,json:{write:!0}})],Eg.prototype,"exactMatch",void 0),u([A({type:String,json:{write:!0}})],Eg.prototype,"name",void 0),u([it(p7)],Eg.prototype,"type",void 0),Eg=P6=u([B("esri.webdoc.applicationProperties.SearchTableField")],Eg);const kBe=Eg;var L6;let W2=L6=class extends pe{constructor(t){super(t),this.field=null,this.id=null}clone(){return new L6(ie({field:this.field,id:this.id}))}};u([A({type:kBe,json:{write:{isRequired:!0}}})],W2.prototype,"field",void 0),u([A({type:String,json:{write:{isRequired:!0}}})],W2.prototype,"id",void 0),W2=L6=u([B("esri.webdoc.applicationProperties.SearchTable")],W2);const PBe=W2;var R6;const xue=qe.ofType(MBe),$ue=qe.ofType(PBe);let kc=R6=class extends pe{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new xue,this.tables=new $ue}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new R6(ie({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};u([A({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],kc.prototype,"addressSearchEnabled",void 0),u([Me("addressSearchEnabled")],kc.prototype,"readAddressSearchEnabled",null),u([Ne("addressSearchEnabled")],kc.prototype,"writeAddressSearchEnabled",null),u([A({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],kc.prototype,"enabled",void 0),u([A({type:String,json:{write:!0}})],kc.prototype,"hintText",void 0),u([A({type:xue,json:{write:{overridePolicy:MJ},origins:{"web-scene":{write:{isRequired:!0}}}}})],kc.prototype,"layers",void 0),u([A({type:$ue,json:{read:!0,write:{overridePolicy:MJ}}})],kc.prototype,"tables",void 0),kc=R6=u([B("esri.webdoc.applicationProperties.Search")],kc);const LBe=kc;var O6;let IC=O6=class extends pe{constructor(t){super(t),this.search=null}clone(){return new O6(ie({search:this.search}))}};u([A({type:LBe,json:{write:!0}})],IC.prototype,"search",void 0),IC=O6=u([B("esri.webdoc.applicationProperties.Viewing")],IC);const RBe=IC;var D6;let Ig=D6=class extends pe{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new D6(ie({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};u([A({json:{write:!0}})],Ig.prototype,"editing",void 0),u([A({json:{write:!0}})],Ig.prototype,"offline",void 0),u([A({type:RBe,json:{write:!0}})],Ig.prototype,"viewing",void 0),Ig=D6=u([B("esri.webmap.ApplicationProperties")],Ig);const OBe=Ig;var N6;let dd=N6=class extends pe{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return Yte(this.url)}get isDataURI(){return Fd(this.url)}clone(){return new N6({url:this.url})}};u([A({type:String,json:{write:{isRequired:!0}}})],dd.prototype,"url",void 0),u([A()],dd.prototype,"isSecureUrl",null),u([A()],dd.prototype,"isDataURI",null),dd=N6=u([B("esri.webdoc.support.SlideThumbnail")],dd);const DBe={type:Mi,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?Mi.fromArray(t):Mi.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r!=null&&r.messages&&r.messages.push(new te("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[Kt,f1]]}}}}};var F6;let Pc=F6=class extends j0.IdentifiableMixin(pe){constructor(t){super(t),this.name=null,this.thumbnail=new dd,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new dd({url:t}):fr(dd,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&be.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return Cs.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:s}=t;if(s==null||s.type==="extent")s!=null&&(e.extent=s.toJSON()),e[i]=t.toJSON();else{const n="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new te("property:unsupported",n)):be.getLogger(this).error(n)}}clone(){return new F6(ie({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};u([A({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Pc.prototype,"name",void 0),u([A({type:dd,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Pc.prototype,"thumbnail",void 0),u([yi("thumbnail")],Pc.prototype,"castThumbnail",null),u([A(DBe)],Pc.prototype,"timeExtent",void 0),u([A({type:Cs,nonNullable:!0,json:{write:!0}})],Pc.prototype,"viewpoint",null),u([Me("viewpoint",["extent","viewpoint"])],Pc.prototype,"readViewpoint",null),u([Ne("viewpoint")],Pc.prototype,"writeViewpoint",null),Pc=F6=u([B("esri.webmap.Bookmark")],Pc);const NBe=Pc;let Dh=class extends dt.ClonableMixin(et){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=ul,this.viewpoint=null}};u([A({type:SP})],Dh.prototype,"background",void 0),u([A({type:OB})],Dh.prototype,"rangeInfo",void 0),u([A({type:We})],Dh.prototype,"spatialReference",void 0),u([A({type:Mi})],Dh.prototype,"timeExtent",void 0),u([A({nonNullable:!0})],Dh.prototype,"timeZone",void 0),u([A({type:Cs})],Dh.prototype,"viewpoint",void 0),Dh=u([B("esri.webmap.InitialViewProperties")],Dh);const PM=Dh,Eue=qe.ofType(NBe),FBe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),zBe="ArcGIS Pro",BBe=B7.JSAPI;let Ji=class extends Lk(Fn.LoadableMixin(Mu.EsriPromiseMixin(Fae))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new Eue,this.floorInfo=null,this.initialViewProperties=new PM,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=vx((async(i,r,s)=>{const{save:n,saveAs:o}=await Ie(()=>import("./webdocSaveUtils-fUnLtHGt.js"),__vite__mapDeps([257,162,258,259,260,164]),import.meta.url);switch(i){case Pu.SAVE:return n(this.context,this,r);case Pu.SAVE_AS:return o(this.context,this,s,r)}})),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=tr(this.portalItem)}initialize(){if(this.when().catch((e=>{be.getLogger(this).error("#load()","Failed to load web map",e)})),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=BBe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=oie}readInitialViewProperties(e,i){var o,a;const r=new PM;i.background&&(r.background=SP.fromJSON(i.background));const s=(o=i.initialState)==null?void 0:o.timeExtent;s&&(r.timeExtent=Mi.fromArray(s));const n=(a=i.initialState)==null?void 0:a.viewpoint;return n&&(n.rotation&&Tv.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===zBe&&(n.rotation*=-1),r.viewpoint=Cs.fromJSON(n)),i.mapRangeInfo&&(r.rangeInfo=OB.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=We.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,s){var a;if(!e)return;(a=e.background)!=null&&a.color&&(i.background=e.background.write({},s));const{timeExtent:n,viewpoint:o}=e;if(o||n){const l={};o&&(l.viewpoint=o.write({},s)),n&&(l.timeExtent=n.toArray()),i.initialState=l}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(s)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},s)),i.timeZone=e.timeZone}writeLayers(e,i,r,s){i[r]=this._writeLayers(e,s,"operational-layers")}readSourceVersion(e,i){const[r,s]=i.version.split(".");return new Tv(parseInt(r,10),parseInt(s,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,s){const n=this._writeLayers(e,s,"tables");n.length&&(i[r]=n)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(SBe(this.context,this)),Promise.resolve(this)}loadAll(){return lP(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();GK(this,e,(s=>super.read(e,s)),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new te("webmap:not-loaded","Web map must be loaded before it can be serialized");throw be.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(Pu.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(Pu.SAVE_AS,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var r,s,n,o;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((o=(n=(s=this.basemap)==null?void 0:s.resourceInfo)==null?void 0:n.data)==null?void 0:o.baseMapLayers)||[]]).find((a=>a.id===e.id))}async updateItemThumbnail(){var e;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:tie(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce(((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i)),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map((s=>zF(s,r==="tables"?null:this.getLayerJSONFromResourceInfo(s),i))).filter(os).toArray()}_validateJSON(e){const i=Tv.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){var o,a;const e=this.applicationProperties,i=(o=e==null?void 0:e.viewing)==null?void 0:o.search,r=l=>this.allLayers.some((c=>c.id===l));if(i!=null&&i.layers&&(i.layers=i.layers.filter((l=>r(l.id)))),i!=null&&i.tables&&(i.tables=i.tables.filter((l=>this.tables.some((c=>c.id===l.id))))),e){const l=(a=e.editing)==null?void 0:a.locationTracking;l!=null&&l.info&&!r(l.info.layerId)&&(e.editing=null)}const s="presentation"in this?this.presentation:null,n=s==null?void 0:s.slides;n&&n.forEach((l=>{l.visibleLayers&&(l.visibleLayers=l.visibleLayers.filter((c=>r(c.id))))}))}async _updateFromInternal(e,i){if(i??(i={}),await A0((()=>e.ready)),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){var r,s;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=e.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(s=e.spatialReference)==null?void 0:s.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new Cs({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const n of e.persistableViewModels)n.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),s=r.width/2;return r.xmin=i.x-s,r.xmax=i.x+s,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=bBe(e,i.thumbnailSize),s=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(s.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Fd(e)){const i=y0(e),r=i==null?void 0:i.mediaType,s=r&&FBe.get(r.toLowerCase())||null,n=`thumbnail${Date.now()}`;return s?`${n}.${s}`:n}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};u([A()],Ji.prototype,"_updateFromPromise",void 0),u([A({type:OBe,json:{write:!0}})],Ji.prototype,"applicationProperties",void 0),u([A({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Ji.prototype,"authoringApp",null),u([Ne("authoringApp")],Ji.prototype,"writeAuthoringApp",null),u([A({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Ji.prototype,"authoringAppVersion",null),u([Ne("authoringAppVersion")],Ji.prototype,"writeAuthoringAppVersion",null),u([A({type:Eue,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Ji.prototype,"bookmarks",void 0),u([A({type:fBe,json:{name:"mapFloorInfo",write:!0}})],Ji.prototype,"floorInfo",void 0),u([A({type:PM,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:SP},"initialState.timeExtent":{type:Mi},"initialState.viewpoint":{type:Cs},mapRangeInfo:{type:OB},spatialReference:{type:We},"timeZone:":{type:String}}}}})],Ji.prototype,"initialViewProperties",void 0),u([Me("initialViewProperties")],Ji.prototype,"readInitialViewProperties",null),u([Ne("initialViewProperties")],Ji.prototype,"writeInitialViewProperties",null),u([A({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Ji.prototype,"layers",void 0),u([Ne("layers")],Ji.prototype,"writeLayers",null),u([A({type:wt})],Ji.prototype,"portalItem",void 0),u([A()],Ji.prototype,"resourceInfo",void 0),u([A({readOnly:!0,type:Tv,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Ji.prototype,"sourceVersion",void 0),u([Me("sourceVersion")],Ji.prototype,"readSourceVersion",null),u([Ne("sourceVersion")],Ji.prototype,"writeSourceVersion",null),u([A({json:{read:!1,write:{ignoreOrigin:!0}}})],Ji.prototype,"tables",void 0),u([Ne("tables")],Ji.prototype,"writeTables",null),u([A()],Ji.prototype,"thumbnailUrl",null),u([A()],Ji.prototype,"updatingFromView",null),u([A({type:gBe,json:{write:!0}})],Ji.prototype,"widgets",void 0),Ji=u([B("esri.WebDocument2D")],Ji);const jBe=Ji;let Nh=class extends pe{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};u([A({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],Nh.prototype,"moment",void 0),u([A({type:Boolean,json:{write:!0}})],Nh.prototype,"fullUpdate",void 0),u([A({type:Boolean,json:{write:!0}})],Nh.prototype,"validateErrorsCreated",void 0),u([A({type:Boolean,json:{write:!0}})],Nh.prototype,"exceededTransferLimit",void 0),u([A({type:[Object],json:{write:!0}})],Nh.prototype,"serviceEdits",void 0),u([A({type:[Object],json:{write:!0}})],Nh.prototype,"discoveredSubnetworks",void 0),Nh=u([B("esri.rest.networks.support.ValidateNetworkTopologyResult")],Nh);const UBe=Nh,VBe=ys()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Ip=class extends UBe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await ei(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise(((s,n)=>{this._clearTimer();const o=setInterval((()=>{this._timer||n(Hi()),this.checkJobStatus().then((a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":r&&r(this)}}),(a=>{this._clearTimer(),n(a)}))}),i);this._timer=o}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([A()],Ip.prototype,"editsResolver",void 0),u([A({type:String,json:{write:!0}})],Ip.prototype,"statusUrl",void 0),u([it(VBe)],Ip.prototype,"status",void 0),u([A({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Ip.prototype,"submissionTime",void 0),u([A({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Ip.prototype,"lastUpdatedTime",void 0),Ip=u([B("esri.networks.support.TopologyValidationJobInfo")],Ip);const GBe=Ip;var Gr;(function(t){t[t.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",t[t.RTContainment=2]="RTContainment",t[t.RTAttachment=3]="RTAttachment",t[t.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",t[t.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Gr||(Gr={}));const _E=new Ot({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),ldt=new Ot({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),HBe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},cdt=new Ot({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});function qBe(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:s,toRuleElement:n}=Iue(t),o=[];switch(t.ruleType){case Gr.RTContainment:case Gr.RTAttachment:i==="from"&&Ql(e,r,!1)?o.push(n):i==="to"&&Ql(e,n,!1)&&o.push(r);break;case Gr.RTJunctionEdgeConnectivity:case Gr.RTJunctionJunctionConnectivity:Ql(e,r,!0)?o.push(n):Ql(e,n,!0)&&o.push(r);break;case Gr.RTEdgeJunctionEdgeConnectivity:s&&(Ql(e,s,!0)?(o.push(r),o.push(n)):(Ql(e,r,!0)||Ql(e,n,!0))&&o.push(s));break;default:return[]}return o}function Q2(t,e,i){const{fromRuleElement:r,viaRuleElement:s,toRuleElement:n}=Iue(t);switch(t.ruleType){case Gr.RTContainment:case Gr.RTAttachment:return SE(e,i,r,n,!1,!1);case Gr.RTJunctionEdgeConnectivity:case Gr.RTJunctionJunctionConnectivity:return SE(e,i,r,n,!0,!0);case Gr.RTEdgeJunctionEdgeConnectivity:return SE(e,i,r,s,!0,!0)||SE(e,i,n,s,!0,!0);default:return!1}}function SE(t,e,i,r,s,n){if(!i||!r)return!1;const o=Ql(t,i,n),a=Ql(e,r,n);if(s){const l=Ql(t,r,n),c=Ql(e,i,n);return o&&a||l&&c}return o&&a}function WBe(t,e){var s;const i=(s=t.terminal)==null?void 0:s.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function Ql(t,e,i){var n,o,a,l;const{assetGroupCode:r,assetTypeCode:s}=t;return("layerId"in t?t.layerId===((n=e.networkSource)==null?void 0:n.layerId):t.networkSourceId===((o=e.networkSource)==null?void 0:o.sourceId))&&(r==null||r===((a=e.assetGroup)==null?void 0:a.assetGroupCode))&&(s==null||s===((l=e.assetType)==null?void 0:l.assetTypeCode))&&(!i||!("terminalId"in t)||WBe(e,t))}function Iue(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function Ey(t){var s;let e=null,i=null,r=null;if(QK(t))e=z6(t),[i,r]=QBe(t);else if(Qp(t)){e=((s=t.parent)==null?void 0:s.layerId)??null;const[n]=LM(t);n===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function z6(t){var r;const{sourceLayer:e}=t;let i;return Yse(e)?i=e.layerId:Qp(e)&&(i=(r=e.parent)==null?void 0:r.layerId),i??null}function QBe(t){const[e,i]=LM(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function LM(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function kJ(t,e){if(t==="Utility Network Layer"){const{default:i}=await Ie(()=>Promise.resolve().then(()=>aje),void 0,import.meta.url);return new i({layerUrl:e})}return null}async function JBe(t){var o;let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof wt||(e={...e,portalItem:new wt(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new te("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,s=await ei(r,{responseType:"json",query:{f:"json"}}),n="Network Layer";if((o=s.data.type)!=null&&o.includes(n))return kJ(s.data.type,r);if(s.data.layers){const a=s.data.layers.find((l=>l.type.includes(n)));if(a){const l=`${r}/${a.id}`;return kJ(a.type,l)}}return null}let es=class extends Lk(Fn){static fromPortalItem(e){return JBe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:s,result:n}=i,o=r===this.featureServiceUrl,a=x_(r,s,this.gdbVersion);o&&a&&n.then((l=>{WI(r,s)&&(this.historicMoment=l.historicMoment)}))},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:s,moment:n}=i,o=r===this.featureServiceUrl,a=x_(r,s,this.gdbVersion);o&&a&&(this.historicMoment=n)},this.when().then((()=>{this.addHandles([Fse(this._applyEditsHandler),zse(this._updateMomentHandler)])}),(()=>{}))}initialize(){this.when().catch((e=>{Zs(e)||be.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return Yr(this.layerUrl)}get featureServiceUrl(){return Wu(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Wu(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,s=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return s>=0?s:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,s=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return s>=0?s:null}getObjectIdsFromElements(e){const i=[],r=new Map;for(const n of e){const o=this.getLayerIdBySourceId(n.networkSourceId);if(o==null)continue;let a=r.get(o);a===void 0&&(a=[]),a.push(n.objectId),r.set(o,a)}const s=this.featureServiceUrl;return r.forEach(((n,o)=>i.push({layerUrl:`${s}/${o}`,objectIds:n}))),i}async queryNamedTraceConfigurations(e,i){var a;const[{queryNamedTraceConfigurations:r},{default:s}]=await Promise.all([Ie(()=>import("./queryNamedTraceConfigurations-DqmrejbQ.js"),[],import.meta.url),Ie(()=>import("./QueryNamedTraceConfigurationsParameters-CezyuAqZ.js"),[],import.meta.url)]),n=this.networkServiceUrl,o=s.from(e);return(a=await r(n,o,{...i}))==null?void 0:a.namedTraceConfigurations}async validateTopology(e,i){var h,y,g;if(!e.validateArea)throw new te("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:s}]=await Promise.all([Ie(()=>import("./validateNetworkTopology-B7OxiQzf.js"),[],import.meta.url),Ie(()=>import("./ValidateNetworkTopologyParameters-DP_lJPpU.js"),[],import.meta.url)]),n=s.from(e);WI(this.featureServiceUrl,this.gdbVersion||null)?(n.sessionID=iN,await $G(this.featureServiceUrl,this.gdbVersion,!0)):n.sessionID=null,n.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,l=EG(a,null,this.gdbVersion,!0),c=await r(o,n,{...i});if(c!=null&&c.serviceEdits){const _=[];for(const S of c.serviceEdits){const{editedFeatures:E}=S,C=E!=null&&E.spatialReference?new We(E.spatialReference):null;_.push({layerId:S.layerId,editedFeatures:{adds:((h=E==null?void 0:E.adds)==null?void 0:h.map((M=>xE(M,C))))||[],updates:((y=E==null?void 0:E.updates)==null?void 0:y.map((M=>({original:xE(M[0],C),current:xE(M[1],C)}))))||[],deletes:((g=E==null?void 0:E.deletes)==null?void 0:g.map((M=>xE(M,C))))||[],spatialReference:C}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:_,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,i){let r=null;if(!e.validateArea)throw new te("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const h=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await ei(h,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:s},{default:n}]=await Promise.all([Ie(()=>import("./validateNetworkTopology-B7OxiQzf.js"),[],import.meta.url),Ie(()=>import("./ValidateNetworkTopologyParameters-DP_lJPpU.js"),[],import.meta.url)]),o=n.from(e);WI(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=iN,await $G(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,l=this.featureServiceUrl?EG(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await s(a,o,{...i});return new GBe({statusUrl:c,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const s of r)if(s.sourceId===e)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,i,r,s,n){for(const o of e)for(const a of[o.edgeSources??[],o.junctionSources??[]])for(const l of a)if(l[r]===n)return i.set(n,l[s]),l[s];return-1}async _fetchLayerMetaData(e,i){const r=await ei(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const s=await ei(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then((n=>{var o;return(o=n.data.layerDataElements)==null?void 0:o[0]}));s&&this.read(s,{origin:"service"})}};function xE(t,e){return new Qi({attributes:t.attributes,geometry:Ju({...t.geometry,spatialReference:e})})}u([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],es.prototype,"id",void 0),u([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],es.prototype,"title",void 0),u([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],es.prototype,"layerUrl",void 0),u([A({type:Object,json:{origins:{service:{read:!0}},read:!1}})],es.prototype,"dataElement",void 0),u([A({type:Rt,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],es.prototype,"fullExtent",void 0),u([A({type:We,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],es.prototype,"spatialReference",void 0),u([A({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],es.prototype,"type",void 0),u([A({readOnly:!0})],es.prototype,"datasetName",null),u([A({readOnly:!0})],es.prototype,"owner",null),u([A({readOnly:!0})],es.prototype,"schemaGeneration",null),u([A({readOnly:!0})],es.prototype,"parsedUrl",null),u([A({readOnly:!0})],es.prototype,"featureServiceUrl",null),u([A({readOnly:!0})],es.prototype,"networkServiceUrl",null),u([A({readOnly:!0})],es.prototype,"layerId",null),u([A()],es.prototype,"sourceJSON",void 0),u([A({readOnly:!0})],es.prototype,"networkSystemLayers",null),u([A()],es.prototype,"gdbVersion",void 0),u([A({type:Date})],es.prototype,"historicMoment",void 0),es=u([B("esri.networks.Network")],es);const ZBe=es;let Cp=class extends pe.JSONSupportMixin(Fn){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=ei}initialize(){}async load(e){const i=this.rulesLayer.load(e).then((()=>this._initializeRulesTable()));return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const s=new Map,[n,o]=LM(e.sourceLayer);if(!n||!o)return"";const a=Ey(e),l=Ey(i);r.forEach((h=>{const{type:y,direction:g}=h;this._getRulesForAssociationType(y).forEach((_=>{qBe(_,a,g).filter((S=>{var E;return((E=S.networkSource)==null?void 0:E.layerId)===l.layerId})).forEach((S=>{var M,P;const E=(M=S.assetGroup)==null?void 0:M.assetGroupCode,C=(P=S.assetType)==null?void 0:P.assetTypeCode;if(E!=null&&C!=null){const D=s.get(E)??new Set;D.add(C),s.set(E,D)}}))}))}));let c=[];return this._mergeAssetCodes(s).forEach(((h,y)=>{const g=`${n} IN (${y})`,_=tge(o,[...h]);g&&_&&c.push(d_(g,_))})),c.length>1&&(c=c.map((h=>`(${h})`))),c.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return z6(e)==null?[]:i.filter((s=>this.canAssociateFeatures(e,s,r)))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const s=Ey(e),n=Ey(i);return r.some((o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some((c=>l==="to"?Q2(c,n,s):Q2(c,s,n)))}))}getLayersCanAssociateWith(e,i,r){return z6(e)==null?[]:i.filter((s=>this.canAssociateFeatureToLayer(e,s,r)))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const s=Ey(e),n=Ey(i);return r.some((o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some((c=>l==="to"?Q2(c,n,s):Q2(c,s,n)))}))}getFeatureSQL(e,i){var c,h;const r=e.layerId.toString(),s=(c=e.fieldsIndex)==null?void 0:c.normalizeFieldName("assetGroup"),n=(h=e.fieldsIndex)==null?void 0:h.normalizeFieldName("assetType"),o=s?i.attributes[s]:null,a=n?i.attributes[n]:null,l=this.rulesHash[r];if(l){const y=l.assetGroupHash[o];if(y)return y.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var s,n,o,a,l,c,h,y,g,_,S;const e={};let i;(function(E){E[E.from=0]="from",E[E.to=1]="to",E[E.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const E of this.rules){if(E.ruleType===Gr.RTAttachment){this.rulesCategorized.attachment.push(E);continue}if(E.ruleType===Gr.RTContainment){this.rulesCategorized.containment.push(E);continue}if(E.ruleType===Gr.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(E);continue}this.rulesCategorized.connectivity.push(E);let C=[[i.from,i.to],[i.to,i.from]];E.ruleType===Gr.RTEdgeJunctionEdgeConnectivity&&(C=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const M of C){const P=M.shift(),D=M.shift();let F=!1;switch(E.ruleType){case Gr.RTEdgeJunctionEdgeConnectivity:F=P===i.from||P===i.to;break;case Gr.RTJunctionEdgeConnectivity:F=P===i.to}const U=r[P],G=((s=E[U.networkSourceId])==null?void 0:s.layerId.toString())??"",Q=(o=(n=E[U.assetGroupId])==null?void 0:n.assetGroupCode)==null?void 0:o.toString(),W=E[U.assetTypeId],X=(a=W==null?void 0:W.assetTypeCode)==null?void 0:a.toString(),K=r[D],de=((l=E[K.networkSourceId])==null?void 0:l.layerId.toString())??"",ye=(h=(c=E[K.assetGroupId])==null?void 0:c.assetGroupCode)==null?void 0:h.toString(),xe=E[K.assetTypeId],ee=(y=xe==null?void 0:xe.assetTypeCode)==null?void 0:y.toString(),le=e[G]??{assetGroupHash:{}};if(!(Q&&X&&ye&&ee))continue;const Te=le.assetGroupHash[Q]??{assetTypeHash:{}},ke=Te.assetTypeHash[X]??{};if(ke[de]=ke[de]??{},F){ke[G]=ke[G]??{};const Ke=d_(`assetgroup = ${Q}`,`assettype = ${X}`);(xe==null?void 0:xe.connectivityPolicy)==="esriNECPEndVertex"?ke[G].endVertex=(g=ke[G])!=null&&g.endVertex?`${ke[G].endVertex}`:`(${Ke})`:ke[G].anyVertex=ke[G].anyVertex?`${ke[G].anyVertex}`:`(${Ke})`}const De=d_(`assetgroup = ${ye}`,`assettype = ${ee}`);(xe==null?void 0:xe.connectivityPolicy)==="esriNECPEndVertex"?ke[de].endVertex=(_=ke[de])!=null&&_.endVertex?RD(ke[de].endVertex,De):`(${De})`:ke[de].anyVertex=(S=ke[de])!=null&&S.anyVertex?RD(ke[de].anyVertex,De):`(${De})`,Te.assetTypeHash[X]=ke,le.assetGroupHash[Q]=Te,e[G]=le}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter((r=>r.ruleType===Gr.RTJunctionJunctionConnectivity));case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter((r=>r.ruleType===Gr.RTJunctionEdgeConnectivity||r.ruleType===Gr.RTEdgeJunctionEdgeConnectivity));default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[s,n]of e){const o=new Set([s]);for(const[l,c]of e)s!==l&&!r.has(l)&&this._areSetsEqual(n,c)&&(o.add(l),r.add(l));const a=Array.from(o).sort().join(",");i.set(a,n)}return i}_canSupportAssociations(e){return e.every((i=>{const r=QK(i)?i.sourceLayer:i,[s,n]=LM(r);return s!=null&&n!=null}))}};u([A({constructOnly:!0})],Cp.prototype,"rulesLayer",void 0),u([A({constructOnly:!0})],Cp.prototype,"rules",void 0),u([A({readOnly:!0})],Cp.prototype,"rulesHash",void 0),u([A()],Cp.prototype,"rulesCategorized",void 0),u([A({constructOnly:!0})],Cp.prototype,"request",void 0),Cp=u([B("esri.networks.RulesTable")],Cp);let Ba=class extends pe{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};u([A({type:[Object],json:{write:!0}})],Ba.prototype,"conditionBarriers",void 0),u([A({type:[Object],json:{write:!0}})],Ba.prototype,"outputConditions",void 0),u([A({type:[Object],json:{write:!0}})],Ba.prototype,"functions",void 0),u([A({type:[Object],json:{write:!0}})],Ba.prototype,"functionBarriers",void 0),u([A({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Ba.prototype,"traversabilityScope",void 0),u([A({type:String,json:{write:!0}})],Ba.prototype,"shortestPathNetworkAttributeName",void 0),u([A({type:Boolean,json:{write:!0}})],Ba.prototype,"includeBarriers",void 0),u([A({type:Boolean,json:{write:!0}})],Ba.prototype,"validateConsistency",void 0),u([A({type:Boolean,json:{write:!0}})],Ba.prototype,"ignoreBarriersAtStartingPoints",void 0),Ba=u([B("esri.networks.support.TraceConfiguration")],Ba);const DB=Ba;let Ui=class extends DB{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};u([A({type:[Object],json:{write:!0}})],Ui.prototype,"filterBarriers",void 0),u([A({type:String,json:{write:!0}})],Ui.prototype,"arcadeExpressionBarrier",void 0),u([A({type:String,json:{write:!0}})],Ui.prototype,"circuitName",void 0),u([A({type:String,json:{write:!0}})],Ui.prototype,"domainNetworkName",void 0),u([A({type:String,json:{write:!0}})],Ui.prototype,"filterBitsetNetworkAttributeName",void 0),u([A({type:[Object],json:{write:!0}})],Ui.prototype,"filterFunctionBarriers",void 0),u([A({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Ui.prototype,"filterScope",void 0),u([A({type:Boolean,json:{write:!0}})],Ui.prototype,"includeContainers",void 0),u([A({type:Boolean,json:{write:!0}})],Ui.prototype,"includeContent",void 0),u([A({type:Boolean,json:{write:!0}})],Ui.prototype,"includeIsolated",void 0),u([A({type:Boolean,json:{write:!0}})],Ui.prototype,"includeStructures",void 0),u([A({type:Boolean,json:{write:!0}})],Ui.prototype,"allowIndeterminateFlow",void 0),u([A({type:Boolean,json:{write:!0}})],Ui.prototype,"includeUpToFirstSpatialContainer",void 0),u([A({type:Boolean,json:{write:!0}})],Ui.prototype,"inferConnectivity",void 0),u([A({type:Number,json:{write:!0}})],Ui.prototype,"maxHops",void 0),u([A({type:Object,json:{write:!0}})],Ui.prototype,"nearestNeighbor",void 0),u([A({type:Number,json:{write:!0}})],Ui.prototype,"numPaths",void 0),u([A({type:[Object],json:{write:!0}})],Ui.prototype,"outputFilterCategories",void 0),u([A({type:[Object],json:{write:!0}})],Ui.prototype,"outputFilters",void 0),u([A({type:[Object],json:{write:!0}})],Ui.prototype,"propagators",void 0),u([A({type:String,json:{write:!0}})],Ui.prototype,"subnetworkName",void 0),u([A({type:String,json:{write:!0}})],Ui.prototype,"targetTierName",void 0),u([A({type:String,json:{write:!0}})],Ui.prototype,"diagramTemplateName",void 0),u([A({type:String,json:{write:!0}})],Ui.prototype,"tierName",void 0),u([A({type:Boolean,json:{write:!0}})],Ui.prototype,"validateLocatability",void 0),Ui=u([B("esri.networks.support.UNTraceConfiguration")],Ui);const YBe=Ui;let $o=class extends I4{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?YBe.fromJSON(e):DB.fromJSON(e)}};u([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],$o.prototype,"globalId",void 0),u([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],$o.prototype,"title",void 0),u([A({type:DB,json:{origins:{service:{read:!0,write:!0}},read:!1}})],$o.prototype,"traceConfiguration",void 0),u([Me("service","traceConfiguration")],$o.prototype,"readTraceConfiguration",null),u([A({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],$o.prototype,"creationDate",void 0),u([A({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],$o.prototype,"creator",void 0),u([A({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],$o.prototype,"description",void 0),u([A({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],$o.prototype,"minStartingPoints",void 0),u([A({json:{origins:{service:{read:!0,write:!0}},read:!1}})],$o.prototype,"resultTypes",void 0),u([A({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],$o.prototype,"tags",void 0),u([A({type:_E.apiValues,json:{type:_E.jsonValues,origins:{service:{read:_E.read,write:_E.write}},read:!1}})],$o.prototype,"traceType",void 0),$o=u([B("esri.networks.support.NamedTraceConfiguration")],$o);const XBe=$o;function KBe(t){var _,S,E,C,M,P,D,F,U,G,Q;const e=t==null?void 0:t.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",s="fromterminalid",n="tonetworksourceid",o="toglobalid",a="toterminalid",l="status",c="associationtype",h="iscontentvisible",y="percentalong",g="globalid";return{fromNetworkSourceId:((_=e==null?void 0:e.get(i))==null?void 0:_.name)??i,fromGlobalId:((S=e==null?void 0:e.get(r))==null?void 0:S.name)??r,fromTerminalId:((E=e==null?void 0:e.get(s))==null?void 0:E.name)??s,toNetworkSourceId:((C=e==null?void 0:e.get(n))==null?void 0:C.name)??n,toGlobalId:((M=e==null?void 0:e.get(o))==null?void 0:M.name)??o,toTerminalId:((P=e==null?void 0:e.get(a))==null?void 0:P.name)??a,status:((D=e==null?void 0:e.get(l))==null?void 0:D.name)??l,associationType:((F=e==null?void 0:e.get(c))==null?void 0:F.name)??c,isContentVisible:((U=e==null?void 0:e.get(h))==null?void 0:U.name)??h,percentAlong:((G=e==null?void 0:e.get(y))==null?void 0:G.name)??y,globalId:((Q=e==null?void 0:e.get((t==null?void 0:t.globalIdField)??g))==null?void 0:Q.name)??g}}function Adt(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const s=e.fieldsIndex.get("assetgroup"),n=e.fieldsIndex.get("assettype");return[s==null?void 0:s.name,n==null?void 0:n.name].filter((o=>o!=null))}return[]}let ja=class extends et{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var e;(e=this.associationsTable)==null||e.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const{associationsTableUrl:e}=this;if(!e)throw new te("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new rt({url:e})}return await this.associationsTable.load(),this.associationsTable}};u([A({constructOnly:!0})],ja.prototype,"rulesTableId",void 0),u([A({constructOnly:!0})],ja.prototype,"rulesTableUrl",void 0),u([A({constructOnly:!0})],ja.prototype,"subnetworksTableId",void 0),u([A({constructOnly:!0})],ja.prototype,"subnetworksTableUrl",void 0),u([A({constructOnly:!0})],ja.prototype,"dirtyAreasLayerId",void 0),u([A({constructOnly:!0})],ja.prototype,"dirtyAreasLayerUrl",void 0),u([A()],ja.prototype,"associationsTable",void 0),u([A({constructOnly:!0})],ja.prototype,"associationsTableId",void 0),u([A({constructOnly:!0})],ja.prototype,"associationsTableUrl",void 0),ja=u([B("esri.networks.support.NetworkSystemLayers")],ja);let Cg=class extends pe{constructor(e){super(e),this.id=null,this.name=null}};u([A({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Cg.prototype,"id",void 0),u([A({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Cg.prototype,"name",void 0),u([A({type:Boolean,json:{write:!0}})],Cg.prototype,"isUpstreamTerminal",void 0),Cg=u([B("esri.networks.support.Terminal")],Cg);const eje=Cg,$E=new Ot({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Zh=class extends pe{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};u([A({type:String,json:{write:!0}})],Zh.prototype,"defaultConfiguration",void 0),u([A({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Zh.prototype,"id",void 0),u([A({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Zh.prototype,"name",void 0),u([A({type:[eje],json:{write:!0}})],Zh.prototype,"terminals",void 0),u([A({type:$E.apiValues,json:{type:$E.jsonValues,read:$E.read,write:$E.write}})],Zh.prototype,"traversabilityModel",void 0),Zh=u([B("esri.networks.support.TerminalConfiguration")],Zh);let Tg=class extends pe{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};u([A({type:Tr,json:{write:!0},readOnly:!0})],Tg.prototype,"line",void 0),u([A({type:Za,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],Tg.prototype,"multipoint",void 0),u([A({type:zi,json:{write:!0},readOnly:!0})],Tg.prototype,"polygon",void 0),Tg=u([B("esri.rest.networks.support.AggregatedGeometry")],Tg);const tje=Tg;let Io=class extends pe{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};u([A({json:{write:!1}})],Io.prototype,"type",void 0),u([A({type:Number,json:{write:!0}})],Io.prototype,"assetGroupCode",void 0),u([A({type:Number,json:{write:!0}})],Io.prototype,"assetTypeCode",void 0),u([A({type:String,json:{write:!0}})],Io.prototype,"globalId",void 0),u([A({type:Number,json:{write:!0}})],Io.prototype,"networkSourceId",void 0),u([A({type:Number,json:{write:!0}})],Io.prototype,"objectId",void 0),u([A({type:Number,json:{write:!0}})],Io.prototype,"positionFrom",void 0),u([A({type:Number,json:{write:!0}})],Io.prototype,"positionTo",void 0),u([A({type:Number,json:{write:!0}})],Io.prototype,"terminalId",void 0),Io=u([B("esri.rest.networks.support.NetworkElement")],Io);let tu=class extends Io{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};u([A({json:{write:!1}})],tu.prototype,"type",void 0),u([A({json:{write:!0}})],tu.prototype,"firstUnit",void 0),u([A({json:{write:!0}})],tu.prototype,"numUnits",void 0),tu=u([B("esri.rest.networks.support.TelecomNetworkElement")],tu);let Fh=class extends pe{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new tu({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new tu({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};u([A({type:tu,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],Fh.prototype,"edgeElement",void 0),u([Me("edgeElement")],Fh.prototype,"readEdgeElement",null),u([Ne("edgeElement")],Fh.prototype,"writeEdgeElement",null),u([A({type:tu,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],Fh.prototype,"junctionElement",void 0),u([Me("junctionElement")],Fh.prototype,"readJunctionElement",null),u([Ne("junctionElement")],Fh.prototype,"writeJunctionElement",null),Fh=u([B("esri.rest.networks.support.CircuitPathConnectivityElement")],Fh);const ije=Fh,EE=new Ot({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"});let Lc=class extends pe{constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null}};u([A({type:String,json:{write:!0}})],Lc.prototype,"globalId",void 0),u([A({type:Boolean,json:{write:!0}})],Lc.prototype,"isFilterBarrier",void 0),u([A({type:Number,json:{write:!0}})],Lc.prototype,"percentAlong",void 0),u([A({type:Number,json:{write:!0}})],Lc.prototype,"terminalId",void 0),u([A({type:EE.apiValues,json:{type:EE.jsonValues,read:{reader:EE.read,source:"traceLocationType"},write:{writer:EE.write,target:"traceLocationType"}}})],Lc.prototype,"type",void 0),u([A({type:Number,json:{write:!0}})],Lc.prototype,"firstUnit",void 0),u([A({type:Number,json:{write:!0}})],Lc.prototype,"numUnits",void 0),Lc=u([B("esri.rest.networks.support.TraceLocation")],Lc);const PJ=Lc;let zh=class extends pe{constructor(e){super(e),this.pathId=null,this.orderId=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};u([A({type:Number,json:{write:!0}})],zh.prototype,"pathId",void 0),u([A({type:Number,json:{write:!0}})],zh.prototype,"orderId",void 0),u([A({type:PJ,json:{write:!0}})],zh.prototype,"startingPoint",void 0),u([A({type:PJ,json:{write:!0}})],zh.prototype,"stoppingPoint",void 0),u([A({type:[ije],json:{write:!0}})],zh.prototype,"pathConnectivity",void 0),u([A({type:Tr,json:{write:!0}})],zh.prototype,"geometry",void 0),zh=u([B("esri.rest.networks.support.CircuitPath")],zh);const NB=zh;let XA=class extends pe{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){var s;const r=(s=i.sections)==null?void 0:s.map((n=>({...n,path:NB.fromJSON(n.path)})));return{name:i.name,globalId:i.globalId,isSectioned:i.isSectioned,sectionOrder:i.sectionOrder,startLocation:i.startLocation,stopLocation:i.stopLocation,sections:r,subcircuits:i.subcircuits,lastVerifiedTime:i.lastVerifiedTime?new Date(i.lastVerifiedTime):null,lastExportedTime:i.lastExportedTime?new Date(i.lastExportedTime):null,circuitType:i.circuitType,status:i.status}}};u([A({type:Object,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],XA.prototype,"circuit",void 0),u([Me("circuit")],XA.prototype,"readCircuit",null),u([A({type:Tr,json:{write:!0}})],XA.prototype,"geometry",void 0),u([A({type:NB,json:{write:!0}})],XA.prototype,"path",void 0),XA=u([B("esri.rest.networks.support.CircuitTraceResult")],XA);const rje=XA;let Mg=class extends pe{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};u([A({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],Mg.prototype,"functionType",void 0),u([A({type:String,json:{write:!0},readOnly:!0})],Mg.prototype,"networkAttributeName",void 0),u([A({type:Number,json:{write:!0},readOnly:!0})],Mg.prototype,"result",void 0),Mg=u([B("esri.rest.networks.support.FunctionResult")],Mg);const sje=Mg;let na=class extends pe{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null?i.elements.map((r=>"firstUnit"in r&&"numUnits"in r?new tu({...r}):new Io({...r}))):[]}writeNetworkElements(e,i){i.elements=e.map((r=>r.toJSON()))}};u([A({type:tje,json:{write:!0},readOnly:!0})],na.prototype,"aggregatedGeometry",void 0),u([A({type:[rje],json:{write:!0},readOnly:!0})],na.prototype,"circuits",void 0),u([A({type:[Io],json:{write:!0},readOnly:!0})],na.prototype,"elements",void 0),u([Me("elements")],na.prototype,"readNetworkElements",null),u([Ne("elements")],na.prototype,"writeNetworkElements",null),u([A({type:[sje],json:{write:!0},readOnly:!0})],na.prototype,"globalFunctionResults",void 0),u([A({type:Boolean,json:{write:!0},readOnly:!0})],na.prototype,"kFeaturesForKNNFound",void 0),u([A({type:[NB],json:{write:!0},readOnly:!0})],na.prototype,"paths",void 0),u([A({type:Boolean,json:{write:!0},readOnly:!0})],na.prototype,"startingPointsIgnored",void 0),u([A({type:[String],json:{write:!0},readOnly:!0})],na.prototype,"warnings",void 0),na=u([B("esri.rest.networks.support.TraceResult")],na);const nje=ys()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let KA=class extends na{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await ei(this.statusUrl,i),s=r.traceResults?{...r.traceResults,...r}:r;return this.read(s),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise(((s,n)=>{this._clearTimer();const o=setInterval((()=>{this._timer||n(Hi()),this.checkJobStatus().then((a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":r&&r(this)}}),(a=>{this._clearTimer(),n(a)}))}),i);this._timer=o}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([A({type:String,json:{write:!0}})],KA.prototype,"statusUrl",void 0),u([it(nje)],KA.prototype,"status",void 0),u([A({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],KA.prototype,"submissionTime",void 0),u([A({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],KA.prototype,"lastUpdatedTime",void 0),KA=u([B("esri.networks.support.TraceJobInfo")],KA);let Rc=class extends ZBe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map,this._circuitManagerMap=new Map,this._unitIdentifierManager=null}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,i,r,s,n,o,a,l;return new ja({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(s=this.sourceJSON)==null?void 0:s.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(n=this.sourceJSON)==null?void 0:n.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(a=this.sourceJSON)==null?void 0:a.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(l=this.sourceJSON)==null?void 0:l.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map((i=>Zh.fromJSON(i))))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map((i=>i.domainNetworkName)))||[]}get _utilityLayerList(){var i,r;const e=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map((s=>{var n,o;(n=s==null?void 0:s.edgeSources)==null||n.map((({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)})),(o=s==null?void 0:s.junctionSources)==null||o.map((({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)}))})),e}get hasTelecomNetwork(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.some((i=>i.isTelecomNetwork)))??!1}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var c,h,y,g;let i=null,r=null;const s=e.sourceLayer;let n=null;if((s==null?void 0:s.type)==="feature"){if(n=s.layerId,n===null)return null}else if((s==null?void 0:s.type)!=="subtype-sublayer"||(n=((c=s==null?void 0:s.parent)==null?void 0:c.layerId)??null,n===null))return null;const o=e.attributes;if(o==null)return null;for(const _ of Object.keys(o))_.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(_)),_.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(_));if(!this.dataElement)return null;let a=null;const l=this.dataElement.domainNetworks;for(const _ of l){const S=(h=_.junctionSources)==null?void 0:h.find((E=>E.layerId===n));if(S){const E=(y=S.assetGroups)==null?void 0:y.find((C=>C.assetGroupCode===i));if(E){const C=(g=E.assetTypes)==null?void 0:g.find((M=>M.assetTypeCode===r));if(C!=null&&C.isTerminalConfigurationSupported){a=C.terminalConfigurationId;break}}}}if(a!=null){const _=this.dataElement.terminalConfigurations,S=_==null?void 0:_.find((E=>E.terminalConfigurationId===a));return S?Zh.fromJSON(S):null}return null}getTierNames(e){var r,s;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find((n=>n.domainNetworkName===e));return((s=i==null?void 0:i.tiers)==null?void 0:s.map((n=>n.name)))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}async getCircuitManager(e){var s;if(!this.hasTelecomNetwork)return null;const i=(s=this.dataElement)==null?void 0:s.domainNetworks.find((n=>n.domainNetworkName===e&&n.isTelecomNetwork));if(!i)return null;const{default:r}=await Ie(()=>import("./CircuitManager-NquuvLWa.js"),[],import.meta.url);return F0(this._circuitManagerMap,e,(()=>new r({utilityNetwork:this,telecomDomainNetwork:i})))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await Ie(()=>import("./UnitIdentifierManager-CeXZR0N-.js"),[],import.meta.url);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach((r=>{r.terminals.forEach((s=>{this._terminalById.set(s.id,s)}))})),this._terminalById.get(e))}isUtilityLayer(e){var i,r;return"layerId"in e?this._utilityLayerList.has(e==null?void 0:e.layerId)&&(((i=e.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(((r=e.parent.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:s}]=await Promise.all([Ie(()=>import("./queryAssociations-C7yJYKAZ.js"),__vite__mapDeps([261,262]),import.meta.url),Ie(()=>import("./QueryAssociationsParameters-C-wmBb3G.js"),[],import.meta.url)]),n=s.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await r(this.networkServiceUrl,n,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([Ie(()=>import("./synthesizeAssociationGeometries-BzG-hLYU.js"),__vite__mapDeps([263,262]),import.meta.url),Ie(()=>import("./SynthesizeAssociationGeometriesParameters-B4eOxlxX.js"),[],import.meta.url)]),s=r.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,i(this.networkServiceUrl,s)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([Ie(()=>import("./trace-BN_StAnG.js"),[],import.meta.url),Ie(()=>import("./TraceParameters-CEoFnJHf.js"),[],import.meta.url)]),s=r.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,i(this.networkServiceUrl,s)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([Ie(()=>import("./trace-BN_StAnG.js"),[],import.meta.url),Ie(()=>import("./TraceParameters-CEoFnJHf.js"),[],import.meta.url)]),s=r.from(e);s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment;const n=await i(this.networkServiceUrl,s);return new KA({statusUrl:n})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:s}=e;if(!r||!s)return!1;await i.load();let n=null;switch(e.associationType){case"containment":n=i.rulesCategorized.containment;break;case"attachment":n=i.rulesCategorized.attachment;break;default:n=i.rulesCategorized.connectivity}return n.some((o=>Q2(o,r,s)))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:s,fromTerminalId:n,toNetworkSourceId:o,toGlobalId:a,toTerminalId:l,associationType:c,isContentVisible:h,percentAlong:y,globalId:g}=KBe(i);return{addFeatures:e.map((_=>{var S,E,C,M,P,D;return new Qi({attributes:{[r]:(S=_.fromNetworkElement)==null?void 0:S.networkSourceId,[s]:(E=_.fromNetworkElement)==null?void 0:E.globalId,[n]:(C=_.fromNetworkElement)==null?void 0:C.terminalId,[o]:(M=_.toNetworkElement)==null?void 0:M.networkSourceId,[a]:(P=_.toNetworkElement)==null?void 0:P.globalId,[l]:(D=_.toNetworkElement)==null?void 0:D.terminalId,[c]:HBe[_.associationType],[h]:_.isContentVisible==null?void 0:_.isContentVisible?1:0,[y]:_.percentAlong,[g]:_.globalId}})})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers;return{deleteFeatures:e.map((s=>({globalId:s.globalId}))),id:r,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(e){var s;if(((s=this.sharedNamedTraceConfigurations)==null?void 0:s.length)===0)return;const i=this.sharedNamedTraceConfigurations.map((n=>n.globalId)),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const n of this.sharedNamedTraceConfigurations){const o=r==null?void 0:r.find((a=>a.globalId===n.globalId));if(o){const a=o.write({},{origin:"service"});n.read(a,{origin:"service"})}}}async _createRulesTable(){var o;const e=this.networkSystemLayers.rulesTableUrl,i=new rt({url:e});await i.load();const r=(o=this.dataElement)==null?void 0:o.domainNetworks;if(!r)return null;const s=r.flatMap((a=>[...a.edgeSources||[],...a.junctionSources||[]])),n=(await oje(i)).map((a=>this._hydrateRuleInfo(i,s,a)));return new Cp({rulesLayer:i,rules:n})}_hydrateRuleInfo(e,i,r){const s=e.fieldsIndex,n=s.get("RULETYPE"),o=s.get("CREATIONDATE"),a=s.get("FROMNETWORKSOURCEID"),l=s.get("FROMASSETGROUP"),c=s.get("FROMASSETTYPE"),h=s.get("FROMTERMINALID"),y=s.get("TONETWORKSOURCEID"),g=s.get("TOASSETGROUP"),_=s.get("TOASSETTYPE"),S=s.get("TOTERMINALID"),E=s.get("VIANETWORKSOURCEID"),C=s.get("VIAASSETGROUP"),M=s.get("VIAASSETTYPE"),P=s.get("VIATERMINALID"),D=r.attributes[n.name],F=new Date(r.attributes[o.name]),U=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[c.name],terminalId:r.attributes[h.name]},{networkSourceId:r.attributes[y.name],assetGroupId:r.attributes[g.name],assetTypeId:r.attributes[_.name],terminalId:r.attributes[S.name]},{networkSourceId:r.attributes[E.name],assetGroupId:r.attributes[C.name],assetTypeId:r.attributes[M.name],terminalId:r.attributes[P.name]}];let G;(function(W){W[W.from=0]="from",W[W.to=1]="to",W[W.via=2]="via"})(G||(G={}));const Q={ruleType:D,creationDate:F};for(const W of[G.from,G.to,G.via]){if(D!==Gr.RTEdgeJunctionEdgeConnectivity&&W===G.via)continue;const X=U[W],K=i.find((le=>le.sourceId===X.networkSourceId)),de=K==null?void 0:K.assetGroups.find((le=>le.assetGroupCode===X.assetGroupId)),ye=de==null?void 0:de.assetTypes.find((le=>le.assetTypeCode===X.assetTypeId)),xe=this._getTerminal(ye,X);let ee="";switch(W){case G.from:ee="from";break;case G.to:ee="to";break;case G.via:ee="via"}Q[`${ee}NetworkSource`]=K,Q[`${ee}AssetGroup`]=de,Q[`${ee}AssetType`]=ye,Q[`${ee}Terminal`]=xe==null?void 0:xe.toJSON()}return Q}_getTerminal(e,i){var n,o;const r=e==null?void 0:e.terminalConfigurationId,s=(n=this.terminalConfigurations)==null?void 0:n.find((a=>a.id===r));return((o=s==null?void 0:s.terminals)==null?void 0:o.find((a=>a.id===i.terminalId)))??null}};async function oje(t){const e=new ut({where:"1=1",outFields:["*"]});return(await Jse(t,e)).features}u([A({type:[XBe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Rc.prototype,"sharedNamedTraceConfigurations",void 0),u([A({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Rc.prototype,"type",void 0),u([A({readOnly:!0})],Rc.prototype,"serviceTerritoryFeatureLayerId",null),u([A({readOnly:!0})],Rc.prototype,"networkSystemLayers",null),u([A({readOnly:!0})],Rc.prototype,"terminalConfigurations",null),u([A({readOnly:!0})],Rc.prototype,"domainNetworkNames",null),u([A({readOnly:!0})],Rc.prototype,"hasTelecomNetwork",null),Rc=u([B("esri.networks.UtilityNetwork")],Rc);const Cue=Rc,aje=Object.freeze(Object.defineProperty({__proto__:null,default:Cue},Symbol.toStringTag,{value:"Module"}));let kg=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};u([A({type:String,json:{write:{isRequired:!0}}})],kg.prototype,"expression",void 0),u([A({type:["number","string"],json:{write:!0}})],kg.prototype,"returnType",void 0),u([A({type:String,json:{write:!0}})],kg.prototype,"title",void 0),kg=u([B("esri.webdoc.geotriggersInfo.ExpressionInfo")],kg);const Tue=kg,IE=new Ot({deviceLocation:"device-location"});let J2=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};u([A({type:Tue,json:{write:!0}})],J2.prototype,"filterExpression",void 0),u([A({type:IE.apiValues,readOnly:!0,json:{type:IE.jsonValues,read:IE.read,write:IE.write}})],J2.prototype,"type",void 0),J2=u([B("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],J2);const lje=J2;let Z2=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.geometry=null,this.where=null}};u([A({types:E1,json:{read:Ju,write:!0}})],Z2.prototype,"geometry",void 0),u([A({type:String,json:{write:!0}})],Z2.prototype,"where",void 0),Z2=u([B("esri.webdoc.geotriggersInfo.FeatureFilter")],Z2);const cje=Z2;let Pg=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};u([A({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],Pg.prototype,"layerId",void 0),u([A({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],Pg.prototype,"layerUrl",void 0),u([it({featureLayer:"feature-layer"},{readOnly:!0})],Pg.prototype,"type",void 0),Pg=u([B("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Pg);const uje=Pg;let em=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};u([A({type:uje,json:{write:{isRequired:!0}}})],em.prototype,"fenceSource",void 0),u([A({type:cje,json:{write:!0}})],em.prototype,"filter",void 0),u([A({type:Number,json:{write:!0}})],em.prototype,"bufferDistance",void 0),u([it({features:"features"},{readOnly:!0})],em.prototype,"type",void 0),em=u([B("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],em);const hje=em;let CC=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.type="fence"}};u([it({fence:"fence"},{readOnly:!0})],CC.prototype,"type",void 0),CC=u([B("esri.webdoc.geotriggersInfo.Geotrigger")],CC);const Mue=CC;let Y2=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};u([A({type:Tue,json:{write:!0}})],Y2.prototype,"expressionInfo",void 0),u([A({type:[String],json:{write:!0}})],Y2.prototype,"requestedActions",void 0),Y2=u([B("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],Y2);const dje=Y2,pje=new Ot({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),fje=new Ot({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),CE=new Ot({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Ol=class extends Mue{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};u([it(pje)],Ol.prototype,"enterExitRule",void 0),u([A({type:lje,json:{write:{isRequired:!0}}})],Ol.prototype,"feed",void 0),u([it(fje)],Ol.prototype,"feedAccuracyMode",void 0),u([A({type:CE.apiValues,json:{type:CE.jsonValues,read:CE.read,write:{writer:CE.write,isRequired:!0}}})],Ol.prototype,"fenceNotificationRule",void 0),u([A({type:hje,json:{write:{isRequired:!0}}})],Ol.prototype,"fenceParameters",void 0),u([A({type:String,json:{write:!0}})],Ol.prototype,"name",void 0),u([A({type:dje,json:{write:!0}})],Ol.prototype,"notificationOptions",void 0),u([it({fence:"fence"},{readOnly:!0})],Ol.prototype,"type",void 0),Ol=u([B("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Ol);const Aje=Ol,mje={base:Mue,key:"type",typeMap:{fence:Aje}};let TC=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.geotriggers=null}};u([A({types:[mje],json:{write:{isRequired:!0}}})],TC.prototype,"geotriggers",void 0),TC=u([B("esri.webdoc.GeotriggersInfo")],TC);const yje=TC;let MC=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.enabled=!0}};u([A({type:Boolean,nonNullable:!0,json:{write:!0}})],MC.prototype,"enabled",void 0),MC=u([B("esri.webdoc.ips.AppleIPSProperties")],MC);const gje=MC;let kC=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.enabled=!0}};u([A({type:Boolean,nonNullable:!0,json:{write:!0}})],kC.prototype,"enabled",void 0),kC=u([B("esri.webdoc.ips.GNSSProperties")],kC);const vje=kC;let Lg=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};u([A({type:Boolean,nonNullable:!0,json:{write:!0}})],Lg.prototype,"enabled",void 0),u([A({type:Number,nonNullable:!0,json:{write:!0}})],Lg.prototype,"distance",void 0),u([A({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],Lg.prototype,"units",void 0),Lg=u([B("esri.webdoc.ips.PathSnappingProperties")],Lg);const bje=Lg;let PC=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.enabled=!0}};u([A({type:Boolean,nonNullable:!0,json:{write:!0}})],PC.prototype,"enabled",void 0),PC=u([B("esri.webdoc.ips.SmoothingProperties")],PC);const wje=PC;let tm=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};u([A({type:gje,json:{name:"AppleIPS",write:!0}})],tm.prototype,"appleIPS",void 0),u([A({type:vje,json:{name:"GNSS",write:!0}})],tm.prototype,"gnss",void 0),u([A({type:wje,json:{write:!0}})],tm.prototype,"smoothing",void 0),u([A({type:bje,json:{write:!0}})],tm.prototype,"pathSnapping",void 0),tm=u([B("esri.webdoc.ips.Configuration")],tm);const _je=tm;let Rg=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:s}=i;if(s)return new wt({id:s,portal:r==null?void 0:r.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}};u([A({type:wt,json:{write:{isRequired:!0}}})],Rg.prototype,"portalItem",void 0),u([Me("portalItem",["itemId"])],Rg.prototype,"readPortalItem",null),u([Ne("portalItem",{itemId:{type:String}})],Rg.prototype,"writePortalItem",null),Rg=u([B("esri.webdoc.ips.PositioningService")],Rg);const Sje=Rg;let X2=class extends dt.ClonableMixin(pe){constructor(e){super(e),this.positioningService=null,this.configuration=null}};u([A({type:Sje,json:{write:{isRequired:!0}}})],X2.prototype,"positioningService",void 0),u([A({type:_je,json:{write:!0}})],X2.prototype,"configuration",void 0),X2=u([B("esri.webdoc.IPSInfo")],X2);const xje=X2,$je={currentVersion:pue,createInitialViewProperties:()=>new PM,parseVersion:Tv.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},Eje=qe.ofType(Cue);var Ib;let im=(Ib=class extends jBe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return $je}loadAll(){return lP(this,(e=>{var i,r;e(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)}))}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new te("webmap:empty-resource","Expected a JSON resource but got nothing")}},Ib.VERSION=pue,Ib);u([A({type:yje,json:{write:!0}})],im.prototype,"geotriggersInfo",void 0),u([A({type:xje,json:{write:!0,name:"mapIPSInfo"}})],im.prototype,"ipsInfo",void 0),u([A({json:{write:!0}})],im.prototype,"presentation",void 0),u([A({type:Eje,json:{read:!0,write:!0}})],im.prototype,"utilityNetworks",void 0),im=u([B("esri.WebMap")],im);const Ije=im;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */function TE(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const e=Cje(t);if(!e){const i=Oje(t);if(!i){Pue(t);return}return RJ(i,t,!0),i}return Tje(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?Mje(e,t):e.localName==="arcgis-placement"?kje(e,t):RJ(e,t,!1)),e}function Cje({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(LJ.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&LJ.has(e.ownedBy.localName))return e.ownedBy}}const LJ=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function Tje(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function xP(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let s=function(n){n.target===t&&(xP(t,e,i),t.removeEventListener(i,s))};t.addEventListener(i,s)}}const Mje=(t,e)=>xP(t,i=>{var r;e.el.childElem&&t.content!=null&&t.content.append(e.el.childElem),t.expandIcon=e.icon||((r=e.widget)==null?void 0:r.icon)||t.expandIcon,e.position=t.position,e.el.view=i}),kje=(t,e)=>xP(t,i=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=t.position,e.el.view=i}),RJ=(t,e,i)=>xP(t,r=>{i?Pue(e):e.el.childElem&&Pje(t,e),e.el.view=r},"arcgisViewReadyChange");function Pje(t,e){var l;const i=e.el.childElem??e.el,r=t==null?void 0:t.childElem,s=[...t.children],n={};for(const c of s){if(c===r)continue;const h=c.position??"manual";n[h]??(n[h]=[]),n[h].push({child:c,position:h,index:s.indexOf(c)})}const o=(l=n[e.position??"manual"])==null?void 0:l.findIndex(({child:c})=>c===e.el),a=t.view.ui;a.remove(i),a.add(i,{position:e.position,index:o})}function Lje(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function Rje(t,e){return kue(e==null?void 0:e.center,t)}function kue(t,e){if(typeof e=="string")return kue(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],s=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||s!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}function Pue(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function Oje(t,e){const i=t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),s=t.el.getRootNode();return(r?void 0:s.querySelector(`#${i}`))??s.querySelector(i)??void 0}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const Dje=Li`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,Nje=lae(Ije),Fje=lae(uBe);var If;let zje=(If=class extends zx{constructor(){super(),this._map=Nje(this),this.view=Fje(this),this.allLayerViews=this.view.allLayerViews,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewChange=Jb(),this.arcgisViewClick=Er(()=>this.view,"click"),this.arcgisViewDoubleClick=Er(()=>this.view,"double-click"),this.arcgisViewDrag=Er(()=>this.view,"drag"),this.arcgisViewHold=Er(()=>this.view,"hold"),this.arcgisViewImmediateClick=Er(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=Er(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=Er(()=>this.view,"key-down"),this.arcgisViewKeyUp=Er(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=Er(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=Er(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=Er(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=Er(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=Er(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=Er(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=Er(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=Er(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=Er(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=Jb(),this.view.ui={components:["attribution"]}}get center(){return this.view.center}set center(e){const i=Rje(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){var i;e&&!((i=this.extent)!=null&&i.equals(e))&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){var e;return(e=this._map.portalItem)==null?void 0:e.id}set itemId(e){yRe(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){Lje(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){var r;(r=this.map)==null||r.add(e,i)}async addLayers(e,i){var r;(r=this.map)==null||r.addMany(e,i)}async addTable(e){var i;(i=this.map)==null||i.tables.add(e)}async addTables(e,i){var r;(r=this.map)==null||r.tables.addMany(e,i)}async closePopup(){this.view.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){await this.view.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async whenLayerView(e){return await this.view.whenLayerView(e)}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e==null?void 0:e()).catch(i)}load(){const e=this;e.el.childElem=document.createElement("div"),e.el.append(e.el.childElem),this.view.container=e.el.childElem}loaded(){this.map||(this.map=this._map),this.manager.onLifecycle(()=>[He(()=>this.map,e=>{e&&(this._map=e)},{initial:!0,sync:!0}),He(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),He(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}},If.properties={_map:16,view:32,allLayerViews:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9},If.shadowRootOptions=M0,If.styles=Dje,If);jx("arcgis-map",zje);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Bje(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const Kf=()=>Bje([2,1,1,1,3]),jje=t=>(...e)=>{const i=jce(),r=new t(...e),s=r.exports;Bce(i.at(-1));const n=r.component.manager;n.W(r,s),r.watchExports(n.W.bind(n,r)),Wze(r);const o=[r.component,...i].reverse();return Uce(o,a=>a===void 0?void 0:Uje(r,a,s),s)},Uje=(t,{host:e,key:i,isReactive:r},s)=>{var y;const n=e,o=n[i]!==t.exports,a=n[i]!==s,l=s!==t.exports;if(o&&!a&&l&&(n[i]=t.exports),e===t.component){if(r){const g=t.component.manager;a&&g.W(t,n[i]),t.onUpdate(_=>{if(_.has(i)){const S=n[i];S!==t.exports&&g.W(t,S)}})}t.O=r?void 0:i}const h=(y=t.component.constructor.elementProperties.get(i))==null?void 0:y.readOnly;t.watchExports(()=>{n[i]!==t.exports&&(h?Yze(()=>{n[i]=t.exports}):n[i]=t.exports)})},Vje=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},Gje=(t,e,i)=>{const r=Hje(e).subscribe;return r(s=>{s.some(o=>Vje(t,o.target))&&i()})},_O={},Hje=t=>{const e=t.join(","),i=_O[e];if(i!==void 0)return i;const r=new Set,s=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const n={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(s.disconnect(),_O[e]=void 0)})};return _O[e]=n,n},qje=(t,e)=>{var r,s;let i=t;for(;i;){const n=(r=i.closest)==null?void 0:r.call(i,e);if(n)return n;const o=(s=i.getRootNode)==null?void 0:s.call(i);if(o===globalThis.document)return;i=o.host}},Wje=(t,e,i)=>{const r=qje(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},Qje="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),Jje=new Set(Qje),RM="en",Zje={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},Yje=async(t,e,i="")=>{const r=`${e}/${i}`,s=`${r}${t}.json`;return SO[s]??(SO[s]=Lue(t,r)),await SO[s]},SO={},Lue=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===RM?{}:await Lue(RM,e)},Rue=t=>{var i;const e=Wje(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||RM);return{lang:e,t9nLocale:Oue(e)}},Oue=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let s=r;return i&&(s=`${r}-${i.toUpperCase()}`),s=Zje[s]??s,Jje.has(s)?s:i?Oue(r):RM},Xje=(t,e,i,r)=>{let s;const n=()=>Kje(t,e(),r).then(o=>{((s==null?void 0:s.lang)!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&i(o),s=o}).catch(console.error);return queueMicrotask(n),Gje(t,["lang"],n)},Kje=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:s}=Rue(t),n=`${e}/${i}/t9n`,a=i===null?{}:await Yje(s,n,"messages.");return{lang:r,t9nLocale:s,t9nStrings:a}},e9e=t=>Due(void 0,t),FB=t=>e=>Due(e,t);let t9e=class extends LB{constructor(e,i){super(e);const r=this.exports;try{av(this.component);const s=i(this.component,this),n=this.exports!==r;if(qze(s)){n||this.setProvisionalExports(s);const o=s.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!n||s!==void 0)&&(this.exports=s),queueMicrotask(()=>super.catchUpLifecycle())}catch(s){this.P.reject(s),console.error(s)}}catchUpLifecycle(){}};const Due=jje(t9e),zB=(t,e)=>new i9e(t,e);var Cb,Tb,ax;class i9e extends LB{constructor(i,r){super();at(this,Cb);at(this,Tb);at(this,ax);Je(this,Tb,i),Je(this,ax,r),Je(this,Cb,new MutationObserver(s=>{s.forEach(n=>{i.includes(n.attributeName)&&r.call(this.component,this.component.el.getAttribute(n.attributeName),n.oldValue,n.attributeName)})}))}hostConnected(){ue(this,Tb).forEach(i=>{this.component.el.hasAttribute(i)&&ue(this,ax).call(this.component,null,this.component.el.getAttribute(i),i)}),ue(this,Cb).observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:ue(this,Tb)})}hostDisconnected(){ue(this,Cb).disconnect()}}Cb=new WeakMap,Tb=new WeakMap,ax=new WeakMap;const r9e=t=>(e={})=>e9e((i,r)=>{const s=Rue(i.el),n={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>Xje(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:h})=>{const y={...c,_lang:h,_t9nLocale:l,_loading:!1};r.exports=y;const g=c.componentLabel;typeof g=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=g)),a(o.messageOverrides)},e.name));const a=l=>{const c=r.exports,h=c._original??c,y=Nue(h,l);l&&(y._original=h),r.exports=y};return"messageOverrides"in o&&r.onUpdate(l=>{l.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(n,!1),r.ready):n}),Nue=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,s])=>{typeof s=="object"?i[r]=Nue(t[r],s):i[r]=s??t[r]}),i};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const $a=r9e(Yce);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Iy={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},s9e=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,O3=class O3 extends rr{constructor(){super(...arguments),this.messages=$a({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:s,type:n,value:o}=this,a=e.id||Kf(),l=n!=="indeterminate",c=Math.floor(o);return this.el.ariaLabel=r,this.el.ariaValueMax=l?"100":void 0,this.el.ariaValueMin=l?"0":void 0,this.el.ariaValueNow=l?c.toString():void 0,wP(this.el,"id",a),this.el.role="progressbar",Se`<div class=${$e(Iy.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&l&&Se`<div class=${$e(Iy.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&s&&Se`<div class=${$e(Iy.text)}>${s}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:s}=this,n=i?this.getInlineSize(r):this.getSize(r),a=n*.45;let l;if(e==="progress"){const c=2*a*Math.PI,h=(this.type.startsWith("determinate")?s:24)/100*c,y=c-h;l={"stroke-dasharray":`${h} ${y}`}}return Se`<svg aria-hidden=true class=${$e({[Iy.ring]:!0,[Iy.trackRing]:e==="track",[Iy.progressRing]:e==="progress"})} style=${Jce(l)} viewBox=${`0 0 ${n} ${n}`}>${PS`<circle cx=${n/2} cy=${n/2} r=${a??Ge} />`}</svg>`}};O3.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},O3.styles=s9e;let OM=O3;Sr("calcite-loader",OM);const Wdt=Object.freeze(Object.defineProperty({__proto__:null,Loader:OM},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var n9e=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],B6=n9e.join(","),Fue=typeof Element>"u",zS=Fue?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,DM=!Fue&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},NM=function t(e,i){var r;i===void 0&&(i=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),n=s===""||s==="true",o=n||i&&e&&t(e.parentNode);return o},o9e=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},zue=function(e,i,r){if(NM(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(B6));return i&&zS.call(e,B6)&&s.unshift(e),s=s.filter(r),s},Bue=function t(e,i,r){for(var s=[],n=Array.from(e);n.length;){var o=n.shift();if(!NM(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var h=zS.call(o,B6);h&&r.filter(o)&&(i||!e.includes(o))&&s.push(o);var y=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),g=!NM(y,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(y&&g){var _=t(y===!0?o.children:y.children,!0,r);r.flatten?s.push.apply(s,_):s.push({scopeParent:o,candidates:_})}else n.unshift.apply(n,o.children)}}return s},jue=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Uue=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||o9e(e))&&!jue(e)?0:e.tabIndex},a9e=function(e,i){var r=Uue(e);return r<0&&i&&!jue(e)?0:r},l9e=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},Vue=function(e){return e.tagName==="INPUT"},c9e=function(e){return Vue(e)&&e.type==="hidden"},u9e=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},h9e=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},d9e=function(e){if(!e.name)return!0;var i=e.form||DM(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var n=h9e(s,e.form);return!n||n===e},p9e=function(e){return Vue(e)&&e.type==="radio"},f9e=function(e){return p9e(e)&&!d9e(e)},A9e=function(e){var i,r=e&&DM(e),s=(i=r)===null||i===void 0?void 0:i.host,n=!1;if(r&&r!==e){var o,a,l;for(n=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!n&&s;){var c,h,y;r=DM(s),s=(c=r)===null||c===void 0?void 0:c.host,n=!!((h=s)!==null&&h!==void 0&&(y=h.ownerDocument)!==null&&y!==void 0&&y.contains(s))}}return n},OJ=function(e){var i=e.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},m9e=function(e,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var n=zS.call(e,"details>summary:first-of-type"),o=n?e.parentElement:e;if(zS.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=DM(e);if(l&&!l.shadowRoot&&s(l)===!0)return OJ(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(A9e(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return OJ(e);return!1},y9e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return zS.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},j6=function(e,i){return!(i.disabled||NM(i)||c9e(i)||m9e(i,e)||u9e(i)||y9e(i))},DJ=function(e,i){return!(f9e(i)||Uue(i)<0||!j6(e,i))},g9e=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},v9e=function t(e){var i=[],r=[];return e.forEach(function(s,n){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=a9e(a,o),c=o?t(s.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:n,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(l9e).reduce(function(s,n){return n.isScope?s.push.apply(s,n.content):s.push(n.content),s},[]).concat(i)},b9e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=Bue([e],i.includeContainer,{filter:DJ.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:g9e}):r=zue(e,i.includeContainer,DJ.bind(null,i)),v9e(r)},w9e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=Bue([e],i.includeContainer,{filter:j6.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=zue(e,i.includeContainer,j6.bind(null,i)),r};const BB={getShadowRoot:!0};function Jx(t){const r=N1(t,"[dir]");return r?r.getAttribute("dir"):"ltr"}function Zx(t){return t.getRootNode()}function Qdt(t){const e=Zx(t);return"host"in e?e:null}function Gue(t){return t.host||null}function $P(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=Zx(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||$P(Gue(r),{selector:e,id:i})}function N1(t,e){return t?t.closest(e)||N1(Gue(Zx(t)),e):null}function _9e(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function BS(t,e=!1,i="tabbable",r,s){return t?_9e(t)&&r!==t?t.setFocus(s):(i==="tabbable"?S9e:$9e)(t,e,s):void 0}function Hue(t,e){if(t)return b9e(t,{...BB,includeContainer:e})[0]??t}function S9e(t,e,i){var r;(r=Hue(t,e))==null||r.focus(i)}function x9e(t,e){if(t)return w9e(t,{...BB,includeContainer:e})[0]??t}function $9e(t,e,i){var r;(r=x9e(t,e))==null||r.focus(i)}function E9e(t,e){return t.filter(i=>i.matches(e))}function Yb(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function EP(t){return(!!t).toString()}function I9e(t){return qr(t)||M9e(t)}function C9e(t){return k9e(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function T9e(t){var e;for(const i of t.childNodes)if(i.nodeType===Node.TEXT_NODE&&((e=i.textContent)==null?void 0:e.trim())!==""||i.nodeType===Node.ELEMENT_NODE)return!0;return!1}function M9e(t){return!!C9e(t)}function k9e(t){return t.currentTarget.assignedNodes({flatten:!0})}function qr(t){return!!que(t).length}function que(t,e){return P9e(t.currentTarget,e)}function P9e(t,e){const i=t.assignedElements({flatten:!0});return e?E9e(i,e):i}function Wue(t){return!!(t.isPrimary&&t.button===0)}function L9e(t){return t.detail===0}const ME=(t,e,i,r=!0,s=!0,n=!1)=>{const o=t.indexOf(e),a=o===0,l=o===t.length-1;r&&(i=i==="previous"&&a?"last":i==="next"&&l?"first":i);let c;return i==="previous"?c=t[o-1]||t[r?t.length-1:o]:i==="next"?c=t[o+1]||t[r?0:o]:i==="last"?c=t[t.length-1]:c=t[0],BS(c,s,"tabbable",n?c:void 0),c};function R9e(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function Jdt(t,e){return Que(t,e,"animation")}async function O9e(t,e){return Que(t,e,"transition")}function NJ(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(s=>s[r]===i)}async function Que(t,e,i){let r=NJ(t,i,e);if(r||(await U6(),r=NJ(t,i,e)),!!r)try{await r.finished}catch{}}async function U6(){await new Promise(t=>requestAnimationFrame(()=>t()))}function Zdt(t){return t.endsWith("px")?parseFloat(t):t.endsWith("vw")?FJ(parseFloat(t),window.innerWidth):t.endsWith("vh")?FJ(parseFloat(t),window.innerHeight):0}function FJ(t,e){return t*e/100}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function hl(t,e,i){const r=D9e(t);return new r(e,i)}function D9e(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,s){return this.observedEntry.push({target:r,options:s}),super.observe(r,s)}unobserve(r){const s=this.observedEntry.filter(n=>n.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),s.forEach(n=>this.observe(n.target,n.options))}}return(function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver})()}function FM(t,e,i,r){if(t&&(e&&t.unobserve(e),!!i)){if(t instanceof MutationObserver){t.observe(i,r);return}t.observe(i)}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const zJ=new Set,BJ={trace:0,debug:1,info:2,warn:4,error:8,off:10};function N9e(t){return BJ[t]>=BJ[I7e]}function Og(t,...e){if(!N9e(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let xO;const zM={debug:t=>Og("debug",t),info:t=>Og("info",t),warn:t=>Og("warn",t),error:t=>Og("error",t),trace:t=>Og("trace",t),deprecated:F9e};function F9e(t,{component:e,name:i,suggested:r,removalVersion:s}){const n=`${t}:${t==="component"?"":e}${i}`;if(zJ.has(n))return;zJ.add(n);const o=Array.isArray(r);o&&!xO&&(xO=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const a=`[${i}] ${t} is deprecated and will be removed in ${s==="future"?"a future version":`v${s}`}.${r?` Use ${o?xO.format(r.map(l=>`"${l}"`)):`"${r}"`} instead.`:""}`;Og("warn",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const jJ={flipRtl:"flip-rtl",svg:"svg"},Jue={},$O={},Zue={s:16,m:24,l:32};function Yue({icon:t,scale:e}){const i=Zue[e],r=j9e(t),s=r.charAt(r.length-1)==="F";return`${s?r.substring(0,r.length-1):r}${i}${s?"F":""}`}async function z9e(t){const e=Yue(t),i=Xue(e);if(i)return i;$O[e]||($O[e]=fetch(Yce(`./assets/icon/${e}.json`)).then(s=>s.json()).catch(()=>(zM.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await $O[e];return Jue[e]=r,r}function B9e(t){return Xue(Yue(t))}function Xue(t){return Jue[t]}function j9e(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const s=/[a-z]/i;t=i.map((n,o)=>n.replace(s,function(l,c){return o===0&&c===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const U9e=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,D3=class D3 extends rr{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const s={icon:e,scale:i},n=B9e(s)||await z9e(s);e===this.icon&&(this.pathData=n)}waitUntilVisible(e){if(this.intersectionObserver=hl("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:s,textLabel:n}=this,o=Jx(e),a=Zue[s],l=!!n,c=[].concat(r||"");return this.el.ariaHidden=EP(!l),this.el.ariaLabel=l?n:null,this.el.role=l?"img":null,Se`<svg aria-hidden=true class=${$e({[jJ.flipRtl]:o==="rtl"&&i,[jJ.svg]:!0})} fill=currentColor height=100% viewBox=${`0 0 ${a} ${a}`} width=100% xmlns=http://www.w3.org/2000/svg>${c.map(h=>typeof h=="string"?PS`<path d=${h??Ge} />`:PS`<path d=${h.d??Ge} opacity=${("opacity"in h?h.opacity:1)??Ge} />`)}</svg>`}};D3.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},D3.styles=U9e;let BM=D3;Sr("calcite-icon",BM);const V9e=Object.freeze(Object.defineProperty({__proto__:null,Icon:BM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jB=Symbol.for(""),G9e=t=>{if((t==null?void 0:t.r)===jB)return t==null?void 0:t._$litStatic$},H9e=t=>({_$litStatic$:t,r:jB}),jS=(t,...e)=>({_$litStatic$:e.reduce((i,r,s)=>i+(n=>{if(n._$litStatic$!==void 0)return n._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${n}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[s+1],t[0]),r:jB}),UJ=new Map,q9e=t=>(e,...i)=>{const r=i.length;let s,n;const o=[],a=[];let l,c=0,h=!1;for(;c<r;){for(l=e[c];c<r&&(n=i[c],(s=G9e(n))!==void 0);)l+=s+e[++c],h=!0;c!==r&&a.push(n),o.push(l),c++}if(c===r&&o.push(e[r]),h){const y=o.join("$$lit$$");(e=UJ.get(y))===void 0&&(o.raw=o,UJ.set(y,e=o)),i=a}return t(e,...i)},UB=q9e(Se);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const W9e=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function Q9e(t){return`${t.split("-").map((r,s)=>s===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${W9e.includes(t)?"Input":"Change"}`}const V6="hidden-form-input";function VB(t){return"checked"in t}const G6=new WeakMap,GB=new WeakSet;function J9e(t,e){if(N1(e.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let s=!1;return t.addEventListener(r,n=>{s=n.composedPath().some(o=>GB.has(o)),n.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),s}function Z9e(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function Kue(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?N1(t,"calcite-radio-button-group"):t}const Y9e=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function VJ(t){var a;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,r=Kue(e==null?void 0:e.parentElement);if(!r)return;const s=(a=r==null?void 0:r.nodeName)==null?void 0:a.toLowerCase(),n=s==null?void 0:s.split("-");if(n.length<2||n[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in r&&(r.validity=e==null?void 0:e.validity),r.dispatchEvent(Y9e),Z9e(r,{message:i,icon:!0,status:"invalid"});const o=Q9e(s);r.addEventListener(o,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e==null?void 0:e.validity)},{once:!0})}function IP(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",VJ,!0),e.requestSubmit(),e.removeEventListener("invalid",VJ,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r!=null&&r.validationMessage){r==null||r.setFocus();break}}),!0):!1}function ehe(t){var e;(e=t.formEl)==null||e.reset()}function the(t){const{el:e,value:i}=t,r=HB(t);if(!r||J9e(r,e))return;t.formEl=r,t.defaultValue=i,VB(t)&&(t.defaultChecked=t.checked);const s=X9e.bind(t);r.addEventListener("reset",s),G6.set(t.el,s),GB.add(e)}function HB(t){const{el:e,form:i}=t;return i?$P(e,{id:i}):N1(e,"form")}function X9e(){var t;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),VB(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(t=this.onFormReset)==null||t.call(this)}function ihe(t){const{el:e,formEl:i}=t;if(!i)return;const r=G6.get(e);i.removeEventListener("reset",r),G6.delete(e),t.formEl=null,GB.delete(e)}function K9e(t,e){t.defaultValue=e}const H6="calciteInternalHiddenInputInput",rhe=t=>{t.target.dispatchEvent(new CustomEvent(H6,{bubbles:!0}))},GJ=t=>t.removeEventListener("input",rhe);function eUe(t){const{el:e,formEl:i,name:r,value:s}=t,{ownerDocument:n}=e,o=e.querySelectorAll(`input[slot="${V6}"]`);if(!i||!r){o.forEach(y=>{GJ(y),y.remove()});return}const a=Array.isArray(s)?s:[s],l=[],c=new Set;o.forEach(y=>{const g=a.find(_=>_==y.value);g!=null?(c.add(g),HJ(t,y,g)):l.push(y)});let h;a.forEach(y=>{if(c.has(y))return;let g=l.pop();g||(g=n.createElement("input"),g.ariaHidden="true",g.slot=V6),h||(h=n.createDocumentFragment()),h.append(g),g.addEventListener("input",rhe),HJ(t,g,y)}),h&&e.append(h),l.forEach(y=>{GJ(y),y.remove()})}function HJ(t,e,i){var c;const{defaultValue:r,disabled:s,form:n,name:o,required:a}=t;e.defaultValue=r,e.disabled=s,e.name=o,e.required=a,e.tabIndex=-1,n?e.setAttribute("form",n):e.removeAttribute("form"),VB(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(c=t.syncHiddenFormInput)==null||c.call(t,e);const l=Kue(t.el);if(l&&"validity"in l)for(const h in{...e==null?void 0:e.validity})l.validity[h]=e.validity[h]}const she=({component:t})=>(eUe(t),Se`<slot name=${V6}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function tUe(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function nhe(t){t.target.disabled&&t.preventDefault()}const ohe=["mousedown","mouseup","click"];function ahe(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const jM={capture:!0};function Ea(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),iUe(t);return}sUe(t),t.el.removeAttribute("aria-disabled")}function iUe(t){t.el.click=tUe,rUe(t.el)}function rUe(t){t.addEventListener("pointerdown",nhe,jM),ohe.forEach(e=>t.addEventListener(e,ahe,jM))}function sUe(t){delete t.el.click,nUe(t.el)}function nUe(t){t.removeEventListener("pointerdown",nhe,jM),ohe.forEach(e=>t.removeEventListener(e,ahe,jM))}const oUe={container:"interaction-container"},Ia=({children:t,disabled:e})=>Se`<div class=${$e(oUe.container)} .inert=${e}>${t}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const lhe="calciteInternalLabelClick",qB="calciteInternalLabelConnected",q6="calciteInternalLabelDisconnected",qJ="calcite-label",Xb=new WeakMap,G_=new WeakMap,US=new WeakMap,UM=new WeakMap,s0=new Set,aUe=t=>{const{id:e}=t,i=e&&$P(t,{selector:`${qJ}[for="${e}"]`});if(i)return i;const r=N1(t,qJ);return!r||lUe(r,t)?null:r};function lUe(t,e){let i;const r="custom-element-ancestor-check",s=o=>{o.stopImmediatePropagation();const a=o.composedPath();i=a.slice(a.indexOf(e),a.indexOf(t))};return t.addEventListener(r,s,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,s),i.filter(o=>o!==e&&o!==t).filter(o=>{var a;return(a=o.tagName)==null?void 0:a.includes("-")}).length>0}function Yx(t){if(!t)return;const e=aUe(t.el);if(G_.has(e)&&e===t.labelEl||!e&&s0.has(t))return;const i=uUe.bind(t);if(e){t.labelEl=e;const r=Xb.get(e)||[];r.push(t),Xb.set(e,r.sort(che)),G_.has(t.labelEl)||(G_.set(t.labelEl,WJ),t.labelEl.addEventListener(lhe,WJ)),s0.delete(t),document.removeEventListener(qB,US.get(t)),UM.set(t,i),document.addEventListener(q6,i)}else s0.has(t)||(i(),document.removeEventListener(q6,UM.get(t)))}function WB(t){if(!t||(s0.delete(t),document.removeEventListener(qB,US.get(t)),document.removeEventListener(q6,UM.get(t)),US.delete(t),UM.delete(t),!t.labelEl))return;const e=Xb.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(lhe,G_.get(t.labelEl)),G_.delete(t.labelEl)),Xb.set(t.labelEl,e.filter(i=>i!==t).sort(che)),t.labelEl=null}function che(t,e){return R9e(t.el,e.el)?-1:1}function VM(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function WJ(t){const e=t.detail.sourceEvent.target,i=Xb.get(this),r=i.find(o=>o.el===e);if(i.includes(r))return;const n=i[0];n.disabled||n.onLabelClick(t)}function cUe(){s0.has(this)&&Yx(this)}function uUe(){s0.add(this);const t=US.get(this)||cUe.bind(this);US.set(this,t),document.addEventListener(qB,t)}async function Ydt(t){var r;if(await t.componentOnReady(),Xb.has(t))return;const i=(r=t.ownerDocument)==null?void 0:r.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const s of s0)if(s.el===i){Yx(s);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function as(t){return t==="l"?"m":"s"}async function hUe(t){await t.componentOnReady(),await t.updateComplete}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ho=()=>FB((t,e)=>{let i;function r(){i==null||i.abort()}return e.onLoad(()=>{t.listen("focus",()=>{i=new AbortController,t.el.addEventListener("focusout",r,{signal:i.signal})})}),e.onDisconnected(()=>{t.el.removeEventListener("focusout",r)}),async(s,n)=>{if(t.disabled)return;const o=pUe(s());if(!o)return;const{target:a,includeContainer:l,strategy:c}=o,h=Zx(t.el),y=h.activeElement;if(await hUe(t),!(y!==h.activeElement||i&&!(i!=null&&i.signal.aborted)))return t.el.removeEventListener("focus",r),BS(a,l,c,t.el,n)}});function dUe(t){return"target"in t&&("includeContainer"in t||"strategy"in t)}function pUe(t){if(t)return dUe(t)?t:{target:t}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Qo={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},fUe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;box-shadow:var(--calcite-button-shadow, var(--calcite-shadow-none));background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}.icon--start,.icon--end{color:var(--calcite-button-icon-color, var(--calcite-icon-color, var(--calcite-ui-icon-color)))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,N3=class N3 extends rr{constructor(){super(...arguments),this.attributeWatch=zB(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentRef=Rn(),this.mutationObserver=hl("mutation",()=>this.updateHasContent()),this.resizeObserver=hl("resize",()=>this.setTooltipText()),this.focusSetter=Ho()(this),this.messages=$a(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(e){return this.focusSetter(()=>this.childEl,e)}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),Yx(this),this.formEl=HB(this)}async load(){this.updateHasContent()}updated(){Ea(this)}loaded(){this.setTooltipText()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),WB(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=T9e(this.el)}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?IP(this):e==="reset"&&ehe(this))}setTooltipText(){const{contentRef:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){FM(this.resizeObserver,this.childEl,e),this.childEl=e}render(){const e=this.href?"a":"button",i=this.href?jS`a`:jS`button`,r=this.loading?Se`<div class=${$e(Qo.buttonLoader)}><calcite-loader class=${$e(this.loading?Qo.loadingIn:Qo.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,s=!this.iconStart&&!this.iconEnd,n=Se`<calcite-icon class=${$e({[Qo.icon]:!0,[Qo.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${as(this.scale)}></calcite-icon>`,o=Se`<calcite-icon class=${$e({[Qo.icon]:!0,[Qo.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${as(this.scale)}></calcite-icon>`,a=Se`<span class=${$e(Qo.content)} ${ai(this.contentRef)}><slot></slot></span>`;return Ia({disabled:this.disabled,children:UB`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:VM(this)} aria-live=polite class=${$e({[Qo.buttonPadding]:s,[Qo.buttonPaddingShrunk]:!s,[Qo.contentSlotted]:this.hasContent,[Qo.iconStartEmpty]:!this.iconStart,[Qo.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??Ge} href=${(e==="a"&&this.href)??Ge} name=${(e==="button"&&this.name)??Ge} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??Ge} tabindex=${(this.disabled?-1:null)??Ge} target=${(e==="a"&&this.target)??Ge} title=${this.tooltipText??Ge} type=${(e==="button"?this.type:null)??Ge} ${ai(this.setChildEl)}>${r}${this.iconStart?n:null}${this.hasContent?a:null}${this.iconEnd?o:null}</${i}>`})}};N3.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:L0},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},N3.styles=fUe;let GM=N3;Sr("calcite-button",GM);const QB=Object.freeze(Object.defineProperty({__proto__:null,Button:GM},Symbol.toStringTag,{value:"Module"})),AUe=t=>yUe(void 0,t);class mUe extends Xoe{constructor(e,i){super(e);const r=this.exports;try{iv(this.component);const s=i(this.component,this),n=this.exports!==r;if(OLe(s)){n||this.setProvisionalExports(s);const o=s.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!n||s!==void 0)&&(this.exports=s),queueMicrotask(()=>super.catchUpLifecycle())}catch(s){this.P.reject(s),console.error(s)}}catchUpLifecycle(){}}const yUe=Ux(mUe),gUe=t=>(e={})=>AUe((i,r)=>{const s=Foe(i.el),n={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>uLe(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:h})=>{const y={...c,_lang:h,_t9nLocale:l,_loading:!1};r.exports=y;const g=c.componentLabel;typeof g=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=g)),a(o.messageOverrides)},e.name));const a=l=>{const c=r.exports,h=c._original??c,y=uhe(h,l);l&&(y._original=h),r.exports=y};return"messageOverrides"in o&&r.onUpdate(l=>{l.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(n,!1),r.ready):n}),uhe=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,s])=>{typeof s=="object"?i[r]=uhe(t[r],s):i[r]=s??t[r]}),i},JB=t=>bUe,vUe="arcgisPropertyChange",bUe=(...t)=>{const e=P1(),i=nB(vUe,void 0,e);let r=!0;return e.manager.onUpdated(s=>{if(r||!e.el.isConnected){r=!1;return}for(const n of t)s.has(n)&&i.emit({name:n})}),i};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const hhe=gUe(hRe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const wUe=t=>_Ue(t);var rf,lx,Mb,cx,W6,kX;let ZB=(kX=class extends oB{constructor(i){super(i);at(this,cx);at(this,rf,lRe(void 0));at(this,lx);at(this,Mb,!1);const{el:r}=i,s=r.view;this.setProvisionalExports(void 0),Object.defineProperty(r,"view",{get:()=>ue(this,rf).value,set:n=>{if(this.exports===n)return;const o=r.view;ue(this,rf).value=n,this.exports=n,this.component.requestUpdate("view",o),us(this,cx,W6).call(this)},configurable:!0,enumerable:!0}),i!==r&&Object.defineProperty(i,"view",{get:()=>r.view,set:n=>{r.view=n}}),queueMicrotask(()=>s?r.view=s:0)}hostConnected(){this.component.manager.hasDestroy&&(ue(this,lx)??Je(this,lx,hn(()=>{var i;return(i=ue(this,rf).value)==null?void 0:i.destroyed},()=>{var i,r;return void((r=(i=this.component).destroy)==null?void 0:r.call(i).catch(console.error))},{sync:!0})),this.onDestroy(()=>{var i;return(i=ue(this,lx))==null?void 0:i.remove()})),this.component.manager.loadedCalled&&TE(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){var s;const{el:i}=this.component,r=((s=i.shadowRoot)==null?void 0:s.firstElementChild)??i.firstElementChild??void 0;i.childElem??(i.childElem=r),Je(this,Mb,!0),us(this,cx,W6).call(this),i.isConnected&&TE(this.component)}hostDisconnected(){var i,r;typeof this.component.el.childElem=="object"&&((r=(i=ue(this,rf).value)==null?void 0:i.ui)==null||r.remove(this.component.el.childElem))}hostUpdate(i){i.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&TE(this.component),i.has("referenceElement")&&TE(this.component)}},rf=new WeakMap,lx=new WeakMap,Mb=new WeakMap,cx=new WeakSet,W6=function(){!ue(this,Mb)||ue(this,rf).value==null||(Je(this,Mb,!1),this.component.arcgisReady.emit())},kX);const _Ue=Ux(ZB);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const Cy={base:"arcgis-zoom",horizontalLayout:"arcgis-zoom--horizontal",button:"esri-widget--button",zoomIn:"arcgis-zoom__zoom-in",zoomOut:"arcgis-zoom__zoom-out"};function SUe(t){var r;if(t.type==="3d")return!!t.ready;if(!(t!=null&&t.ready))return!1;const e=dhe(t),i=(r=t.constraints)==null?void 0:r.effectiveMaxScale;return i===0||e>i}function xUe(t){var r;if(t.type==="3d")return!!t.ready;if(!(t!=null&&t.ready))return!1;const e=dhe(t),i=(r=t.constraints)==null?void 0:r.effectiveMinScale;return i===0||e<i}function dhe(t){var i;const e=(i=t==null?void 0:t.animation)==null?void 0:i.target;return(e&&"then"in e||e==null?void 0:e.scale)??(t==null?void 0:t.scale)??0}const $Ue=Li`@layer{arcgis-zoom,.arcgis-zoom{display:flex;flex-flow:column nowrap;box-shadow:0 1px 2px #0000004d}.arcgis-zoom__zoom-out{border-block-start:solid 1px var(--calcite-color-border-1)}.arcgis-zoom--horizontal{flex-flow:row-reverse nowrap}.arcgis-zoom--horizontal .arcgis-zoom__zoom-out{border-block-start:none;border-inline-end:solid 1px var(--calcite-color-border-1)}}`;var Cf;let EUe=(Cf=class extends zx{constructor(){super(...arguments),this.messages=hhe({}),this.view=wUe(this),this.canZoomIn=!1,this.canZoomOut=!1,this.autoDestroyDisabled=!1,this.icon="magnifying-glass-plus",this.layout="vertical",this.position="top-left",this.state="disabled",this.arcgisPropertyChange=JB()("state"),this.arcgisReady=Jb()}async destroy(){await this.manager.destroy()}async zoomIn(){const{view:e}=this;!this.canZoomIn||!e||(e.type==="2d"?e.mapViewNavigation.zoomIn():aS(e.goTo({zoomFactor:2})))}async zoomOut(){const{view:e}=this;!this.canZoomOut||!e||(e.type==="2d"?e.mapViewNavigation.zoomOut():aS(e.goTo({zoomFactor:.5})))}loaded(){this.manager.onLifecycle(()=>[hn(()=>{var e;return(e=this.view)==null?void 0:e.stationary},()=>{this.canZoomIn=SUe(this.view),this.canZoomOut=xUe(this.view)},{initial:!0}),hn(()=>{var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"},e=>{this.state=e},{sync:!0,initial:!0})])}render(){const e={[Cy.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this,{zoomIn:s,zoomOut:n}=this.messages;return Se`<div class=${Xc(O_(Cy.base,e))}><calcite-button class=${Xc(O_(Cy.button,Cy.zoomIn))} .disabled=${!i} icon-start=plus kind=neutral .label=${s} @click=${this.zoomIn} title=${s??CF}></calcite-button><calcite-button class=${Xc(O_(Cy.button,Cy.zoomOut))} .disabled=${!r} icon-start=minus kind=neutral .label=${n} @click=${this.zoomOut} title=${n??CF}></calcite-button></div>`}},Cf.properties={canZoomIn:16,canZoomOut:16,autoDestroyDisabled:5,icon:1,label:1,layout:3,messageOverrides:0,position:1,referenceElement:1,state:3},Cf.shadowRootOptions=M0,Cf.styles=$Ue,Cf);jx("arcgis-zoom",EUe);function QJ(t,e){const i=t.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<e.scale)?i:null}const VS=-1;let Dl=class extends et{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=ce("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(JJ(e))}catch(i){this._transitionTo([]),be.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&ZJ(this._current,JJ(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&ZJ(this._current,e,this.scale)?(this._final=e,this._to=ie(e),IUe(this._current,this._to,this.scale),this._from=ie(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?ie(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const s=this._current[r],n=this._from[r],o=this._to[r];s.scale=CUe(n.scale,o.scale,i);for(let a=0;a<s.effects.length;a++){const l=s.effects[a],c=n.effects[a],h=o.effects[a];l.interpolate(c,h,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?ie(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let s,n,o=1;if(i.length===1||e>=i[0].scale)n=s=i[0].effects;else if(e<=i[r].scale)n=s=i[r].effects;else for(let a=0;a<r;a++){const l=i[a],c=i[a+1];if(l.scale>=e&&c.scale<=e){o=(e-l.scale)/(c.scale-l.scale),s=l.effects,n=c.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(s[a],n[a],o)}};function JJ(t){const e=m7(t)||[];return TUe(e)?[{scale:VS,effects:e}]:e}function ZJ(t,e,i){var r,s,n,o;return!((r=t[0])!=null&&r.effects)||!((s=e[0])!=null&&s.effects)?!0:!((((n=t[0])==null?void 0:n.scale)===VS||((o=e[0])==null?void 0:o.scale)===VS)&&(t.length>1||e.length>1)&&i<=0)&&Tse(t[0].effects,e[0].effects)}function IUe(t,e,i){const r=t.length>e.length?t:e,s=t.length>e.length?e:t,n=s[s.length-1],o=(n==null?void 0:n.scale)??i,a=(n==null?void 0:n.effects)??[];for(let l=s.length;l<r.length;l++)s.push({scale:o,effects:[...a]});for(let l=0;l<r.length;l++)s[l].scale=s[l].scale===VS?i:s[l].scale,r[l].scale=r[l].scale===VS?i:r[l].scale,Mse(s[l].effects,r[l].effects)}function CUe(t,e,i){return t+(e-t)*i}function TUe(t){const e=t[0];return!!e&&"type"in e}u([A()],Dl.prototype,"_to",void 0),u([A()],Dl.prototype,"duration",void 0),u([A({value:""})],Dl.prototype,"effect",null),u([A({readOnly:!0})],Dl.prototype,"effects",void 0),u([A({readOnly:!0})],Dl.prototype,"final",null),u([A({readOnly:!0})],Dl.prototype,"hasEffects",null),u([A({value:0})],Dl.prototype,"scale",null),u([A({readOnly:!0})],Dl.prototype,"transitioning",null),Dl=u([B("esri.layers.effects.EffectView")],Dl);function ept(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?phe(t.view.floors,e.floorInfo.floorField):null}function YJ(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?phe(t,e.floorInfo.floorField):null}function phe(t,e){if(!(t!=null&&t.length))return null;const i=t.filter((r=>r!=="")).map((r=>`'${r}'`));return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function tpt(t,e,i){return e.flatten((({sublayers:s})=>s)).length!==t.length?!0:!!t.some((s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i))||!fhe(t,e)}function MUe(t,e,i){return!!t.some((r=>{var a,l,c;const s=r.source,n=!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(s.gdbVersion==null||s.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const o=((c=(l=(a=r.layer)==null?void 0:a.capabilities)==null?void 0:l.exportMap)==null?void 0:c.supportsSublayerOrderBy)??!1;return!n||r.originIdOf("renderer")>xt.SERVICE||r.originIdOf("labelingInfo")>xt.SERVICE||r.originIdOf("opacity")>xt.SERVICE||r.originIdOf("labelsVisible")>xt.SERVICE||o&&r.originIdOf("orderBy")>xt.SERVICE}))||!fhe(t,e)}function fhe(t,e){if(!(t!=null&&t.length)||e==null)return!0;const i=e.slice().reverse().flatten((({sublayers:n})=>n&&n.toArray().reverse())).map((n=>n.id)).toArray();if(t.length>i.length)return!1;let r=0;const s=i.length;for(const{id:n}of t){for(;r<s&&i[r]!==n;)r++;if(r>=s)return!1}return!0}function ipt(t){return!!t&&t.some((e=>{var i;return e.minScale!=null||((i=e.layerDefinition)==null?void 0:i.minScale)!=null}))}const kUe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Ua=class extends et{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((i=>{const r=YJ(this.floors,i);return i.toExportImageJSON(r)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&MUe(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(i=>this.notifyChange(kUe[i.propertyName])))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((i=>i.id)).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter((s=>s.definitionExpression!=null||e&&s.floorInfo!=null));return i.length?JSON.stringify(i.reduce(((s,n)=>{const o=YJ(this.floors,n),a=d_(o,n.definitionExpression);return a!=null&&(s[n.id]=a),s}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,s=o=>{o.visible&&(r===0||jEe(r,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(s):e.unshift(o))};i&&i.forEach(s);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some(((o,a)=>e[a]!==o))?e:n}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};u([A({readOnly:!0})],Ua.prototype,"dynamicLayers",null),u([A()],Ua.prototype,"floors",void 0),u([A({readOnly:!0})],Ua.prototype,"hasDynamicLayers",null),u([A()],Ua.prototype,"layer",null),u([A({readOnly:!0})],Ua.prototype,"layers",null),u([A({readOnly:!0})],Ua.prototype,"layerDefs",null),u([A({type:Number})],Ua.prototype,"scale",void 0),u([A({readOnly:!0})],Ua.prototype,"version",null),u([A({readOnly:!0})],Ua.prototype,"visibleSublayers",null),Ua=u([B("esri.layers.support.ExportImageParameters")],Ua);const PUe=9999999e31,LUe=2e-7,RUe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function HM(t){return RUe[t]??[-34028234663852886e22,34028234663852886e22]}const OUe={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function DUe(t){return OUe[t]}function spt(t){return DUe(t.pixelType)*t.bandCount}function npt(t,e){return t==null||e==null?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function NUe(t){return((t==null?void 0:t.startsWith("s"))||(t==null?void 0:t.startsWith("u")))??!1}function opt(t,e,i,r){let[s,n]=HM(i);const o=NUe(i);return o&&(s-=1e-5,n+=1e-5),o?i.startsWith("u")?FUe(t,e,r,[s,n]):zUe(t,e,r,[s,n]):BUe(t,e,r,[s,n])}function apt(t,e){for(let i=0;i<e.length;i++)e[i]&&isNaN(t[i])&&(e[i]=0,t[i]=0)}function FUe(t,e,i,r){const[s,n]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<s||a>n?e[o]=0:i[o]=a+.5|0}}function zUe(t,e,i,r){const[s,n]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<s||a>n?e[o]=0:i[o]=a+(a>0?.5:-.5)|0}}function BUe(t,e,i,r){const[s,n]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<s||a>n?e[o]=0:i[o]=a}}function lpt(t,e,i){var _,S;if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:s,pixelType:n}=t,o=r[0].length,a=t.bandMasks??[],l=t.mask??new Uint8Array(o).fill(255),c=n==="f32"||n==="f64",h=HM(n);let y=!1;for(let E=0;E<r.length;E++){const C=typeof e=="number"?e:e[E];if(C==null)continue;const M=((_=s==null?void 0:s[E])==null?void 0:_.minValue)??h[0],P=((S=s==null?void 0:s[E])==null?void 0:S.maxValue)??h[1];if(M>C+Number.EPSILON||P<C-Number.EPSILON)continue;const D=a[E]||l.slice(),F=r[E],U=i==null?void 0:i.customFloatTolerance;if(c&&U!==0){let G=U;G||(G=Math.abs(C)>=PUe?LUe*Math.abs(C):n==="f32"?2**-23:Number.EPSILON);for(let Q=0;Q<F.length;Q++)D[Q]&&Math.abs(F[Q]-C)<G&&(F[Q]=0,D[Q]=0,l[Q]=0,y=!0)}else for(let G=0;G<F.length;G++)D[G]&&F[G]===C&&(F[G]=0,D[G]=0,l[G]=0,y=!0);a[E]=D}if(y){const E=t.bandMasks||t.pixels.length>1?a:null;i!=null&&i.matchAllNoData?t.mask=E&&E.length>1?g(E):l:(t.bandMasks=E,t.mask=l)}function g(E){if(E.length<2)return E[0];const C=E[0].length,M=new Uint8Array(C).fill(0);for(let P=0;P<E.length;P++){const D=E[P];for(let F=0;F<C;F++)D[F]&&(M[F]=255)}return M}y&&"updateStatistics"in t&&t.updateStatistics()}function Ahe(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function cpt(t,e){if(t==null)return null;if(!Ahe(t))return new te("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type||t.declaredClass}'`,{renderer:t});switch(t.type){case"simple":return jUe(t,e);case"unique-value":return UUe(t,e);case"class-breaks":return VUe(t,e);case"dictionary":case"heatmap":return null}return null}function YB(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map((s=>s.details.symbol.type||s.details.symbol.declaredClass)).filter((s=>!!s));i.sort();const r=new Array;return i.forEach(((s,n)=>{n!==0&&s===i[n-1]||r.push(s)})),new te("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}function jUe(t,e){const i={...id,...e,cimFallbackEnabled:!0};return YB(t,Hb(t.symbol,i).error)}function UUe(t,e){var n;const i={...id,...e,cimFallbackEnabled:!0},r=(n=t.uniqueValueInfos)==null?void 0:n.map((o=>Hb(o.symbol,i).error)).filter(os),s=Hb(t.defaultSymbol,i);return s.error&&(r==null||r.unshift(s.error)),YB(t,r)}function VUe(t,e){const i={...id,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map((n=>Hb(n.symbol,i).error)).filter(os),s=Hb(t.defaultSymbol,i);return s.error&&r.unshift(s.error),YB(t,r)}var Q6;function GUe(t){switch(t){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function XB(t){var e;return(t==null?void 0:t.type)==="CIMVectorMarker"?(e=t.markerGraphics)==null?void 0:e[0]:void 0}function mhe(t){var e,i;return((e=t==null?void 0:t.symbol)==null?void 0:e.type)==="CIMPolygonSymbol"?(i=t.symbol.symbolLayers)==null?void 0:i[0]:void 0}function HUe(t,e){(t==null?void 0:t.type)==="CIMVectorMarker"&&e!=null&&(t.size=e)}function qUe(t,e){const i=XB(t);i&&e!=null&&(i.geometry=GUe(e))}function WUe(t,e){const i=mhe(XB(t));i&&e!=null&&(i.color=e.toArray())}function QUe(t,e,i){const r=mhe(XB(t));r&&e!=null&&i&&(r.colorLocked=e)}function KB(t,e){var c;const{outerRingSize:i,innerDotSize:r,type:s,color:n,colorLocked:o,primitiveOverrides:a}=e,l=((c=t.data.symbol)==null?void 0:c.type)==="CIMPolygonSymbol"?t.data.symbol.symbolLayers:null;if((l==null?void 0:l.length)===2)for(const h of l){const y=h.primitiveName===Q6.OuterRing;HUe(h,y?i:r),qUe(h,s),WUe(h,n),QUe(h,o,y)}return i!=null&&r!=null&&(t.data.primitiveOverrides=null),a!==void 0&&(t.data.primitiveOverrides=ie(a)),t}(function(t){t.OuterRing="reference-size-outer-ring",t.InnerDot="reference-size-inner-dot"})(Q6||(Q6={}));function yhe(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(t.effects)for(const s of t.effects)XJ(s,e);if(t.symbolLayers)for(const s of t.symbolLayers){switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":JUe(s,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!(r!=null&&r.preserveOutlineWidth)&&s.width&&(s.width*=e);break;case"CIMPictureFill":s.height&&(s.height*=e),s.offsetX&&(s.offsetX*=e),s.offsetY&&(s.offsetY*=e);break;case"CIMHatchFill":yhe(s.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),s.offsetX&&(s.offsetX*=e),s.offsetY&&(s.offsetY*=e),s.separation&&(s.separation*=e)}if(s.effects)for(const n of s.effects)XJ(n,e)}}else t.height!=null&&(t.height*=e)}function JUe(t,e,i){if(t&&(t.markerPlacement&&ZUe(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||yhe(r.symbol,e,!0,i)}function ZUe(t,e){switch(eP(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map((r=>r*e));t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map((r=>r*e));t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function XJ(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map((r=>r*e));t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function ghe(t){const e=[];return J6(H7(t),e),e.length?new ze(coe(e[0])):null}function J6(t,e){var s;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const n of i.symbolLayers)if(!(n.colorLocked||r&&(uoe(n)||q7(n)&&n.markerPlacement&&eP(n.markerPlacement))))switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor&&qM(e,n.tintColor);break;case"CIMVectorMarker":(s=n.markerGraphics)==null||s.forEach((o=>{J6(o.symbol,e)}));break;case"CIMSolidStroke":case"CIMSolidFill":qM(e,n.color);break;case"CIMGradientFill":YUe(e,n);break;case"CIMHatchFill":J6(n.lineSymbol,e)}}}function qM(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function YUe(t,e){var r,s;switch((r=e.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(s=e.colorRamp.colorRamps)==null||s.forEach((n=>{n.type==="CIMLinearContinuousColorRamp"&&KJ(t,n)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":KJ(t,e.colorRamp)}}function KJ(t,e){e&&(e.fromColor&&qM(t,e.fromColor),e.toColor&&qM(t,e.toColor))}function vhe(t,e,i){e instanceof ze||(e=new ze(e));const r=H7(t);r&&Z6(r,e)}function Z6(t,e,i){var n;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const s=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked||s&&(uoe(o)||q7(o)&&o.markerPlacement&&eP(o.markerPlacement)))continue;const a=e.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(n=o.markerGraphics)==null||n.forEach((l=>{Z6(l.symbol,e)}));break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMGradientFill":XUe(o,e);break;case"CIMHatchFill":Z6(o.lineSymbol,e)}}}function XUe(t,e){var r,s;switch((r=t.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(s=t.colorRamp.colorRamps)==null||s.forEach((n=>{n.type==="CIMLinearContinuousColorRamp"&&eZ(n,e)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":eZ(t.colorRamp,e)}}function eZ(t,e){if(t&&(t.fromColor&&(t.fromColor=e.toArray()),t.toColor)){const i=e.clone();i.a=0,t.toColor=i.toArray()}}function upt(t,e,i=!1){const r=H7(t);if(i&&(e=360-e),(r==null?void 0:r.type)!=="CIMTextSymbol"){if((r==null?void 0:r.type)==="CIMPointSymbol"&&r.symbolLayers){const s=e-(r.angle||0);for(const n of r.symbolLayers)if(q7(n)){let o=n.rotation||0;n.rotateClockwise?o-=s:o+=s,n.rotation=o}r.angle=e}}else r.angle=e}var Pr;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(Pr||(Pr={}));const H_={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function KUe(t,e,i){const r=Pr.size;let s=r,n=r;t<1?s*=.75:t>1&&(n*=1.25);const o=0,a=0;let l=r,c=r;return e&&i&&(s=n=l=c=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?s-.5*l:a,n-.5*c]},{command:"L",values:[s-.5*l,n-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,e?o:.125*c]},{command:"L",values:[s-.5*l,e?n-.5*c:c]},{command:"L",values:[s-.5*l,n-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s-.5*l,n-.5*c]},{command:"L",values:[i?s-.5*l:a,n-.5*c]},{command:"L",values:[i?s-.5*l:a,e?n-.5*c:c]},{command:"L",values:[s-.5*l,e?n-.5*c:c]},{command:"Z",values:[]}]}]}function eVe(t){const e=Pr.size,i=.5*t,r=0,s=0;return[{type:"path",path:[{command:"M",values:[s,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[s,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,r]},{command:"L",values:[e,r]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[s,.7*e*.5]},{command:"Z",values:[]}]}]}function tVe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function iVe(t,e){let i=e?Pr.tallSymbolWidth:t;const r=t,s=e?4:6;i<=Pr.size?i-=.5*s:i-=s;const n=0,o=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,n]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[o,r-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function rVe(t,e){let i=e?Pr.tallSymbolWidth:t;const r=t,s=e?4:6;i<=Pr.size?i-=.5*s:i-=s;const n=.5*i,o=.15*i,a=0,l=r-o;return[{type:"ellipse",cx:.5*i,cy:l,rx:n,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[i,l]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:n,ry:o}]}function sVe(t,e){let i=e?Pr.tallSymbolWidth:t;const r=t,s=e?4:6;i<=Pr.size?i-=.5*s:i-=s;const n=.15*i,o=r-n;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:n},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function nVe(t){let e=t;const i=t,r=6;e<Pr.size?e-=.5*r:e-=r;const s=.15*e,n=0;return[{type:"path",path:[{command:"M",values:[0,n]},{command:"L",values:[e,n]},{command:"L",values:[.5*e,i-s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:n,rx:.5*e,ry:s}]}function oVe(t){let e=t;const i=t,r=4;e<Pr.size?e-=.5*r:e-=r;const s=0,n=0,o=e,a=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,s]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,s]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[n,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function aVe(t){const e=t,i=2;let r=t;r<Pr.size?r-=.5*i:r-=i;const s=0,n=0;return[{type:"path",path:[{command:"M",values:[.45*e,s]},{command:"L",values:[e,r]},{command:"L",values:[.45*e,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,s]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[n,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,r]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[e,r]},{command:"Z",values:[]}]}]}function Sf(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function hpt(t,e){if(t==null)return new ze;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new ze(t);return new ze([Sf(i.r,e),Sf(i.g,e),Sf(i.b,e),i.a])}function bhe(t){return"r"in t&&"g"in t&&"b"in t}function whe(t){return"h"in t&&"s"in t&&"v"in t}function _he(t){return"l"in t&&"a"in t&&"b"in t}function She(t){return"l"in t&&"c"in t&&"h"in t}function lVe(t){return"x"in t&&"y"in t&&"z"in t}const cVe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],uVe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function xhe(t,e){const i=[];let r,s;if(t[0].length!==e.length)throw new Error("dimensions do not match");const n=t.length,o=t[0].length;let a=0;for(r=0;r<n;r++){for(a=0,s=0;s<o;s++)a+=t[r][s]*e[s];i.push(a)}return i}function $he(t){const e=[t.r/255,t.g/255,t.b/255].map((r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4)),i=xhe(cVe,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function ej(t){const e=xhe(uVe,[t.x/100,t.y/100,t.z/100]).map((i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))}));return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function Ehe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map((i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862));return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function Ihe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map((r=>r>6/29?r**3:3*(6/29)**2*(r-4/29)));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function hVe(t){const e=t.l,i=t.a,r=t.b,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i);return n=n>0?n:n+2*Math.PI,{l:e,c:s,h:n}}function dVe(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function pVe(t){return Ehe($he(t))}function fVe(t){return ej(Ihe(t))}function AVe(t){return hVe(Ehe($he(t)))}function mVe(t){return ej(Ihe(dVe(t)))}function yVe(t){const e=t.r,i=t.g,r=t.b,s=Math.max(e,i,r),n=s-Math.min(e,i,r);let o=s,a=n===0?0:s===e?(i-r)/n%6:s===i?(r-e)/n+2:(e-i)/n+4,l=n===0?0:n/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function gVe(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,s=r*i,n=s*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-s),o.g=Math.round(o.g+r-s),o.b=Math.round(o.b+r-s),o}function q0(t){return bhe(t)?t:She(t)?mVe(t):_he(t)?fVe(t):lVe(t)?ej(t):whe(t)?gVe(t):t}function CP(t){return whe(t)?t:yVe(q0(t))}function vVe(t){return _he(t)?t:pVe(q0(t))}function dpt(t){return She(t)?t:AVe(q0(t))}function bVe(t){let{r:e,g:i,b:r,a:s}=t;return s<1&&(e=Math.round(s*e+255*(1-s)),i=Math.round(s*i+255*(1-s)),r=Math.round(s*r+255*(1-s))),new ze({r:e,g:i,b:r})}function Che(t,e){const{r:i,g:r,b:s}=e!=null&&e.ignoreAlpha?t:bVe(t);return .2126*i+.7152*r+.0722*s}var Y6;function ppt(t,e=Y6.High){return Che(t,{ignoreAlpha:!0})>e?new ze([0,0,0,t.a]):new ze([255,255,255,t.a])}function fpt(t,e){const i=vVe(t);i.l*=1-e;const r=q0(i),s=t.clone();return s.setColor(r),s.a=t.a,s}function Apt(t,e){const i=t.clone();return i.a*=e,i}function mpt(t,e){const i=CP(t);i.s*=e;const r=q0(i),s=t.clone();return s.setColor(r),s.a=t.a,s}function ypt(t){return ze.toUnitRGBA(t)}function gpt(t){return G0(t[0],t[1],t[2],t.length>3?t[3]:1)}function vpt(t,e){const i=ze.toUnitRGBA(t);return i[3]*=e,i}function bpt(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map((r=>typeof r=="string"?new ze(r):r))).length===1||e===1){const r=[],s=t[0];for(let n=0;n<e;n++)r.push(s.clone());return r}if(i.shuffle&&(t=NX(ie(t),i.seed)),t.length>=e){const r=[],s=(t.length-1)/(e-1);for(let n=0;n<e;n++){const o=Math.round(n*s);r.push(t[o].clone())}return r}return wVe(t,e,i)}function wVe(t,e,i={}){const r=[],s=t.length-1,n=Math.ceil((e-t.length)/s);e:for(let o=0;o<s;o++){const a=t[o],l=t[o+1];for(let c=1;c<=n;c++){const h=c/(n+1);if(r.push(_Ve(a,l,h,i)),r.length+t.length===e)break e}}return[...t.map((o=>o.clone())),...NX(r,i.seed??1)]}(function(t){t[t.Low=160]="Low",t[t.High=225]="High"})(Y6||(Y6={}));const EO=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function _Ve(t,e,i,r={}){const s=t.r,n=t.g,o=t.b,a=e.r,l=e.g,c=e.b,h=Math.round(s+(a-s)*i),y=Math.round(n+(l-n)*i),g=Math.round(o+(c-o)*i);if(!r.offset)return new ze([h,y,g]);const _=W8(r.seed);return new ze([EO(h,_),EO(y,_),EO(g,_)])}const The="picture-fill",Mhe="simple-fill",SVe="simple-line",khe="simple-marker",xVe="text",$Ve="cim",tZ=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),IO=new qne(1e3);function EVe(t){const e=t.style;let i=null;if(t)switch(t.type){case khe:e!=="cross"&&e!=="x"&&(i=t.color);break;case Mhe:e&&e!=="solid"?e!=="none"&&(i={type:"pattern",x:0,y:0,src:er(`esri/symbols/patterns/${e}.png`),width:5,height:5}):i=t.color;break;case The:i={type:"pattern",src:t.url,width:ri(t.width)*t.xscale,height:ri(t.height)*t.yscale,x:ri(t.xoffset),y:ri(t.yoffset)};break;case xVe:i=t.color;break;case $Ve:i=ghe(t)}return i}function IVe(t,e){const i=t+"-"+e;return IO.get(i)!==void 0?Promise.resolve(IO.get(i)):ei(t,{responseType:"image"}).then((r=>{const s=r.data,n=s.naturalWidth,o=s.naturalHeight,a=document.createElement("canvas");a.width=n,a.height=o;const l=a.getContext("2d");l.fillStyle=e,l.fillRect(0,0,n,o),l.globalCompositeOperation="destination-in",l.drawImage(s,0,0);const c=a.toDataURL();return IO.put(i,c),c}))}function GS(t){if(!t)return null;let e=null;switch(t.type){case Mhe:case The:case khe:e=GS(t.outline);break;case SVe:{const i=ri(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:tj(t.style),width:i,cap:t.cap,join:t.join==="miter"?ri(t.miterLimit):t.join},e.dashArray=Phe(e).join(",")||"none");break}default:e=null}return e}function Phe(t){if(!(t!=null&&t.style))return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map((o=>Number(o)));const s=r??0,n=tZ.has(i)?tZ.get(i).map((o=>o*s)):[];if(t.cap!=="butt")for(const[o,a]of n.entries())n[o]=o%2==1?a+s:Math.max(a-s,1);return n}const tj=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),CVe=new ze([128,128,128]);let TVe=0;function MVe(){return TVe++}let kVe=0;function PVe(){return kVe++}let LVe=0;function RVe(){return LVe++}const OVe="http://www.w3.org/2000/svg",iZ=ce("android"),DVe=ce("chrome")||iZ&&iZ>=4?"auto":"optimizeLegibility",NVe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},FVe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let vr={},xi={};const zVe=Math.PI;function Af(t,e){const i=t*(zVe/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function Lhe(t){return t.map((e=>`${e.command} ${e.values.join(" ")}`)).join(" ").trim()}function ij(t,e,i,r,s){if(t){if(t.type==="circle")return se("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return se("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return se("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return se("image",{alt:s||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const n=typeof t.path!="string"?Lhe(t.path):t.path;return se("path",{d:n,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return fx(r),se("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":DVe,x:t.x,y:t.y},t.text)}return null}function rj(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new ze(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${MVe()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${PVe()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map((i=>({offset:i.offset,color:i.color&&new ze(i.color).toString()})))}}}function sj(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new ze(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=Phe(t).join(",")||"none")),e}function Rhe(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,s=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=s,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",fx(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function Ohe(t){const{pattern:e,linearGradient:i}=t;if(e)return se("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},se("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map(((s,n)=>se("stop",{key:`${n}-stop`,offset:s.offset,"stop-color":s.color})));return se("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function BVe(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:s,fill:n,stroke:o,font:a}=r,l=rj(n),c=sj(o),h=s.type==="text"?Rhe(s,a):null,y=ij(s,l.fill,c,h);y&&i.push(y)}return se("mask",{id:e,maskUnits:"userSpaceOnUse"},se("g",null,i))}function rZ(t,e,i){return Du(t,qx(t),[e,i])}function sZ(t,e,i,r,s){return Wx(t,qx(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-s*i+s,t}function jVe(t,e,i,r){const s=e%360*Math.PI/180;jf(t,qx(t),s);const n=Math.cos(s),o=Math.sin(s),a=t[4],l=t[5];return t[4]=a*n-l*o+r*o-i*n+i,t[5]=l*n+a*o-i*o-r*n+r,t}function Hn(t,e){vr&&"left"in vr?(vr.left!=null&&vr.left>t&&(vr.left=t),(vr.right==null||vr.right<t)&&(vr.right=t),(vr.top==null||vr.top>e)&&(vr.top=e),(vr.bottom==null||vr.bottom<e)&&(vr.bottom=e)):vr={left:t,bottom:e,right:t,top:e}}function nZ(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)Hn(e[r],e[r+1]);xi.x=e[i-2],xi.y=e[i-1];break;case"H":for(r=0;r<i;++r)Hn(e[r],xi.y);xi.x=e[i-1];break;case"V":for(r=0;r<i;++r)Hn(xi.x,e[r]);xi.y=e[i-1];break;case"m":{let s=0;for(("x"in xi)||(Hn(xi.x=e[0],xi.y=e[1]),s=2),r=s;r<i;r+=2)Hn(xi.x+=e[r],xi.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)Hn(xi.x+=e[r],xi.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)Hn(xi.x+=e[r],xi.y);break;case"v":for(r=0;r<i;++r)Hn(xi.x,xi.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)Hn(xi.x+e[r],xi.y+e[r+1]),Hn(xi.x+e[r+2],xi.y+e[r+3]),Hn(xi.x+=e[r+4],xi.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)Hn(xi.x+e[r],xi.y+e[r+1]),Hn(xi.x+=e[r+2],xi.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)Hn(e[r+5],e[r+6]);xi.x=e[i-2],xi.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)Hn(xi.x+=e[r+5],xi.y+=e[r+6])}}function oZ(t,e,i){const r=NVe[t.toLowerCase()];let s;typeof r=="number"&&(r?e.length>=r&&(s={action:t,args:e.slice(0,e.length-e.length%r)},i.push(s),nZ(s)):(s={action:t,args:[]},i.push(s),nZ(s)))}function UVe(t){const e=(typeof t.path!="string"?Lhe(t.path):t.path).match(FVe),i=[];if(vr={},xi={},!e)return null;let r="",s=[];const n=e.length;for(let a=0;a<n;++a){const l=e[a],c=parseFloat(l);isNaN(c)?(r&&oZ(r,s,i),s=[],r=l):s.push(c)}oZ(r,s,i);const o={x:0,y:0,width:0,height:0};return vr&&"left"in vr&&(o.x=vr.left,o.y=vr.top,o.width=vr.right-vr.left,o.height=vr.bottom-vr.top),o}function Dhe(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=UVe(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function Nhe(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const n of t)i?(i.x=Math.min(i.x,n.x),i.y=Math.min(i.y,n.y),r=Math.max(r,n.x+n.width),s=Math.max(s,n.y+n.height)):(i=e,i.x=n.x,i.y=n.y,r=n.x+n.width,s=n.y+n.height);return i&&(i.width=r-i.x,i.height=s-i.y),i}function X6(t,e,i,r,s,n,o,a,l){let c=(o&&n?Af(n,e):e)/2,h=(o&&n?Af(n,i):i)/2;if(l){const P=l[0],D=l[1];c=(o&&n?Af(n,P):P)/2,h=(o&&n?Af(n,D):D)/2}const y=t.width+r,g=t.height+r,_=Id(),S=Id();let E=!1;if(s&&y!==0&&g!==0){const P=e!==i?e/i:y/g,D=e>i?e:i;let F=1,U=1;isNaN(D)||(P>1?(F=D/y,U=D/P/g):(U=D/g,F=D*P/y)),eu(S,S,sZ(_,F,U,c,h)),E=!0}const C=t.x+(y-r)/2,M=t.y+(g-r)/2;if(eu(S,S,rZ(_,c-C,h-M)),!E&&(y>e||g>i)){const P=y/e>g/i,D=(P?e:i)/(P?y:g);eu(S,S,sZ(_,D,D,C,M))}return a&&eu(S,S,rZ(_,a[0],a[1])),n&&eu(S,S,jVe(_,n,C,M)),`matrix(${S[0]},${S[1]},${S[2]},${S[3]},${S[4]},${S[5]})`}function VVe(t,e,i){const r=t==null?void 0:t.effects.find((c=>c.type==="bloom"));if(!r)return null;const{strength:s,radius:n}=r,o=s>0?n:0,a=(s+o)*e,l=4*s+1;return se("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},se("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(s+.5*o)*(5**(e/100)*(.4+e/100)),result:"dilate"}),se("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:a/25}),se("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:a/50}),se("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},se("feFuncR",{slope:l,type:"linear"}),se("feFuncG",{slope:l,type:"linear"}),se("feFuncB",{slope:l,type:"linear"})),se("feMerge",null,se("feMergeNode",{in:"intensityBlur"}),se("feMergeNode",{in:"intensityBrightness"}),se("feGaussianBlur",{stdDeviation:s/10})))}function Fhe(t,e,i,r={}){var g,_,S;const s=[],n=[],o=RVe(),a=VVe(r.effectView,e,o);let l=null;if(a){const E=(g=r.effectView)==null?void 0:g.effects.find((D=>D.type==="bloom")),C=r.clipBloomEffect||!E.strength?0:(E.strength+E.radius/2)/3,M=e+e*C,P=i+i*C;l=[Math.max(M,10),Math.max(P,10)]}let c=e,h=i;if(r.useRotationSize)for(let E=0;E<t.length;E++){const C=((_=r.rotations)==null?void 0:_[E])??0;c=Math.max(Af(C,e),c),h=Math.max(Af(C,i),h)}for(let E=0;E<t.length;E++){const C=t[E],M=[],P=[];let D=0,F=0,U=0;for(const X of C){const{shape:K,fill:de,stroke:ye,font:xe,offset:ee}=X;r.ignoreStrokeWidth||K.type==="text"||(D+=(ye==null?void 0:ye.width)||0);const le=rj(de),Te=sj(ye),ke=K.type==="text"?Rhe(K,xe):null;s.push(Ohe(le)),M.push(ij(K,le.fill,Te,ke,r.ariaLabel)),P.push(Dhe(K)),ee&&(F+=ee[0],U+=ee[1])}const G=((S=r.rotations)==null?void 0:S[E])??0;r.useRotationSize&&(F+=(c-Af(G,e))/2,U+=(h-Af(G,i))/2);const Q=X6(Nhe(P),e,i,D,r.scale??!1,G,r.useRotationSize??!1,[F,U],l);let W=null;if(r.masking){const X=`mask-${E}`,K=r.masking[E];s.push(BVe(K,X)),W=`url(#${X})`}n.push(W?se("g",{mask:W},se("g",{transform:Q},M)):se("g",{transform:Q},M))}return a&&(fx(l),c=l[0],h=l[1]),se("svg",{"aria-label":r.ariaLabel,focusable:!1,height:h,role:"img",style:"display: block;",width:c,xmlns:OVe},a,se("defs",null,s),a?se("g",{filter:`url(#bloom${o})`},n):n)}const GVe=new ze("white");function HVe(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function qVe(t){var e;if(!t)return 0;if(eh(t)){const i=HVe(t);return i??0}return Ei((e=GS(t))==null?void 0:e.width)}function TP(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some((e=>e.type==="object"));case"line-3d":return t.symbolLayers.some((e=>e.type==="path"));case"polygon-3d":return t.symbolLayers.some((e=>e.type==="object"||e.type==="extrude"));default:return!1}}function WVe(t){var e;return((e=t.resource)==null?void 0:e.href)??""}function wpt(t,e){if(!t)return null;let i=null;return eh(t)?i=QVe(t):Pk(t)&&(i=t.type==="cim"?ghe(t):t.color?new ze(t.color):null),i?HS(i,e):null}function QVe(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach((r=>{var s;r.type==="object"&&((s=r.resource)!=null&&s.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)})),i?new ze(i):null}function HS(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new ze(i)}function JVe(t,e,i){const r=t.symbolLayers;if(!r)return;const s=n=>HS(e??n??(i!=null?GVe:null),i);r.forEach((n=>{var o,a;if(n.type!=="object"||!((o=n.resource)!=null&&o.href)||e)if(n.type==="water")n.color=s(n.color);else{const l=n.material!=null?n.material.color:null,c=s(l);if(n.material==null?n.material=new Fo({color:c}):n.material.color=c,i!=null&&"outline"in n&&((a=n.outline)==null?void 0:a.color)!=null&&(n.outline.color=HS(n.outline.color,i)),"marker"in n&&n.marker!=null){const h=s(n.marker.color);n.marker.color=h}}}))}function ZVe(t,e,i){var r;(e=e??t.color)&&(t.color=HS(e,i)),i!=null&&"outline"in t&&((r=t.outline)!=null&&r.color)&&(t.outline.color=HS(t.outline.color,i))}function CO(t,e,i){t&&(e||i!=null)&&(e&&(e=new ze(e)),eh(t)?JVe(t,e,i):Pk(t)&&ZVe(t,e,i))}async function YVe(t,e){const i=t.symbolLayers;i&&await IIe(i,(async r=>XVe(r,e)))}async function XVe(t,e){switch(t.type){case"extrude":eGe(t,e);break;case"icon":case"line":case"text":KVe(t,e);break;case"path":iGe(t,e);break;case"object":await tGe(t,e)}}function KVe(t,e){const i=zhe(e);i!=null&&(t.size=i)}function zhe(t){for(const e of t)if(typeof e=="number")return e;return null}function eGe(t,e){const i=e[2];typeof i=="number"&&(t.size=i)}async function tGe(t,e){const{resourceSize:i,symbolSize:r}=await rGe(t),s=Bhe(e,i,r);s!=null&&(t.width=q_(e[0],r[0],i[0],s),t.depth=q_(e[1],r[1],i[1],s),t.height=q_(e[2],r[2],i[2],s))}function iGe(t,e){const i=Bhe(e,Sre,[t.width,void 0,t.height]);i!=null&&(t.width=q_(e[0],t.width,1,i),t.height=q_(e[2],t.height,1,i))}function Bhe(t,e,i){for(let r=0;r<3;r++){const s=t[r];switch(s){case"symbol-value":{const n=i[r];return n!=null?n/e[r]:1}case"proportional":break;default:if(s&&e[r])return s/e[r]}}return null}async function rGe(t){const{computeObjectLayerResourceSize:e}=await Ie(()=>import("./symbolLayerUtils-hXT7QzJT.js"),[],import.meta.url),i=await e(t,10),{width:r,height:s,depth:n}=t,o=[r,n,s];let a=1;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function q_(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function sGe(t,e){const i=zhe(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function nGe(t,e){if(t&&e)return eh(t)?YVe(t,e):void(Pk(t)&&sGe(t,e))}function oGe(t,e,i){if(t&&e!=null)if(eh(t)){const r=t.symbolLayers;r&&r.forEach((s=>{if(s.type==="object")switch(i){case"tilt":s.tilt=(s.tilt??0)+e;break;case"roll":s.roll=(s.roll??0)+e;break;default:s.heading=(s.heading??0)+e}s.type==="icon"&&(s.angle+=e)}))}else Pk(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle+=e))}function Xx(t){if(!t)return null;const e=t.effects.filter((i=>i.type!=="bloom")).map((i=>i.toJSON()));return NT(e)}function _pt(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some((e=>e.type==="extrude"))}const aZ=sM();function aGe(t,e){aZ.append(t,e),aZ.detach(e)}function F1(t,e,i){const r=Math.ceil(e[0]),s=Math.ceil(e[1]);if(!t.some((o=>!!o.length)))return null;const n=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(n.style.opacity=i.opacity.toString()),i.effectView!=null&&(n.style.filter=Xx(i.effectView)),aGe(n,(()=>Fhe(t,r,s,i))),n}function lGe(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function cGe(t,e,i){return t?ei(t,{responseType:"image"}).then((r=>{const s=r.data,n=s.width,o=s.height,a=n/o;let l=e;if(i){const c=Math.max(n,o);l=Math.min(l,c)}return{image:s,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}})):Promise.reject(new te("renderUtils: imageDataSize","href not provided."))}function uGe(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function hGe(t,e,i,r,s){switch(s){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const n=CP({r:t[e],g:t[e+1],b:t[e+2]});n.h=r.h,n.s=r.s,n.v=n.v/100*r.v;const o=q0(n);t[e]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]*=i[3];break}}}function dGe(t,e,i,r,s){return cGe(t,e,s).then((n=>{const o=n.width??e,a=n.height??e;if(n.image&&uGe(i,r)){let l=n.image.width,c=n.image.height;ce("edge")&&/\.svg$/i.test(t)&&(l-=1,c-=1);const h=lGe(o,a);h.drawImage(n.image,0,0,l,c,0,0,o,a);const y=h.getImageData(0,0,o,a),g=[i.r/255,i.g/255,i.b/255,i.a],_=CP(i);for(let S=0;S<y.data.length;S+=4)hGe(y.data,S,g,_,r);h.putImageData(y,0,0),t=h.canvas.toDataURL("image/png")}else{const l=_t==null?void 0:_t.findCredential(t);if(l!=null&&l.token){const c=t.includes("?")?"&":"?";t=`${t}${c}token=${l.token}`}}return{url:t,width:o,height:a}})).catch((()=>({url:t,width:e,height:e})))}const jhe="esri-relationship-ramp",Ty=`${jhe}--diamond`,lp=`${jhe}--square`,pGe="http://www.w3.org/2000/svg",Vi={diamondContainer:`${Ty}__container`,diamondLeftCol:`${Ty}__left-column`,diamondRightCol:`${Ty}__right-column`,diamondMidCol:`${Ty}__middle-column`,diamondMidColLabel:`${Ty}__middle-column--label`,diamondMidColRamp:`${Ty}__middle-column--ramp`,squareTable:`${lp}__table`,squareTableRow:`${lp}__table-row`,squareTableCell:`${lp}__table-cell`,squareTableLabel:`${lp}__table-label`,squareTableLabelLeftBottom:`${lp}__table-label--left-bottom`,squareTableLabelRightBottom:`${lp}__table-label--right-bottom`,squareTableLabelLeftTop:`${lp}__table-label--left-top`,squareTableLabelRightTop:`${lp}__table-label--right-top`};function Uhe(t,e,i={}){const{focus:r,labels:s}=t,n=!!r,o=fGe(t,e,i),a={justifyContent:"center"},l=gP(),c=i.key??e;return n?se("div",{class:Vi.diamondContainer,key:`${c}-container`,styles:a},se("div",{class:Vi.diamondLeftCol},l?s.right:s.left),se("div",{class:Vi.diamondMidCol},se("div",{class:Vi.diamondMidColLabel},s.top),o,se("div",{class:Vi.diamondMidColLabel},s.bottom)),se("div",{class:Vi.diamondRightCol},l?s.left:s.right)):se("div",{class:Vi.squareTable,key:`${c}-container`},se("div",{class:Vi.squareTableRow},se("div",{class:ov(Vi.squareTableCell,Vi.squareTableLabel,Vi.squareTableLabelRightBottom)},l?s.top:s.left),se("div",{class:Vi.squareTableCell}),se("div",{class:ov(Vi.squareTableCell,Vi.squareTableLabel,Vi.squareTableLabelLeftBottom)},l?s.left:s.top)),se("div",{class:Vi.squareTableRow},se("div",{class:Vi.squareTableCell}),o,se("div",{class:Vi.squareTableCell})),se("div",{class:Vi.squareTableRow},se("div",{class:ov(Vi.squareTableCell,Vi.squareTableLabel,Vi.squareTableLabelRightTop)},l?s.right:s.bottom),se("div",{class:Vi.squareTableCell}),se("div",{class:ov(Vi.squareTableCell,Vi.squareTableLabel,Vi.squareTableLabelLeftTop)},l?s.bottom:s.right)))}function lZ(t,e,i){const r=`${i}_arrowStart`,s=`${i}_arrowEnd`,n=t==="left",o={markerStart:null,markerEnd:null};switch(e){case"HL":n?o.markerStart=`url(#${s})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${s})`;break;case"LH":n?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${s})`;break;default:o.markerEnd=`url(#${r})`}return o}function fGe(t,e,i={}){const{focus:r,numClasses:s,colors:n,rotation:o}=t,{opacity:a,effectList:l,ariaLabel:c}=i,h=i.size??60,y=!!r,g=Math.sqrt(h**2+h**2)+(y?0:5),_=[],S=[],E=[],C=(h||75)/s;for(let de=0;de<s;de++){const ye=de*C;for(let xe=0;xe<s;xe++){const ee=xe*C,le=rj(n[de][xe]),Te=sj(null),ke={type:"rect",x:ee,y:ye,width:C,height:C},De=Ohe(le);De&&_.push(De);const Ke=ij(ke,le.fill,Te,null);Ke&&S.push(Ke),E.push(Dhe(ke))}}const M=15,P=15,D=10;let F=null;y||(F="margin: -15px -15px -18px -15px");const U=lZ("left",r,e),G=lZ("right",r,e),Q=Nhe(E),W=X6(Q,g,g,0,!1,o,!1),X=X6(Q,g,g,0,!1,y?-45:null,!1),K={filter:Xx(l)??void 0,opacity:a==null?"":`${a}`};return se("div",{class:y?Vi.diamondMidColRamp:Vi.squareTableCell,styles:K},se("svg",{"aria-label":c,focusable:!1,height:g,role:"image",style:F,width:g,xmlns:pGe},se("defs",null,se("marker",{id:`${e}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},se("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),se("marker",{id:`${e}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},se("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),_),se("g",{transform:W},S),se("g",{transform:X},se("line",{fill:"none","marker-end":U.markerEnd,"marker-start":U.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:h-M,y2:M}),se("line",{fill:"none","marker-end":G.markerEnd,"marker-start":G.markerStart,stroke:"#555555","stroke-width":"1",x1:P,x2:h-P,y1:h+D,y2:h+D}))))}function AGe(t){return t=t||globalThis.location.hostname,mGe.some((e=>(t==null?void 0:t.match(e))!=null))}function cZ(t,e){return t?(e=e||globalThis.location.hostname)?e.match(Vhe)!=null||e.match(Hhe)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(Ghe)!=null||e.match(qhe)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}const Vhe=/^devext\.arcgis\.com$/,Ghe=/^qaext\.arcgis\.com$/,Hhe=/^[\w-]*\.mapsdevext\.arcgis\.com$/,qhe=/^[\w-]*\.mapsqa\.arcgis\.com$/,mGe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,Vhe,Ghe,/^jsapps\.esri\.com$/,Hhe,qhe],yGe=["web-gltf","web","cim"];function Whe(t,e,i){const r=t.name;return r==null?Promise.reject(new te("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?gGe(r,e,i):pne(t,e,i).then((s=>Jhe(s,r,e,zCe,i)))}function Qhe(t,e){return e.items.find((i=>i.name===t))}async function Jhe(t,e,i,r,s){var C,M;const n=(i==null?void 0:i.portal)!=null?i.portal:Oe.getDefault(),o={portal:n,url:Yr(t.baseUrl)},a=Qhe(e,t.data);if(!a)throw new te("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const l=(s==null?void 0:s.acceptedFormats)??yGe,c=r(a,l);if(!c)throw new te("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${l})`,{symbolName:e});const{url:h,format:y}=c;let g=kd(h,o),_=((C=a.thumbnail)==null?void 0:C.href)??null;const S=(M=a.thumbnail)==null?void 0:M.imageData;AGe()&&(g=cZ(g)??"",_=cZ(_));const E={portal:n,url:Yr(Vz(g)),origin:"portal-item"};return M7(g,s).then((P=>{const D=y==="cim"?fne(P.data):P.data,F=hne(D,E);if(F&&eh(F)){if(_){const U=kd(_,o);F.thumbnail=new Zm({url:U})}else S&&(F.thumbnail=new Zm({url:`data:image/png;base64,${S}`}));t.styleUrl?F.styleOrigin=new Yl({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(F.styleOrigin=new Yl({portal:i.portal,styleName:t.styleName,name:e}))}return F}))}function gGe(t,e,i){const r=BCe.replaceAll(/\{SymbolName\}/gi,t),s=e.portal!=null?e.portal:Oe.getDefault();return M7(r,i).then((n=>{const o=fne(n.data);return hne(o,{portal:s,url:Yr(Vz(r)),origin:"portal-item"})}))}const vGe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:Jhe,getStyleItemFromStyle:Qhe,resolveWebStyleSymbol:Whe},Symbol.toStringTag,{value:"Module"})),$m=Pr.size,LC=Pr.maxSize,nj=Pr.maxOutlineSize,uZ=Pr.lineWidth,K6=Pr.tallSymbolWidth;function cv(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const s=ri(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(s,nj),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?tj(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function bGe(t,e){var r,s,n;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((s=e==null?void 0:e.resource)==null?void 0:s.href))return WVe(e);const i=er("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const o=await Whe(t.styleOrigin,{portal:t.styleOrigin.portal}).catch((()=>null));if(o&&"thumbnail"in o&&((n=o.thumbnail)!=null&&n.url))return o.thumbnail.url}return i}function TO(t,e=1){const i=t.a,r=CP(t),s=r.h,n=r.s/e,o=100-(100-r.v)/e,{r:a,g:l,b:c}=q0({h:s,s:n,v:o});return[a,l,c,i]}function WM(t){var e;return t.type==="water"?t.color==null?null:t.color:((e=t.material)==null?void 0:e.color)==null?null:t.material.color}function vi(t,e=0){const i=WM(t);if(!i){if(t.type==="fill")return null;const s=CVe.r,n=Sf(s,e);return[n,n,n,100]}const r=i.toRgba();for(let s=0;s<3;s++)r[s]=Sf(r[s],e);return r}async function Zhe(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await IVe(er(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function hZ(t){return t.outline?cv(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function oj(t,e){const i=WM(t);if(!i)return null;let r="rgba(";return r+=Sf(i.r,e)+",",r+=Sf(i.g,e)+",",r+=Sf(i.b,e)+",",r+i.a+");"}function e8(t,e){const i=oj(t,e);return i?"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?ri(t.size):.75,nj),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?tj(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?ri(2):t.join:null}:{}}function kE(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function wGe(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function _Ge(t,e,i){var s,n;const r=[];if(!t)return r;switch(t.type){case"icon":{const l=e,c=e;switch(((s=t.resource)==null?void 0:s.primitive)??mSe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:vi(t,0),stroke:cv(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[0,0]},{command:"L",values:[l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:vi(t,0),stroke:cv(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:vi(t,0),stroke:cv(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*l,0]},{command:"L",values:[.5*l,c]},{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:hZ(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[l,c]},{command:"M",values:[l,0]},{command:"L",values:[0,c]}]},stroke:hZ(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,.5*c]},{command:"L",values:[.5*l,c]},{command:"Z",values:[]}]},fill:vi(t,0),stroke:cv(t)})}break}case"object":switch(((n=t.resource)==null?void 0:n.primitive)??wSe){case"cone":{const o=kE(vi(t,0),vi(t,-.6),i?K6:e),a=sVe(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o});break}case"inverted-cone":{const o=vi(t,0),a=kE(o,vi(t,-.6),e),l=nVe(e);r.push({shape:l[0],fill:a},{shape:l[1],fill:o});break}case"cube":{const o=iVe(e,i);r.push({shape:o[0],fill:vi(t,0)},{shape:o[1],fill:vi(t,-.3)},{shape:o[2],fill:vi(t,-.5)});break}case"cylinder":{const o=kE(vi(t,0),vi(t,-.6),i?K6:e),a=rVe(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o},{shape:a[2],fill:vi(t,0)});break}case"diamond":{const o=oVe(e);r.push({shape:o[0],fill:vi(t,-.3)},{shape:o[1],fill:vi(t,0)},{shape:o[2],fill:vi(t,-.3)},{shape:o[3],fill:vi(t,-.7)});break}case"sphere":{const o=kE(vi(t,0),vi(t,-.6));o.x1=0,o.y1=0,o.x2=.25*e,o.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:o});break}case"tetrahedron":{const o=aVe(e);r.push({shape:o[0],fill:vi(t,-.3)},{shape:o[1],fill:vi(t,0)},{shape:o[2],fill:vi(t,-.6)});break}}break}return r}function MP(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?ri(e):null}function SGe(t){return t.type==="icon"?"multiply":"tint"}async function xGe(t,e){const i=MP(e),r=e!=null&&e.maxSize?ri(e.maxSize):null,s=(e==null?void 0:e.disableUpsampling)??!1,n=t.symbolLayers,o=[],a=[];let l=!1,c=0,h=0,y=0;n.forEach((S=>{var P,D,F,U;if(S.type!=="icon"&&S.type!=="object")return;S&&S.type==="icon"&&(y=Math.max(S.size&&ri(S.size),y));const E=S.type==="icon"?S.size&&ri(S.size):0,C=i||E?Math.ceil(Math.min(i||E,r||LC)):$m;let M=S.type==="icon"?S.angle:null;if((e==null?void 0:e.rotation)!=null&&(M=(M??0)+e.rotation),a.push(M),(P=S==null?void 0:S.resource)==null?void 0:P.href){const G=bGe(t,S).then((Q=>{var K;const W=(K=S==null?void 0:S.material)==null?void 0:K.color,X=SGe(S);return dGe(Q,C,W,X,s)})).then((Q=>{const W=Q.width,X=Q.height;return c=Math.max(c,W),h=Math.max(h,X),M&&(l=!0),[{shape:{type:"image",x:0,y:0,width:W,height:X,src:Q.url},fill:null,stroke:null}]}));o.push(G)}else{let G=C;S.type==="icon"&&i&&(G=C*(E/y));const Q=(e==null?void 0:e.symbolConfig)==="tall"||((D=e==null?void 0:e.symbolConfig)==null?void 0:D.isTall)||S.type==="object"&&wGe(S);c=Math.max(c,Q?K6:G),h=Math.max(h,G),M&&((F=S.resource)!=null&&F.primitive)&&["square","triangle","x"].includes((U=S.resource)==null?void 0:U.primitive)&&(l=!0),o.push(Promise.resolve(_Ge(S,G,Q)))}}));const g=await Promise.allSettled(o),_=[];return g.forEach((S=>{S.status==="fulfilled"?_.push(S.value):S.reason&&be.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",S.reason)})),F1(_,[c,h],{node:e==null?void 0:e.node,scale:!1,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel,rotations:a,useRotationSize:l})}function $Ge(t,e){const i=t.symbolLayers,r=[],s=TP(t),n=MP(e),o=(e!=null&&e.maxSize?ri(e.maxSize):null)||nj;let a,l=0,c=0;return i.forEach(((h,y)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const g=[];switch(h.type){case"line":{const _=e8(h,0);if(_==null)break;const S=(_==null?void 0:_.width)||0;y===0&&(a=S);const E=Math.min(n||S,o),C=y===0?E:n?E*(S/a):E,M=C>uZ/2?2*C:uZ;c=Math.max(c,C),l=Math.max(l,M),_.width=C,g.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:_});break}case"path":{const _=Math.min(n||$m,o),S=vi(h,0),E=vi(h,-.2),C=oj(h,-.4),M=C?{color:C,width:1}:{};if(h.profile==="quad"){const P=h.width,D=h.height,F=KUe(P&&D?P/D:1,D===0,P===0),U={...M,join:"bevel"};g.push({shape:F[0],fill:E,stroke:U},{shape:F[1],fill:E,stroke:U},{shape:F[2],fill:S,stroke:U})}else g.push({shape:H_.pathSymbol3DLayer[0],fill:E,stroke:M},{shape:H_.pathSymbol3DLayer[1],fill:S,stroke:M});c=Math.max(c,_),l=c}}r.push(g)})),Promise.resolve(F1(r,[l,c],{node:e==null?void 0:e.node,scale:s,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function EGe(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,s=MP(e),n=e!=null&&e.maxSize?ri(e.maxSize):null,o=s||$m,a=[];let l=0,c=0,h=!1;for(let y=0;y<r.length;y++){const g=r.at(y),_=[];if(!i||g.type==="fill"){switch(g.type){case"fill":{const S=Math.min(o,n||LC);if(l=Math.max(l,S),c=Math.max(c,S),h=!0,i){const E=H_.meshSymbol3DFill,C=oj(g,-.4),M=C?{color:C,width:1,join:"round"}:{};_.push({shape:E[0],fill:vi(g,0),stroke:M},{shape:E[1],fill:vi(g,-.2),stroke:M},{shape:E[2],fill:vi(g,-.6),stroke:M})}else{let E=vi(g,0);const C="pattern"in g?g.pattern:null,M=cv(g),P=WM(g);C!=null&&C.type==="style"&&C.style!=="solid"&&P&&(E=await Zhe(C,P)),_.push({shape:H_.fill[0],fill:E,stroke:M})}break}case"line":{const S=e8(g,0);if(S==null)break;const E={stroke:S,shape:H_.fill[0]};l=Math.max(l,$m),c=Math.max(c,$m),_.push(E);break}case"extrude":{const S={join:"round",width:1,...e8(g,-.4)},E=vi(g,0),C=vi(g,-.2),M=Math.min(o,n||LC),P=eVe(M);S.width=1,_.push({shape:P[0],fill:C,stroke:S},{shape:P[1],fill:C,stroke:S},{shape:P[2],fill:E,stroke:S});const D=$m,F=.7*$m+.5*M;l=Math.max(l,D),c=Math.max(c,F);break}case"water":{const S=WM(g),E=TO(S),C=TO(S,2),M=TO(S,3),P=tVe();h=!0,_.push({shape:P[0],fill:E},{shape:P[1],fill:C},{shape:P[2],fill:M});const D=Math.min(o,n||LC);l=Math.max(l,D),c=Math.max(c,D);break}}a.push(_)}}return F1(a,[l,c],{node:e==null?void 0:e.node,scale:h,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function IGe(t,e){if(t.symbolLayers.length===0)return Promise.reject(new te("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return xGe(t,e);case"line-3d":return $Ge(t,e);case"polygon-3d":case"mesh-3d":return EGe(t,e)}return Promise.reject(new te("symbolPreview: swatchInfo3D","symbol not supported."))}const CGe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Zhe,getSizeFromOptions:MP,getSymbolLayerFill:vi,previewSymbol3D:IGe},Symbol.toStringTag,{value:"Module"})),dZ={HH:315,HL:45,LL:135,LH:225},TGe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function MGe(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return vi(t.symbolLayers.at(0));if(e==="simple-line"){const i=GS(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=GS(t);return i&&i.color}return EVe(t)}function kGe(t,e){const i=e.HH.label,r=e.LL.label,s=e.HL.label,n=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:s,right:n};case"HL":return{top:s,bottom:n,left:r,right:i};case"LL":return{top:r,bottom:i,left:n,right:s};case"LH":return{top:n,bottom:s,left:i,right:r}}}function PGe(t){const{focus:e,infos:i,numClasses:r}=t,s=TGe[r],n={};i.forEach((a=>{n[a.value]={label:a.label,fill:MGe(a.symbol)}}));const o=[];for(let a=0;a<r;a++){const l=[];for(let c=0;c<r;c++){const h=n[s[a][c]];l.push(h.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:o,labels:kGe(e,n),rotation:Yhe(e)}}function Yhe(t){let e=dZ[t];return t&&e==null&&(e=dZ.HH),e||0}let My=null;const pZ=[255,255,255];function fZ(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function LGe(t,e,i){const{backgroundColor:r,outline:s,dotSize:n}=t,o=(i==null?void 0:i.swatchSize)||Pr.size,a=.8,l=Math.round(o*o/Math.max(n,.5)**2*a),c=window.devicePixelRatio,h=document.createElement("canvas"),y=o*c;h.width=y,h.height=y,h.style.width=h.width/c+"px",h.style.height=h.height/c+"px";const g=h.getContext("2d");if(r&&(g.fillStyle=r.toCss(!0),g.fillRect(0,0,y,y),g.fill()),g.fillStyle=(e==null?void 0:e.toCss(!0))??"",My&&My.length/2===l)for(let S=0;S<2*l;S+=2){const E=My[S],C=My[S+1];g.fillRect(E,C,n*c,n*c),g.fill()}else{My=[];for(let S=0;S<2*l;S+=2){const E=fZ(0,y),C=fZ(0,y);My.push(E,C),g.fillRect(E,C,n*c,n*c),g.fill()}}s&&(s.color&&(g.strokeStyle=s.color.toCss(!0)),g.lineWidth=s.width,g.strokeRect(0,0,y,y));const _=new Image(o,o);return _.src=h.toDataURL(),_.ariaLabel=(i==null?void 0:i.ariaLabel)??null,_.alt=(i==null?void 0:i.ariaLabel)??"",_}function RGe(t,e={}){const i=e.radius||40,r=2*Math.PI*i,s=t.length,n=r/s,o=[],a=GS(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,c=l&&l.length===s&&l.reduce(((S,E)=>S+E),0)===100,h=[0];for(let S=0;S<s;S++){let E=null;c&&(E=l[S]*r/100,h.push(E+h[S])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(E??n)/2} ${r}`,dashoffset:"-"+(c?h[S]/2:S*(n/2)),color:t[S]},offset:[0,0]})}let y=null;const g=2*i+((a==null?void 0:a.width)||0),_=e.holePercentage;if(_){a&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*_},fill:null,stroke:a,offset:[0,0]});const S=g/2;y=[[{shape:{type:"circle",cx:S,cy:S,r:S},fill:pZ,stroke:a?{...a,color:pZ}:null,offset:[0,0]},{shape:{type:"circle",cx:S,cy:S,r:i*_},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return F1([o],[g,g],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:y,rotations:[-90],ariaLabel:e.ariaLabel})}function rm(t,e={}){const s=e.align==="horizontal",n=s?75:24,o=s?24:75,a=e.width??n,l=e.height??o,c=e.gradient??!0,h=window.devicePixelRatio,y=a*h,g=l*h,_=document.createElement("canvas");_.width=y,_.height=g,_.ariaLabel=e.ariaLabel??null,_.style.width=`${a}px`,_.style.height=`${l}px`;const S=_.getContext("2d"),E=s?y:0,C=s?0:g;if(c){const P=S.createLinearGradient(0,0,E,C),D=t.length,F=D===1?0:1/(D-1);t.forEach(((U,G)=>P.addColorStop(G*F,U.toString()))),S.fillStyle=P,S.fillRect(0,0,y,g)}else{const P=s?y/t.length:y,D=s?g:g/t.length;let F=0,U=0;for(const G of t)S.fillStyle=G.toString(),S.fillRect(F,U,P,D),F=s?F+P:0,U=s?0:U+D}const M=document.createElement("div");return M.style.width=`${a}px`,M.style.height=`${l}px`,OGe(M,e==null?void 0:e.effectList),M.appendChild(_),M}function OGe(t,e){if(!e)return;t.style.filter=Xx(e);const i=e.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?t.style.marginLeft=`${Math.abs(r.offsetX)}px`:t.style.marginRight=`${r.offsetX}px`;break}}}async function Xhe(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await Ie(()=>import("./previewWebStyleSymbol-BiDJx6eA.js"),[],import.meta.url);return i(t,Xhe,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await Ie(()=>Promise.resolve().then(()=>CGe),void 0,import.meta.url);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await Ie(()=>import("./previewSymbol2D-v4F5VOUo.js"),[],import.meta.url);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await Ie(()=>Promise.resolve().then(()=>KQe),void 0,import.meta.url);return i(t,e)}default:return}}function Khe(t){return t&&"opacity"in t?t.opacity*Khe(t.parent):1}async function Spt(t,e){var D;if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,s=e!=null&&e.ignoreOpacity?1:Khe(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const F=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):t.symbol.clone();return CO(F,null,s),F}const n=(e==null?void 0:e.renderer)??DGe(r);let o=n&&"getSymbolAsync"in n?await n.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):o.clone(),!n||!("visualVariables"in n)||!((D=n.visualVariables)!=null&&D.length))return CO(o,null,s),o;if("arcadeRequiredForVisualVariables"in n&&n.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const F={...e};F.arcade=await Md(),e=F}const{getColor:a,getOpacity:l,getAllSizes:c,getRotationAngle:h}=await Ie(()=>Promise.resolve().then(()=>V0),void 0,import.meta.url),y=[],g=[],_=[],S=[];for(const F of n.visualVariables)switch(F.type){case"color":y.push(F);break;case"opacity":g.push(F);break;case"rotation":S.push(F);break;case"size":F.target||_.push(F)}const E=!!y.length&&y[y.length-1],C=E?a(E,t,e):null,M=!!g.length&&g[g.length-1];let P=M?l(M,t,e):null;if(s!=null&&(P=P!=null?P*s:s),e!=null&&e.ignoreOpacity&&(P=1),C!=null&&M&&P!=null&&(C.a=1),CO(o,C,P),_.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const F=c(_,t,e);await nGe(o,F)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const F of S)oGe(o,h(F,t,e),F.axis);return o}function DGe(t){if(t)return"renderer"in t?t.renderer:void 0}function NGe(t,e,i){const r=t.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const s=r.visualVariables.find((h=>h.type==="size"));if(!("stops"in s)||!s.stops)return null;const n=s.stops.find((h=>h.useMinValue)),o=s.stops.find((h=>h.useMaxValue));if(n==null||o==null)return null;const a=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,l=s.field,c=e.getDisplayStatistics(a,l);return c?new hi({field:s.field,minSize:t.clusterMinSize,minDataValue:c.minValue,maxSize:t.clusterMaxSize,maxDataValue:c.maxValue}):null}const FGe=/^-?(\d+)(\.(\d+))?$/i;function zGe(t,e){return t-e}function BGe(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function jGe(t,e,i,r,s){const n=RC(t,e,i,r),o=n.previous==null||n.previous<=s,a=n.next==null||n.next<=s;return o&&a||n.previous+n.next<=2*s}function QM(t){const e=String(t),i=e.match(FGe);if(i!=null&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),s=r[0],n=r[1];if(s&&n){const o=Number(s);let a=Number(n);const l=a>0;l||(a=Math.abs(a));const c=QM(o);return l?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),c}}return{integer:0,fractional:0}}function RC(t,e,i,r){const s={previous:null,next:null};if(i!=null){const n=t-i,o=e-i-n;s.previous=Math.floor(Math.abs(100*o/n))}if(r!=null){const n=r-t,o=r-e-n;s.next=Math.floor(Math.abs(100*o/n))}return s}function JM(t,e={}){const i=t.slice(),{tolerance:r=2,strictBounds:s=!1,indexes:n=i.map(((o,a)=>a))}=e;n.sort(zGe);for(let o=0;o<n.length;o++){const a=n[o],l=i[a],c=a===0?null:i[a-1],h=a===i.length-1?null:i[a+1],y=QM(l).fractional;if(y){let g,_=0,S=!1;for(;_<=y&&!S;){const E=BGe(l,_);g=s&&o===0?E[1]:E[0],S=jGe(l,g,c,h,r),_++}S&&(i[a]=g)}}return i}const UGe={maximumFractionDigits:20};function VGe(t){return E0(t,UGe)}const xpt=",",GGe={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},HGe=new Set(["integer","small-integer"]);let MO=null;function qGe(t){return _z(t)||Gbe(t)||Hbe(t)}async function $pt(t){const{field:e,field2:i,field3:r,normalizationField:s,valueExpression:n}=t;let o=[];if(n){if(!MO){const{arcadeUtils:a}=await Md();MO=a}o=MO.extractFieldNames(n)}return e&&o.push(e),i&&o.push(i),r&&o.push(r),s&&o.push(s),o}function Lw(t){return String(t).padStart(2,"0")}function AZ(t,e,i){let r;return e==="date"||e==="number"?(e==="number"&&(t=new Date(t)),r=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${Lw((i?t.getMonth():t.getUTCMonth())+1)}-${Lw(i?t.getDate():t.getUTCDate())} ${Lw(i?t.getHours():t.getUTCHours())}:${Lw(i?t.getMinutes():t.getUTCMinutes())}:${Lw(i?t.getSeconds():t.getUTCSeconds())}'`):r=t,r}function Ept(t,e,i,r){const{hasQueryEngine:s}=t,n=`(${AZ(i,mZ(t,i),s)} - ${AZ(e,mZ(t,e),s)})`;let o=GGe[r],a="/";return o<1&&(o=1/o,a="*"),{sqlExpression:o===1?n:`(${n} ${a} ${o})`,sqlWhere:null}}function mZ(t,e){if(e instanceof Date)return"date";if(typeof e=="number")return"number";if(typeof e=="string"){const i=t.getField(e);if(e.toLowerCase()==="<now>")return;if(_z(i))return"field"}}function Ipt(t,e){const i=e&&t.getField(e);return!!i&&HGe.has(i.type)}function Cpt(t){return`cast(${t} as float)`}function WGe(t,e){const{format:i,timeZoneOptions:r,fieldType:s}=e??{};let n,o;if(r&&({timeZone:n,timeZoneName:o}=A1e(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,cw(i||"short-date-short-time"),s)),typeof t=="string"&&isNaN(Date.parse(s==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(s){case"date-only":{const a=cw(i||"short-date");return typeof t=="string"?S1e(t,{...a}):nl(t,{...a,timeZone:Vu})}case"time-only":{const a=cw(i||"short-time");return typeof t=="string"?x1e(t,a):nl(t,{...a,timeZone:Vu})}case"timestamp-offset":{if(!n&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const a=i||r?cw(i||"short-date-short-time"):void 0,l=a?{...a,timeZone:n,timeZoneName:o}:void 0;return typeof t=="string"?$1e(t,l):nl(t,l)}default:{const a=i||r?cw(i||"short-date-short-time"):void 0;return nl(typeof t=="string"?new Date(t):t,a?{...a,timeZone:n,timeZoneName:o}:void 0)}}}const ede="<",tde=">";function ide(t,e,i,r){let s="";return e===0?s=`${ede} `:e===i&&(s=`${tde} `),s+(r?WGe(t,r):VGe(t))}const QGe=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function t8(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find((o=>o.type==="color"));if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const s=i!=null&&r!=null?i+(r-i)/2:0,{getColor:n}=await Ie(async()=>{const{getColor:o}=await Promise.resolve().then(()=>V0);return{getColor:o}},void 0,import.meta.url);return n(e,s)??null}async function rde(t,e){const i=t.trailCap,r=t.trailWidth||1,s=e||await t8(t)||t.color;return new br({cap:i,color:s,width:r})}function JGe(t,e){var i,r;if(!e.field)return null;if("featureReduction"in t)switch((i=t.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const s=t.featureReduction.fields.find((({name:n})=>n.toLowerCase()===e.field.toLowerCase()));return s&&"getField"in t?t.getField(s.onStatisticField):null}}return"getField"in t?(r=t.getField)==null?void 0:r.call(t,e.field):null}function ZGe(t,e){var r,s,n;const i="popupTemplate"in t?(r=t.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&e)return(n=(s=i.find((o=>{var a;return((a=o.fieldName)==null?void 0:a.toLowerCase())===e.toLowerCase()})))==null?void 0:s.format)==null?void 0:n.dateFormat}function YGe(t,e,i){var n,o,a,l;const r=JGe(t,e);if(!r||!qGe(r)&&!hte(r))return null;let s=ZGe(t,r.name);if(!s&&r.type==="date"){let c=0,h=0;e.stops?(c=((o=(n=e.stops)==null?void 0:n.at(0))==null?void 0:o.value)??c,h=((l=(a=e.stops)==null?void 0:a.at(-1))==null?void 0:l.value)??h):"minDataValue"in e&&"maxDataValue"in e&&(c=e.minDataValue??c,h=e.maxDataValue??h),s=h-c>2*J4.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:s,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}}}function Lu(t,e){var i,r;if("authoringInfo"in t)return(r=(i=t.authoringInfo)==null?void 0:i.visualVariables)==null?void 0:r.find((({theme:s})=>s===e))}const XGe=new ze([64,64,64]);function sde(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map(((s,n)=>i.includes(n)?ide(s,n,r,e):null))}async function yZ(t,e,i){let r=!1,s=[],n=[];if(t.stops){const c=t.stops;s=c.map((h=>h.value)),r=c.some((h=>!!h.label)),r&&(n=c.map((h=>h.label)))}const o=s[0],a=s[s.length-1];if(o==null&&a==null)return null;const l=r?null:sde(s,i);return(await Promise.all(s.map((async(c,h)=>{const y=t.type==="opacity"?await KGe(c,t,e):(await Ie(async()=>{const{getColor:_}=await Promise.resolve().then(()=>V0);return{getColor:_}},void 0,import.meta.url)).getColor(t,c),g=r?n[h]:(l==null?void 0:l[h])??"";return y==null?null:{value:c,color:y,label:g}})))).filter(os).reverse()}async function KGe(t,e,i){const r=new ze(i??XGe),s=(await Ie(async()=>{const{getOpacity:n}=await Promise.resolve().then(()=>V0);return{getOpacity:n}},void 0,import.meta.url)).getOpacity(e,t);return s!=null&&(r.a=s),r}function eHe(t){let e=!1,i=[],r=[];i=t.map((a=>a.value)),e=t.some((a=>!!a.label)),e&&(r=t.map((a=>a.label??"")));const s=i[0],n=i[i.length-1];if(s==null&&n==null)return null;const o=e?null:sde(i);return i.map(((a,l)=>({value:a,color:nde(a,t),label:e?r[l]:(o==null?void 0:o[l])??""}))).reverse()}function nde(t,e){const{startIndex:i,endIndex:r,weight:s}=tHe(t,e);if(i===r)return e[i].color;const n=ze.blendColors(e[i].color,e[r].color,s);return new ze(n)}function tHe(t,e){let i=0,r=e.length-1;return e.some(((s,n)=>t<s.value?(r=n,!0):(i=n,!1))),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function iHe(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach(((r,s)=>{s===0?i.push({value:e.max,color:new ze(r.toColor),label:"high"}):i.push({value:null,color:new ze(r.toColor),label:""}),s===t.colorRamps.length-1?i.push({value:e.min,color:new ze(r.fromColor),label:"low"}):i.push({value:null,color:new ze(r.fromColor),label:""})}));else{let r,s;t&&t.type==="algorithmic"?(r=t.fromColor,s=t.toColor):(r=[0,0,0,1],s=[255,255,255,1]),i=[{value:e.max,color:new ze(s),label:"high"},{value:e.min,color:new ze(r),label:"low"}]}return i}function rHe(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter((r=>{var s;return((s=r.color)==null?void 0:s.a)>0}));let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new gd({ratio:1,color:r.color})),i++)}return e.map(((r,s)=>{var o,a;let n="";return s===0?n=((o=t.legendOptions)==null?void 0:o.minLabel)||"low":s===i&&(n=((a=t.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:n,ratio:r.ratio}})).reverse()}const sHe="spike-height-override";function nHe(t){var a;const{strokeColor:e,strokeWidth:i,symbolStyle:r}=t,s=(r==null?void 0:r.includes("solid-fill"))||(r==null?void 0:r.includes("gradient-fill"));let n=e==null?void 0:e.toArray(),o=!1;return r!=null&&r.includes("outline")&&s?o=!0:n=(a=t.color)==null?void 0:a.toArray(),{type:"CIMSolidStroke",effects:oHe(r),enable:!0,colorLocked:o,capStyle:zo.Round,joinStyle:al.Round,lineStyle3D:aF.Strip,miterLimit:4,width:i??Ei(1),color:n}}function oHe(t){if(!(t!=null&&t.includes("closed")))return[{type:"CIMGeometricEffectAddControlPoints",angleTolerance:90,primitiveName:"spike-control-points"},{type:"CIMGeometricEffectSuppress",suppress:!0,invert:!0,primitiveName:"spike-stroke-suppress"}]}function gZ(t){const{color:e,symbolStyle:i}=t,r=i==null?void 0:i.includes("solid-fill"),s=i==null?void 0:i.includes("gradient-fill");if(!r&&!s||!e)return;if(r)return{type:"CIMSolidFill",enable:!0,colorLocked:!1,color:e==null?void 0:e.toArray()};const n=e.clone();return n.a=0,{type:"CIMGradientFill",enable:!0,angle:90,colorRamp:{type:"CIMMultipartColorRamp",colorRamps:[{type:"CIMLinearContinuousColorRamp",fromColor:e.toArray(),toColor:n.toArray()}],weights:[1]},gradientMethod:"Linear",gradientSize:70,gradientSizeUnits:"Relative",gradientType:"Continuous"}}function ode(t,e){var P,D,F;const{defaultHeight:i,baseWidth:r,color:s,strokeColor:n,primitiveOverrides:o,symbolStyle:a,strokeWidth:l}=e,c=((P=t.data.symbol)==null?void 0:P.type)==="CIMPointSymbol"?t.data.symbol:null,h=c==null?void 0:c.symbolLayers;if(!h)return t;const y=c.effects,g=y==null?void 0:y.find((U=>U.type==="CIMGeometricEffectTaperedPolygon")),_=y==null?void 0:y.find((U=>U.type==="CIMGeometricEffectRadial"&&U.primitiveName===sHe));r!=null&&g&&(g.fromWidth=r),i!=null&&_&&(_.length=i);const S=h==null?void 0:h.find((U=>U.type==="CIMSolidStroke")),E=h==null?void 0:h.find((U=>U.type==="CIMSolidFill")),C=h==null?void 0:h.find((U=>U.type==="CIMGradientFill")),M=((D=C==null?void 0:C.colorRamp)==null?void 0:D.type)==="CIMMultipartColorRamp"&&((F=C.colorRamp.colorRamps[0])==null?void 0:F.type)==="CIMLinearContinuousColorRamp"?C.colorRamp.colorRamps[0]:null;if(a){const U=(E==null?void 0:E.color)??(M==null?void 0:M.fromColor)??(S==null?void 0:S.color),G=s??(U?new ze(U):void 0),Q=(S==null?void 0:S.color)??U,W=n??(Q?new ze(Q):void 0),X=a.includes("solid-fill"),K=a.includes("gradient-fill");if(X||K||kO(h,E??C),G){if(X)kO(h,C),E?E.color=G==null?void 0:G.toArray():h.push(gZ({...e,color:G}));else if(K)if(kO(h,E),C){if(M&&s){const de=G.clone();de.a=0,M.fromColor=G.toArray(),M.toColor=de.toArray()}}else h.push(gZ({...e,color:G}))}if(S){const de=nHe({...e,strokeColor:W,color:G});S.effects=de.effects,S.color=de.color,S.width=de.width,S.colorLocked=de.colorLocked}}else if(S&&(n&&(S.color=n.toArray()),l!=null&&(S.width=l)),E&&s&&(E.color=s.toArray()),M&&s){const U=s.clone();U.a=0,M.fromColor=s.toArray(),M.toColor=U.toArray()}return o!==void 0&&(t.data.primitiveOverrides=ie(o)),t}function kO(t,e){if(!e)return;const i=t.indexOf(e);i!==-1&&t.splice(i,1)}const PE=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["Â«","Â»"],["Â»","Â«"],["â€¹","â€º"],["â€º","â€¹"],["â½","â¾"],["â¾","â½"],["â‚","â‚Ž"],["â‚Ž","â‚"],["â‰¤","â‰¥"],["â‰¥","â‰¤"],["âŒ©","âŒª"],["âŒª","âŒ©"],["ï¹™","ï¹š"],["ï¹š","ï¹™"],["ï¹›","ï¹œ"],["ï¹œ","ï¹›"],["ï¹","ï¹ž"],["ï¹ž","ï¹"],["ï¹¤","ï¹¥"],["ï¹¥","ï¹¤"]],Kb=["Ø¢","Ø£","Ø¥","Ø§"],aHe=["ï»µ","ï»·","ï»¹","ï»»"],lHe=["ï»¶","ï»¸","ï»º","ï»¼"],ZM=["Ø§","Ø¨","Øª","Ø«","Ø¬","Ø­","Ø®","Ø¯","Ø°","Ø±","Ø²","Ø³","Ø´","Øµ","Ø¶","Ø·","Ø¸","Ø¹","Øº","Ù","Ù‚","Ùƒ","Ù„","Ù…","Ù†","Ù‡","Ùˆ","ÙŠ","Ø¥","Ø£","Ø¢","Ø©","Ù‰","Ù„","Ù…","Ù†","Ù‡","Ùˆ","ÙŠ","Ø¥","Ø£","Ø¢","Ø©","Ù‰","ÛŒ","Ø¦","Ø¤"],cHe=["ïº","ïº","ïº•","ïº™","ïº","ïº¡","ïº¥","ïº©","ïº«","ïº­","ïº¯","ïº±","ïºµ","ïº¹","ïº½","ï»","ï»…","ï»‰","ï»","ï»‘","ï»•","ï»™","ï»","ï»¡","ï»¥","ï»©","ï»­","ï»±","ïº‡","ïºƒ","ïº","ïº“","ï»¯","ï¯¼","ïº‰","ïº…","ï¹°","ï¹²","ï¹´","ï¹¶","ï¹¸","ï¹º","ï¹¼","ï¹¾","ïº€","ïº‰","ïº…"],uHe=["ïºŽ","ïº","ïº–","ïºš","ïºž","ïº¢","ïº¦","ïºª","ïº¬","ïº®","ïº°","ïº²","ïº¶","ïºº","ïº¾","ï»‚","ï»†","ï»Š","ï»Ž","ï»’","ï»–","ï»š","ï»ž","ï»¢","ï»¦","ï»ª","ï»®","ï»²","ïºˆ","ïº„","ïº‚","ïº”","ï»°","ï¯½","ïºŠ","ïº†","ï¹°","ï¹²","ï¹´","ï¹¶","ï¹¸","ï¹º","ï¹¼","ï¹¾","ïº€","ïºŠ","ïº†"],hHe=["ïºŽ","ïº’","ïº˜","ïºœ","ïº ","ïº¤","ïº¨","ïºª","ïº¬","ïº®","ïº°","ïº´","ïº¸","ïº¼","ï»€","ï»„","ï»ˆ","ï»Œ","ï»","ï»”","ï»˜","ï»œ","ï» ","ï»¤","ï»¨","ï»¬","ï»®","ï»´","ïºˆ","ïº„","ïº‚","ïº”","ï»°","ï¯¿","ïºŒ","ïº†","ï¹±","ï¹²","ï¹´","ï¹·","ï¹¹","ï¹»","ï¹½","ï¹¿","ïº€","ïºŒ","ïº†"],dHe=["ïº","ïº‘","ïº—","ïº›","ïºŸ","ïº£","ïº§","ïº©","ïº«","ïº­","ïº¯","ïº³","ïº·","ïº»","ïº¿","ï»ƒ","ï»‡","ï»‹","ï»","ï»“","ï»—","ï»›","ï»Ÿ","ï»£","ï»§","ï»«","ï»­","ï»³","ïº‡","ïºƒ","ïº","ïº“","ï»¯","ï¯¾","ïº‹","ïº…","ï¹°","ï¹²","ï¹´","ï¹¶","ï¹¸","ï¹º","ï¹¼","ï¹¾","ïº€","ïº‹","ïº…"],vZ=["Ø¡","Ø¢","Ø£","Ø¤","Ø¥","Ø§","Ø©","Ø¯","Ø°","Ø±","Ø²","Ùˆ","Ù‰"],pHe=["Ù‹","Ù‹","ÙŒ","ØŸ","Ù","ØŸ","ÙŽ","ÙŽ","Ù","Ù","Ù","Ù","Ù‘","Ù‘","Ù’","Ù’","Ø¡","Ø¢","Ø¢","Ø£","Ø£","Ø¤","Ø¤","Ø¥","Ø¥","Ø¦","Ø¦","Ø¦","Ø¦","Ø§","Ø§","Ø¨","Ø¨","Ø¨","Ø¨","Ø©","Ø©","Øª","Øª","Øª","Øª","Ø«","Ø«","Ø«","Ø«","Ø¬","Ø¬","Ø¬","Ø¬","Ø­","Ø­","Ø­","Ø­","Ø®","Ø®","Ø®","Ø®","Ø¯","Ø¯","Ø°","Ø°","Ø±","Ø±","Ø²","Ø²","Ø³","Ø³","Ø³","Ø³","Ø´","Ø´","Ø´","Ø´","Øµ","Øµ","Øµ","Øµ","Ø¶","Ø¶","Ø¶","Ø¶","Ø·","Ø·","Ø·","Ø·","Ø¸","Ø¸","Ø¸","Ø¸","Ø¹","Ø¹","Ø¹","Ø¹","Øº","Øº","Øº","Øº","Ù","Ù","Ù","Ù","Ù‚","Ù‚","Ù‚","Ù‚","Ùƒ","Ùƒ","Ùƒ","Ùƒ","Ù„","Ù„","Ù„","Ù„","Ù…","Ù…","Ù…","Ù…","Ù†","Ù†","Ù†","Ù†","Ù‡","Ù‡","Ù‡","Ù‡","Ùˆ","Ùˆ","Ù‰","Ù‰","ÙŠ","ÙŠ","ÙŠ","ÙŠ","ï»µ","ï»¶","ï»·","ï»¸","ï»¹","ï»º","ï»»","ï»¼","ØŸ","ØŸ","ØŸ"],bZ=["Ø¡","Ù"],fHe=["Øº","ÙŠ"],AHe=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],mHe=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],z=0,Ce=1,At=2,zr=3,R=4,Gc=5,OC=6,O=7,Sn=8,qn=9,Sl=10,Et=11,oe=12,yHe=13,gHe=14,vHe=15,bHe=16,wHe=17,nt=18,_He=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],jc=100,SHe=[jc+0,z,z,z,z,jc+1,jc+2,jc+3,Ce,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,jc+4,R,R,R,z,R,z,R,z,R,R,R,z,z,R,R,z,z,z,z,z,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,z,z,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,z,z,R,R,z,z,R,R,z,z,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,z,z,z,jc+5,O,O,jc+6,jc+7],xHe=[[nt,nt,nt,nt,nt,nt,nt,nt,nt,OC,Gc,OC,Sn,Gc,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,Gc,Gc,Gc,OC,Sn,R,R,Et,Et,Et,R,R,R,R,R,Sl,qn,Sl,qn,qn,At,At,At,At,At,At,At,At,At,At,qn,R,R,R,R,R,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,R,R,R,R,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,R,R,R,nt,nt,nt,nt,nt,nt,Gc,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,qn,R,Et,Et,Et,Et,R,R,R,R,z,R,R,nt,R,R,Et,Et,At,At,R,z,R,R,R,At,z,R,R,R,R,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,z,z,z,z,z,z,z,z],[z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,R,R,R,R,R,R,R,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,R,z,z,z,z,z,z,z,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,z,R,R,R,R,R,R,R,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,Ce,oe,Ce,oe,oe,Ce,oe,oe,Ce,oe,R,R,R,R,R,R,R,R,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,R,R,R,R,R,Ce,Ce,Ce,Ce,Ce,R,R,R,R,R,R,R,R,R,R,R],[zr,zr,zr,zr,R,R,R,R,O,Et,Et,O,qn,O,R,R,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,O,R,R,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,zr,zr,zr,zr,zr,zr,zr,zr,zr,zr,Et,zr,zr,O,O,O,oe,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,oe,oe,oe,oe,oe,oe,oe,zr,R,oe,oe,oe,oe,oe,oe,O,O,oe,oe,R,oe,oe,oe,oe,O,O,At,At,At,At,At,At,At,At,At,At,O,O,O,O,O,O],[O,O,O,O,O,O,O,O,O,O,O,O,O,O,R,O,O,oe,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,R,R,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,O,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,oe,oe,oe,oe,oe,oe,oe,oe,oe,Ce,Ce,R,R,R,R,Ce,R,R,R,R,R],[Sn,Sn,Sn,Sn,Sn,Sn,Sn,Sn,Sn,Sn,Sn,nt,nt,nt,z,Ce,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Sn,Gc,yHe,gHe,vHe,bHe,wHe,qn,Et,Et,Et,Et,Et,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,qn,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Sn,nt,nt,nt,nt,nt,R,R,R,R,R,nt,nt,nt,nt,nt,nt,At,z,R,R,At,At,At,At,At,At,Sl,Sl,R,R,R,z,At,At,At,At,At,At,At,At,At,At,Sl,Sl,R,R,R,R,z,z,z,z,z,z,z,z,z,z,z,z,z,R,R,R,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,Et,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[z,z,z,z,z,z,z,R,R,R,R,R,R,R,R,R,R,R,R,z,z,z,z,z,R,R,R,R,R,Ce,oe,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Sl,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,R,Ce,Ce,Ce,Ce,Ce,R,Ce,R,Ce,Ce,R,Ce,Ce,R,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,oe,oe,oe,oe,oe,oe,oe,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,qn,R,qn,R,R,qn,R,R,R,R,R,R,R,R,R,Et,R,R,Sl,Sl,R,R,R,R,R,Et,Et,R,R,R,R,R,O,O,O,O,O,R,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,R,R,nt],[R,R,R,Et,Et,Et,R,R,R,R,R,Sl,qn,Sl,qn,qn,At,At,At,At,At,At,At,At,At,At,qn,R,R,R,R,R,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,R,R,R,R,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,R,R,R,R,R,R,R,R,R,R,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,R,R,R,z,z,z,z,z,z,R,R,z,z,z,z,z,z,R,R,z,z,z,z,z,z,R,R,z,z,z,R,R,R,Et,Et,R,R,R,Et,Et,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];let $He=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(UHe(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,r))return e;i=this.inputFormat,r=this.outputFormat;let s=e;const n=GHe,o=SZ(i.charAt(1)),a=SZ(r.charAt(1)),l=(i.charAt(0)==="I"?"L":i.charAt(0))+o,c=(r.charAt(0)==="I"?"L":r.charAt(0))+a,h=i.charAt(2)+r.charAt(2);n.defInFormat=l,n.defOutFormat=c,n.defSwap=h;const y=K2(e,l,c,h,n);let g=!1;return r.charAt(1)==="R"?g=!0:r.charAt(1)!=="C"&&r.charAt(1)!=="D"||(g=this.checkContextual(y)==="rtl"),this.sourceToTarget=Aa,this.targetToSource=VHe(this.sourceToTarget),XM=this.targetToSource,s=i.charAt(3)===r.charAt(3)?y:r.charAt(3)==="S"?IHe(g,y):MHe(y,g,!0),this.sourceToTarget=Aa,this.targetToSource=XM,this.levels=kP,s}_inputFormatSetter(e){if(!xZ.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!xZ.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=YM(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return WHe.test(e)}};function K2(t,e,i,r,s){const n=EHe(t,{inFormat:e,outFormat:i,swap:r},s);if(n.inFormat===n.outFormat)return t;e=n.inFormat,i=n.outFormat,r=n.swap;const o=e.slice(0,1),a=e.slice(1,4),l=i.slice(0,1),c=i.slice(1,4);if(s.inFormat=e,s.outFormat=i,s.swap=r,o==="L"&&i==="VLTR"){if(a==="LTR")return s.dir=ky,cp(t,s);if(a==="RTL")return s.dir=e_,cp(t,s)}if(o==="V"&&l==="V")return s.dir=a==="RTL"?e_:ky,PO(t,s);if(o==="L"&&i==="VRTL")return a==="LTR"?(s.dir=ky,t=cp(t,s)):(s.dir=e_,t=cp(t,s)),PO(t);if(e==="VLTR"&&i==="LLTR")return s.dir=ky,cp(t,s);if(o==="V"&&l==="L"&&a!==c)return t=PO(t),a==="RTL"?K2(t,"LLTR","VLTR",r,s):K2(t,"LRTL","VRTL",r,s);if(e==="VRTL"&&i==="LRTL")return K2(t,"LRTL","VRTL",r,s);if(o==="L"&&l==="L"){const h=s.swap;return s.swap=h.slice(0,1)+"N",a==="RTL"?(s.dir=e_,t=cp(t,s),s.swap="N"+h.slice(1,3),s.dir=ky,t=cp(t,s)):(s.dir=ky,t=cp(t,s),s.swap="N"+h.slice(1,3),t=K2(t,"VLTR","LRTL",s.swap,s)),t}return t}function EHe(t,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const r=e.inFormat.slice(0,1),s=e.outFormat.slice(0,1);let n,o=e.inFormat.slice(1,4),a=e.outFormat.slice(1,4);return o.charAt(0)==="C"&&(n=YM(t),o=n==="ltr"||n==="rtl"?n.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=r+o),a.charAt(0)==="C"&&(n=YM(t),n==="rtl"?a="RTL":n==="ltr"?(n=THe(t),a=n.toUpperCase()):a=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=s+a),e}function IHe(t,e,i){if(e.length===0)return"";t===void 0&&(t=!0);const r=(e=String(e)).split("");let s=0,n=1,o=r.length;t||(s=r.length-1,n=-1,o=1);const a=CHe(r,s,n,o);let l="";for(let c=0;c<r.length;c++)RHe(a,a.length,c)>-1?(cde(XM,c,!t,-1),Aa.splice(c,1)):l+=r[c];return l}function CHe(t,e,i,r,s){let n=0;const o=[];let a=0;for(let l=e;l*i<r;l+=i)if(lde(t[l])||qS(t[l])){if(t[l]==="Ù„"&&OHe(t,l+i,i,r)){t[l]=jHe(t[l+i],n===0?aHe:lHe),l+=i,BHe(t,l,i,r),o[a]=l,a++,n=0;continue}const c=t[l];n===1?t[l]=wZ(t,l+i,i,r)?zHe(t[l]):LO(t[l],uHe):wZ(t,l+i,i,r)===!0?t[l]=LO(t[l],dHe):t[l]=LO(t[l],cHe),qS(c)||(n=1),FHe(c)===!0&&(n=0)}else n=0;return o}function YM(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function THe(t){const e=t.split("");return e.reverse(),YM(e.join(""))}function MHe(t,e,i){if(t.length===0)return"";e===void 0&&(e=!0);let r="";const s=(t=String(t)).split("");for(let n=0;n<t.length;n++){let o=!1;if(s[n]>="ï¹°"&&s[n]<"\uFEFF"){const a=t.charCodeAt(n);s[n]>="ï»µ"&&s[n]<="ï»¼"?(e?(n>0&&i&&s[n-1]===" "?r=r.slice(0,-1)+"Ù„":(r+="Ù„",o=!0),r+=Kb[(a-65269)/2]):(r+=Kb[(a-65269)/2],r+="Ù„",n+1<t.length&&i&&s[n+1]===" "?n++:o=!0),o&&(cde(XM,n,!0,1),Aa.splice(n,0,Aa[n]))):r+=pHe[a-65136]}else r+=s[n]}return r}function cp(t,e){const i=t.split(""),r=[];return ade(i,r,e),PHe(i,r,e),_Z(2,i,r,e),_Z(1,i,r,e),kP=r,i.join("")}function ade(t,e,i){const r=t.length,s=i.dir?mHe:AHe;let n=0,o=-1;const a=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let c=0;c<r;c++)a[c]=LHe(t[c]);for(let c=0;c<r;c++){const h=n,y=DHe(t,a,l,c,i);l[c]=y,n=s[h][y];const g=240&n;n&=15;const _=s[n][HHe];if(e[c]=_,g>0)if(g===16){for(let S=o;S<c;S++)e[S]=1;o=-1}else o=-1;if(s[n][qHe])o===-1&&(o=c);else if(o>-1){for(let S=o;S<c;S++)e[S]=_;o=-1}a[c]===Gc&&(e[c]=0),i.hiLevel|=_}i.hasUbatS&&kHe(a,e,r,i)}function kHe(t,e,i,r){for(let s=0;s<i;s++)if(t[s]===OC){e[s]=r.dir;for(let n=s-1;n>=0&&t[n]===Sn;n--)e[n]=r.dir}}function PHe(t,e,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let r=0;r<t.length;r++)e[r]===1&&(t[r]=NHe(t[r]))}function LHe(t){const e=t.charCodeAt(0),i=SHe[e>>8];return i<jc?i:xHe[i-jc][255&e]}function PO(t,e){const i=t.split("");if(e){const r=[];ade(i,r,e),kP=r}return i.reverse(),Aa.reverse(),i.join("")}function RHe(t,e,i){for(let r=0;r<e;r++)if(t[r]===i)return r;return-1}function lde(t){for(let e=0;e<bZ.length;e++)if(t>=bZ[e]&&t<=fHe[e])return!0;return!1}function wZ(t,e,i,r){for(;e*i<r&&qS(t[e]);)e+=i;return!!(e*i<r&&lde(t[e]))}function OHe(t,e,i,r){for(;e*i<r&&qS(t[e]);)e+=i;let s=" ";if(!(e*i<r))return!1;s=t[e];for(let n=0;n<Kb.length;n++)if(Kb[n]===s)return!0;return!1}function _Z(t,e,i,r){if(r.hiLevel<t)return;if(t===1&&r.dir===e_&&!r.hasUbatB)return e.reverse(),void Aa.reverse();const s=e.length;let n,o,a,l,c,h=0;for(;h<s;){if(i[h]>=t){for(n=h+1;n<s&&i[n]>=t;)n++;for(o=h,a=n-1;o<a;o++,a--)l=e[o],e[o]=e[a],e[a]=l,c=Aa[o],Aa[o]=Aa[a],Aa[a]=c;h=n}h++}}function DHe(t,e,i,r,s){const n=e[r];return{UBAT_L:()=>(s.lastArabic=!1,z),UBAT_R:()=>(s.lastArabic=!1,Ce),UBAT_ON:()=>R,UBAT_AN:()=>zr,UBAT_EN:()=>s.lastArabic?zr:At,UBAT_AL:()=>(s.lastArabic=!0,s.hasUbatAl=!0,Ce),UBAT_WS:()=>R,UBAT_CS:()=>{let o,a;return r<1||r+1>=e.length||(o=i[r-1])!==At&&o!==zr||(a=e[r+1])!==At&&a!==zr?R:(s.lastArabic&&(a=zr),a===o?a:R)},UBAT_ES:()=>(r>0?i[r-1]:Gc)===At&&r+1<e.length&&e[r+1]===At?At:R,UBAT_ET:()=>{if(r>0&&i[r-1]===At)return At;if(s.lastArabic)return R;let o=r+1;const a=e.length;for(;o<a&&e[o]===Et;)o++;return o<a&&e[o]===At?At:R},UBAT_NSM:()=>{if(s.inFormat==="VLTR"){const o=e.length;let a=r+1;for(;a<o&&e[a]===oe;)a++;if(a<o){const l=t[r].charCodeAt(0),c=l>=1425&&l<=2303||l===64286,h=e[a];if(c&&(h===Ce||h===O))return Ce}}return r<1||e[r-1]===Gc?R:i[r-1]},UBAT_B:()=>(s.lastArabic=!0,s.hasUbatB=!0,s.dir),UBAT_S:()=>(s.hasUbatS=!0,R),UBAT_LRE:()=>(s.lastArabic=!1,R),UBAT_RLE:()=>(s.lastArabic=!1,R),UBAT_LRO:()=>(s.lastArabic=!1,R),UBAT_RLO:()=>(s.lastArabic=!1,R),UBAT_PDF:()=>(s.lastArabic=!1,R),UBAT_BN:()=>R}[_He[n]]()}function NHe(t){let e,i=0,r=PE.length-1;for(;i<=r;)if(e=Math.floor((i+r)/2),t<PE[e][0])r=e-1;else{if(!(t>PE[e][0]))return PE[e][1];i=e+1}return t}function FHe(t){for(let e=0;e<vZ.length;e++)if(vZ[e]===t)return!0;return!1}function zHe(t){for(let e=0;e<ZM.length;e++)if(t===ZM[e])return hHe[e];return t}function LO(t,e){for(let i=0;i<ZM.length;i++)if(t===ZM[i])return e[i];return t}function qS(t){return t>="Ù‹"&&t<="Ù•"}function SZ(t){return t==="L"?"LTR":t==="R"?"RTL":t==="C"?"CLR":t==="D"?"CRL":""}function BHe(t,e,i,r){for(;e*i<r&&qS(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function jHe(t,e){for(let i=0;i<Kb.length;i++)if(t===Kb[i])return e[i];return t}function UHe(t,e,i){Aa=[],kP=[];for(let r=0;r<i;r++)t[r]=r,e[r]=r,Aa[r]=r}function VHe(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[t[i]]=i;return e}function cde(t,e,i,r){for(let s=0;s<t.length;s++)(t[s]>e||!i&&t[s]===e)&&(t[s]+=r)}let Aa=[],XM=[],kP=[];const GHe={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},HHe=5,qHe=6,ky=0,e_=1,xZ=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,WHe=/[\u0591-\u06ff\ufb1d-\ufefc]/,RO=new $He;function QHe(t){if(t==null)return["",!1];if(!RO.hasBidiChar(t))return[t,!1];let e;return e=RO.checkContextual(t)==="rtl"?"IDNNN":"ICNNN",[RO.bidiTransform(t,e,"VLYSN"),!0]}let z1=class{constructor(){this.setIdentity()}getAngle(){return(this.rz==null||this.rz===0&&this.rzCos!==1&&this.rzSin!==0)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(e,i){this.tx=e,this.ty=i}setTranslateZ(e){this.tz=e}setRotateCS(e,i){this.rz=void 0,this.rzCos=e,this.rzSin=i}setRotate(e){this.rz=e,this.rzCos=void 0,this.rzSin=void 0}setRotateY(e){this.ry=e}setScale(e){this.s=e}setMeasure(e){this.m=e}};const aj="arial-unicode-ms",$Z="woff2",EZ=new Map,ude=new Set;let JHe=class{constructor(e,i){this.fontFace=e,this.promise=i}};async function ZHe(t){const e=KHe(t),i=XHe(t),r=EZ.get(e);if(r)return r.promise;const s=new FontFace(t.family,`url('${li.fontsUrl}/woff2/${i}.${$Z}') format('${$Z}')`,{style:t.style,weight:t.weight}),n=document.fonts;if(n.has(s)&&s.status==="loading")return s.loaded;const o=s.load().then((()=>(n.add(s),s)));return EZ.set(e,new JHe(s,o)),ude.add(s),o}function Ppt(t){return ude.has(t)}function YHe(t){if(!t)return aj;const e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function XHe(t){const e=hde(t)+dde(t);return YHe(t.family)+(e.length>0?e:"-regular")}function KHe(t){const e=hde(t)+dde(t);return(t.family||aj)+(e.length>0?e:"-regular")}function hde(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function dde(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}function eqe(t){return 32+t.length}const pde=16;function Lpt(t){if(!t)return 0;let e=cj;for(const i in t)t.hasOwnProperty(i)&&(e+=lj(t[i],!1));return e}function tqe(t){if(!t)return 0;if(typeof t[0]=="number")return fde(t);if(Array.isArray(t))return iqe(t);let e=cj;for(const i in t)t.hasOwnProperty(i)&&(e+=lj(t[i]));return e}function iqe(t){const e=t.length;if(e===0||typeof t[0]=="number")return Ade(t,8);let i=mde;for(let r=0;r<e;r++)i+=lj(t[r]);return i}function lj(t,e=!0){switch(typeof t){case"object":return e?tqe(t):cj;case"string":return eqe(t);case"number":return pde;case"boolean":return 4;default:return 8}}function fde(...t){return t.reduce(((e,i)=>e+(i?UX(i)?i.byteLength+rqe:Array.isArray(i)?Ade(i,pde):0:0)),0)}function Ade(t,e){return mde+t.length*e}const cj=32,mde=16,rqe=145,gA=2;let KM=class Dg{constructor(e=[],i=[]){this.lengths=e??[],this.coords=i??[]}static fromJSON(e){return new Dg(e.lengths,e.coords)}static fromRect(e){const[i,r,s,n]=e,o=s-i,a=n-r;return new Dg([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,i)=>e+i))}get usedMemory(){return 64+fde(this.lengths,this.coords)}area(){let e=0,i=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];if(s<3)continue;let n=this.coords[gA*i],o=this.coords[gA*i+1];for(let a=1;a<s;a+=1){const l=this.coords[gA*(a+i)],c=this.coords[gA*(a+i)+1];e+=-.5*(l-n)*(c+o),n=l,o=c}i+=s}return e}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let n=0;n<s;n++)e(this.coords[gA*(n+i)],this.coords[gA*(n+i)+1]);i+=s}}deltaDecode(){const e=this.clone(),{coords:i,lengths:r}=e;let s=0;for(const n of r){for(let o=1;o<n;o++)i[2*(s+o)]+=i[2*(s+o)-2],i[2*(s+o)+1]+=i[2*(s+o)-1];s+=n}return e}clone(e){if(this.lengths.length===0)return new Dg([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce(((s,n)=>s+n)))*gA,r=this.coords.slice(0,i);return e?(e.set(r),new Dg(this.lengths,e)):new Dg(Array.from(this.lengths),Array.from(r))}},Ii=class{static fromOptimized(e,i,r=!1,s=!1,n=1){return new i8().initialize(e,i,r,s,n)}static fromJSON(e,i=!1,r=!1){const[s,n]=IZ(e);return new s8().initialize(s,n,i,r,1)}static fromOptimizedCIM(e,i,r=!1,s=!1,n=1){return new CZ().initialize(e,i,r,s,n)}static fromJSONCIM(e,i=!1,r=!1,s=1){const[n,o]=IZ(e);return new TZ().initialize(n,o,i,r,s)}static fromFeatureSetReader(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimized(i,r):null}static fromFeatureSetReaderCIM(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimizedCIM(i,r):null}static createEmptyOptimized(e,i=!1,r=!1,s=1){return new i8().initialize(new KM,e,i,r,s)}static createEmptyJSON(e,i=!1,r=!1){return new s8().initialize([],e,i,r,1)}static createEmptyOptimizedCIM(e,i=!1,r=!1,s=1){return new CZ().initialize(new KM,e,i,r,s)}static createEmptyJSONCIM(e,i=!1,r=!1,s=1){return new TZ().initialize([],e,i,r,s)}asJSON(){const e=Ik(this);return this.geometryType==="esriGeometryEnvelope"?{xmin:e[0][0][0],ymin:e[0][0][1],xmax:e[0][2][0],ymax:e[0][2][1]}:this.geometryType==="esriGeometryMultipoint"?{points:e.flat()}:this.geometryType==="esriGeometryPoint"?{x:e[0][0][0],y:e[0][0][1]}:this.geometryType==="esriGeometryPolygon"?{rings:e}:{paths:e}}getCurrentRingArea(){if(this.pathSize<3)return 0;let e,i,r=0;if(this.seekPathStart(),!this.nextPoint())return 0;e=this.x,i=this.y;const s=e,n=i;for(;this.nextPoint();)r+=(e-this.x)*(i+this.y),e=this.x,i=this.y;return r+=(e-s)*(i+n),-.5*r}invertY(){this.yFactor*=-1}},i8=class r8 extends Ii{constructor(){super(...arguments),this._end=-1}initialize(e,i,r,s,n){return this.hasZ=r,this.hasM=s,this.geometryType=i,this._stride=2+Number(r)+Number(s),this._geometry=e,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=n,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(e){if(e>=0&&e<this.totalSize){if(this._pathIndex<e)for(;this._pathIndex<e&&this.nextPath(););else if(this._pathIndex>e)for(;this._pathIndex>e&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(e){const i=this._pathOffset+e*this._stride;return i>=0&&i<this._end&&(this._pointOffset=i,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){return!(this.pathIndex>=this.totalSize-1)&&(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,!0)}prevPath(){return!(this.pathIndex<=0)&&(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,!0)}getCurrentPath(){const e=this._end,i=this._geometry.coords,r=this._pathOffset;return new r8().initialize(new KM([this.pathSize],i.slice(r,e)),this.geometryType,this.hasZ,this.hasM,this.yFactor)}pathLength(){const e=this._end,i=this._stride,r=this._geometry.coords;let s=0;for(let n=this._pathOffset+i;n<e;n+=i){const o=r[n-i],a=r[n-i+1],l=r[n]-o,c=r[n+1]-a;s+=Math.sqrt(l*l+c*c)}return s}startPath(){this._geometry.lengths.push(0)}pushPath(e){this.startPath(),this.pushPoints(e)}pushPoint(e){for(let i=0;i<this._stride;++i)this._geometry.coords.push(e[i]);this._geometry.lengths[this.totalSize-1]++}pushXY(e,i){this._geometry.coords.push(e,i),this._geometry.lengths[this.totalSize-1]++}pushPoints(e){for(const i of e)for(let r=0;r<this._stride;++r)this._geometry.coords.push(i[r]);this._geometry.lengths[this.totalSize-1]+=e.length}pushCursor(e){const i=e.asOptimized();this._geometry.coords.push(...i.coords),this._geometry.lengths.push(...i.lengths)}asOptimized(){const e=this._geometry.clone();if(this.yFactor!==1)for(let i=1;i<e.coords.length;i+=this._stride)e.coords[i]*=this.yFactor;return this.geometryType==="esriGeometryPoint"&&(e.lengths.length=0),e}isClosed(){const e=this._geometry.coords,i=this._pathOffset,r=this._end-this._stride;for(let s=0;s<this._stride;s++)if(e[i+s]!==e[r+s])return!1;return!0}clone(){return new r8().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.isPoint?1:this._geometry.lengths.reduce(((e,i)=>e+i))}get pathSize(){const{lengths:e}=this._geometry;return this._geometry.isPoint?1:this._pathIndex<0||this._pathIndex>e.length-1?0:e[this._pathIndex]}get totalSize(){return this._geometry.isPoint?1:this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(e){this._geometry.coords[this._pointOffset]=e}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(e){this._geometry.coords[this._pointOffset+1]=this.yFactor*e}get z(){return this._geometry.coords[this._pointOffset+2]}set z(e){this._geometry.coords[this._pointOffset+2]=e}get m(){const e=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+e]}set m(e){this._geometry.coords[this._pointOffset+3]=e}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}};function sqe(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function IZ(t){return Hr(t)?[t.rings,"esriGeometryPolygon"]:cn(t)?[t.paths,"esriGeometryPolyline"]:yv(t)?[[t.points],"esriGeometryMultipoint"]:to(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:gS(t)?[[[sqe(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}let s8=class n8 extends Ii{initialize(e,i,r,s,n){return this._paths=e,this.geometryType=i,this.hasZ=r,this.hasM=s,this._pathIndex=this._pointIndex=-1,this.yFactor=n,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(e){return this._pathIndex=e,this._pointIndex=-1,e>=0&&e<this.totalSize&&(this._currentPath=this._paths[e],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(e){return e>=0&&e<this._currentPath.length&&(this._pointIndex=e,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}pathLength(){const e=this._currentPath.length,i=this._currentPath;let r=0;for(let s=1;s<e;s++){const n=i[s-1],o=i[s],a=n[0],l=n[1],c=o[0]-a,h=o[1]-l;r+=Math.sqrt(c*c+h*h)}return r}startPath(){this._paths.push([])}getCurrentPath(){return new n8().initialize([this._currentPath],this.geometryType,this.hasZ,this.hasM,this.yFactor)}pushPath(e){this._paths.push(e)}pushPoint(e){this._paths[this.totalSize-1].push(e)}pushXY(e,i){this._paths[this.totalSize-1].push([e,i])}pushPoints(e){this._paths[this.totalSize-1].push(...e)}pushCursor(e){const i=Ik(e);for(const r of i)this.pushPath(r)}asOptimized(){const e=new KM;if(this.geometryType==="esriGeometryPoint")e.coords.push(...this._paths[0][0]),e.lengths.length=0;else for(const i of this._paths){for(const r of i)e.coords.push(r[0]),e.coords.push(r[1]*this.yFactor),this.hasZ&&e.coords.push(r[2]),this.hasM&&e.coords.push(r[this._mIndex]);e.lengths.push(i.length)}return e}isClosed(){const e=this._currentPath[0],i=this._currentPath[this._currentPath.length-1];for(let r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}clone(){return new n8().initialize(ie(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map((e=>e.length)).reduce(((e,i)=>e+i))}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(e){this._currentPoint[0]=e}get y(){return this.yFactor*this._currentPoint[1]}set y(e){this._currentPoint[1]=this.yFactor*e}get z(){return this._currentPoint[2]}set z(e){this._currentPoint[2]=e}get m(){return this._currentPoint[this._mIndex]}set m(e){this._currentPoint[this._mIndex]=e}get pathIndex(){return this._pathIndex}};const LE=4,RE=1;let CZ=class yde extends i8{initialize(e,i,r,s,n){return super.initialize(e,i,r,s,n),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map((o=>new Set))),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const e=new yde().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return e._controlPoints=this._controlPoints,e}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(e){this._controlPoints[this.pathIndex].add(e)}getControlPointAt(e){return this._controlPoints[this.pathIndex].has(e)}},TZ=class gde extends s8{initialize(e,i,r,s,n){return super.initialize(e,i,r,s,n)}clone(){return new gde().initialize(ie(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][LE]=RE}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][LE]===RE}setControlPointAt(e){this._paths[this.pathIndex][e][LE]=RE}getControlPointAt(e){return this._paths[this.pathIndex][e][LE]===RE}};const nqe=512;var Jl,js;(function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon"})(Jl||(Jl={}));let ii=class t_{constructor(e,i){this.x=e,this.y=i}static fromArray(e){return new t_(e[0],e[1])}clone(){return new t_(this.x,this.y)}equals(e,i){return e===this.x&&i===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,i){return this.x=e,this.y=i,this}normalize(){const e=this.x,i=this.y,r=Math.sqrt(e*e+i*i);return this.x/=r,this.y/=r,this}rightPerpendicular(){const e=this.x;return this.x=this.y,this.y=-e,this}leftPerpendicular(){const e=this.x;return this.x=-this.y,this.y=e,this}move(e,i){return this.x+=e,this.y+=i,this}assign(e){return this.x=e.x,this.y=e.y,this}assignAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}assignSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}rotate(e,i){const r=this.x,s=this.y;return this.x=r*e-s*i,this.y=r*i+s*e,this}rotateReverse(e,i){const r=this.x,s=this.y;return this.x=r*e+s*i,this.y=-r*i+s*e,this}scale(e){return this.x*=e,this.y*=e,this}length(){const e=this.x,i=this.y;return Math.sqrt(e*e+i*i)}sub(e){return this.x-=e.x,this.y-=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}static distance(e,i){const r=i.x-e.x,s=i.y-e.y;return Math.sqrt(r*r+s*s)}static add(e,i){return new t_(e.x+i.x,e.y+i.y)}static sub(e,i){return new t_(e.x-i.x,e.y-i.y)}},OE=class{constructor(e,i,r){this.ratio=e,this.x=i,this.y=r}},oqe=class{constructor(e,i,r,s=8,n=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=s,this._pixelMargin=n,this._tileSize=nqe*s,this._dz=e,this._yPos=i,this._xPos=r}setPixelMargin(e){e!==this._pixelMargin&&(this._pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this._finalRatio=this._tileSize/e*(1<<this._dz);let i=this._pixelRatio*this._pixelMargin;i/=this._finalRatio;const r=e>>this._dz;i>r&&(i=r),this._margin=i,this._xmin=r*this._xPos-i,this._ymin=r*this._yPos-i,this._xmax=this._xmin+r+2*i,this._ymax=this._ymin+r+2*i}reset(e){this._type=e,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(e,i){this._pushLine(),this._prevIsIn=this._isIn(e,i),this._moveTo(e,i,this._prevIsIn),this._prevPt=new ii(e,i),this._firstPt=new ii(e,i),this._dist=0}lineTo(e,i){const r=this._isIn(e,i),s=new ii(e,i),n=ii.distance(this._prevPt,s);let o,a,l,c,h,y,g,_;if(r)this._prevIsIn?this._lineTo(e,i,!0):(o=this._prevPt,a=s,l=this._intersect(a,o),this._start=this._dist+n*(1-this._r),this._lineTo(l.x,l.y,!0),this._lineTo(a.x,a.y,!0));else if(this._prevIsIn)a=this._prevPt,o=s,l=this._intersect(a,o),this._lineTo(l.x,l.y,!0),this._lineTo(o.x,o.y,!1);else{const S=this._prevPt,E=s;if(S.x<=this._xmin&&E.x<=this._xmin||S.x>=this._xmax&&E.x>=this._xmax||S.y<=this._ymin&&E.y<=this._ymin||S.y>=this._ymax&&E.y>=this._ymax)this._lineTo(E.x,E.y,!1);else{const C=[];if((S.x<this._xmin&&E.x>this._xmin||S.x>this._xmin&&E.x<this._xmin)&&(c=(this._xmin-S.x)/(E.x-S.x),_=S.y+c*(E.y-S.y),_<=this._ymin?y=!1:_>=this._ymax?y=!0:C.push(new OE(c,this._xmin,_))),(S.x<this._xmax&&E.x>this._xmax||S.x>this._xmax&&E.x<this._xmax)&&(c=(this._xmax-S.x)/(E.x-S.x),_=S.y+c*(E.y-S.y),_<=this._ymin?y=!1:_>=this._ymax?y=!0:C.push(new OE(c,this._xmax,_))),(S.y<this._ymin&&E.y>this._ymin||S.y>this._ymin&&E.y<this._ymin)&&(c=(this._ymin-S.y)/(E.y-S.y),g=S.x+c*(E.x-S.x),g<=this._xmin?h=!1:g>=this._xmax?h=!0:C.push(new OE(c,g,this._ymin))),(S.y<this._ymax&&E.y>this._ymax||S.y>this._ymax&&E.y<this._ymax)&&(c=(this._ymax-S.y)/(E.y-S.y),g=S.x+c*(E.x-S.x),g<=this._xmin?h=!1:g>=this._xmax?h=!0:C.push(new OE(c,g,this._ymax))),C.length===0)h?y?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):y?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(C.length>1&&C[0].ratio>C[1].ratio)this._start=this._dist+n*C[1].ratio,this._lineTo(C[1].x,C[1].y,!0),this._lineTo(C[0].x,C[0].y,!0);else{this._start=this._dist+n*C[0].ratio;for(let M=0;M<C.length;M++)this._lineTo(C[M].x,C[M].y,!0)}this._lineTo(E.x,E.y,!1)}}this._dist+=n,this._prevIsIn=r,this._prevPt=s}close(){if(this._line.length>2){const e=this._firstPt,i=this._prevPt;e.x===i.x&&e.y===i.y||this.lineTo(e.x,e.y);const r=this._line;let s=r.length;for(;s>=4&&(r[0].x===r[1].x&&r[0].x===r[s-2].x||r[0].y===r[1].y&&r[0].y===r[s-2].y);)r.pop(),r[0].x=r[s-2].x,r[0].y=r[s-2].y,--s}}result(e=!0){return this._pushLine(),this._lines.length===0?null:(this._type===Jl.Polygon&&e&&aqe.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==Jl.LineString)throw new Error("Only valid for lines");this._pushLine();const e=this._lines,i=e.length;if(i===0)return null;const r=[];for(let s=0;s<i;s++)r.push({line:e[s],start:this._starts[s]||0});return r}_isIn(e,i){return e>=this._xmin&&e<=this._xmax&&i>=this._ymin&&i<=this._ymax}_intersect(e,i){let r,s,n;if(i.x>=this._xmin&&i.x<=this._xmax)s=i.y<=this._ymin?this._ymin:this._ymax,n=(s-e.y)/(i.y-e.y),r=e.x+n*(i.x-e.x);else if(i.y>=this._ymin&&i.y<=this._ymax)r=i.x<=this._xmin?this._xmin:this._xmax,n=(r-e.x)/(i.x-e.x),s=e.y+n*(i.y-e.y);else{s=i.y<=this._ymin?this._ymin:this._ymax,r=i.x<=this._xmin?this._xmin:this._xmax;const o=(r-e.x)/(i.x-e.x),a=(s-e.y)/(i.y-e.y);o<a?(n=o,s=e.y+o*(i.y-e.y)):(n=a,r=e.x+a*(i.x-e.x))}return this._r=n,new ii(r,s)}_pushLine(){this._line&&(this._type===Jl.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===Jl.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===Jl.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(e,i,r){this._type!==Jl.Polygon?r&&(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new ii(e,i))):(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new ii(e,i)),this._isH=!1,this._isV=!1)}_lineTo(e,i,r){let s,n;if(this._type!==Jl.Polygon)if(r){if(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(s=this._line[this._line.length-1],s.equals(e,i)))return;this._line.push(new ii(e,i))}else this._line&&this._line.length>0&&this._pushLine();else if(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){s=this._line[this._line.length-1];const o=s.x===e,a=s.y===i;if(o&&a)return;this._isH&&o||this._isV&&a?(s.x=e,s.y=i,n=this._line[this._line.length-2],n.x===e&&n.y===i?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(n=this._line[this._line.length-2],this._isH=n.x===e,this._isV=n.y===i)):(this._isH=n.x===e,this._isV=n.y===i)):(this._line.push(new ii(e,i)),this._isH=o,this._isV=a)}else this._line.push(new ii(e,i))}},Npt=class{setExtent(e){this._ratio=e===4096?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this._lines=[],this._line=null}moveTo(e,i){this._line&&this._lines.push(this._line),this._line=[];const r=this._ratio;this._line.push(new ii(e*r,i*r))}lineTo(e,i){const r=this._ratio;this._line.push(new ii(e*r,i*r))}close(){const e=this._line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this._line&&this._lines.push(this._line),this._lines.length===0?null:this._lines}};(function(t){t[t.sideLeft=0]="sideLeft",t[t.sideRight=1]="sideRight",t[t.sideTop=2]="sideTop",t[t.sideBottom=3]="sideBottom"})(js||(js={}));let aqe=class Tp{static simplify(e,i,r){if(!r)return;const s=-i,n=e+i,o=-i,a=e+i,l=[],c=[],h=r.length;for(let g=0;g<h;++g){const _=r[g];if(!_||_.length<2)continue;let S,E=_[0];const C=_.length;for(let M=1;M<C;++M)S=_[M],E.x===S.x&&(E.x<=s&&(E.y>S.y?(l.push(g),l.push(M),l.push(js.sideLeft),l.push(-1)):(c.push(g),c.push(M),c.push(js.sideLeft),c.push(-1))),E.x>=n&&(E.y<S.y?(l.push(g),l.push(M),l.push(js.sideRight),l.push(-1)):(c.push(g),c.push(M),c.push(js.sideRight),c.push(-1)))),E.y===S.y&&(E.y<=o&&(E.x<S.x?(l.push(g),l.push(M),l.push(js.sideTop),l.push(-1)):(c.push(g),c.push(M),c.push(js.sideTop),c.push(-1))),E.y>=a&&(E.x>S.x?(l.push(g),l.push(M),l.push(js.sideBottom),l.push(-1)):(c.push(g),c.push(M),c.push(js.sideBottom),c.push(-1)))),E=S}if(l.length===0||c.length===0)return;Tp.fillParent(r,c,l),Tp.fillParent(r,l,c);const y=[];Tp.calcDeltas(y,c,l),Tp.calcDeltas(y,l,c),Tp.addDeltas(y,r)}static fillParent(e,i,r){const s=r.length,n=i.length;for(let o=0;o<n;o+=4){const a=i[o],l=i[o+1],c=i[o+2],h=e[a][l-1],y=e[a][l];let g=8092,_=-1;for(let S=0;S<s;S+=4){if(r[S+2]!==c)continue;const E=r[S],C=r[S+1],M=e[E][C-1],P=e[E][C];switch(c){case js.sideLeft:case js.sideRight:if(DE(h.y,M.y,P.y)&&DE(y.y,M.y,P.y)){const D=Math.abs(P.y-M.y);D<g&&(g=D,_=S)}break;case js.sideTop:case js.sideBottom:if(DE(h.x,M.x,P.x)&&DE(y.x,M.x,P.x)){const D=Math.abs(P.x-M.x);D<g&&(g=D,_=S)}}}i[o+3]=_}}static calcDeltas(e,i,r){const s=i.length;for(let n=0;n<s;n+=4){const o=[],a=Tp.calcDelta(n,i,r,o);e.push(i[n]),e.push(i[n+1]),e.push(i[n+2]),e.push(a)}}static calcDelta(e,i,r,s){const n=i[e+3];if(n===-1)return 0;const o=s.length;return o>1&&s[o-2]===n?0:(s.push(n),Tp.calcDelta(n,r,i,s)+1)}static addDeltas(e,i){const r=e.length;let s=0;for(let n=0;n<r;n+=4){const o=e[n+3];o>s&&(s=o)}for(let n=0;n<r;n+=4){const o=i[e[n]],a=e[n+1],l=s-e[n+3];switch(e[n+2]){case js.sideLeft:o[a-1].x-=l,o[a].x-=l,a===1&&(o[o.length-1].x-=l),a===o.length-1&&(o[0].x-=l);break;case js.sideRight:o[a-1].x+=l,o[a].x+=l,a===1&&(o[o.length-1].x+=l),a===o.length-1&&(o[0].x+=l);break;case js.sideTop:o[a-1].y-=l,o[a].y-=l,a===1&&(o[o.length-1].y-=l),a===o.length-1&&(o[0].y-=l);break;case js.sideBottom:o[a-1].y+=l,o[a].y+=l,a===1&&(o[o.length-1].y+=l),a===o.length-1&&(o[0].y+=l)}}}};const DE=(t,e,i)=>t>=e&&t<=i||t>=i&&t<=e,lqe=512;let dh,cqe=class{constructor(e){this._geometry=e}next(){const e=this._geometry;return this._geometry=null,e}};function uj(t,e,i){if(!t)return null;dh||(dh=new oqe(0,0,0,1));const r=i?-1:1,s=t.geometryType==="esriGeometryPolygon",n=s?Jl.Polygon:Jl.LineString,o=s?3:2;let a,l;for(dh.reset(n),dh.setPixelMargin(e+1),dh.setExtent(lqe);t.nextPath();)if(!(t.pathSize<o)){for(t.nextPoint(),a=t.x,l=r*t.y,dh.moveTo(a,l);t.nextPoint();)a=t.x,l=r*t.y,dh.lineTo(a,l);s&&dh.close()}const c=dh.result(!1);if(c){const h=Ii.createEmptyOptimizedCIM(t.geometryType);for(const y of c){h.startPath();for(const g of y)h.pushXY(g.x,r*g.y)}return h.reset(),h}return null}let uqe=class{applyColorSubstitution(e,i){if(!i)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:s}=e,n=this._rasterizationCanvas,o=n.getContext("2d",{willReadFrequently:!0});e!==n&&(n.width=r,n.height=s,o.drawImage(e,0,0,r,s));const a=o.getImageData(0,0,r,s).data;if(i){for(const c of i)if(c&&c.oldColor&&c.oldColor.length===4&&c.newColor&&c.newColor.length===4){const[h,y,g,_]=c.oldColor,[S,E,C,M]=c.newColor;if(h===S&&y===E&&g===C&&_===M)continue;for(let P=0;P<a.length;P+=4)h===a[P]&&y===a[P+1]&&g===a[P+2]&&_===a[P+3]&&(a[P]=S,a[P+1]=E,a[P+2]=C,a[P+3]=M)}}const l=new ImageData(a,r,s);return o.putImageData(l,0,0),n}tintImageData(e,i){if(!i||i.length<4)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:s}=e,n=this._rasterizationCanvas,o=n.getContext("2d",{willReadFrequently:!0});e!==n&&(n.width=r,n.height=s,o.drawImage(e,0,0,r,s));const a=o.getImageData(0,0,r,s),l=new Uint8Array(a.data),c=[i[0]/255,i[1]/255,i[2]/255,i[3]/255];for(let y=0;y<l.length;y+=4)l[y]*=c[0],l[y+1]*=c[1],l[y+2]*=c[2],l[y+3]*=c[3];const h=new ImageData(new Uint8ClampedArray(l.buffer),r,s);return o.putImageData(h,0,0),n}};var nu;let hqe=(nu=class{static local(){return nu.instance===null&&(nu.instance=new nu),nu.instance}execute(e,i,r,s){return new dqe(e,i)}},nu.instance=null,nu),dqe=class{constructor(e,i){this._inputGeometries=e,this._angleTolerance=i.angleTolerance!==void 0?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let e=this._inputGeometries.next();if(!e)return null;for(;e;){if(e.geometryType==="esriGeometryPolygon")this._isClosed=!0;else if(e.geometryType==="esriGeometryPolyline")this._isClosed=!1;else{if(e.geometryType!=="esriGeometryEnvelope"){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}_processPath(e){if(e.nextPoint()){const i=e.x,r=e.y;let s=i,n=r,o=e.pathSize,a=0,l=0,c=0,h=0,y=0,g=0;this._isClosed&&++o;for(let _=1;e.nextPoint()||_<o;++_){let S,E;this._isClosed&&_===o-1?(S=i,E=r):(S=e.x,E=e.y);const C=S-s,M=E-n,P=Math.sqrt(C*C+M*M);_>1&&P>0&&c>0&&(a*C+l*M)/P/c<=this._maxCosAngle&&e.setControlPointAt(_-1),_===1&&(h=C,y=M,g=P),P>0&&(s=S,n=E,a=C,l=M,c=P)}this._isClosed&&c>0&&g>0&&(a*h+l*y)/g/c<=this._maxCosAngle&&e.setControlPointAt(0)}}};function Rw(t,e){t[4]=e}let Kx=class{constructor(e,i=!0,r=!0,s=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&e.geometryType==="esriGeometryPolygon"||!r&&e.geometryType==="esriGeometryPolyline"?null:e,this.geomUnitsPerPoint=s,this.iterateMultiPath=!1,this.iteratePath=!1,this.internalPlacement=new z1}next(){if(!this.geometryCursor)return null;const e=this.processMultiPath(this.geometryCursor);return this.iterateMultiPath&&e||(this.geometryCursor=null),e}processMultiPath(e){for(;this.iteratePath||e.pathIndex<e.totalSize-1;){this.iteratePath||e.nextPath(),this.iterateMultiPath=!0;const i=this.processPath(e);if(i)return i}return this.iterateMultiPath=!1,null}},B1=class{constructor(e,i,r,s=0){this.isClosed=!1,this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=s,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let e=this.inputGeometries.next();for(;e&&(this.isClosed=this.acceptPolygon&&e.geometryType==="esriGeometryPolygon"||e.geometryType==="esriGeometryEnvelope",this.multiPathCursor=e,!this.multiPathCursor);)e=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const e=this.processPath(this.multiPathCursor);if(e)return e}this.multiPathCursor=null}}};const WS=.03;let jd=class{constructor(e=0,i=!1){}isEmpty(e){if(!e.nextPoint())return!0;let i,r,s,n;for(i=e.x,r=e.y;e.nextPoint();i=r,r=n)if(s=e.x,n=e.y,s!==i||n!==r)return e.seekPathStart(),!1;return e.seekPathStart(),!0}normalize(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]);i!==0&&(e[0]/=i,e[1]/=i)}getLength(e,i,r,s){const n=r-e,o=s-i;return Math.sqrt(n*n+o*o)}getSegLength(e){const[[i,r],[s,n]]=e;return this.getLength(i,r,s,n)}getCoord2D(e,i,r,s,n){return[e+(r-e)*n,i+(s-i)*n]}getSegCoord2D(e,i){const[[r,s],[n,o]]=e;return this.getCoord2D(r,s,n,o,i)}getAngle(e,i,r,s,n){const o=r-e,a=s-i;return Math.atan2(a,o)}getAngleCS(e,i,r,s,n,o){e==null&&(e=[0,0]);const a=s-i,l=n-r,c=Math.sqrt(a*a+l*l);return c!==0?(e[0]=a/c,e[1]=l/c,e):(e[0]=1,e[1]=0,e)}getSegAngleCS(e,i,r){const[[s,n],[o,a]]=i;return this.getAngleCS(e,s,n,o,a,r)}cut(e,i,r,s,n,o){return[n<=0?[e,i]:this.getCoord2D(e,i,r,s,n),o>=1?[r,s]:this.getCoord2D(e,i,r,s,o)]}getSubCurve(e,i,r){const s=Ii.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(s,e,i,r)?s:null}appendSubCurve(e,i,r,s){e.startPath(),i.seekPathStart();let n=0,o=!0;if(!i.nextPoint())return!1;let a=i.x,l=i.y;for(;i.nextPoint();){const c=this.getLength(a,l,i.x,i.y);if(c!==0){if(o){if(n+c>r){const h=(r-n)/c;let y=1,g=!1;n+c>=s&&(y=(s-n)/c,g=!0);const _=this.cut(a,l,i.x,i.y,h,y);if(_&&e.pushPoints(_),g)break;o=!1}}else{if(n+c>s){const h=this.cut(a,l,i.x,i.y,0,(s-n)/c);h&&e.pushPoint(h[1]);break}e.pushXY(i.x,i.y)}n+=c,a=i.x,l=i.y}else a=i.x,l=i.y}return!0}getCIMPointAlong(e,i){if(!e.nextPoint())return null;let r,s,n,o,a=0;for(r=e.x,s=e.y;e.nextPoint();r=n,s=o){n=e.x,o=e.y;const l=this.getLength(r,s,n,o);if(l!==0){if(a+l>i){const c=(i-a)/l;return this.getCoord2D(r,s,n,o,c)}a+=l}}return null}offset(e,i,r,s,n){if(!e||e.length<2)return null;let o=0,a=e[o++],l=o;for(;o<e.length;){const g=e[o];g[0]===a[0]&&g[1]===a[1]||(o!==l&&(e[l]=e[o]),a=e[l++]),o++}const c=e[0][0]===e[l-1][0]&&e[0][1]===e[l-1][1];if(c&&--l,l<(c?3:2))return null;const h=[];a=c?e[l-1]:null;let y=e[0];for(let g=0;g<l;g++){const _=g===l-1?c?e[0]:null:e[g+1];if(a)if(_){const S=[_[0]-y[0],_[1]-y[1]];this.normalize(S);const E=[y[0]-a[0],y[1]-a[1]];this.normalize(E);const C=E[0]*S[1]-E[1]*S[0],M=E[0]*S[0]+E[1]*S[1];if(C===0&&M===1){y=_;continue}if(C>=0==i<=0){if(M<1){const P=[S[0]-E[0],S[1]-E[1]];this.normalize(P);const D=Math.sqrt((1+M)/2);if(D>1/s){const F=-Math.abs(i)/D;h.push([y[0]-P[0]*F,y[1]-P[1]*F])}}}else switch(r){case yd.Mitered:{const P=Math.sqrt((1+M)/2);if(P>0&&1/P<s){const D=[S[0]-E[0],S[1]-E[1]];this.normalize(D);const F=Math.abs(i)/P;h.push([y[0]-D[0]*F,y[1]-D[1]*F]);break}}case yd.Bevelled:h.push([y[0]+E[1]*i,y[1]-E[0]*i]),h.push([y[0]+S[1]*i,y[1]-S[0]*i]);break;case yd.Rounded:if(M<1){h.push([y[0]+E[1]*i,y[1]-E[0]*i]);const P=Math.floor(2.5*(1-M));if(P>0){const D=1/P;let F=D;for(let U=1;U<P;U++,F+=D){const G=[E[1]*(1-F)+S[1]*F,-E[0]*(1-F)-S[0]*F];this.normalize(G),h.push([y[0]+G[0]*i,y[1]+G[1]*i])}}h.push([y[0]+S[1]*i,y[1]-S[0]*i])}break;case yd.Square:default:if(C<0)h.push([y[0]+(E[1]+E[0])*i,y[1]+(E[1]-E[0])*i]),h.push([y[0]+(S[1]-S[0])*i,y[1]-(S[0]+S[1])*i]);else{const P=Math.sqrt((1+Math.abs(M))/2),D=[S[0]-E[0],S[1]-E[1]];this.normalize(D);const F=i/P;h.push([y[0]-D[0]*F,y[1]-D[1]*F])}}}else{const S=[y[0]-a[0],y[1]-a[1]];this.normalize(S),h.push([y[0]+S[1]*i,y[1]-S[0]*i])}else{const S=[_[0]-y[0],_[1]-y[1]];this.normalize(S),h.push([y[0]+S[1]*i,y[1]-S[0]*i])}a=y,y=_}return h.length<(c?3:2)?null:(c&&h.push([h[0][0],h[0][1]]),h)}};const OO=1.7320508075688772,pqe=5,fqe=Ev.OpenEnded;var ou;let Aqe=(ou=class{static local(){return ou.instance===null&&(ou.instance=new ou),ou.instance}execute(e,i,r,s,n){return new mqe(e,i,r)}},ou.instance=null,ou),mqe=class extends B1{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new jd,this._width=(i.width!==void 0?i.width:pqe)*r,this._arrowType=i.geometricEffectArrowType!==void 0?i.geometricEffectArrowType:i.arrowType!==void 0?i.arrowType:fqe,this._offsetFlattenError=WS*r}processPath(e){const i=Ii.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case Ev.OpenEnded:default:this._constructSimpleArrow(i,e,!0);break;case Ev.Block:this._constructSimpleArrow(i,e,!1);break;case Ev.Crossed:this._constructCrossedArrow(i,e)}return i}_constructSimpleArrow(e,i,r){const s=i.pathLength();let n=this._width;s<2*n&&(n=s/2);const o=this._curveHelper.getSubCurve(i,0,s-n);if(!o||!o.nextPath())return;o.seekPathStart();const a=n/2;if(this._curveHelper.isEmpty(o))return;const l=vf(o),c=this._constructOffset(l,-a);if(!c)return;const h=this._constructOffset(l,a);if(!h)return;const y=this._constructArrowBasePoint(c,-a/2);if(!y)return;const g=this._constructArrowBasePoint(h,a/2);if(!g)return;i.seekInPath(i.pathSize-1);const _=[i.x,i.y];e.pushPath(h),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(g),e.nextPoint(),e.setControlPoint(),e.pushPoint(_),e.nextPoint(),e.setControlPoint(),e.pushPoint(y),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.setControlPoint(),r||(e.setControlPointAt(0),e.setControlPointAt(e.pathSize-1),e.pushPoint(h[0])),e.reset()}_constructCrossedArrow(e,i){const r=i.pathLength();let s=this._width;r<s*(1+OO+1)&&(s=r/(1+OO+1)),i.seekPathStart();const n=this._curveHelper.getSubCurve(i,0,r-s*(1+OO));if(!n)return;n.nextPath();const o=s/2;if(this._curveHelper.isEmpty(n))return;const a=vf(n),l=this._constructOffset(a,o);if(!l)return;const c=this._constructOffset(a,-o);if(!c)return;const h=this._curveHelper.getSubCurve(i,0,r-s);if(!h||(h.nextPath(),this._curveHelper.isEmpty(h)))return;const y=vf(h),g=this._constructOffset(y,o);if(!g)return;const _=this._constructOffset(y,-o);if(!_)return;const S=g[g.length-1],E=this._constructArrowBasePoint(g,o/2);if(!E)return;const C=_[_.length-1],M=this._constructArrowBasePoint(_,-o/2);if(!M)return;i.seekInPath(i.pathSize-1);const P=[i.x,i.y];e.pushPath(l),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(C),e.nextPoint(),e.setControlPoint(),e.pushPoint(M),e.nextPoint(),e.setControlPoint(),e.pushPoint(P),e.nextPoint(),e.setControlPoint(),e.pushPoint(E),e.nextPoint(),e.setControlPoint(),e.pushPoint(S),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.nextPoint(),e.setControlPoint(),e.reset()}_constructOffset(e,i){return this._curveHelper.offset(e,i,yd.Rounded,4,this._offsetFlattenError)}_constructArrowBasePoint(e,i){if(!e||e.length<2)return null;const r=e[e.length-2],s=e[e.length-1],n=[s[0]-r[0],s[1]-r[1]];return this._curveHelper.normalize(n),[s[0]+n[1]*i,s[1]-n[0]*i]}};var au;let yqe=(au=class{static local(){return au.instance===null&&(au.instance=new au),au.instance}execute(e,i,r,s,n,o,a){return new gqe(e,i,r,s,n,o,a)}},au.instance=null,au),gqe=class{constructor(e,i,r,s,n,o,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=s,this._geometryEngine=n,this._curveHelper=new jd,this._size=(i.size!==void 0?i.size:1)*r,this._maxInflateSize=o*r,this._offsetFlattenError=WS*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._size===0)return e;if(e.geometryType==="esriGeometryEnvelope"){if(this._size>0){const n=Ii.createEmptyOptimizedCIM(e.geometryType),o=Ik(e)[0],a=this._curveHelper.offset(o,this._size,yd.Rounded,4,this._offsetFlattenError);if(a)return n.pushPath(a),n}else if(this._size<0){const n=e.asJSON();if(Math.min(n.xmax-n.xmin,n.ymax-n.ymin)+2*this._size>0)return Ii.fromJSONCIM({xmin:n.xmin-this._size,xmax:n.xmax+this._size,ymin:n.ymin-this._size,ymax:n.ymax+this._size})}}const i=this._geometryEngine;if(i==null)return null;const r=!this._preventClipping&&this._tileKey?uj(e,this._maxInflateSize,!0):e;if(!r)continue;const s=i.buffer(We.WebMercator,r.asJSON(),this._size,1);return s?Ii.fromJSONCIM(s):null}return null}};var lu;let vqe=(lu=class{static local(){return lu.instance===null&&(lu.instance=new lu),lu.instance}execute(e,i,r,s,n){return new bqe(e,i,r)}},lu.instance=null,lu),bqe=class{constructor(e,i,r){this._defaultPointSize=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=i.rule??Ft.FullGeometry,this._defaultSize=this._defaultPointSize*r}next(){let e;for(;e=this._inputGeometries.next();){const i=this._processGeom(Ik(e));if(i!=null&&i.length)return Ii.fromJSONCIM({paths:i})}return null}_clone(e){return[e[0],e[1]]}_mid(e,i){return[(e[0]+i[0])/2,(e[1]+i[1])/2]}_mix(e,i,r,s){return[e[0]*i+r[0]*s,e[1]*i+r[1]*s]}_add(e,i){return[e[0]+i[0],e[1]+i[1]]}_add2(e,i,r){return[e[0]+i,e[1]+r]}_sub(e,i){return[e[0]-i[0],e[1]-i[1]]}_dist(e,i){return Math.sqrt((e[0]-i[0])*(e[0]-i[0])+(e[1]-i[1])*(e[1]-i[1]))}_norm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}_normalize(e,i=1){const r=i/this._norm(e);e[0]*=r,e[1]*=r}_leftPerpendicular(e){const i=-e[1],r=e[0];e[0]=i,e[1]=r}_leftPerp(e){return[-e[1],e[0]]}_rightPerpendicular(e){const i=e[1],r=-e[0];e[0]=i,e[1]=r}_rightPerp(e){return[e[1],-e[0]]}_dotProduct(e,i){return e[0]*i[0]+e[1]*i[1]}_crossProduct(e,i){return e[0]*i[1]-e[1]*i[0]}_rotateDirect(e,i,r){const s=e[0]*i-e[1]*r,n=e[0]*r+e[1]*i;e[0]=s,e[1]=n}_makeCtrlPt(e){const i=[e[0],e[1]];return Rw(i,1),i}_addAngledTicks(e,i,r,s){const n=this._sub(r,i);this._normalize(n);const o=this._crossProduct(n,this._sub(s,i));let a;a=o>0?this._rightPerp(n):this._leftPerp(n);const l=Math.abs(o)/2,c=[];c.push([i[0]+(a[0]-n[0])*l,i[1]+(a[1]-n[1])*l]),c.push(i),c.push(r),c.push([r[0]+(a[0]+n[0])*l,r[1]+(a[1]+n[1])*l]),e.push(c)}_addBezier2(e,i,r,s,n){if(n--===0)return void e.push(s);const o=this._mid(i,r),a=this._mid(r,s),l=this._mid(o,a);this._addBezier2(e,i,o,l,n),this._addBezier2(e,l,a,s,n)}_addBezier3(e,i,r,s,n,o){if(o--===0)return void e.push(n);const a=this._mid(i,r),l=this._mid(r,s),c=this._mid(s,n),h=this._mid(a,l),y=this._mid(l,c),g=this._mid(h,y);this._addBezier3(e,i,a,h,g,o),this._addBezier3(e,g,y,c,n,o)}_add90DegArc(e,i,r,s,n){const o=n??this._crossProduct(this._sub(r,i),this._sub(s,i))>0,a=this._mid(i,r),l=this._sub(a,i);o?this._leftPerpendicular(l):this._rightPerpendicular(l),a[0]+=l[0],a[1]+=l[1],this._addBezier3(e,i,this._mix(i,.33333,a,.66667),this._mix(r,.33333,a,.66667),r,4)}_addArrow(e,i,r){const s=i[0],n=i[1],o=i[i.length-1],a=this._sub(s,n),l=this._norm(a);this._normalize(a);const c=Math.abs(this._crossProduct(a,this._sub(o,n)));let h=this._dotProduct(a,this._sub(o,n));h<.05*l?h=.05*l:h>.95*l&&(h=.95*l);const y=.5*c,g=this._leftPerp(a),_=[n[0]+a[0]*h,n[1]+a[1]*h],S=i.length-1,E=[];E.push(r?[-g[0],-g[1]]:g);let C=[-a[0],-a[1]];for(let M=1;M<S-1;M++){const P=this._sub(i[M+1],i[M]);this._normalize(P);const D=this._dotProduct(P,C),F=this._crossProduct(P,C),U=Math.sqrt((1+D)/2),G=this._sub(P,C);this._normalize(G),G[0]/=U,G[1]/=U,E.push(F<0?[-G[0],-G[1]]:G),C=P}E.push(this._rightPerp(C));for(let M=E.length-1;M>0;M--)e.push([i[M][0]+E[M][0]*y,i[M][1]+E[M][1]*y]);e.push([_[0]+E[0][0]*y,_[1]+E[0][1]*y]),e.push([_[0]+E[0][0]*c,_[1]+E[0][1]*c]),e.push(s),e.push([_[0]-E[0][0]*c,_[1]-E[0][1]*c]),e.push([_[0]-E[0][0]*y,_[1]-E[0][1]*y]);for(let M=1;M<E.length;M++)e.push([i[M][0]-E[M][0]*y,i[M][1]-E[M][1]*y])}_addDash(e,i,r){const s=this._norm(r)/7;this._normalize(r);let n=[];for(let o=0;o<=7;o++)n.push([i[0]+r[0]*o*s,i[1]+r[1]*o*s]),1&o&&(e.push(n),n=[])}_cp2(e,i,r){return e.length>=2?e[1]:this._add2(e[0],i*this._defaultSize,r*this._defaultSize)}_cp3(e,i,r,s){if(e.length>=3)return e[2];const n=this._mix(e[0],1-r,i,r),o=this._sub(i,e[0]);return this._normalize(o),this._rightPerpendicular(o),[n[0]+o[0]*s*this._defaultSize,n[1]+o[1]*s*this._defaultSize]}_arrowPath(e){if(e.length>2)return e;const i=e[0],r=this._cp2(e,-4,0),s=this._sub(i,r);this._normalize(s);const n=this._rightPerp(s);return[i,r,[i[0]+(n[0]-s[0])*this._defaultSize,i[1]+(n[1]-s[1])*this._defaultSize]]}_arrowLastSeg(e){const i=e[0],r=this._cp2(e,-4,0);let s;if(e.length>=3)s=e[e.length-1];else{const n=this._sub(i,r);this._normalize(n);const o=this._rightPerp(n);s=[i[0]+(o[0]-n[0])*this._defaultSize,i[1]+(o[1]-n[1])*this._defaultSize]}return[r,s]}_processGeom(e){if(!e)return null;const i=[];for(const r of e){const s=r.length>1&&Z2e(r)<this._defaultSize;if(!r||r.length===0||s)continue;const n=r.length;let o=r[0];switch(this._rule){case Ft.PerpendicularFromFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=[];c.push(l),c.push(this._mid(o,a)),i.push(c);break}case Ft.ReversedFirstSegment:{const a=this._cp2(r,0,-1);i.push([a,o]);break}case Ft.PerpendicularToSecondSegment:{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=[];c.push(this._mid(a,l)),c.push(o),i.push(c);break}case Ft.SecondSegmentWithTicks:{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);let h;h=this._crossProduct(c,this._sub(o,a))>0?this._rightPerp(c):this._leftPerp(c);const y=[];y.push([a[0]+(h[0]-c[0])/3,a[1]+(h[1]-c[1])/3]),y.push(a),y.push(l),y.push([l[0]+(h[0]+c[0])/3,l[1]+(h[1]+c[1])/3]),i.push(y);break}case Ft.DoublePerpendicular:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),h=this._sub(c,l);this._normalize(h);const y=this._crossProduct(h,this._sub(o,l));this._leftPerpendicular(h);const g=[];g.push(o),g.push([l[0]+h[0]*y,l[1]+h[1]*y]),i.push(g);const _=[];_.push([l[0]-h[0]*y,l[1]-h[1]*y]),_.push(a),i.push(_);break}case Ft.OppositeToFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),h=this._sub(c,l);this._normalize(h);const y=this._crossProduct(h,this._sub(o,l));this._leftPerpendicular(h);const g=[];g.push([l[0]+h[0]*y,l[1]+h[1]*y]),g.push([l[0]-h[0]*y,l[1]-h[1]*y]),i.push(g);break}case Ft.TriplePerpendicular:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a),h=this._sub(c,l);this._normalize(h);const y=this._crossProduct(h,this._sub(o,l));this._leftPerpendicular(h);const g=[];g.push([l[0]+h[0]*y*.8,l[1]+h[1]*y*.8]),g.push([c[0]+.8*(o[0]-c[0]),c[1]+.8*(o[1]-c[1])]),i.push(g),i.push([l,c]);const _=[];_.push([l[0]-h[0]*y*.8,l[1]-h[1]*y*.8]),_.push([c[0]+.8*(a[0]-c[0]),c[1]+.8*(a[1]-c[1])]),i.push(_);break}case Ft.HalfCircleFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a);let h=this._sub(a,o);const y=Math.cos(Math.PI/18),g=Math.sin(Math.PI/18),_=Math.sqrt((1+y)/2),S=Math.sqrt((1-y)/2),E=[];let C;this._crossProduct(h,this._sub(l,o))>0?(E.push(o),h=this._sub(o,c),C=a):(E.push(a),h=this._sub(a,c),C=o),this._rotateDirect(h,_,S),h[0]/=_,h[1]/=_;for(let M=1;M<=18;M++)E.push(this._add(c,h)),this._rotateDirect(h,y,g);E.push(C),i.push(E);break}case Ft.HalfCircleSecondSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,1,-1);let c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a))/2;this._leftPerpendicular(c);const y=[a[0]+c[0]*h,a[1]+c[1]*h];c=this._sub(a,y);const g=Math.cos(Math.PI/18);let _=Math.sin(Math.PI/18);h>0&&(_=-_);const S=[a];for(let E=1;E<=18;E++)this._rotateDirect(c,g,_),S.push(this._add(y,c));i.push(S);break}case Ft.HalfCircleExtended:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-1);let c;if(n>=4)c=r[3];else{const E=this._sub(o,a);c=this._add(l,E)}const h=this._dist(a,l)/2/.75,y=this._sub(a,o);this._normalize(y,h);const g=this._sub(l,c);this._normalize(g,h);const _=[c,l];i.push(_);const S=[this._clone(l)];this._addBezier3(S,l,this._add(l,g),this._add(a,y),a,4),S.push(o),i.push(S);break}case Ft.OpenCircle:{const a=this._cp2(r,-2,0),l=this._sub(a,o),c=Math.cos(Math.PI/18),h=-Math.sin(Math.PI/18),y=[a];for(let g=1;g<=33;g++)this._rotateDirect(l,c,h),y.push(this._add(o,l));i.push(y);break}case Ft.CoverageEdgesWithTicks:{const a=this._cp2(r,0,-1);let l,c;if(n>=3)l=r[2];else{const _=this._sub(a,o),S=this._leftPerp(_);l=[o[0]+S[0]-.25*_[0],o[1]+S[1]-.25*_[1]]}if(n>=4)c=r[3];else{const _=this._mid(o,a),S=this._sub(o,a);this._normalize(S),this._leftPerpendicular(S);const E=this._crossProduct(S,this._sub(l,_));this._rightPerpendicular(S),c=[l[0]+S[0]*E*2,l[1]+S[1]*E*2]}const h=this._sub(a,o);let y,g;y=this._crossProduct(h,this._sub(l,o))>0?this._rightPerp(h):this._leftPerp(h),g=[],g.push(l),g.push(o),g.push([o[0]+(y[0]-h[0])/3,o[1]+(y[1]-h[1])/3]),i.push(g),y=this._crossProduct(h,this._sub(c,a))>0?this._rightPerp(h):this._leftPerp(h),g=[],g.push([a[0]+(y[0]+h[0])/3,a[1]+(y[1]+h[1])/3]),g.push(a),g.push(c),i.push(g);break}case Ft.GapExtentWithDoubleTicks:{const a=this._cp2(r,0,2),l=this._cp3(r,a,0,1);let c;if(n>=4)c=r[3];else{const h=this._sub(a,o);c=this._add(l,h)}this._addAngledTicks(i,o,a,this._mid(l,c)),this._addAngledTicks(i,l,c,this._mid(o,a));break}case Ft.GapExtentMidline:{const a=this._cp2(r,2,0),l=this._cp3(r,a,0,1);let c;if(n>=4)c=r[3];else{const y=this._sub(a,o);c=this._add(l,y)}const h=[];h.push(this._mid(o,l)),h.push(this._mid(a,c)),i.push(h);break}case Ft.Chevron:{const a=this._cp2(r,-1,-1);let l;if(n>=3)l=r[2];else{const c=this._sub(a,o);this._leftPerpendicular(c),l=this._add(o,c)}i.push([a,this._makeCtrlPt(o),l]);break}case Ft.PerpendicularWithArc:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,.5,-1),c=this._sub(a,o),h=this._norm(c);c[0]/=h,c[1]/=h;const y=this._crossProduct(c,this._sub(l,o));let g=this._dotProduct(c,this._sub(l,o));g<.05*h?g=.05*h:g>.95*h&&(g=.95*h);const _=[o[0]+c[0]*g,o[1]+c[1]*g];let S=this._leftPerp(c),E=[];if(E.push([_[0]-S[0]*y,_[1]-S[1]*y]),E.push([_[0]+S[0]*y,_[1]+S[1]*y]),i.push(E),n>=4){const D=r[3];let F=this._dotProduct(c,this._sub(D,o));F<.1*h?F=.1*h:F>.9*h&&(F=.9*h);const U=[o[0]+c[0]*F,o[1]+c[1]*F],G=this._crossProduct(c,this._sub(D,o)),Q=[];Q.push([U[0]-S[0]*G,U[1]-S[1]*G]),Q.push([U[0]+S[0]*G,U[1]+S[1]*G]),i.push(Q)}const C=[a[0]+S[0]*y,a[1]+S[1]*y];S=this._sub(a,C);const M=Math.cos(Math.PI/18);let P=Math.sin(Math.PI/18);y<0&&(P=-P),E=[o,a];for(let D=1;D<=9;D++)this._rotateDirect(S,M,P),E.push(this._add(C,S));i.push(E);break}case Ft.ClosedHalfCircle:{const a=this._cp2(r,2,0),l=this._mid(o,a),c=this._sub(a,l),h=Math.cos(Math.PI/18),y=Math.sin(Math.PI/18),g=[o,a];for(let _=1;_<=18;_++)this._rotateDirect(c,h,y),g.push(this._add(l,c));i.push(g);break}case Ft.TripleParallelExtended:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-2),c=this._mid(o,a),h=this._sub(l,a);this._normalize(h);const y=Math.abs(this._crossProduct(h,this._sub(c,a)))/2,g=this._dist(a,l),_=[a,o];_.push([o[0]+h[0]*g*.5,o[1]+h[1]*g*.5]),i.push(_);const S=[];S.push([c[0]-h[0]*y,c[1]-h[1]*y]),S.push([c[0]+h[0]*g*.375,c[1]+h[1]*g*.375]),Rw(S[S.length-1],1),S.push([c[0]+h[0]*g*.75,c[1]+h[1]*g*.75]),i.push(S);const E=[a,l];i.push(E);break}case Ft.ParallelWithTicks:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(l,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),this._addAngledTicks(i,o,a,l),this._addAngledTicks(i,this._mix(o,1,c,h),this._mix(a,1,c,h),this._mid(o,a));break}case Ft.Parallel:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const h=this._leftPerp(c),y=this._crossProduct(c,this._sub(l,o));let g=[o,a];i.push(g),g=[],g.push([o[0]+h[0]*y,o[1]+h[1]*y]),g.push([a[0]+h[0]*y,a[1]+h[1]*y]),i.push(g);break}case Ft.PerpendicularToFirstSegment:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._mid(o,a),h=this._sub(a,o);this._normalize(h);const y=this._crossProduct(h,this._sub(l,o));this._leftPerpendicular(h);const g=[];g.push([c[0]-h[0]*y*.25,c[1]-h[1]*y*.25]),g.push([c[0]+h[0]*y*1.25,c[1]+h[1]*y*1.25]),i.push(g);break}case Ft.ParallelOffset:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const y=[];y.push([o[0]-c[0]*h,o[1]-c[1]*h]),y.push([a[0]-c[0]*h,a[1]-c[1]*h]),i.push(y);const g=[];g.push([o[0]+c[0]*h,o[1]+c[1]*h]),g.push([a[0]+c[0]*h,a[1]+c[1]*h]),i.push(g);break}case Ft.OffsetOpposite:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const y=[];y.push([o[0]-c[0]*h,o[1]-c[1]*h]),y.push([a[0]-c[0]*h,a[1]-c[1]*h]),i.push(y);break}case Ft.OffsetSame:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const y=[];y.push([o[0]+c[0]*h,o[1]+c[1]*h]),y.push([a[0]+c[0]*h,a[1]+c[1]*h]),i.push(y);break}case Ft.CircleWithArc:{let a=this._cp2(r,3,0);const l=this._cp3(r,a,.5,-1);let c,h;if(n>=4)c=r[3],h=this._crossProduct(this._sub(c,a),this._sub(l,a))>0;else{c=a,h=this._crossProduct(this._sub(c,o),this._sub(l,o))>0;const E=24*this._geomUnitsPerPoint,C=this._sub(c,o);this._normalize(C,E);const M=Math.sqrt(2)/2;this._rotateDirect(C,M,h?M:-M),a=this._add(o,C)}const y=this._sub(a,o),g=Math.cos(Math.PI/18),_=Math.sin(Math.PI/18),S=[a];for(let E=1;E<=36;E++)this._rotateDirect(y,g,_),S.push(this._add(o,y));this._add90DegArc(S,a,c,l,h),Rw(S[S.length-8],1),i.push(S);break}case Ft.DoubleJog:{let a,l=this._cp2(r,-3,1),c=this._cp3(r,l,-1,-.5);if(n>=4)a=r[3];else{const P=o;o=l,a=c;const D=this._dist(o,P),F=this._dist(a,P);let U=30*this._geomUnitsPerPoint;.5*D<U&&(U=.5*D),.5*F<U&&(U=.5*F),l=this._mix(o,U/D,P,(D-U)/D),c=this._mix(a,U/F,P,(F-U)/F)}const h=this._mid(o,l),y=this._mid(a,c),g=this._dist(o,l),_=this._dist(c,a);let S=Math.min(g,_)/8;S=Math.min(S,24*this._geomUnitsPerPoint);const E=Math.cos(Math.PI/4);let C=this._sub(o,l);this._normalize(C,S),this._crossProduct(C,this._sub(a,l))>0?this._rotateDirect(C,E,-E):this._rotateDirect(C,E,E);let M=[];M.push(l),M.push(this._add(h,C)),M.push(this._sub(h,C)),M.push(o),i.push(M),C=this._sub(a,c),this._normalize(C,S),this._crossProduct(C,this._sub(o,c))<0?this._rotateDirect(C,E,E):this._rotateDirect(C,E,-E),M=[],M.push(c),M.push(this._add(y,C)),M.push(this._sub(y,C)),M.push(a),i.push(M);break}case Ft.PerpendicularOffset:{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const h=[c[0]/8,c[1]/8],y=this._sub(this._mid(a,l),h);i.push([y,o]);break}case Ft.LineExcludingLastSegment:{const a=this._arrowPath(r),l=[];let c=a.length-2;for(;c--;)l.push(a[c]);i.push(l);break}case Ft.MultivertexArrow:{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!1),i.push(l);break}case Ft.CrossedArrow:{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!0),i.push(l);break}case Ft.ChevronArrow:{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,h=this._sub(o,a),y=this._norm(h);this._normalize(h);const g=this._crossProduct(h,this._sub(l,a));let _=this._dotProduct(h,this._sub(l,a));_<.05*y?_=.05*y:_>.95*y-c&&(_=.95*y-c);const S=[a[0]+h[0]*_,a[1]+h[1]*_],E=this._leftPerp(h),C=[];C.push([S[0]+E[0]*g+h[0]*c,S[1]+E[1]*g+h[1]*c]),C.push(o),C.push([S[0]-E[0]*g+h[0]*c,S[1]-E[1]*g+h[1]*c]),i.push(C);break}case Ft.ChevronArrowOffset:{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),h=this._norm(c);this._normalize(c);const y=this._crossProduct(c,this._sub(l,a));let g=this._dotProduct(c,this._sub(l,a));g<.05*h?g=.05*h:g>.95*h&&(g=.95*h);const _=[a[0]+c[0]*g,a[1]+c[1]*g];this._leftPerpendicular(c);const S=[];S.push([_[0]+c[0]*y*.5,_[1]+c[1]*y*.5]),S.push(this._mid(_,o)),S.push([_[0]-c[0]*y*.5,_[1]-c[1]*y*.5]),i.push(S);break}case Ft.PartialFirstSegment:{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),h=this._norm(c);this._normalize(c);let y=this._dotProduct(c,this._sub(l,a));y<.05*h?y=.05*h:y>.95*h&&(y=.95*h);const g=[a[0]+c[0]*y,a[1]+c[1]*y];i.push([a,g]);break}case Ft.Arch:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=this._sub(o,a),h=this._mix(l,1,c,.55),y=this._mix(l,1,c,-.55),g=[o];this._addBezier2(g,o,h,l,4),this._addBezier2(g,l,y,a,4),i.push(g);break}case Ft.CurvedParallelTicks:{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const h=[c[0]/8,c[1]/8],y=this._sub(this._mid(a,l),h),g=this._sub(this._mix(a,.75,l,.25),h),_=this._sub(this._mix(a,.25,l,.75),h),S=[a];this._addBezier2(S,a,g,y,3),this._addBezier2(S,y,_,l,3),i.push(S);for(let E=0;E<8;E++){const C=S[2*E+1],M=[this._clone(C)];M.push(this._add(C,[c[0]/4,c[1]/4])),i.push(M)}break}case Ft.Arc90Degrees:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=[a];this._add90DegArc(c,a,o,l),i.push(c);break}case Ft.TipWithPerpendicularAndTicks:{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,h=this._sub(o,a),y=this._norm(h);this._normalize(h);let g=this._crossProduct(h,this._sub(l,a)),_=this._dotProduct(h,this._sub(l,a));_<.05*y?_=.05*y:_>.95*y-c&&(_=.95*y-c);const S=this._leftPerp(h),E=[o[0]-h[0]*c,o[1]-h[1]*c],C=.5*Math.max(y-_-c,c);g=Math.abs(g);const M=[];M.push([E[0]+S[0]*(g+C)-h[0]*C,E[1]+S[1]*(g+C)-h[1]*C]),M.push([E[0]+S[0]*g,E[1]+S[1]*g]),M.push([E[0]-S[0]*g,E[1]-S[1]*g]),M.push([E[0]-S[0]*(g+C)-h[0]*C,E[1]-S[1]*(g+C)-h[1]*C]),i.push(M),i.push([E,o]);break}case Ft.ConcentricCircles:{const a=this._cp2(r,1,0),l=this._cp3(r,a,2,0),c=Math.cos(Math.PI/18),h=Math.sin(Math.PI/18);let y=this._dist(a,o),g=[y,0],_=[];for(let S=0;S<=36;S++)_.push(this._add(o,g)),this._rotateDirect(g,c,h);if(i.push(_),n>=4){_=[];const S=r[3];y=this._dist(S,o),g=[y,0];for(let E=0;E<=36;E++)_.push(this._add(o,g)),E===0&&(_.push(this._add(o,g)),Rw(_[1],1)),this._rotateDirect(g,c,h);i.push(_)}_=[],y=this._dist(l,o),g=[y,0];for(let S=0;S<=36;S++)_.push(this._add(o,g)),this._rotateDirect(g,c,h);i.push(_);break}case Ft.DoubleJogArrow:{o=this._arrowPath(r)[0];const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),h=this._norm(c);this._normalize(c);const y=Math.abs(this._crossProduct(c,this._sub(l,o)));let g=Math.abs(this._dotProduct(c,this._sub(l,o)));g<.05*h?g=.05*h:g>.95*h&&(g=.95*h);const _=Math.max(y,g),S=this._leftPerp(c);let E=[];const C=[o[0]-c[0]*g*.5+S[0]*y*.5,o[1]-c[1]*g*.5+S[1]*y*.5];E.push([C[0],C[1]]),C[0]+=c[0]*_*.5+S[0]*_*.4,C[1]+=c[1]*_*.5+S[1]*_*.4,E.push([C[0],C[1]]),C[0]-=S[0]*_*.25,C[1]-=S[1]*_*.25,E.push([C[0],C[1]]),C[0]+=c[0]*_*.5+S[0]*_*.4,C[1]+=c[1]*_*.5+S[1]*_*.4,E.push([C[0],C[1]]),i.push(E),E=[],C[0]=o[0]-c[0]*g*.5-S[0]*y*.5,C[1]=o[1]-c[1]*g*.5-S[1]*y*.5,E.push([C[0],C[1]]),C[0]+=c[0]*_*.5-S[0]*_*.4,C[1]+=c[1]*_*.5-S[1]*_*.4,E.push([C[0],C[1]]),C[0]+=S[0]*_*.25,C[1]+=S[1]*_*.25,E.push([C[0],C[1]]),C[0]+=c[0]*_*.5-S[0]*_*.4,C[1]+=c[1]*_*.5-S[1]*_*.4,E.push([C[0],C[1]]),i.push(E);break}case Ft.LinkedChevrons:{const a=this._cp2(r,-5,0),l=this._cp3(r,a,-.2,1),c=this._sub(o,a);this._normalize(c);const h=this._leftPerp(c),y=Math.abs(this._crossProduct(c,this._sub(l,a)));i.push([a,o]);const g=[];g.push([o[0]-c[0]*y+h[0]*y,o[1]-c[1]*y+h[1]*y]),g.push(o),g.push([o[0]-c[0]*y-h[0]*y,o[1]-c[1]*y-h[1]*y]),i.push(g),this._addDash(i,a,[-c[0]*y+h[0]*y,-c[1]*y+h[1]*y]),this._addDash(i,a,[-c[0]*y-h[0]*y,-c[1]*y-h[1]*y]);break}case Ft.SegmentThenHalfCircle:{const a=this._cp2(r,2,0),l=this._cp3(r,a,1.5,0);let c;c=n>=4?r[3]:this._cp3(r,a,1.25,-.5);const h=this._sub(a,o);this._normalize(h);const y=.5*this._dist(a,l),g=this._crossProduct(h,this._sub(c,o))>0,_=Math.cos(Math.PI/18);let S=Math.sin(Math.PI/18);g&&(S=-S);const E=[o,a];h[0]*=y,h[1]*=y;const C=this._add(a,h);h[0]=-h[0],h[1]=-h[1];for(let M=1;M<=18;M++)this._rotateDirect(h,_,S),E.push(this._add(C,h));i.push(E);break}case Ft.LineWithStraightTicks:{const a=this._cp2(r,-2,1),l=this._cp3(r,a,-1,-.5),c=this._sub(l,a);this._normalize(c);const h=this._dotProduct(c,this._sub(a,o)),y=this._dotProduct(c,this._sub(l,o));let g=[o];g.push([o[0]+c[0]*h,o[1]+c[1]*h]),g.push(a),i.push(g),g=[o],g.push([o[0]+c[0]*y,o[1]+c[1]*y]),g.push(l),i.push(g);break}case Ft.DoubleCurve:{const a=this._cp2(r,-5,-1),l=this._cp3(r,a,2,0),c=Math.atan2(1,5),h=Math.cos(c),y=Math.sin(c),g=this._sub(a,o),_=this._dist(o,a);this._normalize(g),this._rotateDirect(g,h,-y);const S=[o];S.push([o[0]+g[0]*_*.5,o[1]+g[1]*_*.5]),Rw(S[1],1),S.push([o[0]+g[0]*_*.8,o[1]+g[1]*_*.8]),this._addBezier2(S,S[2],[o[0]+g[0]*_,o[1]+g[1]*_],a,3);const E=this._sub(l,a),C=this._dist(a,l);this._normalize(E),this._rotateDirect(E,h,-y),this._addBezier2(S,a,[l[0]-E[0]*C,l[1]-E[1]*C],[l[0]-E[0]*C*.8,l[1]-E[1]*C*.8],3),S.push(l),i.push(S);break}case Ft.ParallelWithTicksByWidth:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),h>0?(this._addAngledTicks(i,o,[o[0]+c[0]*h,o[1]+c[1]*h],a),this._addAngledTicks(i,a,[a[0]+c[0]*h,a[1]+c[1]*h],o)):(this._addAngledTicks(i,[o[0]+c[0]*h,o[1]+c[1]*h],o,a),this._addAngledTicks(i,[a[0]+c[0]*h,a[1]+c[1]*h],o,a));break}case Ft.EnclosingRoundedRectangle:{const a=this._cp2(r,3,-2),l=[Math.min(o[0],a[0]),Math.max(o[1],a[1])],c=[Math.max(o[0],a[0]),Math.min(o[1],a[1])],h=c[0]-l[0],y=l[1]-c[1],g=Math.min(h,y)/10,_=[];_.push([l[0]+g+.75*(h-2*g),l[1]]),_.push([c[0]-g,l[1]]),this._add90DegArc(_,[c[0]-g,l[1]],[c[0],l[1]-g],[c[0],l[1]]),_.push([c[0],c[1]+g]),this._add90DegArc(_,[c[0],c[1]+g],[c[0]-g,c[1]],c),_.push([l[0]+g,c[1]]),this._add90DegArc(_,[l[0]+g,c[1]],[l[0],c[1]+g],[l[0],c[1]]),_.push([l[0],l[1]-g]),this._add90DegArc(_,[l[0],l[1]-g],[l[0]+g,l[1]],l),_.push([l[0]+g+.75*(h-2*g),l[1]]);break}case Ft.FullGeometry:default:i.push(r)}}return i}};var cu;let wqe=(cu=class{static local(){return cu.instance===null&&(cu.instance=new cu),cu.instance}execute(e,i,r,s,n){return new _qe(e,i,r)}},cu.instance=null,cu),_qe=class extends B1{constructor(e,i,r){super(e,!0,!0),this._curveHelper=new jd,this._beginCut=(i.beginCut!==void 0?i.beginCut:1)*r,this._endCut=(i.endCut!==void 0?i.endCut:1)*r,this._middleCut=(i.middleCut!==void 0?i.middleCut:0)*r,this._invert=i.invert!==void 0&&i.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(e){const{_beginCut:i,_endCut:r,_middleCut:s}=this,n=e.pathLength(),o=Ii.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(i!==0||r!==0||s!==0)if(i+r+s>=n)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else this._curveHelper.appendSubCurve(o,e,0,i),this._curveHelper.appendSubCurve(o,e,.5*(n-s),.5*(n+s)),this._curveHelper.appendSubCurve(o,e,n-r,r)}else if(i===0&&r===0&&s===0)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else i+r+s<n&&(s===0?this._curveHelper.appendSubCurve(o,e,i,n-r):(this._curveHelper.appendSubCurve(o,e,i,.5*(n-s)),this._curveHelper.appendSubCurve(o,e,.5*(n+s),n-r)));return o.totalSize===0?null:o}};const MZ=1e-7;let PP=class{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return this._values.length===0}size(){return this._values.length}init(e,i,r=!0){if(this._setEmpty(),!e||e.length===0)return!1;for(let s=0;s<e.length;s++){let n=Math.abs(e[s]);r&&n<MZ&&(n=MZ),this._values.push(n),this._length+=n}return i&&1&e.length&&(this._length*=2),this._length!==0&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(e){const i=this._values?this._values.length:0;for(let r=0;r<i;++r)this._values[r]*=e;this._length*=e,this.extPtGap*=e,this.ctrlPtGap*=e}addValue(e){this._length+=e,this._values.push(e)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}},Yh=class{constructor(){this.pt=null,this.ca=0,this.sa=0}};var Yp;(function(t){t[t.FAIL=0]="FAIL",t[t.END=1]="END",t[t.CONTINUE=2]="CONTINUE"})(Yp||(Yp={}));let NE=class{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return this.segment!==null}copyTo(e){e.segment=this.segment,e.segmentLength=this.segmentLength,e.abscissa=this.abscissa,e.isPathEnd=this.isPathEnd,e.isPartEnd=this.isPartEnd}},LP=class extends jd{constructor(e=0,i=!1){super(e,i),this._tempPos=new NE,this._tempPt=[0,0],this._tolerance=WS,this._currentPosition=new NE}updateTolerance(e){this._tolerance=WS*e}init(e,i,r=!0){return r?(this._patternLength=i.length(),this._partExtPtGap=i.extPtGap,this._partCtrlPtGap=i.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=e,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(e,i=Yp.FAIL){const r=new NE;return!!this._nextPosition(e,r,null,i)&&(r.copyTo(this._currentPosition),!0)}curPointAndAngle(e){e.pt=this._getPoint(this._currentPosition);const[i,r]=this._getAngleCS(this._tempPt,this._currentPosition);e.ca=i,e.sa=r}nextPointAndAngle(e,i,r=Yp.FAIL){const s=this._tempPos;if(!this._nextPosition(e,s,null,r))return!1;s.copyTo(this._currentPosition),i.pt=this._getPoint(s);const[n,o]=this._getAngleCS(this._tempPt,s);return i.ca=n,i.sa=o,!0}nextCurve(e){if(e===0)return null;const i=Ii.createEmptyOptimizedCIM("esriGeometryPolyline");i.startPath(),i.nextPath();const r=new NE;return this._nextPosition(e,r,i,Yp.END)?(r.copyTo(this._currentPosition),i):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(e){return this._pathCursor.seekInPath(e),[this._pathCursor.x,this._pathCursor.y]}getSeg(e){return[this.getPt(e),this.getPt(e+1)]}_nextPosition(e,i,r,s){if(this._currentPosition.isPathEnd)return!1;let n=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(n/=this._currentPosition.segmentLength),this._currentPosition.copyTo(i);i.abscissa+e*this._partLengthRatio>i.segmentLength+this._tolerance;){if(r){if(r.pathSize===0)if(n===0){const a=i.segment[0];r.pushXY(a[0],a[1])}else r.pushPoint(this.getSegCoord2D(i.segment,n));const o=i.segment[1];r.pushXY(o[0],o[1])}if(n=0,e-=(i.segmentLength-i.abscissa)/this._partLengthRatio,this._partSegCount)i.segment=this._nextSegment(),i.segmentLength=this.getSegLength(i.segment),i.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return s!==Yp.FAIL&&(i.segmentLength=this.getSegLength(i.segment),i.isPartEnd=!0,s===Yp.END?(i.abscissa=i.segmentLength,i.isPathEnd=!0):i.abscissa=i.segmentLength+e,!0);this._currentPosition.copyTo(i)}}if(i.abscissa+=e*this._partLengthRatio,r){r.pathSize===0&&(n===0?r.pushPoint(i.segment[0]):r.pushPoint(this.getSegCoord2D(i.segment,n)));const o=i.abscissa/i.segmentLength;o===1?r.pushPoint(i.segment[1]):r.pushPoint(this.getSegCoord2D(i.segment,o))}return this._partSegCount||Math.abs(i.abscissa-i.segmentLength)<this._tolerance&&(i.isPathEnd=this._partIsLast,i.isPartEnd=!0),!0}_getPoint(e){const i=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,i)}_getAngleCS(e,i){const r=i.segmentLength<=0?0:i.abscissa/i.segmentLength;return this.getSegAngleCS(e,this._currentPosition.segment,r)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let e=this._partSegCount;for(;e;)this._previousSegment(),--e;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const i=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(i);let r=i+this._partSegCount+1;if(r>=this._pathCursor.pathSize&&(r=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(r),this._patternLength>0){const s=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,n=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let o=Math.round((this._partLength-(s+n))/this._patternLength);o<=0&&(o=s+n>0?0:1),this._partLengthRatio=this._partLength/(s+n+o*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}};var uu;let Sqe=(uu=class{static local(){return uu.instance===null&&(uu.instance=new uu),uu.instance}execute(e,i,r,s,n){return new xqe(e,i,r)}},uu.instance=null,uu),xqe=class extends B1{constructor(e,i,r){super(e,!0,!0),this._firstCurve=null,this._walker=new LP,this._walker.updateTolerance(r),this._endings=i.lineDashEnding,this._customDashPos=-(i.offsetAlongLine??0)*r,this._offsetAtEnd=(i.customEndingOffset??0)*r;let s=poe(i).dashTemplate;s==null&&(s=[]),s.length%2&&(s=[...s,...s]),this._pattern=new PP,this._pattern.init(s,!0),this._pattern.scale(r)}processPath(e){if(this._pattern.length()===0){this.iteratePath=!1;const s=vf(e);return Ii.fromJSONCIM({paths:[s]})}if(!this.iteratePath){let s=!0;switch(this._endings){case on.HalfPattern:case on.HalfGap:default:this._pattern.extPtGap=0;break;case on.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case on.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case on.NoConstraint:this.isClosed||(s=!1);break;case on.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const n=e.pathLength();if(this._pattern.isEmpty()||n<.1*this._pattern.length()){const o=vf(e);return Ii.fromJSONCIM({paths:[o]})}if(!this._walker.init(e,this._pattern,s)){const o=vf(e);return Ii.fromJSONCIM({paths:[o]})}}let i;if(this.iteratePath)i=this._pattern.nextValue();else{let s;switch(this._endings){case on.HalfPattern:default:s=.5*this._pattern.firstValue();break;case on.HalfGap:s=.5*-this._pattern.lastValue();break;case on.FullGap:s=-this._pattern.lastValue();break;case on.FullPattern:s=0;break;case on.NoConstraint:case on.Custom:s=-this._customDashPos}let n=s/this._pattern.length();n-=Math.floor(n),s=n*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();let o=!1;for(;s>=i;)s-=i,i=this._pattern.nextValue(),o=!o;i-=s,o?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}let r=this._walker.nextCurve(i);if(r)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)r.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(r.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,r=this._firstCurve,this._firstCurve=null;return r==null||r.reset(),r}};var hu;let $qe=(hu=class{static local(){return hu.instance===null&&(hu.instance=new hu),hu.instance}execute(e,i,r,s,n,o,a){return new Eqe(e,i,r,s,n,o,a)}},hu.instance=null,hu),Eqe=class{constructor(e,i,r,s,n,o,a){switch(this._preventClipping=a,this._inputGeometries=e,this._tileKey=s,this._geometryEngine=n,this._maxInflateSize=o*r,this._width=(i.width!==void 0?i.width:2)*r,i.method){case bm.Mitered:case bm.Bevelled:case bm.Rounded:case bm.TrueBuffer:case bm.Square:}this._option=i.option}next(){let e;for(;e=this._inputGeometries.next();){if(e.geometryType==="esriGeometryEnvelope"&&this._width>0){const i=e.asJSON();return Math.min(i.xmax-i.xmin,i.ymax-i.ymin)-2*this._width<0?e:Ii.fromJSONCIM({paths:[[[i.xmin+this._width,i.ymin+this._width],[i.xmax-this._width,i.ymin+this._width],[i.xmax-this._width,i.ymax-this._width],[i.xmin+this._width,i.ymax-this._width],[i.xmin+this._width,i.ymin+this._width]],[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]})}if(e.geometryType==="esriGeometryPolygon"){if(this._width===0)return e.clone();const i=this._geometryEngine;if(i==null)return null;const r=!this._preventClipping&&this._tileKey?uj(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const s=i.buffer(We.WebMercator,r.asJSON(),-this._width,1);if(s){for(const n of s.rings)if(n){r.startPath();for(const o of n.reverse())r.pushXY(o[0],r.yFactor*o[1])}}return r}}return null}};var du;let Iqe=(du=class{static local(){return du.instance===null&&(du.instance=new du),du.instance}execute(e,i,r,s,n){return new Cqe(e,i,r,n)}},du.instance=null,du),Cqe=class{constructor(e,i,r,s){this._inputGeometries=e,this._medhod=i.method,this._geometryEngine=s}next(){let e=this._inputGeometries.next();const i=this._medhod;for(;e!=null;){if(e.totalSize>0)switch(i){case WT.RectangularBox:return Tqe(e);case WT.ConvexHull:return this._constructConvexHull(e);default:return Mqe(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const i=this._geometryEngine;if(i==null)return null;const r=i.convexHull(We.WebMercator,e.asJSON());return r?Ii.fromJSONCIM(r):null}case"esriGeometryEnvelope":return e;default:return null}}};function Tqe(t){const e=Tx(t),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]};return Ii.fromJSONCIM(i)}function Mqe(t){switch(t.geometryType){case"esriGeometryPolyline":{const e=[];for(;t.nextPath();)kqe(t,e);return Ii.fromJSONCIM({rings:e})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return t;default:return null}}function kqe(t,e){if(t.seekPathStart(),!t.nextPoint())return;const i=t.x,r=t.y,s=[[i,r]];for(e.push(s);t.nextPoint();)s.push([t.x,t.y]);s.push([i,r])}var pu;let Pqe=(pu=class{static local(){return pu.instance===null&&(pu.instance=new pu),pu.instance}execute(e,i,r,s,n){return new Lqe(e,i,r)}},pu.instance=null,pu),Lqe=class extends B1{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new jd,this._length=(i.length!==void 0?i.length:20)*r,this._angle=i.angle!==void 0?i.angle:225,this._position=i.position!==void 0?i.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(e){const i=Ii.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(e))return null;e.seekInPath(0);const r=e.x,s=e.y;e.seekInPath(e.pathSize-1);const n=e.x,o=e.y,a=[n-r,o-s];this._curveHelper.normalize(a);const l=r+(n-r)*this._position/100,c=s+(o-s)*this._position/100,h=Math.cos((90-this._angle)/180*Math.PI);let y=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(y=-y),this._mirror=!this._mirror;const g=[l-this._length/2*h,c-this._length/2*y],_=[l+this._length/2*h,c+this._length/2*y];return i.pushPath([[r,s],g,_,[n,o]]),i}};var fu;let Rqe=(fu=class{static local(){return fu.instance===null&&(fu.instance=new fu),fu.instance}execute(e,i,r,s,n){return new Oqe(e,i,r)}},fu.instance=null,fu),Oqe=class{constructor(e,i,r){this._inputGeometries=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0}next(){let e=this._inputGeometries.next();for(;e;){if(e.totalSize>0)return this._move(e.clone(),this._offsetX,this._offsetY);e=this._inputGeometries.next()}return null}_move(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=e.x+i,e.y=e.y+r;return e.reset(),e}};const Dqe=10;var Au;let Nqe=(Au=class{static local(){return Au.instance===null&&(Au.instance=new Au),Au.instance}execute(e,i,r,s,n,o,a){return new Fqe(e,i,r,s,n,o,a)}},Au.instance=null,Au),Fqe=class{constructor(e,i,r,s,n,o,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=s,this._geometryEngine=n,this._curveHelper=new jd,this._offset=(i.offset??1)*r,this._method=i.method,this._maxInflateSize=Math.max(Math.abs(o*r),Dqe),this._option=i.option,this._offsetFlattenError=WS*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._offset===0)return e.clone();if(e.geometryType==="esriGeometryEnvelope"){if(this._method===yd.Rounded&&this._offset>0){const o=vf(e),a=this._curveHelper.offset(o,-this._offset,this._method,4,this._offsetFlattenError);if(a){const l=Ii.createEmptyOptimizedCIM(e.geometryType);return l.pushPath(a),l}return null}const n=e.asJSON();if(to(n)&&Math.min(n.xmax-n.xmin,n.ymax-n.ymin)+2*this._offset>0)return Ii.fromJSONCIM({xmin:n.xmin-this._offset,xmax:n.xmax+this._offset,ymin:n.ymin-this._offset,ymax:n.ymax+this._offset})}const i=this._geometryEngine;if(i==null)continue;const r=!this._preventClipping&&this._tileKey?uj(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const s=i.offset(We.WebMercator,r.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError);return s?Ii.fromJSONCIM(s):null}return null}};var mu;let zqe=(mu=class{static local(){return mu.instance===null&&(mu.instance=new mu),mu.instance}execute(e,i,r,s,n){return new Bqe(e,i,r)}},mu.instance=null,mu),Bqe=class{constructor(e,i,r){this._inputGeometries=e,this._length=(i.length!==void 0?i.length:Zr.CIMGeometricEffectRadial.length)*r,this._angle=i.angle!==void 0?i.angle*Math.PI/180:Zr.CIMGeometricEffectRadial.angle,this._lx=Math.cos(this._angle)*this._length,this._ly=Math.sin(this._angle)*this._length}next(){let e=this._inputGeometries.next();for(;e;){if(e.geometryType==="esriGeometryPoint"||e.geometryType==="esriGeometryMultipoint"){const i=Ii.createEmptyOptimizedCIM("esriGeometryPolyline");return e.nextPath()&&e.nextPoint()&&i.pushPath([[e.x,e.y],[e.x+this._lx,e.y+this._ly]]),i}if(e.geometryType==="esriGeometryPolygon"){const i=Jie(e);if(!i)return null;const r=Ii.createEmptyOptimizedCIM("esriGeometryPolyline");return r.pushPath([[i[0],i[1]],[i[0]+this._lx,i[1]+this._ly]]),r}e=this._inputGeometries.next()}return null}};var yu;let jqe=(yu=class{static local(){return yu.instance===null&&(yu.instance=new yu),yu.instance}execute(e,i,r,s,n){return new Uqe(e,i,r)}},yu.instance=null,yu),Uqe=class{constructor(e,i,r){this._inputGeometries=e,this._reverse=i.reverse===void 0||i.reverse}next(){let e=this._inputGeometries.next();for(;e;){if(!this._reverse)return e;if(e.geometryType==="esriGeometryPolyline")return Vqe(e.clone());e=this._inputGeometries.next()}return null}};function Vqe(t){for(;t.nextPath();)for(let e=0;e<t.pathSize/2;e++){t.seekInPath(e);const i=t.x,r=t.y;t.seekInPath(t.pathSize-e-1);const s=t.x,n=t.y;t.x=i,t.y=r,t.seekInPath(e),t.x=s,t.y=n}return t.reset(),t}var gu;let Gqe=(gu=class{static local(){return gu.instance===null&&(gu.instance=new gu),gu.instance}execute(e,i,r,s,n){return new Hqe(e,i,r)}},gu.instance=null,gu),Hqe=class{constructor(e,i,r){this._inputGeometries=e,this._rotateAngle=i.angle!==void 0?i.angle*Math.PI/180:0}next(){let e=this._inputGeometries.next();for(;e;){if(this._rotateAngle===0||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=Tx(e),r=(i[2]+i[0])/2,s=(i[3]+i[1])/2;return e.reset(),this._rotate(e.clone(),r,s)}e=this._inputGeometries.next()}return null}_rotate(e,i,r){const s=Math.cos(this._rotateAngle),n=Math.sin(this._rotateAngle);for(;e.nextPath();)for(;e.nextPoint();){const o=e.x-i,a=e.y-r;e.x=i+o*s-a*n,e.y=r+o*n+a*s}return e.reset(),e}};var vu;let qqe=(vu=class{static local(){return vu.instance===null&&(vu.instance=new vu),vu.instance}execute(e,i,r,s,n){return new Wqe(e,i,r)}},vu.instance=null,vu),Wqe=class{constructor(e,i,r){this._inputGeometries=e,this._xFactor=i.xScaleFactor!==void 0?i.xScaleFactor:1.15,this._yFactor=i.yScaleFactor!==void 0?i.yScaleFactor:1.15}next(){const e=this._inputGeometries.next();if(e){if(this._xFactor===1&&this._yFactor===1||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=Tx(e),r=(i[2]+i[0])/2,s=(i[3]+i[1])/2;return e.reset(),this._scaleCursor(e.clone(),r,s)}}return null}_scaleCursor(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=i+(e.x-i)*this._xFactor,e.y=r+(e.y-r)*this._yFactor;return e.reset(),e}},o8=class{constructor(){this._polyline=[]}beginPath(e){this._polyline.push([e])}lineTo(e){if(this._polyline.length===0)throw new Error("No path started. Call beginPath first.");this._polyline[this._polyline.length-1].push(e)}getPointCount(){return this._polyline.reduce(((e,i)=>e+i.length),0)}addSegment(e,i,r){r&&this.beginPath(e),this.lineTo(i)}getXY(e){let i=0;for(const r of this._polyline){if(e<i+r.length)return r[e-i];i+=r.length}return null}getGeometry(){return this._polyline}};var bu;let Qqe=(bu=class{static local(){return bu.instance===null&&(bu.instance=new bu),bu.instance}execute(e,i,r,s,n){return new Jqe(e,i,r)}},bu.instance=null,bu),Jqe=class extends B1{constructor(e,i,r){super(e,!1,!0),this._suppress=i.suppress!==void 0&&i.suppress,this._invert=i.invert!==void 0&&i.invert}processPath(e){if(e.totalSize<=0)return null;if(!this._suppress){const _=Ii.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.nextPoint();)_.pushXY(e.x,e.y);return _}const i=[],r=new Array(e.pathSize);let s=0;for(e.seekPathStart();e.nextPoint();)r[s++]=e.getControlPoint(),i.push([e.x,e.y]);let n=!0,o=!0,a=!1,l=!this._invert;s=0;const c=new o8;let h=i[0];for(;s<i.length;){const _=i[s+1],S=r[s],E=r[s+1];s++,o&&(l=S||E?this._invert:!this._invert,o=!1),l?(c.addSegment(h,_,n),n=!1):a=!0,h=_,E&&(l?(l=!1,n=!0):l=!0)}const y=c.getGeometry();if(y.length===0)return null;if(!a&&i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]){const _=y[y.length-1];return _[0][0]===_[_.length-1][0]&&_[0][1]===_[_.length-1][1]||_.push([_[0][0],_[0][1]]),Ii.fromJSONCIM({paths:y})}const g=y[y.length-1];return c.getPointCount()>1&&e.geometryType==="esriGeometryPolygon"&&g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&y.length>1&&(y[y.length-1].push(...y[0]),y.splice(0,1)),Ii.fromJSONCIM({paths:y})}};function kZ(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function vde(t,e){return Math.sqrt(t*t+e*e)}function PZ(t){const e=vde(t[0],t[1]);t[0]/=e,t[1]/=e}function Zqe(t,e){return vde(t[0]-e[0],t[1]-e[1])}function Yqe(t,e){return t[e+1]}function bde(t){return t.length-1}function Xqe(t){let e=0;for(let i=0;i<bde(t);i++)e+=Kqe(t,i);return e}function Kqe(t,e,i=1){let[r,s]=Yqe(t,e);return[r,s]=[Math.round(r),Math.round(s)],Math.sqrt(r*r+s*s)*i}let a8=class l8{constructor(e,i,r,s,n){this._segments=e,this._index=i,this._distance=r,this._xStart=s,this._yStart=n,this._done=!1}static create(e){return new l8(e,0,0,e[0][0],e[0][1])}clone(){return new l8(this._segments,this._index,this._distance,this.xStart,this.yStart)}equals(e){return this._index===e._index||e._index===this._index-1&&(this._distance===0||e._distance===1)||e._index===this._index+1&&(this._distance===1||e._distance===0)}leq(e){return this._index<e._index||this._index===e._index&&this._distance<=e._distance}geq(e){return this._index>e._index||this._index===e._index&&this._distance>=e._distance}get _segment(){return this._segments[this._index+1]}get angle(){const e=this.dy,i=(0*e+-1*-this.dx)/(1*this.length);let r=Math.acos(i);return e>0&&(r=2*Math.PI-r),r}get xStart(){return this._xStart}get yStart(){return this._yStart}get x(){return this.xStart+this.distance*this.dx}get y(){return this.yStart+this.distance*this.dy}get dx(){return this._segment[0]}get dy(){return this._segment[1]}get xMidpoint(){return this.xStart+.5*this.dx}get yMidpoint(){return this.yStart+.5*this.dy}get xEnd(){return this.xStart+this.dx}get yEnd(){return this.yStart+this.dy}get length(){const{dx:e,dy:i}=this;return Math.sqrt(e*e+i*i)}get remainingLength(){return this.length*(1-this._distance)}get backwardLength(){return this.length*this._distance}get distance(){return this._distance}get done(){return this._done}hasPrev(){return this._index-1>=0}hasNext(){return this._index+1<bde(this._segments)}next(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null}prev(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)}_seekBackwards(e,i){const r=this.backwardLength;if(e<=r)return this._distance=(r-e)/this.length,this;let s=this.backwardLength;for(;this.prev();){if(s+this.length>e)return this._seekBackwards(e-s);s+=this.length}return this._distance=0,i?this:null}seek(e,i=!1){if(e<0)return this._seekBackwards(Math.abs(e),i);if(e<=this.remainingLength)return this._distance=(this.backwardLength+e)/this.length,this;let r=this.remainingLength;for(;this.next();){if(r+this.length>e)return this.seek(e-r,i);r+=this.length}return this._distance=1,i?this:null}};function hft(t,e,i,r=!0){const s=Xqe(t),n=a8.create(t),o=s/2;if(!r)return n.seek(o),void(n.x<nv&&n.y<nv&&n.x>=0&&n.y>=0&&i(n.clone(),0,o+0*e,s));const a=Math.max((s-e)/2,0),l=Math.floor(a/e),c=o-l*e;n.seek(c);for(let h=-l;h<=l;h++)n.x<nv&&n.y<nv&&n.x>=0&&n.y>=0&&i(n.clone(),h,o+h*e,s),n.seek(e)}function dft(t,e){const i=e;for(let r=0;r<t.length;r++){let s=t[r];eWe(s,i);const n=[];n.push(s[0]);for(let o=1;o<s.length;o++){const[a,l]=s[o-1],[c,h]=s[o],y=c-a,g=h-l;n.push([y,g])}t[r]=n,s=n}return t}function eWe(t,e){if(e<=0)return;const r=t.length;if(r<3)return;const s=[];let n=0;s.push(0);for(let y=1;y<r;y++)n+=Zqe(t[y],t[y-1]),s.push(n);e=Math.min(e,.2*n);const o=[];o.push(t[0][0]),o.push(t[0][1]);const a=t[r-1][0],l=t[r-1][1],c=kZ([0,0],t[0],t[1]);PZ(c),t[0][0]+=e*c[0],t[0][1]+=e*c[1],kZ(c,t[r-1],t[r-2]),PZ(c),t[r-1][0]+=e*c[0],t[r-1][1]+=e*c[1];for(let y=1;y<r;y++)s[y]+=e;s[r-1]+=e;const h=.5*e;for(let y=1;y<r-1;y++){let g=0,_=0,S=0;for(let E=y-1;E>=0&&!(s[E+1]<s[y]-h);E--){const C=h+s[E+1]-s[y],M=s[E+1]-s[E],P=s[y]-s[E]<h?1:C/M;if(Math.abs(P)<1e-6)break;const D=P*P,F=P*C-.5*D*M,U=P*M/e,G=t[E+1],Q=t[E][0]-G[0],W=t[E][1]-G[1];g+=U/F*(G[0]*P*C+.5*D*(C*Q-M*G[0])-D*P*M*Q/3),_+=U/F*(G[1]*P*C+.5*D*(C*W-M*G[1])-D*P*M*W/3),S+=U}for(let E=y+1;E<r&&!(s[E-1]>s[y]+h);E++){const C=h-s[E-1]+s[y],M=s[E]-s[E-1],P=s[E]-s[y]<h?1:C/M;if(Math.abs(P)<1e-6)break;const D=P*P,F=P*C-.5*D*M,U=P*M/e,G=t[E-1],Q=t[E][0]-G[0],W=t[E][1]-G[1];g+=U/F*(G[0]*P*C+.5*D*(C*Q-M*G[0])-D*P*M*Q/3),_+=U/F*(G[1]*P*C+.5*D*(C*W-M*G[1])-D*P*M*W/3),S+=U}o.push(g/S),o.push(_/S)}o.push(a),o.push(l);for(let y=0,g=0;y<r;y++)t[y][0]=o[g++],t[y][1]=o[g++]}const Ow=()=>be.getLogger("esri.symbols.cim.effects.EffectTaperedPolygon");var wu;let tWe=(wu=class{static local(){return wu.instance===null&&(wu.instance=new wu),wu.instance}execute(e,i,r,s,n){return new iWe(e,i,r,s,n)}},wu.instance=null,wu),iWe=class extends B1{constructor(e,i,r,s,n){super(e,!1,!0),this._slopeS=0,this._slopeC=1,this._lastTangent1=new ii(NaN,NaN),this._lastWidth=0,this._tileKey=null,this._halfFromWidth=Math.abs(i.fromWidth!==void 0?i.fromWidth:0)*r*.5,this._halfToWidth=Math.abs(i.toWidth!==void 0?i.toWidth:1)*r*.5,this._originalLength=(i.length!==void 0?i.length:0)*r,this._length=0,this._tileKey=s,this._geometryEngine=n}processPath(e){var S,E;if(e.totalSize<=0)return null;if(this._halfFromWidth<=0&&this._halfToWidth<=0){const C=Ii.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.prevPoint();)C.pushXY(e.x,e.y);for(e.seekPathStart();e.nextPoint();)C.pushXY(e.x,e.y);return C}const i=[];e.seekPathStart();let r=0,s=0;for(;e.nextPoint();)i.push([e.x-r,e.y-s]),r=e.x,s=e.y;let n=(S=this._geometryEngine)==null?void 0:S.simplify(We.WebMercator,{paths:[i]});n||this._tileKey!=null||(n={paths:[i]});const o=Hr(n)?n.rings:cn(n)?n.paths:null;if(!o)return Ow().error(new te("mapview-bad-resource","Unable to process geometry")),null;const a=new o8,l=new o8;let c=0;for(const C of o){r=C[0][0],s=C[0][1];for(let M=1;M<C.length;M++){const P=r+C[M][0],D=s+C[M][1];c+=Math.sqrt((P-r)*(P-r)+(D-s)*(D-s)),r=P,s=D}}if(this._originalLength===0||this._originalLength>c){this._length=c;const C=(this._halfToWidth-this._halfFromWidth)/this._length;if(Math.abs(C)<1){const M=C*C;this._slopeC=Math.sqrt(1/(1+M)),this._slopeS=Math.sqrt(M/(1+M)),C<0&&(this._slopeS=-this._slopeS)}else this._slopeC=this._slopeS=.7071}else this._length=this._originalLength,this._slopeC=1,this._slopeS=0;let h=0;const y=[];for(const C of o){const M=a8.create(C),P=a8.create(C);this._setFromOffset(P,a,l);let D=P.next(),F=M;for(;D&&F;)h=this._setOffset(F,D,h,a,l),F=M.next(),D=P.next();F=M,F&&this._setToOffset(F,h,a,l);const U=a.getGeometry(),G=l.getGeometry(),Q=[];for(const W of U)Q.push(...W);for(let W=G.length-1;W>=0;W--){const X=G[W];for(let K=X.length-1;K>=0;K--)Q.push(X[K])}y.push(Q)}const g={rings:y};Y2e(g);let _=(E=this._geometryEngine)==null?void 0:E.simplify(We.WebMercator,g);if(!_){if(this._tileKey!=null)return null;_=g}return Ii.fromJSONCIM(_)}_setFromOffset(e,i,r){const s=this._halfFromWidth,n=new ii(e.xEnd-e.xStart,e.yEnd-e.yStart);n.normalize(),n.scale(s),i.beginPath([e.xStart-n.y,e.yStart+n.x]),r.beginPath([e.xStart+n.y,e.yStart-n.x])}_setToOffset(e,i,r,s){let n;n=(i+=Math.sqrt((e.xEnd-e.xStart)*(e.xEnd-e.xStart)+(e.yEnd-e.yStart)*(e.yEnd-e.yStart)))>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*i/this._length;const o=new ii(e.xEnd-e.xStart,e.yEnd-e.yStart);o.normalize(),o.scale(n),r.lineTo([e.xEnd-o.y,e.yEnd+o.x]),s.lineTo([e.xEnd+o.y,e.yEnd-o.x])}_setOffset(e,i,r,s,n){const o=Math.sqrt((e.xEnd-e.xStart)*(e.xEnd-e.xStart)+(e.yEnd-e.yStart)*(e.yEnd-e.yStart));let a;a=r+o>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*(r+o)/this._length,r+=o;const l=new ii(e.xEnd,e.yEnd),c=new ii(e.xEnd-e.xStart,e.yEnd-e.yStart);c.normalize();const h=new ii(i.xEnd-i.xStart,i.yEnd-i.yStart);h.normalize();const y=c.x*h.y-c.y*h.x;let g;g=Math.abs(y)===0?new ii(h.x,h.y):new ii((h.x-c.x)/y,(h.y-c.y)/y);const _=s.getPointCount(),S=n.getPointCount();c.leftPerpendicular(),h.leftPerpendicular();const E=c.x*h.x+c.y*h.y;if(E>.99){const C=new ii((c.x+h.x)*a/2,(c.y+h.y)*a/2),M=C.clone();M.rotate(this._slopeC,this._slopeS),s.lineTo([l.x+M.x,l.y+M.y]);const P=C.clone();P.rotateReverse(this._slopeC,this._slopeS),n.lineTo([l.x-P.x,l.y-P.y])}else{if(y<0){const U=g.clone().scale(-a);U.rotateReverse(this._slopeC,this._slopeS);const G=n.getXY(S-1);G||Ow().error(new te("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=ii.add(l,U),W=ii.sub(Q,ii.fromArray(G));if(c.x*W.y-c.y*W.x>0){const X=new ii(-c.x*a,-c.y*a);X.rotateReverse(this._slopeC,this._slopeS);const K=new ii(-h.x*a,-h.y*a);K.rotateReverse(this._slopeC,this._slopeS),n.lineTo([l.x+X.x,l.y+X.y]),n.lineTo([l.x,l.y]),n.lineTo([l.x+K.x,l.y+K.y])}else n.lineTo([l.x+U.x,l.y+U.y])}else{const U=g.clone().scale(a);U.rotate(this._slopeC,this._slopeS);const G=s.getXY(_-1);G||Ow().error(new te("mapview-bad-resource","Unable to process geometry, index out of scope"));const Q=ii.add(l,U),W=ii.sub(Q,ii.fromArray(G));if(c.x*W.y-c.y*W.x>0){const X=c.clone().scale(a);X.rotate(this._slopeC,this._slopeS);const K=h.clone().scale(a);K.rotate(this._slopeC,this._slopeS),s.lineTo([l.x+X.x,l.y+X.y]),s.lineTo([l.x,l.y]),s.lineTo([l.x+K.x,l.y+K.y])}else s.lineTo([l.x+U.x,l.y+U.y])}const C=Math.acos(E);let M=1;if(a>.25){const U=2*Math.acos(1-.25/a);U<C&&(M=Math.round(C/U))}const P=Math.cos(C/M),D=Math.sin(C/M),F=c.clone();if(y<0){F.rotate(this._slopeC,this._slopeS);const U=s.getXY(_-1);U||Ow().error(new te("mapview-bad-resource","Unable to process geometry, index out of scope"));const G=ii.add(l,F.clone().scale(this._lastWidth)),Q=ii.sub(G,ii.fromArray(U)),W=c.x*Q.y-c.y*Q.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&W>0){const X=new ii(e.xStart,e.yStart),K=this._lastTangent1.clone().scale(this._lastWidth);K.rotate(this._slopeC,this._slopeS);const de=c.clone().scale(this._lastWidth);de.rotate(this._slopeC,this._slopeS),s.lineTo([X.x+K.x,X.y+K.y]),s.lineTo([X.x,X.y]),s.lineTo([X.x+de.x,X.y+de.y])}}else{F.scale(-1).rotateReverse(this._slopeC,this._slopeS);const U=n.getXY(S-1);U||Ow().error(new te("mapview-bad-resource","Unable to process geometry, index out of scope"));const G=ii.add(l,F.clone().scale(this._lastWidth)),Q=ii.sub(G,ii.fromArray(U)),W=c.x*Q.y-c.y*Q.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&W>0){const X=new ii(e.xStart,e.yStart),K=this._lastTangent1.clone().scale(-this._lastWidth);K.rotateReverse(this._slopeC,this._slopeS);const de=c.clone().scale(-this._lastWidth);de.rotateReverse(this._slopeC,this._slopeS),n.lineTo([X.x+K.x,X.y+K.y]),n.lineTo([X.x,X.y]),n.lineTo([X.x+de.x,X.y+de.y])}}F.scale(a);for(let U=0;U<=M;U++)y<0?(s.lineTo([l.x+F.x,l.y+F.y]),F.rotateReverse(P,D)):(n.lineTo([l.x+F.x,l.y+F.y]),F.rotate(P,D))}return this._lastTangent1.setCoords(c.x,c.y),this._lastWidth=a,r}};var _u;let rWe=(_u=class{static local(){return _u.instance===null&&(_u.instance=new _u),_u.instance}execute(e,i,r,s,n){return new sWe(e,i,r)}},_u.instance=null,_u),sWe=class{constructor(e,i,r){this._inputGeometries=e,this._height=(i.amplitude!==void 0?i.amplitude:2)*r,this._period=(i.period!==void 0?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new PP,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new LP,this._walker.updateTolerance(r)}next(){let e=this._inputGeometries.next();for(;e;){if(this._height===0||this._period===0)return e;const i=this._processGeom(e);if(i)return i;e=this._inputGeometries.next()}return null}_processGeom(e){const i=Ii.createEmptyOptimizedCIM(e.geometryType);for(;e.nextPath();){i.startPath();const r=e.pathLength();if(this._walker.init(e,this._pattern))switch(this._style){case Kg.Sinus:default:this._constructCurve(i,r,!1);break;case Kg.Square:this._constructSquare(i,r);break;case Kg.Triangle:this._constructTriangle(i,r);break;case Kg.Random:this._constructCurve(i,r,!0)}else for(;e.nextPoint();)i.pushXY(e.x,e.y)}return i}_constructCurve(e,i,r){let s=Math.round(i/this._period);s===0&&(s=1);const n=s*16+1,o=i/s,a=this._period/16,l=1/n,c=2*Math.PI*i/o,h=2*Math.PI*Math.random(),y=2*Math.PI*Math.random(),g=2*Math.PI*Math.random(),_=.75-Math.random()/2,S=.75-Math.random()/2,E=new Yh;this._walker.curPointAndAngle(E),e.pushPoint(E.pt);let C=0;for(;;){if(!this._walker.nextPointAndAngle(a,E)){e.pushPoint(this._walker.getPathEnd());break}{const M=C;let P;if(C+=l,r){const D=this._height/2*(1+.3*Math.sin(_*c*M+h));P=D*Math.sin(c*M+y),P+=D*Math.sin(S*c*M+g),P/=2}else P=.5*this._height*Math.sin(.5*c*M);e.pushXY(E.pt[0]-P*E.sa,E.pt[1]+P*E.ca)}}}_constructSquare(e,i){Math.round(i/this._period);let r=!0;for(;;){let s=!1;if(this._walker.curPositionIsValid()){const n=new Yh;this._walker.curPointAndAngle(n);const o=new Yh;if(this._walker.nextPointAndAngle(this._period,o)){const a=new Yh;this._walker.nextPointAndAngle(this._period,a)&&(r?(e.pushPoint(n.pt),r=!1):e.pushPoint(n.pt),e.pushXY(n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),s=!0)}}if(!s){e.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(e,i){Math.round(i/this._period);let r=!0;for(;;){let s=!1;if(this._walker.curPositionIsValid()){const n=new Yh;this._walker.curPointAndAngle(n);const o=new Yh;if(this._walker.nextPointAndAngle(this._period/2,o)){const a=new Yh;this._walker.nextPointAndAngle(this._period,a)&&(this._walker.nextPosition(this._period/2)&&(r?(e.pushPoint(n.pt),r=!1):e.pushPoint(n.pt),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca)),s=!0)}}if(!s){e.pushPoint(this._walker.getPathEnd());break}}}};var Su;let nWe=(Su=class{static local(){return Su.instance===null&&(Su.instance=new Su),Su.instance}execute(e,i,r,s,n){return new oWe(e,i,r)}},Su.instance=null,Su),oWe=class extends Kx{constructor(e,i,r){super(e),this._geometryWalker=new LP,this._geometryWalker.updateTolerance(r),this._angleToLine=i.angleToLine??!0,this._offset=(i.offset?i.offset:0)*r,this._originalEndings=i.endings,this._offsetAtEnd=(i.customEndingOffset?i.customEndingOffset:0)*r,this._position=-(i.offsetAlongLine?i.offsetAlongLine:0)*r,this._pattern=new PP,this._pattern.init(i.placementTemplate,!1),this._pattern.scale(r),this._endings=this._originalEndings}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath)i=this._pattern.nextValue();else{this._originalEndings===zl.WithFullGap&&this.isClosed?this._endings=zl.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;let s,n=!0;switch(this._endings){case zl.NoConstraint:s=-this._position,s=this._adjustPosition(s),n=!1;break;case zl.WithHalfGap:default:s=-this._pattern.lastValue()/2;break;case zl.WithFullGap:s=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case zl.WithMarkers:s=0;break;case zl.Custom:s=-this._position,s=this._adjustPosition(s),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,n))return null;this._pattern.reset();let o=0;for(;s>o;)s-=o,o=this._pattern.nextValue();o-=s,i=o,this.iteratePath=!0}const r=new Yh;return this._geometryWalker.nextPointAndAngle(i,r)?this._endings===zl.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===zl.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca),this._angleToLine&&this.internalPlacement.setRotateCS(r.ca,r.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(e){let i=e/this._pattern.length();return i-=Math.floor(i),i*this._pattern.length()}};var xu;let aWe=(xu=class{static local(){return xu.instance===null&&(xu.instance=new xu),xu.instance}execute(e,i,r,s,n){return new lWe(e,i,r)}},xu.instance=null,xu),lWe=class extends Kx{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new jd,this._placePerPart=i.placePerPart??!1,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._type=i.extremityPlacement,this._position=i.offsetAlongLine!==void 0?i.offsetAlongLine*r:0,this._beginProcessed=!1}processMultiPath(e){return this._placePerPart?super.processMultiPath(e):this.processPath(e)}processPath(e){let i;switch(this._type){case ku.Both:default:this._beginProcessed?(i=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iterateMultiPath=!1,this.iteratePath=!1):(i=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iterateMultiPath=!0,this.iteratePath=!0);break;case ku.JustBegin:i=this._atExtremities(e,this._position,!0);break;case ku.JustEnd:i=this._atExtremities(e,this._position,!1);case ku.None:}return i}_atExtremities(e,i,r){if(this._placePerPart||(r?e.seekPath(0):e.seekPath(e.totalSize-1)),r||e.seekPathEnd(),r?e.nextPoint():e.prevPoint()){let s=0,[n,o]=[0,0],[a,l]=[e.x,e.y];const c=[0,0];for(;r?e.nextPoint():e.prevPoint();){n=a,o=l,a=e.x,l=e.y;const h=this._curveHelper.getLength(n,o,a,l);if(s+h>i){const y=(i-s)/h,[g,_]=this._curveHelper.getAngleCS(c,n,o,a,l,y),S=this._curveHelper.getCoord2D(n,o,a,l,y);return this.internalPlacement.setTranslate(S[0]-this._offset*_,S[1]+this._offset*g),this._angleToLine&&this.internalPlacement.setRotateCS(-g,-_),this.internalPlacement}s+=h}}return null}};var $u;let cWe=($u=class{static local(){return $u.instance===null&&($u.instance=new $u),$u.instance}execute(e,i,r,s,n){return new uWe(e,i,r)}},$u.instance=null,$u),uWe=class extends Kx{constructor(e,i,r){super(e),this._walker=new LP,this._walker.updateTolerance(r),this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._beginGap=i.beginPosition!==void 0?i.beginPosition*r:0,this._endGap=i.endPosition!==void 0?i.endPosition*r:0,this._flipFirst=i.flipFirst===void 0||i.flipFirst,this._pattern=new PP,this._pattern.init(i.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath){const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=e.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l,this.iteratePath=!0}const r=new Yh;if(!this._walker.nextPointAndAngle(i,r,Yp.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca);const s=this._isFirst&&this._flipFirst;let n,o;return this._angleToLine?(n=r.ca,o=r.sa):(n=1,o=0),s&&(n=-n,o=-o),this.internalPlacement.setRotateCS(n,o),this._isFirst=!1,this._posCount--,this._posCount===0&&(this.iteratePath=!1),this.internalPlacement}};const Dw=512,hWe=10,gc=24,e3=1e-6;var Eu;let dWe=(Eu=class{static local(){return Eu.instance===null&&(Eu.instance=new Eu),Eu.instance}execute(e,i,r,s,n){return new pWe(e,i,r,s,n)}},Eu.instance=null,Eu),pWe=class sm{constructor(e,i,r,s,n){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(i.stepX??16)*r,this._stepY=Math.abs(i.stepY??16)*r,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,this._stepX!==0&&this._stepY!==0){if(this._gridType=i.gridType??M_.Fixed,this._gridType===M_.Random){const o=i.seed??13,a=1;this._randomLCG=new q8(o*a),this._randomness=(i.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=i.gridAngle??0,this._shiftOddRows=i.shiftOddRows??!1,this._offsetX=(i.offsetX??0)*r,this._offsetY=(i.offsetY??0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,s!=null){const[o,a,l,c]=s.split("/"),h=parseFloat(o),y=parseFloat(a),g=parseFloat(l),_=parseFloat(c);this._graphicOriginX=-(_*2**h+g)*Dw,this._graphicOriginY=y*Dw,this._testInsidePolygon=!0}this._internalPlacement=new z1,this._calculateMinMax(e),this._geometryCursor=e}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!sm._randValues){sm._randValues=[];for(let e=0;e<gc;e++)for(let i=0;i<gc;i++)sm._randValues.push(this._randomLCG.getFloat()),sm._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(e){let i,r,s,n,o,a,l,c,h,y,g,_,S,E;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,l=c=S=g=Number.MAX_VALUE,h=y=E=_=-Number.MAX_VALUE;const C=this._cosAngle!==1;for(e.reset();e.nextPath();)for(;e.nextPoint();)a=e.x,o=e.y,i=a-this._graphicOriginX-this._offsetX,r=o-this._graphicOriginY-this._offsetY,C?(s=this._cosAngle*i-this._sinAngle*r,n=this._sinAngle*i+this._cosAngle*r):(s=i,n=r),l=Math.min(l,s),h=Math.max(h,s),c=Math.min(c,n),y=Math.max(y,n),g=Math.min(g,o),_=Math.max(_,o),S=Math.min(S,a),E=Math.max(E,a);g=g!==Number.MAX_VALUE?g:-512-this._stepY,_=_!==-Number.MAX_VALUE?_:this._stepY,S=S!==Number.MAX_VALUE?S:-this._stepX,E=E!==-Number.MAX_VALUE?E:Dw+this._stepX;const M=_-g,P=E-S;if(this._verticalSubdivision=M>=P,this._polygonMin=this._verticalSubdivision?g:S,this._testInsidePolygon){let D=0-this._graphicOriginX-this._offsetX-this._stepX,F=Dw-this._graphicOriginX-this._offsetX+this._stepX,U=-512-this._graphicOriginY-this._offsetY-this._stepY,G=0-this._graphicOriginY-this._offsetY+this._stepY;if(C){const Q=[[D,U],[D,G],[F,U],[F,G]];D=U=Number.MAX_VALUE,F=G=-Number.MAX_VALUE;for(const W of Q){const X=this._cosAngle*W[0]-this._sinAngle*W[1],K=this._sinAngle*W[0]+this._cosAngle*W[1];D=Math.min(D,X),F=Math.max(F,X),U=Math.min(U,K),G=Math.max(G,K)}}l=l!==Number.MAX_VALUE?Math.max(l,D):D,c=c!==Number.MAX_VALUE?Math.max(c,U):U,h=h!==-Number.MAX_VALUE?Math.min(h,F):F,y=y!==-Number.MAX_VALUE?Math.min(y,G):G}this._xMin=Math.round(l/this._stepX),this._xMax=Math.round(h/this._stepX),this._yMin=Math.round(c/this._stepY),this._yMax=Math.round(y/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(e,S,E,g,_)}_buildAccelerationMap(e,i,r,s,n){e.reset();const o=new Map,a=this._verticalSubdivision,l=a?n-s:r-i;let c=Math.ceil(l/hWe);if(c<=1)return;const h=Math.floor(l/c);let y,g,_,S,E,C,M,P,D,F,U;for(c++,this._delta=h,a?(D=-512-2*this._stepY,F=2*this._stepY,U=s):(D=-2*this._stepX,F=Dw+2*this._stepX,U=i);e.nextPath();)if(!(e.pathSize<2)&&e.nextPoint())for(y=e.x,g=e.y;e.nextPoint();y=_,g=S){if(_=e.x,S=e.y,a){if(g===S||g<D&&S<D||g>F&&S>F)continue;E=Math.min(g,S),C=Math.max(g,S)}else{if(y===_||y<D&&_<D||y>F&&_>F)continue;E=Math.min(y,_),C=Math.max(y,_)}for(;E<C;)M=Math.floor((E-U)/h),LZ(M,y,g,_,S,o),E+=h;P=Math.floor((C-U)/h),P>M&&LZ(P,y,g,_,S,o)}this._accelerationMap=o}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let e=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);const i=this._currentY*this._stepY+this._offsetY;let r,s;if(this._currentX++,this._gridType===M_.Random){const n=(this._currentX%gc+gc)%gc,o=(this._currentY%gc+gc)%gc;r=this._graphicOriginX+e+this._stepX*this._randomness*(.5-sm._randValues[o*gc+n])*2/3,s=this._graphicOriginY+i+this._stepY*this._randomness*(.5-sm._randValues[o*gc+n+1])*2/3}else r=this._graphicOriginX+this._cosAngle*e+this._sinAngle*i,s=this._graphicOriginY-this._sinAngle*e+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,s,this._geometryCursor))return this._internalPlacement.setTranslate(r,s),this._internalPlacement}}_isInsidePolygon(e,i,r){if(this._accelerationMap==null)return fWe(e,i,r);e+=e3,i+=e3;const s=this._verticalSubdivision,n=s?i:e,o=Math.floor((n-this._polygonMin)/this._delta),a=this._accelerationMap.get(o);if(!a)return!1;let l,c,h,y=0;for(const g of a){if(l=g[0],c=g[1],s){if(l[1]>i==c[1]>i)continue;h=(c[0]-l[0])*(i-l[1])-(c[1]-l[1])*(e-l[0])}else{if(l[0]>e==c[0]>e)continue;h=(c[1]-l[1])*(e-l[0])-(c[0]-l[0])*(i-l[1])}h>0?y++:y--}return y!==0}};function fWe(t,e,i){let r,s,n,o,a=0;for(t+=e3,e+=e3,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,s=i.y;i.nextPoint();r=n,s=o)n=i.x,o=i.y,s>e!=o>e&&((n-r)*(e-s)-(o-s)*(t-r)>0?a++:a--);return a!==0}function LZ(t,e,i,r,s,n){let o=n.get(t);o||(o=[],n.set(t,o)),o.push([[e,i],[r,s]])}const AWe=.001;var Iu;let mWe=(Iu=class{static local(){return Iu.instance===null&&(Iu.instance=new Iu),Iu.instance}execute(e,i,r,s,n){return new yWe(e,i,r)}},Iu.instance=null,Iu),yWe=class extends Kx{constructor(e,i,r){super(e),this._curveHelper=new jd,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._relativeTo=i.relativeTo,this._position=i.startPointOffset!==void 0?i.startPointOffset*r:0,this._epsilon=AWe*r}processPath(e){const i=this._position;if(this._relativeTo===wm.SegmentMidpoint){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint()){let[s,n]=[e.x,e.y],[o,a]=[0,0];const l=[0,0];for(;e.nextPoint();){o=e.x,a=e.y;const c=this._curveHelper.getLength(s,n,o,a);if(c<this._epsilon){s=o,n=a;continue}const h=.5+this._position/c,[y,g]=this._curveHelper.getAngleCS(l,s,n,o,a,h),_=this._curveHelper.getCoord2D(s,n,o,a,h);return this.internalPlacement.setTranslate(_[0]-this._offset*g,_[1]+this._offset*y),this._angleToLine&&this.internalPlacement.setRotateCS(y,g),this.internalPlacement}}return this.iteratePath=!1,null}const r=this._relativeTo===wm.LineEnd;return this.onLine(e,i,r)}onLine(e,i,r){let s,n=!1;switch(this._relativeTo){case wm.LineMiddle:default:e.seekPathStart(),s=e.pathLength()/2+i;break;case wm.LineBeginning:s=i;break;case wm.LineEnd:s=i,n=!0}r?e.seekPathEnd():e.seekPathStart();let o=0;if(r?e.prevPoint():e.nextPoint()){let[a,l]=[e.x,e.y],[c,h]=[0,0];const y=[0,0];for(;r?e.prevPoint():e.nextPoint();){c=e.x,h=e.y;const g=this._curveHelper.getLength(a,l,c,h);if(o+g>s){const _=(s-o)/g,[S,E]=this._curveHelper.getAngleCS(y,a,l,c,h,_),C=this._curveHelper.getCoord2D(a,l,c,h,_),M=n?-this._offset:this._offset;return this.internalPlacement.setTranslate(C[0]-M*E,C[1]+M*S),this._angleToLine&&(n?this.internalPlacement.setRotateCS(-S,-E):this.internalPlacement.setRotateCS(S,E)),this.internalPlacement}a=c,l=h,o+=g}}return null}};const gWe=1e-15;var Cu;let vWe=(Cu=class{static local(){return Cu.instance===null&&(Cu.instance=new Cu),Cu.instance}execute(e,i,r,s,n){return new bWe(e,i,r)}},Cu.instance=null,Cu),bWe=class extends Kx{constructor(e,i,r){super(e),this._curveHelper=new jd,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._endPoints=i.placeOnEndPoints===void 0||i.placeOnEndPoints,this._controlPoints=i.placeOnControlPoints===void 0||i.placeOnControlPoints,this._regularVertices=i.placeOnRegularVertices===void 0||i.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(e){if(this.iteratePath||(this._preparePath(e),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const i=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(i[2]);let r=i[0],s=i[1];if(this._offset!==0){const n=Math.cos(i[2]),o=Math.sin(i[2]);r-=this._offset*o,s+=this._offset*n}return this.internalPlacement.setTranslate(r,s),this._tagIterator++,this.internalPlacement}_preparePath(e){this._tags.length=0,this._tagIterator=0,e.seekPathStart();const i=e.isClosed();let r=0,s=!1,n=0,o=0;if(e.seekPathStart(),e.nextPoint()){let a=e.x,l=e.y,c=e.getControlPoint(),h=!0,y=e.nextPoint();for(;y;){const g=e.x,_=e.y,S=e.getControlPoint();(this._angleToLine||this._offset!==0)&&(n=this._curveHelper.getAngle(a,l,g,_,0)),h?(h=!1,i?(r=n,s=c):(this._endPoints||this._controlPoints&&c)&&this._tags.push([a,l,n])):c?this._controlPoints&&this._tags.push([a,l,FE(o,n)]):this._regularVertices&&this._tags.push([a,l,FE(o,n)]),(this._angleToLine||this._offset!==0)&&(o=this._curveHelper.getAngle(a,l,g,_,1)),y=e.nextPoint(),y||(i?S||s?this._controlPoints&&this._tags.push([g,_,FE(o,r)]):this._regularVertices&&this._tags.push([g,_,FE(o,r)]):(this._endPoints||this._controlPoints&&S)&&this._tags.push([g,_,o])),a=g,l=_,c=S}}this._tagIterator=0}};function FE(t,e){const i=Math.PI;for(;Math.abs(e-t)>i+2*gWe;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}const wWe=100*222045e-21;function _We(t){if(t.totalSize===0)return null;const e=Tx(t);if(!e)return null;const i=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*wWe;let r=0,s=0;t.reset();for(let X=0;t.nextPath();X++){const K=t.getCurrentRingArea();K>s&&(s=K,r=X)}if(t.seekPath(r),t.pathSize===0)return null;t.seekPathStart();const n=rre(t);if(Math.abs(s)<=2*i*i)return[(n[0]+n[2])/2,(n[1]+n[3])/2];t.seekPathStart();const o=r_e(t,Qr());if(o===null)return null;if(t.totalPoints<4)return o;const a=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],l=[NaN,NaN,NaN,NaN],c=[NaN,NaN,NaN,NaN];let h=!1,y=Nw(o,t,!0);y.distance===0&&(h=!0,a[0][0]=o[0],a[0][1]=o[1],y=Nw(o,t,!1)),l[0]=y.distance,c[0]=0;const g=[NaN,NaN];let _=!1,S=.25,E=-1,C=NaN;do if(C=NaN,a[1]=DO(t,NO(n[0],n[2],S),i,e),isNaN(a[1][0])||isNaN(a[1][1])||(y=Nw(a[1],t,!1),C=y.distance),!isNaN(C)&&C>i&&DC(a[1],t))_=!0,l[1]=C,c[1]=nm(a[1],o);else if(!isNaN(C)&&C>E&&(E=C,g[0]=a[1][0],g[1]=a[1][1]),S-=.01,S<.1){if(!(E>=0))break;_=!0,l[1]=E,a[1][0]=g[0],a[1][1]=g[1],c[1]=nm(a[1],o)}while(!_);_=!1,S=.5,E=-1;let M=.01,P=1;do if(C=NaN,a[2]=DO(t,NO(n[0],n[2],S),i,e),isNaN(a[2][0])||isNaN(a[2][1])||(y=Nw(a[2],t,!1),C=y.distance),!isNaN(C)&&C>i&&DC(a[2],t))_=!0,l[2]=C,c[2]=nm(a[2],o);else if(!isNaN(C)&&C>E)E=C,g[0]=a[2][0],g[1]=a[2][1];else if(C>E&&(E=C,g[0]=a[2][0],g[1]=a[2][1]),S=.5+M*P,M+=.01,P*=-1,S<.3||S>.7){if(!(E>=0))break;_=!0,l[2]=E,a[2][0]=g[0],a[2][1]=g[1],c[2]=nm(a[2],o)}while(!_);_=!1,S=.75,E=-1;do if(C=NaN,a[3]=DO(t,NO(n[0],n[2],S),i,e),isNaN(a[3][0])||isNaN(a[3][1])||(y=Nw(a[3],t,!1),C=y.distance),!isNaN(C)&&C>i&&DC(a[3],t))_=!0,l[3]=C,c[3]=nm(a[3],o);else if(C>E&&(E=C,g[0]=a[3][0],g[1]=a[3][1]),S+=.01,S>.9){if(!(E>=0))break;_=!0,l[3]=E,a[3][0]=g[0],a[3][1]=g[1],c[3]=nm(a[3],o)}while(!_);const D=[0,1,2,3],F=h?0:1;let U;for(let X=F;X<4;X++)for(let K=F;K<3;K++){const de=c[K],ye=c[K+1];$We(de,ye)>0&&(U=D[K],D[K]=D[K+1],D[K+1]=U,c[K]=ye,c[K+1]=de)}let G=F,Q=0,W=0;for(let X=F;X<4;X++){switch(X){case 0:W=2*l[D[X]];break;case 1:W=1.66666666*l[D[X]];break;case 2:W=1.33333333*l[D[X]];break;case 3:W=l[D[X]]}W>Q&&(Q=W,G=D[X])}return a[G]}function DC(t,e){let i,r,s,n,o=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(i=e.x,r=e.y;e.nextPoint();i=s,r=n)s=e.x,n=e.y,r>t[1]!=n>t[1]&&((s-i)*(t[1]-r)-(n-r)*(t[0]-i)>0?o++:o--);return o!==0}function Nw(t,e,i){if(i&&DC(t,e))return{coord:t,distance:0};let r=1/0,s=0,n=0,o=[0,0],a=[0,0];const l=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(o[0]=e.x,o[1]=e.y;e.nextPoint();o=a){a=[e.x,e.y],Vie(l,t,o,a);const c=nm(t,l);c<r&&(r=c,s=l[0],n=l[1])}return{coord:[s,n],distance:Math.sqrt(r)}}function DO(t,e,i,r){const s=[e,0];let n=1/0,o=1/0,a=!1,l=!1;const c=[[e,r[1]-1],[e,r[3]+1]],h=[0,0],y=[0,0],g=[0,0],_=[[0,0],[0,0]],S=Qr();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(_[0][0]=t.x,_[0][1]=t.y;t.nextPoint();_[0][0]=_[1][0],_[0][1]=_[1][1]){if(_[1][0]=t.x,_[1][1]=t.y,SWe(S,_)===null||(y[0]=c[0][0],y[1]=c[0][1],g[0]=c[1][0],g[1]=c[1][1],xWe(S,y,g)===0)||!RT(c[0],c[1],_[0],_[1],h))continue;const E=h[1];n>o?E<n&&(n=E,a=!0):E<o&&(o=E,l=!0)}return a&&l?s[1]=(n+o)/2:s[0]=s[1]=NaN,s}function SWe(t,e){if(e.length<2)return null;t||(t=Qr());const[i,r]=e[0],[s,n]=e[1];return t[0]=Math.min(i,s),t[1]=Math.min(r,n),t[2]=Math.max(i,s),t[3]=Math.max(r,n),t}const zE=1,BE=4,RZ=3,OZ=12;function xWe(t,e,i){let r=vc(e,t),s=vc(i,t);const n=t[0],o=t[1],a=t[2],l=t[3];if(r&s)return 0;if(!(r|s))return 4;const c=(r?1:0)|(s?2:0);do{const h=i[0]-e[0],y=i[1]-e[1];if(h>y)r&RZ?(r&zE?(e[1]+=y*(n-e[0])/h,e[0]=n):(e[1]+=y*(a-e[0])/h,e[0]=a),r=vc(e,t)):s&RZ?(s&zE?(i[1]+=y*(n-i[0])/h,i[0]=n):(i[1]+=y*(a-i[0])/h,i[0]=a),s=vc(i,t)):r?(r&BE?(e[0]+=h*(o-e[1])/y,e[1]=o):(e[0]+=h*(l-e[1])/y,e[1]=l),r=vc(e,t)):(s&BE?(i[0]+=h*(o-i[1])/y,i[1]=o):(i[0]+=h*(l-i[1])/y,i[1]=l),s=vc(i,t));else if(r&OZ?(r&BE?(e[0]+=h*(o-e[1])/y,e[1]=o):(e[0]+=h*(l-e[1])/y,e[1]=l),r=vc(e,t)):s&OZ?(s&BE?(i[0]+=h*(o-i[1])/y,i[1]=o):(i[0]+=h*(l-i[1])/y,i[1]=l),s=vc(i,t)):r?(r&zE?(e[1]+=y*(n-e[0])/h,e[0]=n):(e[1]+=y*(a-e[0])/h,e[0]=a),r=vc(e,t)):(s&zE?(i[1]+=y*(n-i[0])/h,i[0]=n):(i[1]+=y*(a-i[0])/h,i[0]=a),s=vc(i,t)),r&s)return 0}while(r|s);return c}function vc(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function NO(t,e,i){return t+(e-t)*i}function nm(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function $We(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const i=isNaN(t),r=isNaN(e);return i<r?-1:i>r?1:0}var Tu;let EWe=(Tu=class{static local(){return Tu.instance===null&&(Tu.instance=new Tu),Tu.instance}execute(e,i,r,s,n){return new IWe(e,i,r)}},Tu.instance=null,Tu),IWe=class{constructor(e,i,r){this._geometryCursor=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0,this._method=i.method!==void 0?i.method:ev.OnPolygon,this._placementPerPart=i.placePerPart!==void 0&&i.placePerPart,this._internalPlacement=new z1}next(){const e=this._geometryCursor;if(!e)return null;if(!this._placementPerPart)return this._geometryCursor=null,this._polygonCenter(e);for(;e.nextPath();)if(!(e.getCurrentRingArea()<0))return this._polygonCenter(e.getCurrentPath());return this._geometryCursor=null,null}_polygonCenter(e){let i=!1;switch(this._method){case ev.CenterOfMass:{const r=a_e(e);r&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}break;case ev.BoundingBoxCenter:{const r=Tx(e);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),i=!0)}break;case ev.OnPolygon:default:{const r=_We(e);r!==null&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}}return i?this._internalPlacement:null}};function CWe(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return hqe.local();case"CIMGeometricEffectArrow":return Aqe.local();case"CIMGeometricEffectBuffer":return yqe.local();case"CIMGeometricEffectControlMeasureLine":return vqe.local();case"CIMGeometricEffectCut":return wqe.local();case"CIMGeometricEffectDashes":return Sqe.local();case"CIMGeometricEffectDonut":return $qe.local();case"CIMGeometricEffectJog":return Pqe.local();case"CIMGeometricEffectMove":return Rqe.local();case"CIMGeometricEffectOffset":return Nqe.local();case"CIMGeometricEffectRadial":return zqe.local();case"CIMGeometricEffectReverse":return jqe.local();case"CIMGeometricEffectRotate":return Gqe.local();case"CIMGeometricEffectScale":return qqe.local();case"CIMGeometricEffectSuppress":return Qqe.local();case"CIMGeometricEffectTaperedPolygon":return tWe.local();case"CIMGeometricEffectWave":return rWe.local();case"CIMGeometricEffectEnclosingPolygon":return Iqe.local()}return null}function TWe(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return nWe.local();case"CIMMarkerPlacementAtExtremities":return aWe.local();case"CIMMarkerPlacementAtRatioPositions":return cWe.local();case"CIMMarkerPlacementInsidePolygon":return dWe.local();case"CIMMarkerPlacementOnLine":return mWe.local();case"CIMMarkerPlacementOnVertices":return vWe.local();case"CIMMarkerPlacementPolygonCenter":return EWe.local()}return null}function FO(t){const e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");return e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0),i}function ph(t,e=0){if(e===0)return t;const i=Math.cos(e),r=Math.sin(e),[s,n]=t;return[s*i+n*-r,s*r+n*i]}function wde(t,e,i=0){const r=Bn(t,0,LWe);for(let s=0;s<4;s++)e[i+s]=Math.floor(256*RWe(r*kWe[s]))}function MWe(t,e=0){let i=0;for(let r=0;r<4;r++)i+=t[e+r]*PWe[r];return i}const kWe=[1,256,65536,16777216],PWe=[1/256,1/65536,1/16777216,1/4294967296],LWe=MWe(new Uint8ClampedArray([255,255,255,255]));function RWe(t){return t-Math.floor(t)}const OWe=15.5,zO=4,DWe=64,wft=1024,_ft={outlineWidth:.75,referenceWidth:.75,cap:Zr.CIMSolidStroke.capstyle,join:Zr.CIMSolidStroke.joinstyle,miterLimit:Zr.CIMSolidStroke.miterlimit},DZ=()=>be.getLogger("esri.symbols.cim.rasterizingUtils"),NWe=32,FWe=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function Sft(t,e,i){const r=e.style,s=C1e(Math.ceil(i)),n=FWe(r)?8*s:16*s,o=2*s;t.width=n,t.height=n;const a=t.getContext("2d");a.strokeStyle="#ffffff",a.lineWidth=s,a.beginPath(),r!=="vertical"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSVertical"||(a.moveTo(n/2,-o),a.lineTo(n/2,n+o)),r!=="horizontal"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSHorizontal"||(a.moveTo(-o,n/2),a.lineTo(n+o,n/2)),r!=="backward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"&&r!=="esriSFSBackwardDiagonal"||(a.moveTo(-o,-o),a.lineTo(n+o,n+o),a.moveTo(n-o,-o),a.lineTo(n+o,o),a.moveTo(-o,n-o),a.lineTo(o,n+o)),r!=="forward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSForwardDiagonal"&&r!=="esriSFSDiagonalCross"||(a.moveTo(n+o,-o),a.lineTo(-o,n+o),a.moveTo(o,-o),a.lineTo(-o,o),a.moveTo(n+o,n-o),a.lineTo(n-o,n+o)),a.stroke();const l=a.getImageData(0,0,t.width,t.height),c=new Uint8Array(l.data);let h;for(let y=0;y<c.length;y+=4)h=c[y+3]/255,c[y]=c[y]*h,c[y+1]=c[y+1]*h,c[y+2]=c[y+2]*h;return[c,t.width,t.height,s]}function xft(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce(((y,g)=>y+g),0),i=Math.round(e*zO),r=1,s=new Float32Array(i*r);let n=0,o=0,a=.5,l=!0;for(const y of t){for(n=o,o+=y*zO;a<=o;){const g=a-.5,_=Math.min(Math.abs(a-n),Math.abs(a-o));s[g]=l?-_:_,a++}l=!l}const c=s.length,h=new Uint8Array(4*c);for(let y=0;y<c;++y){const g=s[y]/zO;wde(g/DWe*.5+.5,h,4*y)}return[h,i,r]}function $ft(t,e){t==null&&(t=[]);const i=e==="Butt",r=e==="Square",s=!i&&!r;t.length%2==1&&(t=[...t,...t]);const n=OWe,o=2*n;let a=0;for(const M of t)a+=M;const l=Math.round(a*n),c=new Float32Array(l*o),h=.5*n;let y=0,g=0,_=.5,S=!0;for(const M of t){for(y=g,g+=M*n;_<=g;){let P=.5;for(;P<o;){const D=(P-.5)*l+_-.5,F=s?(P-n)*(P-n):Math.abs(P-n);c[D]=S?i?Math.max(Math.max(y+h-_,F),Math.max(_-g+h,F)):F:s?Math.min((_-y)*(_-y)+F,(_-g)*(_-g)+F):r?Math.min(Math.max(_-y,F),Math.max(g-_,F)):Math.min(Math.max(_-y+h,F),Math.max(g+h-_,F)),P++}_++}S=!S}const E=c.length,C=new Uint8Array(4*E);for(let M=0;M<E;++M){const P=(s?Math.sqrt(c[M]):c[M])/n;wde(P,C,4*M)}return[C,l,o]}function Eft(t,e){const{colorRamp:i,gradientType:r}=e,s=i.type==="CIMFixedColorRamp",n=e.interval||Zr.CIMGradientFill.interval;let o=hj(i);return s&&(o=_de(o,n)),r==="Discrete"||s?BWe(t,o,n):zWe(t,o)}let BO;function jE(t,e){const{colorRamp:i,gradientType:r}=e,s=hj(i),n=i.type==="CIMFixedColorRamp";if(r==="Continuous"&&!n)return NC(t,s);const o=e.interval??Zr.CIMGradientFill.interval;if(n)return NC(t,_de(s,o));const a=[];BO??(BO=document.createElement("canvas")),dj(BO,s,o,1,0);const l=BO.getContext("2d").getImageData(0,0,o,1).data;for(let c=0,h=0;c<o;c++,h=4*c){const y=[l[h+0],l[h+1],l[h+2],l[h+3]];a.push({offset:c/o,color:y}),a.push({offset:(c+1)/o,color:y})}return NC(t,a)}function hj(t){const e=[];switch(t.type){case"CIMPolarContinuousColorRamp":case"CIMLinearContinuousColorRamp":{t.type==="CIMPolarContinuousColorRamp"&&DZ().warnOnce("CIMPolarContinuousColorRamp is currently unsupported. Falling back to CIMLinearContinuousColorRamp.");const i=t;e.push({offset:0,color:[i.fromColor[0],i.fromColor[1],i.fromColor[2],i.fromColor[3]/255]}),e.push({offset:1,color:[i.toColor[0],i.toColor[1],i.toColor[2],i.toColor[3]/255]});break}case"CIMFixedColorRamp":{const i=t,r=1/(i.colors.length-1);let s=0;for(const n of i.colors)e.push({offset:s,color:[n[0],n[1],n[2],n[3]/255]}),s+=r;break}case"CIMMultipartColorRamp":{const i=t,r=i.weights.reduce(((n,o)=>n+o),0);let s=0;for(let n=0;n<i.colorRamps.length;n++){const o=i.colorRamps[n],a=i.weights[n],l=hj(o);for(const c of l)e.push({offset:(s+c.offset*a)/r,color:c.color});s+=a}break}default:DZ().error(`Color ramp "${t.type}" currently unsupported.`)}return e}function _de(t,e){const i=[],r=(t.length-1)/(e-1);for(let s=0;s<e;s++){const n=t[Math.round(s*r)].color;i.push({offset:s/e,color:n}),i.push({offset:(s+1)/e,color:n})}return i}function zWe(t,e){return dj(t,e,NWe,1,hce),Sde(t)}function BWe(t,e,i){return dj(t,e,i,1,hce),Sde(t)}function NC(t,e,i=0){for(const{offset:r,color:s}of e)t.addColorStop(Math.min(Math.max(r,i),1-i),`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${s[3]})`)}function dj(t,e,i,r,s){const n=i+2*s;t.width=n,t.height=r;const o=(s+1)/n,a=t.getContext("2d",{willReadFrequently:!0});if(e.length>0){const l=a.createLinearGradient(0,0,n,r);NC(l,e,o),a.fillStyle=l}else a.fillStyle="rgba(128, 128, 128, 1)";a.fillRect(0,0,n,r)}function Sde(t){const{width:e,height:i}=t,r=t.getContext("2d").getImageData(0,0,e,i),s=new Uint8Array(r.data);for(let n=0;n<s.length;n+=4){const o=s[n+3]/255;s[n]*=o,s[n+1]*=o,s[n+2]*=o}return[s,e,i]}function jWe(t){var s,n,o,a;const e=((n=(s=t[0])==null?void 0:s[0])==null?void 0:n[0])??0,i=((a=(o=t[0])==null?void 0:o[0])==null?void 0:a[1])??0,r={ymin:i,xmin:e,ymax:i,xmax:e,width:0,height:0};for(let l=0;l<t.length;l++){const c=t[l];for(let h=0;h<c.length;h++){const y=c[h][0],g=c[h][1];y<r.xmin&&(r.xmin=y),y>r.xmax&&(r.xmax=y),g<r.ymin&&(r.ymin=g),g>r.ymax&&(r.ymax=g)}}return r.width=Math.abs(r.xmax-r.xmin),r.height=Math.abs(r.ymax-r.ymin),r}function t3(t,e){const i=jWe(t),r=i.width===0?1:i.width,s=i.height===0?1:i.height,n=[];for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){let h=Math.round(a[c][0]-i.xmin),y=Math.round(a[c][1]-i.ymin);if(h=e.xmin+h*e.width/r,y=e.ymin+y*e.height/s,isNaN(h)||isNaN(y))throw new Error("Scaled shape has NaN values");l.push([h,y])}n.push(l)}return n}function NZ(t,e,i){const r=[];for(let s=0;s<t.length;s++){const n=t[s],o=[];for(let a=0;a<n.length;a++){const l=n[a][0]+e,c=n[a][1]+i;if(isNaN(l)||isNaN(c))throw new Error("Scaled shape has NaN values");o.push([l,c])}r.push(o)}return r}let UWe=class xde{constructor(e=0,i=0,r=0,s=0){this.x=e,this.y=i,this.width=r,this.height=s}static fromExtent(e){return new xde(e.xmin,-e.ymax,e.xmax-e.xmin,e.ymax-e.ymin)}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}};function VWe(t){return`rgb(${t.slice(0,3).toString()})`}function UE(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}let $de=class{constructor(e){e&&(this._textRasterizationCanvas=e)}rasterizeText(e,i){var xe,ee;this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,s=r.getContext("2d",{willReadFrequently:!0});Fw(s,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const{decoration:n,weight:o}=i.font;this._lineThroughWidthOffset=n&&n==="line-through"?.1*this._lineHeight:0;const a=i.backgroundColor!=null||i.borderLine!=null,l=a?ISe:0,c=this._computeTextWidth(s,i)+2*l,h=this._lineHeight*this._textLines.length+2*l;if(r.width=c+2*this._lineThroughWidthOffset,r.height=h,r.width===0||r.height===0)return r.width=r.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:r};this._renderedLineHeight=Math.round(this._lineHeight),this._renderedOutlineSize=(i.outline.size||0)*i.pixelRatio,this._renderedHaloSize=(i.halo.size||0)*i.pixelRatio,this._renderedWidth=c,this._renderedHeight=h,this._lineThroughWidthOffset*=i.pixelRatio;const y=(i.outline&&i.outline.color)??[0,0,0,0],g=i.color??[0,0,0,0],_=i.halo&&i.halo.color?i.halo.color:[0,0,0,0];this._fillStyle=UE(g),this._outlineStyle=UE(y),this._haloStyle=VWe(_);const S=this._renderedLineHeight,E=this._renderedOutlineSize,C=this._renderedHaloSize;s.save(),s.clearRect(0,0,r.width,r.height),Fw(s,i);const M=l*i.pixelRatio,P=GWe(s.textAlign,this._renderedWidth-2*M,this._renderedHaloSize+this._renderedOutlineSize)+M,D=C+E+M,F=C>0;let U=this._lineThroughWidthOffset,G=0;if(a){s.save();const le=i.backgroundColor??[0,0,0,0],Te=((xe=i.borderLine)==null?void 0:xe.color)??[0,0,0,0],ke=2*(((ee=i.borderLine)==null?void 0:ee.size)??0);s.fillStyle=UE(le),s.strokeStyle=UE(Te),s.lineWidth=ke,s.fillRect(0,0,r.width,r.height),s.strokeRect(0,0,r.width,r.height),s.restore()}F&&this._renderHalo(s,P,D,U,G,i),E>0&&this._renderOutline(s,P,D,U,G,i),G+=D,U+=P;for(const le of this._textLines)F?(s.globalCompositeOperation="destination-out",s.fillStyle="rgb(0, 0, 0)",s.fillText(le,U,G),s.globalCompositeOperation="source-over",s.fillStyle=this._fillStyle,s.fillText(le,U,G)):(s.fillStyle=this._fillStyle,s.fillText(le,U,G)),n&&n!=="none"&&this._renderDecoration(s,U,G,n,o),G+=S;s.restore();const Q=this._renderedWidth+2*this._lineThroughWidthOffset,W=this._renderedHeight,X=s.getImageData(0,0,Q,W),K=new Uint8Array(X.data);if(i.premultiplyColors){let le;for(let Te=0;Te<K.length;Te+=4)le=K[Te+3]/255,K[Te]=K[Te]*le,K[Te+1]=K[Te+1]*le,K[Te+2]=K[Te+2]*le}let de,ye;switch(i.horizontalAlignment){case"left":de=-.5;break;case"right":de=.5;break;default:de=0}switch(i.verticalAlignment){case"bottom":ye=-.5;break;case"top":ye=.5;break;case"baseline":ye=-1/6;break;default:ye=0}return{size:[Q,W],image:new Uint32Array(K.buffer),sdf:!1,simplePattern:!1,anchorX:de,anchorY:ye,canvas:r}}_renderHalo(e,i,r,s,n,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,h=c.getContext("2d");h.clearRect(0,0,a,l),Fw(h,o);const{decoration:y,weight:g}=o.font;h.fillStyle=this._haloStyle,h.strokeStyle=this._haloStyle,h.lineJoin="round",this._renderOutlineNative(h,i,r,y,g,this._renderedHaloSize+this._renderedOutlineSize),e.globalAlpha=this._parameters.halo.color[3],e.drawImage(c,0,0,a,l,s,n,a,l),e.globalAlpha=1}_renderOutline(e,i,r,s,n,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,h=c.getContext("2d");h.clearRect(0,0,a,l),Fw(h,o);const{decoration:y,weight:g}=o.font;h.fillStyle=this._outlineStyle,h.strokeStyle=this._outlineStyle,h.lineJoin="round",this._renderOutlineNative(h,i,r,y,g,this._renderedOutlineSize),e.globalAlpha=this._parameters.outline.color[3],e.drawImage(c,0,0,a,l,s,n,a,l),e.globalAlpha=1}_renderOutlineNative(e,i,r,s,n,o){const a=this._renderedLineHeight;for(const l of this._textLines){const c=2*o,h=5,y=.1;for(let g=0;g<h;g++){const _=(1-(h-1)*y+g*y)*c;e.lineWidth=_,e.strokeText(l,i,r),s&&s!=="none"&&this._renderDecoration(e,i,r,s,n,_)}r+=a}}computeTextSize(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,s=r.getContext("2d");Fw(s,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const n=this._computeTextWidth(s,i),o=this._lineHeight*this._textLines.length;return r.width=n,r.height=o,[n*i.pixelRatio,o*i.pixelRatio]}_computeTextWidth(e,i){let r=0;for(const n of this._textLines)r=Math.max(r,e.measureText(n).width);const s=i.font;return(s.style==="italic"||s.style==="oblique"||typeof s.weight=="string"&&(s.weight==="bold"||s.weight==="bolder")||typeof s.weight=="number"&&s.weight>600)&&(r+=.3*e.measureText("w").width),r+=2*ri(this._parameters.halo.size),Math.round(r)}_computeLineHeightBase(){return 1.275*this._parameters.size}_computeLineHeight(){let e=this._computeLineHeightBase();const i=this._parameters.font.decoration;return i&&i==="underline"&&(e*=1.3),Math.round(e+2*ri(this._parameters.halo.size))}_renderDecoration(e,i,r,s,n,o){let a=.9*this._lineHeight;const l=n==="bold"?.06:n==="bolder"?.09:.04;switch(e.textAlign){case"center":i-=this._renderedWidth/2;break;case"right":i-=this._renderedWidth}const c=e.textBaseline;if(s==="underline")switch(a=.9*this._computeLineHeightBase(),c){case"top":r+=a;break;case"middle":r+=a/2}else if(s==="line-through")switch(c){case"top":r+=a/1.5;break;case"middle":r+=a/3}const h=o?1.5*o:Math.ceil(a*l);e.save(),e.beginPath(),e.strokeStyle=e.fillStyle,e.lineWidth=h,e.moveTo(i-this._lineThroughWidthOffset,r),e.lineTo(i+this._renderedWidth+2*this._lineThroughWidthOffset,r),e.stroke(),e.restore()}};function Fw(t,e){const i=Math.max(e.size,.5),r=e.font,s=`${r.style} ${r.weight} ${ri(i).toFixed(1)}px ${r.family}, sans-serif`;let n;switch(t.font=s,t.textBaseline="top",e.horizontalAlignment){case"left":default:n="left";break;case"right":n="right";break;case"center":n="center"}t.textAlign=n}function GWe(t,e,i){return t==="center"?.5*e:t==="right"?e-i:i}function Ede(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function HWe(){const t=Ede("svg");return t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),t}function qWe(t){return t!=null&&document.body.removeChild(t),null}const WWe=()=>be.getLogger("esri.views.2d.engine.webgl.alignmentUtils");var iu,tl;function QWe(t){if(!t)return iu.Center;switch(t){case"Left":case"left":return iu.Left;case"Right":case"right":return iu.Right;case"Justify":return WWe().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),iu.Center;case"Center":case"center":return iu.Center}}function JWe(t){if(!t)return tl.Center;switch(t){case"Top":case"top":return tl.Top;case"Center":case"middle":return tl.Center;case"Baseline":case"baseline":return tl.Baseline;case"Bottom":case"bottom":return tl.Bottom}}function Cft(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${t}`),["center","middle"]}}function Tft(t){switch(t){case iu.Right:case"right":return-1;case iu.Center:case"center":return 0;case iu.Left:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function Mft(t){switch(t){case tl.Top:case"top":return 1;case tl.Center:case"middle":return 0;case tl.Bottom:case tl.Baseline:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}(function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"})(iu||(iu={})),(function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"})(tl||(tl={}));let ZWe=class{constructor(e=0,i=0,r=0,s=0){this.x=e,this.y=i,this.width=r,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}},i_=class c8{constructor(e,i,r,s){this.transformedX=0,this.transformedY=0,this.center=P0(e,i),this.centerT=OS(),this.halfWidth=r/2,this.halfHeight=s/2,this.width=r,this.height=s}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new c8(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e,i=4){const r=Math.abs(e.centerT[0]-this.centerT[0]),s=Math.abs(e.centerT[1]-this.centerT[1]),n=(e.halfWidth+this.halfWidth+i)/r,o=(e.halfHeight+this.halfHeight+i)/s,a=Math.min(n,o);return Math.log2(a)}extend(e){const i=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),s=Math.max(this.xmax,e.xmax)-i,n=Math.max(this.ymax,e.ymax)-r,o=i+s/2,a=r+n/2;this.width=s,this.height=n,this.halfWidth=s/2,this.halfHeight=n/2,this.x=o,this.y=a}static deserialize(e){const i=e.readF32(),r=e.readF32(),s=e.readInt32(),n=e.readInt32();return new c8(i,r,s,n)}};const Ide=22,Cde=4,YWe=Ide+Cde,XWe=Ide-6,FZ=3,KWe=Math.PI/180,up=8,eQe=1.5;let Tde=class{constructor(e,i,r,s){this._rotationT=Id(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const n=r.rect,o=new Float32Array(8);e*=s,i*=s;const a=r.code?n.width*s:r.metrics.width,l=r.code?n.height*s:r.metrics.height;this.width=a,this.height=l,o[0]=e,o[1]=i,o[2]=e+a,o[3]=i,o[4]=e,o[5]=i+l,o[6]=e+a,o[7]=i+l,this._data=o,this._setTextureCoords(n),this._scale=s,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+a,i+l)}get mosaic(){return this._mosaic}set angle(e){this._angle=e,hP(this._rotationT,-e),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:e,width:i}=this._mosaic.metrics,r=i*this._scale,s=Math.abs(e)*this._scale,n=new Float32Array(8);n[0]=this.x,n[1]=this.y,n[2]=this.x+r,n[3]=this.y,n[4]=this.x,n[5]=this.y+s,n[6]=this.x+r,n[7]=this.y+s;const o=eu(Id(),this._rotationT,this._transform);Mle(n,n,o);let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let E=0;E<4;E++){const C=n[2*E],M=n[2*E+1];a=Math.min(a,C),l=Math.min(l,M),c=Math.max(c,C),h=Math.max(h,M)}const y=c-a,g=h-l,_=a+y/2,S=l+g/2;this._bounds=new i_(_,S,y,g)}return this._bounds}setTransform(e){this._transform=e,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const e=eu(Id(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],Ln(this._offsets.topLeft,this._offsets.topLeft,e),Ln(this._offsets.topRight,this._offsets.topRight,e),Ln(this._offsets.bottomLeft,this._offsets.bottomLeft,e),Ln(this._offsets.bottomRight,this._offsets.bottomRight,e)}_setTextureCoords({x:e,y:i,width:r,height:s}){this._texcoords={topLeft:[e,i],topRight:[e+r,i],bottomLeft:[e,i+s],bottomRight:[e+r,i+s]}}};const tQe=(t,e)=>({code:0,page:0,sdf:!0,rect:new ZWe(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});function zw(t,e){return t.forEach((i=>Ln(i,i,e))),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}let iQe=class{constructor(e,i,r){this._rotation=0,this._decorate(e,i,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=r.angle!==0,this._transform=this._createGlyphTransform(this.bounds,r),this._borderLineSizePx=r.borderLineSizePx,(r.borderLineSizePx||r.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const s of e)s.setTransform(this._transform)}setRotation(e){if(e===0&&this._rotation===0)return;this._rotation=e;const i=this._transform,r=hP(Id(),e);eu(i,r,i);for(const s of this.glyphs)s.setTransform(this._transform)}_decorate(e,i,r){if(!r.decoration||r.decoration==="none"||!e.length)return;const s=r.scale,n=r.decoration==="underline"?YWe:XWe,o=e[0].textureBinding;for(const a of i){const l=a.startX*s,c=a.startY*s,h=(a.width+a.glyphWidthEnd)*s;e.push(new Tde(l,c+n*s,tQe(h,o),1))}}shapeBackground(e){const i=this._borderLineSizePx||0,r=(eQe+i)/2,s=this._borderLineSizePx?r:0,{xmin:n,ymin:o,xmax:a,ymax:l,x:c,y:h,width:y,height:g}=this.bounds,_=[n-up,o-up],S=[a+up,o-up],E=[n-up,l+up],C=[a+up,l+up],M=zw([[_[0]-r,_[1]-r],[S[0]+r,S[1]-r],[_[0]+s,_[1]+s],[S[0]-s,S[1]+s]],e),P=zw([[E[0]+s,E[1]-s],[C[0]-s,C[1]-s],[E[0]-r,E[1]+r],[C[0]+r,C[1]+r]],e),D=zw([[_[0]-r,_[1]-r],[_[0]+s,_[1]+s],[E[0]-r,E[1]+r],[E[0]+s,E[1]-s]],e),F=zw([[S[0]-s,S[1]+s],[S[0]+r,S[1]-r],[C[0]-s,C[1]-s],[C[0]+r,C[1]+r]],e),U={main:zw([_,S,E,C],e),top:M,bot:P,left:D,right:F};return[new i_(c,h,y+2*r,g+2*r),U]}get boundsT(){const e=this.bounds,i=Vr(OS(),e.x,e.y);if(Ln(i,i,this._transform),this._hasRotation){const r=Math.max(e.width,e.height);return new i_(i[0],i[1],r,r)}return new i_(i[0],i[1],e.width,e.height)}_createBounds(e){let i=1/0,r=1/0,s=0,n=0;for(const l of e)i=Math.min(i,l.xTopLeft),r=Math.min(r,l.yTopLeft),s=Math.max(s,l.xBottomRight),n=Math.max(n,l.yBottomRight);const o=s-i,a=n-r;return new i_(i+o/2,r+a/2,o,a)}_createGlyphTransform(e,i){const r=KWe*i.angle,s=Id(),n=OS();return Du(s,s,Vr(n,i.xOffset,-i.yOffset)),i.useCIMAngleBehavior?jf(s,s,r):(Du(s,s,Vr(n,e.x,e.y)),jf(s,s,r),Du(s,s,Vr(n,-e.x,-e.y))),s}},VE=class{constructor(e,i,r,s,n,o){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=s,this.yMin=n,this.yMax=o}};const u8=t=>t===10,zZ=t=>t===32;function rQe(t,e,i){const r=new Array,s=1/i.scale,n=i.maxLineWidth*s,o=e?t.length-1:0,a=e?-1:t.length,l=e?-1:1;let c=o,h=0,y=0,g=c,_=g,S=0,E=1/0,C=0;for(;c!==a;){const{code:P,metrics:D}=t[c],F=Math.abs(D.top);if(u8(P)||zZ(P)||(E=Math.min(E,F),C=Math.max(C,F+D.height)),u8(P))c!==o&&(r.push(new VE(t,g,c-l,h,E===1/0?0:E,C)),E=1/0,C=0),h=0,g=c+l,_=c+l,y=0;else if(zZ(P))_=c+l,y=0,S=D.advance,h+=D.advance;else if(h>n){if(_!==g){const U=_-2*l;h-=S,r.push(new VE(t,g,U,h-y,E,C)),E=1/0,C=0,g=_,h=y}else r.push(new VE(t,g,c-l,h,E,C)),E=1/0,C=0,g=c,_=c,h=0;h+=D.advance,y+=D.advance}else h+=D.advance,y+=D.advance;c+=l}const M=new VE(t,g,c-l,h,E,C);return M.start>=0&&M.end<t.length&&r.push(M),r}function sQe(t,e){let i=0;for(let n=0;n<t.length;n++){const{width:o}=t[n];i=Math.max(o,i)}const r=e.decoration==="underline"?Cde:0,s=t[0].yMin;return{x:0,y:s,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+r-s,width:i}}function Mde(t,e){const i=e.scale,r=new Array,{glyphs:s,isRightToLeft:n}=t,o=rQe(s,n,e),a=o.length?sQe(o,e):{y:0,height:0},l=QWe(e.horizontalAlignment),c=JWe(e.verticalAlignment),h=c===tl.Baseline?1:0,y=h?0:c-1,g=(1-h)*-a.y+y*(a.height/2)+-22*(h?1:0);for(let _=0;_<o.length;_++){const{start:S,end:E,width:C}=o[_];let M=-1*(l+1)*(C/2)-FZ;const P=(t.isRightToLeft?o.length-1-_:_)*e.lineHeight+g-FZ;o[_].startX=M,o[_].startY=P;for(let D=S;D<=E;D++){const F=s[D];if(u8(F.code))continue;const U=new Tde(M+F.metrics.left,P-F.metrics.top,F,i);M+=F.metrics.advance,r.push(U)}}return new iQe(r,o,e)}const Oft=50;function Dft(t){if(!t)return null;const{xmin:e,ymin:i,xmax:r,ymax:s,spatialReference:n}=t;return new zi({rings:[[[e,i],[e,s],[r,s],[r,i],[e,i]]],spatialReference:n})}function kde(t){return Ei(Math.round(ri(t)))}function Pde(t){const e=Ei(w8e),i=Ei(_8e);return Math.max(e,Math.min(t||i,i))}const Em=Math.PI/180,Lde=.5,r_=()=>be.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");class Ws{constructor(e){this._t=e}static createIdentity(){return new Ws([1,0,0,0,1,0])}clone(){const e=this._t;return new Ws(e.slice())}transform(e){const i=this._t;return[i[0]*e[0]+i[1]*e[1]+i[2],i[3]*e[0]+i[4]*e[1]+i[5]]}static createScale(e,i){return new Ws([e,0,0,0,i,0])}scale(e,i){const r=this._t;return r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=i,r[4]*=i,r[5]*=i,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(e,i){return new Ws([0,0,e,0,0,i])}translate(e,i){const r=this._t;return r[2]+=e,r[5]+=i,this}static createRotate(e){const i=Math.cos(e),r=Math.sin(e);return new Ws([i,-r,0,r,i,0])}rotate(e){return Ws.multiply(this,Ws.createRotate(e),this)}angle(){const e=this._t[0],i=this._t[3],r=Math.sqrt(e*e+i*i);return[e/r,i/r]}static multiply(e,i,r){const s=e._t,n=i._t,o=s[0]*n[0]+s[3]*n[1],a=s[1]*n[0]+s[4]*n[1],l=s[2]*n[0]+s[5]*n[1]+n[2],c=s[0]*n[3]+s[3]*n[4],h=s[1]*n[3]+s[4]*n[4],y=s[2]*n[3]+s[5]*n[4]+n[5],g=r._t;return g[0]=o,g[1]=a,g[2]=l,g[3]=c,g[4]=h,g[5]=y,r}invert(){const e=this._t;let i=e[0]*e[4]-e[1]*e[3];if(i===0)return new Ws([0,0,0,0,0,0]);i=1/i;const r=(e[1]*e[5]-e[2]*e[4])*i,s=(e[2]*e[3]-e[0]*e[5])*i,n=e[4]*i,o=-e[1]*i,a=-e[3]*i,l=e[0]*i;return new Ws([n,o,r,a,l,s])}}class pj{constructor(e,i){this._resourceManager=e,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new N0(z1,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||Ws.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}setTransform(e,i){this._transfos=[e||Ws.createIdentity()],this._sizeTransfos=[i||(e?e.scaleRatio():1)]}setGeomUnitsPerPoint(e){this._geomUnitsPerPoint=e}transformPt(e){return this._transfos[this._transfos.length-1].transform(e)}transformSize(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(e){return this._transfos[this._transfos.length-1].invert().transform(e)}reverseTransformSize(e){return e/this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformScalar(e){return e/this._transfos[this._transfos.length-1].scaleRatio()}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}prevGeomUnitsPerPoint(){return this._transfos.length>2?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(e,i){const r=i?e.scaleRatio():1;Ws.multiply(e,this.back(),e),this._transfos.push(e),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(e,i,r){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(e,i);break;case"CIMTextSymbol":this.drawTextSymbol(e,i,r)}}drawMultiLayerSymbol(e,i){if(!e||!i)return;const r=e.symbolLayers;if(!r)return;const s=e.effects;if(s&&s.length>0){const n=this.executeEffects(s,i);if(n){let o=n.next();for(;o;)this.drawSymbolLayers(r,o.asJSON()),o=n.next()}}else this.drawSymbolLayers(r,i)}executeEffects(e,i){const r=this._resourceManager.geometryEngine;let s=new cqe(Ii.fromJSONCIM(i));for(const n of e){const o=CWe(n);o&&(s=o.execute(s,n,this.geomUnitsPerPoint(),null,r))}return s}drawSymbolLayers(e,i){let r=e.length;for(;r--;){const s=e[r];if(!s||s.enable===!1)continue;const n=s.effects;if(n&&n.length>0){const o=this.executeEffects(n,i);if(o){let a=null;for(;(a=o.next())&&(this.drawSymbolLayer(s,a.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(s,i);if(this._earlyReturn)return}}drawSymbolLayer(e,i){switch(e.type){case"CIMSolidFill":this.drawSolidFill(i,e.color,e.path);break;case"CIMHatchFill":this.drawHatchFill(i,e);break;case"CIMPictureFill":this.drawPictureFill(i,e);break;case"CIMGradientFill":this.drawGradientFill(i,e);break;case"CIMSolidStroke":this.drawSolidStroke(i,e.color,e.width,e.capStyle,e.joinStyle,e.miterLimit,e.path);break;case"CIMPictureStroke":this.drawPictureStroke(i,e);break;case"CIMGradientStroke":this.drawGradientStroke(i,e);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(e,i)}}drawHatchFill(e,i){const r=oQe(i,e,this.geomUnitsPerPoint());r&&(this.pushClipPath(e),this.drawMultiLayerSymbol(i.lineSymbol,r),this.popClipPath())}drawPictureFill(e,i){}drawGradientFill(e,i){}drawPictureStroke(e,i){}drawGradientStroke(e,i){}drawMarkerLayer(e,i){const r=e.markerPlacement;if(r){const s=TWe(r);if(s){const n=r.type==="CIMMarkerPlacementInsidePolygon"||r.type==="CIMMarkerPlacementPolygonCenter"&&r.clipAtBoundary;n&&this.pushClipPath(i);const o=s.execute(Ii.fromJSONCIM(i),r,this.geomUnitsPerPoint(),null,this._resourceManager.geometryEngine);if(o){let a=null;for(;(a=o.next())&&(this.drawMarker(e,a),!this._earlyReturn););}n&&this.popClipPath()}}else{const s=this._placementPool.acquire();if(gS(i))s.tx=i.x,s.ty=i.y,this.drawMarker(e,s);else if(Hr(i)){const n=Wie(i);n&&([s.tx,s.ty]=n,this.drawMarker(e,s))}else if(cn(i)){for(const n of i.paths)for(const o of n)if(s.tx=o[0],s.ty=o[1],this.drawMarker(e,s),this._earlyReturn)break}else for(const n of i.points)if(s.tx=n[0],s.ty=n[1],this.drawMarker(e,s),this._earlyReturn)break;this._placementPool.release(s)}}drawMarker(e,i){switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(e,i);break;case"CIMVectorMarker":this.drawVectorMarker(e,i)}}drawPictureMarker(e,i){if(!e)return;const r=this._resourceManager.getResource(e.url),s=Tt(e.size,Zr.CIMPictureMarker.size);if(r==null||s<=0)return;const n=r.width,o=r.height;if(!n||!o)return;const a=n/o,l=Tt(e.scaleX,1),c=Ws.createIdentity(),h=e.anchorPoint;if(h){let C=h.x,M=h.y;e.anchorPointUnits!=="Absolute"&&(C*=s*a*l,M*=s),c.translate(-C,-M)}let y=Tt(e.rotation);e.rotateClockwise&&(y=-y),this._mapRotation&&(y+=this._mapRotation),y&&c.rotate(y*Em);let g=Tt(e.offsetX),_=Tt(e.offsetY);if(g||_){if(this._mapRotation){const C=Em*this._mapRotation,M=Math.cos(C),P=Math.sin(C),D=g*P+_*M;g=g*M-_*P,_=D}c.translate(g,_)}const S=this.geomUnitsPerPoint();S!==1&&c.scale(S,S);const E=i.getAngle();E&&c.rotate(E),c.translate(i.tx,i.ty),this.push(c,!1),this.drawImage(e,s),this.pop()}drawVectorMarker(e,i){if(!e)return;const r=e.markerGraphics;if(!r)return;const s=Tt(e.size,Zr.CIMVectorMarker.size),n=e.frame,o=n?n.ymax-n.ymin:0,a=s&&o?s/o:1,l=Ws.createIdentity();n&&l.translate(.5*-(n.xmax+n.xmin),.5*-(n.ymax+n.ymin));const c=e.anchorPoint;if(c){let E=c.x,C=c.y;e.anchorPointUnits!=="Absolute"?n&&(E*=n.xmax-n.xmin,C*=n.ymax-n.ymin):(E/=a,C/=a),l.translate(-E,-C)}a!==1&&l.scale(a,a);let h=Tt(e.rotation);e.rotateClockwise&&(h=-h),this._mapRotation&&(h+=this._mapRotation),h&&l.rotate(h*Em);let y=Tt(e.offsetX),g=Tt(e.offsetY);if(y||g){if(this._mapRotation){const E=Em*this._mapRotation,C=Math.cos(E),M=Math.sin(E),P=y*M+g*C;y=y*C-g*M,g=P}l.translate(y,g)}const _=this.geomUnitsPerPoint();_!==1&&l.scale(_,_);const S=i.getAngle();S&&l.rotate(S),l.translate(i.tx,i.ty),this.push(l,e.scaleSymbolsProportionally);for(const E of r){E!=null&&E.symbol&&E.geometry||r_().error("Invalid marker graphic",E);let C=E.textString;if(typeof C=="number"&&(C=C.toString()),this.drawSymbol(E.symbol,E.geometry,C),this._earlyReturn)break}this.pop()}drawTextSymbol(e,i,r){if(!e||!gS(i)||Tt(e.height,Zr.CIMTextSymbol.height)<=0)return;const s=Ws.createIdentity();let n=Tt(e.angle);n=-n,n&&s.rotate(n*Em);const o=Tt(e.offsetX),a=Tt(e.offsetY);(o||a)&&s.translate(o,a);const l=this.geomUnitsPerPoint();l!==1&&s.scale(l,l),s.translate(i.x,i.y),this.push(s,!1),this.drawText(e,r),this.pop()}}class nQe extends pj{constructor(e,i){super(e,i),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new UWe(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return u_e(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(e){if(e&&!(this._clipCount>0))if(Hr(e))this._processPath(e.rings,0);else if(cn(e))this._processPath(e.paths,0);else if(to(e)){const i=Xh(e);i&&this._processPath(i.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}drawSolidStroke(e,i,r){if(!e||this._clipCount>0||r==null||r<=0)return;const s=Math.max(.5*this.transformSize(Tt(r,Zr.CIMSolidStroke.width)),.5*Lde);if(Hr(e))this._processPath(e.rings,s);else if(cn(e))this._processPath(e.paths,s);else if(to(e)){const n=Xh(e);n&&this._processPath(n.rings,s)}else console.error("drawSolidStroke unexpected geometry type!")}drawMarkerLayer(e,i){Hr(i)&&e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._processPath(i.rings,0):super.drawMarkerLayer(e,i)}drawHatchFill(e,i){this.drawSolidFill(e)}drawPictureFill(e,i){this.drawSolidFill(e)}drawGradientFill(e,i){this.drawSolidFill(e)}drawPictureStroke(e,i){this.drawSolidStroke(e,null,i.width)}drawGradientStroke(e,i){this.drawSolidStroke(e,null,i.width)}pushClipPath(e){this.drawSolidFill(e),this._clipCount++}popClipPath(){this._clipCount--}drawImage(e,i){const{url:r}=e,s=Tt(e.scaleX,1);let n=s*i,o=i;const a=this._resourceManager.getResource(r);if(a!=null){const l=a.height/a.width;n=s*(i?l>1?i:i/l:a.width),o=i?l>1?i*l:i:a.height}this._merge(this.transformPt([-n/2,-o/2]),0),this._merge(this.transformPt([-n/2,o/2]),0),this._merge(this.transformPt([n/2,-o/2]),0),this._merge(this.transformPt([n/2,o/2]),0)}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new $de);const r=Dde(e);let[s,n]=this._textRasterizer.computeTextSize(i,r);s=Ei(s),n=Ei(n);const o=this.transformSize(1)*this.reverseTransformScalar(1);s*=o,n*=o;let a=0;switch(e.horizontalAlignment){case"Left":a=s/2;break;case"Right":a=-s/2}let l=0;switch(e.verticalAlignment){case"Bottom":l=n/2;break;case"Top":l=-n/2;break;case"Baseline":l=n/6}this._merge(this.transformPt([-s/2+a,-n/2+l]),0),this._merge(this.transformPt([-s/2+a,n/2+l]),0),this._merge(this.transformPt([s/2+a,-n/2+l]),0),this._merge(this.transformPt([s/2+a,n/2+l]),0)}_processPath(e,i){if(e)for(const r of e){const s=r?r.length:0;if(s>1){this._merge(this.transformPt(r[0]),i);for(let n=1;n<s;n++)this._merge(this.transformPt(r[n]),i)}}}_merge(e,i){e[0]-i<this._xmin&&(this._xmin=e[0]-i),e[0]+i>this._xmax&&(this._xmax=e[0]+i),e[1]-i<this._ymin&&(this._ymin=e[1]-i),e[1]+i>this._ymax&&(this._ymax=e[1]+i)}}class Nft extends pj{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null,this._svg=null,this._path=null,this._canvas=null}destroy(){this._svg=qWe(this._svg),this._path=null,this._canvas=null}hitTest(e,i,r,s,n,o){var c;const a=o*ri(1);this.setTransform(),this.setGeomUnitsPerPoint(a),this._searchPoint=[(e[0]+e[2])/2,(e[1]+e[3])/2],this._searchDistPoint=(e[2]-e[0])/2/a,this._textInfo=s;const l=i&&(i.type==="CIMPointSymbol"&&i.angleAlignment!=="Map"||i.type==="CIMTextSymbol");if(this._mapRotation=l?n:0,!ce("esri-mobile")){const h=Ei(m8e*window.devicePixelRatio),y=Ei(y8e);!(((i==null?void 0:i.type)==="CIMLineSymbol"||(i==null?void 0:i.type)==="CIMPolygonSymbol")&&((c=i.symbolLayers)!=null&&c.some(o3e)))&&(i==null?void 0:i.type)!=="CIMMeshSymbol"&&(g3e(i)??0)<y&&(this._searchDistPoint=h)}return this._earlyReturn=!1,this.drawSymbol(i,r),this._earlyReturn}executeEffects(e,i){var r;return((r=e.at(-1))==null?void 0:r.type)==="CIMGeometricEffectDashes"&&(e=e.slice(0,-1)),super.executeEffects(e,i)}drawSolidFill(e,i,r){r!=null?this._hittestSvgPath(e,r,!0):this._hitTestFill(e)}drawHatchFill(e,i){this._hitTestFill(e)}drawPictureFill(e,i){this._hitTestFill(e)}drawGradientFill(e,i){this._hitTestFill(e)}drawSolidStroke(e,i,r,s,n,o,a){a!=null?this._hittestSvgPath(e,a,!1,r):this._hitTestStroke(e,r)}drawPictureStroke(e,i){this._hitTestStroke(e,i.width)}drawGradientStroke(e,i){this._hitTestStroke(e,i.width)}drawMarkerLayer(e,i){e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._hitTestFill(i):super.drawMarkerLayer(e,i)}pushClipPath(e){}popClipPath(){}drawImage(e,i){const{url:r}=e,s=Tt(e.scaleX,1),n=this._resourceManager.getResource(r);if(n==null||n.height===0||i===0)return;const o=i*this.geomUnitsPerPoint(),a=o*s*(n.width/n.height),l=this.reverseTransformPt(this._searchPoint),c=this._searchDistPoint;Math.abs(l[0])<a/2+c&&Math.abs(l[1])<o/2+c&&(this._earlyReturn=!0)}drawText(e,i){var S;const r=this._textInfo;if(!r)return;const s=r.get(e);if(!s||!s.glyphMosaicItems.glyphs.length)return;const n=kde(Tt(e.height,Zr.CIMTextSymbol.height)),{lineGapType:o,lineGap:a}=e,l=o?Ode(o,Tt(a),n):0,c=((S=e.callout)==null?void 0:S.type)==="CIMBackgroundCallout",h=Mde(s.glyphMosaicItems,{scale:n/cce,angle:0,xOffset:0,yOffset:0,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,maxLineWidth:Pde(e.lineWidth),lineHeight:lce*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}),y=this.reverseTransformPt(this._searchPoint),g=y[0],_=y[1];for(const E of h.glyphs)if(g>E.xTopLeft&&g<E.xBottomRight&&_>-E.yBottomRight&&_<-E.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(e){let i=null;if(to(e)){const s=e;i=[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}else if(Hr(e))i=e.rings;else{if(!cn(e))return;i=e.paths}const r=this.reverseTransformPt(this._searchPoint);aQe(r,i)&&(this._earlyReturn=!0),!this._earlyReturn&&BZ(r,i,this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}_getSvgPath(){return this._svg!=null&&this._path!=null||(this._svg??(this._svg=HWe()),this._path??(this._path=Ede("path")),this._svg.appendChild(this._path)),this._path}_getCanvasContext(e,i){return this._canvas??(this._canvas=document.createElement("canvas")),this._canvas.width=e,this._canvas.height=i,this._canvas.getContext("2d",{willReadFrequently:!0})}_hittestSvgPath(e,i,r,s=0){const n=this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint(),o=this.reverseTransformPt(this._searchPoint),a=Qr();i7(a,e);const l={x:a[0],y:a[1],width:a[2]-a[0],height:a[3]-a[1]},c=this._getSvgPath();c.setAttribute("d",i);const h=c.getBBox();let y=Math.max(h.width/l.width,h.height/l.height),g=1;const _=2*n*y;_<1&&(g=2/_,y*=g,h.x*=g,h.y*=g,h.width*=g,h.height*=g);const S=1+s*y/2,E=this._getCanvasContext(h.width+2*S,h.height+2*S);E.setTransform(g,0,0,g,-h.x+S,-h.y+S);const C=new Path2D(i);r?E.fill(C):(E.lineWidth=s*(y/g),E.stroke(C));const M=(l.width*y-h.width)/2,P=(l.height*y-h.height)/2,D=Math.floor((o[0]-l.x-n)*y-M+S),F=Math.floor((l.height-(o[1]-l.y)-n)*y+P+S),U=Math.ceil(2*n*y),G=Math.ceil(2*n*y),Q=E.getImageData(D,F,U,G).data;for(let W=3;W<Q.length;W+=4)if(Q[W]>127.5)return void(this._earlyReturn=!0)}_hitTestStroke(e,i){let r=null;if(to(e)){const s=e;r=[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}else if(Hr(e))r=e.rings;else{if(!cn(e))return;r=e.paths}BZ(this.reverseTransformPt(this._searchPoint),r,Tt(i,Zr.CIMSolidStroke.width)*this.geomUnitsPerPoint()/2+this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}}class Rde extends pj{constructor(e,i,r,s){super(i,r),this._applyAdditionalRenderProps=s,this._colorSubstitutionHelper=new uqe,this._ctx=e}drawSolidFill(e,i){if(!e)return;if(Hr(e))this._buildPath(e.rings,!0);else if(cn(e))this._buildPath(e.paths,!0);else if(to(e))this._buildPath(Xh(e).rings,!0);else{if(!yv(e))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}const r=this._ctx;r.fillStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",r.fill("evenodd")}drawSolidStroke(e,i,r,s,n,o){if(!e||!i||r===0)return;if(Hr(e))this._buildPath(e.rings,!0);else if(cn(e))this._buildPath(e.paths,!1);else{if(!to(e))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(Xh(e).rings,!0)}const a=this._ctx;a.strokeStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",a.lineWidth=Math.max(this.transformSize(r),Lde),this._setCapStyle(s),this._setJoinStyle(n),a.miterLimit=o,a.stroke()}pushClipPath(e){if(this._ctx.save(),Hr(e))this._buildPath(e.rings,!0);else if(cn(e))this._buildPath(e.paths,!0);else{if(!to(e))return;this._buildPath(Xh(e).rings,!0)}this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(e,i){const{colorSubstitutions:r,url:s,tintColor:n}=e,o=Tt(e.scaleX,1),a=this._resourceManager.getResource(s);if(a==null)return;let l=i*(a.width/a.height),c=i;i||(l=a.width,c=a.height);const h=fy(s)||"src"in a&&fy(a.src);let y="getFrame"in a?FO(a):a;r&&(y=this._colorSubstitutionHelper.applyColorSubstitution(y,r)),this._applyAdditionalRenderProps&&!h&&n&&(y=this._colorSubstitutionHelper.tintImageData(y,n));const g=this.transformPt([0,0]),[_,S]=this.getTransformAngle(),E=this.transformSize(1),C=this._ctx;C.save(),C.setTransform({m11:o*E*_,m12:o*E*S,m21:-E*S,m22:E*_,m41:g[0],m42:g[1]}),C.drawImage(y,-l/2,-c/2,l,c),C.restore()}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new $de);const r=Dde(e,this.transformSize(Ei(1))),s=this._textRasterizer.rasterizeText(i,r);if(!s)return;const{size:n,anchorX:o,anchorY:a,canvas:l}=s,c=n[0]*(o+.5),h=n[1]*(a-.5),y=this._ctx,g=this.transformPt([0,0]),[_,S]=this.getTransformAngle(),E=1;y.save(),y.setTransform({m11:E*_,m12:E*S,m21:-1*S,m22:E*_,m41:g[0]-E*c,m42:g[1]+E*h}),y.drawImage(l,0,0),y.restore()}drawPictureFill(e,i){if(!e)return;let{colorSubstitutions:r,height:s,offsetX:n,offsetY:o,rotation:a,scaleX:l,tintColor:c,url:h}=i;const y=this._resourceManager.getResource(h);if(y==null)return;if(Hr(e))this._buildPath(e.rings,!0);else if(cn(e))this._buildPath(e.paths,!0);else if(to(e))this._buildPath(Xh(e).rings,!0);else{if(!yv(e))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}const g=this._ctx,_=fy(h)||"src"in y&&fy(y.src);let S,E="getFrame"in y?FO(y):y;if(r&&(E=this._colorSubstitutionHelper.applyColorSubstitution(E,r)),this._applyAdditionalRenderProps){_||c&&(E=this._colorSubstitutionHelper.tintImageData(E,c)),S=g.createPattern(E,"repeat");const C=this.transformSize(1);a||(a=0),n?n*=C:n=0,o?o*=C:o=0,s&&(s*=C);const M=s?s/y.height:1,P=l&&s?l*s/y.width:1;if(a!==0||M!==1||P!==1||n!==0||o!==0){const D=new DOMMatrix;D.rotateSelf(0,0,-a).translateSelf(n,o).scaleSelf(P,M,1),S.setTransform(D)}}else S=g.createPattern(E,"repeat");g.save(),g.fillStyle=S,g.fill("evenodd"),g.restore()}drawPictureStroke(e,i){if(!e)return;let{colorSubstitutions:r,capStyle:s,joinStyle:n,miterLimit:o,tintColor:a,url:l,width:c}=i;const h=this._resourceManager.getResource(l);if(h==null)return;let y;if(Hr(e))y=e.rings;else if(cn(e))y=e.paths;else{if(!to(e))return yv(e)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;y=Xh(e).rings}c||(c=h.width);const g=fy(l)||"src"in h&&fy(h.src);let _="getFrame"in h?FO(h):h;r&&(_=this._colorSubstitutionHelper.applyColorSubstitution(_,r)),this._applyAdditionalRenderProps&&(g||a&&(_=this._colorSubstitutionHelper.tintImageData(_,a)));const S=Math.max(this.transformSize(ri(c)),.5),E=S/_.width,C=this._ctx,M=C.createPattern(_,"repeat-y");let P,D;C.save(),this._setCapStyle(s),this._setJoinStyle(n),o!==void 0&&(C.miterLimit=o),C.lineWidth=S;for(let F of y)if(F=ie(F),jZ(F),F&&!(F.length<=1)){P=this.transformPt(F[0]);for(let U=1;U<F.length;U++){D=this.transformPt(F[U]);const G=lQe(P,D),Q=new DOMMatrix;Q.translateSelf(0,P[1]-S/2).scaleSelf(E,E,1).rotateSelf(0,0,90-G),M.setTransform(Q),C.strokeStyle=M,C.beginPath(),C.moveTo(P[0],P[1]),C.lineTo(D[0],D[1]),C.stroke(),P=D}}C.restore()}drawGradientFill(e,i){if(!e)return;let r;if(Hr(e))r=e.rings;else if(cn(e))r=e.paths;else{if(!to(e))return void r_().error("Unable to draw gradient fill");r=Xh(e).rings}this._buildPath(r,!0);const{angle:s,gradientMethod:n,gradientSize:o,gradientSizeUnits:a}=i,l=Zr.CIMGradientFill,c=i.gradientType??l.gradientType,h=-w1(s??0),y=A_e();for(const M of r){const P=M?M.length:0;if(P>1)for(let D=0;D<P;D++){let F=this.transformPt(M[D]);n!=="Linear"&&n!=="Rectangular"||(F=ph(F,-h)),h2(y,F)}}const[g,_,S,E]=y,C=this._ctx;switch(C.save(),n){case"Buffered":r_().error(`Gradient method "${n}" currently unsupported.`);break;case"Linear":{const M=(_+E)/2,P=a==="Absolute"?this.transformSize(ri(o)):mw(o,l.gradientSize)*(S-g),[D,F]=c==="Discrete"?[S,S-P]:[g+P,g],U=ph([D,M],h),G=ph([F,M],h),Q=C.createLinearGradient(U[0],U[1],G[0],G[1]);jE(Q,i),C.fillStyle=Q,C.fill("evenodd");break}case"Circular":{const M=EV(y),P=d_e(y)/2,D=a==="Absolute"?this.transformSize(ri(o)):mw(o,l.gradientSize)*P,[F,U]=c==="Discrete"?[P,P-D]:[D,0],G=C.createRadialGradient(M[0],M[1],F,M[0],M[1],U);jE(G,i),C.fillStyle=G,C.fill("evenodd");break}case"Rectangular":{const M=EV(y),P=M[0],D=M[1],F=ph(M,h),U=(de,ye,xe,ee,le,Te,ke,De)=>{C.save(),this.pushClipPath(e);const Ke=ph([le,Te],h),vt=ph([ke,De],h);C.beginPath(),C.moveTo(F[0],F[1]),C.lineTo(Ke[0],Ke[1]),C.lineTo(vt[0],vt[1]),C.lineTo(F[0],F[1]),C.clip();const Pt=ph([de,ye],h),Zt=ph([xe,ee],h),Ar=C.createLinearGradient(Pt[0],Pt[1],Zt[0],Zt[1]);jE(Ar,i),C.fillStyle=Ar,C.fill("evenodd"),C.restore()};let G=a==="Absolute"?this.transformSize(ri(o)):mw(o,l.gradientSize)*(Tk(y)/2),[Q,W]=c==="Discrete"?[S,S-G]:[P+G,P];U(Q,D,W,D,S,_,S,E),[Q,W]=c==="Discrete"?[g,g+G]:[P-G,P],U(Q,D,W,D,g,E,g,_),G=a==="Absolute"?this.transformSize(ri(o)):mw(o,l.gradientSize)*(Mk(y)/2);let[X,K]=c==="Discrete"?[E,E-G]:[D+G,D];U(P,X,P,K,S,E,g,E),[X,K]=c==="Discrete"?[_,_+G]:[D-G,D],U(P,X,P,K,g,_,S,_);break}}C.restore()}drawGradientStroke(e,i){const{capStyle:r,gradientMethod:s,gradientSize:n,gradientSizeUnits:o,joinStyle:a,miterLimit:l,width:c}=i;if(!e||c===0)return;let h;if(Hr(e))h=e.rings;else if(cn(e))h=e.paths;else{if(!to(e))return void r_().error("Unable to draw gradient stroke");h=Xh(e).rings}const y=i.gradientType??Zr.CIMGradientStroke.gradientType,g=Math.max(this.transformSize(ri(c)),.5),_=this._ctx;let S,E;_.save(),this._setCapStyle(r),this._setJoinStyle(a),l!==void 0&&(_.miterLimit=l),_.lineWidth=g;for(let C of h){if(C=ie(C),jZ(C),!C||C.length<=1)continue;let M=0;S=this.transformPt(C[0]);for(let F=1;F<C.length;F++){E=this.transformPt(C[F]);const U=E[0]-S[0],G=E[1]-S[1];M+=Math.sqrt(U*U+G*G),S=E}const P=o==="Absolute"?this.transformSize(ri(n)):mw(n,Zr.CIMGradientStroke.gradientSize)*(s==="AcrossLine"?g:M);let D=0;S=this.transformPt(C[0]);for(let F=1;F<C.length;F++){E=this.transformPt(C[F]);const U=E[0]-S[0],G=E[1]-S[1],Q=Math.sqrt(U*U+G*G);let W,X,K,de;switch(s){case"AcrossLine":{const[xe,ee]=ph([U/Q,G/Q],-Math.PI/2),le=g/2,Te=y==="Discrete"?le:P-le;W=(S[0]+E[0])/2+xe*Te,X=(S[1]+E[1])/2+ee*Te,K=W-xe*P,de=X-ee*P;break}case"AlongLine":{const xe=U/Q,ee=G/Q;y==="Discrete"?(W=S[0]-xe*D,X=S[1]-ee*D,K=W+xe*P,de=X+ee*P):(K=S[0]+xe*(M-D),de=S[1]+ee*(M-D),W=K-xe*P,X=de-ee*P);break}default:return r_().error("Unrecognized gradient method:",s),void _.restore()}const ye=_.createLinearGradient(W,X,K,de);jE(ye,i),_.strokeStyle=ye,_.beginPath(),_.moveTo(S[0],S[1]),_.lineTo(E[0],E[1]),_.stroke(),D+=Q,S=E}}_.restore()}_buildPath(e,i){const r=this._ctx;if(r.beginPath(),e)for(const s of e){const n=s?s.length:0;if(n>1){let o=this.transformPt(s[0]);r.moveTo(o[0],o[1]);for(let a=1;a<n;a++)o=this.transformPt(s[a]),r.lineTo(o[0],o[1]);i&&r.closePath()}}}_setCapStyle(e){switch(e){case zo.Butt:this._ctx.lineCap="butt";break;case zo.Round:this._ctx.lineCap="round";break;case zo.Square:this._ctx.lineCap="square"}}_setJoinStyle(e){switch(e){case al.Bevel:this._ctx.lineJoin="bevel";break;case al.Round:this._ctx.lineJoin="round";break;case al.Miter:this._ctx.lineJoin="miter"}}}function oQe(t,e,i){let r=Tt(t.separation,Zr.CIMHatchFill.separation)*i,s=Tt(t.rotation);if(r===0)return null;r<0&&(r=-r);let n=0;const o=.5*r;for(;n>o;)n-=r;for(;n<-o;)n+=r;const a=Qr();i7(a,e),a[0]-=o,a[1]-=o,a[2]+=o,a[3]+=o;const l=[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]]];for(;s>180;)s-=180;for(;s<0;)s+=180;const c=Math.cos(s*Em),h=Math.sin(s*Em),y=-r*h,g=r*c;let _,S,E,C;n=Tt(t.offsetX)*i*h-Tt(t.offsetY)*i*c,_=E=Number.MAX_VALUE,S=C=-Number.MAX_VALUE;for(const Q of l){const W=Q[0],X=Q[1],K=c*W+h*X,de=-h*W+c*X;_=Math.min(_,K),E=Math.min(E,de),S=Math.max(S,K),C=Math.max(C,de)}E=Math.floor(E/r)*r;let M=c*_-h*E-y*n/r,P=h*_+c*E-g*n/r,D=c*S-h*E-y*n/r,F=h*S+c*E-g*n/r;const U=1+Math.round((C-E)/r),G=[];for(let Q=0;Q<U;Q++)M+=y,P+=g,D+=y,F+=g,G.push([[M,P],[D,F]]);return{paths:G}}function aQe(t,e){let i=0;for(const r of e){const s=r.length;for(let n=1;n<s;n++){const o=r[n-1],a=r[n];o[1]>t[1]!=a[1]>t[1]&&((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0])>0?i++:i--)}}return i!==0}function BZ(t,e,i){for(const r of e){const s=r.length;for(let n=1;n<s;n++){const o=r[n-1],a=r[n];let l=(a[0]-o[0])*(a[0]-o[0])+(a[1]-o[1])*(a[1]-o[1]);if(l===0)continue;l=Math.sqrt(l);const c=((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0]))/l;if(Math.abs(c)<i){const h=((a[0]-o[0])*(t[0]-o[0])+(a[1]-o[1])*(t[1]-o[1]))/l;if(h>-i&&h<l+i)return!0}}}return!1}function lQe(t,e){const i=e[0]-t[0],r=e[1]-t[1];return 180/Math.PI*Math.atan2(r,i)}const Xh=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,Ode=(t,e,i)=>{switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}};function Dde(t,e=1){var D;const i=doe(t),r=hoe(t.fontStyleName),s=t.fontFamilyName??aj,{weight:n,style:o}=r,a=e*(t.height||5),l=h3e(t.horizontalAlignment),c=d3e(t.verticalAlignment),h=k_(t),y=k_(t.haloSymbol),g=y!=null?e*(t.haloSize??0):0,_=ZT(t.symbol),S=e*(YT(t.symbol)||0),E=((D=t.callout)==null?void 0:D.type)==="CIMBackgroundCallout"?t.callout.backgroundSymbol:null,C=k_(E),M=YT(E),P=ZT(E);return{color:h,size:a,horizontalAlignment:l,verticalAlignment:c,font:{family:s,style:c3e(o),weight:u3e(n),decoration:i},outline:{size:S||0,color:_},halo:{size:g||0,color:y,style:o},backgroundColor:C,borderLine:M!=null&&P!=null?{size:M,color:P}:null,pixelRatio:1,premultiplyColors:!0}}const cQe=1e-4;function jZ(t){let e,i,r,s,n,o=t[0],a=1;for(;a<t.length;)e=t[a][0]-o[0],i=t[a][1]-o[1],s=e!==0?i/e:Math.PI/2,r!==void 0&&Math.abs(s-r)<=cQe?(t.splice(a-1,1),o=n):(n=o,o=t[a],a++),r=s}const GE=Number.POSITIVE_INFINITY,fj=Math.PI,Fft=2*fj,uQe=128/fj,hQe=256/360,zft=fj/180,dQe=1/Math.LN2;function Nde(t,e){return(t%=e)>=0?t:t+e}function Bft(t){return Nde(t*uQe,256)}function jft(t){return Nde(t*hQe,256)}function Uft(t){return Math.log(t)*dQe}function Vft(t,e,i){return t*(1-i)+e*i}const pQe=8,fQe=14,AQe=16;function Gft(t){return pQe+Math.max((t-fQe)*AQe,0)}function Hft(t,e,i){let r,s,n,o=0;for(const a of i){r=a.length;for(let l=1;l<r;++l)s=a[l-1],n=a[l],s.y>e!=n.y>e&&((n.x-s.x)*(e-s.y)-(n.y-s.y)*(t-s.x)>0?o++:o--)}return o!==0}function qft(t,e,i,r){let s,n,o,a;const l=r*r;for(const c of i){const h=c.length;if(!(h<2)){s=c[0].x,n=c[0].y;for(let y=1;y<h;++y){if(o=c[y].x,a=c[y].y,J2e(t,e,s,n,o,a)<l)return!0;s=o,n=a}}}return!1}function Wft(t,e,i,r,s,n,o){const a=Math.max(r,Math.min(e,n))-e,l=Math.max(s,Math.min(i,o))-i;return a*a+l*l<=t*t}function Qft(t,e){if(e===0||Number.isNaN(e))return t;const i=[],r=new ii(0,0),s=new ii(0,0),n=new ii(0,0);for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){const h=a[c-1],y=a[c],g=a[c+1];c===0?r.setCoords(0,0):r.assignSub(y,h).normalize().rightPerpendicular(),c===a.length-1?s.setCoords(0,0):s.assignSub(g,y).normalize().rightPerpendicular(),n.assignAdd(r,s).normalize();const _=n.x*s.x+n.y*s.y;_!==0&&n.scale(1/_),l.push(ii.add(y,n.scale(e)))}i.push(l)}return i}function Jft(t,e,i,r){const s=new ii(t[0],t[1]);if(s.scale(r),e==="viewport"){const n=-i*(Math.PI/180),o=Math.cos(n),a=Math.sin(n);s.rotate(o,a)}return s}const Fde=Math.PI,mQe=Fde/2,UZ=Math.PI/180,jO=96/72,yQe=1.4142135623730951,VZ=2,GZ=4,i3=()=>be.getLogger("esri.symbols.cim.CIMSymbolHelper");function Zft(t){let e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":{const i=On.fromSimpleMarker(t);if(!i)throw new Error("InternalError: Cannot convert symbol to CIM");e=i;break}case"picture-marker":e=On.fromPictureMarker(t);break;case"simple-line":e=On.fromSimpleLineSymbol(t);break;case"simple-fill":e=On.fromSimpleFillSymbol(t);break;case"picture-fill":e=On.fromPictureFillSymbol(t);break;case"text":e=On.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function FC(t,e,i){switch(e.type){case"CIMSymbolReference":return FC(t,e.symbol,i);case"CIMPointSymbol":i==null&&(i={x:0,y:0}),t.drawSymbol(e,i);break;case"CIMLineSymbol":i==null&&(i={paths:[[[0,0],[10,0]]]}),t.drawSymbol(e,i);break;case"CIMPolygonSymbol":i==null&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),t.drawSymbol(e,i);break;case"CIMTextSymbol":{const r={x:0,y:0};t.drawSymbol(e,r);break}case"CIMVectorMarker":{const r=new z1;t.drawMarker(e,r);break}}return t.envelope()}function gQe(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function vQe(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectControlMeasureLine":return 500;case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs(Tt(t.offsetX)),Math.abs(Tt(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return .5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function HZ(t){if(!t)return 0;let e=0;for(const i of t)e+=vQe(i);return e}class Yft{static getSymbolInflateSize(e,i,r,s,n){return e||(e=[0,0,0,0]),i?this._getInflateSize(e,i,r,s,n):e}static safeSize(e){const i=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(i*i+r*r)}static _vectorMarkerBounds(e,i,r,s){let n=!0;const o=Qr();if(i!=null&&i.markerGraphics)for(const a of i.markerGraphics){const l=[0,0,0,0];a.geometry&&(i7(o,a.geometry),l[0]=0,l[1]=0,l[2]=0,l[3]=0,this.getSymbolInflateSize(l,a.symbol,r,0,s),o[0]+=l[0],o[1]+=l[1],o[2]+=l[2],o[3]+=l[3],n?(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],n=!1):(e[0]=Math.min(e[0],o[0]),e[1]=Math.min(e[1],o[1]),e[2]=Math.max(e[2],o[2]),e[3]=Math.max(e[3],o[3])))}return e}static _getInflateSize(e,i,r,s,n){if($Qe(i)){const o=this._getLayersInflateSize(e,i.symbolLayers,r,s,n),a=HZ(i.effects);return a>0&&(o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a),o}return this._getTextInflatedSize(e,i,n)}static _getLayersInflateSize(e,i,r,s,n){let o=!0;if(!i)return e;for(const a of i){if(!a)continue;let l=[0,0,0,0];switch(a.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const h=a;let y=h.width;y!=null&&(h.capStyle===zo.Square||h.joinStyle===al.Miter?y/=yQe:y/=2,l[0]=-y,l[1]=-y,l[2]=y,l[3]=y);break}case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":{const h=a;if(a.type==="CIMVectorMarker"){const E=a;if(l=this._vectorMarkerBounds(l,E,r,n),E.frame){const C=(E.frame.xmin+E.frame.xmax)/2,M=(E.frame.ymin+E.frame.ymax)/2;if(l[0]-=C,l[1]-=M,l[2]-=C,l[3]-=M,E.size!=null){const P=E.size/(E.frame.ymax-E.frame.ymin);l[0]*=P,l[1]*=P,l[2]*=P,l[3]*=P}}}else if(a.type==="CIMPictureMarker"){const E=a,C=r.getResource(E.url);let M=1;if(C!=null&&C.height&&(M=C.width/C.height),h.size!=null){const P=h.size/2,D=h.size*M*E.scaleX/2;l=[-D,-P,D,P]}}else if(h.size!=null){const E=h.size/2;l=[-E,-E,E,E]}if(h.anchorPoint){let E,C;h.anchorPointUnits==="Absolute"?(E=h.anchorPoint.x,C=h.anchorPoint.y):(E=h.anchorPoint.x*(l[2]-l[0]),C=h.anchorPoint.y*(l[3]-l[1]));const M=1.25*Math.sqrt(E*E+C*C);l[0]-=M,l[1]-=M,l[2]+=M,l[3]+=M}let y=Tt(h.rotation);if(h.rotateClockwise&&(y=-y),s&&(y-=s),y){const E=UZ*y,C=Math.cos(E),M=Math.sin(E),P=Qr([GE,GE,-GE,-GE]);h2(P,[l[0]*C-l[1]*M,l[0]*M+l[1]*C]),h2(P,[l[0]*C-l[3]*M,l[0]*M+l[3]*C]),h2(P,[l[2]*C-l[1]*M,l[2]*M+l[1]*C]),h2(P,[l[2]*C-l[3]*M,l[2]*M+l[3]*C]),l=P}let g=Tt(h.offsetX),_=Tt(h.offsetY);if(s){const E=UZ*s,C=Math.cos(E),M=Math.sin(E),P=g*M+_*C;g=g*C-_*M,_=P}l[0]+=g,l[1]+=_,l[2]+=g,l[3]+=_;const S=gQe(h.markerPlacement);S>0&&(l[0]-=S,l[1]-=S,l[2]+=S,l[3]+=S);break}}const c=HZ(a.effects);c>0&&(l[0]-=c,l[1]-=c,l[2]+=c,l[3]+=c),o?(e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],o=!1):(e[0]=Math.min(e[0],l[0]),e[1]=Math.min(e[1],l[1]),e[2]=Math.max(e[2],l[2]),e[3]=Math.max(e[3],l[3]))}return e}static _getTextInflatedSize(e,i,r){var g;const s=kde(i.height??Zr.CIMTextSymbol.height);if(e[0]=-s/2,e[1]=-s/2,e[2]=s/2,e[3]=s/2,!r)return e;const n=r.get(i);if(!n||!n.glyphMosaicItems.glyphs.length)return e;const{lineGapType:o,lineGap:a}=i,l=o?Ode(o,a??0,s):0,c=((g=i.callout)==null?void 0:g.type)==="CIMBackgroundCallout",h=Mde(n.glyphMosaicItems,{scale:s/cce,angle:Tt(i.angle),xOffset:Tt(i.offsetX),yOffset:Tt(i.offsetY),horizontalAlignment:i.horizontalAlignment,verticalAlignment:i.verticalAlignment,maxLineWidth:Pde(i.lineWidth),lineHeight:lce*Math.max(.25,Math.min(l||1,4)),decoration:i.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}).boundsT,y=Math.sqrt(h.width*h.width+h.height*h.height);return e[0]-=h.x+y,e[1]-=h.y-y,e[2]+=h.x+y,e[3]+=-h.y+y,e}}class On{static getEnvelope(e,i,r){if(!e)return null;const s=new nQe(r);if(Array.isArray(e)){let n;for(const o of e)n?n.union(FC(s,o,i)):n=FC(s,o,i);return n}return FC(s,e,i)}static getTextureInfo(e,i,r,s,n){const o=s??this.getEnvelope(e,null,i);if(!o)return[0,0,0,0,1];const a=Math.max(o.width,o.height)*jO;let l=n!=null?Math.max(n/a,1):1;l*=jO,o.x*=l,o.y*=l,o.width*=l,o.height*=l,o.width=Math.max(Math.ceil(o.x+o.width)-Math.floor(o.x),1)-1,o.height=Math.max(Math.ceil(o.y+o.height)-Math.floor(o.y),1)-1;let c=o.x+.5*o.width,h=o.y+.5*o.height;return c+=o.x-Math.floor(o.x),h+=o.y-Math.floor(o.y),s||(o.width+=r,o.height+=r,c+=r/2,h+=r/2),[o.width,o.height,c,h,l]}static getTextureAnchor(e,i,r){const[s,n,o,a,l]=this.getTextureInfo(e,i,VZ,null,r);return[-o/s,-a/n,n/l*jO]}static rasterize(e,i,r,s,n=!0,o){const[a,l,c,h,y]=this.getTextureInfo(i,s,VZ,r,o);e.width=a,e.height=l;const g=e.getContext("2d",{willReadFrequently:!0}),_=Ws.createScale(y,-y);_.translate(.5*a-c,.5*l+h);const S=new Rde(g,s,_);switch(i.type){case"CIMPointSymbol":{const M={type:"point",x:0,y:0};S.drawSymbol(i,M);break}case"CIMVectorMarker":{const M=new z1;S.drawMarker(i,M);break}}const E=g.getImageData(0,0,e.width,e.height),C=new Uint8Array(E.data);if(n){let M;for(let P=0;P<C.length;P+=4)M=C[P+3]/255,C[P]=C[P]*M,C[P+1]=C[P+1]*M,C[P+2]=C[P+2]*M}return[C,e.width,e.height,-c/a,-h/l]}static fromTextSymbol(e){const{text:i}=e;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:On.createCIMTextSymbolfromTextSymbol(e),textString:i}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}static fromPictureFillSymbol(e){const{height:i,outline:r,width:s,xoffset:n,xscale:o,yoffset:a,yscale:l}=e,c=[],h={type:"CIMPolygonSymbol",symbolLayers:c};if(r){const E=qZ(r);E&&c.push(E)}let y=e.url;e.type==="esriPFS"&&e.imageData&&(y=e.imageData);const g="angle"in e?e.angle??0:0,_=(s??0)*(o||1),S=(i??0)*(l||1);return c.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:tv.Picture,tintColor:null,url:y,height:S,width:_,offsetX:Tt(n),offsetY:Tt(a),rotation:Tt(-g),colorSubstitutions:null}),h}static fromSimpleFillSymbol(e){const{color:i,style:r,outline:s}=e,n=[],o={type:"CIMPolygonSymbol",symbolLayers:n};if(s){const a=qZ(s);a&&n.push(a)}if(r&&r!=="solid"&&r!=="none"&&r!=="esriSFSSolid"&&r!=="esriSFSNull"){const a={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:oa(i),capStyle:zo.Butt,joinStyle:al.Miter,width:.75}]};let l=0;const c=Ei(EQe(r)?8:10);switch(r){case"vertical":case"esriSFSVertical":l=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":l=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":l=45;break;case"cross":case"esriSFSCross":l=0}n.push({type:"CIMHatchFill",lineSymbol:a,offsetX:0,offsetY:0,rotation:l,separation:c}),r==="cross"||r==="esriSFSCross"?n.push({type:"CIMHatchFill",lineSymbol:ie(a),offsetX:0,offsetY:0,rotation:90,separation:c}):r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"||n.push({type:"CIMHatchFill",lineSymbol:ie(a),offsetX:0,offsetY:0,rotation:45,separation:c})}else!r||r!=="solid"&&r!=="esriSFSSolid"||n.push({type:"CIMSolidFill",enable:!0,color:oa(i)});return o}static fromSimpleLineSymbol(e){const{cap:i,color:r,join:s,marker:n,miterLimit:o,style:a,width:l}=e;let c=null;a!=="solid"&&a!=="none"&&a!=="esriSLSSolid"&&a!=="esriSLSNull"&&(c=[{type:"CIMGeometricEffectDashes",dashTemplate:h8(a,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const h=[];if(n){let y;switch(n.placement){case"begin-end":y=ku.Both;break;case"begin":y=ku.JustBegin;break;case"end":y=ku.JustEnd;break;default:y=ku.None}const g=On.fromSimpleMarker(n,l,r).symbolLayers[0];g.markerPlacement={type:"CIMMarkerPlacementAtExtremities",placePerPart:!1,angleToLine:!0,offset:0,extremityPlacement:y,offsetAlongLine:0},h.push(g)}return h.push({type:"CIMSolidStroke",color:a!=="none"&&a!=="esriSLSNull"?oa(r):[0,0,0,0],capStyle:Bde(i),joinStyle:jde(s),miterLimit:o,width:l,effects:c}),{type:"CIMLineSymbol",symbolLayers:h}}static fromPictureMarker(e){const{angle:i,height:r,width:s,xoffset:n,yoffset:o}=e;let a=e.url;return e.type==="esriPMS"&&e.imageData&&(a=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:tv.Picture,tintColor:null,url:a,size:r,width:s,offsetX:Tt(n),offsetY:Tt(o),rotation:Tt(-i)}]}}static createCIMTextSymbolfromTextSymbol(e){const{angle:i,color:r,font:s,haloColor:n,haloSize:o,horizontalAlignment:a,kerning:l,lineWidth:c,text:h,verticalAlignment:y,xoffset:g,yoffset:_,backgroundColor:S,borderLineColor:E,borderLineSize:C}=e;let M,P,D,F,U,G;s&&(M=s.family,P=s.style,D=s.weight,F=s.size,U=s.decoration);let Q=!1;return h&&(Q=QHe(h)[1]),(S||C)&&(G={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:oa(S)},{type:"CIMSolidStroke",color:oa(E),width:C}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMTextSymbol",angle:i,blockProgression:sF.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:KN.Normal,fontEncoding:eF.Unicode,fontFamilyName:M||"Arial",fontStyleName:_Qe(P,D),fontType:tF.Unspecified,haloSize:o,height:F,hinting:oF.Default,horizontalAlignment:bQe(a??"center"),kerning:l,letterWidth:100,ligatures:!0,lineGapType:"Multiple",lineWidth:c,offsetX:Tt(g),offsetY:Tt(_),strikethrough:U==="line-through",underline:U==="underline",symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:oa(r)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:oa(n)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:Q?JT.RTL:JT.LTR,verticalAlignment:wQe(y??"baseline"),verticalGlyphOrientation:lF.Right,wordSpacing:100,billboardMode3D:nF.FaceNearPlane,callout:G}}static createPictureMarkerRasterizationParam(e){var l,c;const{angle:i,height:r,width:s,xoffset:n,yoffset:o}=e,a=e.url??((l=e.source)==null?void 0:l.url)??((c=e.source)==null?void 0:c.imageData);return a?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:tv.Picture,tintColor:null,url:a,size:r,width:s,offsetX:Tt(n),offsetY:Tt(o),rotation:Tt(-i)}}:null}static createPictureFillRasterizationParam(e){const{width:i,height:r,xoffset:s,yoffset:n,url:o}=e;return o?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureFill",scaleX:1,textureFilter:tv.Picture,tintColor:null,url:o,width:i,height:r,offsetX:Tt(s),offsetY:Tt(n),rotation:0}}:null}static fromSimpleMarker(e,i,r){const{style:s}=e,n=e.color??r;if(s==="path"||s==="esriSMSPath"){const y=[];if("outline"in e&&e.outline){const S=e.outline;y.push({type:"CIMSolidStroke",enable:!0,width:S.width,color:oa(S.color),path:e.path})}y.push({type:"CIMSolidFill",enable:!0,color:oa(n),path:e.path});const[g,_]=Bw("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:-Tt(e.angle),size:Tt(e.size||6),offsetX:Tt(e.xoffset),offsetY:Tt(e.yoffset),scaleSymbolsProportionally:!1,frame:g,markerGraphics:[{type:"CIMMarkerGraphic",geometry:_,symbol:{type:"CIMPolygonSymbol",symbolLayers:y}}]}]}}const o=[];let a,l,c=e.size;if("outline"in e&&e.outline&&e.outline.style!=="none"&&e.outline.style!=="esriSLSNull"){const y=e.outline,g=y.style!=="solid"&&y.style!=="esriSLSSolid";[a,l]=g?Bw(s,e.size):Bw(s);const _=y.width??Zk.width;if(g){const C=_/e.size,M=(a.xmax-a.xmin)*C/2,P=(a.ymax-a.ymin)*C/2;a.xmin-=M,a.xmax+=M,a.ymin-=P,a.ymax+=P,c&&(c+=_)}const S=e.style!=="cross"&&e.style!=="x"||(e==null?void 0:e.outline.style)==="dot"||(e==null?void 0:e.outline.style)==="short-dot"?on.HalfGap:on.FullPattern,E=g?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:h8(y.style,null).map((C=>y.width&&y.width>0?C*y.width:C)),lineDashEnding:S,controlPointEnding:on.FullPattern}]:void 0;o.push({type:"CIMSolidStroke",capStyle:g?zo.Round:zo.Butt,enable:!0,width:_,color:oa(y.color),effects:E})}else!i||e.type!=="line-marker"||e.style!=="cross"&&e.style!=="x"?[a,l]=Bw(s):([a,l]=Bw(s),o.push({type:"CIMSolidStroke",enable:!0,width:i,color:oa(n)}));o.push({type:"CIMSolidFill",enable:!0,color:oa(n)});const h={type:"CIMPolygonSymbol",symbolLayers:o};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:Tt(-e.angle),size:Tt(c||6*i),offsetX:Tt(e.xoffset),offsetY:Tt(e.yoffset),scaleSymbolsProportionally:!1,frame:a,markerGraphics:[{type:"CIMMarkerGraphic",geometry:l,symbol:h}]}]}}static fromCIMHatchFill(e,i){var l;const r=i*(e.separation??Zr.CIMHatchFill.separation),s=r/2,n=ie(e.lineSymbol);(l=n.symbolLayers)==null||l.forEach((c=>{var h;switch(c.type){case"CIMSolidStroke":c.width!=null&&(c.width*=i),(h=c.effects)==null||h.forEach((y=>{if(y.type==="CIMGeometricEffectDashes"){const g=y.dashTemplate;y.dashTemplate=g==null?void 0:g.map((_=>_*i))}}));break;case"CIMVectorMarker":{c.size!=null&&(c.size*=i);const y=c.markerPlacement;y!=null&&"placementTemplate"in y&&(y.placementTemplate=y.placementTemplate.map((g=>g*i)));break}}}));let o=this._getLineSymbolPeriod(n)||GZ;for(;o<GZ;)o*=2;const a=o/2;return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-s,ymax:s},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-a,0],[a,0]]]},symbol:n}],size:r}}static fetchResources(e,i,r,s=null){return e&&i&&zde(e,(n=>{IQe(n,i,r),"url"in n&&n.url&&r.push(i.fetchResource(n.url,{signal:s}))})),r}static fetchFonts(e,i,r){if(e&&i){if("symbolLayers"in e&&e.symbolLayers){for(const s of e.symbolLayers)if(s.type==="CIMVectorMarker"&&s.markerGraphics)for(const n of s.markerGraphics)n!=null&&n.symbol&&On.fetchFonts(n.symbol,i,r)}else if(e.type==="CIMTextSymbol"){const{fontFamilyName:s,fontStyleName:n}=e;if(!s||s.toLowerCase()==="calcitewebcoreicons")return;const{style:o,weight:a}=hoe(n),l=doe(e),c=new ha({family:s,style:o,weight:a,decoration:l});r.push(i.loadFont(c).catch((()=>{i3().error(`Unsupported font ${s} in CIM symbol`)})))}}}static _getLineSymbolPeriod(e){if(e){const i=this._getEffectsRepeat(e.effects);if(i)return i;if(e.symbolLayers){for(const r of e.symbolLayers)if(r){const s=this._getEffectsRepeat(r.effects);if(s)return s;switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const n=this._getPlacementRepeat(r.markerPlacement);if(n)return n}}}}}return 0}static _getEffectsRepeat(e){if(e){for(const i of e)if(i)switch(i.type){case"CIMGeometricEffectDashes":{const r=i.dashTemplate;if(r&&r.length){let s=0;for(const n of r)s+=n;return 1&r.length&&(s*=2),s}break}case"CIMGeometricEffectWave":return i.period;default:i3().error(`unsupported geometric effect type ${i.type}`)}}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":{const i=e.placementTemplate;if(i&&i.length){let r=0;for(const s of i)r+=+s;return 1&i.length&&(r*=2),r}break}}return 0}static fromCIMInsidePolygon(e){const i=e.markerPlacement,r={...e};r.markerPlacement=null,r.anchorPoint=null;const s=Math.abs(i.stepX),n=Math.abs(i.stepY),o=(i.randomness??100)/100;let a,l,c,h;if(i.gridType==="Random"){const y=Ei(b8e),g=Math.max(Math.floor(y/s),1),_=Math.max(Math.floor(y/n),1);a=g*s/2,l=_*n/2,c=2*l;const S=new q8(i.seed),E=o*s/1.5,C=o*n/1.5;h=[];for(let M=0;M<g;M++)for(let P=0;P<_;P++){const D=M*s-a+E*(.5-S.getFloat()),F=P*n-l+C*(.5-S.getFloat());h.push({x:D,y:F}),M===0&&h.push({x:D+2*a,y:F}),P===0&&h.push({x:D,y:F+2*l})}}else i.shiftOddRows===!0?(a=s/2,l=n,c=2*n,h=[{x:-a,y:0},{x:a,y:0},{x:0,y:l},{x:0,y:-l}]):(a=s/2,l=n/2,c=n,h=[{x:-s,y:0},{x:0,y:-n},{x:-s,y:-n},{x:0,y:0},{x:s,y:0},{x:0,y:n},{x:s,y:n},{x:-s,y:n},{x:s,y:-n}]);return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-l,ymax:l},markerGraphics:h.map((y=>({type:"CIMMarkerGraphic",geometry:y,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}}))),size:c}}}function zde(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=t.symbolLayers;if(!i)return;for(const r of i)if(e(r),r.type==="CIMVectorMarker"){const s=r.markerGraphics;if(!s)continue;for(const n of s)if(n){const o=n.symbol;o&&zde(o,e)}}break}}}const Bde=t=>{if(!t)return zo.Butt;switch(t){case"butt":return zo.Butt;case"square":return zo.Square;case"round":return zo.Round}},jde=t=>{if(!t)return al.Miter;switch(t){case"miter":return al.Miter;case"round":return al.Round;case"bevel":return al.Bevel}},bQe=t=>{if(t==null)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},wQe=t=>{if(t==null)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},oa=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:s}=t;return[e,i,r,255*s]},_Qe=(t,e)=>{const i=SQe(e),r=xQe(t);return i&&r?`${i}-${r}`:`${i}${r}`},SQe=t=>{if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},xQe=t=>{if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},h8=(t,e)=>{const i=ce("safari")?.001:0,r=e==="butt";switch(t){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return i3().error("Unexpected: style does not require rasterization"),[0,0];default:return i3().error(`Tried to rasterize SLS, but found an unexpected style: ${t}!`),[0,0]}};function $Qe(t){return t.symbolLayers!==void 0}const Bw=(t,e=100)=>{const i=e/2;let r,s;const n=t;if(n==="circle"||n==="esriSMSCircle"){let a=Math.acos(1-.25/i),l=Math.ceil(Fde/a/4);l===0&&(l=1),a=mQe/l,l*=4;const c=[];c.push([i,0]);for(let h=1;h<l;h++)c.push([i*Math.cos(h*a),-i*Math.sin(h*a)]);c.push([i,0]),r={rings:[c]},s={xmin:-i,ymin:-i,xmax:i,ymax:i}}else if(n==="cross"||n==="esriSMSCross")r={paths:[[[0,i],[0,-i]],[[i,0],[-i,0]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="diamond"||n==="esriSMSDiamond")r={rings:[[[-i,0],[0,i],[i,0],[0,-i],[-i,0]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="square"||n==="esriSMSSquare")r={rings:[[[-i,-i],[-i,i],[i,i],[i,-i],[-i,-i]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="x"||n==="esriSMSX")r={paths:[[[i,i],[-i,-i]],[[i,-i],[-i,i]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="triangle"||n==="esriSMSTriangle"){const o=e*.5773502691896257,a=-o,l=2/3*e,c=l-e;r={rings:[[[a,c],[0,l],[o,c],[a,c]]]},s={xmin:a,ymin:c,xmax:o,ymax:l}}else n==="arrow"&&(r={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i});return[s,r]},EQe=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function IQe(t,e,i){if(!(!t.effects||e.geometryEngine!=null)){if(e.geometryEnginePromise)return void i.push(e.geometryEnginePromise);a3e(t.effects)&&(e.geometryEnginePromise=l3e(),i.push(e.geometryEnginePromise),e.geometryEnginePromise.then((r=>e.geometryEngine=r)))}}function qZ(t){if(!t)return null;let e=null;const{cap:i,color:r,join:s,miterLimit:n,style:o,width:a}=t;return o!=="solid"&&o!=="none"&&o!=="esriSLSSolid"&&o!=="esriSLSNull"&&(e=[{type:"CIMGeometricEffectDashes",dashTemplate:h8(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:o!=="esriSLSNull"&&o!=="none"?oa(r):[0,0,0,0],capStyle:Bde(i),joinStyle:jde(s),miterLimit:n,width:a,effects:e}}let CQe=class{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let s=this._inFlightResourceMap.get(e);return s?s.then((n=>({width:n.width,height:n.height}))):(s=tze(e,i),this._inFlightResourceMap.set(e,s),s.then((n=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,n),{width:n.width,height:n.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return ZHe(e)}};function Kft(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function TQe(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function W0(t){if(TQe(t))return t;const{originPosition:e,scale:i,translate:r}=t,s=i[0]??1,n=i[1]??1;return{originPosition:"lowerLeft",scale:[s,e==="lowerLeft"?n:-n,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function Ld({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function Rd({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function QS({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function JS({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function Ude(t,e){return t&&e?LQe:t&&!e?kQe:!t&&e?PQe:MQe}const MQe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Ld(t,r[0]),n=Rd(t,r[1]);i.push([s,n]);for(let o=1;o<e.length;o++){const[a,l]=e[o],c=Ld(t,a),h=Rd(t,l);c===s&&h===n||i.push([c-s,h-n]),s=c,n=h}return i},kQe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Ld(t,r[0]),n=Rd(t,r[1]),o=QS(t,r[2]);i.push([s,n,o]);for(let a=1;a<e.length;a++){const[l,c,h]=e[a],y=Ld(t,l),g=Rd(t,c),_=QS(t,h);y===s&&g===n&&_===o||i.push([y-s,g-n,_]),s=y,n=g,o=_}return i},PQe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Ld(t,r[0]),n=Rd(t,r[1]),o=JS(t,r[2]);i.push([s,n,o]);for(let a=1;a<e.length;a++){const[l,c,h]=e[a],y=Ld(t,l),g=Rd(t,c),_=JS(t,h);y===s&&g===n&&_===o||i.push([y-s,g-n,_]),s=y,n=g,o=_}return i},LQe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Ld(t,r[0]),n=Rd(t,r[1]),o=QS(t,r[2]),a=JS(t,r[3]);i.push([s,n,o,a]);for(let l=1;l<e.length;l++){const[c,h,y,g]=e[l],_=Ld(t,c),S=Rd(t,h),E=QS(t,y),C=JS(t,g);_===s&&S===n&&E===o&&C===a||i.push([_-s,S-n,E,C]),s=_,n=S,o=E,a=C}return i};function RQe(t,e,i,r){const s=[],n=Ude(i,r);for(let o=0;o<e.length;o++){const a=n(t,e[o]);a&&a.length>=3&&s.push(a)}return s.length?s:null}function OQe(t,e,i,r){const s=[],n=Ude(i,r);for(let o=0;o<e.length;o++){const a=n(t,e[o]);a&&a.length>=2&&s.push(a)}return s.length?s:null}function e$({scale:t,translate:e},i){return i*t[0]+e[0]}function t$({scale:t,translate:e},i){return i*t[1]+e[1]}function ZS({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function YS({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function Aj(t,e){return t&&e?zQe:t&&!e?NQe:!t&&e?FQe:DQe}const DQe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=e$(t,r[0]),n=t$(t,r[1]);i[0]=[s,n];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<e.length;h++){const[y,g]=e[h];s+=l*y,n+=c*g,i[h]=[s,n]}return i},NQe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=e$(t,r[0]),n=t$(t,r[1]);i[0]=[s,n,ZS(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<e.length;h++){const[y,g,_]=e[h];s+=l*y,n+=c*g,i[h]=[s,n,ZS(t,_)]}return i},FQe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=e$(t,r[0]),n=t$(t,r[1]);i[0]=[s,n,YS(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<e.length;h++){const[y,g,_]=e[h];s+=l*y,n+=c*g,i[h]=[s,n,YS(t,_)]}return i},zQe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=e$(t,r[0]),n=t$(t,r[1]);i[0]=[s,n,ZS(t,r[2]),YS(t,r[3])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<e.length;h++){const[y,g,_,S]=e[h];s+=l*y,n+=c*g,i[h]=[s,n,ZS(t,_),YS(t,S)]}return i};function Vde(t,e,i){const r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=e(t,i[s]);return r}function eAt(t,e,i){const r=W0(t);return e.x=Ld(r,i.x),e.y=Rd(r,i.y),i.z!=null&&(e.z=QS(r,i.z)),i.m!=null&&(e.m=JS(r,i.m)),e}function tAt(t,e,i){const r=RQe(W0(t),i.rings,i.hasZ,i.hasM);return r?(e.rings=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function iAt(t,e,i){const r=OQe(W0(t),i.paths,i.hasZ,i.hasM);return r?(e.paths=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function BQe(t,e,i,r=(i==null?void 0:i.hasZ)??!1,s=(i==null?void 0:i.hasM)??!1){if(i!=null){const n=W0(t);e.points=Aj(r,s)(n,i.points),e.hasZ=r,e.hasM=s}return e}function jQe(t,e,i,r=(i==null?void 0:i.z)!=null,s=(i==null?void 0:i.m)!=null){if(i==null)return e;const n=W0(t);return e.x=e$(n,i.x),e.y=t$(n,i.y),r&&(e.z=ZS(n,i.z)),s&&(e.m=YS(n,i.m)),e}function UQe(t,e,i,r=(i==null?void 0:i.hasZ)??!1,s=(i==null?void 0:i.hasM)??!1){if(i!=null){const n=W0(t);e.rings=Vde(n,Aj(r,s),i.rings),e.hasZ=r,e.hasM=s}return e}function VQe(t,e,i,r=(i==null?void 0:i.hasZ)??!1,s=(i==null?void 0:i.hasM)??!1){if(i!=null){const n=W0(t);e.paths=Vde(n,Aj(r,s),i.paths),e.hasZ=r,e.hasM=s}return e}function Gde(t,e,i,r,s,n){if(t==null)return null;const o=t.references("geometry")&&n?GQe(e,r,n):e,a=t.repurposeFeature(o,s);try{return t.evaluate(a,i)}catch(l){return be.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const UO=new Map;function GQe(t,e,i){const{transform:r,hasZ:s,hasM:n}=i;UO.has(e)||UO.set(e,HQe(e));const o=UO.get(e)(t.geometry,r,s,n);return{...t,geometry:o}}function HQe(t){const e={};switch(t){case"esriGeometryPoint":return(i,r,s,n)=>jQe(r,e,i,s,n);case"esriGeometryPolygon":return(i,r,s,n)=>UQe(r,e,i,s,n);case"esriGeometryPolyline":return(i,r,s,n)=>VQe(r,e,i,s,n);case"esriGeometryMultipoint":return(i,r,s,n)=>BQe(r,e,i,s,n);default:return be.getLogger("esri.views.2d.support.arcadeOnDemand").error(new te("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const rAt=Object.freeze(Object.defineProperty({__proto__:null,default:Gde},Symbol.toStringTag,{value:"Module"})),qQe=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:s}=t;return[e,i,r,255*s]};var Fi;let mj=(Fi=class{static findApplicableOverrides(e,i,r){if(e&&i){if(e.primitiveName){let s=!1;for(const n of r)if(n.primitiveName===e.primitiveName){s=!0;break}if(!s)for(const n of i)n.primitiveName===e.primitiveName&&r.push(n)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)Fi.findApplicableOverrides(s,i,r);if(e.symbolLayers)for(const s of e.symbolLayers)Fi.findApplicableOverrides(s,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const s of e.effects)Fi.findApplicableOverrides(s,i,r);if(e.markerPlacement&&Fi.findApplicableOverrides(e.markerPlacement,i,r),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const s of e.markerGraphics)Fi.findApplicableOverrides(s,i,r),Fi.findApplicableOverrides(s.symbol,i,r)}else e.type==="CIMCharacterMarker"?Fi.findApplicableOverrides(e.symbol,i,r):e.type==="CIMHatchFill"?Fi.findApplicableOverrides(e.lineSymbol,i,r):e.type==="CIMPictureMarker"&&Fi.findApplicableOverrides(e.animatedSymbolProperties,i,r)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&poe(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=lq(e),s=e.primitiveName,n=[];for(const o of i)o.primitiveName===s&&n.push(lq(o));return{type:"cim-effect-param",effect:r,overrides:b3e(n)}}static async resolveSymbolOverrides(e,i,r,s,n,o,a){if(!(e!=null&&e.symbol))return null;let{symbol:l,primitiveOverrides:c}=e;const h=!!c;if(!h&&!s)return l;l=ie(l),c=ie(c);let y=!0;if(i||(i={attributes:{}},y=!1),h){if(y||(c=c.filter((g=>{var _;return!((_=g.valueExpressionInfo)!=null&&_.expression.includes("$feature"))}))),a||(c=c.filter((g=>{var _;return!((_=g.valueExpressionInfo)!=null&&_.expression.includes("$view"))}))),c.length>0){const g=p3e(i.attributes),_={spatialReference:r,fields:g,geometryType:n};await Fi.createRenderExpressions(c,_),Fi.evaluateOverrides(c,i,n??"esriGeometryPoint",o,a,new IS(g))}Fi.applyOverrides(l,c)}return s&&Fi.applyDictionaryTextOverrides(l,i,s,null),l}static async createRenderExpressions(e,i){const r=[];for(const s of e){const n=s.valueExpressionInfo;if(!n||Fi._expressionToRenderExpression.has(n.expression))continue;const o=YMe(n.expression,i.spatialReference);r.push(o),o.then((a=>Fi._expressionToRenderExpression.set(n.expression,a)))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,i,r,s,n,o){const a={$view:{scale:n==null?void 0:n.scale}};for(const l of e){l.value&&typeof l.value=="object"&&bhe(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=qQe(l.value));const c=l.valueExpressionInfo;if(!c)continue;const h=Fi._expressionToRenderExpression.get(c.expression);h&&(l.value=Gde(h,i,a,r,o,s))}}static applyDictionaryTextOverrides(e,i,r,s,n="Normal"){if(e!=null&&e.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&Fi.applyDictionaryTextOverrides(a,i,r,s,e.type==="CIMTextSymbol"?e.textCase:n)}break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)return;for(const a of o)a&&Fi.applyDictionaryTextOverrides(a,i,r,s)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const a=s3e(o,r);e.textString=n3e(i,a,s,n)}}}}static applyOverrides(e,i,r,s){if(e.primitiveName){for(const n of i)if(n.primitiveName===e.primitiveName){const o=Nx(n.propertyName);if(s&&s.push({cim:e,nocapPropertyName:o,value:e[o]}),r){let a=!1;for(const l of r)l.primitiveName===e.primitiveName&&(a=!0);a||r.push(n)}n.value!=null&&(e[o]=n.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)Fi.applyOverrides(n,i,r,s);if(e.symbolLayers)for(const n of e.symbolLayers)Fi.applyOverrides(n,i,r,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const n of e.effects)Fi.applyOverrides(n,i,r,s);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const n of e.markerGraphics)Fi.applyOverrides(n,i,r,s),Fi.applyOverrides(n.symbol,i,r,s)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const r of e)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map((r=>Number(r)));if(e==="Color"){const r=new ze(i).toRgba();return r[3]*=255,r}return i}},Fi._expressionToRenderExpression=new Map,Fi);const WQe=Object.freeze(Object.defineProperty({__proto__:null,OverrideHelper:mj},Symbol.toStringTag,{value:"Module"})),QQe=96/72;let Hde=class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new CQe}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,i,r,s,n,o,a,l,c,h){if(!e)return null;const{data:y}=e;if(!y||y.type!=="CIMSymbolReference"||!y.symbol)return null;const{symbol:g}=y;o||(o=XT(g));const _=await mj.resolveSymbolOverrides(y,i,this._spatialReference,n,o,a,l),S=this._cimResourceManager,E=[];On.fetchResources(_,S,E),On.fetchFonts(_,S,E),E.length>0&&await Promise.all(E);const{width:C,height:M}=r;let P=WZ(o,C,M,s,h);const D=On.getEnvelope(_,P,S);if(!D)return null;D.x===1/0&&(D.x=C+2),D.y===1/0&&(D.y=-M/2),D.width===-1/0&&(D.width=C),D.height===-1/0&&(D.height=M);let F=1,U=0,G=0;switch(g.type){case"CIMPointSymbol":case"CIMTextSymbol":{let W=1;D.width>C&&(W=C/D.width);let X=1;D.height>M&&(X=M/D.height),s==="preview"&&(D.width<C&&(W=C/D.width),D.height<M&&(X=M/D.height)),F=Math.min(W,X),U=D.x+D.width/2,G=D.y+D.height/2}break;case"CIMLineSymbol":if(h){G=D.y+D.height/2,U=D.x+D.width/2;const W=D.width-C,X=D.height-M;P={paths:t3(P.paths,{xmin:-1*D.width/2+W,xmax:D.width/2-W,ymin:-1*D.height/2+X,ymax:D.height/2-X,width:D.width-2*W,height:D.height-2*X})}}else{(c||D.height>M)&&(F=M/D.height),G=D.y+D.height/2;const W=D.x*F+C/2,X=(D.x+D.width)*F+C/2,K=cn(P)?P.paths:Hr(P)?P.rings:null;if(K===null)throw new Error("Bad geometry, can't rasterise symbol!");K[0][0][0]-=W/F,K[0][2][0]-=(X-C)/F}break;case"CIMPolygonSymbol":if(h){G=D.y+D.height/2,U=D.x+D.width/2;const W=D.width-C,X=D.height-M;P={paths:t3(P.rings,{xmin:-1*D.width/2+W,xmax:D.width/2-W,ymin:-1*D.height/2+X,ymax:D.height/2-X,width:D.width-2*W,height:D.height-2*X})}}else{U=D.x+D.width/2,G=D.y+D.height/2;const W=D.x*F+C/2,X=(D.x+D.width)*F+C/2,K=D.y*F+M/2,de=(D.y+D.height)*F+M/2,{rings:ye}=P;W<0&&(ye[0][0][0]-=W,ye[0][3][0]-=W,ye[0][4][0]-=W),K<0&&(ye[0][0][1]+=K,ye[0][1][1]+=K,ye[0][4][1]+=K),X>C&&(ye[0][1][0]-=X-C,ye[0][2][0]-=X-C),de>M&&(ye[0][2][1]+=de-M,ye[0][3][1]+=de-M)}}const Q={type:"cim",data:{type:"CIMSymbolReference",symbol:_}};return this.rasterize(Q,C,M,U,G,F,o,1,P)}rasterize(e,i,r,s,n,o,a,l=0,c=null,h=window.devicePixelRatio||1){const{data:y}=e;if(!y||y.type!=="CIMSymbolReference"||!y.symbol)return null;const{symbol:g}=y,_=this._canvas,S=h*QQe;_.width=i*S,_.height=r*S,a||(a=XT(g)),c||(c=WZ(a,i,r,"legend")),_.width+=2*l,_.height+=2*l;const E=_.getContext("2d",{willReadFrequently:!0}),C=Ws.createIdentity();return C.translate(-s,-n),C.scale(o*S,-o*S),C.translate(i*S/2+l,r*S/2+l),E.clearRect(0,0,_.width,_.height),new Rde(E,this._cimResourceManager,C,!0).drawSymbol(g,c),E.getImageData(0,0,_.width,_.height)}};function JQe(t,e,i,r){return e==="esriGeometryPolygon"?{rings:NZ(t3(t.rings,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:e==="esriGeometryPolyline"?{paths:NZ(t3(t.paths,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:null}function WZ(t,e,i,r,s){const o=-e/2+1,a=e/2-1,l=i/2-1,c=-i/2+1;if(s&&(t==="esriGeometryPolygon"||t==="esriGeometryPolyline")){const h=JQe(s,t,e,i);if(h)return h}switch(t){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[o,0],[0,0],[a,0]]]};default:return r==="legend"?{rings:[[[o,l],[a,0],[a,c],[o,c],[o,l]]]}:{rings:[[[o,l],[a,l],[a,c],[o,c],[o,l]]]}}}const nAt=Object.freeze(Object.defineProperty({__proto__:null,CIMSymbolRasterizer:Hde},Symbol.toStringTag,{value:"Module"})),zC=new Hde(null),HE=Ei(Pr.size),QZ=Ei(Pr.maxSize),VO=Ei(Pr.lineWidth),ZQe=1;async function YQe(t,e,i){const r=e==null?void 0:e.size;let s=r!=null&&typeof r=="object"&&"width"in r?r.width:r,n=r!=null&&typeof r=="object"&&"height"in r?r.height:r;if(!s||!n)if(i==="esriGeometryPolygon")s=n=e.maxSize?Math.min(e.maxSize,HE):HE;else{const o=await yj(t,e,i);o&&(s=o.width,n=o.height),i==="esriGeometryPolyline"&&(s=e.maxSize?Math.min(e.maxSize,VO):VO),s=s!=null&&isFinite(s)?Math.min(s,QZ):HE,n=n!=null&&isFinite(n)?Math.max(Math.min(n,QZ),ZQe):HE}return e.style==="legend"&&i==="esriGeometryPolyline"&&(s=VO),{width:s,height:n}}async function yj(t,e={},i){var c;const r=e.cimOptions||e;i??(i=r.geometryType||XT((c=t==null?void 0:t.data)==null?void 0:c.symbol));const{feature:s,fieldMap:n,viewParams:o}=r,a=await mj.resolveSymbolOverrides(t.data,s,null,n,i,null,o);if(!a)return null;(t=t.clone()).data={type:"CIMSymbolReference",symbol:a},t.data.primitiveOverrides=void 0;const l=[];return On.fetchResources(a,zC.resourceManager,l),On.fetchFonts(a,zC.resourceManager,l),l.length>0&&await Promise.all(l),On.getEnvelope(a,null,zC.resourceManager)}async function XQe(t,e={}){var G,Q;const{node:i,opacity:r,symbolConfig:s}=e,n=s!=null&&typeof s=="object"&&"isSquareFill"in s&&s.isSquareFill,o=e.cimOptions||e,a=o.geometryType||XT((G=t==null?void 0:t.data)==null?void 0:G.symbol),l=await YQe(t,e,a),{feature:c,fieldMap:h}=o,y=e!=null&&e.geometry||n||a!=="esriGeometryPolygon"?"preview":"legend";let g=l;const _=l;if(e!=null&&e.geometry&&(a==="esriGeometryPolygon"||a==="esriGeometryPolyline")&&(ri(l.width)<200||ri(l.height)<200)){const X=l.width>l.height?Ei(200)*l.height/l.width:Ei(200);g={width:l.width>l.height?Ei(200):Ei(200)*l.width/l.height,height:X}}const S=await zC.rasterizeCIMSymbolAsync(t,c,g,y,h,a,null,o.viewParams,o.allowScalingUp,(Q=e==null?void 0:e.geometry)==null?void 0:Q.toJSON());if(!S)return null;const{width:E,height:C}=S,M=document.createElement("canvas");M.width=E,M.height=C,M.getContext("2d").putImageData(S,0,0);const P=ri(_.width),D=ri(_.height),F=new Image(P,D);F.src=M.toDataURL(),F.ariaLabel=e.ariaLabel??null,F.alt=e.ariaLabel??"",r!=null&&(F.style.opacity=`${r}`);let U=F;if(e.effectView!=null){const W={shape:{type:"image",x:0,y:0,width:P,height:D,src:F.src},fill:null,stroke:null,offset:[0,0]};U=F1([[W]],[P,D],e)}return i&&U&&i.appendChild(U),U}const KQe=Object.freeze(Object.defineProperty({__proto__:null,getCIMSymbolPreviewSize:yj,previewCIMSymbol:XQe},Symbol.toStringTag,{value:"Module"})),d8=30,p8=12,f8=24,qde=[255,255,255],r3=[200,200,200],Nm=[128,128,128],eJe=20,tJe=5;function iJe(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function rJe(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function sJe(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function nJe(t){return t.declaredClass==="esri.symbols.TextSymbol"}function oJe(t,e){const i=t.length-1;return t.map(((r,s)=>ide(r,s,i,e)))}async function aJe(t,e,i,r,s,n,o){const a=e.legendOptions,l=a==null?void 0:a.customValues,c=o||await uJe(t,i),h=e.stops,y=!!c,g=!!l,_=e.minSize!=null&&e.maxSize!=null,S=h&&h.length>1,E=!!e.target;if(!y||!g&&!(_||S&&!E))return;const C=TP(c);let M=!1,P=null,D=null;P=C&&!S?JM([e.minDataValue,e.maxDataValue]):l??await dJe(e,c,r,s==null?void 0:s.type);const F=t==null?void 0:t.authoringInfo,U=(F==null?void 0:F.type)==="univariate-color-size",G=U&&(F==null?void 0:F.univariateTheme)==="above-and-below",Q=!!Lu(t,"reference-size"),W=!!Lu(t,"spike");if(!P&&S&&(P=h.map((xe=>xe.value)),M=h.some((xe=>!!xe.label)),t.type==="flow"&&(P=JM(P)),M&&(D=h.map((xe=>xe.label)))),C&&P!=null&&(P==null?void 0:P.length)>2&&!G&&(P=[P[0],P[P.length-1]]),!P)return null;U&&(P==null?void 0:P.length)!==5&&(P=Jde({minSize:P[0],maxSize:P[P.length-1]}));const X=C?lJe(t,P):null,K=qVe(c),de=M?null:oJe(P,n);return(await Promise.all(P.map((async(xe,ee)=>{let le=C?X[ee]:await Ng(e,c,xe,r,s==null?void 0:s.type),Te=le;Q&&(le*=f8/e.maxSize||1,Te=f8);const ke=AJe(c,le,t,ee);return W&&ke.type==="cim"&&(Te=await yj(ke)),{value:xe,symbol:ke,label:M?D[ee]:de[ee],size:Te,outlineSize:K}})))).reverse()}function lJe(t,e){const i=t==null?void 0:t.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let s=[p8,d8];if(r){const n=e[0],o=e[e.length-1],a=p8,l=d8;s=e.map((c=>a+(c-n)/(o-n)*(l-a)))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&s.reverse(),s}function cJe(t,e){var o;const i=t.classBreakInfos,r=i.length,s=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return((o=t.visualVariables)==null?void 0:o.some((a=>a.type==="color")))&&(s.type.includes("3d")?Wde(s):Qde(s)),s}async function uJe(t,e){var s,n,o,a,l;if(t.type==="flow")return rde(t,e);if(t.type==="pie-chart")return new dr({color:null,outline:(s=t.outline)!=null&&s.width?t.outline:new br});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const c=t.classBreakInfos;i=c&&c[0]&&c[0].symbol,r=c.length>1}else if(t.type==="unique-value"){const c=t.uniqueValueInfos;i=(n=c==null?void 0:c[0])==null?void 0:n.symbol,r=c!=null&&c.length>1}if(!i||hJe(i))return null;if(i=i.clone(),e||r)if(i.type.includes("3d"))Wde(i);else if(Lu(t,"reference-size")&&i.type==="cim")KB(i,{color:e??(t.type!=="class-breaks"?new ze(r3):null)});else if(Lu(t,"spike")&&i.type==="cim"){const c=new ze(r3),h=new ze(Nm),y=((o=i.data.symbol)==null?void 0:o.type)==="CIMPointSymbol"?i.data.symbol:null,g=!!((l=(a=y==null?void 0:y.symbolLayers)==null?void 0:a.find((({type:E})=>E==="CIMSolidStroke")))!=null&&l.colorLocked);let _,S=e??void 0;if(S){const E=Che(S),C=Nce();(!C&&E>225||C&&E<25)&&(S=c,_=g?h:c)}else S=c,_=g?h:c;ode(i,{color:S,strokeColor:_})}else Qde(i);return i}function hJe(t){var e;return eh(t)?((e=t.symbolLayers)==null?void 0:e.some((i=>(i==null?void 0:i.type)==="fill")))??!1:(t==null?void 0:t.type.includes("fill"))??!1}function Wde(t){t.type==="line-3d"?t.symbolLayers.forEach((e=>{e.material={color:Nm}})):t.symbolLayers.forEach((e=>{var i;e.type!=="icon"||(i=e.resource)!=null&&i.href?e.material={color:r3}:(e.material={color:qde},e.outline={color:Nm,size:1.5})}))}function Qde(t){var i,r;const e=Nce();t.type==="cim"?vhe(t,new ze(r3)):t.type.includes("line")?t.color=Nm:(t.color=e?Nm:qde,t.type==="simple-marker"&&(t.outline?((r=(i=t.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(t.outline.color=Nm):t.outline={color:Nm,width:1.5}))}async function dJe(t,e,i,r){const s=(await Ie(async()=>{const{getSizeRangeAtScale:a}=await Promise.resolve().then(()=>V0);return{getSizeRangeAtScale:a}},void 0,import.meta.url)).getSizeRangeAtScale(t,i,r),n=s&&Jde(s);if(!s||!n)return;let o=n.map((a=>pJe(a,t,s)));o=JM(o);for(let a=1;a<o.length-1;a++){const l=await fJe(t,e,o[a],o[a-1],i,r);l&&(o[a]=l[0],n[a]=l[1])}return o}function Jde(t){const e=t.minSize,i=t.maxSize,r=tJe,s=(i-e)/(r-1),n=[];for(let o=0;o<r;o++)n.push(e+s*o);return n}function pJe(t,e,i){const r=i.minSize,s=i.maxSize,n=e.minDataValue,o=e.maxDataValue;let a;return t<=r?a=n:t>=s?a=o:a=(t-r)/(s-r)*(o-n)+n,a}async function fJe(t,e,i,r,s,n){const o=await Ng(t,e,i,s,n),a=await Ng(t,e,r,s,n),l=QM(i),c=l.fractional,h=eJe;let y=l.integer,g=null,_=null;i>0&&i<1&&(g=10**c,y=QM(i*=g).integer);for(let S=y-1;S>=0;S--){const E=10**S;let C=Math.floor(i/E)*E,M=Math.ceil(i/E)*E;g!=null&&(C/=g,M/=g);let P=(C+M)/2;[,P]=JM([C,P,M],{indexes:[1]});const D=await Ng(t,e,C,s,n),F=await Ng(t,e,M,s,n),U=await Ng(t,e,P,s,n),G=RC(o,D,a,null),Q=RC(o,F,a,null),W=RC(o,U,a,null);let X=G.previous<=h,K=Q.previous<=h;if(X&&K&&(G.previous<=Q.previous?(X=!0,K=!1):(K=!0,X=!1)),X?_=[C,D]:K?_=[M,F]:W.previous<=h&&(_=[P,U]),_)break}return _}async function Ng(t,e,i,r,s){const{getSize:n}=await Ie(()=>Promise.resolve().then(()=>V0),void 0,import.meta.url);return n(t,i,{scale:r,view:s,shape:e.type==="simple-marker"?e.style:null})}function AJe(t,e,i,r){var n,o;((n=i==null?void 0:i.authoringInfo)==null?void 0:n.type)==="univariate-color-size"&&((o=i==null?void 0:i.authoringInfo)==null?void 0:o.univariateTheme)==="above-and-below"&&i.type==="class-breaks"&&(t=cJe(i,r));const s=t.clone();if(eh(s))TP(s)||s.symbolLayers.forEach((a=>{a.type!=="fill"&&(a.size=e)}));else if(iJe(s))s.size=e;else if(rJe(s)){const a=s.width,l=s.height;s.height=e,s.width=e*(a/l)}else sJe(s)?s.width=e:nJe(s)?s.font&&(s.font.size=e):s.type==="cim"&&Lu(i,"reference-size")?KB(s,{innerDotSize:e,outerRingSize:f8}):s.type==="cim"&&Lu(i,"spike")&&ode(s,{defaultHeight:e,primitiveOverrides:null});return s}function mJe(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,s=1e6,n=Math.abs(t)>=s?"compact":"standard";return E0(t,{notation:n,minimumSignificantDigits:2,maximumSignificantDigits:r})}const JZ=16,yJe="https://utility.arcgis.com/sharing/tools/legend",gJe="esri.layers.ImageryLayer",vJe="esri.layers.ImageryTileLayer",bJe="esri.layers.WCSLayer",qE=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,wJe=new Ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),WE=new dr({size:6,outline:{color:[128,128,128,.5],width:.5}}),_Je=new Pn({style:"solid"});function A8(t){return t.type==="flow"}function Zde(t){return t.type==="vector-field"}function Yde(t){return t.type==="raster-colormap"}function Xde(t){return t.type==="raster-stretch"}function Kde(t){return t.type==="raster-shaded-relief"}function Fg(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function om(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function am(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function epe(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function SJe(t){return gj(t)||vj(t)||bj(t)||xJe(t)}function xJe(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function gj(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function vj(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function bj(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function tpe(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function ipe(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function $Je(t,e){return Fg(t)||om(t)||am(t)||epe(t)||tpe(t)||ipe(t)?e.type==="2d"||Ahe(t):Xde(t)||Yde(t)||Kde(t)||gj(t)||vj(t)||bj(t)||Zde(t)||A8(t)}function EJe(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function GO(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function IJe(t){return t.declaredClass==="esri.layers.VoxelLayer"}function CJe(t){return t.declaredClass==="esri.layers.WMSLayer"}function TJe(t){return t.declaredClass==="esri.layers.WMTSLayer"}function HO(t){return t.declaredClass==="esri.layers.MapImageLayer"}function ZZ(t){return t.declaredClass==="esri.layers.TileLayer"}function Py(t){return t.declaredClass===gJe}function QE(t){return t.declaredClass===vJe}function MJe(t){return t.declaredClass===bJe}function kJe(t){return t.type==="stretch-ramp"}function PJe(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"}function LJe(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"&&(e==null?void 0:e.univariateTheme)==="above-and-below"}function YZ(t){return"sublayers"in t}function XZ(t){return t&&"symbol"in t}async function fh(t,e){const i=await Dk("esri/widgets/Legend/t9n/Legend");return t!=="previewTemplateAriaLabel"||e||(t="previewAriaLabel"),I0(i[t],{label:e})}function RJe(t,e){const{field:i,field2:r,field3:s,fieldDelimiter:n,valueExpression:o}=t;if(!i)return null;const a=!i&&!o||!r&&!s?[e]:e==null?void 0:e.toString().split(n||""),l=i?{[i]:a==null?void 0:a[0]}:null;return l&&(r&&(l[r]=a==null?void 0:a[1]),s&&(l[s]=a==null?void 0:a[2])),l}const OJe=new dr({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Ly={},Dr=class extends et{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new qe,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this.addHandles([ll((()=>this.children),"change",(e=>{const{added:i,removed:r}=e;i.forEach((s=>{const n=`activeLayerInfo-ready-watcher-${s.layer.uid}`;this.addHandles(He((()=>s.ready),t,wr),n)})),r.forEach((s=>this.removeHandles(s.layer.uid))),t()}))]),this.keepCacheOnDestroy||(Ly={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Ly=null),this._layerDefinitionExpressionClause=null}get effectList(){const t=this.layer;let e=null;return"effect"in t&&t.effect&&(e=new Dl,e.effect=t.effect,e.endTransition(),e.scale=this.scale),e}get opacity(){var s;const t=this.layer.opacity,e=(s=this.parent)==null?void 0:s.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return e!=null?e*t:r!=null?r*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var t;return((t=this.view)==null?void 0:t.scale)??0}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?!!("displayFilterInfo"in t&&t.displayFilterInfo&&am(t.renderer))||this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const e=Array.from(t,(i=>{var r;if(Yse(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const s=i.layerDefinition,n=s==null?void 0:s.drawingInfo,o=n&&Ake(n.renderer),a=wJe.read(s.geometryType);return o?this._getRendererLegendElements(o,{title:i.name,geometryType:a}):(be.getLogger(this).warn("drawingInfo not available!"),null)}return null}));try{const i=[],r=await Promise.allSettled(e);for(const s of r)if(s.status==="fulfilled")for(const n of s.value??[])i.push(n);this.legendElements=i,this.notifyChange("ready")}catch(i){be.getLogger(this).warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[],this.notifyChange("ready")}catch(e){be.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForFeatureReduction(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[],this.notifyChange("ready")}catch(e){be.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForTools(){var e,i;const t=this.layer;if(IJe(t))this._constructLegendElementsForVoxelLayer();else if(TJe(t))this._constructLegendElementsForWMTSlayer();else if(CJe(t))await this._constructLegendElementsForWMSSublayers();else if(EJe(t))await this._constructLegendElementsForBuildingSceneLayer();else if(HO(t)||ZZ(t)||GO(t))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(Py(t)){const s=t;r=(((e=s==null?void 0:s.rasterFunction)==null?void 0:e.functionName)||"default")+"_"+((i=t.bandIds)!=null&&i.length?t.bandIds.join(""):"###")}if(QE(t)||t.type==="link-chart")return;await this._getLegendLayers(`${t.uid}-${r}`).then((async s=>{this.legendElements=[],this.notifyChange("ready");const n=s.map((async o=>{if(Py(t)){const l=He((()=>[t.rasterFunction,t.bandIds]),(()=>vx((async()=>{Ly.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()}))()));this.addHandles(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a!=null&&a.infos.length&&(Py(t)&&(a.title=t.title),this.legendElements.push(a)),this.notifyChange("ready")}));await Promise.allSettled(n)})).catch((s=>{be.getLogger(this).warn("Request to server for legend has failed!",s)}))}}async _isLayerInCurrentView(){const t=this.layer,e=this.layerView,i=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!i&&!(e&&"createQuery"in t&&"queryFeatureCount"in t))return!0;await A0((()=>!e.updating));const r=i?"createQuery"in e&&e.createQuery():"createQuery"in t&&t.createQuery();return r?(r.geometry=this.view.extent,(i?"queryFeatureCount"in e&&await e.queryFeatureCount(r):"queryFeatureCount"in t&&await t.queryFeatureCount(r))!==0):!0}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){return this.children.some((t=>t.ready))}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t?t.valueExpression:null;if(qE.test(e))return!0;const i="visualVariables"in t?t.visualVariables:null;return!!(i!=null&&i.some((r=>this._isScaleDrivenSizeVariable(r))))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){var e;switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some((i=>this._isScaleDrivenSymbol(i.symbol)));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!((e=t.uniqueValueInfos)!=null&&e.some((i=>this._isScaleDrivenSymbol(i.symbol))))}return!1}_isScaleDrivenSymbol(t){if((t==null?void 0:t.type)==="cim"){const{primitiveOverrides:e,minScale:i,maxScale:r}=t.data,s=(e==null?void 0:e.some((n=>{var o;return/\$view\.scale/.test(((o=n.valueExpressionInfo)==null?void 0:o.expression)||"")})))??!1;return i!=null||r!=null||s}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,i=e.minSize,r=e.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||qE.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some((i=>this._isLayerScaleDriven(i)));const e=t.parent;if(t.loaded===!1&&e&&HO(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const i of e.sourceJSON.layers??[])if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var r;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const t=this.layer;this.addHandles(He((()=>t.currentVariableId),(()=>this._constructLegendElementsForVoxelLayer())),"voxel-current-variable"),this.addHandles(He((()=>t.getVariableStyles()),(()=>this._constructLegendElementsForVoxelLayer())),"voxel-style-watcher");const e=t.getVariableStyle(null),i=[];if(e){if((r=e.uniqueValues)!=null&&r.length){const s=[];e.uniqueValues.forEach((n=>{n.enabled&&s.push({label:n.label||`${n.value}`,value:n.value,symbol:new Pn({color:n.color,outline:null})})})),s.length&&i.push({type:"symbol-table",title:e.label,infos:s})}else if(e.transferFunction){const{colorStops:s,stretchRange:n}=e.transferFunction,o=s.toArray().reverse(),a=n.map(((c,h)=>`${h===0?ede:tde} ${mJe(c)}`)).reverse(),l=o.map((c=>({color:c.color,value:null,label:null})));l[0].label=a[0],l[l.length-1].label=a[1],i.push({type:"color-ramp",title:e.label,infos:l,preview:rm(o.map((c=>c.color)),{ariaLabel:await fh("previewColorRampAriaLabel")})})}}await this._generatePreviewsForLegendElements(i,{opacity:t.opacity}),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var i,r;this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const t=this.layer.activeLayer;this.addHandles(He((()=>{const{layer:s}=this;return s&&"activeLayer"in s&&s.activeLayer}),(()=>this._constructLegendElementsForWMTSlayer())),"wmts-activeLayer-watcher");const e=t.styleId?(r=(i=t.styles)==null?void 0:i.find((({id:s})=>s===t.styleId)))==null?void 0:r.legendUrl:void 0;e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this.addHandles(He((()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers}),(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){var o,a;const i=this.layer,r=[];this.addHandles(t.on("change",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher");const s=((a=(o=this.sublayerIds)==null?void 0:o.map((l=>i.findSublayerById(l))))==null?void 0:a.filter(os))??[],n=s.length?s:t.toArray();for(const l of n){const c=He((()=>[l.title,l.visible,l.legendEnabled]),(()=>this._constructLegendElementsForWMSSublayers()));if(this.addHandles(c,"wms-sublayers-watcher"),!this.respectLayerVisibility||l.visible&&l.legendEnabled){const h=await this._generateSymbolTableElementForWMSSublayer(l,e);h!=null&&h.infos.length&&r.unshift(h)}}return r}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter((r=>r));return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){var o;let i=t.legendUrl;if(!i)return;const r={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(i=EI(i,e));let s=null;const n=(o=t.layer)==null?void 0:o.opacity;try{s=(await ei(i,{responseType:"image"})).data,s&&(s.style.opacity=n)}catch{}return r.infos.push({src:i,preview:s,opacity:n}),r}_getLegendLayers(t,e){const i=Ly&&Ly[t];return i?Promise.resolve(i):this._legendRequest(e).then((r=>{const s=r.layers;return Ly[t]=s,s}))}_legendRequest(t){var s;const e=this.layer;let i={f:"json",dynamicLayers:t};if(Py(e)){const n=e.exportImageServiceParameters.rasterFunction;if(n&&(i.renderingRule=JSON.stringify(((s=n.functionDefinition)==null?void 0:s.toJSON())||n.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:o,viewId:a,customParameters:l}=e;i={raster:o,viewId:a,...i,...l}}}let r=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){const n=r.indexOf("?");n>-1?r=r.slice(0,n)+"/legend"+r.slice(n):r+="/legend"}else{const n=r.toLowerCase().indexOf("/rest/"),o=n===-1?r:r.slice(0,n)+r.slice(n+5);r=yJe+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return ei(r,{query:i}).then((n=>n.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;this.addHandles(He((()=>t.sublayers),(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){be.getLogger(this).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this.addHandles(t.on("change",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");const r=t.toArray();for(const s of r){const n=He((()=>["renderer"in s&&s.renderer,s.opacity,s.title,s.visible]),(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this.addHandles(n,"sublayers-watcher"),!this.respectLayerVisibility||s.visible){const o=(s==null?void 0:s.opacity)!=null?s.opacity:null,a=o!=null?o*e:e;if(s.type==="building-group"){const l={type:"symbol-table",title:s.title,infos:[]},c=await this._generateLegendElementsForBuildingSublayers(s.sublayers,a);l.infos.push(...c),i=[l,...i]}else s.renderer&&(i=[...await this._getRendererLegendElements(s.renderer,{title:s.title,opacity:a,sublayer:s}),...i])}}return i.filter((s=>!!s&&(!("infos"in s)||!s.infos||s.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;if(HO(t)||ZZ(t)||GO(t)){this.addHandles(He((()=>t.sublayers),(()=>this._constructLegendElementsForSublayers)),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){be.getLogger(this).warn("Request to server for legend has failed!",e)}}}async _generateLegendElementsForSublayers(t,e,i){const r=this.layer;let s=[];this.addHandles(t.on("change",(()=>this._constructLegendElementsForSublayers())),"sublayers-watcher");let n=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(n=GO(r)?this.sublayerIds.map((o=>r.findSublayerForSubtypeCode(o))).filter(os):this.sublayerIds.map((o=>r.findSublayerById(o))).filter(os));for(const o of n){const a=He((()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled]),(()=>this._constructLegendElementsForSublayers()));if(this.addHandles(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const l=(o==null?void 0:o.opacity)!=null?o.opacity:null,c=l!=null?l*e:e,h=!YZ(o)||o.originIdOf("renderer")>xt.SERVICE&&!o.sublayers;if(o.renderer&&h)await o.load(),s=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:c,sublayer:o}),...s];else if(YZ(o)){const y=await this._generateSymbolTableElementForSublayer(o,c,i);y&&s.unshift(y)}}}return s.filter((o=>!!o&&(!("infos"in o)||!o.infos||o.infos.length>0)))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const s=this.layer,n=t.source;let o=null;if(!(!n||n.type==="map-layer"&&n.mapLayerId===t.id&&(!n.gdbVersion||n.gdbVersion===("gdbVersion"in s&&s.gdbVersion)))||t.originIdOf("renderer")>xt.SERVICE||t.originIdOf("labelingInfo")>xt.SERVICE||t.originIdOf("labelsVisible")>xt.SERVICE){const l=new Ua({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=o||`${s.uid}-default`;(await this._getLegendLayers(a,o)).forEach((l=>i.set(l.layerId,l)))}const r=i.get(t.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&t.sublayers){const s=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(r,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){if(!(t!=null&&t.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=e==null?void 0:e.renderer;let s=(e==null?void 0:e.title)||t.layerName;if(r&&(!e||(e==null?void 0:e.originIdOf("renderer"))>xt.SERVICE)){const a=(e==null?void 0:e.title)||this._getRendererTitle(r,e);a&&(s&&typeof a!="string"&&"title"in a&&(a.title=s),s=a)}const n={type:"symbol-table",title:s,legendType:t.legendType||null,infos:[]},o=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach((a=>{var c;const l={type:"symbol-table",title:a.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter((h=>h.groupId===a.id)),t.layerId,i)};((c=l.infos)==null?void 0:c.length)>0&&n.infos.push(l)})):n.infos=this._generateSymbolTableElementInfosForLegendLayer(o,t.layerId,i),n.infos.length>0?n:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i){return t.map((r=>{let s=r.url;if(r.imageData&&r.imageData.length>0)s=`data:image/png;base64,${r.imageData}`;else{if(s.indexOf("http")===0)return null;s=wwe(`${this.layer.url}/${e}/images/${s}`)}return{label:r.label,src:s,opacity:i??this.opacity,width:r.width,height:r.height}})).filter(os)}_isSublayerInScale(t){const e=t.minScale||0,i=t.maxScale||0;return!(e>0&&e<this.scale||i>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let r=null,s=null,n=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(t.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),t.maxScale===0&&i.tileInfo&&(s=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,s=Math.max(i.maxScale,t.maxScale)),(r>0&&r<this.scale||s>this.scale)&&(n=!1),n}_sanitizeLegendForSublayer(t,e){var o;if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;const i=e.renderer,r=t.some((a=>a.values));let s=0,n=null;return r&&t.some(((a,l)=>(a.values||(s=l,n=a,n.label||(n.label="others")),n!=null))),i?i.type==="unique-value"?n&&(t.splice(s,1),t.push(n)):i.type==="class-breaks"&&(n&&t.splice(s,1),(o=i.legendOptions)!=null&&o.order||t.reverse(),n&&t.push(n)):n&&(t.splice(s,1),t.push(n)),t}async _getRendererLegendElements(t,e={}){if(!$Je(t,this.view))return be.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(SJe(t))return this._constructPointCloudRendererLegendElements(t,e);if(tpe(t))return this._constructDotDensityRendererLegendElements(t);const i=await this._loadRenderer(t);return ipe(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e):[]}_getPointCloudRendererTitle(t){var e;return(((e=t.legendOptions)==null?void 0:e.title)||t.field)??""}async _constructPointCloudRendererLegendElements(t,e={}){var o;const i=e.title,r=[];let s=null,n=null;if(gj(t))s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach((a=>{s.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(WE,a.color)})}));else if(vj(t)){const a=t.stops;let l=null;if(a!=null&&a.length&&(a.length===1&&(l=a[0].color),!l)){const h=a[0].value,y=a[a.length-1].value;h!=null&&y!=null&&(l=nde(h+(y-h)/2,a))}s={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(WE,l||WE.color)}]};const c=eHe(t.stops??[])??[];n={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:c,preview:rm(c.map((h=>h.color)),{ariaLabel:await fh("previewColorRampAriaLabel")})}}else bj(t)&&(s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},(o=t.colorUniqueValueInfos)==null||o.forEach((a=>{s.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(WE,a.color)})})));return s!=null&&s.infos.length&&r.push(s),n!=null&&n.infos.length&&r.push(n),await this._generatePreviewsForLegendElements(r,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!t.colorModulation}}),r}async _getElementInfoForDotDensity(t,e){const{color:i,label:r,valueExpressionTitle:s}=e,{backgroundColor:n,outline:o,dotSize:a}=t,l=this.effectList,c=l==null?void 0:l.effects.map((M=>M.toJSON())),h=NT(c),y=await fh("previewTemplateAriaLabel",r||s),g=a+"-"+i+"-"+n+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+h,_=this._dotDensityUrlCache,S=_.has(g)?_.get(g):LGe(t,i,{ariaLabel:y});_.set(g,S);const E={shape:{type:"image",x:0,y:0,width:S.width,height:S.height,src:S.src},fill:null,stroke:null,offset:[0,0]},C=F1([[E]],[S.width,S.height],{effectView:this.effectList,ariaLabel:y});return{opacity:1,src:S.src,preview:C,width:S.width,height:S.height}}async _constructDotDensityRendererLegendElements(t){var s;const e=t.calculateDotValue(this.view.scale),i=(s=t.legendOptions)==null?void 0:s.unit,r={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};for(const n of t.attributes){const o=await this._getElementInfoForDotDensity(t,n);o.label=n.label||n.valueExpressionTitle||n.field,r.infos.push(o)}return[r]}async _constructPieChartRendererLegendElements(t){var o,a,l,c;const e=[];let i=null;const r=t.outline;t.attributes.forEach((h=>{const y=new dr({color:h.color,outline:r}),g=h.label||h.valueExpressionTitle||h.field;e.push({label:g,symbol:y})}));const s=e.length?[...e]:[];if((o=t.othersCategory)!=null&&o.color&&((a=t.othersCategory)==null?void 0:a.threshold)!==0){const h=new dr({color:t.othersCategory.color,outline:r});i=t.othersCategory.label||"Other",e.push({label:i,symbol:h})}if((l=t.defaultColor)!=null&&l.a){const h=new dr({color:t.defaultColor,outline:r});e.push({label:t.defaultLabel,symbol:h})}const n=await this._getVisualVariableLegendElements(t,this.layer)||[];if(e.length){n.unshift({type:"symbol-table",title:null,infos:e});const h=s.filter((g=>g.label!==i)).map((g=>g.symbol.color)).filter(Boolean),y=RGe(h,{holePercentage:t.holePercentage,backgroundColor:(c=t.backgroundFillSymbol)==null?void 0:c.color,effectList:this.effectList,outline:r,ariaLabel:await fh("previewPieChartAriaLabel")});n.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:e,preview:y})}return await this._generatePreviewsForLegendElements(n,{opacity:this.layer.opacity,effectView:this.effectList}),n}async _getWhereClause(t,e,i){const r=await dz(t,i),s=new Set,{field:n,field2:o,field3:a}=e;Pf(s,i,[n,o,a]),un(s,i,e.valueExpression);const l=new Set(Array.from(s,(h=>h.toLowerCase()))),c=r==null?void 0:r.fieldNames.map((h=>h.toLowerCase()));return c!=null&&c.some((h=>!l.has(h)))?null:r}async _processDefinitionExpression(t,e){if(!("definitionExpression"in t))return;const i=t.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,e,t.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(t,e){if(!("displayFilterInfo"in t))return;const i=t.displayFilterInfo?JEe(t.displayFilterInfo,this.view):null;return i!=null&&i.where?this._layerDisplayFilterId!==(i==null?void 0:i.id)&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,e,t.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=i==null?void 0:i.id,i}async _constructRendererLegendElements(t,e={}){var M,P,D,F,U,G,Q;const{title:i,sublayer:r}=e,s=r||this.layer,n=Lu(t,"reference-size"),o=Lu(t,"spike");let a=null;am(t)&&(await this._processDefinitionExpression(s,t),a=await this._processDisplayFilter(s,t)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const l=await this._getVisualVariableLegendElements(t,s)||[],c={type:"symbol-table",title:i||this._getRendererTitle(t,s),infos:[]};let h=null,y=!1;const g=new Set;if(A8(t)&&!this._hasSizeRamp){const W=await rde(t);c.infos.push({label:null,symbol:W})}else if(PJe(t)){let W=i;const X=LJe(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",K=l.findIndex((le=>le.type==="color-ramp")),de=K!==-1?l.splice(K,1)[0]:null,ye=l.findIndex((le=>le.type==="size-ramp")),xe=ye!==-1?l.splice(ye,1)[0]:null,ee=[];de&&(W=de.title,ee.push(de)),xe&&(W=xe.title,ee.push(xe)),ee.length>0&&l.push({type:X,title:W,infos:ee})}else if(epe(t)){const W=rHe(t);l.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,s),infos:W,preview:rm(W.map((X=>X.color)),{effectList:this.effectList,ariaLabel:await fh("previewColorRampAriaLabel")})})}else if(am(t)){const W=t.authoringInfo;if(W&&W.type==="relationship"){const{numClasses:X,field1:K,field2:de}=W,ye=W.focus;if(X&&K&&de){const xe=[K,de];let ee=Yhe(ye)||0;for(const Te of xe){const{field:ke,normalizationField:De,label:Ke}=Te,vt=Ke||{field:this._getFieldAlias(ke,s),normField:De&&this._getFieldAlias(De,s)},Pt=OJe.clone();Pt.angle=ee,c.infos.push({label:vt,symbol:Pt}),g.add(Pt),ee+=90}const le=PGe({focus:ye,numClasses:X,infos:t.uniqueValueInfos??[]});l.unshift(le)}}else if(Py(this.layer)||QE(this.layer))(M=t.uniqueValueInfos)==null||M.forEach((X=>{X.symbol&&this._checkClausesForUVR(t,X.value)&&c.infos.push({label:X.label||X.value,value:X.value,symbol:X.symbol})}));else{const{field:X,field2:K,field3:de,fieldDelimiter:ye,valueExpression:xe,defaultSymbol:ee}=t,le=!(!X&&!xe||!K&&!de),Te=this._layerDisplayFilterClause?a==null?void 0:a.title:null,ke=[];if((P=t.uniqueValueGroups)==null||P.forEach((De=>{var vt;const Ke={type:"symbol-table",title:Te||De.heading,infos:[]};(vt=De.classes)==null||vt.forEach((Pt=>{const{symbol:Zt,values:Ar}=Pt;if(Zt){const ks=[],Ps=[];for(const po of Ar??[]){const{value:J0,value2:Z0,value3:Y0}=po,ih=[],Vd=[];(X||xe)&&(ih.push(J0),Vd.push(this._getDomainName(X,J0,s))),K&&(ih.push(Z0),Vd.push(this._getDomainName(K,Z0,s))),de&&(ih.push(Y0),Vd.push(this._getDomainName(de,Y0,s))),ks.push(le?ih.join(ye||""):ih[0]),Ps.push(Vd.join(" - "))}const jn=ks.join(", ");let pn=Pt.label;if(!pn){const po=Ps.filter(Boolean);pn=po.length?po.join(", "):jn}const fl=Zt.clone();fl.type==="cim"&&n&&KB(fl,{innerDotSize:.5*JZ,outerRingSize:JZ}),ks.some((po=>this._checkClausesForUVR(t,po)))&&Ke.infos.push({label:pn,value:jn,symbol:fl})}})),Ke.infos.length&&ke.push(Ke)})),ke.length){const De=ke[0];if(ke.length===1&&"title"in De&&!De.title){const Ke=((D=De.infos)==null?void 0:D.filter(XZ))??[];c.infos.push(...Ke)}else ee&&(ke.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:ee}]}),y=!0),c.infos.push(...ke);i||(F=t.legendOptions)!=null&&F.title||t.valueExpressionTitle||(c.title=null)}}t.defaultSymbol&&!y&&(c.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),y=!0)}else if(om(t)){if(!n&&!o){if(h=this._isUnclassedRenderer(t),!h||!this._hasSizeRamp){const W=t.classBreakInfos.filter((({symbol:K})=>K)),X=((U=t.legendOptions)==null?void 0:U.order)==="ascending-values";for(const{label:K,minValue:de,maxValue:ye,symbol:xe}of W){const ee={label:K||(h?null:`${de} - ${ye}`),value:[de,ye],symbol:xe};X?c.infos.push(ee):c.infos.unshift(ee)}h&&(c.title=null),this._updateInfosForClassedSizeRenderer(t,c.infos)}t.defaultSymbol&&!h&&(c.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),y=!0)}}else if(Xde(t))if(QE(this.layer)||MJe(this.layer)){const W=await this._constructTileImageryStretchRendererElements(t);kJe(W)?l.push(W):c.infos=W}else{const W=this.layer;let X,K;(G=t.customStatistics)!=null&&G.length&&({min:X,max:K}=t.customStatistics[0]);let de=[],ye=W.serviceRasterInfo;if(W.rasterFunction)try{ye=await W.generateRasterInfo(W.rasterFunction)}catch{}const xe=HM(ye.pixelType);if(ye.bandCount===1){const ee=((Q=W.bandIds)==null?void 0:Q[0])||0;X=X??(ye.statistics?ye.statistics[ee].min:xe[0]),K=K??(ye.statistics?ye.statistics[ee].max:xe[1]),X||K?l.push(await this._getStretchLegendElements(t,{min:X,max:K})):this._getServerSideLegend()}else if(W.bandIds&&W.bandIds.length===1)X=X??(ye.statistics?ye.statistics[W.bandIds[0]].min:xe[0]),K=K??(ye.statistics?ye.statistics[W.bandIds[0]].max:xe[1]),X||K?l.push(await this._getStretchLegendElements(t,{min:X,max:K})):this._getServerSideLegend();else if(ye.bandCount>=3){const{bandInfos:ee}=ye,{bandIds:le}=W;ee.length>=ye.bandCount?(le==null?void 0:le.length)===3?(de=le.map((Te=>ee[Te].name)),c.infos=this._createSymbolTableElementMultiBand(de)):W.format==="lerc"?(de=[0,1,2].map((Te=>ee[Te].name)),c.infos=this._createSymbolTableElementMultiBand(de)):this._getServerSideLegend():W.format==="lerc"?(de=["band1","band2","band3"],c.infos=this._createSymbolTableElementMultiBand(de)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(Yde(t))t.colormapInfos.forEach((W=>{c.infos.push({label:W.label,value:W.value,symbol:this._getAppliedCloneSymbol(_Je,W.color)})}));else if(Fg(t)){let W=t.symbol;switch(e.geometryType){case"point":W="pointSymbol"in s?s.pointSymbol:null;break;case"polyline":W="lineSymbol"in s?s.lineSymbol:null;break;case"polygon":W="polygonSymbol"in s?s.polygonSymbol:null}const X=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&X&&c.infos.push({label:t.label,symbol:W})}else if(Zde(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),c.title=t.attributeField;const W=t.getClassBreakInfos();W!=null&&W.length?W.forEach((X=>{c.infos.push({label:X.minValue+" - "+X.maxValue,symbol:X.symbol})})):c.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else Kde(t)&&l.push(await this._getStretchLegendElements(t,{min:0,max:255}));const _=t.defaultSymbol;!_||y||Fg(t)||h&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||l.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:_}]}),c.infos.length&&l.unshift(c);const S=e.opacity==null?this.opacity:e.opacity,E=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),C=Py(this.layer)||QE(this.layer);return await this._generatePreviewsForLegendElements(l,{opacity:S,symbolConfig:{isTall:E,isSquareFill:C},effectView:this.effectList},{defaultSymbol:_,arrowMarkerSymbols:g}),t=null,l}_checkClausesForUVR(t,e){const i=RJe(t,e);return!i||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i))}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(t){const e=t==null?void 0:t.infos;return e?e.reduce(((i,r)=>i.concat(this._getAllInfos(r))),[]):[t]}async _constructTileImageryStretchRendererElements(t){var a,l,c;const e=this.layer,i=e.symbolizer.rasterInfo??e.raster.rasterInfo;let r,s;const n=(a=t==null?void 0:t.customStatistics)!=null&&a.length?t.customStatistics:i==null?void 0:i.statistics;if(n)({min:r,max:s}=n[0]);else{const h=HM(i.pixelType);r=h[0],s=h[1]}if(e.hasStandardTime()&&(r=e.getStandardTimeValue(r),s=e.getStandardTimeValue(s)),i.bandCount===1||((l=e.bandIds)==null?void 0:l.length)===1)return this._getStretchLegendElements(t,{min:r,max:s});const o=((c=e==null?void 0:e.bandIds)!=null&&c.length?e.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map((h=>i.bandInfos[h].name));return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)}async _getStretchLegendElements(t,e){const i=t.colorRamp,r=iHe(i,e);return{type:"stretch-ramp",title:"",infos:r,preview:rm(r.map((s=>s.color)),{ariaLabel:await fh("previewColorRampAriaLabel")})}}_getClusterSymbol(){var r;const t=this.layer,e="featureReduction"in t&&t.featureReduction,i=e&&"symbol"in e&&e.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:e&&"symbol"in e?e.symbol:null}async _getSizeLegendElement(t,e,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(e):t,infos:await aJe(i,e,await t8(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach(((r,s)=>{e.push({label:{colorName:i[s],bandName:r},src:QGe[s],opacity:this.opacity??1})})),e}_updateInfosForClassedSizeRenderer(t,e){const i=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",r=t.classBreakInfos.some((s=>TP(s.symbol)));if(i&&r){const s=d8,n=p8,o=t.classBreakInfos.length,a=(s-n)/(o>1?o-1:o);e.forEach(((l,c)=>{l.size=s-a*c}))}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let r=0;r<t.length&&(!e||!i);r++){const s=t[r];s.type==="size"&&(s.axis==="height"&&(e=!0),s.axis==="width-and-depth"&&(i=!0))}return e&&i}async _generatePreviewsForLegendElements(t,e,i){var s,n;const r=[];for(const o of t)for(const a of o.infos??[])if("infos"in a&&a.infos&&r.push(this._generatePreviewsForLegendElements([a],e,i)),XZ(a)&&a.symbol&&!a.preview){let l=!0;if(a.symbol.type==="cim"){const{minScale:c,maxScale:h}=a.symbol.data;(c&&c<this.scale||h&&h>this.scale)&&(l=!1)}l&&r.push(this._generateSymbolPreviewForInfo(a,{...e,clipBloomEffect:"theme"in o&&o.theme==="spike",effectView:(s=i==null?void 0:i.arrowMarkerSymbols)!=null&&s.has(a.symbol)?null:e.effectView},i?{isDefault:a.symbol===i.defaultSymbol,applyScaleDrivenSize:!((n=i.arrowMarkerSymbols)!=null&&n.has(a.symbol))}:void 0))}await Promise.all(r)}async _generateSymbolPreviewForInfo(t,e,i){var r,s,n,o;try{let a=!(i!=null&&i.isDefault)&&t.size==null&&this._hasSizeRamp?Ei(Pr.size):t.size;if(this._scaleDrivenSizeVariable&&(i!=null&&i.applyScaleDrivenSize)){const{getSize:h}=await Ie(()=>Promise.resolve().then(()=>V0),void 0,import.meta.url);a=h(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}const l=t.symbol.type==="cim"?{style:"legend",cimOptions:{allowScalingUp:!(i!=null&&i.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(i!=null&&i.applyScaleDrivenSize)),viewParams:this.isScaleDriven?{viewingMode:((r=this.view)==null?void 0:r.type)==="2d"?"map":(s=this.view)==null?void 0:s.viewingMode,scale:(n=this.view)==null?void 0:n.scale}:null}}:{},c=t.label&&typeof t.label!="string"?null:await fh("previewTemplateAriaLabel",t.label);t.preview=await Xhe(t.symbol,{size:a,scale:!1,ariaLabel:c,...e,...l})}catch{t.preview=null,be.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${(o=t.symbol)==null?void 0:o.type}`)}}_getClusterRenderer(t){var s,n;this._hasClusterSizeVariable=!1;const e="renderer"in this.layer?this.layer.renderer:null,i=((s=t.renderer)==null?void 0:s.clone())||(e==null?void 0:e.clone()),r=NGe(t,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!((n=i.visualVariables)==null?void 0:n.some((a=>a.type==="size"&&a.target!=="outline"&&!qE.test(a.valueExpression))))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:l,clusterMaxSize:c}=t;r.legendOptions=new ene({showLegend:l!==c})}const a=i.visualVariables||[];i.visualVariables=a.concat([r]),this._hasClusterSizeVariable=!0}return i}async _loadRenderer(t){const e=[],i=t.clone(),r=await t8(i);if(om(i)||am(i)){const s=(i.classBreakInfos||i.uniqueValueInfos).map((n=>this._fetchSymbol(n.symbol,r).then((o=>{n.symbol=o})).catch((()=>{n.symbol=null}))));Array.prototype.push.apply(e,s)}return e.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then((s=>{this._applySymbolToRenderer(i,s,Fg(i))})).catch((()=>{this._applySymbolToRenderer(i,null,Fg(i))}))),await Promise.allSettled(e),i}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await t.fetchSymbol({cache:i});return this._getAppliedCloneSymbol(r,e)}catch{throw be.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),r=e&&e.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?vhe(i,e):i.color&&(i.color=new ze(r||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach((i=>{i&&(i.material||(i.material={}),i.material.color=new ze(e))}))}async _getVisualVariableLegendElements(t,e){var g,_;if(!("visualVariables"in t)||t.type==="vector-field")return null;const i=t.visualVariables??[],r=[],s=[],n=[],o=Lu(t,"reference-size")??Lu(t,"spike");let a;if(((g=o==null?void 0:o.sizeStops)==null?void 0:g.length)===2&&(om(t)||am(t))){const[S,E]=o.sizeStops;a=new hi({field:o.field??void 0,normalizationField:o.normalizationField,minSize:Bn(S.size,10,100),maxSize:Bn(E.size,50,150),minDataValue:S.value,maxDataValue:E.value}),s.push(a)}for(const S of i)S.type==="color"?r.push(S):S.type==="size"?s.push(S):S.type==="opacity"&&n.push(S);const l=[...r,...s,...n];let c,h;if(r.length===0&&om(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const S=t.classBreakInfos[0];c=S&&S.symbol}if(r.length===0&&Fg(t)&&(c=t.symbol),c)if(c.type.includes("3d")){const S=c.symbolLayers.at(0);S.type==="water"?S.color!=null&&(h=S.color):((_=S.material)==null?void 0:_.color)!=null&&(h=S.material.color)}else c.url||(h=c.color);const y=this.effectList;return(await Promise.all(l.map((async S=>{if(!S.legendOptions||S.legendOptions.showLegend!==!1){const E=A8(t)?S.field:this._getRampTitle(S,e);let C=null;const M=YGe(e,S,this.view.timeZone);if(S.type==="color"){const P=await yZ(S,null,M)??[];C={type:"color-ramp",title:E,infos:P,preview:rm(P.map((D=>D.color)),{effectList:y,ariaLabel:await fh("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=P.length>0)}else if(S.type==="size"&&S.target!=="outline")qE.test(S.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=S):(C=await this._getSizeLegendElement(E,S,t,M),a===S&&(o==null?void 0:o.theme)==="spike"&&(C.theme=o.theme),this._hasSizeRamp||(this._hasSizeRamp=!(C.infos==null||!C.infos.length)));else if(S.type==="opacity"){const P=await yZ(S,h,M)??[];C={type:"opacity-ramp",title:E,infos:P,preview:rm(P.map((D=>D.color)),{effectList:y,ariaLabel:await fh("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=P.length>0)}return C!=null&&C.infos?C:null}})))).filter(os)}_getDomainName(t,e,i){var r;if(t&&typeof t!="function"){const s="getField"in i&&((r=i.getField)==null?void 0:r.call(i,t)),n=s&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(s.name,{excludeImpliedDomains:ce("esri-widget-legacy-field-domain-calculation")}):null;return(n==null?void 0:n.type)==="coded-value"?n.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const r=e.featureReduction,s="popupTemplate"in r&&r.popupTemplate,n=s&&s.fieldInfos;if(n){for(const o of n)if(o.fieldName===i)return i==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(t,e){var c,h;let i=t.field,r=t.normalizationField,s=!1,n=!1,o=!1,a=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const l=(c=t.legendOptions)==null?void 0:c.title;if(l!=null)a=l;else if(t.valueExpressionTitle)a=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&((h=e.renderer.authoringInfo)!=null&&h.visualVariables)){const y=e.renderer.authoringInfo.visualVariables;for(let g=0;g<y.length;g++){const _=y[g];if(_.type==="color"){if(_.style==="ratio"){s=!0;break}if(_.style==="percent"){n=!0;break}if(_.style==="percent-of-total"){o=!0;break}}}}a={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),ratio:s,ratioPercent:n,ratioPercentTotal:o}}return a}_getRendererTitle(t,e){var a;const i=t;if((a=i.legendOptions)!=null&&a.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,s=null,n=null;if(om(i)&&(s=i.normalizationField,n=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,s=typeof s=="function"?null:s,am(i)){const{field2:l,field3:c,fieldDelimiter:h}=i;let y=r&&this._getFieldAlias(r,e);return l&&(y=`<${y}>${h}<${this._getFieldAlias(l,e)}>`,c&&(y=`${y}${h}<${this._getFieldAlias(c,e)}>`)),y}let o=null;return(r||s)&&(o={field:r&&this._getFieldAlias(r,e),normField:s&&this._getFieldAlias(s,e),normByPct:n}),o}_getFieldAlias(t,e){var h,y;const i="popupTemplate"in e?e.popupTemplate:null,r=i==null?void 0:i.fieldInfos;let s=r==null?void 0:r.find((g=>t===g.fieldName)),n=null;"getField"in e&&e.getField?n=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(n=e.fieldsIndex.get(t));let o=null;const a="featureReduction"in e&&e.featureReduction;a&&(s??(s="popupTemplate"in a?(y=(h=a.popupTemplate)==null?void 0:h.fieldInfos)==null?void 0:y.find((g=>{var _;return(t==null?void 0:t.toLowerCase())===((_=g.fieldName)==null?void 0:_.toLowerCase())})):void 0),"fields"in a&&a.fields&&(o=a.fields.find((g=>{var _;return((_=g.name)==null?void 0:_.toLowerCase())===(t==null?void 0:t.toLowerCase())}))));const l=s||n||o;let c=null;return l&&(c=(s==null?void 0:s.label)||(n==null?void 0:n.alias)||(o==null?void 0:o.alias)||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),c}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return om(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(i=t.field?e.some((r=>!(!r||t.field!==r.field||(t.normalizationField||r.normalizationField)&&t.normalizationField!==r.normalizationField))):!!e.length),i}};u([A()],Dr.prototype,"children",void 0),u([A({readOnly:!0})],Dr.prototype,"effectList",null),u([A()],Dr.prototype,"layerView",void 0),u([A()],Dr.prototype,"layer",void 0),u([A()],Dr.prototype,"legendElements",void 0),u([A({readOnly:!0})],Dr.prototype,"opacity",null),u([A()],Dr.prototype,"parent",void 0),u([A({readOnly:!0,dependsOn:[]})],Dr.prototype,"ready",null),u([A()],Dr.prototype,"hideLayersNotInCurrentView",void 0),u([A()],Dr.prototype,"keepCacheOnDestroy",void 0),u([A()],Dr.prototype,"respectLayerDefinitionExpression",void 0),u([A()],Dr.prototype,"respectLayerVisibility",void 0),u([A({readOnly:!0})],Dr.prototype,"scale",null),u([A()],Dr.prototype,"sublayerIds",void 0),u([A({readOnly:!0})],Dr.prototype,"isScaleDriven",null),u([A()],Dr.prototype,"title",void 0),u([A({readOnly:!0,dependsOn:["ready"],value:0})],Dr.prototype,"version",null),u([A()],Dr.prototype,"view",void 0),Dr=u([B("esri.widgets.Legend.support.ActiveLayerInfo")],Dr);const vA={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},rpe=qe.ofType(Dr),DJe=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),spe="view.basemapView.baseLayerViews",npe="view.groundView.layerViews",ope="view.basemapView.referenceLayerViews",NJe=[spe,npe,"view.layerViews",ope];let aa=class extends et{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new qe,this.activeLayerInfos=new rpe,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(He((()=>this.view),(()=>this._viewHandles()),wr),vA.view),this.addHandles(mk((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(vA.state),this.view&&this.addHandles(He((()=>this.state),(()=>this._stateHandles()),wr),vA.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([vA.allLayerViews,vA.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i!=null&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",(r=>this._allLayerViewsChangeHandle(r))),vA.allLayerViews),this.addHandles(He((()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible]),(()=>this._propertiesChangeHandle())),vA.legendProperties)}_allLayerViewsChangeHandle(e){e.moved.length?this._propertiesChangeHandle():(e.removed.forEach((i=>this._destroyViewActiveLayerInfo(i.uid))),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach((n=>{if(!n.parent){const o=n.layer.parent,a=o&&"uid"in o&&this._layerViewByLayerId[o.uid],l=a&&this._activeLayerInfosByLayerViewId[a.uid];l&&e.includes(l)&&(r.push(n),n.parent=l,l.children.add(n),this._sortActiveLayerInfos(l.children))}})),e.removeMany(r);const s={};i.allLayerViews.forEach(((n,o)=>s[n.layer.uid]=o)),e.sort(((n,o)=>{const a=s[n.layer.uid]||0;return(s[o.layer.uid]||0)-a}))}_generateLayerViews(){const e=[];return NJe.filter(this._filterLayerViews,this).map((i=>il(this,i))).filter((i=>i!=null)).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===spe||e===ope),r=!this.groundLegendVisible&&e===npe;return!i&&!r}_collectLayerViews(e,i){const r=s=>(s&&s.forEach((n=>{i.push(n),r(n[e])})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some((r=>this._hasLayerInfo(r,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((r=>this._isLayerUIDMatching(r,i)))}_isLayerViewSupported(e){return!!DJe.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(He((()=>{var i;return[e.legendEnabled,(i=e.layer)==null?void 0:i.legendEnabled]}),(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){var i;return!this.respectLayerVisibility||e.legendEnabled&&((i=e.layer)==null?void 0:i.legendEnabled)}_buildActiveLayerInfo(e){var a;const i=e.layer,r=e.uid,s=this._layerInfosByLayerViewId[r];let n=this._activeLayerInfosByLayerViewId[r];if(!n){const l=(s==null?void 0:s.title)!==void 0&&s.layer.uid===i.uid;n=new Dr({layer:i,layerView:e,title:l?s.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(s==null?void 0:s.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[r]=n}const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(a=i.parent)==null?void 0:a.uid]:null;if(n.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this.hasHandles(r)){const l=[He((()=>i.title),(c=>this._titleHandle(c,n))),He((()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol]),(()=>this._constructLegendElements(n))),hn((()=>{var c;return((c=this.view)==null?void 0:c.stationary)===!0}),(()=>this._scaleHandle(n)),wr),He((()=>e.layer?QJ(e.layer,e.view):null),(()=>this._constructLegendElements(n))),He((()=>e.updating),(()=>{e.layer!=null&&QJ(e.layer,e.view)!=null&&this._constructLegendElements(n)})),He((()=>"effect"in i&&i.effect),(()=>this._constructLegendElements(n))),hn((()=>{var c;return(c=this.view)==null?void 0:c.timeZone}),(()=>this._constructLegendElements(n)),wr)];if(this.respectLayerVisibility){const c=He((()=>e.legendEnabled),(y=>this._legendEnabledHandle(y,n))),h=He((()=>i.legendEnabled),(y=>this._legendEnabledHandle(y,n)));l.push(c,h)}if(this.respectLayerDefinitionExpression&&"definitionExpression"in i){const c=He((()=>[i.definitionExpression,this.respectLayerDefinitionExpression]),(()=>{n.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(n)}));l.push(c)}this.addHandles(l,r)}n.isScaleDriven||this._constructLegendElements(n),this._addActiveLayerInfo(n)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var s;const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const n=e.parent;if(n)n.children.includes(e)||n.children.push(e),this._sortActiveLayerInfos(n.children);else{const o=(s=this.layerInfos)==null?void 0:s.some((l=>l.layer.uid===r.uid)),a=r.parent;a&&"uid"in a&&this._layerViewByLayerId[a.uid]&&!o?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const o=[];this._activeLayerInfosWithNoParent.forEach((a=>{const l=a.layer.parent,c=l&&"uid"in l?this._layerViewByLayerId[l==null?void 0:l.uid]:null,h=this._activeLayerInfosByLayerViewId[c==null?void 0:c.uid];h&&(o.push(a),a.parent=h)})),o.length&&(this._activeLayerInfosWithNoParent.removeMany(o),o.forEach((a=>this._addActiveLayerInfo(a))))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(i.featureReduction):"renderer"in i&&i.renderer&&!("sublayers"in i)?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph"?e.buildLegendElementsForTools():e.children.forEach((r=>this._constructLegendElements(r)))}};u([A({type:rpe})],aa.prototype,"activeLayerInfos",void 0),u([A()],aa.prototype,"basemapLegendVisible",void 0),u([A()],aa.prototype,"groundLegendVisible",void 0),u([A()],aa.prototype,"hideLayersNotInCurrentView",void 0),u([A()],aa.prototype,"keepCacheOnDestroy",void 0),u([A()],aa.prototype,"respectLayerDefinitionExpression",void 0),u([A()],aa.prototype,"respectLayerVisibility",void 0),u([A()],aa.prototype,"layerInfos",void 0),u([A({readOnly:!0})],aa.prototype,"state",null),u([A()],aa.prototype,"view",void 0),aa=u([B("esri.widgets.Legend.LegendViewModel")],aa);const Si="esri-legend--card",jw="esri-legend",yt={base:Si,stacked:`${jw}--stacked`,carouselTitle:`${Si}__carousel-title`,intervalSeparator:`${Si}__interval-separator`,imageryLayerStretchedImage:`${Si}__imagery-layer-image--stretched`,imageLabel:`${Si}__image-label`,layerCaption:`${Si}__layer-caption`,labelElement:`${Si}__label-element`,layerRow:`${Si}__layer-row`,labelCell:`${Si}__label-cell`,message:`${Si}__message`,rampLabel:`${Si}__ramp-label`,section:`${Si}__section`,serviceCaptionText:`${Si}__service-caption-text`,serviceContent:`${Si}__service-content`,service:`${Si}__service`,groupLayer:`${Si}__group-layer`,groupLayerChild:`${Si}__group-layer-child`,symbol:`${Si}__symbol`,sizeRampRow:`${Si}__size-ramp-row`,symbolRow:`${Si}__symbol-row`,symbolCell:`${Si}__symbol-cell`,carousel:`${Si}__carousel`,carouselItem:`${Si}__carousel-item`,intervalSeparatorsContainer:`${Si}__interval-separators-container`,relationshipLabelContainer:`${Si}__relationship-label-container`,labelContainer:`${Si}__label-container`,serviceCaptionContainer:`${Si}__service-caption-container`,symbolContainer:`${Si}__symbol-container`,colorRampContainer:`${Si}__color-ramp-container`,sizeRampContainer:`${Si}__size-ramp-container`,sizeRampPreview:`${Si}__size-ramp-preview`,pieChartRampPreview:`${Si}__pie-chart-ramp-preview`,sizeRampHorizontal:`${jw}__size-ramp--horizontal`,rampLabelsContainer:`${jw}__ramp-labels`,layerInfo:`${jw}__layer-cell ${jw}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function FJe(t,e){return e}function _r(t){const e=this;t.appendChild(e)}function e1(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return Hme(e);if("value"in e||"unit"in e)return I0(t.dotValue,e);if("colorName"in e&&"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return FJe(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:ape(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?I0(r==="showField"?"{field}":t[r],{field:e.field,normField:e.normField}):void 0}function ape(t,e){return!e}function lpe(t,e){return!!(e&&e==="Stretched"&&"version"in t&&typeof t.version=="number"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function zJe(t,e){var i;return t.label?e[t.label]+": "+(typeof t.value=="string"?t.value:E0(t.value??0,{style:"decimal",notation:(i=t.value)!=null&&i.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function cpe(t,e,i){switch(e){case"heatmap-ramp":return i[t.label]||t.label;case"stretch-ramp":return zJe(t,i);default:return t.label}}function upe(t,e){if(!t.title||typeof t.title=="string")return t.title;const i=t.type==="color-ramp"||t.type==="opacity-ramp",r=t.title,s=e1(e,r,i);return ape(r,i)&&r.title?`${r.title} (${s})`:s}function hpe(t){return!(!t||typeof t!="object")}const BJe=25,jJe=25,UJe=100;let lm=class extends dn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return se("div",{class:this.classes(yt.layerRow,yt.colorRampContainer)},this._renderRampLabel(e[0]),se("div",{class:yt.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",s=e.length-1,n=jJe,o=s>2&&!r?BJe*s:UJe,a=o+20,l=10,c=[[{shape:{type:"path",path:`M0 ${n/2} L${l} 0 L${l} ${n} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:o,height:n},fill:{type:"linear",x1:l,y1:0,x2:o+l,y2:0,colors:e.map(((g,_)=>({color:g.color,offset:r&&"ratio"in g?g.ratio:_/s})))},stroke:{width:0}},{shape:{type:"path",path:`M${o+l} 0 L${a} ${n/2} L${o+l} ${n} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],h=Fhe(c,a,n),y={filter:Xx(this.effectList)??void 0,opacity:i==null?void 0:`${i}`};return se("div",{styles:y},h)}_renderMiddleStopRampLabel(e){const i=e.length%2!=0?e[e.length/2|0]:null;return i?se("div",{class:yt.intervalSeparatorsContainer},se("div",{class:yt.intervalSeparator},"|"),this._renderRampLabel(i)):null}_renderRampLabel(e){return se("div",{class:yt.rampLabel},cpe(e,this.legendElement.type,this.messages))}};u([A()],lm.prototype,"effectList",void 0),u([A()],lm.prototype,"legendElement",void 0),u([A()],lm.prototype,"messages",void 0),u([A()],lm.prototype,"opacity",void 0),lm=u([B("esri.widgets.Legend.styles.card.ColorRamp")],lm);const VJe="#ddd",Xs=window.devicePixelRatio,bA="esri-spike-ramp",vd={spikeRampContainer:`${bA}__container`,spikeRampPreviewContainer:`${bA}__preview-container`,spikeRampPreview:`${bA}__preview`,spikeRampSymbolPreview:`${bA}__symbol-preview`,spikeRampLines:`${bA}__lines`,spikeRampLabelsContainer:`${bA}__labels-container`,spikeRampLabel:`${bA}__label`};function dpe(t){return t.infos.length!==5?null:se("div",{class:vd.spikeRampContainer},se("div",{class:vd.spikeRampPreviewContainer},GJe(t),HJe(t)),qJe(t))}function GJe(t){const[e,i,r]=wj(t).map((({preview:s})=>{if(!s)return null;const n=s.cloneNode(!0);return n.classList.add(vd.spikeRampSymbolPreview),n}));return e&&i&&r?se("div",{class:vd.spikeRampPreview},se("div",{afterCreate:_r,bind:r}),se("div",{afterCreate:_r,bind:i}),se("div",{afterCreate:_r,bind:e})):null}function HJe(t){const[{width:e,height:i},{width:r},{width:s,height:n}]=wj(t).map((({size:W})=>hpe(W)?{width:ri(W.width),height:ri(W.height)}:{width:0,height:0})),o=10,a=8,l=e+r+s+3*o,c=i,h=document.createElement("canvas");h.width=(l+o)*Xs,h.height=c*Xs,h.style.width=h.width/Xs+"px",h.style.height=h.height/Xs+"px";const y=h.getContext("2d");y.beginPath();const g=l-(e/2+o),_=0,S=l+a;y.moveTo(g*Xs,_*Xs),y.lineTo(S*Xs,0*Xs);const C=(l-a)/2,M=(i-n)/2,P=l+a,D=(i-n)/2;y.moveTo(C*Xs,M*Xs),y.lineTo(P*Xs,D*Xs);const F=s/2,U=c-n,G=l+a,Q=c-n;return y.moveTo(F*Xs,U*Xs),y.lineTo(G*Xs,Q*Xs),y.strokeStyle=VJe,y.lineWidth=.5*Xs,y.stroke(),se("div",{afterCreate:_r,bind:h,class:vd.spikeRampLines})}function qJe(t){const[{label:e,height:i},{label:r},{label:s,height:n}]=wj(t).map((({label:h,size:y})=>({label:h,height:hpe(y)?ri(y.height):0}))),o=i-n,a={position:"absolute",top:"0"},l={position:"absolute",top:o/2+"px"},c={position:"absolute",top:`${o}px`};return se("div",{class:vd.spikeRampLabelsContainer},se("div",{class:vd.spikeRampLabel,styles:a},e),se("div",{class:vd.spikeRampLabel,styles:l},r),se("div",{class:vd.spikeRampLabel,styles:c},s))}function wj(t){return t.infos.filter(((e,i)=>i%2==0))}const WJe="#ddd",Ry=window.devicePixelRatio;function QJe(t){var i,r;if(!t)return;if(t.type.includes("3d")){if(!((i=t.symbolLayers)!=null&&i.length))return;const s=t.symbolLayers.at(-1),n=(r=s.resource)==null?void 0:r.primitive;return n==="circle"||n==="cross"||n==="kite"||n==="sphere"||n==="cube"||n==="diamond"}const e=t.style;return e==="circle"||e==="diamond"||e==="cross"}function JJe(t){var e,i;if(t){if(t.type.includes("3d")){if(!((e=t.symbolLayers)!=null&&e.length))return;const r=t.symbolLayers.at(-1),s=(i=r==null?void 0:r.resource)==null?void 0:i.primitive;return s==="triangle"||s==="cone"||s==="tetrahedron"}return t.style==="triangle"}}let cm=class extends dn{constructor(e,i){super(e,i),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return se("div",{styles:{display:"flex",flex:"1",justifyContent:"center"}},dpe(this.legendElement));const{legendElement:e,hasIndicators:i,opacity:r}=this,s=e.infos,n=s.at(0),o=s.at(-1);if(!n||!o)return null;const{label:a,...l}=n,{label:c,...h}=o;let y=l.preview,g=h.preview;const _={"flex-direction":i?"column":"row-reverse"};if(!y||!g)return null;y=y.cloneNode(!0),y.style.display="flex",g=g.cloneNode(!0),g.style.display="flex";const S={opacity:`${r??""}`};return se("div",{class:this.classes(yt.layerRow,{[yt.sizeRampRow]:i})},se("div",{class:yt.rampLabel},i?a:c),se("div",{class:yt.sizeRampContainer,styles:_},se("div",{afterCreate:_r,bind:y,class:yt.sizeRampPreview,styles:S}),this._renderSizeRampLines(e),se("div",{afterCreate:_r,bind:g,class:yt.sizeRampPreview,styles:S})),se("div",{class:yt.rampLabel},i?c:a))}_renderSizeRampLines(e){const i=e.infos,r=i.at(0),s=i.at(-1);if(!r||!s)return null;const n=r.symbol,o=this.hasIndicators,a=r.size&&typeof r.size=="number"?r.size:0,l=s.size&&typeof s.size=="number"?s.size:0,c=r.outlineSize||0,h=s.outlineSize||0,y=ri(a+c)*Ry,g=ri(l+h)*Ry,_=o?y:y+50*Ry,S=o?y/2+50*Ry:y,E=JJe(n),C=QJe(n),M=document.createElement("canvas");M.width=_,M.height=S,M.style.width=M.width/Ry+"px",M.style.height=M.height/Ry+"px";const P=M.getContext("2d");if(o){P.beginPath();const D=0,F=0,U=_/2-g/2,G=S;P.moveTo(D,F),P.lineTo(U,G);const Q=_,W=0,X=_/2+g/2,K=S;P.moveTo(Q,W),P.lineTo(X,K)}else{P.beginPath();const D=0,F=S/2-g/2,U=_;P.moveTo(D,F),P.lineTo(U,0);const Q=0,W=S/2+g/2,X=_,K=S;P.moveTo(Q,W),P.lineTo(X,K)}return P.strokeStyle=WJe,P.stroke(),se("div",{afterCreate:_r,bind:M,styles:o?{display:"flex",marginTop:`-${E?0:C?y/2:0}px`,marginBottom:`-${E?g:C?g/2:0}px`}:{display:"flex",marginRight:`-${E?0:C?y/2:0}px`,marginLeft:`-${E?0:C?g/2:0}px`}})}};u([A()],cm.prototype,"hasIndicators",void 0),u([A()],cm.prototype,"legendElement",void 0),u([A()],cm.prototype,"messages",void 0),u([A()],cm.prototype,"opacity",void 0),cm=u([B("esri.widgets.Legend.styles.card.SizeRamp")],cm);const ZJe=sM(),ppe=10,_j=20,RP=10,Sj=20,xj={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function YJe(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?se("svg",{height:"4",width:"10"},se("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):se("svg",{height:"10",width:"10"},se("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function XJe(t,e="vertical"){const i=document.createElement("div");return i.style.height=`${_j}px`,i.className=xj.univariateAboveAndBelowSymbol,t!=null&&(i.style.opacity=t.toString()),ZJe.append(i,YJe.bind(null,e)),i}function fpe(t,e,i="vertical",r){t.infos.forEach(((s,n)=>{if(r&&n===2)s.preview=XJe(e,i);else{const o=(f0(s.size)?ri(s.size):0)+(i==="horizontal"?Sj:RP),a=s.preview,l=(a==null?void 0:a.tagName.toLowerCase())==="div",c=l?a:document.createElement("div");c.className=xj.univariateAboveAndBelowSymbol,i==="horizontal"?c.style.width=`${o}px`:c.style.height=`${o}px`,!l&&a&&c.appendChild(a),s.preview=c}}))}function OP(t,e="classic"){const i=t.infos,r=i.at(0),s=i.at(-1),n=f0(r.size)?ri(r.size):0,o=f0(s.size)?ri(s.size):0;return e==="classic"?(n+RP)/2:(n-o)/2}function t1(t,e){if(!t)return null;const i=t.infos.map((s=>s.color)),r=rm(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effectList:e.effectList,ariaLabel:e.ariaLabel});return r.className=xj.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function $j(t,e,i,r="vertical"){let s=0;const n=t.infos,o=Math.floor(n.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?n.length-1:o;for(let c=a;c<=l;c++)if(i&&c===o)s+=r==="horizontal"?ppe:_j;else{const h=n[c].size;s+=(f0(h)?ri(h):0)+(r==="horizontal"?Sj:RP)}return Math.round(s)}function i1(t,e,i,r="vertical"){const s=$j(t,e,i,r),n=t.infos,o=Math.floor(n.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?n.length-1:o,c=f0(n[a].size)?n[a].size:0,h=f0(n[l].size)?n[l].size:0,y=e==="full"?c+h:e==="above"?c:h,g=i?r==="vertical"?_j:ppe:0,_=r==="vertical"?RP*(e==="full"?2:1):Sj*(e==="full"?2:1);return Math.round(s-(ri(y)/2+g/2+_/2))}function Ape(t,e,i="vertical"){const r=t.infos;let s=r.find((({type:o})=>o==="size-ramp")),n=r.find((({type:o})=>o==="color-ramp"));return s&&(s={...s},s.infos=[...s.infos],fpe(s,e,i,!0)),n&&(n={...n},n.infos=[...n.infos]),i==="horizontal"&&(s==null||s.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:s,colorRampElement:n}}function mpe(t,e="vertical"){const i=t.infos;let r=i.find((({type:n})=>n==="size-ramp")),s=i.find((({type:n})=>n==="color-ramp"));return r&&(r={...r},r.infos=[...r.infos],fpe(r,null,e,!1)),s&&(s={...s},s.infos=[...s.infos]),e==="horizontal"&&(r==null||r.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:r,colorRampElement:s}}const m8={marginLeft:"3px"},uv={display:"table-cell",verticalAlign:"middle"},ype={display:"flex",alignItems:"flex-start"};let um=class extends dn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var G;const{legendElement:e,opacity:i,effectList:r,key:s}=this,{sizeRampElement:n,colorRampElement:o}=Ape(e,i,"horizontal");if(!n)return null;const a=$j(n,"full",!0,"horizontal"),l=i1(n,"above",!0,"horizontal"),c=i1(n,"below",!0,"horizontal"),h=12,y=(G=this.messages)==null?void 0:G.previewColorRampAriaLabel,g=t1(o,{width:l,height:h,rampAlignment:"horizontal",opacity:i,type:"above",effectList:r,ariaLabel:y}),_=t1(o,{width:c,height:h,rampAlignment:"horizontal",opacity:i,type:"below",effectList:r,ariaLabel:y}),S=OP(n,"card"),E=n.infos.map((Q=>Q.label)),C=E.length-1,M=E.map(((Q,W)=>W===0||W===C?se("div",{key:W},Q):null)),P={display:"flex",flexDirection:"column"},D={display:"flex",flexDirection:"row"},F={marginTop:"3px",display:"flex"};gP(this.container)?F.marginRight=`${S}px`:F.marginLeft=`${S}px`;const U={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return se("div",{class:yt.layerRow,key:`${s}-container`,styles:P},se("div",{class:this.classes(yt.symbolContainer,yt.sizeRampHorizontal),styles:D},n.infos.map(((Q,W)=>se("div",{afterCreate:_r,bind:Q.preview,class:yt.symbol,key:W})))),g?se("div",{class:yt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:F},se("div",{afterCreate:_r,bind:g}),se("div",{afterCreate:_r,bind:_})):null,se("div",{class:yt.layerInfo},se("div",{class:yt.rampLabelsContainer,styles:U},M)))}};u([A()],um.prototype,"effectList",void 0),u([A()],um.prototype,"legendElement",void 0),u([A()],um.prototype,"messages",void 0),u([A()],um.prototype,"opacity",void 0),um=u([B("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],um);let hm=class extends dn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var M;const{legendElement:e,opacity:i,effectList:r,key:s}=this,{sizeRampElement:n,colorRampElement:o}=mpe(e,"horizontal");if(!n)return null;const a=$j(n,"full",!1,"horizontal"),l=i1(n,"full",!1,"horizontal"),c=t1(o,{width:l,height:12,rampAlignment:"horizontal",opacity:i,type:"full",effectList:r,ariaLabel:(M=this.messages)==null?void 0:M.previewColorRampAriaLabel}),h=OP(n,"card"),y=n.infos.length-1,g=n.infos.map(((P,D)=>D===0||D===y?se("div",{key:D},P.label):null)),_={display:"flex",flexDirection:"column"},S={display:"flex",flexDirection:"row"},E={marginTop:"3px",display:"flex"};gP(this.container)?E.marginRight=`${h}px`:E.marginLeft=`${h}px`;const C={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return se("div",{class:yt.layerRow,key:`${s}-container`,styles:_},se("div",{class:this.classes(yt.symbolContainer,yt.sizeRampHorizontal),styles:S},n.infos.map(((P,D)=>se("div",{afterCreate:_r,bind:P.preview,class:yt.symbol,key:D})))),se("div",{class:yt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:E},se("div",{afterCreate:_r,bind:c})),se("div",{class:yt.layerInfo},se("div",{class:yt.rampLabelsContainer,styles:C},g)))}};u([A()],hm.prototype,"effectList",void 0),u([A()],hm.prototype,"legendElement",void 0),u([A()],hm.prototype,"messages",void 0),u([A()],hm.prototype,"opacity",void 0),hm=u([B("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],hm);function BC({level:t,class:e,...i},r){const s=gpe(t);return se(`h${s}`,{...i,"aria-level":String(s),class:ov(Vo.heading,e),role:"heading"},r)}function gpe(t){return Bn(Math.ceil(t),1,6)}function KJe(t,e=1){return gpe(t+e)}var y8;let Va=y8=class extends dn{constructor(t,e){super(t,e),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=upe(this.legendElement,this.messages),i=this.hasIndicators&&!this.isChild?se("div",null,se(BC,{class:yt.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),se(BC,{class:yt.layerCaption,level:KJe(this.headingLevel)},e)):e?se(BC,{class:yt.layerCaption,level:this.headingLevel},e):null;return se("section",{"aria-labelledby":this.key,class:yt.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},i,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return se(cm,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return se(lm,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return Uhe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return se("div",{afterCreate:_r,bind:this.legendElement.preview,class:yt.pieChartRampPreview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return se(um,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return se(hm,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){var n,o,a;const e=t.infos.map((l=>this._renderElementInfo(l,t.legendType))).filter(Boolean);if(!e.length)return null;const i=this.activeLayerInfo.legendElements.some((({type:l})=>l==="relationship-ramp")),r=(a=(o=(n=e[0])==null?void 0:n.properties)==null?void 0:o.classes)==null?void 0:a[yt.symbolRow],s={[yt.labelContainer]:!r&&!i,[yt.relationshipLabelContainer]:i};return se("div",{class:this.classes(s)},e)}_renderElementInfo(t,e){var a;const{layer:i}=this,r="label"in t?t.label:null,s=`${this.key}-${r}`;if("type"in t&&t.type)return se(y8,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:s,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const n=lpe(i,e),o=e1(this.messages,r,!1)||"";if("src"in t&&t.src)return se("div",{class:yt.layerRow,key:`${s}-row`},this._renderImage(t,i,n),se("div",{class:yt.imageLabel},o));if("symbol"in t&&t.preview){if(!((a=t.symbol)!=null&&a.type.includes("simple-fill"))){if(!t.label)return se("div",{afterCreate:_r,bind:t.preview,key:`${s}-row`});const l={[yt.symbolCell]:this.hasIndicators};return se("div",{class:this.classes(yt.layerRow,{[yt.symbolRow]:this.hasIndicators}),key:`${s}-row`},se("div",{afterCreate:_r,bind:t.preview,class:this.classes(l)}),se("div",{class:this.classes(yt.imageLabel,{[yt.labelCell]:this.hasIndicators})},o))}return se("div",{class:yt.layerRow,key:`${s}-row`},se("div",{class:yt.labelElement,styles:this._getBackgroundStyles(t)},o))}return null}_getBackgroundStyles(t){var y,g;const e=t.symbol,i=e.color,r=!!(i!=null&&i.a),s="outline"in e?e.outline:null,n=!!((y=s==null?void 0:s.color)!=null&&y.a),o=new ze(r&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),a=n&&s.color?new ze([s.color.r,s.color.g,s.color.b,s.color.a*this.layer.opacity]):new ze([255,255,255,0]),l=((g=t.symbol.color)==null?void 0:g.isBright)??!0,c=l?"black":"white",h=l?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:r?o.toCss(!0):"none",color:c,textShadow:`-1px -1px 0 ${h},
                  1px -1px 0 ${h},
                  -1px 1px 0 ${h},
                  1px 1px 0 ${h}`,border:n?`1px solid ${a.toCss(!0)}`:"none",filter:Xx(this.effectList)??void 0}}_renderImage(t,e,i){const{label:r,src:s,opacity:n}=t,o={[yt.imageryLayerStretchedImage]:i,[yt.symbol]:!i},a={opacity:`${n??e.opacity}`},l=e1(this.messages,r,!1);return se("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:s,styles:a,width:t.width})}};u([A()],Va.prototype,"activeLayerInfo",void 0),u([A()],Va.prototype,"effectList",void 0),u([A()],Va.prototype,"hasIndicators",void 0),u([A()],Va.prototype,"headingLevel",void 0),u([A()],Va.prototype,"isChild",void 0),u([A()],Va.prototype,"layer",void 0),u([A()],Va.prototype,"legendElement",void 0),u([A()],Va.prototype,"messages",void 0),Va=y8=u([B("esri.widgets.Legend.styles.card.LegendElement")],Va);const eZe=768;let qa=class extends dn{constructor(e,i){super(e,i),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return _P({carousel:()=>Ie(()=>import("./index-BflsmzJr.js"),[],import.meta.url),"carousel-item":()=>Ie(()=>import("./index-9o1LYraO.js"),[],import.meta.url)})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=eZe||this.layout==="stack";const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),i={[yt.stacked]:this._hasIndicators};return se("div",{class:this.classes(yt.base,i)},e||se("div",{class:yt.message},this.messages.noLegend))}_renderCarousel(){const e=[],i=this.activeLayerInfos;if(i)for(const r of i)this._renderSections(r,e);return e!=null&&e.length?se("calcite-carousel",{class:yt.carousel,label:this.messages.carousel},e.map(((r,s)=>se("calcite-carousel-item",{class:yt.carouselItem,key:s,label:I0(this.messagesCommon.pagination.pageText,{index:s+1,total:e.length})},r)))):null}_renderLayers(){var r;const e=this.activeLayerInfos,i=(r=e==null?void 0:e.toArray())==null?void 0:r.map((s=>this._renderLegendForLayer(s))).filter(Boolean);return i!=null&&i.length?i:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const i=e.children.toArray().map(this._renderLegendForLayer,this);return se("section",{class:this.classes(yt.service,yt.groupLayer),key:e.layer.uid},se("div",{class:yt.serviceCaptionContainer},e.title),i)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){var n;const i=(n=e.legendElements)==null?void 0:n.filter(Boolean);if(!(i!=null&&i.length))return null;const r=i.map((o=>se(Va,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${o.type}`,layer:e.layer,legendElement:o,messages:this.messages}))),s={[yt.groupLayerChild]:!!e.parent};return se("section",{class:this.classes(yt.service,s),key:e.layer.uid},se("div",{class:yt.serviceCaptionContainer},se("div",{class:yt.serviceCaptionText},e.title)),se("div",{class:yt.serviceContent},r))}_renderSections(e,i){if(!e.ready)return;if(e.children.length)for(const s of e.children)this._renderSections(s,i);const r=e.legendElements;if(r!=null&&r.length)for(const s of r){const n=se(Va,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages});n&&i.push(n)}}};u([A()],qa.prototype,"activeLayerInfos",void 0),u([A()],qa.prototype,"headingLevel",void 0),u([A()],qa.prototype,"layout",void 0),u([A(),Uf("esri/widgets/Legend/t9n/Legend")],qa.prototype,"messages",void 0),u([A(),Uf("esri/t9n/common")],qa.prototype,"messagesCommon",void 0),u([A({readOnly:!0})],qa.prototype,"type",void 0),u([A()],qa.prototype,"view",void 0),qa=u([B("esri.widgets.Legend.styles.card.CardView")],qa);const Zi="esri-legend",St={service:`${Zi}__service`,label:`${Zi}__service-label`,layer:`${Zi}__layer`,groupLayer:`${Zi}__group-layer`,groupLayerChild:`${Zi}__group-layer-child`,layerTable:`${Zi}__layer-table`,layerTableSizeRamp:`${Zi}__layer-table--size-ramp`,layerChildTable:`${Zi}__layer-child-table`,layerCaption:`${Zi}__layer-caption`,layerBody:`${Zi}__layer-body`,layerRow:`${Zi}__layer-row`,layerInfo:`${Zi}__layer-cell ${Zi}__layer-cell--info`,imageryLayerStretchedImage:`${Zi}__imagery-layer-image--stretched`,imageryLayerInfoStretched:`${Zi}__imagery-layer-info--stretched`,symbolContainer:`${Zi}__layer-cell ${Zi}__layer-cell--symbols`,symbol:`${Zi}__symbol`,rampContainer:`${Zi}__ramps`,sizeRamp:`${Zi}__size-ramp`,colorRamp:`${Zi}__color-ramp`,opacityRamp:`${Zi}__opacity-ramp`,rampLabelsContainer:`${Zi}__ramp-labels`,rampLabel:`${Zi}__ramp-label`,message:`${Zi}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},tZe=24;let dm=class extends dn{constructor(e,i){super(e,i),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const i=this.legendElement.type==="opacity-ramp"?St.opacityRamp:"";return e.className=`${St.colorRamp} ${i}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:i}=this;if(!i)return null;const r={width:`${tZe}px`},s={height:i.style.height};return se("div",{class:St.layerRow,key:`${this.key}-row`},se("div",{class:St.symbolContainer,styles:r},se("div",{afterCreate:_r,bind:i,class:St.rampContainer})),se("div",{class:St.layerInfo},se("div",{class:St.rampLabelsContainer,styles:s},e.infos.map(((n,o)=>this._renderRampLabel(n,o,e.type))))))}_renderRampLabel(e,i,r){return se("div",{class:e.label?St.rampLabel:void 0,key:`${this.key}-stop-${e.label??i}-label`},cpe(e,r,this.messages))}};u([A()],dm.prototype,"_preview",null),u([A()],dm.prototype,"legendElement",void 0),u([A()],dm.prototype,"messages",void 0),u([A()],dm.prototype,"opacity",void 0),dm=u([B("esri.widgets.Legend.styles.classic.ColorRamp")],dm);let s_=class extends dn{constructor(e,i){super(e,i),this.legendElement=null}render(){const e=this.legendElement.infos.map((i=>this._renderRow(i))).filter(Boolean);return e.length?this.legendElement.theme==="spike"?dpe(this.legendElement):se("div",{class:St.layerBody},e):null}_renderRow(e){return e.preview?se("div",{class:St.layerRow,key:`${this.key}-${e.label}-row`},se("div",{class:this.classes(St.symbolContainer,St.sizeRamp)},se("div",{afterCreate:_r,bind:e.preview,class:St.symbol})),se("div",{class:St.layerInfo},e1(this.messages,e.label,!1)||"")):null}};u([A()],s_.prototype,"legendElement",void 0),u([A()],s_.prototype,"messages",void 0),s_=u([B("esri.widgets.Legend.styles.classic.SizeRamp")],s_);let pm=class extends dn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i,effectList:r,key:s}=this,{sizeRampElement:n,colorRampElement:o}=Ape(e,i);if(!n)return null;const a=this.messages.previewColorRampAriaLabel,l=i1(n,"above",!0),c=i1(n,"below",!0),h=12,y=t1(o,{width:h,height:l,rampAlignment:"vertical",opacity:i,type:"above",effectList:r,ariaLabel:a}),g=t1(o,{width:h,height:c,rampAlignment:"vertical",opacity:i,type:"below",effectList:r,ariaLabel:a}),_=OP(n),S=n.infos.map((Q=>Q.label)),E=S.map(((Q,W)=>W===0?se("div",{class:Q?y?St.univariateAboveAndBelowLabel:St.rampLabel:void 0,key:`${s}-color-ramp-above-label-${Q??W}`},Q):W===2?se("div",null):null)),C=S.length-1,M=Math.floor(S.length/2),P=S.map(((Q,W)=>W===M||W===C?se("div",{class:Q?y?St.univariateAboveAndBelowLabel:St.rampLabel:void 0,key:`${s}-color-ramp-below-label-${Q??W}`},Q):null)),D={display:"table-cell",verticalAlign:"middle"},F={marginTop:`${_}px`},U={height:`${l}px`},G={height:`${c}px`};return se("div",{key:`${s}-container`,styles:ype},se("div",{class:St.layerBody},n.infos.map(((Q,W)=>se("div",{class:this.classes(St.layerRow,St.sizeRamp),key:`${s}-row-${W}`},se("div",{afterCreate:_r,bind:Q.preview,class:St.symbol,styles:D}),y||W%2!=0?null:se("div",{class:St.layerInfo},S[W]))))),y?se("div",{styles:F},se("div",{styles:m8},se("div",{styles:uv},se("div",{afterCreate:_r,bind:y,class:St.rampContainer})),se("div",{styles:uv},se("div",{class:St.rampLabelsContainer,styles:U},E))),se("div",{styles:m8},se("div",{styles:uv},se("div",{afterCreate:_r,bind:g,class:St.rampContainer})),se("div",{styles:uv},se("div",{class:St.rampLabelsContainer,styles:G},P)))):null)}};u([A()],pm.prototype,"effectList",void 0),u([A()],pm.prototype,"legendElement",void 0),u([A()],pm.prototype,"messages",void 0),u([A()],pm.prototype,"opacity",void 0),pm=u([B("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],pm);let fm=class extends dn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var C;const{legendElement:e,opacity:i,effectList:r,key:s}=this,{sizeRampElement:n,colorRampElement:o}=mpe(e);if(!n)return null;const a=OP(n),l=12,c=i1(n,"full",!1),h=t1(o,{width:l,height:c,rampAlignment:"vertical",opacity:i,type:"full",effectList:r,ariaLabel:(C=this.messages)==null?void 0:C.previewColorRampAriaLabel}),y=n.infos.length-1,g=n.infos.map(((M,P)=>P===0||P===y?se("div",{class:M.label?o?St.univariateAboveAndBelowLabel:St.rampLabel:void 0,key:`${s}-color-ramp-label-${M.label??P}`},M.label):null)),_={display:"table-cell",verticalAlign:"middle"},S={marginTop:`${a}px`},E={height:`${c}px`};return se("div",{key:`${s}-container`,styles:ype},se("div",{class:St.layerBody},n.infos.map(((M,P)=>se("div",{class:this.classes(St.layerRow,St.sizeRamp),key:`${s}-row-${P}`},se("div",{afterCreate:_r,bind:M.preview,class:St.symbol,styles:_}))))),se("div",{styles:S},se("div",{styles:m8},se("div",{styles:uv},se("div",{afterCreate:_r,bind:h,class:St.rampContainer})),se("div",{styles:uv},se("div",{class:St.rampLabelsContainer,styles:E},g)))))}};u([A()],fm.prototype,"effectList",void 0),u([A()],fm.prototype,"legendElement",void 0),u([A()],fm.prototype,"messages",void 0),u([A()],fm.prototype,"opacity",void 0),fm=u([B("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],fm);var g8;let Mp=g8=class extends dn{constructor(t,e){super(t,e),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=upe(this.legendElement,this.messages),i=this.isChild?St.layerChildTable:St.layerTable,r=e?se("div",{class:St.layerCaption},e):null,s={[St.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return se("section",{class:this.classes(i,s),key:`${this.key}-table`},r,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return se(s_,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return se(dm,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return Uhe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return se("div",{afterCreate:_r,bind:this.legendElement.preview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return se(pm,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return se(fm,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){const e=t.infos.map((i=>this._renderElementInfo(i,t.legendType))).filter(Boolean);return e.length?se("div",{class:St.layerBody},e):null}_renderElementInfo(t,e){const{layer:i}=this,r="label"in t?t.label:null,s=`${this.key}-${r}`;if("type"in t&&t.type)return se(g8,{effectList:this.effectList,isChild:!0,key:s,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const n=lpe(i,e),o={[St.imageryLayerInfoStretched]:n},a={[St.imageryLayerInfoStretched]:n};return se("div",{class:St.layerRow,key:`${s}-row`},se("div",{class:this.classes(St.symbolContainer,a)},this._renderPreview(t,n)),se("div",{class:this.classes(St.layerInfo,o)},e1(this.messages,r,!1)||""))}_renderPreview(t,e){const{layer:i}=this;return"preview"in t&&t.preview?se("div",{afterCreate:_r,bind:t.preview,class:St.symbol}):"src"in t&&t.src?this._renderImage(t,i,e):null}_renderImage(t,e,i){const{label:r,src:s,opacity:n}=t,o={[St.imageryLayerStretchedImage]:i,[St.symbol]:!i},a={opacity:`${n??e.opacity}`},l=e1(this.messages,r,!1);return se("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:s,styles:a,width:t.width})}};u([A()],Mp.prototype,"effectList",void 0),u([A()],Mp.prototype,"isChild",void 0),u([A()],Mp.prototype,"layer",void 0),u([A()],Mp.prototype,"legendElement",void 0),u([A()],Mp.prototype,"messages",void 0),Mp=g8=u([B("esri.widgets.Legend.styles.classic.LegendElement")],Mp);const iZe=`${Zi}__`;let Ka=class extends dn{constructor(e,i){super(e,i),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,i=e==null?void 0:e.toArray().map((r=>this._renderLegendForLayer(r))).filter(Boolean);return i!=null&&i.length?se("section",null,i):se("div",{class:St.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,i){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,s=`${iZe}${i?`${i}-`:""}${r}`,n=e.title?BC({level:this.headingLevel,class:this.classes(Vo.heading,St.label)},e.title):null;if(e.children.length){const o=e.children.toArray().map((a=>this._renderLegendForLayer(a,r)));return se("section",{class:this.classes(St.service,St.groupLayer),key:s},n,o)}return this._renderLegendElementsForLayer(e,n,s)}_renderLegendElementsForLayer(e,i,r){var a;const s=(a=e.legendElements)==null?void 0:a.filter(Boolean);if(!(s!=null&&s.length))return null;const n=s.map((l=>se(Mp,{effectList:e.effectList,isChild:!1,key:`${r}-${l.type}`,layer:e.layer,legendElement:l,messages:this.messages}))),o={[St.groupLayerChild]:!!e.parent};return se("section",{class:this.classes(St.service,o),key:r},i,se("div",{class:St.layer},n))}};u([A()],Ka.prototype,"activeLayerInfos",void 0),u([A()],Ka.prototype,"headingLevel",void 0),u([A(),Uf("esri/widgets/Legend/t9n/Legend")],Ka.prototype,"messages",void 0),u([A({readOnly:!0})],Ka.prototype,"type",void 0),Ka=u([B("esri.widgets.Legend.styles.classic.ClassicView")],Ka);const rZe={base:"esri-legend"};let _s=class extends dn{constructor(e,i){super(e,i),this.headingLevel=3,this.messages=null,this.viewModel=new aa,this.style=new Ka}initialize(){this.addHandles([ll((()=>this.view),"resize",(()=>this.scheduleRender())),ll((()=>this.activeLayerInfos),"change",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),He((()=>this.headingLevel),(e=>{const{style:i}=this;i&&(i.headingLevel=e)})),He((()=>this.style),((e,i)=>{i&&e!==i&&i.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)}),wr)])}destroy(){var e;(e=this.style)==null||e.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const i=this._get("style");e!==i&&(i==null||i.destroy()),this._set("style",e)}castStyle(e){if(e instanceof qa||e instanceof Ka)return e;if(typeof e=="string")return e==="card"?new qa:new Ka;if(e&&typeof e.type=="string"){const i={...e};return delete i.type,e.type==="card"?new qa(i):new Ka(i)}return new Ka}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return se("div",{class:this.classes(rZe.base,Vo.widget,this.style instanceof Ka?Vo.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach((i=>{this.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)})),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const i=He((()=>e.version),(()=>this.scheduleRender()));this.addHandles(i,`version_${e.layer.uid}`);const r=ll((()=>e.children),"change",(()=>e.children.forEach((s=>this._renderOnActiveLayerInfoChange(s)))),wr);this.addHandles(r,`version_${e.layer.uid}`),e.children.forEach((s=>this._renderOnActiveLayerInfoChange(s)))}};u([A()],_s.prototype,"activeLayerInfos",null),u([A()],_s.prototype,"basemapLegendVisible",null),u([A()],_s.prototype,"groundLegendVisible",null),u([A()],_s.prototype,"headingLevel",void 0),u([A()],_s.prototype,"hideLayersNotInCurrentView",null),u([A()],_s.prototype,"keepCacheOnDestroy",null),u([A()],_s.prototype,"respectLayerDefinitionExpression",null),u([A()],_s.prototype,"respectLayerVisibility",null),u([A()],_s.prototype,"icon",null),u([A()],_s.prototype,"label",null),u([A()],_s.prototype,"layerInfos",null),u([A(),Uf("esri/widgets/Legend/t9n/Legend")],_s.prototype,"messages",void 0),u([A()],_s.prototype,"style",null),u([yi("style")],_s.prototype,"castStyle",null),u([A()],_s.prototype,"view",null),u([A()],_s.prototype,"viewModel",void 0),_s=u([B("esri.widgets.Legend")],_s);const sZe=_s;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const nZe=(t,e)=>i=>aZe(i,t);var F3,ux,hx,Gf,vpe,bpe,wpe,PX;let oZe=(PX=class extends lB{constructor(i,r){var c;super(i,r);at(this,Gf);at(this,F3,new Map);at(this,ux);at(this,hx);new ZB(i);const s=this,n=s.instance;let o=n.viewModel,a=n.visibleElements;const l=new Proxy(this.exports,{get(h,y,g){return y==="viewModel"?o:y==="visibleElements"?a:Reflect.get(h,y,g)}});if(Je(s,hx,n),s.instance=l,s.exports=l,o){const h={component:i,get exports(){return s.instance.viewModel}};mRe(s).set("viewModel","viewModel"),i.addController(h),o=cae(i,new WeakRef(h),DLe(i)-1,o,ue(s,F3))}s.instance.visibleElements&&(a=us(c=s,Gf,vpe).call(c,n))}hostConnected(){this.instance=ue(this,hx),super.hostConnected()}hostLoad(){Je(this,ux,He(()=>this.component.el.view,i=>{const r=this.instance;!("view"in r)&&typeof r.viewModel=="object"?r.viewModel.view=i:r.view=i,!("map"in r)&&typeof r.viewModel=="object"?r.viewModel.map=i==null?void 0:i.map:r.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostUpdate(i){i.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:i}=this.component;i.childElem??(i.childElem=document.createElement("div")),this.instance.container=i.childElem,this.component.closed!==void 0&&this.onLifecycle(()=>He(()=>this.instance.visible,r=>this.component.closed=!r,{initial:!0}))}hostDestroy(){var i;(i=ue(this,ux))==null||i.remove(),super.hostDestroy()}},F3=new WeakMap,ux=new WeakMap,hx=new WeakMap,Gf=new WeakSet,vpe=function(i){return new Proxy(i.visibleElements,{get:(r,s)=>{if(typeof s=="symbol"||s in Promise.prototype)return r[s];const n=[s],o=us(this,Gf,bpe).call(this,n);return rB(this.component,a=>{const l=a;this.component[l]=!1;let c=i.visibleElements??{},h;for(const g of n.slice(0,-1))if(typeof c[g]=="object"&&c[g]!==null)c=c[g];else{h=!!c[g];break}h===void 0&&(h=!!(c[n.slice(-1)[0]]??!0));const y=l.startsWith("hide")||l.startsWith("show")?l.startsWith("hide"):h;this.onUpdate(g=>{if(g.has(l)){const _=this.component[l];us(this,Gf,wpe).call(this,n,_,y)}})},o)}})},bpe=function(i){const r=new Proxy({},{get:(s,n)=>{const o=Reflect.get(s,n);return typeof n=="symbol"||n in Promise.prototype?o:(i.push(n),r)}});return r},wpe=function(i,r,s){let n=this.instance.visibleElements??{};for(const a of i.slice(0,-1))(typeof n[a]!="object"||n[a]===null)&&(n[a]={}),n=n[a];const o=!!(s?!r:r);n[i.at(-1)]=o},PX);const aZe=Ux(oZe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const lZe=Li`@layer{arcgis-legend{display:block}}`,cZe=nZe(sZe);var Tf;let uZe=(Tf=class extends zx{constructor(){super(...arguments),this.widget=cZe(this),this.viewModel=this.widget.viewModel,this.activeLayerInfos=this.widget.activeLayerInfos,this.autoDestroyDisabled=!1,this.basemapLegendVisible=this.widget.basemapLegendVisible,this.headingLevel=this.widget.headingLevel,this.hideLayersNotInCurrentView=this.widget.hideLayersNotInCurrentView,this.icon=this.widget.icon,this.label=this.widget.label,this.layerInfos=this.widget.layerInfos,this.legendStyle=this.widget.style,this.position="bottom-left",this.respectLayerDefinitionExpression=this.widget.respectLayerDefinitionExpression,this.respectLayerVisibilityDisabled=this.widget.respectLayerVisibility,this.state=this.viewModel.state,this.arcgisPropertyChange=JB()("state"),this.arcgisReady=Jb()}async destroy(){await this.manager.destroy()}},Tf.properties={activeLayerInfos:0,autoDestroyDisabled:5,basemapLegendVisible:5,headingLevel:9,hideLayersNotInCurrentView:5,icon:1,label:1,layerInfos:0,legendStyle:1,position:1,referenceElement:1,respectLayerDefinitionExpression:5,respectLayerVisibilityDisabled:5,state:3},Tf.shadowRootOptions=M0,Tf.styles=lZe,Tf);jx("arcgis-legend",uZe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const KZ={scrim:"scrim",content:"content"},eY={s:72,l:480},hZe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity: 0}to{--tw-text-opacity: 1}}.scrim{position:absolute;inset:0;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,z3=class z3 extends rr{constructor(){super(...arguments),this.loaderRef=Rn(),this.resizeObserver=hl("resize",()=>this.handleResize()),this.messages=$a(),this.hasContent=!1,this.loading=!1}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}handleDefaultSlotChange(e){this.hasContent=I9e(e)}getScale(e){return e<eY.s?"s":e>=eY.l?"l":"m"}handleResize(){const{el:e}=this;this.loaderScale=this.getScale(Math.min(e.clientHeight,e.clientWidth)??0)}render(){const{hasContent:e,loading:i,loaderScale:r,messages:s}=this;return Se`<div class=${$e(KZ.scrim)}>${i&&r?Se`<calcite-loader .label=${s.loading} .scale=${r} ${ai(this.loaderRef)}></calcite-loader>`:null}<div class=${$e(KZ.content)} .hidden=${!e}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div>`}};z3.properties={hasContent:[16,{},{state:!0}],loaderScale:[16,{},{state:!0}],loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}]},z3.styles=hZe;let v8=z3;Sr("calcite-scrim",v8);const _pe=["top","right","bottom","left"],tY=["start","end"],iY=_pe.reduce((t,e)=>t.concat(e,e+"-"+tY[0],e+"-"+tY[1]),[]),r1=Math.min,n0=Math.max,s3=Math.round,JE=Math.floor,Fu=t=>({x:t,y:t}),dZe={left:"right",right:"left",bottom:"top",top:"bottom"},pZe={start:"end",end:"start"};function b8(t,e,i){return n0(t,r1(e,i))}function Q0(t,e){return typeof t=="function"?t(e):t}function Od(t){return t.split("-")[0]}function zu(t){return t.split("-")[1]}function Spe(t){return t==="x"?"y":"x"}function Ej(t){return t==="y"?"height":"width"}const fZe=new Set(["top","bottom"]);function mf(t){return fZe.has(Od(t))?"y":"x"}function Ij(t){return Spe(mf(t))}function xpe(t,e,i){i===void 0&&(i=!1);const r=zu(t),s=Ij(t),n=Ej(s);let o=s==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[n]>e.floating[n]&&(o=o3(o)),[o,o3(o)]}function AZe(t){const e=o3(t);return[n3(t),e,n3(e)]}function n3(t){return t.replace(/start|end/g,e=>pZe[e])}const rY=["left","right"],sY=["right","left"],mZe=["top","bottom"],yZe=["bottom","top"];function gZe(t,e,i){switch(t){case"top":case"bottom":return i?e?sY:rY:e?rY:sY;case"left":case"right":return e?mZe:yZe;default:return[]}}function vZe(t,e,i,r){const s=zu(t);let n=gZe(Od(t),i==="start",r);return s&&(n=n.map(o=>o+"-"+s),e&&(n=n.concat(n.map(n3)))),n}function o3(t){return t.replace(/left|right|bottom|top/g,e=>dZe[e])}function bZe(t){return{top:0,right:0,bottom:0,left:0,...t}}function $pe(t){return typeof t!="number"?bZe(t):{top:t,right:t,bottom:t,left:t}}function a3(t){const{x:e,y:i,width:r,height:s}=t;return{width:r,height:s,top:i,left:e,right:e+r,bottom:i+s,x:e,y:i}}function nY(t,e,i){let{reference:r,floating:s}=t;const n=mf(e),o=Ij(e),a=Ej(o),l=Od(e),c=n==="y",h=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,g=r[a]/2-s[a]/2;let _;switch(l){case"top":_={x:h,y:r.y-s.height};break;case"bottom":_={x:h,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y};break;case"left":_={x:r.x-s.width,y};break;default:_={x:r.x,y:r.y}}switch(zu(e)){case"start":_[o]-=g*(i&&c?-1:1);break;case"end":_[o]+=g*(i&&c?-1:1);break}return _}async function wZe(t,e){var i;e===void 0&&(e={});const{x:r,y:s,platform:n,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:y="floating",altBoundary:g=!1,padding:_=0}=Q0(e,t),S=$pe(_),C=a[g?y==="floating"?"reference":"floating":y],M=a3(await n.getClippingRect({element:(i=await(n.isElement==null?void 0:n.isElement(C)))==null||i?C:C.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),P=y==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,D=await(n.getOffsetParent==null?void 0:n.getOffsetParent(a.floating)),F=await(n.isElement==null?void 0:n.isElement(D))?await(n.getScale==null?void 0:n.getScale(D))||{x:1,y:1}:{x:1,y:1},U=a3(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:P,offsetParent:D,strategy:l}):P);return{top:(M.top-U.top+S.top)/F.y,bottom:(U.bottom-M.bottom+S.bottom)/F.y,left:(M.left-U.left+S.left)/F.x,right:(U.right-M.right+S.right)/F.x}}const _Ze=async(t,e,i)=>{const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:o}=i,a=n.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y}=nY(c,r,l),g=r,_={},S=0;for(let C=0;C<a.length;C++){var E;const{name:M,fn:P}=a[C],{x:D,y:F,data:U,reset:G}=await P({x:h,y,initialPlacement:r,placement:g,strategy:s,middlewareData:_,rects:c,platform:{...o,detectOverflow:(E=o.detectOverflow)!=null?E:wZe},elements:{reference:t,floating:e}});h=D??h,y=F??y,_={..._,[M]:{..._[M],...U}},G&&S<=50&&(S++,typeof G=="object"&&(G.placement&&(g=G.placement),G.rects&&(c=G.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):G.rects),{x:h,y}=nY(c,g,l)),C=-1)}return{x:h,y,placement:g,strategy:s,middlewareData:_}},SZe=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:r,placement:s,rects:n,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:h=0}=Q0(t,e)||{};if(c==null)return{};const y=$pe(h),g={x:i,y:r},_=Ij(s),S=Ej(_),E=await o.getDimensions(c),C=_==="y",M=C?"top":"left",P=C?"bottom":"right",D=C?"clientHeight":"clientWidth",F=n.reference[S]+n.reference[_]-g[_]-n.floating[S],U=g[_]-n.reference[_],G=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let Q=G?G[D]:0;(!Q||!await(o.isElement==null?void 0:o.isElement(G)))&&(Q=a.floating[D]||n.floating[S]);const W=F/2-U/2,X=Q/2-E[S]/2-1,K=r1(y[M],X),de=r1(y[P],X),ye=K,xe=Q-E[S]-de,ee=Q/2-E[S]/2+W,le=b8(ye,ee,xe),Te=!l.arrow&&zu(s)!=null&&ee!==le&&n.reference[S]/2-(ee<ye?K:de)-E[S]/2<0,ke=Te?ee<ye?ee-ye:ee-xe:0;return{[_]:g[_]+ke,data:{[_]:le,centerOffset:ee-le-ke,...Te&&{alignmentOffset:ke}},reset:Te}}});function xZe(t,e,i){return(t?[...i.filter(s=>zu(s)===t),...i.filter(s=>zu(s)!==t)]:i.filter(s=>Od(s)===s)).filter(s=>t?zu(s)===t||(e?n3(s)!==s:!1):!0)}const $Ze=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,r,s;const{rects:n,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:h=!1,alignment:y,allowedPlacements:g=iY,autoAlignment:_=!0,...S}=Q0(t,e),E=y!==void 0||g===iY?xZe(y||null,_,g):g,C=await l.detectOverflow(e,S),M=((i=o.autoPlacement)==null?void 0:i.index)||0,P=E[M];if(P==null)return{};const D=xpe(P,n,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==P)return{reset:{placement:E[0]}};const F=[C[Od(P)],C[D[0]],C[D[1]]],U=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:P,overflows:F}],G=E[M+1];if(G)return{data:{index:M+1,overflows:U},reset:{placement:G}};const Q=U.map(K=>{const de=zu(K.placement);return[K.placement,de&&h?K.overflows.slice(0,2).reduce((ye,xe)=>ye+xe,0):K.overflows[0],K.overflows]}).sort((K,de)=>K[1]-de[1]),X=((s=Q.filter(K=>K[2].slice(0,zu(K[0])?2:3).every(de=>de<=0))[0])==null?void 0:s[0])||Q[0][0];return X!==a?{data:{index:M+1,overflows:U},reset:{placement:X}}:{}}}},EZe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;const{placement:s,middlewareData:n,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:y=!0,fallbackPlacements:g,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:E=!0,...C}=Q0(t,e);if((i=n.arrow)!=null&&i.alignmentOffset)return{};const M=Od(s),P=mf(a),D=Od(a)===a,F=await(l.isRTL==null?void 0:l.isRTL(c.floating)),U=g||(D||!E?[o3(a)]:AZe(a)),G=S!=="none";!g&&G&&U.push(...vZe(a,E,S,F));const Q=[a,...U],W=await l.detectOverflow(e,C),X=[];let K=((r=n.flip)==null?void 0:r.overflows)||[];if(h&&X.push(W[M]),y){const ee=xpe(s,o,F);X.push(W[ee[0]],W[ee[1]])}if(K=[...K,{placement:s,overflows:X}],!X.every(ee=>ee<=0)){var de,ye;const ee=(((de=n.flip)==null?void 0:de.index)||0)+1,le=Q[ee];if(le&&(!(y==="alignment"?P!==mf(le):!1)||K.every(De=>mf(De.placement)===P?De.overflows[0]>0:!0)))return{data:{index:ee,overflows:K},reset:{placement:le}};let Te=(ye=K.filter(ke=>ke.overflows[0]<=0).sort((ke,De)=>ke.overflows[1]-De.overflows[1])[0])==null?void 0:ye.placement;if(!Te)switch(_){case"bestFit":{var xe;const ke=(xe=K.filter(De=>{if(G){const Ke=mf(De.placement);return Ke===P||Ke==="y"}return!0}).map(De=>[De.placement,De.overflows.filter(Ke=>Ke>0).reduce((Ke,vt)=>Ke+vt,0)]).sort((De,Ke)=>De[1]-Ke[1])[0])==null?void 0:xe[0];ke&&(Te=ke);break}case"initialPlacement":Te=a;break}if(s!==Te)return{reset:{placement:Te}}}return{}}}};function oY(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function aY(t){return _pe.some(e=>t[e]>=0)}const IZe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i,platform:r}=e,{strategy:s="referenceHidden",...n}=Q0(t,e);switch(s){case"referenceHidden":{const o=await r.detectOverflow(e,{...n,elementContext:"reference"}),a=oY(o,i.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:aY(a)}}}case"escaped":{const o=await r.detectOverflow(e,{...n,altBoundary:!0}),a=oY(o,i.floating);return{data:{escapedOffsets:a,escaped:aY(a)}}}default:return{}}}}},CZe=new Set(["left","top"]);async function TZe(t,e){const{placement:i,platform:r,elements:s}=t,n=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Od(i),a=zu(i),l=mf(i)==="y",c=CZe.has(o)?-1:1,h=n&&l?-1:1,y=Q0(e,t);let{mainAxis:g,crossAxis:_,alignmentAxis:S}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return a&&typeof S=="number"&&(_=a==="end"?S*-1:S),l?{x:_*h,y:g*c}:{x:g*c,y:_*h}}const MZe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;const{x:s,y:n,placement:o,middlewareData:a}=e,l=await TZe(e,t);return o===((i=a.offset)==null?void 0:i.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:n+l.y,data:{...l,placement:o}}}}},kZe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:s,platform:n}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:M=>{let{x:P,y:D}=M;return{x:P,y:D}}},...c}=Q0(t,e),h={x:i,y:r},y=await n.detectOverflow(e,c),g=mf(Od(s)),_=Spe(g);let S=h[_],E=h[g];if(o){const M=_==="y"?"top":"left",P=_==="y"?"bottom":"right",D=S+y[M],F=S-y[P];S=b8(D,S,F)}if(a){const M=g==="y"?"top":"left",P=g==="y"?"bottom":"right",D=E+y[M],F=E-y[P];E=b8(D,E,F)}const C=l.fn({...e,[_]:S,[g]:E});return{...C,data:{x:C.x-i,y:C.y-r,enabled:{[_]:o,[g]:a}}}}}};function DP(){return typeof window<"u"}function j1(t){return Epe(t)?(t.nodeName||"").toLowerCase():"#document"}function wa(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function th(t){var e;return(e=(Epe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Epe(t){return DP()?t instanceof Node||t instanceof wa(t).Node:!1}function uc(t){return DP()?t instanceof Element||t instanceof wa(t).Element:!1}function Yu(t){return DP()?t instanceof HTMLElement||t instanceof wa(t).HTMLElement:!1}function lY(t){return!DP()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof wa(t).ShadowRoot}const PZe=new Set(["inline","contents"]);function i$(t){const{overflow:e,overflowX:i,overflowY:r,display:s}=hc(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!PZe.has(s)}const LZe=new Set(["table","td","th"]);function RZe(t){return LZe.has(j1(t))}const OZe=[":popover-open",":modal"];function NP(t){return OZe.some(e=>{try{return t.matches(e)}catch{return!1}})}const DZe=["transform","translate","scale","rotate","perspective"],NZe=["transform","translate","scale","rotate","perspective","filter"],FZe=["paint","layout","strict","content"];function FP(t){const e=Cj(),i=uc(t)?hc(t):t;return DZe.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||NZe.some(r=>(i.willChange||"").includes(r))||FZe.some(r=>(i.contain||"").includes(r))}function zZe(t){let e=Vf(t);for(;Yu(e)&&!s1(e);){if(FP(e))return e;if(NP(e))return null;e=Vf(e)}return null}function Cj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const BZe=new Set(["html","body","#document"]);function s1(t){return BZe.has(j1(t))}function hc(t){return wa(t).getComputedStyle(t)}function zP(t){return uc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vf(t){if(j1(t)==="html")return t;const e=t.assignedSlot||t.parentNode||lY(t)&&t.host||th(t);return lY(e)?e.host:e}function Ipe(t){const e=Vf(t);return s1(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yu(e)&&i$(e)?e:Ipe(e)}function XS(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);const s=Ipe(t),n=s===((r=t.ownerDocument)==null?void 0:r.body),o=wa(s);if(n){const a=w8(o);return e.concat(o,o.visualViewport||[],i$(s)?s:[],a&&i?XS(a):[])}return e.concat(s,XS(s,[],i))}function w8(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Cpe(t){const e=hc(t);let i=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Yu(t),n=s?t.offsetWidth:i,o=s?t.offsetHeight:r,a=s3(i)!==n||s3(r)!==o;return a&&(i=n,r=o),{width:i,height:r,$:a}}function Tj(t){return uc(t)?t:t.contextElement}function Mv(t){const e=Tj(t);if(!Yu(e))return Fu(1);const i=e.getBoundingClientRect(),{width:r,height:s,$:n}=Cpe(e);let o=(n?s3(i.width):i.width)/r,a=(n?s3(i.height):i.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const jZe=Fu(0);function Tpe(t){const e=wa(t);return!Cj()||!e.visualViewport?jZe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function UZe(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==wa(t)?!1:e}function R0(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);const s=t.getBoundingClientRect(),n=Tj(t);let o=Fu(1);e&&(r?uc(r)&&(o=Mv(r)):o=Mv(t));const a=UZe(n,i,r)?Tpe(n):Fu(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,h=s.width/o.x,y=s.height/o.y;if(n){const g=wa(n),_=r&&uc(r)?wa(r):r;let S=g,E=w8(S);for(;E&&r&&_!==S;){const C=Mv(E),M=E.getBoundingClientRect(),P=hc(E),D=M.left+(E.clientLeft+parseFloat(P.paddingLeft))*C.x,F=M.top+(E.clientTop+parseFloat(P.paddingTop))*C.y;l*=C.x,c*=C.y,h*=C.x,y*=C.y,l+=D,c+=F,S=wa(E),E=w8(S)}}return a3({width:h,height:y,x:l,y:c})}function BP(t,e){const i=zP(t).scrollLeft;return e?e.left+i:R0(th(t)).left+i}function Mpe(t,e){const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-BP(t,i),s=i.top+e.scrollTop;return{x:r,y:s}}function VZe(t){let{elements:e,rect:i,offsetParent:r,strategy:s}=t;const n=s==="fixed",o=th(r),a=e?NP(e.floating):!1;if(r===o||a&&n)return i;let l={scrollLeft:0,scrollTop:0},c=Fu(1);const h=Fu(0),y=Yu(r);if((y||!y&&!n)&&((j1(r)!=="body"||i$(o))&&(l=zP(r)),Yu(r))){const _=R0(r);c=Mv(r),h.x=_.x+r.clientLeft,h.y=_.y+r.clientTop}const g=o&&!y&&!n?Mpe(o,l):Fu(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+h.x+g.x,y:i.y*c.y-l.scrollTop*c.y+h.y+g.y}}function GZe(t){return Array.from(t.getClientRects())}function HZe(t){const e=th(t),i=zP(t),r=t.ownerDocument.body,s=n0(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),n=n0(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-i.scrollLeft+BP(t);const a=-i.scrollTop;return hc(r).direction==="rtl"&&(o+=n0(e.clientWidth,r.clientWidth)-s),{width:s,height:n,x:o,y:a}}const cY=25;function qZe(t,e){const i=wa(t),r=th(t),s=i.visualViewport;let n=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){n=s.width,o=s.height;const h=Cj();(!h||h&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=BP(r);if(c<=0){const h=r.ownerDocument,y=h.body,g=getComputedStyle(y),_=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,S=Math.abs(r.clientWidth-y.clientWidth-_);S<=cY&&(n-=S)}else c<=cY&&(n+=c);return{width:n,height:o,x:a,y:l}}const WZe=new Set(["absolute","fixed"]);function QZe(t,e){const i=R0(t,!0,e==="fixed"),r=i.top+t.clientTop,s=i.left+t.clientLeft,n=Yu(t)?Mv(t):Fu(1),o=t.clientWidth*n.x,a=t.clientHeight*n.y,l=s*n.x,c=r*n.y;return{width:o,height:a,x:l,y:c}}function uY(t,e,i){let r;if(e==="viewport")r=qZe(t,i);else if(e==="document")r=HZe(th(t));else if(uc(e))r=QZe(e,i);else{const s=Tpe(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return a3(r)}function kpe(t,e){const i=Vf(t);return i===e||!uc(i)||s1(i)?!1:hc(i).position==="fixed"||kpe(i,e)}function JZe(t,e){const i=e.get(t);if(i)return i;let r=XS(t,[],!1).filter(a=>uc(a)&&j1(a)!=="body"),s=null;const n=hc(t).position==="fixed";let o=n?Vf(t):t;for(;uc(o)&&!s1(o);){const a=hc(o),l=FP(o);!l&&a.position==="fixed"&&(s=null),(n?!l&&!s:!l&&a.position==="static"&&!!s&&WZe.has(s.position)||i$(o)&&!l&&kpe(t,o))?r=r.filter(h=>h!==o):s=a,o=Vf(o)}return e.set(t,r),r}function ZZe(t){let{element:e,boundary:i,rootBoundary:r,strategy:s}=t;const o=[...i==="clippingAncestors"?NP(e)?[]:JZe(e,this._c):[].concat(i),r],a=o[0],l=o.reduce((c,h)=>{const y=uY(e,h,s);return c.top=n0(y.top,c.top),c.right=r1(y.right,c.right),c.bottom=r1(y.bottom,c.bottom),c.left=n0(y.left,c.left),c},uY(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function YZe(t){const{width:e,height:i}=Cpe(t);return{width:e,height:i}}function XZe(t,e,i){const r=Yu(e),s=th(e),n=i==="fixed",o=R0(t,!0,n,e);let a={scrollLeft:0,scrollTop:0};const l=Fu(0);function c(){l.x=BP(s)}if(r||!r&&!n)if((j1(e)!=="body"||i$(s))&&(a=zP(e)),r){const _=R0(e,!0,n,e);l.x=_.x+e.clientLeft,l.y=_.y+e.clientTop}else s&&c();n&&!r&&s&&c();const h=s&&!r&&!n?Mpe(s,a):Fu(0),y=o.left+a.scrollLeft-l.x-h.x,g=o.top+a.scrollTop-l.y-h.y;return{x:y,y:g,width:o.width,height:o.height}}function qO(t){return hc(t).position==="static"}function hY(t,e){if(!Yu(t)||hc(t).position==="fixed")return null;if(e)return e(t);let i=t.offsetParent;return th(t)===i&&(i=i.ownerDocument.body),i}function Ppe(t,e){const i=wa(t);if(NP(t))return i;if(!Yu(t)){let s=Vf(t);for(;s&&!s1(s);){if(uc(s)&&!qO(s))return s;s=Vf(s)}return i}let r=hY(t,e);for(;r&&RZe(r)&&qO(r);)r=hY(r,e);return r&&s1(r)&&qO(r)&&!FP(r)?i:r||zZe(t)||i}const KZe=async function(t){const e=this.getOffsetParent||Ppe,i=this.getDimensions,r=await i(t.floating);return{reference:XZe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eYe(t){return hc(t).direction==="rtl"}const _8={convertOffsetParentRelativeRectToViewportRelativeRect:VZe,getDocumentElement:th,getClippingRect:ZZe,getOffsetParent:Ppe,getElementRects:KZe,getClientRects:GZe,getDimensions:YZe,getScale:Mv,isElement:uc,isRTL:eYe};function Lpe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function tYe(t,e){let i=null,r;const s=th(t);function n(){var a;clearTimeout(r),(a=i)==null||a.disconnect(),i=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),n();const c=t.getBoundingClientRect(),{left:h,top:y,width:g,height:_}=c;if(a||e(),!g||!_)return;const S=JE(y),E=JE(s.clientWidth-(h+g)),C=JE(s.clientHeight-(y+_)),M=JE(h),D={rootMargin:-S+"px "+-E+"px "+-C+"px "+-M+"px",threshold:n0(0,r1(1,l))||1};let F=!0;function U(G){const Q=G[0].intersectionRatio;if(Q!==l){if(!F)return o();Q?o(!1,Q):r=setTimeout(()=>{o(!1,1e-7)},1e3)}Q===1&&!Lpe(c,t.getBoundingClientRect())&&o(),F=!1}try{i=new IntersectionObserver(U,{...D,root:s.ownerDocument})}catch{i=new IntersectionObserver(U,D)}i.observe(t)}return o(!0),n}function iYe(t,e,i,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:n=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Tj(t),h=s||n?[...c?XS(c):[],...XS(e)]:[];h.forEach(M=>{s&&M.addEventListener("scroll",i,{passive:!0}),n&&M.addEventListener("resize",i)});const y=c&&a?tYe(c,i):null;let g=-1,_=null;o&&(_=new ResizeObserver(M=>{let[P]=M;P&&P.target===c&&_&&(_.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var D;(D=_)==null||D.observe(e)})),i()}),c&&!l&&_.observe(c),_.observe(e));let S,E=l?R0(t):null;l&&C();function C(){const M=R0(t);E&&!Lpe(E,M)&&i(),E=M,S=requestAnimationFrame(C)}return i(),()=>{var M;h.forEach(P=>{s&&P.removeEventListener("scroll",i),n&&P.removeEventListener("resize",i)}),y==null||y(),(M=_)==null||M.disconnect(),_=null,l&&cancelAnimationFrame(S)}}const rYe=MZe,sYe=$Ze,nYe=kZe,dY=EZe,oYe=IZe,aYe=SZe,lYe=(t,e,i)=>{const r=new Map,s={platform:_8,...i},n={...s.platform,_c:r};return _Ze(t,e,{...s,platform:n})};function jP(t,e,{signal:i,edges:r}={}){let s,n=null;const o=r!=null&&r.includes("leading"),a=r==null||r.includes("trailing"),l=()=>{n!==null&&(t.apply(s,n),s=void 0,n=null)},c=()=>{a&&l(),_()};let h=null;const y=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,c()},e)},g=()=>{h!==null&&(clearTimeout(h),h=null)},_=()=>{g(),s=void 0,n=null},S=()=>{l()},E=function(...C){if(i!=null&&i.aborted)return;s=this,n=C;const M=h==null;y(),o&&M&&l()};return E.schedule=y,E.cancel=_,E.flush=S,i==null||i.addEventListener("abort",_,{once:!0}),E}function cYe(t){return t}function uYe(t){return t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function hYe(t){return dYe(t)}function WO(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function dYe(t){for(let e=t;e;e=WO(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=WO(t);e;e=WO(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||FP(i)||e.tagName==="BODY"))return e}return null}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */(function(){{const e=_8.getOffsetParent;_8.getOffsetParent=i=>e(i,hYe)}})();function pY(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const Rpe=(async(t,{referenceEl:e,floatingEl:i,overlayPositioning:r="absolute",placement:s,flipDisabled:n,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:h})=>{var F;if(!e||!i)return;const y=Jx(i)==="rtl",{x:g,y:_,placement:S,strategy:E,middlewareData:C}=await lYe(e,i,{strategy:r,placement:s==="auto"||s==="auto-start"||s==="auto-end"?void 0:fY(s,y),middleware:AYe({placement:s,flipDisabled:n,flipPlacements:o==null?void 0:o.map(U=>fY(U,y)),offsetDistance:a,offsetSkidding:l,arrowEl:c,type:h})});if(c&&C.arrow){const{x:U,y:G}=C.arrow,Q=S.split("-")[0],W=U!=null?"left":"top",X=gYe[Q],K={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=Q==="left"||Q==="right"?"horizontal":"vertical"),Object.assign(c.style,{...K,[W]:`${W=="left"?U:G}px`,[Q]:"100%",transform:X})}const P=((F=C.hide)==null?void 0:F.referenceHidden)?"hidden":null,D=P?"none":null;i.setAttribute(pYe,S),Object.assign(i.style,{pointerEvents:D,position:E,transform:`translate(${pY(g)}px,${pY(_)}px)`,visibility:P})}),pYe="data-placement",Ope=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],KS="bottom-start",fYe="bottom-end",n1={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function AYe({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:r,offsetSkidding:s,arrowEl:n,type:o}){const a=[nYe(),oYe()];return o==="menu"&&a.push(dY({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})),a.push(rYe({mainAxis:typeof r=="number"?r:0,crossAxis:typeof s=="number"?s:0})),t==="auto"||t==="auto-start"||t==="auto-end"?a.push(sYe({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||a.push(dY(i?{fallbackPlacements:i}:{})),n&&a.push(aYe({element:n})),a}function mYe(t){return Ope.includes(t)}function Dpe(t,e){const i=t.filter(mYe);return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${Ope.map(r=>`"${r}"`).join(", ").trim()}`,{el:e}),i}function fY(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function Mj(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(Object.assign(e.floatingEl.style,{display:"block",position:e.overlayPositioning??"absolute"}),!ex.get(t))return Npe(t);await(i?yYe(t):Rpe)(t,e)}function yYe(t){let e=l3.get(t);return e||(e=jP(Rpe,RB.reposition,{edges:["leading","trailing"]}),l3.set(t,e),e)}const gYe={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},ex=new WeakMap,l3=new WeakMap;async function Npe(t){const{referenceEl:e,floatingEl:i}=t;if(!i.isConnected)return;const r=iYe;ex.set(t,{state:"pending"});let s;const n=r(e,i,()=>{const o=t.reposition();s||(s=o)});return ex.set(t,{state:"active",cleanUp:n}),s}function kj(t){const{floatingEl:e}=t;e&&Object.assign(e.style,{display:"",pointerEvents:"",position:"",transform:"",visibility:""})}async function bd(t){const{floatingEl:e,referenceEl:i}=t;if(kj(t),!(!e||!i)&&(UP(t),!!t.open))return Npe(t)}function UP(t){var i;const e=ex.get(t);(e==null?void 0:e.state)==="active"&&e.cleanUp(),ex.delete(t),(i=l3.get(t))==null||i.cancel(),l3.delete(t)}const AY=4,mY=Math.ceil(Math.hypot(AY,AY));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Pj(t){return t==="Enter"||t===" "}const VP=["0","1","2","3","4","5","6","7","8","9"];/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function yY(t){return t[t.openProp||"open"]}async function r$(t){await t.updateComplete,yY(t)?t.onBeforeOpen():t.onBeforeClose(),await t.updateComplete,t.transitionEl&&await O9e(t.transitionEl,t.transitionProp),yY(t)?t.onOpen():t.onClose()}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function vYe(t,e,i){return e?`${t}-${e}`:i?`${t}-${i}`:`${t}-m`}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const bYe={trigger:"trigger"},QO={content:"content",wrapper:"wrapper",triggerContainer:"trigger-container"},gY="calcite-dropdown",ZE={menuButton:t=>`${gY}-${t}-menubutton`,menu:t=>`${gY}-${t}-menu`},wYe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}.wrapper{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.wrapper{opacity:0;inset-block-start:0;left:0}}.wrapper .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.content{max-height:45vh;width:auto;overflow-y:auto;overflow-x:hidden;inline-size:var(--calcite-dropdown-width, var(--calcite-internal-dropdown-width));background-color:var(--calcite-dropdown-background-color, var(--calcite-color-foreground-1))}.trigger-container{position:relative;display:flex;height:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}.width-s{--calcite-internal-dropdown-width: 12rem}.width-m{--calcite-internal-dropdown-width: 14rem}.width-l{--calcite-internal-dropdown-width: 16rem}@media (forced-colors: active){:host([open]) .wrapper{border:var(--calcite-border-width-sm) solid canvasText}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,iS=class iS extends rr{constructor(){super(),this.focusLastDropdownItem=!1,this.groups=[],this.guid=Kf(),this.items=[],this.mutationObserver=hl("mutation",()=>this.updateItems()),this.transitionProp="opacity",this.resizeObserver=hl("resize",e=>this.resizeObserverCallback(e)),this.focusSetter=Ho()(this),this.closeOnSelectDisabled=!1,this.disabled=!1,this.maxItems=0,this.offsetDistance=0,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=KS,this.scale="m",this.selectedItems=[],this.type="click",this.calciteDropdownBeforeClose=Ye({cancelable:!1}),this.calciteDropdownBeforeOpen=Ye({cancelable:!1}),this.calciteDropdownClose=Ye({cancelable:!1}),this.calciteDropdownOpen=Ye({cancelable:!1}),this.calciteDropdownSelect=Ye({cancelable:!1}),this.listenOn(window,"click",this.closeCalciteDropdownOnClick),this.listen("calciteInternalDropdownCloseRequest",this.closeCalciteDropdownOnEvent),this.listenOn(window,"calciteDropdownOpen",this.closeCalciteDropdownOnOpenEvent),this.listen("pointerenter",this.pointerEnterHandler),this.listen("pointerleave",this.pointerLeaveHandler),this.listen("calciteInternalDropdownItemKeyEvent",this.calciteInternalDropdownItemKeyEvent),this.listen("calciteInternalDropdownItemSelect",this.handleItemSelect)}async reposition(e=!1){const{filteredFlipPlacements:i,floatingEl:r,offsetDistance:s,offsetSkidding:n,overlayPositioning:o,placement:a,referenceEl:l}=this;return Mj(this,{floatingEl:r,referenceEl:l,offsetDistance:s,offsetSkidding:n,overlayPositioning:o,placement:a,flipPlacements:i,type:"menu"},e)}async setFocus(e){return this.focusSetter(()=>this.referenceEl,e)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.updateItems(),bd(this)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("maxItems")&&this.hasUpdated&&this.setMaxScrollerHeight(),this.hasUpdated&&(e.has("offsetDistance")&&this.offsetDistance!==0||e.has("offsetSkidding")&&this.offsetSkidding!==0||e.has("overlayPositioning")&&this.overlayPositioning!=="absolute"||e.has("placement")&&this.placement!==KS)&&this.reposition(!0),e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&this.handlePropsChange()}updated(){Ea(this)}loaded(){this.updateSelectedItems(),bd(this)}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),UP(this)}openHandler(){r$(this),!this.disabled&&this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupProps()}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,r=i.target,s=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(r);break;case"ArrowDown":ME(s,r,"next");break;case"ArrowUp":ME(s,r,"previous");break;case"Home":ME(s,r,"first");break;case"End":ME(s,r,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?Dpe(i,e):null}updateTriggers(e){this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)}updateItems(){this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)}updateGroups(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupProps()}updateGroupProps(){this.groups.forEach((e,i)=>{e.scale=this.scale,e.position=i})}resizeObserverCallback(e){e.forEach(({target:i})=>{i===this.referenceEl?this.setDropdownWidth():i===this.scrollerEl&&this.setMaxScrollerHeight()})}setDropdownWidth(){const{referenceEl:e,scrollerEl:i}=this;!i||!e||(i.style.minWidth=`${e.clientWidth}px`)}setMaxScrollerHeight(){const{maxItems:e,items:i,scrollerEl:r}=this;if(!r)return;const s=i.length>=e&&e>0?this.getYDistanceFromScroller(i.at(e-1)):0;r.style.maxBlockSize=s>0?`${s}px`:"",this.reposition(!0)}setScrollerAndTransitionEl(e){FM(this.resizeObserver,this.scrollerEl,e),this.scrollerEl=e,this.transitionEl=e}onBeforeOpen(){this.focusOnFirstActiveOrDefaultItem(),this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit(),kj(this)}setReferenceEl(e){FM(this.resizeObserver,this.referenceEl,e),this.referenceEl=e,bd(this)}setFloatingEl(e){this.floatingEl=e,bd(this)}keyDownHandler(e){if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:r}=e;if(!i){if(r==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&r==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}Pj(r)?(this.toggleDropdown(),e.preventDefault()):(r==="ArrowDown"||r==="ArrowUp")&&(e.preventDefault(),this.focusLastDropdownItem=r==="ArrowUp",this.open=!0)}}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getYDistanceFromScroller(e){const i=e.getBoundingClientRect();return e.offsetTop+i.height}closeCalciteDropdown(e=!0){this.open=!1,e&&BS(this.triggers[0])}async focusOnFirstActiveOrDefaultItem(){const i=this.getTraversableItems().find(r=>r.selected)||(this.focusLastDropdownItem?this.items.at(-1):this.items[0]);this.focusLastDropdownItem=!1,i&&(await this.updateComplete,await U6(),await U6(),await BS(i),i.scrollIntoView({block:"nearest"}))}toggleDropdown(){this.open=!this.open}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}render(){const{open:e,guid:i}=this;return Ia({disabled:this.disabled,children:Se`<div class=${$e(QO.triggerContainer)} id=${ZE.menuButton(i)??Ge} @click=${this.toggleDropdown} @keydown=${this.keyDownHandler} ${ai(this.setReferenceEl)}><slot aria-controls=${ZE.menu(i)??Ge} .ariaExpanded=${e} aria-haspopup=menu name=${bYe.trigger} @slotchange=${this.updateTriggers}></slot></div><div .ariaHidden=${!e} class=${$e({[QO.wrapper]:!0,[vYe("width",this.width,this.widthScale)]:!!(this.width||this.widthScale)})} ${ai(this.setFloatingEl)}><div aria-labelledby=${ZE.menuButton(i)??Ge} class=${$e({[QO.content]:!0,[n1.animation]:!0,[n1.animationActive]:e})} id=${ZE.menu(i)??Ge} role=menu ${ai(this.setScrollerAndTransitionEl)}><slot @slotchange=${this.updateGroups}></slot></div></div>`})}};iS.properties={closeOnSelectDisabled:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],maxItems:[11,{},{reflect:!0,type:Number}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],type:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},iS.shadowRootOptions={mode:"open",delegatesFocus:!0},iS.styles=wYe;let c3=iS;Sr("calcite-dropdown",c3);const vAt=Object.freeze(Object.defineProperty({__proto__:null,Dropdown:c3},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oi=L1(class extends R1{constructor(){super(...arguments),this.key=Ge}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(aB(t),this.key=e),i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const xl={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},vY="calcite-action",_Ye={button:t=>`${vY}-${t}-button`,indicator:t=>`${vY}-${t}-indicator`},SYe={tooltip:"tooltip"},xYe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;cursor:pointer;background-color:transparent;--calcite-internal-action-text-color: var(--calcite-color-text-3);border-radius:var(--calcite-action-corner-radius, var(--calcite-action-corner-radius-start-start, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-start-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-start, var(--calcite-corner-radius)))}.interaction-container{border-radius:inherit}:host([width=full]){flex:1 0 auto}:host([width=full]) .button{justify-content:center}:host([width=full]) .button .text-container--visible{flex:none}:host([drag-handle]){cursor:move;--calcite-internal-action-text-color: var(--calcite-color-border-input);--calcite-internal-action-padding-inline: var(--calcite-spacing-xxs)}.button{border-radius:inherit;position:relative;margin:0;display:flex;inline-size:auto;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-internal-action-text-color));text-align:unset;flex:1 0 auto;cursor:inherit}.button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}.button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}.icon-container{pointer-events:none;margin:0;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-3));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}:host([active]) .button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]):host([active]) .button{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1)}:host([appearance=transparent]) .button:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([active-descendant]) .button{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .button{font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, .5rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xxs))}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:.5rem}:host([scale=m]) .button{font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-md))}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:.75rem}:host([scale=l]) .button{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1.25rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xl))}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:.25rem;inline-size:1rem;position:relative}.indicator-without-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color, var(--calcite-action-background-color, var(--calcite-color-foreground-1)))}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,B3=class B3 extends rr{constructor(){super(...arguments),this.guid=Kf(),this.buttonEl=Rn(),this.buttonId=_Ye.button(this.guid),this.mutationObserver=hl("mutation",()=>this.requestUpdate()),this.messages=$a({blocking:!0}),this.focusSetter=Ho()(this),this.active=!1,this.activeDescendant=!1,this.appearance="solid",this.compact=!1,this.disabled=!1,this.dragHandle=!1,this.iconFlipRtl=!1,this.indicator=!1,this.loading=!1,this.scale="m",this.width="auto",this.textEnabled=!1,this.type="button"}async setFocus(e){return this.focusSetter(()=>this.buttonEl.value,e)}connectedCallback(){var e;super.connectedCallback(),this.formEl=HB(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}updated(){Ea(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this.formEl=null,(e=this.mutationObserver)==null||e.disconnect()}handleClick(){const{type:e}=this;e==="submit"?IP(this):e==="reset"&&ehe(this)}handleTooltipSlotChange(e){const r=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-tooltip"))[0];r&&(r.referenceElement=this.buttonEl.value)}storeIndicatorEl(e){this.indicatorEl=e}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[xl.textContainer]:!0,[xl.textContainerVisible]:i};return e?oi("text-container",Se`<div class=${$e(r)}>${e}</div>`):null}renderIndicatorText(){const{indicator:e,messages:i,buttonId:r}=this;return Se`<div aria-labelledby=${r??r0} aria-live=polite class=${$e(xl.indicatorText)} role=region ${ai(this.storeIndicatorEl)}>${e?i.indicator:null}</div>`}renderIconContainer(){var _;const{loading:e,icon:i,scale:r,el:s,iconFlipRtl:n,indicator:o}=this,a=r==="l"?"l":"m",l=e?Se`<calcite-loader inline .label=${this.messages.loading} .scale=${a}></calcite-loader>`:null,c=i?Se`<calcite-icon class=${$e({[xl.indicatorWithIcon]:o})} .flipRtl=${n} .icon=${i} .scale=${as(this.scale)}></calcite-icon>`:null,h=l||c,y=h||((_=s.children)==null?void 0:_.length),g=Se`<div class=${$e({[xl.slotContainer]:!0,[xl.slotContainerHidden]:e})}><slot></slot></div>`;return y?oi("icon-container",Se`<div aria-hidden=true class=${$e(xl.iconContainer)}>${h}${g}</div>`):null}renderButton(){var P,D,F,U,G,Q,W,X,K,de,ye,xe,ee;const{compact:e,disabled:i,icon:r,loading:s,textEnabled:n,label:o,text:a,indicator:l,indicatorEl:c,buttonId:h,messages:y}=this,g=o||a||"",_=l?y.indicatorLabel.replace("{label}",g):g,S={[xl.button]:!0,[xl.buttonTextVisible]:n,[xl.buttonCompact]:e},E=Se`${this.renderIconContainer()}${this.renderTextContainer()}${!r&&l&&oi("indicator-no-icon",Se`<div class=${$e(xl.indicatorWithoutIcon)}></div>`)||""}`,C=l&&c?[c]:[],M=[...((P=this.aria)==null?void 0:P.controlsElements)??[],...C];return this.dragHandle?Se`<span .ariaBusy=${s} .ariaControlsElements=${M} .ariaDescribedByElements=${(D=this.aria)==null?void 0:D.describedByElements} .ariaExpanded=${(F=this.aria)==null?void 0:F.expanded} .ariaHasPopup=${(U=this.aria)==null?void 0:U.hasPopup} .ariaLabel=${_} .ariaLabelledByElements=${(G=this.aria)==null?void 0:G.labelledByElements} .ariaOwnsElements=${(Q=this.aria)==null?void 0:Q.ownsElements} .ariaPressed=${(W=this.aria)==null?void 0:W.pressed} class=${$e(S)} id=${h??r0} role=button tabindex=${this.disabled?null:0} ${ai(this.buttonEl)}>${E}</span>`:Se`<button .ariaBusy=${s} .ariaControlsElements=${M} .ariaDescribedByElements=${(X=this.aria)==null?void 0:X.describedByElements} .ariaExpanded=${(K=this.aria)==null?void 0:K.expanded} .ariaHasPopup=${(de=this.aria)==null?void 0:de.hasPopup} .ariaLabel=${_} .ariaLabelledByElements=${(ye=this.aria)==null?void 0:ye.labelledByElements} .ariaOwnsElements=${(xe=this.aria)==null?void 0:xe.ownsElements} .ariaPressed=${(ee=this.aria)==null?void 0:ee.pressed} class=${$e(S)} .disabled=${i} id=${h??r0} @click=${this.handleClick} ${ai(this.buttonEl)}>${E}</button>`}render(){return Ia({disabled:this.disabled,children:Se`${this.renderButton()}<slot name=${SYe.tooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${this.renderIndicatorText()}`})}};B3.properties={aria:[0,{},{attribute:!1}],active:[7,{},{reflect:!0,type:Boolean}],activeDescendant:[7,{},{reflect:!0,type:Boolean}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],compact:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],indicator:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}],text:1,textEnabled:[7,{},{reflect:!0,type:Boolean}],type:[3,{},{reflect:!0}]},B3.styles=xYe;let u3=B3;Sr("calcite-action",u3);const bAt=Object.freeze(Object.defineProperty({__proto__:null,Action:u3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const kp={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"},bY={check:"check",bulletPoint:"bullet-point"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const $Ye=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3));text-align:start;outline-color:transparent}.container a{outline:none;position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3))}.dropdown-item-content{flex:1 1 auto;padding-block:.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-timing-function:cubic-bezier(.4,0,.2,1);transform:scale(.9)}:host([scale=s]) .container{padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-lg)}:host(:focus) .container{text-decoration-line:none;outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:hover:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-hover, var(--calcite-color-foreground-2))}:host(:active:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-press, var(--calcite-color-foreground-3))}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{text-decoration-line:none;color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-dropdown-item-icon-color-press, var(--calcite-color-brand))}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-dropdown-item-icon-color-hover)}:host([selected]) .dropdown-item-icon{opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,j3=class j3 extends rr{constructor(){super(),this.childLink=Rn(),this.focusSetter=Ho()(this),this.disabled=!1,this.scale="m",this.selected=!1,this.selectionMode="single",this.calciteDropdownItemSelect=Ye({cancelable:!1}),this.calciteInternalDropdownCloseRequest=Ye({cancelable:!1}),this.calciteInternalDropdownItemKeyEvent=Ye({cancelable:!1}),this.calciteInternalDropdownItemSelect=Ye({cancelable:!1}),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler),this.listenOn(document.body,"calciteInternalDropdownItemChange",this.updateActiveItemOnChange)}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.initialize()}load(){this.initialize()}updated(){Ea(this)}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.value.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}render(){const{href:e,selectionMode:i,label:r,iconFlipRtl:s}=this,n=Se`<calcite-icon class=${$e(kp.iconStart)} .flipRtl=${s==="start"||s==="both"} .icon=${this.iconStart} .scale=${as(this.scale)}></calcite-icon>`,o=Se`<span class=${$e(kp.itemContent)}><slot></slot></span>`,a=Se`<calcite-icon class=${$e(kp.iconEnd)} .flipRtl=${s==="end"||s==="both"} .icon=${this.iconEnd} .scale=${as(this.scale)}></calcite-icon>`,l=this.iconStart&&this.iconEnd?[n,o,a]:this.iconStart?[n,o]:this.iconEnd?[o,a]:o,c=e?Se`<a .ariaLabel=${r} class=${$e(kp.link)} href=${e??r0} rel=${this.rel??r0} tabindex=-1 target=${this.target??r0} ${ai(this.childLink)}>${l}</a>`:l,h=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",y=i!=="none"?EP(this.selected):null,{disabled:g}=this;return this.el.ariaChecked=y,this.el.ariaLabel=e?"":r,this.el.role=h,wP(this.el,"tabIndex",g?-1:0),Ia({disabled:g,children:Se`<div class=${$e({[kp.container]:!0,[kp.containerNone]:i==="none"})}>${i!=="none"?Se`<calcite-icon class=${$e(kp.icon)} .icon=${i==="multiple"?bY.check:bY.bulletPoint} .scale=${as(this.scale)}></calcite-icon>`:null}${c}</div>`})}};j3.properties={disabled:[7,{},{reflect:!0,type:Boolean}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],label:1,rel:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,target:[3,{},{reflect:!0}]},j3.styles=$Ye;let h3=j3;Sr("calcite-dropdown-item",h3);const wAt=Object.freeze(Object.defineProperty({__proto__:null,DropdownItem:h3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const wY={title:"dropdown-title",separator:"dropdown-separator"},EYe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-bold);border-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3));color:var(--calcite-dropdown-group-title-text-color, var(--calcite-color-text-2))}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3))}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,rS=class rS extends rr{constructor(){super(),this.mutationObserver=hl("mutation",()=>this.updateItems()),this.position=-1,this.scale="m",this.selectionMode="single",this.calciteInternalDropdownItemChange=Ye({cancelable:!1}),this.listen("calciteInternalDropdownItemSelect",this.updateActiveItemOnChange)}connectedCallback(){var e;super.connectedCallback(),this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}willUpdate(e){e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="single")&&this.updateItems()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}updateItems(){Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)}render(){const e=this.groupTitle?Se`<span aria-hidden=true class=${$e(wY.title)}>${this.groupTitle}</span>`:null,i=this.position>0?Se`<div class=${$e(wY.separator)} role=separator></div>`:null;return this.el.ariaLabel=this.groupTitle,this.el.role="group",Se`<div class=${$e({[kp.container]:!0})}>${i}${e}<slot></slot></div>`}};rS.properties={groupTitle:[3,{},{reflect:!0}],position:[9,{},{type:Number}],scale:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},rS.shadowRootOptions={mode:"open",delegatesFocus:!0},rS.styles=EYe;let d3=rS;Sr("calcite-dropdown-group",d3);const _At=Object.freeze(Object.defineProperty({__proto__:null,DropdownGroup:d3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const _Y={handle:"handle",dropdown:"dropdown"},SY={drag:"drag",blank:"blank"},JO={label:"{label}",position:"{position}",total:"{total}"},xY=["top","up","down","bottom"],IYe={trigger:"trigger"},ZO={add:"add",move:"move",reorder:"reorder"},CYe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,U3=class U3 extends rr{constructor(){super(...arguments),this.focusSetter=Ho()(this),this.disabled=!1,this.messages=$a({blocking:!0}),this.addToItems=[],this.moveToItems=[],this.open=!1,this.overlayPositioning="absolute",this.placement=KS,this.scale="m",this.sortDisabled=!1,this.calciteSortHandleBeforeClose=Ye({cancelable:!1}),this.calciteSortHandleBeforeOpen=Ye({cancelable:!1}),this.calciteSortHandleClose=Ye({cancelable:!1}),this.calciteSortHandleMove=Ye({cancelable:!0}),this.calciteSortHandleAdd=Ye({cancelable:!0}),this.calciteSortHandleOpen=Ye({cancelable:!1}),this.calciteSortHandleReorder=Ye({cancelable:!0})}get hasSetInfo(){return typeof this.setPosition=="number"&&typeof this.setSize=="number"}get hasValidSetInfo(){return this.hasSetInfo?this.setPosition>0&&this.setSize>1:!0}get hasReorderItems(){return!this.sortDisabled&&this.hasValidSetInfo}get hasNoItems(){return!this.hasReorderItems&&this.moveToItems.length<1&&this.addToItems.length<1}async setFocus(e){return this.focusSetter(()=>this.dropdownEl,e)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler()}updated(){Ea(this)}openHandler(){if(this.disabled){this.open=!1;return}this.dropdownEl&&(this.dropdownEl.open=this.open)}setDropdownEl(e){e&&(this.dropdownEl=e,this.openHandler())}getLabel(){const{label:e,messages:i,setPosition:r,setSize:s,hasSetInfo:n}=this;if(!n)return e??"";let o=e?i.repositionLabel.replace(JO.label,e):i.reposition;return o=o.replace(JO.position,r?r.toString():""),o.replace(JO.total,s?s.toString():"")}handleBeforeOpen(e){e.stopPropagation(),this.calciteSortHandleBeforeOpen.emit()}handleOpen(e){e.stopPropagation(),this.calciteSortHandleOpen.emit(),this.open=!0}handleBeforeClose(e){e.stopPropagation(),this.calciteSortHandleBeforeClose.emit()}handleClose(e){e.stopPropagation(),this.calciteSortHandleClose.emit(),this.open=!1}handleReorder(e){this.calciteSortHandleReorder.emit({reorder:e.target.dataset.value})}handleMoveTo(e){const i=e.target.dataset.id,r=this.moveToItems.find(s=>s.id===i);this.calciteSortHandleMove.emit({moveTo:r})}handleAddTo(e){const i=e.target.dataset.id,r=this.addToItems.find(s=>s.id===i);this.calciteSortHandleAdd.emit({addTo:r})}render(){const{disabled:e,flipPlacements:i,open:r,overlayPositioning:s,placement:n,scale:o,widthScale:a,hasNoItems:l}=this,c=this.getLabel(),h=e||l;return Ia({disabled:e,children:Se`<calcite-dropdown class=${$e(_Y.dropdown)} .disabled=${h} .flipPlacements=${i} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${s} .placement=${n} .scale=${o} .widthScale=${a} ${ai(this.setDropdownEl)}><calcite-action .active=${r} appearance=transparent .aria=${{expanded:r}} class=${$e(_Y.handle)} .dragHandle=${!0} .icon=${e?SY.blank:SY.drag} .label=${c} .scale=${o} slot=${IYe.trigger} .text=${c} title=${c??Ge}></calcite-action>${this.renderReorderGroup()}${this.renderMoveToGroup()}${this.renderAddToGroup()}</calcite-dropdown>`})}renderAddToItem(e){return oi(e.id,Se`<calcite-dropdown-item data-id=${e.id??Ge} .label=${e.label} @calciteDropdownItemSelect=${this.handleAddTo}>${e.label}</calcite-dropdown-item>`)}renderMoveToItem(e){return oi(e.id,Se`<calcite-dropdown-item data-id=${e.id??Ge} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`)}renderReorderGroup(){return this.hasReorderItems?oi("reorder",Se`<calcite-dropdown-group .groupTitle=${this.messages.reorder} id=${ZO.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`):null}renderAddToGroup(){const{messages:e,addToItems:i,scale:r}=this;return i.length?oi("add-to-items",Se`<calcite-dropdown-group .groupTitle=${e.addTo} id=${ZO.add} .scale=${r} selection-mode=none>${i.map(s=>this.renderAddToItem(s))}</calcite-dropdown-group>`):null}renderMoveToGroup(){const{messages:e,moveToItems:i,scale:r}=this;return i.length?oi("move-to-items",Se`<calcite-dropdown-group .groupTitle=${e.moveTo} id=${ZO.move} .scale=${r} selection-mode=none>${i.map(s=>this.renderMoveToItem(s))}</calcite-dropdown-group>`):null}renderDropdownItem(e,i){return oi(xY[e],Se`<calcite-dropdown-item data-value=${xY[e]??Ge} .label=${i} @calciteDropdownItemSelect=${this.handleReorder}>${i}</calcite-dropdown-item>`)}renderTop(){const{setPosition:e}=this;return e!==1&&e!==2?this.renderDropdownItem(0,this.messages.moveToTop):null}renderUp(){return this.setPosition!==1?this.renderDropdownItem(1,this.messages.moveUp):null}renderDown(){return this.setPosition!==this.setSize?this.renderDropdownItem(2,this.messages.moveDown):null}renderBottom(){const{setPosition:e,setSize:i}=this;return e!==i&&e!==i-1?this.renderDropdownItem(3,this.messages.moveToBottom):null}};U3.properties={disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],messages:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortDisabled:[7,{},{reflect:!0,type:Boolean}],widthScale:[3,{},{reflect:!0}]},U3.styles=CYe;let S8=U3;Sr("calcite-sort-handle",S8);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Fpe=({children:t,...e})=>{const i=e.level?H9e(`h${e.level}`):jS`div`;return oi(e.key,UB`<${i} class=${$e(e.class)}>${t}</${i}>`)};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const $Y={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},TYe={width:12,height:6,strokeWidth:1},MYe=({floatingLayout:t,key:e,ref:i})=>{const{width:r,height:s,strokeWidth:n}=TYe,o=r/2,a=t==="vertical",l=`M0,0 H${r} L${r-o},${s} Q${o},${s} ${o},${s} Z`;return oi(e,Se`<svg aria-hidden=true class=${$e($Y.arrow)} height=${r} viewBox=${`0 0 ${r} ${r+(a?0:n)}`} width=${r+(a?n:0)} ${ai(i)}>${PS`${PS`<path class=${$e($Y.arrowStroke)} d=${l??Ge} fill=none stroke-width=${n+1} />`||""}<path d=${l??Ge} stroke=none />`}</svg>`)};/*!
* tabbable 6.4.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var zpe=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],p3=zpe.join(","),Bpe=typeof Element>"u",O0=Bpe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,f3=!Bpe&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},A3=function(e,i){var r;i===void 0&&(i=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),n=s===""||s==="true",o=n||i&&e&&(typeof e.closest=="function"?e.closest("[inert]"):A3(e.parentNode));return o},kYe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},jpe=function(e,i,r){if(A3(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(p3));return i&&O0.call(e,p3)&&s.unshift(e),s=s.filter(r),s},m3=function(e,i,r){for(var s=[],n=Array.from(e);n.length;){var o=n.shift();if(!A3(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=m3(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var h=O0.call(o,p3);h&&r.filter(o)&&(i||!e.includes(o))&&s.push(o);var y=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),g=!A3(y,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(y&&g){var _=m3(y===!0?o.children:y.children,!0,r);r.flatten?s.push.apply(s,_):s.push({scopeParent:o,candidates:_})}else n.unshift.apply(n,o.children)}}return s},Upe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Im=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||kYe(e))&&!Upe(e)?0:e.tabIndex},PYe=function(e,i){var r=Im(e);return r<0&&i&&!Upe(e)?0:r},LYe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},Vpe=function(e){return e.tagName==="INPUT"},RYe=function(e){return Vpe(e)&&e.type==="hidden"},OYe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},DYe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},NYe=function(e){if(!e.name)return!0;var i=e.form||f3(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var n=DYe(s,e.form);return!n||n===e},FYe=function(e){return Vpe(e)&&e.type==="radio"},zYe=function(e){return FYe(e)&&!NYe(e)},BYe=function(e){var i,r=e&&f3(e),s=(i=r)===null||i===void 0?void 0:i.host,n=!1;if(r&&r!==e){var o,a,l;for(n=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!n&&s;){var c,h,y;r=f3(s),s=(c=r)===null||c===void 0?void 0:c.host,n=!!((h=s)!==null&&h!==void 0&&(y=h.ownerDocument)!==null&&y!==void 0&&y.contains(s))}}return n},EY=function(e){var i=e.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},jYe=function(e,i){var r=i.displayCheck,s=i.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var n=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!n}if(getComputedStyle(e).visibility==="hidden")return!0;var o=O0.call(e,"details>summary:first-of-type"),a=o?e.parentElement:e;if(O0.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof s=="function"){for(var l=e;e;){var c=e.parentElement,h=f3(e);if(c&&!c.shadowRoot&&s(c)===!0)return EY(e);e.assignedSlot?e=e.assignedSlot:!c&&h!==e.ownerDocument?e=h.host:e=c}e=l}if(BYe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return EY(e);return!1},UYe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return O0.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},y3=function(e,i){return!(i.disabled||RYe(i)||jYe(i,e)||OYe(i)||UYe(i))},x8=function(e,i){return!(zYe(i)||Im(i)<0||!y3(e,i))},VYe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Gpe=function(e){var i=[],r=[];return e.forEach(function(s,n){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=PYe(a,o),c=o?Gpe(s.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:n,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(LYe).reduce(function(s,n){return n.isScope?s.push.apply(s,n.content):s.push(n.content),s},[]).concat(i)},GYe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=m3([e],i.includeContainer,{filter:x8.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:VYe}):r=jpe(e,i.includeContainer,x8.bind(null,i)),Gpe(r)},HYe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=m3([e],i.includeContainer,{filter:y3.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=jpe(e,i.includeContainer,y3.bind(null,i)),r},Oy=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return O0.call(e,p3)===!1?!1:x8(i,e)},qYe=zpe.concat("iframe:not([inert]):not([inert] *)").join(","),YO=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return O0.call(e,qYe)===!1?!1:y3(i,e)};/*!
* focus-trap 7.8.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function $8(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function WYe(t){if(Array.isArray(t))return $8(t)}function IY(t,e){var i=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Hpe(t))||e){i&&(t=i);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var l=i.next();return o=l.done,l},e:function(l){a=!0,n=l},f:function(){try{o||i.return==null||i.return()}finally{if(a)throw n}}}}function QYe(t,e,i){return(e=KYe(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function JYe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZYe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CY(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,r)}return i}function TY(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?CY(Object(i),!0).forEach(function(r){QYe(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):CY(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function YYe(t){return WYe(t)||JYe(t)||Hpe(t)||ZYe()}function XYe(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KYe(t){var e=XYe(t,"string");return typeof e=="symbol"?e:e+""}function Hpe(t,e){if(t){if(typeof t=="string")return $8(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?$8(t,e):void 0}}var pd={getActiveTrap:function(e){return(e==null?void 0:e.length)>0?e[e.length-1]:null},activateTrap:function(e,i){var r=pd.getActiveTrap(e);i!==r&&pd.pauseTrap(e);var s=e.indexOf(i);s===-1||e.splice(s,1),e.push(i)},deactivateTrap:function(e,i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),pd.unpauseTrap(e)},pauseTrap:function(e){var i=pd.getActiveTrap(e);i==null||i._setPausedState(!0)},unpauseTrap:function(e){var i=pd.getActiveTrap(e);i&&!i._isManuallyPaused()&&i._setPausedState(!1)}},eXe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},tXe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},W_=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},iXe=function(e){return W_(e)&&!e.shiftKey},rXe=function(e){return W_(e)&&e.shiftKey},MY=function(e){return setTimeout(e,0)},Uw=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,r):e},YE=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},sXe=[],nXe=function(e,i){var r=(i==null?void 0:i.document)||document,s=(i==null?void 0:i.trapStack)||sXe,n=TY({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isolateSubtrees:!1,isKeyForward:iXe,isKeyBackward:rXe},i),o={containers:[],containerGroups:[],tabbableGroups:[],adjacentElements:new Set,alreadySilent:new Set,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(ee,le,Te){return ee&&ee[le]!==void 0?ee[le]:n[Te||le]},c=function(ee,le){var Te=typeof(le==null?void 0:le.composedPath)=="function"?le.composedPath():void 0;return o.containerGroups.findIndex(function(ke){var De=ke.container,Ke=ke.tabbableNodes;return De.contains(ee)||(Te==null?void 0:Te.includes(De))||Ke.find(function(vt){return vt===ee})})},h=function(ee){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=le.hasFallback,ke=Te===void 0?!1:Te,De=le.params,Ke=De===void 0?[]:De,vt=n[ee];if(typeof vt=="function"&&(vt=vt.apply(void 0,YYe(Ke))),vt===!0&&(vt=void 0),!vt){if(vt===void 0||vt===!1)return vt;throw new Error("`".concat(ee,"` was specified but was not a node, or did not return a node"))}var Pt=vt;if(typeof vt=="string"){try{Pt=r.querySelector(vt)}catch(Zt){throw new Error("`".concat(ee,'` appears to be an invalid selector; error="').concat(Zt.message,'"'))}if(!Pt&&!ke)throw new Error("`".concat(ee,"` as selector refers to no known node"))}return Pt},y=function(){var ee=h("initialFocus",{hasFallback:!0});if(ee===!1)return!1;if(ee===void 0||ee&&!YO(ee,n.tabbableOptions))if(c(r.activeElement)>=0)ee=r.activeElement;else{var le=o.tabbableGroups[0],Te=le&&le.firstTabbableNode;ee=Te||h("fallbackFocus")}else ee===null&&(ee=h("fallbackFocus"));if(!ee)throw new Error("Your focus-trap needs to have at least one focusable element");return ee},g=function(){if(o.containerGroups=o.containers.map(function(ee){var le=GYe(ee,n.tabbableOptions),Te=HYe(ee,n.tabbableOptions),ke=le.length>0?le[0]:void 0,De=le.length>0?le[le.length-1]:void 0,Ke=Te.find(function(Zt){return Oy(Zt)}),vt=Te.slice().reverse().find(function(Zt){return Oy(Zt)}),Pt=!!le.find(function(Zt){return Im(Zt)>0});return{container:ee,tabbableNodes:le,focusableNodes:Te,posTabIndexesFound:Pt,firstTabbableNode:ke,lastTabbableNode:De,firstDomTabbableNode:Ke,lastDomTabbableNode:vt,nextTabbableNode:function(Ar){var ks=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ps=le.indexOf(Ar);return Ps<0?ks?Te.slice(Te.indexOf(Ar)+1).find(function(jn){return Oy(jn)}):Te.slice(0,Te.indexOf(Ar)).reverse().find(function(jn){return Oy(jn)}):le[Ps+(ks?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(ee){return ee.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(ee){return ee.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},_=function(ee){var le=ee.activeElement;if(le)return le.shadowRoot&&le.shadowRoot.activeElement!==null?_(le.shadowRoot):le},S=function(ee){if(ee!==!1&&ee!==_(document)){if(!ee||!ee.focus){S(y());return}ee.focus({preventScroll:!!n.preventScroll}),o.mostRecentlyFocusedNode=ee,eXe(ee)&&ee.select()}},E=function(ee){var le=h("setReturnFocus",{params:[ee]});return le||(le===!1?!1:ee)},C=function(ee){var le=ee.target,Te=ee.event,ke=ee.isBackward,De=ke===void 0?!1:ke;le=le||YE(Te),g();var Ke=null;if(o.tabbableGroups.length>0){var vt=c(le,Te),Pt=vt>=0?o.containerGroups[vt]:void 0;if(vt<0)De?Ke=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:Ke=o.tabbableGroups[0].firstTabbableNode;else if(De){var Zt=o.tabbableGroups.findIndex(function(fl){var po=fl.firstTabbableNode;return le===po});if(Zt<0&&(Pt.container===le||YO(le,n.tabbableOptions)&&!Oy(le,n.tabbableOptions)&&!Pt.nextTabbableNode(le,!1))&&(Zt=vt),Zt>=0){var Ar=Zt===0?o.tabbableGroups.length-1:Zt-1,ks=o.tabbableGroups[Ar];Ke=Im(le)>=0?ks.lastTabbableNode:ks.lastDomTabbableNode}else W_(Te)||(Ke=Pt.nextTabbableNode(le,!1))}else{var Ps=o.tabbableGroups.findIndex(function(fl){var po=fl.lastTabbableNode;return le===po});if(Ps<0&&(Pt.container===le||YO(le,n.tabbableOptions)&&!Oy(le,n.tabbableOptions)&&!Pt.nextTabbableNode(le))&&(Ps=vt),Ps>=0){var jn=Ps===o.tabbableGroups.length-1?0:Ps+1,pn=o.tabbableGroups[jn];Ke=Im(le)>=0?pn.firstTabbableNode:pn.firstDomTabbableNode}else W_(Te)||(Ke=Pt.nextTabbableNode(le))}}else Ke=h("fallbackFocus");return Ke},M=function(ee){var le=YE(ee);if(!(c(le,ee)>=0)){if(Uw(n.clickOutsideDeactivates,ee)){a.deactivate({returnFocus:n.returnFocusOnDeactivate});return}Uw(n.allowOutsideClick,ee)||ee.preventDefault()}},P=function(ee){var le=YE(ee),Te=c(le,ee)>=0;if(Te||le instanceof Document)Te&&(o.mostRecentlyFocusedNode=le);else{ee.stopImmediatePropagation();var ke,De=!0;if(o.mostRecentlyFocusedNode)if(Im(o.mostRecentlyFocusedNode)>0){var Ke=c(o.mostRecentlyFocusedNode),vt=o.containerGroups[Ke].tabbableNodes;if(vt.length>0){var Pt=vt.findIndex(function(Zt){return Zt===o.mostRecentlyFocusedNode});Pt>=0&&(n.isKeyForward(o.recentNavEvent)?Pt+1<vt.length&&(ke=vt[Pt+1],De=!1):Pt-1>=0&&(ke=vt[Pt-1],De=!1))}}else o.containerGroups.some(function(Zt){return Zt.tabbableNodes.some(function(Ar){return Im(Ar)>0})})||(De=!1);else De=!1;De&&(ke=C({target:o.mostRecentlyFocusedNode,isBackward:n.isKeyBackward(o.recentNavEvent)})),S(ke||o.mostRecentlyFocusedNode||y())}o.recentNavEvent=void 0},D=function(ee){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=ee;var Te=C({event:ee,isBackward:le});Te&&(W_(ee)&&ee.preventDefault(),S(Te))},F=function(ee){(n.isKeyForward(ee)||n.isKeyBackward(ee))&&D(ee,n.isKeyBackward(ee))},U=function(ee){tXe(ee)&&Uw(n.escapeDeactivates,ee)!==!1&&(ee.preventDefault(),a.deactivate())},G=function(ee){var le=YE(ee);c(le,ee)>=0||Uw(n.clickOutsideDeactivates,ee)||Uw(n.allowOutsideClick,ee)||(ee.preventDefault(),ee.stopImmediatePropagation())},Q=function(){if(o.active)return pd.activateTrap(s,a),o.delayInitialFocusTimer=n.delayInitialFocus?MY(function(){S(y())}):S(y()),r.addEventListener("focusin",P,!0),r.addEventListener("mousedown",M,{capture:!0,passive:!1}),r.addEventListener("touchstart",M,{capture:!0,passive:!1}),r.addEventListener("click",G,{capture:!0,passive:!1}),r.addEventListener("keydown",F,{capture:!0,passive:!1}),r.addEventListener("keydown",U),a},W=function(ee){o.active&&!o.paused&&a._setSubtreeIsolation(!1),o.adjacentElements.clear(),o.alreadySilent.clear();var le=new Set,Te=new Set,ke=IY(ee),De;try{for(ke.s();!(De=ke.n()).done;){var Ke=De.value;le.add(Ke);for(var vt=typeof ShadowRoot<"u"&&Ke.getRootNode()instanceof ShadowRoot,Pt=Ke;Pt;){le.add(Pt);var Zt=Pt.parentElement,Ar=[];Zt?Ar=Zt.children:!Zt&&vt&&(Ar=Pt.getRootNode().children,Zt=Pt.getRootNode().host,vt=typeof ShadowRoot<"u"&&Zt.getRootNode()instanceof ShadowRoot);var ks=IY(Ar),Ps;try{for(ks.s();!(Ps=ks.n()).done;){var jn=Ps.value;Te.add(jn)}}catch(pn){ks.e(pn)}finally{ks.f()}Pt=Zt}}}catch(pn){ke.e(pn)}finally{ke.f()}le.forEach(function(pn){Te.delete(pn)}),o.adjacentElements=Te},X=function(){if(o.active)return r.removeEventListener("focusin",P,!0),r.removeEventListener("mousedown",M,!0),r.removeEventListener("touchstart",M,!0),r.removeEventListener("click",G,!0),r.removeEventListener("keydown",F,!0),r.removeEventListener("keydown",U),a},K=function(ee){var le=ee.some(function(Te){var ke=Array.from(Te.removedNodes);return ke.some(function(De){return De===o.mostRecentlyFocusedNode})});le&&S(y())},de=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(K):void 0,ye=function(){de&&(de.disconnect(),o.active&&!o.paused&&o.containers.map(function(ee){de.observe(ee,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(ee){if(o.active)return this;var le=l(ee,"onActivate"),Te=l(ee,"onPostActivate"),ke=l(ee,"checkCanFocusTrap"),De=pd.getActiveTrap(s),Ke=!1;if(De&&!De.paused){var vt;(vt=De._setSubtreeIsolation)===null||vt===void 0||vt.call(De,!1),Ke=!0}try{ke||g(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=_(r),le==null||le();var Pt=function(){ke&&g(),Q(),ye(),n.isolateSubtrees&&a._setSubtreeIsolation(!0),Te==null||Te()};if(ke)return ke(o.containers.concat()).then(Pt,Pt),this;Pt()}catch(Ar){if(De===pd.getActiveTrap(s)&&Ke){var Zt;(Zt=De._setSubtreeIsolation)===null||Zt===void 0||Zt.call(De,!0)}throw Ar}return this},deactivate:function(ee){if(!o.active)return this;var le=TY({onDeactivate:n.onDeactivate,onPostDeactivate:n.onPostDeactivate,checkCanReturnFocus:n.checkCanReturnFocus},ee);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,o.paused||a._setSubtreeIsolation(!1),o.alreadySilent.clear(),X(),o.active=!1,o.paused=!1,ye(),pd.deactivateTrap(s,a);var Te=l(le,"onDeactivate"),ke=l(le,"onPostDeactivate"),De=l(le,"checkCanReturnFocus"),Ke=l(le,"returnFocus","returnFocusOnDeactivate");Te==null||Te();var vt=function(){MY(function(){Ke&&S(E(o.nodeFocusedBeforeActivation)),ke==null||ke()})};return Ke&&De?(De(E(o.nodeFocusedBeforeActivation)).then(vt,vt),this):(vt(),this)},pause:function(ee){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,ee)):this},unpause:function(ee){return o.active?(o.manuallyPaused=!1,s[s.length-1]!==this?this:this._setPausedState(!1,ee)):this},updateContainerElements:function(ee){var le=[].concat(ee).filter(Boolean);return o.containers=le.map(function(Te){return typeof Te=="string"?r.querySelector(Te):Te}),n.isolateSubtrees&&W(o.containers),o.active&&(g(),n.isolateSubtrees&&!o.paused&&a._setSubtreeIsolation(!0)),ye(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(ee,le){if(o.paused===ee)return this;if(o.paused=ee,ee){var Te=l(le,"onPause"),ke=l(le,"onPostPause");Te==null||Te(),X(),ye(),a._setSubtreeIsolation(!1),ke==null||ke()}else{var De=l(le,"onUnpause"),Ke=l(le,"onPostUnpause");De==null||De(),a._setSubtreeIsolation(!0),g(),Q(),ye(),Ke==null||Ke()}return this}},_setSubtreeIsolation:{value:function(ee){n.isolateSubtrees&&o.adjacentElements.forEach(function(le){var Te;if(ee)switch(n.isolateSubtrees){case"aria-hidden":(le.ariaHidden==="true"||((Te=le.getAttribute("aria-hidden"))===null||Te===void 0?void 0:Te.toLowerCase())==="true")&&o.alreadySilent.add(le),le.setAttribute("aria-hidden","true");break;default:(le.inert||le.hasAttribute("inert"))&&o.alreadySilent.add(le),le.setAttribute("inert",!0);break}else if(!o.alreadySilent.has(le))switch(n.isolateSubtrees){case"aria-hidden":le.removeAttribute("aria-hidden");break;default:le.removeAttribute("inert");break}})}}}),a.updateContainerElements(e),a};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const jC=new WeakSet;function oXe(t,e){return jC.has(t)||BS(e),!1}function aXe(t,e){const i=(e==null?void 0:e.fallbackFocus)||t,r=(e==null?void 0:e.clickOutsideDeactivates)??!0;return{fallbackFocus:i,...e,document:t.ownerDocument,tabbableOptions:BB,trapStack:E7e,clickOutsideDeactivates:s=>(jC.has(t)||jC.add(t),typeof r=="function"?r(s):r),onPostDeactivate:()=>{jC.delete(t)},setReturnFocus:s=>{const n=typeof(e==null?void 0:e.setReturnFocus)=="function"?e.setReturnFocus(s):e==null?void 0:e.setReturnFocus;return n===void 0?oXe(t,s):n}}}function kY(t,{focusTrapOptions:e},i){return!(e!=null&&e.extraContainers)&&!i?t:[t,...PY(e==null?void 0:e.extraContainers),...PY(i)]}function PY(t=[]){return Array.isArray(t)?t:[t]}const lXe=t=>FB((e,i)=>{let r,s,n;const o=t.focusTrapOptions;i.onConnected(()=>{e[t.triggerProp]&&r&&a.activate()}),i.onUpdate(l=>{e.hasUpdated&&l.has("focusTrapDisabled")&&(e.focusTrapDisabled?a.deactivate():a.activate())}),i.onDisconnected(()=>a.deactivate());const a={activate:()=>{const l=s||e.el;if(l.isConnected){if(!r){const c={...o,...e.focusTrapOptions};n||(n=kY(l,e)),r=nXe(n,aXe(l,c))}(typeof e.focusTrapDisabledOverride=="function"?!e.focusTrapDisabledOverride():!e.focusTrapDisabled)&&r.activate()}},deactivate:()=>r==null?void 0:r.deactivate(),overrideFocusTrapEl:l=>{if(r)throw new Error("Focus trap already created");s=l},setExtraContainers:l=>{const c=s||e.el;n=kY(c,e,l)},updateContainerElements:()=>r==null?void 0:r.updateContainerElements(n)};return a});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const cXe=5;function uXe({startX:t,startY:e,endX:i,endY:r}){return Math.hypot(i-t,r-e)>cXe}class hXe{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,r=e.find(s=>i.has(s));return i.get(r)},this.togglePopovers=e=>{const i=e.composedPath(),r=this.queryPopover(i);r&&!r.triggerDisabled&&(r.open=!r.open),Array.from(this.registeredElements.values()).filter(s=>s!==r&&s.autoClose&&s.open&&!i.includes(s)).forEach(s=>s.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():Pj(e.key)&&this.togglePopovers(e))},this.pointerDownHandler=e=>{if(e.defaultPrevented||!Wue(e))return;const{clientX:i,clientY:r}=e;this.pointerDownPosition={x:i,y:r}},this.clickHandler=e=>{L9e(e)||e.defaultPrevented||this.pointerDownPosition&&uXe({endY:e.clientY,endX:e.clientX,startY:this.pointerDownPosition.y,startX:this.pointerDownPosition.x})||(this.pointerDownPosition=void 0,this.togglePopovers(e))}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("pointerdown",this.pointerDownHandler),window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("pointerdown",this.pointerDownHandler),window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const $l={positionContainer:"position-container",container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"header-container",heading:"heading"},LY="auto",RY="aria-controls",OY="aria-expanded",dXe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-popover-z-index, var(--calcite-z-index-popup))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.position-container{opacity:0;inset-block-start:0;left:0}}.position-container{max-inline-size:var(--calcite-popover-max-size-x, 100vw)}.position-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding:.5rem .75rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding:.75rem 1rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding:1rem 1.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-bottom-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container{position:relative;display:flex;height:100%;flex-direction:row;flex-wrap:nowrap;border-radius:.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container.has-header{flex-direction:column}.content{display:flex;height:100%;width:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){height:100%}:host([hidden]){display:none}[hidden]{display:none}`,DY=new hXe,V3=class V3 extends rr{constructor(){super(...arguments),this.focusTrap=lXe({triggerProp:"open",focusTrapOptions:{allowOutsideClick:!0,escapeDeactivates:e=>(e.defaultPrevented||(this.open=!1,e.preventDefault()),!1)}})(this),this.guid=`calcite-popover-${Kf()}`,this.hasLoaded=!1,this.mutationObserver=hl("mutation",()=>this.focusTrap.updateContainerElements()),this.transitionProp="opacity",this.messages=$a(),this.focusSetter=Ho()(this),this.floatingLayout="vertical",this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.offsetDistance=mY,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=LY,this.pointerDisabled=!1,this.scale="m",this.triggerDisabled=!1,this.calcitePopoverBeforeClose=Ye({cancelable:!1}),this.calcitePopoverBeforeOpen=Ye({cancelable:!1}),this.calcitePopoverClose=Ye({cancelable:!1}),this.calcitePopoverOpen=Ye({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:s,flipDisabled:n,filteredFlipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,floatingEl:h}=this;return Mj(this,{floatingEl:h,referenceEl:i,overlayPositioning:s,placement:r,flipDisabled:n,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:"popover"},e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}async updateFocusTrapElements(){this.focusTrap.updateContainerElements()}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}willUpdate(e){e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==mY)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==LY))&&this.reposition(!0),e.has("referenceElement")&&this.referenceElementHandler()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement(),this.hasLoaded=!0}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),UP(this)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}openHandler(){r$(this),this.reposition(!0),this.setExpandedAttr()}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?Dpe(i,e):null}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=this.getReferenceElement(),bd(this);const{el:i,referenceElement:r,referenceEl:s}=this;e&&r&&!s&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}setExpandedAttr(){const{referenceEl:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(OY,EP(i))}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(RY,i),DY.registerElement(e,this.el),this.setExpandedAttr()}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(RY),e.removeAttribute(OY)),DY.unregisterElement(e))}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?$P(i,{id:e}):e)||null}hide(){this.open=!1}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),this.focusTrap.activate()}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),kj(this),this.focusTrap.deactivate()}storeArrowEl(e){this.arrowEl=e,this.reposition(!0)}renderCloseButton(){const{messages:e,closable:i}=this;return i?oi($l.closeButtonContainer,Se`<div class=${$e($l.closeButtonContainer)}><calcite-action appearance=transparent class=${$e($l.closeButton)} @click=${this.hide} .scale=${this.scale} .text=${e.close}><calcite-icon icon=x .scale=${as(this.scale)}></calcite-icon></calcite-action></div>`):null}renderHeader(){const{heading:e,headingLevel:i}=this,r=e?Fpe({class:$l.heading,level:i,children:e}):null;return r?oi($l.header,Se`<div class=${$e($l.header)}>${r}${this.renderCloseButton()}</div>`):null}render(){const{referenceEl:e,heading:i,label:r,open:s,pointerDisabled:n,floatingLayout:o}=this,a=e&&s,l=!a,c=n?null:oi("floating-arrow",MYe({floatingLayout:o,ref:this.storeArrowEl}));return this.el.inert=l,this.el.ariaLabel=r,this.el.ariaLive="polite",wP(this.el,"id",this.getId()),this.el.role="dialog",Se`<div class=${$e($l.positionContainer)} ${ai(this.setFloatingEl)}><div class=${$e({[$l.container]:!0,[n1.animation]:!0,[n1.animationActive]:a})} ${ai(this.setTransitionEl)}>${c}<div class=${$e({[$l.hasHeader]:!!i,[$l.headerContainer]:!0})}>${this.renderHeader()}<div class=${$e($l.content)}><slot></slot></div>${i?null:this.renderCloseButton()}</div></div></div>`}};V3.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],autoClose:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],flipDisabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapOptions:[0,{},{attribute:!1}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],pointerDisabled:[7,{},{reflect:!0,type:Boolean}],referenceElement:1,scale:[3,{},{reflect:!0}],triggerDisabled:[7,{},{reflect:!0,type:Boolean}]},V3.styles=dXe;let E8=V3;Sr("calcite-popover",E8);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function NY(t,e){return(t+e)%e}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const FY={menu:"menu",defaultTrigger:"default-trigger"},XO="calcite-action-menu",KO={button:t=>`${XO}-${t}-menu-button`,menu:t=>`${XO}-${t}-menu`,action:(t,e)=>`${XO}-${t}-action-${e}`},zY={tooltip:"tooltip",trigger:"trigger"},pXe={menu:"ellipsis"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const fXe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`,AXe=["ArrowUp","ArrowDown","End","Home"],G3=class G3 extends rr{constructor(){super(...arguments),this.guid=Kf(),this.actionElements=[],this.menuButtonClick=()=>{this.toggleOpen()},this.menuButtonId=KO.button(this.guid),this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:r,activeMenuItemIndex:s,open:n}=this;if(r.length){if(Pj(i)){if(e.preventDefault(),!n){this.toggleOpen();return}const o=r[s];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,r)}},this.menuId=KO.menu(this.guid),this._open=!1,this.updateAction=(e,i)=>{const{guid:r,activeMenuItemIndex:s}=this,n=KO.action(r,i);e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=n),e.activeDescendant=i===s},this.focusSetter=Ho()(this),this.activeMenuItemIndex=-1,this.appearance="solid",this.expanded=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale="m",this.calciteActionMenuCollapse=Ye({cancelable:!1}),this.calciteActionMenuExpand=Ye({cancelable:!1}),this.calciteActionMenuOpen=Ye({cancelable:!1})}get open(){return this._open}set open(e){const i=this._open;e!==i&&(this._open=e,this.openHandler(e))}async setFocus(e){return this.focusSetter(()=>this.menuButtonEl,e)}connectedCallback(){super.connectedCallback(),this.connectMenuButtonEl()}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&this.expandedHandler(),e.has("activeMenuItemIndex")&&(this.hasUpdated||this.activeMenuItemIndex!==-1)&&this.updateActions(this.actionElements),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteActionMenuExpand.emit():this.calciteActionMenuCollapse.emit())}disconnectedCallback(){super.disconnectedCallback(),this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.menuButtonEl&&(this.menuButtonEl.active=e,this.menuButtonEl.aria={expanded:e}),this.popoverEl&&(this.popoverEl.open=e),this.activeMenuItemIndex=this.open?0:-1,this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}connectMenuButtonEl(){const{menuButtonId:e,menuId:i,open:r,label:s}=this,n=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==n&&(this.disconnectMenuButtonEl(),this.menuButtonEl=n,this.setTooltipReferenceElement(),n&&(n.active=r,n.setAttribute("aria-controls",i),n.setAttribute("aria-expanded",EP(r)),n.setAttribute("aria-haspopup","true"),n.id||(n.id=e),n.label||(n.label=s),n.text||(n.text=s),n.addEventListener("click",this.menuButtonClick),n.addEventListener("keydown",this.menuButtonKeyDown)))}disconnectMenuButtonEl(){const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown),this.menuButtonEl=null)}setMenuButtonEl(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()}setDefaultMenuButtonEl(e){this.defaultMenuButtonEl=e,this.connectMenuButtonEl()}setPopoverEl(e){e&&(this.popoverEl=e,e.open=this.open)}handleCalciteActionClick(){this.open=!1,this.setFocus()}updateTooltip(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()}setTooltipReferenceElement(){const{tooltipEl:e,expanded:i,menuButtonEl:r,open:s}=this;e&&(e.referenceElement=!i&&!s?r:null)}updateActions(e){e==null||e.forEach(this.updateAction)}async handleDefaultSlotChange(e){const i=e.target.assignedElements({flatten:!0}).reduce((r,s)=>s!=null&&s.matches("calcite-action")?(r.push(s),r):s!=null&&s.matches("calcite-action-group")?r.concat(Array.from(s.querySelectorAll("calcite-action"))):r,[]);await this.componentOnReady(),this.actionElements=i.filter(r=>!r.disabled&&!r.hidden)}isValidKey(e,i){return!!i.find(r=>r===e)}handleActionNavigation(e,i,r){if(!this.isValidKey(i,AXe))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=r.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=r.length-1);const s=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=NY(Math.max(s-1,-1),r.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=NY(s+1,r.length))}toggleOpen(e=!this.open){this.open=e}handlePopoverOpen(e){e.stopPropagation(),this.open=!0,this.setFocus()}handlePopoverClose(e){e.stopPropagation(),this.open=!1}renderMenuButton(){const{appearance:e,label:i,scale:r,expanded:s}=this;return Se`<slot name=${zY.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${e} .aria=${{expanded:s}} class=${$e(FY.defaultTrigger)} .icon=${pXe.menu} .scale=${r} .text=${i} .textEnabled=${s} ${ai(this.setDefaultMenuButtonEl)}></calcite-action></slot>`}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,menuId:r,menuButtonEl:s,label:n,placement:o,overlayPositioning:a,flipPlacements:l}=this,c=e[i],h=(c==null?void 0:c.id)||null;return Se`<calcite-popover auto-close .flipPlacements=${l} focus-trap-disabled .label=${n} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${a} .placement=${o} pointer-disabled .referenceElement=${s} trigger-disabled ${ai(this.setPopoverEl)}><div aria-activedescendant=${h??Ge} aria-labelledby=${(s==null?void 0:s.id)??Ge} class=${$e(FY.menu)} id=${r??Ge} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`}render(){return Se`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${zY.tooltip} @slotchange=${this.updateTooltip}></slot>`}};G3.properties={activeMenuItemIndex:[16,{},{state:!0}],menuButtonEl:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},G3.styles=fXe;let I8=G3;Sr("calcite-action-menu",I8);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const qpe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host(.calcite-sortable--chosen),:host(.calcite-sortable--drag),:host(.calcite-sortable--fallback),:host(.calcite-sortable--ghost){position:relative;overflow:hidden}:host(.calcite-sortable--ghost):before{content:"";position:absolute;inset-block:0px;inset-inline-start:0px;inset-inline-end:0px;z-index:var(--calcite-z-index);box-sizing:border-box;border-width:1px;border-style:dashed;border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-2)}:host(.calcite-sortable--drag){--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const wA={content:"content",toggle:"toggle",header:"header"},xr={actionsEnd:"actions-end",container:"container",content:"content",contentStart:"content-start",controlContainer:"control-container",description:"description",header:"header",headerContainer:"header-container",headerHasContent:"header--has-content",heading:"heading",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",iconEndContainer:"icon-end-container",invalid:"invalid",statusIcon:"status-icon",title:"title",toggle:"toggle",toggleIcon:"toggle-icon",valid:"valid"},Vw={actionsEnd:"actions-end",contentStart:"content-start",control:"control",headerMenuActions:"header-menu-actions",icon:"icon"},eD={expanded:"chevron-up",collapsed:"chevron-down",valid:"check-circle",invalid:"exclamation-mark-triangle"},mXe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]) .header{gap:var(--calcite-spacing-sm)}:host([scale=s]) .header--has-content{padding:var(--calcite-spacing-sm)}:host([scale=s]) .icon-end-container{gap:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm)}:host([scale=s]) .description{font-size:var(--calcite-font-size-xs)}:host([scale=s]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-xxs)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) )}:host([scale=m]) .header{gap:var(--calcite-spacing-md)}:host([scale=m]) .header--has-content{padding:var(--calcite-spacing-md)}:host([scale=m]) .icon-end-container{gap:var(--calcite-spacing-md);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size)}:host([scale=m]) .description{font-size:var(--calcite-font-size-sm)}:host([scale=m]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) )}:host([scale=l]) .header{gap:var(--calcite-spacing-lg)}:host([scale=l]) .header--has-content{padding:var(--calcite-spacing-lg)}:host([scale=l]) .icon-end-container{gap:var(--calcite-spacing-lg);padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md)}:host([scale=l]) .description{font-size:var(--calcite-font-size)}:host([scale=l]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-lg)) )}:host{display:flex;flex-shrink:0;flex-grow:0;flex-direction:column;border-width:0px;border-block-end-width:1px;border-style:solid;padding:0;transition-property:margin;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.215,.44,.42,.88);flex-basis:auto;border-color:var(--calcite-block-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}.header{justify-content:flex-start}.header,.toggle{grid-area:header}.header-container{display:grid;align-items:stretch;grid-template:auto/auto 1fr auto auto auto auto;grid-template-areas:"handle header icon-end control menu actions-end"}.icon--start,.icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.actions-end{grid-area:actions-end}.toggle{margin:0;display:flex;cursor:pointer;flex-wrap:nowrap;align-items:center;justify-content:space-between;border-style:none;padding:0;font-family:var(--calcite-font-family);outline-color:transparent;text-align:initial;background-color:var(--calcite-block-header-background-color, transparent)}.toggle:hover{background-color:var(--calcite-block-header-background-color-hover, var(--calcite-color-foreground-2))}.toggle:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.toggle:active{background-color:var(--calcite-block-header-background-color-press, var(--calcite-color-foreground-3))}calcite-loader[inline]{align-self:center}calcite-sort-handle{grid-area:handle}.title{display:flex;flex-direction:column}.header .title .heading{padding:0;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);word-wrap:break-word;word-break:break-word;color:var(--calcite-block-heading-text-color, var(--calcite-color-text-2));font-weight:var(--calcite-font-weight-medium);line-height:var(--calcite-font-line-height-relative-snug)}.description{padding:0;word-wrap:break-word;word-break:break-word;color:var(--calcite-block-description-text-color, var(--calcite-color-text-3));font-weight:var(--calcite-font-weight-regular);line-height:var(--calcite-font-line-height-relative-snug)}.icon{display:flex}.status-icon.valid{color:var(--calcite-color-status-success)}.status-icon.invalid{color:var(--calcite-color-status-danger)}@keyframes spin{0%{transform:rotate(0)}50%{transform:rotate(180deg)}to{transform:rotate(360deg)}}.icon-end-container{display:flex;align-items:center;grid-area:icon-end}.toggle-icon{align-self:center;justify-self:end;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.toggle:hover .toggle-icon{color:var(--calcite-block-icon-color-hover, var(--calcite-color-text-1))}.container{position:relative;display:flex;block-size:100%;flex-direction:column}.content{position:relative;min-block-size:0px;flex:1 1 0%}@keyframes in{0%{opacity:0}to{opacity:1}}.content{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;padding-block:var(--calcite-internal-block-padding-block);padding-inline:var(--calcite-internal-block-padding-inline)}.content-start{display:flex;align-items:center;color:var(--calcite-block-text-color, var(--calcite-color-text-3))}.control-container{margin:0;display:flex;grid-area:control}calcite-action-menu{grid-area:menu}.actions-end{display:flex;align-items:stretch}:host([expanded]){margin-block:.5rem}:host([expanded]) .header .title .heading{color:var(--calcite-block-heading-text-color, var(--calcite-block-heading-text-color-press, var(--calcite-color-text-1)))}:host([expanded]) .description{color:var(--calcite-block-description-text-color, var(--calcite-color-text-2))}:host([expanded]) .icon--start,:host([expanded]) .icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-1))}:host([expanded][scale=s]){margin-block:var(--calcite-spacing-xxs)}:host([expanded][scale=l]){margin-block:var(--calcite-spacing-md)}:host([hidden]){display:none}[hidden]{display:none}`,H3=class H3 extends rr{constructor(){super(...arguments),this.transitionProp="margin-top",this.blockSectionChildren=[],this.messages=$a(),this.focusSetter=Ho()(this),this.hasContentStart=!1,this.hasControl=!1,this.hasEndActions=!1,this.hasIcon=!1,this.hasMenuActions=!1,this.collapsible=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.loading=!1,this.menuPlacement=fYe,this.addToItems=[],this.moveToItems=[],this.sortDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.setPosition=null,this.setSize=null,this.sortHandleOpen=!1,this.calciteInternalBlockUpdateSortMenuItems=Ye({cancelable:!1}),this.calciteBlockBeforeClose=Ye({cancelable:!1}),this.calciteBlockBeforeOpen=Ye({cancelable:!1}),this.calciteBlockClose=Ye({cancelable:!1}),this.calciteBlockCollapse=Ye({cancelable:!1}),this.calciteBlockExpand=Ye({cancelable:!1}),this.calciteBlockOpen=Ye({cancelable:!1}),this.calciteBlockSortHandleBeforeClose=Ye({cancelable:!1}),this.calciteBlockSortHandleBeforeOpen=Ye({cancelable:!1}),this.calciteBlockSortHandleClose=Ye({cancelable:!1}),this.calciteBlockSortHandleOpen=Ye({cancelable:!1}),this.calciteBlockToggle=Ye({cancelable:!1})}get open(){return this.expanded}set open(e){zM.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.transitionEl=this.el}load(){!this.heading&&!this.label&&zM.warn(`${this.el.tagName} is missing both heading & label. Please provide a heading or label for the component to be accessible.`)}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&r$(this),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteBlockExpand.emit():this.calciteBlockCollapse.emit()),e.has("scale")&&this.hasUpdated&&this.updateBlockSectionScale()}updated(){Ea(this)}onBeforeOpen(){this.calciteBlockBeforeOpen.emit()}onOpen(){this.calciteBlockOpen.emit()}onBeforeClose(){this.calciteBlockBeforeClose.emit()}onClose(){this.calciteBlockClose.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteBlockSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteBlockSortHandleOpen.emit()}onHeaderClick(){this.expanded=!this.expanded,this.calciteBlockToggle.emit()}controlSlotChangeHandler(e){this.hasControl=qr(e)}menuActionsSlotChangeHandler(e){this.hasMenuActions=qr(e)}iconSlotChangeHandler(e){this.hasIcon=qr(e)}actionsEndSlotChangeHandler(e){this.hasEndActions=qr(e)}handleContentStartSlotChange(e){this.hasContentStart=qr(e)}handleDefaultSlotChange(e){this.blockSectionChildren=que(e,"calcite-block-section"),this.updateBlockSectionScale()}updateBlockSectionScale(){this.blockSectionChildren.forEach(e=>{e.scale=this.scale})}renderScrim(){const{loading:e}=this,i=Se`<slot @slotchange=${this.handleDefaultSlotChange}></slot>`;return[e?Se`<calcite-scrim .loading=${e}></calcite-scrim>`:null,i]}renderLoaderStatusIcon(){const{loading:e,messages:i,status:r}=this;return e?oi("loader",Se`<div class=${$e(xr.icon)}><calcite-loader inline .label=${i.loading} .scale=${this.scale}></calcite-loader></div>`):r?oi("status-icon",Se`<div class=${$e(xr.icon)}><calcite-icon class=${$e({[xr.statusIcon]:!0,[xr.valid]:r=="valid",[xr.invalid]:r=="invalid"})} .icon=${eD[r]} .scale=${as(this.scale)}></calcite-icon></div>`):oi("icon-slot",Se`<div class=${$e(xr.icon)} .hidden=${!this.hasIcon}>${oi("icon-slot",Se`<slot name=${Vw.icon} @slotchange=${this.iconSlotChangeHandler}></slot>`)}</div>`)}renderActionsEnd(){return Se`<div class=${$e(xr.actionsEnd)} .hidden=${!this.hasEndActions}><slot name=${Vw.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderContentStart(){return Se`<div class=${$e(xr.contentStart)} .hidden=${!this.hasContentStart}><slot name=${Vw.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderTitle(){const{heading:e,headingLevel:i,description:r}=this;return e||r?Se`<div class=${$e(xr.title)}>${Fpe({class:xr.heading,level:i,children:e})}${r?Se`<div class=${$e(xr.description)}>${r}</div>`:null}</div>`:null}renderIcon(e){const{iconFlipRtl:i}=this,r=i==="both"||e==="start"?i==="start":i==="end",s=e==="start"?this.iconStart:this.iconEnd,n=e==="start"?xr.iconStart:xr.iconEnd;if(s)return oi(s,Se`<calcite-icon class=${$e(n)} .flipRtl=${r} .icon=${s} .scale=${as(this.scale)}></calcite-icon>`)}render(){const{collapsible:e,loading:i,expanded:r,label:s,heading:n,messages:o,description:a,menuFlipPlacements:l,menuPlacement:c,moveToItems:h,addToItems:y,setPosition:g,setSize:_,dragDisabled:S,sortDisabled:E,iconEnd:C,hasContentStart:M,iconStart:P}=this,D=r?o.collapse:o.expand,F=!!(n||a||M||P||i||status),U=Se`<header class=${$e({[xr.header]:!0,[xr.headerHasContent]:F})} id=${wA.header}>${this.renderIcon("start")}${this.renderContentStart()}${this.renderLoaderStatusIcon()}${this.renderTitle()}</header>`,G=r?eD.expanded:eD.collapsed,Q=Se`<div class=${$e(xr.headerContainer)}>${this.dragHandle?Se`<calcite-sort-handle .addToItems=${y} .disabled=${S} .label=${n||s} .moveToItems=${h} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${g} .setSize=${_} .sortDisabled=${E} ${ai(this.setSortHandleEl)}></calcite-sort-handle>`:null}${e?Se`<button aria-controls=${wA.content} aria-describedby=${wA.header} .ariaExpanded=${e?r:null} class=${$e(xr.toggle)} id=${wA.toggle} @click=${this.onHeaderClick} title=${D??Ge}>${U}<div class=${$e(xr.iconEndContainer)}>${this.renderIcon("end")}<calcite-icon class=${$e(xr.toggleIcon)} .icon=${G} .scale=${as(this.scale)}></calcite-icon></div></button>`:U}${C&&!e?Se`<div class=${$e(xr.iconEndContainer)}>${this.renderIcon("end")}</div>`:null}<div aria-labelledby=${wA.header} class=${$e(xr.controlContainer)} .hidden=${!this.hasControl}><slot name=${Vw.control} @slotchange=${this.controlSlotChangeHandler}></slot></div><calcite-action-menu .flipPlacements=${l??["top","bottom"]} .hidden=${!this.hasMenuActions} .label=${o.options} .overlayPositioning=${this.overlayPositioning} .placement=${c} .scale=${this.scale}><slot name=${Vw.headerMenuActions} @slotchange=${this.menuActionsSlotChangeHandler}></slot></calcite-action-menu>${this.renderActionsEnd()}</div>`;return Ia({disabled:this.disabled,children:Se`<article aria-label=${s??Ge} .ariaBusy=${i} class=${$e({[xr.container]:!0})}>${Q}<section aria-labelledby=${wA.toggle} class=${$e(xr.content)} .hidden=${!r} id=${wA.content}>${this.renderScrim()}</section></article>`})}};H3.properties={hasContentStart:[16,{},{state:!0}],hasControl:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasIcon:[16,{},{state:!0}],hasMenuActions:[16,{},{state:!0}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],loading:[7,{},{reflect:!0,type:Boolean}],label:1,menuFlipPlacements:[0,{},{attribute:!1}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],sortDisabled:[5,{},{type:Boolean}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],status:[3,{},{reflect:!0}]},H3.styles=[mXe,qpe];let C8=H3;Sr("calcite-block",C8);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Dy={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},hv={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const yXe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,q3=class q3 extends rr{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}handleActionsStartSlotChange(e){this.hasActionsStart=qr(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=qr(e)}handleContentStartSlotChange(e){this.hasContentStart=qr(e)}handleContentEndSlotChange(e){this.hasContentEnd=qr(e)}renderActionsStart(){const{hasActionsStart:e}=this;return oi("actions-start-container",Se`<div class=${$e(Dy.actionsStart)} .hidden=${!e}><slot name=${hv.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:e}=this;return oi("actions-end-container",Se`<div class=${$e(Dy.actionsEnd)} .hidden=${!e}><slot name=${hv.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:e}=this;return Se`<div class=${$e(Dy.contentStart)} .hidden=${!e}><slot name=${hv.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return Se`<div class=${$e(Dy.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:e}=this;return Se`<div class=${$e(Dy.contentEnd)} .hidden=${!e}><slot name=${hv.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return Se`<div class=${$e(Dy.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};q3.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]},q3.styles=yXe;let T8=q3;Sr("calcite-stack",T8);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const BY={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},gXe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-block-start:var(--calcite-input-message-spacing, var(--calcite-input-message-spacing-value, var(--calcite-spacing-xxs)))}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:var(--calcite-spacing-sm)}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-danger)))}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-success)))}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-brand)))}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`,vXe={inputMessageIcon:"calcite-input-message-icon"},W3=class W3 extends rr{constructor(){super(...arguments),this.iconFlipRtl=!1,this.scale="m",this.status="idle"}connectedCallback(){super.connectedCallback(),this.requestedIcon=Yb(BY,this.icon,this.status)}willUpdate(e){(e.has("status")&&(this.hasUpdated||this.status!=="idle")||e.has("icon"))&&(this.requestedIcon=Yb(BY,this.icon,this.status))}render(){const e=this.el.hidden;return wP(this.el,"calcite-hydrated-hidden",e),Se`${this.renderIcon(this.requestedIcon)}<slot></slot>`}renderIcon(e){if(e)return Se`<calcite-icon class=${$e(vXe.inputMessageIcon)} .flipRtl=${this.iconFlipRtl} .icon=${e} scale=s></calcite-icon>`}};W3.properties={icon:[3,{converter:L0},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}]},W3.styles=gXe;let g3=W3;Sr("calcite-input-message",g3);const SAt=Object.freeze(Object.defineProperty({__proto__:null,InputMessage:g3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const bXe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%,0,0)}50%{inline-size:40%}to{transform:translate3d(600%,0,0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%,0,0)}50%{inline-size:40%}to{transform:translate3d(-600%,0,0)}}:host([hidden]){display:none}[hidden]{display:none}`,tD={track:"track",bar:"bar",text:"text"},Q3=class Q3 extends rr{constructor(){super(...arguments),this.reversed=!1,this.type="determinate",this.value=0}render(){const e=this.type==="determinate",i=e?{width:`${this.value}%`}:{},r=Jx(this.el);return Se`<div .ariaLabel=${this.label||this.text} .ariaValueMax=${e?"100":void 0} .ariaValueMin=${e?"0":void 0} .ariaValueNow=${e?this.value:void 0} role=progressbar><div class=${$e(tD.track)}><div class=${$e({[tD.bar]:!0,indeterminate:this.type==="indeterminate",[Zce.rtl]:r==="rtl",reversed:this.reversed})} style=${Jce(i)}></div></div>${this.text?Se`<div class=${$e(tD.text)}>${this.text}</div>`:null}</div>`}};Q3.properties={label:1,reversed:[7,{},{reflect:!0,type:Boolean}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},Q3.styles=bXe;let M8=Q3;Sr("calcite-progress",M8);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const wXe=new RegExp("\\.(0+)?$"),_Xe=new RegExp("0+$"),Ni=class Ni{constructor(e){if(e instanceof Ni)return e;const[i,r]=kXe(e).split(".").concat("");this.value=BigInt(i+r.padEnd(Ni.DECIMALS,"0").slice(0,Ni.DECIMALS))+BigInt(Ni.ROUNDED&&r[Ni.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(Ni.DECIMALS+1,"0"),i=e.slice(0,-Ni.DECIMALS),r=e.slice(-Ni.DECIMALS).replace(_Xe,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),s=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&s.unshift({type:"minusSign",value:e.minusSign}),r.length&&(s.push({type:"decimal",value:e.decimal}),r.split("").forEach(n=>s.push({type:"fraction",value:n}))),s}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),s=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,n=r.length?`${e.decimal}${r.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${s}${n}`}add(e){return Ni.fromBigInt(this.value+new Ni(e).value)}subtract(e){return Ni.fromBigInt(this.value-new Ni(e).value)}multiply(e){return Ni._divRound(this.value*new Ni(e).value,Ni.SHIFT)}divide(e){return Ni._divRound(this.value*Ni.SHIFT,new Ni(e).value)}};Ni.DECIMALS=100,Ni.ROUNDED=!0,Ni.SHIFT=BigInt("1"+"0".repeat(Ni.DECIMALS)),Ni._divRound=(e,i)=>Ni.fromBigInt(e/i+(Ni.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),Ni.fromBigInt=e=>Object.assign(Object.create(Ni.prototype),{value:e,isNegative:e<BigInt(0)});let o1=Ni;function nd(t){return!(!t||isNaN(Number(t)))}function SXe(t){return!t||!PXe(t)?"":v3(t,e=>{let i=!1;const r=e.split("").filter((s,n)=>s.match(/\./g)&&!i?(i=!0,!0):s.match(/-/g)&&n===0?!0:VP.includes(s)).join("");return nd(r)?new o1(r).toString():""})}const Wpe=/^([-0])0+(?=\d)/,xXe=/(?!^\.)\.$/,$Xe=/(?!^-)-/g,EXe=/^-\b0\b\.?0*$/,IXe=/0*$/,CXe=new Set(["e","E","-",",",".",...VP]),TXe=t=>{const e=Array.from(t).filter(i=>CXe.has(i)).join("");return v3(e,i=>{const r=i.replace($Xe,"").replace(xXe,"").replace(Wpe,"$1");return nd(r)?EXe.test(r)?r:MXe(r):i})};function MXe(t){const e=t.split(".")[1],i=new o1(t).toString(),[r,s]=i.split(".");return e&&s!==e?`${r}.${e}`:i}function v3(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,s)=>e(s===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function kXe(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",s=+e[1],n=e[0].split("."),o=(r?n[0].substring(1):n[0])||"",a=n[1]||"",l=(y,g)=>{const _=Math.abs(g)-y.length,S=_>0?`${"0".repeat(_)}${y}`:y;return`${S.slice(0,g)}.${S.slice(g)}`},c=(y,g)=>{const _=g>y.length?`${y}${"0".repeat(g-y.length)}`:y;return`${_.slice(0,g)}.${_.slice(g)}`},h=s>0?`${o}${c(a,s)}`:`${l(o,s)}${a}`;return`${r?"-":""}${h.charAt(0)==="."?"0":""}${h.replace(wXe,"").replace(Wpe,"")}`}function PXe(t){return VP.some(e=>t.includes(e))}function LXe(t,e,i){const r=e.split(".")[1];if(r){const s=r.match(IXe)[0];if(s&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const n=i.decimal;return t=t.includes(n)?t:`${t}${n}`,t.padEnd(t.length+s.length,i.localize("0"))}}return t}const b3="en",RXe=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",b3,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"Ð¿Ñ€.Ð¾Ð±.",pm:"ÑÐ».Ð¾Ð±."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a.Â m.",pm:"p.Â m."},cs:{am:"dop.",pm:"odp."},es:{am:"a.Â m.",pm:"p.Â m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"×œ×¤× ×”×´×¦",pm:"××—×”×´×¦"},hu:{am:"de. ",pm:"du."},lt:{am:"prieÅ¡piet",pm:"popiet"},lv:{am:"priekÅ¡pusdienÄ",pm:"pÄ“cpusdienÄ"},mk:{am:"Ð¿Ñ€ÐµÑ‚Ð¿Ð».",pm:"Ð¿Ð¾Ð¿Ð»."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manhÃ£",pm:"da tarde"},"pt-PT":{am:"da manhÃ£",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"à¸à¹ˆà¸­à¸™à¹€à¸—à¸µà¹ˆà¸¢à¸‡",pm:"à¸«à¸¥à¸±à¸‡à¹€à¸—à¸µà¹ˆà¸¢à¸‡"},tr:{am:"Ã–Ã–",pm:"Ã–S"},uk:{am:"Ð´Ð¿",pm:"Ð¿Ð¿"},vi:{am:"SA",pm:"CH"}}));const OXe=["arab","arabext","latn"],iD=[...RXe],Qpe=t=>OXe.includes(t),rD=new Intl.NumberFormat().resolvedOptions().numberingSystem,Jpe=rD==="arab"||!Qpe(rD)?"latn":rD,DXe=t=>Qpe(t)?t:Jpe;function NXe(t){return t?iD.includes(t)?t:(t=t.toLowerCase(),t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(e,i,r)=>`${i}-${r.toUpperCase()}`),iD.includes(t)||(t=t.split("-")[0])),t==="nb"||t==="nn"?"no":t==="zh"?"zh-CN":iD.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),b3)):b3}class FXe{constructor(){this.delocalize=e=>this._numberFormatOptions?v3(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?v3(e,i=>nd(i.trim())?new o1(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=NXe(e==null?void 0:e.locale),e.numberingSystem=DXe(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===b3&&e.numberingSystem===Jpe&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((s,n)=>[s,n])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(s=>s.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"Â ":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(s=>s.type==="decimal").value,this._minusSign=r.find(s=>s.type==="minusSign").value,this._getDigitIndex=s=>i.get(s)}}const Ga=new FXe;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const hp={alignmentCenter:"internal-label-alignment--center",alignmentEnd:"internal-label-alignment--end",container:"internal-label--container",requiredIndicator:"internal-label-required--indicator",spacingBottom:"internal-label-spacing--bottom",spacingInlineEnd:"internal-label-spacing-inline--end",spacingInlineStart:"internal-label-spacing-inline--start",text:"internal-label--text"},Zpe=({alignmentCenter:t,bottomSpacingDisabled:e,labelText:i,onClick:r,required:s,spacingInlineEnd:n,spacingInlineStart:o,tooltipText:a})=>Se`<div class=${$e({[hp.alignmentCenter]:t,[hp.alignmentEnd]:!t,[hp.container]:!0,[hp.spacingBottom]:!e,[hp.spacingInlineEnd]:n,[hp.spacingInlineStart]:o})} @click=${r}><div class=${$e(hp.text)}>${i}${s&&Se`<span aria-hidden=true class=${$e(hp.requiredIndicator)} title=${a??Ge}>*</span>`||""}</div><slot name=label-content></slot></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const zXe={validationContainer:"validation-container"},BXe=()=>{},Ype=({scale:t,status:e,id:i,icon:r,message:s,ref:n})=>Se`<div class=${$e(zXe.validationContainer)} ${ai(n||BXe)}><calcite-input-message aria-live=polite .icon=${r} id=${i??Ge} .scale=${t} .status=${e}>${s}</calcite-input-message></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const jXe=["date","datetime-local","month","number","range","time","week"],UXe=["email","password","search","tel","text","url"],VXe=["email","password","search","tel","text","textarea","url"];function Ny(t,e,i,r){const s=i.toLowerCase(),n=t[i];r&&n!=null?e.setAttribute(s,`${n}`):e.removeAttribute(s)}function GXe(t,e,i){i.type=t==="textarea"?"text":t;const r=jXe.includes(t),s=e;Ny(s,i,"min",r),Ny(s,i,"max",r),Ny(s,i,"step",r);const n=VXe.includes(t),o=e;Ny(o,i,"minLength",n),Ny(o,i,"maxLength",n);const a=UXe.includes(t);Ny(o,i,"pattern",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ks={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",numberButtonItem:"number-button-item",hasSuffix:"has-suffix",hasPrefix:"has-prefix"},sD={validationMessage:"inputValidationMessage"},jY={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},HXe={action:"action"},UY={up:"up",down:"down"},nD={chevronUp:"chevron-up",chevronDown:"chevron-down",close:"x"},qXe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) input[type=file],:host([scale=s]) textarea{min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea,:host([scale=m]) input[type=file]{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea,:host([scale=l]) input[type=file]{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{position:relative;margin:0;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;text-overflow:ellipsis;border-width:1px;border-style:solid;font-family:inherit;font-weight:var(--calcite-font-weight-normal);border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-background-color, var(--calcite-color-foreground-1));color:var(--calcite-input-text-color, var(--calcite-color-text-1));transition:var(--calcite-animation-timing),block-size 0,outline-offset 0s;-webkit-appearance:none}textarea:placeholder-shown,input:placeholder-shown{text-overflow:ellipsis}textarea{border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-prefix input{border-start-start-radius:0;border-end-start-radius:0}.has-suffix input,.element-wrapper:has(.clear-button) input,:host([number-button-type=vertical][type=number]) input,:host([number-button-type=horizontal]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .clear-button,:host([number-button-type=horizontal][type=number]) .clear-button{border-start-end-radius:0;border-end-end-radius:0}:host([number-button-type=horizontal]) input{border-start-start-radius:0;border-start-end-radius:0;border-end-start-radius:0;border-end-end-radius:0}.has-prefix .prefix:first-child,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=down]{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-suffix .suffix,:host([number-button-type=vertical][type=number][read-only]) .has-suffix .suffix,:host([clearable]) .clear-button,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=up]{border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([clearable]) .has-suffix .clear-button{border-end-end-radius:0;border-start-end-radius:0}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px;border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]{border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-input-text-color, var(--calcite-color-text-1))}input[readonly],textarea[readonly]{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-input-background-color, var(--calcite-color-background))}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-input-text-color, var(--calcite-color-text-1))}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .icon{inset-inline-start:.5rem}:host([scale=m]) .icon{inset-inline-start:.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center;isolation:isolate}.icon{pointer-events:none;position:absolute;display:block;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-icon-color, var(--calcite-color-text-3));z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.clear-button calcite-icon{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.clear-button:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.clear-button:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.clear-button:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.clear-button:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.clear-button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block;--calcite-progress-background-color: var(--calcite-input-loading-background-color);--calcite-progress-fill-color: var(--calcite-input-loading-fill-color)}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-medium);line-height:1;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input))}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto);background-color:var(--calcite-input-prefix-background-color, var(--calcite-color-background));color:var(--calcite-input-prefix-text-color, var(--calcite-color-text-2))}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto);background-color:var(--calcite-input-suffix-background-color, var(--calcite-color-background));color:var(--calcite-input-suffix-text-color, var(--calcite-color-text-2))}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal{border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));order:1;max-block-size:100%;min-block-size:100%;align-self:stretch;border-width:1px;border-style:solid}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=up]{border-inline-start-width:0px;order:5}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:.5rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.number-button-item:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.number-button-item:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.number-button-item:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.number-button-item:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center;border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));box-shadow:var(--calcite-input-shadow, var(--calcite-shadow-none))}input[type=date]::-webkit-input-placeholder{visibility:hidden!important}:host([type=color]) input{padding:.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;background-color:var(--calcite-color-foreground-1);text-align:center;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));block-size:initial}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:.5rem}:host([type=file][scale=m]) input{padding-block:.25rem;padding-inline:.75rem}:host([type=file][scale=l]) input{padding-block:.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}:host([type=datetime-local]) .element-wrapper{inline-size:100%}:host([type=datetime-local]) .element-wrapper input{display:inline-block;min-inline-size:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}`,J3=class J3 extends rr{constructor(){super(),this.actionWrapperRef=Rn(),this.attributeWatch=zB(["autofocus","enterkeyhint","inputmode","spellcheck"],this.handleGlobalAttributesChanged),this.childRef=Rn(),this.childElType="input",this.childNumberRef=Rn(),this.inputWrapperRef=Rn(),this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.previousValueOrigin="initial",this.userChangedValue=!1,this._value="",this.messages=$a(),this.focusSetter=Ho()(this),this.slottedActionElDisabledInternally=!1,this.alignment="start",this.clearable=!1,this.disabled=!1,this.editingEnabled=!1,this.groupSeparator=!1,this.iconFlipRtl=!1,this.loading=!1,this.localeFormat=!1,this.multiple=!1,this.numberButtonType="vertical",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.type="text",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputChange=Ye({cancelable:!1}),this.calciteInputInput=Ye(),this.calciteInternalInputBlur=Ye({cancelable:!1}),this.calciteInternalInputFocus=Ye({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueWatcher(e,i),e&&this._value===""&&this.setValue({origin:"reset",value:i}))}async selectText(){var i;(i=(this.type==="number"?this.childNumberRef:this.childRef).value)==null||i.select()}async setFocus(e){return this.focusSetter(()=>this.type==="number"?this.childNumberRef.value:this.childRef.value,e)}connectedCallback(){super.connectedCallback(),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),Yx(this),the(this),this.el.addEventListener(H6,this.onHiddenFormInputInput)}async load(){var e,i;this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(e=this.max)==null?void 0:e.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=Yb(jY,this.icon,this.type),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:nd(this.value)?this.value:""})))}willUpdate(e){var i,r;e.has("max")&&(this.maxString=((i=this.max)==null?void 0:i.toString())||null),e.has("min")&&(this.minString=((r=this.min)==null?void 0:r.toString())||null),(e.has("icon")||e.has("type")&&(this.hasUpdated||this.type!=="text"))&&(this.requestedIcon=Yb(jY,this.icon,this.type))}updated(){Ea(this)}disconnectedCallback(){super.disconnectedCallback(),WB(this),ihe(this),this.el.removeEventListener(H6,this.onHiddenFormInputInput)}get isClearable(){var e;return!this.isTextarea&&(this.clearable||this.type==="search")&&((e=this.value)==null?void 0:e.length)>0}get isTextarea(){return this.childElType==="textarea"}handleGlobalAttributesChanged(){this.requestUpdate()}valueWatcher(e,i){if(!this.userChangedValue){if(this.type==="number"&&(e==="Infinity"||e==="-Infinity")){this.displayedValue=e,this.previousEmittedValue=e;return}this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?nd(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}keyDownHandler(e){this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&IP(this)&&e.preventDefault())}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,r,s){const{value:n}=this;if(n==="Infinity"||n==="-Infinity")return;const o=e==="up"?1:-1,a=this.step==="any"?1:Math.abs(this.step||1),c=new o1(n!==""?n:"0").add(`${a*o}`),h=()=>typeof r=="number"&&!isNaN(r)&&c.subtract(`${r}`).isNegative,y=()=>typeof i=="number"&&!isNaN(i)&&!c.subtract(`${i}`).isNegative,g=h()?`${r}`:y()?`${i}`:c.toString();this.setValue({committing:!0,nativeEvent:s,origin:"user",value:g})}clearInputValue(e){this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})}emitChangeIfUserModified(){this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))}inputBlurHandler(){window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()}clickHandler(e){if(this.disabled)return;const i=e.composedPath();!i.includes(this.inputWrapperRef.value)||i.includes(this.actionWrapperRef.value)||this.setFocus()}inputFocusHandler(){this.calciteInternalInputFocus.emit()}inputInputHandler(e){this.disabled||this.readOnly||(this.type==="file"&&(this.files=this.childRef.value.files),this.setValue({nativeEvent:e,origin:"user",value:e.target.value}))}inputKeyDownHandler(e){this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()}inputNumberInputHandler(e){if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;Ga.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=Ga.delocalize(i);e.inputType==="insertFromPaste"?(nd(r)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:SXe(r)}),this.childNumberRef.value.value=this.displayedValue):this.setValue({nativeEvent:e,origin:"user",value:r})}inputNumberKeyDownHandler(e){if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...VP,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const r=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||r){e.key==="Enter"&&this.emitChangeIfUserModified();return}Ga.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===Ga.decimal&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.indexOf(Ga.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberRef.value.value||this.value&&!/[eE]/.test(this.childNumberRef.value.value))||e.key==="-"&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.split("-").length<=2)||e.preventDefault())}nudgeNumberValue(e,i){if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const r=this.maxString?parseFloat(this.maxString):null,s=this.minString?parseFloat(this.minString):null,n=150;this.incrementOrDecrementNumberValue(e,r,s,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let o=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(o){o=!1;return}this.incrementOrDecrementNumberValue(e,r,s,i)},n)}numberButtonPointerUpAndOutHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}numberButtonPointerDownHandler(e){if(!Wue(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)}syncHiddenFormInput(e){GXe(this.type,this,e)}setInputValue(e){const i=this.type==="number"?this.childNumberRef:this.childRef;i.value&&(i.value.value=e)}setPreviousEmittedValue(e){this.previousEmittedValue=this.normalizeValue(e)}normalizeValue(e){return this.type==="number"?nd(e)?e:"":e}setPreviousValue(e){this.previousValue=this.normalizeValue(e)}setValue({committing:e=!1,nativeEvent:i,origin:r,previousValue:s,value:n}){var o,a;if(this.setPreviousValue(s??this.value),this.previousValueOrigin=r,this.type==="number"){Ga.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const l=((o=this.previousValue)==null?void 0:o.length)>n.length||((a=this.value)==null?void 0:a.length)>n.length,c=n.charAt(n.length-1)===".",h=c&&l?n:TXe(n),y=n&&!h?nd(this.previousValue)?this.previousValue:"":h;let g=Ga.localize(y);r!=="connected"&&!c&&(g=LXe(g,y,Ga)),this.displayedValue=c&&l?`${g}${Ga.decimal}`:g,this.userChangedValue=r==="user"&&this.value!==y,this.value=["-","."].includes(y)?"":y}else this.userChangedValue=r==="user"&&this.value!==n,this.value=n;r==="direct"&&(this.setInputValue(n),this.previousEmittedValue=n),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?Ga.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())}inputKeyUpHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!nd(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=Jx(this.el),i=Se`<div class=${$e(Ks.loader)}><calcite-progress .label=${this.messages.loading} type=indeterminate></calcite-progress></div>`,r=Se`<button .ariaLabel=${this.messages.clear} class=${$e(Ks.clearButton)} .disabled=${this.disabled||this.readOnly} @click=${this.clearInputValue} tabindex=-1 title=${this.messages.clear??Ge} type=button><calcite-icon .icon=${nD.close} .scale=${as(this.scale)}></calcite-icon></button>`,s=Se`<calcite-icon class=${$e(Ks.inputIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${as(this.scale)}></calcite-icon>`,n=this.numberButtonType==="horizontal",o=Se`<button aria-hidden=true class=${$e({[Ks.numberButtonItem]:!0,[Ks.buttonItemHorizontal]:n})} data-adjustment=${UY.up} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${nD.chevronUp} .scale=${as(this.scale)}></calcite-icon></button>`,a=Se`<button aria-hidden=true class=${$e({[Ks.numberButtonItem]:!0,[Ks.buttonItemHorizontal]:n})} data-adjustment=${UY.down} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${nD.chevronDown} .scale=${as(this.scale)}></calcite-icon></button>`,l=Se`<div class=${$e(Ks.numberButtonWrapper)}>${o}${a}</div>`,c=Se`<div class=${$e(Ks.prefix)}>${this.prefixText}</div>`,h=Se`<div class=${$e(Ks.suffix)}>${this.suffixText}</div>`,y=this.el.autofocus,g=this.el.enterKeyHint,_=this.el.inputMode,S=this.type==="number"?oi("localized-input",Se`<input accept=${this.accept??Ge} aria-errormessage=${sD.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${VM(this)} autocomplete=${this.autocomplete??Ge} .autofocus=${y} value=${this.defaultValue??Ge} .disabled=${this.disabled?!0:null} enterkeyhint=${g??Ge} inputmode=${_??Ge} maxlength=${this.maxLength??Ge} minlength=${this.minLength??Ge} .multiple=${this.multiple} name=${Ge} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputNumberInputHandler} @keydown=${this.inputNumberKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Ge} placeholder=${(this.placeholder||"")??Ge} .readOnly=${this.readOnly} .required=${this.required} type=text .value=${qq(this.displayedValue??"")} ${ai(this.childNumberRef)}>`):null,E=this.childElType==="input"?jS`input`:jS`textarea`,C=this.type!=="number"?UB`<${E} accept=${this.accept??Ge} aria-errormessage=${sD.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${VM(this)} autocomplete=${this.autocomplete??Ge} .autofocus=${y} class=${$e({[Ks.editingEnabled]:this.editingEnabled,[Ks.inlineChild]:!!this.inlineEditableEl})} .defaultValue=${this.defaultValue??""} .disabled=${this.disabled?!0:null} enterkeyhint=${g??Ge} inputmode=${_??Ge} max=${this.maxString??Ge} maxlength=${this.maxLength??Ge} min=${this.minString??Ge} minlength=${this.minLength??Ge} .multiple=${this.multiple} name=${this.name??Ge} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputInputHandler} @keydown=${this.inputKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Ge} placeholder=${(this.placeholder||"")??Ge} .readOnly=${this.readOnly} .required=${this.required?!0:null} spellcheck=${this.el.spellcheck??Ge} step=${this.step??Ge} tabindex=${(this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null)??Ge} type=${this.type??Ge} .value=${qq(this.value??"")} ${ai(this.childRef)}></${E}>`:null;return Ia({disabled:this.disabled,children:Se`${this.labelText&&Zpe({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${$e({[Ks.inputWrapper]:!0,[Zce.rtl]:e==="rtl",[Ks.hasSuffix]:this.suffixText,[Ks.hasPrefix]:this.prefixText})} ${ai(this.inputWrapperRef)}>${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?a:null}${this.prefixText?c:null}<div class=${$e(Ks.wrapper)}>${S}${C}${this.isClearable?r:null}${this.requestedIcon?s:null}${this.loading?i:null}</div><div class=${$e(Ks.actionWrapper)} ${ai(this.actionWrapperRef)}><slot name=${HXe.action}></slot></div>${this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?l:null}${this.suffixText?h:null}${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?o:null}${she({component:this})}</div>${this.validationMessage&&this.status==="invalid"?Ype({icon:this.validationIcon,id:sD.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};J3.properties={displayedValue:[16,{},{state:!0}],slottedActionElDisabledInternally:[16,{},{state:!0}],accept:1,alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],clearable:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],editingEnabled:[7,{},{reflect:!0,type:Boolean}],files:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:L0},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],label:1,labelText:1,loading:[7,{},{reflect:!0,type:Boolean}],localeFormat:[5,{},{type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],min:[11,{},{reflect:!0,type:Number}],minLength:[11,{},{reflect:!0,type:Number}],multiple:[5,{},{type:Boolean}],name:[3,{},{reflect:!0}],numberButtonType:[3,{},{reflect:!0}],numberingSystem:[3,{},{reflect:!0}],pattern:1,placeholder:1,prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],step:[3,{},{reflect:!0}],suffixText:1,type:[3,{},{reflect:!0}],validationIcon:[3,{converter:L0},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},J3.styles=qXe;let w3=J3;Sr("calcite-input",w3);const xAt=Object.freeze(Object.defineProperty({__proto__:null,Input:w3},Symbol.toStringTag,{value:"Module"}));function Xpe(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(Xpe).join(",");const e=String(t);return e==="0"&&Object.is(Number(t),-0)?"-0":e}function WXe(t,e=cYe){if(t==null)return t;for(const i in t)if(e(t[i],i,t)===!1)break;return t}function Kpe(t){return uYe(Xpe(t))}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const oD=(t,e,i)=>{const r=Kpe(e),s=new RegExp(r,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const n=(o,a,l)=>{if(o!=null&&o.constant||o!=null&&o.filterDisabled)return!0;let c=!1;return WXe(o,(h,y)=>{typeof h=="function"||h==null||l&&!l.includes(y)||(Array.isArray(h)||typeof h=="object"&&h!==null?n(h,a)&&(c=!0):a.test(h)&&(c=!0))}),c};return t.filter(o=>n(o,s,i))};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Lj=()=>FB((t,e)=>{const i=new Set;return e.onDisconnected(()=>{i.forEach(r=>r.cancel())}),{add:r=>{[r].flat().forEach(s=>i.add(s))},resources:i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const QXe={container:"container"},JXe={search:"search"},ZXe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`,sS=class sS extends rr{constructor(){super(...arguments),this.cancelable=Lj()(this),this.filterDebounced=jP((e,i=!1,r)=>this.updateFiltered(oD(this.items??[],e,this.filterProps),i,r),RB.filter),this.textInput=Rn(),this._value="",this.messages=$a(),this.focusSetter=Ho()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=Ye({cancelable:!1})}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(i=>{this.value=e,this.updateFiltered(oD(this.items??[],e,this.filterProps),!1,i)})}async setFocus(e){return this.focusSetter(()=>this.textInput.value,e)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(oD(this.items??[],this.value,this.filterProps))}willUpdate(e){var i;(e.has("items")&&(this.hasUpdated||((i=this.items)==null?void 0:i.length)>0)||e.has("filterProps"))&&this.filterDebounced(this.value)}updated(){Ea(this)}valueHandler(e){this.filterDebounced(e)}inputHandler(e){const i=e.target;this.value=i.value,this.filterDebounced(i.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key==="Escape"&&(this.clear(),e.preventDefault()),e.key==="Enter"&&e.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(e,i=!1,r){this.filteredItems=e,i&&this.calciteFilterChange.emit(),r==null||r()}render(){const{disabled:e,scale:i}=this;return Ia({disabled:e,children:Se`<div class=${$e(QXe.container)}><label><calcite-input clearable .disabled=${e} .icon=${JXe.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${i} type=text .value=${this.value} ${ai(this.textInput)}></calcite-input></label></div>`})}};sS.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1},sS.shadowRootOptions={mode:"open",delegatesFocus:!0},sS.styles=ZXe;let k8=sS;Sr("calcite-filter",k8);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Q_="calcite-list",_3="calcite-list-item-group",wd="calcite-list-item";function P8(t){var i;const e=(i=t.parentElement)==null?void 0:i.closest(wd);e&&(e.open=!0,P8(e))}function YXe(t){const e=t.assignedElements({flatten:!0}),i=e.filter(n=>n==null?void 0:n.matches(_3)).map(n=>Array.from(n.querySelectorAll(wd))).flat(),r=e.filter(n=>n==null?void 0:n.matches(wd));return{lists:e.filter(n=>n==null?void 0:n.matches(Q_)),items:i.concat(r)}}function XXe(t){const e=t.assignedElements({flatten:!0}).filter(r=>r.matches(wd)),i=e.filter(r=>!r.filterHidden);e.forEach(r=>{const s=i.indexOf(r);r.setPosition=s===-1?void 0:s+1,r.setSize=s===-1?void 0:i.length})}function KXe(t,e=!1){const i=e?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item";return document.evaluate(i,t,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}function XE(t){return t.tagName==="CALCITE-LIST-ITEM"}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function VY(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,r)}return i}function Xu(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?VY(Object(i),!0).forEach(function(r){eKe(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):VY(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function UC(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?UC=function(e){return typeof e}:UC=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UC(t)}function eKe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Dd(){return Dd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Dd.apply(this,arguments)}function tKe(t,e){if(t==null)return{};var i={},r=Object.keys(t),s,n;for(n=0;n<r.length;n++)s=r[n],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function iKe(t,e){if(t==null)return{};var i=tKe(t,e),r,s;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var rKe="1.15.6";function Td(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ud=Td(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),s$=Td(/Edge/i),GY=Td(/firefox/i),J_=Td(/safari/i)&&!Td(/chrome/i)&&!Td(/android/i),Rj=Td(/iP(ad|od|hone)/i),efe=Td(/chrome/i)&&Td(/android/i),tfe={capture:!1,passive:!1};function mi(t,e,i){t.addEventListener(e,i,!Ud&&tfe)}function fi(t,e,i){t.removeEventListener(e,i,!Ud&&tfe)}function S3(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ife(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Zl(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&S3(t,e):S3(t,e))||r&&t===i)return t;if(t===i)break}while(t=ife(t))}return null}var HY=/\s+/g;function la(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(HY," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(HY," ")}}function Bt(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function kv(t,e){var i="";if(typeof t=="string")i=t;else do{var r=Bt(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function rfe(t,e,i){if(t){var r=t.getElementsByTagName(e),s=0,n=r.length;if(i)for(;s<n;s++)i(r[s],s);return r}return[]}function Bu(){var t=document.scrollingElement;return t||document.documentElement}function As(t,e,i,r,s){if(!(!t.getBoundingClientRect&&t!==window)){var n,o,a,l,c,h,y;if(t!==window&&t.parentNode&&t!==Bu()?(n=t.getBoundingClientRect(),o=n.top,a=n.left,l=n.bottom,c=n.right,h=n.height,y=n.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,y=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!Ud))do if(s&&s.getBoundingClientRect&&(Bt(s,"transform")!=="none"||i&&Bt(s,"position")!=="static")){var g=s.getBoundingClientRect();o-=g.top+parseInt(Bt(s,"border-top-width")),a-=g.left+parseInt(Bt(s,"border-left-width")),l=o+n.height,c=a+n.width;break}while(s=s.parentNode);if(r&&t!==window){var _=kv(s||t),S=_&&_.a,E=_&&_.d;_&&(o/=E,a/=S,y/=S,h/=E,l=o+h,c=a+y)}return{top:o,left:a,bottom:l,right:c,width:y,height:h}}}function qY(t,e,i){for(var r=yf(t,!0),s=As(t)[e];r;){var n=As(r)[i],o=void 0;if(o=s>=n,!o)return r;if(r===Bu())break;r=yf(r,!1)}return!1}function a1(t,e,i,r){for(var s=0,n=0,o=t.children;n<o.length;){if(o[n].style.display!=="none"&&o[n]!==jt.ghost&&(r||o[n]!==jt.dragged)&&Zl(o[n],i.draggable,t,!1)){if(s===e)return o[n];s++}n++}return null}function Oj(t,e){for(var i=t.lastElementChild;i&&(i===jt.ghost||Bt(i,"display")==="none"||e&&!S3(i,e));)i=i.previousElementSibling;return i||null}function Wa(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==jt.clone&&(!e||S3(t,e))&&i++;return i}function WY(t){var e=0,i=0,r=Bu();if(t)do{var s=kv(t),n=s.a,o=s.d;e+=t.scrollLeft*n,i+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,i]}function sKe(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function yf(t,e){if(!t||!t.getBoundingClientRect)return Bu();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Bt(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Bu();if(r||e)return i;r=!0}}while(i=i.parentNode);return Bu()}function nKe(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function aD(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Z_;function sfe(t,e){return function(){if(!Z_){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),Z_=setTimeout(function(){Z_=void 0},e)}}}function oKe(){clearTimeout(Z_),Z_=void 0}function nfe(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function ofe(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function afe(t,e,i){var r={};return Array.from(t.children).forEach(function(s){var n,o,a,l;if(!(!Zl(s,e.draggable,t,!1)||s.animated||s===i)){var c=As(s);r.left=Math.min((n=r.left)!==null&&n!==void 0?n:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Do="Sortable"+new Date().getTime();function aKe(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(s){if(!(Bt(s,"display")==="none"||s===jt.ghost)){t.push({target:s,rect:As(s)});var n=Xu({},t[t.length-1].rect);if(s.thisAnimationDuration){var o=kv(s,!0);o&&(n.top-=o.f,n.left-=o.e)}s.fromRect=n}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(sKe(t,{target:r}),1)},animateAll:function(r){var s=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var n=!1,o=0;t.forEach(function(a){var l=0,c=a.target,h=c.fromRect,y=As(c),g=c.prevFromRect,_=c.prevToRect,S=a.rect,E=kv(c,!0);E&&(y.top-=E.f,y.left-=E.e),c.toRect=y,c.thisAnimationDuration&&aD(g,y)&&!aD(h,y)&&(S.top-y.top)/(S.left-y.left)===(h.top-y.top)/(h.left-y.left)&&(l=cKe(S,g,_,s.options)),aD(y,h)||(c.prevFromRect=h,c.prevToRect=y,l||(l=s.options.animation),s.animate(c,S,y,l)),l&&(n=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),n?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,s,n,o){if(o){Bt(r,"transition",""),Bt(r,"transform","");var a=kv(this.el),l=a&&a.a,c=a&&a.d,h=(s.left-n.left)/(l||1),y=(s.top-n.top)/(c||1);r.animatingX=!!h,r.animatingY=!!y,Bt(r,"transform","translate3d("+h+"px,"+y+"px,0)"),this.forRepaintDummy=lKe(r),Bt(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Bt(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Bt(r,"transition",""),Bt(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function lKe(t){return t.offsetWidth}function cKe(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var Fy=[],lD={initializeByDefault:!0},n$={mount:function(e){for(var i in lD)lD.hasOwnProperty(i)&&!(i in e)&&(e[i]=lD[i]);Fy.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Fy.push(e)},pluginEvent:function(e,i,r){var s=this;this.eventCanceled=!1,r.cancel=function(){s.eventCanceled=!0};var n=e+"Global";Fy.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][n]&&i[o.pluginName][n](Xu({sortable:i},r)),i.options[o.pluginName]&&i[o.pluginName][e]&&i[o.pluginName][e](Xu({sortable:i},r)))})},initializePlugins:function(e,i,r,s){Fy.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,i,e.options);c.sortable=e,c.options=e.options,e[l]=c,Dd(r,c.defaults)}});for(var n in e.options)if(e.options.hasOwnProperty(n)){var o=this.modifyOption(e,n,e.options[n]);typeof o<"u"&&(e.options[n]=o)}},getEventProperties:function(e,i){var r={};return Fy.forEach(function(s){typeof s.eventProperties=="function"&&Dd(r,s.eventProperties.call(i[s.pluginName],e))}),r},modifyOption:function(e,i,r){var s;return Fy.forEach(function(n){e[n.pluginName]&&n.optionListeners&&typeof n.optionListeners[i]=="function"&&(s=n.optionListeners[i].call(e[n.pluginName],r))}),s}};function uKe(t){var e=t.sortable,i=t.rootEl,r=t.name,s=t.targetEl,n=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,y=t.newDraggableIndex,g=t.originalEvent,_=t.putSortable,S=t.extraEventProperties;if(e=e||i&&i[Do],!!e){var E,C=e.options,M="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ud&&!s$?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||i,E.from=a||i,E.item=s||i,E.clone=n,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=h,E.newDraggableIndex=y,E.originalEvent=g,E.pullMode=_?_.lastPutMode:void 0;var P=Xu(Xu({},S),n$.getEventProperties(r,e));for(var D in P)E[D]=P[D];i&&i.dispatchEvent(E),C[M]&&C[M].call(e,E)}}var hKe=["evt"],go=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.evt,n=iKe(r,hKe);n$.pluginEvent.bind(jt)(e,i,Xu({dragEl:Qe,parentEl:Or,ghostEl:Yt,rootEl:yr,nextEl:Am,lastDownEl:VC,cloneEl:$r,cloneHidden:Xp,dragStarted:n_,putSortable:sn,activeSortable:jt.active,originalEvent:s,oldIndex:dv,oldDraggableIndex:Y_,newIndex:ua,newDraggableIndex:Gp,hideGhostForTarget:hfe,unhideGhostForTarget:dfe,cloneNowHidden:function(){Xp=!0},cloneNowShown:function(){Xp=!1},dispatchSortableEvent:function(a){Jn({sortable:i,name:a,originalEvent:s})}},n))};function Jn(t){uKe(Xu({putSortable:sn,cloneEl:$r,targetEl:Qe,rootEl:yr,oldIndex:dv,oldDraggableIndex:Y_,newIndex:ua,newDraggableIndex:Gp},t))}var Qe,Or,Yt,yr,Am,VC,$r,Xp,dv,ua,Y_,Gp,KE,sn,zg=!1,x3=!1,$3=[],_A,El,cD,uD,QY,JY,n_,zy,X_,K_=!1,eI=!1,GC,bn,hD=[],L8=!1,E3=[],GP=typeof document<"u",tI=Rj,ZY=s$||Ud?"cssFloat":"float",dKe=GP&&!efe&&!Rj&&"draggable"in document.createElement("div"),lfe=(function(){if(GP){if(Ud)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),cfe=function(e,i){var r=Bt(e),s=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),n=a1(e,0,i),o=a1(e,1,i),a=n&&Bt(n),l=o&&Bt(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+As(n).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+As(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&a.float&&a.float!=="none"){var y=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===y)?"vertical":"horizontal"}return n&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=s&&r[ZY]==="none"||o&&r[ZY]==="none"&&c+h>s)?"vertical":"horizontal"},pKe=function(e,i,r){var s=r?e.left:e.top,n=r?e.right:e.bottom,o=r?e.width:e.height,a=r?i.left:i.top,l=r?i.right:i.bottom,c=r?i.width:i.height;return s===a||n===l||s+o/2===a+c/2},fKe=function(e,i){var r;return $3.some(function(s){var n=s[Do].options.emptyInsertThreshold;if(!(!n||Oj(s))){var o=As(s),a=e>=o.left-n&&e<=o.right+n,l=i>=o.top-n&&i<=o.bottom+n;if(a&&l)return r=s}}),r},ufe=function(e){function i(n,o){return function(a,l,c,h){var y=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(n==null&&(o||y))return!0;if(n==null||n===!1)return!1;if(o&&n==="clone")return n;if(typeof n=="function")return i(n(a,l,c,h),o)(a,l,c,h);var g=(o?a:l).options.group.name;return n===!0||typeof n=="string"&&n===g||n.join&&n.indexOf(g)>-1}}var r={},s=e.group;(!s||UC(s)!="object")&&(s={name:s}),r.name=s.name,r.checkPull=i(s.pull,!0),r.checkPut=i(s.put),r.revertClone=s.revertClone,e.group=r},hfe=function(){!lfe&&Yt&&Bt(Yt,"display","none")},dfe=function(){!lfe&&Yt&&Bt(Yt,"display","")};GP&&!efe&&document.addEventListener("click",function(t){if(x3)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),x3=!1,!1},!0);var SA=function(e){if(Qe){e=e.touches?e.touches[0]:e;var i=fKe(e.clientX,e.clientY);if(i){var r={};for(var s in e)e.hasOwnProperty(s)&&(r[s]=e[s]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[Do]._onDragOver(r)}}},AKe=function(e){Qe&&Qe.parentNode[Do]._isOutsideThisEl(e.target)};function jt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Dd({},e),t[Do]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return cfe(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:jt.supportPointer!==!1&&"PointerEvent"in window&&(!J_||Rj),emptyInsertThreshold:5};n$.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);ufe(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:dKe,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?mi(t,"pointerdown",this._onTapStart):(mi(t,"mousedown",this._onTapStart),mi(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(mi(t,"dragover",this),mi(t,"dragenter",this)),$3.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Dd(this,aKe())}jt.prototype={constructor:jt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(zy=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,Qe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,s=this.options,n=s.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=s.filter;if(SKe(r),!Qe&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&J_&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Zl(l,s.draggable,r,!1),!(l&&l.animated)&&VC!==l)){if(dv=Wa(l),Y_=Wa(l,s.draggable),typeof h=="function"){if(h.call(this,e,l,this)){Jn({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),go("filter",i,{evt:e}),n&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(y){if(y=Zl(c,y.trim(),r,!1),y)return Jn({sortable:i,rootEl:y,name:"filter",targetEl:l,fromEl:r,toEl:r}),go("filter",i,{evt:e}),!0}),h)){n&&e.preventDefault();return}s.handle&&!Zl(c,s.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,i,r){var s=this,n=s.el,o=s.options,a=n.ownerDocument,l;if(r&&!Qe&&r.parentNode===n){var c=As(r);if(yr=n,Qe=r,Or=Qe.parentNode,Am=Qe.nextSibling,VC=r,KE=o.group,jt.dragged=Qe,_A={target:Qe,clientX:(i||e).clientX,clientY:(i||e).clientY},QY=_A.clientX-c.left,JY=_A.clientY-c.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,Qe.style["will-change"]="all",l=function(){if(go("delayEnded",s,{evt:e}),jt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!GY&&s.nativeDraggable&&(Qe.draggable=!0),s._triggerDragStart(e,i),Jn({sortable:s,name:"choose",originalEvent:e}),la(Qe,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){rfe(Qe,h.trim(),dD)}),mi(a,"dragover",SA),mi(a,"mousemove",SA),mi(a,"touchmove",SA),o.supportPointer?(mi(a,"pointerup",s._onDrop),!this.nativeDraggable&&mi(a,"pointercancel",s._onDrop)):(mi(a,"mouseup",s._onDrop),mi(a,"touchend",s._onDrop),mi(a,"touchcancel",s._onDrop)),GY&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Qe.draggable=!0),go("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(s$||Ud))){if(jt.eventCanceled){this._onDrop();return}o.supportPointer?(mi(a,"pointerup",s._disableDelayedDrag),mi(a,"pointercancel",s._disableDelayedDrag)):(mi(a,"mouseup",s._disableDelayedDrag),mi(a,"touchend",s._disableDelayedDrag),mi(a,"touchcancel",s._disableDelayedDrag)),mi(a,"mousemove",s._delayedDragTouchMoveHandler),mi(a,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&mi(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Qe&&dD(Qe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;fi(e,"mouseup",this._disableDelayedDrag),fi(e,"touchend",this._disableDelayedDrag),fi(e,"touchcancel",this._disableDelayedDrag),fi(e,"pointerup",this._disableDelayedDrag),fi(e,"pointercancel",this._disableDelayedDrag),fi(e,"mousemove",this._delayedDragTouchMoveHandler),fi(e,"touchmove",this._delayedDragTouchMoveHandler),fi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?mi(document,"pointermove",this._onTouchMove):i?mi(document,"touchmove",this._onTouchMove):mi(document,"mousemove",this._onTouchMove):(mi(Qe,"dragend",this),mi(yr,"dragstart",this._onDragStart));try{document.selection?HC(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(zg=!1,yr&&Qe){go("dragStarted",this,{evt:i}),this.nativeDraggable&&mi(document,"dragover",AKe);var r=this.options;!e&&la(Qe,r.dragClass,!1),la(Qe,r.ghostClass,!0),jt.active=this,e&&this._appendGhost(),Jn({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(El){this._lastX=El.clientX,this._lastY=El.clientY,hfe();for(var e=document.elementFromPoint(El.clientX,El.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(El.clientX,El.clientY),e!==i);)i=e;if(Qe.parentNode[Do]._isOutsideThisEl(e),i)do{if(i[Do]){var r=void 0;if(r=i[Do]._onDragOver({clientX:El.clientX,clientY:El.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=ife(i));dfe()}},_onTouchMove:function(e){if(_A){var i=this.options,r=i.fallbackTolerance,s=i.fallbackOffset,n=e.touches?e.touches[0]:e,o=Yt&&kv(Yt,!0),a=Yt&&o&&o.a,l=Yt&&o&&o.d,c=tI&&bn&&WY(bn),h=(n.clientX-_A.clientX+s.x)/(a||1)+(c?c[0]-hD[0]:0)/(a||1),y=(n.clientY-_A.clientY+s.y)/(l||1)+(c?c[1]-hD[1]:0)/(l||1);if(!jt.active&&!zg){if(r&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Yt){o?(o.e+=h-(cD||0),o.f+=y-(uD||0)):o={a:1,b:0,c:0,d:1,e:h,f:y};var g="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Bt(Yt,"webkitTransform",g),Bt(Yt,"mozTransform",g),Bt(Yt,"msTransform",g),Bt(Yt,"transform",g),cD=h,uD=y,El=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Yt){var e=this.options.fallbackOnBody?document.body:yr,i=As(Qe,!0,tI,!0,e),r=this.options;if(tI){for(bn=e;Bt(bn,"position")==="static"&&Bt(bn,"transform")==="none"&&bn!==document;)bn=bn.parentNode;bn!==document.body&&bn!==document.documentElement?(bn===document&&(bn=Bu()),i.top+=bn.scrollTop,i.left+=bn.scrollLeft):bn=Bu(),hD=WY(bn)}Yt=Qe.cloneNode(!0),la(Yt,r.ghostClass,!1),la(Yt,r.fallbackClass,!0),la(Yt,r.dragClass,!0),Bt(Yt,"transition",""),Bt(Yt,"transform",""),Bt(Yt,"box-sizing","border-box"),Bt(Yt,"margin",0),Bt(Yt,"top",i.top),Bt(Yt,"left",i.left),Bt(Yt,"width",i.width),Bt(Yt,"height",i.height),Bt(Yt,"opacity","0.8"),Bt(Yt,"position",tI?"absolute":"fixed"),Bt(Yt,"zIndex","100000"),Bt(Yt,"pointerEvents","none"),jt.ghost=Yt,e.appendChild(Yt),Bt(Yt,"transform-origin",QY/parseInt(Yt.style.width)*100+"% "+JY/parseInt(Yt.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,s=e.dataTransfer,n=r.options;if(go("dragStart",this,{evt:e}),jt.eventCanceled){this._onDrop();return}go("setupClone",this),jt.eventCanceled||($r=ofe(Qe),$r.removeAttribute("id"),$r.draggable=!1,$r.style["will-change"]="",this._hideClone(),la($r,this.options.chosenClass,!1),jt.clone=$r),r.cloneId=HC(function(){go("clone",r),!jt.eventCanceled&&(r.options.removeCloneOnHide||yr.insertBefore($r,Qe),r._hideClone(),Jn({sortable:r,name:"clone"}))}),!i&&la(Qe,n.dragClass,!0),i?(x3=!0,r._loopId=setInterval(r._emulateDragOver,50)):(fi(document,"mouseup",r._onDrop),fi(document,"touchend",r._onDrop),fi(document,"touchcancel",r._onDrop),s&&(s.effectAllowed="move",n.setData&&n.setData.call(r,s,Qe)),mi(document,"drop",r),Bt(Qe,"transform","translateZ(0)")),zg=!0,r._dragStartId=HC(r._dragStarted.bind(r,i,e)),mi(document,"selectstart",r),n_=!0,window.getSelection().removeAllRanges(),J_&&Bt(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,s,n,o,a=this.options,l=a.group,c=jt.active,h=KE===l,y=a.sort,g=sn||c,_,S=this,E=!1;if(L8)return;function C(De,Ke){go(De,S,Xu({evt:e,isOwner:h,axis:_?"vertical":"horizontal",revert:o,dragRect:s,targetRect:n,canSort:y,fromSortable:g,target:r,completed:P,onMove:function(Pt,Zt){return iI(yr,i,Qe,s,Pt,As(Pt),e,Zt)},changed:D},Ke))}function M(){C("dragOverAnimationCapture"),S.captureAnimationState(),S!==g&&g.captureAnimationState()}function P(De){return C("dragOverCompleted",{insertion:De}),De&&(h?c._hideClone():c._showClone(S),S!==g&&(la(Qe,sn?sn.options.ghostClass:c.options.ghostClass,!1),la(Qe,a.ghostClass,!0)),sn!==S&&S!==jt.active?sn=S:S===jt.active&&sn&&(sn=null),g===S&&(S._ignoreWhileAnimating=r),S.animateAll(function(){C("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(r===Qe&&!Qe.animated||r===i&&!r.animated)&&(zy=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Qe.parentNode[Do]._isOutsideThisEl(e.target),!De&&SA(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function D(){ua=Wa(Qe),Gp=Wa(Qe,a.draggable),Jn({sortable:S,name:"change",toEl:i,newIndex:ua,newDraggableIndex:Gp,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Zl(r,a.draggable,i,!0),C("dragOver"),jt.eventCanceled)return E;if(Qe.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||S._ignoreWhileAnimating===r)return P(!1);if(x3=!1,c&&!a.disabled&&(h?y||(o=Or!==yr):sn===this||(this.lastPutMode=KE.checkPull(this,c,Qe,e))&&l.checkPut(this,c,Qe,e))){if(_=this._getDirection(e,r)==="vertical",s=As(Qe),C("dragOverValid"),jt.eventCanceled)return E;if(o)return Or=yr,M(),this._hideClone(),C("revert"),jt.eventCanceled||(Am?yr.insertBefore(Qe,Am):yr.appendChild(Qe)),P(!0);var F=Oj(i,a.draggable);if(!F||vKe(e,_,this)&&!F.animated){if(F===Qe)return P(!1);if(F&&i===e.target&&(r=F),r&&(n=As(r)),iI(yr,i,Qe,s,r,n,e,!!r)!==!1)return M(),F&&F.nextSibling?i.insertBefore(Qe,F.nextSibling):i.appendChild(Qe),Or=i,D(),P(!0)}else if(F&&gKe(e,_,this)){var U=a1(i,0,a,!0);if(U===Qe)return P(!1);if(r=U,n=As(r),iI(yr,i,Qe,s,r,n,e,!1)!==!1)return M(),i.insertBefore(Qe,U),Or=i,D(),P(!0)}else if(r.parentNode===i){n=As(r);var G=0,Q,W=Qe.parentNode!==i,X=!pKe(Qe.animated&&Qe.toRect||s,r.animated&&r.toRect||n,_),K=_?"top":"left",de=qY(r,"top","top")||qY(Qe,"top","top"),ye=de?de.scrollTop:void 0;zy!==r&&(Q=n[K],K_=!1,eI=!X&&a.invertSwap||W),G=bKe(e,r,n,_,X?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,eI,zy===r);var xe;if(G!==0){var ee=Wa(Qe);do ee-=G,xe=Or.children[ee];while(xe&&(Bt(xe,"display")==="none"||xe===Yt))}if(G===0||xe===r)return P(!1);zy=r,X_=G;var le=r.nextElementSibling,Te=!1;Te=G===1;var ke=iI(yr,i,Qe,s,r,n,e,Te);if(ke!==!1)return(ke===1||ke===-1)&&(Te=ke===1),L8=!0,setTimeout(yKe,30),M(),Te&&!le?i.appendChild(Qe):r.parentNode.insertBefore(Qe,Te?le:r),de&&nfe(de,0,ye-de.scrollTop),Or=Qe.parentNode,Q!==void 0&&!eI&&(GC=Math.abs(Q-As(r)[K])),D(),P(!0)}if(i.contains(Qe))return P(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){fi(document,"mousemove",this._onTouchMove),fi(document,"touchmove",this._onTouchMove),fi(document,"pointermove",this._onTouchMove),fi(document,"dragover",SA),fi(document,"mousemove",SA),fi(document,"touchmove",SA)},_offUpEvents:function(){var e=this.el.ownerDocument;fi(e,"mouseup",this._onDrop),fi(e,"touchend",this._onDrop),fi(e,"pointerup",this._onDrop),fi(e,"pointercancel",this._onDrop),fi(e,"touchcancel",this._onDrop),fi(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(ua=Wa(Qe),Gp=Wa(Qe,r.draggable),go("drop",this,{evt:e}),Or=Qe&&Qe.parentNode,ua=Wa(Qe),Gp=Wa(Qe,r.draggable),jt.eventCanceled){this._nulling();return}zg=!1,eI=!1,K_=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),R8(this.cloneId),R8(this._dragStartId),this.nativeDraggable&&(fi(document,"drop",this),fi(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),J_&&Bt(document.body,"user-select",""),Bt(Qe,"transform",""),e&&(n_&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Yt&&Yt.parentNode&&Yt.parentNode.removeChild(Yt),(yr===Or||sn&&sn.lastPutMode!=="clone")&&$r&&$r.parentNode&&$r.parentNode.removeChild($r),Qe&&(this.nativeDraggable&&fi(Qe,"dragend",this),dD(Qe),Qe.style["will-change"]="",n_&&!zg&&la(Qe,sn?sn.options.ghostClass:this.options.ghostClass,!1),la(Qe,this.options.chosenClass,!1),Jn({sortable:this,name:"unchoose",toEl:Or,newIndex:null,newDraggableIndex:null,originalEvent:e}),yr!==Or?(ua>=0&&(Jn({rootEl:Or,name:"add",toEl:Or,fromEl:yr,originalEvent:e}),Jn({sortable:this,name:"remove",toEl:Or,originalEvent:e}),Jn({rootEl:Or,name:"sort",toEl:Or,fromEl:yr,originalEvent:e}),Jn({sortable:this,name:"sort",toEl:Or,originalEvent:e})),sn&&sn.save()):ua!==dv&&ua>=0&&(Jn({sortable:this,name:"update",toEl:Or,originalEvent:e}),Jn({sortable:this,name:"sort",toEl:Or,originalEvent:e})),jt.active&&((ua==null||ua===-1)&&(ua=dv,Gp=Y_),Jn({sortable:this,name:"end",toEl:Or,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){go("nulling",this),yr=Qe=Or=Yt=Am=$r=VC=Xp=_A=El=n_=ua=Gp=dv=Y_=zy=X_=sn=KE=jt.dragged=jt.ghost=jt.clone=jt.active=null,E3.forEach(function(e){e.checked=!0}),E3.length=cD=uD=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Qe&&(this._onDragOver(e),mKe(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,s=0,n=r.length,o=this.options;s<n;s++)i=r[s],Zl(i,o.draggable,this.el,!1)&&e.push(i.getAttribute(o.dataIdAttr)||_Ke(i));return e},sort:function(e,i){var r={},s=this.el;this.toArray().forEach(function(n,o){var a=s.children[o];Zl(a,this.options.draggable,s,!1)&&(r[n]=a)},this),i&&this.captureAnimationState(),e.forEach(function(n){r[n]&&(s.removeChild(r[n]),s.appendChild(r[n]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Zl(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var s=n$.modifyOption(this,e,i);typeof s<"u"?r[e]=s:r[e]=i,e==="group"&&ufe(r)},destroy:function(){go("destroy",this);var e=this.el;e[Do]=null,fi(e,"mousedown",this._onTapStart),fi(e,"touchstart",this._onTapStart),fi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(fi(e,"dragover",this),fi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),$3.splice($3.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Xp){if(go("hideClone",this),jt.eventCanceled)return;Bt($r,"display","none"),this.options.removeCloneOnHide&&$r.parentNode&&$r.parentNode.removeChild($r),Xp=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Xp){if(go("showClone",this),jt.eventCanceled)return;Qe.parentNode==yr&&!this.options.group.revertClone?yr.insertBefore($r,Qe):Am?yr.insertBefore($r,Am):yr.appendChild($r),this.options.group.revertClone&&this.animate(Qe,$r),Bt($r,"display",""),Xp=!1}}};function mKe(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function iI(t,e,i,r,s,n,o,a){var l,c=t[Do],h=c.options.onMove,y;return window.CustomEvent&&!Ud&&!s$?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=r,l.related=s||e,l.relatedRect=n||As(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),h&&(y=h.call(c,l,o)),y}function dD(t){t.draggable=!1}function yKe(){L8=!1}function gKe(t,e,i){var r=As(a1(i.el,0,i.options,!0)),s=afe(i.el,i.options,Yt),n=10;return e?t.clientX<s.left-n||t.clientY<r.top&&t.clientX<r.right:t.clientY<s.top-n||t.clientY<r.bottom&&t.clientX<r.left}function vKe(t,e,i){var r=As(Oj(i.el,i.options.draggable)),s=afe(i.el,i.options,Yt),n=10;return e?t.clientX>s.right+n||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>s.bottom+n||t.clientX>r.right&&t.clientY>r.top}function bKe(t,e,i,r,s,n,o,a){var l=r?t.clientY:t.clientX,c=r?i.height:i.width,h=r?i.top:i.left,y=r?i.bottom:i.right,g=!1;if(!o){if(a&&GC<c*s){if(!K_&&(X_===1?l>h+c*n/2:l<y-c*n/2)&&(K_=!0),K_)g=!0;else if(X_===1?l<h+GC:l>y-GC)return-X_}else if(l>h+c*(1-s)/2&&l<y-c*(1-s)/2)return wKe(e)}return g=g||o,g&&(l<h+c*n/2||l>y-c*n/2)?l>h+c/2?1:-1:0}function wKe(t){return Wa(Qe)<Wa(t)?1:-1}function _Ke(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function SKe(t){E3.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&E3.push(r)}}function HC(t){return setTimeout(t,0)}function R8(t){return clearTimeout(t)}GP&&mi(document,"touchmove",function(t){(jt.active||zg)&&t.cancelable&&t.preventDefault()});jt.utils={on:mi,off:fi,css:Bt,find:rfe,is:function(e,i){return!!Zl(e,i,e,!1)},extend:nKe,throttle:sfe,closest:Zl,toggleClass:la,clone:ofe,index:Wa,nextTick:HC,cancelNextTick:R8,detectDirection:cfe,getChild:a1,expando:Do};jt.get=function(t){return t[Do]};jt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(jt.utils=Xu(Xu({},jt.utils),r.utils)),n$.mount(r)})};jt.create=function(t,e){return new jt(t,e)};jt.version=rKe;var ds=[],o_,O8,D8=!1,pD,fD,I3,a_;function xKe(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?mi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?mi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?mi(document,"touchmove",this._handleFallbackAutoScroll):mi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?fi(document,"dragover",this._handleAutoScroll):(fi(document,"pointermove",this._handleFallbackAutoScroll),fi(document,"touchmove",this._handleFallbackAutoScroll),fi(document,"mousemove",this._handleFallbackAutoScroll)),YY(),qC(),oKe()},nulling:function(){I3=O8=o_=D8=a_=pD=fD=null,ds.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var s=this,n=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,a=document.elementFromPoint(n,o);if(I3=i,r||this.options.forceAutoScrollFallback||s$||Ud||J_){AD(i,this.options,a,r);var l=yf(a,!0);D8&&(!a_||n!==pD||o!==fD)&&(a_&&YY(),a_=setInterval(function(){var c=yf(document.elementFromPoint(n,o),!0);c!==l&&(l=c,qC()),AD(i,s.options,c,r)},10),pD=n,fD=o)}else{if(!this.options.bubbleScroll||yf(a,!0)===Bu()){qC();return}AD(i,this.options,yf(a,!1),!1)}}},Dd(t,{pluginName:"scroll",initializeByDefault:!0})}function qC(){ds.forEach(function(t){clearInterval(t.pid)}),ds=[]}function YY(){clearInterval(a_)}var AD=sfe(function(t,e,i,r){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Bu(),c=!1,h;O8!==i&&(O8=i,qC(),o_=e.scroll,h=e.scrollFn,o_===!0&&(o_=yf(i,!0)));var y=0,g=o_;do{var _=g,S=As(_),E=S.top,C=S.bottom,M=S.left,P=S.right,D=S.width,F=S.height,U=void 0,G=void 0,Q=_.scrollWidth,W=_.scrollHeight,X=Bt(_),K=_.scrollLeft,de=_.scrollTop;_===l?(U=D<Q&&(X.overflowX==="auto"||X.overflowX==="scroll"||X.overflowX==="visible"),G=F<W&&(X.overflowY==="auto"||X.overflowY==="scroll"||X.overflowY==="visible")):(U=D<Q&&(X.overflowX==="auto"||X.overflowX==="scroll"),G=F<W&&(X.overflowY==="auto"||X.overflowY==="scroll"));var ye=U&&(Math.abs(P-s)<=o&&K+D<Q)-(Math.abs(M-s)<=o&&!!K),xe=G&&(Math.abs(C-n)<=o&&de+F<W)-(Math.abs(E-n)<=o&&!!de);if(!ds[y])for(var ee=0;ee<=y;ee++)ds[ee]||(ds[ee]={});(ds[y].vx!=ye||ds[y].vy!=xe||ds[y].el!==_)&&(ds[y].el=_,ds[y].vx=ye,ds[y].vy=xe,clearInterval(ds[y].pid),(ye!=0||xe!=0)&&(c=!0,ds[y].pid=setInterval((function(){r&&this.layer===0&&jt.active._onTouchMove(I3);var le=ds[this.layer].vy?ds[this.layer].vy*a:0,Te=ds[this.layer].vx?ds[this.layer].vx*a:0;typeof h=="function"&&h.call(jt.dragged.parentNode[Do],Te,le,t,I3,ds[this.layer].el)!=="continue"||nfe(ds[this.layer].el,Te,le)}).bind({layer:y}),24))),y++}while(e.bubbleScroll&&g!==l&&(g=yf(g,!1)));D8=c}},30),pfe=function(e){var i=e.originalEvent,r=e.putSortable,s=e.dragEl,n=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(i){var c=r||n;a();var h=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,y=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(y)&&(o("spill"),this.onSpill({dragEl:s,putSortable:r}))}};function Dj(){}Dj.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var s=a1(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:pfe};Dd(Dj,{pluginName:"revertOnSpill"});function Nj(){}Nj.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,s=r||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:pfe};Dd(Nj,{pluginName:"removeOnSpill"});jt.mount(new xKe);jt.mount(Nj,Dj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const HP=new Set,$Ke={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function EKe(t){if(Afe(t))return;ffe(t),HP.add(t);const e="id",{group:i,handleSelector:r,dragSelector:s,sortDisabled:n}=t;t.sortable=jt.create(t.el,{dataIdAttr:e,swapThreshold:.5,...$Ke,...!!s&&{draggable:s},...!!i&&{sort:!n,group:{name:i,...!!t.canPull&&{pull:(o,a,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPull({toEl:o.el,fromEl:a.el,dragEl:l,newIndex:c,oldIndex:h})},...!!t.canPut&&{put:(o,a,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPut({toEl:o.el,fromEl:a.el,dragEl:l,newIndex:c,oldIndex:h})}}},onMove:({from:o,dragged:a,to:l,related:c})=>{t.onDragMove&&t.onDragMove({fromEl:o,dragEl:a,toEl:l,relatedEl:c})},handle:r,filter:`${r}[disabled]`,onStart:({from:o,item:a,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{N8.active=!0,IKe(),t.onDragStart({fromEl:o,dragEl:a,toEl:l,newIndex:c,oldIndex:h})},onEnd:({from:o,item:a,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{N8.active=!1,CKe(),t.onDragEnd({fromEl:o,dragEl:a,toEl:l,newIndex:c,oldIndex:h})},onSort:({from:o,item:a,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{t.onDragSort({fromEl:o,dragEl:a,toEl:l,newIndex:c,oldIndex:h})}})}function ffe(t){var e;Afe(t)||(HP.delete(t),(e=t.sortable)==null||e.destroy(),t.sortable=null)}const N8={active:!1};function Afe(t){return t.dragEnabled&&N8.active}function IKe(){Array.from(HP).forEach(t=>t.onGlobalDragStart())}function CKe(){Array.from(HP).forEach(t=>t.onGlobalDragEnd())}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ah={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text",containerHeight:"container-height"},mD={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},TKe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{block-size:100%}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,MKe=`${_3}, ${wd}`,Z3=class Z3 extends rr{constructor(){super(),this.dragSelector=wd,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=hl("mutation",()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=Lj()(this),this.updateListItemsDebounced=jP(this.updateListItems,RB.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=$a({blocking:!0}),this.focusSetter=Ho()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=Ye({cancelable:!1}),this.calciteListChange=Ye({cancelable:!1}),this.calciteListDragEnd=Ye({cancelable:!1}),this.calciteListDragStart=Ye({cancelable:!1}),this.calciteListFilter=Ye({cancelable:!1}),this.calciteListMoveHalt=Ye({cancelable:!1}),this.calciteListOrderChange=Ye({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteListItemSortHandleBeforeOpen",this.updateListItemsDebounced),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteSortHandleAdd",this.handleSortAdd),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(e){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(i=>i.active),e)}emitOrderChangeEvent(e){this.calciteListOrderChange.emit(e)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has("filterText")||e.has("filterProps")||e.has("filterPredicate"))&&this.performFilter(),(e.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||e.has("group")||e.has("sortDisabled")&&(this.hasUpdated||this.sortDisabled!==!1)||e.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||e.has("displayMode")&&this.hasUpdated||e.has("scale")&&this.hasUpdated||e.has("canPull")&&this.hasUpdated||e.has("canPut")&&this.hasUpdated||e.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){Ea(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),ffe(this)}updateListItems(){this.updateGroupItems();const{selectionAppearance:e,selectionMode:i,interactionMode:r,dragEnabled:s,el:n,filterEl:o,displayMode:a,scale:l,sortDisabled:c,sortHandleMenuItems:h}=this,y=Array.from(this.el.querySelectorAll(wd)),g=n,_=Array.from(g.children).filter(XE);if(y.forEach(S=>{S.scale=l,S.selectionAppearance=e,S.selectionMode=i,S.interactionMode=r,S.closest(Q_)===n&&(S.moveToItems=h.filter(E=>this.validateSortMenuItem({type:"move",fromEl:g,toEl:E.element,dragEl:S,newIndex:0,oldIndex:_.indexOf(S)})),S.addToItems=this.sortHandleMenuItems.filter(E=>this.validateSortMenuItem({type:"add",fromEl:g,toEl:E.element,dragEl:S,newIndex:0,oldIndex:_.indexOf(S)})),S.dragHandle=s,S.displayMode=a,S.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=y,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),o&&(o.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(S=>!S.closed&&!S.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(S=>!S.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();const{focusableItems:i}=this,s=i.findIndex(n=>n.active)-1;i[s]&&this.focusRow(i[s])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r}=this;r.forEach(s=>{s.active=s===i})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleReorder(e))}handleSortAdd(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleAdd(e))}handleSortMove(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleMove(e))}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r,selectionMode:s}=this;i.selected&&(s==="single"||s==="single-persist")&&r.forEach(n=>n.selected=n===i),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();const{target:i,detail:r}=e,{focusableItems:s,lastSelectedInfo:n}=this,o=i;if(r.selectMultiple&&n){const a=s.indexOf(o),l=s.indexOf(n.selectedItem),c=Math.min(l,a),h=Math.max(l,a);s.slice(c,h+1).forEach(y=>y.selected=n.selected)}else this.lastSelectedInfo={selectedItem:o,selected:o.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){var e;(e=this.mutationObserver)==null||e.disconnect()}setUpSorting(){const{dragEnabled:e,defaultSlotEl:i}=this;e&&(i&&XXe(i),EKe(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(e)}setParentList(){var e;this.parentListEl=(e=this.el.parentElement)==null?void 0:e.closest(Q_)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(_3))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=qr(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=qr(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=qr(e)}setActiveListItem(){const{focusableItems:e}=this;e.some(i=>i.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(i=>i.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:i,visibleParents:r}){const s=!r.has(e)&&!i.includes(e);e.filterHidden=s;const n=e.parentElement.closest(MKe);n&&(s||r.add(n),this.filterElements({el:n,filteredItems:i,visibleParents:r}))}allParentListItemsExpanded(e){var r;const i=(r=e.parentElement)==null?void 0:r.closest(wd);if(i){if(!i.expanded)return!1}else return!0;return this.allParentListItemsExpanded(i)}borderItems(){const e=this.visibleItems.filter(i=>!i.filterHidden&&this.allParentListItemsExpanded(i));e.forEach(i=>i.bordered=i!==e[e.length-1])}updateFilteredItems(){const{visibleItems:e,filteredData:i,filterText:r,filterPredicate:s}=this,n=e==null?void 0:e.filter(l=>e.every(c=>c===l||!l.contains(c))),o=s?e.filter(s):r?i.map(l=>l.el):e||[],a=new WeakSet;n.forEach(l=>this.filterElements({el:l,filteredItems:o,visibleParents:a})),this.filteredItems=o,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){var e;await((e=this.filterEl)==null?void 0:e.filter(this.filterText)),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:e,filterText:i,effectiveFilterProps:r}=this;e&&(e.value=i,e.filterProps=r,this.filterAndUpdateData())}setDefaultSlotEl(e){this.defaultSlotEl=e}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();const{value:i}=e.currentTarget;this.filterText=i,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(r=>r.contains(e)).map(r=>r.heading)}updateGroupItems(){const{el:e,group:i,scale:r}=this,s=Zx(e),n=i?Array.from(s.querySelectorAll(`${Q_}[group="${i}"]`)).filter(a=>!a.disabled&&a.dragEnabled):[];this.sortHandleMenuItems=n.map(a=>({element:a,label:a.label??a.id,id:Kf()})),Array.from(this.el.querySelectorAll(_3)).forEach(a=>{a.scale=r})}focusRow(e){const{focusableItems:i}=this;e&&(i.forEach(r=>r.active=r===e),e.setFocus())}isNavigable(e){var r;const i=(r=e.parentElement)==null?void 0:r.closest(wd);return i?i.expanded&&this.isNavigable(i):!0}handleListKeydown(e){if(e.defaultPrevented||this.parentListEl)return;const{key:i}=e,r=this.focusableItems.filter(n=>this.isNavigable(n)),s=r.findIndex(n=>n.active);if(i==="ArrowDown"){e.preventDefault();const n=e.target===this.filterEl?0:s+1;r[n]&&this.focusRow(r[n])}else if(i==="ArrowUp"){if(e.preventDefault(),s===0&&this.filterEnabled){this.filterEl.setFocus();return}const n=s-1;r[n]&&this.focusRow(r[n])}else if(i==="Home"){e.preventDefault();const n=r[0];n&&this.focusRow(n)}else if(i==="End"){e.preventDefault();const n=r[r.length-1];n&&this.focusRow(n)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}validateSortMenuItem({fromEl:e,toEl:i,dragEl:r,newIndex:s,oldIndex:n,type:o}){var c,h;if(!e||!i||i===e||r.contains(i))return!1;const a=((c=e.canPull)==null?void 0:c.call(e,{toEl:i,fromEl:e,dragEl:r,newIndex:s,oldIndex:n}))??!0,l=((h=i.canPut)==null?void 0:h.call(i,{toEl:i,fromEl:e,dragEl:r,newIndex:s,oldIndex:n}))??!0;return(o==="add"?a==="clone":a===!0)&&l}handleAdd(e){const{addTo:i}=e.detail,r=e.target,s=r==null?void 0:r.parentElement,n=i.element,a=Array.from(s.children).filter(XE).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"add",fromEl:s,toEl:n,dragEl:r,newIndex:l,oldIndex:a}))return;r.sortHandleOpen=!1,this.disconnectObserver();const c=r.cloneNode();n.prepend(c),P8(r),this.updateListItemsDebounced(),this.connectObserver();const h={dragEl:r,fromEl:s,toEl:n,newIndex:l,oldIndex:a};this.calciteListOrderChange.emit(h),n.emitOrderChangeEvent(h)}handleMove(e){const{moveTo:i}=e.detail,r=e.target,s=r==null?void 0:r.parentElement,n=i.element,a=Array.from(s.children).filter(XE).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"move",fromEl:s,toEl:n,dragEl:r,newIndex:l,oldIndex:a}))return;r.sortHandleOpen=!1,this.disconnectObserver(),n.prepend(r),P8(r),this.updateListItemsDebounced(),this.connectObserver();const c={dragEl:r,fromEl:s,toEl:n,newIndex:l,oldIndex:a};this.calciteListOrderChange.emit(c),n.emitOrderChangeEvent(c)}handleReorder(e){const{reorder:i}=e.detail,r=e.target,s=r==null?void 0:r.parentElement;if(!s)return;r.sortHandleOpen=!1;const n=Array.from(s.children).filter(XE),o=n.length-1,a=n.indexOf(r);let l=a;switch(i){case"top":l=0;break;case"bottom":l=o;break;case"up":l=a===0?0:a-1;break;case"down":l=a===o?o:a+1;break}this.disconnectObserver();const c=i==="up"||i==="top"?n[l]:n[l].nextSibling;s.insertBefore(r,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:r,fromEl:s,toEl:s,newIndex:l,oldIndex:a})}render(){const{loading:e,label:i,disabled:r,dataForFilter:s,filterEnabled:n,filterPlaceholder:o,filterText:a,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:h,effectiveFilterProps:y}=this;return Ia({disabled:this.disabled,children:Se`<div class=${$e({[Ah.container]:!0,[Ah.containerHeight]:this.listItems.length<1&&e})}>${this.dragEnabled?Se`<span aria-live=assertive class=${$e(Ah.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${e?Se`<calcite-scrim class=${$e(Ah.scrim)} .loading=${e}></calcite-scrim>`:null}<div .ariaBusy=${e} .ariaLabel=${i||""} class=${$e(Ah.table)} @keydown=${this.handleListKeydown} role=treegrid>${n||c||h?Se`<div class=${$e(Ah.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${$e(Ah.stack)}><slot name=${mD.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${hv.actionsStart}></slot><calcite-filter .ariaLabel=${o} .disabled=${r} .filterProps=${y} .items=${s} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${o} .scale=${this.scale} .value=${a} ${ai(this.setFilterEl)}></calcite-filter><slot name=${mD.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${hv.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${$e(Ah.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${ai(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${mD.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:e,filteredItems:i,parentListEl:r,messages:{_lang:s},numberingSystem:n}=this;return Ga.numberFormatOptions={locale:s,numberingSystem:n},r?null:Se`<div aria-live=polite class=${$e(Ah.assistiveText)}>${this.hasActiveFilter?oi("aria-filter-enabled",Se`<div>${e.filterEnabled}</div>`):null}${oi("aria-item-count",Se`<div>${e.total.replace("{count}",Ga.localize(i.length.toString()))}</div>`)}${i.length?oi("aria-item-list",Se`<ol>${i.map(o=>Se`<li>${o.label}</li>`)}</ol>`):null}</div>`}};Z3.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]},Z3.styles=TKe;let C3=Z3;Sr("calcite-list",C3);const $At=Object.freeze(Object.defineProperty({__proto__:null,List:C3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const pi={actionsEnd:"actions-end",actionsStart:"actions-start",description:"description",close:"close",container:"container",containerHover:"container--hover",containerBorder:"container--border",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",content:"content",contentBottom:"content-bottom",contentContainer:"content-container",contentContainerHasCenterContent:"content-container--has-center-content",contentContainerSelectable:"content-container--selectable",contentContainerUnavailable:"content-container--unavailable",contentContainerWrapper:"content-container-wrapper",contentContainerWrapperBordered:"content-container-wrapper--bordered",contentEnd:"content-end",contentStart:"content-start",customContent:"custom-content",expandedContainer:"expanded-container",dragContainer:"drag-container",gridCell:"grid-cell",icon:"icon",nestedContainer:"nested-container",nestedContainerExpanded:"nested-container--expanded",label:"label",row:"row",selectionContainer:"selection-container",selectionContainerSingle:"selection-container--single",wrapper:"wrapper",wrapperBordered:"wrapper--bordered"},By={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},kKe=0,mh={selectedMultiple:"check-square-f",selectedSingle:"circle-inset-large",unselectedMultiple:"square",unselectedSingle:"circle",collapsedLTR:"chevron-right",collapsedRTL:"chevron-left",open:"chevron-down",blank:"blank",close:"x"},XY="data-test-active";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const KY={container:"container",heading:"heading"},PKe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]){display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{margin:0;display:flex;flex:1 1 0%;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1));color:var(--calcite-list-color, var(--calcite-color-text-2))}.heading{font-weight:var(--calcite-font-weight-medium)}:host([scale=s]) .container{padding-inline:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-sm) var(--calcite-spacing-xxs)}:host([scale=s]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-inline:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-lg) var(--calcite-spacing-sm)}:host([scale=m]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-inline:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md);line-height:var(--calcite-font-line-height-fixed-lg);padding-block:var(--calcite-spacing-xl) var(--calcite-spacing-sm-plus, .625rem)}:host([scale=l]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md-plus, .875rem)}.heading{padding:0}:host([hidden]){display:none}[hidden]{display:none}`,Y3=class Y3 extends rr{constructor(){super(...arguments),this.disabled=!1,this.filterHidden=!1,this.scale="m",this.calciteInternalListItemGroupDefaultSlotChange=Ye({cancelable:!1})}updated(){Ea(this)}handleDefaultSlotChange(){this.calciteInternalListItemGroupDefaultSlotChange.emit()}render(){const{disabled:e,heading:i}=this;return Ia({disabled:e,children:Se`<div class=${$e(KY.container)} role=row><div .ariaColSpan=${kKe} class=${$e(KY.heading)} role=cell>${i}</div></div><slot @slotchange=${this.handleDefaultSlotChange}></slot>`})}};Y3.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],heading:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},Y3.styles=PKe;let T3=Y3;Sr("calcite-list-item-group",T3);const EAt=Object.freeze(Object.defineProperty({__proto__:null,ListItemGroup:T3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const LKe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]),:host([closed]){display:none}.wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{box-sizing:border-box;display:flex;flex:1 1 0%;overflow:hidden;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container *{box-sizing:border-box}.container--hover:hover{cursor:pointer;background-color:var(--calcite-list-background-color-hover, var(--calcite-color-foreground-2))}.container:active{background-color:var(--calcite-list-background-color-press, var(--calcite-color-foreground-3))}.container--border{position:relative}.container--border:before{position:absolute;inline-size:var(--calcite-border-width-lg);inset-block:0;inset-inline-start:0;background-color:transparent;content:""}.container--border-selected:before{background-color:var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.container--border-selected:focus{box-shadow:inset var(--calcite-border-width-lg) 0 0 0 var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.nested-container{display:none;flex-direction:column;border-width:0px;border-style:solid;border-color:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3));margin-inline-start:var(--calcite-list-spacing-indent, 1.5rem)}.nested-container--expanded{display:flex}.selection-container{display:flex;padding-block:0px;color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host(:not([disabled]):not([selected])) .container:hover .selection-container--single{color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host([selected]:hover) .selection-container,:host([selected]:hover) .selection-container--single,:host([selected]) .selection-container{color:var(--calcite-list-icon-color, var(--calcite-color-brand))}.content-container-wrapper{display:flex;flex:1 1 auto}.content-container-wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}.content-container{display:flex;flex:1 1 auto;-webkit-user-select:none;user-select:none;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-list-content-text-color, var(--calcite-color-text-2))}.content-container--unavailable{opacity:var(--calcite-opacity-disabled)}.row,.grid-cell{outline-color:transparent}.row{position:relative}.row:focus,.grid-cell:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content,.custom-content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;line-height:var(--calcite-font-line-height-relative-snug)}.label{color:var(--calcite-list-label-text-color, var(--calcite-color-text-1))}.description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-3))}.icon{align-self:center;color:var(--calcite-list-icon-color, var(--calcite-color-text-3))}.icon:hover,.icon:active{color:var(--calcite-color-text-1)}:host([display-mode=flat][drag-handle]:is([selection-mode=none],[selection-appearance=border])) .drag-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:32px;padding-block:var(--calcite-spacing-xxs);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content,:host([scale=s]) .custom-content,:host([scale=s]) .label{font-size:var(--calcite-font-size--2)}:host([scale=s]) .description{font-size:var(--calcite-font-size--3)}:host([scale=s][display-mode=flat]:not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat]:not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=m]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:40px;padding-block:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .content,:host([scale=m]) .custom-content{font-size:var(--calcite-font-size--2)}:host([scale=m]) .label{font-size:var(--calcite-font-size--1)}:host([scale=m]) .description{font-size:var(--calcite-font-size--2)}:host([scale=m][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=m][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=l]) .actions-start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .content-container{gap:var(--calcite-spacing-md);min-block-size:56px;padding-block:.625rem;padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .content,:host([scale=l]) .custom-content,:host([scale=l]) .label{font-size:var(--calcite-font-size-0)}:host([scale=l]) .description{font-size:var(--calcite-font-size--1)}:host([scale=l]) .nested-container{margin-inline-start:1.75rem}:host([scale=l][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-lg)}:host([scale=l][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=flat][drag-handle]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=l][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-lg)}.label,.description,.content-bottom{font-family:var(--calcite-font-family);font-weight:var(--calcite-font-weight-normal);word-wrap:break-word;word-break:break-word}:host([selected]) .label{font-weight:var(--calcite-font-weight-medium)}:host([selected]) .icon{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}:host([selected]) .description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-2))}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:1 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){align-self:center}.content-bottom{display:flex;flex-direction:column}.content-container--has-center-content .content-start,.content-container--has-center-content .content-end{flex:0 1 auto}.expanded-container{color:var(--calcite-list-icon-color, var(--calcite-color-text-3));padding-inline:var(--calcite-spacing-xxs)}:host(:not([disabled])) .expanded-container:hover{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}.actions-start,.actions-end,.content-start,.content-end,.selection-container,.drag-container,.expanded-container{display:flex;align-items:center}.actions-start calcite-action,.actions-start calcite-sort-handle,.actions-end calcite-action,.actions-end calcite-sort-handle,.content-start calcite-action,.content-start calcite-sort-handle,.content-end calcite-action,.content-end calcite-sort-handle,.selection-container calcite-action,.selection-container calcite-sort-handle,.drag-container calcite-action,.drag-container calcite-sort-handle,.expanded-container calcite-action,.expanded-container calcite-sort-handle{align-self:stretch}.drag-container,.selection-container,.expanded-container{padding-block-end:var(--calcite-spacing-px)}.expanded-container,.selection-container{cursor:pointer}.actions-start,.actions-end{position:relative;padding:0}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-sort-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-sort-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}.row:focus .actions-start,.row:focus .actions-end{inset-block:.125rem}.row:focus .actions-start .close,.row:focus .actions-start ::slotted(calcite-action),.row:focus .actions-start ::slotted(calcite-action-menu),.row:focus .actions-start ::slotted(calcite-sort-handle),.row:focus .actions-start ::slotted(calcite-dropdown),.row:focus .actions-end .close,.row:focus .actions-end ::slotted(calcite-action),.row:focus .actions-end ::slotted(calcite-action-menu),.row:focus .actions-end ::slotted(calcite-sort-handle),.row:focus .actions-end ::slotted(calcite-dropdown){block-size:calc(100% - .25rem)}.row:focus:after,.row:focus:before{position:absolute;content:"";inline-size:.125rem;z-index:var(--calcite-z-index-header);background-color:var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));inset-block:0}.row:focus:before{inset-inline-start:0}.row:focus:after{inset-inline-end:0}.container--border:focus:before{display:none}::slotted(calcite-list:empty){border-block-start-width:0px}:host([hidden]){display:none}[hidden]{display:none}`,rI=new Map,X3=class X3 extends rr{constructor(){super(),this.actionsEndRef=Rn(),this.actionsStartRef=Rn(),this.containerRef=Rn(),this.contentRef=Rn(),this.defaultSlotRef=Rn(),this.handleGridRef=Rn(),this.messages=$a(),this.focusSetter=Ho()(this),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentBottom=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.hasCustomContent=!1,this.level=null,this.expandable=!1,this.active=!1,this.bordered=!1,this.sortDisabled=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.filterHidden=!1,this.interactionMode=null,this.displayMode="flat",this.addToItems=[],this.moveToItems=[],this.scale="m",this.selected=!1,this.selectionAppearance=null,this.selectionMode=null,this.sortHandleOpen=!1,this.unavailable=!1,this.calciteInternalFocusPreviousItem=Ye({cancelable:!1}),this.calciteInternalListItemActive=Ye({cancelable:!1}),this.calciteInternalListItemChange=Ye({cancelable:!1}),this.calciteInternalListItemSelect=Ye({cancelable:!1}),this.calciteInternalListItemSelectMultiple=Ye({cancelable:!1}),this.calciteInternalListItemToggle=Ye({cancelable:!1}),this.calciteListItemClose=Ye({cancelable:!1}),this.calciteListItemCollapse=Ye({cancelable:!1}),this.calciteListItemExpand=Ye({cancelable:!1}),this.calciteListItemSelect=Ye({cancelable:!1}),this.calciteListItemSortHandleBeforeClose=Ye({cancelable:!1}),this.calciteListItemSortHandleBeforeOpen=Ye({cancelable:!1}),this.calciteListItemSortHandleClose=Ye({cancelable:!1}),this.calciteListItemSortHandleOpen=Ye({cancelable:!1}),this.calciteListItemToggle=Ye({cancelable:!1}),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges),this.listen("calciteInternalListDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges)}get open(){return this.expanded}set open(e){zM.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>{const{containerRef:i,parentListEl:r}=this,s=rI.get(r);if(typeof s=="number"){const n=this.getGridCells()[s];if(n){this.focusCell(n);return}}return{target:i.value,includeContainer:!0,strategy:"focusable"}},e)}connectedCallback(){super.connectedCallback();const{el:e}=this;this.parentListEl=e.closest(Q_),this.level=KXe(e)+1,this.setSelectionDefaults()}disconnectedCallback(){super.disconnectedCallback(),rI.clear()}willUpdate(e){e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.activeHandler(this.active),e.has("closed")&&(this.hasUpdated||this.closed!==!1)&&this.handleClosedChange(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(),e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.handleSelectedChange(),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("displayMode")&&this.hasUpdated&&this.handleExpandableChange(this.defaultSlotRef.value),e.has("expanded")&&this.hasUpdated&&(this.expanded?(this.handleExpandedChange(),this.calciteListItemExpand.emit()):this.calciteListItemCollapse.emit())}updated(){Ea(this)}activeHandler(e){e||this.focusCell(null,!1)}handleClosedChange(){this.emitCalciteInternalListItemChange()}handleDisabledChange(){this.emitCalciteInternalListItemChange()}handleExpandedChange(){this.emitCalciteInternalListItemToggle()}handleSelectedChange(){this.calciteInternalListItemSelect.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}handleCalciteInternalListDefaultSlotChanges(e){e.stopPropagation(),this.handleExpandableChange(this.defaultSlotRef.value)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteListItemSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteListItemSortHandleOpen.emit()}emitInternalListItemActive(){this.calciteInternalListItemActive.emit()}emitCalciteInternalListItemToggle(){this.calciteInternalListItemToggle.emit()}emitCalciteInternalListItemChange(){this.calciteInternalListItemChange.emit()}handleCloseClick(){this.closed=!0,this.calciteListItemClose.emit()}handleContentSlotChange(e){this.hasCustomContent=qr(e)}handleActionsStartSlotChange(e){this.hasActionsStart=qr(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=qr(e)}handleContentStartSlotChange(e){this.hasContentStart=qr(e)}handleContentEndSlotChange(e){this.hasContentEnd=qr(e)}handleContentBottomSlotChange(e){this.hasContentBottom=qr(e)}setSelectionDefaults(){const{parentListEl:e,selectionMode:i,selectionAppearance:r}=this;e&&(i||(this.selectionMode=e.selectionMode),r||(this.selectionAppearance=e.selectionAppearance))}handleExpandableChange(e){if(!e)return;const i=YXe(e);i.lists.forEach(r=>{r.displayMode=this.displayMode}),this.expandable=this.displayMode==="nested"&&(i.lists.length>0||i.items.length>0)}handleDefaultSlotChange(e){this.handleExpandableChange(e.target)}handleToggleClick(){this.toggle()}toggle(e=!this.expanded){this.expanded=e,this.calciteListItemToggle.emit()}handleItemClick(e){e.defaultPrevented||this.toggleSelected(e.shiftKey)}async toggleSelected(e){const{selectionMode:i,selected:r}=this;this.disabled||(i==="multiple"||i==="single"?this.selected=!r:i==="single-persist"&&(this.selected=!0),this.calciteInternalListItemSelectMultiple.emit({selectMultiple:e&&i==="multiple"}),await this.updateComplete,this.calciteListItemSelect.emit())}getGridCells(){return[this.handleGridRef.value,this.actionsStartRef.value,this.contentRef.value,this.actionsEndRef.value].filter(e=>e&&!e.hidden)}handleItemKeyDown(e){if(e.defaultPrevented)return;const{key:i}=e,r=e.composedPath(),{containerRef:s,actionsStartRef:{value:n},actionsEndRef:{value:o},expanded:a,expandable:l}=this,c=this.getGridCells(),h=c.findIndex(y=>r.includes(y));if(i==="Enter"&&!r.includes(n)&&!r.includes(o))e.preventDefault(),this.toggleSelected(e.shiftKey);else if(i==="ArrowRight"){e.preventDefault();const y=h+1;h===-1?!a&&l?(this.toggle(!0),this.focusCell(null)):c[0]&&this.focusCell(c[0]):c[h]&&c[y]&&this.focusCell(c[y])}else if(i==="ArrowLeft"){e.preventDefault();const y=h-1;h===-1?(this.focusCell(null),a&&l?this.toggle(!1):this.calciteInternalFocusPreviousItem.emit()):h===0?(this.focusCell(null),s.value.focus()):c[h]&&c[y]&&this.focusCell(c[y])}}focusCellNull(){this.focusCell(null)}setFocusCell(e,i,r){const{parentListEl:s}=this;r&&rI.set(s,null);const n=this.getGridCells();n.forEach(o=>{o.removeAttribute("tabindex"),o.removeAttribute(XY)}),e&&(e===i?e.tabIndex=0:e.removeAttribute("tabindex"),e.setAttribute(XY,""),r&&rI.set(s,n.indexOf(e)))}focusCell(e,i=!0){const r=Hue(e);this.setFocusCell(e,r,i),r==null||r.focus()}renderSelected(){const{selected:e,selectionMode:i,selectionAppearance:r}=this;return i==="none"||r==="border"?null:oi("selection-container",Se`<div class=${$e({[pi.selectionContainer]:!0,[pi.selectionContainerSingle]:i==="single"||i==="single-persist"})} @click=${this.handleItemClick}><calcite-icon .icon=${e?i==="multiple"?mh.selectedMultiple:mh.selectedSingle:i==="multiple"?mh.unselectedMultiple:mh.unselectedSingle} .scale=${as(this.scale)}></calcite-icon></div>`)}renderDragHandle(){const{label:e,dragHandle:i,dragDisabled:r,setPosition:s,setSize:n,moveToItems:o,sortDisabled:a,addToItems:l}=this;return i?oi("drag-handle-container",Se`<div .ariaLabel=${e} class=${$e({[pi.dragContainer]:!0,[pi.gridCell]:!0})} role=gridcell ${ai(this.handleGridRef)}><calcite-sort-handle .addToItems=${l} .disabled=${r} .label=${e} .moveToItems=${o} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${s} .setSize=${n} .sortDisabled=${a} ${ai(this.setSortHandleEl)}></calcite-sort-handle></div>`):null}renderExpanded(){const{el:e,expanded:i,expandable:r,messages:s,displayMode:n,scale:o}=this;if(n!=="nested")return null;const a=Jx(e),l=r?i?mh.open:a==="rtl"?mh.collapsedRTL:mh.collapsedLTR:mh.blank,c=as(o),h=r?i?s.collapse:s.expand:void 0,y=r?this.handleToggleClick:void 0;return oi("expanded-container",Se`<div class=${$e(pi.expandedContainer)} @click=${y} title=${h??Ge}>${oi(l,Se`<calcite-icon .icon=${l} .scale=${c}></calcite-icon>`)}</div>`)}renderActionsStart(){const{label:e,hasActionsStart:i}=this;return oi("actions-start-container",Se`<div .ariaLabel=${e} class=${$e({[pi.actionsStart]:!0,[pi.gridCell]:!0})} .hidden=${!i} role=gridcell ${ai(this.actionsStartRef)}><slot name=${By.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{label:e,hasActionsEnd:i,closable:r,messages:s}=this;return oi("actions-end-container",Se`<div .ariaLabel=${e} class=${$e({[pi.actionsEnd]:!0,[pi.gridCell]:!0})} .hidden=${!(i||r)} role=gridcell ${ai(this.actionsEndRef)}><slot name=${By.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot>${r?oi("close-action",Se`<calcite-action appearance=transparent class=${$e(pi.close)} .icon=${mh.close} .label=${s.close} @click=${this.handleCloseClick} .scale=${this.scale} .text=${s.close}></calcite-action>`):null}</div>`)}renderContentStart(){const{hasContentStart:e}=this;return Se`<div class=${$e(pi.contentStart)} .hidden=${!e}><slot name=${By.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderCustomContent(){const{hasCustomContent:e}=this;return Se`<div class=${$e(pi.customContent)} .hidden=${!e}><slot name=${By.content} @slotchange=${this.handleContentSlotChange}></slot></div>`}renderIconStart(){const{iconStart:e,iconFlipRtl:i,scale:r}=this;return e?oi("icon-start",Se`<calcite-icon class=${$e(pi.icon)} .flipRtl=${i==="both"||i==="start"} .icon=${e} .scale=${as(r)}></calcite-icon>`):null}renderIconEnd(){const{iconEnd:e,iconFlipRtl:i,scale:r}=this;return e?oi("icon-end",Se`<calcite-icon class=${$e(pi.icon)} .flipRtl=${i==="both"||i==="end"} .icon=${e} .scale=${as(r)}></calcite-icon>`):null}renderContentEnd(){const{hasContentEnd:e}=this;return Se`<div class=${$e(pi.contentEnd)} .hidden=${!e}><slot name=${By.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}renderContentBottom(){const{hasContentBottom:e}=this;return Se`<div class=${$e(pi.contentBottom)} .hidden=${!e}><slot name=${By.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div>`}renderDefaultContainer(){return Se`<div class=${$e({[pi.nestedContainer]:!0,[pi.nestedContainerExpanded]:this.expandable&&this.expanded})}><slot @slotchange=${this.handleDefaultSlotChange} ${ai(this.defaultSlotRef)}></slot></div>`}renderContentProperties(){const{label:e,description:i,hasCustomContent:r}=this;return!r&&(e||i)?oi("content",Se`<div class=${$e(pi.content)}>${e?oi("label",Se`<div class=${$e(pi.label)}>${e}</div>`):null}${i?oi("description",Se`<div class=${$e(pi.description)}>${i}</div>`):null}</div>`):null}renderContentContainer(){const{description:e,label:i,selectionMode:r,hasCustomContent:s,unavailable:n}=this,o=s||!!i||!!e,a=[this.renderContentStart(),this.renderCustomContent(),this.renderIconStart(),this.renderContentProperties(),this.renderIconEnd(),this.renderContentEnd()];return oi("content-container",Se`<div .ariaLabel=${i} class=${$e({[pi.gridCell]:!0,[pi.contentContainer]:!0,[pi.contentContainerUnavailable]:n,[pi.contentContainerSelectable]:r!=="none",[pi.contentContainerHasCenterContent]:o})} @click=${this.handleItemClick} role=gridcell ${ai(this.contentRef)}>${a}</div>`)}render(){const{expandable:e,expanded:i,level:r,active:s,label:n,selected:o,selectionAppearance:a,selectionMode:l,interactionMode:c,closed:h,filterHidden:y,bordered:g,disabled:_,hasContentBottom:S}=this,E=g&&S,C=g&&!S,M=l!=="none"&&a==="border",P=M&&o,D=M&&!o,F=c==="interactive"||c==="static"&&l!=="none"&&a==="border";return Ia({disabled:_,children:Se`<div class=${$e({[pi.wrapper]:!0,[pi.wrapperBordered]:E})}><div .ariaExpanded=${e?i:null} .ariaLabel=${n} .ariaLevel=${r} .ariaSelected=${o} class=${$e({[pi.row]:!0,[pi.container]:!0,[pi.containerHover]:F,[pi.containerBorder]:M,[pi.containerBorderSelected]:P,[pi.containerBorderUnselected]:D})} .hidden=${h||y} @focus=${this.focusCellNull} @focusin=${this.emitInternalListItemActive} @keydown=${this.handleItemKeyDown} role=row .tabIndex=${s?0:-1} ${ai(this.containerRef)}>${this.renderDragHandle()}${this.renderSelected()}${this.renderExpanded()}<div class=${$e({[pi.contentContainerWrapper]:!0,[pi.contentContainerWrapperBordered]:C})}>${this.renderActionsStart()}${this.renderContentContainer()}${this.renderActionsEnd()}</div></div>${this.renderContentBottom()}</div>${this.renderDefaultContainer()}`})}};X3.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],hasCustomContent:[16,{},{state:!0}],level:[16,{},{state:!0}],expandable:[16,{},{state:!0}],parentListEl:[16,{},{state:!0}],active:[5,{},{type:Boolean}],bordered:[5,{},{type:Boolean}],sortDisabled:[5,{},{type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],interactionMode:1,label:1,messageOverrides:[0,{},{attribute:!1}],metadata:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],unavailable:[7,{},{reflect:!0,type:Boolean}],value:1,iconStart:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}]},X3.styles=[LKe,qpe];let M3=X3;Sr("calcite-list-item",M3);const IAt=Object.freeze(Object.defineProperty({__proto__:null,ListItem:M3},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const mfe={widget:"esri-widget esri-component"};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const eX="arcgis-search-result-renderer",tX={base:eX,moreResults:`${eX}__more-results`},RKe=Li`@layer{.arcgis-search-result-renderer calcite-block,.arcgis-search-result-renderer calcite-block[expanded]{margin-block:0;margin-block-start:var(--calcite-spacing-md);border:0}}`;var Mf;let OKe=(Mf=class extends zx{constructor(){super(...arguments),this._resultCount=0,this._showMoreResultsOpen=!1,this.autoDestroyDisabled=!1,this.arcgisReady=Jb()}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[He(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.results,(i=this.viewModel)==null?void 0:i.resultCount]},()=>{var e,i;this._results=(e=this.viewModel)==null?void 0:e.results,this._resultCount=((i=this.viewModel)==null?void 0:i.resultCount)??0,this._showMoreResultsOpen=!1},{initial:!0}),He(()=>{var e;return(e=this.viewModel)==null?void 0:e.selectedResult},e=>this._selectedResult=e,{initial:!0})])}_selectResult(e){var i;this._showMoreResultsOpen=!1,(i=this.viewModel)==null||i.select(e)}_getSourceName(e,i){var r;return i===-1?((r=this.messages)==null?void 0:r.all)??"":e.name}_toggleShowMoreResults(e){var r,s;this._showMoreResultsOpen=e;const i=(s=(r=this.viewModel)==null?void 0:r.view)==null?void 0:s.popup;i&&"reposition"in i&&i.reposition()}render(){var e;return Se`<div class=${Xc(O_(tX.base,mfe.widget))}>${((e=this._selectedResult)==null?void 0:e.name)??""}${this._renderMoreResults()}</div>`}_renderMoreResults(){var r;const{_resultCount:e,_results:i}=this;return!e||e<2||!i?null:Se`<calcite-block class=${Xc(tX.moreResults)} collapsible .expanded=${this._showMoreResultsOpen} .heading=${I0(((r=this.messages)==null?void 0:r.showMoreResults)??"",{count:e-1})} @calciteBlockClose=${()=>this._toggleShowMoreResults(!1)} @calciteBlockOpen=${()=>this._toggleShowMoreResults(!0)}>${i.map(s=>this._renderMoreResultsList(s,(i==null?void 0:i.length)>1))}</calcite-block>`}_renderMoreResultsList(e,i){const{results:r}=e;if(!((r==null?void 0:r.length)??0)||!r)return null;const s=this._getSourceName(e.source,e.sourceIndex),n=r.filter(o=>o!==this._selectedResult).map(o=>this._renderListItem(o));return Se`<calcite-list .label=${s}>${i?oi(`group-${e.sourceIndex}`,Se`<calcite-list-item-group .heading=${s}>${n}</calcite-list-item-group>`):n}</calcite-list>`}_renderListItem(e){return oi(`result-${e.sourceIndex}-${e.key}`,Se`<calcite-list-item .label=${e.name} @calciteListItemSelect=${()=>this._selectResult(e)}></calcite-list-item>`)}},Mf.properties={_results:16,_resultCount:16,_selectedResult:16,_showMoreResultsOpen:16,messages:0,autoDestroyDisabled:5,viewModel:0},Mf.styles=RKe,Mf.shadowRootOptions=M0,Mf);jx("arcgis-search-result-renderer",OKe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const DKe={textMatch:"text-match"};function iX({text:t,pattern:e}){if(!e||!t)return t;const i=t.split(e);return i.length>1&&(i[1]=Se`<mark class=${$e(DKe.textMatch)}>${i[1]}</mark>`),i}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const dp={container:"container",containerActive:"container--active",contentCenter:"content-center",description:"description",heading:"heading",iconEnd:"icon-end",iconStart:"icon-start",scale:t=>`scale--${t}`},rX={contentEnd:"content-end",contentStart:"content-start"},NKe="autocomplete-item",FKe={host:t=>`${NKe}-${t}`},zKe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-internal-autocomplete-item-spacing-unit-l: .5rem;--calcite-internal-autocomplete-item-spacing-unit-s: .25rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size-xs)}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-internal-autocomplete-item-spacing-unit-l: .75rem;--calcite-internal-autocomplete-item-spacing-unit-s: .375rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size-sm)}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-internal-autocomplete-item-spacing-unit-l: 1rem;--calcite-internal-autocomplete-item-spacing-unit-s: .625rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size)}:host{display:flex}.container{position:relative;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:100%;cursor:pointer;align-items:center;outline-color:transparent;background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-3));gap:var(--calcite-internal-autocomplete-item-spacing-unit-l);padding-inline:var(--calcite-internal-autocomplete-item-spacing-unit-l);padding-block:var(--calcite-internal-autocomplete-item-spacing-unit-s);word-wrap:break-word;word-break:break-word;justify-content:space-around}.description{color:var(--calcite-autocomplete-description-text-color);font-size:var(--calcite-internal-autocomplete-item-description-font-size)}.heading{color:var(--calcite-autocomplete-heading-text-color, var(--calcite-color-text-1))}.heading,.description{line-height:var(--calcite-font-line-height-relative-snug)}:host(:hover:not([disabled])) .container{background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-2))}:host(:hover:not([disabled])) .container .description{color:var(--calcite-autocomplete-description-text-color, var(--calcite-color-text-2))}.container--active{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content-center{display:flex;flex-direction:column;flex-grow:1;padding-block:0}.text-match{background-color:transparent;color:inherit;font-weight:var(--calcite-font-weight-bold)}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,K3=class K3 extends rr{constructor(){super(...arguments),this.active=!1,this.disabled=!1,this.guid=FKe.host(Kf()),this.scale="m",this.calciteAutocompleteItemSelect=Ye({cancelable:!1})}emitSelectEvent(){this.calciteAutocompleteItemSelect.emit()}updated(){Ea(this)}handleClick(e){e.preventDefault(),this.emitSelectEvent()}render(){const{active:e,description:i,heading:r,disabled:s,inputValueMatchPattern:n}=this;return Ia({disabled:s,children:Se`<div class=${$e({[dp.container]:!0,[dp.containerActive]:e&&!s,[dp.scale(this.scale)]:!0})} @click=${this.handleClick}>${this.renderIcon("start")}<slot name=${rX.contentStart}></slot><div class=${$e(dp.contentCenter)}><div class=${$e(dp.heading)}>${iX({text:r,pattern:n})}</div><div class=${$e(dp.description)}>${iX({text:i,pattern:n})}</div></div><slot name=${rX.contentEnd}></slot>${this.renderIcon("end")}</div>`})}renderIcon(e){const{iconFlipRtl:i}=this,r=e==="start"?this.iconStart:this.iconEnd;return r?Se`<calcite-icon class=${$e(e==="start"?dp.iconStart:dp.iconEnd)} .flipRtl=${i===e||i==="both"} .icon=${r} .scale=${as(this.scale)}></calcite-icon>`:null}};K3.properties={active:[5,{},{type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],guid:1,heading:1,iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],inputValueMatchPattern:[2,{},{reflect:!0,attribute:!1}],label:1,scale:1,value:1},K3.styles=zKe;let F8=K3;Sr("calcite-autocomplete-item",F8);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sX=(t,e,i)=>{const r=new Map;for(let s=e;s<=i;s++)r.set(t[s],s);return r},BKe=L1(class extends R1{constructor(t){if(super(t),t.type!==Yc.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let r;i===void 0?i=e:e!==void 0&&(r=e);const s=[],n=[];let o=0;for(const a of t)s[o]=r?r(a,o):o,n[o]=i(a,o),o++;return{values:n,keys:s}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,r]){const s=rRe(t),{values:n,keys:o}=this.dt(e,i,r);if(!Array.isArray(s))return this.ut=o,n;const a=this.ut??(this.ut=[]),l=[];let c,h,y=0,g=s.length-1,_=0,S=n.length-1;for(;y<=g&&_<=S;)if(s[y]===null)y++;else if(s[g]===null)g--;else if(a[y]===o[_])l[_]=hA(s[y],n[_]),y++,_++;else if(a[g]===o[S])l[S]=hA(s[g],n[S]),g--,S--;else if(a[y]===o[S])l[S]=hA(s[y],n[S]),bw(t,l[S+1],s[y]),y++,S--;else if(a[g]===o[_])l[_]=hA(s[g],n[_]),bw(t,s[y],s[g]),g--,_++;else if(c===void 0&&(c=sX(o,_,S),h=sX(a,y,g)),c.has(a[y]))if(c.has(a[g])){const E=h.get(o[_]),C=E!==void 0?s[E]:null;if(C===null){const M=bw(t,s[y]);hA(M,n[_]),l[_]=M}else l[_]=hA(C,n[_]),bw(t,s[y],C),s[E]=null;_++}else HR(s[g]),g--;else HR(s[y]),y++;for(;_<=S;){const E=bw(t,l[S+1]);hA(E,n[_]),l[_++]=E}for(;y<=g;){const E=s[y++];E!==null&&HR(E)}return this.ut=o,aB(t,l),ga}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const jKe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:block}.input-container{position:relative;display:flex;flex:1 1 auto;flex-wrap:nowrap}.input{width:100%;--calcite-input-prefix-size: var(--calcite-autocomplete-input-prefix-size);--calcite-input-suffix-size: var(--calcite-autocomplete-input-suffix-size);--calcite-input-background-color: var(--calcite-autocomplete-input-background-color);--calcite-input-border-color: var(--calcite-autocomplete-input-border-color);--calcite-input-corner-radius: var(--calcite-autocomplete-input-corner-radius);--calcite-input-shadow: var(--calcite-autocomplete-input-shadow);--calcite-input-icon-color: var(--calcite-autocomplete-input-icon-color);--calcite-input-text-color: var(--calcite-autocomplete-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-autocomplete-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-autocomplete-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-autocomplete-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-autocomplete-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-autocomplete-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-autocomplete-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-autocomplete-input-actions-icon-color-press);--calcite-input-loading-background-color: var(--calcite-autocomplete-input-loading-background-color);--calcite-input-loading-fill-color: var(--calcite-autocomplete-input-loading-fill-color);--calcite-input-prefix-background-color: var(--calcite-autocomplete-input-prefix-background-color);--calcite-input-prefix-text-color: var(--calcite-autocomplete-input-prefix-text-color);--calcite-input-suffix-background-color: var(--calcite-autocomplete-input-suffix-background-color);--calcite-input-suffix-text-color: var(--calcite-autocomplete-input-suffix-text-color)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.content-container{box-sizing:border-box;width:100%}.floating-ui-container{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.floating-ui-container{opacity:0;inset-block-start:0;left:0}}.floating-ui-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.floating-ui-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.floating-ui-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.floating-ui-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.floating-ui-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.content-container .calcite-floating-ui-anim{max-height:45vh;width:100%;overflow-y:auto;color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-1));background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-autocomplete-corner-radius, var(--calcite-corner-radius-round))}.content--hidden{display:none}@media (forced-colors: active){.floating-ui-container--active{border:1px solid canvasText}}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,nX={contentBottom:"content-bottom",contentTop:"content-top"},yh={inputContainer:"input-container",input:"input",contentContainer:"content-container",contentAnimation:"content-animation",content:"content",contentHidden:"content--hidden",floatingUIContainer:"floating-ui-container",floatingUIContainerActive:"floating-ui-container--active",screenReadersOnly:"screen-readers-only"},oX="autocomplete",yD={validationMessage:"autocompleteValidationMessage",input:t=>`${oX}-input-${t}`,list:t=>`${oX}-list-${t}`},UKe="calcite-autocomplete-item-group",VKe="calcite-autocomplete-item",ek=class ek extends rr{constructor(){super(),this.guid=Kf(),this.attributeWatch=zB(["autofocus","enterkeyhint","inputmode"],this.handleGlobalAttributesChanged),this.inputId=yD.input(this.guid),this.listId=yD.list(this.guid),this.messages=$a(),this.transitionProp="opacity",this.mutationObserver=hl("mutation",()=>this.getAllItemsDebounced()),this.focusSetter=Ho()(this),this.resizeObserver=hl("resize",()=>{this.setFloatingElSize()}),this.cancelable=Lj()(this),this.getAllItemsDebounced=jP(this.getAllItems,0),this.activeDescendant="",this.activeIndex=-1,this.hasContentBottom=!1,this.hasContentTop=!1,this.items=[],this.groups=[],this.alignment="start",this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.open=!1,this.overlayPositioning="absolute",this.placement=KS,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value="",this.calciteAutocompleteBeforeClose=Ye({cancelable:!1}),this.calciteAutocompleteBeforeOpen=Ye({cancelable:!1}),this.calciteAutocompleteChange=Ye({cancelable:!1}),this.calciteAutocompleteClose=Ye({cancelable:!1}),this.calciteAutocompleteOpen=Ye({cancelable:!1}),this.calciteAutocompleteTextChange=Ye({cancelable:!1}),this.calciteAutocompleteTextInput=Ye({cancelable:!1}),this.listenOn(document,"click",this.documentClickHandler),this.listen("calciteAutocompleteItemSelect",this.handleAutocompleteItemSelect)}get isOpen(){return this.open&&(this.hasContentTop||this.hasContentBottom||this.items.length>0)}get enabledItems(){return this.items.filter(e=>!e.disabled)}async reposition(e=!1){const{floatingEl:i,referenceEl:r,placement:s,overlayPositioning:n,flipPlacements:o}=this;return Mj(this,{floatingEl:i,referenceEl:r,overlayPositioning:n,placement:s,flipPlacements:o,type:"menu"},e)}async scrollContentTo(e){var i;(i=this.transitionEl)==null||i.scrollTo(e)}async selectText(){return this.referenceEl.selectText()}async setFocus(e){return this.focusSetter(()=>this.referenceEl,e)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),Yx(this),the(this),this.defaultInputValue=this.inputValue||"",this.getAllItemsDebounced(),bd(this),this.cancelable.add(this.getAllItemsDebounced)}async load(){this.getAllItemsDebounced()}willUpdate(e){e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("flipPlacements")||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==KS))&&this.reposition(!0);let i=!1;e.has("inputValue")&&(this.hasUpdated||this.inputValue)&&(this.inputValueMatchPattern=this.inputValue&&new RegExp(`(${Kpe(this.inputValue)})`,"i"),this.updateItems(),this.updateGroups(),i=!0),!i&&e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&(this.updateItems(),this.updateGroups(),i=!0),!i&&e.has("activeIndex")&&(this.hasUpdated||this.activeIndex!==-1)&&this.updateItems()}updated(){Ea(this)}loaded(){K9e(this,this.value||""),this.defaultInputValue=this.inputValue||"",bd(this)}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),WB(this),ihe(this),UP(this)}setFloatingElSize(){const{referenceEl:e,floatingEl:i}=this;!e||!i||(i.style.inlineSize=`${e.clientWidth}px`)}handleGlobalAttributesChanged(){this.requestUpdate()}handleDisabledChange(e){e||(this.open=!1)}openHandler(){if(r$(this),this.open||(this.activeIndex=-1),this.disabled){this.open=!1;return}this.setFloatingElSize(),this.reposition(!0)}async documentClickHandler(e){this.disabled||e.composedPath().includes(this.el)||(this.open=!1)}async handleAutocompleteItemSelect(e){this.value=e.target.value,this.emitChange(),await this.setFocus(),this.open=!1}onLabelClick(){this.setFocus()}onFormReset(){this.inputValue=this.defaultInputValue}onBeforeOpen(){this.calciteAutocompleteBeforeOpen.emit()}onOpen(){this.calciteAutocompleteOpen.emit()}onBeforeClose(){this.calciteAutocompleteBeforeClose.emit()}onClose(){this.calciteAutocompleteClose.emit()}emitChange(){this.calciteAutocompleteChange.emit()}updateGroups(){this.groups.forEach((e,i,r)=>{e.scale=this.scale,i===0&&(e.disableSpacing=!0);const s=r[i+1];s&&(s.disableSpacing=e.children.length===0)})}updateItems(){let e=null;this.items.forEach(i=>{i.scale=this.scale,i.inputValueMatchPattern=this.inputValueMatchPattern}),this.enabledItems.forEach((i,r)=>{const s=r===this.activeIndex;s&&(e=i.guid),i.active=s}),this.activeDescendant=e}handleInputFocus(){this.open=!0}handleContentTopSlotChange(e){this.hasContentTop=qr(e)}handleContentBottomSlotChange(e){this.hasContentBottom=qr(e)}getAllItems(){const{el:e}=this;this.groups=Array.from(e.querySelectorAll(UKe)),this.items=Array.from(e.querySelectorAll(VKe)),this.updateItems(),this.updateGroups()}setReferenceEl(e){FM(this.resizeObserver,this.referenceEl,e),this.referenceEl=e,bd(this)}keyDownHandler(e){const{defaultPrevented:i,key:r}=e;if(i)return;const{open:s,activeIndex:n,enabledItems:o}=this,a=o.length&&n>-1?o[n]:null;switch(r){case"Escape":s&&(this.open=!1,e.preventDefault());break;case"Tab":this.open=!1;break;case"Enter":s&&a?(this.value=a.value,a.emitSelectEvent(),this.open=!1,e.preventDefault()):e.defaultPrevented||IP(this)&&e.preventDefault();break;case"ArrowDown":o.length&&(this.open=!0,this.activeIndex=n!==-1?Math.min(n+1,o.length-1):0,this.scrollToActiveItem(),e.preventDefault());break;case"ArrowUp":o.length&&(this.open=!0,this.activeIndex=n!==-1?Math.max(n-1,0):o.length-1,this.scrollToActiveItem(),e.preventDefault());break;case"Home":o.length&&(this.open=!0,this.activeIndex=0,this.scrollToActiveItem(),e.preventDefault());break;case"End":o.length&&(this.open=!0,this.activeIndex=o.length-1,this.scrollToActiveItem(),e.preventDefault());break}}scrollToActiveItem(){var e;(e=this.enabledItems[this.activeIndex])==null||e.scrollIntoView({block:"nearest"})}changeHandler(e){e.stopPropagation(),this.inputValue=e.target.value,this.calciteAutocompleteTextChange.emit()}inputClickHandler(e){e.defaultPrevented||(this.open=!0)}inputHandler(e){var i;e.stopPropagation(),this.inputValue=e.target.value,this.open=((i=this.inputValue)==null?void 0:i.length)>0,this.calciteAutocompleteTextInput.emit()}setFloatingEl(e){this.floatingEl=e,bd(this)}setTransitionEl(e){e&&(this.transitionEl=e)}render(){const{disabled:e,listId:i,inputId:r,isOpen:s}=this,n=this.el.autofocus,o=this.el.enterKeyHint,a=this.el.inputMode;return Ia({disabled:e,children:Se`${this.labelText&&Zpe({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${$e(yh.inputContainer)}><calcite-input .alignment=${this.alignment} aria-activedescendant=${this.activeDescendant??Ge} aria-controls=${i??Ge} aria-label=${VM(this)??Ge} aria-owns=${i??Ge} aria-autocomplete=list .ariaExpanded=${s} aria-haspopup=listbox .autocomplete=${this.autocomplete} .autofocus=${n} class=${$e(yh.input)} clearable .disabled=${e} enterkeyhint=${o??Ge} .form=${this.form} .icon=${this.icon??!0} .iconFlipRtl=${this.iconFlipRtl} id=${r??Ge} inputmode=${a??Ge} .label=${this.label} .loading=${this.loading} .maxLength=${this.maxLength} .messageOverrides=${this.messages} .minLength=${this.minLength} .name=${this.name} @click=${this.inputClickHandler} @keydown=${this.keyDownHandler} @calciteInputChange=${this.changeHandler} @calciteInputInput=${this.inputHandler} @calciteInternalInputFocus=${this.handleInputFocus} .pattern=${this.pattern} .placeholder=${this.placeholder} .prefixText=${this.prefixText} .readOnly=${this.readOnly} .required=${this.required} role=combobox .scale=${this.scale} .status=${this.status} .suffixText=${this.suffixText} type=search .value=${this.inputValue} ${ai(this.setReferenceEl)}></calcite-input>${this.renderListBox()}<div class=${$e({[yh.contentContainer]:!0,[yh.floatingUIContainer]:!0,[yh.floatingUIContainerActive]:s})} ${ai(this.setFloatingEl)}><div class=${$e({[yh.contentAnimation]:!0,[n1.animation]:!0,[n1.animationActive]:s})} ${ai(this.setTransitionEl)}><div class=${$e({[yh.content]:!0,[yh.contentHidden]:!s})}><slot name=${nX.contentTop} @slotchange=${this.handleContentTopSlotChange}></slot><slot aria-hidden=true></slot><slot name=${nX.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div></div></div></div>${she({component:this})}${this.validationMessage&&this.status==="invalid"?Ype({icon:this.validationIcon,id:yD.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}renderListBox(){return Se`<ul aria-labelledby=${this.inputId??Ge} aria-live=polite class=${$e(yh.screenReadersOnly)} id=${this.listId??Ge} role=listbox tabindex=-1>${this.renderListBoxOptions()}</ul>`}renderListBoxOptions(){return BKe(this.items.filter(e=>!!(e.label||e.heading)),e=>e.guid,e=>Se`<li .ariaDisabled=${e.disabled} .ariaLabel=${e.label} id=${e.guid??Ge} role=option tabindex=-1>${e.heading}${e.description}</li>`)}};ek.properties={activeDescendant:[16,{},{state:!0}],activeIndex:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],items:[16,{},{state:!0}],groups:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],icon:[3,{converter:L0},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],inputValue:1,label:1,labelText:1,loading:[7,{},{reflect:!0,type:Boolean}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],minLength:[11,{},{reflect:!0,type:Number}],name:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],pattern:1,placeholder:1,placement:[3,{},{reflect:!0}],prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],suffixText:1,validationIcon:[3,{converter:L0},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},ek.styles=jKe;let z8=ek;Sr("calcite-autocomplete",z8);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const sI={container:"container",containerNoSpacing:"container--no-spacing",heading:"heading",scale:t=>`scale--${t}`},GKe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-internal-autocomplete-item-group-spacing-unit: .5rem}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-internal-autocomplete-item-group-spacing-unit: .75rem}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-internal-autocomplete-item-group-spacing-unit: 1rem}:host{margin:0;display:flex;flex-direction:column}.container{display:flex;flex-direction:column;background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));padding-block-start:var(--calcite-internal-autocomplete-item-group-spacing-unit)}.container--no-spacing{padding-block-start:0}.heading{border:0 solid;box-sizing:border-box;inline-size:100%;min-inline-size:0px;max-inline-size:100%;border-block-end-width:1px;font-weight:var(--calcite-font-weight-bold);word-wrap:break-word;word-break:break-word;color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-2));border-block-end-color:var(--calcite-autocomplete-border-color, var(--calcite-color-border-3));padding-block:var(--calcite-internal-autocomplete-item-group-spacing-unit);padding-inline:var(--calcite-internal-autocomplete-item-group-spacing-unit)}:host([hidden]){display:none}[hidden]{display:none}`,tk=class tk extends rr{constructor(){super(...arguments),this.disableSpacing=!1,this.scale="m"}render(){const{scale:e}=this;return Se`<div aria-label=${this.label??this.heading??r0} class=${$e({[sI.container]:!0,[sI.containerNoSpacing]:this.disableSpacing,[sI.scale(e)]:!0})} role=group><div class=${$e(sI.heading)} role=presentation>${this.heading}</div><slot></slot></div>`}};tk.properties={disableSpacing:[5,{},{type:Boolean}],heading:1,label:1,scale:1},tk.styles=GKe;let B8=tk;Sr("calcite-autocomplete-item-group",B8);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const aX={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const nI={title:"title",message:"message",link:"link",actionsEnd:"actions-end"},Gw={actionsEnd:"actions-end",close:"notice-close",container:"container",content:"notice-content",icon:"notice-icon"},HKe=Li`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([scale=s]){--calcite-notice-spacing-token-small: .5rem;--calcite-notice-spacing-token-large: .75rem}:host([scale=s]) .container slot[name=title]::slotted(*),:host([scale=s]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) .container slot[name=message]::slotted(*),:host([scale=s]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .notice-close{padding:.5rem}:host([scale=m]){--calcite-notice-spacing-token-small: .75rem;--calcite-notice-spacing-token-large: 1rem}:host([scale=m]) .container slot[name=title]::slotted(*),:host([scale=m]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) .container slot[name=message]::slotted(*),:host([scale=m]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=l]){--calcite-notice-spacing-token-small: 1rem;--calcite-notice-spacing-token-large: 1.25rem}:host([scale=l]) .container slot[name=title]::slotted(*),:host([scale=l]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) .container slot[name=message]::slotted(*),:host([scale=l]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([width=auto]){--calcite-notice-width: auto}:host([width=half]){--calcite-notice-width: 50%}:host([width=full]){--calcite-notice-width: 100%}:host{margin-inline:auto;display:none;max-inline-size:100%;align-items:center;inline-size:var(--calcite-notice-width)}.container{pointer-events:none;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;opacity:0;overflow:hidden;max-block-size:0;transition-property:opacity,max-block-size;transition-duration:var(--calcite-animation-timing);text-align:start;border-inline-start:var(--calcite-border-width-md) solid;box-shadow:0 0 0 0 transparent;background-color:var(--calcite-notice-background-color, var(--calcite-color-foreground-1))}.notice-close{outline-color:transparent}.notice-close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host{display:flex}:host([open]) .container{pointer-events:auto;max-block-size:100%;align-items:center;opacity:1;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);overflow:visible}.container slot[name=title]::slotted(*),.container *::slotted([slot=title]){margin:0;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-notice-title-text-color, var(--calcite-color-text-1))}.container slot[name=message]::slotted(*),.container *::slotted([slot=message]){margin:0;display:inline;font-weight:var(--calcite-font-weight-normal);margin-inline-end:var(--calcite-notice-spacing-token-small);color:var(--calcite-notice-content-text-color, var(--calcite-color-text-2))}.notice-content{box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;display:flex;min-inline-size:0px;flex-direction:column;overflow-wrap:break-word;flex:1 1 0;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:0 var(--calcite-notice-spacing-token-small)}.notice-content:first-of-type:not(:only-child){padding-inline-start:var(--calcite-notice-spacing-token-large)}.notice-content:only-of-type{padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large)}.notice-icon{display:flex;align-items:center;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto}.notice-close{display:flex;cursor:pointer;align-items:center;align-self:stretch;border-style:none;background-color:transparent;outline:2px solid transparent;outline-offset:2px;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;-webkit-appearance:none;color:var(--calcite-notice-close-icon-color, var(--calcite-color-text-3))}.notice-close:hover,.notice-close:focus{background-color:var(--calcite-notice-close-background-color-focus, var(--calcite-color-foreground-2));color:var(--calcite-notice-close-icon-color-hover, var(--calcite-color-text-1))}.notice-close:active{background-color:var(--calcite-notice-close-background-color-press, var(--calcite-color-foreground-3))}.actions-end{display:flex;align-self:stretch}:host([kind=brand]) .container{border-color:var(--calcite-color-brand)}:host([kind=brand]) .container .notice-icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-color:var(--calcite-color-status-info)}:host([kind=info]) .container .notice-icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .notice-icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-color:var(--calcite-color-status-success)}:host([kind=success]) .container .notice-icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .notice-icon{color:var(--calcite-color-status-warning)}:host([hidden]){display:none}[hidden]{display:none}`,ik=class ik extends rr{constructor(){super(...arguments),this.closeButton=Rn(),this.transitionProp="opacity",this.messages=$a(),this.focusSetter=Ho()(this),this.hasActionEnd=!1,this.closable=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.scale="m",this.width="auto",this.calciteNoticeBeforeClose=Ye({cancelable:!1}),this.calciteNoticeBeforeOpen=Ye({cancelable:!1}),this.calciteNoticeClose=Ye({cancelable:!1}),this.calciteNoticeOpen=Ye({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el.querySelector("calcite-link")||this.closeButton.value,e)}async load(){this.requestedIcon=Yb(aX,this.icon,this.kind)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&r$(this),(e.has("icon")||e.has("kind")&&(this.hasUpdated||this.kind!=="brand"))&&(this.requestedIcon=Yb(aX,this.icon,this.kind))}onBeforeClose(){this.calciteNoticeBeforeClose.emit()}onBeforeOpen(){this.calciteNoticeBeforeOpen.emit()}onClose(){this.calciteNoticeClose.emit()}onOpen(){this.calciteNoticeOpen.emit()}setTransitionEl(e){e&&(this.transitionEl=e)}close(){this.open=!1}handleActionsEndSlotChange(e){this.hasActionEnd=qr(e)}render(){const e=Se`<button .ariaLabel=${this.messages.close} class=${$e(Gw.close)} @click=${this.close} ${ai(this.closeButton)}><calcite-icon icon=x .scale=${as(this.scale)}></calcite-icon></button>`;return Se`<div class=${$e(Gw.container)} ${ai(this.setTransitionEl)}>${this.requestedIcon?Se`<div class=${$e(Gw.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${as(this.scale)}></calcite-icon></div>`:null}<div class=${$e(Gw.content)}><slot name=${nI.title}></slot><slot name=${nI.message}></slot><slot name=${nI.link}></slot></div><div class=${$e(Gw.actionsEnd)} .hidden=${!this.hasActionEnd}><slot name=${nI.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>${this.closable?e:null}</div>`}};ik.properties={hasActionEnd:[16,{},{state:!0}],closable:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:L0},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},ik.styles=HKe;let k3=ik;Sr("calcite-notice",k3);const CAt=Object.freeze(Object.defineProperty({__proto__:null,Notice:k3},Symbol.toStringTag,{value:"Module"}));function lX(t){var e;switch(t==null?void 0:t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}async function qKe(t,e){var s,n;if(t.hasZ||e.type==="2d")return t;const i=(s=e.map)==null?void 0:s.ground;if(!(i!=null&&i.layers.length))return t;const{geometry:r}=await i.queryElevation(t,{cache:(n=e.basemapTerrain)==null?void 0:n.elevationQueryCache});return r}function j8(t,e,i){return yfe(t.center,e,i)}function Fj(t,e,i){switch(t==null?void 0:t.type){case"extent":return t;case"multipoint":case"polygon":case"polyline":return t.extent;case"point":return yfe(t,e,i);default:return null}}function yfe(t,e,i){const r=t.hasZ?t.z:void 0;if(e!=null&&e.map)return(i!=null?BEe(e,i):e.extent).clone().centerAt(t).set({zmax:r,zmin:r});const{x:s,y:n,spatialReference:o}=t;return new Rt({xmin:s-.25,ymin:n-.25,xmax:s+.25,ymax:n+.25,spatialReference:o,zmin:r,zmax:r})}function WKe(t){return t&&typeof t.highlight=="function"}function QKe(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function TAt(t,e){if(e&&t){const{minScale:i,maxScale:r}=t;if(JKe(i,r))return QKe(e,i,r)}return!0}function JKe(t,e){return t!=null&&t>0||e!=null&&e>0}function MAt(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}const kAt=()=>!ce("disable-feature:layer-based-scale-visibility");let ts=class extends j0.IdentifiableMixin(pe){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};u([A()],ts.prototype,"autoNavigate",void 0),u([A()],ts.prototype,"filter",void 0),u([A()],ts.prototype,"getResults",void 0),u([A()],ts.prototype,"getSuggestions",void 0),u([A()],ts.prototype,"maxResults",void 0),u([A()],ts.prototype,"maxSuggestions",void 0),u([A()],ts.prototype,"minSuggestCharacters",void 0),u([A()],ts.prototype,"outFields",void 0),u([A()],ts.prototype,"placeholder",void 0),u([A()],ts.prototype,"popupEnabled",void 0),u([A({type:Gu})],ts.prototype,"popupTemplate",void 0),u([A()],ts.prototype,"prefix",void 0),u([A()],ts.prototype,"resultGraphicEnabled",void 0),u([A()],ts.prototype,"resultSymbol",void 0),u([A()],ts.prototype,"suggestionsEnabled",void 0),u([A()],ts.prototype,"suffix",void 0),u([A()],ts.prototype,"withinViewEnabled",void 0),u([A()],ts.prototype,"zoomScale",void 0),ts=u([B("esri.widgets.Search.SearchSource")],ts);const zj=ts,ZKe=/https?:\/\/services.*\.arcgis\.com/i,YKe=/(?:\{([^}]+)\})/g,Pv=()=>be.getLogger("esri.widgets.Search.support.layerSearchUtils");function XKe(t,e){const{exactMatch:i=!1,location:r,maxResults:s,spatialReference:n,source:o,sourceIndex:a,suggestResult:l,view:c}=t,{layer:h,filter:y,zoomScale:g}=o,_=c==null?void 0:c.scale,S=gfe(o,c),E=e==null?void 0:e.signal;return bfe(h).then((()=>{const C=h.popupTemplate;return C?C.getRequiredFields(h.fieldsIndex):null})).then((C=>{var de,ye,xe,ee;const{objectIdField:M,returnZ:P}=h,D=Efe(o);if(!Bj(h,D))throw Pv().error("invalid-field: displayField is invalid."),new te("getResults():invalid-field","displayField is invalid.");const F=C!=null&&C.length?C:[D],U=o.outFields||F,G=vfe(U);if(U.includes(M)||G||U.push(M),(de=h.floorInfo)!=null&&de.floorField&&U.push(h.floorInfo.floorField),!(G||P3(h,U)))throw Pv().error("invalid-field: outField is invalid."),new te("getResults():invalid-field","outField is invalid.");const Q=h.createQuery(),{orderByFields:W}=o;if(W&&(Q.orderByFields=W),n){Q.outSpatialReference=n;const le=1/xa(n);le&&(Q.maxAllowableOffset=le)}const X=h.geometryType==="mesh"||h.geometryType==="multipatch",K=((xe=(ye=h.capabilities)==null?void 0:ye.data)==null?void 0:xe.supportsZ)&&!X;if(Q.returnZ=K&&P!==!1,Q.returnGeometry=!0,Q.multipatchOption=X?"xyFootprint":null,U&&(Q.outFields=U),r)Q.geometry=r;else if(l.key)Q.objectIds=[l.key];else{const le=o.searchFields||[D];if(!P3(h,le))throw Pv().error("invalid-field: search field is invalid."),new te("getResults():invalid-field","search field is invalid.");if($fe(h)&&(Q.num=s),S&&(Q.geometry=S),!((ee=l.text)==null?void 0:ee.trim()))return[];const ke=l.text,{prefix:De="",suffix:Ke=""}=o,vt=Ife(`${De}${ke}${Ke}`);xfe(h)&&_fe(h,le)&&!i&&ke&&(Q.fullText=Sfe({text:ke,searchFields:le}));const Pt=Cfe({searchTerm:vt,layer:h,searchFields:le,filter:y,exactMatch:i,query:Q,type:"search"});if(Q.where=Pt,!wfe(Q))return[]}return h.queryFeatures(Q,{signal:E}).then((le=>det(le,c,o,a,D,_,g)))}))}function KKe(t,e){const{source:i,spatialReference:r,view:s,suggestTerm:n,maxSuggestions:o,sourceIndex:a,exactMatch:l}=t,{layer:c,filter:h}=i,y=e==null?void 0:e.signal,g=gfe(i,s);return bfe(c).then((()=>{if(!$fe(c))return[];const _=Efe(i),S=i.searchFields||[_],E=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(YKe,((K,de)=>(E.push(de),K))):E.push(_);const C=vfe(E);E.includes(c.objectIdField)||C||E.push(c.objectIdField);const M=Bj(c,_),P=C||P3(c,E),D=P3(c,S);if(!M)throw Pv().error("invalid-field: displayField is invalid."),new te("getSuggestions():invalid-field","displayField is invalid.");if(!P)throw Pv().error("invalid-field: outField is invalid."),new te("getSuggestions():invalid-field","outField is invalid.");if(!D)throw Pv().error("invalid-field: search field is invalid."),new te("getSuggestions():invalid-field","search field is invalid.");const F=c.createQuery(),{orderByFields:U}=i;if(U&&(F.orderByFields=U),F.outSpatialReference=r,F.returnGeometry=!1,F.num=o,F.outFields=E,g&&(F.geometry=g),!n.trim())return[];const{prefix:G="",suffix:Q=""}=i,W=Ife(`${G}${n}${Q}`);xfe(c)&&_fe(c,S)&&!l&&n&&(F.fullText=Sfe({text:n,searchFields:S}));const X=Cfe({searchTerm:W,layer:c,searchFields:S,filter:h,exactMatch:l,query:F,type:"suggest"});return F.where=X,wfe(F)?c.queryFeatures(F,{signal:y}).then((K=>cet(K,i,a,_))):[]}))}function gfe(t,e){const{filter:i,withinViewEnabled:r}=t,s=e==null?void 0:e.extent;return(i==null?void 0:i.geometry)??(r&&s?s:void 0)}function vfe(t){return t&&t.includes("*")}async function bfe(t){t&&await t.load()}function wfe(t){return!(!t.fullText&&!t.where)}function _fe(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter((r=>r.indexType==="FullText")).some((r=>{var n;const s=((n=r.fields)==null?void 0:n.split(",").map((o=>o.trim().toLowerCase())))||[];return e.every((o=>s.includes(o.toLowerCase())))}))}function Sfe({text:t,searchFields:e}){return t.trim().split(" ").filter((i=>!!i.trim())).map((i=>new jse({onFields:e,searchTerm:i,searchType:"prefix"})))}function xfe(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function $fe(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function eet(t){var e,i,r;return((r=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find((s=>s.type==="string")))==null?void 0:r.name)??""}function Efe(t){return t.displayField||t.layer.displayField||eet(t.layer)}function P3(t,e){return!(!t||!(e!=null&&e.length))&&e.every((i=>Bj(t,i)))}function Bj(t,e){return!!t.getField(e)}function tet(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function iet({codedValues:t},e,i){return YC(t??[],(r=>{const s=r.name,n=i?s:s.toLowerCase();return(i?e:e.toLowerCase())===n?r.code.toString():null}))??null}function Ife(t){return t.replaceAll("'","''")}function Hw(t,e){const i=e==null?void 0:e.where;return i?`(${t}) AND (${i})`:t}function ret({currentTerm:t,field:e,filter:i,exactMatch:r,url:s,type:n}){const o=e==null?void 0:e.type,a=e==null?void 0:e.name;if(o==="string"||o==="date"||o==="global-id"){const l=ZKe.test(s??""),c=l&&tet(t)?"N":"";return Hw(r&&n==="search"?`${a} = ${c}'${t}'`:l?`${a} LIKE ${c}${`'${t}%'`}`:`${`LOWER(${a})`} LIKE ${c}${`'${t.toLowerCase()}%'`}`,i)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const l=Number(t);return isNaN(l)?null:Hw(`${a} = ${l}`,i)}return Hw(`${a} = ${t}`,i)}function set(t,e){return t?` OR (${e})`:`(${e})`}function Cfe({searchTerm:t,layer:e,searchFields:i,filter:r,exactMatch:s,query:n,type:o}){const{definitionExpression:a,url:l}=e;let c="";return!n.fullText&&t&&i&&i.forEach((h=>{var S;const y=e.getField(h),g=(S=e.getFieldDomain)==null?void 0:S.call(e,h,{excludeImpliedDomains:ce("esri-widget-legacy-field-domain-calculation")}),_=(g&&g.type==="coded-value"?iet(g,t,s):null)||t||null;if(_!==null){const E=ret({currentTerm:_,field:y,filter:r,exactMatch:s,url:l,type:o});E&&(c+=set(c,E))}})),a&&c?`(${a}) AND (${c})`:a||c}function net(t,e){let i=null;const{codedValues:r}=t;return r&&r.length&&r.some((s=>s.code===e&&(i=s.name,!0))),i}function oet(t,e){return t[e]??t[Object.keys(t).find((i=>i.toLowerCase()===e.toLowerCase()))]}function Tfe(t,e,i){var o;const r=t.sourceLayer,{attributes:s}=t,n=(o=r.getFieldDomain)==null?void 0:o.call(r,i,{feature:t,excludeImpliedDomains:ce("esri-widget-legacy-field-domain-calculation")});if(e)return I0(e,s);if(i&&s){const a=r.getField(i),l=oet(s,i);return l==null?"":n&&n.type==="coded-value"?net(n,l)??"":(a==null?void 0:a.type)==="date"?nl(new Date(l)):typeof l=="number"?l.toString():typeof l!="string"?"":l.trim()}return""}function aet(t,e,i,r){const s=t.sourceLayer,{attributes:n}=t,{objectIdField:o}=s,a=o?n[o]:null;return{text:Tfe(t,e.suggestionTemplate,r),key:a,sourceIndex:i}}function cet(t,e,i,r){return t.features.map((s=>aet(s,e,i,r)))}function uet(t){return t!=null&&t.minScale!=null&&t.maxScale!=null}function het(t,e,i,r,s,n,o){const a=t.clone();a.layer=t.layer;const l=t.sourceLayer,c=l==null?void 0:l.objectIdField,h=c?t.attributes[c]:null,y=Tfe(t,i.searchTemplate,s);n!=null&&uet(l)&&(l.minScale&&l.minScale<n?n=l.minScale:l.maxScale&&l.maxScale>n&&(n=l.maxScale));const g=a.geometry?Fj(a.geometry,e??void 0,n??void 0):void 0,_=typeof o=="number"&&g?j8(ie(g),e??void 0,o):g,S=t.clone();return S.layer=t.layer,_!=null&&(S.geometry=zi.fromExtent(_)),{extent:_,target:S,feature:a,key:h,name:y,sourceIndex:r}}function det(t,e,i,r,s,n,o){return t.features.map((a=>het(a,e,i,r,s,n,o)))}var U8;let Nl=U8=class extends zj{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>XKe({source:this,...e},i),this.getSuggestions=(e,i)=>KKe({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch((()=>{}))}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new U8({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?ie(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?ie(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return((e=(t=this.layer.fieldsIndex)==null?void 0:t.fields.find((i=>i.type==="string")))==null?void 0:e.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map((i=>{const r=t.getField(i);return(r==null?void 0:r.alias)||i})).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};u([A({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Nl.prototype,"displayField",void 0),u([A({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Nl.prototype,"exactMatch",void 0),u([A({value:null})],Nl.prototype,"layer",null),u([A()],Nl.prototype,"name",null),u([A({type:[String],json:{write:!0}})],Nl.prototype,"orderByFields",void 0),u([A()],Nl.prototype,"searchFields",void 0),u([A()],Nl.prototype,"searchTemplate",void 0),u([A()],Nl.prototype,"suggestionTemplate",void 0),Nl=U8=u([B("esri.widgets.Search.LayerSearchSource")],Nl);const Bg=Nl;function pet(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function fet(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let Pp=class extends pe{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};u([A({type:String,json:{write:!0}})],Pp.prototype,"address",void 0),u([A({type:Object,json:{write:!0}})],Pp.prototype,"attributes",void 0),u([A({type:Rt,json:{write:!0}})],Pp.prototype,"extent",void 0),u([A({type:ct,json:{write:!0}})],Pp.prototype,"location",void 0),u([A({type:Number,json:{write:!0}})],Pp.prototype,"score",void 0),Pp=u([B("esri.rest.support.AddressCandidate")],Pp);const Mfe=Pp,jj={type:String,json:{read:{source:"token"},write:{target:"token"}}};let tn=class extends pe{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};u([A({type:Object,json:{write:!0}})],tn.prototype,"address",void 0),u([A(jj)],tn.prototype,"apiKey",void 0),u([A({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],tn.prototype,"categories",void 0),u([A({type:String,json:{write:!0}})],tn.prototype,"countryCode",void 0),u([A({type:Boolean,json:{write:!0}})],tn.prototype,"forStorage",void 0),u([A({type:ct,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],tn.prototype,"location",void 0),u([A({type:["rooftop","street"],json:{write:!0}})],tn.prototype,"locationType",void 0),u([A({type:String,json:{write:!0}})],tn.prototype,"magicKey",void 0),u([A({type:Number,json:{write:!0}})],tn.prototype,"maxLocations",void 0),u([A({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],tn.prototype,"outFields",void 0),u([A({type:We,json:{read:{source:"outSR"},write:{target:"outSR"}}})],tn.prototype,"outSpatialReference",void 0),u([A({type:Rt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],tn.prototype,"searchExtent",void 0),tn=u([B("esri.rest.support.AddressToLocationsParameters")],tn),tn.from=fr(tn);const kfe=tn;async function Aet(t,e,i){e=kfe.from(e);const r=Qx(t),{address:s,...n}=e.toJSON(),o={...s,...n,f:"json"},a=pP({...r.query,...o}),l=dP(a,i),c=`${r.path}/findAddressCandidates`;return ei(c,l).then(met)}function met({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map((r=>{if(!r)return;const{extent:s,location:n}=r,o=!s||fet(s);return pet(n)&&o?(s&&(s.spatialReference=i),n&&(n.spatialReference=i),Mfe.fromJSON(r)):void 0})):[]}let Bh=class extends pe{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};u([A(jj)],Bh.prototype,"apiKey",void 0),u([A({type:ct,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null,r=i!==void 0;e.location=r?i:null}}}})],Bh.prototype,"location",void 0),u([A({type:["street","rooftop"],json:{write:!0}})],Bh.prototype,"locationType",void 0),u([A({type:We,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Bh.prototype,"outSpatialReference",void 0),Bh=u([B("esri.rest.support.LocationToAddressParameters")],Bh),Bh.from=fr(Bh);const Pfe=Bh;async function yet(t,e,i){e=Pfe.from(e);const r=Qx(t),s={...e.toJSON(),f:"json"},n=pP({...r.query,...s}),o=dP(n,i),a=`${r.path}/reverseGeocode`;return ei(a,o).then(get)}function get({data:t}){if(!t)return;const{address:e,location:i}=t,r=(e==null?void 0:e.Match_addr)||"";return Mfe.fromJSON({address:r,attributes:e||{},location:i,score:100})}let jg=class extends pe{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};u([A({type:Boolean,json:{write:!0}})],jg.prototype,"isCollection",void 0),u([A({type:String,json:{write:!0}})],jg.prototype,"magicKey",void 0),u([A({type:String,json:{write:!0}})],jg.prototype,"text",void 0),jg=u([B("esri.rest.support.SuggestionCandidate")],jg);const vet=jg;let ca=class extends pe{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};u([A(jj)],ca.prototype,"apiKey",void 0),u([A({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],ca.prototype,"categories",void 0),u([A({type:String,json:{write:!0}})],ca.prototype,"countryCode",void 0),u([A({type:ct,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],ca.prototype,"location",void 0),u([A({type:Number,json:{write:!0}})],ca.prototype,"maxSuggestions",void 0),u([A({type:We,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ca.prototype,"outSpatialReference",void 0),u([A({type:Rt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],ca.prototype,"searchExtent",void 0),u([A({type:String,json:{write:!0}})],ca.prototype,"text",void 0),ca=u([B("esri.rest.support.SuggestLocationsParameters")],ca),ca.from=fr(ca);const Lfe=ca;async function bet(t,e,i){const r=Qx(t),s={...(e=Lfe.from(e)).toJSON(),f:"json"},n=pP({...r.query,...s}),o=dP(n,i),a=`${r.path}/suggest`;return ei(a,o).then(wet)}function wet(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map((r=>new vet(r))):[]}const _et="Single Line Input",xet=3e5;function $et(t,e){return t.location?Met(t,e):ket(t,e)}function Rfe(t,e){var r;if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=xet?(r=t==null?void 0:t.extent)==null?void 0:r.center:null}async function Eet(t,e){const{source:i,spatialReference:r,view:s,suggestTerm:n,maxSuggestions:o,sourceIndex:a}=t,l=new Lfe,{apiKey:c,url:h}=i,y=Ofe(i,s),g=e==null?void 0:e.signal;if(!h)return null;c&&(l.apiKey=c),i.categories&&(l.categories=i.categories),r&&(l.outSpatialReference=r);const _=Rfe(s,i);if(_&&(l.location=_),!n.trim())return null;const{prefix:S="",suffix:E=""}=i,C=`${S}${n}${E}`;return l.text=C,y&&(l.searchExtent=y),l.maxSuggestions=o,i.countryCode&&(l.countryCode=i.countryCode),bet(h,l,{signal:g}).then((M=>Let(M,a)))}function Iet(t){return!!t&&/(?:geocode-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function Cet(t){return!!t&&/(?:\/servers\/[\da-z.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function cX(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const Tet="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function Met(t,e){const{source:i,spatialReference:r,location:s,sourceIndex:n,view:o}=t,{apiKey:a,url:l,zoomScale:c,defaultZoomScale:h}=i;if(l==null)return[];const y=o==null?void 0:o.scale,g=e==null?void 0:e.signal,_=new Pfe({location:s});a&&(_.apiKey=a),r&&(_.outSpatialReference=r);try{return Dfe([await yet(l,_,{signal:g})],{sourceIndex:n,scale:y,view:o,zoomScale:c,defaultZoomScale:h})}catch{return[]}}function Ofe(t,e){const{filter:i,withinViewEnabled:r}=t,s=e==null?void 0:e.scale,n=e==null?void 0:e.extent,o=i==null?void 0:i.geometry;return(o?Fj(o,e??void 0,s):void 0)||(r&&n?n:void 0)}async function ket(t,e){var Q;const{source:i,suggestResult:r,spatialReference:s,view:n,maxResults:o,sourceIndex:a}=t,l=i==null?void 0:i.zoomScale,c=i==null?void 0:i.defaultZoomScale;if(!((Q=r.text)==null?void 0:Q.trim()))return null;const y=!r.key&&i.prefix?i.prefix:"",g=!r.key&&i.suffix?i.suffix:"",_=`${y}${r.text}${g}`,S=new kfe,{apiKey:E,url:C}=i,M=n==null?void 0:n.scale,P=Ofe(i,n),D=e==null?void 0:e.signal;if(E&&(S.apiKey=E),!C)return null;i.categories&&(S.categories=i.categories),i.locationType&&(S.locationType=i.locationType),s&&(S.outSpatialReference=s);const F=Rfe(n,i);F&&(S.location=F),S.maxLocations=o,P&&(S.searchExtent=P),i.countryCode&&(S.countryCode=i.countryCode);const{key:U}=r,G=`${U}`;return U&&(S.magicKey=G),S.address={},S.address[i.singleLineFieldName||_et]=_,i.outFields&&(S.outFields=i.outFields),Aet(C,S,{signal:D}).then((W=>Dfe(W,{key:G,scale:M,sourceIndex:a,view:n,zoomScale:l,defaultZoomScale:c})))}function Pet(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function Let(t,e){return t.map((i=>Pet(i,e)))}function Ret(t,e){const{key:i,scale:r,sourceIndex:s,view:n,zoomScale:o,defaultZoomScale:a}=e,{attributes:l,extent:c,location:h,address:y}=t,g=new Qi({geometry:h,attributes:l}),_=c||h,S=_?Fj(_,n??void 0,r??void 0):void 0,E=S?typeof o=="number"?j8(S,n??void 0,o):typeof a=="number"&&(_==null?void 0:_.type)==="point"?j8(S,n??void 0,a):S:null,C=h?`${h.x},${h.y}`:"",M=y||C,P=g.clone();return E!=null&&(P.geometry=zi.fromExtent(E)),{extent:E,feature:g,target:P,key:i,name:M,sourceIndex:s}}function Dfe(t,e){return t.filter(Boolean).map((i=>Ret(i,e)))}var V8;let xn=V8=class extends zj{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>$et({source:this,...e},i),this.getSuggestions=(e,i)=>Eet({source:this,...e},i)}clone(){return new V8({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?ie(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?ie(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};u([A()],xn.prototype,"apiKey",void 0),u([A()],xn.prototype,"categories",void 0),u([A()],xn.prototype,"countryCode",void 0),u([A({json:{write:!0}})],xn.prototype,"defaultZoomScale",void 0),u([A()],xn.prototype,"localSearchDisabled",void 0),u([A()],xn.prototype,"locationType",void 0),u([A({json:{write:!0}})],xn.prototype,"name",void 0),u([A({json:{write:!0}})],xn.prototype,"placeholder",void 0),u([A()],xn.prototype,"searchTemplate",void 0),u([A({json:{write:!0}})],xn.prototype,"singleLineFieldName",void 0),u([A({json:{read:{source:"suggest"},write:{target:"suggest"}}})],xn.prototype,"suggestionsEnabled",void 0),u([A({json:{write:!0}})],xn.prototype,"url",void 0),u([A({json:{write:!0}})],xn.prototype,"zoomScale",void 0),xn=V8=u([B("esri.widgets.Search.LocatorSearchSource")],xn);const Nfe=xn,Ffe=()=>be.getLogger("esri.widgets.support.geolocationUtils"),Oet={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Det(){const t=!!ce("esri-geolocation");return t||Ffe().warn("geolocation-unsupported","Geolocation unsupported."),t}function Net(){const t=window.isSecureContext;return t||Ffe().warnOnce("insecure-context","Geolocation requires a secure origin."),t}function uX(){return Det()&&Net()}function Fet(t){return t??(t=Oet),new Promise(((i,r)=>{setTimeout((()=>r(new te("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(i,r,t??void 0)}))}function zet(t,e){const{position:i,view:r}=t,s=Bet(i),n=s==null?void 0:s.coords;if(!n)throw new te("geometry-service:no-coords","Geolocation has no coordinates");return Uet(jet(n),r,e)}function Bet(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed,toJSON:()=>({})};return t&&{coords:i,timestamp:t.timestamp,toJSON:()=>({})}}function jet({longitude:t,latitude:e,altitude:i}){return new ct({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function Uet(t,e,i){if(!e)return Promise.resolve(t);const r=e.spatialReference;return r.isWGS84?Promise.resolve(t):r.isWebMercator?Promise.resolve(Sd(t)):Vet(i).then((s=>{if(!s)throw new te("geometry-service:missing-url","Geometry service URL is missing");const n=new sd({geometries:[t],outSpatialReference:r});return _ue(s,n,i).then((o=>o[0]))}))}function Vet(t){if(li.geometryServiceUrl)return Promise.resolve(li.geometryServiceUrl);const e=Oe.getDefault();return e.load(t).catch((()=>{})).then((()=>{var i,r;return(r=(i=e.helperServices)==null?void 0:i.geometry)==null?void 0:r.url}))}function wn(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const Get=()=>Dk("esri/widgets/Search/t9n/Search"),hX="highlight",WC=qe.ofType({key:t=>t.layer?"layer":"locator",base:zj,typeMap:{layer:Bg,locator:Nfe}}),dX=We.WGS84,Het="esri/images/search/search-symbol-32.png",qet=/<[\s\S]*?>/g,jy=-1;var kb;let ti=(kb=class extends aue(dc.EventedMixin(et)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new WC,this.defaultSymbols={point:new $n({url:er(Het),size:24,width:24,height:24}),polyline:new br({color:[130,130,130,1],width:2}),polygon:new Pn({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=Oe.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new WC,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await Get();this.messages=i,this.defaultPopupTemplate=new Gu({title:i.searchResult,content:"{Match_addr}"})};e(),this.addHandles([He((()=>[this.includeDefaultSources,this.view,this.portal]),(()=>this._update()),wr),mk(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:jy}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:r}=this,s=typeof r=="function"?r.call(null,{sources:e,defaultSources:i}):r?i.concat(e):e,n=this._get("allSources")||new WC;return n.removeAll(),n.addMany(s.filter(Boolean)),n}get locationEnabled(){return this._get("locationEnabled")||uX()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=uX();if(e&&!i){const r=new te("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});be.getLogger(this).error(r)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:r}=this;if(i===jy)return r??"";const s=e.at(i);return(s==null?void 0:s.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),s=(async()=>{var n;try{await this.when();const o=await this._getResultsFromSources(r,i);if((n=i==null?void 0:i.signal)!=null&&n.aborted)return null;const a={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(a,o,r);const l=this._getFirstResult(a.results),c=r.location&&l?l.name:r.text,h=c==null?void 0:c.replace(qet,"");return this._set("searchTerm",h),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",a.results),this._set("resultCount",a.results.reduce(((y,g)=>{var _;return y+(((_=g.results)==null?void 0:_.length)??0)}),0)),this.emit("search-complete",a),await this._selectFirstResult(l),a}finally{this._clearSearching()}})();return this._searching=s,s}async searchNearby(e){if(!this.locationEnabled){const r=new te("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw be.getLogger(this).error(r),r}const i=(async()=>{try{const r=await Fet(),s=await zet({position:r,view:this.view},e);return await this.search(s,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const K=new te("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw be.getLogger(this).error(K),K}const{view:i}=this,r=wn(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),s=r!=null?this.allSources.at(r):null;if(!s){const K=new te("select:missing-source","Cannot select without a source.",{source:s});throw be.getLogger(this).error(K),K}const n=s instanceof Bg?this._getLayerSourcePopupTemplate(s):s.popupTemplate,o=s.resultSymbol||this._getDefaultSymbol(e),a=wn(s,"resultGraphicEnabled")?s.resultGraphicEnabled:this.resultGraphicEnabled,l=wn(s,"autoNavigate")?s.autoNavigate:this.autoNavigate,c=wn(s,"popupEnabled")?s.popupEnabled:this.popupEnabled,h=c?n||this.popupTemplate||this.defaultPopupTemplate:null,{feature:y}=e;if(!y){const K=new te("select:missing-feature","Cannot select without a feature.",{feature:y});throw be.getLogger(this).error(K),K}const{attributes:g,geometry:_,layer:S,sourceLayer:E}=y,C=_?lX(_):null,M={layerViewQuery:this._getLayerView(y),elevationQuery:i&&C!=null?qKe(C,i):Promise.resolve(C)},P=await Cm(M),D=P.layerViewQuery.value,F=P.elevationQuery.value;o instanceof Ti&&(o.text=e.name);const U=i&&l?e.target||e.extent:null;await(U!=null?this._goToSearchResult(U):Promise.resolve());const Q=D?y:new Qi({geometry:_,symbol:o,attributes:g,layer:S,sourceLayer:E,popupTemplate:h}),W=i==null?void 0:i.popup,X=W&&c&&Q.getEffectivePopupTemplate(W.defaultPopupTemplateEnabled);return X&&await i.openPopup({features:[Q],location:F}),D&&WKe(D)&&!X&&this._highlightFeature({graphic:Q,layerView:D}),!D&&a&&i&&i.graphics.push(Q),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",Q),this.emit("select-result",{result:e,source:s,sourceIndex:r}),e}async suggest(e,i,r){const s=e||this.searchTerm;this.emit("suggest-start",{searchTerm:s}),await this._suggestTimer(i,r);const n=await this._suggestImmediate(s,r);return this._set("suggestions",n==null?void 0:n.results),this._set("suggestionCount",(n==null?void 0:n.results.reduce(((o,a)=>{var l;return o+(((l=a.results)==null?void 0:l.length)??0)}),0))??null),this.emit("suggest-complete",n),n}async when(){await A0((()=>!this.updating))}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const r=this._updatingPromise=Cm([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await A0((()=>this.messages)),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,r;const e=(r=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:r.geocode;return e?e.map((s=>{var l;if(s.placefinding===!1)return;const n=cX(s.url)&&fie(s.url)?{url:Tet}:null,o=Nfe.fromJSON({...s,...n}),a=o.url;if(cX(a)||Cet(a)||Iet(a)){const c=o.outFields??["Addr_type","Match_addr","StAddr","City"],h=(o.placeholder||((l=this.messages)==null?void 0:l.placeholder))??"",y=typeof o.defaultZoomScale=="number"?o.defaultZoomScale:2500;o.singleLineFieldName="SingleLine",o.outFields=c,o.placeholder=h,o.defaultZoomScale=y}return o.singleLineFieldName?o:void 0})).filter(os):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach((e=>e==null?void 0:e.destroy())),this._createdFeatureLayers=[]}_getLayerSources(e,i){var s;const r=(s=this.view)==null?void 0:s.map;return e.map((n=>{const o=r.findLayerById(n.id);if(!o)return;const a=this._getLayerJSON(n),l=Bg.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then((c=>{l.layer=c})),l})).filter(os).toArray()}_getTableSources(e,i){var s;const r=(s=this.view)==null?void 0:s.map;return e.map((n=>{if(!n.id)return;const o=r.findTableById(n.id);if(!o)return;const a=this._getLayerJSON(n),l=Bg.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then((c=>{l.layer=c})),l})).filter(os).toArray()}_convertApplicationProperties(){var a,l,c;const e=(a=this.view)==null?void 0:a.map,i=(c=(l=e==null?void 0:e.applicationProperties)==null?void 0:l.viewing)==null?void 0:c.search;if(!i)return[];const{enabled:r,hintText:s,layers:n,tables:o}=i;return r?[...this._getLayerSources(n,s),...this._getTableSources(o,s)]:[]}async _getSubLayer(e,i){var n;if(await e.load(),!e.allSublayers)throw new Error;const r=e.allSublayers.find((o=>o.id===i.subLayer));if(!r)throw new Error;const s=await((n=r.createFeatureLayer)==null?void 0:n.call(r));if(!s)throw new Error;return this._createdFeatureLayers.push(s),s}async _getBuildingSubLayer(e,i){await e.load();const r=e.allSublayers.find((s=>s.id===i.subLayer));if((r==null?void 0:r.type)!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const s=new te("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return be.getLogger(this).error(s),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var n;const e=(n=this.view)==null?void 0:n.popup,{resultGraphic:i}=this;if(!e||!i)return;const r="selectedFeature"in e,s=r?e.selectedFeature:null;r&&s&&s===i&&e.close()}_suggestTimer(e,i){const r=e??this.suggestionDelay;return iz(r,null,i==null?void 0:i.signal)}_createLocationForSearch(e){return e instanceof Qi&&e.geometry?lX(e.geometry):e instanceof ct?e:Array.isArray(e)&&e.length===2?new ct({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&wn(e,"key")&&wn(e,"text")&&wn(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:s,selectedResult:n}=this,o=!e&&s&&n,a=o&&s.key===n.key&&s.sourceIndex===n.sourceIndex,l=o&&s.location;return a||l?s:{location:i,text:i?"":r,sourceIndex:null,key:null}}_getFirstResult(e){return YC(e,(({results:i})=>i==null?void 0:i[0]))??null}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){var n;await this.when();const r=await this._getSuggestionsFromSources(e,i);if((n=i==null?void 0:i.signal)!=null&&n.aborted)return null;const s={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(s,r),s}_formatSourceResponse(e,i,r){const s=(i==null?void 0:i.value)||[],n=i==null?void 0:i.error,o=this.allSources.at(r);if(n){const a={sourceIndex:r,source:o,error:n};e.errors.push(a),be.getLogger(this).error(n),e.numErrors++}else{const a={sourceIndex:r,source:o,results:s};e.results.push(a),e.numResults+=s.length}}_formatResponse(e,i,r){if(i)if(e.activeSourceIndex===jy){const s=r&&wn(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;i.forEach(((n,o)=>{const a=s!==void 0?s:o;this._formatSourceResponse(e,n,a)}))}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:r}=this,s=!e.location&&wn(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,n=[];if(!r.length){const o=new te("search:no-sources-defined","At least one source is required.",{allSources:r});throw be.getLogger(this).error(o),o}return s===jy?r.forEach(((o,a)=>{n.push(this._getResultsFromSource(e,a,i))})):n.push(this._getResultsFromSource(e,s,i)),Cm(n)}async _getSuggestionsFromSources(e,i){const{allSources:r,activeSourceIndex:s}=this,n=[];if(!r.length){const o=new te("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw be.getLogger(this).error(o),o}return s===jy?r.forEach(((o,a)=>{n.push(this._getSuggestionsFromSource(e,a,i))})):n.push(this._getSuggestionsFromSource(e,s,i)),Cm(n)}async _getResultsFromSource(e,i,r){var h,y;const s=i!=null?this.allSources.at(i):null;if(!s)return null;const{location:n=null}=e,o=((h=this.view)==null?void 0:h.spatialReference)||dX,a=wn(s,"maxResults")?s.maxResults:this.maxResults,l=!!(s instanceof Bg&&wn(s,"exactMatch"))&&s.exactMatch,{view:c}=this;return(y=s.getResults)==null?void 0:y.call(s,{view:c,sourceIndex:i,location:n,suggestResult:e,spatialReference:o,exactMatch:l,maxResults:a},r)}async _getSuggestionsFromSource(e,i,r){var l,c;const s=this.allSources.at(i);if(!s)return null;e??(e="");const n=wn(s,"suggestionsEnabled")?s.suggestionsEnabled:this.suggestionsEnabled,o=e==null?void 0:e.length,a=wn(s,"minSuggestCharacters")?s.minSuggestCharacters:this.minSuggestCharacters;if(n&&e.trim()&&o>=a){const h=((l=this.view)==null?void 0:l.spatialReference)||dX,y=wn(s,"maxSuggestions")?s.maxSuggestions:this.maxSuggestions,{view:g}=this,_=!!(s instanceof Bg&&wn(s,"exactMatch"))&&s.exactMatch;return(c=s.getSuggestions)==null?void 0:c.call(s,{view:g,sourceIndex:i,suggestTerm:e,spatialReference:h,maxSuggestions:y,exactMatch:_},r)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return wn(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){return YC(this.results??[],(({results:i,sourceIndex:r})=>(i==null?void 0:i.includes(e))?r:null))??null}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{signal:i.signal}};e||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var s;const{defaultSymbols:i}=this,r=(s=e.feature)==null?void 0:s.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(hX)}async _getLayerView(e){const{view:i}=this;if(!e||!i)return null;const{layer:r,sourceLayer:s}=e,n=r??s;return n&&n.type!=="building-component"&&n.type!=="subtype-sublayer"?(await i.when(),i.whenLayerView(n)):null}_highlightFeature(e){const{graphic:i,layerView:r}=e,{attributes:s,layer:n,sourceLayer:o}=i,a=n??o,{objectIdField:l}=a,c=(l&&(s==null?void 0:s[l]))??null,h=r.highlight(c??i);this.addHandles(h,hX)}_setResultFloor(e){var n,o,a;const{view:i}=this,r=(n=e.feature)==null?void 0:n.attributes,s=(o=e.feature)==null?void 0:o.sourceLayer;if(s&&"floorInfo"in s&&((a=s==null?void 0:s.floorInfo)!=null&&a.floorField)&&r){const l=r[s.floorInfo.floorField];i==null||i.emit("select-result-floor",l)}}},kb.ALL_INDEX=jy,kb);u([A()],ti.prototype,"_searching",void 0),u([A()],ti.prototype,"_updatingPromise",void 0),u([A({readOnly:!0,value:null})],ti.prototype,"activeSource",null),u([A()],ti.prototype,"activeSourceIndex",null),u([A()],ti.prototype,"allPlaceholder",null),u([A({readOnly:!0})],ti.prototype,"allSources",null),u([A()],ti.prototype,"autoNavigate",void 0),u([A()],ti.prototype,"autoSelect",void 0),u([A({type:Gu})],ti.prototype,"defaultPopupTemplate",void 0),u([A({readOnly:!0})],ti.prototype,"defaultSources",void 0),u([A()],ti.prototype,"defaultSymbols",void 0),u([A()],ti.prototype,"includeDefaultSources",void 0),u([A()],ti.prototype,"locationEnabled",null),u([A()],ti.prototype,"maxInputLength",void 0),u([A()],ti.prototype,"maxResults",void 0),u([A()],ti.prototype,"maxSuggestions",void 0),u([A()],ti.prototype,"messages",void 0),u([A()],ti.prototype,"minSuggestCharacters",void 0),u([A({readOnly:!0})],ti.prototype,"placeholder",null),u([A()],ti.prototype,"popupEnabled",void 0),u([A({type:Gu})],ti.prototype,"popupTemplate",void 0),u([A({type:Oe})],ti.prototype,"portal",void 0),u([A()],ti.prototype,"resultCount",void 0),u([A()],ti.prototype,"resultGraphicEnabled",void 0),u([A({readOnly:!0})],ti.prototype,"resultGraphic",void 0),u([A({readOnly:!0})],ti.prototype,"results",void 0),u([A({readOnly:!0})],ti.prototype,"selectedSuggestion",void 0),u([A()],ti.prototype,"searchAllEnabled",void 0),u([A({readOnly:!0})],ti.prototype,"selectedResult",void 0),u([A()],ti.prototype,"searchTerm",null),u([A({type:WC})],ti.prototype,"sources",void 0),u([A({readOnly:!0})],ti.prototype,"state",null),u([A()],ti.prototype,"suggestionDelay",void 0),u([A()],ti.prototype,"suggestionCount",void 0),u([A({readOnly:!0})],ti.prototype,"suggestions",void 0),u([A()],ti.prototype,"suggestionsEnabled",void 0),u([A({readOnly:!0})],ti.prototype,"updating",null),u([A()],ti.prototype,"view",void 0),u([A()],ti.prototype,"clear",null),ti=u([B("esri.widgets.Search.SearchViewModel")],ti);const Wet=ti;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */function pX(t){t==null||t.abort()}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const Qet=(t,e)=>i=>Zet(i,t);var dx;class Jet extends lB{constructor(i,r){super(i,r);at(this,dx);new ZB(this.component)}hostLoad(){Je(this,dx,He(()=>this.component.el.view,i=>{this.instance.view=i,this.instance.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostDestroy(){var i;(i=ue(this,dx))==null||i.remove(),super.hostDestroy()}}dx=new WeakMap;const Zet=Ux(Jet);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const qw="arcgis-search",Ww={base:qw,autocomplete:`${qw}__autocomplete`,dropdown:`${qw}__dropdown`,container:`${qw}__container`,form:`${qw}__form`},Yet=Li`@layer{arcgis-search{display:block}.arcgis-search{--arcgis-internal-search-width: 240px;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center;width:var(--arcgis-internal-search-width)}.arcgis-search__dropdown{--calcite-color-border-1: var(--calcite-color-border-input);--calcite-dropdown-width: var(--arcgis-internal-search-width);width:31px}.arcgis-search__autocomplete{flex:1}.arcgis-search__container{display:flex;position:relative;flex:1 0 100%;flex-flow:row nowrap;align-items:stretch}.arcgis-search__form{display:flex;flex:1 0;flex-flow:row nowrap;align-items:stretch;margin:0;padding:0}}`,Xet=Qet(Wet),nS=class nS extends zx{constructor(){super(...arguments),this.viewModel=Xet(this),this._currentLocationValue="search-use-current-location",this._autocompleteEl=void 0,this._searchResultRendererContainerEl=document.createElement("div"),this._searchResultRendererEl=void 0,this._suggestController=void 0,this._searchController=void 0,this._lastSearchTerm="",this.messages=hhe({}),this._setSearchResultRendererRef=e=>{this._searchResultRendererEl=e},this._locateFailed=!1,this._showNoResults=!1,this.position="top-left",this.goToOverride=this.viewModel.goToOverride,this.icon="search",this.activeMenu="none",this.activeSourceIndex=this.viewModel.activeSourceIndex,this.allPlaceholder=this.viewModel.allPlaceholder,this.allSources=this.viewModel.allSources,this.autoNavigateDisabled=this.viewModel.autoNavigate,this.autoSelectDisabled=this.viewModel.autoSelect,this.defaultSources=this.viewModel.defaultSources,this.disabled=!1,this.includeDefaultSourcesDisabled=this.viewModel.includeDefaultSources,this.locationDisabled=this.viewModel.locationEnabled,this.maxResults=this.viewModel.maxResults,this.maxSuggestions=this.viewModel.maxSuggestions,this.minSuggestCharacters=this.viewModel.minSuggestCharacters,this.popupDisabled=this.viewModel.popupEnabled,this.popupTemplate=this.viewModel.popupTemplate,this.portal=this.viewModel.portal,this.resultGraphic=this.viewModel.resultGraphic,this.resultGraphicDisabled=this.viewModel.resultGraphicEnabled,this.results=this.viewModel.results,this.searchAllDisabled=this.viewModel.searchAllEnabled,this.searchTerm=this.viewModel.searchTerm,this.selectedResult=this.viewModel.selectedResult,this.sources=this.viewModel.sources,this.suggestions=this.viewModel.suggestions,this.suggestionsDisabled=this.viewModel.suggestionsEnabled,this.autoDestroyDisabled=!1,this.state=this.viewModel.state,this.arcgisPropertyChange=JB()("state"),this.arcgisReady=Jb(),this.arcgisSearchClear=Er(()=>this.viewModel,"search-clear"),this.arcgisSearchComplete=Er(()=>this.viewModel,"search-complete"),this.arcgisSearchStart=Er(()=>this.viewModel,"search-start"),this.arcgisSelectResult=Er(()=>this.viewModel,"select-result"),this.arcgisSuggestComplete=Er(()=>this.viewModel,"suggest-complete"),this.arcgisSuggestStart=Er(()=>this.viewModel,"suggest-start")}get _isDisabled(){const{state:e}=this.viewModel;return e==="disabled"||e==="loading"||this.disabled}get _showCurrentLocation(){var e;return!this.locationDisabled&&!((e=this.searchTerm)!=null&&e.trim())}get _effectiveActiveMenu(){return this._isDisabled?"none":this.activeMenu}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}clear(){this._locateFailed=!1,this.viewModel.clear()}async destroy(){var e;await this.manager.destroy(),await((e=this._searchResultRendererEl)==null?void 0:e.destroy()),this._cancelQueries()}async search(e){this._cancelQueries();const i=new AbortController,{signal:r}=i;this._searchController=i;try{const s=await this.viewModel.search(e,{signal:r});return this._searchController!==i?void 0:(s!=null&&s.numResults||(this._showNoResults=!0,this.activeMenu="suggestion"),this._searchController=void 0,s)}catch{if(this._searchController!==i)return;this._searchController=void 0;return}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:r}=i;this._suggestController=i;try{const s=await this.viewModel.suggest(e,null,{signal:r});return this._suggestController!==i?void 0:(this._suggestController=void 0,s!=null&&s.numResults&&(this.activeMenu="suggestion",this._scrollToTopSuggestion()),s)}catch{return this._suggestController!==i||(this._suggestController=void 0),null}}async setFocus(){var e;await((e=this._autocompleteEl)==null?void 0:e.setFocus())}loaded(){this._addSearchResultRenderer(),this.manager.onLifecycle(()=>He(()=>{var e;return(e=this.viewModel)==null?void 0:e.defaultPopupTemplate},e=>{if(e){const i=document.createElement("div");i.appendChild(this._searchResultRendererContainerEl),e.content=i}},{initial:!0}))}_addSearchResultRenderer(){Qoe(Se`<arcgis-search-result-renderer auto-destroy-disabled .messages=${this.messages} .viewModel=${this.viewModel} ${ai(this._setSearchResultRendererRef)}></arcgis-search-result-renderer>`,this._searchResultRendererContainerEl)}_handleInputKeydown(e){e.key==="Tab"&&this._cancelSuggest()}_handleAutocompleteCreate(e){this._autocompleteEl=e}_handleCalciteAutocompleteTextInput(e){const i=e.target.inputValue;i!==this.viewModel.searchTerm&&(this.viewModel.searchTerm=i,i||this.clear(),this.suggest())}_handleAutocompleteOpen(){this.activeMenu="suggestion"}_handleAutocompleteClose(){this.activeMenu==="suggestion"&&(this.activeMenu="none")}_handleCalciteAutocompleteChange(e){var n,o,a;const i=e.target.value;if(i===this._currentLocationValue){this._useCurrentLocation();return}const r=JSON.parse(i),s=(a=(o=(n=this.viewModel.suggestions)==null?void 0:n.find(({sourceIndex:l})=>l===r.sourceIndex))==null?void 0:o.results)==null?void 0:a.find(({key:l})=>`${l}`==`${r.key}`);s&&this.search(s)}async _useCurrentLocation(){this._cancelQueries();const e=new AbortController,{signal:i}=e;this._searchController=e;try{await this.viewModel.searchNearby({signal:i})}catch(r){Zs(r)||(this._locateFailed=!0,this.activeMenu="suggestion")}finally{this._searchController=void 0}}_handleSourceOpen(){this.activeMenu="source"}_handleSourceClose(){this.activeMenu==="source"&&(this.activeMenu="none")}_handleSourceSelect(e){const i=e.target.selectedItems[0].getAttribute("data-source-index");i&&(this.viewModel.activeSourceIndex=Number.parseInt(i,10))}_cancelSuggest(){this.activeMenu="none",this._locateFailed=!1,this._showNoResults=!1,this._suggestController=pX(this._suggestController)}_cancelQueries(){this._cancelSuggest(),this._searchController=pX(this._searchController)}_scrollToTopSuggestion(){var e;(e=this._autocompleteEl)==null||e.scrollContentTo({top:0})}_formSubmit(e){e.preventDefault(),this.activeMenu="none",this._lastSearchTerm=this.searchTerm,this.searchTerm&&this.search()}_getSourceName(e){const{messages:i}=this,{allSources:r}=this.viewModel,s=r.at(e);return(e===-1?i.all:(s==null?void 0:s.name)||i.untitledSource)||""}render(){return this._addSearchResultRenderer(),Se`<div class=${Xc(O_(Ww.base,mfe.widget))}><div class=${Xc(Ww.container)}>${this._renderSourcesMenu()}${this._renderForm()}</div></div>`}_renderSourcesMenu(){const{messages:e,_isDisabled:i,_effectiveActiveMenu:r}=this,{allSources:s,searchAllEnabled:n}=this.viewModel;return s.length>1?Se`<calcite-dropdown class=${Xc(Ww.dropdown)} .disabled=${i} .open=${r==="source"} overlay-positioning=fixed @calciteDropdownClose=${this._handleSourceClose} @calciteDropdownOpen=${this._handleSourceOpen} @calciteDropdownSelect=${this._handleSourceSelect}><calcite-button appearance=outline-fill icon-start=caret-down kind=neutral .label=${e.searchIn} slot=trigger></calcite-button><calcite-dropdown-group .groupTitle=${e.searchIn}>${n?this._renderSource(-1):null}${s.map((o,a)=>this._renderSource(a)).toArray()}</calcite-dropdown-group></calcite-dropdown>`:null}_renderUseCurrentLocation(){const{_currentLocationValue:e}=this;return Se`<calcite-autocomplete-item .heading=${this.messages.useCurrentLocation??""} icon-start=gps-on .value=${e}></calcite-autocomplete-item>`}_renderAutocomplete(){const{_effectiveActiveMenu:e,messages:i,_isDisabled:r}=this,{maxInputLength:s,placeholder:n,searchTerm:o,state:a}=this.viewModel,l=this.label??i.searchButtonTitle??"";return Se`<calcite-autocomplete .autocomplete=${"off"} class=${Xc(Ww.autocomplete)} .disabled=${r} .icon=${this.icon} .inputValue=${o} .label=${l} .loading=${a==="searching"} .maxLength=${s} .name=${this.el.id} @keydown=${this._handleInputKeydown} .open=${e==="suggestion"} overlay-positioning=fixed .placeholder=${n} title=${(o?"":n)??CF} @calciteAutocompleteChange=${this._handleCalciteAutocompleteChange} @calciteAutocompleteClose=${this._handleAutocompleteClose} @calciteAutocompleteOpen=${this._handleAutocompleteOpen} @calciteAutocompleteTextChange=${this._handleCalciteAutocompleteTextInput} @calciteAutocompleteTextInput=${this._handleCalciteAutocompleteTextInput} ${ai(this._handleAutocompleteCreate)}>${this._renderSuggestions()}${this._renderNotices()}</calcite-autocomplete>`}_renderForm(){return Se`<form class=${Xc(Ww.form)} @submit=${this._formSubmit} role=search>${this._renderAutocomplete()}</form>`}_renderSuggestGroup(e){var i;return(i=e.results)==null?void 0:i.map(r=>this._renderSuggestion(r))}_renderSuggestions(){const{suggestions:e}=this.viewModel;return this._showNoResults?null:this._showCurrentLocation?this._renderUseCurrentLocation():e==null?void 0:e.map(i=>this._renderSuggestResults(i))}_renderSuggestResults(e){var l;const{allSources:i,activeSourceIndex:r}=this.viewModel,{sourceIndex:s}=e,n=(l=e.results)==null?void 0:l.length,o=i.length>1&&r===-1,a=this._getSourceName(s);return n&&o?Se`<calcite-autocomplete-item-group .heading=${a}>${this._renderSuggestGroup(e)}</calcite-autocomplete-item-group>`:this._renderSuggestGroup(e)}_renderSuggestion({key:e,sourceIndex:i,text:r}){const s={key:e,sourceIndex:i};return Se`<calcite-autocomplete-item .heading=${r??this.messages.untitledResult??""} .value=${JSON.stringify(s)}></calcite-autocomplete-item>`}_renderSource(e){const i=this._getSourceName(e);return Se`<calcite-dropdown-item data-source-index=${`${e}`} .selected=${e===this.viewModel.activeSourceIndex}>${i}</calcite-dropdown-item>`}_renderNoResultsWarning(e){const{messages:i}=this,r=e?I0(i.noResultsFoundForValue??"",{value:`"${e}"`}):i.noResultsFound;return Se`<calcite-notice icon=exclamation-mark-triangle kind=warning open slot=content-bottom><div slot=title>${i.noResults}</div><div slot=message>${r}</div></calcite-notice>`}_renderLocateError(){return Se`<calcite-notice icon=exclamation-mark-circle kind=danger open slot=content-bottom><div slot=message>${this.messages.locateError}</div></calcite-notice>`}_renderNotices(){return this._locateFailed?this._renderLocateError():this._showNoResults?this._renderNoResultsWarning(this._lastSearchTerm??this.viewModel.searchTerm):null}};nS.properties={_locateFailed:16,_showNoResults:16,_isDisabled:16,_showCurrentLocation:16,_effectiveActiveMenu:16,referenceElement:1,position:3,goToOverride:0,icon:1,activeMenu:1,activeSource:32,activeSourceIndex:9,allPlaceholder:1,allSources:0,autoNavigateDisabled:5,autoSelectDisabled:5,defaultSources:0,disabled:5,includeDefaultSourcesDisabled:5,locationDisabled:5,maxResults:9,maxSuggestions:9,minSuggestCharacters:9,popupDisabled:5,popupTemplate:0,portal:0,resultGraphic:0,resultGraphicDisabled:5,results:0,searchAllDisabled:5,searchTerm:1,selectedResult:0,sources:0,suggestions:0,suggestionsDisabled:5,autoDestroyDisabled:5,messageOverrides:0,label:1,state:3},nS.styles=Yet,nS.shadowRootOptions=M0;let G8=nS;jx("arcgis-search",G8);let Es=null,ao=null,No=null,eS=null,L3=null,R3=!1,Uy=null,H8=null,zfe="ugb_pct_rank";function Ket(t){t.when(()=>{t.watch("zoom",e=>{ao&&(e>=10?(ao.visible=!0,R3=!0,No.visible=!1):(ao.visible=!1,R3=!1,No.visible=!0))})})}function fX(t,e){console.time("CREATE HEX LAYER");const i=t.map(r=>{const s={type:"polygon",rings:VPe(r,!0)},n={type:"simple-fill",color:[227,139,79,.6],outline:{color:[255,255,255,.8],width:1}};return new Qi({geometry:s,symbol:n,attributes:{grid_id:r,hex_id:r,displayString:r,final_value_assets:0,final_value_harms:0}})});return console.timeEnd("CREATE HEX LAYER"),new rt({objectIdField:"grid_id",opacity:.85,popupEnabled:!0,popupTemplate:{outFields:["*"],content:function(r){return r.graphic.attributes.displayString}},fields:[{name:"grid_id",type:"oid"},{name:"hex_id",type:"string"},{name:"final_value_harms",type:"double"},{name:"final_value_assets",type:"double"},{name:"compositeKey",type:"string"},{name:"displayString",type:"string"}],renderer:HPe(),source:i})}async function oI(t,e,i){t.visible=!1;const{indicators_set:r,region:s}=i;Es.extent,t.source.items.map(o=>{const a=o.attributes.hex_id,l=eLe(s,e[a],r);return o.attributes.final_value_harms=l.avg_harms,o.attributes.final_value_assets=l.avg_assets,o.attributes.compositeKey=l.quartile_string,o.attributes.displayString=l.displayString,{attributes:o.attributes}});const n=5e4;for(let o=0;o<t.source.items.length;o+=n){const a=t.source.items.slice(o,o+n).map(l=>({attributes:l.attributes}));await t.applyEdits({updateFeatures:a})}}function ett(t){Es=t,Es.popup.dockEnabled=!0,Es.popup.featureNavigationEnabled=!1,Es.popup.autoCloseEnabled=!0,Es.popup.dockOptions={buttonEnabled:!1,breakpoint:!1},Es.popup.maxHeight=200,Es.on("click",async e=>{const i=await Es.hitTest(e);Uy&&(Uy.style.border="");let r=null;R3?r=ao:r=No;const s=i.results.filter(n=>n.graphic.layer===r);if(s.length>0){const n=s[0].graphic;n.attributes.hex_id;const o=n.attributes.compositeKey,a=document.getElementById(o);a.style.border="3px solid yellow",Uy=a}}),He(()=>Es.popup.visible,e=>{!e&&Uy&&(Uy.style.border="",Uy=null)})}function Bfe(t){H8=t}function ttt(t){zfe=t}async function AX(t,e){No&&ao&&jfe();const{hexStore:i,uniqueHexes:r,flags_data:s}=await JPe(t);e?(No=fX(r,Es.map),L3=i,Es.map.add(No),await Es.whenLayerView(No).then(()=>{const n=No.fullExtent;n&&Es.goTo(n.expand(1.15))})):setTimeout(()=>{ao=fX(r,Es.map),eS=i,Es.map.add(ao),ao.visible=!1},0)}function itt(){jfe(),Es.goTo({center:[-120.5,44],zoom:6})}function rtt(){if(!ao||!eS||!H8)return;const t={indicators_set:new Set(H8),region:zfe};R3?(oI(ao,eS,t),ao.visible=!0,oI(No,L3,t)):(oI(No,L3,t),No.visible=!0,oI(ao,eS,t))}function jfe(){ao&&Es.map.layers.remove(ao),No&&Es.map.layers.remove(No),ao=null,eS=null,No=null,L3=null}const l1=document.querySelector("#indicator-combobox"),stt=document.querySelector("#place-combobox"),mX=document.querySelector("#comparison-region calcite-radio-button-group"),ntt=document.querySelector("arcgis-map"),Uj=ntt.view,ott=document.getElementById("updateIndicatorsBtn");ett(Uj);Ket(Uj);const Ufe=document.getElementById("legend-container");Uj.ui.add(Ufe,"bottom-left");Ufe.style.display="block";YPe(l1,t=>{Bfe(t)});l1.addEventListener("calciteComboboxChange",()=>{l1.selectedItems.length===0&&Bfe([])});l1.selectionDisplay="single";l1.selectAllEnabled=!0;l1.requestUpdate();ZPe(stt,async t=>{t?(await AX(`${t}_low.parquet`,!0),AX(`${t}.parquet`,!1)):itt()});XPe(mX,()=>{ttt(mX.selectedItem.value)});ott.addEventListener("click",()=>{rtt()});export{PJ as $,mot as A,pe as B,Oe as C,WI as D,B7 as E,iN as F,vN as G,yot as H,Yr as I,$G as J,EG as K,os as L,u as M,A as N,Cue as O,B as P,Sx as Q,Rt as R,Gg as S,Ne as T,Qx as U,dP as V,owe as W,pP as X,ei as Y,na as Z,Ie as _,z7 as a,zit as a$,YBe as a0,_E as a1,rr as a2,Kf as a3,wP as a4,$e as a5,Se as a6,Li as a7,Sr as a8,cDe as a9,oMe as aA,cc as aB,tC as aC,Frt as aD,brt as aE,Qi as aF,Ju as aG,mCe as aH,yCe as aI,gCe as aJ,ie as aK,Ss as aL,Wf as aM,tSe as aN,I1 as aO,K_e as aP,z$e as aQ,fse as aR,K$e as aS,Jnt as aT,_a as aU,qe as aV,L4e as aW,FIe as aX,DIe as aY,y0 as aZ,Vot as a_,Aot as aa,Fn as ab,vx as ac,He as ad,ce as ae,cTe as af,Kxe as ag,Qnt as ah,Ot as ai,Mi as aj,ST as ak,m0 as al,li as am,Q8 as an,iz as ao,Jr as ap,Jc as aq,be as ar,Gnt as as,qot as at,ut as au,EFe as av,ct as aw,ir as ax,gTe as ay,Xk as az,Ewe as b,Dnt as b$,x1 as b0,w0 as b1,Qu as b2,uo as b3,$3e as b4,U3e as b5,Xle as b6,dFe as b7,RFe as b8,c6 as b9,u_e as bA,ust as bB,fde as bC,N0 as bD,dt as bE,m1e as bF,it as bG,E1 as bH,Pl as bI,nIe as bJ,fr as bK,AC as bL,k0 as bM,bS as bN,pr as bO,ac as bP,tz as bQ,Hi as bR,bx as bS,Ku as bT,qne as bU,_t as bV,A1e as bW,nl as bX,t1e as bY,WGe as bZ,E0 as b_,D3e as ba,_oe as bb,P3e as bc,Soe as bd,woe as be,V3e as bf,N3e as bg,S3e as bh,E3e as bi,Fk as bj,XNe as bk,w1 as bl,rSe as bm,sSe as bn,nSe as bo,Ete as bp,F$e as bq,xFe as br,gS as bs,KM as bt,Hr as bu,cn as bv,yv as bw,fx as bx,RV as by,Xst as bz,pMe as c,mt as c$,Kbe as c0,Hf as c1,qGe as c2,hte as c3,cw as c4,Md as c5,UQ as c6,IM as c7,xht as c8,EH as c9,tit as cA,uce as cB,Jm as cC,fa as cD,T1 as cE,Xtt as cF,Cm as cG,iie as cH,ldt as cI,Io as cJ,Me as cK,tu as cL,en as cM,rU as cN,Zs as cO,Xxe as cP,Vs as cQ,tt as cR,JMe as cS,md as cT,QMe as cU,Bo as cV,Mtt as cW,eit as cX,F0 as cY,Za as cZ,m1 as c_,$H as ca,to as cb,Uut as cc,g8e as cd,UWe as ce,wde as cf,$Q as cg,xQ as ch,IQ as ci,EQ as cj,Br as ck,Yot as cl,Jot as cm,Zot as cn,Tr as co,zi as cp,co as cq,uS as cr,uE as cs,i7 as ct,mle as cu,Dm as cv,X2e as cw,Qr as cx,Ai as cy,iF as cz,j9 as d,ze as d$,gRe as d0,Prt as d1,Rrt as d2,Lrt as d3,Ort as d4,Drt as d5,Nrt as d6,Bn as d7,N5 as d8,Xm as d9,SM as dA,O8e as dB,ns as dC,EI as dD,Mx as dE,e4 as dF,lst as dG,Rst as dH,ent as dI,Pd as dJ,hre as dK,Kc as dL,eo as dM,ys as dN,u_ as dO,gD as dP,mtt as dQ,n8e as dR,OX as dS,et as dT,UBe as dU,cdt as dV,yGe as dW,ri as dX,Pr as dY,EVe as dZ,GS as d_,e8e as da,dut as db,Jt as dc,fut as dd,Qae as de,D1 as df,ll as dg,Oit as dh,fk as di,wr as dj,Gu as dk,Ake as dl,no as dm,hn as dn,tr as dp,xa as dq,C5 as dr,hr as ds,TT as dt,I5 as du,M5 as dv,fce as dw,ht as dx,NS as dy,gr as dz,dot as e,Lme as e$,Che as e0,H_ as e1,Phe as e2,hpt as e3,F1 as e4,tAt as e5,iAt as e6,IVe as e7,ZHe as e8,ISe as e9,IS as eA,p7 as eB,Lbe as eC,Fit as eD,Vu as eE,Hk as eF,$1 as eG,vbe as eH,cte as eI,qbe as eJ,jit as eK,ma as eL,ute as eM,_z as eN,Bit as eO,irt as eP,vie as eQ,Ywe as eR,Jz as eS,$k as eT,Hle as eU,Yle as eV,Qle as eW,eFe as eX,Zle as eY,f0 as eZ,Sa as e_,jst as ea,int as eb,i2e as ec,eAt as ed,J4 as ee,Nat as ef,Dat as eg,gx as eh,dc as ei,Yst as ej,A_e as ek,Bc as el,Zit as em,VX as en,UX as eo,Sk as ep,xk as eq,n2e as er,Yz as es,Xz as et,s2e as eu,Dx as ev,ES as ew,F7 as ex,Jit as ey,Iie as ez,wBe as f,Nc as f$,ptt as f0,Yte as f1,Ou as f2,Uz as f3,Xf as f4,_rt as f5,k_e as f6,Gle as f7,Jf as f8,gFe as f9,Lk as fA,cr as fB,SIe as fC,bIe as fD,br as fE,Wr as fF,dr as fG,$n as fH,Pn as fI,vIe as fJ,u$e as fK,FEe as fL,c$e as fM,kd as fN,Hu as fO,nFe as fP,oFe as fQ,TFe as fR,pDe as fS,wIe as fT,xt as fU,oS as fV,fd as fW,g0 as fX,jo as fY,Qke as fZ,Ua as f_,M$e as fa,KNe as fb,Jle as fc,CFe as fd,Kit as fe,OT as ff,sk as fg,nk as fh,pK as fi,yi as fj,Uot as fk,Art as fl,wwe as fm,bG as fn,MT as fo,Ye as fp,qB as fq,Ydt as fr,q6 as fs,Brt as ft,Xnt as fu,Pse as fv,Hke as fw,kke as fx,Fke as fy,Loe as fz,Ts as g,kj as g$,Pu as g0,tpt as g1,Vnt as g2,lP as g3,iPe as g4,gT as g5,Kt as g6,rt as g7,Krt as g8,iMe as g9,hl as gA,Ho as gB,Jdt as gC,ai as gD,$a as gE,Ea as gF,Jx as gG,oi as gH,Ge as gI,Ia as gJ,xz as gK,ctt as gL,BS as gM,Pj as gN,qr as gO,as as gP,kf as gQ,e0 as gR,Ftt as gS,Ed as gT,Ntt as gU,Crt as gV,Trt as gW,mY as gX,Mj as gY,UP as gZ,r$ as g_,ast as ga,h_e as gb,Yf as gc,zf as gd,Ti as ge,np as gf,IV as gg,ln as gh,AS as gi,GMe as gj,Gt as gk,QK as gl,pat as gm,xit as gn,$it as go,xx as gp,qs as gq,Aat as gr,nC as gs,Sit as gt,yat as gu,Eit as gv,Sd as gw,utt as gx,htt as gy,Rn as gz,rk as h,pse as h$,bd as h0,n1 as h1,MYe as h2,$P as h3,Qdt as h4,RS as h5,cle as h6,Mr as h7,kn as h8,Ei as h9,Jst as hA,Nst as hB,est as hC,RX as hD,SR as hE,D0 as hF,aS as hG,aIe as hH,ii as hI,h1 as hJ,p1 as hK,Ltt as hL,Js as hM,upt as hN,af as hO,XBe as hP,fNe as hQ,rrt as hR,eNe as hS,vFe as hT,Hrt as hU,gV as hV,$ie as hW,Eie as hX,kr as hY,ert as hZ,S$e as h_,al as ha,zo as hb,Wrt as hc,Vb as hd,kne as he,wB as hf,zEe as hg,SFe as hh,Bb as hi,d_ as hj,fK as hk,x0e as hl,_pt as hm,Nme as hn,Lpt as ho,II as hp,GN as hq,Vg as hr,Ek as hs,cst as ht,U0 as hu,k4e as hv,Dut as hw,er as hx,cj as hy,tqe as hz,dMe as i,Fne as i$,uFe as i0,Ase as i1,e2e as i2,BTe as i3,Ae as i4,C$e as i5,zTe as i6,zk as i7,dse as i8,Att as i9,Iwe as iA,qz as iB,Twe as iC,Mwe as iD,v0 as iE,wk as iF,j0 as iG,Oke as iH,KEe as iI,Tke as iJ,cIe as iK,Jke as iL,YU as iM,tte as iN,sPe as iO,mTe as iP,EIe as iQ,Vk as iR,xq as iS,Ki as iT,yN as iU,Uk as iV,uke as iW,Fx as iX,gIe as iY,Vc as iZ,Zke as i_,uI as ia,xtt as ib,bFe as ic,cFe as id,SJ as ie,PT as ig,Mst as ih,Tst as ii,oSe as ij,Hie as ik,Xi as il,fYe as im,que as io,FM as ip,Fpe as iq,zY as ir,kDe as is,TDe as it,IDe as iu,zF as iv,ho as iw,bRe as ix,dtt as iy,Yn as iz,A0 as j,sNe as j$,Hme as j0,TV as j1,zc as j2,Awe as j3,qu as j4,sc as j5,CS as j6,P7 as j7,$Ie as j8,xIe as j9,g6 as jA,hht as jB,Zb as jC,cht as jD,i0 as jE,uht as jF,Dl as jG,yC as jH,SQ as jI,bct as jJ,Ple as jK,EB as jL,t6 as jM,P0 as jN,oNe as jO,Lle as jP,WQ as jQ,wQ as jR,L0e as jS,cl as jT,V as jU,Pb as jV,Nz as jW,oie as jX,Xrt as jY,iNe as jZ,Vr as j_,_Ie as ja,u2e as jb,b2e as jc,Die as jd,gat as je,Lj as jf,jP as jg,RB as jh,xot as ji,xst as jj,lM as jk,vst as jl,NY as jm,ME as jn,BKe as jo,Rtt as jp,C8e as jq,EM as jr,$M as js,oht as jt,el as ju,MQ as jv,xM as jw,CQ as jx,A6 as jy,pce as jz,wt as k,rTe as k$,kle as k0,ltt as k1,U_ as k2,m6 as k3,$le as k4,A7 as k5,ZX as k6,iSe as k7,rFe as k8,LFe as k9,lXe as kA,Dht as kB,Zdt as kC,vYe as kD,Qne as kE,tat as kF,Ine as kG,oz as kH,eh as kI,tg as kJ,bs as kK,Jat as kL,yIe as kM,og as kN,Pke as kO,Ko as kP,Hl as kQ,ipt as kR,A1 as kS,is as kT,Wi as kU,ya as kV,wpt as kW,bpt as kX,vhe as kY,CO as kZ,Wn as k_,OFe as ka,dNe as kb,z3e as kc,t2e as kd,Cne as ke,eSe as kf,tP as kg,l2e as kh,aM as ki,sFe as kj,qle as kk,tT as kl,G0 as km,fFe as kn,Gs as ko,Sm as kp,tye as kq,pxe as kr,AMe as ks,iIe as kt,qCe as ku,bne as kv,iTe as kw,Ute as kx,Jte as ky,FB as kz,rat as l,iit as l$,aTe as l0,cne as l1,Zk as l2,BT as l3,Gi as l4,dTe as l5,GCe as l6,HCe as l7,QCe as l8,JCe as l9,QKe as lA,ept as lB,Yse as lC,bTe as lD,bQ as lE,Tut as lF,Cut as lG,Iut as lH,Eut as lI,kut as lJ,Mut as lK,$ut as lL,xut as lM,aNe as lN,iU as lO,Sut as lP,Ait as lQ,t7 as lR,j2e as lS,p_e as lT,f_e as lU,Z8 as lV,Ctt as lW,Y8 as lX,Ttt as lY,T1e as lZ,E0e as l_,oTe as la,ZCe as lb,YCe as lc,XCe as ld,KCe as le,eTe as lf,tTe as lg,Bs as lh,Qme as li,ro as lj,Pne as lk,ms as ll,Srt as lm,$ae as ln,qye as lo,Ett as lp,Itt as lq,$tt as lr,Fd as ls,lwe as lt,Gk as lu,FX as lv,WKe as lw,Ic as lx,ztt as ly,NG as lz,I4 as m,Gbe as m$,Hot as m0,Got as m1,Sne as m2,wne as m3,Cwe as m4,lpt as m5,a7 as m6,Dst as m7,Lst as m8,TNe as m9,z0e as mA,F0e as mB,ist as mC,K3e as mD,vtt as mE,rqe as mF,$ht as mG,di as mH,Irt as mI,px as mJ,dn as mK,_P as mL,se as mM,I0 as mN,Uf as mO,Fht as mP,Vo as mQ,Tze as mR,Oze as mS,Bme as mT,mrt as mU,jte as mV,bk as mW,wrt as mX,MUe as mY,YJ as mZ,Pf as m_,MNe as ma,cZ as mb,Wle as mc,o4e as md,sU as me,Spt as mf,Qp as mg,hot as mh,hrt as mi,Y2e as mj,Gie as mk,Ylt as ml,jX as mm,F2e as mn,H2e as mo,Cx as mp,qrt as mq,HM as mr,oV as ms,q8 as mt,kIe as mu,sst as mv,sz as mw,lit as mx,ait as my,WEe as mz,sd as n,Z8e as n$,Hbe as n0,Kft as n1,cre as n2,Wie as n3,Yrt as n4,xre as n5,CB as n6,Lne as n7,uP as n8,wlt as n9,rle as nA,Gx as nB,dit as nC,vat as nD,ic as nE,B_ as nF,nTe as nG,Cit as nH,fTe as nI,jot as nJ,Bot as nK,P_ as nL,bf as nM,vS as nN,Wke as nO,Rot as nP,Wft as nQ,ENe as nR,Out as nS,A8e as nT,VQ as nU,but as nV,E8e as nW,_f as nX,W8e as nY,TAt as nZ,J8e as n_,blt as na,lle as nb,ole as nc,N5e as nd,z5e as ne,yA as nf,BX as ng,btt as nh,TQ as ni,dht as nj,FQ as nk,pht as nl,Ii as nm,wft as nn,ku as no,nv as np,dft as nq,hft as nr,hP as ns,Id as nt,Du as nu,Ln as nv,i_ as nw,qut as nx,gB as ny,KF as nz,idt as o,UF as o$,Mu as o0,MAt as o1,F1e as o2,$rt as o3,Wot as o4,NEe as o5,jT as o6,_$e as o7,x$e as o8,k$e as o9,Xte as oA,Vz as oB,frt as oC,Cie as oD,cV as oE,cie as oF,vze as oG,cat as oH,B0 as oI,Zc as oJ,FMe as oK,srt as oL,Pst as oM,kst as oN,Bz as oO,B$e as oP,N$e as oQ,hFe as oR,D$e as oS,uSe as oT,rNe as oU,Yit as oV,tze as oW,aie as oX,Nb as oY,S1 as oZ,yrt as o_,so as oa,Vh as ob,Wp as oc,$s as od,MSe as oe,i2 as of,DNe as og,X3e as oh,Cv as oi,eke as oj,Hx as ok,G5e as ol,Sre as om,Y3e as on,tke as oo,aMe as op,Qrt as oq,Z2e as or,i_e as os,kx as ot,Px as ou,Lx as ov,I$e as ow,$$e as ox,E$e as oy,zX as oz,Wu as p,Jft as p$,Pae as p0,ppt as p1,tct as p2,ect as p3,a4e as p4,ZWe as p5,$ft as p6,MB as p7,Gft as p8,RCe as p9,nNe as pA,trt as pB,Dft as pC,Tk as pD,Mk as pE,Nft as pF,_M as pG,Oft as pH,Zie as pI,Yft as pJ,m8e as pK,Nut as pL,Fut as pM,Zft as pN,On as pO,Eot as pP,Iot as pQ,$ot as pR,mj as pS,lNe as pT,Vft as pU,dpt as pV,q0 as pW,vVe as pX,xw as pY,Jl as pZ,Qit as p_,LCe as pa,T7 as pb,JIe as pc,npt as pd,Ert as pe,dz as pf,Qh as pg,Gb as ph,DEe as pi,eIe as pj,tIe as pk,lIe as pl,yke as pm,Rke as pn,Q7 as po,Ay as pp,Dme as pq,kQ as pr,Vp as ps,gze as pt,nht as pu,_Q as pv,I8e as pw,DQ as px,OQ as py,rc as pz,grt as q,EV as q$,Qft as q0,qft as q1,Hft as q2,zft as q3,fj as q4,GE as q5,Nde as q6,Bft as q7,Fft as q8,io as q9,Cs as qA,AP as qB,Sle as qC,Ele as qD,F4e as qE,wct as qF,W4e as qG,_ct as qH,k1 as qI,ar as qJ,HIe as qK,GIe as qL,hi as qM,Bp as qN,nGe as qO,cCe as qP,oGe as qQ,one as qR,Wl as qS,Xl as qT,Yg as qU,y$e as qV,Tnt as qW,CP as qX,an as qY,Fo as qZ,Us as q_,$He as qa,Uft as qb,oqe as qc,Npt as qd,not as qe,WOe as qf,mre as qg,oot as qh,dnt as qi,pnt as qj,fnt as qk,il as ql,jj as qm,Ipt as qn,Cpt as qo,km as qp,cf as qq,Ept as qr,Ez as qs,Ktt as qt,$pt as qu,xpt as qv,Np as qw,_tt as qx,xle as qy,K7e as qz,We as r,e_e as r$,mSe as r0,wSe as r1,tnt as r2,eqe as r3,R0e as r4,Btt as r5,pde as r6,mde as r7,W0 as r8,Qf as r9,J5e as rA,Zrt as rB,SDe as rC,uot as rD,jrt as rE,Ad as rF,Kn as rG,pot as rH,Ott as rI,u4e as rJ,eu as rK,QQ as rL,wce as rM,Zut as rN,Yut as rO,Xut as rP,Kut as rQ,zut as rR,jut as rS,C1e as rT,OS as rU,But as rV,Q8e as rW,v2e as rX,Nu as rY,w4e as rZ,vB as r_,cB as ra,H5e as rb,l4e as rc,Xlt as rd,wO as re,Mnt as rf,cM as rg,n4e as rh,IFe as ri,W5e as rj,kT as rk,zrt as rl,YMe as rm,Iit as rn,bMe as ro,s3e as rp,xat as rq,Ld as rr,Rd as rs,ul as rt,Lf as ru,_We as rv,eht as rw,Fie as rx,s4e as ry,Q5e as rz,te as s,Tit as s$,Jrt as s0,LS as s1,wK as s2,LW as s3,R5e as s4,O5e as s5,TWe as s6,HZ as s7,CWe as s8,cqe as s9,gP as sA,Mze as sB,gst as sC,Is as sD,jk as sE,QJ as sF,Oat as sG,vut as sH,h8 as sI,Cft as sJ,zA as sK,Adt as sL,JEe as sM,Dot as sN,Nit as sO,Mit as sP,Lit as sQ,kit as sR,Rit as sS,Pit as sT,Dit as sU,lo as sV,RD as sW,tge as sX,_ht as sY,Not as sZ,G9 as s_,Ik as sa,jft as sb,QT as sc,hce as sd,Mat as se,_8e as sf,w8e as sg,lce as sh,Mde as si,Tft as sj,Mft as sk,cce as sl,IH as sm,uj as sn,qx as so,jf as sp,L5 as sq,Nnt as sr,Urt as ss,Klt as st,ov as su,Jae as sv,O0e as sw,krt as sx,Mrt as sy,g2e as sz,rPe as t,Lb as t$,I2e as t0,E2e as t1,Vrt as t2,LX as t3,nye as t4,kat as t5,rF as t6,Pat as t7,Eat as t8,g3e as t9,y3e as tA,xft as tB,Gut as tC,Eft as tD,$at as tE,qWe as tF,HWe as tG,Ede as tH,R8e as tI,CQe as tJ,Vut as tK,HQ as tL,wut as tM,_ut as tN,XHe as tO,QHe as tP,Wut as tQ,Qut as tR,tht as tS,iht as tT,Put as tU,rht as tV,sht as tW,f8e as tX,S8e as tY,y8e as tZ,Lce as t_,Zr as ta,bhe as tb,Sat as tc,coe as td,eP as te,Tat as tf,_ft as tg,Cat as th,Tt as ti,b3e as tj,A3e as tk,Iat as tl,YT as tm,k_ as tn,ZT as to,doe as tp,hoe as tq,YHe as tr,d3e as ts,h3e as tt,cF as tu,Hut as tv,f3e as tw,Nx as tx,b8e as ty,Sft as tz,iat as u,zme as u$,Jut as u0,s8e as u1,vrt as u2,cNe as u3,yZ as u4,rHe as u5,r1e as u6,kht as u7,Pht as u8,BC as u9,Lnt as uA,KMe as uB,u8e as uC,Tie as uD,nst as uE,h2 as uF,qnt as uG,Ixe as uH,Mot as uI,Tot as uJ,vQ as uK,spt as uL,Sht as uM,bht as uN,wht as uO,vht as uP,ght as uQ,H8e as uR,bce as uS,Rut as uT,Lut as uU,U8e as uV,zO as uW,DWe as uX,gut as uY,tv as uZ,Pwe as u_,Iz as ua,L1e as ub,Nce as uc,dS as ud,fS as ue,Db as uf,n1e as ug,ktt as uh,Jse as ui,j1e as uj,U1e as uk,Pz as ul,aue as um,lX as un,ost as uo,nct as up,q$e as uq,ale as ur,vre as us,gK as ut,H$e as uu,VTe as uv,K5e as uw,apt as ux,opt as uy,NUe as uz,_ue as v,pne as v$,PFe as v0,aht as v1,lht as v2,Wst as v3,Qst as v4,pNe as v5,iEe as v6,tEe as v7,gre as v8,$oe as v9,tst as vA,Zst as vB,Hb as vC,BOe as vD,ONe as vE,zle as vF,hit as vG,Q$ as vH,fH as vI,Vl as vJ,Cot as vK,Hs as vL,Ahe as vM,cpt as vN,YN as vO,kAt as vP,pct as vQ,DT as vR,Vst as vS,v$e as vT,Ost as vU,WVe as vV,_at as vW,yhe as vX,Wg as vY,lSe as vZ,$st as v_,sge as va,Ace as vb,Uc as vc,vct as vd,hat as ve,dat as vf,fat as vg,HT as vh,U$e as vi,eEe as vj,boe as vk,bst as vl,Ynt as vm,v5e as vn,dct as vo,lCe as vp,Kst as vq,Bst as vr,Gst as vs,Ust as vt,Ptt as vu,lnt as vv,ant as vw,Stt as vx,IIe as vy,Fst as vz,qk as w,Qhe as w0,Jhe as w1,zCe as w2,gtt as w3,Ome as w4,ytt as w5,zst as w6,fht as w7,i4e as w8,Xit as w9,fW as wA,vpt as wB,j$e as wC,V0 as wD,Oot as wE,Xot as wF,eat as wG,Xat as wH,Eht as wI,Wdt as wJ,V9e as wK,QB as wL,rAt as wM,WQe as wN,nAt as wO,vAt as wP,bAt as wQ,wAt as wR,_At as wS,SAt as wT,xAt as wU,$At as wV,EAt as wW,IAt as wX,CAt as wY,j5e as wa,aSe as wb,Ppt as wc,rit as wd,mk as we,Apt as wf,Y6 as wg,Dk as wh,Sst as wi,mpt as wj,ypt as wk,Hst as wl,_st as wm,mW as wn,wst as wo,rst as wp,AW as wq,D7 as wr,XX as ws,Dtt as wt,qst as wu,L$e as wv,T$e as ww,gpt as wx,fpt as wy,TP as wz,fot as x,xrt as y,zIe as z};
