const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./lyr3DWorker-nGpoOkZ2.js","./_commonjsHelpers-BcY2WciP.js","./index-BbP3371Q.js"])))=>i.map(i=>d[i]);
import{_ as B,fK as M}from"./index-DzoQLc5A.js";import"https://js.arcgis.com/map-components/4.33/arcgis-map-components.esm.js";var g,N,m,f,d,S,b,I,U,L,D,h,R,T,a;(function(e){e.U8="U8",e.I8="I8",e.U16="U16",e.I16="I16",e.U32="U32",e.I32="I32",e.F32="F32",e.F64="F64",e.Utf8String="Utf8String",e.NotSet="NotSet"})(g||(g={})),(function(e){e.Png="Png",e.Jpeg="Jpeg",e.Dds="Dds",e.Raw="Raw",e.Dxt1="Dxt1",e.Dxt5="Dxt5",e.Bc7="Bc7",e.Basis="Basis",e.Etc1="Etc1",e.Etc2="Etc2",e.Astc="Astc",e.Pvrtc="Pvrtc",e.NotSet="NotSet"})(N||(N={})),(function(e){e.Position="Position",e.Normal="Normal",e.TexCoord="TexCoord",e.Color="Color",e.Tangent="Tangent",e.FeatureIndex="FeatureIndex",e.UvRegion="UvRegion",e.FeatureVariable="FeatureVariable",e.NotSet="NotSet"})(m||(m={})),(function(e){e.Opaque="Opaque",e.Mask="Mask",e.Blend="Blend"})(f||(f={})),(function(e){e.None="None",e.Mask="Mask",e.Alpha="Alpha",e.PreMultAlpha="PreMultAlpha",e.NotSet="NotSet"})(d||(d={})),(function(e){e.Points="Points",e.Lines="Lines",e.LineStrip="LineStrip",e.Triangles="Triangles",e.TriangleStrip="TriangleStrip",e.NotSet="NotSet"})(S||(S={})),(function(e){e.None="None",e.WrapXBit="WrapXBit",e.WrapYBit="WrapYBit",e.WrapXy="WrapXy",e.NotSet="NotSet"})(b||(b={})),(function(e){e.Linear="Linear",e.Nearest="Nearest",e.NotSet="NotSet"})(I||(I={})),(function(e){e.Linear="Linear",e.Nearest="Nearest",e.NearestMipmapNearest="NearestMipmapNearest",e.LinearMipmapNearest="LinearMipmapNearest",e.NearestMipmapLinear="NearestMipmapLinear",e.LinearMipmapLinear="LinearMipmapLinear",e.NotSet="NotSet"})(U||(U={})),(function(e){e.FeatureId="FeatureId",e.GlobalUid="GlobalUid",e.UnspecifiedDateTime="UnspecifiedDateTime",e.EcmaIso8601DateTime="EcmaIso8601DateTime",e.EcmaIso8601DateOnly="EcmaIso8601DateOnly",e.TimeOnly="TimeOnly",e.TimeStamp="TimeStamp",e.ColorRgb="ColorRgb",e.ColorRgba="ColorRgba",e.Unrecognized="Unrecognized",e.NotSet="NotSet"})(L||(L={})),(function(e){e.Texture="Texture",e.VertexAtrb="VertexAtrb",e.Implicit="Implicit",e.NotSet="NotSet"})(D||(D={})),(function(e){e.Front="Front",e.Back="Back",e.None="None",e.NotSet="NotSet"})(h||(h={})),(function(e){e.Pbr="Pbr",e.Unlit="Unlit"})(R||(R={})),(function(e){e.Rgb8="Rgb8",e.Rgba8="Rgba8",e.R8="R8",e.Bgr8="Bgr8",e.Bgra8="Bgra8",e.Rg8="Rg8",e.Ga8="Ga8",e.Etc1="Etc1",e.Etc2="Etc2",e.Dxt1="Dxt1",e.Dxt5="Dxt5",e.Bc7="Bc7",e.NotSet="NotSet"})(T||(T={})),(function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed",e[e.MissingInputs=2]="MissingInputs"})(a||(a={}));function x(){return new Promise((e=>B(()=>import("./lyr3DWorker-nGpoOkZ2.js"),__vite__mapDeps([0,1,2]),import.meta.url).then((n=>n.l)).then((({default:n})=>{const s=n({locateFile:y,onRuntimeInitialized:()=>e(s)})})))).catch((e=>{throw e}))}function y(e){return M(`esri/libs/lyr3d/${e}`)}let o,r;async function E(e){await P();const n={status:a.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]};if(e.inputs.length<1)return{result:n,transferList:[]};const s={ptrs:[],sizes:[]};for(const i of e.inputs){const p=r._malloc(i.byteLength);new Uint8Array(r.HEAPU8.buffer,p,i.byteLength).set(new Uint8Array(i)),s.ptrs.push(p),s.sizes.push(i.byteLength)}const t=r.process(e.jobDescJson,e.id,s,e.isMissingResourceCase);n.status=t.status,n.missingInputUrls=t.missingInputUrls.slice();const l=t.status===a.Succeeded&&t.data,u=n.status===a.MissingInputs&&n.missingInputUrls.length>0;n.jobDescJson=t.jobDescJson.slice(),n.error=t.error.slice(),l?n.data=t.data.slice():u&&(n.originalInputs=e.inputs.slice());for(let i=0;i<s.ptrs.length;++i)r._free(s.ptrs[i]);const c=[];if(l)c.push(n.data.buffer);else if(u)for(const i of e.inputs)c.push(i);return{result:n,transferList:c}}function A(){r&&(r.uninitialize_lyr3d_worker_wasm(),r=null)}function P(){return r?Promise.resolve():(o||(o=x().then((e=>{r=e,r.initialize_lyr3d_worker_wasm(),o=null}))),o)}export{A as destroyWasm,P as initialize,E as process};
