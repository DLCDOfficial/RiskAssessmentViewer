const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WhereClauseCache-DaRLeTPC.js","./WhereClause-C4sLVd4N.js","./arcadeUtils-B5o1WIuc.js","./aiServices-CwoakPkn.js","./number-BUyyDjIe.js","./utils-DDykF6ND.js","./commonProperties-DHiB1uzW.js","./featureConversionUtils-4vS7e9DV.js","./OptimizedFeature-DdLiUxBt.js","./memoryEstimations-Cau39Oyv.js","./OptimizedFeatureSet-BR8EEvDc.js","./unitConversion-BxJeRrtg.js","./batchExec-C_M1VTDt.js","./QueueProcessor-BnL9Pcf7.js","./ReactiveMap-BD3qyxSB.js","./signal-CCMhCnaC.js","./aiServices-DmIefmsc.js","./IdentityManager-C6sbzPzg.js","./sanitizerUtils-C8BmVxiO.js","./Basemap-CVSeuFMT.js","./loadAll-cLF51iui.js","./writeUtils-CpUZEnMe.js","./ElevationLayer-CT3ZEWUr.js","./ArcGISCachedService-Ccsp2A7G.js","./TileInfo-DEgyWAGY.js","./TileInfoTilemapCache-DzCnwzFb.js","./TilemapCache-BH1rpYsM.js","./ByteSizeUnit-BsxeN7wM.js","./webStyleSymbolUtils-IAPF11Mp.js","./devEnvironmentUtils-BfO8ai13.js","./portalLayers-Cefelqly.js","./associatedFeatureServiceUtils-PxhRnZmx.js","./fetchService-pgc0zIL8.js","./loadUtils-TW69t3R7.js","./lazyLayerLoader-D0MmxHN2.js","./arcgisLayers-Br618Nim.js","./statsWorker-CncRA2BG.js","./utils-Cr3t4q4M.js","./quantizationUtils-DJOt4u77.js","./utils-DfwSxgqQ.js","./utils-CeM4xVkE.js","./ClassBreaksDefinition-C0HjICjI.js","./geometryEngineWorker-C3Rv6yWF.js","./geometryEngineJSON-DGETChXf.js","./geometryEngineBase-BV9OKxkg.js","./_commonjsHelpers-BcY2WciP.js","./index-BbP3371Q.js","./json-Wa8cmqdu.js","./CSVSourceWorker-Cfor8ZE6.js","./date-Ctp1FiBW.js","./executeQueryForSnapping-Ma42R0IU.js","./normalizeUtils-PTTPU64I.js","./normalizeUtilsCommon-C_a4i1bY.js","./utils-BRuFmAg3.js","./FixedIntervalBinParameters-DX-Dxyp5.js","./QueryEngine-D_WWwzbx.js","./QueryEngineCapabilities-CsRUnGk7.js","./time-ClENgjgA.js","./FeatureStore-CvMlAWEX.js","./BoundsStore-Jywtzc8d.js","./PooledRBush-BI1asDku.js","./quickselect-QQC62dOK.js","./optimizedFeatureQueryEngineAdapter-BkjCuJp8.js","./clientSideDefaults-CnCx-NrE.js","./EdgeProcessingWorker-BCGwte28.js","./InterleavedLayout-DWIRiq9i.js","./BufferView-6Wo0HYee.js","./vec2-D0N3Bz89.js","./vec32-LyzMesOw.js","./vec2f64-B08OqgY-.js","./types-BKo2foNY.js","./edgeProcessing-Dw3MNk6H.js","./deduplicate-D67lYUNS.js","./Indices-Die4BdlF.js","./VertexAttribute-C1eU-FcF.js","./enums-CIq3dAOf.js","./VertexElementDescriptor-BLyltQyJ.js","./ElevationSamplerWorker-B_QEjG4A.js","./MeshLocalVertexSpace-Dm43RUlb.js","./vertexSpaceConversion-BNLTrCCy.js","./mat3-D2DxLcs1.js","./mat3f64-B5o_lm6j.js","./mat4f64-Busq8X2U.js","./spatialReferenceEllipsoidUtils-DtwM3pvq.js","./computeTranslationToOriginAndRotation-Bgn1ecnn.js","./projectPointToVector-HiGkO6mN.js","./meshVertexSpaceUtils-D1Q37eJE.js","./vec3-BftouXos.js","./vec4-Bab8Omiu.js","./FeatureServiceSnappingSourceWorker-DpVr7NRH.js","./UpdatingHandles-CHPhq1Xd.js","./pbfQueryUtils-Dt3eDkdS.js","./pbf-B-Qb_RCl.js","./query-BkjTHcYa.js","./GeoJSONSourceWorker-B3hifdyO.js","./geojson-CMlnOG9j.js","./sourceUtils-DN6Iuuaf.js","./MemorySourceWorker-CUfEPQmE.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-6tHzGZpB.js","./FeaturePipelineWorker-DOtD7NB0.js","./GeometryUtils-DF5xixq3.js","./TileKey-5FW0N9dv.js","./streamLayerUtils-CKwt2uXH.js","./floatRGBA-DFG_svH_.js","./vec2f32-CaVKkSa6.js","./libtess-BQuW8DDB.js","./earcut-D9gy186-.js","./operatorGeodeticDensify-rMfFgNRc.js","./SimpleGeometryCursor-B92kdZ15.js","./geodeticCurveType-CirnHLSB.js","./normalizeUtilsSync-BogEcKwC.js","./ogcFeatureUtils-DyuCVmjQ.js","./createConnection-D5xSIpk4.js","./PointCloudWorker-BTN0wfG7.js","./quat-CI_Qlf1a.js","./quatf64-aQ5IuZRd.js","./vec3f32-WCVSSNPR.js","./PointCloudUniqueValueRenderer-D-Z9cjaO.js","./I3SBinaryReader-DNOcBwWK.js","./orientedBoundingBox-CegL4iPR.js","./plane-BM5dy-fQ.js","./vectorStacks-BcGsIGGR.js","./RasterWorker-CU_GdsPJ.js","./GeographicTransformation-x1sRZ3X1.js","./dataUtils-DLw1lbIZ.js","./colorUtils-DpzmtTt4.js","./rasterFunctionHelper-CudFLhOG.js","./PolynomialTransform-CW8byrEj.js","./SceneLayerSnappingSourceWorker-BkikwhY5.js","./lineSegment-BnQxKnu0.js","./sphere-DVa6yVTZ.js","./SceneLayerWorker-DatsfDyj.js","./projectVectorToVector-BrIfimJ2.js","./I3SUtil-A8BvfAWd.js","./NormalAttribute.glsl-B56U0yJ_.js","./WFSSourceWorker-Q_0-lvsq.js","./wfsUtils-bt_8r36m.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-xRGZfnd2.js","./StyleRepository-DJleUG8Z.js","./Feature3DPipelineWorker-Zj0DPCmu.js","./DefaultMaterial-DhVdWTwX.js","./videoUtils-xf59qIHa.js","./basicInterfaces-N86vRvDz.js","./TextureFormat-1mYWTFa-.js","./IntersectorType-D_qF1tGO.js","./TextureCompressionWorker-Cx8Y_iKr.js","./deleteForwardEdits-D4ktZWhy.js","./editingSupport-BbrMvxy_.js","./OverrideHelper-Rpv4c8U2.js","./layersLoader-BMFGGuar.js","./jsonContext-0pMglxnV.js","./featureUtils-ipHDGs3-.js","./featureLayerUtils-Bc6AG-8W.js","./originUtils-1P3A7roi.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./utils-B6CQTpbm.js","./saveUtils-B9uHK8rd.js","./FeatureLayerSource-D8xMEM1D.js","./External-CeNYkY44.js","./MeshTransform-BFPfRq2s.js","./QueryTask-I3UEOmAs.js","./executeQueryJSON-UaZKDreI.js","./AttributeBinsQuery-0b-nhBhD.js"])))=>i.map(i=>d[i]);
import"https://js.arcgis.com/map-components/4.33/arcgis-map-components.esm.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function u(e,t,r,i){var s,o=arguments.length,c=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(e,t,r,i);else for(var f=e.length-1;f>=0;f--)(s=e[f])&&(c=(o<3?s(c):o>3?s(t,r,c):s(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c}function DZ(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:i,async:r})}return t}var v7=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function FZ(e){function t(o){e.error=e.hasError?new v7(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,i=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&i===1)return i=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(o).then(s,(function(c){return t(c),s()}))}else i|=1}catch(c){t(c)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}let Jo;function J(e){return typeof Jo[e]=="function"?Jo[e]=Jo[e](globalThis):Jo[e]}var r$,i$,s$,n$;Jo=(r$=globalThis.dojoConfig)!=null&&r$.has||(i$=globalThis.esriConfig)!=null&&i$.has?{...(s$=globalThis.dojoConfig)==null?void 0:s$.has,...(n$=globalThis.esriConfig)==null?void 0:n$.has}:{},J.add=(e,t,r,i)=>{(i||Jo[e]===void 0)&&(Jo[e]=t),r&&J(e)},J.cache=Jo,J.add("big-integer-warning-enabled",!0),J.add("esri-deprecation-warnings",!0),J.add("esri-tests-disable-screenshots",!1),J.add("esri-tests-use-full-window",!1),J.add("esri-tests-post-to-influx",!0),J.add("esri-cim-animations-enable-status","enabled"),J.add("esri-cim-animations-spotlight",!1),J.add("esri-cim-animations-freeze-time",!1),(()=>{var t;J.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(J.add("host-browser",e),J.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),J.add("dom",e),J("host-browser")){const r=navigator,i=r.userAgent,s=r.appVersion,o=parseFloat(s);if(J.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),J.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),J.add("khtml",s.includes("Konqueror")?o:void 0),J.add("edge",parseFloat(i.split("Edge/")[1])||void 0),J.add("opr",parseFloat(i.split("OPR/")[1])||void 0),J.add("webkit",!J("wp")&&!J("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),J.add("chrome",!J("edge")&&!J("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),J.add("android",!J("wp")&&parseFloat(i.split("Android ")[1])||void 0),J.add("safari",!s.includes("Safari")||J("wp")||J("chrome")||J("android")||J("edge")||J("opr")?void 0:parseFloat(s.split("Version/")[1])),J.add("mac",s.includes("Macintosh")),!J("wp")&&/(iPhone|iPod|iPad)/.test(i)){const c=RegExp.$1.replace(/P/,"p"),f=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",w=parseFloat(f.replace(/_/,".").replaceAll("_",""));J.add(c,w),J.add("ios",w)}J("webkit")||(!i.includes("Gecko")||J("wp")||J("khtml")||J("edge")||J.add("mozilla",o),J("mozilla")&&J.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&J.add("esri-mobile",t),r&&J.add("esri-iPhone",r),J.add("esri-geolocation",!!navigator.geolocation)}J.add("esri-wasm","WebAssembly"in globalThis),J.add("esri-performance-mode-frames-between-render",20),J.add("esri-force-performance-mode",!1),J.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t})),J.add("wasm-simd",(()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))})),J.add("esri-atomics","Atomics"in globalThis),J.add("esri-workers","Worker"in globalThis),J.add("web-feat:cache","caches"in globalThis),J.add("esri-workers-arraybuffer-transfer",!J("safari")||Number(J("safari"))>=12),J.add("workers-pool-size",8),J.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),J.add("featurelayer-simplify-payload-size-factors",[1,1,4]),J.add("featurelayer-fast-triangulation-enabled",!0),J.add("featurelayer-animation-enabled",!0),J.add("featurelayer-snapshot-enabled",!0),J.add("featurelayer-snapshot-initial-tolerance",0),J.add("featurelayer-snapshot-point-min-threshold",8e4),J.add("featurelayer-snapshot-point-max-threshold",4e5),J.add("featurelayer-snapshot-multipoint-min-threshold",2e4),J.add("featurelayer-snapshot-multipoint-max-threshold",1e5),J.add("featurelayer-snapshot-polygon-min-threshold",1e3),J.add("featurelayer-snapshot-polygon-max-threshold",2e3),J.add("featurelayer-snapshot-polyline-min-threshold",1e3),J.add("featurelayer-snapshot-polyline-max-threshold",2e3),J.add("featurelayer-snapshot-max-vertex-count",25e4),J.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),J.add("featurelayer-snapshot-concurrency",4),J.add("featurelayer-snapshot-coverage",.1),J.add("featurelayer-query-max-depth",4),J.add("featurelayer-query-pausing-enabled",!1),J.add("featurelayer-query-tile-concurrency",4),J.add("featurelayer-query-tile-max-features",6e5),J.add("featurelayer-advanced-symbols",!1),J.add("featurelayer-pbf",!0),J.add("featurelayer-pbf-statistics",!1),J.add("feature-layers-workers",!0),J.add("feature-polyline-generalization-factor",1),J.add("mapview-transitions-duration",200),J.add("mapview-essential-goto-duration",200),J.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),J.add("mapserver-pbf-version-support",10.81),J.add("mapservice-popup-identify-max-tolerance",20),J.add("request-queue-concurrency-hosted",16),J.add("request-queue-concurrency-non-hosted",4),J.add("curve-densification-coarse-segments",128),J.add("curve-densification-max-segments",2e3),J.add("curve-densification-min-segments",3),J.add("curve-densification-pixel-deviation",.5),J.add("view-readyState-waiting-delay",1e3),J.add("gradient-depth-bias",.01),J.add("gradient-depth-epsilon",1e-8),J.add("enable-feature:esri-compress-textures",!0),J("host-webworker")||J("host-browser")&&(J.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),J.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{J.add("esri-image-decode",!0,!0,!0)})).catch((()=>{J.add("esri-image-decode",!1,!0,!0)}))}return!1})),J.add("esri-url-encodes-apostrophe",(()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")})))})();const R3=new WeakMap;function S7(e,t,r=!1){const i=`ðŸ›‘ DEPRECATED - ${t}`;if(!r)return void e.warn(i);let s=R3.get(e);s||(s=new Set,R3.set(e,s)),s.has(t)||(s.add(t),e.warn(i))}function RZ(e,t,r={}){J("esri-deprecation-warnings")&&Su(e,`Module: ${t}`,r)}function p$(e,t,r={}){if(J("esri-deprecation-warnings")){const{moduleName:i}=r;Su(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function _7(e,t,r={}){if(J("esri-deprecation-warnings")){const{moduleName:i}=r;Su(e,`Property: ${(i?i+"::":"")+t}`,r)}}function E7(e,t,r={}){J("esri-deprecation-warnings")&&Su(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function Su(e,t,r={}){if(J("esri-deprecation-warnings")){const{replacement:i,version:s,see:o,warnOnce:c}=r;let f=t;if(i&&(f+=`
	ðŸ› ï¸ Replacement: ${i}`),s&&(f+=`
	âš™ï¸ Version: ${s}`),o)if(Array.isArray(o)){f+=`
	ðŸ”— See for more details:`;for(const w of o)f+=`
		${w}`}else f+=`
	ðŸ”— See ${o} for more details.`;S7(e,f,c)}}function NZ(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function jZ(e,t){for(const r of e)if(r!=null&&t(r))return r}function N3(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let Zw=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach((r=>{t+=r.length})),t}add(t,r){if(N3(t)){const i=this._getOrCreateGroup(r);for(const s of t)L3(s)&&i.push(s)}else L3(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach((i=>i.forEach(t)));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(Gp(t))}remove(t){if(typeof t!="string"&&N3(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(j3(this._getGroup(t)),this._groups.delete(Gp(t)),this):this}removeAll(){return this._groups.forEach(j3),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(Gp(t),r),r}_getGroup(t){return this._groups.get(Gp(t))}};function Gp(e){return e||"_default_"}function j3(e){for(const t of e)t instanceof Zw?t.removeAll():t.remove()}function L3(e){return e!=null&&(!!e.remove||e instanceof Zw)}function BZ(e){}function UZ(e){return e}var Pi;let x7=(Pi=class{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Pi._m}getInt(){return this._seed=(Pi._a*this._seed+Pi._c)%Pi._m,this._seed}getFloat(){return this.getInt()/(Pi._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Pi._m*i}},Pi._m=2147483647,Pi._a=48271,Pi._c=0,Pi);function $7(e,t,r,i,s,o,c){if(e==null&&i==null)return!0;t=Math.max(0,t),s=Math.max(0,s),r=Math.max(0,r<0?((e==null?void 0:e.length)??0)+r:r),o=Math.max(0,o<0?((i==null?void 0:i.length)??0)+o:o);const f=r-t;if(e==null||i==null||f!==o-s)return!1;if(c){for(let w=0;w<f;w++)if(!c(e[t+w],i[s+w]))return!1}else for(let w=0;w<f;w++)if(e[t+w]!==i[s+w])return!1;return!0}function mf(e,t,r){return $7(e,0,(e==null?void 0:e.length)??0,t,0,(t==null?void 0:t.length)??0,r)}function zZ(e,t,r){let i,s;return r?(i=t.filter((o=>!e.some((c=>r(c,o))))),s=e.filter((o=>!t.some((c=>r(c,o)))))):(i=t.filter((o=>!e.includes(o))),s=e.filter((o=>!t.includes(o)))),{added:i,removed:s}}let d$=class{constructor(){this.last=0}};const h$=new d$;function a2(e,t,r,i){i=i||h$;const s=Math.max(0,i.last-10);for(let c=s;c<r;++c)if(e[c]===t)return i.last=c,c;const o=Math.min(s,r);for(let c=0;c<o;++c)if(e[c]===t)return i.last=c,c;return-1}function T7(e,t,r,i){const s=e.length,o=a2(e,t,s,i);if(o!==-1)return e[o]=e[s-1],e.pop(),t}const vs=new Set;function I7(e,t,r=e.length,i=t.length,s,o){if(i===0||r===0)return r;vs.clear();for(let f=0;f<i;++f)vs.add(t[f]);s=s||h$;const c=Math.max(0,s.last-10);for(let f=c;f<r;++f)if(vs.has(e[f])&&(o==null||o.push(e[f]),vs.delete(e[f]),e[f]=e[r-1],--r,--f,vs.size===0||r===0))return vs.clear(),r;for(let f=0;f<c;++f)if(vs.has(e[f])&&(o==null||o.push(e[f]),vs.delete(e[f]),e[f]=e[r-1],--r,--f,vs.size===0||r===0))return vs.clear(),r;return vs.clear(),r}function M7(e){return e?(B3.seed=e,()=>B3.getFloat()):Math.random}const B3=new x7;function GZ(e,t){if(!e)return e;const r=M7(t);for(let i=e.length-1;i>0;i--){const s=Math.floor(r()*(i+1)),o=e[i];e[i]=e[s],e[s]=o}return e}function f$(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function gf(e,t){return e!=null}function qZ(e){return e instanceof ArrayBuffer}function Yw(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function y$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function m$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function Kw(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function g$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function Xw(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function w$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function C7(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float16Array"}function wf(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function bf(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function k7(e){return"buffer"in e}const b$=1024;function QZ(e){return bf(e)||wf(e)||Xw(e)||Kw(e)||Yw(e)}function WZ(e){return bf(e)||wf(e)}function HZ(e){return bf(e)?179769e303:C7(e)?65504:wf(e)?3402823e32:w$(e)?4294967295:g$(e)?65535:y$(e)||m$(e)?255:Xw(e)?2147483647:Kw(e)?32767:Yw(e)?127:256}const JZ=-32768,ZZ=-2147483648;function O7(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function q(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=E$(e);if(t!=null)return t;if(v$(e))return e.clone();if(S$(e))return e.map(q);if(_$(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=q(e[i]);return r}function l2(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=E$(e);if(t!=null)return t;if(S$(e)){let i=!0;const s=e.map((o=>{const c=l2(o);return o!=null&&c==null&&(i=!1),c}));return i?s:null}if(v$(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(_$(e))return null;const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const s=e[i],o=l2(s);if(s!=null&&o==null)return null;r[i]=o}return r}function v$(e){return typeof e.clone=="function"}function S$(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function _$(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function U3(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function E$(e){if(Yw(e)||y$(e)||m$(e)||Kw(e)||g$(e)||Xw(e)||w$(e)||wf(e)||bf(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,q(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(q(r));return t}return null}function eb(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function P7(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&mf(e,t):e instanceof Set?t instanceof Set&&F7(e,t):e instanceof Map?t instanceof Map&&R7(e,t):!!U3(e)&&U3(t)&&D7(e,t))}function D7(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function F7(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function R7(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const s=t.get(r);if(s!==i||s===void 0&&!t.has(r))return!1}return!0}function tb(e,t,r=!1){return $$(e,t,r)}function rb(e,t){if(t!=null)return t[e]||x$(e.split("."),!1,t)}function Mr(e,t,r){const i=e.split("."),s=i.pop(),o=x$(i,!0,r);o&&s&&(o[s]=t)}function z3(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(z3(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(z3(e[r],t[r]))return!0;return!1}return e!==t}function x$(e,t,r){let i=r;for(const s of e){if(i==null)return;if(!(s in i)){if(!t)return;i[s]={}}i=i[s]}return i}function $$(e,t,r){return t?Object.keys(t).reduce(((i,s)=>{if(s==="__proto__")return i;let o=i[s],c=t[s];return o===c?i:o===void 0?(i[s]=q(c),i):(Array.isArray(c)||Array.isArray(i)?(o=o?Array.isArray(o)?i[s]=o.slice():i[s]=[o]:i[s]=[],c&&(Array.isArray(c)||(c=[c]),r?c.forEach((f=>{o.includes(f)||o.push(f)})):i[s]=c.slice())):c&&typeof c=="object"?i[s]=$$(o,c,r):i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[s]=c),i)}),e||{}):e}var o$;const xt={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:(o$=globalThis.location)==null?void 0:o$.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(tb(xt,globalThis.esriConfig,!0),delete xt.has),!xt.assetsPath){{const e="4.33";xt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}xt.defaultAssetsPath=xt.assetsPath}const N7=/\{([^}]+)\}/g;function V3(e){return e??""}function kl(e,t){return t?e.replaceAll(N7,typeof t=="object"?(r,i)=>V3(rb(i,t)):(r,i)=>V3(t(i))):e}function YZ(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,(r=>t!=null&&t.includes(r)?r:`\\${r}`))}function T$(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let G3;function KZ(e){return G3??(G3=new DOMParser),G3.parseFromString(e||"","text/html").body.innerText||""}const q3={info:0,warn:1,error:2,none:3};var Ar;let xe=(Ar=class{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Ar._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Ar.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Ar._loggers.get(t)||new Ar({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!Ar._throttlingDisabled){const s=L7(i),o=this._loggedMessages[t].get(s);if(r==="once"&&o!=null||r==="oncePerTick"&&o&&o>=Ar._tickCounter)return;this._loggedMessages[t].set(s,Ar._tickCounter),Ar._scheduleTickCounterIncrement()}for(const s of xt.log.interceptors)if(s(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const s=i[t];if(s!=null)return s;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",j7)}_matchLevel(t){const r=xt.log.level||"warn";return q3[this._parentWithMember("level",r)]<=q3[t]}static _scheduleTickCounterIncrement(){Ar._tickCounterScheduled||(Ar._tickCounterScheduled=!0,Promise.resolve().then((()=>{Ar._tickCounter++,Ar._tickCounterScheduled=!1})))}},Ar._loggers=new Map,Ar._tickCounter=0,Ar._tickCounterScheduled=!1,Ar._throttlingDisabled=!1,Ar);function j7(e,t,...r){console[e](`[${t}]`,...r)}function L7(...e){return T$(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}function B7(e,t){if(e==null)throw new Error(t??"value is None")}function NA(e){return e==null||e.destroy(),null}function XZ(e){return e==null||e.dispose(),null}function Qs(e){return e==null||e.remove(),null}function I$(e){return e==null||e.abort(),null}function eY(e){return e==null||e.release(),null}function U7(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function z7(e,t){let r;return e.some(((i,s)=>(r=t(i,s),r!=null))),r??void 0}const M$=Symbol("Accessor-beforeDestroy"),V7={remove:()=>{}};function gr(e){return e?{remove(){e&&(e(),e=void 0)}}:V7}function G7(e){e.forEach((t=>t==null?void 0:t.remove()))}function vf(e){return gr((()=>G7(e)))}function tY(e){return gr((()=>e==null?void 0:e.abort()))}function rY(e){return{[Symbol.dispose](){e.remove()}}}function Si(e){return e.__accessor__??null}function q7(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function Ed(e,t,r){return r?Eh(e,t,{policy:r,path:""}):Eh(e,t,null)}function Eh(e,t,r){return t?Object.keys(t).reduce(((i,s)=>{const o=s;if(o==="__proto__")return i;let c=null,f="merge";if(r&&(c=r.path?`${r.path}.${s}`:s,f=r.policy(c)),f==="replace"||f==="replace-arrays"&&Array.isArray(i[o]))return i[o]=t[o],i;if(i[o]===void 0)return i[o]=q(t[o]),i;let w=i[o],v=t[o];if(w===v)return i;if(Array.isArray(v)||Array.isArray(i))w=w?Array.isArray(w)?i[o]=w.slice():i[o]=[w]:i[o]=[],v&&(Array.isArray(v)||(v=[v]),v.forEach((_=>{w.includes(_)||w.push(_)})));else if(v&&typeof v=="object")if(r){const _=r.path;r.path=c,i[o]=Eh(w,v,r),r.path=_}else i[o]=Eh(w,v,null);else i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[o]=v);return i}),e||{}):e}function C$(e){return Array.isArray(e)?e:e.split(".")}function Q3(e){return e.includes(",")?e.split(",").map((t=>t.trim())):[e.trim()]}function Q7(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...Q3(r));return t}return Q3(e)}function k$(e,t,r,i){const s=Q7(t);if(s.length!==1){const o=s.map((c=>i(e,c,r)));return vf(o)}return i(e,s[0],r)}function O$(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=Si(t);return q7(i,r)?i.get(r):t[r]}function P$(e,t,r){if(e==null)return e;const i=O$(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:P$(i,t,r+1)}function sp(e,t,r=0){return typeof t!="string"||t.includes(".")?P$(e,C$(t),r):O$(t,e)}function bl(e,t){return sp(e,t)}function W3(e,t){return sp(t,e)!==void 0}const Qi={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function np(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=q(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Sf(e,t){const r=np(e);let i=r[t];return i||(i=r[t]={}),i}function W7(e,t){return Ed(e,t,J7)}const H7=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function J7(e){return H7.test(e)?"replace":"merge"}function Z7(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function Y7(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}var Aa;let _f=(Aa=class{constructor(t,r,i,s=1,o=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=s,this._pool=new Array(o),this._initialSize=o;for(let c=0;c<o;c++)this._pool[c]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let r;if(Aa.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let s=0;s<i;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):Y7(r)&&r.acquire(...t),r}release(t){t&&!Aa.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Z7(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}},Aa.test={disabled:!1},Aa),K7=class{constructor(t,r){this._observers=t,this._observer=r}remove(){f$(this._observers,this._observer)}},D$=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return X7;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,s=!1;const o=r.length;for(let c=0;c<o;++c){const f=r[c];if(f.destroyed)s=!0;else if(f===t){i=!0;break}}return i||(r.push(t),s&&this._removeDestroyedObservers()),new K7(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let s=0;s<r;++s){for(;s+i<r&&t[s+i].destroyed;)++i;if(i>0){if(!(s+i<r))break;t[s]=t[s+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const X7=gr();var tt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(tt||(tt={}));const A2=tt.USER+1;function Zo(e){switch(e){case"defaults":return tt.DEFAULTS;case"service":return tt.SERVICE;case"portal-item":return tt.PORTAL_ITEM;case"web-scene":return tt.WEB_SCENE;case"web-map":return tt.WEB_MAP;case"link-chart":return tt.LINK_CHART;case"user":return tt.USER;default:return null}}function Rc(e){switch(e){case tt.DEFAULTS:return"defaults";case tt.SERVICE:return"service";case tt.PORTAL_ITEM:return"portal-item";case tt.WEB_SCENE:return"web-scene";case tt.WEB_MAP:return"web-map";case tt.LINK_CHART:return"link-chart";case tt.USER:return"user"}}function eO(e){return Rc(e)}const Qt={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let Ef=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach((t=>{this._handles.push(t.observe(this._observer))})),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const xh=new Ef,I0=[];let pc=xh;function Ue(e){pc.onAccessed(e)}let xd=!1,$d=!1;function ca(e,t,r){if(xd)return ib(e,t,r);let i=null;return F$(e),i=t.call(r),R$(),i}function tO(e,t){return ca(xh,e,t)}function ib(e,t,r){const i=xd;xd=!0,F$(e);let s=null;try{s=t.call(r)}catch(o){$d&&xe.getLogger("esri.core.accessorSupport.tracking").error(o)}return R$(),xd=i,s}function F$(e){pc=e,I0.push(e)}function R$(){const e=I0.length;if(e>1){const t=I0.pop();pc=I0[e-2],t.onTrackingEnd()}else if(e===1){const t=I0.pop();pc=xh,t.onTrackingEnd()}else pc=xh}function N$(e,t){if(t.flags&Qt.DepTrackingInitialized)return;t.flags|=Qt.DepTrackingInitialized;const r=$d;$d=!1,t.flags&Qt.AutoTracked?ib(t.trackingTarget,t.metadata.get,e):j$(e,t),$d=r}const rO=[];function j$(e,t){t.flags&Qt.ExplicitlyTracking||(t.flags|=Qt.ExplicitlyTracking,ib(t.trackingTarget,(()=>{const r=t.metadata.dependsOn||rO;for(const i of r)if(typeof i!="string"||i.includes(".")){const s=C$(i);for(let o=0,c=e;o<s.length&&c!=null&&typeof c=="object";++o)c=H3(c,s[o],o!==s.length-1)}else H3(e,i,!1)})),t.flags&=-129)}function H3(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const o=parseInt(i,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.at(o)}const s=Si(e);if(s){const o=s.propertiesByName.get(i);o&&(Ue(o),N$(e,o))}return r?e[i]:void 0}let J3=class extends D${constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new Ef(this),this.flags=0,this.flags=Qt.Dirty|(r.nonNullable?Qt.NonNullable:0)|(r.hasOwnProperty("value")?Qt.HasDefaultValue:0)|(r.get===void 0?Qt.DepTrackingInitialized:0)|(r.dependsOn===void 0?Qt.AutoTracked:0)}destroy(){this.flags&Qt.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&Ue(this);const r=t.store,i=this.propertyName,s=this.flags,o=r.get(i);if(s&Qt.Computing||~s&Qt.Dirty&&r.has(i))return o;this.flags|=Qt.Computing;const c=t.host;let f;s&Qt.AutoTracked?f=ca(this.trackingTarget,this.metadata.get,c):(j$(c,this),f=this.metadata.get.call(c)),this.flags|=Qt.DepTrackingInitialized,r.set(i,f,tt.COMPUTED);const w=r.get(i);return w===o?this.flags&=-2:tO(this.commit,this),this.flags&=-5,w}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Qt.Overridden&&(this.flags|=Qt.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},iO=class L${constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new L$;return this._values.forEach(((i,s)=>{t&&t.has(s)||r.set(s,q(i))})),r}get(t){return this._values.get(t)}originOf(){return tt.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}isAtOrigin(t,r){return this.has(t)}isBelowOrigin(t,r){return!this.has(t)}forEach(t){this._values.forEach(t)}};function Hl(e,t,r){return e!==void 0}function Z3(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&Qt.NonNullable)||(i.lifecycle,!1))}let sO=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Qi.INITIALIZING,this.store=new iO,this.mutable=!0,this._origin=tt.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const s=new J3(i,r[i]);this.propertiesByName.set(i,s)}this.metadata=r}initialize(){this.lifecycle=Qi.CONSTRUCTING}constructed(){this.lifecycle=Qi.CONSTRUCTED}destroy(){this.lifecycle=Qi.DESTROYED,this.propertiesByName.forEach((t=>t.destroy()))}get initialized(){return this.lifecycle!==Qi.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(!Hl(r))return;if(r.metadata.get)return r.getComputed(this);this.mutable&&Ue(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&Qt.HasDefaultValue)return"defaults"}return Rc(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(Hl(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);Hl(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const s=this.propertiesByName.get(r);if(!Hl(s))return"";const o=new Ef,c=ca(o,(()=>{var v;return(v=s.metadata.get)==null?void 0:v.call(t)}));let f=`${i}${t.declaredClass.split(".").pop()}.${r}: ${c}
`;const w=o.accessed??new Set;if(w.size===0)return f;i+="  ";for(const v of w)v instanceof J3&&(f+=`${i}${v.propertyName}: undefined
`);return f}setAtOrigin(t,r,i){const s=this.propertiesByName.get(t);if(Hl(s))return this._setAtOrigin(s,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&Qt.Overridden)}clearOrigin(t,r){const i=this.store,s=this.propertiesByName.get(t);if(!Hl(s))return;const o=i.isAtOrigin(t,r)&&!(s.flags&Qt.Overridden);i.delete(t,r),o&&s.notifyChange()}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&Qt.Overridden&&(r.flags&=-3,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!Z3(i,t,r,this))return;const s=i.metadata.cast;if(s){const o=this._cast(s,r),{valid:c,value:f}=o;if(im.release(o),!c)return;r=f}i.flags|=Qt.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!Z3(i,t,r,this))return;const s=i.metadata.cast;if(s){const c=this._cast(s,r),{valid:f,value:w}=c;if(im.release(c),!f)return;r=w}const o=i.metadata.set;o?o.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=Zo(t)}getDefaultOrigin(){return Rc(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==Qi.INITIALIZING?this._origin:tt.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const s=this.store,o=t.propertyName;if(s.isAtOrigin(o,i)&&eb(r,s.get(o))&&~t.flags&Qt.Overridden)return;const c=s.isBelowOrigin(o,i)||s.isAtOrigin(o,i);c&&t.invalidate(),s.set(o,r,i),c&&t.commit(),N$(this.host,t)}_cast(t,r){const i=im.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},nO=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const im=new _f(nO);function oO(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((r,i)=>i===""?"$":(rb(i,t)??"").toString()))}let B$=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&oO(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},re=class U$ extends B${constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return q(r)}catch{return"[object]"}})))}}catch(t){throw xe.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new U$(t.name,t.message,t.details)}};re.prototype.type="error";function $h(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))$h(e,i,t[i]);else{if(t.includes(".")){const s=t.split("."),o=s.splice(-1,1)[0];return void $h(bl(e,s),o,r)}const i=e.__accessor__;i!=null&&aO(t,i),e[t]=r}}function aO(e,t){if(J("esri-unknown-property-errors")&&!lO(e,t))throw new re("set:unknown-property",AO(e,t))}function lO(e,t){return t.metadata[e]!=null}function AO(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let uO;function cO(){return uO}var Y3;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(Y3||(Y3={}));function pO(e){e.length=0}let No=class{constructor(t=50,r=50){this._pool=new _f(Array,void 0,pO,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return sm.acquire()}static release(t){return sm.release(t)}static prune(){sm.prune()}};const sm=new No(100);let dO=class extends _f{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const qp=[];function Th(e){qp.push(e),qp.length===1&&queueMicrotask((()=>{const t=qp.slice();qp.length=0;for(const r of t)r()}))}let z$=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort(((t,r)=>t-r))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((t,r)=>t+r),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var u2;(function(e){const t=(o,c,f,w)=>{let v=c,_=c;const $=f>>>1,I=o[v-1];for(;_<=$;){_=v<<1,_<f&&w(o[_-1],o[_])<0&&++_;const k=o[_-1];if(w(k,I)<=0)break;o[v-1]=k,v=_}o[v-1]=I},r=(o,c)=>o<c?-1:o>c?1:0;function i(o,c,f,w){c===void 0&&(c=0),f===void 0&&(f=o.length),w===void 0&&(w=r);for(let _=f>>>1;_>c;_--)t(o,_,f,w);const v=c+1;for(let _=f-1;_>c;_--){const $=o[c];o[c]=o[_],o[_]=$,t(o,v,_,w)}}function*s(o,c,f,w){c===void 0&&(c=0),f===void 0&&(f=o.length),w===void 0&&(w=r);for(let _=f>>>1;_>c;_--)t(o,_,f,w),yield;const v=c+1;for(let _=f-1;_>c;_--){const $=o[c];o[c]=o[_],o[_]=$,t(o,v,_,w),yield}}e.sort=i,e.iterableSort=s})(u2||(u2={}));const K3=u2,hO=1.5,fO=1.1;let V$=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new d$,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>X3(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const s=this.data[i];t(s)&&r.push(s)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,X3(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=a2(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(a2(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=I7(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){K3.sort(this.data,0,this.length,t)}iterableSort(t){return K3.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:s}=this;for(let o=0;o<s;++o)if(t.call(r,i[o]))return i[o]}filterInPlace(t,r){let i=0;for(let s=0;s<this._length;++s){const o=this.data[s];t.call(r,o,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=o,i++)}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:s}=this;for(let o=0;o<s;++o)t.call(r,i[o],o,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(r,this.data[s],s,this.data);return i}reduce(t,r){let i=r;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const r=this.length,i=this.data;for(let s=0;s<r;++s)if(i[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function X3(e){e.data.length>hO*e.length&&(e.data.length=Math.floor(e.length*fO))}function yO(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return gr((()=>e.clearTimeout(i)))}}}const mO=yO(globalThis);function sb(e){return gO(e)||G$(e)}function gO(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function G$(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function nb(e,t,r){if(!sb(e))throw new TypeError("target is not a Evented or EventTarget object");return G$(e)?wO(e,t,r):e.on(t,r)}function wO(e,t,r,i){if(Array.isArray(t)){const s=t.slice();for(const o of s)e.addEventListener(o,r,i);return gr((()=>{for(const o of s)e.removeEventListener(o,r,i)}))}return e.addEventListener(t,r,i),gr((()=>e.removeEventListener(t,r,i)))}function q$(e,t,r){if(!sb(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=nb(e,t,(s=>{i.remove(),r.call(e,s)}));return i}function Ir(e="Aborted"){return new re("AbortError",e)}function Xs(e,t="Aborted"){if(co(e))throw Ir(t)}function xf(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function co(e){const t=xf(e);return t!=null&&t.aborted}function vn(e){if(Pn(e))throw e}function hY(e){if(!Pn(e))throw e}function vl(e,t){const r=xf(e);if(r!=null){if(!r.aborted)return q$(r,"abort",(()=>t()));t()}}function Q$(e,t){const r=xf(e);if(r!=null)return Xs(r),q$(r,"abort",(()=>t(Ir())))}function bO(e,t){return xf(t)==null?e:new Promise(((r,i)=>{let s=vl(t,(()=>i(Ir())));const o=()=>{s=Qs(s)};e.then(o,o),e.then(r,i)}))}function Pn(e){return(e==null?void 0:e.name)==="AbortError"}async function vO(e){try{return await e}catch(t){if(!Pn(t))throw t;return}}async function ob(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map((c=>e[c])),s=await ob(i),o={};return r.map(((c,f)=>o[c]=s[f])),o}const t=e;return Promise.allSettled(t).then((r=>Array.from(t,((i,s)=>{const o=r[s];return o.status==="fulfilled"?{promise:i,value:o.value}:{promise:i,error:o.reason}}))))}async function fY(e){return(await Promise.allSettled(e)).filter((t=>t.status==="fulfilled")).map((t=>t.value))}async function yY(e){return(await Promise.allSettled(e)).filter((t=>t.status==="rejected")).map((t=>t.reason))}function SO(e,t=void 0,r){const i=new AbortController;return vl(r,(()=>i.abort())),new Promise(((s,o)=>{let c=setTimeout((()=>{c=0,s(t)}),e);vl(i,(()=>{c&&(clearTimeout(c),o(Ir()))}))}))}function op(e){return e&&typeof e.then=="function"}function eS(e){return op(e)?e:Promise.resolve(e)}function W$(e,t=-1){let r,i,s,o,c=null;const f=(...w)=>{if(r){i=w,o&&o.reject(Ir()),o=pa();const I=o.promise;if(c){const k=c;c=null,k.abort()}return I}if(s=o||pa(),o=null,t>0){const I=new AbortController;r=eS(e(...w,I.signal));const k=r;SO(t).then((()=>{r===k&&(o?I.abort():c=I)}))}else r=1,r=eS(e(...w));const v=()=>{const I=i;i=s=r=c=null,I!=null&&f(...I)},_=r,$=s;return _.then(v,v),_.then($.resolve,$.reject),$.promise};return f}function pa(){let e,t;const r=new Promise(((s,o)=>{e=s,t=o})),i=s=>{e(s)};return i.resolve=s=>e(s),i.reject=s=>t(s),i.timeout=(s,o)=>mO.setTimeout((()=>i.reject(o)),s),i.promise=r,i}function mY(e,t){t.then(e.resolve,e.reject)}async function tS(e){await Promise.resolve(),Xs(e)}let _O=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}};const EO=["prepare","preRender","render","postRender","update","finish"],c2=[];new V$;const p2={willDispatch:!1};function H$(e){const t=new _O(e);return c2.push(t),p2.willDispatch||(p2.willDispatch=!0,Th(xO)),t}new V$;function xO(){for(;c2.length;){const e=c2.shift();e.isActive&&e.callback()}p2.willDispatch=!1}function $O(e=1,t){const r=pa(),i=()=>{co(t)?r.reject(Ir()):e===0?r():(--e,Th((()=>i())))};return i(),r.promise}function TO(e){return $O(1,e)}async function wY(e){await TO(e),await new Promise((t=>requestAnimationFrame((()=>{e!=null&&e.aborted||t()}))))}EO.map((e=>new z$(e)));new z$("total");function bY(e,t){for(const r of e.values())if(t(r))return!0;return!1}function Ih(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function rS(e,t){return t!=null&&e.add(t),e}function J$(e,t){const r=new Set;return Ih(r,e),Ih(r,t),r}function vY(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function SY(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function _Y(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function EY(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}let IO=0;function Td(){return++IO}let ab=class extends Ef{constructor(t){super(new MO(t)),this._observer&&iS.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&iS.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}},MO=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=CO}};const iS=new FinalizationRegistry((e=>{var t;(t=e.deref())==null||t.destroy()}));function CO(){}let jA=!1;const Mh=[];function Z$(e,t){let r=new ab(o),i=null,s=!1;function o(){if(!r||s)return;if(jA)return void K$(o);const f=i;r.clear(),jA=!0,s=!0,i=ca(r,e),s=!1,jA=!1,t(i,f),X$()}function c(){r&&(r.destroy(),r=null,i=null)}return s=!0,i=ca(r,e),s=!1,gr(c)}function Y$(e,t){let r=new ab(s),i=null;function s(){t(i,c)}function o(){r&&(r.destroy(),r=null),i=null}function c(){return r?(r.clear(),i=ca(r,e),i):null}return c(),gr(o)}function kO(e,t){let r=!1,i=!1;const s=!!(t!=null&&t.sync);let o=new ab((()=>{r||i||(i=!0,s?c():queueMicrotask(c))}));function c(){i=!1,o&&!r&&(jA?K$(c):(o.clear(),jA=!0,r=!0,ca(o,e),r=!1,jA=!1,X$()))}function f(){o&&(o.destroy(),o=null)}return r=!0,ca(o,e),r=!1,gr(f)}function K$(e){Mh.includes(e)||Mh.unshift(e)}function X$(){for(;Mh.length;)Mh.pop()()}var dc;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(dc||(dc={}));var ml;let lb=(ml=class{constructor(){this.uid=Td(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,s,o){return this.pool.acquire(dc.Untracked,t,r,i,s,o,eb)}static acquireTracked(t,r,i,s){return this.pool.acquire(dc.Tracked,t,r,i,null,null,s)}notify(t,r){this.type===dc.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,s,o,c,f){this.uid=Td(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=s,this.target=o,this.path=c,this.equals=f}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Td(),this.removed=!0}},ml.pool=new dO(ml),ml);const Id=new No,oa=new Set;let Ch;function kh(e){oa.delete(e),oa.add(e),Ch||(Ch=H$(DO))}function OO(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function PO(e){for(const t of oa.values())t.target===e&&(t.removed=!0)}function DO(){let e=10;for(;Ch&&e--;){Ch=null;const t=FO(),r=Id.acquire();for(const i of t){const s=i.uid;OO(i),s===i.uid&&i.removed&&r.push(i)}for(const i of oa)i.removed&&(r.push(i),oa.delete(i));for(const i of r)lb.pool.release(i);Id.release(r),Id.release(t),RO.forEach((i=>i()))}}function FO(){const e=Id.acquire();e.length=oa.size;let t=0;for(const r of oa)e[t]=r,++t;return oa.clear(),e}const RO=new Set;function NO(e,t,r){let i=k$(e,t,r,((s,o,c)=>{let f,w,v=Y$((()=>sp(s,o)),((_,$)=>{var I;((I=s.__accessor__)==null?void 0:I.lifecycle)===Qi.DESTROYED||f&&f.uid!==w?i.remove():(f||(f=lb.acquireUntracked(_,c,$,s,o),w=f.uid),kh(f))}));return gr((()=>{v.remove(),f&&(f.uid!==w||f.removed||(f.removed=!0,kh(f)),f=null),i=v=null}))}));return i}function jO(e,t,r){const i=k$(e,t,r,((s,o,c)=>{let f=!1;return Z$((()=>sp(s,o)),((w,v)=>{s.__accessor__.lifecycle!==Qi.DESTROYED?f||(f=!0,eb(v,w)||c.call(s,w,v,o,s),f=!1):i.remove()}))}));return i}function LO(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Qi.DESTROYED?i?jO(e,t,r):NO(e,t,r):gr()}function BO(e,t,r){let i,s,o=Y$(e,((c,f)=>{i&&i.uid!==s?o.remove():(i||(i=lb.acquireTracked(c,t,f,r),s=i.uid),kh(i))}));return gr((()=>{o.remove(),i&&(i.uid!==s||i.removed||(i.removed=!0,kh(i)),i=null),o=null}))}function UO(e,t,r){let i=!1;return Z$(e,((s,o)=>{i||(i=!0,r(o,s)||t(s,o),i=!1)}))}function zO(e,t,r=!1,i=P7){return r?UO(e,t,i):BO(e,t,i)}function TY(e,t){for(const r of e.values())if(t(r))return!0;return!1}function Ab(e,t,r){const i=e.get(t);if(i!==void 0)return i;const s=r();return e.set(t,s),s}function IY(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const fl=()=>xe.getLogger("esri.core.accessorSupport.ensureTypes");function VO(e){if(e==null)return e;const t=new Date(e);return isNaN(t.getTime())?(fl().error("Accessor#set",`Invalid date value: '${e}', falling back to current date`),new Date):t}function GO(e){return e==null?e:!!e}function ap(e){return e==null?e:e.toString()}function Nu(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function ub(e){return e==null?e:Math.round(parseFloat(e))}function qO(e){return null}function QO(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function e8(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function Oh(e,t){return t!=null&&e&&!(t instanceof e)}function t8(e){return e&&"isCollection"in e}function sS(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function WO(e,t){if(!(t!=null&&t.constructor)||!t8(t.constructor))return d2(e,t)?t:new e(t);const r=sS(e.prototype.itemType),i=sS(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(d2(e,t),t):new e(t):t}function d2(e,t){return!!e8(t)&&(fl().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Tf(e)+"'"),!0)}function $f(e,t){return t==null?t:t8(e)?WO(e,t):Oh(e,t)?d2(e,t)?t:new e(t):t}function Tf(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const HO=new WeakMap;function JO(e){switch(e){case Number:return t=>Nu(t);case Ct:return ub;case Boolean:return GO;case String:return ap;case Date:return VO;case If:return qO;default:return Ab(HO,e,(()=>$f.bind(null,e)))}}function Br(e,t){const r=JO(e);return arguments.length===1?r:r(t)}function Nc(e,t,r){return arguments.length===1?Nc.bind(null,e):t&&(Array.isArray(t)?t.map((i=>e(i,r))):[e(t,r)])}function ZO(e,t){return arguments.length===1?Nc((r=>Br(e,r))):Nc((r=>Br(e,r)),t)}function r8(e,t,r){return t!==0&&Array.isArray(r)?r.map((i=>r8(e,t-1,i))):e(r)}function Ph(e,t,r){if(arguments.length===2)return o=>Ph(e,t,o);if(!r)return r;r=r8(e,t,r);let i=t,s=r;for(;i>0&&Array.isArray(s);)i--,s=s[0];if(s!==void 0)for(let o=0;o<i;o++)r=[r];return r}function YO(e,t,r){return arguments.length===2?Ph((i=>Br(e,i)),t):Ph((i=>Br(e,i)),t,r)}function i8(e){return!!Array.isArray(e)&&!e.some((t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)}))}function h2(e,t){if(arguments.length===2)return h2(e).call(null,t);const r=new Set,i=e.filter((f=>typeof f!="function")),s=e.filter((f=>typeof f=="function"));for(const f of e)typeof f!="string"&&typeof f!="number"||r.add(f);let o=null,c=null;return(f,w)=>{if(f==null)return f;const v=typeof f,_=v==="string"||v==="number";return _&&(r.has(f)||s.some(($=>v==="string"&&$===String||v==="number"&&$===Number)))||v==="object"&&s.some(($=>!Oh(f,$)))?f:(_&&i.length?(o||(o=i.map(($=>typeof $=="string"?`'${$}'`:`${$}`)).join(", ")),fl().error("Accessor#set",`'${f}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof f=="object"&&s.length?(c||(c=s.map(($=>Tf($))).join(", ")),fl().error("Accessor#set",`'${f}' is not a valid value for this property, value must be one of ${c}`)):fl().error("Accessor#set",`'${f}' is not a valid value for this property`),w&&(w.valid=!1),null)}}function In(e,t){if(arguments.length===2)return In(e).call(null,t);const r={},i=[],s=[];for(const w in e.typeMap){const v=e.typeMap[w];r[w]=Br(v),i.push(Tf(v)),s.push(w)}const o=()=>`'${i.join("', '")}'`,c=()=>`'${s.join("', '")}'`,f=typeof e.key=="string"?w=>w[e.key]:e.key;return w=>{if(e.base&&!Oh(e.base,w)||w==null)return w;const v=f(w)||e.defaultKeyValue,_=r[v];if(!_)return fl().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${c()})`),null;if(!Oh(e.typeMap[v],w))return w;if(typeof e.key=="string"&&!e8(w)){const $={};for(const I in w)I!==e.key&&($[I]=w[I]);return _($)}return _(w)}}let Ct=class{},If=class{};const kY={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function KO(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function s8(e){switch(e.type){case"native":return Br(e.value);case"array":return Nc(s8(e.value));case"one-of":return XO(e);default:return null}}function XO(e){let t=null;return(r,i)=>y2(r,e)?r:(t==null&&(t=f2(e)),fl().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function f2(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ct:return"integer";case Date:return"date";case If:return"null";default:return Tf(e.value)}case"array":return`array of ${f2(e.value)}`;case"one-of":{const t=e.values.map((r=>f2(r)));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function y2(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Ct:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case If:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((r=>!y2(r,t.value)));case"one-of":return t.values.some((r=>y2(e,r)))}}function y(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),s=Sf(t,r);i&&(i.get||i.set?(s.get=i.get||s.get,s.set=i.set||s.set):"value"in i&&("value"in e&&xe.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=i.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const o=e.aliasOf;if(o){const w=typeof o=="string"?o:o.source,v=typeof o=="string"?null:o.overridable===!0;let _;s.dependsOn=[w],s.get=function(){let $=bl(this,w);if(typeof $=="function"){_||(_=w.split(".").slice(0,-1).join("."));const I=bl(this,_);I&&($=$.bind(I))}return $},s.readOnly||(s.set=v?function($){this._override(r,$)}:function($){$h(this,w,$)})}const c=e.type,f=e.types;if(!s.cast){let w;c?w=e9(c):f&&(w=Array.isArray(f)?Nc(In(f[0])):In(f)),e.cast=t9(e.cast,w)}W7(s,e),e.range&&(s.cast=QO(s.cast,e.range))}}function n8(e,t,r){const i=Sf(e,r);i.json||(i.json={});let s=i.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function e9(e){let t=0,r=e;if(KO(e))return s8(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(i8(i))return t===0?h2(i):Ph(h2(i),t);if(t===1)return ZO(i);if(t>1)return YO(i,t);const s=e;return s.from?s.from:Br(s)}function t9(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}function r9(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const s=t[i];r[i].forEach((o=>{t[o]=s})),delete t[i]}}}let Mn=class extends B${constructor(t,r,i){super(t,r,i)}};Mn.prototype.type="warning";function o8(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const m2=()=>xe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function nS(e,t,r){var i,s;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((s=t.read)==null?void 0:s.enabled)===!1||n9(e)&&Mr("read.reader",ju(e),t))}function ju(e){var r,i;const t=e.ndimArray??0;if(t>1)return s9(e);if(t===1)return oS(e);if("type"in e&&l8(e.type)){const s=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,o=oS(typeof s=="function"?{type:s}:{types:s});return(c,f,w)=>{const v=o(c,f,w);return v&&new e.type(v)}}return cb(e)}function cb(e){return"type"in e?i9(e.type):o9(e.types)}function i9(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void m2().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const o=new e;return o.read(t,i),o}:e.fromJSON}function a8(e,t,r,i){return i!==0&&Array.isArray(t)?t.map((s=>a8(e,s,r,i-1))):e(t,void 0,r)}function s9(e){const t=cb(e),r=a8.bind(null,t),i=e.ndimArray??0;return(s,o,c)=>{if(s==null)return s;s=r(s,c,i);let f=i,w=s;for(;f>0&&Array.isArray(w);)f--,w=w[0];if(w!==void 0)for(let v=0;v<f;v++)s=[s];return s}}function oS(e){const t=cb(e);return(r,i,s)=>{if(r==null)return r;if(Array.isArray(r)){const c=[];for(const f of r){const w=t(f,void 0,s);w!==void 0&&c.push(w)}return c}const o=t(r,void 0,s);return o!==void 0?[o]:void 0}}function l8(e){if(!o8(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?pb(t.Type):A8(t.Type))}function n9(e){return"types"in e?A8(e.types):pb(e.type)}function pb(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||l8(e))}function A8(e){for(const t in e.typeMap)if(!pb(e.typeMap[t]))return!1;return!0}function o9(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(s,o,c)=>{if(s==null)return s;const f=typeof s;if(f!=="object")return void m2().error(`Expected JSON value of type 'object' to deserialize, but got '${f}'`);t||(t=a9(e));const w=e.key;if(typeof w!="string")return;const v=s[w],_=v?t[v]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!_){const I=`Type '${v||"unknown"}' is not supported`;return c!=null&&c.messages&&s&&c.messages.push(new Mn(`${r}:unsupported`,I,{definition:s,context:c})),void m2().error(I)}const $=new _;return $.read(s,c),i?i($):$}}function a9(e){var r,i;const t={};for(const s in e.typeMap){const o=e.typeMap[s],c=np(o.prototype);if(typeof e.key=="function")continue;const f=c[e.key];if(!f)continue;if((r=f.json)!=null&&r.type&&Array.isArray(f.json.type)&&f.json.type.length===1&&typeof f.json.type[0]=="string"){t[f.json.type[0]]=o;continue}const w=(i=f.json)==null?void 0:i.write;if(!(w!=null&&w.writer)){t[s]=o;continue}const v=w.target,_=typeof v=="string"?v:e.key,$={};w.writer(s,$,_),$[_]&&(t[$[_]]=o)}return t}function l9(e){if(e.json||(e.json={}),lS(e.json),AS(e.json),aS(e.json),e.json.origins)for(const t in e.json.origins)lS(e.json.origins[t]),AS(e.json.origins[t]),aS(e.json.origins[t]);return!0}function aS(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function lS(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function AS(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function uS(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&o8(e.type))?t.write.writer=p9:r>1?t.write.writer=d9(r):t.types?Array.isArray(t.types)?t.write.writer=u9(t.types[0]):t.write.writer=A9(t.types):t.write.writer=jc}function A9(e){return(t,r,i,s)=>t?u8(t,e,s)?jc(t,r,i,s):void 0:jc(t,r,i,s)}function u8(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new re(`${i}:unsupported`,s,{definition:e,context:r})),xe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function u9(e){return(t,r,i,s)=>!t||!Array.isArray(t)?jc(t,r,i,s):jc(t.filter((o=>u8(o,e,s))),r,i,s)}function jc(e,t,r,i){Mr(r,Dh(e,i),t)}function Dh(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?c9(e):e}function c9(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function p9(e,t,r,i){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map((o=>Dh(o,i))),typeof s.toArray=="function"&&(s=s.toArray())):s=[Dh(e,i)],Mr(r,s,t)}function c8(e,t,r){return r!==0&&Array.isArray(e)?e.map((i=>c8(i,t,r-1))):Dh(e,t)}function d9(e){return(t,r,i,s)=>{let o;if(t===null)o=null;else{o=c8(t,s,e);let c=e,f=o;for(;c>0&&Array.isArray(f);)c--,f=f[0];if(f!==void 0)for(let w=0;w<c;w++)o=[o]}Mr(i,o,r)}}function h9(e,t){return db(e,"any",t==null?void 0:t.origin)}function g2(e,t){return db(e,"read",t==null?void 0:t.origin)}function p8(e,t){return db(e,"write",t==null?void 0:t.origin)}function db(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let s;s=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],s&&(t==="any"||t in s)&&(i=s)}return i}function f9(e){var r;const t=y9(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],o=s.types?m9(s):t;nS(o,s,!1),s.types&&!s.write&&((r=e.json.write)!=null&&r.enabled)&&(s.write={...e.json.write}),uS(o,s)}nS(t,e.json,!0),uS(t,e.json)}function y9(e){return e.json.types?w2(e.json):e.type?d8(e):w2(e)}function m9(e){return e.type?d8(e):w2(e)}function d8(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!i8(r);)r=r[0],t++;return{type:r,ndimArray:t}}function w2(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function g9(e){l9(e)&&(r9(e),f9(e))}const nm=new Set,om=new Set;function j(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,b9(t);const r=[],i=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!nm.has(s.initialize)&&(nm.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!om.has(s.destroy)&&(om.add(s.destroy),i.push(s.destroy)),s=Object.getPrototypeOf(s);nm.clear(),om.clear();const o=class extends t{constructor(...f){if(super(...f),this.constructor===o&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let w=r.length-1;w>=0;w--)r[w].call(this)}}),i.length){let w=!1;const v=this[M$];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!w){this.__accessor__.lifecycle=Qi.DESTROYING,w=!0,v.call(this);for(let _=0;_<i.length;_++)i[_].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};o.__accessorMetadata__=np(t.prototype),o.prototype.declaredClass=e;const c=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(o,"name",{value:c,configurable:!0}),o}}function w9(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&Ue(i);const s=r.store;return s.has(e)?s.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function b9(e){const t=e.prototype,r=np(t),i={};for(const s of Object.getOwnPropertyNames(r)){const o=r[s];g9(o),i[s]={enumerable:!0,configurable:!0,get:w9(s,o),set(c){const f=this.__accessor__;if(f!==void 0){if(f.mutable)return f.initialized&&o.readOnly?cS("read-only",s):f.lifecycle===Qi.CONSTRUCTED&&o.constructOnly?cS("construct-only",s):void f.set(s,c)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:c})}}}Object.defineProperties(e.prototype,i)}const cS=(e,t)=>{xe.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var pS,dS;function v9(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const on=Symbol("Accessor-Handles"),am=Symbol("Accessor-Initialized");var ua;let Bt=(ua=class{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const o=this;class c extends o{constructor(...w){super(...w),this.inherited=null,s&&s.apply(this,w)}}np(c.prototype);for(const f in t){const w=t[f];c.prototype[f]=typeof w=="function"?function(...v){const _=this.inherited;let $;this.inherited=function(...I){if(o.prototype[f])return o.prototype[f].apply(this,I)};try{$=w.apply(this,v)}catch(I){throw this.inherited=_,I}return this.inherited=_,$}:t[f]}for(const f in r){const w=v9(r[f]);y(w)(c.prototype,f)}return j(i)(c)}static freeze(t){return t instanceof ua?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof ua?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var i;if(this[pS]=null,this[dS]=!1,this.constructor===ua)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new sO(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[am]=!0}initialize(){}[M$](){this[on]=NA(this[on])}destroy(){var t;this.destroyed||(PO(this),this.__accessor__.destroy(),(t=cO())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[am]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Qi.DESTROYED||!1}get destroying(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Qi.DESTROYING||!1}commitProperty(t){bl(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return $h(this,t,r),this}watch(t,r,i){return p$(xe.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),LO(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const s of i)s.remove();return}(this[on]??(this[on]=new Zw)).add(t,r)}removeHandles(t){var r;(r=this[on])==null||r.remove(t)}removeAllHandles(){var t;(t=this[on])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[on])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[on])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}},pS=on,dS=am,ua);const h8=e=>{let t=class extends e{clone(){var w;const r=Si(this);B7(r,"unable to clone instance of non-accessor class");const i=r.metadata,s=r.store,o={},c=new Map;for(const v in i){const _=i[v],$=s==null?void 0:s.originOf(v),I=_.clonable;if(_.readOnly||I===!1||$!==tt.USER&&$!==tt.DEFAULTS&&$!==tt.WEB_MAP&&$!==tt.WEB_SCENE)continue;const k=this[v];let N=null;N=typeof I=="function"?I(k):I==="reference"?k:l2(k),k!=null&&N==null||($===tt.DEFAULTS?c.set(v,N):o[v]=N)}const f=new(Object.getPrototypeOf(this)).constructor(o);if(c.size){const v=(w=Si(f))==null?void 0:w.store;if(v)for(const[_,$]of c)v.set(_,$,tt.DEFAULTS)}return f}};return t=u([j("esri.core.Clonable")],t),t};let M0=class extends h8(Bt){};M0=u([j("esri.core.Clonable")],M0),(function(e){e.ClonableMixin=h8})(M0||(M0={}));const nt=M0;let Md=class f8{constructor(){this._emitter=new f8.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,o){var v;let c=(v=this._listenersMap)==null?void 0:v.get(s);if(!c)return!1;const f=this._target||this;let w=!1;for(const _ of c.slice()){const $="deref"in _?_.deref():_;$?$==null||$.call(f,o):w=!0}return w&&(c=c.filter((_=>!("deref"in _)||_.deref()!=null)),this._listenersMap.set(s,c)),c.length>0}on(s,o){if(Array.isArray(s)){const f=s.map((w=>this.on(w,o)));return vf(f)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const c=this._listenersMap.get(s)||[];return c.push(o),this._listenersMap.set(s,c),gr((()=>{var v;const f=(v=this._listenersMap)==null?void 0:v.get(s),w=(f==null?void 0:f.indexOf(o))??-1;w>=0&&f.splice(w,1)}))}once(s,o){const c=this.on(s,(f=>{c.remove();const w="deref"in o?o.deref():o;w==null||w.call(null,f)}));return c}hasEventListener(s){var c;const o=(c=this._listenersMap)==null?void 0:c.get(s);return o!=null&&o.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let s=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(o,c){return this._emitter.emit(o,c)}on(o,c){return this._emitter.on(o,c)}once(o,c){return this._emitter.once(o,c)}hasEventListener(o){return this._emitter.hasEventListener(o)}};return s=u([j("esri.core.Evented")],s),s};let r=class extends Bt{constructor(){super(...arguments),this._emitter=new Md.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,s){return this._emitter.emit(i,s)}on(i,s){return this._emitter.on(i,s)}once(i,s){return this._emitter.once(i,s)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=u([j("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(Md||(Md={}));const hb=Md;var Et;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Et||(Et={}));function fb(e){return(t,r)=>{t[r]=e}}let yb=class extends D${notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};function Lc(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}var jn;let S9=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},_9=class{constructor(t,r,i,s,o){this.target=t,this.added=r,this.removed=i,this.start=s,this.deleteCount=o}};const os=new _f(S9,void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}));function hS(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function lm(e){return e?e instanceof jo?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Am(e){if(e!=null&&e.length)return e[0]}function E9(e,t,r,i){const s=Math.min(e.length-r,t.length-i);let o=0;for(;o<s&&e[r+o]===t[i+o];)o++;return o}function y8(e,t,r,i){t&&t.forEach(((s,o,c)=>{e.push(s),y8(e,r.call(i,s,o,c),r,i)}))}const _o=new Set,Eo=new Set,xo=new Set,um=new Map;let x9=0;var gl;let jo=(gl=class extends hb.EventedAccessor{static isCollection(t){return t!=null&&t instanceof jn}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new yb,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:x9++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof jn?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Ue(this._observable),this._items}set items(t){this._emitBeforeChanges(Et.ADD)||(this._splice(0,this.length,lm(t)),this._emitAfterChanges(Et.ADD))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t))}on(t,r){if(this.destroyed)return gr();if(t==="change"){const i=this._chgListeners,s={removed:!1,callback:r};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),gr((()=>{s.removed=!0,i.splice(i.indexOf(s),1)}))}return this._emitter.on(t,r)}once(t,r){const i="deref"in r?()=>r.deref():()=>r,s=this.on(t,(o=>{var c;(c=i())==null||c.call(null,o),s.remove()}));return s}add(t,r){if(Ue(this._observable),this._emitBeforeChanges(Et.ADD))return this;const i=this.getNextIndex(r??null);return this._splice(i,0,[t]),this._emitAfterChanges(Et.ADD),this}addMany(t,r=this._items.length){if(Ue(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(Et.ADD))return this;const i=this.getNextIndex(r);return this._splice(i,0,lm(t)),this._emitAfterChanges(Et.ADD),this}at(t){if(Ue(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ue(this._observable),!this.length||this._emitBeforeChanges(Et.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(Et.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ue(this._observable),this._createNewInstance({items:this._items.map(q)})}concat(...t){Ue(this._observable);const r=t.map(lm);return this._createNewInstance({items:this._items.concat(...r)})}drain(t,r){if(Ue(this._observable),!this.length||this._emitBeforeChanges(Et.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let o=0;o<s;o++)t.call(r,i[o],o,i);this._emitAfterChanges(Et.REMOVE)}destroyAll(){this.drain(hS)}destroyMany(t){const r=this.removeMany(t);return r.forEach(hS),r}every(t,r){return Ue(this._observable),this._items.every(t,r)}filter(t,r){Ue(this._observable);const i=arguments.length===2?this._items.filter(t,r):this._items.filter(t);return this._createNewInstance({items:i})}find(t,r){return Ue(this._observable),this._items.find(t,r)}findIndex(t,r){return Ue(this._observable),this._items.findIndex(t,r)}flatten(t,r){Ue(this._observable);const i=[];return y8(i,this,t,r),new jn(i)}forEach(t,r){return Ue(this._observable),this._items.forEach(t,r)}getItemAt(t){return Ue(this._observable),this._items[t]}getNextIndex(t){Ue(this._observable);const r=this.length;return(t=t??r)<0?t=0:t>r&&(t=r),t}includes(t,r=0){return Ue(this._observable),this._items.includes(t,r)}indexOf(t,r=0){return Ue(this._observable),this._items.indexOf(t,r)}join(t=","){return Ue(this._observable),this._items.join(t)}lastIndexOf(t,r=this.length-1){return Ue(this._observable),this._items.lastIndexOf(t,r)}map(t,r){Ue(this._observable);const i=this._items.map(t,r);return new jn({items:i})}reorder(t,r=this.length-1){Ue(this._observable);const i=this.indexOf(t);if(i!==-1){if(r<0?r=0:r>=this.length&&(r=this.length-1),i!==r){if(this._emitBeforeChanges(Et.MOVE))return t;this._splice(i,1),this._splice(r,0,[t]),this._emitAfterChanges(Et.MOVE)}return t}}pop(){if(Ue(this._observable),!this.length||this._emitBeforeChanges(Et.REMOVE))return;const t=Am(this._splice(this.length-1,1));return this._emitAfterChanges(Et.REMOVE),t}push(...t){return Ue(this._observable),this._emitBeforeChanges(Et.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(Et.ADD)),this.length}reduce(t,r){Ue(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,r):i.reduce(t)}reduceRight(t,r){Ue(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,r):i.reduceRight(t)}remove(t){return Ue(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ue(this._observable),t<0||t>=this.length||this._emitBeforeChanges(Et.REMOVE))return;const r=Am(this._splice(t,1));return this._emitAfterChanges(Et.REMOVE),r}removeMany(t){if(Ue(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(Et.REMOVE))return[];const r=t instanceof jn?t.toArray():t,i=this._items,s=[],o=r.length;for(let c=0;c<o;c++){const f=r[c],w=i.indexOf(f);if(w>-1){const v=1+E9(r,i,c+1,w+1),_=this._splice(w,v);_&&_.length>0&&s.push.apply(s,_),c+=v-1}}return this._emitAfterChanges(Et.REMOVE),s}reverse(){if(Ue(this._observable),this._emitBeforeChanges(Et.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(Et.MOVE),this}shift(){if(Ue(this._observable),!this.length||this._emitBeforeChanges(Et.REMOVE))return;const t=Am(this._splice(0,1));return this._emitAfterChanges(Et.REMOVE),t}slice(t=0,r=this.length){return Ue(this._observable),this._createNewInstance({items:this._items.slice(t,r)})}some(t,r){return Ue(this._observable),this._items.some(t,r)}sort(t){if(Ue(this._observable),!this.length||this._emitBeforeChanges(Et.MOVE)||!this._requiresSort(t))return this;const r=this._splice(0,this.length);return arguments.length?r.sort(t):r.sort(),this._splice(0,0,r),this._emitAfterChanges(Et.MOVE),this}_requiresSort(t=(r,i)=>r===i?0:r<i?-1:1){const r=this.length-1;for(let i=0;i<r;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,r,...i){Ue(this._observable),arguments.length===1&&(r=this.length),r??(r=0);const s=(r?Et.REMOVE:0)|(i.length?Et.ADD:0);if(this._emitBeforeChanges(s))return[];const o=this._splice(t,r,i)||[];return this._emitAfterChanges(s),o}toArray(){return Ue(this._observable),this._items.slice()}toJSON(t){return Ue(this._observable),this.toArray().map((r=>Lc(r)?r.toJSON(t):r))}toLocaleString(){return Ue(this._observable),this._items.toLocaleString()}toString(){return Ue(this._observable),this._items.toString()}unshift(...t){return Ue(this._observable),!t.length||this._emitBeforeChanges(Et.ADD)||(this._splice(0,0,t),this._emitAfterChanges(Et.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,r,i){const s=this._items,o=this.itemType;let c,f;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=H$((()=>this._dispatchChange()))),t<0&&(t+=this.length),r){if(f=s.splice(t,r),this.hasEventListener("before-remove")){const w=os.acquire();w.target=this,w.cancellable=!0;for(let v=0,_=f.length;v<_;v++)c=f[v],w.reset(c),this.emit("before-remove",w),w.defaultPrevented&&(f.splice(v,1),s.splice(t,0,c),t+=1,v-=1,_-=1);os.release(w)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const w=os.acquire();w.target=this,w.cancellable=!1;const v=f.length;for(let _=0;_<v;_++)w.reset(f[_]),this.emit("after-remove",w);os.release(w)}}if(i!=null&&i.length){if(o){const $=[];for(const I of i){const k=o.ensureType(I);k==null&&I!=null||$.push(k)}i=$}const w=this.hasEventListener("before-add"),v=this.hasEventListener("after-add"),_=t===this.length;if(w||v){const $=os.acquire();$.target=this,$.cancellable=!0;const I=os.acquire();I.target=this,I.cancellable=!1;for(const k of i)w?($.reset(k),this.emit("before-add",$),$.defaultPrevented||(_?s.push(k):s.splice(t++,0,k),this._set("length",s.length),v&&(I.reset(k),this.emit("after-add",I)))):(_?s.push(k):s.splice(t++,0,k),this._set("length",s.length),I.reset(k),this.emit("after-add",I));os.release(I),os.release($)}else{if(_)for(const $ of i)s.push($);else s.splice(t,0,...i);this._set("length",s.length)}}if((i!=null&&i.length||f!=null&&f.length)&&this._notifyChangeEvent(i,f),this.hasEventListener("after-splice")){const w=new _9(this,i,f,t,r);this.emit("after-splice",w)}return f}_emitBeforeChanges(t){let r=!1;if(this.hasEventListener("before-changes")){const i=os.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),r=i.defaultPrevented,os.release(i)}return r}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const r=os.acquire();r.target=this,r.cancellable=!1,r.type=t,this.emit("after-changes",r),os.release(r)}this._observable.notify()}_notifyChangeEvent(t,r){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:r})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const r of t){const i=r.changes;_o.clear(),Eo.clear(),xo.clear();for(const{added:v,removed:_}of i){if(v)if(xo.size===0&&Eo.size===0)for(const $ of v)_o.add($);else for(const $ of v)Eo.has($)?(xo.add($),Eo.delete($)):xo.has($)||_o.add($);if(_)if(xo.size===0&&_o.size===0)for(const $ of _)Eo.add($);else for(const $ of _)_o.has($)?_o.delete($):(xo.delete($),Eo.add($))}const s=No.acquire();_o.forEach((v=>{s.push(v)}));const o=No.acquire();Eo.forEach((v=>{o.push(v)}));const c=this._items,f=r.items,w=No.acquire();if(xo.forEach((v=>{f.indexOf(v)!==c.indexOf(v)&&w.push(v)})),r.listeners&&(s.length||o.length||w.length)){const v={target:this,added:s,removed:o,moved:w},_=r.listeners.length;for(let $=0;$<_;$++){const I=r.listeners[$];I.removed||I.callback.call(this,v)}}No.release(s),No.release(o),No.release(w)}_o.clear(),Eo.clear(),xo.clear()}},jn=gl,gl.ofType=t=>{if(!t)return jn;if(um.has(t))return um.get(t);let r=null;if(typeof t=="function")r=t.prototype.declaredClass;else if(t.base)r=t.base.prototype.declaredClass;else for(const s in t.typeMap){const o=t.typeMap[s].prototype.declaredClass;r?r+=` | ${o}`:r=o}let i=class extends jn{};return u([fb({Type:t,ensureType:typeof t=="function"?Br(t):In(t)})],i.prototype,"itemType",void 0),i=u([j(`esri.core.Collection<${r}>`)],i),um.set(t,i),i},gl);u([y()],jo.prototype,"_updating",void 0),u([y()],jo.prototype,"length",void 0),u([y()],jo.prototype,"items",null),u([y({readOnly:!0})],jo.prototype,"updating",null),jo=jn=u([j("esri.core.Collection")],jo);const st=jo;let $9=class m8{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new m8;return this._values.forEach(((i,s)=>{t&&t.has(s)||r.set(s,q(i.value),i.origin)})),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??tt.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter((i=>{var s;return((s=this._values.get(i))==null?void 0:s.origin)===t}))}set(t,r,i){if((i=this._normalizeOrigin(i))===tt.DEFAULTS){const s=this._values.get(t);if((s==null?void 0:s.origin)!=null&&s.origin>i)return}this._values.set(t,new T9(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}isAtOrigin(t,r){return r=this._normalizeOrigin(r),this.has(t,r)&&this.originOf(t)===r}isBelowOrigin(t,r){return r=this._normalizeOrigin(r),!this.has(t)||this.originOf(t)<r}forEach(t){this._values.forEach((({value:r},i)=>t(r,i)))}_normalizeOrigin(t){if(t!=null)return t===tt.DEFAULTS?t:tt.USER}},T9=class{constructor(t,r){this.value=t,this.origin=r}};function g8(e,t,r){t.keys().forEach((s=>{r.set(s,t.get(s),tt.DEFAULTS)}));const i=e.metadata;Object.keys(i).forEach((s=>{e.internalGet(s)&&r.set(s,e.internalGet(s),tt.DEFAULTS)}))}function I9(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&W3(i,r))return!0}else for(const s of i)if(s===t||s.includes(".")&&s.indexOf(t)===0&&W3(s,r))return!0;return!1}function M9(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function C9(e,t,r,i,s){let o=g2(t[r],s);M9(o)&&(e[r]=!0);for(const c of Object.getOwnPropertyNames(t))o=g2(t[c],s),I9(o,r,i)&&(e[c]=!0)}function k9(e,t,r,i){const s=r.metadata,o=h9(s[t],i),c=o==null?void 0:o.default;if(c===void 0)return;const f=typeof c=="function"?c.call(e,t,i):c;f!==void 0&&r.set(t,f)}const w8={origin:"service"};function b8(e,t,r=w8){if(!t||typeof t!="object")return;const i=Si(e),s=i.metadata,o={};for(const c of Object.getOwnPropertyNames(t))C9(o,s,c,t,r);i.setDefaultOrigin(r.origin);for(const c of Object.getOwnPropertyNames(o)){const f=g2(s[c],r).read,w=f==null?void 0:f.source;let v;v=w&&typeof w=="string"?sp(t,w):t[c],f!=null&&f.reader&&(v=f.reader.call(e,v,t,r)),v!==void 0&&i.set(c,v)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const c of Object.getOwnPropertyNames(s))o[c]||k9(e,c,i,r)}i.setDefaultOrigin("user")}function O9(e,t,r,i=w8){var o;const s={...i,messages:[]};r(s),(o=s.messages)==null||o.forEach((c=>{c.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(c):e.loadWarnings.push(c)}))}function P9(e,t,r,i,s){var c,f;const o={};return(f=(c=t.write)==null?void 0:c.writer)==null||f.call(e,i,o,r,s),o}function v8(e,t,r,i,s,o){if(!(i!=null&&i.write))return!1;const c=bl(e,r);if(!s&&i.write.overridePolicy){const f=i.write.overridePolicy.call(e,c,r,o??void 0);f!==void 0&&(s=f)}if(s||(s=i.write),!s||s.enabled===!1||s.layerContainerTypes&&(o!=null&&o.layerContainerType)&&!s.layerContainerTypes.includes(o.layerContainerType))return!1;if((c===null&&!s.allowNull&&!s.writerEnsuresNonNull||c===void 0)&&s.isRequired){const f=new re("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return f&&(o!=null&&o.messages)?o.messages.push(f):f&&!o&&xe.getLogger("esri.core.accessorSupport.write").error(f.name,f.message),!1}return!(c===void 0||c===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===tt.DEFAULTS)&&D9(e,r,o,i,c)||!s.ignoreOrigin&&(o!=null&&o.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Zo(o.origin))}function D9(e,t,r,i,s){const o=i.default;if(o===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(s);if(typeof o=="function"){if(Array.isArray(s)){const c=o.call(e,t,r??void 0);return mf(c,s)}return!1}return o===s}function F9(e,t,r,i){const s=Si(e),o=s.metadata,c=p8(o[t],i);return!!c&&v8(e,s,t,c,r,i)}function S8(e,t,r){var o,c;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Ed(t,e.toJSON(r));const i=Si(e),s=i.metadata;for(const f in s){const w=p8(s[f],r);if(!v8(e,i,f,w,void 0,r))continue;const v=bl(e,f),_=P9(e,w,w.write&&typeof w.write.target=="string"?w.write.target:f,v,r);Object.keys(_).length>0&&(t=Ed(t,_),(c=(o=r==null?void 0:r.resources)==null?void 0:o.pendingOperations)!=null&&c.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then((()=>Ed(t,_,(()=>"replace-arrays"))))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:f,oldOrigin:eO(i.store.originOf(f)),newOrigin:r.origin}))}return t}const _8=e=>{let t=class extends e{constructor(...r){super(...r);const i=Si(this),s=i.store,o=new $9;i.store=o,g8(i,s,o)}read(r,i){b8(this,r,i)}write(r,i){return S8(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return R9.call(this,r,i)}};return t=u([j("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function R9(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let C0=class extends _8(Bt){};C0=u([j("esri.core.JSONSupport")],C0),(function(e){e.JSONSupportMixin=_8})(C0||(C0={}));const se=C0,N9=Object.prototype.toString;function j9(e){const t="__accessorMetadata__"in e?Br(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return L9.apply(this,r)}}function L9(e,t,r,i){Sf(e,t).cast=i}function B9(e){return(t,r)=>{Sf(t,e).cast=t[r]}}function Yt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&N9.call(e[0])==="[object Function]"?j9(e[0]):e.length===1&&typeof e[0]=="string"?B9(e[0]):void 0}function ce(e,t,r){let i,s;return t===void 0||Array.isArray(t)?(s=e,r=t,i=[void 0]):(s=t,i=Array.isArray(e)?e:[e]),(o,c)=>{const f=o.constructor.prototype;i.forEach((w=>{const v=n8(o,w,s);v.read&&typeof v.read=="object"||(v.read={}),v.read.reader=f[c],r&&(v.read.source=(v.read.source||[]).concat(r))}))}}function me(e,t,r){let i,s;return t===void 0?(s=e,i=[void 0]):typeof t!="string"?(s=e,i=[void 0],r=t):(s=t,i=Array.isArray(e)?e:[e]),(o,c)=>{const f=o.constructor.prototype;for(const w of i){const v=n8(o,w,s);v.write&&typeof v.write=="object"||(v.write={}),r&&(v.write.target=r),v.write.writer=f[c]}}}const U9="modulepreload",z9=function(e,t){return new URL(e,t).href},fS={},Pe=function(t,r,i){let s=Promise.resolve();if(r&&r.length>0){let c=function(_){return Promise.all(_.map($=>Promise.resolve($).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};const f=document.getElementsByTagName("link"),w=document.querySelector("meta[property=csp-nonce]"),v=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));s=c(r.map(_=>{if(_=z9(_,i),_ in fS)return;fS[_]=!0;const $=_.endsWith(".css"),I=$?'[rel="stylesheet"]':"";if(!!i)for(let B=f.length-1;B>=0;B--){const L=f[B];if(L.href===_&&(!$||L.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_}"]${I}`))return;const N=document.createElement("link");if(N.rel=$?"stylesheet":U9,$||(N.as="script"),N.crossOrigin="",N.href=_,v&&N.setAttribute("nonce",v),document.head.appendChild(N),$)return new Promise((B,L)=>{N.addEventListener("load",B),N.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${_}`)))})}))}function o(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return s.then(c=>{for(const f of c||[])f.status==="rejected"&&o(f.reason);return t().catch(o)})};let cm;async function V9(){return cm==null&&(cm=Pe(()=>import("./WhereClauseCache-DaRLeTPC.js"),__vite__mapDeps([0,1]),import.meta.url).then((e=>new e.WhereClauseCache(500,500)))),cm}async function G9(e,t){const r=await V9(),i=r.get(e,t);if(i==null)throw r.getError(e,t);return i}function q9(e,t){return e||(e=null),t||(t=null),e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function Q9(e,t){return e||(e=null),t||(t=null),e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function W9(e){return typeof e=="number"}function LY(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function BY(e){return typeof e=="boolean"}function lp(e){return typeof e=="string"||e instanceof String}function H9(e){return e==null||lp(e)}function UY(e){return Array.isArray(e)}function zY(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function VY(e){return e instanceof Date}class Ol extends Error{}class J9 extends Ol{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Z9 extends Ol{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Y9 extends Ol{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class xA extends Ol{}class E8 extends Ol{constructor(t){super(`Invalid unit ${t}`)}}class si extends Ol{}class $o extends Ol{constructor(){super("Zone is an abstract class")}}const be="numeric",en="short",Zi="long",Fh={year:be,month:be,day:be},x8={year:be,month:en,day:be},K9={year:be,month:en,day:be,weekday:en},$8={year:be,month:Zi,day:be},T8={year:be,month:Zi,day:be,weekday:Zi},I8={hour:be,minute:be},M8={hour:be,minute:be,second:be},C8={hour:be,minute:be,second:be,timeZoneName:en},k8={hour:be,minute:be,second:be,timeZoneName:Zi},O8={hour:be,minute:be,hourCycle:"h23"},P8={hour:be,minute:be,second:be,hourCycle:"h23"},D8={hour:be,minute:be,second:be,hourCycle:"h23",timeZoneName:en},F8={hour:be,minute:be,second:be,hourCycle:"h23",timeZoneName:Zi},R8={year:be,month:be,day:be,hour:be,minute:be},N8={year:be,month:be,day:be,hour:be,minute:be,second:be},j8={year:be,month:en,day:be,hour:be,minute:be},L8={year:be,month:en,day:be,hour:be,minute:be,second:be},X9={year:be,month:en,day:be,weekday:en,hour:be,minute:be},B8={year:be,month:Zi,day:be,hour:be,minute:be,timeZoneName:en},U8={year:be,month:Zi,day:be,hour:be,minute:be,second:be,timeZoneName:en},z8={year:be,month:Zi,day:be,weekday:Zi,hour:be,minute:be,timeZoneName:Zi},V8={year:be,month:Zi,day:be,weekday:Zi,hour:be,minute:be,second:be,timeZoneName:Zi};class Pl{get type(){throw new $o}get name(){throw new $o}get ianaName(){return this.name}get isUniversal(){throw new $o}offsetName(t,r){throw new $o}formatOffset(t,r){throw new $o}offset(t){throw new $o}equals(t){throw new $o}get isValid(){throw new $o}}let pm=null;class Mf extends Pl{static get instance(){return pm===null&&(pm=new Mf),pm}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return e6(t,r,i)}formatOffset(t,r){return hc(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const b2=new Map;function eP(e){let t=b2.get(e);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),b2.set(e,t)),t}const tP={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function rP(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,s,o,c,f,w,v,_]=i;return[c,s,o,f,w,v,_]}function iP(e,t){const r=e.formatToParts(t),i=[];for(let s=0;s<r.length;s++){const{type:o,value:c}=r[s],f=tP[o];o==="era"?i[f]=c:Ze(f)||(i[f]=parseInt(c,10))}return i}const dm=new Map;class Ri extends Pl{static create(t){let r=dm.get(t);return r===void 0&&dm.set(t,r=new Ri(t)),r}static resetCache(){dm.clear(),b2.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Ri.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return e6(t,r,i,this.name)}formatOffset(t,r){return hc(this.offset(t),r)}offset(t){if(!this.valid)return NaN;const r=new Date(t);if(isNaN(r))return NaN;const i=eP(this.name);let[s,o,c,f,w,v,_]=i.formatToParts?iP(i,r):rP(i,r);f==="BC"&&(s=-Math.abs(s)+1);const I=kf({year:s,month:o,day:c,hour:w===24?0:w,minute:v,second:_,millisecond:0});let k=+r;const N=k%1e3;return k-=N>=0?N:1e3+N,(I-k)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let yS={};function sP(e,t={}){const r=JSON.stringify([e,t]);let i=yS[r];return i||(i=new Intl.ListFormat(e,t),yS[r]=i),i}const v2=new Map;function S2(e,t={}){const r=JSON.stringify([e,t]);let i=v2.get(r);return i===void 0&&(i=new Intl.DateTimeFormat(e,t),v2.set(r,i)),i}const _2=new Map;function nP(e,t={}){const r=JSON.stringify([e,t]);let i=_2.get(r);return i===void 0&&(i=new Intl.NumberFormat(e,t),_2.set(r,i)),i}const E2=new Map;function oP(e,t={}){const{base:r,...i}=t,s=JSON.stringify([e,i]);let o=E2.get(s);return o===void 0&&(o=new Intl.RelativeTimeFormat(e,t),E2.set(s,o)),o}let k0=null;function aP(){return k0||(k0=new Intl.DateTimeFormat().resolvedOptions().locale,k0)}const x2=new Map;function G8(e){let t=x2.get(e);return t===void 0&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),x2.set(e,t)),t}const $2=new Map;function lP(e){let t=$2.get(e);if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in t||(t={...q8,...t}),$2.set(e,t)}return t}function AP(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,s;try{i=S2(e).resolvedOptions(),s=e}catch{const w=e.substring(0,r);i=S2(w).resolvedOptions(),s=w}const{numberingSystem:o,calendar:c}=i;return[s,o,c]}}function uP(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function cP(e){const t=[];for(let r=1;r<=12;r++){const i=Se.utc(2009,r,1);t.push(e(i))}return t}function pP(e){const t=[];for(let r=1;r<=7;r++){const i=Se.utc(2016,11,13+r);t.push(e(i))}return t}function Qp(e,t,r,i){const s=e.listingMode();return s==="error"?null:s==="en"?r(t):i(t)}function dP(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||G8(e.locale).numberingSystem==="latn"}class hP{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:o,...c}=i;if(!r||Object.keys(c).length>0){const f={useGrouping:!1,...i};i.padTo>0&&(f.minimumIntegerDigits=i.padTo),this.inf=nP(t,f)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):vb(t,3);return yr(r,this.padTo)}}}class fP{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const c=-1*(t.offset/60),f=c>=0?`Etc/GMT+${c}`:`Etc/GMT${c}`;t.offset!==0&&Ri.create(f).valid?(s=f,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const o={...this.opts};o.timeZone=o.timeZone||s,this.dtf=S2(r,o)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class yP{constructor(t,r,i){this.opts={style:"long",...i},!r&&K8()&&(this.rtf=oP(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):jP(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const q8={firstDay:1,minimalDays:4,weekend:[6,7]};class Mt{static fromOpts(t){return Mt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,s,o=!1){const c=t||rr.defaultLocale,f=c||(o?"en-US":aP()),w=r||rr.defaultNumberingSystem,v=i||rr.defaultOutputCalendar,_=I2(s)||rr.defaultWeekSettings;return new Mt(f,w,v,_,c)}static resetCache(){k0=null,v2.clear(),_2.clear(),E2.clear(),x2.clear(),$2.clear()}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:s}={}){return Mt.create(t,r,i,s)}constructor(t,r,i,s,o){const[c,f,w]=AP(t);this.locale=c,this.numberingSystem=r||f||null,this.outputCalendar=i||w||null,this.weekSettings=s,this.intl=uP(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=dP(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Mt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,I2(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return Qp(this,t,i6,()=>{const i=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=cP(o=>this.extract(o,i,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1){return Qp(this,t,o6,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=pP(o=>this.extract(o,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return Qp(this,void 0,()=>a6,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Se.utc(2016,11,13,9),Se.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Qp(this,t,l6,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Se.utc(-40,1,1),Se.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const s=this.dtFormatter(t,r),o=s.formatToParts(),c=o.find(f=>f.type.toLowerCase()===i);return c?c.value:null}numberFormatter(t={}){return new hP(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new fP(t,this.intl,r)}relFormatter(t={}){return new yP(this.intl,this.isEnglish(),t)}listFormatter(t={}){return sP(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||G8(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:X8()?lP(this.locale):q8}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let hm=null;class mr extends Pl{static get utcInstance(){return hm===null&&(hm=new mr(0)),hm}static instance(t){return t===0?mr.utcInstance:new mr(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new mr(Of(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${hc(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${hc(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return hc(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class mP extends Pl{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function qo(e,t){if(Ze(e)||e===null)return t;if(e instanceof Pl)return e;if(_P(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?Mf.instance:r==="utc"||r==="gmt"?mr.utcInstance:mr.parseSpecifier(r)||Ri.create(e)}else return aa(e)?mr.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new mP(e)}const mb={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},mS={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},gP=mb.hanidec.replace(/[\[|\]]/g,"").split("");function wP(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(mb.hanidec)!==-1)t+=gP.indexOf(e[r]);else for(const s in mS){const[o,c]=mS[s];i>=o&&i<=c&&(t+=i-o)}}return parseInt(t,10)}else return t}const T2=new Map;function bP(){T2.clear()}function Ss({numberingSystem:e},t=""){const r=e||"latn";let i=T2.get(r);i===void 0&&(i=new Map,T2.set(r,i));let s=i.get(t);return s===void 0&&(s=new RegExp(`${mb[r]}${t}`),i.set(t,s)),s}let gS=()=>Date.now(),wS="system",bS=null,vS=null,SS=null,_S=60,ES,xS=null;class rr{static get now(){return gS}static set now(t){gS=t}static set defaultZone(t){wS=t}static get defaultZone(){return qo(wS,Mf.instance)}static get defaultLocale(){return bS}static set defaultLocale(t){bS=t}static get defaultNumberingSystem(){return vS}static set defaultNumberingSystem(t){vS=t}static get defaultOutputCalendar(){return SS}static set defaultOutputCalendar(t){SS=t}static get defaultWeekSettings(){return xS}static set defaultWeekSettings(t){xS=I2(t)}static get twoDigitCutoffYear(){return _S}static set twoDigitCutoffYear(t){_S=t%100}static get throwOnInvalid(){return ES}static set throwOnInvalid(t){ES=t}static resetCaches(){Mt.resetCache(),Ri.resetCache(),Se.resetCache(),bP()}}class Gs{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Q8=[0,31,59,90,120,151,181,212,243,273,304,334],W8=[0,31,60,91,121,152,182,213,244,274,305,335];function fs(e,t){return new Gs("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function gb(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function H8(e,t,r){return r+(Ap(e)?W8:Q8)[t-1]}function J8(e,t){const r=Ap(e)?W8:Q8,i=r.findIndex(o=>o<t),s=t-r[i];return{month:i+1,day:s}}function wb(e,t){return(e-t+7)%7+1}function Rh(e,t=4,r=1){const{year:i,month:s,day:o}=e,c=H8(i,s,o),f=wb(gb(i,s,o),r);let w=Math.floor((c-f+14-t)/7),v;return w<1?(v=i-1,w=Bc(v,t,r)):w>Bc(i,t,r)?(v=i+1,w=1):v=i,{weekYear:v,weekNumber:w,weekday:f,...Pf(e)}}function $S(e,t=4,r=1){const{weekYear:i,weekNumber:s,weekday:o}=e,c=wb(gb(i,1,t),r),f=LA(i);let w=s*7+o-c-7+t,v;w<1?(v=i-1,w+=LA(v)):w>f?(v=i+1,w-=LA(i)):v=i;const{month:_,day:$}=J8(v,w);return{year:v,month:_,day:$,...Pf(e)}}function fm(e){const{year:t,month:r,day:i}=e,s=H8(t,r,i);return{year:t,ordinal:s,...Pf(e)}}function TS(e){const{year:t,ordinal:r}=e,{month:i,day:s}=J8(t,r);return{year:t,month:i,day:s,...Pf(e)}}function IS(e,t){if(!Ze(e.localWeekday)||!Ze(e.localWeekNumber)||!Ze(e.localWeekYear)){if(!Ze(e.weekday)||!Ze(e.weekNumber)||!Ze(e.weekYear))throw new xA("Cannot mix locale-based week fields with ISO-based week fields");return Ze(e.localWeekday)||(e.weekday=e.localWeekday),Ze(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Ze(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function vP(e,t=4,r=1){const i=Cf(e.weekYear),s=ys(e.weekNumber,1,Bc(e.weekYear,t,r)),o=ys(e.weekday,1,7);return i?s?o?!1:fs("weekday",e.weekday):fs("week",e.weekNumber):fs("weekYear",e.weekYear)}function SP(e){const t=Cf(e.year),r=ys(e.ordinal,1,LA(e.year));return t?r?!1:fs("ordinal",e.ordinal):fs("year",e.year)}function Z8(e){const t=Cf(e.year),r=ys(e.month,1,12),i=ys(e.day,1,Nh(e.year,e.month));return t?r?i?!1:fs("day",e.day):fs("month",e.month):fs("year",e.year)}function Y8(e){const{hour:t,minute:r,second:i,millisecond:s}=e,o=ys(t,0,23)||t===24&&r===0&&i===0&&s===0,c=ys(r,0,59),f=ys(i,0,59),w=ys(s,0,999);return o?c?f?w?!1:fs("millisecond",s):fs("second",i):fs("minute",r):fs("hour",t)}function Ze(e){return typeof e>"u"}function aa(e){return typeof e=="number"}function Cf(e){return typeof e=="number"&&e%1===0}function _P(e){return typeof e=="string"}function EP(e){return Object.prototype.toString.call(e)==="[object Date]"}function K8(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function X8(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function xP(e){return Array.isArray(e)?e:[e]}function MS(e,t,r){if(e.length!==0)return e.reduce((i,s)=>{const o=[t(s),s];return i&&r(i[0],o[0])===i[0]?i:o},null)[1]}function $P(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function _u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function I2(e){if(e==null)return null;if(typeof e!="object")throw new si("Week settings must be an object");if(!ys(e.firstDay,1,7)||!ys(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!ys(t,1,7)))throw new si("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function ys(e,t,r){return Cf(e)&&e>=t&&e<=r}function TP(e,t){return e-t*Math.floor(e/t)}function yr(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Lo(e){if(!(Ze(e)||e===null||e===""))return parseInt(e,10)}function Pa(e){if(!(Ze(e)||e===null||e===""))return parseFloat(e)}function bb(e){if(!(Ze(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function vb(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function Ap(e){return e%4===0&&(e%100!==0||e%400===0)}function LA(e){return Ap(e)?366:365}function Nh(e,t){const r=TP(t-1,12)+1,i=e+(t-r)/12;return r===2?Ap(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function kf(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function CS(e,t,r){return-wb(gb(e,1,t),r)+t-1}function Bc(e,t=4,r=1){const i=CS(e,t,r),s=CS(e+1,t,r);return(LA(e)-i+s)/7}function M2(e){return e>99?e:e>rr.twoDigitCutoffYear?1900+e:2e3+e}function e6(e,t,r,i=null){const s=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(o.timeZone=i);const c={timeZoneName:t,...o},f=new Intl.DateTimeFormat(r,c).formatToParts(s).find(w=>w.type.toLowerCase()==="timezonename");return f?f.value:null}function Of(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,s=r<0||Object.is(r,-0)?-i:i;return r*60+s}function t6(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new si(`Invalid unit value ${e}`);return t}function jh(e,t){const r={};for(const i in e)if(_u(e,i)){const s=e[i];if(s==null)continue;r[t(i)]=t6(s)}return r}function hc(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${yr(r,2)}:${yr(i,2)}`;case"narrow":return`${s}${r}${i>0?`:${i}`:""}`;case"techie":return`${s}${yr(r,2)}${yr(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Pf(e){return $P(e,["hour","minute","second","millisecond"])}const IP=["January","February","March","April","May","June","July","August","September","October","November","December"],r6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MP=["J","F","M","A","M","J","J","A","S","O","N","D"];function i6(e){switch(e){case"narrow":return[...MP];case"short":return[...r6];case"long":return[...IP];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const s6=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],n6=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],CP=["M","T","W","T","F","S","S"];function o6(e){switch(e){case"narrow":return[...CP];case"short":return[...n6];case"long":return[...s6];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const a6=["AM","PM"],kP=["Before Christ","Anno Domini"],OP=["BC","AD"],PP=["B","A"];function l6(e){switch(e){case"narrow":return[...PP];case"short":return[...OP];case"long":return[...kP];default:return null}}function DP(e){return a6[e.hour<12?0:1]}function FP(e,t){return o6(t)[e.weekday-1]}function RP(e,t){return i6(t)[e.month-1]}function NP(e,t){return l6(t)[e.year<0?0:1]}function jP(e,t,r="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&o){const $=e==="days";switch(t){case 1:return $?"tomorrow":`next ${s[e][0]}`;case-1:return $?"yesterday":`last ${s[e][0]}`;case 0:return $?"today":`this ${s[e][0]}`}}const c=Object.is(t,-0)||t<0,f=Math.abs(t),w=f===1,v=s[e],_=i?w?v[1]:v[2]||v[1]:w?s[e][0]:e;return c?`${f} ${_} ago`:`in ${f} ${_}`}function kS(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const LP={D:Fh,DD:x8,DDD:$8,DDDD:T8,t:I8,tt:M8,ttt:C8,tttt:k8,T:O8,TT:P8,TTT:D8,TTTT:F8,f:R8,ff:j8,fff:B8,ffff:z8,F:N8,FF:L8,FFF:U8,FFFF:V8};class li{static create(t,r={}){return new li(t,r)}static parseFormat(t){let r=null,i="",s=!1;const o=[];for(let c=0;c<t.length;c++){const f=t.charAt(c);f==="'"?(i.length>0&&o.push({literal:s||/^\s+$/.test(i),val:i}),r=null,i="",s=!s):s||f===r?i+=f:(i.length>0&&o.push({literal:/^\s+$/.test(i),val:i}),i=f,r=f)}return i.length>0&&o.push({literal:s||/^\s+$/.test(i),val:i}),o}static macroTokenToFormatOpts(t){return LP[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return yr(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(k,N)=>this.loc.extract(t,k,N),c=k=>t.isOffsetFixed&&t.offset===0&&k.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,k.format):"",f=()=>i?DP(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),w=(k,N)=>i?RP(t,k):o(N?{month:k}:{month:k,day:"numeric"},"month"),v=(k,N)=>i?FP(t,k):o(N?{weekday:k}:{weekday:k,month:"long",day:"numeric"},"weekday"),_=k=>{const N=li.macroTokenToFormatOpts(k);return N?this.formatWithSystemDefault(t,N):k},$=k=>i?NP(t,k):o({era:k},"era"),I=k=>{switch(k){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return c({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return c({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return c({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return f();case"d":return s?o({day:"numeric"},"day"):this.num(t.day);case"dd":return s?o({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return v("short",!0);case"cccc":return v("long",!0);case"ccccc":return v("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return v("short",!1);case"EEEE":return v("long",!1);case"EEEEE":return v("narrow",!1);case"L":return s?o({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?o({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return w("short",!0);case"LLLL":return w("long",!0);case"LLLLL":return w("narrow",!0);case"M":return s?o({month:"numeric"},"month"):this.num(t.month);case"MM":return s?o({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return w("short",!1);case"MMMM":return w("long",!1);case"MMMMM":return w("narrow",!1);case"y":return s?o({year:"numeric"},"year"):this.num(t.year);case"yy":return s?o({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?o({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?o({year:"numeric"},"year"):this.num(t.year,6);case"G":return $("short");case"GG":return $("long");case"GGGGG":return $("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return _(k)}};return kS(li.parseFormat(r),I)}formatDurationFromString(t,r){const i=w=>{switch(w[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=w=>v=>{const _=i(v);return _?this.num(w.get(_),v.length):v},o=li.parseFormat(r),c=o.reduce((w,{literal:v,val:_})=>v?w:w.concat(_),[]),f=t.shiftTo(...c.map(i).filter(w=>w));return kS(o,s(f))}}const A6=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Lu(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function Bu(...e){return t=>e.reduce(([r,i,s],o)=>{const[c,f,w]=o(t,s);return[{...r,...c},f||i,w]},[{},null,1]).slice(0,2)}function Uu(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const s=r.exec(e);if(s)return i(s)}return[null,null]}function u6(...e){return(t,r)=>{const i={};let s;for(s=0;s<e.length;s++)i[e[s]]=Lo(t[r+s]);return[i,null,r+s]}}const c6=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,BP=`(?:${c6.source}?(?:\\[(${A6.source})\\])?)?`,Sb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,p6=RegExp(`${Sb.source}${BP}`),_b=RegExp(`(?:T${p6.source})?`),UP=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,zP=/(\d{4})-?W(\d\d)(?:-?(\d))?/,VP=/(\d{4})-?(\d{3})/,GP=u6("weekYear","weekNumber","weekDay"),qP=u6("year","ordinal"),QP=/(\d{4})-(\d\d)-(\d\d)/,d6=RegExp(`${Sb.source} ?(?:${c6.source}|(${A6.source}))?`),WP=RegExp(`(?: ${d6.source})?`);function BA(e,t,r){const i=e[t];return Ze(i)?r:Lo(i)}function HP(e,t){return[{year:BA(e,t),month:BA(e,t+1,1),day:BA(e,t+2,1)},null,t+3]}function zu(e,t){return[{hours:BA(e,t,0),minutes:BA(e,t+1,0),seconds:BA(e,t+2,0),milliseconds:bb(e[t+3])},null,t+4]}function up(e,t){const r=!e[t]&&!e[t+1],i=Of(e[t+1],e[t+2]),s=r?null:mr.instance(i);return[{},s,t+3]}function cp(e,t){const r=e[t]?Ri.create(e[t]):null;return[{},r,t+1]}const JP=RegExp(`^T?${Sb.source}$`),ZP=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function YP(e){const[t,r,i,s,o,c,f,w,v]=e,_=t[0]==="-",$=w&&w[0]==="-",I=(k,N=!1)=>k!==void 0&&(N||k&&_)?-k:k;return[{years:I(Pa(r)),months:I(Pa(i)),weeks:I(Pa(s)),days:I(Pa(o)),hours:I(Pa(c)),minutes:I(Pa(f)),seconds:I(Pa(w),w==="-0"),milliseconds:I(bb(v),$)}]}const KP={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Eb(e,t,r,i,s,o,c){const f={year:t.length===2?M2(Lo(t)):Lo(t),month:r6.indexOf(r)+1,day:Lo(i),hour:Lo(s),minute:Lo(o)};return c&&(f.second=Lo(c)),e&&(f.weekday=e.length>3?s6.indexOf(e)+1:n6.indexOf(e)+1),f}const XP=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function eD(e){const[,t,r,i,s,o,c,f,w,v,_,$]=e,I=Eb(t,s,i,r,o,c,f);let k;return w?k=KP[w]:v?k=0:k=Of(_,$),[I,new mr(k)]}function tD(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const rD=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,iD=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,sD=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function OS(e){const[,t,r,i,s,o,c,f]=e;return[Eb(t,s,i,r,o,c,f),mr.utcInstance]}function nD(e){const[,t,r,i,s,o,c,f]=e;return[Eb(t,f,r,i,s,o,c),mr.utcInstance]}const oD=Lu(UP,_b),aD=Lu(zP,_b),lD=Lu(VP,_b),AD=Lu(p6),h6=Bu(HP,zu,up,cp),uD=Bu(GP,zu,up,cp),cD=Bu(qP,zu,up,cp),pD=Bu(zu,up,cp);function dD(e){return Uu(e,[oD,h6],[aD,uD],[lD,cD],[AD,pD])}function hD(e){return Uu(tD(e),[XP,eD])}function fD(e){return Uu(e,[rD,OS],[iD,OS],[sD,nD])}function yD(e){return Uu(e,[ZP,YP])}const mD=Bu(zu);function gD(e){return Uu(e,[JP,mD])}const wD=Lu(QP,WP),bD=Lu(d6),vD=Bu(zu,up,cp);function SD(e){return Uu(e,[wD,h6],[bD,vD])}const PS="Invalid Duration",f6={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},_D={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...f6},as=146097/400,Jl=146097/4800,ED={years:{quarters:4,months:12,weeks:as/7,days:as,hours:as*24,minutes:as*24*60,seconds:as*24*60*60,milliseconds:as*24*60*60*1e3},quarters:{months:3,weeks:as/28,days:as/4,hours:as*24/4,minutes:as*24*60/4,seconds:as*24*60*60/4,milliseconds:as*24*60*60*1e3/4},months:{weeks:Jl/7,days:Jl,hours:Jl*24,minutes:Jl*24*60,seconds:Jl*24*60*60,milliseconds:Jl*24*60*60*1e3},...f6},Al=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],xD=Al.slice(0).reverse();function To(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new vt(i)}function y6(e,t){let r=t.milliseconds??0;for(const i of xD.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function DS(e,t){const r=y6(e,t)<0?-1:1;Al.reduceRight((i,s)=>{if(Ze(t[s]))return i;if(i){const o=t[i]*r,c=e[s][i],f=Math.floor(o/c);t[s]+=f*r,t[i]-=f*c*r}return s},null),Al.reduce((i,s)=>{if(Ze(t[s]))return i;if(i){const o=t[i]%1;t[i]-=o,t[s]+=o*e[i][s]}return s},null)}function $D(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class vt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?ED:_D;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||Mt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return vt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new si(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new vt({values:jh(t,vt.normalizeUnit),loc:Mt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(aa(t))return vt.fromMillis(t);if(vt.isDuration(t))return t;if(typeof t=="object")return vt.fromObject(t);throw new si(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=yD(t);return i?vt.fromObject(i,r):vt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=gD(t);return i?vt.fromObject(i,r):vt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new si("need to specify a reason the Duration is invalid");const i=t instanceof Gs?t:new Gs(t,r);if(rr.throwOnInvalid)throw new Y9(i);return new vt({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new E8(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?li.create(this.loc,i).formatDurationFromString(this,t):PS}toHuman(t={}){if(!this.isValid)return PS;const r=Al.map(i=>{const s=this.values[i];return Ze(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=vb(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Se.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?y6(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=vt.fromDurationLike(t),i={};for(const s of Al)(_u(r.values,s)||_u(this.values,s))&&(i[s]=r.get(s)+this.get(s));return To(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=vt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=t6(t(this.values[i],i));return To(this,{values:r},!0)}get(t){return this[vt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...jh(t,vt.normalizeUnit)};return To(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:s}={}){const c={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:s,conversionAccuracy:i};return To(this,c)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return DS(this.matrix,t),To(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=$D(this.normalize().shiftToAll().toObject());return To(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(c=>vt.normalizeUnit(c));const r={},i={},s=this.toObject();let o;for(const c of Al)if(t.indexOf(c)>=0){o=c;let f=0;for(const v in i)f+=this.matrix[v][c]*i[v],i[v]=0;aa(s[c])&&(f+=s[c]);const w=Math.trunc(f);r[c]=w,i[c]=(f*1e3-w*1e3)/1e3}else aa(s[c])&&(i[c]=s[c]);for(const c in i)i[c]!==0&&(r[o]+=c===o?i[c]:i[c]/this.matrix[o][c]);return DS(this.matrix,r),To(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return To(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of Al)if(!r(this.values[i],t.values[i]))return!1;return!0}}const Zl="Invalid Interval";function TD(e,t){return!e||!e.isValid?er.invalid("missing or invalid start"):!t||!t.isValid?er.invalid("missing or invalid end"):t<e?er.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class er{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new si("need to specify a reason the Interval is invalid");const i=t instanceof Gs?t:new Gs(t,r);if(rr.throwOnInvalid)throw new Z9(i);return new er({invalid:i})}static fromDateTimes(t,r){const i=d0(t),s=d0(r),o=TD(i,s);return o??new er({start:i,end:s})}static after(t,r){const i=vt.fromDurationLike(r),s=d0(t);return er.fromDateTimes(s,s.plus(i))}static before(t,r){const i=vt.fromDurationLike(r),s=d0(t);return er.fromDateTimes(s.minus(i),s)}static fromISO(t,r){const[i,s]=(t||"").split("/",2);if(i&&s){let o,c;try{o=Se.fromISO(i,r),c=o.isValid}catch{c=!1}let f,w;try{f=Se.fromISO(s,r),w=f.isValid}catch{w=!1}if(c&&w)return er.fromDateTimes(o,f);if(c){const v=vt.fromISO(s,r);if(v.isValid)return er.after(o,v)}else if(w){const v=vt.fromISO(i,r);if(v.isValid)return er.before(f,v)}}return er.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let s;return r!=null&&r.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(t,r),Math.floor(s.diff(i,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?er.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(d0).filter(c=>this.contains(c)).sort((c,f)=>c.toMillis()-f.toMillis()),i=[];let{s}=this,o=0;for(;s<this.e;){const c=r[o]||this.e,f=+c>+this.e?this.e:c;i.push(er.fromDateTimes(s,f)),s=f,o+=1}return i}splitBy(t){const r=vt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,s=1,o;const c=[];for(;i<this.e;){const f=this.start.plus(r.mapUnits(w=>w*s));o=+f>+this.e?this.e:f,c.push(er.fromDateTimes(i,o)),i=o,s+=1}return c}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:er.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return er.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((s,o)=>s.s-o.s).reduce(([s,o],c)=>o?o.overlaps(c)||o.abutsStart(c)?[s,o.union(c)]:[s.concat([o]),c]:[s,c],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const s=[],o=t.map(w=>[{time:w.s,type:"s"},{time:w.e,type:"e"}]),c=Array.prototype.concat(...o),f=c.sort((w,v)=>w.time-v.time);for(const w of f)i+=w.type==="s"?1:-1,i===1?r=w.time:(r&&+r!=+w.time&&s.push(er.fromDateTimes(r,w.time)),r=null);return er.merge(s)}difference(...t){return er.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:Zl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Fh,r={}){return this.isValid?li.create(this.s.loc.clone(r),t).formatInterval(this):Zl}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Zl}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Zl}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Zl}toFormat(t,{separator:r=" â€“ "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:Zl}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):vt.invalid(this.invalidReason)}mapEndpoints(t){return er.fromDateTimes(t(this.s),t(this.e))}}class Wp{static hasDST(t=rr.defaultZone){const r=Se.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Ri.isValidZone(t)}static normalizeZone(t){return qo(t,rr.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||Mt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||Mt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||Mt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:o="gregory"}={}){return(s||Mt.create(r,i,o)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:o="gregory"}={}){return(s||Mt.create(r,i,o)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Mt.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Mt.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Mt.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Mt.create(r,null,"gregory").eras(t)}static features(){return{relative:K8(),localeWeek:X8()}}}function FS(e,t){const r=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(vt.fromMillis(i).as("days"))}function ID(e,t,r){const i=[["years",(w,v)=>v.year-w.year],["quarters",(w,v)=>v.quarter-w.quarter+(v.year-w.year)*4],["months",(w,v)=>v.month-w.month+(v.year-w.year)*12],["weeks",(w,v)=>{const _=FS(w,v);return(_-_%7)/7}],["days",FS]],s={},o=e;let c,f;for(const[w,v]of i)r.indexOf(w)>=0&&(c=w,s[w]=v(e,t),f=o.plus(s),f>t?(s[w]--,e=o.plus(s),e>t&&(f=e,s[w]--,e=o.plus(s))):e=f);return[e,s,f,c]}function MD(e,t,r,i){let[s,o,c,f]=ID(e,t,r);const w=t-s,v=r.filter($=>["hours","minutes","seconds","milliseconds"].indexOf($)>=0);v.length===0&&(c<t&&(c=s.plus({[f]:1})),c!==s&&(o[f]=(o[f]||0)+w/(c-s)));const _=vt.fromObject(o,i);return v.length>0?vt.fromMillis(w,i).shiftTo(...v).plus(_):_}const CD="missing Intl.DateTimeFormat.formatToParts support";function $t(e,t=r=>r){return{regex:e,deser:([r])=>t(wP(r))}}const kD="Â ",m6=`[ ${kD}]`,g6=new RegExp(m6,"g");function OD(e){return e.replace(/\./g,"\\.?").replace(g6,m6)}function RS(e){return e.replace(/\./g,"").replace(g6," ").toLowerCase()}function _s(e,t){return e===null?null:{regex:RegExp(e.map(OD).join("|")),deser:([r])=>e.findIndex(i=>RS(r)===RS(i))+t}}function NS(e,t){return{regex:e,deser:([,r,i])=>Of(r,i),groups:t}}function Hp(e){return{regex:e,deser:([t])=>t}}function PD(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function DD(e,t){const r=Ss(t),i=Ss(t,"{2}"),s=Ss(t,"{3}"),o=Ss(t,"{4}"),c=Ss(t,"{6}"),f=Ss(t,"{1,2}"),w=Ss(t,"{1,3}"),v=Ss(t,"{1,6}"),_=Ss(t,"{1,9}"),$=Ss(t,"{2,4}"),I=Ss(t,"{4,6}"),k=L=>({regex:RegExp(PD(L.val)),deser:([ee])=>ee,literal:!0}),B=(L=>{if(e.literal)return k(L);switch(L.val){case"G":return _s(t.eras("short"),0);case"GG":return _s(t.eras("long"),0);case"y":return $t(v);case"yy":return $t($,M2);case"yyyy":return $t(o);case"yyyyy":return $t(I);case"yyyyyy":return $t(c);case"M":return $t(f);case"MM":return $t(i);case"MMM":return _s(t.months("short",!0),1);case"MMMM":return _s(t.months("long",!0),1);case"L":return $t(f);case"LL":return $t(i);case"LLL":return _s(t.months("short",!1),1);case"LLLL":return _s(t.months("long",!1),1);case"d":return $t(f);case"dd":return $t(i);case"o":return $t(w);case"ooo":return $t(s);case"HH":return $t(i);case"H":return $t(f);case"hh":return $t(i);case"h":return $t(f);case"mm":return $t(i);case"m":return $t(f);case"q":return $t(f);case"qq":return $t(i);case"s":return $t(f);case"ss":return $t(i);case"S":return $t(w);case"SSS":return $t(s);case"u":return Hp(_);case"uu":return Hp(f);case"uuu":return $t(r);case"a":return _s(t.meridiems(),0);case"kkkk":return $t(o);case"kk":return $t($,M2);case"W":return $t(f);case"WW":return $t(i);case"E":case"c":return $t(r);case"EEE":return _s(t.weekdays("short",!1),1);case"EEEE":return _s(t.weekdays("long",!1),1);case"ccc":return _s(t.weekdays("short",!0),1);case"cccc":return _s(t.weekdays("long",!0),1);case"Z":case"ZZ":return NS(new RegExp(`([+-]${f.source})(?::(${i.source}))?`),2);case"ZZZ":return NS(new RegExp(`([+-]${f.source})(${i.source})?`),2);case"z":return Hp(/[a-z_+-/]{1,256}?/i);case" ":return Hp(/[^\S\n\r]/);default:return k(L)}})(e)||{invalidReason:CD};return B.token=e,B}const FD={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function RD(e,t,r){const{type:i,value:s}=e;if(i==="literal"){const w=/^\s+$/.test(s);return{literal:!w,val:w?" ":s}}const o=t[i];let c=i;i==="hour"&&(t.hour12!=null?c=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?c="hour12":c="hour24":c=r.hour12?"hour12":"hour24");let f=FD[c];if(typeof f=="object"&&(f=f[o]),f)return{literal:!1,val:f}}function ND(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function jD(e,t,r){const i=e.match(t);if(i){const s={};let o=1;for(const c in r)if(_u(r,c)){const f=r[c],w=f.groups?f.groups+1:1;!f.literal&&f.token&&(s[f.token.val[0]]=f.deser(i.slice(o,o+w))),o+=w}return[i,s]}else return[i,{}]}function LD(e){const t=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return Ze(e.z)||(r=Ri.create(e.z)),Ze(e.Z)||(r||(r=new mr(e.Z)),i=e.Z),Ze(e.q)||(e.M=(e.q-1)*3+1),Ze(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ze(e.u)||(e.S=bb(e.u)),[Object.keys(e).reduce((o,c)=>{const f=t(c);return f&&(o[f]=e[c]),o},{}),r,i]}let ym=null;function BD(){return ym||(ym=Se.fromMillis(1555555555555)),ym}function UD(e,t){if(e.literal)return e;const r=li.macroTokenToFormatOpts(e.val),i=S6(r,t);return i==null||i.includes(void 0)?e:i}function w6(e,t){return Array.prototype.concat(...e.map(r=>UD(r,t)))}class b6{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=w6(li.parseFormat(r),t),this.units=this.tokens.map(i=>DD(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,s]=ND(this.units);this.regex=RegExp(i,"i"),this.handlers=s}}explainFromTokens(t){if(this.isValid){const[r,i]=jD(t,this.regex,this.handlers),[s,o,c]=i?LD(i):[null,null,void 0];if(_u(i,"a")&&_u(i,"H"))throw new xA("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:s,zone:o,specificOffset:c}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function v6(e,t,r){return new b6(e,r).explainFromTokens(t)}function zD(e,t,r){const{result:i,zone:s,specificOffset:o,invalidReason:c}=v6(e,t,r);return[i,s,o,c]}function S6(e,t){if(!e)return null;const i=li.create(t,e).dtFormatter(BD()),s=i.formatToParts(),o=i.resolvedOptions();return s.map(c=>RD(c,e,o))}const mm="Invalid DateTime",jS=864e13;function O0(e){return new Gs("unsupported zone",`the zone "${e.name}" is not supported`)}function gm(e){return e.weekData===null&&(e.weekData=Rh(e.c)),e.weekData}function wm(e){return e.localWeekData===null&&(e.localWeekData=Rh(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Da(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Se({...r,...t,old:r})}function _6(e,t,r){let i=e-t*60*1e3;const s=r.offset(i);if(t===s)return[i,t];i-=(s-t)*60*1e3;const o=r.offset(i);return s===o?[i,s]:[e-Math.min(s,o)*60*1e3,Math.max(s,o)]}function Jp(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Cd(e,t,r){return _6(kf(e),t,r)}function LS(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o={...e.c,year:i,month:s,day:Math.min(e.c.day,Nh(i,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},c=vt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),f=kf(o);let[w,v]=_6(f,r,e.zone);return c!==0&&(w+=c,v=e.zone.offset(w)),{ts:w,o:v}}function Yl(e,t,r,i,s,o){const{setZone:c,zone:f}=r;if(e&&Object.keys(e).length!==0||t){const w=t||f,v=Se.fromObject(e,{...r,zone:w,specificOffset:o});return c?v:v.setZone(f)}else return Se.invalid(new Gs("unparsable",`the input "${s}" can't be parsed as ${i}`))}function Zp(e,t,r=!0){return e.isValid?li.create(Mt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function bm(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=yr(e.c.year,r?6:4),t?(i+="-",i+=yr(e.c.month),i+="-",i+=yr(e.c.day)):(i+=yr(e.c.month),i+=yr(e.c.day)),i}function BS(e,t,r,i,s,o){let c=yr(e.c.hour);return t?(c+=":",c+=yr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(c+=":")):c+=yr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(c+=yr(e.c.second),(e.c.millisecond!==0||!i)&&(c+=".",c+=yr(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!o?c+="Z":e.o<0?(c+="-",c+=yr(Math.trunc(-e.o/60)),c+=":",c+=yr(Math.trunc(-e.o%60))):(c+="+",c+=yr(Math.trunc(e.o/60)),c+=":",c+=yr(Math.trunc(e.o%60)))),o&&(c+="["+e.zone.ianaName+"]"),c}const E6={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},VD={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},GD={ordinal:1,hour:0,minute:0,second:0,millisecond:0},x6=["year","month","day","hour","minute","second","millisecond"],qD=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],QD=["year","ordinal","hour","minute","second","millisecond"];function WD(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new E8(e);return t}function US(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return WD(e)}}function HD(e){if(P0===void 0&&(P0=rr.now()),e.type!=="iana")return e.offset(P0);const t=e.name;let r=C2.get(t);return r===void 0&&(r=e.offset(P0),C2.set(t,r)),r}function zS(e,t){const r=qo(t.zone,rr.defaultZone);if(!r.isValid)return Se.invalid(O0(r));const i=Mt.fromObject(t);let s,o;if(Ze(e.year))s=rr.now();else{for(const w of x6)Ze(e[w])&&(e[w]=E6[w]);const c=Z8(e)||Y8(e);if(c)return Se.invalid(c);const f=HD(r);[s,o]=Cd(e,f,r)}return new Se({ts:s,zone:r,loc:i,o})}function VS(e,t,r){const i=Ze(r.round)?!0:r.round,s=(c,f)=>(c=vb(c,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(c,f)),o=c=>r.calendary?t.hasSame(e,c)?0:t.startOf(c).diff(e.startOf(c),c).get(c):t.diff(e,c).get(c);if(r.unit)return s(o(r.unit),r.unit);for(const c of r.units){const f=o(c);if(Math.abs(f)>=1)return s(f,c)}return s(e>t?-0:0,r.units[r.units.length-1])}function GS(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let P0;const C2=new Map;class Se{constructor(t){const r=t.zone||rr.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Gs("invalid input"):null)||(r.isValid?null:O0(r));this.ts=Ze(t.ts)?rr.now():t.ts;let s=null,o=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[s,o]=[t.old.c,t.old.o];else{const f=aa(t.o)&&!t.old?t.o:r.offset(this.ts);s=Jp(this.ts,f),i=Number.isNaN(s.year)?new Gs("invalid input"):null,s=i?null:s,o=i?null:f}this._zone=r,this.loc=t.loc||Mt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=o,this.isLuxonDateTime=!0}static now(){return new Se({})}static local(){const[t,r]=GS(arguments),[i,s,o,c,f,w,v]=r;return zS({year:i,month:s,day:o,hour:c,minute:f,second:w,millisecond:v},t)}static utc(){const[t,r]=GS(arguments),[i,s,o,c,f,w,v]=r;return t.zone=mr.utcInstance,zS({year:i,month:s,day:o,hour:c,minute:f,second:w,millisecond:v},t)}static fromJSDate(t,r={}){const i=EP(t)?t.valueOf():NaN;if(Number.isNaN(i))return Se.invalid("invalid input");const s=qo(r.zone,rr.defaultZone);return s.isValid?new Se({ts:i,zone:s,loc:Mt.fromObject(r)}):Se.invalid(O0(s))}static fromMillis(t,r={}){if(aa(t))return t<-jS||t>jS?Se.invalid("Timestamp out of range"):new Se({ts:t,zone:qo(r.zone,rr.defaultZone),loc:Mt.fromObject(r)});throw new si(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(aa(t))return new Se({ts:t*1e3,zone:qo(r.zone,rr.defaultZone),loc:Mt.fromObject(r)});throw new si("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=qo(r.zone,rr.defaultZone);if(!i.isValid)return Se.invalid(O0(i));const s=Mt.fromObject(r),o=jh(t,US),{minDaysInFirstWeek:c,startOfWeek:f}=IS(o,s),w=rr.now(),v=Ze(r.specificOffset)?i.offset(w):r.specificOffset,_=!Ze(o.ordinal),$=!Ze(o.year),I=!Ze(o.month)||!Ze(o.day),k=$||I,N=o.weekYear||o.weekNumber;if((k||_)&&N)throw new xA("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(I&&_)throw new xA("Can't mix ordinal dates with month/day");const B=N||o.weekday&&!k;let L,ee,ae=Jp(w,v);B?(L=qD,ee=VD,ae=Rh(ae,c,f)):_?(L=QD,ee=GD,ae=fm(ae)):(L=x6,ee=E6);let he=!1;for(const ot of L){const wt=o[ot];Ze(wt)?he?o[ot]=ee[ot]:o[ot]=ae[ot]:he=!0}const ye=B?vP(o,c,f):_?SP(o):Z8(o),ge=ye||Y8(o);if(ge)return Se.invalid(ge);const ve=B?$S(o,c,f):_?TS(o):o,[ut,We]=Cd(ve,v,i),dt=new Se({ts:ut,zone:i,o:We,loc:s});return o.weekday&&k&&t.weekday!==dt.weekday?Se.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${dt.toISO()}`):dt.isValid?dt:Se.invalid(dt.invalid)}static fromISO(t,r={}){const[i,s]=dD(t);return Yl(i,s,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,s]=hD(t);return Yl(i,s,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,s]=fD(t);return Yl(i,s,r,"HTTP",r)}static fromFormat(t,r,i={}){if(Ze(t)||Ze(r))throw new si("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:o=null}=i,c=Mt.fromOpts({locale:s,numberingSystem:o,defaultToEN:!0}),[f,w,v,_]=zD(c,t,r);return _?Se.invalid(_):Yl(f,w,i,`format ${r}`,t,v)}static fromString(t,r,i={}){return Se.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,s]=SD(t);return Yl(i,s,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new si("need to specify a reason the DateTime is invalid");const i=t instanceof Gs?t:new Gs(t,r);if(rr.throwOnInvalid)throw new J9(i);return new Se({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=S6(t,Mt.fromObject(r));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(t,r={}){return w6(li.parseFormat(t),Mt.fromObject(r)).map(s=>s.val).join("")}static resetCache(){P0=void 0,C2.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?gm(this).weekYear:NaN}get weekNumber(){return this.isValid?gm(this).weekNumber:NaN}get weekday(){return this.isValid?gm(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?wm(this).weekday:NaN}get localWeekNumber(){return this.isValid?wm(this).weekNumber:NaN}get localWeekYear(){return this.isValid?wm(this).weekYear:NaN}get ordinal(){return this.isValid?fm(this.c).ordinal:NaN}get monthShort(){return this.isValid?Wp.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Wp.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Wp.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Wp.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=kf(this.c),s=this.zone.offset(i-t),o=this.zone.offset(i+t),c=this.zone.offset(i-s*r),f=this.zone.offset(i-o*r);if(c===f)return[this];const w=i-c*r,v=i-f*r,_=Jp(w,c),$=Jp(v,f);return _.hour===$.hour&&_.minute===$.minute&&_.second===$.second&&_.millisecond===$.millisecond?[Da(this,{ts:w}),Da(this,{ts:v})]:[this]}get isInLeapYear(){return Ap(this.year)}get daysInMonth(){return Nh(this.year,this.month)}get daysInYear(){return this.isValid?LA(this.year):NaN}get weeksInWeekYear(){return this.isValid?Bc(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Bc(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:s}=li.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:s}}toUTC(t=0,r={}){return this.setZone(mr.instance(t),r)}toLocal(){return this.setZone(rr.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=qo(t,rr.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(r||i){const o=t.offset(this.ts),c=this.toObject();[s]=Cd(c,o,t)}return Da(this,{ts:s,zone:t})}else return Se.invalid(O0(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const s=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return Da(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=jh(t,US),{minDaysInFirstWeek:i,startOfWeek:s}=IS(r,this.loc),o=!Ze(r.weekYear)||!Ze(r.weekNumber)||!Ze(r.weekday),c=!Ze(r.ordinal),f=!Ze(r.year),w=!Ze(r.month)||!Ze(r.day),v=f||w,_=r.weekYear||r.weekNumber;if((v||c)&&_)throw new xA("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(w&&c)throw new xA("Can't mix ordinal dates with month/day");let $;o?$=$S({...Rh(this.c,i,s),...r},i,s):Ze(r.ordinal)?($={...this.toObject(),...r},Ze(r.day)&&($.day=Math.min(Nh($.year,$.month),$.day))):$=TS({...fm(this.c),...r});const[I,k]=Cd($,this.o,this.zone);return Da(this,{ts:I,o:k})}plus(t){if(!this.isValid)return this;const r=vt.fromDurationLike(t);return Da(this,LS(this,r))}minus(t){if(!this.isValid)return this;const r=vt.fromDurationLike(t).negate();return Da(this,LS(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},s=vt.normalizeUnit(t);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(r){const o=this.loc.getStartOfWeek(),{weekday:c}=this;c<o&&(i.weekNumber=this.weekNumber-1),i.weekday=o}else i.weekday=1;if(s==="quarters"){const o=Math.ceil(this.month/3);i.month=(o-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?li.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):mm}toLocaleString(t=Fh,r={}){return this.isValid?li.create(this.loc.clone(r),t).formatDateTime(this):mm}toLocaleParts(t={}){return this.isValid?li.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const c=t==="extended";let f=bm(this,c);return f+="T",f+=BS(this,c,r,i,s,o),f}toISODate({format:t="extended"}={}){return this.isValid?bm(this,t==="extended"):null}toISOWeekDate(){return Zp(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:o=!1,format:c="extended"}={}){return this.isValid?(s?"T":"")+BS(this,c==="extended",r,t,i,o):null}toRFC2822(){return Zp(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Zp(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?bm(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(r||t)&&(i&&(s+=" "),r?s+="z":t&&(s+="ZZ")),Zp(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():mm}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return vt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},o=xP(r).map(vt.normalizeUnit),c=t.valueOf()>this.valueOf(),f=c?this:t,w=c?t:this,v=MD(f,w,o,s);return c?v.negate():v}diffNow(t="milliseconds",r={}){return this.diff(Se.now(),t,r)}until(t){return this.isValid?er.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const s=t.valueOf(),o=this.setZone(t.zone,{keepLocalTime:!0});return o.startOf(r,i)<=s&&s<=o.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Se.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(s=t.unit,o=void 0),VS(r,this.plus(i),{...t,numeric:"always",units:s,unit:o})}toRelativeCalendar(t={}){return this.isValid?VS(t.base||Se.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Se.isDateTime))throw new si("min requires all arguments be DateTimes");return MS(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Se.isDateTime))throw new si("max requires all arguments be DateTimes");return MS(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:s=null,numberingSystem:o=null}=i,c=Mt.fromOpts({locale:s,numberingSystem:o,defaultToEN:!0});return v6(c,t,r)}static fromStringExplain(t,r,i={}){return Se.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Mt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return new b6(o,t)}static fromFormatParser(t,r,i={}){if(Ze(t)||Ze(r))throw new si("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:o=null}=i,c=Mt.fromOpts({locale:s,numberingSystem:o,defaultToEN:!0});if(!c.equals(r.locale))throw new si(`fromFormatParser called with a locale of ${c}, but the format parser was created for ${r.locale}`);const{result:f,zone:w,specificOffset:v,invalidReason:_}=r.explainFromTokens(t);return _?Se.invalid(_):Yl(f,w,i,`format ${r.format}`,t,v)}static get DATE_SHORT(){return Fh}static get DATE_MED(){return x8}static get DATE_MED_WITH_WEEKDAY(){return K9}static get DATE_FULL(){return $8}static get DATE_HUGE(){return T8}static get TIME_SIMPLE(){return I8}static get TIME_WITH_SECONDS(){return M8}static get TIME_WITH_SHORT_OFFSET(){return C8}static get TIME_WITH_LONG_OFFSET(){return k8}static get TIME_24_SIMPLE(){return O8}static get TIME_24_WITH_SECONDS(){return P8}static get TIME_24_WITH_SHORT_OFFSET(){return D8}static get TIME_24_WITH_LONG_OFFSET(){return F8}static get DATETIME_SHORT(){return R8}static get DATETIME_SHORT_WITH_SECONDS(){return N8}static get DATETIME_MED(){return j8}static get DATETIME_MED_WITH_SECONDS(){return L8}static get DATETIME_MED_WITH_WEEKDAY(){return X9}static get DATETIME_FULL(){return B8}static get DATETIME_FULL_WITH_SECONDS(){return U8}static get DATETIME_HUGE(){return z8}static get DATETIME_HUGE_WITH_SECONDS(){return V8}}function d0(e){if(Se.isDateTime(e))return e;if(e&&e.valueOf&&aa(e.valueOf()))return Se.fromJSDate(e);if(e&&typeof e=="object")return Se.fromObject(e);throw new si(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const JD="HH:mm",ZD="HH:mm:ss",YD="HH:mm:ss.SSS",KD=[YD,ZD,JD,"TT"],XD="yyyy-MM-dd";function qS(e){if(!e||!lp(e))return null;const t=Se.fromFormat(e,XD);return t.isValid?t:null}function QS(e){return e&&lp(e)?z7(KD,(t=>{const r=Se.fromFormat(e,t);return r.isValid?r:null}))??null:null}function WS(e){if(!e||!lp(e))return null;const t=Se.fromISO(e);return t.isValid?t:null}var Lh;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Lh||(Lh={}));const $6=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function eF(e){return e!=null&&$6.has(e.type)}function T6(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function I6(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function M6(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const tF=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);J$($6,tF);function GY(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue,o=eF(e);return T6(e)||M6(e)||I6(e)?{...rF(e,s,i),isInteger:o}:{min:i!=null&&typeof i=="number"?i:null,max:s!=null&&typeof s=="number"?s:null,rawMin:i,rawMax:s,isInteger:o}}function rF(e,t,r){var i,s,o,c,f,w;return T6(e)?{min:(i=qS(r))==null?void 0:i.toMillis(),max:(s=qS(t))==null?void 0:s.toMillis(),rawMin:r,rawMax:t}:M6(e)?{min:(o=QS(r))==null?void 0:o.toMillis(),max:(c=QS(t))==null?void 0:c.toMillis(),rawMin:r,rawMax:t}:I6(e)?{min:(f=WS(r))==null?void 0:f.toMillis(),max:(w=WS(t))==null?void 0:w.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}function iF(e){if(!e)return;const t=e.match(sF);return t!=null&&t.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const sF=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function nF(e){var t,r;return((r=(t=e.match(oF))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const oF=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let vm;function Sl(){return vm||(vm=(async()=>{const[e,t,r]=await Promise.all([Pe(()=>import("./arcadeUtils-B5o1WIuc.js").then(i=>i.h),__vite__mapDeps([2,3,4,5,6,7,8,9,10,1,11]),import.meta.url),Pe(()=>import("./batchExec-C_M1VTDt.js"),__vite__mapDeps([12,13,14,15]),import.meta.url),Pe(()=>import("./aiServices-DmIefmsc.js"),__vite__mapDeps([16,3,4,5,6]),import.meta.url)]);return{arcade:e.arcade,arcadeUtils:e,batchExec:t,aiServices:r,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),vm}const aF=/^([0-9_])/,lF=/[^a-z0-9_\u0080-\uffff]+/gi;function AF(e){return e==null?null:e.trim().replaceAll(lF,"_").replace(aF,"F$1")||null}const uF=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],cF=["field","normalizationField"];function HS(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(JS(uF,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)JS(cF,i,t)}}function JS(e,t,r){if(e)for(const i of e){const s=rb(i,t),o=s&&typeof s!="function"&&r.get(s);o&&Mr(i,o.name,t)}}function C6(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(s==null?void 0:s.name)??null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(s==null?void 0:s.name)??null}}const Sm=new Set;function xb(e,t){return e&&t?(Sm.clear(),Df(Sm,e,t),Array.from(Sm).sort()):[]}function Df(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of r)Yi(e,t,s);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const s of r)s!=null&&e.add(s)}}function Yi(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function qY(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map((r=>r.name)):t}async function tn(e,t,r){var o;if(!r)return;let i;const s=iF(r);if(s)i=[s];else{const{arcadeUtils:c}=await Sl();i=c.extractFieldNames(r,(o=t==null?void 0:t.fields)==null?void 0:o.map((f=>f.name)))}for(const c of i)Yi(e,t,c)}function pF({displayField:e,fields:t}){return e||(t!=null&&t.length?_m(t,"name-or-title")||_m(t,"unique-identifier")||_m(t,"type-or-category")||dF(t):null)}function dF(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function _m(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}function QY(e){return e?xb(e.fieldsIndex,k6(e)):[]}function hF(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?xb(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const fF=new Set(["oid","global-id","guid"]),yF=new Set(["oid","global-id"]),mF=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function gF(e){const t=new Set;O6(e).forEach((i=>t.add(i))),hF(e).forEach((i=>t.add(i.toLowerCase())));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach((i=>t.add(i.toLowerCase()))),Object.values(r.transformFieldRoles).forEach((i=>t.add(i.toLowerCase())))),Array.from(t)}function k6(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:s,editorField:o}=t;return[r,i,s,o].filter(Boolean)}function O6(e){return k6(e).map((t=>t.toLowerCase()))}function wF(e,t){var r;return e.editable&&!fF.has(e.type)&&!O6(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function bF(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||gF(t).includes(r)||yF.has(e.type)||mF.some((s=>s.test(r))))}function vF(e){const t=e.defaultValue;return t!==void 0&&D6(e,t)?t:e.nullable?null:void 0}function WY(e){const t=typeof e=="string"?{type:e}:e;return N6(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function P6(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function SF(e){return e===null||P6(e)}function _F(e){return e===null||Number.isInteger(e)}function EF(){return!0}function D6(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?_F:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?SF:P6;break;case"string":case"esriFieldTypeString":r=e.nullable?H9:lp;break;default:r=EF}return arguments.length===1?r:r(t)}const xF=["integer","small-integer","big-integer","long"],$F=["single","double"],TF=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],IF=["esriFieldTypeSingle","esriFieldTypeDouble"],F6=new Set([...xF,...TF]),MF=new Set([...$F,...IF]),CF=J$(F6,MF);function kF(e){return e!=null&&F6.has(e.type)}function R6(e){return e!=null&&CF.has(e.type)}function N6(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function OF(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function HY(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function JY(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function PF(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function ZS(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function YS(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function ZY(e,t){return DF(e,t)===null}var Bh,Uh;function YY(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function DF(e,t){return e==null||e.nullable&&t===null?null:D6(e,t)?R6(e)&&!FF(e.type,Number(t))?Bh.OUT_OF_RANGE:null:Uh.INVALID_TYPE}function FF(e,t){const r=typeof e=="string"?j6(e):e;if(!r)return!1;const i=r.min,s=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=s:t>=i&&t<=s}function j6(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return RF;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return NF;case"esriFieldTypeBigInteger":case"big-integer":return jF;case"esriFieldTypeSingle":case"single":return LF;case"esriFieldTypeDouble":case"double":return BF}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Bh||(Bh={})),(function(e){e.INVALID_TYPE="type-validation-error::invalid-type"})(Uh||(Uh={}));const RF={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},NF={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},jF={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},LF={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},BF={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function KY(e,t,r){switch(e){case Lh.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Lh.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Uh.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Bh.OUT_OF_RANGE:{const{min:i,max:s}=j6(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${s}`}}}function UF(e,t){return!zF(e,t,null)}function zF(e,t,r){if(!(e!=null&&e.attributes)||!t)return!0;const i=new Set(Object.keys(e.attributes));let s=!1;for(const o of t)if(!i.has(o)&&(s=!0,r==null))break;return s}function VF(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some((t=>e.toLowerCase().startsWith(t)))}function $b(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map((r=>r.slice(1,-1).split(":")[0].trim())):[]}let kd=class extends se{constructor(t){super(t),this.type=null}};u([y({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],kd.prototype,"type",void 0),kd=u([j("esri.popup.content.Content")],kd);const po=kd;let pt=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=GF(t),this.apiValues=KS(this._apiToJSON),this.jsonValues=KS(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,s,o)=>{const c=this.toJSON(i);c!==void 0&&Mr(o,c,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function GF(e){const t={};for(const r in e)t[e[r]]=r;return t}function KS(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function Ur(){return function(e,t){return new pt(e,{ignoreUnknown:!0,...t})}}const Yp=new pt({asc:"ascending",desc:"descending"});let D0=class extends nt.ClonableMixin(se){constructor(t){super(t),this.field=null,this.order="ascending"}};u([y({type:String,json:{write:!0}})],D0.prototype,"field",void 0),u([y({type:Yp.apiValues,json:{type:Yp.jsonValues,read:Yp.read,write:Yp.write}})],D0.prototype,"order",void 0),D0=u([j("esri.popup.support.AttachmentsOrderByInfo")],D0);const qF=D0;let Oo=class extends nt.ClonableMixin(po){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};u([y({type:String,json:{write:!0}})],Oo.prototype,"description",void 0),u([y({type:["auto","preview","list"],json:{write:!0}})],Oo.prototype,"displayType",void 0),u([y({type:[qF],json:{write:!0}})],Oo.prototype,"orderByFields",void 0),u([y({type:String,json:{write:!0}})],Oo.prototype,"title",void 0),u([y({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Oo.prototype,"type",void 0),Oo=u([j("esri.popup.content.AttachmentsContent")],Oo);const Eu=Oo;var k2;let Na=k2=class extends po{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new k2({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?q(this.outFields):null})}};u([y()],Na.prototype,"creator",void 0),u([y()],Na.prototype,"destroyer",void 0),u([y()],Na.prototype,"outFields",void 0),u([y({type:["custom"],readOnly:!0})],Na.prototype,"type",void 0),Na=k2=u([j("esri.popup.content.CustomContent")],Na);const QF=Na;var O2;let sA=O2=class extends se{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new O2({title:this.title,expression:this.expression})}};u([y({type:String,json:{write:!0}})],sA.prototype,"title",void 0),u([y({type:String,json:{write:!0}})],sA.prototype,"expression",void 0),u([y({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],sA.prototype,"returnType",void 0),sA=O2=u([j("esri.popup.ElementExpressionInfo")],sA);const WF=sA;var P2;let F0=P2=class extends po{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new P2({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};u([y({type:WF,json:{write:!0}})],F0.prototype,"expressionInfo",void 0),u([y({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],F0.prototype,"type",void 0),F0=P2=u([j("esri.popup.content.ExpressionContent")],F0);const Ff=F0;function Ce(e,t={}){const r=e instanceof pt?e:new pt(e,t),{alwaysWriteDefaults:i,default:s,ignoreUnknown:o=!0,name:c,nonNullable:f,readOnly:w=!1}=t;return y({type:o?r.apiValues:String,json:{type:r.jsonValues,default:s,name:c,read:!w&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:f,readOnly:w})}let fc;var a$,l$;const HF=((a$=globalThis.esriConfig)==null?void 0:a$.locale)??((l$=globalThis.dojoConfig)==null?void 0:l$.locale);var A$;const yc=(A$=globalThis.document)==null?void 0:A$.documentElement;function L6(){var r;const e=yc==null?void 0:yc.getAttribute("lang"),t=(r=globalThis.navigator)==null?void 0:r.language;return HF??e??t??"en"}function Ws(){return fc===void 0&&(fc=L6()),fc}const JF=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function Tb(e=Ws()){var t;return(t=JF.exec(e))==null?void 0:t.groups}const Od=[];function iK(e){return Od.push(e),gr((()=>{Od.splice(Od.indexOf(e),1)}))}const Pd=[];function Ib(e){return Pd.push(e),gr((()=>Pd.splice(Pd.indexOf(e),1)))}function XS(){const e=L6();fc!==e&&([...Pd].forEach((t=>t(e))),fc=e,[...Od].forEach((t=>t(e))))}var u$;(u$=globalThis.addEventListener)==null||u$.call(globalThis,"languagechange",XS),yc&&new MutationObserver((()=>{XS()})).observe(yc,{attributeFilter:["lang"]});const Cn="system",da="unknown",ha="UTC",ZF=Intl.DateTimeFormat().resolvedOptions().timeZone,e_=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]),YF="shortOffset";function KF(e){return"timeZoneIANA"in e}function XF(e){return e.startsWith("UTC")}function zh(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?Dd(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?eR(r):null}}}}}function Dd(e,t=Cn){return e?KF(e)?e.timeZoneIANA:tR(e,t):t}function eR(e){return{timeZoneIANA:e}}function tR(e,t=Cn){if(!e||!e_.has(e.timeZone))return t;const r=e_.get(e.timeZone);return XF(e.timeZone)||e.respectsDaylightSaving?r:rR(r)}function rR(e){const t=Se.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${mr.instance(-r).formatOffset(0,"narrow")}`}function sK(e,t,r,i,s){if(t&&s==="date")return{timeZone:ha,timeZoneName:void 0};const o=i.timeStyle||i.hour,c=r===da;return{timeZone:c?s==="timestamp-offset"?void 0:e??ha:r,timeZoneName:c&&o?YF:void 0}}function nK(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map((i=>i.toLowerCase())));return e===Cn||e===da||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const iR={year:void 0,month:void 0,day:void 0,weekday:void 0},sR={hour:void 0,minute:void 0,second:void 0},B6={timeZone:ha},an={year:"numeric",month:"numeric",day:"numeric"},h0={year:"numeric",month:"long",day:"numeric"},f0={year:"numeric",month:"short",day:"numeric"},y0={year:"numeric",month:"long",weekday:"long",day:"numeric"},Bo={hour:"numeric",minute:"numeric"},ja={...Bo,second:"numeric"},U6={hourCycle:"h23"},m0={...Bo,...U6},g0={...ja,...U6},z6={"short-date":an,"short-date-short-time":{...an,...Bo},"short-date-short-time-24":{...an,...m0},"short-date-long-time":{...an,...ja},"short-date-long-time-24":{...an,...g0},"short-date-le":an,"short-date-le-short-time":{...an,...Bo},"short-date-le-short-time-24":{...an,...m0},"short-date-le-long-time":{...an,...ja},"short-date-le-long-time-24":{...an,...g0},"long-month-day-year":h0,"long-month-day-year-short-time":{...h0,...Bo},"long-month-day-year-short-time-24":{...h0,...m0},"long-month-day-year-long-time":{...h0,...ja},"long-month-day-year-long-time-24":{...h0,...g0},"day-short-month-year":f0,"day-short-month-year-short-time":{...f0,...Bo},"day-short-month-year-short-time-24":{...f0,...m0},"day-short-month-year-long-time":{...f0,...ja},"day-short-month-year-long-time-24":{...f0,...g0},"long-date":y0,"long-date-short-time":{...y0,...Bo},"long-date-short-time-24":{...y0,...m0},"long-date-long-time":{...y0,...ja},"long-date-long-time-24":{...y0,...g0},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Bo,"long-time":ja},nR=Ur()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),V6={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},oR=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2));var c$;const aR=(c$=oR.find((({type:e})=>e==="month")))==null?void 0:c$.value.toLowerCase();function G6(){var r;const e=Ws(),t=(r=Tb(e))==null?void 0:r.language;return(t&&V6[t])??e}aR!=="mart"&&(V6.bs="sr-Latn-CS");let D2=new WeakMap;const Rf=z6["short-date-short-time"];function lR(e){let t=D2.get(e);if(!t){const r=G6(),i=Cb(e.timeZone??Cn),s={...e,timeZone:i};t=new Intl.DateTimeFormat(r,s),D2.set(e,t)}return t}function oK(e){return z6[e]}function Mb(e,t=Rf){return lR(t).format(e)}function aK(e,t=Rf){return Mb(new Date(e),{...t,...B6,...sR})}function lK(e,t=Rf){return Mb(new Date(`1970-01-01T${e}Z`),{...t,...B6,...iR})}function AK(e,t=Rf){if(t.timeZone)return Mb(new Date(e),t);const r=Se.fromISO(e,{setZone:!0}),i=r.offset===0?ha:t.timeZone,s={...t,timeZone:i};return r.toLocaleString(s,{locale:G6()})}function Cb(e){switch(e){case Cn:return ZF;case da:return ha;default:return e}}Ib((()=>{D2=new WeakMap}));let nA=class extends nt.ClonableMixin(se){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([Ce(nR)],nA.prototype,"dateFormat",void 0),u([y({type:Boolean,json:{write:!0}})],nA.prototype,"digitSeparator",void 0),u([y({type:Ct,json:{write:!0}})],nA.prototype,"places",void 0),nA=u([j("esri.popup.support.FieldInfoFormat")],nA);const Fd=nA;var F2;let $s=F2=class extends se{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new F2({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([y({type:String,json:{write:!0}})],$s.prototype,"fieldName",void 0),u([y({type:Fd,json:{write:!0}})],$s.prototype,"format",void 0),u([y({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],$s.prototype,"isEditable",void 0),u([y({type:String,json:{write:!0}})],$s.prototype,"label",void 0),u([Ce(new pt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],$s.prototype,"stringFieldOption",void 0),u([y({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],$s.prototype,"statisticType",void 0),u([y({type:String,json:{write:!0}})],$s.prototype,"tooltip",void 0),u([y({type:Boolean,json:{write:!0}})],$s.prototype,"visible",void 0),$s=F2=u([j("esri.popup.FieldInfo")],$s);const kb=$s;var R2;let Ln=R2=class extends po{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map((r=>r.toJSON()))}clone(){return new R2(q({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([y({type:Object,json:{write:!0}})],Ln.prototype,"attributes",void 0),u([y({type:String,json:{write:!0}})],Ln.prototype,"description",void 0),u([y({type:[kb]})],Ln.prototype,"fieldInfos",void 0),u([me("fieldInfos")],Ln.prototype,"writeFieldInfos",null),u([y({type:String,json:{write:!0}})],Ln.prototype,"title",void 0),u([y({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ln.prototype,"type",void 0),Ln=R2=u([j("esri.popup.content.FieldsContent")],Ln);const xu=Ln;let La=class extends se{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};u([y({type:String,json:{write:!0}})],La.prototype,"altText",void 0),u([y({type:String,json:{write:!0}})],La.prototype,"caption",void 0),u([y({type:String,json:{write:!0}})],La.prototype,"title",void 0),u([y({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],La.prototype,"type",void 0),La=u([j("esri.popup.content.mixins.MediaInfo")],La);const Ob=La,Vh={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function q6(e){return!!Vh[e]||!!Vh[e.toLowerCase()]}function Pb(e){return Vh[e]??Vh[e.toLowerCase()]}function AR(e){return[...Pb(e)]}function Em(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Q6(e,t,r,i=1){const s=(e%360+360)%360/360,o=r<=.5?r*(t+1):r+t-r*t,c=2*r-o;return[Math.round(255*Em(c,o,s+1/3)),Math.round(255*Em(c,o,s)),Math.round(255*Em(c,o,s-1/3)),i]}function uR(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,s=t?1:17,o=t?e.length===9:e.length===5;let c=+("0x"+e.slice(1));if(isNaN(c))return null;const f=[0,0,0,1];let w;return o&&(w=c&i,c>>=r,f[3]=s*w/255),w=c&i,c>>=r,f[2]=s*w,w=c&i,c>>=r,f[1]=s*w,w=c&i,c>>=r,f[0]=s*w,f}function W6(e){if(e[0]!=="#"||isNaN(+`0x${e.slice(1)}`))return null;switch(e.length){case 4:case 5:{const t=parseInt(e.slice(1,2),16),r=parseInt(e.slice(2,3),16),i=parseInt(e.slice(3,4),16),s=e.length===4?15:parseInt(e.slice(4),16);return[t+16*t,r+16*r,i+16*i,(s+16*s)/255]}case 7:case 9:return[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16),(e.length===7?255:parseInt(e.slice(7),16))/255];default:return null}}function H6(e){const t=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(t){const r=t[2].split(/\s*,\s*/),i=t[1];if(i==="rgb"&&r.length===3||i==="rgba"&&r.length===4){const s=r[0];if(s.charAt(s.length-1)==="%"){const o=r.map((c=>2.56*parseFloat(c)));return r.length===4&&(o[3]=parseFloat(r[3])),t_(o)}return t_(r.map((o=>parseFloat(o))))}if(i==="hsl"&&r.length===3||i==="hsla"&&r.length===4)return Q6(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3]??"1"))}return null}function t_(e){return e[0]=UA(e[0]),e[1]=UA(e[1]),e[2]=UA(e[2]),e[3]=e.length===4?Z6(e[3]):1,e}function J6(e){let t=q6(e)?Pb(e):null;return t??(t=H6(e)),t??(t=W6(e)),t}function pK(e){const t=J6(e);return t!=null?[t[0]/255,t[1]/255,t[2]/255,t[3]]:null}function Z6(e){return Y6(e,0,1)}function UA(e){return Math.round(Y6(e,0,255))}function Y6(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}const dK=2.2,r_=new Float32Array(1);function hK(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function pp(e,t,r){return Math.min(Math.max(e,t),r)}function cR(e,t,r){return e+(t-e)*r}function fK(e,t,r,i,s){return cR(i,s,(e-t)/(r-t))}function pR(e){return e*Math.PI/180}function dR(e){return 180*e/Math.PI}function yK(e){return Math.acos(pp(e,-1,1))}function hR(e){return Math.asin(pp(e,-1,1))}function Hs(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}function K6(e,t,r=1e-6){return!Hs(e,t,r)&&e>t}function N2(e,t,r=1e-6){return!Hs(e,t,r)&&e<t}function fR(e,t,r=1e-6){return Hs(e,t,r)||e>t}const Gh=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function j2(e){return Gh.setFloat64(0,e),Gh.getBigInt64(0)}function yR(e){return Gh.setBigInt64(0,e),Gh.getFloat64(0)}const Rd=BigInt("1000000"),mR=X6(1);function X6(e){const t=j2(e=Math.abs(e)),r=yR(t<=Rd?Rd:t-Rd);return Math.abs(e-r)}function mK(e,t,r=mR){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&X6(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=j2(e),s=j2(t);return i<0!=s<0?!1:!((i<s?s-i:i-s)>Rd)}function gK(e){return eT(Math.max(-i_,Math.min(e,i_)))}function eT(e){return r_[0]=e,r_[0]}function wK(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Hs(t,1)&&Hs(r,1)&&Hs(i,1))}const i_=eT(34028234663852886e22);function bK(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function Kp(e){return pp(ub(e),0,255)}function Xp(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let Nd=class $i{static blendColors(t,r,i,s=new $i){return s.r=Math.round(t.r+(r.r-t.r)*i),s.g=Math.round(t.g+(r.g-t.g)*i),s.b=Math.round(t.b+(r.b-t.b)*i),s.a=t.a+(r.a-t.a)*i,s._sanitize()}static fromRgb(t,r){const i=H6(t);return i?$i.fromArray(i,r):null}static fromHex(t,r=new $i){const i=W6(t);return i?$i.fromArray(i,r):null}static fromArray(t,r=new $i){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=J6(t);return i?$i.fromArray(i,r):null}static fromJSON(t){return t!=null?new $i([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?$i.fromString(t,this):Array.isArray(t)?$i.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof $i||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,s=i===3||i===4,o=i===4||i===8,c=`#${Xp(this.r,s)}${Xp(this.g,s)}${Xp(this.b,s)}${o?Xp(Math.round(255*this.a),s):""}`;return r?c.toUpperCase():c}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=$i.AlphaMode.ALWAYS){const r=Kp(this.r),i=Kp(this.g),s=Kp(this.b);return t===$i.AlphaMode.ALWAYS||this.a!==1?[r,i,s,Kp(255*this.a)]:[r,i,s]}clone(){return new $i(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=UA(this.r),this.g=UA(this.g),this.b=UA(this.b),this.a=Z6(this.a),this}_set(t,r,i,s){this.r=t,this.g=r,this.b=i,this.a=s}};Nd.prototype.declaredClass="esri.Color",(function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"})(Nd||(Nd={}));const it=Nd;var L2;let Ba=L2=class extends Bt{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new L2({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([y()],Ba.prototype,"color",void 0),u([y()],Ba.prototype,"fieldName",void 0),u([y()],Ba.prototype,"tooltip",void 0),u([y()],Ba.prototype,"value",void 0),Ba=L2=u([j("esri.popup.content.support.ChartMediaInfoValueSeries")],Ba);const gR=Ba;var B2;let Po=B2=class extends se{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new B2({colors:q(this.colors),fields:q(this.fields),normalizeField:this.normalizeField,series:q(this.series),tooltipField:this.tooltipField})}};u([y({type:[it],json:{type:[[Ct]],write:!0}})],Po.prototype,"colors",void 0),u([y({type:[String],json:{write:{isRequired:!0}}})],Po.prototype,"fields",void 0),u([y({type:String,json:{write:!0}})],Po.prototype,"normalizeField",void 0),u([y({type:[gR],json:{read:!1}})],Po.prototype,"series",void 0),u([y({type:String,json:{write:!0}})],Po.prototype,"tooltipField",void 0),Po=B2=u([j("esri.popup.content.support.ChartMediaInfoValue")],Po);const wR=Po;let R0=class extends Ob{constructor(t){super(t),this.type=null,this.value=void 0}};u([y({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],R0.prototype,"type",void 0),u([y({type:wR,json:{write:{isRequired:!0}}})],R0.prototype,"value",void 0),R0=u([j("esri.popup.content.mixins.ChartMediaInfo")],R0);const Nf=R0,jf=Ur()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var U2;let jd=U2=class extends Nf{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new U2({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([y({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:jf.write,isRequired:!0}}})],jd.prototype,"type",void 0),jd=U2=u([j("esri.popup.content.BarChartMediaInfo")],jd);const tT=jd;var z2;let Ld=z2=class extends Nf{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new z2({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([y({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:jf.write,isRequired:!0}}})],Ld.prototype,"type",void 0),Ld=z2=u([j("esri.popup.content.ColumnChartMediaInfo")],Ld);const rT=Ld;var V2;let N0=V2=class extends se{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new V2({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([y({type:String,json:{write:!0}})],N0.prototype,"linkURL",void 0),u([y({type:String,json:{write:{isRequired:!0}}})],N0.prototype,"sourceURL",void 0),N0=V2=u([j("esri.popup.content.support.ImageMediaInfoValue")],N0);const bR=N0;var G2;let oA=G2=class extends Ob{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new G2({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};u([y({type:Number,json:{write:!0}})],oA.prototype,"refreshInterval",void 0),u([y({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],oA.prototype,"type",void 0),u([y({type:bR,json:{write:{isRequired:!0}}})],oA.prototype,"value",void 0),oA=G2=u([j("esri.popup.content.ImageMediaInfo")],oA);const iT=oA;var q2;let Bd=q2=class extends Nf{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new q2({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([y({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:jf.write,isRequired:!0}}})],Bd.prototype,"type",void 0),Bd=q2=u([j("esri.popup.content.LineChartMediaInfo")],Bd);const sT=Bd;var Q2;let Ud=Q2=class extends Nf{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new Q2({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([y({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:jf.write,isRequired:!0}}})],Ud.prototype,"type",void 0),Ud=Q2=u([j("esri.popup.content.PieChartMediaInfo")],Ud);const nT=Ud,W2={base:Ob,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":tT,"column-chart":rT,"line-chart":sT,"pie-chart":nT,image:iT}};var H2;let Ts=H2=class extends po{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map((t=>t.type==="image"?iT.fromJSON(t):t.type==="barchart"?tT.fromJSON(t):t.type==="columnchart"?rT.fromJSON(t):t.type==="linechart"?sT.fromJSON(t):t.type==="piechart"?nT.fromJSON(t):void 0)).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map((r=>r.toJSON()))}clone(){return new H2(q({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([y()],Ts.prototype,"activeMediaInfoIndex",void 0),u([y({type:Object,json:{write:!0}})],Ts.prototype,"attributes",void 0),u([y({type:String,json:{write:!0}})],Ts.prototype,"description",void 0),u([y({types:[W2]})],Ts.prototype,"mediaInfos",void 0),u([ce("mediaInfos")],Ts.prototype,"readMediaInfos",null),u([me("mediaInfos")],Ts.prototype,"writeMediaInfos",null),u([y({type:String,json:{write:!0}})],Ts.prototype,"title",void 0),u([y({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ts.prototype,"type",void 0),Ts=H2=u([j("esri.popup.content.MediaContent")],Ts);const Uc=Ts;var J2;let j0=J2=class extends se{constructor(e){super(e),this.field=null,this.order=null}clone(){return new J2({field:this.field,order:this.order})}};u([y({type:String,json:{write:!0}})],j0.prototype,"field",void 0),u([y({type:["asc","desc"],json:{write:!0}})],j0.prototype,"order",void 0),j0=J2=u([j("esri.popup.support.RelatedRecordsInfoFieldOrder")],j0);const Db=j0;let ln=class extends nt.ClonableMixin(po){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([y({type:String,json:{write:!0}})],ln.prototype,"description",void 0),u([y({type:Number,json:{type:Ct,write:!0}})],ln.prototype,"displayCount",void 0),u([y({type:["list"],json:{write:{isRequired:!0}}})],ln.prototype,"displayType",void 0),u([y({type:[Db],json:{write:!0}})],ln.prototype,"orderByFields",void 0),u([y({type:Number,json:{type:Ct,write:{isRequired:!0}}})],ln.prototype,"relationshipId",void 0),u([y({type:String,json:{write:!0}})],ln.prototype,"title",void 0),u([y({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ln.prototype,"type",void 0),ln=u([j("esri.popup.content.RelationshipContent")],ln);const zc=ln;var Z2;let L0=Z2=class extends po{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new Z2({text:this.text})}};u([y({type:String,json:{write:!0}})],L0.prototype,"text",void 0),u([y({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],L0.prototype,"type",void 0),L0=Z2=u([j("esri.popup.content.TextContent")],L0);const Vc=L0;let Bn=class extends nt.ClonableMixin(se){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};u([y({type:String,json:{write:!0}})],Bn.prototype,"title",void 0),u([y({type:String,json:{write:!0}})],Bn.prototype,"description",void 0),u([y({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Bn.prototype,"type",void 0),u([y({type:Number,json:{type:Ct,write:!0}})],Bn.prototype,"associatedNetworkSourceId",void 0),u([y({type:Number,json:{type:Ct,write:!0}})],Bn.prototype,"associatedAssetGroup",void 0),u([y({type:Number,json:{type:Ct,write:!0}})],Bn.prototype,"associatedAssetType",void 0),Bn=u([j("esri.popup.support.UtilityNetworkAssociationType")],Bn);const oT=Bn;let Do=class extends nt.ClonableMixin(po){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};u([y({type:String,json:{write:!0}})],Do.prototype,"description",void 0),u([y({type:Number,json:{type:Ct,write:!0}})],Do.prototype,"displayCount",void 0),u([y({type:String,json:{write:!0}})],Do.prototype,"title",void 0),u([y({type:[oT],json:{write:!0}})],Do.prototype,"associationTypes",void 0),u([Ce({utilityNetworkAssociations:"utility-network-associations"})],Do.prototype,"type",void 0),Do=u([j("esri.popup.content.UtilityNetworkAssociationsContent")],Do);const Fb=Do,vR={base:null,key:"type",typeMap:{attachment:Eu,media:Uc,text:Vc,expression:Ff,field:xu,relationship:zc,utilityNetworkAssociations:Fb}},SR={base:null,key:"type",typeMap:{attachment:Eu,media:Uc,text:Vc,expression:Ff,field:xu,relationship:zc}};var Y2;let Ua=Y2=class extends se{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Y2({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([y({type:String,json:{write:!0}})],Ua.prototype,"name",void 0),u([y({type:String,json:{write:!0}})],Ua.prototype,"title",void 0),u([y({type:String,json:{write:!0}})],Ua.prototype,"expression",void 0),u([y({type:["string","number"],json:{write:!0}})],Ua.prototype,"returnType",void 0),Ua=Y2=u([j("esri.popup.ExpressionInfo")],Ua);const _R=Ua;var K2;let B0=K2=class extends se{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new K2({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([y({type:Boolean,json:{write:!0}})],B0.prototype,"returnTopmostRaster",void 0),u([y({type:Boolean,json:{write:!0}})],B0.prototype,"showNoDataRecords",void 0),B0=K2=u([j("esri.popup.LayerOptions")],B0);const ER=B0;var X2;let U0=X2=class extends se{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new X2({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?q(this.orderByFields):null})}};u([y({type:Boolean,json:{write:!0}})],U0.prototype,"showRelatedRecords",void 0),u([y({type:[Db],json:{write:!0}})],U0.prototype,"orderByFields",void 0),U0=X2=u([j("esri.popup.RelatedRecordsInfo")],U0);const s_=U0;let aT=0;const lT=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+aT++})}};return t=u([j("esri.core.Identifiable")],t),t},xR=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:aT++})}};return t=u([j("esri.core.Identifiable.NumericIdentifiable")],t),t};let z0=class extends lT(class{}){};z0=u([j("esri.core.Identifiable")],z0),(function(e){e.IdentifiableMixin=lT,e.NumericIdentifiableMixin=xR})(z0||(z0={}));const AT=z0;var e1;let ls=e1=class extends AT.IdentifiableMixin(Bt){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new e1({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([y()],ls.prototype,"active",void 0),u([y()],ls.prototype,"className",void 0),u([y()],ls.prototype,"disabled",void 0),u([y()],ls.prototype,"icon",void 0),u([y()],ls.prototype,"id",void 0),u([y()],ls.prototype,"indicator",void 0),u([y()],ls.prototype,"title",void 0),u([y()],ls.prototype,"type",void 0),u([y()],ls.prototype,"visible",void 0),ls=e1=u([j("esri.support.actions.ActionBase")],ls);const Rb=ls;var t1;let zd=t1=class extends Rb{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new t1({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([y()],zd.prototype,"image",void 0),zd=t1=u([j("esri.support.actions.ActionButton")],zd);const $R=zd;var r1;let V0=r1=class extends Rb{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new r1({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([y()],V0.prototype,"image",void 0),u([y()],V0.prototype,"value",void 0),V0=r1=u([j("esri.support.actions.ActionToggle")],V0);const TR=V0,w0="relationships/",n_="expression/",IR=st.ofType({key:"type",defaultKeyValue:"button",base:Rb,typeMap:{button:$R,toggle:TR}}),MR={base:po,key:"type",typeMap:{media:Uc,custom:QF,text:Vc,attachments:Eu,fields:xu,expression:Ff,relationship:zc,utilityNetworkAssociations:Fb}},uT=new Set(["attachments","fields","media","text","expression","relationship"]),CR=new Set([...uT,"utility-network-associations"]);let hr=class extends nt.ClonableMixin(se){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map((r=>In(MR,r))):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||op(t)?t:(xe.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeWebMapContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeFieldInfos(t,r,i,s){const{content:o}=this,c=Array.isArray(o)?o:null;if(t){const f=c?c.filter((v=>v.type==="fields")):[],w=f.length&&f.every((v=>{var _;return(_=v.fieldInfos)==null?void 0:_.length}));r.fieldInfos=t.filter(Boolean).map((v=>{const _=v.toJSON(s);return w&&(_.visible=!1),_}))}if(c)for(const f of c)f.type==="fields"&&this._writeFieldsContent(f,r)}writeLayerOptions(t,r,i,s){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),Df(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter((s=>(i==null?void 0:i.origin)==="web-scene"?uT.has(s.type):CR.has(s.type))).map((s=>s==null?void 0:s.toJSON(i))),r.popupElements.forEach((s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)}))):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=q(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach((s=>{const o=r.fieldInfos.find((c=>{var f,w;return((f=c.fieldName)==null?void 0:f.toLowerCase())===((w=s.fieldName)==null?void 0:w.toLowerCase())}));o?o.visible=!0:r.fieldInfos.push(s)})):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var o,c;const i=((o=t.orderByFields)==null?void 0:o.map((f=>this._toFieldOrderJSON(f,t.relationshipId))))||[],s=[...((c=r.relatedRecordsInfo)==null?void 0:c.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=q(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const s={description:!1,mediaInfos:!1};return i.map((o=>o.type==="media"?(o.mediaInfos||!r||s.mediaInfos||(o.mediaInfos=r,s.mediaInfos=!0),Uc.fromJSON(o)):o.type==="text"?(o.text||!t||s.description||(o.text=t,s.description=!0),Vc.fromJSON(o)):o.type==="attachments"?Eu.fromJSON(o):o.type==="fields"?xu.fromJSON(o):o.type==="expression"?Ff.fromJSON(o):o.type==="relationship"?zc.fromJSON(o):o.type==="utilityNetworkAssociations"?Fb.fromJSON(o):void 0)).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(w0)))return null;const s=r.replace(w0,"").split("/");if(s.length!==2)return null;const o=parseInt(s[0],10),c=s[1];return!Number.isNaN(o)&&c?zc.fromJSON({relationshipId:o,orderByFields:[{field:c,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:s}=t;return{field:`${w0}${r}/${s}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const o=[];t?o.push(new Vc({text:t})):o.push(new xu),Array.isArray(r)&&r.length&&o.push(Uc.fromJSON({mediaInfos:r})),i&&o.push(Eu.fromJSON({displayType:"auto"}));const{showRelatedRecords:c,orderByFields:f}=s;return c&&(f!=null&&f.length)&&f.forEach((w=>{const v=this._toRelationshipContent(w);v&&o.push(v)})),o.length?o:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce(((s,o)=>[...s,...this._getMediaInfoFields(o)]),[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:s}=t,o=s||{},{fields:c,normalizeField:f,tooltipField:w,sourceURL:v,linkURL:_}=o,$=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(v),...this._extractFieldNames(_),...c??[]];return f&&$.push(f),w&&$.push(w),$}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce(((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]]),r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce(((r,i)=>[...r,...this._getContentElementFields(i)]),[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map((s=>tn(t,r,s.expression))))}_getFieldInfoFields(t){return t?t.filter((({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(w0)||r.startsWith(n_)))).map((r=>r.fieldName)):[]}_getActionsFields(t){return t?t.toArray().reduce(((r,i)=>[...r,...this._getActionFields(i)]),[]):[]}_getActionFields(t){const{className:r,title:i,type:s}=t,o=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(o)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return $b(t).filter((r=>!(r.indexOf(w0)===0||r.indexOf(n_)===0)))}};u([y({type:IR})],hr.prototype,"actions",void 0),u([y()],hr.prototype,"content",void 0),u([Yt("content")],hr.prototype,"castContent",null),u([ce("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],hr.prototype,"readContent",null),u([me("web-scene","content",{popupElements:{type:st.ofType(SR)},showAttachments:{type:Boolean},mediaInfos:{type:st.ofType(W2)},description:{type:String},relatedRecordsInfo:{type:s_}})],hr.prototype,"writeWebSceneContent",null),u([me("content",{popupElements:{type:st.ofType(vR)},showAttachments:{type:Boolean},mediaInfos:{type:st.ofType(W2)},description:{type:String},relatedRecordsInfo:{type:s_}})],hr.prototype,"writeWebMapContent",null),u([y({type:[_R],json:{write:!0}})],hr.prototype,"expressionInfos",void 0),u([y({type:[kb]})],hr.prototype,"fieldInfos",void 0),u([me("fieldInfos")],hr.prototype,"writeFieldInfos",null),u([y({type:ER})],hr.prototype,"layerOptions",void 0),u([me("layerOptions")],hr.prototype,"writeLayerOptions",null),u([y({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],hr.prototype,"lastEditInfoEnabled",void 0),u([y()],hr.prototype,"outFields",void 0),u([y()],hr.prototype,"overwriteActions",void 0),u([y()],hr.prototype,"returnGeometry",void 0),u([y({json:{type:String}})],hr.prototype,"title",void 0),u([me("title")],hr.prototype,"writeTitle",null),hr=u([j("esri.PopupTemplate")],hr);const Vu=hr;function zA(e,t,r={}){return Nb(e,t,r,cT)}function o_(e,t,r={}){return Nb(e,t,r,pT)}function Nb(e,t,r={},i){let s=null;const o=r.once?(c,f)=>{i(c)&&(Qs(s),t(c,f))}:(c,f)=>{i(c)&&t(c,f)};if(s=zO(e,o,r.sync,r.equals),r.initial){const c=e();o(c,c)}return s}function kR(e,t,r,i={}){let s=null,o=null,c=null;function f(){var _;s&&o&&(o.remove(),(_=i.onListenerRemove)==null||_.call(i,s),s=null,o=null)}function w(_){i.once&&i.once&&Qs(c),r(_)}const v=zA(e,((_,$)=>{var I;f(),sb(_)&&(s=_,o=nb(_,t,w),(I=i.onListenerAdd)==null||I.call(i,_))}),{sync:i.sync,initial:!0});return c=gr((()=>{v.remove(),f()})),c}function TK(e,t){return OR(e,pT,t)}function OR(e,t,r){if(co(r))return Promise.reject(Ir());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let s=null;function o(){s=Qs(s)}return new Promise(((c,f)=>{s=vf([vl(r,(()=>{o(),f(Ir())})),Nb(e,(w=>{o(),c(w)}),{sync:!1,once:!0},t??cT)])}))}function cT(e){return!0}function pT(e){return!!e}const jb={sync:!0},IK={initial:!0},MK={sync:!0,initial:!0};let Lb=class{constructor(t,r,i,s,o,c){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=s,this.scaleHeight=o;const f=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*f,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=c||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Kt=new Lb(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),$n=new Lb(3396190,1/169.8944472236118,23e4,6e4,.111),fa=new Lb(1737400,0,0,0,0),PR=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,DR={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function a_(e){const t=e==null?void 0:e.match(PR);if(!t)return null;const[,r,i,s]=t;if(!r)return null;let o=null,c=null,f=null;const{devext:w,qaext:v,www:_}=DR;if(i)if(o=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:c,portalHostname:f}=w);break;case"qa":({customBaseUrl:c,portalHostname:f}=v);break;default:return null}else({customBaseUrl:c,portalHostname:f}=_);else switch(r.toLowerCase()){case"devext":({customBaseUrl:c,portalHostname:f}=w);break;case"qaext":({customBaseUrl:c,portalHostname:f}=v);break;case"www":({customBaseUrl:c,portalHostname:f}=_);break;default:return null}return{customBaseUrl:c,isPortal:!1,portalHostname:f,urlKey:o}}function dT(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function hT(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function FR(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function RR(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const NR=()=>xe.getLogger("esri.core.urlUtils"),Gu=xt.request,l_="esri/config: esriConfig.request.proxyUrl is not set.",fT=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,yT=/^\s*http:/i,jR=/^\s*https:/i,LR=/^\s*file:/i,mT=/:\d+$/,BR=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,UR=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),zR=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let VA=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(UR);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(zR),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const ed={},VR=new VA(xt.applicationUrl);let Ai=VR;const GR=qR();let Bb=GR;const Ub=()=>Ai,OK=()=>Bb;function qR(){const e=Ai.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${Ai.scheme}://${Ai.host}${Ai.port!=null?`:${Ai.port}`:""}`}${t}`}function ws(e){if(!e)return null;const t={path:null,query:null},r=new VA(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=zb(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function zb(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const s=i.indexOf("=");let o,c;s<0?(o=decodeURIComponent(i),c=""):(o=decodeURIComponent(i.slice(0,s)),c=decodeURIComponent(i.slice(s+1)));let f=r[o];typeof f=="string"&&(f=r[o]=[f]),Array.isArray(f)?f.push(c):r[o]=c}return r}function Gc(e,t){return e?Object.keys(e).map((r=>{const i=e[r];if(i==null)return"";const s=encodeURIComponent(r)+"=";return Array.isArray(i)?i.map((o=>Lc(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o))).join("&"):Lc(i)?s+encodeURIComponent(JSON.stringify(i)):s+encodeURIComponent(i)})).filter((r=>r)).join("&"):""}function gT(e=!1){let t,r=Gu.proxyUrl;if(typeof e=="string"){t=YR(e);const i=Lf(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw NR().warn(l_),new re("urlUtils:proxy-not-set",l_);return t&&s1()&&(r=Wb(r)),ws(r)}function PK(e,t=!1){const r=Lf(e);let i,s;if(r){const o=Vb(r.proxyUrl);i=o.path,s=o.query?zb(o.query):null}else if(t){const o=gT(e);i=o.path,s=o.query}if(i){const o=ws(e);e=i+"?"+o.path;const c=Gc({...s,...o.query});c&&(e=`${e}?${c}`)}return e}const b0={path:"",query:""};function Vb(e){const t=e.indexOf("?");return t!==-1?(b0.path=e.slice(0,t),b0.query=e.slice(t+1)):(b0.path=e,b0.query=null),b0}function wT(e){return e=(e=Qh(e=iN(e=Vb(e).path),!0)).toLowerCase()}function QR(e){const t={proxyUrl:e.proxyUrl,urlPrefix:wT(e.urlPrefix)},r=Gu.proxyRules,i=t.urlPrefix;let s=r.length;for(let o=0;o<r.length;o++){const c=r[o].urlPrefix;if(i.indexOf(c)===0){if(i.length===c.length)return-1;s=o;break}c.indexOf(i)===0&&(s=o+1)}return r.splice(s,0,t),s}function Lf(e){const t=Gu.proxyRules,r=wT(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function WR(e,t){if(!e||!t)return!1;e=qh(e),t=qh(t);const r=a_(e),i=a_(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&Tn(e,t,!0)}function bT(e,t){return e=qh(e),t=qh(t),Qh(e)===Qh(t)}function qh(e){const t=(e=Js(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function i1(e,t=Gu.interceptors){const r=i=>i instanceof RegExp?i.test(e):typeof i=="string"?e.startsWith(i):i==null;if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function Tn(e,t,r=!1){if(!e||!t)return!1;const i=o1(e),s=o1(t);return!(!r&&i.scheme!==s.scheme)&&i.host!=null&&s.host!=null&&i.host.toLowerCase()===s.host.toLowerCase()&&i.port===s.port}function Gb(e){if(typeof e=="string"){if(!Xi(e))return!0;e=o1(e)}if(Tn(e,Ai))return!0;const t=Gu.trustedServers||[];for(let r=0;r<t.length;r++){const i=HR(t[r]);for(let s=0;s<i.length;s++)if(Tn(e,i[s]))return!0}return!1}function HR(e){return ed[e]||(Qb(e)||va(e)?ed[e]=[new VA(zs(e))]:ed[e]=[new VA(`http://${e}`),new VA(`https://${e}`)]),ed[e]}function zs(e,t=Bb,r){return va(e)?r!=null&&r.preserveProtocolRelative?e:Ai.scheme==="http"&&Ai.authority===Ki(e).slice(2)?`http:${e}`:`https:${e}`:Qb(e)?e:$u(e[0]==="/"?tN(t):t,e)}function qb(e,t=Bb,r){if(e==null||!Xi(e))return e;const i=Js(e),s=i.toLowerCase(),o=Js(t).toLowerCase().replace(/\/+$/,""),c=r?Js(r).toLowerCase().replace(/\/+$/,""):null;if(c&&o.indexOf(c)!==0)return e;const f=($,I,k)=>(k=$.indexOf(I,k))===-1?$.length:k;let w=f(s,"/",s.indexOf("//")+2),v=-1;for(;s.slice(0,w+1)===o.slice(0,w)+"/"&&(v=w+1,w!==s.length);)w=f(s,"/",w+1);if(v===-1||c&&v<c.length)return e;e=i.slice(v);const _=o.slice(v-1).replaceAll(/[^/]+/g,"").length;if(_>0)for(let $=0;$<_;$++)e=`../${e}`;else e=`./${e}`;return e}function Js(e){return e=oN(e=nN(e=sN(e=zs(e=e.trim()))))}function $u(...e){const t=e.filter(gf);if(!(t!=null&&t.length))return;const r=[];if(Xi(t[0])){const s=t[0],o=s.indexOf("//");o!==-1&&(r.push(s.slice(0,o+1)),XR(t[0])&&(r[0]+="/"),t[0]=s.slice(o+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce(((s,o)=>o?s.concat(o.split("/")):s),[]);for(let s=0;s<i.length;s++){const o=i[s];o===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!o&&s===i.length-1||o&&(o!=="."||r.length===0))&&r.push(o)}return r.join("/")}function Ki(e,t=!1){if(e==null||Bf(e)||Dl(e))return null;let r=e.indexOf("://");if(r===-1&&va(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=Qh(e,!0)),e}function Xi(e){return va(e)||Qb(e)}function Bf(e){return e!=null&&e.slice(0,5)==="blob:"}function Dl(e){return e!=null&&e.slice(0,5)==="data:"}function JR(e){const t=qc(e);return t!=null&&t.isBase64?FR(t.data):null}function DK(e){return RR(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const ZR=/^data:(.*?)(;base64)?,(.*)$/;function qc(e){const t=e.match(ZR);if(!t)return null;const[,r,i,s]=t;return{mediaType:r,isBase64:!!i,data:s}}function vT(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function FK(e){return(await fetch(e)).blob()}function RK(e){const t=JR(e);if(!t)return null;const r=qc(e);return new Blob([t],{type:r.mediaType})}function va(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function Qb(e){return e!=null&&fT.test(e)}function YR(e){return e!=null&&jR.test(e)||Ai.scheme==="https"&&va(e)}function KR(e){return e!=null&&yT.test(e)||Ai.scheme==="http"&&va(e)}function XR(e){return e!=null&&LR.test(e)}function Wb(e){return va(e)?`https:${e}`:e.replace(yT,"https:")}function eN(){return Ai.scheme==="http"}function s1(){return Ai.scheme==="https"}function Qh(e,t=!1){return va(e)?e.slice(2):(e=e.replace(fT,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function tN(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function rN(e){let t=0;if(Xi(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function NK(e,t){if(!e)return"";const r=ws(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(s,"")}function iN(e){return e.endsWith("/")?e:`${e}/`}function ST(e){return e.replace(/\/+$/,"")}function sN(e){if(/^https?:\/\//i.test(e)){const t=Vb(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function nN(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function oN(e){const t=Gu.httpsDomains;if(!KR(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),mT.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return eN()&&i===Ai.authority&&!BR.test(e)||(s1()&&i===Ai.authority||t&&t.some((s=>i===s||i.endsWith(`.${s}`)))||s1()&&!Lf(e))&&(e=Wb(e)),e}function n1(e,t,r){if(!(t&&r&&e&&Xi(e)))return e;const i=e.indexOf("//"),s=e.indexOf("/",i+2),o=e.indexOf(":",i+2),c=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(i+2,c).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(c)}`}function _T(e,t){const r=new URL(e);return r.host=t,r.port&&!mT.test(t)&&(r.port=""),r.toString()}function aN(e){return new URL(e).host}function o1(e){return typeof e=="string"?new VA(zs(e)):(e.scheme||(e.scheme=Ai.scheme),e)}function ET(e,t){const r=ws(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function lN(e,t,r){const i=ws(e),s=i.query||{};return s[t]=String(r),`${i.path}?${Gc(s)}`}function xm(e,t){if(!t)return e;const r=ws(e),i=r.query||{};for(const[o,c]of Object.entries(t))c!=null&&(i[o]=c);const s=Gc(i);return s?`${r.path}?${s}`:r.path}function jK(e){if(e==null)return null;const t=e.match(xT);return t?t[2]:null}function A_(e){if(e==null)return null;const t=e.match(xT);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function LK(e){return typeof e=="string"?qc(e)??{data:e}:new Promise(((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(qc(i.result)),i.onerror=s=>r(s)}))}const xT=/([^.]*)\.([^/]*)$/,$T="20250903",TT="39b1ef512004eb2837696c72250a1294d18a21b1";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const AN="4.33";let et,Hb=AN;Hb="4.33.13";function BK(e){et=e}function UK(e){const t=et==null?void 0:et.findCredential(e);return t!=null&&t.token?lN(e,"token",t.token):e}J("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),J("host-webworker");function qu(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=zs(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=qb(e,t.portalItem.itemUrl);s!=null&&uN.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=a1(e,t==null?void 0:t.portal))&&Uf.test(e)?Zb(e):e}function dp(e,t,r=Qc.YES){var s,o;if((e=e&&Uf.test(e)?MT(e):e)==null)return e;!Xi(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=zs(e);if(t){const c=((s=t.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((o=t.url)==null?void 0:o.path);if(c){const f=a1(c,t.portal),w=a1(i,t.portal);i=qb(w,f,f),i!=null&&i!==w&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=IT(i,t==null?void 0:t.portal),Xi(i)&&(i=Js(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!Xi(i)&&!Dl(i)&&r===Qc.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function Jb(e,t,r){return qu(e,r)}function _l(e,t,r,i){const s=dp(e,i);s!==void 0&&(t[r]=s)}const Uf=/\/items\/([^/]+)\/resources\/(.*)/,uN=/^\.\/resources\//;function cN(e){const t=(e==null?void 0:e.match(Uf))??null;return(t==null?void 0:t[1])??null}function pN(e){const t=(e==null?void 0:e.match(Uf))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:c,extension:f}=A_(r);return{prefix:null,filename:c,extension:f}}const{path:s,extension:o}=A_(r.slice(i+1));return{prefix:r.slice(0,i),filename:s,extension:o}}function IT(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?n1(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function a1(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=Ub();return Tn(i,`${i.scheme}://${r}`)?n1(e,t.portalHostname,r):n1(e,r,t.portalHostname)}function Zb(e){if(!e)return e||null;let t=e;return t&&et&&!et.findCredential(t)&&(t=hT(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function MT(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&et&&!et.findCredential(t)&&(t=hT(t)),t}var Qc;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Qc||(Qc={}));const zK=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Qc},ensureMainOnlineDomain:IT,fromCDNUrl:MT,fromJSON:qu,itemIdFromResourceUrl:cN,prefixAndFilenameFromResourceUrl:pN,read:Jb,toCDNUrl:Zb,toJSON:dp,write:_l},Symbol.toStringTag,{value:"Module"})),CT={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},kT=Object.values(CT),OT=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${kT.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),dN=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${kT.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),hN=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function VK(e){return OT.test(e)}function Fl(e){if(e==null)return null;const t=ws(e),r=(t==null?void 0:t.path.match(OT))||(t==null?void 0:t.path.match(dN));if(!r)return null;const[,i,s,o,c]=r,f=s.indexOf("/");return{title:Yb(f!==-1?s.slice(f+1):s),serverType:CT[o.toLowerCase()],sublayer:c!=null&&c!==""?parseInt(c,10):null,url:{path:i}}}function fN(e){const t=ws(e).path.match(hN);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function Yb(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function yN(e,t){const r=[];if(e){const i=Fl(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=Yb(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function Wh(e){let t=Ki(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(t)))}function mN(e,t){return e&&ST(ET(e,t))}function gN(e){let{url:t}=e;if(!t)return{url:t};t=ET(t,e.logger);const r=ws(t),i=Fl(r.path);let s;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(s=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const o=fN(r.path);o!=null&&(t=o.serviceUrl,s=o.sublayerId)}return{url:ST(t),layerId:s}}function wN(e,t,r,i,s){_l(t,i,"url",s),i.url&&e.layerId!=null&&(i.url=$u(i.url,r,e.layerId.toString()))}function GK(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),o=t.includes("/wmsserver");return r&&(i||s||o)}const bN=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function PT(e){if(!DT(e))return null;const t=i=>i instanceof RegExp?i.test(e):typeof i=="string"&&e.startsWith(i),r=xt.apiKeys;if(Array.isArray(r.scopes)){for(const i of r.scopes)if(Array.isArray(i.urls)){if(i.urls.some(t))return i.token}else if(t(i.urls))return i.token}return r.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(e)?r.basemapStyles:xt.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(e)?xt.apiKey:null}function u_(){return xt.apiKey!=null||xt.apiKeys.basemapStyles!=null}function vN(e,t){return t?DT(e):PT(e)!=null}function DT(e){const t=Ki(e,!0);return!!t&&!bN.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function SN(e,t,r=!1,i){return new Promise(((s,o)=>{if(co(i))return void o(c_());let c=()=>{v(),o(new Error(`Unable to load ${t}`))},f=()=>{const _=e;v(),s(_)},w=()=>{if(!e)return;const _=e;v(),_.src="",o(c_())};const v=()=>{J("esri-image-decode")||(e.removeEventListener("error",c),e.removeEventListener("load",f)),c=null,f=null,e=null,i!=null&&i.removeEventListener("abort",w),w=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",w),J("esri-image-decode")?e.decode().then(f,c):(e.addEventListener("error",c),e.addEventListener("load",f))}))}function c_(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const FT="Timeout exceeded";function _N(){return new Error(FT)}function qK(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===FT}function EN(e){xt.request.crossOriginNoCorsDomains||(xt.request.crossOriginNoCorsDomains={});const t=xt.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[Ki(r)??""]=0:(t[Ki("http://"+r)??""]=0,t[Ki("https://"+r)??""]=0)}function xN(e){const t=xt.request.crossOriginNoCorsDomains;if(t){let r=Ki(e);if(r)return r=r.toLowerCase(),!Tn(r,Ub())&&t[r]<Date.now()-36e5}return!1}async function $N(e){var s;const t=ws(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=xt.request.crossOriginNoCorsDomains,i=Ki(e);r&&i&&(r[i.toLowerCase()]=Date.now())}const l1=new Map;function TN(e,t){const r=t==null?void 0:t.preferredHost;if(!r||Tn(e,`https://${r}`,!0))return;const i=Fl(e);if(!i||i.serverType!=="FeatureServer"||dT(e))return;const s=i.url.path.toLowerCase();l1.has(s)||l1.set(s,r)}function p_(e){var i;const t=(i=Fl(e))==null?void 0:i.url.path.toLowerCase();if(!t)return e;const r=l1.get(t);return r?_T(e,r):e}async function pr(e,t){var k;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=zb(t.query.toString().replaceAll("+"," ")));const r=Dl(e),i=Bf(e);i||r||(e=Js(e));const s={url:e,requestOptions:{...t}},o=N=>({data:N,getAllHeaders:Tu,getHeader:Tu,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),c=i1(e,ps.internalInterceptors);if(c){const N=await h_(c,s);if(N!=null)return o(N)}let f=i1(e);if(f){const N=await h_(f,s);if(N!=null)return o(N);f.after||f.error||(f=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(J("host-webworker")||J("host-node")))throw Zs("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw Zs("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||i)throw Zs("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await ON(),Hh)return Hh.execute(e,t);const w=new AbortController,v=vl(t,(()=>w.abort())),_={controller:w,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:f,params:s,redoRequest:!1,useIdentity:ps.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},$=t.useRequestQueue?NN(_):u1(_),I=await $.finally((()=>v==null?void 0:v.remove()));return(k=f==null?void 0:f.after)==null||k.call(f,I),I}let Hh,RT=!1;const ps=xt.request,NT="FormData"in globalThis,IN=new Set([499,498,403,401]),MN=new Set(["COM_0056","COM_0057","SB_0008"]),CN=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Tu=()=>null,Jh=Symbol();function kN(e){const t=Ki(e);t&&!pr._corsServers.includes(t)&&pr._corsServers.push(t)}function d_(e){const t=Ki(e);return!t||t.endsWith(".arcgis.com")||pr._corsServers.includes(t)||Gb(t)}function Zs(e,t,r,i){var c;let s;const o={url:r.url,requestOptions:r.requestOptions,getAllHeaders:Tu,getHeader:Tu,ssl:!1};if(t instanceof re)return t.details?(t.details=q(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=o,t;if(t){const f=i&&(()=>Array.from(i.headers)),w=i&&($=>i.headers.get($)),v=i==null?void 0:i.status,_=t.message;_&&(s=_),f&&w&&(o.getAllHeaders=f,o.getHeader=w),o.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||v||0,o.subCode=t.subcode,o.messageCode=t.messageCode,typeof t.details=="string"?(o.messages=[t.details],s??(s=t.details)):(o.messages=t.details,s??(s=(c=o.messages)==null?void 0:c[0])),o.raw=Jh in t?t[Jh]:t}return s??(s="Error"),Pn(t)?Ir():new re(e,s,o)}async function ON(){J("host-webworker")&&(!Hh&&globalThis.invokeStaticMessage?Hh=await Pe(()=>import("./request-mHaK7Yz8.js"),[],import.meta.url):RT=!0)}async function A1(){et||await Pe(()=>import("./IdentityManager-C6sbzPzg.js").then(e=>e.I),__vite__mapDeps([17,18]),import.meta.url)}async function PN(e){var f;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,s=r.body;let o=null,c=null;if(NT&&"HTMLFormElement"in globalThis&&(s instanceof FormData?o=s:s instanceof HTMLFormElement&&(o=new FormData(s))),typeof s=="string"&&(c=s),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:ps.priority,redirect:"follow",signal:i},(o||c)&&(e.fetchOptions.body=o||c),(RT||r.authMode==="anonymous")&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(f=r.query)!=null&&f.token||o!=null&&o.get("token")),!e.hasToken){const w=PT(t);w&&(r.query??(r.query={}),r.query.token=w,e.hasToken=!0)}if(e.useIdentity&&!e.hasToken&&!e.credential&&!e.credentialToken&&!jT(t)&&!co(i)){let w;r.authMode==="immediate"?(await A1(),w=await et.getCredential(t,{signal:i})):r.authMode==="no-prompt"?(await A1(),w=await et.getCredential(t,{prompt:!1,signal:i}).catch((()=>{}))):et&&(w=et.findCredential(t)),w&&(e.credential=w,e.credentialToken=w.token,e.useSSL=!!w.ssl)}}function jT(e){return CN.some((t=>t.test(e)))}async function DN(e){let t=e.params.url,r=p_(t);const i=e.params.requestOptions,s=e.fetchOptions??{},o=Bf(t)||Dl(t),c=i.responseType||"json",f=o?0:i.timeout!=null?i.timeout:ps.timeout;let w=!1;if(!o){e.useSSL&&(t=Wb(t));let k={...i.query};e.credentialToken&&(k.token=e.credentialToken);let N=Gc(k);J("esri-url-encodes-apostrophe")&&(N=N.replaceAll("'","%27"));const B=r.length+1+N.length;let L;w=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||B>ps.maxUrlLength;const ee=i.useProxy||!!Lf(t);if(ee){const ae=gT(t);L=ae.path,!w&&L.length+1+B>ps.maxUrlLength&&(w=!0),ae.query&&(k={...ae.query,...k})}if(s.method==="HEAD"&&(w||ee)){if(w)throw B>ps.maxUrlLength?Zs("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Zs("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(ee)throw Zs("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(w?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=xm(t,k):(s.body=Gc(k),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):t=xm(t,k),ee&&(e.useProxy=!0,t=`${L}?${t}`),k.token&&NT&&s.body instanceof FormData&&!dT(t)&&s.body.set("token",k.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!Tn(t,Ub())){if(Gb(t))e.withCredentials=!0;else if(et){const ae=et.findServerInfo(t);ae!=null&&ae.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(s.credentials="include",xN(t)&&await $N(w?xm(t,k):t)),r=p_(t)}let v,_,$=0,I=!1;f>0&&($=setTimeout((()=>{I=!0,e.controller.abort()}),f));try{if(i.responseType==="native-request-init")_=s,_.url=r,i.signal?_.signal=i.signal:delete _.signal;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||w||FN(i.headers)||!o&&!e.useProxy&&ps.proxyUrl&&!d_(t)){if(pr._beforeFetch&&await pr._beforeFetch(t,s),v=await fetch(r,s),pr._afterFetch&&await pr._afterFetch(v),e.useProxy||kN(t),i.responseType==="native")_=v;else if(s.method!=="HEAD")if(v.ok){switch(c){case"array-buffer":_=await v.arrayBuffer();break;case"blob":case"image":_=await v.blob();break;default:_=await v.text()}if($&&(clearTimeout($),$=0),c==="json"||c==="xml"||c==="document")if(_)switch(c){case"json":_=JSON.parse(_);break;case"xml":_=f_(_,"application/xml");break;case"document":_=f_(_,"text/html")}else _=null;if(_){if(c==="array-buffer"||c==="blob"){const k=v.headers.get("Content-Type");if(k&&/application\/json|text\/plain/i.test(k)&&_[c==="blob"?"size":"byteLength"]<=750)try{const N=await new Response(_).json();N.error&&(_=N)}catch{}}c==="image"&&_ instanceof Blob&&(_=await y_(URL.createObjectURL(_),e,!0))}}else{_=await v.text();try{_=JSON.parse(_)}catch{}}}else _=await y_(r,e)}catch(k){if(k.name==="AbortError")throw I?_N():Ir("Request canceled");if(!(!v&&k instanceof TypeError&&ps.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||d_(t))throw k;e.redoRequest=!0,QR({proxyUrl:ps.proxyUrl,urlPrefix:Ki(t)??""})}finally{$&&clearTimeout($)}return[v,_]}async function h_(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(s){r=Zs("request:interceptor",s,t)}if((i instanceof Error||i instanceof re)&&(r=Zs("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function FN(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function f_(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}pr._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],pr._beforeFetch=void 0,pr._afterFetch=void 0;const RN=new Map;async function NN(e){const t=LN(e.params.url);if(!t)return u1(e);const{QueueProcessor:r}=await Pe(()=>import("./QueueProcessor-BnL9Pcf7.js"),__vite__mapDeps([13,14,15]),import.meta.url);return Ab(RN,t.origin,(()=>{const s=t.isHosted?J("request-queue-concurrency-hosted"):J("request-queue-concurrency-non-hosted");return new r({concurrency:s,process:o=>{if(co(o.params.requestOptions))throw Zs("",Ir("Request canceled"),o.params);return u1(o)}})})).push(e)}async function u1(e){var o,c;let t,r;await PN(e);try{do[t,r]=await DN(e);while(!await jN(e,t,r))}catch(f){const w=Zs("request:server",f,e.params,t);throw w.details.ssl=e.useSSL,(o=e.interceptor)!=null&&o.error&&e.interceptor.error(w),w}const i=e.params.url;if(r)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((c=r.user)!=null&&c.username)&&!Gb(i)){const f=Ki(i,!0);f&&ps.trustedServers.push(f)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&EN(r.authorizedCrossOriginNoCorsDomains)}else(e.params.requestOptions.responseType||"json")==="json"&&TN(i,r);const s=e.credential;if(s&&et){const f=et.findServerInfo(s.server);let w=f==null?void 0:f.owningSystemUrl;if(w){w=w.replace(/\/?$/,"/sharing");const v=et.findCredential(w,s.userId);v&&et._getIdenticalSvcIdx(w,v)===-1&&v.resources.unshift(w)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):Tu,getHeader:t?f=>t.headers.get(f):Tu,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function jN(e,t,r){var v;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let s,o;if(r&&(r.error&&typeof r.error=="object"?s=r.error:r.status==="error"&&Array.isArray(r.messages)&&(s={...r},s[Jh]=r,s.details=r.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[Jh]=r,s;let c,f=null;s&&(o=Number(s.code),f=s.hasOwnProperty("subcode")?Number(s.subcode):null,c=s.messageCode,c=c==null?void 0:c.toUpperCase());const w=i.authMode;if(o===403&&(f===4||(v=s.message)!=null&&v.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(w!=="no-prompt"||o===498)&&o!==void 0&&IN.has(o)&&!jT(e.params.url)&&(o!==403||(!c||!MN.has(c))&&(f==null||f===2&&e.credentialToken))){await A1();try{const _=await et.getCredential(e.params.url,{error:Zs("request:server",s,e.params),credential:e.credential,prompt:w!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=_,e.credentialToken=_.token,e.useSSL=e.useSSL||_.ssl,!1}catch(_){if(w==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=_}}if(s)throw s;return!0}function y_(e,t,r=!1){const i=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=ps.priority,s.src=e,SN(s,e,r,i)}function LN(e){let t,r;return typeof e=="string"?(t=Ki(e,!0),r=Wh(e)):(t=e.origin,r=Wh(e.toString())),t==null?null:{origin:t,isHosted:r}}function zf(e){if(!xt.assetsPath)throw xe.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new re("assets:path-not-set","config.assetsPath is not set");return $u(xt.assetsPath,e)}let $m,V=null;function LT(){return!!V}function BN(){return!!J("esri-wasm")}function BT(){return $m||($m=Pe(()=>import("./pe-wasm-dPKcsouR.js"),[],import.meta.url).then((({default:e})=>e({locateFile:t=>zf(`esri/geometry/support/${t}`)}))).then((e=>{VT(e)})),$m)}var c1,Wt;(function(e){function t(o,c,f){V.ensureCache.prepare();const w=il(f),v=f===w,_=V.ensureFloat64(w),$=V._pe_geog_to_proj(V.getPointer(o),c,_);return $&&Qo(f,c,_,v),$}function r(o,c,f,w){switch(w){case Wt.PE_TRANSFORM_P_TO_G:return i(o,c,f);case Wt.PE_TRANSFORM_G_TO_P:return t(o,c,f)}return 0}function i(o,c,f){return s(o,c,f,0)}function s(o,c,f,w){V.ensureCache.prepare();const v=il(f),_=f===v,$=V.ensureFloat64(v),I=V._pe_proj_to_geog_center(V.getPointer(o),c,$,w);return I&&Qo(f,c,$,_),I}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=s})(c1||(c1={})),(function(e){function t(){e.PE_BUFFER_MAX=V.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=V.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=V.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=V.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=V.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=V.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=V.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=V.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=V.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=V.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=V.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=V.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=V.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=V.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=V.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=V.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=V.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=V.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=V.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=V.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=V.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=V.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=V.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=V.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=V.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=V.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=V.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=V.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=V.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=V.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=V.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=V.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t})(Wt||(Wt={}));let UT=null;var p1;(function(e){const t={},r={},i=k=>{const N=k.getType();switch(N){case Wt.PE_TYPE_GEOGCS:k=V.castObject(k,V.PeGeogcs);break;case Wt.PE_TYPE_PROJCS:k=V.castObject(k,V.PeProjcs);break;case Wt.PE_TYPE_GEOGTRAN:k=V.castObject(k,V.PeGeogtran);break;default:N&Wt.PE_TYPE_UNIT&&(k=V.castObject(k,V.PeUnit))}return k};function s(){V.PeFactory.prototype.initialize(null)}function o(k){return c(Wt.PE_TYPE_COORDSYS,k)}function c(k,N){let B=null,L=t[k];if(L||(L={},t[k]=L),L.hasOwnProperty(String(N))&&(B=L[N],V.compare(B,V.NULL)&&(B=null)),!B){const ee=V.PeFactory.prototype.factoryByType(k,N);V.compare(ee,V.NULL)||(B=i(ee),L[N]=B)}return B}function f(k,N){let B=null,L=r[k];if(L||(L={},r[k]=L),L.hasOwnProperty(N)&&(B=L[N],V.compare(B,V.NULL)&&(B=null)),!B){const ee=V.PeFactory.prototype.fromString(k,N);V.compare(ee,V.NULL)||(B=i(ee),L[N]=B)}return B}function w(k){return c(Wt.PE_TYPE_GEOGCS,k)}function v(k){return c(Wt.PE_TYPE_GEOGTRAN,k)}function _(k){return V.PeFactory.prototype.getCode(k)}function $(k){return c(Wt.PE_TYPE_PROJCS,k)}function I(k){return c(Wt.PE_TYPE_UNIT,k)}e.initialize=s,e.coordsys=o,e.factoryByType=c,e.fromString=f,e.geogcs=w,e.geogtran=v,e.getCode=_,e.projcs=$,e.unit=I})(p1||(p1={}));let zT=null;var Zh,d1,h1,f1,y1,m1,Yh,g1,Kh,Xh,w1;function VT(e){function t(o,c,f){o[c]=f(o[c])}V=e,Wt.init(),Zh.init(),Yh.init(),Kh.init(),Xh.init(),UT=class extends V.PeDouble{constructor(o=NaN){super(o)}destroy(){V.destroy(this)}[Symbol.dispose](){this.destroy()}},zT=class extends V.PeGCSExtent{destroy(){V.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[V.PeAngunit,V.PeDatum,V.PeGeogcs,V.PeGeogtran,V.PeObject,V.PeParameter,V.PePrimem,V.PeProjcs,V.PeSpheroid,V.PeUnit];for(const o of r)t(o.prototype,"getName",(c=>function(){return c.call(this,new Array(Wt.PE_NAME_MAX))}));for(const o of[V.PeGeogtran,V.PeProjcs])t(o.prototype,"getParameters",(c=>function(){const f=new Array(Wt.PE_PARM_MAX);let w=c.call(this);for(let v=0;v<f.length;v++){const _=V.getValue(w,"*");f[v]=_?V.wrapPointer(_,V.PeParameter):null,w+=Int32Array.BYTES_PER_ELEMENT}return f}));t(V.PeHorizon.prototype,"getCoord",(o=>function(c=!1){const f=this.getSize();if(!f)return null;const w=[];return Qo(w,f,o.call(this),c),w})),t(V.PeGTlistExtendedEntry.prototype,"getEntries",(o=>{const c=V._pe_getPeGTlistExtendedGTsSize();return function(){let f=null;const w=o.call(this);if(!V.compare(w,V.NULL)){f=[w];const v=this.getSteps();if(v>1){const _=V.getPointer(w);for(let $=1;$<v;$++)f.push(V.wrapPointer(_+c*$,V.PeGTlistExtendedGTs))}}return f}}));const i=V._pe_getPeHorizonSize(),s=o=>function(){let c=this._cache;if(c||(c=new Map,this._cache=c),c.has(o))return c.get(o);let f=null;const w=o.call(this);if(!V.compare(w,V.NULL)){f=[w];const v=w.getNump();if(v>1){const _=V.getPointer(w);for(let $=1;$<v;$++)f.push(V.wrapPointer(_+i*$,V.PeHorizon))}}return c.set(o,f),f};t(V.PeProjcs.prototype,"horizonGcsGenerate",s),t(V.PeProjcs.prototype,"horizonPcsGenerate",s),V.PeObject.prototype.toString=function(o=Wt.PE_STR_OPTS_NONE){V.ensureCache.prepare();const c=V.getPointer(this),f=V.ensureInt8(new Array(Wt.PE_BUFFER_MAX));return V.UTF8ToString(V._pe_object_to_string_ext(c,o,f))},V.PeGeogcs.prototype.destroy=function(){this.Delete(),Ds(this),this.ptr=0},V.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},V.PeProjcs.prototype.destroy=function(){this.Delete(),Ds(this),this.ptr=0},V.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Ds(e){if(!e)return;const t=V.getClass(e);if(!t)return;const r=V.getCache(t);if(!r)return;const i=V.getPointer(e);i&&delete r[i]}function td(e,t){const r=[],i=new Array(t);for(let s=0;s<e;s++)r.push(V.ensureInt8(i));return r}function il(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function Qo(e,t,r,i=!1){if(i)for(let s=0;s<2*t;s++)e[s]=V.getValue(r+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let o=0;o<t;o++)s&&(e[o]=new Array(2)),e[o][0]=V.getValue(r,"double"),e[o][1]=V.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=V.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=V._pe_getPeGTlistExtendedEntrySize()}function i(s,o,c,f,w,v){let _=null;const $=new V.PeInteger(v);try{const I=V.PeGTlistExtended.prototype.getGTlist(s,o,c,f,w,$);if((v=$.val)&&(_=[I],v>1)){const k=V.getPointer(I);for(let N=1;N<v;N++)_.push(V.wrapPointer(k+t*N,V.PeGTlistExtendedEntry))}}finally{V.destroy($)}return _}e.init=r,e.getGTlist=i})(Zh||(Zh={})),(function(e){function t(r){if(r!=null&&r.length){for(const i of r)Ds(i),i.getEntries().forEach((s=>{Ds(s);const o=s.getGeogtran();Ds(o),o.getParameters().forEach(Ds),[o.getGeogcs1(),o.getGeogcs2()].forEach((c=>{Ds(c);const f=c.getDatum();Ds(f),Ds(f.getSpheroid()),Ds(c.getPrimem()),Ds(c.getUnit())}))}));V.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t})(d1||(d1={})),(function(e){function t(r,i,s,o,c){V.ensureCache.prepare();const f=il(s),w=s===f,v=V.ensureFloat64(f);let _=0;o&&(_=V.ensureFloat64(o));const $=V._pe_geog_to_geog(V.getPointer(r),i,v,_,c);return $&&Qo(s,i,v,w),$}e.geogToGeog=t})(h1||(h1={})),(function(e){function t(o,c,f,w,v,_,$,I){V.PeLineType.prototype.geodesic_coordinate(o,c,f,w,v,_,$,I)}function r(o,c,f,w,v,_,$,I,k){V.PeLineType.prototype.geodetic_coordinate(o,c,f,w,v,_,$,I,k)}function i(o,c,f,w,v,_,$,I,k,N){V.PeLineType.prototype.geodetic_distance(o,c,f,w,v,_,$,I,k,N)}function s(o,c,f,w,v,_,$,I,k){V.PeLineType.prototype.great_elliptic_distance(o,c,f,w,v,_,$,I,k)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=s})(f1||(f1={})),(function(e){function t(c,f){return V.PeMath.prototype.phi_to_eta(c,f)}function r(c,f){return V.PeMath.prototype.eta_to_phi(c,f)}function i(c,f){return V.PeMath.prototype.phi_to_phig(c,f)}function s(c,f,w){return V.PeMath.prototype.q(c,f,w)}function o(c,f){return V.PeMath.prototype.q90(c,f)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=s,e.q90=o})(y1||(y1={})),(function(e){const t=(v,_,$,I,k,N)=>{let B,L;switch(V.ensureCache.prepare(),v){case"dd":B=V._pe_geog_to_dd,L=Wt.PE_DD_MAX;break;case"ddm":B=V._pe_geog_to_ddm,L=Wt.PE_DDM_MAX;break;case"dms":B=V._pe_geog_to_dms,L=Wt.PE_DMS_MAX}let ee=0;_&&(ee=V.getPointer(_));const ae=il(I),he=V.ensureFloat64(ae),ye=td($,L),ge=B(ee,$,he,k,V.ensureInt32(ye));if(ge)for(let ve=0;ve<$;ve++)N[ve]=V.UTF8ToString(ye[ve]);return ge},r=(v,_,$,I,k)=>{let N;switch(V.ensureCache.prepare(),v){case"dd":N=V._pe_dd_to_geog;break;case"ddm":N=V._pe_ddm_to_geog;break;case"dms":N=V._pe_dms_to_geog}let B=0;_&&(B=V.getPointer(_));const L=I.map((ye=>V.ensureString(ye))),ee=V.ensureInt32(L),ae=V.ensureFloat64(new Array(2*$)),he=N(B,$,ee,ae);return he&&Qo(k,$,ae),he};function i(v,_,$,I,k){return t("dms",v,_,$,I,k)}function s(v,_,$,I){return r("dms",v,_,$,I)}function o(v,_,$,I,k){return t("ddm",v,_,$,I,k)}function c(v,_,$,I){return r("ddm",v,_,$,I)}function f(v,_,$,I,k){return t("dd",v,_,$,I,k)}function w(v,_,$,I){return r("dd",v,_,$,I)}e.geogToDms=i,e.dmsToGeog=s,e.geogToDdm=o,e.ddmToGeog=c,e.geogToDd=f,e.ddToGeog=w})(m1||(m1={})),(function(e){function t(){e.PE_MGRS_STYLE_NEW=V.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=V.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=V.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=V.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=V.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(s,o,c,f,w,v,_){V.ensureCache.prepare();let $=0;s&&($=V.getPointer(s));const I=il(c),k=V.ensureFloat64(I),N=td(o,Wt.PE_MGRS_MAX),B=V.ensureInt32(N),L=V._pe_geog_to_mgrs_extended($,o,k,f,w,v,B);if(L)for(let ee=0;ee<o;ee++)_[ee]=V.UTF8ToString(N[ee]);return L}function i(s,o,c,f,w){V.ensureCache.prepare();let v=0;s&&(v=V.getPointer(s));const _=c.map((N=>V.ensureString(N))),$=V.ensureInt32(_),I=V.ensureFloat64(new Array(2*o)),k=V._pe_mgrs_to_geog_extended(v,o,$,f,I);return k&&Qo(w,o,I),k}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i})(Yh||(Yh={})),(function(e){function t(i,s,o,c,f,w,v){V.ensureCache.prepare();let _=0;i&&(_=V.getPointer(i));const $=il(o),I=V.ensureFloat64($),k=td(s,Wt.PE_MGRS_MAX),N=V.ensureInt32(k),B=V._pe_geog_to_usng(_,s,I,c,f,w,N);if(B)for(let L=0;L<s;L++)v[L]=V.UTF8ToString(k[L]);return B}function r(i,s,o,c){V.ensureCache.prepare();let f=0;i&&(f=V.getPointer(i));const w=o.map((I=>V.ensureString(I))),v=V.ensureInt32(w),_=V.ensureFloat64(new Array(2*s)),$=V._pe_usng_to_geog(f,s,v,_);return $&&Qo(c,s,_),$}e.geogToUsng=t,e.usngToGeog=r})(g1||(g1={})),(function(e){function t(){e.PE_UTM_OPTS_NONE=V.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=V.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=V.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(s,o,c,f,w){V.ensureCache.prepare();let v=0;s&&(v=V.getPointer(s));const _=il(c),$=V.ensureFloat64(_),I=td(o,Wt.PE_UTM_MAX),k=V.ensureInt32(I),N=V._pe_geog_to_utm(v,o,$,f,k);if(N)for(let B=0;B<o;B++)w[B]=V.UTF8ToString(I[B]);return N}function i(s,o,c,f,w){V.ensureCache.prepare();let v=0;s&&(v=V.getPointer(s));const _=c.map((N=>V.ensureString(N))),$=V.ensureInt32(_),I=V.ensureFloat64(new Array(2*o)),k=V._pe_utm_to_geog(v,o,$,f,I);return k&&Qo(w,o,I),k}e.init=t,e.geogToUtm=r,e.utmToGeog=i})(Kh||(Kh={})),(function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=V.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=V.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=V.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=V.PePCSInfo.prototype.PE_POLE_POINT}function i(s,o=e.PE_PCSINFO_OPTION_DOMAIN){let c=null,f=null;return t.has(s)&&(f=t.get(s),f[o]&&(c=f[o])),c||(c=V.PePCSInfo.prototype.generate(s,o),f||(f=[],t.set(s,f)),f[o]=c),c}e.init=r,e.generate=i})(Xh||(Xh={})),(function(e){function t(){return V.PeVersion.prototype.version_string()}e.versionString=t})(w1||(w1={}));const UN=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return c1},get PeDefs(){return Wt},get PeDouble(){return UT},get PeFactory(){return p1},get PeGCSExtent(){return zT},get PeGTTransformations(){return h1},get PeGTlistExtended(){return Zh},get PeGTlistExtendedEntry(){return d1},get PeLineType(){return f1},get PeMath(){return y1},get PeNotationDms(){return m1},get PeNotationMgrs(){return Yh},get PeNotationUsng(){return g1},get PeNotationUtm(){return Kh},get PePCSInfo(){return Xh},get PeVersion(){return w1},_init:VT,get _pe(){return V},isLoaded:LT,isSupported:BN,load:BT},Symbol.toStringTag,{value:"Module"}));var El;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(El||(El={}));let d;const C={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(d=2e3;d<=2045;d++)C[d]=0;for(d=2056;d<=2065;d++)C[d]=0;for(d=2067;d<=2135;d++)C[d]=0;for(d=2137;d<=2154;d++)C[d]=0;for(d=2161;d<=2170;d++)C[d]=0;for(d=2172;d<=2193;d++)C[d]=0;for(d=2195;d<=2198;d++)C[d]=0;for(d=2200;d<=2203;d++)C[d]=0;for(d=2205;d<=2217;d++)C[d]=0;for(d=2222;d<=2224;d++)C[d]=1;for(d=2225;d<=2250;d++)C[d]=2;for(d=2251;d<=2253;d++)C[d]=1;for(d=2257;d<=2264;d++)C[d]=2;for(d=2274;d<=2279;d++)C[d]=2;for(d=2280;d<=2282;d++)C[d]=1;for(d=2283;d<=2289;d++)C[d]=2;for(d=2290;d<=2292;d++)C[d]=0;for(d=2308;d<=2313;d++)C[d]=0;for(d=2315;d<=2491;d++)C[d]=0;for(d=2494;d<=2866;d++)C[d]=0;for(d=2867;d<=2869;d++)C[d]=1;for(d=2870;d<=2888;d++)C[d]=2;for(d=2891;d<=2895;d++)C[d]=2;for(d=2896;d<=2898;d++)C[d]=1;for(d=2902;d<=2908;d++)C[d]=2;for(d=2915;d<=2920;d++)C[d]=2;for(d=2921;d<=2923;d++)C[d]=1;for(d=2924;d<=2930;d++)C[d]=2;for(d=2931;d<=2962;d++)C[d]=0;for(d=2964;d<=2968;d++)C[d]=2;for(d=2969;d<=2973;d++)C[d]=0;for(d=2975;d<=2991;d++)C[d]=0;for(d=2995;d<=3051;d++)C[d]=0;for(d=3054;d<=3079;d++)C[d]=0;for(d=3081;d<=3088;d++)C[d]=0;for(d=3092;d<=3101;d++)C[d]=0;for(d=3106;d<=3138;d++)C[d]=0;for(d=3146;d<=3151;d++)C[d]=0;for(d=3153;d<=3166;d++)C[d]=0;for(d=3168;d<=3172;d++)C[d]=0;for(d=3174;d<=3203;d++)C[d]=0;for(d=3294;d<=3358;d++)C[d]=0;for(d=3367;d<=3403;d++)C[d]=0;for(d=3408;d<=3416;d++)C[d]=0;for(d=3417;d<=3438;d++)C[d]=2;for(d=3441;d<=3446;d++)C[d]=2;for(d=3447;d<=3450;d++)C[d]=0;for(d=3451;d<=3459;d++)C[d]=2;for(d=3460;d<=3478;d++)C[d]=0;for(d=3554;d<=3559;d++)C[d]=0;for(d=3560;d<=3570;d++)C[d]=2;for(d=3571;d<=3581;d++)C[d]=0;for(d=3594;d<=3597;d++)C[d]=0;for(d=3601;d<=3604;d++)C[d]=0;for(d=3637;d<=3639;d++)C[d]=0;for(d=3665;d<=3667;d++)C[d]=0;for(d=3693;d<=3695;d++)C[d]=0;for(d=3701;d<=3727;d++)C[d]=0;for(d=3728;d<=3739;d++)C[d]=2;for(d=3740;d<=3751;d++)C[d]=0;for(d=3753;d<=3760;d++)C[d]=2;for(d=3761;d<=3773;d++)C[d]=0;for(d=3775;d<=3777;d++)C[d]=0;for(d=3779;d<=3781;d++)C[d]=0;for(d=3783;d<=3785;d++)C[d]=0;for(d=3788;d<=3791;d++)C[d]=0;for(d=3797;d<=3802;d++)C[d]=0;for(d=3814;d<=3816;d++)C[d]=0;for(d=3825;d<=3829;d++)C[d]=0;for(d=3832;d<=3841;d++)C[d]=0;for(d=3844;d<=3852;d++)C[d]=0;for(d=3873;d<=3885;d++)C[d]=0;for(d=3890;d<=3893;d++)C[d]=0;for(d=3907;d<=3912;d++)C[d]=0;for(d=3942;d<=3950;d++)C[d]=0;for(d=3968;d<=3970;d++)C[d]=0;for(d=3973;d<=3976;d++)C[d]=0;for(d=3986;d<=3989;d++)C[d]=0;for(d=3994;d<=3997;d++)C[d]=0;for(d=4048;d<=4051;d++)C[d]=0;for(d=4056;d<=4063;d++)C[d]=0;for(d=4093;d<=4096;d++)C[d]=0;for(d=4390;d<=4398;d++)C[d]=0;for(d=4399;d<=4413;d++)C[d]=2;for(d=4418;d<=4433;d++)C[d]=2;for(d=4455;d<=4457;d++)C[d]=2;for(d=4484;d<=4489;d++)C[d]=0;for(d=4491;d<=4554;d++)C[d]=0;for(d=4568;d<=4589;d++)C[d]=0;for(d=4652;d<=4656;d++)C[d]=0;for(d=4766;d<=4800;d++)C[d]=0;for(d=5014;d<=5016;d++)C[d]=0;for(d=5069;d<=5072;d++)C[d]=0;for(d=5105;d<=5130;d++)C[d]=0;for(d=5167;d<=5188;d++)C[d]=0;for(d=5253;d<=5259;d++)C[d]=0;for(d=5269;d<=5275;d++)C[d]=0;for(d=5292;d<=5311;d++)C[d]=0;for(d=5329;d<=5331;d++)C[d]=0;for(d=5343;d<=5349;d++)C[d]=0;for(d=5355;d<=5357;d++)C[d]=0;for(d=5387;d<=5389;d++)C[d]=0;for(d=5459;d<=5463;d++)C[d]=0;for(d=5479;d<=5482;d++)C[d]=0;for(d=5518;d<=5520;d++)C[d]=0;for(d=5530;d<=5539;d++)C[d]=0;for(d=5550;d<=5552;d++)C[d]=0;for(d=5562;d<=5583;d++)C[d]=0;for(d=5623;d<=5625;d++)C[d]=2;for(d=5631;d<=5639;d++)C[d]=0;for(d=5649;d<=5653;d++)C[d]=0;for(d=5663;d<=5680;d++)C[d]=0;for(d=5682;d<=5685;d++)C[d]=0;for(d=5875;d<=5877;d++)C[d]=0;for(d=5896;d<=5899;d++)C[d]=0;for(d=5921;d<=5940;d++)C[d]=0;for(d=6050;d<=6125;d++)C[d]=0;for(d=6244;d<=6275;d++)C[d]=0;for(d=6328;d<=6348;d++)C[d]=0;for(d=6350;d<=6356;d++)C[d]=0;for(d=6366;d<=6372;d++)C[d]=0;for(d=6381;d<=6387;d++)C[d]=0;for(d=6393;d<=6404;d++)C[d]=0;for(d=6480;d<=6483;d++)C[d]=0;for(d=6511;d<=6514;d++)C[d]=0;for(d=6579;d<=6581;d++)C[d]=0;for(d=6619;d<=6624;d++)C[d]=0;for(d=6625;d<=6627;d++)C[d]=2;for(d=6628;d<=6632;d++)C[d]=0;for(d=6634;d<=6637;d++)C[d]=0;for(d=6669;d<=6692;d++)C[d]=0;for(d=6707;d<=6709;d++)C[d]=0;for(d=6720;d<=6723;d++)C[d]=0;for(d=6732;d<=6738;d++)C[d]=0;for(d=6931;d<=6933;d++)C[d]=0;for(d=6956;d<=6959;d++)C[d]=0;for(d=7005;d<=7007;d++)C[d]=0;for(d=7057;d<=7070;d++)C[d]=2;for(d=7074;d<=7082;d++)C[d]=0;for(d=7109;d<=7118;d++)C[d]=0;for(d=7119;d<=7127;d++)C[d]=1;for(d=7374;d<=7376;d++)C[d]=0;for(d=7528;d<=7586;d++)C[d]=0;for(d=7587;d<=7645;d++)C[d]=2;for(d=7692;d<=7696;d++)C[d]=0;for(d=7755;d<=7787;d++)C[d]=0;for(d=7791;d<=7795;d++)C[d]=0;for(d=7799;d<=7801;d++)C[d]=0;for(d=7803;d<=7805;d++)C[d]=0;for(d=7825;d<=7831;d++)C[d]=0;for(d=7845;d<=7859;d++)C[d]=0;for(d=8013;d<=8032;d++)C[d]=0;for(d=8065;d<=8068;d++)C[d]=1;for(d=8518;d<=8529;d++)C[d]=2;for(d=8533;d<=8536;d++)C[d]=2;for(d=8538;d<=8540;d++)C[d]=2;for(d=8677;d<=8679;d++)C[d]=0;for(d=8836;d<=8840;d++)C[d]=0;for(d=8857;d<=8859;d++)C[d]=0;for(d=8908;d<=8910;d++)C[d]=0;for(d=9154;d<=9159;d++)C[d]=0;for(d=9205;d<=9218;d++)C[d]=0;for(d=9271;d<=9273;d++)C[d]=0;for(d=9295;d<=9297;d++)C[d]=0;for(d=9356;d<=9360;d++)C[d]=0;for(d=9404;d<=9407;d++)C[d]=0;for(d=9476;d<=9482;d++)C[d]=0;for(d=9487;d<=9494;d++)C[d]=0;for(d=9697;d<=9699;d++)C[d]=0;for(d=9821;d<=9865;d++)C[d]=0;for(d=10285;d<=10291;d++)C[d]=0;for(d=10314;d<=10317;d++)C[d]=0;for(d=10448;d<=10465;d++)C[d]=0;for(d=10726;d<=10729;d++)C[d]=0;for(d=10731;d<=10733;d++)C[d]=0;for(d=11114;d<=11118;d++)C[d]=0;for(d=20004;d<=20032;d++)C[d]=0;for(d=20047;d<=20049;d++)C[d]=0;for(d=20062;d<=20092;d++)C[d]=0;for(d=20135;d<=20138;d++)C[d]=0;for(d=20248;d<=20258;d++)C[d]=0;for(d=20348;d<=20358;d++)C[d]=0;for(d=20436;d<=20440;d++)C[d]=0;for(d=20822;d<=20824;d++)C[d]=0;for(d=20904;d<=20932;d++)C[d]=0;for(d=20934;d<=20936;d++)C[d]=0;for(d=21004;d<=21032;d++)C[d]=0;for(d=21035;d<=21037;d++)C[d]=0;for(d=21095;d<=21097;d++)C[d]=0;for(d=21148;d<=21150;d++)C[d]=0;for(d=21207;d<=21264;d++)C[d]=0;for(d=21307;d<=21364;d++)C[d]=0;for(d=21413;d<=21423;d++)C[d]=0;for(d=21453;d<=21463;d++)C[d]=0;for(d=21473;d<=21483;d++)C[d]=0;for(d=21780;d<=21782;d++)C[d]=0;for(d=21891;d<=21894;d++)C[d]=0;for(d=21896;d<=21899;d++)C[d]=0;for(d=22171;d<=22177;d++)C[d]=0;for(d=22181;d<=22187;d++)C[d]=0;for(d=22191;d<=22197;d++)C[d]=0;for(d=22207;d<=22222;d++)C[d]=0;for(d=22229;d<=22232;d++)C[d]=0;for(d=22234;d<=22236;d++)C[d]=0;for(d=22243;d<=22250;d++)C[d]=0;for(d=22262;d<=22265;d++)C[d]=0;for(d=22307;d<=22322;d++)C[d]=0;for(d=22348;d<=22357;d++)C[d]=0;for(d=22407;d<=22422;d++)C[d]=0;for(d=22462;d<=22465;d++)C[d]=0;for(d=22521;d<=22525;d++)C[d]=0;for(d=22607;d<=22622;d++)C[d]=0;for(d=22641;d<=22646;d++)C[d]=0;for(d=22648;d<=22657;d++)C[d]=0;for(d=22707;d<=22722;d++)C[d]=0;for(d=22762;d<=22765;d++)C[d]=0;for(d=22807;d<=22822;d++)C[d]=0;for(d=22991;d<=22994;d++)C[d]=0;for(d=23028;d<=23038;d++)C[d]=0;for(d=23301;d<=23333;d++)C[d]=2;for(d=23830;d<=23853;d++)C[d]=0;for(d=23866;d<=23872;d++)C[d]=0;for(d=23877;d<=23884;d++)C[d]=0;for(d=23886;d<=23894;d++)C[d]=0;for(d=23946;d<=23948;d++)C[d]=0;for(d=24311;d<=24313;d++)C[d]=0;for(d=24342;d<=24347;d++)C[d]=0;for(d=24370;d<=24374;d++)C[d]=10;for(d=24375;d<=24381;d++)C[d]=0;for(d=24718;d<=24721;d++)C[d]=0;for(d=24817;d<=24821;d++)C[d]=0;for(d=24877;d<=24882;d++)C[d]=0;for(d=24891;d<=24893;d++)C[d]=0;for(d=25391;d<=25395;d++)C[d]=0;for(d=25828;d<=25838;d++)C[d]=0;for(d=26191;d<=26195;d++)C[d]=0;for(d=26391;d<=26393;d++)C[d]=0;for(d=26701;d<=26722;d++)C[d]=0;for(d=26729;d<=26799;d++)C[d]=2;for(d=26801;d<=26803;d++)C[d]=2;for(d=26811;d<=26813;d++)C[d]=2;for(d=26847;d<=26870;d++)C[d]=2;for(d=26891;d<=26899;d++)C[d]=0;for(d=26901;d<=26923;d++)C[d]=0;for(d=26929;d<=26946;d++)C[d]=0;for(d=26948;d<=26998;d++)C[d]=0;for(d=27037;d<=27040;d++)C[d]=0;for(d=27205;d<=27232;d++)C[d]=0;for(d=27258;d<=27260;d++)C[d]=0;for(d=27391;d<=27398;d++)C[d]=0;for(d=27561;d<=27564;d++)C[d]=0;for(d=27571;d<=27574;d++)C[d]=0;for(d=27581;d<=27584;d++)C[d]=0;for(d=27591;d<=27594;d++)C[d]=0;for(d=27700;d<=27707;d++)C[d]=0;for(d=28191;d<=28193;d++)C[d]=0;for(d=28348;d<=28358;d++)C[d]=0;for(d=28402;d<=28432;d++)C[d]=0;for(d=28462;d<=28492;d++)C[d]=0;for(d=29118;d<=29122;d++)C[d]=0;for(d=29168;d<=29172;d++)C[d]=0;for(d=29177;d<=29185;d++)C[d]=0;for(d=29187;d<=29195;d++)C[d]=0;for(d=29900;d<=29903;d++)C[d]=0;for(d=30161;d<=30179;d++)C[d]=0;for(d=30491;d<=30494;d++)C[d]=0;for(d=30729;d<=30732;d++)C[d]=0;for(d=31251;d<=31259;d++)C[d]=0;for(d=31265;d<=31268;d++)C[d]=0;for(d=31275;d<=31279;d++)C[d]=0;for(d=31281;d<=31297;d++)C[d]=0;for(d=31461;d<=31469;d++)C[d]=0;for(d=31491;d<=31495;d++)C[d]=0;for(d=31917;d<=31922;d++)C[d]=0;for(d=31965;d<=32e3;d++)C[d]=0;for(d=32001;d<=32003;d++)C[d]=2;for(d=32005;d<=32031;d++)C[d]=2;for(d=32033;d<=32060;d++)C[d]=2;for(d=32064;d<=32067;d++)C[d]=2;for(d=32074;d<=32077;d++)C[d]=2;for(d=32081;d<=32086;d++)C[d]=0;for(d=32107;d<=32130;d++)C[d]=0;for(d=32133;d<=32159;d++)C[d]=0;for(d=32164;d<=32167;d++)C[d]=2;for(d=32180;d<=32199;d++)C[d]=0;for(d=32201;d<=32260;d++)C[d]=0;for(d=32301;d<=32360;d++)C[d]=0;for(d=32401;d<=32460;d++)C[d]=0;for(d=32501;d<=32560;d++)C[d]=0;for(d=32601;d<=32662;d++)C[d]=0;for(d=32664;d<=32667;d++)C[d]=2;for(d=32701;d<=32761;d++)C[d]=0;for(d=53001;d<=53004;d++)C[d]=0;for(d=53008;d<=53019;d++)C[d]=0;for(d=53021;d<=53032;d++)C[d]=0;for(d=53034;d<=53037;d++)C[d]=0;for(d=53042;d<=53046;d++)C[d]=0;for(d=53074;d<=53080;d++)C[d]=0;for(d=54001;d<=54004;d++)C[d]=0;for(d=54008;d<=54019;d++)C[d]=0;for(d=54021;d<=54032;d++)C[d]=0;for(d=54034;d<=54037;d++)C[d]=0;for(d=54042;d<=54046;d++)C[d]=0;for(d=54048;d<=54053;d++)C[d]=0;for(d=54074;d<=54080;d++)C[d]=0;for(d=54090;d<=54096;d++)C[d]=0;for(d=54098;d<=54101;d++)C[d]=0;for(d=65161;d<=65163;d++)C[d]=0;for(d=102001;d<=102040;d++)C[d]=0;for(d=102042;d<=102063;d++)C[d]=0;for(d=102065;d<=102067;d++)C[d]=0;for(d=102070;d<=102117;d++)C[d]=0;for(d=102122;d<=102216;d++)C[d]=0;for(d=102221;d<=102377;d++)C[d]=0;for(d=102382;d<=102388;d++)C[d]=0;for(d=102389;d<=102398;d++)C[d]=2;for(d=102399;d<=102444;d++)C[d]=0;for(d=102445;d<=102447;d++)C[d]=2;for(d=102448;d<=102458;d++)C[d]=0;for(d=102459;d<=102468;d++)C[d]=2;for(d=102469;d<=102499;d++)C[d]=0;for(d=102500;d<=102519;d++)C[d]=1;for(d=102520;d<=102524;d++)C[d]=0;for(d=102525;d<=102529;d++)C[d]=2;for(d=102530;d<=102588;d++)C[d]=0;for(d=102590;d<=102598;d++)C[d]=0;for(d=102601;d<=102603;d++)C[d]=0;for(d=102605;d<=102628;d++)C[d]=0;for(d=102629;d<=102646;d++)C[d]=2;for(d=102648;d<=102700;d++)C[d]=2;for(d=102701;d<=102703;d++)C[d]=0;for(d=102707;d<=102730;d++)C[d]=2;for(d=102733;d<=102758;d++)C[d]=2;for(d=102767;d<=102900;d++)C[d]=0;for(d=102901;d<=102933;d++)C[d]=2;for(d=102934;d<=102950;d++)C[d]=13;for(d=102951;d<=102963;d++)C[d]=0;for(d=102965;d<=102969;d++)C[d]=0;for(d=102971;d<=102973;d++)C[d]=0;for(d=102975;d<=102989;d++)C[d]=0;for(d=102990;d<=102992;d++)C[d]=1;for(d=102997;d<=103002;d++)C[d]=0;for(d=103003;d<=103008;d++)C[d]=2;for(d=103009;d<=103011;d++)C[d]=0;for(d=103012;d<=103014;d++)C[d]=2;for(d=103019;d<=103021;d++)C[d]=0;for(d=103022;d<=103024;d++)C[d]=2;for(d=103029;d<=103031;d++)C[d]=0;for(d=103032;d<=103034;d++)C[d]=2;for(d=103065;d<=103068;d++)C[d]=0;for(d=103074;d<=103076;d++)C[d]=0;for(d=103077;d<=103079;d++)C[d]=1;for(d=103080;d<=103082;d++)C[d]=0;for(d=103083;d<=103085;d++)C[d]=2;for(d=103090;d<=103093;d++)C[d]=0;for(d=103097;d<=103099;d++)C[d]=0;for(d=103100;d<=103102;d++)C[d]=2;for(d=103107;d<=103109;d++)C[d]=0;for(d=103110;d<=103112;d++)C[d]=2;for(d=103113;d<=103116;d++)C[d]=0;for(d=103117;d<=103120;d++)C[d]=2;for(d=103153;d<=103157;d++)C[d]=0;for(d=103158;d<=103162;d++)C[d]=2;for(d=103163;d<=103165;d++)C[d]=0;for(d=103166;d<=103168;d++)C[d]=1;for(d=103169;d<=103171;d++)C[d]=2;for(d=103186;d<=103188;d++)C[d]=0;for(d=103189;d<=103191;d++)C[d]=2;for(d=103192;d<=103195;d++)C[d]=0;for(d=103196;d<=103199;d++)C[d]=2;for(d=103200;d<=103224;d++)C[d]=0;for(d=103225;d<=103227;d++)C[d]=1;for(d=103232;d<=103237;d++)C[d]=0;for(d=103238;d<=103243;d++)C[d]=2;for(d=103244;d<=103246;d++)C[d]=0;for(d=103247;d<=103249;d++)C[d]=2;for(d=103254;d<=103256;d++)C[d]=0;for(d=103257;d<=103259;d++)C[d]=2;for(d=103264;d<=103266;d++)C[d]=0;for(d=103267;d<=103269;d++)C[d]=2;for(d=103300;d<=103375;d++)C[d]=0;for(d=103381;d<=103383;d++)C[d]=0;for(d=103384;d<=103386;d++)C[d]=1;for(d=103387;d<=103389;d++)C[d]=0;for(d=103390;d<=103392;d++)C[d]=2;for(d=103397;d<=103399;d++)C[d]=0;for(d=103400;d<=103471;d++)C[d]=2;for(d=103476;d<=103478;d++)C[d]=0;for(d=103479;d<=103481;d++)C[d]=2;for(d=103486;d<=103488;d++)C[d]=0;for(d=103489;d<=103491;d++)C[d]=2;for(d=103492;d<=103495;d++)C[d]=0;for(d=103496;d<=103499;d++)C[d]=2;for(d=103528;d<=103543;d++)C[d]=0;for(d=103544;d<=103548;d++)C[d]=2;for(d=103549;d<=103551;d++)C[d]=0;for(d=103552;d<=103554;d++)C[d]=1;for(d=103555;d<=103557;d++)C[d]=2;for(d=103558;d<=103560;d++)C[d]=0;for(d=103571;d<=103573;d++)C[d]=0;for(d=103574;d<=103576;d++)C[d]=2;for(d=103577;d<=103580;d++)C[d]=0;for(d=103581;d<=103583;d++)C[d]=2;for(d=103595;d<=103694;d++)C[d]=0;for(d=103696;d<=103699;d++)C[d]=0;for(d=103700;d<=103793;d++)C[d]=2;for(d=103794;d<=103890;d++)C[d]=0;for(d=103891;d<=103896;d++)C[d]=2;for(d=103900;d<=103971;d++)C[d]=2;for(d=103972;d<=103977;d++)C[d]=0;for(d=112e3;d<=112101;d++)C[d]=0;const GT=[102100,102113,3857,3785,900913],zN=[104905,104971],VN=[4326,...GT,...zN],Wc=[-20037508342788905e-9,20037508342788905e-9],b1=[-20037508342787e-6,20037508342787e-6],Tm={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Wc,origin:b1,dx:1e-5},qT={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Wc,origin:b1,dx:1e-5},102100:Tm,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Wc,origin:b1,dx:1e-5},3857:Tm,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Tm};function Ni(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||kn(e)&&kn(t))return!0;const c=e.latestWkid;if(c!=null&&i===c)return!0;const f=t.latestWkid;return f!=null&&r===f}let s,o;return e.wkt2&&t.wkt2?(s=e.wkt2,o=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,o=t.wkt),!(!s||!o)&&s.toUpperCase()===o.toUpperCase()}function Vd(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&qT[t]||null}function QK(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function hp(e){if(!xn(e))return!1;const{wkid:t}=e;if(t)return C[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function GN(e){return!(QT(e)||WT(e))}function xl(e){return(e==null?void 0:e.wkid)===4326}function WK(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function m_(e){return(e==null?void 0:e.wkid)===El.CGCS2000}function kn(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&GT.includes(t)}function qN(e){return(e==null?void 0:e.wkid)===32662}function Vf(e){return e===El.GCSMARS2000||e===El.GCSMARS2000_SPHERE}function QT(e){return Vf(e==null?void 0:e.wkid)}function Gf(e){return e===El.GCSMOON2000}function WT(e){return Gf(e==null?void 0:e.wkid)}function QN(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&VN.includes(t)}function xn(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const HT={wkid:4326,wkt:kl(qT[4326].wkTemplate,{Central_Meridian:"0.0"})},JT={wkid:102100,latestWkid:3857},WN={wkid:32662};function Kb(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const HN=Kb(Kt),Xb=Kb($n),ev=Kb(fa),JN={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Kt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},ZN=Xb.wkt.toUpperCase(),YN=ev.wkt.toUpperCase();function KN(e){if(e!=null&&xn(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(Vf(t))return $n;const i=r==null?void 0:r.toUpperCase();if(r&&i===ZN)return $n;if(Gf(t)||i&&i===YN)return fa}return Kt}function HK(e){return Vf(e)?$n:Gf(e)?fa:Kt}function ef(e){return Ni(e,HN)}function ya(e){return ef(e)||Ni(e,Xb)||Ni(e,ev)}const XN=39.37,ej=Kt.radius*Math.PI/200,ZT=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Iu=C,YT=/UNIT\[([^\]]+)]/i,tj=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),rj=Ur()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Es=e=>e*e,Io=e=>e*e*e,Hc={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Es(.001)},"square-centimeters":{inBaseUnits:Es(.01)},"square-decimeters":{inBaseUnits:Es(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Es(1e3)},"square-inches":{inBaseUnits:Es(.0254)},"square-feet":{inBaseUnits:Es(.3048)},"square-yards":{inBaseUnits:Es(.9144)},"square-miles":{inBaseUnits:Es(1609.344)},"square-nautical-miles":{inBaseUnits:Es(1852)},"square-us-feet":{inBaseUnits:Es(1200/3937)},acres:{inBaseUnits:.0015625*Es(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Io(.001)},"cubic-centimeters":{inBaseUnits:1e3*Io(.01)},"cubic-decimeters":{inBaseUnits:1e3*Io(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Io(1e3)},"cubic-inches":{inBaseUnits:1e3*Io(.0254)},"cubic-feet":{inBaseUnits:1e3*Io(.3048)},"cubic-yards":{inBaseUnits:1e3*Io(.9144)},"cubic-miles":{inBaseUnits:1e3*Io(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},ij=(()=>{const e={};for(const t in Hc)for(const r in Hc[t].units)e[r]=t;return e})();function sj(e,t,r){return e*Hc[r].units[t].inBaseUnits}function nj(e,t,r){return e/Hc[r].units[t].inBaseUnits}const oj=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function v1(e){const t=ij[e];if(!t)throw new Error("unknown type");return t}function g_(e,t=null){return t=t||v1(e),Hc[t].baseUnit===e}function ti(e,t,r){if(t===r)return e;const i=v1(t);if(i!==v1(r))throw new Error("incompatible units");const s=g_(t,i)?e:sj(e,t,i);return g_(r,i)?s:nj(s,r,i)}function JK(e,t,r,i=!1){if(!i&&hp(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=fp(t);return s!==r&&(e=s?ti(e,s,r):ti(e*=Sa(t),"meters",r)),e}function ZK(e,t,r,i=!1){if(!i&&hp(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=fp(r);return t!==s&&(e=s?ti(e,t,s):ti(e,t,"meters")/Sa(r)),e}function aj(e,t,r){return ti(e,t,"meters")/(r*Math.PI/180)}function tv(e){return rj.fromJSON(e.toLowerCase())||null}function tf(e){if(e!=null&&!GN(e))return 1;const t=Sa(e);return t>1e5?1:t}function lj(e){return Sa(e)>=KN(e).metersPerDegree?"meters":fp(e)}function Sa(e,t=Kt.metersPerDegree){return Aj(e,!0)??t}function Aj(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let s=null;if(r){if(Vf(r))return $n.metersPerDegree;if(Gf(r))return fa.metersPerDegree;s=Iu.values[Iu[r]],!s&&t&&tj.has(r)&&(s=ej)}else i&&(e5(i)?s=w_(ZT.exec(i),s):XT(i)&&(s=w_(YT.exec(i),s)));return s}function YK(e){return hp(e)?1:Sa(e)}function w_(e,t){return e!=null&&e[1]?KT(e[1]):t}function KT(e){return parseFloat(e.split(",")[1])}function fp(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=Iu.units[Iu[t]];else if(r){const s=e5(r)?ZT:XT(r)?YT:null;if(s){const o=s.exec(r);o!=null&&o[1]&&(i=cj(o[1]))}}return i!=null?tv(i):null}function KK(e){const t=fp(e);return t==null?null:oj.get(t)}function XT(e){return/^GEOCCS/i.test(e)}function e5(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const uj=1e-7;function cj(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!tv(r)){const i=KT(e);r=null;const s=Iu.values;for(let o=0;o<s.length;++o)if(Math.abs(i-s[o])<uj){r=Iu.units[o];break}}return r}const pj={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},dj={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},hj={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},fj=Ur()(pj),yj=Ur()(dj),XK=Ur()(hj);var An,_n;let ke=(_n=class extends se{static fromJSON(t){if(!t)return null;if((t==null?void 0:t.wkid)===102100)return An.WebMercator;if((t==null?void 0:t.wkid)===4326)return An.WGS84;const r=new An;return r.read(t),r}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return xl(this)}get isWebMercator(){return kn(this)}get isGeographic(){return hp(this)}get isWrappable(){return QN(this)}get metersPerUnit(){return Sa(this)}get unit(){return fp(this)||(this.isGeographic?"degrees":null)}writeWkt(t,r){this.wkid||(r.wkt=t)}clone(){if(this===An.WGS84)return new An(HT);if(this===An.WebMercator)return new An(JT);const t=new An;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=q(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:r,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:s}=t.imageCoordinateSystem,o=this.imageCoordinateSystem;return r==null||s?JSON.stringify(o)===JSON.stringify(t.imageCoordinateSystem):i?o.id===r&&o.referenceServiceName===i:o.id===r}return Ni(this,t)}toJSON(t){return this.write(void 0,t)}},An=_n,_n.GCS_NAD_1927=null,_n.WGS84=null,_n.WebMercator=null,_n.PlateCarree=null,_n);u([y({readOnly:!0})],ke.prototype,"isWGS84",null),u([y({readOnly:!0})],ke.prototype,"isWebMercator",null),u([y({readOnly:!0})],ke.prototype,"isGeographic",null),u([y({readOnly:!0})],ke.prototype,"isWrappable",null),u([y({type:Ct,json:{write:!0}})],ke.prototype,"latestWkid",void 0),u([y({readOnly:!0})],ke.prototype,"metersPerUnit",null),u([y({readOnly:!0})],ke.prototype,"unit",null),u([y({type:Ct,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],ke.prototype,"wkid",void 0),u([y({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],ke.prototype,"wkt",void 0),u([me("wkt"),me("web-scene","wkt")],ke.prototype,"writeWkt",null),u([y({type:String,json:{write:!1}})],ke.prototype,"wkt2",void 0),u([y({type:Ct,json:{write:!0}})],ke.prototype,"vcsWkid",void 0),u([y({type:Ct,json:{write:!0}})],ke.prototype,"latestVcsWkid",void 0),u([y()],ke.prototype,"imageCoordinateSystem",void 0),ke=An=u([j("esri.geometry.SpatialReference")],ke),ke.prototype.toJSON.isDefaultToJSON=!0,ke.GCS_NAD_1927=Bt.freeze(new ke({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),ke.WGS84=Bt.freeze(new ke(HT)),ke.WebMercator=Bt.freeze(new ke(JT)),ke.PlateCarree=Bt.freeze(new ke(WN));let ii=class extends se{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ke.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof ke)return t;if(t!=null){const i=new ke;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};u([y()],ii.prototype,"type",void 0),u([y({readOnly:!0})],ii.prototype,"cache",null),u([y({readOnly:!0})],ii.prototype,"extent",null),u([y({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ii.prototype,"hasM",void 0),u([y({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ii.prototype,"hasZ",void 0),u([y({type:ke,json:{write:!0},value:ke.WGS84})],ii.prototype,"spatialReference",void 0),u([ce("spatialReference")],ii.prototype,"readSpatialReference",null),ii=u([j("esri.geometry.Geometry")],ii);function Mu(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new re("internal:mesh","Mesh geometries are not supported for this operation")}function mj(e){e.forEach(Mu)}const gj=57.29577951308232,wj=.017453292519943;function b_(e){return e*gj}function v_(e){return e*wj}function tX(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Kt.radius))}function S1(e){return e.wkid!=null||e.wkt!=null}const Im=[0,0];function rf(e,t,r,i,s){const o=e,c=s;if(c.spatialReference=r,"x"in o&&"x"in c)[c.x,c.y]=t(o.x,o.y,Im,i);else if("xmin"in o&&"xmin"in c)[c.xmin,c.ymin]=t(o.xmin,o.ymin,Im,i),[c.xmax,c.ymax]=t(o.xmax,o.ymax,Im,i);else if("paths"in o&&"paths"in c||"rings"in o&&"rings"in c){const f="paths"in o?o.paths:o.rings,w=[];let v;for(let _=0;_<f.length;_++){const $=f[_];v=[],w.push(v);for(let I=0;I<$.length;I++)v.push(t($[I][0],$[I][1],[0,0],i)),$[I].length>2&&v[I].push($[I][2]),$[I].length>3&&v[I].push($[I][3])}"paths"in c?c.paths=w:c.rings=w}else if("points"in o&&"points"in c){const f=o.points,w=[];for(let v=0;v<f.length;v++)w[v]=t(f[v][0],f[v][1],[0,0],i),f[v].length>2&&w[v].push(f[v][2]),f[v].length>3&&w[v].push(f[v][3]);c.points=w}return s}function Gd(e,t){const r=e&&(S1(e)?e:e.spatialReference),i=t&&(S1(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!Ni(i,r)||kn(i)&&xl(r)||kn(r)&&xl(i))}function t5(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(S1(t)?t:t.spatialReference);return Gd(r,i)?Ni(r,i)?q(e):kn(i)?rf(e,$A,ke.WebMercator,!1,q(e)):xl(i)?rf(e,qf,ke.WGS84,!1,q(e)):null:null}function $A(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=v_(t);return r[0]=v_(e)*Kt.radius,r[1]=Kt.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function qf(e,t,r=[0,0],i=!1){if(e===Wc[0])r[0]=-180;else if(e===Wc[1])r[0]=180;else{const s=b_(e/Kt.radius);r[0]=i?s:s-360*Math.floor((s+180)/360)}return r[1]=b_(Math.PI/2-2*Math.atan(Math.exp(-t/Kt.radius))),r}function Mm(e,t=!1,r=q(e)){return Mu(e),Mu(r),rf(e,$A,ke.WebMercator,t,r)}function G0(e,t=!1,r=q(e)){return Mu(e),Mu(r),rf(e,qf,ke.WGS84,t,r)}function bj(e,t){const r=e.x-t.x,i=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+s*s)}function vj(e){var t;return((t=r5(e,i5))==null?void 0:t[0])??null}function Sj(e){var t;return((t=r5(e,i5))==null?void 0:t[1])??null}function r5({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(kn(r))return qf(e,t,i);if(hp(r))return i[0]=e,i[1]=t,i}return null}const i5=[0,0];var qd;const Cm=[0,0];function S_(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let gt=qd=class extends ii{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Bt.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,s){let o;if(Array.isArray(e))o=e,s=t,e=o[0],t=o[1],r=o[2],i=o[3];else if(e&&typeof e=="object"){if(o=e,e=o.x!=null?o.x:o.longitude,t=o.y!=null?o.y:o.latitude,r=o.z,i=o.m,(s=o.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new ke(s)),o.longitude!=null||o.latitude!=null){if(o.longitude==null)xe.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(o.latitude==null)xe.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&(s!=null&&s.isWebMercator)){const f=$A(o.longitude,o.latitude,Cm);e=f[0],t=f[1]}}}else S_(r)?(s=r,r=null):S_(i)&&(s=i,i=null);const c={x:e,y:t};return c.x==null&&c.y!=null?xe.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):c.y==null&&c.x!=null&&xe.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(c.spatialReference=s),r!=null&&(c.z=r),i!=null&&(c.m=i),c}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Sj(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",$A(r,e,Cm)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return vj(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",$A(e,t,Cm)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new qd;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return qd.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:s,spatialReference:o}=this,{z:c,m:f}=e;let{x:w,y:v,spatialReference:_}=e;if(!o.equals(_))if(o.isWebMercator&&_.isWGS84)[w,v]=$A(w,v),_=o;else{if(!o.isWGS84||!_.isWebMercator)return!1;[w,v]=qf(w,v),_=o}return t===w&&r===v&&i===c&&s===f&&o.wkid===_.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=Vd(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,s=2*i;let o;return t>i?(o=Math.ceil(Math.abs(t-i)/s),t-=o*s):t<r&&(o=Math.ceil(Math.abs(t-r)/s),t+=o*s),this._set("x",t),this}distance(e){return bj(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};u([y({readOnly:!0})],gt.prototype,"cache",null),u([y({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],gt.prototype,"hasM",null),u([y({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],gt.prototype,"hasZ",null),u([y({type:Number})],gt.prototype,"latitude",null),u([y({type:Number})],gt.prototype,"longitude",null),u([y({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Yt((e=>isNaN(e)?e:Nu(e)))],gt.prototype,"x",void 0),u([me("x")],gt.prototype,"writeX",null),u([ce("x")],gt.prototype,"readX",null),u([y({type:Number,json:{write:!0}})],gt.prototype,"y",void 0),u([y({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],gt.prototype,"z",void 0),u([y({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],gt.prototype,"m",void 0),gt=qd=u([j("esri.geometry.Point")],gt),gt.prototype.toJSON.isDefaultToJSON=!0;const km=[0,0];function s5(e,t){return t!=null&&hi(e,t.x,t.y,t.z)}function rX(e,t){var r;if(!((r=t.points)!=null&&r.length))return!1;for(const i of t.points)if(!Cu(e,i))return!1;return!0}function _j(e,t){const{xmin:r,ymin:i,zmin:s,xmax:o,ymax:c,zmax:f}=t;return e.hasZ&&t.hasZ?hi(e,r,i,s)&&hi(e,r,c,s)&&hi(e,o,c,s)&&hi(e,o,i,s)&&hi(e,r,i,f)&&hi(e,r,c,f)&&hi(e,o,c,f)&&hi(e,o,i,f):hi(e,r,i)&&hi(e,r,c)&&hi(e,o,c)&&hi(e,o,i)}function Cu(e,t){return hi(e,t[0],t[1])}function Ej(e,t){return hi(e,t[0],t[1],t[2])}function hi(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function xj(e,t){return km[1]=t.y,km[0]=t.x,$j(e,km)}function $j(e,t){return n5(e.rings,t)}function n5(e,t){if(!e)return!1;if(Tj(e))return __(!1,e,t);let r=!1;for(let i=0,s=e.length;i<s;i++)r=__(r,e[i],t);return r}function Tj(e){return!Array.isArray(e[0][0])}function __(e,t,r){const[i,s]=r;let o=e,c=0;for(let f=0,w=t.length;f<w;f++){c++,c===w&&(c=0);const[v,_]=t[f],[$,I]=t[c];(_<s&&I>=s||I<s&&_>=s)&&v+(s-_)/(I-_)*($-v)<i&&(o=!o)}return o}function Ij(e,t){return s5(e,t)}function Mj(e,t){const r=e.hasZ&&t.hasZ;let i,s,o;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(o=t.zmin,e.zmax<o)return!1}else if(o=e.zmin,t.zmax<o)return!1}return!0}function Cj(e,t){const{points:r,hasZ:i}=t,s=i?Ej:Cu;for(const o of r)if(s(e,o))return!0;return!1}const $l=[0,0],Tl=[0,0],Il=[0,0],Ml=[0,0],kj=[$l,Tl,Il,Ml],o5=[[Il,$l],[$l,Tl],[Tl,Ml],[Ml,Il]];function Oj(e,t){return Pj(e,t.rings)}function Pj(e,t){$l[0]=e.xmin,$l[1]=e.ymax,Tl[0]=e.xmax,Tl[1]=e.ymax,Il[0]=e.xmin,Il[1]=e.ymin,Ml[0]=e.xmax,Ml[1]=e.ymin;for(const r of kj)if(n5(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(Cu(e,i))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(Cu(e,o)||a5(i,o,o5))return!0;i=o}}return!1}function Dj(e,t){$l[0]=e.xmin,$l[1]=e.ymax,Tl[0]=e.xmax,Tl[1]=e.ymax,Il[0]=e.xmin,Il[1]=e.ymin,Ml[0]=e.xmax,Ml[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let s=i[0];if(Cu(e,s))return!0;for(let o=1;o<i.length;o++){const c=i[o];if(Cu(e,c)||a5(s,c,o5))return!0;s=c}}return!1}const Pr=[0,0];function Fj(e){for(let t=0;t<e.length;t++){const r=e[t];for(let s=0;s<r.length-1;s++){const o=r[s],c=r[s+1];for(let f=t+1;f<e.length;f++)for(let w=0;w<e[f].length-1;w++){const v=e[f][w],_=e[f][w+1];if(_1(o,c,v,_,Pr)&&!(Pr[0]===o[0]&&Pr[1]===o[1]||Pr[0]===v[0]&&Pr[1]===v[1]||Pr[0]===c[0]&&Pr[1]===c[1]||Pr[0]===_[0]&&Pr[1]===_[1]))return!0}}const i=r.length;if(!(i<=4))for(let s=0;s<i-3;s++){let o=i-1;s===0&&(o=i-2);const c=r[s],f=r[s+1];for(let w=s+2;w<o;w++){const v=r[w],_=r[w+1];if(_1(c,f,v,_,Pr)&&!(Pr[0]===c[0]&&Pr[1]===c[1]||Pr[0]===v[0]&&Pr[1]===v[1]||Pr[0]===f[0]&&Pr[1]===f[1]||Pr[0]===_[0]&&Pr[1]===_[1]))return!0}}}return!1}function a5(e,t,r){for(let i=0;i<r.length;i++)if(_1(e,t,r[i][0],r[i][1]))return!0;return!1}function _1(e,t,r,i,s){const[o,c]=e,[f,w]=t,[v,_]=r,[$,I]=i,k=$-v,N=o-v,B=f-o,L=I-_,ee=c-_,ae=w-c,he=L*B-k*ae;if(he===0)return!1;const ye=(k*ee-L*N)/he,ge=(B*ee-ae*N)/he;return ye>=0&&ye<=1&&ge>=0&&ge<=1&&(s&&(s[0]=o+ye*(f-o),s[1]=c+ye*(w-c)),!0)}function Rj(e){switch(e){case"esriGeometryEnvelope":case"extent":return Mj;case"esriGeometryMultipoint":case"multipoint":return Cj;case"esriGeometryPoint":case"point":return Ij;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Oj;case"esriGeometryPolyline":case"polyline":return Dj}}var Is;function Nj(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Mo(e,t,r){return t==null?r:r==null?t:e(t,r)}let ct=Is=class extends ii{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,s){return Nj(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?ke.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:s??ke.WGS84}}static fromPoint(e){return new Is({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new gt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Is;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Gd(t,r)&&(e=t.isWebMercator?Mm(e):G0(e,!0)),e.type==="point"?s5(this,e):e.type==="extent"&&_j(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Gd(t,r)&&(e=t.isWebMercator?Mm(e):G0(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!Ni(t,r)&&Gd(t,r)&&(e=t.isWebMercator?Mm(e):G0(e,!0)),Rj(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Mo(Math.min,this.zmin,e.zmin),this.zmax=Mo(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Mo(Math.min,this.mmin,e.mmin),this.mmax=Mo(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Mo(Math.max,this.zmin,e.zmin),this.zmax=Mo(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Mo(Math.max,this.mmin,e.mmin),this.mmax=Mo(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Vd(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?G0(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=Om(i.x,e).x),this.spatialReference=new ke(kl((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,s=this.xmin,o=this.xmax;return s>=r&&s<=i&&o>=r&&o<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const s=r??Vd(i);if(s==null)return this;const o=this._getParts(s).map((w=>w.extent));if(o.length<2)return o[0]||this;if(o.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return o;let c=!0,f=!0;return o.forEach((w=>{w.hasZ||(c=!1),w.hasM||(f=!1)})),{rings:o.map((w=>{const v=[[w.xmin,w.ymin],[w.xmin,w.ymax],[w.xmax,w.ymax],[w.xmax,w.ymin],[w.xmin,w.ymin]];if(c){const _=(w.zmax-w.zmin)/2;for(let $=0;$<v.length;$++)v[$].push(_)}if(f){const _=(w.mmax-w.mmin)/2;for(let $=0;$<v.length;$++)v[$].push(_)}return v})),hasZ:c,hasM:f,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:o,spatialReference:c}=this,f=this.width,w=this.xmin,v=this.xmax;let _;e=e||Vd(c);const[$,I]=e.valid;_=Om(this.xmin,e);const k=_.x,N=_.frameId;_=Om(this.xmax,e);const B=_.x,L=_.frameId,ee=k===B&&f>0;if(f>2*I){const ae=new Is(w<v?k:B,s,I,o,c),he=new Is($,s,w<v?B:k,o,c),ye=new Is(0,s,I,o,c),ge=new Is($,s,0,o,c),ve=[],ut=[];ae.contains(ye)&&ve.push(N),ae.contains(ge)&&ut.push(N),he.contains(ye)&&ve.push(L),he.contains(ge)&&ut.push(L);for(let We=N+1;We<L;We++)ve.push(We),ut.push(We);t.push({extent:ae,frameIds:[N]},{extent:he,frameIds:[L]},{extent:ye,frameIds:ve},{extent:ge,frameIds:ut})}else k>B||ee?t.push({extent:new Is(k,s,I,o,c),frameIds:[N]},{extent:new Is($,s,B,o,c),frameIds:[L]}):t.push({extent:new Is(k,s,B,o,c),frameIds:[N]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const s={};r&&(s.zmin=this.zmin,s.zmax=this.zmax),i&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let o=0;o<t.length;o++)t[o].extent.set(s)}return t}};function Om(e,t){const[r,i]=t.valid,s=2*i;let o,c=0;return e>i?(o=Math.ceil(Math.abs(e-i)/s),e-=o*s,c=o):e<r&&(o=Math.ceil(Math.abs(e-r)/s),e+=o*s,c=-o),{x:e,frameId:c}}u([y({readOnly:!0})],ct.prototype,"cache",null),u([y({readOnly:!0})],ct.prototype,"center",null),u([y({readOnly:!0})],ct.prototype,"extent",null),u([y({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ct.prototype,"hasM",null),u([y({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ct.prototype,"hasZ",null),u([y({readOnly:!0})],ct.prototype,"height",null),u([y({readOnly:!0})],ct.prototype,"width",null),u([y({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ct.prototype,"xmin",void 0),u([y({type:Number,json:{write:!0}})],ct.prototype,"ymin",void 0),u([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ct.prototype,"mmin",void 0),u([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ct.prototype,"zmin",void 0),u([y({type:Number,json:{write:!0}})],ct.prototype,"xmax",void 0),u([y({type:Number,json:{write:!0}})],ct.prototype,"ymax",void 0),u([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ct.prototype,"mmax",void 0),u([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ct.prototype,"zmax",void 0),ct=Is=u([j("esri.geometry.Extent")],ct),ct.prototype.toJSON.isDefaultToJSON=!0;function ku(e,t,r=!1){let{hasM:i,hasZ:s}=e;Array.isArray(t)?t.length!==4||i||s?t.length===3&&r&&!i?(s=!0,i=!1):t.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=i}var E1;function E_(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function jj(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Fs=E1=class extends ii{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var s;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):jj(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(s=r.points)==null?void 0:s[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new ct,r=this.hasZ,i=this.hasM,s=r?3:2,o=e[0],c=E_(Math.min),f=E_(Math.max);let w,v,_,$,[I,k]=o,[N,B]=o;for(let L=0,ee=e.length;L<ee;L++){const ae=e[L],[he,ye]=ae;if(I=c(I,he),k=c(k,ye),N=f(N,he),B=f(B,ye),r&&ae.length>2){const ge=ae[2];w=c(w,ge),_=f(_,ge)}if(i&&ae.length>s){const ge=ae[s];v=c(v,ge),$=f($,ge)}}return t.xmin=I,t.ymin=k,t.xmax=N,t.ymax=B,t.spatialReference=this.spatialReference,r?(t.zmin=w,t.zmax=_):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=v,t.mmax=$):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=q(this.points)}addPoint(e){return ku(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:q(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new E1(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new gt(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new gt(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(ku(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};u([y({readOnly:!0})],Fs.prototype,"cache",null),u([y()],Fs.prototype,"extent",null),u([y({type:[[Number]],json:{write:{isRequired:!0}}})],Fs.prototype,"points",void 0),u([me("points")],Fs.prototype,"writePoints",null),Fs=E1=u([j("esri.geometry.Multipoint")],Fs),Fs.prototype.toJSON.isDefaultToJSON=!0;function iX(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function Lj(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var sf;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(sf||(sf={}));function rv(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function Bj(e,t,r){const i=e[0]+r*(t[0]-e[0]),s=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,s,e[2]+r*(t[2]-e[2])]:[i,s]}function sX(e,t,r,i){const[s,o]=t,[c,f]=r,[w,v]=i,_=w-c,$=v-f,I=_*_+$*$,k=(s-c)*_+(o-f)*$,N=Math.min(1,Math.max(0,k/I));return e[0]=c+_*N,e[1]=f+$*N,e}function nX(e,t,r,i,s,o){let c=r,f=i,w=s-c,v=o-f;if(w!==0||v!==0){const _=((e-c)*w+(t-f)*v)/(w*w+v*v);_>1?(c=s,f=o):_>0&&(c+=w*_,f+=v*_)}return w=e-c,v=t-f,w*w+v*v}function l5(e,t){return Bj(e,t,.5)}function oX(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=rv(e[i],e[i+1]);return r}function A5(e,t=sf.X,r=sf.Y){let i=0;const s=e.length;let o=e[0];for(let c=1;c<s;c++){const f=e[c];i+=(f[t]-o[t])*(f[r]+o[r]),o=f}if(u5(e)){const c=e[0];i+=(c[t]-o[t])*(c[r]+o[r])}return i>=0}function u5(e){const t=e.length;return t>0&&!mf(e[0],e[t-1])}function aX(e){"rings"in e&&(Uj(e),zj(e))}function Uj(e){if("rings"in e)for(const t of e.rings)u5(t)&&t.push(t[0].slice())}function zj(e){if(!("rings"in e)||e.rings.length===0||A5(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function lX(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Vj(e){return e?Gj(e.rings,e.hasZ??!1):null}function Gj(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let o=0,c=e.length;o<c;o++){const f=c5(e[o],t,s);f&&i.push(f)}if(i.sort(((o,c)=>{let f=o[2]-c[2];return f===0&&t&&(f=o[4]-c[4]),f})),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const o=e[0]&&e[0].length?qj(e[0],t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],t&&o.length>2&&(r[2]=o[2])}return r}function c5(e,t,r){let i=0,s=0,o=0,c=0,f=0;const w=e.length?e[0][0]:0,v=e.length?e[0][1]:0,_=e.length&&t?e[0][2]:0;for(let I=0;I<e.length;I++){const k=e[I],N=e[(I+1)%e.length],[B,L,ee]=k,ae=B-w,he=L-v,[ye,ge,ve]=N,ut=ye-w,We=ge-v,dt=ae*We-ut*he;if(c+=dt,i+=(ae+ut)*dt,s+=(he+We)*dt,t&&k.length>2&&N.length>2){const ot=ee-_,wt=ve-_,at=ae*wt-ut*ot;o+=(ot+wt)*at,f+=at}B<r[0]&&(r[0]=B),B>r[1]&&(r[1]=B),L<r[2]&&(r[2]=L),L>r[3]&&(r[3]=L),t&&(ee<r[4]&&(r[4]=ee),ee>r[5]&&(r[5]=ee))}if(c>0&&(c*=-1),f>0&&(f*=-1),!c)return null;c*=.5,f*=.5;const $=[i/(6*c)+w,s/(6*c)+v,c];return t&&(r[4]===r[5]||f===0?($[3]=(r[4]+r[5])/2,$[4]=0):($[3]=o/(6*f)+_,$[4]=f)),$}function AX(e,t){let r=0,i=0,s=0;e.nextPoint();const o=e.pathSize?e.x:0,c=e.pathSize?e.y:0;for(let f=0;f<e.pathSize;f++){e.seekInPath(f);const w=[e.x,e.y];e.seekInPath((f+1)%e.pathSize);const v=[e.x,e.y],[_,$]=w,I=_-o,k=$-c,[N,B]=v,L=N-o,ee=B-c,ae=I*ee-L*k;s+=ae,r+=(I+L)*ae,i+=(k+ee)*ae,_<t[0]&&(t[0]=_),_>t[1]&&(t[1]=_),$<t[2]&&(t[2]=$),$>t[3]&&(t[3]=$)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+o,i/(6*s)+c,s]):null}function qj(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,o=0,c=0,f=0;for(let w=0,v=e.length;w<v-1;w++){const _=e[w],$=e[w+1];if(_&&$){r[0]=_[0],r[1]=_[1],i[0]=$[0],i[1]=$[1],t&&_.length>2&&$.length>2&&(r[2]=_[2],i[2]=$[2]);const I=rv(r,i);if(I){s+=I;const k=l5(_,$);o+=I*k[0],c+=I*k[1],t&&k.length>2&&(f+=I*k[2])}}}return s>0?t?[o/s,c/s,f/s]:[o/s,c/s]:e.length?e[0]:null}function Qj(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],s=[],o=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const c=c5(Lj(e),e.hasZ,o);c&&s.push(c)}if(s.sort(((c,f)=>{let w=c[2]-f[2];return w===0&&t&&(w=c[4]-f[4]),w})),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<o[0]||i[0]>o[1]||i[1]<o[2]||i[1]>o[3]||t&&(i[2]<o[4]||i[2]>o[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const c=e.pathSize?Wj(e):null;if(!c)return null;i[0]=c[0],i[1]=c[1],t&&c.length>2&&(i[2]=c[2])}return i}function Wj(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,o=0,c=0,f=0;if(e.nextPoint()){let w=e.x,v=e.y,_=e.z;for(;e.nextPoint();){const $=e.x,I=e.y,k=e.z;r[0]=w,r[1]=v,i[0]=$,i[1]=I,t&&(r[2]=_,i[2]=k);const N=rv(r,i);if(N){s+=N;const B=l5(r,i);o+=N*B[0],c+=N*B[1],t&&B.length>2&&(f+=N*B[2])}w=$,v=I,_=k}}return s>0?t?[o/s,c/s,f/s]:[o/s,c/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const Hj=1e-6;function uX(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<Hj){const s=Qj(e);return s?[s[0],s[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)Zj(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const Jj=1/3;function Zj(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,s=r.y;r.nextPoint();let o,c=r.x-i,f=r.y-s,w=0,v=0;for(;r.nextPoint();)w=r.x-i,v=r.y-s,o=.5*Jj*(w*f-v*c),e[0]+=o*(c+w),e[1]+=o*(f+v),c=w,f=v;const _=r.getCurrentRingArea(),$=[i,s];return $[0]-=t[0],$[1]-=t[1],$[0]*=_,$[1]*=_,e[0]+=$[0],e[1]+=$[1],e}function yp(e=Xj){return[e[0],e[1],e[2],e[3]]}function p5(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function cX(e,t,r,i,s=yp()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function pX(e,t=yp()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function dX(e,t,r=new ct){return r.xmin=e[0],r.ymin=e[1],r.xmax=e[2],r.ymax=e[3],r.spatialReference=t,r}function hX(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function fX(e,t,r){if(t!=null)if("length"in t)x1(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else p5(r,e)}function Yj(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function Kj(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function yX(e){return Yj(e)*Kj(e)}function mX(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function gX(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function wX(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function bX(e,t,r){return Math.max(t[0],e[0])-r<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-r<=Math.min(t[3],e[3])}function vX(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function SX(e){return e?p5(e,x_):yp(x_)}function x1(e){return e!=null&&e.length===4}function _X(e,t){return x1(e)&&x1(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const x_=[1/0,1/0,-1/0,-1/0],Xj=[0,0,0,0];function d5(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function h5(e){return e.points!==void 0}function f5(e){return e.x!==void 0&&e.y!==void 0}function y5(e){return e.paths!==void 0}function m5(e){return e.rings!==void 0}function g5(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const Yo=g5(Math.min),Ko=g5(Math.max);function EX(e,t){return y5(t)?Ou(e,t.paths,!1,!1):m5(t)?Ou(e,t.rings,!1,!1):h5(t)?iv(e,t.points,!1,!1,!1,!1):d5(t)?w5(e,t):(f5(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function xX(e){let t,r,i,s;for(e.reset(),t=i=1/0,r=s=-1/0;e.nextPath();){const o=eL(e);t=Math.min(o[0],t),i=Math.min(o[1],i),r=Math.max(o[2],r),s=Math.max(o[3],s)}return yp([t,i,r,s])}function eL(e){let t,r,i,s;for(t=i=1/0,r=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),s=Math.max(e.y,s);return yp([t,i,r,s])}function $X(e,t){return y5(t)?Ou(e,t.paths,!0,!1):m5(t)?Ou(e,t.rings,!0,!1):h5(t)?iv(e,t.points,!0,!1,!0,!1):d5(t)?w5(e,t,!0,!1,!0,!1):(f5(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Ou(e,t,r,i){const s=r?3:2;if(!t.length||!t[0].length)return null;let o,c,f,w,[v,_]=t[0][0],[$,I]=t[0][0];for(let k=0;k<t.length;k++){const N=t[k];for(let B=0;B<N.length;B++){const L=N[B],[ee,ae]=L;if(v=Yo(v,ee),_=Yo(_,ae),$=Ko($,ee),I=Ko(I,ae),r&&L.length>2){const he=L[2];o=Yo(o,he),c=Ko(c,he)}if(i&&L.length>s){const he=L[s];f=Yo(o,he),w=Ko(c,he)}}}return r?i?(e[0]=v,e[1]=_,e[2]=o,e[3]=f,e[4]=$,e[5]=I,e[6]=c,e[7]=w,e.length=8,e):(e[0]=v,e[1]=_,e[2]=o,e[3]=$,e[4]=I,e[5]=c,e.length=6,e):i?(e[0]=v,e[1]=_,e[2]=f,e[3]=$,e[4]=I,e[5]=w,e.length=6,e):(e[0]=v,e[1]=_,e[2]=$,e[3]=I,e.length=4,e)}function w5(e,t,r,i,s,o){const c=t.xmin,f=t.xmax,w=t.ymin,v=t.ymax;let _=t.zmin,$=t.zmax,I=t.mmin,k=t.mmax;return s?(_=_||0,$=$||0,o?(I=I||0,k=k||0,e[0]=c,e[1]=w,e[2]=_,e[3]=I,e[4]=f,e[5]=v,e[6]=$,e[7]=k,e):(e[0]=c,e[1]=w,e[2]=_,e[3]=f,e[4]=v,e[5]=$,e)):o?(I=I||0,k=k||0,e[0]=c,e[1]=w,e[2]=I,e[3]=f,e[4]=v,e[5]=k,e):(e[0]=c,e[1]=w,e[2]=f,e[3]=v,e)}function iv(e,t,r,i,s,o){const c=r?3:2,f=i&&o,w=r&&s;if(!t.length||!t[0].length)return null;let v,_,$,I,[k,N]=t[0],[B,L]=t[0];for(let ee=0;ee<t.length;ee++){const ae=t[ee],[he,ye]=ae;if(k=Yo(k,he),N=Yo(N,ye),B=Ko(B,he),L=Ko(L,ye),w&&ae.length>2){const ge=ae[2];v=Yo(v,ge),_=Ko(_,ge)}if(f&&ae.length>c){const ge=ae[c];$=Yo(v,ge),I=Ko(_,ge)}}return s?(v=v||0,_=_||0,o?($=$||0,I=I||0,e[0]=k,e[1]=N,e[2]=v,e[3]=$,e[4]=B,e[5]=L,e[6]=_,e[7]=I,e):(e[0]=k,e[1]=N,e[2]=v,e[3]=B,e[4]=L,e[5]=_,e)):o?($=$||0,I=I||0,e[0]=k,e[1]=N,e[2]=$,e[3]=B,e[4]=L,e[5]=I,e):(e[0]=k,e[1]=N,e[2]=B,e[3]=L,e)}function tL(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function rL(e){return e.points!==void 0}function iL(e){return e.x!==void 0&&e.y!==void 0}function sL(e){return e.paths!==void 0}function nL(e){return e.rings!==void 0}const sv=[];function b5(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function v5(e,t,r,i,s,o){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:s,zmax:o}}function S5(e,t,r,i,s,o){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:s,mmax:o}}function _5(e,t,r,i,s,o,c,f){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:s,ymax:o,zmax:c,mmax:f}}function nv(e,t=!1,r=!1){return t?r?_5(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):v5(e[0],e[1],e[2],e[3],e[4],e[5]):r?S5(e[0],e[1],e[2],e[3],e[4],e[5]):b5(e[0],e[1],e[2],e[3])}function TX(e){return e?tL(e)?e:iL(e)?aL(e):nL(e)?E5(e):sL(e)?x5(e):rL(e)?oL(e):null:null}function oL(e){const{hasZ:t,hasM:r,points:i}=e;return nv(iv(sv,i,t??!1,r??!1),t,r)}function aL(e){const{x:t,y:r,z:i,m:s}=e,o=s!=null;return i!=null?o?_5(t,r,i,s,t,r,i,s):v5(t,r,i,t,r,i):o?S5(t,r,s,t,r,s):b5(t,r,t,r)}function E5(e){const{hasZ:t,hasM:r,rings:i}=e,s=Ou(sv,i,t??!1,r??!1);return s?nv(s,t,r):null}function x5(e){const{hasZ:t,hasM:r,paths:i}=e,s=Ou(sv,i,t??!1,r??!1);return s?nv(s,t,r):null}var Qd;function $_(e){return!Array.isArray(e[0])}function lL(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function AL(e){var o,c;if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),lL(t)&&(t=[t]),(c=(o=t[0])==null?void 0:o[0])==null?void 0:c.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=ke.WGS84),{...e,hasM:r,hasZ:i,rings:t,spatialReference:s}}let Qr=Qd=class extends ii{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,s=!1;for(const c of t)c.hasZ&&(i=!0),c.hasM&&(s=!0);const o={rings:t.map((c=>{const f=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(i&&c.hasZ){const w=c.zmin+.5*(c.zmax-c.zmin);for(let v=0;v<f.length;v++)f[v].push(w)}if(s&&c.hasM){const w=c.mmin+.5*(c.mmax-c.mmin);for(let v=0;v<f.length;v++)f[v].push(w)}return f})),spatialReference:r};return i&&(o.hasZ=!0),s&&(o.hasM=!0),new Qd(o)}constructor(e){super(AL(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Vj(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new gt;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=q(e)}get extent(){const e=E5(this),{spatialReference:t}=this;return e?new ct({...e,spatialReference:t}):null}get isSelfIntersecting(){return _7(xe.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),Fj(this.rings)}writeRings(e,t){t.rings=q(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if($_(e)){const i=[];for(let s=0,o=e.length;s<o;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new Qd;return e.spatialReference=this.spatialReference,e.rings=q(this.rings),e.curveRings=q(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([s,o,c,f],[w,v,_,$])=>s===w&&o===v&&(c==null&&_==null||c===_)&&(f==null&&$==null||f===$);for(let s=0;s<this.rings.length;s++){const o=this.rings[s],c=e.rings[s];if(!mf(o,c,i))return!1}return!0}contains(e){if(!e)return!1;const t=t5(e,this.spatialReference);return xj(this,t??e)}isClockwise(e){const t=$_(e)?e.map((r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y])):e;return A5(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new gt(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new gt(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new gt(r[0],r[1],r[2],r[3],this.spatialReference):new gt(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(ku(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new gt(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map((s=>new gt(s,r)));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(ku(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([y({readOnly:!0})],Qr.prototype,"cache",null),u([y({readOnly:!0})],Qr.prototype,"centroid",null),u([y({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Qr.prototype,"curveRings",void 0),u([me("curveRings")],Qr.prototype,"writeCurveRings",null),u([y({readOnly:!0})],Qr.prototype,"extent",null),u([y({readOnly:!0})],Qr.prototype,"isSelfIntersecting",null),u([y({type:[[[Number]]],json:{write:{isRequired:!0}}})],Qr.prototype,"rings",void 0),u([me("rings")],Qr.prototype,"writeRings",null),Qr=Qd=u([j("esri.geometry.Polygon")],Qr),Qr.prototype.toJSON.isDefaultToJSON=!0;var $1;function uL(e){return!Array.isArray(e[0])}function cL(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function pL(e){var o,c;if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),cL(t)&&(t=[t]),(c=(o=t[0])==null?void 0:o[0])==null?void 0:c.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=ke.WGS84),{...e,hasM:r,hasZ:i,paths:t,spatialReference:s}}let qi=$1=class extends ii{constructor(e){super(pL(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=q(e)}get extent(){const e=x5(this),{spatialReference:t}=this;return e?new ct({...e,spatialReference:t}):null}writePaths(e,t){t.paths=q(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(uL(e)){const i=[];for(let s=0,o=e.length;s<o;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new $1;return e.spatialReference=this.spatialReference,e.paths=q(this.paths),e.curvePaths=q(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new gt(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new gt(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new gt(r[0],r[1],r[2],r[3],this.spatialReference):new gt(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(ku(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map((s=>new gt(s,r)));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new gt(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(ku(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([y({readOnly:!0})],qi.prototype,"cache",null),u([y({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],qi.prototype,"curvePaths",void 0),u([me("curvePaths")],qi.prototype,"writeCurvePaths",null),u([y({readOnly:!0})],qi.prototype,"extent",null),u([y({type:[[[Number]]],json:{write:{isRequired:!0}}})],qi.prototype,"paths",void 0),u([me("paths")],qi.prototype,"writePaths",null),qi=$1=u([j("esri.geometry.Polyline")],qi),qi.prototype.toJSON.isDefaultToJSON=!0;function $5(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function T5(e){return e.points!==void 0}function I5(e){return e.x!==void 0&&e.y!==void 0}function M5(e){return e.paths!==void 0||e.curvePaths!==void 0}function mc(e){return e.rings!==void 0||e.curveRings!==void 0}function mp(e){return e==null?null:e instanceof ii?e:I5(e)?gt.fromJSON(e):M5(e)?qi.fromJSON(e):mc(e)?Qr.fromJSON(e):T5(e)?Fs.fromJSON(e):$5(e)?ct.fromJSON(e):null}function dL(e){return e?I5(e)?"esriGeometryPoint":M5(e)?"esriGeometryPolyline":mc(e)?"esriGeometryPolygon":$5(e)?"esriGeometryEnvelope":T5(e)?"esriGeometryMultipoint":null:null}const hL={esriGeometryPoint:gt,esriGeometryPolyline:qi,esriGeometryPolygon:Qr,esriGeometryEnvelope:ct,esriGeometryMultipoint:Fs,esriGeometryMultiPatch:Qr};function IX(e){return e&&hL[e]||null}const fL=Ur()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),T_=Ur()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),Qf={base:ii,key:"type",typeMap:{extent:ct,multipoint:Fs,point:gt,polyline:qi,polygon:Qr}};function MX(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const r=[];for(const i of t.fieldNames)r.push(e.attributes[i]??null);return JSON.stringify(r)}}}function yL(e,t){var r,i,s;if("uniqueIdFields"in t&&((r=t.uniqueIdFields)!=null&&r.length)){if(t.uniqueIdFields.length===1)return(i=e.attributes)==null?void 0:i[t.uniqueIdFields[0]];const o=t.uniqueIdFields.map((c=>{var f;return(f=e.attributes)==null?void 0:f[c]}));return JSON.stringify(o)}return"objectIdField"in t&&t.objectIdField?(s=e.attributes)==null?void 0:s[t.objectIdField]:null}const I_=new pt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let mL=0,ir=class extends se{constructor(t){super(t),this.id="sym"+mL++,this.type=null,this.color=new it([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([y({type:I_.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:I_.write,isRequired:!0}}})],ir.prototype,"type",void 0),u([y({type:it,json:{write:{allowNull:!0}}})],ir.prototype,"color",void 0),u([ce("color")],ir.prototype,"readColor",null),ir=u([j("esri.symbols.Symbol")],ir);var T1;let ai=T1=class extends ir{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map((o=>{const c=o.valueExpressionInfo;return c?tn(e,t,c.expression):null}));await Promise.all(s)}}}clone(){return new T1({data:q(this.data)})}hash(){return T$(JSON.stringify(this.data)).toString()}};u([y({json:{write:!1}})],ai.prototype,"color",void 0),u([y({json:{write:!0}})],ai.prototype,"data",void 0),u([ce("data",["symbol"])],ai.prototype,"readData",null),u([me("data",{})],ai.prototype,"writeData",null),u([Ce({CIMSymbolReference:"cim"},{readOnly:!0})],ai.prototype,"type",void 0),ai=T1=u([j("esri.symbols.CIMSymbol")],ai);function C5(e,t,r=st){return t||(t=new r),t===e||(t.removeAll(),gL(e)?t.addMany(e):e&&t.add(e)),t}function k5(e){return e}function gL(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Uo;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Uo||(Uo={}));let wL=class{constructor(){this._resolver=pa(),this._status=Uo.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=Uo.RESOLVED,this._cleanUp()}),(()=>{this._status=Uo.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Uo.RESOLVED}isRejected(){return this._status===Uo.REJECTED}isFulfilled(){return this._status!==Uo.PENDING}abort(){this._resolver.reject(Ir())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=pa(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then((()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()}),(s=>{this.isFulfilled()||this._allPromise!==i||Pn(s)||this._resolver.reject(s)})),t.resolve()}};const O5=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new wL,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then((()=>this)).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=u([j("esri.core.Promise")],t),t};let TA=class extends O5(Bt){};TA=u([j("esri.core.Promise")],TA),(function(e){e.EsriPromiseMixin=O5})(TA||(TA={}));const bL="not-loaded",vL="loading",SL="failed",M_="loaded",P5=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((i=>{const s=this.load.bind(this);this.load=o=>{const c=new Promise(((f,w)=>{const v=Q$(o,w);this.destroyed&&w(new re("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(f,w).finally((()=>{v&&v.remove()}))}));if(this.loadStatus===bL){this._set("loadStatus",vL);const f=this._loadController=new AbortController;s({signal:f.signal})}return i(),c}}))),this.when((()=>{this._set("loadStatus",M_),this._loadController=null}),(i=>{this._set("loadStatus",SL),this._set("loadError",i),this._loadController=null}))}destroy(){this._loadController&&(this._loadController=I$(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===M_}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new re("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return u([y({readOnly:!0})],t.prototype,"loaded",null),u([y({readOnly:!0})],t.prototype,"loadError",void 0),u([y({clonable:!1})],t.prototype,"loadStatus",void 0),u([y({type:[Mn],readOnly:!0})],t.prototype,"loadWarnings",null),t=u([j("esri.core.Loadable")],t),t};let Xo=class extends P5(TA){};Xo=u([j("esri.core.Loadable")],Xo),(function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=P5,e.isLoadable=t})(Xo||(Xo={}));let rd;function _L(e){return rd&&!rd.destroyed||(rd=e()),rd}var I1;const EL=new pt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let tr=I1=class extends Bt{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new I1({categories:this.categories?q(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map((c=>Array.isArray(c)?JSON.stringify(c):c)));let i="";if(this.extent){const c=t5(this.extent,ke.WGS84);c!=null&&(i=`${c.xmin},${c.ymin},${c.xmax},${c.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const o={categories:r,bbox:i,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map((c=>EL.toJSON(c.trim()))).join(","),o.sortOrder=this.sortOrder),{query:{...t,...o}}}};u([y()],tr.prototype,"categories",void 0),u([y()],tr.prototype,"disableExtraQuery",void 0),u([y({type:ct})],tr.prototype,"extent",void 0),u([y()],tr.prototype,"filter",void 0),u([y()],tr.prototype,"num",void 0),u([y()],tr.prototype,"query",void 0),u([y()],tr.prototype,"sortField",void 0),u([y()],tr.prototype,"sortOrder",null),u([y()],tr.prototype,"start",void 0),tr=I1=u([j("esri.portal.PortalQueryParams")],tr);var M1;let Xt=M1=class extends se{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then((t=>{const r=t.categorySchema||[];return r.some((i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas"))?this._fetchCategorySchemaSet("LivingAtlas",e):r}))}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new re("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new M1({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Br(tr,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new tr,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new tr,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then((i=>{const s=i.contentCategorySetsGroupQuery;if(s){const o=new tr({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(o,t)}throw new re("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((i=>{if(i.total){const s=i.results[0],o=new tr({num:1,query:`typekeywords:"${e}"`});return s.queryItems(o,t)}throw new re("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((i=>i.total?i.results[0].fetchData("json",t).then((s=>{const o=s==null?void 0:s.categorySchema;return o!=null&&o.length?o:[]})):[]))}};u([y()],Xt.prototype,"access",void 0),u([y({type:Date})],Xt.prototype,"created",void 0),u([y()],Xt.prototype,"description",void 0),u([y()],Xt.prototype,"id",void 0),u([y()],Xt.prototype,"isInvitationOnly",void 0),u([y({type:Date})],Xt.prototype,"modified",void 0),u([y()],Xt.prototype,"owner",void 0),u([y()],Xt.prototype,"portal",void 0),u([y()],Xt.prototype,"snippet",void 0),u([y()],Xt.prototype,"sortField",void 0),u([y()],Xt.prototype,"sortOrder",void 0),u([y()],Xt.prototype,"sourceJSON",void 0),u([y()],Xt.prototype,"tags",void 0),u([y()],Xt.prototype,"thumbnail",void 0),u([y({readOnly:!0})],Xt.prototype,"thumbnailUrl",null),u([y()],Xt.prototype,"title",void 0),u([y({readOnly:!0})],Xt.prototype,"url",null),Xt=M1=u([j("esri.portal.PortalGroup")],Xt);let za=class extends Bt{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([y()],za.prototype,"nextQueryParams",void 0),u([y()],za.prototype,"queryParams",void 0),u([y()],za.prototype,"results",void 0),u([y()],za.prototype,"total",void 0),za=u([j("esri.portal.PortalQueryResult")],za);let Un=class extends se{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new re("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([y({type:Date})],Un.prototype,"created",void 0),u([y()],Un.prototype,"id",void 0),u([y()],Un.prototype,"portal",void 0),u([y()],Un.prototype,"title",void 0),u([y({readOnly:!0})],Un.prototype,"url",null),u([y()],Un.prototype,"username",void 0),Un=u([j("esri.portal.PortalFolder")],Un);var C1;let Tt=C1=class extends se{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.id}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.id}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),r!=null&&(typeof r=="string"?s.query.text=r:typeof r=="object"&&(s.query.text=JSON.stringify(r))));let o=this.userContentUrl;return i&&(o+="/"+(typeof i=="string"?i:i.id)),this.portal.request(o+"/addItem",s).then((c=>(t.id=c.id,t.portal=this.portal,t.loaded?t.reload():t.load())))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],s=e.map((o=>o.id));if(s.length){const o={method:"post",query:{items:s.join(","),permanentDelete:t}},c=await this.portal.request(r,o);for(const f of c.results){const w=e.find(($=>f.itemId===$.id)),v=f.success;let _=null;v?(w.id=null,w.portal=null):f.error&&(_=new re("portal:delete-item-failed",f.error.message,f.error)),i.push({item:w,success:v,error:_})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then((t=>{let r;return r=t&&t.folders?t.folders.map((i=>{const s=Un.fromJSON(i);return s.portal=this.portal,s})):[],r}))}fetchGroups(){return this.portal.request(this.url??"").then((e=>{let t;return t=e&&e.groups?e.groups.map((r=>{const i=Xt.fromJSON(r);return i.portal=this.portal,i})):[],t}))}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await Pe(()=>Promise.resolve().then(()=>IC),void 0,import.meta.url),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:i});let o;return s!=null&&s.items?(o=s.items.map((c=>{const f=r.fromJSON(c);return f.portal=this.portal,f})),await Promise.all(o.map((c=>c.load()))),{items:o,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then((e=>e.tags))}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new Xt({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new re("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new re("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new C1({sourceJSON:e});return t.read(e),t}};u([y()],Tt.prototype,"access",void 0),u([y({type:Date})],Tt.prototype,"created",void 0),u([y()],Tt.prototype,"culture",void 0),u([y()],Tt.prototype,"description",void 0),u([y()],Tt.prototype,"email",void 0),u([y()],Tt.prototype,"favGroupId",void 0),u([y()],Tt.prototype,"fullName",void 0),u([y()],Tt.prototype,"id",void 0),u([y({type:Date})],Tt.prototype,"modified",void 0),u([y()],Tt.prototype,"orgId",void 0),u([y()],Tt.prototype,"portal",void 0),u([y()],Tt.prototype,"preferredView",void 0),u([y()],Tt.prototype,"privileges",void 0),u([y()],Tt.prototype,"region",void 0),u([y()],Tt.prototype,"role",void 0),u([y()],Tt.prototype,"roleId",void 0),u([y()],Tt.prototype,"sourceJSON",void 0),u([y()],Tt.prototype,"thumbnail",void 0),u([y({readOnly:!0})],Tt.prototype,"thumbnailUrl",null),u([y()],Tt.prototype,"units",void 0),u([y({readOnly:!0})],Tt.prototype,"userContentUrl",null),u([y({readOnly:!0})],Tt.prototype,"url",null),u([y()],Tt.prototype,"username",void 0),u([y()],Tt.prototype,"userLicenseTypeId",void 0),u([y()],Tt.prototype,"userType",void 0),Tt=C1=u([j("esri.portal.PortalUser")],Tt);var Li;let v0;const C_={PortalGroup:()=>Promise.resolve({default:Xt}),PortalItem:()=>Pe(()=>Promise.resolve().then(()=>IC),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:Tt})};var En;let le=(En=class extends se.JSONSupportMixin(Xo){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=xt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){k_.unregister(this),this.defaultBasemap=NA(this.defaultBasemap),this.defaultDevBasemap=NA(this.defaultDevBasemap),this.defaultVectorBasemap=NA(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Qs(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const r of t)xt.request.trustedServers.includes(r)||xt.request.trustedServers.push(r);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,r=!t||this.canSearchPublic;return this.id&&!r?` AND orgid:${this.id}`:null}get hasAPIKey(){return vN(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const r=t.indexOf("/sharing");t=r>0?t.slice(0,r):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,r=this.thumbnail;return t&&r?this._normalizeSSL(t+"/portals/self/resources/"+r):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let r=null;return t&&(r=Tt.fromJSON(t),r.portal=this),r}load(t){const r=Pe(()=>import("./Basemap-CVSeuFMT.js"),__vite__mapDeps([19,20,21]),import.meta.url).then((({default:i})=>{Xs(t),v0=i})).then((()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t))).then((i=>{var s;if(!this.hasAPIKey&&et){const o=et;this.credential=o.findCredential(this.restUrl),this.credential||this.authMode!==Li.AUTH_MODE_AUTO&&this.authMode!==Li.AUTH_MODE_NO_PROMPT||((s=this._esriIdCredentialCreateHandle)==null||s.remove(),this._esriIdCredentialCreateHandle=o.on("credential-create",xL(new WeakRef(this))),k_.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)}));return this.addResolvingPromise(r),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),r=(await Pe(async()=>{const{default:i}=await import("./ElevationLayer-CT3ZEWUr.js");return{default:i}},__vite__mapDeps([22,23,24,25,26,27,9]),import.meta.url)).default;return t?t.map((i=>new r({id:i.id,url:i.url}))):[]}async fetchBasemaps(t,r){const i=await this._fetchBasemaps(t,r);if((r==null?void 0:r.include3d)===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(t,r);i.unshift(...s)}return i}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const r=new tr;r.query=this.default3DBasemapQuery,r.disableExtraQuery=!0;const i=(await this.queryItems(r,t)).results.find((s=>s.type==="Web Scene"));return i?new v0({portalItem:i}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then((r=>r.categorySchema)):co(t)?Promise.reject(Ir()):Promise.resolve([])}async fetchClassificationSchema(t){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",t).then((r=>r.classificationSchema)):null}fetchFeaturedGroups(t){const r=this.featuredGroups,i=new tr({num:100,sortField:"title"});if(r!=null&&r.length){const s=[];for(const o of r)s.push(`(title:"${o.title}" AND owner:${o.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,t).then((o=>o.results))}return co(t)?Promise.reject(Ir()):Promise.resolve([])}fetchRegions(t){var i;const r=((i=this.user)==null?void 0:i.culture)||this.culture||Ws();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:r}})}fetchSettings(t){var i;const r=((i=this.user)==null?void 0:i.culture)||this.culture||Ws();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:r}})}static getDefault(){return _L((()=>new Li))}queryGroups(t,r){return this.queryPortal("/community/groups",t,"PortalGroup",r)}queryItems(t,r){return this.queryPortal("/search",t,"PortalItem",r)}queryUsers(t,r){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",r)}fetchSelf(t=this.authMode,r=!1,i){const s=this.restUrl+"/portals/self",o={authMode:t,query:{culture:Ws().toLowerCase()},withCredentials:!0,...i};return o.authMode==="auto"&&(o.authMode="no-prompt"),r&&(o.query.default=!0),this.request(s,o)}queryPortal(t,r,i,s){const o=Br(tr,r),c=f=>this.request(this.restUrl+t,{...o.toRequestOptions(this),...s}).then((w=>{const v=o.clone();return v.start=w.nextStart,new za({nextQueryParams:v,queryParams:o,total:w.total,results:Li._resultsToTypedArray(f,{portal:this},w,s)})})).then((w=>Promise.all(w.results.map((v=>typeof v.when=="function"?v.when():w))).then((()=>w),(v=>(vn(v),w)))));return i&&C_[i]?C_[i]().then((({default:f})=>(Xs(s),c(f)))):c()}signIn(){if(this.hasAPIKey)return this.load().then((()=>{if(!this.user)throw new re("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")}));if(this.authMode===Li.AUTH_MODE_ANONYMOUS||this.authMode===Li.AUTH_MODE_NO_PROMPT&&!et)return Promise.reject(new re("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=r=>Promise.resolve().then((()=>this.loadStatus==="not-loaded"?(r||(this.authMode="immediate"),this.load().then((()=>null))):this.loadStatus==="loading"?this.load().then((()=>this.credential?null:(this.credential=r,this.fetchSelf("immediate")))):this.user&&this.credential===r?null:(this.credential=r,this.fetchSelf("immediate")))).then((i=>{i&&(this.sourceJSON=i,this.read(i))}));return et?et.getCredential(this.restUrl,{prompt:this.authMode!==Li.AUTH_MODE_NO_PROMPT}).then((r=>t(r))):t(this.credential)}normalizeUrl(t){var i;const r=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(r?t+(t.includes("?")?"&":"?")+"token="+r:t)}requestToTypedArray(t,r,i){return this.request(t,r).then((s=>{const o=Li._resultsToTypedArray(i,{portal:this},s);return Promise.all(o.map((c=>typeof c.when=="function"?c.when():s))).then((()=>o),(()=>o))}))}request(t,r={}){const i={f:"json",...r.query},{authMode:s=this.authMode===Li.AUTH_MODE_ANONYMOUS||this.authMode===Li.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:o=null,cacheBust:c=!1,method:f="auto",responseType:w="json",signal:v}=r,_={authMode:s,body:o,cacheBust:c,method:f,query:i,responseType:w,timeout:0,signal:v};return r.withCredentials&&(_.withCredentials=!0),pr(this._normalizeSSL(t),_).then(($=>$.data))}toJSON(){throw new re("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Li({sourceJSON:t})}_getHelperService(t){const r=this.helperServices&&this.helperServices[t];if(!r)throw new re("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return r}async _fetchBasemaps(t,r){const i=new tr;i.query=t||(u_()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,r);if(!s.total)return[];const o=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=o.sortField||"name",i.sortOrder=o.sortOrder||"desc";const c=await o.queryItems(i,r);return c.total?c.results.filter((f=>f.type==="Web Map")).map((f=>new v0({portalItem:f}))):[]}async _fetchBasemaps3D(t,r){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];if(u_())return[];const s=new tr({query:i,disableExtraQuery:!0}),o=await this.queryGroups(s,r);if(!o.total)return[];const c=o.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=c.sortField||"name",s.sortOrder=c.sortOrder||"desc";const f=await c.queryItems(s,r);return f.total?f.results.filter((w=>w.type==="Web Scene")).map((w=>new v0({portalItem:w}))):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const r=v0.fromJSON(t);return r.portalItem={portal:this},r}return null}static _resultsToTypedArray(t,r,i,s){let o;if(i){const c=s!=null?s.signal:null;o=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||r)&&(o=o.map((f=>{const w=Object.assign(t?t.fromJSON(f):f,r);return typeof w.load=="function"&&w.load(c),w})))}else o=[];return o}},Li=En,En.AUTH_MODE_ANONYMOUS="anonymous",En.AUTH_MODE_AUTO="auto",En.AUTH_MODE_IMMEDIATE="immediate",En.AUTH_MODE_NO_PROMPT="no-prompt",En);u([y()],le.prototype,"access",void 0),u([y()],le.prototype,"allSSL",void 0),u([y()],le.prototype,"authMode",void 0),u([y()],le.prototype,"authorizedCrossOriginDomains",void 0),u([ce("authorizedCrossOriginDomains")],le.prototype,"readAuthorizedCrossOriginDomains",null),u([y()],le.prototype,"basemapGalleryGroupQuery",void 0),u([y({json:{name:"3DBasemapGalleryGroupQuery"}})],le.prototype,"basemapGalleryGroupQuery3D",void 0),u([y()],le.prototype,"bingKey",void 0),u([y()],le.prototype,"canListApps",void 0),u([y()],le.prototype,"canListData",void 0),u([y()],le.prototype,"canListPreProvisionedItems",void 0),u([y()],le.prototype,"canProvisionDirectPurchase",void 0),u([y()],le.prototype,"canSearchPublic",void 0),u([y()],le.prototype,"canShareBingPublic",void 0),u([y()],le.prototype,"canSharePublic",void 0),u([y()],le.prototype,"canSignInArcGIS",void 0),u([y()],le.prototype,"canSignInIDP",void 0),u([y()],le.prototype,"colorSetsGroupQuery",void 0),u([y()],le.prototype,"commentsEnabled",void 0),u([y({type:Date})],le.prototype,"created",void 0),u([y()],le.prototype,"credential",void 0),u([y()],le.prototype,"culture",void 0),u([y()],le.prototype,"currentVersion",void 0),u([y()],le.prototype,"customBaseUrl",void 0),u([y()],le.prototype,"default3DBasemapQuery",void 0),u([y()],le.prototype,"defaultBasemap",void 0),u([ce("defaultBasemap")],le.prototype,"readDefaultBasemap",null),u([y()],le.prototype,"defaultDevBasemap",void 0),u([ce("defaultDevBasemap")],le.prototype,"readDefaultDevBasemap",null),u([y({type:ct})],le.prototype,"defaultExtent",void 0),u([y()],le.prototype,"defaultVectorBasemap",void 0),u([ce("defaultVectorBasemap")],le.prototype,"readDefaultVectorBasemap",null),u([y()],le.prototype,"description",void 0),u([y()],le.prototype,"devBasemapGalleryGroupQuery",void 0),u([y()],le.prototype,"eueiEnabled",void 0),u([y({readOnly:!0})],le.prototype,"extraQuery",null),u([y()],le.prototype,"featuredGroups",void 0),u([y()],le.prototype,"featuredItemsGroupQuery",void 0),u([y()],le.prototype,"galleryTemplatesGroupQuery",void 0),u([y()],le.prototype,"layoutGroupQuery",void 0),u([y()],le.prototype,"livingAtlasGroupQuery",void 0),u([y({readOnly:!0})],le.prototype,"hasAPIKey",null),u([y()],le.prototype,"hasCategorySchema",void 0),u([y()],le.prototype,"hasClassificationSchema",void 0),u([y()],le.prototype,"helpBase",void 0),u([y()],le.prototype,"helperServices",void 0),u([y()],le.prototype,"helpMap",void 0),u([y()],le.prototype,"homePageFeaturedContent",void 0),u([y()],le.prototype,"homePageFeaturedContentCount",void 0),u([y()],le.prototype,"httpPort",void 0),u([y()],le.prototype,"httpsPort",void 0),u([y()],le.prototype,"id",void 0),u([y()],le.prototype,"ipCntryCode",void 0),u([y({readOnly:!0})],le.prototype,"isOrganization",null),u([y()],le.prototype,"isPortal",void 0),u([y()],le.prototype,"isReadOnly",void 0),u([y({readOnly:!0})],le.prototype,"itemPageUrl",null),u([y()],le.prototype,"layerTemplatesGroupQuery",void 0),u([y()],le.prototype,"maxTokenExpirationMinutes",void 0),u([y({type:Date})],le.prototype,"modified",void 0),u([y()],le.prototype,"name",void 0),u([y()],le.prototype,"portalHostname",void 0),u([y()],le.prototype,"portalMode",void 0),u([y()],le.prototype,"portalProperties",void 0),u([y()],le.prototype,"region",void 0),u([y()],le.prototype,"recycleBinEnabled",void 0),u([y({readOnly:!0})],le.prototype,"restUrl",null),u([y()],le.prototype,"rotatorPanels",void 0),u([y()],le.prototype,"showHomePageDescription",void 0),u([y()],le.prototype,"sourceJSON",void 0),u([y()],le.prototype,"staticImagesUrl",void 0),u([y({json:{name:"2DStylesGroupQuery"}})],le.prototype,"stylesGroupQuery2d",void 0),u([y({json:{name:"stylesGroupQuery"}})],le.prototype,"stylesGroupQuery3d",void 0),u([y()],le.prototype,"supportsHostedServices",void 0),u([y()],le.prototype,"symbolSetsGroupQuery",void 0),u([y()],le.prototype,"templatesGroupQuery",void 0),u([y()],le.prototype,"thumbnail",void 0),u([y({readOnly:!0})],le.prototype,"thumbnailUrl",null),u([y()],le.prototype,"units",void 0),u([y()],le.prototype,"url",void 0),u([y()],le.prototype,"urlKey",void 0),u([ce("urlKey")],le.prototype,"readUrlKey",null),u([y()],le.prototype,"user",void 0),u([ce("user")],le.prototype,"readUser",null),u([y()],le.prototype,"use3dBasemaps",void 0),u([y()],le.prototype,"useDefault3dBasemap",void 0),u([y()],le.prototype,"useStandardizedQuery",void 0),u([y()],le.prototype,"useVectorBasemaps",void 0),u([y()],le.prototype,"vectorBasemapGalleryGroupQuery",void 0),le=Li=u([j("esri.portal.Portal")],le);const k_=new FinalizationRegistry((e=>{e.remove()}));function xL(e){const t=et;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch((()=>{}))}}let bi=class extends se{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};u([y({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],bi.prototype,"enabled",void 0),u([me("enabled")],bi.prototype,"writeEnabled",null),u([y({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],bi.prototype,"type",void 0),bi=u([j("esri.symbols.Symbol3DLayer")],bi);const $L=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,TL="screenUtils.toPt: input not recognized!",D5=96;function IL(e){return e?e/72*D5:0}function gs(e){return e?72*e/D5:0}function ft(e){if(typeof e=="string"){const t=e.match($L);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",o=i==="px"?gs(r):r;return s?-o:o}return console.warn(TL),null}return e}function NX(e=0,t=0){return{x:e,y:t}}function ov(e){const t=ub(100*(1-e));return Math.max(0,Math.min(t,100))}function nf(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function ML(e,t){const r=t.transparency!=null?nf(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new it([i[0]||0,i[1]||0,i[2]||0,r]):null}function CL(e,t){t.color=e.toJSON().slice(0,3);const r=ov(e.a);r!==0&&(t.transparency=r)}function _a(e){return{type:it,nonNullable:e==null?void 0:e.nonNullable,json:{type:[Ct],default:null,read:{source:["color","transparency"],reader:ML},write:{target:{color:{type:[Ct],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:Ct}},writer:CL}}}}const On={type:Number,cast:ft,json:{write:!0}};var O_;(function(e){e[e.Emissive=0]="Emissive",e[e.Color=1]="Color"})(O_||(O_={}));let Va=class extends se{constructor(t){super(t),this.color=new it([0,0,0,1]),this.extensionLength=0,this.size=gs(1)}clone(){}cloneProperties(){return{color:q(this.color),size:this.size,extensionLength:this.extensionLength}}};u([y({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Va.prototype,"type",void 0),u([y(_a({colorRequiredOnWrite:!0}))],Va.prototype,"color",void 0),u([y({...On,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Va.prototype,"extensionLength",void 0),u([y(On)],Va.prototype,"size",void 0),Va=u([j("esri.symbols.edges.Edges3D")],Va);const av=Va;var k1;let Wd=k1=class extends av{constructor(e){super(e),this.type="sketch"}clone(){return new k1(this.cloneProperties())}};u([Ce({sketch:"sketch"},{readOnly:!0})],Wd.prototype,"type",void 0),Wd=k1=u([j("esri.symbols.edges.SketchEdges3D")],Wd);const kL=Wd;var O1;let Hd=O1=class extends av{constructor(e){super(e),this.type="solid"}clone(){return new O1(this.cloneProperties())}};u([Ce({solid:"solid"},{readOnly:!0})],Hd.prototype,"type",void 0),Hd=O1=u([j("esri.symbols.edges.SolidEdges3D")],Hd);const F5=Hd,R5={types:{key:"type",base:av,typeMap:{solid:F5,sketch:kL}},json:{write:!0}};var P1;let IA=P1=class extends se{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const e={strength:this.strength,source:this.source};return new P1(e)}};u([y({json:{write:!1}})],IA.prototype,"strength",void 0),u([y({json:{write:!1}})],IA.prototype,"source",void 0),IA=P1=u([j("esri.symbols.support.Symbol3DEmissive")],IA);var D1;let Hi=D1=class extends se{constructor(e){super(e),this.color=null,this.emissive=new IA({source:"emissive"})}clone(){var t,r;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissive:((r=this.emissive)==null?void 0:r.clone())??null};return new D1(e)}};u([y(_a())],Hi.prototype,"color",void 0),u([y({type:IA,json:{write:!1}})],Hi.prototype,"emissive",void 0),Hi=D1=u([j("esri.symbols.support.Symbol3DMaterial")],Hi);var F1,XA;let Hn=(XA=class extends bi{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var t,r;return new F1({edges:(t=this.edges)==null?void 0:t.clone(),enabled:this.enabled,material:(r=this.material)==null?void 0:r.clone(),castShadows:this.castShadows,size:this.size})}},F1=XA,XA);u([Ce({Extrude:"extrude"},{readOnly:!0})],Hn.prototype,"type",void 0),u([y({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Hn.prototype,"size",void 0),u([y({type:Hi,json:{write:!0}})],Hn.prototype,"material",void 0),u([y({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Hn.prototype,"castShadows",void 0),u([y(R5)],Hn.prototype,"edges",void 0),Hn=F1=u([j("esri.symbols.ExtrudeSymbol3DLayer")],Hn);let gc=class extends se{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([y({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],gc.prototype,"type",void 0),gc=u([j("esri.symbols.patterns.LinePattern3D")],gc);const OL=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var R1;const PL=Ur()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let ul=R1=class extends gc{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new R1(e)}};u([y({type:["style"],json:{write:{isRequired:!0}}})],ul.prototype,"type",void 0),u([Ce(PL),y({type:OL,json:{write:{isRequired:!0}}})],ul.prototype,"style",void 0),ul=R1=u([j("esri.symbols.patterns.LineStylePattern3D")],ul);let wc=class extends se{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([y({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],wc.prototype,"type",void 0),wc=u([j("esri.symbols.patterns.Pattern3D")],wc);const DL=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var N1;let MA=N1=class extends wc{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new N1({style:this.style})}};u([y({type:["style"],json:{write:{isRequired:!0}}})],MA.prototype,"type",void 0),u([y({type:DL,json:{read:!0,write:{isRequired:!0}}})],MA.prototype,"style",void 0),MA=N1=u([j("esri.symbols.patterns.StylePattern3D")],MA);const FL={types:{key:"type",base:wc,typeMap:{style:MA}},json:{write:!0}},N5={types:{key:"type",base:gc,typeMap:{style:ul}},json:{write:!0}},bc=new it("white"),RL=new it([255,255,255,0]);function NL(e){return e.r===0&&e.g===0&&e.b===0}var j1;let vc=j1=class extends Hi{constructor(e){super(e),this.colorMixMode=null}clone(){var t,r;const e={color:((t=this.color)==null?void 0:t.clone())??null,colorMixMode:this.colorMixMode,emissive:((r=this.emissive)==null?void 0:r.clone())??null};return new j1(e)}};u([Ce({multiply:"multiply",replace:"replace",tint:"tint"})],vc.prototype,"colorMixMode",void 0),vc=j1=u([j("esri.symbols.support.Symbol3DFillMaterial")],vc);function Qu(){return[0,0,0]}function jL(e){return[e[0],e[1],e[2]]}function Wu(e,t,r){return[e,t,r]}function LL(e,t,r){return[e,t,r]}function BL(e,t=Qu()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function j5(){return Qu()}function L5(){return Wu(1,1,1)}function B5(){return Wu(1,0,0)}function U5(){return Wu(0,1,0)}function z5(){return Wu(0,0,1)}const UL=j5(),zL=L5(),VL=B5(),GL=U5(),qL=z5();Object.freeze(Object.defineProperty({__proto__:null,ONES:zL,UNIT_X:VL,UNIT_Y:GL,UNIT_Z:qL,ZEROS:UL,clone:jL,create:Qu,freeze:LL,fromArray:BL,fromValues:Wu,ones:L5,unitX:B5,unitY:U5,unitZ:z5,zeros:j5},Symbol.toStringTag,{value:"Module"}));function QL(e,t=!1){return e<=b$?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function UX(e){return(k7(e)?e.byteLength/8:e.length)<=b$?Array.from(e):new Float64Array(e)}function zX(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function gp(e=KL){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function lv(e,t,r,i,s,o,c=gp()){return c[0]=e,c[1]=t,c[2]=r,c[3]=i,c[4]=s,c[5]=o,c}function VX(e,t=gp()){return WL(e,0,e.length/3,t)}function WL(e,t,r,i=gp()){return V5(i,L1),HL(i,e,t,r),i}function GX(e,t=QL(24)){const[r,i,s,o,c,f]=e;return t[0]=r,t[1]=i,t[2]=s,t[3]=r,t[4]=i,t[5]=f,t[6]=r,t[7]=c,t[8]=s,t[9]=r,t[10]=c,t[11]=f,t[12]=o,t[13]=i,t[14]=s,t[15]=o,t[16]=i,t[17]=f,t[18]=o,t[19]=c,t[20]=s,t[21]=o,t[22]=c,t[23]=f,t}function qX(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new ct(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function QX(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function WX(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function HL(e,t,r=0,i=t.length/3){let s=e[0],o=e[1],c=e[2],f=e[3],w=e[4],v=e[5];for(let _=0;_<i;_++)s=Math.min(s,t[r+3*_]),o=Math.min(o,t[r+3*_+1]),c=Math.min(c,t[r+3*_+2]),f=Math.max(f,t[r+3*_]),w=Math.max(w,t[r+3*_+1]),v=Math.max(v,t[r+3*_+2]);e[0]=s,e[1]=o,e[2]=c,e[3]=f,e[4]=w,e[5]=v}function JL(e){return e[0]>=e[3]?0:e[3]-e[0]}function ZL(e){return e[1]>=e[4]?0:e[4]-e[1]}function YL(e){return e[2]>=e[5]?0:e[5]-e[2]}function HX(e,t=[0,0,0]){return t[0]=JL(e),t[1]=ZL(e),t[2]=YL(e),t}function JX(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function ZX(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function V5(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function YX(e){return e?V5(e,L1):gp(L1)}function KX(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function XX(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function P_(e){return e.length===6}function eee(e,t,r){if(e==null||t==null)return e===t;if(!P_(e)||!P_(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const L1=[1/0,1/0,1/0,-1/0,-1/0,-1/0],KL=[0,0,0,0,0,0];gp();function tee(e,{isPrimitive:t,width:r,depth:i,height:s}){const o=Wu(r,i,s);let c;for(let f=0;f<3;f++){const w=o[f];if(w!=null){c=w/e[f];break}}for(let f=0;f<3;f++)o[f]==null&&(o[f]=e[f]*c);return o}const XL=lv(-.5,-.5,-.5,.5,.5,.5),eB=lv(-.5,-.5,0,.5,.5,1),tB=lv(-.5,-.5,0,.5,.5,.5);function ree(e){switch(e){case"sphere":case"cube":case"diamond":return XL;case"cylinder":case"cone":case"inverted-cone":return eB;case"tetrahedron":return tB;default:return}}const Av=["butt","square","round"],rB=[...Av,"none"],G5=["miter","bevel","round"];var B1;let Ga=B1=class extends se{constructor(e){super(e),this.color=new it([0,0,0,1]),this.size=gs(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new B1(e)}};u([y(_a({colorRequiredOnWrite:!0}))],Ga.prototype,"color",void 0),u([y({...On,json:{write:{isRequired:!0}}})],Ga.prototype,"size",void 0),u([y(N5)],Ga.prototype,"pattern",void 0),u([y({type:Av,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Ga.prototype,"patternCap",void 0),Ga=B1=u([j("esri.symbols.support.Symbol3DOutline")],Ga);var Jd,eu;let mi=(eu=class extends bi{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Jd(t)}static fromSimpleFillSymbol(t){var s,o,c;const r=t.outline&&t.outline.style&&t.outline.style!=="solid"?new ul({style:t.outline.style}):null,i={size:((s=t.outline)==null?void 0:s.width)??0,color:(((o=t.outline)==null?void 0:o.color)??bc).clone(),pattern:r};return r&&((c=t.outline)!=null&&c.cap)&&(i.patternCap=t.outline.cap),new Jd({material:new vc({color:(t.color??RL).clone()}),pattern:t.style&&t.style!=="solid"?new MA({style:t.style}):null,outline:i})}},Jd=eu,eu);u([Ce({Fill:"fill"},{readOnly:!0})],mi.prototype,"type",void 0),u([y({type:vc,json:{write:!0}})],mi.prototype,"material",void 0),u([y(FL)],mi.prototype,"pattern",void 0),u([y({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],mi.prototype,"castShadows",void 0),u([y({type:Ga,json:{write:!0}})],mi.prototype,"outline",void 0),u([y(R5)],mi.prototype,"edges",void 0),mi=Jd=u([j("esri.symbols.FillSymbol3DLayer")],mi);var U1;const iB=Ur()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let qa=U1=class extends se{constructor(e){super(e)}readHref(e,t,r){return e?qu(e,r):t.dataURI}writeHref(e,t,r,i){e&&(Dl(e)?t.dataURI=e:(t.href=dp(e,i),Xi(t.href)&&(t.href=Js(t.href))))}clone(){return new U1({href:this.href,primitive:this.primitive})}};u([y({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],qa.prototype,"href",void 0),u([ce("href")],qa.prototype,"readHref",null),u([me("href",{href:{type:String},dataURI:{type:String}})],qa.prototype,"writeHref",null),u([Ce(iB)],qa.prototype,"primitive",void 0),qa=U1=u([j("esri.symbols.support.IconSymbol3DLayerResource")],qa);const iee="circle";var z1;let CA=z1=class extends Bt{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new z1({x:this.x,y:this.y})}};u([y({type:Number})],CA.prototype,"x",void 0),u([y({type:Number})],CA.prototype,"y",void 0),CA=z1=u([j("esri.symbols.support.Symbol3DAnchorPosition2D")],CA);var V1;let q0=V1=class extends se{constructor(e){super(e),this.color=new it([0,0,0,1]),this.size=gs(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new V1(e)}};u([y(_a({colorRequiredOnWrite:!0}))],q0.prototype,"color",void 0),u([y({...On,json:{write:{isRequired:!0}}})],q0.prototype,"size",void 0),q0=V1=u([j("esri.symbols.support.Symbol3DIconOutline")],q0);var aA,tu;let Wr=(tu=class extends bi{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new aA({anchor:this.anchor,anchorPosition:q(this.anchorPosition),enabled:this.enabled,material:q(this.material),outline:q(this.outline),resource:q(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(t){const r=t.color||bc,i=D_(t),s=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||bc).clone()}:null;return new aA({size:t.size,angle:t.angle,resource:{primitive:nB((()=>xe.getLogger(this.prototype)),t.style)},material:{color:r},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const r=!t.color||NL(t.color)?bc:t.color,i=D_(t);return new aA({size:t.width<=t.height?t.height:t.width,angle:t.angle,resource:{href:t.url},material:{color:r.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new aA({resource:{href:vT({mediaType:"application/json",data:JSON.stringify(t.data)})}})}},aA=tu,tu);function D_(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=F_(e.xoffset),s=F_(e.yoffset);return(i||s)&&t&&r?{x:-i/t,y:s/r}:null}function F_(e){return isFinite(e)?e:0}u([y({type:Hi,json:{write:!0}})],Wr.prototype,"material",void 0),u([y({type:qa,json:{write:!0}})],Wr.prototype,"resource",void 0),u([Ce({Icon:"icon"},{readOnly:!0})],Wr.prototype,"type",void 0),u([y({...On,json:{write:{isRequired:!0}}})],Wr.prototype,"size",void 0),u([Ce({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Wr.prototype,"anchor",void 0),u([y({type:CA,json:{type:[Number],read:{reader:e=>new CA({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Wr.prototype,"anchorPosition",void 0),u([y({type:q0,json:{write:!0}})],Wr.prototype,"outline",void 0),u([y({type:Number,json:{write:!0,default:0}})],Wr.prototype,"angle",void 0),Wr=aA=u([j("esri.symbols.IconSymbol3DLayer")],Wr);const sB={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function nB(e,t){return sB[t]||(e().warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const oB=["begin","end","begin-end"],q5=["arrow","circle","square","diamond","cross","x"];let io=class extends nt.ClonableMixin(se){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};u([y({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],io.prototype,"type",void 0),u([y({type:oB,json:{default:"begin-end",write:!0}})],io.prototype,"placement",void 0),u([y({type:q5,json:{default:"arrow",write:!0}})],io.prototype,"style",void 0),u([y({type:it,json:{type:[Ct],default:null,write:!0}})],io.prototype,"color",void 0),io=u([j("esri.symbols.LineStyleMarker3D")],io);var Zd,ru;let yi=(ru=class extends bi{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=gs(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Zd(t)}static fromSimpleLineSymbol(t){var i;const r={enabled:!0,size:t.width??gs(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new ul({style:t.style}):null,material:new Hi({color:(t.color||bc).clone()}),marker:t.marker?new io({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new Zd(r)}},Zd=ru,ru);u([y({type:Hi,json:{write:!0}})],yi.prototype,"material",void 0),u([Ce({Line:"line"},{readOnly:!0})],yi.prototype,"type",void 0),u([y({type:G5,json:{write:!0,default:"miter"}})],yi.prototype,"join",void 0),u([y({type:Av,json:{write:!0,default:"butt"}})],yi.prototype,"cap",void 0),u([y({...On,json:{write:{isRequired:!0}}})],yi.prototype,"size",void 0),u([y(N5)],yi.prototype,"pattern",void 0),u([y({types:{key:"type",base:io,typeMap:{style:io}},json:{write:!0}})],yi.prototype,"marker",void 0),yi=Zd=u([j("esri.symbols.LineSymbol3DLayer")],yi);var G1;const aB=Ur()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Q0=G1=class extends se{clone(){return new G1({href:this.href,primitive:this.primitive})}};u([y({type:String,json:{read:Jb,write:_l}})],Q0.prototype,"href",void 0),u([Ce(aB)],Q0.prototype,"primitive",void 0),Q0=G1=u([j("esri.symbols.support.ObjectSymbol3DLayerResource")],Q0);const nee="sphere";var q1;let sl=q1=class extends Bt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new q1({x:this.x,y:this.y,z:this.z})}};u([y({type:Number})],sl.prototype,"x",void 0),u([y({type:Number})],sl.prototype,"y",void 0),u([y({type:Number})],sl.prototype,"z",void 0),sl=q1=u([j("esri.symbols.support.Symbol3DAnchorPosition3D")],sl);var Q1,iu;let Rr=(iu=class extends bi{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,r,i;return new Q1({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((r=this.material)==null?void 0:r.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},Q1=iu,iu);u([y({type:Hi,json:{write:!0}})],Rr.prototype,"material",void 0),u([y({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Rr.prototype,"castShadows",void 0),u([y({type:Q0,json:{write:!0}})],Rr.prototype,"resource",void 0),u([Ce({Object:"object"},{readOnly:!0})],Rr.prototype,"type",void 0),u([y({type:Number,json:{write:!0}})],Rr.prototype,"width",void 0),u([y({type:Number,json:{write:!0}})],Rr.prototype,"height",void 0),u([y({type:Number,json:{write:!0}})],Rr.prototype,"depth",void 0),u([Ce({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Rr.prototype,"anchor",void 0),u([y({type:sl,json:{type:[Number],read:{reader:e=>new sl({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Rr.prototype,"anchorPosition",void 0),u([y({type:Number,json:{write:!0}})],Rr.prototype,"heading",void 0),u([y({type:Number,json:{write:!0}})],Rr.prototype,"tilt",void 0),u([y({type:Number,json:{write:!0}})],Rr.prototype,"roll",void 0),u([y({readOnly:!0})],Rr.prototype,"isPrimitive",null),Rr=Q1=u([j("esri.symbols.ObjectSymbol3DLayer")],Rr);var W1,su;let qr=(su=class extends bi{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,r){return t??(r.height==null&&r.size!=null?r.size:void 0)}readHeight(t,r){return t??(r.width==null&&r.size!=null?r.size:void 0)}clone(){return new W1({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},W1=su,su);u([y({type:Hi,json:{write:!0}})],qr.prototype,"material",void 0),u([y({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qr.prototype,"castShadows",void 0),u([Ce({Path:"path"},{readOnly:!0})],qr.prototype,"type",void 0),u([y({type:["circle","quad"],json:{write:!0,default:"circle"}})],qr.prototype,"profile",void 0),u([y({type:G5,json:{write:!0,default:"miter"}})],qr.prototype,"join",void 0),u([y({type:rB,json:{write:!0,default:"butt"}})],qr.prototype,"cap",void 0),u([y({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],qr.prototype,"width",void 0),u([ce("width",["width","size","height"])],qr.prototype,"readWidth",null),u([y({type:Number,json:{write:!0}})],qr.prototype,"height",void 0),u([ce("height",["height","size","width"])],qr.prototype,"readHeight",null),u([y({type:["center","bottom","top"],json:{write:!0,default:"center"}})],qr.prototype,"anchor",void 0),u([y({type:["heading","all"],json:{write:!0,default:"all"}})],qr.prototype,"profileRotation",void 0),qr=W1=u([j("esri.symbols.PathSymbol3DLayer")],qr);const lB=["none","underline","line-through"],AB=["normal","italic","oblique"],uB=["normal","lighter","bold","bolder"],Q5={type:Number,cast:e=>{const t=Nu(e);return t===0?1:pp(t,.1,4)},nonNullable:!0},cB=["left","right","center"],pB=["baseline","top","middle","bottom"],W5={type:cB,nonNullable:!0},H5={type:pB,nonNullable:!0};var H1;let cs=H1=class extends se{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return ft(e)}clone(){return new H1({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([y({type:lB,json:{default:"none",write:!0}})],cs.prototype,"decoration",void 0),u([y({type:String,json:{write:!0}})],cs.prototype,"family",void 0),u([y({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],cs.prototype,"size",void 0),u([Yt("size")],cs.prototype,"castSize",null),u([y({type:AB,json:{default:"normal",write:!0}})],cs.prototype,"style",void 0),u([y({type:uB,json:{default:"normal",write:!0}})],cs.prototype,"weight",void 0),cs=H1=u([j("esri.symbols.Font")],cs);var J1;let kA=J1=class extends se{constructor(){super(...arguments),this.color=new it([0,0,0,1]),this.size=0}clone(){const e={color:q(this.color),size:this.size};return new J1(e)}};u([y(_a())],kA.prototype,"color",void 0),u([y(On)],kA.prototype,"size",void 0),kA=J1=u([j("esri.symbols.support.Symbol3DHalo")],kA);let Sc=class extends nt.ClonableMixin(se){constructor(t){super(t),this.color=null}};u([y(_a())],Sc.prototype,"color",void 0),Sc=u([j("esri.symbols.support.Symbol3DTextBackground")],Sc);var Yd,nu;let Er=(nu=class extends bi{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,r,i,s){const o={...s,textSymbol3D:!0};r.font=t.write({},o),delete r.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new Yd({enabled:this.enabled,font:this.font&&q(this.font),halo:this.halo&&q(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:q(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new Yd({font:t.font!=null?t.font.clone():new cs,halo:dB(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Hi({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new Sc({color:t.backgroundColor.clone()}):null})}},Yd=nu,nu);function dB(e,t){return e&&t!=null&&t>0?new kA({color:q(e),size:t}):null}u([y({type:cs,json:{write:!0}})],Er.prototype,"font",null),u([me("font")],Er.prototype,"writeFont",null),u([y({type:kA,json:{write:!0}})],Er.prototype,"halo",void 0),u([y({...W5,json:{default:"center",write:!0}})],Er.prototype,"horizontalAlignment",void 0),u([y({...Q5,json:{default:1,write:!0}})],Er.prototype,"lineHeight",void 0),u([y({type:Hi,json:{write:!0}})],Er.prototype,"material",void 0),u([y({type:Sc,json:{write:!0}})],Er.prototype,"background",void 0),u([y(On)],Er.prototype,"size",null),u([y({type:String,json:{write:!0}})],Er.prototype,"text",void 0),u([Ce({Text:"text"},{readOnly:!0})],Er.prototype,"type",void 0),u([y({...H5,json:{default:"baseline",write:!0}})],Er.prototype,"verticalAlignment",void 0),Er=Yd=u([j("esri.symbols.TextSymbol3DLayer")],Er);var Z1,ou;let Jn=(ou=class extends bi{constructor(t){super(t),this.color=Y1.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Z1({color:q(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},Z1=ou,ou);u([y({type:it,nonNullable:!0,json:{type:[Ct],write:(e,t,r)=>t[r]=e.toArray(it.AlphaMode.UNLESS_OPAQUE),default:()=>Y1.clone(),defaultEquals:e=>e.toCss(!0)===Y1.toCss(!0)}})],Jn.prototype,"color",void 0),u([Ce({Water:"water"},{readOnly:!0})],Jn.prototype,"type",void 0),u([y({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Jn.prototype,"waterbodySize",void 0),u([y({type:Number,json:{write:!0,default:null}})],Jn.prototype,"waveDirection",void 0),u([y({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Jn.prototype,"waveStrength",void 0),Jn=Z1=u([j("esri.symbols.WaterSymbol3DLayer")],Jn);const Y1=new it([0,119,190]);var K1;let so=K1=class extends Bt{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new K1({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([y({type:String})],so.prototype,"name",void 0),u([y({type:String})],so.prototype,"styleUrl",void 0),u([y({type:String})],so.prototype,"styleName",void 0),u([y({type:le})],so.prototype,"portal",void 0),so=K1=u([j("esri.symbols.support.StyleOrigin")],so);var X1;let _c=X1=class extends Bt{constructor(){super(...arguments),this.url=""}clone(){return new X1({url:this.url})}};u([y({type:String})],_c.prototype,"url",void 0),_c=X1=u([j("esri.symbols.support.Thumbnail")],_c);const J5={icon:Wr,object:Rr,line:yi,path:qr,fill:mi,extrude:Hn,text:Er,water:Jn},hB=st.ofType({base:bi,key:"type",typeMap:J5,errorContext:"symbol-layer"});let Oi=class extends ir{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,s=i||st;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&xe.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){C5(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const s=qu(t.styleUrl,i);return new so({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new so({portal:(i==null?void 0:i.portal)||le.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new Mn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,s){if(t.styleUrl&&t.name){let o=dp(t.styleUrl,s);Xi(o)&&(o=Js(o)),r.styleOrigin={styleUrl:o,name:t.name}}else t.styleName&&t.name&&(t.portal&&(s!=null&&s.portal)&&!bT(t.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new Mn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof bi||t&&J5[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};u([y({json:{read:!1,write:!1}})],Oi.prototype,"color",null),u([y({type:hB,nonNullable:!0,json:{write:!0}}),Yt(k5)],Oi.prototype,"symbolLayers",null),u([y({type:so})],Oi.prototype,"styleOrigin",void 0),u([ce("styleOrigin")],Oi.prototype,"readStyleOrigin",null),u([me("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Oi.prototype,"writeStyleOrigin",null),u([y({type:_c,json:{read:!1}})],Oi.prototype,"thumbnail",void 0),u([y({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Oi.prototype,"type",void 0),Oi=u([j("esri.symbols.Symbol3D")],Oi);let OA=class extends se{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([y({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],OA.prototype,"type",void 0),u([y({readOnly:!0})],OA.prototype,"visible",void 0),OA=u([j("esri.symbols.callouts.Callout3D")],OA);var eg;let Kd=eg=class extends se{constructor(e){super(e),this.color=new it("white")}clone(){return new eg({color:q(this.color)})}};u([y(_a({colorRequiredOnWrite:!0}))],Kd.prototype,"color",void 0),Kd=eg=u([j("esri.symbols.callouts.LineCallout3DBorder")],Kd);const fB=Kd;var tg;let Zn=tg=class extends OA{constructor(e){super(e),this.type="line",this.color=new it([0,0,0,1]),this.size=gs(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new tg({color:q(this.color),size:this.size,border:q(this.border)})}};u([Ce({line:"line"})],Zn.prototype,"type",void 0),u([y(_a({colorRequiredOnWrite:!0}))],Zn.prototype,"color",void 0),u([y({...On,json:{write:{isRequired:!0}}})],Zn.prototype,"size",void 0),u([y({type:fB,json:{write:!0}})],Zn.prototype,"border",void 0),u([y({readOnly:!0})],Zn.prototype,"visible",null),Zn=tg=u([j("esri.symbols.callouts.LineCallout3D")],Zn);function uv(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function Z5(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!uv(e)}const Y5={types:{key:"type",base:OA,typeMap:{line:Zn}},json:{write:!0}};var rg;let Wo=rg=class extends se{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new rg({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([y({...On,json:{write:{isRequired:!0}}})],Wo.prototype,"screenLength",void 0),u([y({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Wo.prototype,"minWorldLength",void 0),u([y({type:Number,json:{write:!0}})],Wo.prototype,"maxWorldLength",void 0),Wo=rg=u([j("esri.symbols.support.Symbol3DVerticalOffset")],Wo);var Xd;const K5=st.ofType({base:null,key:"type",typeMap:{text:Er}});let Rs=Xd=class extends Oi{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new K5,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Z5(this)}hasVisibleVerticalOffset(){return uv(this)}clone(){return new Xd({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail),callout:q(this.callout),verticalOffset:q(this.verticalOffset)})}static fromTextSymbol(e){return new Xd({symbolLayers:new st([Er.fromTextSymbol(e)])})}};u([y({type:Wo,json:{write:!0}})],Rs.prototype,"verticalOffset",void 0),u([y(Y5)],Rs.prototype,"callout",void 0),u([y({json:{read:!1,write:!1}})],Rs.prototype,"styleOrigin",void 0),u([y({type:K5})],Rs.prototype,"symbolLayers",void 0),u([Ce({LabelSymbol3D:"label-3d"},{readOnly:!0})],Rs.prototype,"type",void 0),Rs=Xd=u([j("esri.symbols.LabelSymbol3D")],Rs);var eh;const X5=st.ofType({base:null,key:"type",typeMap:{line:yi,path:qr}}),yB=st.ofType({base:null,key:"type",typeMap:{line:yi,path:qr}});let qs=eh=class extends Oi{constructor(e){super(e),this.symbolLayers=new X5,this.type="line-3d"}clone(){return new eh({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleLineSymbol(e){return new eh({symbolLayers:new st([yi.fromSimpleLineSymbol(e)])})}};u([y({type:X5,json:{type:yB}})],qs.prototype,"symbolLayers",void 0),u([Ce({LineSymbol3D:"line-3d"},{readOnly:!0})],qs.prototype,"type",void 0),qs=eh=u([j("esri.symbols.LineSymbol3D")],qs);var th;const eI=st.ofType({base:null,key:"type",typeMap:{fill:mi}});let ao=th=class extends Oi{constructor(e){super(e),this.symbolLayers=new eI,this.type="mesh-3d"}clone(){return new th({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleFillSymbol(e){return new th({symbolLayers:new st([mi.fromSimpleFillSymbol(e)])})}};u([y({type:eI})],ao.prototype,"symbolLayers",void 0),u([Ce({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],ao.prototype,"type",void 0),ao=th=u([j("esri.symbols.MeshSymbol3D")],ao);let W0=class extends ir{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([Ce({esriSLS:"simple-line"},{readOnly:!0})],W0.prototype,"type",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],W0.prototype,"width",void 0),W0=u([j("esri.symbols.LineSymbol")],W0);var ig;let un=ig=class extends se{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new ig({color:q(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};u([y({type:["begin","end","begin-end"],json:{write:!0}})],un.prototype,"placement",void 0),u([Ce({"line-marker":"line-marker"},{readOnly:!0}),y({json:{origins:{"web-map":{write:!1}}}})],un.prototype,"type",void 0),u([y({type:q5})],un.prototype,"style",void 0),u([me("style")],un.prototype,"writeStyle",null),u([y({type:it,value:null,json:{write:{allowNull:!0}}})],un.prototype,"color",null),u([ce("color")],un.prototype,"readColor",null),u([me("color")],un.prototype,"writeColor",null),un=ig=u([j("esri.symbols.LineSymbolMarker")],un);const mB=un;var sg;const Pm=new pt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let cr=sg=class extends W0{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,s,o){if(e&&typeof e!="string")return e;const c={};return e!=null&&(c.style=e),t!=null&&(c.color=t),r!=null&&(c.width=ft(r)),i!=null&&(c.cap=i),s!=null&&(c.join=s),o!=null&&(c.miterLimit=ft(o)),c}clone(){var e;return new sg({color:q(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};u([Ce({esriSLS:"simple-line"},{readOnly:!0})],cr.prototype,"type",void 0),u([y({type:Pm.apiValues,json:{read:Pm.read,write:Pm.write}})],cr.prototype,"style",void 0),u([y({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],cr.prototype,"cap",void 0),u([y({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],cr.prototype,"join",void 0),u([y({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":mB}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],cr.prototype,"marker",void 0),u([y({type:Number,json:{read:!1,write:!1}})],cr.prototype,"miterLimit",void 0),cr=sg=u([j("esri.symbols.SimpleLineSymbol")],cr);let PA=class extends ir{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};u([y({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":cr}},json:{default:null,write:!0}})],PA.prototype,"outline",void 0),u([y({type:["simple-fill","picture-fill"],readOnly:!0})],PA.prototype,"type",void 0),PA=u([j("esri.symbols.FillSymbol")],PA);function gB(e,t,r){return t.imageData?vT({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):tI(t.url,r)}function tI(e,t){if(!Xi(e)){const r=bB(t);if(r)return $u(r,"images",e)}return qu(e,t)}function wB(e,t,r,i){if(Dl(e)){const s=qc(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,r&&r.imageData===t.imageData&&r.url&&_l(r.url,t,"url",i)}else _l(e,t,"url",i)}const rI={json:{read:{source:["imageData","url"],reader:gB},write:{writer(e,t,r,i){wB(e,t,this.source,i)}}}},iI={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=tI(t.url,r)),i}}}};function bB(e){var s,o;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(s=r.parsedUrl)==null?void 0:s.path:i==="map-image"||i==="tile"?(o=e.url)==null?void 0:o.path:null}var ng;let ki=ng=class extends PA{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),r!=null&&(s.width=ft(r)),i!=null&&(s.height=ft(i)),s}clone(){const e=new ng({color:q(this.color),height:this.height,outline:q(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",q(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([Ce({esriPFS:"picture-fill"},{readOnly:!0})],ki.prototype,"type",void 0),u([y(rI)],ki.prototype,"url",void 0),u([y({type:Number,json:{write:!0}})],ki.prototype,"xscale",void 0),u([y({type:Number,json:{write:!0}})],ki.prototype,"yscale",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],ki.prototype,"width",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],ki.prototype,"height",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],ki.prototype,"xoffset",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],ki.prototype,"yoffset",void 0),u([y(iI)],ki.prototype,"source",void 0),ki=ng=u([j("esri.symbols.PictureFillSymbol")],ki);let Yn=class extends ir{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([y({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Yn.prototype,"angle",void 0),u([y({type:["simple-marker","picture-marker"],readOnly:!0})],Yn.prototype,"type",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],Yn.prototype,"xoffset",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],Yn.prototype,"yoffset",void 0),u([y({cast:e=>e==="auto"?e:Nu(ft(e)),json:{write:!0}})],Yn.prototype,"size",void 0),Yn=u([j("esri.symbols.MarkerSymbol")],Yn);var og;let fi=og=class extends Yn{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=ft(t)),r!=null&&(i.height=ft(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new og({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",q(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([y({json:{write:!1}})],fi.prototype,"color",void 0),u([Ce({esriPMS:"picture-marker"},{readOnly:!0})],fi.prototype,"type",void 0),u([y(rI)],fi.prototype,"url",void 0),u([y(iI)],fi.prototype,"source",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],fi.prototype,"height",void 0),u([ce("height",["height","size"])],fi.prototype,"readHeight",null),u([y({type:Number,cast:ft,json:{write:!0}})],fi.prototype,"width",void 0),u([y({json:{write:!1}})],fi.prototype,"size",void 0),fi=og=u([j("esri.symbols.PictureMarkerSymbol")],fi);var Qa;const sI=st.ofType({base:null,key:"type",typeMap:{icon:Wr,object:Rr,text:Er}});let gi=Qa=class extends Oi{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new sI,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Z5(this)}hasVisibleVerticalOffset(){return uv(this)}clone(){return new Qa({verticalOffset:q(this.verticalOffset),callout:q(this.callout),styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Qa({symbolLayers:new st([Wr.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Qa({symbolLayers:new st([Wr.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,s;if(((s=(i=e.data)==null?void 0:i.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new Qa(r!=null&&r.callout?{symbolLayers:new st([Wr.fromCIMSymbol(e)]),callout:new Zn({size:.5,color:new it([0,0,0])}),verticalOffset:new Wo({screenLength:40})}:{symbolLayers:new st([Wr.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Qa({symbolLayers:new st([Er.fromTextSymbol(e)])})}};u([y({type:Wo,json:{write:!0}})],gi.prototype,"verticalOffset",void 0),u([y(Y5)],gi.prototype,"callout",void 0),u([y({type:sI,json:{origins:{"web-scene":{write:!0}}}})],gi.prototype,"symbolLayers",void 0),u([Ce({PointSymbol3D:"point-3d"},{readOnly:!0})],gi.prototype,"type",void 0),gi=Qa=u([j("esri.symbols.PointSymbol3D")],gi);var H0;const nI=st.ofType({base:null,key:"type",typeMap:{extrude:Hn,fill:mi,icon:Wr,line:yi,object:Rr,text:Er,water:Jn}});let ms=H0=class extends Oi{constructor(e){super(e),this.symbolLayers=new nI,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Su(xe.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Su(xe.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(kR((()=>this.symbolLayers),"after-add",(({item:t})=>e(t)),jb))}clone(){return new H0({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromJSON(e){var r;const t=new H0;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new H0({symbolLayers:new st([mi.fromSimpleFillSymbol(e)])})}};u([y({type:nI,json:{write:!0}})],ms.prototype,"symbolLayers",void 0),u([Ce({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],ms.prototype,"type",void 0),ms=H0=u([j("esri.symbols.PolygonSymbol3D")],ms);var ag;const Dm=new pt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Wi=ag=class extends PA{constructor(...e){super(...e),this.color=new it([0,0,0,.25]),this.outline=new cr,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new ag({color:q(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([y()],Wi.prototype,"color",void 0),u([y()],Wi.prototype,"outline",void 0),u([Ce({esriSFS:"simple-fill"},{readOnly:!0})],Wi.prototype,"type",void 0),u([y({type:Dm.apiValues,json:{read:Dm.read,write:Dm.write}})],Wi.prototype,"style",void 0),Wi=ag=u([j("esri.symbols.SimpleFillSymbol")],Wi);var lg;const Fm=new pt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let xr=lg=class extends Yn{constructor(...e){super(...e),this.color=new it([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new cr}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=ft(t)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new lg({angle:this.angle,color:q(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};u([y()],xr.prototype,"color",void 0),u([me("color")],xr.prototype,"writeColor",null),u([Ce({esriSMS:"simple-marker"},{readOnly:!0})],xr.prototype,"type",void 0),u([y()],xr.prototype,"size",void 0),u([y({type:Fm.apiValues,json:{read:Fm.read,write:Fm.write}})],xr.prototype,"style",void 0),u([y({type:String,json:{write:!0}})],xr.prototype,"path",null),u([y({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":cr}},json:{default:null,write:!0}})],xr.prototype,"outline",void 0),xr=lg=u([j("esri.symbols.SimpleMarkerSymbol")],xr);var Ag;let It=Ag=class extends ir{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new cs,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return ft(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new Ag({angle:this.angle,backgroundColor:q(this.backgroundColor),borderLineColor:q(this.borderLineColor),borderLineSize:this.borderLineSize,color:q(this.color),font:this.font&&this.font.clone(),haloColor:q(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([y({type:it,json:{write:!0}})],It.prototype,"backgroundColor",void 0),u([y({type:it,json:{write:!0}})],It.prototype,"borderLineColor",void 0),u([y({type:Number,json:{write:!0},cast:ft})],It.prototype,"borderLineSize",void 0),u([y({type:cs,json:{write:!0}})],It.prototype,"font",void 0),u([y({...W5,json:{write:!0}})],It.prototype,"horizontalAlignment",void 0),u([y({type:Boolean,json:{write:!0}})],It.prototype,"kerning",void 0),u([y({type:it,json:{write:!0}})],It.prototype,"haloColor",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],It.prototype,"haloSize",void 0),u([y({type:Boolean,json:{write:!0}})],It.prototype,"rightToLeft",void 0),u([y({type:Boolean,json:{write:!0}})],It.prototype,"rotated",void 0),u([y({type:String,json:{write:!0}})],It.prototype,"text",void 0),u([Ce({esriTS:"text"},{readOnly:!0})],It.prototype,"type",void 0),u([y({...H5,json:{write:!0}})],It.prototype,"verticalAlignment",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],It.prototype,"xoffset",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],It.prototype,"yoffset",void 0),u([y({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],It.prototype,"angle",void 0),u([y({type:Number,json:{write:!0}})],It.prototype,"width",void 0),u([y({type:Number})],It.prototype,"lineWidth",void 0),u([me("lineWidth")],It.prototype,"writeLineWidth",null),u([Yt("lineWidth")],It.prototype,"castLineWidth",null),u([y(Q5)],It.prototype,"lineHeight",void 0),u([me("lineHeight")],It.prototype,"writeLineHeight",null),It=Ag=u([j("esri.symbols.TextSymbol")],It);var ug;let jr=ug=class extends ir{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:le.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new ug({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol(e)}async fetchCIMSymbol(e){p$(xe.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const t=await this._fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new re("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,r=t?this._fetchCacheKey:null;if(t!=null){const c=r&&t.get(r);if(c)return c.clone()}const{resolveWebStyleSymbol:i}=await Pe(()=>import("./webStyleSymbolUtils-IAPF11Mp.js"),__vite__mapDeps([28,29]),import.meta.url);Xs(e);const s=i(this,{portal:this.portal},e);s.catch((c=>{xe.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",c)}));const o=await s;return t!=null&&t.set(r,o.clone()),o}};u([y({json:{write:!1}})],jr.prototype,"color",void 0),u([y({type:String,json:{write:!0}})],jr.prototype,"styleName",void 0),u([y({type:le,json:{write:!1}})],jr.prototype,"portal",void 0),u([y({type:String,json:{read:Jb,write:_l}})],jr.prototype,"styleUrl",void 0),u([y({type:_c,json:{read:!1}})],jr.prototype,"thumbnail",void 0),u([y({type:String,json:{write:!0}})],jr.prototype,"name",void 0),u([Ce({styleSymbolReference:"web-style"},{readOnly:!0})],jr.prototype,"type",void 0),u([y()],jr.prototype,"_fetchCacheKey",null),jr=ug=u([j("esri.symbols.WebStyleSymbol")],jr);function pee(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function oI(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const ea={base:ir,key:"type",typeMap:{"simple-fill":Wi,"picture-fill":ki,"picture-marker":fi,"simple-line":cr,"simple-marker":xr,text:It,"label-3d":Rs,"line-3d":qs,"mesh-3d":ao,"point-3d":gi,"polygon-3d":ms,"web-style":jr,cim:ai},errorContext:"symbol"},dee={base:ir,key:"type",typeMap:{"picture-marker":fi,"simple-marker":xr,"point-3d":gi,cim:ai},errorContext:"symbol"},hee={base:ir,key:"type",typeMap:{"simple-line":cr,"line-3d":qs,cim:ai},errorContext:"symbol"},fee={base:ir,key:"type",typeMap:{"simple-fill":Wi,"picture-fill":ki,"polygon-3d":ms,cim:ai},errorContext:"symbol"},vB={base:ir,key:"type",typeMap:{"picture-marker":fi,"simple-marker":xr,text:It,"web-style":jr,cim:ai},errorContext:"symbol"},SB=ju({types:ea}),aI={base:ir,key:"type",typeMap:{"simple-fill":Wi,"picture-fill":ki,"picture-marker":fi,"simple-line":cr,"simple-marker":xr,text:It,"line-3d":qs,"mesh-3d":ao,"point-3d":gi,"polygon-3d":ms,"web-style":jr,cim:ai},errorContext:"symbol"},_B={base:ir,key:"type",typeMap:{text:It,"label-3d":Rs},errorContext:"symbol"},R_={base:ir,key:"type",typeMap:{"line-3d":qs,"mesh-3d":ao,"point-3d":gi,"polygon-3d":ms,"web-style":jr,cim:ai},errorContext:"symbol"},EB={base:ir,key:"type",typeMap:{"label-3d":Rs},errorContext:"symbol"},lI=In(ea);var cg;function xB(e){if(!e)return null;const t={};for(const r in e){const i=mp(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function $B(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}var au;let ur=(au=class extends nt.ClonableMixin(se){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:Td(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&E7(xe.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const r=this._get("aggregateGeometries");JSON.stringify(r)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const r=this._get("attributes");r!==t&&(this._set("attributes",t),this._notifyLayer("attributes",r,t))}set geometry(t){const r=this._get("geometry");r!==t&&(this._set("geometry",t),(t==null?void 0:t.type)!=="mesh"&&this._notifyLayer("geometry",r,t))}set popupTemplate(t){const r=this._get("popupTemplate");r!==t&&(this._set("popupTemplate",t),this._notifyLayer("popupTemplate",r,t))}set symbol(t){const r=this._get("symbol");r!==t&&(this._set("symbol",t),this._notifyLayer("symbol",r,t))}get version(){return this._version}set visible(t){const r=this._get("visible");r!==t&&(this._set("visible",t),this._notifyLayer("visible",r,t))}cloneShallow(){return new cg({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[r,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(t){var r;return(r=this.attributes)==null?void 0:r[t]}setAttribute(t,r){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=r,this._notifyLayer("attributes",i,r,t)}else this.attributes={[t]:r}}getObjectId(){const t=this.sourceLayer??this.layer;return t?yL(this,t):null}getGlobalId(){const t=this.sourceLayer??this.layer;return t&&"globalIdField"in t&&t.globalIdField?this.getAttribute(t.globalIdField):null}toJSON(){var t;return{aggregateGeometries:$B(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Lc(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyMeshTransformChanged(t={}){const{geometry:r}=this;if((r==null?void 0:r.type)==="mesh"){const i={origin:r.origin,transform:r.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,r,i,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const o={graphic:this,property:t,oldValue:r,newValue:i};t==="origin-transform"&&(o.action=s),t==="attributes"&&(o.attributeName=s),this.layer.graphicChanged(o)}_watchMeshGeometryChanges(){this.addHandles([o_((()=>{var t,r;return((t=this.geometry)==null?void 0:t.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(r=this.geometry.transform)==null?void 0:r.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0}),(({localMatrix:t,origin:r})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===r||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=r,this.notifyMeshTransformChanged())})),o_((()=>{var t;return((t=this.geometry)==null?void 0:t.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0}),(()=>{var r;const t=this.geometry;(t==null?void 0:t.type)==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(r=t.transform)==null?void 0:r.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)}),{equals:(t,r)=>t===r,sync:!0})])}},cg=au,au);u([y({value:null,json:{read:xB}})],ur.prototype,"aggregateGeometries",null),u([y({value:null})],ur.prototype,"attributes",null),u([y({value:null,types:Qf,json:{read:mp}})],ur.prototype,"geometry",null),u([y({type:Boolean})],ur.prototype,"isAggregate",void 0),u([y({clonable:!1})],ur.prototype,"layer",void 0),u([y({clonable:"reference"})],ur.prototype,"origin",void 0),u([y({type:Vu,value:null})],ur.prototype,"popupTemplate",null),u([y({clonable:"reference"})],ur.prototype,"sourceLayer",void 0),u([y({value:null,types:ea})],ur.prototype,"symbol",null),u([y({clonable:!1,json:{read:!1,write:!1}})],ur.prototype,"_version",void 0),u([y({type:Boolean,value:!0})],ur.prototype,"visible",null),ur=cg=u([j("esri.Graphic")],ur);let TB=class AI{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(A2),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new AI,i=this._originStores[tt.DEFAULTS];i&&i.forEach(((s,o)=>{r.set(o,q(s),tt.DEFAULTS)}));for(let s=tt.SERVICE;s<A2;s++){const o=this._originStores[s];o&&o.forEach(((c,f)=>{t&&t.has(f)||r.set(f,q(c),s)}))}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=tt.USER){let s=this._originStores[i];if(s||(s=new Map,this._originStores[i]=s),s.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const o=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),o!==r}return!1}delete(t,r=tt.USER){const i=this._originStores[r];if(!i)return;const s=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let o=r-1;o>=0;o--){const c=this._originStores[o];if(c&&c.has(t)){this._values.set(t,c.get(t)),this._propertyOriginMap.set(t,o);break}}}return s}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],s=i==null?void 0:i.get(t),o=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,r),o!==s}originOf(t){return this._propertyOriginMap.get(t)||tt.DEFAULTS}isAtOrigin(t,r){return this.has(t,r)&&this.originOf(t)===r}isBelowOrigin(t,r){return!this.has(t)||this.originOf(t)<r}forEach(t){this._values.forEach(t)}};const uI=e=>{let t=class extends e{constructor(...r){super(...r);const i=Si(this),s=i.store,o=new TB;i.store=o,g8(i,s,o)}read(r,i){b8(this,r,i)}getAtOrigin(r,i){const s=Rm(this),o=Zo(i);if(typeof r=="string")return s.get(r,o);const c={};return r.forEach((f=>{c[f]=s.get(f,o)})),c}originOf(r){return Rc(this.originIdOf(r))}originIdOf(r){return Rm(this).originOf(r)}revert(r,i){const s=Rm(this),o=Zo(i),c=Si(this);let f;f=typeof r=="string"?r==="*"?s.keys(o):[r]:r,f.forEach((w=>{c.invalidate(w),s.revert(w,o),c.commit(w)}))}};return t=u([j("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function Rm(e){return Si(e).store}let N_=class extends uI(Bt){};N_=u([j("esri.core.ReadOnlyMultiOriginJSONSupport")],N_);const IB=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){Si(this).clearOrigin(r,Zo(i))}write(r,i){return S8(this,r=r||{},i),r}setAtOrigin(r,i,s){Si(this).setAtOrigin(r,i,Zo(s))}removeOrigin(r){const i=j_(this),s=Zo(r),o=i.keys(s);for(const c of o)i.originOf(c)===s&&i.set(c,i.get(c,s),tt.USER)}updateOrigin(r,i){const s=j_(this),o=Zo(i),c=bl(this,r);for(let f=o+1;f<A2;++f)s.delete(r,f);s.set(r,c,o)}toJSON(r){return this.write({},r)}};return t=u([j("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function j_(e){return Si(e).store}const cI=e=>{let t=class extends IB(uI(e)){constructor(...r){super(...r)}};return t=u([j("esri.core.MultiOriginJSONSupport")],t),t};let L_=class extends cI(Bt){};L_=u([j("esri.core.MultiOriginJSONSupport")],L_);const Ft=(e=>e)(["operational-layers","basemap","ground"]);var pg;let Wa=pg=class extends se{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new pg({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([y({type:String,json:{write:!0}})],Wa.prototype,"expression",void 0),u([y({type:String,json:{write:!0}})],Wa.prototype,"name",void 0),u([y({type:["boolean","date","number","string"],json:{write:!0}})],Wa.prototype,"returnType",void 0),u([y({type:String,json:{write:!0}})],Wa.prototype,"title",void 0),Wa=pg=u([j("esri.form.ExpressionInfo")],Wa);const MB=Wa;let Ha=class extends se{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([y({type:String,json:{write:!0}})],Ha.prototype,"description",void 0),u([y({type:String,json:{write:!0}})],Ha.prototype,"label",void 0),u([y()],Ha.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],Ha.prototype,"visibilityExpression",void 0),Ha=u([j("esri.form.elements.Element")],Ha);const ma=Ha;let rh=class extends nt.ClonableMixin(se){constructor(t){super(t),this.type=null}};u([y()],rh.prototype,"type",void 0),rh=u([j("esri.form.elements.inputs.attachments.Input")],rh);const ga=rh,Wf=["any","capture","upload"];let lA=class extends ga{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};u([y({type:["audio"],readOnly:!0,json:{write:!0}})],lA.prototype,"type",void 0),u([y({type:Wf,json:{write:!0}})],lA.prototype,"inputMethod",void 0),u([y({type:Number,json:{write:!0}})],lA.prototype,"maxDuration",void 0),lA=u([j("esri.form.elements.inputs.attachments.AudioInput")],lA);const B_=lA;let J0=class extends ga{constructor(t){super(t),this.type="document",this.maxFileSize=null}};u([y({type:["document"],readOnly:!0,json:{write:!0}})],J0.prototype,"type",void 0),u([y({type:Number,json:{write:!0}})],J0.prototype,"maxFileSize",void 0),J0=u([j("esri.form.elements.inputs.attachments.DocumentInput")],J0);const U_=J0;let AA=class extends ga{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};u([y({type:["image"],readOnly:!0,json:{write:!0}})],AA.prototype,"type",void 0),u([y({type:Wf,json:{write:!0}})],AA.prototype,"inputMethod",void 0),u([y({type:Number,json:{write:!0}})],AA.prototype,"maxImageSize",void 0),AA=u([j("esri.form.elements.inputs.attachments.ImageInput")],AA);const z_=AA;let Z0=class extends ga{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};u([y({type:["signature"],readOnly:!0,json:{write:!0}})],Z0.prototype,"type",void 0),u([y({type:Wf,json:{write:!0}})],Z0.prototype,"inputMethod",void 0),Z0=u([j("esri.form.elements.inputs.attachments.SignatureInput")],Z0);const V_=Z0;let uA=class extends ga{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};u([y({type:["video"],readOnly:!0,json:{write:!0}})],uA.prototype,"type",void 0),u([y({type:Wf,json:{write:!0}})],uA.prototype,"inputMethod",void 0),u([y({type:Number,json:{write:!0}})],uA.prototype,"maxDuration",void 0),uA=u([j("esri.form.elements.inputs.attachments.VideoInput")],uA);const G_=uA;function pI(e){return{nestableTypes:{base:ga,key:"type",typeMap:{audio:B_,document:U_,image:z_,signature:V_,video:G_}},allTypes:{base:ga,key:"type",typeMap:{attachment:e,audio:B_,document:U_,image:z_,signature:V_,video:G_}}}}function CB(e,t,r){return e?e.map((i=>In(t.nestableTypes,i))):null}function kB(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter((s=>i[s.type])).map((s=>i[s.type].fromJSON(s)))}function OB(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter((s=>i[s.type])).map((s=>s.toJSON()))}let hn=class extends ga{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return CB(t,Nm)}readInputs(t,r){return kB(r.inputTypes,Nm)}writeInputs(t,r){r.inputTypes=OB(t,Nm)}};u([y({type:["attachment"],readOnly:!0,json:{write:!0}})],hn.prototype,"type",void 0),u([y({type:["any","exact","exactOrNone"],json:{write:!0}})],hn.prototype,"attachmentAssociationType",void 0),u([y({json:{write:{isRequired:!0}}})],hn.prototype,"inputTypes",void 0),u([Yt("inputTypes")],hn.prototype,"castInputs",null),u([ce("inputTypes")],hn.prototype,"readInputs",null),u([me("inputTypes")],hn.prototype,"writeInputs",null),hn=u([j("esri.form.elements.inputs.attachments.AttachmentInput")],hn);const Nm=pI(hn),PB=hn;var dg;const DB=pI(PB);let Bi=dg=class extends ma{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new dg({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};u([y({type:Boolean,json:{write:!0}})],Bi.prototype,"allowUserRename",void 0),u([y({type:String,json:{write:{isRequired:!0}}})],Bi.prototype,"attachmentKeyword",void 0),u([y({type:Boolean,json:{write:!0}})],Bi.prototype,"displayFilename",void 0),u([y({type:String,json:{write:!0}})],Bi.prototype,"editableExpression",void 0),u([y({type:String,json:{write:!0}})],Bi.prototype,"filenameExpression",void 0),u([y({types:DB.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Bi.prototype,"input",void 0),u([y({type:Number,json:{write:!0}})],Bi.prototype,"maxAttachmentCount",void 0),u([y({type:Number,json:{write:!0}})],Bi.prototype,"minAttachmentCount",void 0),u([y({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Bi.prototype,"type",void 0),u([y({type:Boolean,json:{write:!0}})],Bi.prototype,"useOriginalFilename",void 0),Bi=dg=u([j("esri.form.elements.AttachmentElement")],Bi);const q_=Bi;let ih=class extends se{constructor(t){super(t),this.type=null}};u([y()],ih.prototype,"type",void 0),ih=u([j("esri.form.elements.inputs.Input")],ih);const ho=ih;let Y0=class extends ho{constructor(t){super(t),this.maxLength=null,this.minLength=0}};u([y({type:Number,json:{write:!0}})],Y0.prototype,"maxLength",void 0),u([y({type:Number,json:{write:!0}})],Y0.prototype,"minLength",void 0),Y0=u([j("esri.form.elements.inputs.TextInput")],Y0);const cv=Y0;var hg;let sh=hg=class extends cv{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new hg({maxLength:this.maxLength,minLength:this.minLength})}};u([y({type:["barcode-scanner"],json:{read:!1,write:!0}})],sh.prototype,"type",void 0),sh=hg=u([j("esri.form.elements.inputs.BarcodeScannerInput")],sh);const FB=sh;var fg;let cA=fg=class extends ho{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new fg({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([y({type:String,json:{write:!0}})],cA.prototype,"noValueOptionLabel",void 0),u([y({type:Boolean,json:{write:!0}})],cA.prototype,"showNoValueOption",void 0),u([y({type:["combo-box"],json:{read:!1,write:!0}})],cA.prototype,"type",void 0),cA=fg=u([j("esri.form.elements.inputs.ComboBoxInput")],cA);const RB=cA;var yg;function Q_(e){return e??null}function W_(e){return e??null}let cn=yg=class extends ho{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return Q_(t.max)}writeMax(e,t){t.max=W_(e)}readMin(e,t){return Q_(t.min)}writeMin(e,t){t.min=W_(e)}clone(){return new yg({max:this.max,min:this.min})}};u([y({type:String,json:{type:String,write:!0}})],cn.prototype,"max",void 0),u([ce("max")],cn.prototype,"readMax",null),u([me("max")],cn.prototype,"writeMax",null),u([y({type:String,json:{type:String,write:!0}})],cn.prototype,"min",void 0),u([ce("min")],cn.prototype,"readMin",null),u([me("min")],cn.prototype,"writeMin",null),u([y({type:["date-picker"],json:{read:!1,write:!0}})],cn.prototype,"type",void 0),cn=yg=u([j("esri.form.elements.inputs.DatePickerInput")],cn);const NB=cn;var mg;function jm(e){return e??null}function Lm(e){return e??null}let Ti=mg=class extends ho{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return jm(t.max)}writeMax(e,t){t.max=Lm(e)}readMin(e,t){return jm(t.min)}writeMin(e,t){t.min=Lm(e)}readTimeResolution(e,t){return jm(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=Lm(e)}clone(){return new mg({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([y({type:Boolean,json:{write:!0}})],Ti.prototype,"includeTimeOffset",void 0),u([y({type:String,json:{type:String,write:!0}})],Ti.prototype,"max",void 0),u([ce("max")],Ti.prototype,"readMax",null),u([me("max")],Ti.prototype,"writeMax",null),u([y({type:String,json:{type:String,write:!0}})],Ti.prototype,"min",void 0),u([ce("min")],Ti.prototype,"readMin",null),u([me("min")],Ti.prototype,"writeMin",null),u([y({type:String,json:{type:String,write:!0}})],Ti.prototype,"timeResolution",void 0),u([ce("timeResolution")],Ti.prototype,"readTimeResolution",null),u([me("timeResolution")],Ti.prototype,"writeTimeResolution",null),u([y({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Ti.prototype,"type",void 0),Ti=mg=u([j("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Ti);const jB=Ti;var gg;function H_(e){return e!=null?new Date(e):null}function J_(e){return e?e.getTime():null}let Ms=gg=class extends ho{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return H_(t.max)}writeMax(e,t){t.max=J_(e)}readMin(e,t){return H_(t.min)}writeMin(e,t){t.min=J_(e)}clone(){return new gg({includeTime:this.includeTime,max:this.max,min:this.min})}};u([y({type:Boolean,json:{write:!0}})],Ms.prototype,"includeTime",void 0),u([y({type:Date,json:{type:Number,write:!0}})],Ms.prototype,"max",void 0),u([ce("max")],Ms.prototype,"readMax",null),u([me("max")],Ms.prototype,"writeMax",null),u([y({type:Date,json:{type:Number,write:!0}})],Ms.prototype,"min",void 0),u([ce("min")],Ms.prototype,"readMin",null),u([me("min")],Ms.prototype,"writeMin",null),u([y({type:["datetime-picker"],json:{read:!1,write:!0}})],Ms.prototype,"type",void 0),Ms=gg=u([j("esri.form.elements.inputs.DateTimePickerInput")],Ms);const LB=Ms;var wg;let pA=wg=class extends ho{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new wg({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([y({type:String,json:{write:!0}})],pA.prototype,"noValueOptionLabel",void 0),u([y({type:Boolean,json:{write:!0}})],pA.prototype,"showNoValueOption",void 0),u([y({type:["radio-buttons"],json:{read:!1,write:!0}})],pA.prototype,"type",void 0),pA=wg=u([j("esri.form.elements.inputs.RadioButtonsInput")],pA);const BB=pA;var bg;let dA=bg=class extends ho{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new bg({offValue:this.offValue,onValue:this.onValue})}};u([y({type:[String,Number],json:{write:!0}})],dA.prototype,"offValue",void 0),u([y({type:[String,Number],json:{write:!0}})],dA.prototype,"onValue",void 0),u([y({type:["switch"],json:{read:!1,write:!0}})],dA.prototype,"type",void 0),dA=bg=u([j("esri.form.elements.inputs.SwitchInput")],dA);const UB=dA;var vg;let nh=vg=class extends cv{constructor(e){super(e),this.type="text-area"}clone(){return new vg({maxLength:this.maxLength,minLength:this.minLength})}};u([y({type:["text-area"],json:{read:!1,write:!0}})],nh.prototype,"type",void 0),nh=vg=u([j("esri.form.elements.inputs.TextAreaInput")],nh);const zB=nh;var Sg;let oh=Sg=class extends cv{constructor(e){super(e),this.type="text-box"}clone(){return new Sg({maxLength:this.maxLength,minLength:this.minLength})}};u([y({type:["text-box"],json:{read:!1,write:!0}})],oh.prototype,"type",void 0),oh=Sg=u([j("esri.form.elements.inputs.TextBoxInput")],oh);const VB=oh;var _g;function Bm(e){return e??null}function Um(e){return e??null}let Ui=_g=class extends ho{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return Bm(t.max)}writeMax(e,t){t.max=Um(e)}readMin(e,t){return Bm(t.min)}writeMin(e,t){t.min=Um(e)}readTimeResolution(e,t){return Bm(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=Um(e)}clone(){return new _g({max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([y({type:String,json:{type:String,write:!0}})],Ui.prototype,"max",void 0),u([ce("max")],Ui.prototype,"readMax",null),u([me("max")],Ui.prototype,"writeMax",null),u([y({type:String,json:{type:String,write:!0}})],Ui.prototype,"min",void 0),u([ce("min")],Ui.prototype,"readMin",null),u([me("min")],Ui.prototype,"writeMin",null),u([y({type:String,json:{type:String,write:!0}})],Ui.prototype,"timeResolution",void 0),u([ce("timeResolution")],Ui.prototype,"readTimeResolution",null),u([me("timeResolution")],Ui.prototype,"writeTimeResolution",null),u([y({type:["time-picker"],json:{read:!1,write:!0}})],Ui.prototype,"type",void 0),Ui=_g=u([j("esri.form.elements.inputs.TimePickerInput")],Ui);const GB=Ui,qB={base:ho,key:"type",typeMap:{"barcode-scanner":FB,"combo-box":RB,"date-picker":NB,"datetime-picker":LB,"datetimeoffset-picker":jB,"radio-buttons":BB,switch:UB,"text-area":zB,"text-box":VB,"time-picker":GB}};var Eg;let cl=Eg=class extends se{constructor(e){super(e),this.name=null,this.code=null}clone(){return new Eg({name:this.name,code:this.code})}};u([y({type:String,json:{write:{isRequired:!0}}})],cl.prototype,"name",void 0),u([y({type:[String,Number],json:{write:{isRequired:!0}}})],cl.prototype,"code",void 0),cl=Eg=u([j("esri.layers.support.CodedValue")],cl);const QB=new pt({inherited:"inherited",codedValue:"coded-value",range:"range"});let ta=class extends se{constructor(t){super(t),this.name=null,this.type=null}};u([y({type:String,json:{write:!0}})],ta.prototype,"name",void 0),u([Ce(QB),y({json:{write:{isRequired:!0}}})],ta.prototype,"type",void 0),ta=u([j("esri.layers.support.Domain")],ta);var xg,lu;let ra=(lu=class extends ta{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let r=null;if(this.codedValues){const i=String(t);this.codedValues.some((s=>(String(s.code)===i&&(r=s.name),!!r)))}return r}clone(){return new xg({codedValues:q(this.codedValues),name:this.name})}},xg=lu,lu);u([y({type:[cl],json:{write:{isRequired:!0}}})],ra.prototype,"codedValues",void 0),u([Ce({codedValue:"coded-value"})],ra.prototype,"type",void 0),ra=xg=u([j("esri.layers.support.CodedValueDomain")],ra);var $g,Au;let Ec=(Au=class extends ta{constructor(t){super(t),this.type="inherited"}clone(){return new $g}},$g=Au,Au);u([Ce({inherited:"inherited"})],Ec.prototype,"type",void 0),Ec=$g=u([j("esri.layers.support.InheritedDomain")],Ec);var Tg,uu;let nl=(uu=class extends ta{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Tg({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},Tg=uu,uu);u([y({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],nl.prototype,"maxValue",void 0),u([y({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],nl.prototype,"minValue",void 0),u([Ce({range:"range"})],nl.prototype,"type",void 0),nl=Tg=u([j("esri.layers.support.RangeDomain")],nl);const dI={key:"type",base:ta,typeMap:{range:nl,"coded-value":ra,inherited:Ec}};function Hf(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return nl.fromJSON(e);case"codedValue":return ra.fromJSON(e);case"inherited":return Ec.fromJSON(e)}return null}var Ig;let As=Ig=class extends ma{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Ig({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([y({types:dI,json:{read:{reader:Hf},write:!0}})],As.prototype,"domain",void 0),u([y({type:Boolean,json:{write:!0}})],As.prototype,"editable",void 0),u([y({type:String,json:{write:!0}})],As.prototype,"editableExpression",void 0),u([y({type:String,json:{write:!0}})],As.prototype,"fieldName",void 0),u([y({type:String,json:{write:!0}})],As.prototype,"hint",void 0),u([y({types:qB,json:{read:{source:"inputType"},write:{target:"inputType"}}})],As.prototype,"input",void 0),u([y({type:String,json:{write:!0}})],As.prototype,"requiredExpression",void 0),u([y({type:String,json:{read:!1,write:!0}})],As.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],As.prototype,"valueExpression",void 0),As=Ig=u([j("esri.form.elements.FieldElement")],As);const Z_=As;var Mg;let zn=Mg=class extends ma{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Mg({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:q(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([y({type:Number,json:{write:!0}})],zn.prototype,"displayCount",void 0),u([y({type:["list"],json:{write:!0}})],zn.prototype,"displayType",void 0),u([y({type:String,json:{write:!0}})],zn.prototype,"editableExpression",void 0),u([y({type:[Db],json:{write:!0}})],zn.prototype,"orderByFields",void 0),u([y({type:Number,json:{write:!0}})],zn.prototype,"relationshipId",void 0),u([y({type:["relationship"],json:{read:!1,write:!0}})],zn.prototype,"type",void 0),zn=Mg=u([j("esri.form.elements.RelationshipElement")],zn);const Y_=zn;var Cg;let hA=Cg=class extends ma{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new Cg({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};u([y({type:String,json:{write:!0}})],hA.prototype,"text",void 0),u([y({type:String,json:{write:!0}})],hA.prototype,"textFormat",void 0),u([y({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],hA.prototype,"type",void 0),hA=Cg=u([j("esri.form.elements.TextElement")],hA);const K_=hA;let fA=class extends nt.ClonableMixin(ma){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};u([y({type:[oT],json:{write:{isRequired:!0}}})],fA.prototype,"associationTypes",void 0),u([y({type:String,json:{write:!0}})],fA.prototype,"editableExpression",void 0),u([y({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],fA.prototype,"type",void 0),fA=u([j("esri.form.elements.UtilityNetworkAssociationsElement")],fA);const X_=fA,WB=e=>e.type==="field",HB=e=>e.type==="group",JB=e=>e.type==="text";function hI(e){return{typesWithGroup:{base:ma,key:"type",typeMap:{attachment:q_,field:Z_,group:e,relationship:Y_,text:K_,utilityNetworkAssociations:X_}},typesWithoutGroup:{base:ma,key:"type",typeMap:{attachment:q_,field:Z_,relationship:Y_,text:K_,utilityNetworkAssociations:X_}}}}function fI(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((s=>i[s.type])).map((s=>i[s.type].fromJSON(s)))}function yI(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((s=>i[s.type])).map((s=>s.toJSON()))}function mI(e,t,r=!0){return e?e.map((i=>In(r?t.typesWithGroup:t.typesWithoutGroup,i))):null}var kg;let fn=kg=class extends ma{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return mI(e,zm,!1)}readElements(e,t){return fI(t.formElements,zm,!1)}writeElements(e,t){t.formElements=yI(e,zm,!1)}clone(){return new kg({description:this.description,elements:q(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([y({json:{write:!0}})],fn.prototype,"elements",void 0),u([Yt("elements")],fn.prototype,"castElements",null),u([ce("elements",["formElements"])],fn.prototype,"readElements",null),u([me("elements")],fn.prototype,"writeElements",null),u([y({type:["collapsed","expanded"],json:{write:!0}})],fn.prototype,"initialState",void 0),u([y({type:String,json:{read:!1,write:!0}})],fn.prototype,"type",void 0),fn=kg=u([j("esri.form.elements.GroupElement")],fn);const zm=hI(fn),ZB=fn;var Og;const Vm=hI(ZB);let Cs=Og=class extends se{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return mI(e,Vm)}readElements(e,t){return fI(t.formElements,Vm)}writeElements(e,t){t.formElements=yI(e,Vm)}clone(){return new Og({description:this.description,expressionInfos:q(this.expressionInfos),elements:q(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:s,expressionInfos:o,title:c}=this;if(xc(r,e,i),xc(r,e,c),!s)return[];const f=YB(s,o).map((w=>tn(r,e,w)));await Promise.all(f);for(const w of s)gI(r,{fieldsIndex:e,relationships:t},w);return Array.from(r).sort()}};function gI(e,t,r){var s;const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(xc(e,i,r.label),xc(e,i,r.description),r.type){case"field":Yi(e,i,r.fieldName);break;case"group":r.elements.forEach((o=>gI(e,t,o)));break;case"relationship":if(t.relationships){const o=t.relationships.find((c=>c.id===r.relationshipId));o&&Yi(e,i,o.keyField)}Df(e,i,(s=r.orderByFields)==null?void 0:s.map((o=>o.field)));break;case"text":xc(e,i,r.text)}}function YB(e,t){if(!t||t.length===0)return[];const r=wI(e),i=[];for(const s of t)r.has(s.name)&&i.push(s.expression);return i}function wI(e){const t=new Set;for(const r of e)if(rS(t,r.visibilityExpression),!JB(r)){if(HB(r))Ih(t,wI(r.elements));else if(rS(t,r.editableExpression),WB(r)){const{requiredExpression:i,valueExpression:s}=r;Ih(t,[i,s])}}return t}function xc(e,t,r){Df(e,t,$b(r))}u([y({type:String,json:{write:!0}})],Cs.prototype,"description",void 0),u([y({json:{write:!0}})],Cs.prototype,"elements",void 0),u([Yt("elements")],Cs.prototype,"castElements",null),u([ce("elements",["formElements"])],Cs.prototype,"readElements",null),u([me("elements")],Cs.prototype,"writeElements",null),u([y({type:[MB],json:{write:!0}})],Cs.prototype,"expressionInfos",void 0),u([y({type:Boolean,json:{default:!1,write:!0}})],Cs.prototype,"preserveFieldValuesWhenHidden",void 0),u([y({type:String,json:{write:!0}})],Cs.prototype,"title",void 0),Cs=Og=u([j("esri.form.FormTemplate")],Cs);const KB=Cs;async function XB(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await Pe(async()=>{const{fromItem:s}=await import("./portalLayers-Cefelqly.js");return{fromItem:s}},__vite__mapDeps([30,31,32,33,34]),import.meta.url);try{return await r(t)}catch(s){const o=t==null?void 0:t.portalItem,c=(o==null?void 0:o.id)||"unset",f=((i=o==null?void 0:o.portal)==null?void 0:i.url)||xt.portalUrl;throw xe.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+f+"', id: '"+c+"')",s),s}}const e4={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function Gm(e,t,r,i=Cn){const s=new Ri(Cb(i)),o=Se.fromJSDate(e,{zone:s}),c=r==="decades"||r==="centuries"?"year":vI(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),o.plus({[c]:t}).toJSDate()}function Cee(e,t,r="milliseconds"){const i=e.getTime(),s=bI(t,r,"milliseconds");return new Date(i+s)}function t4(e,t,r=Cn){const i=new Ri(Cb(r)),s=Se.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const c=s.startOf("year"),{year:f}=c,w=f-f%(t==="decades"?10:100);return c.set({year:w}).toJSDate()}const o=vI(t);return s.startOf(o).toJSDate()}function bI(e,t,r){return e===0?0:e*e4[t]/e4[r]}function vI(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var us,cu;let fr=(cu=class extends se{static get allTime(){return r4}static get empty(){return eU}static fromArray(t){return new us({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,r){return r.end!=null?new Date(r.end):null}writeEnd(t,r){r.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(us.allTime)}get isEmpty(){return this.equals(us.empty)}readStart(t,r){return r.start!=null?new Date(r.start):null}writeStart(t,r){r.start=(t==null?void 0:t.getTime())??null}clone(){return new us({end:this.end,start:this.start})}equals(t){var c,f,w,v;if(!t)return!1;const r=((c=this.start)==null?void 0:c.getTime())??this.start,i=((f=this.end)==null?void 0:f.getTime())??this.end,s=((w=t.start)==null?void 0:w.getTime())??t.start,o=((v=t.end)==null?void 0:v.getTime())??t.end;return r===s&&i===o}expandTo(t,r=Cn){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=t4(i,t,r));let s=this.end;if(s){const o=t4(s,t,r);s=s.getTime()===o.getTime()?o:Gm(o,1,t,r)}return new us({start:i,end:s})}intersection(t){var w,v,_,$;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return us.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const r=((w=this.start)==null?void 0:w.getTime())??-1/0,i=((v=this.end)==null?void 0:v.getTime())??1/0,s=((_=t.start)==null?void 0:_.getTime())??-1/0,o=(($=t.end)==null?void 0:$.getTime())??1/0;let c,f;return s>=r&&s<=i?c=s:r>=s&&r<=o&&(c=r),i>=s&&i<=o?f=i:o>=r&&o<=i&&(f=o),c==null||f==null||isNaN(c)||isNaN(f)?us.empty:new us({start:c===-1/0?null:new Date(c),end:f===1/0?null:new Date(f)})}offset(t,r,i=Cn){if(this.isEmpty||this.isAllTime)return this.clone();const s=new us,{start:o,end:c}=this;return o!=null&&(s.start=Gm(o,t,r,i)),c!=null&&(s.end=Gm(c,t,r,i)),s}toArray(){var t,r;return this.isEmpty?[void 0,void 0]:[((t=this.start)==null?void 0:t.getTime())??null,((r=this.end)==null?void 0:r.getTime())??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return r4.clone();const r=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new us({start:r,end:i})}},us=cu,cu);u([y({type:Date,json:{write:{allowNull:!0}}})],fr.prototype,"end",void 0),u([ce("end")],fr.prototype,"readEnd",null),u([me("end")],fr.prototype,"writeEnd",null),u([y({readOnly:!0,json:{read:!1}})],fr.prototype,"isAllTime",null),u([y({readOnly:!0,json:{read:!1}})],fr.prototype,"isEmpty",null),u([y({type:Date,json:{write:{allowNull:!0}}})],fr.prototype,"start",void 0),u([ce("start")],fr.prototype,"readStart",null),u([me("start")],fr.prototype,"writeStart",null),fr=us=u([j("esri.time.TimeExtent")],fr);const r4=new fr,eU=new fr({start:void 0,end:void 0});let tU=0,Zt=class extends hb.EventedMixin(AT.IdentifiableMixin(Xo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new ct(-180,-90,180,90,ke.WGS84),this.id=Date.now().toString(16)+"-layer-"+tU++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=ke.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await Pe(async()=>{const{fromUrl:i}=await import("./arcgisLayers-Br618Nim.js");return{fromUrl:i}},__vite__mapDeps([35,31,32,34]),import.meta.url)).fromUrl(r)}static fromPortalItem(t){return XB(t)}initialize(){this.when().catch((t=>{Pn(t)||xe.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})}))}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&t&&(t=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return ws(this.url)}createLayerView(t,r){return Promise.reject(new re("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await pr(t,{query:{f:"json"},responseType:"json"})).data;throw new re("layer:no-attribution-data","Layer does not have attribution data")}};u([y({type:String})],Zt.prototype,"attributionDataUrl",void 0),u([y({readOnly:!0})],Zt.prototype,"effectiveVisible",null),u([y({type:ct})],Zt.prototype,"fullExtent",void 0),u([y({readOnly:!0})],Zt.prototype,"hasAttributionData",null),u([y({type:String,clonable:!1})],Zt.prototype,"id",void 0),u([y({type:Boolean,nonNullable:!0})],Zt.prototype,"legendEnabled",void 0),u([y({type:["show","hide","hide-children"]})],Zt.prototype,"listMode",void 0),u([y({type:Number,range:{min:0,max:1},nonNullable:!0})],Zt.prototype,"opacity",void 0),u([y({clonable:!1})],Zt.prototype,"parent",void 0),u([y({readOnly:!0})],Zt.prototype,"parsedUrl",null),u([y({type:Boolean,readOnly:!0})],Zt.prototype,"persistenceEnabled",void 0),u([y({type:Boolean})],Zt.prototype,"popupEnabled",void 0),u([y({type:Boolean})],Zt.prototype,"attributionVisible",void 0),u([y({type:ke})],Zt.prototype,"spatialReference",void 0),u([y({type:String})],Zt.prototype,"title",void 0),u([y({readOnly:!0,json:{read:!1}})],Zt.prototype,"type",void 0),u([y()],Zt.prototype,"url",void 0),u([y({type:fr})],Zt.prototype,"visibilityTimeExtent",void 0),u([y({type:Boolean,nonNullable:!0})],Zt.prototype,"visible",void 0),Zt=u([j("esri.layers.Layer")],Zt);let i4=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new yb,this._items=new Set}get length(){return Ue(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Ue(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach((i=>{t(i)||this._items.delete(i)})),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ue(this._observable),yield*this._items}};const SI=new FinalizationRegistry((e=>{e.close()}));function rU(e,t){SI.register(e,t,t)}function iU(e){SI.unregister(e)}function _I(e,t){return new Proxy({},{get:(r,i,s)=>(...o)=>{let c,f;const w=o[o.length-1];return sU(w)&&(c=w.signal,f=w.transferList,o.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),o,{transferList:f,signal:c})}})}function sU(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const nU={statsWorker:()=>Pe(()=>import("./statsWorker-CncRA2BG.js"),__vite__mapDeps([36,37,38,39,40,41]),import.meta.url),geometryEngineWorker:()=>Pe(()=>import("./geometryEngineWorker-C3Rv6yWF.js"),__vite__mapDeps([42,43,44,45,46,47]),import.meta.url),arcadeGeometryOperatorsWorker:()=>Pe(()=>import("./operatorsWorker-Dmkr_O8Q.js"),[],import.meta.url),CSVSourceWorker:()=>Pe(()=>import("./CSVSourceWorker-Cfor8ZE6.js"),__vite__mapDeps([48,49,47,8,9,50,51,52,5,53,54,55,7,10,0,1,56,38,37,39,40,41,15,57,58,59,60,61,62,4,63]),import.meta.url),EdgeProcessingWorker:()=>Pe(()=>import("./EdgeProcessingWorker-BCGwte28.js"),__vite__mapDeps([64,65,66,67,68,69,70,71,72,73,74,75,76]),import.meta.url),ElevationSamplerWorker:()=>Pe(()=>import("./ElevationSamplerWorker-B_QEjG4A.js"),__vite__mapDeps([77,60,61,78,79,80,81,82,68,83,84,85,86,87,66,67,69,88]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>Pe(()=>import("./FeatureServiceSnappingSourceWorker-DpVr7NRH.js"),__vite__mapDeps([89,90,50,51,52,5,53,54,47,55,7,8,9,10,0,1,56,38,37,39,40,41,15,57,58,59,60,61,62,24,91,92,93,27]),import.meta.url),GeoJSONSourceWorker:()=>Pe(()=>import("./GeoJSONSourceWorker-B3hifdyO.js"),__vite__mapDeps([94,7,8,9,10,50,51,52,5,53,54,47,55,0,1,56,38,37,39,40,41,15,57,58,59,60,61,62,95,49,63,96]),import.meta.url),LercWorker:()=>Pe(()=>import("./LercWorker-Dqo2FatL.js"),[],import.meta.url),MemorySourceWorker:()=>Pe(()=>import("./MemorySourceWorker-CUfEPQmE.js"),__vite__mapDeps([97,7,8,9,10,98,50,51,52,5,53,54,47,55,0,1,56,38,37,39,40,41,15,57,58,59,60,61,62,63,96,49]),import.meta.url),PBFDecoderWorker:()=>Pe(()=>import("./PBFDecoderWorker-6tHzGZpB.js"),__vite__mapDeps([99,7,8,9,10,91,92]),import.meta.url),FeaturePipelineWorker:()=>Pe(()=>import("./FeaturePipelineWorker-DOtD7NB0.js"),__vite__mapDeps([100,24,101,102,67,14,15,103,8,9,104,105,75,106,107,69,7,10,13,54,51,52,5,53,47,62,55,0,1,56,38,37,39,40,41,57,61,108,109,110,111,93,91,92,112,95,49,63,96,46,113,90]),import.meta.url),PointCloudWorker:()=>Pe(()=>import("./PointCloudWorker-BTN0wfG7.js"),__vite__mapDeps([114,115,81,116,68,117,118,119,74,120,80,82,83,84,121,122,69]),import.meta.url),RasterWorker:()=>Pe(()=>import("./RasterWorker-CU_GdsPJ.js"),__vite__mapDeps([123,124,125,45,46,126,127,128]),import.meta.url),SceneLayerSnappingSourceWorker:()=>Pe(()=>import("./SceneLayerSnappingSourceWorker-BkikwhY5.js"),__vite__mapDeps([129,68,130,131,80,81,122,82,116,69,121,66,67,71,72,73,65,70,74,75,76]),import.meta.url),SceneLayerWorker:()=>Pe(()=>import("./SceneLayerWorker-DatsfDyj.js"),__vite__mapDeps([132,78,87,133,85,131,68,80,81,122,82,116,69,134,119,74,104,135,120,115,83,84,121]),import.meta.url),WFSSourceWorker:()=>Pe(()=>import("./WFSSourceWorker-Q_0-lvsq.js"),__vite__mapDeps([136,7,8,9,10,50,51,52,5,53,54,47,55,0,1,56,38,37,39,40,41,15,57,58,59,60,61,62,95,49,96,137,138]),import.meta.url),WorkerTileHandler:()=>Pe(()=>import("./WorkerTileHandler-xRGZfnd2.js"),__vite__mapDeps([139,140,101,75,76,126,106,92,9,107]),import.meta.url),Lyr3DWorker:()=>Pe(()=>import("./Lyr3DWorker-CVJcxkvl.js"),[],import.meta.url),Feature3DPipelineWorker:()=>Pe(()=>import("./Feature3DPipelineWorker-Zj0DPCmu.js").then(e=>e.F),__vite__mapDeps([141,55,7,8,9,10,0,1,54,51,52,5,53,47,56,38,37,39,40,41,15,57,82,68,78,67,69,142,143,144,145,75,66,131,80,81,122,116,130,120,115,83,84,121,65,70,135,74,133,85,73,104,117,146,14,60,61,93,91,92]),import.meta.url),TextureCompressionWorker:()=>Pe(()=>import("./TextureCompressionWorker-Cx8Y_iKr.js"),__vite__mapDeps([147,145,75]),import.meta.url)},EI="worker:port-closed";var Lr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Lr||(Lr={}));let oU=0;function xI(){return oU++}function aU(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Jc(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function pv(e,t,r,i){if(t.type===Lr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Lr.INVOKE&&t.type!==Lr.RESPONSE)return void e.postMessage(t);let s;if(aU(r)?(s=s4(r.transferList),t.data=r.result):(s=s4(i),t.data=r),s){if(J("ff")){for(const o of s)if("byteLength"in o&&o.byteLength>267386880){const c="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Lr.INVOKE:throw c;case Lr.RESPONSE:return void pv(e,{type:Lr.RESPONSE,jobId:t.jobId,error:Jc(c)})}}}e.postMessage(t,s)}else e.postMessage(t)}function Zc(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function s4(e){if(!(e!=null&&e.length))return null;if(J("esri-workers-arraybuffer-transfer"))return e;const t=e.filter((r=>!lU(r)));return t.length?t:null}function lU(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function Pee(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===EI;if(!(Pn(t)||r))throw t;return}}const{CLOSE:n4,ABORT:o4,INVOKE:a4,RESPONSE:S0,OPEN_PORT:l4,ON:AU}=Lr,uU=2;let cU=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Lr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var ds;let Pu=(ds=class{static connect(t,r){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const o=new ds(i.port1,{channel:i,client:s,schedule:r});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=o),ds.clients.set(o,s),i.port2}static loadWorker(t){const r=nU[t];return r?r():Promise.resolve(null)}constructor(t,r,i,s){this._port=t,this._jobQueue=i,this._lowPriorityJobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new cU((o=>this._onInvokeMessage(o))),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:n4}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=i==null?void 0:i.signal,o=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new re(EI,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const c=xI();return new Promise(((f,w)=>{if(co(s))return this._processWork(),void w(Ir());const v=vl(s,(()=>{const $=this._outJobs.get(c);$&&(this._outJobs.delete(c),this._processWork(),Qs($.abortHandle),this._post({type:o4,jobId:c}),w(Ir()))})),_={resolve:f,reject:w,abortHandle:v,debugInfo:t};this._outJobs.set(c,_),this._post({type:a4,jobId:c,methodName:t,abortable:s!=null},r,o)}))}createInvokeProxy(t){return _I(this,t)}on(t,r){const i=new MessageChannel;function s(o){r(o.data)}return this._port.postMessage({type:Lr.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),gr((()=>{i.port1.postMessage({type:Lr.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",s)}))}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:l4,port:t.port2}),t.port1}_processWork(){var c,f;if(this._outJobs.size>=uU)return;const t=((c=this._jobQueue)==null?void 0:c.pop())??((f=this._lowPriorityJobQueue)==null?void 0:f.pop());if(!t)return;const{methodName:r,data:i,invokeOptions:s,resolver:o}=t;this.apply(r,i,s).then((w=>o.resolve(w))).catch((w=>o.reject(w)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((t=>{Qs(t.abortHandle),t.reject(Ir(`Worker closing, aborting job calling '${t.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule((()=>this._processMessage(t,!0))):this._processMessage(t,!1)}_processMessage(t,r){const i=Zc(t);if(i)switch(i.type){case S0:this._onResponseMessage(i);break;case a4:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case o4:this._onAbortMessage(i);break;case n4:this._onCloseMessage();break;case l4:this._onOpenPortMessage(i);break;case AU:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&ds.clients.get(this)===t&&t.destroy(),ds.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s=[],abortable:o}=t,c=o?new AbortController:null,f=this._inJobs;let w,v=this._client,_=v[r];try{if(!_&&r&&r.includes(".")){const $=r.split(".");for(let I=0;I<$.length-1;I++)v=v[$[I]],_=v[$[I+1]]}if(typeof _!="function")throw new TypeError(`${r} is not a function`);s.push({client:this,signal:c?c.signal:null}),w=_.apply(v,s)}catch($){return void this._post({type:S0,jobId:i,error:Jc($)})}op(w)?(f.set(i,{controller:c,promise:w}),w.then(($=>{f.has(i)&&(f.delete(i),this._post({type:S0,jobId:i},$))}),($=>{f.has(i)&&(f.delete(i),Pn($)||this._post({type:S0,jobId:i,error:Jc($||{message:`Error encountered at method ${r}`})}))}))):this._post({type:S0,jobId:i},w)}_onOpenPortMessage(t){new ds(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,(o=>{r.postMessage(o)})),s=nb(t.port,"message",(o=>{const c=Zc(o);(c==null?void 0:c.type)===Lr.CLOSE&&(s.remove(),i.remove(),r.close())}))}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,o=this._outJobs;if(!o.has(r))return;const c=o.get(r);o.delete(r),this._processWork(),Qs(c.abortHandle),i?c.reject(re.fromJSON(JSON.parse(i))):c.resolve(s)}_post(t,r,i){return pv(this._port,t,r,i)}},ds.kernelInfo={buildDate:$T,fullVersion:Hb,revision:TT},ds.clients=new Map,ds),pU=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new i4,this._ongoingLowPriorityJobsQueue=new i4}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise(((i,s)=>{let o=!0;const c=f=>{Xs(r.signal),o&&(o=!1,f())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let f=0;f<t.length;++f){const w=t[f];op(w)?this._clientPromises[f]=w.then((v=>(this._clients[f]=new Pu(v,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),c(i),this._clients[f])),(()=>(c(s),null))):(this._clients[f]=new Pu(w,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[f]=Promise.resolve(this._clients[f]),c(i))}}))}broadcast(t,r,i){const s=new Array(this._clientPromises.length);for(let o=0;o<this._clientPromises.length;++o){const c=this._clientPromises[o];s[o]=c.then((f=>f==null?void 0:f.invoke(t,r,i)))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Ir(`Worker closing, aborting job calling '${t.methodName}'`));for(;t=this._ongoingLowPriorityJobsQueue.pop();)t.resolver.reject(Ir(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then((i=>i==null?void 0:i.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,iU(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=pa();((i==null?void 0:i.priority)==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:t,data:r,invokeOptions:i,resolver:s});for(let o=0;o<this._clientPromises.length;o++){const c=this._clients[o];c?c.jobAdded():this._clientPromises[o].then((f=>f==null?void 0:f.jobAdded()))}return s.promise}createInvokeProxy(t){return _I(this,t)}on(t,r){return Promise.all(this._clientPromises).then((()=>vf(this._clients.map((i=>i.on(t,r))))))}openPorts(){return new Promise((t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then((o=>{o&&(r[s]=o.openPort()),--i===0&&t(r)}))}))}get test(){}};const dU={async request(e,t){var c,f;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((c=i1(e.url))!=null&&c.after)?i:"array-buffer";const s=await pr(e.url,r),o={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((f=s.requestOptions)==null?void 0:f.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}},hU={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let ah=new WeakMap,$I={};function fU(e){var r;const t=e||$I;if(!ah.has(t)){const i=Ws(),s=(r=Tb(i))==null?void 0:r.language,o=s&&hU[s]||i;ah.set(t,new Intl.NumberFormat(o,e))}return ah.get(t)}function Ree(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Nee(e,t){return Object.is(e,-0)&&(e=0),fU(t).format(e)}Ib((()=>{ah=new WeakMap,$I={}}));const TI={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function yU(e){return e in TI}function A4(e){if(yU(e)){const t=TI[e];return t===!0?e:t}return null}const K0=[],GA=new Map;function u4(e){for(const t of GA.keys())II(e.pattern,t)&&GA.delete(t)}function mU(e){return K0.includes(e)||(u4(e),K0.unshift(e)),gr((()=>{const t=K0.indexOf(e);t>-1&&(K0.splice(t,1),u4(e))}))}async function jee(e){const t=Ws();GA.has(e)||GA.set(e,wU(e,t));const r=GA.get(e);return r&&await bU.add(r),r}function gU(e){const t=Tb(e);return t?A4(e)??A4(t.language):null}async function wU(e,t){const r=[];for(const i of K0)if(II(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(s){r.push(s)}throw r.length?new re("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new re("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function II(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}Ib((()=>{GA.clear()}));const bU=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=pa())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function vU(e,t,r,i){const s=t.exec(r);if(!s)throw new re("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const o=s[1]?`${s[1]}/`:"",c=s[2],f=gU(i),w=`${o}${c}.json`,v=f?`${o}${c}_${f}.json`:w;let _;try{_=await c4(e(v))}catch($){if(v===w)throw new re("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:$});try{_=await c4(e(w))}catch(I){throw new re("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:I})}}return _}async function c4(e){if(p4.fetchBundleAsset!=null)return p4.fetchBundleAsset(e);const t=await pr(e,{responseType:"text"});return JSON.parse(t.data)}let SU=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let s;s=typeof i=="string"?o=>new URL(o,new URL(i,window.location.href)).href:i instanceof URL?o=>new URL(o,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return vU(this.getAssetUrl,this.matcher,t,r)}};function _U(e){return new SU(e)}const p4={};mU(_U({pattern:"esri/",location:zf}));const d4={};function EU(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.slice())||[],paths:{...d4.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=d4.baseUrl),t}let xU=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((r=>{this[r]=(...i)=>t[r](...i)}))}},lh=class{constructor(){this._dispatcher=new xU,this._workerPostMessage({type:Lr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Th((()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))}))}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){Th((()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))}))}async _workerMessageHandler(t){const r=Zc(t);if(r&&r.type===Lr.OPEN){const{modulePath:i,jobId:s}=r;let o=await Pu.loadWorker(i);o||(o=await import(i));const c=Pu.connect(o);this._workerPostMessage({type:Lr.OPENED,jobId:s,data:c})}}};const Pg=()=>xe.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:$U}=Lr,TU='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let id,sd;const h4="Failed to create Worker. Fallback to execute module in main thread";async function IU(){if(!J("esri-workers"))return f4(new lh);if(!id&&!sd)try{const t=TU.split("{CONFIGURATION}").join(MU());id=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){sd=t||{}}let e;if(id)try{e=new Worker(id,{name:"esri-worker-"+CU++})}catch{Pg().warn(h4,sd),e=new lh}else Pg().warn(h4,sd),e=new lh;return f4(e)}async function f4(e){return new Promise((t=>{function r(s){const o=Zc(s);o&&o.type===$U&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(s){s.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),Pg().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new lh).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)}))}function MU(){let e;if(xt.default!=null){const s={...xt};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(xt));e.assetsPath=zs(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?zs(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Ws(),e.has={"esri-csp-restrictions":J("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":J("esri-2d-update-debug"),"esri-2d-log-updating":J("esri-2d-log-updating"),"featurelayer-pbf":J("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":J("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":J("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":J("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":J("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":J("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":J("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":J("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":J("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":J("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":J("featurelayer-snapshot-enabled"),"esri-atomics":J("esri-atomics"),"esri-shared-array-buffer":J("esri-shared-array-buffer"),"esri-tiles-debug":J("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":J("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":J("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=zs(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=zs(e.workers.workerPath):e.workers.workerPath=zs(zf("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=xt.workers.loaderConfig,r=EU({baseUrl:t==null?void 0:t.baseUrl,locale:Ws(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:$T,fullVersion:Hb,revision:TT}})}let CU=0;const{ABORT:y4,INVOKE:kU,OPEN:OU,OPENED:PU,RESPONSE:_0}=Lr;let DU=class MI{static async create(t){const r=await IU();return new MI(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",(i=>{i.preventDefault(),xe.getLogger("esri.core.workers.WorkerOwner").error(i)}))}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,s=xI();return new Promise(((o,c)=>{const f={resolve:o,reject:c,abortHandle:Q$(i,(()=>{this._outJobs.delete(s),this._post({type:y4,jobId:s})}))};this._outJobs.set(s,f),this._post({type:OU,jobId:s,modulePath:t})}))}_onMessage(t){const r=Zc(t);if(r)switch(r.type){case PU:this._onOpenedMessage(r);break;case _0:this._onResponseMessage(r);break;case y4:this._onAbortMessage(r);break;case kU:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s,abortable:o}=t,c=o?new AbortController:null,f=this._inJobs,w=dU[r];let v;try{if(typeof w!="function")throw new TypeError(`${r} is not a function`);v=w.call(null,s,{signal:c?c.signal:null})}catch(_){return void this._post({type:_0,jobId:i,error:Jc(_)})}op(v)?(f.set(i,{controller:c,promise:v}),v.then((_=>{f.has(i)&&(f.delete(i),this._post({type:_0,jobId:i},_))}),(_=>{f.has(i)&&(f.delete(i),_||(_={message:"Error encountered at method"+r}),Pn(_)||this._post({type:_0,jobId:i,error:Jc(_||{message:`Error encountered at method ${r}`})}))}))):this._post({type:_0,jobId:i},v)}_onOpenedMessage(t){const{jobId:r,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Qs(s.abortHandle),s.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,o=this._outJobs.get(r);o&&(this._outJobs.delete(r),Qs(o.abortHandle),i?o.reject(re.fromJSON(JSON.parse(i))):o.resolve(s))}_post(t,r,i){return pv(this.worker,t,r,i)}};const m4=J("host-browser")?Math.min(navigator.hardwareConcurrency-1,J("workers-pool-size")??8):0;let pl=J("esri-mobile")?Math.min(m4,3):m4;pl||(pl=J("safari")&&J("mac")?7:2);let g4=0;const Ah=[];async function nd(e,t){const r=new pU,{registryTarget:i,...s}=t;return await r.open(e,s),i&&rU(i,r),r}async function FU(e,t={}){if(typeof e!="string")throw new re("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(J("host-webworker")&&!J("esri-workers")&&(r="local"),r==="local"){let i=await Pu.loadWorker(e);i||(i=await import(e)),Xs(t.signal);const s=t.client||i;return nd([Pu.connect(i,t.schedule)],{...t,client:s})}if(await RU(),Xs(t.signal),r==="dedicated"){const i=g4++%pl;return nd([await Ah[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,pl);if(i<pl){const s=new Array(i);for(let o=0;o<i;++o){const c=g4++%pl;s[o]=Ah[c].open(e,t)}return nd(s,t)}}return nd(Ah.map((i=>i.open(e,t))),t)}let od=null;async function RU(){if(od)return od;new AbortController;const e=[];for(let t=0;t<pl;t++){const r=DU.create(t).then((i=>(Ah[t]=i,i)));e.push(r)}return od=Promise.all(e),od}function w4(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const s of i)s.length>2&&(s[2]*=r)}function NU(e,t,r){if(!e&&!t||!r)return;const i=tf(r);b4(e,r,i),b4(t,r,i)}function b4(e,t,r){if(e)for(const i of e)jU(i.geometry,t,r)}function jU(e,t,r){if(!(e!=null&&e.spatialReference)||Ni(e.spatialReference,t))return;const i=tf(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)w4(e,e.rings,i);else if("paths"in e)w4(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=i)}}function CI(e,t,r){if(t==null||r==null||r.vcsWkid||Ni(t,r)||ya(t)||ya(r))return null;const i=tf(t)/tf(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>LU(s,i);case"polyline":case"esriGeometryPolyline":return s=>UU(s,i);case"polygon":case"esriGeometryPolygon":return s=>BU(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>zU(s,i);case"extent":case"esriGeometryEnvelope":return s=>VU(s,i);default:return null}}function LU(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function BU(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function UU(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function zU(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function VU(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function v4(e,t,r){if(!(r!=null&&r.features)||!r.hasZ)return;const i=CI(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const s of r.features)i(s.geometry)}const GU=new pt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Dg;const qU=new pt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var pu;let Nr=(pu=class extends se{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return i?qU.fromJSON(i.fieldValueType):null}clone(){var t;return new Dg({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((t=this.domain)==null?void 0:t.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},Dg=pu,pu);u([y({type:String,json:{write:!0}})],Nr.prototype,"alias",void 0),u([y({type:[String,Number],json:{write:{allowNull:!0}}})],Nr.prototype,"defaultValue",void 0),u([y()],Nr.prototype,"description",void 0),u([ce("description")],Nr.prototype,"readDescription",null),u([y({types:dI,json:{read:{reader:Hf},write:!0}})],Nr.prototype,"domain",void 0),u([y({type:Boolean,json:{write:!0}})],Nr.prototype,"editable",void 0),u([y({type:Ct,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Nr.prototype,"length",void 0),u([y({type:String,json:{write:!0}})],Nr.prototype,"name",void 0),u([y({type:Boolean,json:{write:!0}})],Nr.prototype,"nullable",void 0),u([Ce(GU)],Nr.prototype,"type",void 0),u([y()],Nr.prototype,"valueType",void 0),u([ce("valueType",["description"])],Nr.prototype,"readValueType",null),u([y({type:Boolean,json:{read:!1}})],Nr.prototype,"visible",void 0),Nr=Dg=u([j("esri.layers.support.Field")],Nr);var Fg;const Rg=new pt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Sr=Fg=class extends se{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,ur)}writeGeometryType(e,t,r,i){if(e)return void Rg.write(e,t,r,i);const{features:s}=this;if(s){for(const o of s)if((o==null?void 0:o.geometry)!=null)return void Rg.write(o.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=mp(e);return i&&!r&&t.spatialReference&&(i.spatialReference=ke.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new Fg(this.cloneProperties())}cloneProperties(){return q({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const s=e==null?void 0:e[r];i.geometry=(s==null?void 0:s.toJSON())||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,s]}=e,o=v=>Math.round((v-i)/t),c=v=>Math.round((s-v)/r),f=this.features,w=this._getQuantizationFunction(this.geometryType,o,c);for(let v=0,_=f.length;v<_;v++)w!=null&&w(f[v].geometry)||(f.splice(v,1),v--,_--);return this.transform=e,this}unquantize(){var I,k;const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,s],scale:[o,c]}=r,f=N=>N*o+i,w=N=>s-N*c;let v=null,_=null;if(this.hasZ&&((I=r==null?void 0:r.scale)==null?void 0:I[2])!=null){const{translate:[,,N],scale:[,,B]}=r;v=L=>L*B+N}if(this.hasM&&((k=r==null?void 0:r.scale)==null?void 0:k[3])!=null){const{translate:[,,,N],scale:[,,,B]}=r;_=L=>L==null?L:L*B+N}const $=this._getHydrationFunction(e,f,w,v,_);for(const{geometry:N}of t)N!=null&&$&&$(N);return this.transform=null,this}readFeaturesWithClass(e,t,r){var o;const i=ke.fromJSON(t.spatialReference),s=[];for(let c=0;c<e.length;c++){const f=e[c],w=r.fromJSON(f),v=(o=f.geometry)==null?void 0:o.spatialReference;w.geometry==null||v||(w.geometry.spatialReference=i);const _=f.aggregateGeometries,$=w.aggregateGeometries;if(_&&$!=null)for(const I in $){const k=$[I],N=_[I],B=N==null?void 0:N.spatialReference;k==null||B||(k.spatialReference=i)}s.push(w)}return s}_quantizePoints(e,t,r){let i,s;const o=[];for(let c=0,f=e.length;c<f;c++){const w=e[c];if(c>0){const v=t(w[0]),_=r(w[1]);v===i&&_===s||(o.push([v-i,_-s]),i=v,s=_)}else i=t(w[0]),s=r(w[1]),o.push([i,s])}return o.length>0?o:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const s=mc(i)?i.rings:i.paths,o=[];for(let c=0,f=s.length;c<f;c++){const w=s[c],v=this._quantizePoints(w,t,r);v&&o.push(v)}return o.length>0?(mc(i)?i.rings=o:i.paths=o,i):null}:e==="multipoint"?i=>{const s=this._quantizePoints(i.points,t,r);return s&&s.length>0?(i.points=s,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,s){return e==="point"?o=>{o.x=t(o.x),o.y=r(o.y),i&&(o.z=i(o.z))}:e==="polyline"||e==="polygon"?o=>{const c=mc(o)?o.rings:o.paths;let f,w;for(let v=0,_=c.length;v<_;v++){const $=c[v];for(let I=0,k=$.length;I<k;I++){const N=$[I];I>0?(f+=N[0],w+=N[1]):(f=N[0],w=N[1]),N[0]=t(f),N[1]=r(w)}}if(i&&s)for(let v=0,_=c.length;v<_;v++){const $=c[v];for(let I=0,k=$.length;I<k;I++){const N=$[I];N[2]=i(N[2]),N[3]=s(N[3])}}else if(i)for(let v=0,_=c.length;v<_;v++){const $=c[v];for(let I=0,k=$.length;I<k;I++){const N=$[I];N[2]=i(N[2])}}else if(s)for(let v=0,_=c.length;v<_;v++){const $=c[v];for(let I=0,k=$.length;I<k;I++){const N=$[I];N[2]=s(N[2])}}}:e==="extent"?o=>{o.xmin=t(o.xmin),o.ymin=r(o.ymin),o.xmax=t(o.xmax),o.ymax=r(o.ymax),i&&o.zmax!=null&&o.zmin!=null&&(o.zmax=i(o.zmax),o.zmin=i(o.zmin)),s&&o.mmax!=null&&o.mmin!=null&&(o.mmax=s(o.mmax),o.mmin=s(o.mmin))}:e==="multipoint"?o=>{const c=o.points;let f,w;for(let v=0,_=c.length;v<_;v++){const $=c[v];v>0?(f+=$[0],w+=$[1]):(f=$[0],w=$[1]),$[0]=t(f),$[1]=r(w)}if(i&&s)for(let v=0,_=c.length;v<_;v++){const $=c[v];$[2]=i($[2]),$[3]=s($[3])}else if(i)for(let v=0,_=c.length;v<_;v++){const $=c[v];$[2]=i($[2])}else if(s)for(let v=0,_=c.length;v<_;v++){const $=c[v];$[2]=s($[2])}}:null}};u([y({type:String,json:{write:!0}})],Sr.prototype,"displayFieldName",void 0),u([y({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sr.prototype,"exceededTransferLimit",void 0),u([y({type:[ur],json:{write:!0}})],Sr.prototype,"features",void 0),u([ce("features")],Sr.prototype,"readFeatures",null),u([y({type:[Nr],json:{write:!0}})],Sr.prototype,"fields",void 0),u([y({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:Rg.read}}})],Sr.prototype,"geometryType",void 0),u([me("geometryType")],Sr.prototype,"writeGeometryType",null),u([y({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sr.prototype,"hasM",void 0),u([y({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Sr.prototype,"hasZ",void 0),u([y({types:Qf,json:{write:!0}})],Sr.prototype,"queryGeometry",void 0),u([ce("queryGeometry")],Sr.prototype,"readQueryGeometry",null),u([y({type:ke,json:{write:!0}})],Sr.prototype,"spatialReference",void 0),u([me("spatialReference")],Sr.prototype,"writeSpatialReference",null),u([y({json:{write:!0}})],Sr.prototype,"transform",void 0),Sr=Fg=u([j("esri.rest.support.FeatureSet")],Sr),Sr.prototype.toJSON.isDefaultToJSON=!0;let QU=0,Kn=class extends Xo.LoadableMixin(TA.EsriPromiseMixin(st)){constructor(t){super(t),this._idToClientGeometry=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var r;const t=(r=this.layer)==null?void 0:r.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then((()=>this._applyEdits(t)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);v4(t,this.layer.spatialReference,i);const s=Sr.fromJSON(i);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return s;const o=this.layer.objectIdField;for(const c of s.features){const f=c.attributes[o],w=this._idToClientGeometry.get(f);w!==void 0&&(c.geometry=w)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new re("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return v4(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then((()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r)))}queryObjectIds(t,r={}){return this.load(r).then((()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r)))}queryExtent(t,r={}){return this.load(r).then((()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r))).then((i=>({count:i.count,extent:ct.fromJSON(i.extent)})))}querySnapping(t,r={}){return this.load(r).then((()=>this._connection.invoke("querySnapping",t,r)))}async queryAttributeBins(t,r={}){return await this.load(),this._connection.invoke("queryAttributeBins",t==null?void 0:t.toJSON(),r)}async _applyEdits(t){if(!this._connection)throw new re("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const s=[],o=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const c=_=>"objectId"in _&&_.objectId!=null?_.objectId:"attributes"in _&&_.attributes[r]!=null?_.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const _ of t.deleteFeatures){const $=c(_);$!=null&&s.push($)}const f=t.updateFeatures&&this._idToClientGeometry?new Map:null;if(t.updateFeatures){for(const _ of t.updateFeatures)if(o.push(this._serializeFeature(_)),f&&_.geometry!=null){const $=c(_);$!=null&&f.set($,_)}}NU(i?i.features:null,o,this.layer.spatialReference);const{fullExtent:w,featureEditResults:v}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:o,deletes:s});return this.fullExtent=w,i&&i.finish(v.uidToObjectId),this._updateIdToClientGeometries(f,v),this._createEditsResult(v)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:s}of t)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||i.push(s.load({signal:r}));i.length&&await Promise.all(i)}_updateIdToClientGeometries(t,r){if(this._idToClientGeometry){if(t)for(const i of r.updateResults){if(!i.success)continue;const s=t.get(i.objectId);s!=null&&this._addIdToClientGeometry(s)}for(const i of r.deleteResults)i.success&&this._idToClientGeometry.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:""};return{objectId:t.objectId,globalId:t.globalId,error:r?new re("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let s=null;for(let c=0;c<t.length;c++){const f=t[c],w=this._serializeFeature(f);s||f.geometry==null||(s=f.geometry.type),i[c]=w,r.set(`${w.uid}`,f)}const o=this;return{features:i,inferredGeometryType:s,finish(c){const f=o.sourceJSON.objectIdField;for(const w in c){const v=c[w],_=r.get(w);_&&(_.attributes||(_.attributes={}),v===-1?delete _.attributes[f]:_.attributes[f]=v,o._addIdToClientGeometry(_))}}}}_addIdToClientGeometry(t){var s;if(!this._idToClientGeometry)return;const r=this.sourceJSON.objectIdField,i=(s=t.attributes)==null?void 0:s[r];i!=null&&this._idToClientGeometry.set(i,t.geometry??null)}get _layerOrSourceGeometryType(){var t,r;return((t=this.layer)==null?void 0:t.geometryType)??((r=this.sourceJSON)==null?void 0:r.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),s=(QU++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:r}:{uid:s,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?Qr.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await FU("MemorySourceWorker",{strategy:J("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:s,hasM:o,hasZ:c,timeInfo:f,dateFieldsTimeZone:w}=this.layer,v=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const _=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",(N=>{xe.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),N.preventDefault()})));const $={features:_.features,fields:r==null?void 0:r.map((N=>N.toJSON())),geometryType:T_.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&o,hasZ:this._layerOrSourceGeometryType==="mesh"||c,objectIdField:s,spatialReference:v?null:i&&i.toJSON(),timeInfo:(f==null?void 0:f.toJSON())??null,dateFieldsTimeZone:w},I=await this._connection.invoke("load",$,{signal:t});for(const N of I.warnings)xe.getLogger(this.layer).warn("#load()",`${N.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:N});I.featureErrors.length&&xe.getLogger(this.layer).warn("#load()",`Encountered ${I.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:I.featureErrors});const k=I.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(_.inferredGeometryType)&&(k.geometryType=T_.toJSON(_.inferredGeometryType)),this.sourceJSON=k,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),_.finish(I.assignedObjectIds)}};u([fb({Type:ur,ensureType:Br(ur)})],Kn.prototype,"itemType",void 0),u([y()],Kn.prototype,"type",void 0),u([y({constructOnly:!0})],Kn.prototype,"layer",void 0),u([y({readOnly:!0})],Kn.prototype,"_workerGeometryType",null),u([y()],Kn.prototype,"sourceJSON",void 0),Kn=u([j("esri.layers.graphics.sources.MemorySource")],Kn);function WU(e){return"portalItem"in e}const HU=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):WU(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([y({type:String})],t.prototype,"apiKey",null),t=u([j("esri.layers.mixins.APIKeyMixin")],t),t},JU=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Fl(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",mN(r,xe.getLogger(this)))}};return u([y()],t.prototype,"title",null),u([y({type:String})],t.prototype,"url",null),t=u([j("esri.layers.mixins.ArcGISService")],t),t};function Jf(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ZU(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function YU(e,t,r,i,s,o,c,f,w,v,_,$,I,k,N,B){const L=new Float32Array(16);return L[0]=e,L[1]=t,L[2]=r,L[3]=i,L[4]=s,L[5]=o,L[6]=c,L[7]=f,L[8]=w,L[9]=v,L[10]=_,L[11]=$,L[12]=I,L[13]=k,L[14]=N,L[15]=B,L}const KU=Jf();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:KU,clone:ZU,create:Jf,fromValues:YU},Symbol.toStringTag,{value:"Module"}));let dv=1e-6;function Rl(){return dv}function XU(e){dv=e}const kI=Math.random,ez=Math.PI/180,tz=180/Math.PI;function rz(e){return e*ez}function iz(e){return e*tz}function sz(e,t){return Math.abs(e-t)<=dv*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:kI,equals:sz,getEpsilon:Rl,setEpsilon:XU,toDegree:iz,toRadian:rz},Symbol.toStringTag,{value:"Module"}));function OI(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ea(e,t,r,i,s,o,c,f,w,v,_,$,I,k,N,B,L){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=o,e[5]=c,e[6]=f,e[7]=w,e[8]=v,e[9]=_,e[10]=$,e[11]=I,e[12]=k,e[13]=N,e[14]=B,e[15]=L,e}function Zf(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xa(e,t){if(e===t){const r=t[1],i=t[2],s=t[3],o=t[6],c=t[7],f=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=s,e[13]=c,e[14]=f}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function nz(e,t){return PI(e,t)||Zf(e),e}function PI(e,t){const r=t[0],i=t[1],s=t[2],o=t[3],c=t[4],f=t[5],w=t[6],v=t[7],_=t[8],$=t[9],I=t[10],k=t[11],N=t[12],B=t[13],L=t[14],ee=t[15],ae=r*f-i*c,he=r*w-s*c,ye=r*v-o*c,ge=i*w-s*f,ve=i*v-o*f,ut=s*v-o*w,We=_*B-$*N,dt=_*L-I*N,ot=_*ee-k*N,wt=$*L-I*B,at=$*ee-k*B,Ut=I*ee-k*L;let yt=ae*Ut-he*at+ye*wt+ge*ot-ve*dt+ut*We;return yt?(yt=1/yt,e[0]=(f*Ut-w*at+v*wt)*yt,e[1]=(s*at-i*Ut-o*wt)*yt,e[2]=(B*ut-L*ve+ee*ge)*yt,e[3]=(I*ve-$*ut-k*ge)*yt,e[4]=(w*ot-c*Ut-v*dt)*yt,e[5]=(r*Ut-s*ot+o*dt)*yt,e[6]=(L*ye-N*ut-ee*he)*yt,e[7]=(_*ut-I*ye+k*he)*yt,e[8]=(c*at-f*ot+v*We)*yt,e[9]=(i*ot-r*at-o*We)*yt,e[10]=(N*ve-B*ye+ee*ae)*yt,e[11]=($*ye-_*ve-k*ae)*yt,e[12]=(f*dt-c*wt-w*We)*yt,e[13]=(r*wt-i*dt+s*We)*yt,e[14]=(B*he-N*ge-L*ae)*yt,e[15]=(_*ge-$*he+I*ae)*yt,e):null}function oz(e,t){const r=t[0],i=t[1],s=t[2],o=t[3],c=t[4],f=t[5],w=t[6],v=t[7],_=t[8],$=t[9],I=t[10],k=t[11],N=t[12],B=t[13],L=t[14],ee=t[15];return e[0]=f*(I*ee-k*L)-$*(w*ee-v*L)+B*(w*k-v*I),e[1]=-(i*(I*ee-k*L)-$*(s*ee-o*L)+B*(s*k-o*I)),e[2]=i*(w*ee-v*L)-f*(s*ee-o*L)+B*(s*v-o*w),e[3]=-(i*(w*k-v*I)-f*(s*k-o*I)+$*(s*v-o*w)),e[4]=-(c*(I*ee-k*L)-_*(w*ee-v*L)+N*(w*k-v*I)),e[5]=r*(I*ee-k*L)-_*(s*ee-o*L)+N*(s*k-o*I),e[6]=-(r*(w*ee-v*L)-c*(s*ee-o*L)+N*(s*v-o*w)),e[7]=r*(w*k-v*I)-c*(s*k-o*I)+_*(s*v-o*w),e[8]=c*($*ee-k*B)-_*(f*ee-v*B)+N*(f*k-v*$),e[9]=-(r*($*ee-k*B)-_*(i*ee-o*B)+N*(i*k-o*$)),e[10]=r*(f*ee-v*B)-c*(i*ee-o*B)+N*(i*v-o*f),e[11]=-(r*(f*k-v*$)-c*(i*k-o*$)+_*(i*v-o*f)),e[12]=-(c*($*L-I*B)-_*(f*L-w*B)+N*(f*I-w*$)),e[13]=r*($*L-I*B)-_*(i*L-s*B)+N*(i*I-s*$),e[14]=-(r*(f*L-w*B)-c*(i*L-s*B)+N*(i*w-s*f)),e[15]=r*(f*I-w*$)-c*(i*I-s*$)+_*(i*w-s*f),e}function az(e){const t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],c=e[5],f=e[6],w=e[7],v=e[8],_=e[9],$=e[10],I=e[11],k=e[12],N=e[13],B=e[14],L=e[15];return(t*c-r*o)*($*L-I*B)-(t*f-i*o)*(_*L-I*N)+(t*w-s*o)*(_*B-$*N)+(r*f-i*c)*(v*L-I*k)-(r*w-s*c)*(v*B-$*k)+(i*w-s*f)*(v*N-_*k)}function DI(e,t,r){const i=t[0],s=t[1],o=t[2],c=t[3],f=t[4],w=t[5],v=t[6],_=t[7],$=t[8],I=t[9],k=t[10],N=t[11],B=t[12],L=t[13],ee=t[14],ae=t[15];let he=r[0],ye=r[1],ge=r[2],ve=r[3];return e[0]=he*i+ye*f+ge*$+ve*B,e[1]=he*s+ye*w+ge*I+ve*L,e[2]=he*o+ye*v+ge*k+ve*ee,e[3]=he*c+ye*_+ge*N+ve*ae,he=r[4],ye=r[5],ge=r[6],ve=r[7],e[4]=he*i+ye*f+ge*$+ve*B,e[5]=he*s+ye*w+ge*I+ve*L,e[6]=he*o+ye*v+ge*k+ve*ee,e[7]=he*c+ye*_+ge*N+ve*ae,he=r[8],ye=r[9],ge=r[10],ve=r[11],e[8]=he*i+ye*f+ge*$+ve*B,e[9]=he*s+ye*w+ge*I+ve*L,e[10]=he*o+ye*v+ge*k+ve*ee,e[11]=he*c+ye*_+ge*N+ve*ae,he=r[12],ye=r[13],ge=r[14],ve=r[15],e[12]=he*i+ye*f+ge*$+ve*B,e[13]=he*s+ye*w+ge*I+ve*L,e[14]=he*o+ye*v+ge*k+ve*ee,e[15]=he*c+ye*_+ge*N+ve*ae,e}function lz(e,t,r){const i=r[0],s=r[1],o=r[2];if(t===e)e[12]=t[0]*i+t[4]*s+t[8]*o+t[12],e[13]=t[1]*i+t[5]*s+t[9]*o+t[13],e[14]=t[2]*i+t[6]*s+t[10]*o+t[14],e[15]=t[3]*i+t[7]*s+t[11]*o+t[15];else{const c=t[0],f=t[1],w=t[2],v=t[3],_=t[4],$=t[5],I=t[6],k=t[7],N=t[8],B=t[9],L=t[10],ee=t[11];e[0]=c,e[1]=f,e[2]=w,e[3]=v,e[4]=_,e[5]=$,e[6]=I,e[7]=k,e[8]=N,e[9]=B,e[10]=L,e[11]=ee,e[12]=c*i+_*s+N*o+t[12],e[13]=f*i+$*s+B*o+t[13],e[14]=w*i+I*s+L*o+t[14],e[15]=v*i+k*s+ee*o+t[15]}return e}function Az(e,t,r){const i=r[0],s=r[1],o=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function uz(e,t,r,i){let s=i[0],o=i[1],c=i[2],f=Math.sqrt(s*s+o*o+c*c);if(f<=Rl())return void OI(e,t);f=1/f,s*=f,o*=f,c*=f;const w=Math.sin(r),v=Math.cos(r),_=1-v,$=t[0],I=t[1],k=t[2],N=t[3],B=t[4],L=t[5],ee=t[6],ae=t[7],he=t[8],ye=t[9],ge=t[10],ve=t[11],ut=s*s*_+v,We=o*s*_+c*w,dt=c*s*_-o*w,ot=s*o*_-c*w,wt=o*o*_+v,at=c*o*_+s*w,Ut=s*c*_+o*w,yt=o*c*_-s*w,sr=c*c*_+v;e[0]=$*ut+B*We+he*dt,e[1]=I*ut+L*We+ye*dt,e[2]=k*ut+ee*We+ge*dt,e[3]=N*ut+ae*We+ve*dt,e[4]=$*ot+B*wt+he*at,e[5]=I*ot+L*wt+ye*at,e[6]=k*ot+ee*wt+ge*at,e[7]=N*ot+ae*wt+ve*at,e[8]=$*Ut+B*yt+he*sr,e[9]=I*Ut+L*yt+ye*sr,e[10]=k*Ut+ee*yt+ge*sr,e[11]=N*Ut+ae*yt+ve*sr,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function cz(e,t,r){const i=Math.sin(r),s=Math.cos(r),o=t[4],c=t[5],f=t[6],w=t[7],v=t[8],_=t[9],$=t[10],I=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+v*i,e[5]=c*s+_*i,e[6]=f*s+$*i,e[7]=w*s+I*i,e[8]=v*s-o*i,e[9]=_*s-c*i,e[10]=$*s-f*i,e[11]=I*s-w*i,e}function pz(e,t,r){const i=Math.sin(r),s=Math.cos(r),o=t[0],c=t[1],f=t[2],w=t[3],v=t[8],_=t[9],$=t[10],I=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-v*i,e[1]=c*s-_*i,e[2]=f*s-$*i,e[3]=w*s-I*i,e[8]=o*i+v*s,e[9]=c*i+_*s,e[10]=f*i+$*s,e[11]=w*i+I*s,e}function dz(e,t,r){const i=Math.sin(r),s=Math.cos(r),o=t[0],c=t[1],f=t[2],w=t[3],v=t[4],_=t[5],$=t[6],I=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+v*i,e[1]=c*s+_*i,e[2]=f*s+$*i,e[3]=w*s+I*i,e[4]=v*s-o*i,e[5]=_*s-c*i,e[6]=$*s-f*i,e[7]=I*s-w*i,e}function hz(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function fz(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yz(e,t,r){if(t===0)return Zf(e);let i=r[0],s=r[1],o=r[2],c=Math.sqrt(i*i+s*s+o*o);if(c<=Rl())return null;c=1/c,i*=c,s*=c,o*=c;const f=Math.sin(t),w=Math.cos(t),v=1-w;return e[0]=i*i*v+w,e[1]=s*i*v+o*f,e[2]=o*i*v-s*f,e[3]=0,e[4]=i*s*v-o*f,e[5]=s*s*v+w,e[6]=o*s*v+i*f,e[7]=0,e[8]=i*o*v+s*f,e[9]=s*o*v-i*f,e[10]=o*o*v+w,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mz(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gz(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function wz(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function FI(e,t,r){const i=t[0],s=t[1],o=t[2],c=t[3],f=i+i,w=s+s,v=o+o,_=i*f,$=i*w,I=i*v,k=s*w,N=s*v,B=o*v,L=c*f,ee=c*w,ae=c*v;return e[0]=1-(k+B),e[1]=$+ae,e[2]=I-ee,e[3]=0,e[4]=$-ae,e[5]=1-(_+B),e[6]=N+L,e[7]=0,e[8]=I+ee,e[9]=N-L,e[10]=1-(_+k),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function bz(e,t){const r=vz,i=-t[0],s=-t[1],o=-t[2],c=t[3],f=t[4],w=t[5],v=t[6],_=t[7],$=i*i+s*s+o*o+c*c;return $>0?(r[0]=2*(f*c+_*i+w*o-v*s)/$,r[1]=2*(w*c+_*s+v*i-f*o)/$,r[2]=2*(v*c+_*o+f*s-w*i)/$):(r[0]=2*(f*c+_*i+w*o-v*s),r[1]=2*(w*c+_*s+v*i-f*o),r[2]=2*(v*c+_*o+f*s-w*i)),FI(e,t,r),e}const vz=Qu();function Sz(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function _z(e,t){const r=t[0],i=t[1],s=t[2],o=t[4],c=t[5],f=t[6],w=t[8],v=t[9],_=t[10];return e[0]=Math.sqrt(r*r+i*i+s*s),e[1]=Math.sqrt(o*o+c*c+f*f),e[2]=Math.sqrt(w*w+v*v+_*_),e}function Ez(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function xz(e,t,r,i){const s=t[0],o=t[1],c=t[2],f=t[3],w=s+s,v=o+o,_=c+c,$=s*w,I=s*v,k=s*_,N=o*v,B=o*_,L=c*_,ee=f*w,ae=f*v,he=f*_,ye=i[0],ge=i[1],ve=i[2];return e[0]=(1-(N+L))*ye,e[1]=(I+he)*ye,e[2]=(k-ae)*ye,e[3]=0,e[4]=(I-he)*ge,e[5]=(1-($+L))*ge,e[6]=(B+ee)*ge,e[7]=0,e[8]=(k+ae)*ve,e[9]=(B-ee)*ve,e[10]=(1-($+N))*ve,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function $z(e,t,r,i,s){const o=t[0],c=t[1],f=t[2],w=t[3],v=o+o,_=c+c,$=f+f,I=o*v,k=o*_,N=o*$,B=c*_,L=c*$,ee=f*$,ae=w*v,he=w*_,ye=w*$,ge=i[0],ve=i[1],ut=i[2],We=s[0],dt=s[1],ot=s[2],wt=(1-(B+ee))*ge,at=(k+ye)*ge,Ut=(N-he)*ge,yt=(k-ye)*ve,sr=(1-(I+ee))*ve,es=(L+ae)*ve,ts=(N+he)*ut,Ht=(L-ae)*ut,Nl=(1-(I+B))*ut;return e[0]=wt,e[1]=at,e[2]=Ut,e[3]=0,e[4]=yt,e[5]=sr,e[6]=es,e[7]=0,e[8]=ts,e[9]=Ht,e[10]=Nl,e[11]=0,e[12]=r[0]+We-(wt*We+yt*dt+ts*ot),e[13]=r[1]+dt-(at*We+sr*dt+Ht*ot),e[14]=r[2]+ot-(Ut*We+es*dt+Nl*ot),e[15]=1,e}function Tz(e,t){const r=t[0],i=t[1],s=t[2],o=t[3],c=r+r,f=i+i,w=s+s,v=r*c,_=i*c,$=i*f,I=s*c,k=s*f,N=s*w,B=o*c,L=o*f,ee=o*w;return e[0]=1-$-N,e[1]=_+ee,e[2]=I-L,e[3]=0,e[4]=_-ee,e[5]=1-v-N,e[6]=k+B,e[7]=0,e[8]=I+L,e[9]=k-B,e[10]=1-v-$,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Iz(e,t,r,i,s,o,c){const f=1/(r-t),w=1/(s-i),v=1/(o-c);return e[0]=2*o*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*w,e[6]=0,e[7]=0,e[8]=(r+t)*f,e[9]=(s+i)*w,e[10]=(c+o)*v,e[11]=-1,e[12]=0,e[13]=0,e[14]=c*o*2*v,e[15]=0,e}function Mz(e,t,r,i,s){const o=1/Math.tan(t/2);let c;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(c=1/(i-s),e[10]=(s+i)*c,e[14]=2*s*i*c):(e[10]=-1,e[14]=-2*i),e}function Cz(e,t,r,i){const s=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),c=Math.tan(t.leftDegrees*Math.PI/180),f=Math.tan(t.rightDegrees*Math.PI/180),w=2/(c+f),v=2/(s+o);return e[0]=w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=-(c-f)*w*.5,e[9]=(s-o)*v*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function kz(e,t,r,i,s,o,c){const f=1/(t-r),w=1/(i-s),v=1/(o-c);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*w,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*v,e[11]=0,e[12]=(t+r)*f,e[13]=(s+i)*w,e[14]=(c+o)*v,e[15]=1,e}function Oz(e,t,r,i){const s=t[0],o=t[1],c=t[2];let f=s-r[0],w=o-r[1],v=c-r[2];const _=Rl();if(Math.abs(f)<_&&Math.abs(w)<_&&Math.abs(v)<_)return void Zf(e);let $=1/Math.sqrt(f*f+w*w+v*v);f*=$,w*=$,v*=$;const I=i[0],k=i[1],N=i[2];let B=k*v-N*w,L=N*f-I*v,ee=I*w-k*f;$=Math.sqrt(B*B+L*L+ee*ee),$?($=1/$,B*=$,L*=$,ee*=$):(B=0,L=0,ee=0);let ae=w*ee-v*L,he=v*B-f*ee,ye=f*L-w*B;$=Math.sqrt(ae*ae+he*he+ye*ye),$?($=1/$,ae*=$,he*=$,ye*=$):(ae=0,he=0,ye=0),e[0]=B,e[1]=ae,e[2]=f,e[3]=0,e[4]=L,e[5]=he,e[6]=w,e[7]=0,e[8]=ee,e[9]=ye,e[10]=v,e[11]=0,e[12]=-(B*s+L*o+ee*c),e[13]=-(ae*s+he*o+ye*c),e[14]=-(f*s+w*o+v*c),e[15]=1}function Pz(e,t,r,i){const s=t[0],o=t[1],c=t[2],f=i[0],w=i[1],v=i[2];let _=s-r[0],$=o-r[1],I=c-r[2],k=_*_+$*$+I*I;k>0&&(k=1/Math.sqrt(k),_*=k,$*=k,I*=k);let N=w*I-v*$,B=v*_-f*I,L=f*$-w*_;return k=N*N+B*B+L*L,k>0&&(k=1/Math.sqrt(k),N*=k,B*=k,L*=k),e[0]=N,e[1]=B,e[2]=L,e[3]=0,e[4]=$*L-I*B,e[5]=I*N-_*L,e[6]=_*B-$*N,e[7]=0,e[8]=_,e[9]=$,e[10]=I,e[11]=0,e[12]=s,e[13]=o,e[14]=c,e[15]=1,e}function Dz(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Fz(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Rz(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function RI(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function Nz(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function jz(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function Lz(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Bz(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],o=e[3],c=e[4],f=e[5],w=e[6],v=e[7],_=e[8],$=e[9],I=e[10],k=e[11],N=e[12],B=e[13],L=e[14],ee=e[15],ae=t[0],he=t[1],ye=t[2],ge=t[3],ve=t[4],ut=t[5],We=t[6],dt=t[7],ot=t[8],wt=t[9],at=t[10],Ut=t[11],yt=t[12],sr=t[13],es=t[14],ts=t[15],Ht=Rl();return Math.abs(r-ae)<=Ht*Math.max(1,Math.abs(r),Math.abs(ae))&&Math.abs(i-he)<=Ht*Math.max(1,Math.abs(i),Math.abs(he))&&Math.abs(s-ye)<=Ht*Math.max(1,Math.abs(s),Math.abs(ye))&&Math.abs(o-ge)<=Ht*Math.max(1,Math.abs(o),Math.abs(ge))&&Math.abs(c-ve)<=Ht*Math.max(1,Math.abs(c),Math.abs(ve))&&Math.abs(f-ut)<=Ht*Math.max(1,Math.abs(f),Math.abs(ut))&&Math.abs(w-We)<=Ht*Math.max(1,Math.abs(w),Math.abs(We))&&Math.abs(v-dt)<=Ht*Math.max(1,Math.abs(v),Math.abs(dt))&&Math.abs(_-ot)<=Ht*Math.max(1,Math.abs(_),Math.abs(ot))&&Math.abs($-wt)<=Ht*Math.max(1,Math.abs($),Math.abs(wt))&&Math.abs(I-at)<=Ht*Math.max(1,Math.abs(I),Math.abs(at))&&Math.abs(k-Ut)<=Ht*Math.max(1,Math.abs(k),Math.abs(Ut))&&Math.abs(N-yt)<=Ht*Math.max(1,Math.abs(N),Math.abs(yt))&&Math.abs(B-sr)<=Ht*Math.max(1,Math.abs(B),Math.abs(sr))&&Math.abs(L-es)<=Ht*Math.max(1,Math.abs(L),Math.abs(es))&&Math.abs(ee-ts)<=Ht*Math.max(1,Math.abs(ee),Math.abs(ts))}function Uz(e){const t=Rl(),r=e[0],i=e[1],s=e[2],o=e[4],c=e[5],f=e[6],w=e[8],v=e[9],_=e[10];return Math.abs(1-(r*r+o*o+w*w))<=t&&Math.abs(1-(i*i+c*c+v*v))<=t&&Math.abs(1-(s*s+f*f+_*_))<=t}function zz(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Vz=DI,Gz=RI;Object.freeze(Object.defineProperty({__proto__:null,add:Rz,adjoint:oz,copy:OI,determinant:az,equals:Bz,exactEquals:Lz,frob:Fz,fromQuat:Tz,fromQuat2:bz,fromRotation:yz,fromRotationTranslation:FI,fromRotationTranslationScale:xz,fromRotationTranslationScaleOrigin:$z,fromScaling:fz,fromTranslation:hz,fromXRotation:mz,fromYRotation:gz,fromZRotation:wz,frustum:Iz,getRotation:Ez,getScale:_z,getTranslation:Sz,hasIdentityRotation:zz,identity:Zf,invert:PI,invertOrIdentity:nz,isOrthoNormal:Uz,lookAt:Oz,mul:Vz,multiply:DI,multiplyScalar:Nz,multiplyScalarAndAdd:jz,ortho:kz,perspective:Mz,perspectiveFromFieldOfView:Cz,rotate:uz,rotateX:cz,rotateY:pz,rotateZ:dz,scale:Az,set:Ea,str:Dz,sub:Gz,subtract:RI,targetTo:Pz,translate:lz,transpose:xa},Symbol.toStringTag,{value:"Module"}));const qz=(e,t)=>{const r=Ea(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return xa(r,r)},Qz=(e,t)=>{const r=Ea(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return xa(r,r)},Wz=(e,t)=>{const r=1-t,i=Ea(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return xa(i,i)},Hz=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),s=Ea(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return xa(s,s)},Jz=(e,t)=>{const r=1-2*t,i=Ea(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return xa(i,i)},Zz=(e,t)=>{const r=Ea(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return xa(r,r)},Yz=(e,t)=>{const r=1-t,i=Ea(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return xa(i,i)};let NI=class jI{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=Di(t.strength,r.strength,i),this.radius=Di(t.radius,r.radius,i),this.threshold=Di(t.threshold,r.threshold,i)}clone(){return new jI(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:$c(this.radius),strength:this.strength,threshold:this.threshold}}},LI=class BI{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(Di(t.radius,r.radius,i))}clone(){return new BI(this.radius)}toJSON(){return{type:"blur",radius:$c(this.radius)}}},Ng=class UI{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=Di(t.amount,r.amount,i),this._updateMatrix()}clone(){return new UI(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Jf();switch(this.type){case"brightness":this._colorMatrix=qz(t,this.amount);break;case"contrast":this._colorMatrix=Qz(t,this.amount);break;case"grayscale":this._colorMatrix=Wz(t,this.amount);break;case"invert":this._colorMatrix=Jz(t,this.amount);break;case"saturate":this._colorMatrix=Zz(t,this.amount);break;case"sepia":this._colorMatrix=Yz(t,this.amount)}}},zI=class VI{constructor(t,r,i,s){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=s,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=Di(t.offsetX,r.offsetX,i),this.offsetY=Di(t.offsetY,r.offsetY,i),this.blurRadius=Di(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(Di(t.color[0],r.color[0],i)),this.color[1]=Math.round(Di(t.color[1],r.color[1],i)),this.color[2]=Math.round(Di(t.color[2],r.color[2],i)),this.color[3]=Di(t.color[3],r.color[3],i)}clone(){return new VI(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:$c(this.offsetX),yoffset:$c(this.offsetY),blurRadius:$c(this.blurRadius),color:t}}},GI=class qI{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=Di(t.angle,r.angle,i),this._updateMatrix()}clone(){return new qI(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Jf();this._colorMatrix=Hz(t,this.angle)}},QI=class WI{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=Di(t.amount,r.amount,i)}clone(){return new WI(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Di(e,t,r){return e+(t-e)*r}function $c(e){return Math.round(1e3*gs(e))/1e3}function Kz(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new Ng(e.type,0);case"saturate":case"brightness":case"contrast":return new Ng(e.type,1);case"opacity":return new QI(1);case"hue-rotate":return new GI(0);case"blur":return new LI(0);case"drop-shadow":return new zI(0,0,0,[...Pb("transparent")]);case"bloom":return new NI(0,0,1)}}function Xz(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((i,s)=>i.type===r[s].type))}function eV(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let s=i.length;s<r.length;s++)i.push(Kz(r[s]))}function tV(e){const t=e[0];return!!t&&"type"in t}let S4=class extends SyntaxError{constructor(t,r,i,s){super(t),this.expected=r,this.found=i,this.location=s,this.name="SyntaxError"}format(t){let r="Error: "+this.message;if(this.location){let i=null;const s=t.find((w=>w.source===this.location.source));s&&(i=s.text.split(/\r\n|\n|\r/g));const o=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,f=this.location.source+":"+c.line+":"+c.column;if(i){const w=this.location.end,v="".padEnd(c.line.toString().length," "),_=i[o.line-1],$=(o.line===w.line?w.column:_.length+1)-o.column||1;r+=`
 --> `+f+`
`+v+` |
`+c.line+" | "+_+`
`+v+" | "+"".padEnd(o.column-1," ")+"".padEnd($,"^")}else r+=`
 at `+f}return r}static buildMessage(t,r){function i(I){return I.codePointAt(0).toString(16).toUpperCase()}const s=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function o(I){return s?I.replace(s,(k=>"\\u{"+i(k)+"}")):I}function c(I){return o(I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(k=>"\\x0"+i(k))).replace(/[\x10-\x1F\x7F-\x9F]/g,(k=>"\\x"+i(k))))}function f(I){return o(I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(k=>"\\x0"+i(k))).replace(/[\x10-\x1F\x7F-\x9F]/g,(k=>"\\x"+i(k))))}const w={literal:I=>'"'+c(I.text)+'"',class(I){const k=I.parts.map((N=>Array.isArray(N)?f(N[0])+"-"+f(N[1]):f(N)));return"["+(I.inverted?"^":"")+k.join("")+"]"+(I.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:I=>I.description};function v(I){return w[I.type](I)}function _(I){const k=I.map(v);if(k.sort(),k.length>0){let N=1;for(let B=1;B<k.length;B++)k[B-1]!==k[B]&&(k[N]=k[B],N++);k.length=N}switch(k.length){case 1:return k[0];case 2:return k[0]+" or "+k[1];default:return k.slice(0,-1).join(", ")+", or "+k[k.length-1]}}function $(I){return I?'"'+c(I)+'"':"end of input"}return"Expected "+_(t)+" but "+$(r)+" found."}};function rV(e,t){const r={},i=(t=t!==void 0?t:{}).grammarSource,s={start:Ke};let o=Ke;const c="none",f=")",w=",",v="(",_="%",$="px",I="cm",k="mm",N="in",B="pt",L="pc",ee="deg",ae="rad",he="grad",ye="turn",ge="#",ve=".",ut="e",We=/^[ \t\n\r]/,dt=/^[a-z\-]/,ot=/^[0-9a-fA-F]/,wt=/^[+\-]/,at=/^[0-9]/,Ut=Rt("none"),yt=M("none",!1),sr=M(")",!1),es=M(",",!1),ts=lt([" ","	",`
`,"\r"],!1,!1,!1),Ht=Rt("function"),Nl=M("(",!1),Ep=Rt("identifier"),Ku=lt([["a","z"],"-"],!1,!1,!1),jl=Rt("percentage"),xp=M("%",!1),sy=Rt("length"),ny=M("px",!1),$p=M("cm",!1),oy=M("mm",!1),ay=M("in",!1),ly=M("pt",!1),Ay=M("pc",!1),uy=Rt("angle"),cy=M("deg",!1),py=M("rad",!1),dy=M("grad",!1),hy=M("turn",!1),fy=Rt("number"),Dn=Rt("color"),Ta=M("#",!1),Tp=lt([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Ip=lt(["+","-"],!1,!1,!1),Cr=lt([["0","9"]],!1,!1,!1),Xu=M(".",!1),Mp=M("e",!1);function yo(){return[]}function e0(x,K){return{type:"function",name:x,parameters:K||[]}}function yy(x,K){return K.length>0?ky(x,K,3):[x]}function my(x){return{type:"quantity",value:x.value,unit:x.unit}}function Cp(x){return{type:"color",colorType:x.type,value:x.value}}function Gv(x){return x}function gy(){return ne()}function wy(x){return{value:x,unit:"%"}}function by(x){return{value:x,unit:"px"}}function vy(x){return{value:x,unit:"cm"}}function Sy(x){return{value:x,unit:"mm"}}function _y(x){return{value:x,unit:"in"}}function t0(x){return{value:x,unit:"pt"}}function Ey(x){return{value:x,unit:"pc"}}function xy(x){return{value:x,unit:"deg"}}function Ae(x){return{value:x,unit:"rad"}}function $y(x){return{value:x,unit:"grad"}}function kp(x){return{value:x,unit:"turn"}}function Ty(x){return{value:x,unit:null}}function Iy(){return{type:"hex",value:ne()}}function r0(x){return{type:"function",value:x}}function Op(){return{type:"named",value:ne()}}function Pp(){return parseFloat(ne())}let X=0|t.peg$currPos,kt=X;const rn=[{line:1,column:1}];let rs,Z=X,ie=t.peg$maxFailExpected||[],te=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=s[t.startRule]}function ne(){return e.substring(kt,X)}function a(x=X){const K=e.codePointAt(x);return K===void 0?"":String.fromCodePoint(K)}function M(x,K){return{type:"literal",text:x,ignoreCase:K}}function lt(x,K,pe,Fe){return{type:"class",parts:x,inverted:K,ignoreCase:pe,unicode:Fe}}function St(){return{type:"end"}}function Rt(x){return{type:"other",description:x}}function Ye(x){let K,pe=rn[x];if(pe)return pe;if(x>=rn.length)K=rn.length-1;else for(K=x;!rn[--K];);for(pe=rn[K],pe={line:pe.line,column:pe.column};K<x;)e.charCodeAt(K)===10?(pe.line++,pe.column=1):pe.column++,K++;return rn[x]=pe,pe}function ht(x,K,pe){const Fe=Ye(x),_t=Ye(K);return{source:i,start:{offset:x,line:Fe.line,column:Fe.column},end:{offset:K,line:_t.line,column:_t.column}}}function Re(x){X<Z||(X>Z&&(Z=X,ie=[]),ie.push(x))}function bt(x,K,pe){return new S4(S4.buildMessage(x,K),x,K,pe)}function Ke(){let x;return x=_i(),x===r&&(x=Ll()),x}function _i(){let x,K;return te++,x=X,zt(),e.substr(X,4)===c?(K=c,X+=4):(K=r,te===0&&Re(yt)),K!==r?(zt(),kt=x,x=yo()):(X=x,x=r),te--,x===r&&te===0&&Re(Ut),x}function Ll(){let x,K;if(x=[],K=i0(),K!==r)for(;K!==r;)x.push(K),K=i0();else x=r;return x}function i0(){let x,K,pe,Fe;return x=X,zt(),K=is(),K!==r?(zt(),pe=s0(),pe===r&&(pe=null),zt(),e.charCodeAt(X)===41?(Fe=f,X++):(Fe=r,te===0&&Re(sr)),Fe!==r?(zt(),kt=x,x=e0(K,pe)):(X=x,x=r)):(X=x,x=r),x}function s0(){let x,K,pe,Fe,_t,Jt,nr,wr;if(x=X,K=Jr(),K!==r){for(pe=[],Fe=X,_t=zt(),e.charCodeAt(X)===44?(Jt=w,X++):(Jt=r,te===0&&Re(es)),Jt===r&&(Jt=null),nr=zt(),wr=Jr(),wr!==r?(_t=[_t,Jt,nr,wr],Fe=_t):(X=Fe,Fe=r);Fe!==r;)pe.push(Fe),Fe=X,_t=zt(),e.charCodeAt(X)===44?(Jt=w,X++):(Jt=r,te===0&&Re(es)),Jt===r&&(Jt=null),nr=zt(),wr=Jr(),wr!==r?(_t=[_t,Jt,nr,wr],Fe=_t):(X=Fe,Fe=r);kt=x,x=yy(K,pe)}else X=x,x=r;return x}function Jr(){let x,K;return x=X,K=My(),K===r&&(K=bs(),K===r&&(K=ze(),K===r&&(K=P()))),K!==r&&(kt=x,K=my(K)),x=K,x===r&&(x=X,K=je(),K!==r&&(kt=x,K=Cp(K)),x=K),x}function zt(){let x,K;for(te++,x=[],K=e.charAt(X),We.test(K)?X++:(K=r,te===0&&Re(ts));K!==r;)x.push(K),K=e.charAt(X),We.test(K)?X++:(K=r,te===0&&Re(ts));return te--,x}function is(){let x,K,pe;return te++,x=X,K=Bl(),K!==r?(e.charCodeAt(X)===40?(pe=v,X++):(pe=r,te===0&&Re(Nl)),pe!==r?(kt=x,x=K):(X=x,x=r)):(X=x,x=r),te--,x===r&&(K=r,te===0&&Re(Ht)),x}function Bl(){let x,K,pe;if(te++,x=X,K=[],pe=e.charAt(X),dt.test(pe)?X++:(pe=r,te===0&&Re(Ku)),pe!==r)for(;pe!==r;)K.push(pe),pe=e.charAt(X),dt.test(pe)?X++:(pe=r,te===0&&Re(Ku));else K=r;return K!==r&&(kt=x,K=gy()),x=K,te--,x===r&&(K=r,te===0&&Re(Ep)),x}function My(){let x,K,pe;return te++,x=X,zt(),K=ui(),K!==r?(e.charCodeAt(X)===37?(pe=_,X++):(pe=r,te===0&&Re(xp)),pe!==r?(kt=x,x=wy(K)):(X=x,x=r)):(X=x,x=r),te--,x===r&&te===0&&Re(jl),x}function bs(){let x,K,pe;return te++,x=X,zt(),K=ui(),K!==r?(e.substr(X,2)===$?(pe=$,X+=2):(pe=r,te===0&&Re(ny)),pe!==r?(kt=x,x=by(K)):(X=x,x=r)):(X=x,x=r),x===r&&(x=X,zt(),K=ui(),K!==r?(e.substr(X,2)===I?(pe=I,X+=2):(pe=r,te===0&&Re($p)),pe!==r?(kt=x,x=vy(K)):(X=x,x=r)):(X=x,x=r),x===r&&(x=X,zt(),K=ui(),K!==r?(e.substr(X,2)===k?(pe=k,X+=2):(pe=r,te===0&&Re(oy)),pe!==r?(kt=x,x=Sy(K)):(X=x,x=r)):(X=x,x=r),x===r&&(x=X,zt(),K=ui(),K!==r?(e.substr(X,2)===N?(pe=N,X+=2):(pe=r,te===0&&Re(ay)),pe!==r?(kt=x,x=_y(K)):(X=x,x=r)):(X=x,x=r),x===r&&(x=X,zt(),K=ui(),K!==r?(e.substr(X,2)===B?(pe=B,X+=2):(pe=r,te===0&&Re(ly)),pe!==r?(kt=x,x=t0(K)):(X=x,x=r)):(X=x,x=r),x===r&&(x=X,zt(),K=ui(),K!==r?(e.substr(X,2)===L?(pe=L,X+=2):(pe=r,te===0&&Re(Ay)),pe!==r?(kt=x,x=Ey(K)):(X=x,x=r)):(X=x,x=r)))))),te--,x===r&&te===0&&Re(sy),x}function ze(){let x,K,pe;return te++,x=X,K=ui(),K!==r?(e.substr(X,3)===ee?(pe=ee,X+=3):(pe=r,te===0&&Re(cy)),pe!==r?(kt=x,x=xy(K)):(X=x,x=r)):(X=x,x=r),x===r&&(x=X,K=ui(),K!==r?(e.substr(X,3)===ae?(pe=ae,X+=3):(pe=r,te===0&&Re(py)),pe!==r?(kt=x,x=Ae(K)):(X=x,x=r)):(X=x,x=r),x===r&&(x=X,K=ui(),K!==r?(e.substr(X,4)===he?(pe=he,X+=4):(pe=r,te===0&&Re(dy)),pe!==r?(kt=x,x=$y(K)):(X=x,x=r)):(X=x,x=r),x===r&&(x=X,K=ui(),K!==r?(e.substr(X,4)===ye?(pe=ye,X+=4):(pe=r,te===0&&Re(hy)),pe!==r?(kt=x,x=kp(K)):(X=x,x=r)):(X=x,x=r)))),te--,x===r&&(K=r,te===0&&Re(uy)),x}function P(){let x,K;return te++,x=X,zt(),K=ui(),K!==r?(kt=x,x=Ty(K)):(X=x,x=r),te--,x===r&&te===0&&Re(fy),x}function je(){let x,K,pe,Fe;if(te++,x=X,e.charCodeAt(X)===35?(K=ge,X++):(K=r,te===0&&Re(Ta)),K!==r){if(pe=[],Fe=e.charAt(X),ot.test(Fe)?X++:(Fe=r,te===0&&Re(Tp)),Fe!==r)for(;Fe!==r;)pe.push(Fe),Fe=e.charAt(X),ot.test(Fe)?X++:(Fe=r,te===0&&Re(Tp));else pe=r;pe!==r?(kt=x,x=Iy()):(X=x,x=r)}else X=x,x=r;return x===r&&(x=X,K=i0(),K!==r&&(kt=x,K=r0(K)),x=K,x===r&&(x=X,K=Bl(),K!==r&&(kt=x,K=Op()),x=K)),te--,x===r&&(K=r,te===0&&Re(Dn)),x}function ui(){let x,K,pe,Fe,_t,Jt,nr,wr;for(x=X,K=e.charAt(X),wt.test(K)?X++:(K=r,te===0&&Re(Ip)),K===r&&(K=null),pe=X,Fe=[],_t=e.charAt(X),at.test(_t)?X++:(_t=r,te===0&&Re(Cr));_t!==r;)Fe.push(_t),_t=e.charAt(X),at.test(_t)?X++:(_t=r,te===0&&Re(Cr));if(e.charCodeAt(X)===46?(_t=ve,X++):(_t=r,te===0&&Re(Xu)),_t!==r){if(Jt=[],nr=e.charAt(X),at.test(nr)?X++:(nr=r,te===0&&Re(Cr)),nr!==r)for(;nr!==r;)Jt.push(nr),nr=e.charAt(X),at.test(nr)?X++:(nr=r,te===0&&Re(Cr));else Jt=r;Jt!==r?(Fe=[Fe,_t,Jt],pe=Fe):(X=pe,pe=r)}else X=pe,pe=r;if(pe===r)if(pe=[],Fe=e.charAt(X),at.test(Fe)?X++:(Fe=r,te===0&&Re(Cr)),Fe!==r)for(;Fe!==r;)pe.push(Fe),Fe=e.charAt(X),at.test(Fe)?X++:(Fe=r,te===0&&Re(Cr));else pe=r;if(pe!==r){if(Fe=X,e.charCodeAt(X)===101?(_t=ut,X++):(_t=r,te===0&&Re(Mp)),_t!==r){if(Jt=e.charAt(X),wt.test(Jt)?X++:(Jt=r,te===0&&Re(Ip)),Jt===r&&(Jt=null),nr=[],wr=e.charAt(X),at.test(wr)?X++:(wr=r,te===0&&Re(Cr)),wr!==r)for(;wr!==r;)nr.push(wr),wr=e.charAt(X),at.test(wr)?X++:(wr=r,te===0&&Re(Cr));else nr=r;nr!==r?(_t=[_t,Jt,nr],Fe=_t):(X=Fe,Fe=r)}else X=Fe,Fe=r;Fe===r&&(Fe=null),kt=x,x=Pp()}else X=x,x=r;return x}function Cy(x,K){return x.map((function(pe){return pe[K]}))}function ky(x,K,pe){return[x].concat(Cy(K,pe))}rs=o();const n0=rs!==r&&X===e.length;function Dp(){throw rs!==r&&X<e.length&&Re(St()),bt(ie,Z<e.length?a(Z):null,Z<e.length?ht(Z,Z+1):ht(Z,Z))}return t.peg$library?{peg$result:rs,peg$currPos:X,peg$FAILED:r,peg$maxFailExpected:ie,peg$maxFailPos:Z,peg$success:n0,peg$throw:n0?void 0:Dp}:n0?rs:void Dp()}function HI(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=_4(e);return r&&r.length!==0?r:null}const t=e.map((r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new re("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:_4(r.value)}}));t.sort(((r,i)=>i.effects.length-r.effects.length));for(let r=0;r<t.length-1;r++){if(!Xz(t[r].effects,t[r+1].effects))throw new re("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});eV(t[r].effects,t[r+1].effects)}return t.sort(((r,i)=>i.scale-r.scale)),t}function _4(e){let t;if(!e)return[];try{t=rV(e)}catch(r){throw new re("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map((r=>iV(r)))}function iV(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return sV(e);case"opacity":return nV(e);case"hue-rotate":return oV(e);case"blur":return aV(e);case"drop-shadow":return lV(e);case"bloom":return AV(e)}}catch(t){throw t.details.filter=e,t}throw new re("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function sV(e){let t=1;return Hu(e.parameters,1),e.parameters.length===1&&(t=Ns(e.parameters[0])),new Ng(e.name,t)}function nV(e){let t=1;return Hu(e.parameters,1),e.parameters.length===1&&(t=Ns(e.parameters[0])),new QI(t)}function oV(e){let t=0;return Hu(e.parameters,1),e.parameters.length===1&&(t=fV(e.parameters[0])),new GI(t)}function aV(e){let t=0;return Hu(e.parameters,1),e.parameters.length===1&&(t=yv(e.parameters[0]),wp(t,e.parameters[0])),new LI(t)}function lV(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new re("effect:type-error","Accepts only one color",{});r=yV(i)}else{const s=yv(i);if(Object.isFrozen(t))throw new re("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&wp(s,i)}if(t.length<2||t.length>3)throw new re("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new zI(t[0],t[1],t[2]||0,r||JI("black"))}function AV(e){let t=1,r=0,i=0;return Hu(e.parameters,3),e.parameters[0]&&(t=Ns(e.parameters[0])),e.parameters[1]&&(r=yv(e.parameters[1]),wp(r,e.parameters[1])),e.parameters[2]&&(i=Ns(e.parameters[2])),new NI(t,r,i)}function Hu(e,t){if(e.length>t)throw new re("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function Yf(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in fv)return"<length>";if(e.unit in hv)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function wp(e,t){if(e<0)throw new re("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function uV(e){if(e.type!=="quantity"||e.unit!==null)throw new re("effect:type-error",`Expected <double>, Actual: ${Yf(e)}`,{term:e})}function cV(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new re("effect:type-error",`Expected <double> or <percentage>, Actual: ${Yf(e)}`,{term:e})}const hv={deg:1,grad:.9,rad:180/Math.PI,turn:360};function pV(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&hv[e.unit]!=null))throw new re("effect:type-error",`Expected <angle>, Actual: ${Yf(e)}`,{term:e})}const fv={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function dV(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&fv[e.unit]!=null))throw new re("effect:type-error",`Expected <length>, Actual: ${Yf(e)}`,{term:e})}function Ns(e){cV(e);const t=e.value;return wp(t,e),e.unit==="%"?.01*t:t}function hV(e){return uV(e),wp(e.value,e),e.value}function fV(e){return pV(e),e.value*hv[e.unit]||0}function yv(e){return dV(e),e.value*fv[e.unit]||0}function yV(e){switch(e.colorType){case"hex":return uR(e.value);case"named":return JI(e.value);case"function":return wV(e.value)}}function JI(e){if(!q6(e))throw new re("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return AR(e)}const mV=/^rgba?/i,gV=/^hsla?/i;function wV(e){if(Hu(e.parameters,4),mV.test(e.name))return[Ns(e.parameters[0]),Ns(e.parameters[1]),Ns(e.parameters[2]),e.parameters[3]?Ns(e.parameters[3]):1];if(gV.test(e.name))return Q6(hV(e.parameters[0]),Ns(e.parameters[1]),Ns(e.parameters[2]),e.parameters[3]?Ns(e.parameters[3]):1);throw new re("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function Yc(e,t,r){var i;try{return vV(e)}catch(s){(i=r==null?void 0:r.messages)==null||i.push(s)}return null}function Kc(e,t,r,i){try{const s=bV(e);Mr(r,s,t)}catch(s){i.messages&&i.messages.push(s)}}function bV(e){const t=HI(e);return t?tV(t)?t.map((r=>r.toJSON())):t.map((({scale:r,effects:i})=>({scale:r,value:i.map((s=>s.toJSON()))}))):null}function vV(e){if(!e||e.length===0)return null;if(SV(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:E4(r.value)});return t}return E4(e)}function SV(e){const t=e[0];return!!t&&"scale"in t}function E4(e){if(!(e!=null&&e.length))return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[Rn(r,"amount")];break;case"blur":i=[Rn(r,"radius","pt")];break;case"hue-rotate":i=[Rn(r,"angle","deg")];break;case"drop-shadow":i=[Rn(r,"xoffset","pt"),Rn(r,"yoffset","pt"),Rn(r,"blurRadius","pt"),_V(r,"color")];break;case"bloom":i=[Rn(r,"strength"),Rn(r,"radius","pt"),Rn(r,"threshold")]}const s=`${r.type}(${i.filter(Boolean).join(" ")})`;HI(s),t.push(s)}return t.join(" ")}function Rn(e,t,r){if(e[t]==null)throw new re("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function _V(e,t){if(e[t]==null)throw new re("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const EV={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Ft}},"portal-item":{read:!0,write:{layerContainerTypes:Ft}}}}},x4={read:{reader:Yc},write:{allowNull:!0,writer:Kc,layerContainerTypes:Ft}},xV={json:{read:!1,write:!1,origins:{"web-map":x4,"portal-item":x4}}},ZI=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([y(EV)],t.prototype,"blendMode",void 0),u([y(xV)],t.prototype,"effect",void 0),t=u([j("esri.layers.mixins.BlendLayer")],t),t},$V=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([y({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=u([j("esri.layers.mixins.CustomParametersMixin")],t),t},TV=96;function Gee(e,t){const r=e.extent,i=e.width,s=Sa(r==null?void 0:r.spatialReference);return r&&i?r.width/i*s*XN*TV:0}function qee(e,t,r){return IV(e,t)&&MV(e,r)}function IV(e,t){return t===0||Hs(e,t)||e<t}function MV(e,t){return t===0||Hs(e,t)||e>t}function CV(e,t){return Hs(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}const kV="randomUUID"in crypto;function mv(){if(kV)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function Qee(){return`{${mv().toUpperCase()}}`}function OV(){return`{${mv()}}`}function PV(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const $4={write:{overridePolicy:(e,t,r)=>({enabled:!r||r.filterMode==="scale"})}};let Xn=class extends nt.ClonableMixin(se){constructor(t){super(t),this.id=mv(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};u([y({type:String,json:{write:!0}})],Xn.prototype,"id",void 0),u([y({type:Number,json:$4})],Xn.prototype,"maxScale",void 0),u([y({type:Number,json:$4})],Xn.prototype,"minScale",void 0),u([y({type:String,json:{write:!0}})],Xn.prototype,"title",void 0),u([y({type:String,json:{write:!0}})],Xn.prototype,"where",void 0),Xn=u([j("esri.layers.support.DisplayFilter")],Xn);function DV(e,t){return{...t,filterMode:e.mode}}function Hee(e,t,r){const i=FV(e);if(i&&(K6(t,i[0])||N2(r,i[1])))return"";const s=Array.from(RV(e,t,r)),o=NV(s,t,r)?"1=1":s.map((c=>c.where||"1=1")).reduce(((c,f)=>Q9(c,f)),"");return o&&o!=="1=1"?o:""}function FV(e){if(YI(e)==="manual")return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:i}of e.filters)t[0]=Math.max(t[0],Xc(r)),t[1]=Math.min(t[1],of(i));return t}function*RV(e,t,r){if(YI(e)==="manual"){const i=e.filters.find((s=>s.id===e.activeFilterId));i&&(yield i)}else{typeof t=="object"&&(t=t.scale);for(const i of e.filters)jV(i.minScale,i.maxScale,t,r)&&(yield i)}}function NV(e,t,r){var o,c;if(e.length===0)return!0;const i=Xc((o=e.at(0))==null?void 0:o.minScale),s=of((c=e.at(-1))==null?void 0:c.maxScale);if(N2(i,t)||K6(s,r))return!0;for(let f=0;f<e.length-1;f++){const w=e[f],v=e[f+1];if(N2(Xc(v.minScale),of(w.maxScale)))return!0}return!1}function jV(e,t,r,i){return e=Xc(e),r=Xc(r),t=of(t),!(!Hs(r,e)&&(i??r)>e)&&!fR(t,r)&&(i===void 0||!Hs(i,e))}function YI(e){return"mode"in e?e.mode:e.filterMode}function Xc(e){return e||Number.POSITIVE_INFINITY}function of(e){return e||0}let Ja=class extends nt.ClonableMixin(se){constructor(t){super(t),this.activeFilterId=null,this.filters=new(st.ofType(Xn)),this.mode="manual"}writeFilters(t,r,i,s){const o=t.toArray();this.mode==="scale"&&o.sort(((c,f)=>{const w=CV(f.minScale,c.minScale),v=c.maxScale-f.maxScale;return w===0?v:w})),r[i]=o.map((c=>c.toJSON(s)))}write(t,r){return super.write(t,DV(this,r))}};u([y({type:String,json:{write:{overridePolicy:(e,t,r)=>({enabled:r.filterMode==="manual",isRequired:!0})}}})],Ja.prototype,"activeFilterId",void 0),u([y({type:st.ofType(Xn),nonNullable:!0,json:{write:!0}})],Ja.prototype,"filters",void 0),u([me("filters")],Ja.prototype,"writeFilters",null),u([y({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Ja.prototype,"mode",void 0),Ja=u([j("esri.layers.support.DisplayFilterInfo")],Ja);const LV=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return u([y(BV)],t.prototype,"displayFilterEnabled",void 0),u([y(UV)],t.prototype,"displayFilterInfo",void 0),t=u([j("esri.layers.mixins.DisplayFilteredLayer")],t),t},BV={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:Ft,writer(e,t,r){Mr(r,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},UV={type:Ja,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Ft},origins:{"web-scene":{write:!1,read:!1}}}},zV=OV(),KI=new Map,XI=new Map;async function Zee(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let s=KI.get(i);if(!s){const o=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await pr(o,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function Yee(e,t,r=!1){var o,c,f;if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(o=XI.get(i))==null?void 0:o.entries();if(s){for(const[w,v]of s)if(v.name===t){const _=!((c=v.stack)!=null&&c.hasForwardEdits());if(!_&&r){const[{deleteForwardEdits:$},{default:I}]=await Promise.all([Pe(()=>import("./deleteForwardEdits-D4ktZWhy.js"),__vite__mapDeps([148,5]),import.meta.url),Pe(()=>import("./DeleteForwardEditsParameters-tLTd6XrB.js"),[],import.meta.url)]),k=await $(i,w,new I({sessionId:zV,moment:v.moment}));return k.success&&((f=v.stack)==null||f.clearForwardEdits()),k.success}return _}}return!0}function VV(e,t){var s;if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=(s=XI.get(r))==null?void 0:s.entries();if(i){for(const[o,c]of i)if(c.name===t)return c.lockType==="edit"}return!1}const gv=new hb.EventEmitter;function GV(e){return gv.on("apply-edits",new WeakRef(e))}function qV(e){return gv.on("update-moment",new WeakRef(e))}function Kee(e,t,r=null,i=!1){const s=pa();return i=t==null||i,gv.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:s.promise}),s}const eM=Symbol();function Xee(e){return e!=null&&typeof e=="object"&&eM in e}function E0(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function qm(e,t,r){const i=new URL(e).host,s=KI.get(i),o=c=>!c||c===s;return o(t)&&o(r)||t===r}const QV=e=>{var i;var t;let r=(i=class extends e{constructor(...s){super(...s),this[t]=!0,this._applyEditsHandler=o=>{const{serviceUrl:c,layerId:f,gdbVersion:w,mayReceiveServiceEdits:v,result:_}=o,$=c===this.url,I=f!=null&&this.layerId!=null&&f===this.layerId,k=E0(this),N=E0(this)&&qm(c,w,this.gdbVersion);if(!$||k&&!N||!I&&!v)return;const B=_.then((L=>{var he;if(this.lastEditsEventDate=new Date,I&&(L.addedFeatures.length||L.updatedFeatures.length||L.deletedFeatures.length||L.addedAttachments.length||L.updatedAttachments.length||L.deletedAttachments.length))return this.emit("edits",q(L)),L;const ee=(he=L.editedFeatures)==null?void 0:he.find((({layerId:ye})=>ye===this.layerId));if(ee){const{adds:ye,updates:ge,deletes:ve}=ee.editedFeatures,ut={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:ye?ye.map((({attributes:We})=>({objectId:this.objectIdField&&We[this.objectIdField],globalId:this.globalIdField&&We[this.globalIdField]}))):[],deletedFeatures:ve?ve.map((({attributes:We})=>({objectId:this.objectIdField&&We[this.objectIdField],globalId:this.globalIdField&&We[this.globalIdField]}))):[],updatedFeatures:ge?ge.map((({current:{attributes:We}})=>({objectId:this.objectIdField&&We[this.objectIdField],globalId:this.globalIdField&&We[this.globalIdField]}))):[],editedFeatures:q(L.editedFeatures),exceededTransferLimit:!1,historicMoment:q(L.historicMoment)};return this.emit("edits",ut),ut}const ae={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:q(L.editedFeatures),exceededTransferLimit:!1,historicMoment:q(L.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(c,w,ae.historicMoment)&&this.emit("edits",ae),ae})).then((L=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(c,w,L.historicMoment)&&(this.historicMoment=L.historicMoment),L)));this.emit("apply-edits",{result:B})},this._updateMomentHandler=o=>{const{serviceUrl:c,gdbVersion:f,moment:w}=o,v=c===this.url,_=E0(this),$=E0(this)&&qm(c,f,this.gdbVersion),I=E0(this)&&!qm(c,this.gdbVersion,null);v&&_&&$&&I&&"historicMoment"in this&&this.historicMoment!==w&&(this.historicMoment=w)},this.when().then((()=>{this.addHandles(GV(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(qV(this._updateMomentHandler))}),(()=>{}))}_shouldUpdateHistoricMoment(s,o,c){return"historicMoment"in this&&this.historicMoment!==c&&VV(s,o)}},t=eM,i);return u([y()],r.prototype,"lastEditsEventDate",void 0),r=u([j("esri.layers.mixins.EditBusLayer")],r),r};var jg;let yA=jg=class extends se{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new jg({mapLayerId:e,gdbVersion:t})}};u([Ce({mapLayer:"map-layer"}),y({json:{write:{isRequired:!0}}})],yA.prototype,"type",void 0),u([y({type:Ct,json:{write:{isRequired:!0}}})],yA.prototype,"mapLayerId",void 0),u([y({type:String,json:{write:!0}})],yA.prototype,"gdbVersion",void 0),yA=jg=u([j("esri.layers.support.source.MapLayerSource")],yA);var Lg;let Vn=Lg=class extends se{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:s}=this,o={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:s};return new Lg(o)}};u([Ce({queryTable:"query-table"}),y({json:{write:{isRequired:!0}}})],Vn.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],Vn.prototype,"workspaceId",void 0),u([y({type:String,json:{write:!0}})],Vn.prototype,"query",void 0),u([y({type:String,json:{write:!0}})],Vn.prototype,"oidFields",void 0),u([y({type:ke,json:{write:!0}})],Vn.prototype,"spatialReference",void 0),u([Ce(fL)],Vn.prototype,"geometryType",void 0),Vn=Lg=u([j("esri.layers.support.source.QueryTableDataSource")],Vn);var Bg;let mA=Bg=class extends se{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new Bg({workspaceId:e,dataSourceName:t})}};u([Ce({raster:"raster"}),y({json:{write:{isRequired:!0}}})],mA.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],mA.prototype,"dataSourceName",void 0),u([y({type:String,json:{write:!0}})],mA.prototype,"workspaceId",void 0),mA=Bg=u([j("esri.layers.support.source.RasterDataSource")],mA);var Ug;let Za=Ug=class extends se{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new Ug({workspaceId:e,gdbVersion:t,dataSourceName:r})}};u([Ce({table:"table"}),y({json:{write:{isRequired:!0}}})],Za.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],Za.prototype,"workspaceId",void 0),u([y({type:String,json:{write:!0}})],Za.prototype,"gdbVersion",void 0),u([y({type:String,json:{write:!0}})],Za.prototype,"dataSourceName",void 0),Za=Ug=u([j("esri.layers.support.source.TableDataSource")],Za);var zg,Vg;const WV=Ur()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let zi=zg=class extends se{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return T4()(e,t,r)}castLeftTableSource(e){return In(Gg(),e)}readRightTableSource(e,t,r){return T4()(e,t,r)}castRightTableSource(e){return In(Gg(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:s}=this,o={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:s};return new zg(o)}};u([Ce({joinTable:"join-table"}),y({json:{write:{isRequired:!0}}})],zi.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],zi.prototype,"leftTableKey",void 0),u([y({type:String,json:{write:!0}})],zi.prototype,"rightTableKey",void 0),u([y({json:{write:!0}})],zi.prototype,"leftTableSource",void 0),u([ce("leftTableSource")],zi.prototype,"readLeftTableSource",null),u([Yt("leftTableSource")],zi.prototype,"castLeftTableSource",null),u([y({json:{write:!0}})],zi.prototype,"rightTableSource",void 0),u([ce("rightTableSource")],zi.prototype,"readRightTableSource",null),u([Yt("rightTableSource")],zi.prototype,"castRightTableSource",null),u([Ce(WV)],zi.prototype,"joinType",void 0),zi=zg=u([j("esri.layers.support.source.JoinTableDataSource")],zi);let Qm=null;function T4(){return Qm||(Qm=ju({types:Gg()})),Qm}let Wm=null;function Gg(){return Wm||(Wm={key:"type",base:null,typeMap:{"data-layer":js,"map-layer":yA}}),Wm}const HV={key:"type",base:null,typeMap:{"join-table":zi,"query-table":Vn,raster:mA,table:Za}};var du;let js=(du=class extends se{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:r}=this;return new Vg({fields:t,dataSource:r})}},Vg=du,du);u([Ce({dataLayer:"data-layer"}),y({json:{write:{isRequired:!0}}})],js.prototype,"type",void 0),u([y({type:[Nr],json:{write:!0}})],js.prototype,"fields",void 0),u([y({types:HV,json:{write:!0}})],js.prototype,"dataSource",void 0),js=Vg=u([j("esri.layers.support.source.DataLayerSource")],js),js.from=Br(js);let Ya=class extends nt.ClonableMixin(se){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([y({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Ya.prototype,"onFields",void 0),u([y({type:String,json:{write:!0}})],Ya.prototype,"operator",void 0),u([y({type:String,json:{write:!0}})],Ya.prototype,"searchTerm",void 0),u([y({type:String,json:{write:!0}})],Ya.prototype,"searchType",void 0),Ya=u([j("esri.rest.support.FullTextSearch")],Ya);const JV=Ya;var qg;const I4=new pt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Ka=qg=class extends se{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new qg(q({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([y({type:ct,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ka.prototype,"extent",void 0),u([y({type:["view","edit"],json:{write:!0}})],Ka.prototype,"mode",void 0),u([y({type:String,json:{read:I4.read,write:I4.write}})],Ka.prototype,"originPosition",void 0),u([y({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ka.prototype,"tolerance",void 0),Ka=qg=u([j("esri.rest.support.QuantizationParameters")],Ka);const ZV=new pt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var Qg;const M4=new pt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let ks=Qg=class extends se{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=q(e))}clone(){return new Qg({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:q(this.statisticParameters)})}};u([y({type:Number,json:{write:!0}})],ks.prototype,"maxPointCount",void 0),u([y({type:Number,json:{write:!0}})],ks.prototype,"maxRecordCount",void 0),u([y({type:Number,json:{write:!0}})],ks.prototype,"maxVertexCount",void 0),u([y({type:String,json:{write:!0}})],ks.prototype,"onStatisticField",void 0),u([y({type:String,json:{write:!0}})],ks.prototype,"outStatisticFieldName",void 0),u([y({type:String,json:{read:{source:"statisticType",reader:M4.read},write:{target:"statisticType",writer:M4.write}}})],ks.prototype,"statisticType",void 0),u([y({type:Object})],ks.prototype,"statisticParameters",void 0),u([me("statisticParameters")],ks.prototype,"writeStatisticParameters",null),ks=Qg=u([j("esri.rest.support.StatisticDefinition")],ks);var uh;const YV=new pt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var wl;let Te=(wl=class extends se{static from(t){return $f(uh,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,r){r.historicMoment=t&&t.getTime()}writeParameterValues(t,r){if(t){const i={};for(const s in t){const o=t[s];Array.isArray(o)?i[s]=o.map((c=>c instanceof Date?c.getTime():c)):o instanceof Date?i[s]=o.getTime():i[s]=o}r.parameterValues=i}}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,r.where="1=1"}writeWhere(t,r){r.where=t||"1=1"}clone(){return new uh(q({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},uh=wl,wl.MAX_MAX_RECORD_COUNT_FACTOR=5,wl);u([y({json:{write:!0}})],Te.prototype,"aggregateIds",void 0),u([y({type:Boolean,json:{write:!0}})],Te.prototype,"cacheHint",void 0),u([y({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"compactGeometryEnabled",void 0),u([y({json:{write:!0}})],Te.prototype,"datumTransformation",void 0),u([Yt("datumTransformation")],Te.prototype,"castDatumTransformation",null),u([y({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"defaultSpatialReferenceEnabled",void 0),u([y({type:Number,json:{write:!0}})],Te.prototype,"distance",void 0),u([y({type:js,json:{write:!0}})],Te.prototype,"dynamicDataSource",void 0),u([y({type:String,json:{write:!0}})],Te.prototype,"formatOf3DObjects",void 0),u([y({type:[JV],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Te.prototype,"fullText",void 0),u([y({type:String,json:{write:!0}})],Te.prototype,"gdbVersion",void 0),u([y({types:Qf,json:{read:mp,write:!0}})],Te.prototype,"geometry",void 0),u([y({type:Number,json:{write:!0}})],Te.prototype,"geometryPrecision",void 0),u([y({type:[String],json:{write:!0}})],Te.prototype,"groupByFieldsForStatistics",void 0),u([y({type:String,json:{write:!0}})],Te.prototype,"having",void 0),u([y({type:Date})],Te.prototype,"historicMoment",void 0),u([me("historicMoment")],Te.prototype,"writeHistoricMoment",null),u([y({type:Number,json:{write:!0}})],Te.prototype,"maxAllowableOffset",void 0),u([y({type:Number,cast:e=>e<1?1:e>Te.MAX_MAX_RECORD_COUNT_FACTOR?Te.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Te.prototype,"maxRecordCountFactor",void 0),u([y({type:["xyFootprint"],json:{write:!0}})],Te.prototype,"multipatchOption",void 0),u([y({type:Number,json:{read:{source:"resultRecordCount"}}})],Te.prototype,"num",void 0),u([y({json:{write:!0}})],Te.prototype,"objectIds",void 0),u([y({type:[String],json:{write:!0}})],Te.prototype,"orderByFields",void 0),u([y({type:[String],json:{write:!0}})],Te.prototype,"outFields",void 0),u([y({type:ke,json:{name:"outSR",write:!0}})],Te.prototype,"outSpatialReference",void 0),u([y({type:[ks],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Te.prototype,"outStatistics",void 0),u([y({json:{write:!0}})],Te.prototype,"parameterValues",void 0),u([me("parameterValues")],Te.prototype,"writeParameterValues",null),u([y({type:gt,json:{write:!0}})],Te.prototype,"pixelSize",void 0),u([y({type:Ka,json:{write:!0}})],Te.prototype,"quantizationParameters",void 0),u([y({type:[Object],json:{write:!0}})],Te.prototype,"rangeValues",void 0),u([y({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Te.prototype,"relationParameter",void 0),u([y({type:String,json:{write:!0}})],Te.prototype,"resultType",void 0),u([y({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"returnCentroid",void 0),u([y({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"returnDistinctValues",void 0),u([y({type:Boolean,json:{default:!0,write:!0}})],Te.prototype,"returnExceededLimitFeatures",void 0),u([y({type:Boolean,json:{write:!0}})],Te.prototype,"returnGeometry",void 0),u([y({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"returnQueryGeometry",void 0),u([y({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"returnM",void 0),u([y({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Te.prototype,"returnZ",void 0),u([y({type:Boolean,json:{write:!0}})],Te.prototype,"returnTrueCurves",void 0),u([y({type:ke,json:{write:!0}})],Te.prototype,"sourceSpatialReference",void 0),u([Ce(ZV,{ignoreUnknown:!1,name:"spatialRel"})],Te.prototype,"spatialRelationship",void 0),u([y({type:Number,json:{read:{source:"resultOffset"}}})],Te.prototype,"start",void 0),u([me("start"),me("num")],Te.prototype,"writeStart",null),u([y({type:String,json:{write:!0}})],Te.prototype,"sqlFormat",void 0),u([y({type:String,json:{write:!0}})],Te.prototype,"text",void 0),u([y({type:fr,json:{write:!0}})],Te.prototype,"timeExtent",void 0),u([y({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"timeReferenceUnknownClient",void 0),u([Ce(YV,{ignoreUnknown:!1}),y({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],Te.prototype,"units",void 0),u([y({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],Te.prototype,"where",void 0),u([me("where")],Te.prototype,"writeWhere",null),Te=uh=u([j("esri.rest.support.Query")],Te);var Wg;const Hm=new pt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Jm=new pt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let pn=Wg=class extends se{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:o,units:c,distance:f}=this;return new Te({geometry:q(r),objectIds:q(o),spatialRelationship:i,timeExtent:q(s),where:t,units:c,distance:f,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:s,units:o,distance:c}=this;return new Wg({geometry:q(t),objectIds:q(s),spatialRelationship:r,timeExtent:q(i),where:e,units:o,distance:c})}};u([y({type:String,json:{write:!0}})],pn.prototype,"where",void 0),u([y({types:Qf,json:{write:!0}})],pn.prototype,"geometry",void 0),u([y({type:Hm.apiValues,json:{name:"spatialRel",read:{reader:Hm.read},write:{allowNull:!1,writer:Hm.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],pn.prototype,"spatialRelationship",void 0),u([y({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],pn.prototype,"distance",void 0),u([y({type:[Number],json:{write:!0}})],pn.prototype,"objectIds",void 0),u([y({type:Jm.apiValues,json:{read:Jm.read,write:{writer:Jm.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],pn.prototype,"units",void 0),u([y({type:fr,json:{write:!0}})],pn.prototype,"timeExtent",void 0),pn=Wg=u([j("esri.layers.support.FeatureFilter")],pn);const KV=pn;var Hg;const C4={read:{reader:Yc},write:{writer:Kc,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},k4={read:{reader:Yc},write:{writer:Kc,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},O4={name:"showExcludedLabels",default:!0};let Xa=Hg=class extends se{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var i,s;const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const o=Object.keys(r.filter);if(o.length>1||o[0]!=="where")return(i=t.messages)==null||i.push(new re("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return(s=t.messages)==null||s.push(new re("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new Hg({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([y({type:KV,json:{write:{allowNull:!0,writer(e,t,r,i){const s=e==null?void 0:e.write({},i);s&&Object.keys(s).length!==0?Mr(r,s,t):Mr(r,null,t)}}}})],Xa.prototype,"filter",void 0),u([y({json:{read:Yc,write:{writer:Kc,allowNull:!0},origins:{"web-map":C4,"portal-item":C4}}})],Xa.prototype,"includedEffect",void 0),u([y({json:{read:Yc,write:{writer:Kc,allowNull:!0},origins:{"web-map":k4,"portal-item":k4}}})],Xa.prototype,"excludedEffect",void 0),u([y({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":O4,"portal-item":O4}}})],Xa.prototype,"excludedLabelsVisible",void 0),Xa=Hg=u([j("esri.layers.support.FeatureEffect")],Xa);const P4={write:{allowNull:!0}},XV={type:Xa,json:{origins:{"web-map":P4,"portal-item":P4}}},eG=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return u([y(XV)],t.prototype,"featureEffect",void 0),t=u([j("esri.layers.mixins.FeatureEffectLayer")],t),t};var X0;const af=Ur()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),tM=af.jsonValues.slice();T7(tM,"orthometric");const Tc=Ur()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Os=X0=class extends se{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return af.write(e,t,r)}readHeightModel(e,t,r){return af.read(e)||(r!=null&&r.messages&&r.messages.push(tG(e,{context:r})),null)}readHeightUnit(e,t,r){return Tc.read(e)||(r!=null&&r.messages&&r.messages.push(D4(e,{context:r})),null)}readHeightUnitService(e,t,r){return tv(e)||Tc.read(e)||(r!=null&&r.messages&&r.messages.push(D4(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new X0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=lj(t);return new X0({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new X0;return t.read(e,{origin:"web-scene"}),t}};function D4(e,t){return new Mn("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function tG(e,t){return new Mn("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}u([y({type:af.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:tM,default:"ellipsoidal",write:{isRequired:!0}}}}})],Os.prototype,"heightModel",void 0),u([me("web-scene","heightModel")],Os.prototype,"writeHeightModel",null),u([ce(["web-scene","service"],"heightModel")],Os.prototype,"readHeightModel",null),u([y({type:Tc.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Tc.jsonValues,write:{writer:Tc.write,isRequired:!0}}}}})],Os.prototype,"heightUnit",void 0),u([ce("web-scene","heightUnit")],Os.prototype,"readHeightUnit",null),u([ce("service","heightUnit")],Os.prototype,"readHeightUnitService",null),u([y({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Os.prototype,"vertCRS",void 0),u([ce("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Os.prototype,"readVertCRS",null),Os=X0=u([j("esri.geometry.HeightModelInfo")],Os);var Jg;let ec=Jg=class extends se{constructor(e){super(e)}async collectRequiredFields(e,t){return tn(e,t,this.expression)}clone(){return new Jg({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};u([y({type:String,json:{write:{isRequired:!0}}})],ec.prototype,"expression",void 0),u([y({type:String,json:{write:!0}})],ec.prototype,"title",void 0),ec=Jg=u([j("esri.symbols.support.FeatureExpressionInfo")],ec);const F4=ec,wv={unknown:1,inches:ti(1,"meters","inches"),feet:ti(1,"meters","feet"),"us-feet":ti(1,"meters","us-feet"),yards:ti(1,"meters","yards"),miles:ti(1,"meters","miles"),"nautical-miles":ti(1,"meters","nautical-miles"),millimeters:ti(1,"meters","millimeters"),centimeters:ti(1,"meters","centimeters"),decimeters:ti(1,"meters","decimeters"),meters:ti(1,"meters","meters"),kilometers:ti(1,"meters","kilometers"),"decimal-degrees":1/aj(1,"meters",Kt.radius)};function tte(e){return 1/(wv[e]||1)}function rG(){const e=Object.keys(wv);return f$(e,"decimal-degrees"),e.sort(),e}const iG=rG();var Zg;const ad=Ur()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),R4=new pt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});var hu;let yn=(hu=class extends se{constructor(t){super(t),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(t,r){return t!=null?t.expression?t:void 0:r.featureExpression&&r.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(t,r,i,s){r[i]=t.write({},s),t.expression==="0"&&(r.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:r}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||r?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,r):null}clone(){return new Zg({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&U7(this.featureExpressionInfo,t.featureExpressionInfo)}},Zg=hu,hu);u([y({type:F4,json:{write:!0}})],yn.prototype,"featureExpressionInfo",void 0),u([ce("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],yn.prototype,"readFeatureExpressionInfo",null),u([me("featureExpressionInfo",{featureExpressionInfo:{type:F4},"featureExpression.value":{type:[0]}})],yn.prototype,"writeFeatureExpressionInfo",null),u([y({type:ad.apiValues,nonNullable:!0,json:{type:ad.jsonValues,read:ad.read,write:{writer:ad.write,isRequired:!0}}})],yn.prototype,"mode",null),u([y({type:Number,json:{write:!0}})],yn.prototype,"offset",void 0),u([y({type:iG,json:{type:String,read:R4.read,write:R4.write}})],yn.prototype,"unit",null),yn=Zg=u([j("esri.symbols.support.ElevationInfo")],yn);let gA=class extends se{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};u([y({type:String,json:{write:!0}})],gA.prototype,"description",void 0),u([y({type:String,json:{write:!0}})],gA.prototype,"label",void 0),u([y()],gA.prototype,"type",void 0),gA=u([j("esri.tables.elements.AttributeTableElement")],gA);const Ju=gA;let tc=class extends nt.ClonableMixin(Ju){constructor(t){super(t),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};u([y({type:["auto"],json:{write:!0}})],tc.prototype,"displayType",void 0),u([y({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],tc.prototype,"type",void 0),tc=u([j("esri.tables.elements.AttributeTableAttachmentElement")],tc);const rM=tc;let el=class extends nt.ClonableMixin(Ju){constructor(t){super(t),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};u([y({type:String,json:{read:!1,write:!1}})],el.prototype,"description",void 0),u([y({type:String,json:{write:{enabled:!0,isRequired:!0}}})],el.prototype,"fieldName",void 0),u([y({type:String,json:{read:!1,write:!1}})],el.prototype,"label",void 0),u([y({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],el.prototype,"type",void 0),el=u([j("esri.tables.elements.AttributeTableFieldElement")],el);const iM=el;let rc=class extends nt.ClonableMixin(Ju){constructor(t){super(t),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};u([y({type:Number,json:{type:Ct,write:{enabled:!0,isRequired:!0}}})],rc.prototype,"relationshipId",void 0),u([y({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],rc.prototype,"type",void 0),rc=u([j("esri.tables.elements.AttributeTableRelationshipElement")],rc);const sM=rc,nM={base:Ju,key:"type",typeMap:{attachment:rM,field:iM,relationship:sM}};function sG(e){return{typesWithGroup:{base:Ju,key:"type",typeMap:{attachment:rM,field:iM,group:e,relationship:sM}},typesWithoutGroup:nM}}let ic=class extends nt.ClonableMixin(Ju){constructor(t){super(t),this.elements=null,this.type="group"}clone(){return super.clone()}};u([y({types:[nM],json:{name:"attributeTableElements",write:!0}})],ic.prototype,"elements",void 0),u([y({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],ic.prototype,"type",void 0),ic=u([j("esri.tables.elements.AttributeTableGroupElement")],ic);const nG=ic;let sc=class extends nt.ClonableMixin(se){constructor(t){super(t),this.field=null,this.order=null}};u([y({type:String,json:{write:!0}})],sc.prototype,"field",void 0),u([y({type:["asc","desc"],json:{write:!0}})],sc.prototype,"order",void 0),sc=u([j("esri.tables.support.FieldOrder")],sc);const oG=sc;var Yg;const aG=sG(nG);let nc=Yg=class extends se{constructor(e){super(e),this.elements=null,this.orderByFields=null}clone(){return new Yg({elements:q(this.elements),orderByFields:q(this.orderByFields)})}};u([y({types:[aG.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],nc.prototype,"elements",void 0),u([y({type:[oG],json:{write:!0}})],nc.prototype,"orderByFields",void 0),nc=Yg=u([j("esri.tables.AttributeTableTemplate")],nc);const lG=nc,AG={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Ft}}},Kf={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},Xf={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Ft}}},uG={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:_l}}},cG={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Ft}}},pG={value:null,type:yn,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Ft}}};function lte(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const oM={write:{enabled:!0,layerContainerTypes:Ft},read:!0},Kg={type:Number,json:{origins:{"web-document":oM,"portal-item":{write:{layerContainerTypes:Ft}}}}},dG={...Kg,json:{...Kg.json,origins:{"web-document":{...oM,write:{enabled:!0,layerContainerTypes:Ft,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>{var i;return r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(i=t.layerDefinition)!=null&&i.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?nf(t.layerDefinition.drawingInfo.transparency):void 0:nf(t.drawingInfo.transparency)}}}},Ate={type:ct,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=ct.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=ke.fromJSON(t.spatialReference)),r}}}},read:!1}},hG={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},fG={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Ft}}},yG={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Ft}}},aM={json:{write:{ignoreOrigin:!0,layerContainerTypes:Ft},origins:{"web-map":{read:!1,write:!1}}}},mG={type:lG,json:{name:"attributeTableInfo",write:!0}};let Gn=class extends nt.ClonableMixin(se){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};u([y()],Gn.prototype,"creatorField",void 0),u([y()],Gn.prototype,"creationDateField",void 0),u([y()],Gn.prototype,"editorField",void 0),u([y()],Gn.prototype,"editDateField",void 0),u([y()],Gn.prototype,"realm",void 0),u([y(zh("dateFieldsTimeReference",!0))],Gn.prototype,"timeZone",void 0),Gn=u([j("esri.layers.support.EditFieldsInfo")],Gn);let mn=class extends nt.ClonableMixin(se){constructor(t){super(t)}};u([y({constructOnly:!0,json:{write:!0}})],mn.prototype,"name",void 0),u([y({constructOnly:!0,json:{write:!0}})],mn.prototype,"fields",void 0),u([y({constructOnly:!0,json:{write:!0}})],mn.prototype,"isAscending",void 0),u([y({constructOnly:!0,json:{write:!0}})],mn.prototype,"indexType",void 0),u([y({constructOnly:!0,json:{write:!0}})],mn.prototype,"isUnique",void 0),u([y({constructOnly:!0,json:{write:!0}})],mn.prototype,"description",void 0),mn=u([j("esri.layers.support.FeatureIndex")],mn);function pte(e,t,r){return ob(e.map(((i,s)=>t.apply(r,[i,s]))))}async function dte(e,t,r){return(await ob(e.map(((i,s)=>t.apply(r,[i,s]))))).map((i=>i.value))}function bv(e){return{ok:!0,value:e}}function vv(e){return{ok:!1,error:e}}function gG(e){return e!=null&&e.ok===!0?e.value:null}function wG(e){return e!=null&&e.ok===!1?e.error:null}async function lM(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return bv(await e)}catch(t){return vv(t)}}async function bG(e){try{return bv(await e)}catch(t){return vn(t),vv(t)}}function vG(e,t){return new Fo(e,t)}let Fo=class extends Bt{get value(){return gG(this._result)}get error(){return wG(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=I$(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then((s=>{this._result=bv(s),this._cleanup()}),(s=>{this._result=vv(s),this._cleanup()})),this._abortHandle=vl(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Qs(this._abortHandle),this._abortController=null}};u([y()],Fo.prototype,"value",null),u([y()],Fo.prototype,"error",null),u([y()],Fo.prototype,"finished",null),u([y()],Fo.prototype,"promise",void 0),u([y()],Fo.prototype,"_result",void 0),Fo=u([j("esri.core.asyncUtils.ReactiveTask")],Fo);async function SG(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=AM(e));const i=_G(e),s=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let o=null;for(;;){const c=await e.source.queryFeaturesJSON(t,r);if(o==null?o=c:o.features=o.features.concat(c.features),o.exceededTransferLimit=c.exceededTransferLimit,!s||!c.exceededTransferLimit)break;t.start+=i}return o}function _G(e){return AM(e)*EG(e)}function EG(e){return e.capabilities.query.maxRecordCount||2e3}function AM(e){return e.capabilities.query.supportsMaxRecordCountFactor?Te.MAX_MAX_RECORD_COUNT_FACTOR:1}const fte={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Xg(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function yte(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function mte(e){var r;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((r=e==null?void 0:e.source)==null?void 0:r.type)==="feature-layer"}async function uM(e,t){const r=et==null?void 0:et.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const s=`${e.slice(0,i)}/rest/info`,o=t!=null?t.signal:null,{data:c}=await pr(s,{query:{f:"json"},responseType:"json",signal:o});return(c==null?void 0:c.owningSystemUrl)||null}function xG(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function gte(e){return xG(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function $G(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function wte(e){return!!$G(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}function TG(e,t){return null}function bte(e){return null}function ew(e){return!e||e.type==="Feature Service"&&!e.sourceUrl}function vte(e,t){!t||!ew(e)||TG(e.url)}var tw;let oc=tw=class extends se{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new tw({minValue:this.minValue,maxValue:this.maxValue})}};u([y({type:Number,json:{write:!0}})],oc.prototype,"minValue",void 0),u([y({type:Number,json:{write:!0}})],oc.prototype,"maxValue",void 0),oc=tw=u([j("esri.renderers.support.AuthoringInfoClassBreakInfo")],oc);var rw;let zo=rw=class extends se{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new rw({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:q(this.classBreakInfos)})}};u([y({type:String,json:{write:!0}})],zo.prototype,"field",void 0),u([y({type:String,json:{write:!0}})],zo.prototype,"normalizationField",void 0),u([y({type:String,json:{write:!0}})],zo.prototype,"label",void 0),u([y({type:[oc],json:{write:!0}})],zo.prototype,"classBreakInfos",void 0),zo=rw=u([j("esri.renderers.support.AuthoringInfoFieldInfo")],zo);var iw;let wA=iw=class extends se{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new iw({label:this.label,value:this.value,size:this.size})}};u([y({type:String,json:{write:!0}})],wA.prototype,"label",void 0),u([y({type:Number,json:{write:!0}})],wA.prototype,"size",void 0),u([y({type:Number,json:{write:!0}})],wA.prototype,"value",void 0),wA=iw=u([j("esri.renderers.support.AuthoringInfoSizeStop")],wA);const IG=wA;var sw;const ld=new pt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Ad=new pt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),N4={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},j4=["high-to-low","above-and-below","centered-on","extremes"],L4=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],B4=["seconds","minutes","hours","days","months","years"],MG=["circle","diamond","hexagon-flat","hexagon-pointy","square"],CG=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let br=sw=class extends se{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(e){this._set("spikeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new sw({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:q(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([y({types:N4,json:{write:!0}})],br.prototype,"endTime",void 0),u([Yt("endTime")],br.prototype,"castEndTime",null),u([y({type:String,json:{write:!0}})],br.prototype,"field",void 0),u([y({type:Number,json:{write:!0}})],br.prototype,"maxSliderValue",void 0),u([y({type:Number,json:{write:!0}})],br.prototype,"minSliderValue",void 0),u([y({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],br.prototype,"normalizationField",null),u([y({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],br.prototype,"referenceSizeScale",null),u([y({type:MG,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],br.prototype,"referenceSizeSymbolStyle",null),u([y({type:CG,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],br.prototype,"spikeSymbolStyle",null),u([y({types:N4,json:{write:!0}})],br.prototype,"startTime",void 0),u([Yt("startTime")],br.prototype,"castStartTime",null),u([y({type:[IG],json:{origins:{"web-scene":{write:!1}},write:!0}})],br.prototype,"sizeStops",null),u([y({type:ld.apiValues,value:null,json:{type:ld.jsonValues,read:ld.read,write:ld.write}})],br.prototype,"style",null),u([y({type:L4,value:null,json:{type:L4,origins:{"web-scene":{type:j4,write:{writer:(e,t)=>{j4.includes(e)&&(t.theme=e)}}}},write:!0}})],br.prototype,"theme",null),u([y({type:Ad.apiValues,json:{type:Ad.jsonValues,read:Ad.read,write:Ad.write}})],br.prototype,"type",void 0),u([y({type:B4,json:{type:B4,write:!0}})],br.prototype,"units",void 0),br=sw=u([j("esri.renderers.support.AuthoringInfoVisualVariable")],br);const kG=br;let qA=class extends se{constructor(t){super(t),this.type=null}};u([y({readOnly:!0,json:{read:!1,write:!0}})],qA.prototype,"type",void 0),qA=u([j("esri.rest.support.ColorRamp")],qA);var nw;let no=nw=class extends qA{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new nw({fromColor:q(this.fromColor),toColor:q(this.toColor),algorithm:this.algorithm})}};u([Ce({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],no.prototype,"algorithm",void 0),u([y({type:it,json:{type:[Ct],write:!0}})],no.prototype,"fromColor",void 0),u([y({type:it,json:{type:[Ct],write:!0}})],no.prototype,"toColor",void 0),u([y({type:["algorithmic"]})],no.prototype,"type",void 0),no=nw=u([j("esri.rest.support.AlgorithmicColorRamp")],no);var ow;let DA=ow=class extends qA{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new ow({colorRamps:q(this.colorRamps)})}};u([y({type:[no],json:{write:!0}})],DA.prototype,"colorRamps",void 0),u([y({type:["multipart"]})],DA.prototype,"type",void 0),DA=ow=u([j("esri.rest.support.MultipartColorRamp")],DA);const OG={key:"type",base:qA,typeMap:{algorithmic:no,multipart:DA}};function PG(e){return e!=null&&e.type?e.type==="algorithmic"?no.fromJSON(e):e.type==="multipart"?DA.fromJSON(e):null:null}var aw;const Fa=new pt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),ud=new pt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),U4=new pt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),z4=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],DG=["high-to-low","above-and-below","above","below"],FG=["flow-line","wave-front"],RG=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Gt=aw=class extends se{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?PG(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new aw({classificationMethod:this.classificationMethod,colorRamp:q(this.colorRamp),fadeRatio:q(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:q(this.field1),field2:q(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((t=>t.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([y({type:Fa.apiValues,value:null,json:{type:Fa.jsonValues,read:Fa.read,write:Fa.write,origins:{"web-document":{default:"manual",type:Fa.jsonValues,read:Fa.read,write:Fa.write}}}})],Gt.prototype,"classificationMethod",null),u([y({types:OG,json:{write:!0}})],Gt.prototype,"colorRamp",void 0),u([ce("colorRamp")],Gt.prototype,"readColorRamp",null),u([y({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Gt.prototype,"fadeRatio",void 0),u([y({type:[String],value:null,json:{write:!0}})],Gt.prototype,"fields",null),u([y({type:zo,value:null,json:{write:!0}})],Gt.prototype,"field1",null),u([y({type:zo,value:null,json:{write:!0}})],Gt.prototype,"field2",null),u([y({type:FG,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Gt.prototype,"flowTheme",null),u([y({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Gt.prototype,"focus",null),u([y({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Gt.prototype,"isAutoGenerated",void 0),u([y({type:Number,value:null,json:{type:Ct,write:!0}})],Gt.prototype,"numClasses",null),u([y({type:z4,json:{type:z4,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Gt.prototype,"lengthUnit",void 0),u([y({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Gt.prototype,"maxSliderValue",void 0),u([y({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Gt.prototype,"minSliderValue",void 0),u([y({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Gt.prototype,"statistics",null),u([y({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Gt.prototype,"standardDeviationInterval",null),u([y({type:ud.apiValues,value:null,json:{type:ud.jsonValues,read:ud.read,write:ud.write,origins:{"web-scene":{type:U4.jsonValues,write:{writer:U4.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Gt.prototype,"type",null),u([y({type:[kG],json:{write:!0}})],Gt.prototype,"visualVariables",void 0),u([y({type:RG,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Gt.prototype,"univariateSymbolStyle",null),u([y({type:DG,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Gt.prototype,"univariateTheme",null),Gt=aw=u([j("esri.renderers.support.AuthoringInfo")],Gt);const Zm=new pt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Ji=class extends se{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([y({type:Gt,json:{write:!0}})],Ji.prototype,"authoringInfo",void 0),u([y({type:Zm.apiValues,readOnly:!0,json:{type:Zm.jsonValues,read:!1,write:{writer:Zm.write,ignoreOrigin:!0,isRequired:!0}}})],Ji.prototype,"type",void 0),Ji=u([j("esri.renderers.Renderer")],Ji);let ac=class extends nt.ClonableMixin(se){constructor(){super(...arguments),this.showLegend=null,this.title=null}};u([y({type:Boolean,json:{write:!0}})],ac.prototype,"showLegend",void 0),u([y({type:String,json:{write:!0}})],ac.prototype,"title",void 0),ac=u([j("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],ac);const cM=ac,Ym=new pt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ri=class extends se{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(xe.getLogger(this).error(".field: field must be a string value"),null):ap(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([y()],ri.prototype,"index",void 0),u([y({type:Ym.apiValues,readOnly:!0,json:{read:Ym.read,write:{writer:Ym.write,isRequired:!0}}})],ri.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],ri.prototype,"field",void 0),u([Yt("field")],ri.prototype,"castField",null),u([y({type:String,json:{write:!0}})],ri.prototype,"valueExpression",void 0),u([y({type:String,json:{write:!0}})],ri.prototype,"valueExpressionTitle",void 0),u([y({readOnly:!0})],ri.prototype,"arcadeRequired",null),u([y({type:cM,json:{write:!0}})],ri.prototype,"legendOptions",void 0),ri=u([j("esri.renderers.visualVariables.VisualVariable")],ri);var lw;let tl=lw=class extends se{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new lw({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([y({type:it,json:{type:[Ct],write:{isRequired:!0}}})],tl.prototype,"color",void 0),u([y({type:String,json:{write:!0}})],tl.prototype,"label",void 0),u([y({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],tl.prototype,"value",void 0),u([me("value")],tl.prototype,"writeValue",null),tl=lw=u([j("esri.renderers.visualVariables.support.ColorStop")],tl);const NG=tl;var Aw;let Vo=Aw=class extends ri{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((t=>!!t))).sort(((t,r)=>t.value-r.value)),this._set("stops",e)}clone(){var e;return new Aw({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};u([y({readOnly:!0})],Vo.prototype,"cache",null),u([y({type:["color"],json:{type:["colorInfo"]}})],Vo.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],Vo.prototype,"normalizationField",void 0),u([y({type:[NG],json:{write:!0}})],Vo.prototype,"stops",null),Vo=Aw=u([j("esri.renderers.visualVariables.ColorVariable")],Vo);var uw;let Ro=uw=class extends se{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return nf(t.transparency)}writeOpacity(e,t,r){t[r]=ov(e)}clone(){return new uw({label:this.label,opacity:this.opacity,value:this.value})}};u([y({type:String,json:{write:!0}})],Ro.prototype,"label",void 0),u([y({type:Number,json:{type:Ct,write:{target:"transparency",isRequired:!0}}})],Ro.prototype,"opacity",void 0),u([ce("opacity",["transparency"])],Ro.prototype,"readOpacity",null),u([me("opacity")],Ro.prototype,"writeOpacity",null),u([y({type:Number,json:{write:{isRequired:!0}}})],Ro.prototype,"value",void 0),Ro=uw=u([j("esri.renderers.visualVariables.support.OpacityStop")],Ro);const jG=Ro;var cw;let oo=cw=class extends ri{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((t=>!!t))).sort(((t,r)=>t.value-r.value)),this._set("stops",e)}clone(){var e;return new cw({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};u([y({readOnly:!0})],oo.prototype,"cache",null),u([y({type:["opacity"],json:{type:["transparencyInfo"]}})],oo.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],oo.prototype,"normalizationField",void 0),u([y({type:[jG],json:{write:!0}})],oo.prototype,"stops",null),oo=cw=u([j("esri.renderers.visualVariables.OpacityVariable")],oo);var pw;let Go=pw=class extends ri{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new pw({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};u([y({readOnly:!0})],Go.prototype,"cache",null),u([y({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Go.prototype,"axis",void 0),u([y({type:["rotation"],json:{type:["rotationInfo"]}})],Go.prototype,"type",void 0),u([y({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Go.prototype,"rotationType",void 0),Go=pw=u([j("esri.renderers.visualVariables.RotationVariable")],Go);function LG(e){return ft(e)}var dw;let Ls=dw=class extends se{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new dw({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};u([y({type:String,json:{write:!0}})],Ls.prototype,"label",void 0),u([y({type:Number,cast:ft,json:{write:{isRequired:!0}}})],Ls.prototype,"size",void 0),u([y({type:Number,json:{write:{isRequired:!0}}})],Ls.prototype,"value",void 0),u([y({type:Boolean,json:{write:!1}})],Ls.prototype,"useMinValue",void 0),u([y({type:Boolean,json:{write:!1}})],Ls.prototype,"useMaxValue",void 0),Ls=dw=u([j("esri.renderers.visualVariables.support.SizeStop")],Ls);let ch=class extends cM{constructor(){super(...arguments),this.customValues=null}};u([y({type:[Number],json:{write:!0}})],ch.prototype,"customValues",void 0),ch=u([j("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],ch);const BG=ch;var uo,Tr;function FA(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function ep(e){return e!=null&&!isNaN(e)&&isFinite(e)}function pM(e){return e.valueExpression?uo.Expression:e.field&&typeof e.field=="string"?uo.Field:uo.Unknown}function UG(e,t){const r=t||pM(e),i=e.valueUnit||"unknown";return r===uo.Unknown?Tr.Constant:e.stops?Tr.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Tr.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Tr.Proportional:Tr.Additive:Tr.Identity:Tr.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(uo||(uo={})),(function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"})(Tr||(Tr={}));const dM=()=>xe.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),hM=e=>dM().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),fM=()=>dM().error("Use of arcade expressions requires an arcade context");new ur;const ph=Math.PI,zG=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Tte(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((I=>I.type==="rotation")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void hM("RotationVariable");const s=i.axis||"heading",o=s==="heading"&&i.rotationType==="arithmetic"?90:0,c=s==="heading"&&i.rotationType==="arithmetic"?-1:1,f=typeof t=="number"?null:t,w=f==null?void 0:f.attributes,v=i.field,{hasExpression:_}=i.cache;i.cache.compiledFunc;let $=null;return!v&&!_?$:_?void fM():(w&&($=w[v]),$=typeof $!="number"||isNaN($)?null:o+c*$,$)}function VG(e,t,r){const i=typeof t=="number",s=i?null:t,o=s==null?void 0:s.attributes;let c=i?t:null;const{isScaleDriven:f}=e.cache;if(e.cache.compiledFunc,f)c=GG(e);else if(!i)switch(e.inputValueType){case uo.Expression:return void fM();case uo.Field:o&&(c=o[e.field]);break;case uo.Unknown:c=null}if(!ep(c))return null;if(i||!e.normalizationField)return c;const w=o?parseFloat(o[e.normalizationField]):null;return ep(w)&&w!==0?c/w:null}function GG(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function yM(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((o=>o.type==="size")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void hM("SizeVariable");const s=YG(VG(i,t),i,t,r,i.cache.ipData);return s==null||isNaN(s)?void 0:s}function Ys(e,t,r){return e==null?null:FA(e)?yM(e,t,r):ep(e)?e:null}function mM(e,t,r){return ep(r)&&e>r?r:ep(t)&&e<t?t:e}function qG(e,t,r,i){const s=Ys(t.minSize,r,i)||t.minDataValue;return e==null&&s==null?null:(e??0)+(s??0)}function QG(e,t,r){const i=e.stops;let s=(i==null?void 0:i.length)&&i[0].size;return s==null&&(s=e.minSize),Ys(s,t,r)}function WG(e,t,r,i){const s=Ys(t.minSize,r,i);if(e==null)return s;const{minDataValue:o,maxDataValue:c}=t;if(o==null||c==null)return null;const f=(e-o)/(c-o),w=Ys(t.maxSize,r,i),v=i!=null?i.shape:void 0;if(e<=o)return s;if(e>=c)return w;if(s==null||w==null)return null;if(t.scaleBy==="area"&&v){const _=v==="circle",$=_?ph*(s/2)**2:s*s,I=$+f*((_?ph*(w/2)**2:w*w)-$);return _?2*Math.sqrt(I/ph):Math.sqrt(I)}return s+f*(w-s)}function HG(e,t,r,i){const s=Ys(t.minSize,r,i);if(e==null||s==null)return s;const{minDataValue:o}=t;if(o==null)return null;const c=e/o,f=Ys(t.maxSize,r,i);let w=null;return w=c*s,mM(w,s,f)}function JG(e,t,r,i,s){var w,v,_;if(e==null)return null;const[o,c,f]=KG(e,s);if(o===c)return Ys((w=t.stops)==null?void 0:w[o].size,r,i);{const $=Ys((v=t.stops)==null?void 0:v[o].size,r,i),I=Ys((_=t.stops)==null?void 0:_[c].size,r,i);return $==null||I==null?null:$+(I-$)*f}}function ZG(e,t,r,i){const s=1*wv[t.valueUnit],o=Ys(t.minSize,r,i),c=Ys(t.maxSize,r,i),{valueRepresentation:f}=t;if(e==null)return o;let w=null;return w=f==="area"?2*Math.sqrt(e/ph)/s:f==="radius"||f==="distance"?2*e/s:e/s,mM(w,o,c)}function YG(e,t,r,i,s){switch(t.transformationType){case Tr.Additive:return qG(e,t,r,i);case Tr.Constant:return QG(t,r,i);case Tr.ClampedLinear:return WG(e,t,r,i);case Tr.Proportional:return HG(e,t,r,i);case Tr.Stops:return JG(e,t,r,i,s);case Tr.RealWorldSize:return ZG(e,t,r,i);case Tr.Identity:return e;case Tr.Unknown:return null}}function KG(e,t){if(!t)return;let r=0,i=t.length-1;return t.some(((s,o)=>e<s?(i=o,!0):(r=o,!1))),[r,i,(e-t[r])/(t[i]-t[r])]}function Ite(e,t,r){const i=["proportional","proportional","proportional"];for(const s of e){const o=s.useSymbolValue?"symbol-value":yM(s,t,r)??"proportional";switch(s.axis){case"width":i[0]=o;break;case"depth":i[1]=o;break;case"height":i[2]=o;break;case"width-and-depth":i[0]=o,i[1]=o;break;case"all":case void 0:case null:i[0]=o,i[1]=o,i[2]=o;break;default:s.axis}}return i}var hw;const cd=new pt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),fw=new pt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function V4(e){if(e!=null)return typeof e=="string"||typeof e=="number"?LG(e):e.type==="size"?FA(e)?e:(delete(e={...e}).type,new mt(e)):void 0}function G4(e,t,r){if(typeof e!="object")return e;const i=new mt;return i.read(e,r),i}let mt=hw=class extends ri{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&zG.test(this.valueExpression)}}set index(e){FA(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),FA(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return pM(this)}set maxDataValue(e){e&&this.stops&&(xe.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(xe.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return V4(e)}readMaxSize(e,t,r){return G4(e,t,r)}set minDataValue(e){e&&this.stops&&(xe.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(xe.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return V4(e)}readMinSize(e,t,r){return G4(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter((t=>!!t))).sort(((t,r)=>t.value-r.value)):e&&(xe.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return UG(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i!=null&&i.messages){const s=this.index,o=typeof s=="string"?s:`visualVariables[${s}]`;i.messages.push(new re("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:o+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?fw.read(e):null}clone(){var e,t;return new hw({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:FA(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:FA(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map((r=>r.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===Tr.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Tr.Stops){const e=this.stops;if(!e)return this;const t=e.map((i=>i.size)).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map((t=>t.value||0))}};u([y({readOnly:!0})],mt.prototype,"cache",null),u([y({type:cd.apiValues,json:{type:cd.jsonValues,origins:{"web-map":{read:!1}},read:cd.read,write:cd.write}})],mt.prototype,"axis",void 0),u([y()],mt.prototype,"index",null),u([y({type:String,readOnly:!0})],mt.prototype,"inputValueType",null),u([y({type:BG,json:{write:!0}})],mt.prototype,"legendOptions",void 0),u([y({type:Number,value:null,json:{write:!0}})],mt.prototype,"maxDataValue",null),u([y({type:Number,value:null,json:{write:!0}})],mt.prototype,"maxSize",null),u([Yt("maxSize")],mt.prototype,"castMaxSize",null),u([ce("maxSize")],mt.prototype,"readMaxSize",null),u([y({type:Number,value:null,json:{write:!0}})],mt.prototype,"minDataValue",null),u([y({type:Number,value:null,json:{write:!0}})],mt.prototype,"minSize",null),u([Yt("minSize")],mt.prototype,"castMinSize",null),u([ce("minSize")],mt.prototype,"readMinSize",null),u([y({type:String,json:{write:!0}})],mt.prototype,"normalizationField",void 0),u([y({readOnly:!0})],mt.prototype,"arcadeRequired",null),u([y({type:String})],mt.prototype,"scaleBy",void 0),u([y({type:[Ls],value:null,json:{write:!0}})],mt.prototype,"stops",null),u([y({type:["outline"],json:{write:!0}})],mt.prototype,"target",void 0),u([y({type:String,readOnly:!0})],mt.prototype,"transformationType",null),u([y({type:["size"],json:{type:["sizeInfo"]}})],mt.prototype,"type",void 0),u([y({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],mt.prototype,"useSymbolValue",void 0),u([y({type:String,json:{write:!0}})],mt.prototype,"valueExpression",void 0),u([ce("valueExpression",["valueExpression","expression"])],mt.prototype,"readValueExpression",null),u([me("web-scene","valueExpression")],mt.prototype,"writeValueExpressionWebScene",null),u([y({type:["radius","diameter","area","width","distance"],json:{write:!0}})],mt.prototype,"valueRepresentation",void 0),u([y({type:fw.apiValues,json:{write:fw.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],mt.prototype,"valueUnit",void 0),u([ce("valueUnit")],mt.prototype,"readValueUnit",null),mt=hw=u([j("esri.renderers.visualVariables.SizeVariable")],mt);const XG={color:Vo,size:mt,opacity:oo,rotation:Go},eq=new pt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),tq=/^\[([^\]]+)\]$/i;let dh=class extends Bt{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter((r=>!!r)),t==null?void 0:t.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some((r=>!!r.target))&&t.sort(((r,i)=>{let s=null;return s=r.target===i.target?0:r.target?1:-1,s}));for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:s,rotationType:o}=r,c=s==null?void 0:s.match(tq),f=c==null?void 0:c[1];if(f&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:o,field:f})),t)return t.map((w=>{const v=eq.read(w.type),_=XG[v];_||(xe.getLogger(this).warn(`Unknown variable type: ${v}`),i!=null&&i.messages&&i.messages.push(new Mn("visual-variable:unsupported",`visualVariable of type '${v}' is not supported`,{definition:w,context:i})));const $=new _;return $.read(w,i),$}))}writeVariables(t,r){const i=[];for(const s of t){const o=s.toJSON(r);o&&i.push(o)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([y()],dh.prototype,"visualVariables",null),dh=u([j("esri.renderers.visualVariables.VisualVariableFactory")],dh);const rq={base:ri,key:"type",typeMap:{opacity:oo,color:Vo,rotation:Go,size:mt}},Zu=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new dh}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,s){return this._vvFactory.readVariables(r,i,s)}writeVisualVariables(r,i,s,o){i[s]=this._vvFactory.writeVariables(r,o)}get arcadeRequiredForVisualVariables(){var r;return((r=this.visualVariables)==null?void 0:r.some((({arcadeRequired:i})=>i)))??!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){var s;return((s=this.visualVariables)==null?void 0:s.filter((o=>o.type===r&&(typeof i=="string"?o.target===i:i!==!1||!o.target))))??[]}async collectVVRequiredFields(r,i){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const o of s)o&&(o.field&&Yi(r,i,o.field),o.normalizationField&&Yi(r,i,o.normalizationField),o.valueExpression&&(iq(o.valueExpression,r,i)||await tn(r,i,o.valueExpression)))}};return u([y({types:[rq],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),u([ce("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),u([me("visualVariables")],t.prototype,"writeVisualVariables",null),t=u([j("esri.renderers.mixins.VisualVariablesMixin")],t),t};function iq(e,t,r){const i=nF(e);return i!=null&&(Yi(t,r,i),!0)}const Sv=[252,146,31,255],sq=[153,153,153,255],nq={type:"esriSMS",style:"esriSMSCircle",size:6,color:Sv,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},oq={type:"esriSLS",style:"esriSLSSolid",width:.75,color:Sv},aq={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},lq={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Aq={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},uq={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},cq={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},yw=xr.fromJSON(nq),gM=cr.fromJSON(oq),pq=Wi.fromJSON(aq),dq=It.fromJSON(lq);xr.fromJSON(Aq);cr.fromJSON(uq);Wi.fromJSON(cq);gi.fromSimpleMarkerSymbol(yw);qs.fromSimpleLineSymbol(gM);ms.fromSimpleFillSymbol(pq);new ao({symbolLayers:new st([new mi({material:{color:Sv},edges:new F5({size:gs(1),color:new it(sq)})})])});const hq=new qs({symbolLayers:new st([new yi({material:{color:new it([0,0,0])},size:gs(1)})])}),fq=new ms({symbolLayers:new st([new mi({outline:{color:new it([0,0,0]),size:gs(1)}})])}),q4="#useCIMFallbackSymbology()",Kl={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function yq(e,t=Kl){var w,v,_,$;if(!e)return{symbol:null};const{retainId:r=Kl.retainId,ignoreDrivers:i=Kl.ignoreDrivers,hasLabelingContext:s=Kl.hasLabelingContext,retainCIM:o=Kl.retainCIM,cimFallbackEnabled:c=Kl.cimFallbackEnabled}=t;let f=null;if(oI(e)||e instanceof jr)f=e.clone();else if(e.type==="cim"){const I=(v=(w=e.data)==null?void 0:w.symbol)==null?void 0:v.type;switch(I){case"CIMPointSymbol":f=o?e.clone():gi.fromCIMSymbol(e);break;case"CIMLineSymbol":c&&(f=hq.clone(),(_=t==null?void 0:t.logWarning)==null||_.call(t,q4,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":c&&(f=fq.clone(),($=t==null?void 0:t.logWarning)==null||$.call(t,q4,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!f)return{error:new re("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${I||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof cr)f=qs.fromSimpleLineSymbol(e);else if(e instanceof xr)f=gi.fromSimpleMarkerSymbol(e);else if(e instanceof fi)f=gi.fromPictureMarkerSymbol(e);else if(e instanceof Wi)f=t.geometryType&&t.geometryType==="mesh"?ao.fromSimpleFillSymbol(e):ms.fromSimpleFillSymbol(e);else{if(!(e instanceof It))return{error:new re("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};f=s?Rs.fromTextSymbol(e):gi.fromTextSymbol(e)}return r&&f&&f.type!=="cim"&&(f.id=e.id),!i||f.type==="cim"||f instanceof jr||f.symbolLayers.forEach((I=>I.ignoreDrivers=!0)),{symbol:f}}function lf(e,t,r,i){const s=wM(e,{},{context:i,isLabelSymbol:!1});s!=null&&Mr(r,s,t)}function Q4(e,t,r,i){const s=wM(e,{},{context:i,isLabelSymbol:!0});s!=null&&(t[r]=s)}function W4(e){return oI(e)||e instanceof jr}function mq(e){return(e==null?void 0:e.type)==="polygon-3d"||(e==null?void 0:e.type)==="line-3d"}function wM(e,t,r){var f;if(e==null)return null;const{context:i,isLabelSymbol:s}=r,o=i==null?void 0:i.origin,c=i==null?void 0:i.messages;if(o==="web-scene"&&!W4(e)){const w=yq(e,{retainCIM:!0,hasLabelingContext:s});return w.symbol!=null?w.symbol.write(t,i):(c==null||c.push(new re("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:w.error})),null)}return Xg(i==null?void 0:i.layer)&&mq(e)?(c==null||c.push(new re("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(f=i==null?void 0:i.layer)==null?void 0:f.declaredClass}'.`,{symbol:e,context:i})),null):(o==="web-map"||o==="portal-item"&&!Xg(i==null?void 0:i.layer))&&W4(e)?(c==null||c.push(new re("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function Cte(e,t){return SB(e,null,t)}const ey={types:aI,json:{write:{writer:lf},origins:{"web-scene":{types:R_,write:{writer:lf},read:{reader:ju({types:R_})}}}}},_v=tb({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},ey),Ev={types:{base:ir,key:"type",typeMap:{"simple-fill":ea.typeMap["simple-fill"],"picture-fill":ea.typeMap["picture-fill"],"polygon-3d":ea.typeMap["polygon-3d"],cim:ea.typeMap.cim}},json:{write:{writer:lf},origins:{"web-scene":{type:ms,write:{writer:lf}}}}},hh={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var mw;let wi=mw=class extends Zu(Ji){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map((r=>r.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new mw({description:this.description,label:this.label,symbol:q(this.symbol),visualVariables:q(this.visualVariables),authoringInfo:q(this.authoringInfo)})}};u([y({type:String,json:{write:!0}})],wi.prototype,"description",void 0),u([y({type:String,json:{write:!0}})],wi.prototype,"label",void 0),u([y(_v)],wi.prototype,"symbol",void 0),u([Ce({simple:"simple"})],wi.prototype,"type",void 0),wi=mw=u([j("esri.renderers.SimpleRenderer")],wi);const gq=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function gw(e){return e instanceof Bt}function H4(e){return e instanceof st?Object.keys(e.items):gw(e)?Si(e).keys():e?Object.keys(e):[]}function pd(e,t){return e instanceof st?e.items[t]:e[t]}function wq(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Ic(e){return e?e.declaredClass:null}function bM(e,t){var $;const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=H4(e),s=H4(t);if(i.length===0&&s.length===0)return;if(!i.length||!s.length||wq(e,t))return{type:"complete",oldValue:e,newValue:t};const o=s.filter((I=>!i.includes(I))),c=i.filter((I=>!s.includes(I))),f=i.filter((I=>s.includes(I)&&pd(e,I)!==pd(t,I))).concat(o,c).sort(),w=Ic(e);if(w&&gq.has(w)&&f.length)return{type:"complete",oldValue:e,newValue:t};let v;const _=gw(e)&&gw(t);for(const I of f){const k=pd(e,I),N=pd(t,I);let B;if((_||typeof k!="function"&&typeof N!="function")&&k!==N&&(k!=null||N!=null)){if(r&&r[I]&&typeof r[I]=="function")B=($=r[I])==null?void 0:$.call(r,k,N);else if(k instanceof Date&&N instanceof Date){if(k.getTime()===N.getTime())continue;B={type:"complete",oldValue:k,newValue:N}}else B=typeof k=="object"&&typeof N=="object"&&Ic(k)===Ic(N)?bM(k,N):{type:"complete",oldValue:k,newValue:N};B!=null&&(v!=null?v.diff[I]=B:v={type:"partial",diff:{[I]:B}})}}return v}function kte(e,t){return bq(e,t)}function bq(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const s of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const o=i.diff[s];if(!o)return!1;i=o}}return!0}function Ote(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function vq(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&Ic(e)!==Ic(t)?{type:"complete",oldValue:e,newValue:t}:bM(e,t)}var ww;const Sq=Ur()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let lc=ww=class extends nt.ClonableMixin(se){static from(e){return $f(ww,e)}constructor(e){super(e),this.title=null,this.order=null}};u([y({type:String,json:{write:!0}})],lc.prototype,"title",void 0),u([Ce(Sq)],lc.prototype,"order",void 0),lc=ww=u([j("esri.renderers.support.RendererLegendOptions")],lc);const xv=lc;let Vs=class extends nt.ClonableMixin(se){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};u([y(hh)],Vs.prototype,"value",void 0),u([y(hh)],Vs.prototype,"value2",void 0),u([y(hh)],Vs.prototype,"value3",void 0),Vs=u([j("esri.renderers.support.UniqueValue")],Vs);let eo=class extends nt.ClonableMixin(se){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map((i=>new Vs({value:i}))):r==="object"?t[0]instanceof Vs?t:t.map((i=>new Vs(i))):null}};u([y({type:String,json:{write:!0}})],eo.prototype,"description",void 0),u([y({type:String,json:{write:!0}})],eo.prototype,"label",void 0),u([y(ey)],eo.prototype,"symbol",void 0),u([y({type:[Vs],json:{type:[[String]],read:{reader:e=>e?e.map((t=>new Vs({value:t[0],value2:t[1],value3:t[2]}))):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const s=[i.value,i.value2,i.value3].filter(gf).map((o=>o.toString()));r.push(s)}t.values=r}}}})],eo.prototype,"values",void 0),u([Yt("values")],eo.prototype,"castValues",null),eo=u([j("esri.renderers.support.UniqueValueClass")],eo);let dl=class extends nt.ClonableMixin(se){constructor(t){super(t),this.heading=null,this.classes=null}};u([y({type:String,json:{write:!0}})],dl.prototype,"heading",void 0),u([y({type:[eo],json:{write:{isRequired:!0}}})],dl.prototype,"classes",void 0),dl=u([j("esri.renderers.support.UniqueValueGroup")],dl);var bw;let Us=bw=class extends se{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new bw({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};u([y({type:String,json:{write:!0}})],Us.prototype,"description",void 0),u([y({type:String,json:{write:!0}})],Us.prototype,"label",void 0),u([y(_v)],Us.prototype,"symbol",void 0),u([y(hh)],Us.prototype,"value",void 0),Us=bw=u([j("esri.renderers.support.UniqueValueInfo")],Us);const J4=new Map;async function _q(e,t){try{return{data:(await Tq(e,t)).data,baseUrl:rN(e),styleUrl:e}}catch(r){return vn(r),null}}function Eq(e,t,r){var w;const i=t.portal!=null?t.portal:le.getDefault();let s;const o=`${i.url} - ${(w=i.user)==null?void 0:w.username} - ${e}`,c=J4.get(o);if(c)return c;const f=xq(e,i,r).then((v=>(s=v,v.fetchData()))).then((v=>({data:v,baseUrl:s.itemUrl??"",styleName:e})));return J4.set(o,f),f}function xq(e,t,r){return t.load(r).then((()=>{const i=new tr({disableExtraQuery:!0,query:`owner:${Z4} AND type:${Y4} AND typekeywords:"${e}"`});return t.queryItems(i,r)})).then((({results:i})=>{var c;let s=null;const o=e.toLowerCase();if(i&&Array.isArray(i)){for(const f of i)if(((c=f.typeKeywords)==null?void 0:c.some((v=>v.toLowerCase()===o)))&&f.type===Y4&&f.owner===Z4){s=f;break}}if(!s)throw new re("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(r)}))}function $q(e,t,r){return(e==null?void 0:e.styleUrl)!=null?_q(e.styleUrl,r):(e==null?void 0:e.styleName)!=null?Eq(e.styleName,t,r):Promise.reject(new re("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Rte(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function Nte(e,t){for(const r of t)switch(r){case"cim":if(e.cimRef)return{format:r,url:encodeURI(e.cimRef)};break;case"web-gltf-basisu":{const i=Km(e,"gltf_basisu");if(i)return{format:r,url:i};break}case"web-gltf":{const i=Km(e,"gltf");if(i)return{format:r,url:i};break}case"web":{const i=Km(e,"gltf");if(i)return{format:"web-gltf",url:i};if(e.webRef)return{format:r,url:encodeURI(e.webRef)};break}}}function Km(e,t){var r,i;if(!J("enable-feature:force-wosr"))return(i=(r=e.formatInfos)==null?void 0:r.find((s=>s.type===t)))==null?void 0:i.href}function Tq(e,t){const r={responseType:"json",query:{f:"json"},...t};return pr(Js(e),r)}const Z4="esri_en",Y4="Style",jte="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Ac;const K4="uvInfos-watcher",X4="uvGroups-watcher",Iq=",",Mq=Br(Us);function Cq(e){const{field1:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueInfos:o,valueExpression:c}=e,f=!(!t||!r);return[{classes:(o??[]).map((w=>{var ee;const{symbol:v,label:_,value:$,description:I}=w,[k,N,B]=f?((ee=$==null?void 0:$.toString())==null?void 0:ee.split(s||""))||[]:[$],L=[];return(t||c)&&L.push(k),r&&L.push(N),i&&L.push(B),{symbol:v,label:_,values:[L],description:I}}))}]}function Xl(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let Nt=Ac=class extends Zu(Ji){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let o=0;o<r.length;o++){const c=t.find((f=>f.value===r[o].value));c?vq(c,r[o])?(s.changed.push({type:"complete",oldValue:c,newValue:r[o]}),i=!0):s.unchanged.push({oldValue:c,newValue:r[o]}):(s.added.push(r[o]),i=!0)}for(let o=0;o<t.length;o++)r.find((c=>c.value===t[o].value))||(s.removed.push(t[o]),i=!0);return i?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:ap(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i!=null&&i.messages?i.messages.push(new re("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):xe.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||le.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=qu(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=dp(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?xe.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?xe.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var i;if(this.styleOrigin)return void xe.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?Mq(e):new Us({value:e,symbol:lI(t)}),(i=this.uniqueValueInfos)==null||i.push(r),this._valueInfoMap[Xl(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void xe.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[Xl(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await Sl()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void xe.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return(r==null?void 0:r.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(r==null?void 0:r.arcade)==null){const s=await Sl(),{arcadeUtils:o}=s;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),r={...r,arcade:s}}const i=this._getUniqueValueInfo(e,r);return(i==null?void 0:i.symbol)||this.defaultSymbol}get symbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){var i;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=(i=this.uniqueValueInfos)==null?void 0:i.reduce(((s,o)=>s+o.getMeshHash()),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Ac({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:q(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:q(this.visualVariables),legendOptions:q(this.legendOptions),authoringInfo:q(this.authoringInfo),backgroundFillSymbol:q(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=q(this.uniqueValueInfos),r=q(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(q(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map((i=>i.collectRequiredFields(e,t))),tn(e,t,this.valueExpression)];Yi(e,t,this.field),Yi(e,t,this.field2),Yi(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return $q(this.styleOrigin,{portal:this.portal}).then((e=>{var r;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach((i=>{const s=new jr({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const o=new Us({value:i.name,symbol:s});t.push(o),this._valueInfoMap[Xl(i.name)]=o})),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((r=this.uniqueValueInfos)!=null&&r.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",Iq)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[Xl(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(K4);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(zA((()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description})),((i,s)=>{i!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(t,K4)}}_watchUniqueValueGroups(){this.removeHandles(X4);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(zA((()=>({classes:r.classes})),((i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const i of r.classes??[])t.push(zA((()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description})),((s,o)=>{s!==o&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(t,X4)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueGroups:o,valueExpression:c}=this;if(!t&&!c)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const f=!(!t||!r);for(const w of o)for(const v of w.classes??[]){const{symbol:_,label:$,values:I,description:k}=v;for(const N of I??[]){const{value:B,value2:L,value3:ee}=N,ae=[B];r&&ae.push(L),i&&ae.push(ee);const he=f?ae.join(s||""):ae[0]??void 0;e.push(new Us({symbol:_,label:$,value:he,description:k}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:s,uniqueValueInfos:o}=this;if(!t&&!i||!o.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const c=!(!t||!r),f=o.map((v=>{var ee;const{symbol:_,label:$,value:I,description:k}=v,[N,B,L]=c?((ee=I==null?void 0:I.toString())==null?void 0:ee.split(s||""))||[]:[I];return new eo({symbol:_,label:$,description:k,values:[new Vs({value:N,value2:B,value3:L})]})})),w=[new dl({classes:f})];e&&Object.freeze(w),this._set("uniqueValueGroups",w),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:o,timeZone:c}=t??{};let f=this._cache.compiledFunc;const w=o.arcadeUtils;if(!f){const _=w.createSyntaxTree(this.valueExpression);f=w.createFunction(_),this._cache.compiledFunc=f}const v=w.executeFunction(f,w.createExecContext(e,w.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),c));return this._valueInfoMap[Xl(v)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const s=this.field2,o=this.field3,c=[];t&&c.push(r[t]),s&&c.push(r[s]),o&&c.push(r[o]),i=c.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[Xl(i)]}static fromPortalStyle(e,t){const r=new Ac(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",(t==null?void 0:t.portal)||le.getDefault());const i=r.populateFromStyle();return i.catch((s=>{xe.getLogger(this.prototype).error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)})),i}static fromStyleUrl(e,t){const r=new Ac(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch((s=>{xe.getLogger(this.prototype).error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)})),i}};u([y({readOnly:!0})],Nt.prototype,"_cache",null),u([Ce({uniqueValue:"unique-value"})],Nt.prototype,"type",void 0),u([y(Ev)],Nt.prototype,"backgroundFillSymbol",void 0),u([y({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Nt.prototype,"field",null),u([Yt("field")],Nt.prototype,"castField",null),u([me("field")],Nt.prototype,"writeField",null),u([y({type:String,value:null,json:{write:!0}})],Nt.prototype,"field2",null),u([y({type:String,value:null,json:{write:!0}})],Nt.prototype,"field3",null),u([y({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Nt.prototype,"orderByClassesEnabled",void 0),u([y({type:String,value:null,json:{write:!0}})],Nt.prototype,"valueExpression",null),u([y({type:String,json:{write:!0}})],Nt.prototype,"valueExpressionTitle",void 0),u([y({type:xv,json:{write:!0}})],Nt.prototype,"legendOptions",void 0),u([y({type:String,json:{write:!0}})],Nt.prototype,"defaultLabel",void 0),u([y(tb({...ey},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Nt.prototype,"defaultSymbol",null),u([y({type:String,value:null,json:{write:!0}})],Nt.prototype,"fieldDelimiter",null),u([y({type:le,readOnly:!0})],Nt.prototype,"portal",void 0),u([ce("portal",["styleName"])],Nt.prototype,"readPortal",null),u([y({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Nt.prototype,"styleOrigin",void 0),u([ce("styleOrigin",["styleName","styleUrl"])],Nt.prototype,"readStyleOrigin",null),u([me("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Nt.prototype,"writeStyleOrigin",null),u([y({type:[dl],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||Cq(t)).map((i=>dl.fromJSON(i,r)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Nt.prototype,"uniqueValueGroups",null),u([y({type:[Us],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Nt.prototype,"uniqueValueInfos",null),Nt=Ac=u([j("esri.renderers.UniqueValueRenderer")],Nt);var vw,fu;let vr=(fu=class extends se{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10}clone(){return new vw(q({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},vw=fu,fu);u([y({type:[String],json:{write:!0}})],vr.prototype,"attachmentTypes",void 0),u([y({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],vr.prototype,"attachmentsWhere",void 0),u([y({type:Boolean,json:{write:!0}})],vr.prototype,"cacheHint",void 0),u([y({type:[String],json:{write:!0}})],vr.prototype,"keywords",void 0),u([y({type:[String],json:{write:!0}})],vr.prototype,"globalIds",void 0),u([y({json:{write:!0}})],vr.prototype,"name",void 0),u([y({type:Number,json:{read:{source:"resultRecordCount"}}})],vr.prototype,"num",void 0),u([y({type:[Number],json:{write:!0}})],vr.prototype,"objectIds",void 0),u([y({type:[String],json:{write:!0}})],vr.prototype,"orderByFields",void 0),u([y({type:Boolean,json:{default:!1,write:!0}})],vr.prototype,"returnMetadata",void 0),u([y({type:[Number],json:{write:!0}})],vr.prototype,"size",void 0),u([y({type:Number,json:{read:{source:"resultOffset"}}})],vr.prototype,"start",void 0),u([me("start"),me("num")],vr.prototype,"writeStart",null),u([y({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],vr.prototype,"where",void 0),vr=vw=u([j("esri.rest.support.AttachmentQuery")],vr),vr.from=Br(vr);const vM=Ur()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),eE="percent-of-total",tE="field",Lte=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const i=!!this.normalizationField,s=this.normalizationTotal!=null;return i||s?(r=i&&tE||s&&eE||null,i&&s&&xe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==tE&&r!==eE||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return u([y({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),u([y({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),u([y({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),u([y({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),u([Ce(vM,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=u([j("esri.rest.support.NormalizationBinParametersMixin")],t),t};var Sw,yu;let jt=(yu=class extends se{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,r){r.historicMoment=t&&t.getTime()}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(r.definitionExpression="1=1")}clone(){return new Sw(q({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},Sw=yu,yu);u([y({type:Boolean,json:{write:!0}})],jt.prototype,"cacheHint",void 0),u([y({type:js,json:{write:!0}})],jt.prototype,"dynamicDataSource",void 0),u([y({type:String,json:{write:!0}})],jt.prototype,"gdbVersion",void 0),u([y({type:Number,json:{write:!0}})],jt.prototype,"geometryPrecision",void 0),u([y({type:Date})],jt.prototype,"historicMoment",void 0),u([me("historicMoment")],jt.prototype,"_writeHistoricMoment",null),u([y({type:Number,json:{write:!0}})],jt.prototype,"maxAllowableOffset",void 0),u([y({json:{write:!0}})],jt.prototype,"objectIds",void 0),u([y({type:[String],json:{write:!0}})],jt.prototype,"orderByFields",void 0),u([y({type:[String],json:{write:!0}})],jt.prototype,"outFields",void 0),u([y({type:ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],jt.prototype,"outSpatialReference",void 0),u([y({json:{write:!0}})],jt.prototype,"relationshipId",void 0),u([y({type:Number,json:{read:{source:"resultOffset"}}})],jt.prototype,"start",void 0),u([me("start"),me("num")],jt.prototype,"writeStart",null),u([y({type:Number,json:{read:{source:"resultRecordCount"}}})],jt.prototype,"num",void 0),u([y({json:{write:!0}})],jt.prototype,"returnGeometry",void 0),u([y({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],jt.prototype,"returnM",void 0),u([y({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],jt.prototype,"returnZ",void 0),u([y({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],jt.prototype,"where",void 0),jt=Sw=u([j("esri.rest.support.RelationshipQuery")],jt),jt.from=Br(jt);const Bte=Object.freeze(Object.defineProperty({__proto__:null,get default(){return jt}},Symbol.toStringTag,{value:"Module"})),_w=new pt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function kq(e,t,r,i){const s=await $a(e);if(await $v(e,t,i),!s.addAttachment)throw new re(i,"Layer source does not support addAttachment capability");return s.addAttachment(t,r)}function $v(e,t,r){var o,c;const{attributes:i}=t,{objectIdField:s}=e;return(c=(o=e.capabilities)==null?void 0:o.data)!=null&&c.supportsAttachment?t?i?s&&i[s]?Promise.resolve():Promise.reject(new re(r,`feature is missing the identifying attribute ${s}`)):Promise.reject(new re(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new re(r,"A feature is required to add/delete/update attachments")):Promise.reject(new re(r,"this layer doesn't support attachments"))}async function Oq(e,t,r,i,s){const o=await $a(e);if(await $v(e,t,s),!o.updateAttachment)throw new re(s,"Layer source does not support updateAttachment capability");return o.updateAttachment(t,r,i)}async function Pq(e,t,r){const{applyEdits:i}=await Pe(()=>import("./editingSupport-BbrMvxy_.js"),__vite__mapDeps([149,51,52,5,53]),import.meta.url),s=await e.load();let o=r;return s.type==="feature"&&s.infoFor3D&&t.deleteFeatures!=null&&s.globalIdField!=null&&(o={...o,globalIdToObjectId:await eQ(s,t.deleteFeatures,s.globalIdField)}),i(s,s.source,t,r)}async function Dq(e,t,r){const{uploadAssets:i}=await Pe(()=>import("./editingSupport-BbrMvxy_.js"),__vite__mapDeps([149,51,52,5,53]),import.meta.url),s=await e.load();return i(s,s.source,t,r)}async function Fq(e,t,r,i){const s=await $a(e);if(await $v(e,t,i),!s.deleteAttachments)throw new re(i,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,r)}async function Rq(e,t,r){const i=(await e.load({signal:t==null?void 0:t.signal})).source;if(!i.fetchRecomputedExtents)throw new re(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function Nq(e,t,r,i){var k,N,B,L;t=vr.from(t),await e.load();const s=e.source,o=e.capabilities;if(!((k=o==null?void 0:o.data)!=null&&k.supportsAttachment))throw new re(i,"this layer doesn't support attachments");const{attachmentTypes:c,objectIds:f,globalIds:w,num:v,size:_,start:$,where:I}=t;if(!((N=o==null?void 0:o.operations)!=null&&N.supportsQueryAttachments)&&((c==null?void 0:c.length)>0||(w==null?void 0:w.length)>0||(_==null?void 0:_.length)>0||v||$||I))throw new re(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(f!=null&&f.length||w!=null&&w.length||I))throw new re(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new re(i,"Layer source does not support queryAttachments capability",t);return!((B=o==null?void 0:o.attachment)!=null&&B.supportsOrderByFields)&&((L=t.orderByFields)!=null&&L.length)&&((t=t.clone()).orderByFields=null),s.queryAttachments(t)}async function jq(e,t,r,i){const s=await $a(e);if(!s.queryObjectIds)throw new re(i,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(Te.from(t)??e.createQuery(),r)}async function Lq(e,t,r,i){const s=await $a(e);if(!s.queryFeatureCount)throw new re(i,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(Te.from(t)??e.createQuery(),r)}async function Bq(e,t,r,i){const s=await $a(e);if(!s.queryExtent)throw new re(i,"Layer source does not support queryExtent capability");return s.queryExtent(Te.from(t)??e.createQuery(),r)}async function Uq(e,t,r,i){const s=await $a(e);if(!s.queryRelatedFeatures)throw new re(i,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(jt.from(t),r)}async function zq(e,t,r,i){const s=await $a(e);if(!s.queryRelatedFeaturesCount)throw new re(i,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(jt.from(t),r)}async function Vq(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await G9(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function Gq(e){var c,f;const t=new Te;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,t.outFields=["*"],t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null;const r=(c=e.capabilities)==null?void 0:c.query;r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference);const i=(f=e.capabilities)==null?void 0:f.data;i!=null&&i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i!=null&&i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM);const{timeOffset:s,timeExtent:o}=e;return t.timeExtent=s!=null&&o!=null?o.offset(-s.value,s.unit):o||null,t}function SM(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function _M(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function qq(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function Qq(e,t,r,i){var w,v;const s=r==null?void 0:r.feature,o=!!((w=e.subtypes)!=null&&w.length);if(o&&!(r!=null&&r.excludeImpliedDomains)){const _=Hq(e,t);if(_)return _}const c=o&&Wq(e,s);if(c){const _=(v=c==null?void 0:c.domains)==null?void 0:v[t];return(_==null?void 0:_.type)==="inherited"?i:_}const f=xM(e.types,e.typeIdField,s);if(f){const _=f.domains&&f.domains[t];if(_&&(_==null?void 0:_.type)!=="inherited")return _}if(i)return i;if(!(r!=null&&r.excludeImpliedDomains)){const _=Jq(e,t);if(_)return _}return null}function Wq(e,t){const{subtypes:r,subtypeField:i}=e;if(!(t!=null&&t.attributes)||!(r!=null&&r.length)||!i)return null;const s=t.attributes[i];return s==null?null:r.find((o=>o.code===s))}function Hq(e,t){var c,f;const{fieldsIndex:r,subtypeField:i}=e,{name:s,type:o}=r.get(t)??{};if(!s)return null;if((i&&((c=r.get(i))==null?void 0:c.name))===s&&((f=e.subtypes)!=null&&f.length)){const w=e.subtypes.map((v=>new cl({code:EM(v.code,o),name:v.name})));if(w!=null&&w.length)return new ra({codedValues:w})}return null}function Jq(e,t){var o,c;const{fieldsIndex:r}=e,{name:i,type:s}=r.get(t)??{};if(!i)return null;if(("typeIdField"in e?(o=r.get(e.typeIdField))==null?void 0:o.name:null)===i&&"types"in e&&((c=e.types)!=null&&c.length)){const f=e.types.map((w=>new cl({code:EM(w.id,s),name:w.name})));return new ra({codedValues:f})}return null}function EM(e,t){return t?N6({type:t})&&typeof e=="number"?`${e}`:kF({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function $a(e){return(await e.load()).source}async function Zq(e,t){if(!et||et.findCredential(e))return;let r;try{const i=await uM(e,t);i&&(r=await et.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await et.getCredential(e,{signal:i})}catch{}}async function Yq(e,t,r){var s;const i=(s=e.parsedUrl)==null?void 0:s.path;i&&e.authenticationTriggerEvent===t&&await Zq(i,r)}function rE(e){return!!(e!=null&&e.toLowerCase().includes("current_user"))}function Kq(e){return!fh(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const Xm=ju({types:aI});function Tv(e,t){var r;if(e.defaultSymbol)return(r=e.types)!=null&&r.length?new Nt({defaultSymbol:Xm(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map((i=>({id:i.id,symbol:Xm(i.symbol,i,t)})))}):new wi({symbol:Xm(e.defaultSymbol,e,t)})}function Xq(e){var i,s,o;let t=(i=e.sourceJSON)==null?void 0:i.cacheMaxAge;if(!t)return!1;const r=(o=(s=e.editingInfo)==null?void 0:s.lastEditDate)==null?void 0:o.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function eQ(e,t,r){if(t==null)return null;const i=[],{objectIdField:s}=e;if(t.forEach((v=>{let _=null;if("attributes"in v){const{attributes:$}=v;_={globalId:$[r],objectId:$[s]!=null&&$[s]!==-1?$[s]:null}}else _={globalId:v.globalId,objectId:v.objectId!=null&&v.objectId!==-1?v.objectId:null};_.globalId!=null&&(_.objectId!=null&&_.objectId!==-1||i.push(_.globalId))})),i.length===0)return null;const o=e.createQuery();o.where=i.map((v=>`${r}='${v}'`)).join(" OR "),o.returnGeometry=!1,o.outFields=[s,r],o.cacheHint=!1;const c=await bG(SG(e,o));if(!c.ok)return null;const f=new Map,w=c.value.features;for(const v of w){const _=v.attributes[r],$=v.attributes[s];_!=null&&$!=null&&$!==-1&&f.set(PV(_),$)}return f}function xM(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find((s=>{const{id:o}=s;return o!=null&&o.toString()===i.toString()}))??null}function fh(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||tQ(e)}function tQ(e){var t,r;return!!((r=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&r.toLowerCase().split(",").map((i=>i.trim())).includes("map"))}function rQ(e,t,r){var o;const i=t==null?void 0:t.queryAttributeBins;if(!((o=t==null?void 0:t.operations)!=null&&o.supportsQueryBins)||!i)throw new re(r,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!i.supportsAutoInterval)throw new re(r,"Layer source does not support auto-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!iE(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new re(r,"Layer source does not support normalization binning");break;case"date":if(!i.supportsDate)throw new re(r,"Layer source does not support date binning");if(e.binParameters.snapToData&&!i.supportsSnapToData)throw new re(r,"Layer source does not support snapToData binning");if(e.binParameters.returnFullIntervalBin&&!i.supportsReturnFullIntervalBin)throw new re(r,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!i.supportsFixedBoundaries)throw new re(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!i.supportsFixedInterval)throw new re(r,"Layer source does not support fixed-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!iE(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new re(r,"Layer source does not support normalization binning")}if(e.binParameters.stackBy&&!i.supportsStackBy)throw new re(r,"Layer source does not support stackBy binning");if(e.binParameters.splitBy&&!i.supportsSplitBy)throw new re(r,"Layer source does not support splitBy binning");if(e.binParameters.firstDayOfWeek&&!i.supportsFirstDayOfWeek)throw new re(r,"Layer source does not support firstDayOfWeek binning");const s=i==null?void 0:i.supportedStatistics;if(e.outStatistics&&s){const c=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:f}of e.outStatistics){const w=c.get(f);if(w&&!s[w])throw new re(r,`Layer source does not support ${f} statistic type`)}}}function iE(e,t){return e!=null&&!!(t!=null&&t[vM.toJSON(e)])}let bA=class extends nt.ClonableMixin(se){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([y({type:String,json:{read:{source:"shapeAreaFieldName"}}})],bA.prototype,"shapeAreaField",void 0),u([y({type:String,json:{read:{source:"shapeLengthFieldName"}}})],bA.prototype,"shapeLengthField",void 0),u([y({type:String,json:{read:e=>fj.read(e)||yj.read(e)}})],bA.prototype,"units",void 0),bA=u([j("esri.layers.support.GeometryFieldsInfo")],bA);var Ew;let vA=Ew=class extends se{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new st}clone(){return new Ew({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([y({type:String,json:{write:{isRequired:!0}}})],vA.prototype,"floorField",void 0),u([y({json:{read:!1,write:!1}})],vA.prototype,"viewAllMode",void 0),u([y({json:{read:!1,write:!1}})],vA.prototype,"viewAllLevelIds",void 0),vA=Ew=u([j("esri.layers.support.LayerFloorInfo")],vA);const sE=new pt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),nE=new pt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Vi=class extends nt.ClonableMixin(se){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([y({json:{read:sE.read,write:sE.write}})],Vi.prototype,"cardinality",void 0),u([y({json:{name:"catalogID"}})],Vi.prototype,"catalogId",void 0),u([y({json:{read:!0,write:!0}})],Vi.prototype,"composite",void 0),u([y({json:{read:!0,write:!0}})],Vi.prototype,"id",void 0),u([y({json:{read:!0,write:!0}})],Vi.prototype,"keyField",void 0),u([y({json:{read:!0,write:!0}})],Vi.prototype,"keyFieldInRelationshipTable",void 0),u([y({json:{read:!0,write:!0}})],Vi.prototype,"name",void 0),u([y({json:{read:!0,write:!0}})],Vi.prototype,"relatedTableId",void 0),u([y({json:{read:!0,write:!0}})],Vi.prototype,"relationshipTableId",void 0),u([y({json:{read:nE.read,write:nE.write}})],Vi.prototype,"role",void 0),Vi=u([j("esri.layers.support.Relationship")],Vi);const iQ=[["binary","application/octet-stream","bin",""]];function Vte(e,t){return MM(t.name,(e==null?void 0:e.supportedFormats)??[])!=null}function Gte(e,t){if(!e)return!1;const r=sQ(t,e.supportedFormats??[]);return r!=null&&e.editFormats.includes(r)}function $M(e,t){return Mv(lQ(e,t))}function TM(e,t){return Mv(MM(e,t))}function qte(e,t){return CM(aQ(e,t))}function sQ(e,t){return TM(e.name,t)??$M(e.type,t)}function ty(e,t,r){return $M(e,r)??TM(t,r)}function IM({supportedFormats:e}){return ty("model/gltf-binary","glb",e)}function Qte(e){const t=IM(e);return t!=null&&e.editFormats.includes(t)}function nQ({supportedFormats:e}){return ty("model/gltf+json","gltf",e)}function oQ(e){if(!e)return null;const t=IM(e),r=nQ(e);let i=null;for(const s of e.queryFormats){if(s===t)return s;s===r&&(i=s)}return i}function Wte({supportedFormats:e}){return ty("application/esri3do-SR_world","wld",e)}function Hte({supportedFormats:e}){return ty("application/esri3do-SR_prj","prj",e)}function Iv(e){return[...iQ,...e]}function aQ(e,t){return Iv(t).find((r=>Mv(r)===e))}function lQ(e,t){const r=e.toLowerCase();return Iv(t).find((i=>CM(i)===r))}function MM(e,t){const r=e.toLowerCase();return Iv(t).find((i=>AQ(i).some((s=>r.endsWith(s)))))}function Mv(e){return e==null?void 0:e[0]}function CM(e){return e==null?void 0:e[1].toLowerCase()}function AQ(e){return(e==null?void 0:e[2].split(",").map((t=>t.toLowerCase())))??[]}function Jte(e){var t;return(t=e.tables)==null?void 0:t.find((r=>r.role==="assetMaps"))}function we(e,t,r){return!!kM(e,t,r)}function SA(e,t,r){return kM(e,t,r)}function kM(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const uQ={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function cQ(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map((i=>i.toLowerCase()));return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function bp(e,t){var i;const r=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map((s=>s.toLowerCase()));return!!(r!=null&&r.includes(t.toLowerCase()))}function pQ(e){var r;const t=(r=e==null?void 0:e.supportedStatisticTypes)==null?void 0:r.map((i=>i.toLowerCase()));return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_cont")),percentileDiscrete:!!(t!=null&&t.includes("percentile_disc")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function dQ(e){var r;const t=(r=e==null?void 0:e.supportedNormalizationTypes)==null?void 0:r.map((i=>i.toLowerCase()));return{field:!!(t!=null&&t.includes("field")),log:!!(t!=null&&t.includes("log")),naturalLog:!!(t!=null&&t.includes("naturallog")),percentOfTotal:!!(t!=null&&t.includes("percentoftotal")),squareRoot:!!(t!=null&&t.includes("squareroot"))}}function OM(e,t){return{analytics:hQ(e),attachment:fQ(e),data:yQ(e),metadata:mQ(e),operations:gQ(e.capabilities,e,t),query:wQ(e,t),queryAttributeBins:SQ(e),queryRelated:bQ(e),queryTopFeatures:vQ(e),editing:_Q(e)}}function hQ(e){return{supportsCacheHint:bp(e.advancedQueryCapabilities,"queryAnalytics")}}function fQ(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:bp(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:we(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:we(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((i=>{const s=uQ[i.name];s&&(r[s]=!!i.isEnabled)})),r}function yQ(e){return{isVersioned:we(e,"isDataVersioned",!1),isBranchVersioned:we(e,"isDataBranchVersioned",!1),supportsAttachment:we(e,"hasAttachments",!1),supportsM:we(e,"hasM",!1),supportsZ:we(e,"hasZ",!1)}}function mQ(e){return{supportsAdvancedFieldProperties:we(e,"supportsFieldDescriptionProperty",!1)}}function gQ(e,t,r){var I;const i=(e==null?void 0:e.toLowerCase().split(",").map((k=>k.trim())))??[],s=r?Fl(r):null,o=i.includes((s==null?void 0:s.serverType)==="MapServer"?"data":"query"),c=i.includes("editing")&&!t.datesInUnknownTimezone&&((I=t.uniqueIdInfo)==null?void 0:I.OIDFieldContainsHashValue)!==!0;let f=c&&i.includes("create"),w=c&&i.includes("delete"),v=c&&i.includes("update");const _=i.includes("changetracking"),$=t.advancedQueryCapabilities;return c&&!(f||w||v)&&(f=w=v=!0),{supportsCalculate:we(t,"supportsCalculate",!1),supportsTruncate:we(t,"supportsTruncate",!1),supportsValidateSql:we(t,"supportsValidateSql",!1),supportsAdd:f,supportsDelete:w,supportsEditing:c,supportsChangeTracking:_,supportsQuery:o,supportsQueryAnalytics:we($,"supportsQueryAnalytic",!1),supportsQueryAttachments:we($,"supportsQueryAttachments",!1),supportsQueryBins:we($,"supportsQueryBins",!1)||!!t.queryBinsCapabilities,supportsQueryTopFeatures:we($,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:we(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:v,supportsExceedsLimitStatistics:we(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:we(t,"supportsAsyncConvert3D",!1)}}function wQ(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,o=e.currentVersion,c=t==null?void 0:t.includes("MapServer"),f=!c||o>=J("mapserver-pbf-version-support"),w=Wh(t),v=new Set((e.supportedQueryFormats??"").split(",").map((_=>_.toLowerCase().trim())));return{maxRecordCount:SA(e,"maxRecordCount",void 0),maxRecordCountFactor:SA(e,"maxRecordCountFactor",void 0),maxUniqueIDCount:SA(e,"maxUniqueIDCount",void 0),standardMaxRecordCount:SA(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:cQ(r),supportsCacheHint:we(r,"supportsQueryWithCacheHint",!1)||bp(r,"query"),supportsCentroid:we(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:w,supportsCurrentUser:we(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:we(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:we(r,"supportsDisjointSpatialRel",!1),supportsDistance:we(r,"supportsQueryWithDistance",!1),supportsDistinct:we(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:we(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:f&&v.has("pbf"),supportsFullTextSearch:we(r,"supportsFullTextSearch",!1),supportsGeometryProperties:we(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:we(r,"supportsHavingClause",!1),supportsHistoricMoment:we(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:we(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:we(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:we(r,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:we(r,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:we(r,"supportsPercentileStatistics",!1),supportsQuantization:we(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:we(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:we(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:we(i,"allowOthersToQuery",!0),supportsQueryGeometry:we(e,"supportsReturningQueryGeometry",!1),supportsResultType:we(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!oQ(e.infoFor3D),supportsSpatialAggregationStatistics:we(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:we(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:we(e,"useStandardizedQueries",!1),supportsStatistics:we(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:we(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:we(r,"supportsTrueCurve",!1),tileMaxRecordCount:SA(e,"tileMaxRecordCount",void 0)}}function bQ(e){const t=e.advancedQueryCapabilities,r=we(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:we(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:bp(t,"queryRelated")}}function vQ(e){return{supportsCacheHint:bp(e.advancedQueryCapabilities,"queryTopFilter")}}function SQ(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:we(t,"supportsDateBin",!1),supportsFixedInterval:we(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:we(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:we(t,"supportsFixedBoundariesBin",!1),supportsStackBy:we(t,"supportsStackBy",!1),supportsSplitBy:we(t,"supportsSplitBy",!1),supportsSnapToData:we(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:we(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:we(t,"supportsFirstDayOfWeek",!1),supportsNormalization:we(t,"supportsNormalization",!1),supportedStatistics:pQ(t),supportedNormalizationTypes:dQ(t)}}function _Q(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:we(e,"allowGeometryUpdates",!0),supportsGlobalId:we(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:we(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:we(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:we(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:we(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:we(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:we(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:we(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:we(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:we(r,"supportsAsyncApplyEdits",!1),zDefault:SA(e,"zDefault",void 0)}}function Zte(e){var t;return{operations:{supportsAppend:we(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:we(e,"supportsExportClip",!1),supportsExportFrameset:we(e,"supportsExportFrameset",!1),supportsMensuration:we(e,"supportsMensuration",!1),supportsPreviews:we(e,"supportsPreviews",!1),supportsUpdate:we(e,"supportsUpdate",!1)}}}let qn=class extends nt.ClonableMixin(se){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=Hf(t[i]);return r}writeDomains(t,r){var s;if(!t)return;const i={};for(const o of Object.keys(t))t[o]&&(i[o]=(s=t[o])==null?void 0:s.toJSON());r.domains=i}};u([y({type:Number,json:{write:!0}})],qn.prototype,"code",void 0),u([y({type:Object,json:{write:!0}})],qn.prototype,"defaultValues",void 0),u([y({json:{write:!0}})],qn.prototype,"domains",void 0),u([ce("domains")],qn.prototype,"readDomains",null),u([me("domains")],qn.prototype,"writeDomains",null),u([y({type:String,json:{write:!0}})],qn.prototype,"name",void 0),qn=u([j("esri.layers.support.Subtype")],qn);const Co=Kt.radius,xs=Kt.eccentricitySquared,EQ={a1:Co*xs,a2:Co*xs*Co*xs,a3:Co*xs*xs/2,a4:Co*xs*Co*xs*2.5,a5:Co*xs+Co*xs*xs/2,a6:1-xs};Kt.radius,Kt.flattening,fa.radius,fa.flattening,$n.radius,$n.flattening,$n.radius;var W;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(W||(W={}));const xQ={[W.WGS84]:{[W.CGCS2000]:qt,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:qt,[W.SPHERICAL_ECEF]:Cc,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:QA,[W.PLATE_CARREE]:WA,[W.WGS84]:qt,[W.WGS84_ECEF]:ZA},[W.CGCS2000]:{[W.CGCS2000]:qt,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:qt,[W.SPHERICAL_ECEF]:Cc,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:QA,[W.PLATE_CARREE]:WA,[W.WGS84]:qt,[W.WGS84_ECEF]:ZA},[W.GCSMARS2000]:{[W.CGCS2000]:null,[W.GCSMARS2000]:qt,[W.GCSMOON2000]:null,[W.LON_LAT]:qt,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:lE,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.GCSMOON2000]:{[W.CGCS2000]:null,[W.GCSMARS2000]:null,[W.GCSMOON2000]:qt,[W.LON_LAT]:qt,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:aE,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.WEB_MERCATOR]:{[W.CGCS2000]:Mc,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:Mc,[W.SPHERICAL_ECEF]:TQ,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:qt,[W.PLATE_CARREE]:CQ,[W.WGS84]:Mc,[W.WGS84_ECEF]:IQ},[W.WGS84_ECEF]:{[W.CGCS2000]:YA,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:YA,[W.SPHERICAL_ECEF]:LQ,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:BQ,[W.PLATE_CARREE]:kQ,[W.WGS84]:YA,[W.WGS84_ECEF]:qt},[W.SPHERICAL_ECEF]:{[W.CGCS2000]:JA,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:JA,[W.SPHERICAL_ECEF]:qt,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:RQ,[W.PLATE_CARREE]:OQ,[W.WGS84]:JA,[W.WGS84_ECEF]:NQ},[W.SPHERICAL_MARS_PCPF]:{[W.CGCS2000]:null,[W.GCSMARS2000]:uE,[W.GCSMOON2000]:null,[W.LON_LAT]:uE,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:qt,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.SPHERICAL_MOON_PCPF]:{[W.CGCS2000]:null,[W.GCSMARS2000]:null,[W.GCSMOON2000]:AE,[W.LON_LAT]:AE,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:qt,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.UNKNOWN]:{[W.CGCS2000]:null,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:null,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:qt,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.LON_LAT]:{[W.CGCS2000]:qt,[W.GCSMARS2000]:qt,[W.GCSMOON2000]:qt,[W.LON_LAT]:qt,[W.SPHERICAL_ECEF]:Cc,[W.SPHERICAL_MARS_PCPF]:lE,[W.SPHERICAL_MOON_PCPF]:aE,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:QA,[W.PLATE_CARREE]:WA,[W.WGS84]:qt,[W.WGS84_ECEF]:ZA},[W.PLATE_CARREE]:{[W.CGCS2000]:HA,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:HA,[W.SPHERICAL_ECEF]:PQ,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:DQ,[W.PLATE_CARREE]:qt,[W.WGS84]:HA,[W.WGS84_ECEF]:FQ}};function PM(e,t){var r;return(r=$Q(e,t))==null?void 0:r.projector}function $Q(e,t){if(e==null||t==null)return null;if(Nn.source.spatialReference===e&&Nn.dest.spatialReference===t)return Nn;const r=oE(e,Nn.source),i=oE(t,Nn.dest);return r===W.UNKNOWN&&i===W.UNKNOWN?Ni(e,t)?Nn.projector=qt:Nn.projector=null:Nn.projector=xQ[r][i],Nn}function oE(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Sa(e,1)),ef(e)?t.spatialReferenceId=W.SPHERICAL_ECEF:xl(e)?t.spatialReferenceId=W.WGS84:kn(e)?t.spatialReferenceId=W.WEB_MERCATOR:qN(e)?t.spatialReferenceId=W.PLATE_CARREE:e.wkt===JN.wkt?t.spatialReferenceId=W.WGS84_ECEF:e.wkid===El.CGCS2000?t.spatialReferenceId=W.CGCS2000:e.wkt===Xb.wkt?t.spatialReferenceId=W.SPHERICAL_MARS_PCPF:e.wkt===ev.wkt?t.spatialReferenceId=W.SPHERICAL_MOON_PCPF:QT(e)?t.spatialReferenceId=W.GCSMARS2000:WT(e)?t.spatialReferenceId=W.GCSMOON2000:t.spatialReferenceId=W.UNKNOWN):W.UNKNOWN}function qt(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function Mc(e,t,r,i){r[i]=Fu*(e[t]/yl),r[i+1]=Fu*(DM-2*Math.atan(Math.exp(-e[t+1]/yl))),r[i+2]=e[t+2]}function TQ(e,t,r,i){const s=e[t]/yl,o=DM-2*Math.atan(Math.exp(-e[t+1]/yl)),c=yl+e[t+2],f=Math.cos(o)*c;r[i]=Math.cos(s)*f,r[i+1]=Math.sin(s)*f,r[i+2]=Math.sin(o)*c}function IQ(e,t,r,i){Mc(e,t,r,i),ZA(r,i,r,i)}function MQ(e,t,r,i,s){const o=.4999999*Math.PI,c=pp(Du*e[t+1],-o,o),f=Math.sin(c);r[i++]=Du*e[t]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+f)/(1-f)),r[i]=e[t+2]}function QA(e,t,r,i){MQ(e,t,r,i,Kt)}function WA(e,t,r,i){r[i]=e[t]*cE,r[i+1]=e[t+1]*cE,r[i+2]=e[t+2]}function HA(e,t,r,i){r[i]=e[t]*pE,r[i+1]=e[t+1]*pE,r[i+2]=e[t+2]}function CQ(e,t,r,i){Mc(e,t,r,i),WA(r,i,r,i)}function kQ(e,t,r,i){YA(e,t,r,i),WA(r,i,r,i)}function OQ(e,t,r,i){JA(e,t,r,i),WA(r,i,r,i)}function PQ(e,t,r,i){HA(e,t,r,i),Cc(r,i,r,i)}function DQ(e,t,r,i){HA(e,t,r,i),QA(r,i,r,i)}function FQ(e,t,r,i){HA(e,t,r,i),ZA(r,i,r,i)}function Cv(e,t,r,i,s){const o=s+e[t+2],c=Du*e[t+1],f=Du*e[t],w=Math.cos(c)*o;r[i]=Math.cos(f)*w,r[i+1]=Math.sin(f)*w,r[i+2]=Math.sin(c)*o}function aE(e,t,r,i){Cv(e,t,r,i,fa.radius)}function lE(e,t,r,i){Cv(e,t,r,i,$n.radius)}function Cc(e,t,r,i){Cv(e,t,r,i,Kt.radius)}function kv(e,t,r,i,s){const o=e[t],c=e[t+1],f=e[t+2],w=Math.sqrt(o*o+c*c+f*f),v=hR(f/(w===0?1:w)),_=Math.atan2(c,o);r[i++]=Fu*_,r[i++]=Fu*v,r[i]=w-s}function AE(e,t,r,i){kv(e,t,r,i,fa.radius)}function uE(e,t,r,i){kv(e,t,r,i,$n.radius)}function JA(e,t,r,i){kv(e,t,r,i,Kt.radius)}function RQ(e,t,r,i){JA(e,t,r,i),QA(r,i,r,i)}function NQ(e,t,r,i){JA(e,t,r,i),ZA(r,i,r,i)}function jQ(e,t,r,i,s){const o=Du*e[t],c=Du*e[t+1],f=e[t+2],w=Math.sin(c),v=Math.cos(c),_=s.radius/Math.sqrt(1-s.eccentricitySquared*w*w);r[i++]=(_+f)*v*Math.cos(o),r[i++]=(_+f)*v*Math.sin(o),r[i++]=(_*(1-s.eccentricitySquared)+f)*w}function ZA(e,t,r,i){jQ(e,t,r,i,Kt)}function YA(e,t,r,i){const s=EQ,o=e[t],c=e[t+1],f=e[t+2];let w,v,_,$,I,k,N,B,L,ee,ae,he,ye,ge,ve,ut,We,dt,ot,wt,at;w=Math.abs(f),v=o*o+c*c,_=Math.sqrt(v),$=v+f*f,I=Math.sqrt($),wt=Math.atan2(c,o),k=f*f/$,N=v/$,ge=s.a2/I,ve=s.a3-s.a4/I,N>.3?(B=w/I*(1+N*(s.a1+ge+k*ve)/I),ot=Math.asin(B),ee=B*B,L=Math.sqrt(1-ee)):(L=_/I*(1-k*(s.a5-ge-N*ve)/I),ot=Math.acos(L),ee=1-L*L,B=Math.sqrt(ee)),ae=1-Kt.eccentricitySquared*ee,he=Kt.radius/Math.sqrt(ae),ye=s.a6*he,ge=_-he*L,ve=w-ye*B,We=L*ge+B*ve,ut=L*ve-B*ge,dt=ut/(ye/ae+We),ot+=dt,at=We+ut*dt/2,f<0&&(ot=-ot),r[i++]=Fu*wt,r[i++]=Fu*ot,r[i]=at}function LQ(e,t,r,i){YA(e,t,r,i),Cc(r,i,r,i)}function BQ(e,t,r,i){YA(e,t,r,i),QA(r,i,r,i)}const Nn={source:{spatialReference:null,spatialReferenceId:W.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:W.UNKNOWN,metersPerUnit:1},projector:qt},Du=pR(1),Fu=dR(1),DM=.5*Math.PI,yl=Kt.radius,cE=yl*Math.PI/180,pE=180/(yl*Math.PI);function vp(e,t,r,i,s,o,c=Math.floor(e.length/3)){const f=PM(t,s);if(f==null)return!1;if(f===qt){if(e===i&&r===o)return!0;const v=r+3*c;for(let _=r,$=o;_<v;_++,$++)i[$]=e[_];return!0}const w=r+3*c;for(let v=r,_=o;v<w;v+=3,_+=3)f(e,v,i,_);return!0}const Kte=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:vp},Symbol.toStringTag,{value:"Module"}));function dE(e,t,r,i,s,o){return dd[0]=e,dd[1]=t,dd[2]=r,vp(dd,i,0,s,o,0)}const dd=Qu();let hd=0,e2=class xw{static fromGE(t){const r=new xw;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=hd++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=hd++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=hd++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=hd++}getInverse(){const t=new xw;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},Af=class uc{static cacheKey(t,r){var i,s,o,c,f,w;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((s=t.wkt)==null?void 0:s.toString())??"",((o=t.wkt2)==null?void 0:o.toString())??"",((c=r.wkid)==null?void 0:c.toString())??"-1",((f=r.wkt)==null?void 0:f.toString())??"",((w=r.wkt2)==null?void 0:w.toString())??""].join()}static fromGE(t){const r=new uc;let i="";for(const s of t.steps){const o=e2.fromGE(s);r.steps.push(o),i+=o.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof e2?this.steps.push(r):this.steps.push(new e2({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new uc;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[uc.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const o of this.steps)i+=o.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const s=this._cachedProjection[uc.cacheKey(t,r)];return s===void 0?null:s}},Ks=null,wa=null,kc=null,yh={};const Ov=new yb;function Sp(){return!!Ks&&LT()}function FM(){return!!Sp()||(Ue(Ov),tp(),!1)}function UQ(e,t){return!e||!t||Cl(e,t)||FM()}function zQ(e,t){return!Cl(e,t)&&!Sp()}function tp(e){return kc==null&&(kc=Promise.all([BT(),Pe(()=>import("./geometryEngineBase-BV9OKxkg.js"),__vite__mapDeps([44,45,46]),import.meta.url).then((t=>t.g)),Pe(()=>import("./hydrated-C8-PosiH.js"),[],import.meta.url)])),kc.then((([,t,{hydratedAdapter:r}])=>{Xs(e),wa=r,Ks=t.default,Ks._enableProjection(UN),Ov.notify()}))}function Pv(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:(mj(e),$w(wa,e,e[0].spatialReference,t,r,i)):(Mu(e),$w(wa,[e],e.spatialReference,t,r,i)[0])}function $w(e,t,r,i,s=null,o=null){if(r==null||i==null)return t;if(Cl(r,i,s))return t.map((c=>mh(c,r,i)));if(s==null&&ef(r))return t.map((c=>mh(c,r,ke.WGS84))).map((c=>rp(c,i)));if(s==null&&ef(i))return t.map((c=>rp(c,ke.WGS84))).map((c=>mh(c,ke.WGS84,i)));if(s==null){const c=Af.cacheKey(r,i);yh[c]!==void 0?s=yh[c]:((s=NM(r,i,void 0))==null&&(s=new Af),yh[c]=s)}if(Ks==null||e==null)throw new ry;return o!=null?Ks._project(e,t,r,i,s,o):Ks._project(e,t,r,i,s)}function VQ(e,t){const r=RM([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function RM(e,t){if(!Sp()){for(const r of e)if(r!=null&&!Ni(r.spatialReference,t)&&xn(r.spatialReference)&&xn(t)&&!Cl(r.spatialReference,t))return Ue(Ov),{pending:tp(),geometries:null}}return{pending:null,geometries:e.map((r=>r==null?null:Ni(r.spatialReference,t)?r:xn(r.spatialReference)&&xn(t)?rp(r,t):null))}}function NM(e,t,r=null){if(e==null||t==null)return null;if(Ks==null||wa==null)throw new ry;const i=Ks._getTransformation(wa,e,t,r,r==null?void 0:r.spatialReference);return i!==null?Af.fromGE(i):null}function GQ(e,t,r=null){if(Ks==null||wa==null)throw new ry;const i=Ks._getTransformationBySuitability(wa,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const s=[];for(const o of i)s.push(Af.fromGE(o));return s}return[]}let ry=class extends re{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function qQ(){Ks=null,wa=null,kc=null,yh={}}const QQ={get loadPromise(){return kc}};function rp(e,t){try{const r=Pv(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=CI(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof ry))throw r;return null}}async function WQ(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await Dv(i,t,null,r),rp(e,t)}function Cl(e,t,r){return!r&&(!!Ni(e,t)||xn(e)&&xn(t)&&!!PM(e,t))}function HQ(e,t){if(Ni(e,t))return!0;if(!xn(e)||!xn(t))return!1;const r=xl(e)||kn(e)||m_(e),i=xl(t)||kn(t)||m_(t);return r&&i}async function Dv(e,t,r,i){if(Sp())return tS(i);if(Array.isArray(e)){for(const{source:s,dest:o,geographicTransformation:c}of e)if(s&&o&&!Cl(s,o,c))return tp(i)}else if(e&&t&&!Cl(e,t,r))return tp(i);return tS(i)}function mh(e,t,r){return e?"x"in e?jM(e,t,new gt,r,0):"xmin"in e?zM(e,t,new ct,r,0):"rings"in e?UM(e,t,new Qr,r,0):"paths"in e?BM(e,t,new qi,r,0):"points"in e?LM(e,t,new Fs,r,0):null:null}function JQ(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&jM(e,e.spatialReference,t,r,i)!=null}function jM(e,t,r,i,s){ni[0]=e.x,ni[1]=e.y;const o=e.z;return ni[2]=o!==void 0?o:s,vp(ni,t,0,ni,i,0)?(r.x=ni[0],r.y=ni[1],r.spatialReference=i,o!==void 0||ya(i)?(r.z=ni[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function ZQ(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&LM(e,e.spatialReference,t,r,i)!=null}function LM(e,t,r,i,s){const{points:o,hasZ:c,hasM:f}=e,w=[],v=o.length,_=[];for(const I of o)_.push(I[0],I[1],c?I[2]:s);if(!vp(_,t,0,_,i,0,v))return null;const $=c||ya(i);for(let I=0;I<v;++I){const k=3*I,N=_[k],B=_[k+1];$&&f?w.push([N,B,_[k+2],o[I][3]]):$?w.push([N,B,_[k+2]]):f?w.push([N,B,o[I][2]]):w.push([N,B])}return r.points=w,r.spatialReference=i,r.hasZ=c,r.hasM=f,r}function YQ(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&BM(e,e.spatialReference,t,r,i)!=null}function BM(e,t,r,i,s){const{paths:o,hasZ:c,hasM:f}=e,w=[];if(!VM(o,c??!1,f??!1,t,w,i,s))return null;const v=c||ya(i);return r.paths=w,r.spatialReference=i,r.hasZ=v,r.hasM=f,r}function KQ(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&UM(e,e.spatialReference,t,r,i)!=null}function UM(e,t,r,i,s){const{rings:o,hasZ:c,hasM:f}=e,w=[];if(!VM(o,c??!1,f??!1,t,w,i,s))return null;const v=c||ya(i);return r.rings=w,r.spatialReference=i,r.hasZ=v,r.hasM=f,r}function XQ(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&zM(e,e.spatialReference,t,r,i)!=null}function zM(e,t,r,i,s){const{xmin:o,ymin:c,xmax:f,ymax:w,hasZ:v,hasM:_}=e,$=v?e.zmin:s;if(!dE(o,c,$,t,ni,i))return null;const I=v||ya(i);r.xmin=ni[0],r.ymin=ni[1],I&&(r.zmin=ni[2]);const k=v?e.zmax:s;return dE(f,w,k,t,ni,i)?(r.xmax=ni[0],r.ymax=ni[1],I&&(r.zmax=ni[2]),_&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function VM(e,t,r,i,s,o,c=0){const f=new Array;for(const _ of e)for(const $ of _)f.push($[0],$[1],t?$[2]:c);if(!vp(f,i,0,f,o,0))return!1;let w=0;s.length=0;const v=t||ya(o);for(const _ of e){const $=new Array;for(const I of _)v&&r?$.push([f[w++],f[w++],f[w++],I[3]]):v?$.push([f[w++],f[w++],f[w++]]):r?($.push([f[w++],f[w++],I[2]]),w++):($.push([f[w++],f[w++]]),w++);s.push($)}return!0}const ni=Qu(),ere=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Cl,getTransformation:NM,getTransformations:GQ,initializeProjection:Dv,isEqualBaseGCS:HQ,isLoaded:Sp,isLoadedOrLoad:FM,isLoadedOrLoadFor:UQ,load:tp,project:Pv,projectExtent:XQ,projectMany:$w,projectMultipoint:ZQ,projectOrLoad:VQ,projectOrLoadMany:RM,projectPoint:JQ,projectPolygon:KQ,projectPolyline:YQ,projectWithZConversion:WQ,projectWithoutEngine:mh,requiresLoad:zQ,test:QQ,tryProjectWithZConversion:rp,unload:qQ},Symbol.toStringTag,{value:"Module"}));async function eW(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return G0(e);const r=ke.WGS84;return await Dv(t,r),Pv(e,r)}function tW(e,t){if(!Fv(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function Fv(e,t){var r;return!!((r=e.typeKeywords)!=null&&r.includes(t))}function tre(e){return Fv(e,GM.HOSTED_SERVICE)}function rW(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function rre(e,t,r){r?tW(e,t):rW(e,t)}async function ire(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return eW(r)}const GM={CHARTS:"Charts",DYNAMIC:"Dynamic",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function iW(e){var w;const{portal:t,isOrgItem:r,itemControl:i}=e,s=(w=t.user)==null?void 0:w.privileges;let o=!s||s.includes("features:user:edit"),c=!!r&&!!(s!=null&&s.includes("features:user:fullEdit"));const f=i==="update"||i==="admin";return f?c=o=!0:c&&(o=!0),{features:{edit:o,fullEdit:c},content:{updateItem:f}}}const sW=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(st.ofType(mn)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=ke.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:s,operations:o,editing:c}=r;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||o.supportsEditing&&!(c.supportsUpdateByOthers&&c.supportsUpdateByAnonymous&&c.supportsDeleteByOthers&&c.supportsDeleteByAnonymous))return"load"}if(rE(this.serviceDefinitionExpression)||rE(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(Xq(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i!=null&&i.creatorField||i!=null&&i.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,i){return OM(i,this.url)}readEditingInfo(r,i){const{editingInfo:s}=i;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=q(r),{operations:s,editing:o}=i;return fh(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=o.supportsGeometryUpdate=!0),i)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,i){return SM(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||fh(this))return!1;const{operations:i,editing:s}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:s}=r;return fh(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return _M(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}readUniqueIdFields(r,i){var s;return(s=i.uniqueIdInfo)!=null&&s.OIDFieldContainsHashValue?i.uniqueIdInfo.fields:null}set url(r){if(r==null)return void this._set("url",r);const i=gN({layer:this,url:r,nonStandardUrlAllowed:!0,logger:xe.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,s,o){wN(this,r,null,i,o)}readVersion(r,i){return qq(i)}get isUrlHostModified(){var c;const{loaded:r,url:i,_isUrlHostModified:s}=this;if(s)return!0;if(!r||!i||this.originIdOf("url")<tt.USER)return!1;const o=(c=this.sourceJSON)==null?void 0:c.preferredHost;if(!o||!Tn(i,`https://${o}`,!0))return!1;for(let f=tt.USER-1;f>=tt.PORTAL_ITEM;f--){const w=this.getAtOrigin("url",Rc(f));if(w)return!Tn(i,w,!0)}return!1}applyPreferredHost(r){const{url:i,portalItem:s}=this;!i||ew(s)}applyHostFromPortalItem(){const{url:r,portalItem:i}=this;if(!r||this.originIdOf("url")===tt.USER||!(i!=null&&i.url)||!ew(i)||!Fv(i,GM.HOSTED_SERVICE)||Tn(r,i.url,!0)||!this._isUrlHostModificationEnabled)return;const s=aN(i.url);this._set("url",_T(r,s)),this._isUrlHostModified=!0}};return u([y({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),u([y({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),u([y({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),u([ce("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),u([y(zh("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),u([y({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),u([y({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),u([y({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),u([y({readOnly:!0,type:Gn})],t.prototype,"editFieldsInfo",void 0),u([y({readOnly:!0})],t.prototype,"editingInfo",void 0),u([ce("editingInfo")],t.prototype,"readEditingInfo",null),u([y({readOnly:!0})],t.prototype,"effectiveCapabilities",null),u([y()],t.prototype,"effectiveEditingEnabled",null),u([y((()=>{const r=q(pG),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),u([y()],t.prototype,"fieldsIndex",void 0),u([y({type:vA,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Ft}}})],t.prototype,"floorInfo",void 0),u([y({type:ct,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),u([y()],t.prototype,"gdbVersion",void 0),u([y({readOnly:!0,type:bA,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),u([y({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:_w.read}}}})],t.prototype,"geometryType",void 0),u([y({type:String})],t.prototype,"globalIdField",void 0),u([ce("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),u([y({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),u([y({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),u([y({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),u([y({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),u([y({readOnly:!0,type:Os})],t.prototype,"heightModelInfo",void 0),u([y({type:Date})],t.prototype,"historicMoment",void 0),u([y({type:st.ofType(mn),readOnly:!0})],t.prototype,"indexes",void 0),u([y({readOnly:!0})],t.prototype,"isTable",void 0),u([ce("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),u([y({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),u([y(yG)],t.prototype,"maxScale",void 0),u([ce("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),u([y(fG)],t.prototype,"minScale",void 0),u([ce("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),u([y({type:String})],t.prototype,"objectIdField",void 0),u([ce("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),u([y(zh("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),u([y({type:[Vi],readOnly:!0})],t.prototype,"relationships",void 0),u([y({type:Boolean})],t.prototype,"returnM",void 0),u([y({type:Boolean})],t.prototype,"returnZ",void 0),u([y({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),u([y({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),u([ce("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),u([y({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),u([y()],t.prototype,"sourceJSON",void 0),u([y({type:ke,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),u([y({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),u([y({type:[qn],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),u([y({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),u([y({type:[String],readOnly:!0})],t.prototype,"uniqueIdFields",void 0),u([ce("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],t.prototype,"readUniqueIdFields",null),u([y(uG)],t.prototype,"url",null),u([me("url")],t.prototype,"writeUrl",null),u([y({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),u([ce("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),u([y({readOnly:!0})],t.prototype,"isUrlHostModified",null),t=u([j("esri.layers.mixins.FeatureLayerBase")],t),t};let Ho=class extends nt.ClonableMixin(se){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};u([y({type:String,json:{write:!0}})],Ho.prototype,"expression",void 0),u([y({type:String,json:{write:!0}})],Ho.prototype,"title",void 0),u([y({type:String,json:{write:!0}})],Ho.prototype,"returnType",void 0),Ho=u([j("esri.layers.support.ExpressionInfo")],Ho);var Tw,mu;let oi=(mu=class extends se{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new Tw({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:q(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},Tw=mu,mu);u([y({type:Boolean,json:{write:!0}})],oi.prototype,"isAutoGenerated",void 0),u([y({type:String,json:{write:!0}})],oi.prototype,"name",void 0),u([y({type:String,json:{write:!0}})],oi.prototype,"alias",void 0),u([y({type:String,json:{write:!0}})],oi.prototype,"onStatisticField",void 0),u([y({type:Ho,json:{write:!0}})],oi.prototype,"onStatisticExpression",void 0),u([y({type:String,json:{write:!0}})],oi.prototype,"statisticType",void 0),oi=Tw=u([j("esri.layers.support.AggregateField")],oi);let la=class extends se{constructor(){super(...arguments),this.type=null}};u([y({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],la.prototype,"type",void 0),la=u([j("esri.layers.support.FeatureReduction")],la);const Rv="__begin__",Nv="__end__",nW=new RegExp(Rv,"ig"),oW=new RegExp(Nv,"ig"),hE=new RegExp("^"+Rv,"i"),fE=new RegExp(Nv+"$","i"),uf='"',aW=uf+" + ",lW=" + "+uf;function AW(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function uW(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function jv(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=AW(e.labelExpression),t.type="conventional"),t}function cW(e){const t=jv(e);if(!t)return null;switch(t.type){case"conventional":return Iw(t.expression);case"arcade":return t.expression}return null}function pW(e){const t=jv(e);if(!t)return null;switch(t.type){case"conventional":return hW(t.expression);case"arcade":return qM(t.expression)}return null}function Iw(e){let t;return e?(t=kl(e,(r=>Rv+'$feature["'+r+'"]'+Nv)),t=hE.test(t)?t.replace(hE,""):uf+t,t=fE.test(t)?t.replace(fE,""):t+uf,t=t.replaceAll(nW,aW).replaceAll(oW,lW)):t='""',t}const dW=/^\s*\{([^}]+)\}\s*$/i;function hW(e){const t=e==null?void 0:e.match(dW);return(t==null?void 0:t[1].trim())||null}const fW=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,yW=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,mW=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function qM(e){if(!e)return null;let t=fW.exec(e)||yW.exec(e);return t?t[1]||t[3]:(t=mW.exec(e),t?t[2]:null)}var Mw,gu;let to=(gu=class extends se{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,r){return r.value?Iw(r.value):t}writeExpression(t,r,i){this.value!=null&&(t=Iw(this.value)),t!=null&&(r[i]=t)}clone(){return new Mw({expression:this.expression,title:this.title,value:this.value})}},Mw=gu,gu);u([y({type:String,json:{write:{writerEnsuresNonNull:!0}}})],to.prototype,"expression",void 0),u([ce("expression",["expression","value"])],to.prototype,"readExpression",null),u([me("expression")],to.prototype,"writeExpression",null),u([y({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],to.prototype,"title",void 0),u([y({json:{read:!1,write:!1}})],to.prototype,"value",void 0),to=Mw=u([j("esri.layers.support.LabelExpressionInfo")],to);var Cw;const fd=new pt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function yd(e,t,r){return{enabled:!Xg(r==null?void 0:r.layer)}}function QM(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function gW(e){return(e==null?void 0:e.type)==="map-image"}function WM(e){var t,r;return!!gW(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function wW(e){return QM(e)||WM(e==null?void 0:e.layer)}var wu;let Lt=(wu=class extends se{static evaluateWhere(t,r){const i=(s,o,c)=>{switch(o){case"=":return s==c;case"<>":return s!=c;case">":return s>c;case">=":return s>=c;case"<":return s<c;case"<=":return s<=c}return!1};try{if(t==null)return!0;const s=t.split(" ");if(s.length===3)return i(r[s[0]],s[1],s[2]);if(s.length===7){const o=i(r[s[0]],s[1],s[2]),c=s[3],f=i(r[s[4]],s[5],s[6]);switch(c){case"AND":return o&&f;case"OR":return o||f}}return!1}catch{}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=dq,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,r){const i=r.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,r,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=uW(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=qM(this.labelExpressionInfo.expression);s&&(t="["+s+"]")}}t!=null&&(r[i]=t)}writeLabelExpressionInfo(t,r,i,s){if(t==null&&this.labelExpression!=null&&QM(s))t=new to({expression:this.getLabelExpressionArcade()});else if(!t)return;const o=t.toJSON(s);o.expression&&(r[i]=o)}writeMaxScale(t,r){(t||this.minScale)&&(r.maxScale=t)}writeMinScale(t,r){(t||this.maxScale)&&(r.minScale=t)}getLabelExpression(){return jv(this)}getLabelExpressionArcade(){return cW(this)}getLabelExpressionSingleField(){return pW(this)}hash(){return JSON.stringify(this)}clone(){return new Cw({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:q(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:q(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},Cw=wu,wu);u([y({type:String,json:{write:!0}})],Lt.prototype,"name",void 0),u([y({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:yd}}}}})],Lt.prototype,"allowOverrun",void 0),u([y({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:yd}}}}})],Lt.prototype,"deconflictionStrategy",void 0),u([y({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&WM(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],Lt.prototype,"labelExpression",void 0),u([ce("labelExpression")],Lt.prototype,"readLabelExpression",null),u([me("labelExpression")],Lt.prototype,"writeLabelExpression",null),u([y({type:to,json:{write:{overridePolicy:(e,t,r)=>wW(r)?{allowNull:!0}:{enabled:!1}}}})],Lt.prototype,"labelExpressionInfo",void 0),u([me("labelExpressionInfo")],Lt.prototype,"writeLabelExpressionInfo",null),u([y({type:fd.apiValues,json:{type:fd.jsonValues,read:fd.read,write:fd.write}})],Lt.prototype,"labelPlacement",void 0),u([y({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Lt.prototype,"labelPosition",void 0),u([y({type:Number})],Lt.prototype,"maxScale",void 0),u([me("maxScale")],Lt.prototype,"writeMaxScale",null),u([y({type:Number})],Lt.prototype,"minScale",void 0),u([me("minScale")],Lt.prototype,"writeMinScale",null),u([y({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:yd}}}}})],Lt.prototype,"repeatLabel",void 0),u([y({type:Number,cast:ft,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:yd}}}}})],Lt.prototype,"repeatLabelDistance",void 0),u([y({types:_B,json:{origins:{"web-scene":{types:EB,write:Q4,default:null}},write:Q4,default:null}})],Lt.prototype,"symbol",void 0),u([y({type:Boolean,json:{write:!0}})],Lt.prototype,"useCodedValues",void 0),u([y({type:String,json:{write:!0}})],Lt.prototype,"where",void 0),Lt=Cw=u([j("esri.layers.support.LabelClass")],Lt);var kw;let Bs=kw=class extends se{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new kw({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};u([y({type:String,json:{write:!0}})],Bs.prototype,"description",void 0),u([y({type:String,json:{write:!0}})],Bs.prototype,"label",void 0),u([y({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Bs.prototype,"minValue",void 0),u([y({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Bs.prototype,"maxValue",void 0),u([y(_v)],Bs.prototype,"symbol",void 0),Bs=kw=u([j("esri.renderers.support.ClassBreakInfo")],Bs);var Ow;const HM="log",gh="percent-of-total",wh="field",md=new pt({esriNormalizeByLog:HM,esriNormalizeByPercentOfTotal:gh,esriNormalizeByField:wh}),bW=Br(Bs);let ar=Ow=class extends Zu(Ji){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map((s=>{const o=new Bs;return o.read(s,r),o.minValue==null&&(o.minValue=i),o.maxValue==null&&(o.maxValue=o.minValue),i=o.maxValue,o}))}writeClassBreakInfos(e,t,r,i){const s=e.map((o=>o.write({},i)));this._areClassBreaksConsecutive()&&s.forEach((o=>delete o.classMinValue)),t[r]=s}castField(e){return e==null?e:typeof e=="function"?(xe.getLogger(this).error(".field: field must be a string value"),null):ap(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&wh||r&&gh||null,t&&r&&xe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==wh&&e!==gh||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new Bs({minValue:e,maxValue:t,symbol:lI(r)}):bW(q(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&xe.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await Sl()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void xe.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const s=await Sl(),{arcadeUtils:o}=s;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),r={...r,arcade:s}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((i,s)=>i+s.getMeshHash()),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new Ow({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:q(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:q(this.visualVariables),legendOptions:q(this.legendOptions),authoringInfo:q(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map((i=>i.collectRequiredFields(e,t))),tn(e,t,this.valueExpression)];Yi(e,t,this.field),Yi(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:o,timeZone:c}=t??{},{valueExpression:f}=this;let w=this._compiledValueExpression.valueExpression===f?this._compiledValueExpression.compiledFunction:null;const v=o.arcadeUtils;if(!w){const $=v.createSyntaxTree(f);w=v.createFunction($),this._compiledValueExpression.compiledFunction=w}this._compiledValueExpression.valueExpression=f;const _=v.executeFunction(w,v.createExecContext(e,v.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),c));return this._getBreakIndexfromInfos(_)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let s=parseFloat(r[t]);if(i){const o=this.normalizationTotal,c=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===HM)s=Math.log(s)*Math.LOG10E;else if(i!==gh||o==null||isNaN(o)){if(i===wh&&!isNaN(c)){if(isNaN(s)||isNaN(c))return-1;s/=c}}else s=s/o*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};u([y(Ev)],ar.prototype,"backgroundFillSymbol",void 0),u([y({type:[Bs],json:{write:{isRequired:!0}}})],ar.prototype,"classBreakInfos",void 0),u([ce("classBreakInfos")],ar.prototype,"readClassBreakInfos",null),u([me("classBreakInfos")],ar.prototype,"writeClassBreakInfos",null),u([y({type:String,json:{write:!0}})],ar.prototype,"defaultLabel",void 0),u([y(ey)],ar.prototype,"defaultSymbol",void 0),u([y({type:String,json:{write:!0}})],ar.prototype,"field",void 0),u([Yt("field")],ar.prototype,"castField",null),u([y({type:Boolean})],ar.prototype,"isMaxInclusive",void 0),u([y({type:xv,json:{write:!0}})],ar.prototype,"legendOptions",void 0),u([y({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],ar.prototype,"minValue",null),u([y({type:String,json:{write:!0}})],ar.prototype,"normalizationField",void 0),u([y({type:Number,json:{write:!0}})],ar.prototype,"normalizationTotal",void 0),u([y({type:md.apiValues,value:null,json:{type:md.jsonValues,read:md.read,write:md.write}})],ar.prototype,"normalizationType",null),u([Ce({classBreaks:"class-breaks"})],ar.prototype,"type",void 0),u([y({type:String,json:{write:!0}})],ar.prototype,"valueExpression",void 0),u([y({type:String,json:{write:!0}})],ar.prototype,"valueExpressionTitle",void 0),ar=Ow=u([j("esri.renderers.ClassBreaksRenderer")],ar);const Pw=-3,vW=Pw-1;var ro;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(ro||(ro={}));let SW=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear()}register(t){this._users.set(t.id.slice(0,-1),t)}deregister(t){this.clear(t),this._sizeLimits.delete(t),this._users.delete(t.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){const i=this._db.get(t.id+r);return(i==null?void 0:i.size)??0}put(t,r,i,s,o){r=t.id+r;const c=this._db.get(r);if(c&&(this._size-=c.size,t.size-=c.size,this._db.delete(r),c.entry!==i&&this._notifyRemove(r,c.entry,c.size,ro.ALL)),s>this._maxSize)return void this._notifyRemove(r,i,s,ro.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${r}`),void this._notifyRemove(r,i,0,ro.ALL);const f=1+Math.max(o,vW)-Pw;this._db.set(r,new _W(i,s,f)),this._size+=s,t.size+=s,this._checkSize()}updateSize(t,r,i,s){r=t.id+r;const o=this._db.get(r);if(o&&o.entry===i){for(this._size-=o.size,t.size-=o.size;s>this._maxSize;){const c=this._notifyRemove(r,i,s,ro.SOME);if(!(c!=null&&c>0))return void this._db.delete(r);s=c}o.size=s,this._size+=s,t.size+=s,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i==null?void 0:i.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach(((c,f)=>{const w=c.lifetime;i[w]=(i[w]||0)+c.size,this._users.forEach((v=>{const{id:_,name:$}=v;if(f.startsWith(_)){const I=r[$]||0;r[$]=I+c.size}}))}));const s={};this._users.forEach((c=>{const f=c.name;if("hitRate"in c&&typeof c.hitRate=="number"&&!isNaN(c.hitRate)&&c.hitRate>0){const w=r[f]||0;r[f]=w,s[f]=Math.round(100*c.hitRate)+"%"}else s[f]="0%"}));const o=Object.keys(r);o.sort(((c,f)=>r[f]-r[c])),o.forEach((c=>t[c]=Math.round(r[c]/2**20)+"MB / "+s[c]));for(let c=i.length-1;c>=0;--c){const f=i[c];f&&(t["Priority "+(c+Pw-1)]=Math.round(f/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forEach((t=>t.resetHitRate()))}clear(t){const r=t.id;this._db.forEach(((i,s)=>{s.startsWith(r)&&(this._size-=i.size,this._db.delete(s),this._notifyRemove(s,i.entry,i.size,ro.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,r)=>this._notifyRemove(r,t.entry,t.size,ro.ALL))),this._users.forEach((t=>t.size=0)),this._size=0,this._db.clear()}*values(t){for(const[r,i]of this._db)r.startsWith(t.id)&&(yield i.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,s){var f;const o=(f=this._users.get(t.split(t2)[0]))==null?void 0:f.removeFunc,c=o==null?void 0:o(r,s,i);return typeof c=="number"?c:null}_checkSize(){this._sizeLimits.forEach(((t,r)=>this._checkSizeLimits(t,r))),this._checkSizeLimits(this.maxSize)}setMaxSize(t,r){r==null||r<=0?this._sizeLimits.delete(t):this._sizeLimits.set(t,r)}_checkSizeLimits(t,r){const i=r??this;if(i.size<=t)return;const s=r==null?void 0:r.id;let o=!0;for(;o;){o=!1;for(const[c,f]of this._db)if(f.lifetime===0&&(!s||c.startsWith(s))){const w=r??this._users.get(c.split(t2)[0]);if(this._purgeItem(c,f,w),i.size<=.9*t)return;o||(o=this._db.has(c))}}for(const[c,f]of this._db)if(!s||c.startsWith(s)){const w=r??this._users.get(c.split(t2)[0]);if(this._purgeItem(c,f,w),i.size<=.9*t)return}}_purgeItem(t,r,i){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const s=this._notifyRemove(t,r.entry,r.size,ro.SOME);s!=null&&s>0&&(this._size+=s,i&&(i.size+=s),r.lives=r.lifetime,r.size=s,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},_W=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}};const t2=":";let EW=class{constructor(t,r){this.removeFunc=r,this._storage=new SW,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},yE=class JM{static parse(t,r,i){const s=[],o=[],c=t.split(";");for(let f=0;f<c.length;f++){const w=c[f];if(w){if(w.includes("po:")){const v=w.slice(3).split("|");if(v.length===3){const[_,$,I]=v,k=$W(_,$,I);k&&o.push(k)}}else if(w.includes("|")){for(const v of w.split("|"))if(r.has(v)){s.push(v);break}}else if(r.has(w))s.push(w);else if(f===0){s.length=0,s.push(TW(i));break}}}return new JM(s,o)}constructor(t,r){this.partNames=t,this.overrides=r}};function xW(e,t){if(e==="DashTemplate")return t.split(" ").map((r=>Number(r)));if(e==="Color"){const r=new it(t).toRgba();return[r[0],r[1],r[2],255*r[3]]}return Number(t)}function $W(e,t,r){return{primitiveName:e,propertyName:t,value:xW(t,r),defaultValue:null}}function TW(e){switch(e){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}let IW=class Dw{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new re(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new Dw(this.major,this.minor,this._context)}static parse(t,r=""){const[i,s]=t.split("."),o=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!o.test(i))throw new re((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(s!=null&&s.match)||!o.test(s))throw new re((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const c=parseInt(i,10),f=parseInt(s,10);return new Dw(c,f,r)}};var bu;let Sn=(bu=class{},bu.instance=new Ri("Etc/UTC"),bu);function MW(e){return e instanceof Pl?e===Sn.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function Are(e){return MW(e)?Sn.instance:e}function CW(e){return"timeZone"in e}function kW(e){return"timeZone"in e}function OW(e){return"dateFieldsTimeZone"in e}const PW=new Map;let cf=class bh{static fromJSON(t){return new bh(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new bh(t.fields??[],gE(t))}static fromLayerJSON(t){return new bh(t.fields??[],gE(t))}constructor(t=[],r){var s;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const o of this.fields){const c=o==null?void 0:o.name,f=mE(c);if(c&&f){const w=ol(c);this._fieldsMap.set(c,o),this._fieldsMap.set(w,o),this._normalizedFieldsMap.set(f,o),i.push(`${w}:${o.type}:${(s=this._timeZoneByFieldName)==null?void 0:s.get(c)}`),OF(o)?(this.dateFields.push(o),this._dateFieldsSet.add(o)):R6(o)&&(this._numericFieldsSet.add(o),this.numericFields.push(o)),ZS(o)||YS(o)||(o.editable=o.editable==null||!!o.editable,o.nullable=o.nullable==null||!!o.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)ZS(t)||YS(t)||t.nullable||vF(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(ol(t))??this._normalizedFieldsMap.get(mE(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(xe.getLogger("esri.layers.support.FieldsIndex").errorOnce(new re("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),ha):ZM.has(r.type)?da:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===da?Sn.instance:r===ha?mr.utcInstance:Ab(PW,r,(()=>Ri.create(r))):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return PF(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;return((r=this.get(t))==null?void 0:r.name)??void 0}toJSON(){return{fields:this.fields.map((t=>Lc(t)?t.toJSON():t)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function ol(e){return e.trim().toLowerCase()}function mE(e){var t;return((t=AF(e))==null?void 0:t.toLowerCase())??""}const ZM=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function gE(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:s}=e,o=(i?"startField"in i?i.startField:i.startTimeField:"")??"",c=(i?"endField"in i?i.endField:i.endTimeField:"")??"",f=OW(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?Dd(e.dateFieldsTimeReference):null,w=s?CW(s)?s.timeZone??f:s.dateFieldsTimeReference?Dd(s.dateFieldsTimeReference):f??ha:null,v=i?kW(i)?i.timeZone??f:i.timeReference?Dd(i.timeReference):f:null,_=new Map([[ol((s==null?void 0:s.creationDateField)??""),w],[ol((s==null?void 0:s.editDateField)??""),w],[ol(o),v],[ol(c),v]]);for(const{name:$,type:I}of e.fields)if(ZM.has(I))t.set($,da);else if(I!=="date"&&I!=="esriFieldTypeDate")t.set($,null);else if(r)t.set($,da);else{const k=_.get(ol($??""))??f;t.set($,k)}return t}var Je;(function(e){e.AsyncNotEnabled="AsyncNotEnabled",e.ModulesNotSupported="ModulesNotSupported",e.CircularModules="CircularModules",e.CannotCompareDateAndTime="CannotCompareDateAndTime",e.NeverReach="NeverReach",e.UnsupportedHashType="UnsupportedHashType",e.InvalidParameter="InvalidParameter",e.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",e.UnexpectedToken="UnexpectedToken",e.Unrecognized="Unrecognized",e.UnrecognizedType="UnrecognizedType",e.MaximumCallDepth="MaximumCallDepth",e.BooleanConditionRequired="BooleanConditionRequired",e.TypeNotAllowedInFeature="TypeNotAllowedInFeature",e.KeyMustBeString="KeyMustBeString",e.WrongNumberOfParameters="WrongNumberOfParameters",e.CallNonFunction="CallNonFunction",e.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",e.NoFunctionInDictionary="NoFunctionInDictionary",e.NoFunctionInArray="NoFunctionInArray",e.AssignModuleFunction="AssignModuleFunction",e.LogicExpressionOrAnd="LogicExpressionOrAnd",e.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",e.FunctionNotFound="FunctionNotFound",e.InvalidMemberAccessKey="InvalidMemberAccessKey",e.UnsupportedUnaryOperator="UnsupportUnaryOperator",e.InvalidIdentifier="InvalidIdentifier",e.MemberOfNull="MemberOfNull",e.UnsupportedOperator="UnsupportedOperator",e.Cancelled="Cancelled",e.ModuleAccessorMustBeString="ModuleAccessorMustBeString",e.ModuleExportNotFound="ModuleExportNotFound",e.Immutable="Immutable",e.OutOfBounds="OutOfBounds",e.IllegalResult="IllegalResult",e.FieldNotFound="FieldNotFound",e.PortalRequired="PortalRequired",e.LogicError="LogicError",e.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",e.KeyAccessorMustBeString="KeyAccessorMustBeString",e.WrongSpatialReference="WrongSpatialReference",e.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",e.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(Je||(Je={}));const YM={[Je.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[Je.LogicError]:"Logic error - {reason}",[Je.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[Je.NeverReach]:"Encountered unreachable logic",[Je.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[Je.ModuleAccessorMustBeString]:"Module accessor must be a string",[Je.ModuleExportNotFound]:"Module has no export with provided identifier",[Je.ModulesNotSupported]:"Current profile does not support modules",[Je.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[Je.FunctionNotFound]:"Function not found",[Je.FieldNotFound]:"Key not found - {key}",[Je.CircularModules]:"Circular module dependencies are not allowed",[Je.Cancelled]:"Execution cancelled",[Je.UnsupportedHashType]:"Type not supported in hash function",[Je.IllegalResult]:"Value is not a supported return type",[Je.PortalRequired]:"Portal is required",[Je.InvalidParameter]:"Invalid parameter",[Je.WrongNumberOfParameters]:"Call with wrong number of parameters",[Je.Unrecognized]:"Unrecognized code structure",[Je.UnrecognizedType]:"Unrecognized type",[Je.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[Je.BooleanConditionRequired]:"Conditions must use booleans",[Je.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[Je.NoFunctionInArray]:"Arrays cannot contain functions.",[Je.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[Je.KeyAccessorMustBeString]:"Accessor must be a string",[Je.KeyMustBeString]:"Object keys must be a string",[Je.Immutable]:"Object is immutable",[Je.UnexpectedToken]:"Unexpected token",[Je.MemberOfNull]:"Cannot access property of null object",[Je.MaximumCallDepth]:"Exceeded maximum function depth",[Je.OutOfBounds]:"Out of bounds",[Je.InvalidIdentifier]:"Identifier not recognized",[Je.CallNonFunction]:"Expression is not a function",[Je.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[Je.AssignModuleFunction]:"Cannot assign function to module variable",[Je.UnsupportedUnaryOperator]:"Unsupported unary operator",[Je.UnsupportedOperator]:"Unsupported operator",[Je.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[Je.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[Je.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[Je.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[Je.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};let DW=class extends Error{constructor(...t){super(...t)}},wE=class KM extends DW{constructor(t,r){super(Lv(r)+t.message,{cause:t}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,KM),r!=null&&r.loc&&(this.loc=r.loc)}},FW=class XM extends Error{constructor(t,r,i,s){super("Execution error - "+Lv(i)+kl(YM[r],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,XM),i!=null&&i.loc&&(this.loc=i.loc)}};function Lv(e){var t,r;return e&&e.loc?`Line : ${(t=e.loc.start)==null?void 0:t.line}, ${(r=e.loc.start)==null?void 0:r.column}: `:""}let cre=class eC extends Error{constructor(t,r,i,s){super("Compilation error - "+Lv(i)+kl(YM[r],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,eC),i!=null&&i.loc&&(this.loc=i.loc)}},pre=class tC extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,tC)}};function dre(e,t,r){return r.declaredRootClass==="esri.arcade.arcadeexecutionerror"||r.declaredRootClass==="esri.arcade.arcadecompilationerror"?r.loc===null&&(t!=null&&t.loc)?new wE(r,{cause:r}):r:(r.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||r.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||r.declaredRootClass,t!=null&&t.loc?new wE(r,{cause:r}):r)}var pf;(function(e){e.UnrecognizedUri="UnrecognizedUri",e.UnsupportedUriProtocol="UnsupportedUriProtocol"})(pf||(pf={}));const RW={[pf.UnrecognizedUri]:"Unrecognized uri - {uri}",[pf.UnsupportedUriProtocol]:"Unrecognized uri protocol"};let hre=class rC extends Error{constructor(t,r){super(kl(RW[t],r)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,rC)}};function vh(e){return e.toLowerCase().replaceAll(/[\s-]+/g,"")}let fre=class{constructor(t,r){const i=new Map;for(const s of t){const o=vh(s);if(i.has(o))throw new Error(`${s} already added as ${i.get(o)}`);i.set(o,s)}if(r!=null)for(const[s,o]of r){const c=vh(s);if(i.has(c))throw new Error(`${s} already associated with ${i.get(c)}`);i.set(c,o)}this._enumMap=i}lookup(t){return this._enumMap.get(vh(t))}get(t){const r=this.lookup(t);if(r==null)throw new FW(null,Je.InvalidParameter,null);return r}};var df;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(df||(df={}));const NW={[df.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let jW=class iC extends Error{constructor(t,r){super(kl(NW[t],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,iC)}};function eA(e,t,r){return e<t?e-t:e>r?e-r:0}function tA(e,t,r){return e<t?t:e>r?r:e}let lo=class or{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,r=1,i=1,s=0,o=0,c=0,f=0,w){if(isNaN(t)||isNaN(r)||isNaN(i)||isNaN(s)||isNaN(o)||isNaN(c)||isNaN(f))return null;const v=Se.local(t,r).daysInMonth;let _=Se.fromObject({day:tA(i,1,v),year:t,month:tA(r,1,12),hour:tA(s,0,23),minute:tA(o,0,59),second:tA(c,0,59),millisecond:tA(f,0,999)},{zone:wn(w)});return _=_.plus({months:eA(r,1,12),days:eA(i,1,v),hours:eA(s,0,23),minutes:eA(o,0,59),seconds:eA(c,0,59),milliseconds:eA(f,0,999)}),new or(_)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,r){const i=wn(r);return t.isUnknownTimeZone||i===Sn.instance?or.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,i):new or(t._date.setZone(i))}static dateJSToArcadeDate(t){return new or(Se.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,r="system"){const i=wn(r);return new or(Se.fromJSDate(t,{zone:i}))}static unknownEpochToArcadeDate(t){return new or(Se.fromMillis(t,{zone:Sn.instance}))}static unknownDateJSToArcadeDate(t){return new or(Se.fromMillis(t.getTime(),{zone:Sn.instance}))}static epochToArcadeDate(t,r="system"){const i=wn(r);return new or(Se.fromMillis(t,{zone:i}))}static dateTimeToArcadeDate(t){return new or(t)}clone(){return new or(this._date)}changeTimeZone(t){const r=wn(t);return or.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(t,r){const i=wn(r);return t.zone===Sn.instance||i===Sn.instance?or.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,i):new or(t.setZone(i))}static nowToArcadeDate(t){const r=wn(t);return new or(Se.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new or(Se.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===or.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===Sn.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new or(this._date.plus(t))}diff(t,r){return this._date.diff(t._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,r){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(t,r){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new or(this._date.toUTC())}toLocal(){return new or(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const r=Se.fromISO(t,{setZone:!0});return new or(r)}};function wn(e,t=!0){if(e instanceof Pl)return e;switch(vh(e)){case"system":return"system";case"utc":return"UTC";case"unknown":return Sn.instance}if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const i=mr.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(i)return i}const r=Ri.create(e);if(!r.isValid){if(t)throw new jW(df.TimeZoneNotRecognized);return null}return r}function bE(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const r=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const i of e.match(r)||[])switch(i){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=i;break;default:i.length>=2&&i.slice(0,1)==="["&&i.slice(-1)==="]"?t+=`'${i.slice(1,-1)}'`:t+=`'${i}'`}return t}const vE="esri.core.sql.dateonly";let LW=class Gi{constructor(t,r,i){this._year=t,this._month=r,this._day=i,this.declaredRootClass=vE}static isDateOnly(t){return typeof t=="object"&&t!=null&&"declaredRootClass"in t&&t.declaredRootClass===vE}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(t){return Gi.isDateOnly(t)&&t.day===this.day&&t.month===this.month&&t.year===this.year}clone(){return new Gi(this._year,this._month,this._day)}toDateTime(t){return Se.fromObject({day:this.day,month:this.month,year:this.year},{zone:wn(t)})}toDateTimeLuxon(t){return Se.fromObject({day:this.day,month:this.month,year:this.year},{zone:wn(t)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(t=null,r=!0){if(t===null||t==="")return this.toString();if(r&&(t=bE(t)),!t)return"";const i=this.toDateTime("unknown");return lo.dateTimeToArcadeDate(i).toFormat(t,{locale:Ws(),numberingSystem:"latn"})}toArcadeDate(){const t=this.toDateTime("unknown");return lo.dateTimeToArcadeDate(t)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(t,r){return Gi.fromDateTime(this.toUTCDateTime().plus({[t]:r}))}toUTCDateTime(){return Se.utc(this.year,this.month,this.day,0,0,0,0)}difference(t,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}static fromMilliseconds(t){const r=Se.fromMillis(t,{zone:mr.utcInstance});return r.isValid?Gi.fromParts(r.year,r.month,r.day):null}static fromSeconds(t){const r=Se.fromSeconds(t,{zone:mr.utcInstance});return r.isValid?Gi.fromParts(r.year,r.month,r.day):null}static fromReader(t){if(!t)return null;const r=t.split("-");return r.length!==3?null:new Gi(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10))}static fromParts(t,r,i){const s=new Gi(t,r,i);return s.isValid===!1?null:s}static fromDateJS(t){return Gi.fromParts(t.getFullYear(),t.getMonth()+1,t.getDay())}static fromDateTime(t){return Gi.fromParts(t.year,t.month,t.day)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,r=null){if(t===""||t===null)return null;const i=[];if(r)(r=bE(r))&&i.push(r);else if(r===null||r===""){const s=Se.fromISO(t,{setZone:!0});return s.isValid?Gi.fromParts(s.year,s.month,s.day):null}for(const s of i){const o=Se.fromFormat(t,r??s);if(o.isValid)return new Gi(o.year,o.month,o.day)}return null}static fromNow(t="system"){const r=Se.fromJSDate(new Date).setZone(wn(t));return new Gi(r.year,r.month,r.day)}};function mre(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new ct({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function gre(e){if(e==null)return null;const t=e.clone();return e.cache._geVersion!==void 0&&(t.cache._geVersion=e.cache._geVersion),t}function gd(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function SE(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let r="";for(const i of e.match(t)||[])switch(i){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":r+=i;break;case"A":case"a":r+="a";break;default:r+=`'${i}'`}return r}const _E="esri.core.sql.timeonly";let BW=class dn{constructor(t,r,i,s){this._hour=t,this._minute=r,this._second=i,this._millisecond=s,this.declaredRootClass=_E}static isTimeOnly(t){return typeof t=="object"&&t!=null&&"declaredRootClass"in t&&t.declaredRootClass===_E}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(t){return dn.isTimeOnly(t)&&t.hour===this.hour&&t.minute===this.minute&&t.second===this.second&&t.millisecond===this.millisecond}clone(){return new dn(this.hour,this.minute,this.second,this.millisecond)}isValid(){return gd(this.hour)&&gd(this.minute)&&gd(this.second)&&gd(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(t=null){return t===null||t===""?this.toString():(t=SE(t))?Se.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(t,{locale:Ws(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(t,r,i,s){const o=new dn(t,r,i,s);return o.isValid()?o:null}static fromReader(t){if(!t)return null;const r=t.split(":");return r.length!==3?null:new dn(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),0)}static fromMilliseconds(t){if(t>864e5||t<0)return null;const r=Math.floor(t/1e3%60),i=Math.floor(t/6e4%60),s=Math.floor(t/36e5%24),o=Math.floor(t%1e3);return new dn(s,i,r,o)}static fromDateJS(t){return new dn(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static fromDateTime(t){return new dn(t.hour,t.minute,t.second,t.millisecond)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,r=null){if(t===""||t===null)return null;const i=[];r?(r=SE(r))&&i.push(r):r!==null&&r!==""||(i.push("HH:mm:ss"),i.push("HH:mm:ss.SSS"),i.push("hh:mm:ss a"),i.push("hh:mm:ss.SSS a"),i.push("HH:mm"),i.push("hh:mm a"),i.push("H:mm"),i.push("h:mm a"),i.push("H:mm:ss"),i.push("h:mm:ss a"),i.push("H:mm:ss.SSS"),i.push("h:mm:ss.SSS a"));for(const s of i){const o=Se.fromFormat(t,s);if(o.isValid)return new dn(o.hour,o.minute,o.second,o.millisecond)}return null}plus(t,r){switch(t){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return dn.fromDateTime(this.toUTCDateTime().plus({[t]:r}))}return null}toUTCDateTime(){return Se.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(t,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}};const UW=["geometry","scale","timeProperties"];function wre(e,t){if(t!=null)for(const r of UW)t.hasArcadeDependency(r)&&e.add(r);return e}function bre(e,t){return sC.create(e,t,null,["$feature","$view"])}function zW(e,t,r){return sC.create(e,t,r,["$feature","$view","$config"])}let sC=class nC{static async create(t,r,i,s){const{arcade:o,Dictionary:c}=await Sl();let f;try{f=o.parseScript(t)}catch(k){throw new re("arcade-bad-expression","Failed to parse arcade script",{script:t,error:k})}const w=o.scriptUsesGeometryEngine(f);w&&await o.enableGeometrySupport(),await o.loadDependentModules(new Set,f,null,!1,w);const v={vars:s.reduce(((k,N)=>({...k,[N]:null})),{}),spatialReference:r,useAsync:!1},_=o.compileScript(f,v);let $=null;i!=null&&($=new c(i),$.immutable=!0);const I=new c;return I.immutable=!1,I.setField("scale",0),new nC(t,o,f,_,r,I,$,c)}constructor(t,r,i,s,o,c,f,w){this.script=t,this._arcade=r,this._syntaxTree=i,this._compiled=s,this._spatialReference=o,this._viewDict=c,this._configDict=f,this._dictionaryCtor=w,this._dependencies=new Map,this._featureReader=new oC,this._dependencies.set("geometry",r.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(t,r){var s;const i=(s=r.$view)==null?void 0:s.timeZone;if(r.$view){let o;if(this._viewDict.setField("scale",r.$view.scale),r.$view.timeProperties!=null){const{currentStart:c,currentEnd:f}=r.$view.timeProperties;o=new this._dictionaryCtor({currentStart:c!=null?i!=null?lo.epochToArcadeDate(c,i):lo.unknownEpochToArcadeDate(c):void 0,currentEnd:f!=null?i!=null?lo.epochToArcadeDate(f,i):lo.unknownEpochToArcadeDate(f):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",o)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:t},spatialReference:this._spatialReference,timeZone:i})}repurposeFeature(t,r){return this._featureReader.bind(t,r,this._spatialReference),this._featureReader}references(t){return this._dependencies.get(t)??!1}},oC=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(t,r,i){const s=r??new cf(aC(t.attributes));this._boundTarget=t,this._boundSchema.fields=s.fields,this._boundSchema.fieldsIndex=s,this._boundSchema.spatialReference=i}_getField(t){return this._boundSchema.fieldsIndex.get(t)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(t){this._contextTimeZone=t}readArcadeFeature(){return this}hasField(t){return this._boundSchema.fieldsIndex.has(t)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const t=mp(this._boundTarget.geometry);if(t){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");t.spatialReference=this._boundSchema.spatialReference}return t}isUnknownDateTimeField(t){return this._boundSchema.fieldsIndex.getTimeZone(t)===da}field(t,r=!0){const i=this._getField(t);if(i){const s=this._boundTarget.attributes[i.name];if(s==null)return null;switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return LW.fromReader(s);case"time-only":case"esriFieldTypeTimeOnly":return BW.fromReader(s);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return lo.fromReaderAsTimeStampOffset(s);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(t)?lo.unknownEpochToArcadeDate(s):lo.epochToArcadeDate(s,this.contextTimeZone??Cn);default:return s}}if(r)throw new Error(`Field ${t} does not exist`);return null}setField(t,r){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map((t=>t.name))}castToText(t=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(t=null){var r;return{attributes:this._boundTarget.attributes,geometry:(t==null?void 0:t.keepGeometryType)===!0?this.geometry():((r=this.geometry())==null?void 0:r.toJSON())??null}}castAsJsonAsync(t=null,r=null){return Promise.resolve(this.castAsJson(r))}};function aC(e){const t=[];for(const r in e)t.push({name:r,alias:r,type:typeof e[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return t}let VW=class lC{static async from(t,r,i){const s=t.dictionary_version?IW.parse(t.dictionary_version):null,o=new Set(t.itemsNames),c={};if(r)for(const $ in r)c[$]=r[$];if(t.authoringInfo.configuration)for(const $ of t.authoringInfo.configuration)c.hasOwnProperty($.name)||(c[$.name]=$.value);const f=new Set(t.authoringInfo.symbol);for(const $ of Object.keys(i))f.delete($);f.size&&xe.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:f});const w=await zW(t.expression,null,c);if(!w)throw new re("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const v=!s||!s.greaterEqual(4,0);v&&xe.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:s});const _=new GW(i,v);return new lC(v,o,w,_)}constructor(t,r,i,s){this._requiresFieldCoercionToString=t,this._itemNames=r,this._compiled=i,this._reader=s}get itemNames(){return this._itemNames}evaluate(t,r,i,s){try{return this._reader.bind(t,i,s),this._compiled.evaluate(this._reader,{$view:{scale:r}})}catch(o){xe.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:o})}return null}createDictionaryFieldsIndex(t){if(!this._requiresFieldCoercionToString)return new cf(t);const r=t.map((i=>({...i,type:"esriFieldTypeString"})));return new cf(r)}},GW=class extends oC{constructor(t,r){super(),this._fieldMap=t,this._requiresFieldCoercionToString=r}_getField(t){const r=this._fieldMap[t]??t;return this._boundSchema.fieldsIndex.get(r)}field(t){if(!this._requiresFieldCoercionToString)return super.field(t,!1);const r=this._getField(t);return r==null||this._boundTarget.attributes[r.name]==null?"":""+this._boundTarget.attributes[r.name]}};var EE,xE,$E,TE,IE,ME,CE,kE,OE,PE,Fw,Rw,DE,FE,RE,NE,jE,LE,BE,UE,zE,VE,GE,qE,QE,WE,HE,JE,ZE,YE,KE,XE,ex,tx,rx,ix,sx,nx,ox,ax,lx,Ax,ux,cx,px,dx,hx,fx,yx,mx,gx,wx,bx,vx,Sx,hf,_x,Ex,xx,$x,Tx,Ix,Mx;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(EE||(EE={})),(function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"})(xE||(xE={})),(function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"})($E||($E={})),(function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"})(TE||(TE={})),(function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"})(IE||(IE={})),(function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"})(ME||(ME={})),(function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"})(CE||(CE={})),(function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"})(kE||(kE={})),(function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"})(OE||(OE={})),(function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"})(PE||(PE={})),(function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"})(Fw||(Fw={})),(function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"})(Rw||(Rw={})),(function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"})(DE||(DE={})),(function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"})(FE||(FE={})),(function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"})(RE||(RE={})),(function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"})(NE||(NE={})),(function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"})(jE||(jE={})),(function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"})(LE||(LE={})),(function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"})(BE||(BE={})),(function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"})(UE||(UE={})),(function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"})(zE||(zE={})),(function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"})(VE||(VE={})),(function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"})(GE||(GE={})),(function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"})(qE||(qE={})),(function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"})(QE||(QE={})),(function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"})(WE||(WE={})),(function(e){e.Fast="Fast",e.Accurate="Accurate"})(HE||(HE={})),(function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"})(JE||(JE={})),(function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"})(ZE||(ZE={})),(function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"})(YE||(YE={})),(function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"})(KE||(KE={})),(function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"})(XE||(XE={})),(function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"})(ex||(ex={})),(function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AlongLine=1]="AlongLine"})(tx||(tx={})),(function(e){e[e.Auto=0]="Auto",e[e.Clockwise=1]="Clockwise",e[e.Counterclockwise=2]="Counterclockwise"})(rx||(rx={})),(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"})(ix||(ix={})),(function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"})(sx||(sx={})),(function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"})(nx||(nx={})),(function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"})(ox||(ox={})),(function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"})(ax||(ax={})),(function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"})(lx||(lx={})),(function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"})(Ax||(Ax={})),(function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"})(ux||(ux={})),(function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(cx||(cx={})),(function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"})(px||(px={})),(function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"})(dx||(dx={})),(function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"})(hx||(hx={})),(function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"})(fx||(fx={})),(function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"})(yx||(yx={})),(function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"})(mx||(mx={})),(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(gx||(gx={})),(function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"})(wx||(wx={})),(function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"})(bx||(bx={})),(function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"})(vx||(vx={})),(function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(Sx||(Sx={})),(function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"})(hf||(hf={})),(function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"})(_x||(_x={})),(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(Ex||(Ex={})),(function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"})(xx||(xx={})),(function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"})($x||($x={})),(function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"})(Tx||(Tx={})),(function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"})(Ix||(Ix={})),(function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"})(Mx||(Mx={}));const _re={CIMGradientStroke:{gradientSizeUnits:hf.Relative},CIMGradientFill:{gradientSizeUnits:hf.Relative},CIMGeometricEffectRadial:{angle:0,length:5},CIMAnimatedSymbolProperties:{repeattype:Fw.Loop,easing:Rw.Linear}},qW=` /-,
`;function Cx(e){let t=e.length;for(;t--;)if(!qW.includes(e.charAt(t)))return!1;return!0}function Ere(e,t){const r=[];let i=0,s=-1;do if(s=e.indexOf("[",i),s>=i){if(s>i){const o=e.slice(i,s);r.push([o,null,Cx(o)])}if(i=s+1,s=e.indexOf("]",i),s>=i){if(s>i){const o=t[e.slice(i,s)];o&&r.push([null,o,!1])}i=s+1}}while(s!==-1);if(i<e.length){const o=e.slice(i);r.push([o,null,Cx(o)])}return r}function xre(e,t,r){let i="",s=null;for(const o of t){const[c,f,w]=o;if(c!=null&&c!=="")w?s=c:(s!=null&&(i+=s,s=null),i+=c);else{const v=e.readAttribute(f);v!=null&&v!==""&&(s!==null&&(i+=s,s=null),i+=v)}}return AC(i,r)}function $re(e,t,r,i){let s="",o=null;for(const c of t){const[f,w,v]=c;if(f!=null&&f!=="")v?o=f:(o!=null&&(s+=o,o=null),s+=f);else{let _=w;r!=null&&(_=HW(w,r));const $=e.attributes[_];$!=null&&$!==""&&(o!=null&&(s+=o,o=null),s+=$)}}return AC(s,i)}function AC(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function Tre(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function Ire(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function Mre(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function Cre(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function kre(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const Ore=(e,t=0)=>e==null||isNaN(e)?t:e;function Pre(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"})))}function uC(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Dre(e,t,r,i,s,o,c=!0){const{infos:f}=o;let w=1,v=0,_=0,$=0,I=1;for(const{absoluteAnchorPoint:B,offsetX:L,offsetY:ee,rotation:ae,size:he,frameHeight:ye,rotateClockWise:ge,scaleSymbolsProportionally:ve}of f)I=B?1:w,_=Ox(L,ee,v,I,_),$=kx(L,ee,v,I,$),ye&&(ve||c)&&(w*=he/ye),v=Px(ae,ge,v);const k=Ox(i,s,v,I,_),N=kx(i,s,v,I,$);return{size:e*w,rotation:Px(t,r,v),offsetX:k,offsetY:N}}function QW(e){return e.split(" ").map((t=>Number(t)))}function WW(e){return typeof e=="string"?QW(e):e}function Fre(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=WW(e.dashTemplate)),e}function Nw(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return Nw(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return Nw(r.symbol)}}return"Normal"}function HW(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function Rre(e){return e.map((t=>({...t,propertyName:uC(t.propertyName)})))}function Nre(e){const t={};for(const r in e){const i=e[r];t[uC(r)]=i}return t}function kx(e,t,r,i,s){const o=r*Math.PI/180;if(o){const c=Math.cos(o);return(Math.sin(o)*e+c*t)*i+s}return t*i+s}function Ox(e,t,r,i,s){const o=r*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*i+s:e*i+s}function Px(e,t,r){return t?r-e:r+e}const JW={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let cC=class{constructor(t,r,i,s){this.url=t,this.fieldMap=i,this.dictionaryInfo=s,this._symbolPartCache=new EW(100);const o=async()=>VW.from(await s,r,i);this._evaluator=o()}async getSymbolAsync(t,r,i=!0){var $;const s=await this._evaluator,o=(r==null?void 0:r.fields)??aC(t.attributes),c=s.createDictionaryFieldsIndex(o),f=s.evaluate(t,(r==null?void 0:r.scale)??0,c,r==null?void 0:r.spatialReference);if(f==null)return null;const w=dL(t.geometry),v=yE.parse(f,s.itemNames,w),_=w==="esriGeometryPoint"&&!(($=t.geometry)!=null&&$.hasZ);return await this._cimPartsToCIMSymbol(t,v.partNames,v.overrides,_,r,i,c)}async getSymbolForControlString(t,r,i){const s=await this._evaluator,o=yE.parse(t,s.itemNames,r),c=r==="esriGeometryPoint"&&!i,f=Dx(await Promise.all(o.partNames.map((w=>this._getSymbolPart(w)))),o.overrides,c);return new ai({data:f})}async _cimPartsToCIMSymbol(t,r,i,s,o,c,f){const w=r.map(($=>this._getSymbolPart($,o)));let v=await Promise.all(w);if(c&&this.fieldMap&&v.length>0){const{OverrideHelper:$}=await Pe(()=>import("./OverrideHelper-Rpv4c8U2.js"),__vite__mapDeps([150,126,38]),import.meta.url);v=q(v);for(const I of v)$.applyDictionaryTextOverrides(I,t,this.fieldMap,f,Nw(I))}const _=Dx(v,i,s);return new ai({data:_})}async _fetchSymbolPart(t,r){const i=await this.dictionaryInfo,s=(this.url+"/"+i.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,t),{data:o}=await pr(s,{responseType:"json",query:{f:"json"},...r});return o}async _getSymbolPart(t,r){let i=this._symbolPartCache.get(t);return i||(i=this._fetchSymbolPart(t,r),this._symbolPartCache.put(t,i)),i}};function Dx(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.effects=null,i.symbolLayers=[];for(const s of e){const o=s;if(o.effects!=null)for(const c of o.symbolLayers)c.effects==null?c.effects=o.effects:c.effects.unshift(...o.effects);i.symbolLayers.unshift(...o.symbolLayers)}}return r&&(i.callout=JW),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var jw;let Ps=jw=class extends Zu(Ji){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const e=this.getDictionaryInfo();return new cC(this.url,this.config,this.fieldMap??{},e)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new jw({config:q(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:q(this.fieldMap),url:q(this.url),visualVariables:q(this.visualVariables)})}async getSymbolAsync(e,t,r=!0){return this._loader.getSymbolAsync(e,t,r)}async getSymbolForControlString(e,t,r){return this._loader.getSymbolForControlString(e,t,r)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await tn(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:e}=await pr(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return e}};u([y({type:cC})],Ps.prototype,"_loader",null),u([y({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ps.prototype,"config",void 0),u([y({type:Object,json:{write:!0}})],Ps.prototype,"fieldMap",void 0),u([y({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ps.prototype,"scaleExpression",void 0),u([me("scaleExpression")],Ps.prototype,"writeData",null),u([y({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Ps.prototype,"scaleExpressionTitle",void 0),u([y({type:String,json:{write:!0}})],Ps.prototype,"url",void 0),u([me("visualVariables")],Ps.prototype,"writeVisualVariables",null),Ps=jw=u([j("esri.renderers.DictionaryRenderer")],Ps);var Lw;let Qn=Lw=class extends se{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(xe.getLogger(this).error(".field: field must be a string value"),null):ap(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new Lw({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([y({type:it,json:{type:[Number],write:!0}})],Qn.prototype,"color",void 0),u([y({type:String,json:{write:!0}})],Qn.prototype,"field",void 0),u([Yt("field")],Qn.prototype,"castField",null),u([y({type:String,json:{write:!0}})],Qn.prototype,"label",void 0),u([y({type:String,json:{write:!0}})],Qn.prototype,"valueExpression",void 0),u([y({type:String,json:{write:!0}})],Qn.prototype,"valueExpressionTitle",void 0),Qn=Lw=u([j("esri.renderers.support.AttributeColorInfo")],Qn);const pC=Qn;var Bw;let Sh=Bw=class extends se{constructor(){super(...arguments),this.unit=null}clone(){return new Bw({unit:this.unit})}};u([y({type:String,json:{write:!0}})],Sh.prototype,"unit",void 0),Sh=Bw=u([j("esri.renderers.support.DotDensityLegendOptions")],Sh);const ZW=Sh;var Uw;let Ii=Uw=class extends Zu(Ji){constructor(e){super(e),this.attributes=null,this.backgroundColor=new it([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new cr,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Wi({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new Uw({attributes:q(this.attributes),backgroundColor:q(this.backgroundColor),dotBlendingEnabled:q(this.dotBlendingEnabled),dotShape:q(this.dotShape),dotSize:q(this.dotSize),dotValue:q(this.dotValue),legendOptions:q(this.legendOptions),outline:q(this.outline),referenceScale:q(this.referenceScale),seed:q(this.seed),visualVariables:q(this.visualVariables),authoringInfo:q(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map((r=>r.field||r.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await tn(e,t,r.valueExpression),r.field&&e.add(r.field)}};u([y({type:[pC],json:{write:!0}})],Ii.prototype,"attributes",void 0),u([y({type:it,json:{write:!0}})],Ii.prototype,"backgroundColor",void 0),u([y({type:Boolean,json:{write:!0}})],Ii.prototype,"dotBlendingEnabled",void 0),u([y({type:String,json:{write:!1}})],Ii.prototype,"dotShape",void 0),u([y({type:Number,json:{write:!0}})],Ii.prototype,"dotSize",void 0),u([y({type:ZW,json:{write:!0}})],Ii.prototype,"legendOptions",void 0),u([y({type:cr,json:{default:null,write:!0}})],Ii.prototype,"outline",void 0),u([y({type:Number,json:{write:!0}})],Ii.prototype,"dotValue",void 0),u([y({type:Number,json:{write:!0}})],Ii.prototype,"referenceScale",void 0),u([y({type:Number,json:{write:!0}})],Ii.prototype,"seed",void 0),u([Ce({dotDensity:"dot-density"})],Ii.prototype,"type",void 0),Ii=Uw=u([j("esri.renderers.DotDensityRenderer")],Ii);var zw;let ia=zw=class extends se{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new zw({color:this.color&&this.color.clone(),ratio:this.ratio})}};u([y({type:it,json:{type:[Ct],default:null,write:{isRequired:!0}}})],ia.prototype,"color",void 0),u([y({type:Number,json:{write:{isRequired:!0}}})],ia.prototype,"ratio",void 0),ia=zw=u([j("esri.renderers.support.HeatmapColorStop")],ia);let _A=class extends nt.ClonableMixin(se){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([y({type:String,json:{write:!0}})],_A.prototype,"minLabel",void 0),u([y({type:String,json:{write:!0}})],_A.prototype,"maxLabel",void 0),u([y({type:String,json:{write:!0}})],_A.prototype,"title",void 0),_A=u([j("esri.renderers.support.HeatmapLegendOptions")],_A);function YW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function KW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function XW(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}function eH(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function dC(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function hC(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function fC(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function tH(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function rH(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function iH(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function sH(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function nH(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function oH(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function aH(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function yC(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+i*i+s*s+o*o)}function mC(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],o=t[3]-e[3];return r*r+i*i+s*s+o*o}function gC(e){const t=e[0],r=e[1],i=e[2],s=e[3];return Math.sqrt(t*t+r*r+i*i+s*s)}function wC(e){const t=e[0],r=e[1],i=e[2],s=e[3];return t*t+r*r+i*i+s*s}function lH(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function AH(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function uH(e,t){const r=t[0],i=t[1],s=t[2],o=t[3];let c=r*r+i*i+s*s+o*o;return c>0&&(c=1/Math.sqrt(c),e[0]=r*c,e[1]=i*c,e[2]=s*c,e[3]=o*c),e}function cH(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function pH(e,t,r,i){const s=t[0],o=t[1],c=t[2],f=t[3];return e[0]=s+i*(r[0]-s),e[1]=o+i*(r[1]-o),e[2]=c+i*(r[2]-c),e[3]=f+i*(r[3]-f),e}function dH(e,t=1){const r=kI;let i,s,o,c,f,w;do i=2*r()-1,s=2*r()-1,f=i*i+s*s;while(f>=1);do o=2*r()-1,c=2*r()-1,w=o*o+c*c;while(w>=1);const v=Math.sqrt((1-f)/w);return e[0]=t*i,e[1]=t*s,e[2]=t*o*v,e[3]=t*c*v,e}function hH(e,t,r){const i=t[0],s=t[1],o=t[2],c=t[3];return e[0]=r[0]*i+r[4]*s+r[8]*o+r[12]*c,e[1]=r[1]*i+r[5]*s+r[9]*o+r[13]*c,e[2]=r[2]*i+r[6]*s+r[10]*o+r[14]*c,e[3]=r[3]*i+r[7]*s+r[11]*o+r[15]*c,e}function fH(e,t,r){const i=t[0],s=t[1],o=t[2],c=r[0],f=r[1],w=r[2],v=r[3],_=v*i+f*o-w*s,$=v*s+w*i-c*o,I=v*o+c*s-f*i,k=-c*i-f*s-w*o;return e[0]=_*v+k*-c+$*-w-I*-f,e[1]=$*v+k*-f+I*-c-_*-w,e[2]=I*v+k*-w+_*-f-$*-c,e[3]=t[3],e}function yH(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function mH(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function gH(e,t){const r=e[0],i=e[1],s=e[2],o=e[3],c=t[0],f=t[1],w=t[2],v=t[3],_=Rl();return Math.abs(r-c)<=_*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-f)<=_*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-w)<=_*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-v)<=_*Math.max(1,Math.abs(o),Math.abs(v))}const wH=dC,bH=hC,vH=fC,SH=yC,_H=mC,EH=gC,xH=wC;Object.freeze(Object.defineProperty({__proto__:null,add:eH,ceil:tH,copy:YW,copyVec3:KW,dist:SH,distance:yC,div:vH,divide:fC,dot:cH,equals:gH,exactEquals:mH,floor:rH,inverse:AH,len:EH,length:gC,lerp:pH,max:sH,min:iH,mul:bH,multiply:hC,negate:lH,normalize:uH,random:dH,round:nH,scale:oH,scaleAndAdd:aH,set:XW,sqrDist:_H,sqrLen:xH,squaredDistance:mC,squaredLength:wC,str:yH,sub:wH,subtract:dC,transformMat4:hH,transformQuat:fH},Symbol.toStringTag,{value:"Module"}));function Bv(){return[0,0,0,0]}function $H(e){return[e[0],e[1],e[2],e[3]]}function Yu(e,t,r,i){return[e,t,r,i]}function TH(e,t,r,i){return[e,t,r,i]}function IH(e,t=Bv()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function bC(){return Bv()}function vC(){return Yu(1,1,1,1)}function SC(){return Yu(1,0,0,0)}function _C(){return Yu(0,1,0,0)}function EC(){return Yu(0,0,1,0)}function xC(){return Yu(0,0,0,1)}const MH=bC(),CH=vC(),kH=SC(),OH=_C(),PH=EC(),DH=xC();Object.freeze(Object.defineProperty({__proto__:null,ONES:CH,UNIT_W:DH,UNIT_X:kH,UNIT_Y:OH,UNIT_Z:PH,ZEROS:MH,clone:$H,create:Bv,freeze:TH,fromArray:IH,fromValues:Yu,ones:vC,unitW:xC,unitX:SC,unitY:_C,unitZ:EC,zeros:bC},Symbol.toStringTag,{value:"Module"}));const Uv=2.4;function FH(e){return gs(e*Uv)}function RH(e){return IL(e)/Uv}function Bre(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function Ure(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var Vw;function Fx(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:s,maxPixelIntensity:o,minPixelIntensity:c,...f}=e;return f}}return e}let _r=Vw=class extends Ji{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new ia({ratio:0,color:new it("rgba(255, 140, 0, 0)")}),new ia({ratio:.75,color:new it("rgba(255, 140, 0, 1)")}),new ia({ratio:.9,color:new it("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return Fx(e)}get blurRadius(){return RH(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",FH(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(Uv**2*this.blurRadius**4)}read(e,t){e=Fx(e),super.read(e,t)}getSymbol(){return new xr}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&Yi(e,t,r),i&&typeof i=="string"&&await tn(e,t,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new Vw({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:q(this.colorStops),field:this.field,legendOptions:q(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([y({type:Gt,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],_r.prototype,"authoringInfo",void 0),u([y({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_r.prototype,"blurRadius",null),u([y({type:[ia],json:{write:{isRequired:!0}}})],_r.prototype,"colorStops",void 0),u([y({type:String,json:{write:!0}})],_r.prototype,"field",void 0),u([y({type:_A,json:{write:!0}})],_r.prototype,"legendOptions",void 0),u([y({type:Number,json:{write:!0}})],_r.prototype,"maxDensity",void 0),u([y({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_r.prototype,"maxPixelIntensity",null),u([y({type:Number,json:{write:!0}})],_r.prototype,"minDensity",void 0),u([y({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_r.prototype,"minPixelIntensity",null),u([y({type:Number,cast:ft,json:{write:!0}})],_r.prototype,"radius",void 0),u([y({type:Number,range:{min:0},json:{default:0,write:!0}})],_r.prototype,"referenceScale",void 0),u([Ce({heatmap:"heatmap"})],_r.prototype,"type",void 0),u([y({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],_r.prototype,"valueExpression",void 0),u([y({type:String})],_r.prototype,"valueExpressionTitle",void 0),u([y({readOnly:!0})],_r.prototype,"_pixelIntensityToDensity",null),_r=Vw=u([j("esri.renderers.HeatmapRenderer")],_r);let al=class extends nt.ClonableMixin(se){constructor(){super(...arguments),this.color=new it([0,0,0,0]),this.label=null,this.threshold=0}};u([y({type:it,json:{write:!0}})],al.prototype,"color",void 0),u([y({type:String,json:{write:!0}})],al.prototype,"label",void 0),u([y({type:Number,range:{min:0,max:1},json:{write:!0}})],al.prototype,"threshold",void 0),al=u([j("esri.renderers.support.OthersCategory")],al);const NH={base:ri,key:"type",typeMap:{size:mt,opacity:oo}};let Mi=class extends Zu(nt.ClonableMixin(Ji)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new it([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new al,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new xr({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(gf)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((r,i)=>r+i.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((t,r)=>t+JSON.stringify(r)),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await tn(t,r,i.valueExpression),i.field&&t.add(i.field)}};u([y({type:[pC],json:{write:!0}})],Mi.prototype,"attributes",void 0),u([y(Ev)],Mi.prototype,"backgroundFillSymbol",void 0),u([y({type:it,json:{write:!0}})],Mi.prototype,"defaultColor",void 0),u([y({type:String,json:{write:!0}})],Mi.prototype,"defaultLabel",void 0),u([y({type:Number,range:{min:0,max:1},json:{write:!0}})],Mi.prototype,"holePercentage",void 0),u([y({type:al,json:{write:!0}})],Mi.prototype,"othersCategory",void 0),u([y({type:xv,json:{write:!0}})],Mi.prototype,"legendOptions",void 0),u([y({type:cr,json:{default:null,write:!0}})],Mi.prototype,"outline",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],Mi.prototype,"size",void 0),u([Ce({pieChart:"pie-chart"})],Mi.prototype,"type",void 0),u([y({types:[NH]})],Mi.prototype,"visualVariables",void 0),Mi=u([j("esri.renderers.PieChartRenderer")],Mi);const _p={key:"type",base:Ji,typeMap:{heatmap:_r,simple:wi,"unique-value":Nt,"class-breaks":ar,"dot-density":Ii,dictionary:Ps,"pie-chart":Mi},errorContext:"renderer"},jH={key:"type",base:Ji,typeMap:{simple:wi,"unique-value":Nt,"class-breaks":ar,heatmap:_r},errorContext:"renderer",validate:LH};function LH(e){switch(e.type){case"simple":return BH(e);case"unique-value":return UH(e);case"class-breaks":return zH(e);case"heatmap":return e}}function BH(e){if(e.symbol)return e;xe.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function UH(e){const t=e.uniqueValueInfos,r=t==null?void 0:t.filter((({symbol:i,label:s},o)=>(i||xe.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${o}] ${s}) without a symbol from web scene.`),!!i)));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=r),e}function zH(e){const t=e.classBreakInfos,r=t==null?void 0:t.filter((({symbol:i,label:s},o)=>(i||xe.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${o}] ${s}) without a symbol from web scene.`),!!i)));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=r),e}function Gre(e,t){return ip(e,null,t)}const VH=ju({types:_p});function ip(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r!=null&&r.messages&&r.messages.push(new Mn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):VH(e,t,r):null}var Gw;let Gr=Gw=class extends la{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=ft("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter((s=>s.statisticType!=="avg_angle")).map((s=>s.toJSON()));Mr(r,i,t)}readRenderer(e,t,r){var s;const i=(s=t.drawingInfo)==null?void 0:s.renderer;return i?ip(i,t,r)??void 0:Tv(t,r)}clone(){return new Gw({fields:q(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:q(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:q(this.popupTemplate),renderer:q(this.renderer),binType:q(this.binType),size:this.size})}};u([Ce({binning:"binning"})],Gr.prototype,"type",void 0),u([Ce({geohash:"geohash",square:"square"}),y({type:["geohash","square"]})],Gr.prototype,"binType",void 0),u([y({type:Number,json:{write:!0}})],Gr.prototype,"fixedBinLevel",void 0),u([y({type:[Lt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Gr.prototype,"labelingInfo",void 0),u([y(Xf)],Gr.prototype,"labelsVisible",void 0),u([y({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Gr.prototype,"maxScale",void 0),u([y(Kf)],Gr.prototype,"popupEnabled",void 0),u([y({type:Vu,json:{name:"popupInfo",write:!0}})],Gr.prototype,"popupTemplate",void 0),u([y({cast:e=>e==="auto"?e:Nu(ft(e))})],Gr.prototype,"size",void 0),u([y({type:[oi],json:{write:!0}})],Gr.prototype,"fields",void 0),u([me("fields")],Gr.prototype,"writeFields",null),u([y({types:_p,json:{write:{target:"drawingInfo.renderer"}}})],Gr.prototype,"renderer",void 0),u([ce("renderer",["drawingInfo.renderer"])],Gr.prototype,"readRenderer",null),Gr=Gw=u([j("esri.layers.support.FeatureReductionBinning")],Gr);var qw;function Rx(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let lr=qw=class extends se{constructor(e){super(e),this.type="cluster",this.clusterRadius=ft("80px"),this.clusterMinSize=ft("12px"),this.clusterMaxSize=ft("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){var s,o;const i=(s=t.drawingInfo)==null?void 0:s.renderer;return(o=i==null?void 0:i.authoringInfo)!=null&&o.isAutoGenerated?null:i?Rx(i)?null:ip(i,t,r)??void 0:Tv(t,r)}readSymbol(e,t,r){var s,o;const i=(s=t.drawingInfo)==null?void 0:s.renderer;if((o=i==null?void 0:i.authoringInfo)!=null&&o.isAutoGenerated)return null;if(i&&Rx(i)){const c=ip(i,t,r);return c==null?void 0:c.symbol}return null}writeSymbol(e,t,r,i){var o,c;const s=(c=(o=this.renderer)==null?void 0:o.authoringInfo)==null?void 0:c.isAutoGenerated;if(!this.renderer||s){const f=new wi({symbol:e});t.drawingInfo={renderer:f.write({},i)}}}writeFields(e,t,r){const i=e.filter((s=>s.statisticType!=="avg_angle")).map((s=>s.toJSON()));Mr(r,i,t)}readFields(e,t,r){return e.filter((i=>!i.isAutoGenerated)).map((i=>oi.fromJSON(i)))}clone(){return new qw({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:q(this.labelingInfo),labelsVisible:this.labelsVisible,fields:q(this.fields),maxScale:this.maxScale,renderer:q(this.renderer),symbol:q(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:q(this.popupTemplate)})}};u([y({type:["cluster"],readOnly:!0,json:{write:!0}})],lr.prototype,"type",void 0),u([y({cast:e=>e==="auto"?e:Nu(ft(e)),json:{write:!0}})],lr.prototype,"clusterRadius",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],lr.prototype,"clusterMinSize",void 0),u([y({type:Number,cast:ft,json:{write:!0}})],lr.prototype,"clusterMaxSize",void 0),u([y({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],lr.prototype,"maxScale",void 0),u([y(Kf)],lr.prototype,"popupEnabled",void 0),u([y({type:Vu,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],lr.prototype,"popupTemplate",void 0),u([y({types:_p,json:{write:{target:"drawingInfo.renderer"}}})],lr.prototype,"renderer",void 0),u([ce("renderer",["drawingInfo.renderer"])],lr.prototype,"readRenderer",null),u([y({types:vB})],lr.prototype,"symbol",void 0),u([ce("symbol",["drawingInfo.renderer"])],lr.prototype,"readSymbol",null),u([me("symbol")],lr.prototype,"writeSymbol",null),u([y({type:[Lt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],lr.prototype,"labelingInfo",void 0),u([y(Xf)],lr.prototype,"labelsVisible",void 0),u([y({type:[oi],json:{write:!0}})],lr.prototype,"fields",void 0),u([me("fields")],lr.prototype,"writeFields",null),u([ce("fields")],lr.prototype,"readFields",null),lr=qw=u([j("esri.layers.support.FeatureReductionCluster")],lr);var Qw;let Oc=Qw=class extends la{constructor(e){super(e),this.type="selection"}clone(){return new Qw}};u([y({type:["selection"]})],Oc.prototype,"type",void 0),Oc=Qw=u([j("esri.layers.support.FeatureReductionSelection")],Oc);const Nx={key:"type",base:la,typeMap:{cluster:lr,binning:Gr}},GH={types:{key:"type",base:la,typeMap:{selection:Oc,cluster:lr,binning:Gr}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:Nx},"portal-item":{types:Nx},"web-scene":{types:{key:"type",base:la,typeMap:{selection:Oc}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Ft}}}}},rA={Base64:0,Hex:1,String:2,Raw:3},KA=8,$C=(1<<KA)-1;function sa(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function qH(e){const t=[];for(let r=0,i=e.length*KA;r<i;r+=KA)t[r>>5]|=(e.charCodeAt(r/KA)&$C)<<r%32;return t}function QH(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=KA)t.push(String.fromCharCode(e[r>>5]>>>r%32&$C));return t.join("")}function WH(e){const t="0123456789abcdef",r=[];for(let i=0,s=4*e.length;i<s;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function HH(e){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let s=0,o=4*e.length;s<o;s+=3){const c=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let f=0;f<4;f++)8*s+6*f>32*e.length?i.push("="):i.push(r.charAt(c>>6*(3-f)&63))}return i.join("")}function JH(e,t){return e<<t|e>>>32-t}function iy(e,t,r,i,s,o){return sa(JH(sa(sa(t,e),sa(i,o)),s),r)}function Yr(e,t,r,i,s,o,c){return iy(t&r|~t&i,e,t,s,o,c)}function Kr(e,t,r,i,s,o,c){return iy(t&i|r&~i,e,t,s,o,c)}function Xr(e,t,r,i,s,o,c){return iy(t^r^i,e,t,s,o,c)}function ei(e,t,r,i,s,o,c){return iy(r^(t|~i),e,t,s,o,c)}function ZH(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,s=-1732584194,o=271733878;for(let c=0;c<e.length;c+=16){const f=r,w=i,v=s,_=o;r=Yr(r,i,s,o,e[c],7,-680876936),o=Yr(o,r,i,s,e[c+1],12,-389564586),s=Yr(s,o,r,i,e[c+2],17,606105819),i=Yr(i,s,o,r,e[c+3],22,-1044525330),r=Yr(r,i,s,o,e[c+4],7,-176418897),o=Yr(o,r,i,s,e[c+5],12,1200080426),s=Yr(s,o,r,i,e[c+6],17,-1473231341),i=Yr(i,s,o,r,e[c+7],22,-45705983),r=Yr(r,i,s,o,e[c+8],7,1770035416),o=Yr(o,r,i,s,e[c+9],12,-1958414417),s=Yr(s,o,r,i,e[c+10],17,-42063),i=Yr(i,s,o,r,e[c+11],22,-1990404162),r=Yr(r,i,s,o,e[c+12],7,1804603682),o=Yr(o,r,i,s,e[c+13],12,-40341101),s=Yr(s,o,r,i,e[c+14],17,-1502002290),i=Yr(i,s,o,r,e[c+15],22,1236535329),r=Kr(r,i,s,o,e[c+1],5,-165796510),o=Kr(o,r,i,s,e[c+6],9,-1069501632),s=Kr(s,o,r,i,e[c+11],14,643717713),i=Kr(i,s,o,r,e[c],20,-373897302),r=Kr(r,i,s,o,e[c+5],5,-701558691),o=Kr(o,r,i,s,e[c+10],9,38016083),s=Kr(s,o,r,i,e[c+15],14,-660478335),i=Kr(i,s,o,r,e[c+4],20,-405537848),r=Kr(r,i,s,o,e[c+9],5,568446438),o=Kr(o,r,i,s,e[c+14],9,-1019803690),s=Kr(s,o,r,i,e[c+3],14,-187363961),i=Kr(i,s,o,r,e[c+8],20,1163531501),r=Kr(r,i,s,o,e[c+13],5,-1444681467),o=Kr(o,r,i,s,e[c+2],9,-51403784),s=Kr(s,o,r,i,e[c+7],14,1735328473),i=Kr(i,s,o,r,e[c+12],20,-1926607734),r=Xr(r,i,s,o,e[c+5],4,-378558),o=Xr(o,r,i,s,e[c+8],11,-2022574463),s=Xr(s,o,r,i,e[c+11],16,1839030562),i=Xr(i,s,o,r,e[c+14],23,-35309556),r=Xr(r,i,s,o,e[c+1],4,-1530992060),o=Xr(o,r,i,s,e[c+4],11,1272893353),s=Xr(s,o,r,i,e[c+7],16,-155497632),i=Xr(i,s,o,r,e[c+10],23,-1094730640),r=Xr(r,i,s,o,e[c+13],4,681279174),o=Xr(o,r,i,s,e[c],11,-358537222),s=Xr(s,o,r,i,e[c+3],16,-722521979),i=Xr(i,s,o,r,e[c+6],23,76029189),r=Xr(r,i,s,o,e[c+9],4,-640364487),o=Xr(o,r,i,s,e[c+12],11,-421815835),s=Xr(s,o,r,i,e[c+15],16,530742520),i=Xr(i,s,o,r,e[c+2],23,-995338651),r=ei(r,i,s,o,e[c],6,-198630844),o=ei(o,r,i,s,e[c+7],10,1126891415),s=ei(s,o,r,i,e[c+14],15,-1416354905),i=ei(i,s,o,r,e[c+5],21,-57434055),r=ei(r,i,s,o,e[c+12],6,1700485571),o=ei(o,r,i,s,e[c+3],10,-1894986606),s=ei(s,o,r,i,e[c+10],15,-1051523),i=ei(i,s,o,r,e[c+1],21,-2054922799),r=ei(r,i,s,o,e[c+8],6,1873313359),o=ei(o,r,i,s,e[c+15],10,-30611744),s=ei(s,o,r,i,e[c+6],15,-1560198380),i=ei(i,s,o,r,e[c+13],21,1309151649),r=ei(r,i,s,o,e[c+4],6,-145523070),o=ei(o,r,i,s,e[c+11],10,-1120210379),s=ei(s,o,r,i,e[c+2],15,718787259),i=ei(i,s,o,r,e[c+9],21,-343485551),r=sa(r,f),i=sa(i,w),s=sa(s,v),o=sa(o,_)}return[r,i,s,o]}function TC(e,t=rA.Hex){const r=t||rA.Base64,i=ZH(qH(e),e.length*KA);switch(r){case rA.Raw:return i;case rA.Hex:return WH(i);case rA.String:return QH(i);case rA.Base64:return HH(i)}}const YH=()=>xe.getLogger("esri.views.2d.layers.support.clusterUtils");J.add("esri-cluster-arcade-enabled",!0);const KH=J("esri-cluster-arcade-enabled"),XH=new Set(["simple-line","simple-fill","picture-fill"]);function jx(e,t){let r=t.clone();if(!eJ(r))return r;if(t.symbols.some((i=>XH.has(i.type)))&&(r=new wi({symbol:new xr})),r.authoringInfo||(r.authoringInfo=new Gt),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter((s=>s.valueExpression!=="$view.scale"));i.forEach((s=>{s.type==="rotation"?s.field?s.field=Ra(e,s.field,"avg_angle","number"):s.valueExpression&&(s.field=x0(e,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=Ra(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=Ra(e,s.field,"avg","number"):s.valueExpression&&(s.field=x0(e,s.valueExpression,"avg","number"),s.valueExpression=null)})),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=Ra(e,i.field,"sum","number"):i.valueExpression&&(i.field=x0(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=Ra(e,r.field,"mode","string"):r.valueExpression&&(r.field=x0(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=Ra(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=Ra(e,r.field,"avg","number"):r.valueExpression&&(r.field=x0(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const eJ=e=>{const t=r=>YH().error(new re("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!KH){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some((r=>!(!("valueExpression"in r)||!r.valueExpression))))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function tJ(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,s="field",o=t.toLowerCase()+",norm:"+s+","+i.toLowerCase();return"cluster_avg_"+TC(o)}}}function x0(e,t,r,i){const s=TC(t),o=r==="mode"?`cluster_type_${s}`:r==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some((c=>c.name===o))||e.push(new oi({name:o,isAutoGenerated:!0,onStatisticExpression:new Ho({expression:t,returnType:i}),statisticType:r})),o}function Ra(e,t,r,i,s){if(t==="cluster_count"||e.some((c=>c.name===t)))return t;const o=tJ(r,t,s);return e.some((c=>c.name===o))||(r==="avg_norm"?e.push(new oi({name:o,isAutoGenerated:!0,onStatisticExpression:new Ho({expression:`$feature.${t} / $feature.${s}`,returnType:i}),statisticType:"avg"})):e.push(new oi({name:o,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),o}const rJ=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(zA((()=>this.renderer),(()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}}),jb))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,s){const o=r.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some((c=>c.type==="size"))||o.visualVariables.push(new mt({field:"cluster_count",stops:[new Ls({value:1}),new Ls({useMinValue:!0,size:i}),new Ls({useMaxValue:!0,size:s})]}))),o}_normalizeFeatureReduction(r){var $;if((r==null?void 0:r.type)!=="cluster")return r;const i=r.clone(),s=[new oi({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(i.fields??[]).filter((I=>!I.isAutoGenerated)),c=r.renderer&&!(($=r.renderer.authoringInfo)!=null&&$.isAutoGenerated),{clusterMinSize:f,clusterMaxSize:w}=i;if(c){i.fields=[...s,...o];const I=this._withClusterVariable(i.renderer,f,w);return i.effectiveFeatureRenderer=I,i.effectiveClusterRenderer=I,i}if(r.symbol){if(i.fields=[...s,...o],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const I=jx(s,this.renderer),k=this._withClusterVariable(I,f,w),N="visualVariables"in k&&k.visualVariables?k.visualVariables:[],B=new wi({symbol:r.symbol,visualVariables:N});return i.fields=[...s,...o],i.effectiveFeatureRenderer=k,i.effectiveClusterRenderer=B,i}if(!this.renderer)return r;const v=jx(s,this.renderer);i.fields=[...s,...o],i.renderer=v;const _=this._withClusterVariable(v,f,w);return i.effectiveFeatureRenderer=_,i.effectiveClusterRenderer=_,i}};return u([y(GH)],t.prototype,"featureReduction",null),t=u([j("esri.layers.mixins.FeatureReductionLayer")],t),t},Lx={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},Bx={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},Ux={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},iJ={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":Lx,"web-map/basemap":Bx,"web-map/tables":Ux,"link-chart/operational-layers":{...Lx,LinkChartLayer:!0},"link-chart/basemap":Bx,"link-chart/tables":Ux,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},sJ=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,s){var o;return((o=s==null?void 0:s.portalItem)==null?void 0:o.type)==="Group Layer"?void 0:r}writeListMode(r,i,s,o){(o&&o.layerContainerType==="ground"||r&&F9(this,s,{},o))&&(i[s]=r)}writeOperationalLayerType(r,i,s){r&&(i[s]=r)}writeTitle(r,i){i.title=r??"Layer"}readVisibilityTimeExtent(r){return r?fr.fromArray(r):null}writeVisibilityTimeExtent(r,i,s,o){r&&o.layerContainerType!=="tables"&&(r.isEmpty?o!=null&&o.messages&&o.messages.push(new re("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[s]=r.toArray())}read(r,i){i&&(i.layer=this),O9(this,r,(s=>super.read(r,s)),i)}write(r,i){var c,f;if(!this.persistenceEnabled&&!(i!=null&&i.ignorePersistenceEnabled))return null;if(i!=null&&i.origin){const w=`${i.origin}/${i.layerContainerType||"operational-layers"}`,v=iJ[w];let _=!!(v!=null&&v[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&w==="web-scene/operational-layers"&&(_=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&w==="web-map/operational-layers"&&(_=!1),!_)return(c=i.messages)==null||c.push(new re("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${w}'`,{layer:this})),null}const s=super.write(r,{...i,layer:this}),o=!!i&&!!i.messages&&!!i.messages.filter((w=>w instanceof re&&w.name==="web-document-write:property-required")).length;return Bf(s==null?void 0:s.url)?((f=i==null?void 0:i.messages)==null||f.push(new re("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:s}beforeSave(){}};return u([y({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),u([ce("id",["id"])],t.prototype,"readId",null),u([y(aM)],t.prototype,"listMode",void 0),u([me("listMode")],t.prototype,"writeListMode",null),u([y({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Ft,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),u([me("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),u([y(Kg)],t.prototype,"opacity",void 0),u([y({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),u([y({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),u([me("title"),me(["web-scene"],"title")],t.prototype,"writeTitle",null),u([y({type:fr,json:{origins:{"web-scene":{write:{layerContainerTypes:Ft}}}}})],t.prototype,"visibilityTimeExtent",void 0),u([ce("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),u([me(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Ct,If]]}})],t.prototype,"writeVisibilityTimeExtent",null),u([y({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Ft}}})],t.prototype,"visible",void 0),t=u([j("esri.layers.mixins.OperationalLayer")],t),t};var Ww;const wd=new pt({asc:"ascending",desc:"descending"});var vu;let ll=(vu=class extends se{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Ww({field:this.field,valueExpression:this.valueExpression,order:this.order})}},Ww=vu,vu);u([y({type:String,json:{write:!0}})],ll.prototype,"field",void 0),u([y({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],ll.prototype,"valueExpression",void 0),u([y({type:wd.apiValues,json:{type:wd.jsonValues,read:wd.read,write:wd.write}})],ll.prototype,"order",void 0),ll=Ww=u([j("esri.layers.support.OrderByInfo")],ll);function nJ(e,t,r){if(!e)return null;const i=e.find((o=>!!o.field));if(!i)return null;const s=new ll;return s.read(i,r),[s]}function oJ(e,t,r,i){const s=e.find((o=>!!o.field));s&&Mr(r,[s.toJSON()],t)}const aJ={type:[ll],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:nJ},write:{writer:oJ}}},lJ=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return u([y(aJ)],t.prototype,"orderBy",void 0),t=u([j("esri.layers.mixins.OrderedLayer")],t),t};let Wn=class extends Bt{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:zx(t.path,t.portalItem)}:t}set path(t){t!=null&&Xi(t)?xe.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return zx(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new re("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r!=null&&r.cacheBust?Date.now():null},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await Pe(()=>import("./resourceUtils-CcmuNY3v.js"),[],import.meta.url);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function zx(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Xi(e)&&(e=qb(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([y()],Wn.prototype,"portalItem",void 0),u([y({type:String,value:null})],Wn.prototype,"path",null),u([Yt("path")],Wn.prototype,"_castPath",null),u([y({type:String,readOnly:!0})],Wn.prototype,"url",null),u([y({type:String,readOnly:!0})],Wn.prototype,"cdnUrl",null),u([y({type:String,readOnly:!0})],Wn.prototype,"itemRelativeUrl",null),Wn=u([j("esri.portal.PortalItemResource")],Wn);let hl=class extends Bt{constructor(t){super(t),this.created=null,this.rating=null}};u([y({type:Date})],hl.prototype,"created",void 0),u([y()],hl.prototype,"rating",void 0),hl=u([j("esri.portal.PortalRating")],hl);var rl;const AJ=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),uJ=new Set(["KML","GeoJson","CSV"]);let Be=rl=class extends se.JSONSupportMixin(Xo){static from(e){return $f(rl,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new ct(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var k;const e=((k=this.type)==null?void 0:k.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let s,o=!1,c=!1,f=!1,w=!1,v=!1,_=!1,$=!1,I=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(o=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(c=t.includes("Table"),f=t.includes("Route Layer"),w=t.includes("Markup"),v=t.includes("Spatiotemporal"),_=t.includes("UtilityNetwork"),s=v&&c?"spatiotemporaltable":c?"table":f?"routelayer":w?"markup":v?"spatiotemporal":_?"utilitynetwork":o?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(v=t.includes("Spatiotemporal"),$=t.includes("Relational"),s=v||$?"mapimages":o||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="reality mapping project"?s="realitymappingproject":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="urban project"?s="urbanproject":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro presentation"?s="propresentation":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(I=t.includes("Map"),s=I?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?zf(r+s+i+".png"):null}get isLayer(){return this.type!=null&&AJ.has(this.type)}get itemCdnUrl(){return Zb(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,s;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((s=(i=this.portal)==null?void 0:i.user)==null?void 0:s.id);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=le.getDefault()),r=t.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{})).then((i=>{this.sourceJSON=i,this.read(i)}));return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},r=e instanceof hl?e.rating:e;return r==null||isNaN(r)||typeof e!="number"||(t.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new hl({rating:r,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:q(this.applicationProxies),avgRating:this.avgRating,categories:q(this.categories),classification:q(this.classification),created:q(this.created),culture:this.culture,description:this.description,extent:q(this.extent),groupCategories:q(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:q(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:q(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new rl({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(t=e[r])==null?void 0:t.join(", ");for(const r of["extent","classification"]){const i=e[r];i&&(e[r]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new hl(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},rl)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new re("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new re("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:s,tags:o,title:c}=e||{},f={method:"post",query:{copyPrivateResources:i==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!i,tags:o==null?void 0:o.join(","),title:c}},{itemId:w}=await t.request(`${r}/copy`,f);return new rl({id:w,portal:t})}updateThumbnail(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")Dl(t)?i.query={data:t}:i.query={url:zs(t)},r!=null&&(i.query.filename=r);else{const s=new FormData;r!=null?s.append("file",t,r):s.append("file",t),i.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then((()=>this.reload()))})):Promise.reject(new re("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await Pe(()=>import("./resourceUtils-CcmuNY3v.js"),[],import.meta.url);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await Pe(()=>import("./resourceUtils-CcmuNY3v.js"),[],import.meta.url);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await Pe(()=>import("./resourceUtils-CcmuNY3v.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new re("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await Pe(()=>import("./resourceUtils-CcmuNY3v.js"),[],import.meta.url);return t(this,e)}resourceFromPath(e){return new Wn({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:q(this.categories),classification:q(this.classification),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};return O7(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new rl({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};u([y({type:["private","shared","org","public"]})],Be.prototype,"access",void 0),u([y()],Be.prototype,"accessInformation",void 0),u([y({type:String})],Be.prototype,"apiKey",void 0),u([y({json:{read:{source:"appProxies"}}})],Be.prototype,"applicationProxies",void 0),u([y()],Be.prototype,"avgRating",void 0),u([y()],Be.prototype,"categories",void 0),u([y()],Be.prototype,"classification",void 0),u([y({type:Date})],Be.prototype,"created",void 0),u([y()],Be.prototype,"culture",void 0),u([y()],Be.prototype,"description",void 0),u([y({readOnly:!0})],Be.prototype,"displayName",null),u([y({type:ct})],Be.prototype,"extent",void 0),u([ce("extent")],Be.prototype,"readExtent",null),u([y()],Be.prototype,"groupCategories",void 0),u([y({readOnly:!0})],Be.prototype,"iconUrl",null),u([y()],Be.prototype,"id",void 0),u([y({readOnly:!0})],Be.prototype,"isLayer",null),u([y({type:Boolean,readOnly:!0})],Be.prototype,"isOrgItem",void 0),u([y()],Be.prototype,"itemControl",void 0),u([y({readOnly:!0})],Be.prototype,"itemPageUrl",null),u([y({readOnly:!0})],Be.prototype,"itemUrl",null),u([y()],Be.prototype,"licenseInfo",void 0),u([y({type:Date})],Be.prototype,"modified",void 0),u([y()],Be.prototype,"name",void 0),u([y()],Be.prototype,"numComments",void 0),u([y()],Be.prototype,"numRatings",void 0),u([y()],Be.prototype,"numViews",void 0),u([y()],Be.prototype,"owner",void 0),u([y()],Be.prototype,"ownerFolder",void 0),u([y({type:le})],Be.prototype,"portal",void 0),u([y()],Be.prototype,"screenshots",void 0),u([y()],Be.prototype,"size",void 0),u([y()],Be.prototype,"snippet",void 0),u([y()],Be.prototype,"sourceJSON",void 0),u([y({type:String})],Be.prototype,"sourceUrl",void 0),u([y({type:String})],Be.prototype,"spatialReference",void 0),u([y()],Be.prototype,"tags",void 0),u([y()],Be.prototype,"thumbnail",void 0),u([y({readOnly:!0})],Be.prototype,"thumbnailUrl",null),u([y()],Be.prototype,"title",void 0),u([y()],Be.prototype,"type",void 0),u([y()],Be.prototype,"typeKeywords",void 0),u([y({type:String,json:{read(e,t){var r;if(uJ.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],Be.prototype,"url",void 0),u([y({readOnly:!0})],Be.prototype,"userItemUrl",null),Be=rl=u([j("esri.portal.PortalItem")],Be);const IC=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Be}},Symbol.toStringTag,{value:"Module"})),cJ=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=NA(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,s){if(i.itemId)return new Be({id:i.itemId,portal:s==null?void 0:s.portal})}writePortalItem(r,i){r!=null&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:o}=await Pe(()=>import("./layersLoader-BMFGGuar.js"),__vite__mapDeps([151,32,33,31,152]),import.meta.url);return Xs(i),await o({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},i)}catch(o){throw Pn(o)||xe.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${o}`),o}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch((i=>(vn(i),!0))))}async setUserPrivileges(r,i){if(!xt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:s,fullEdit:o},content:{updateItem:c}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",c)}catch(s){vn(s)}}async _fetchUserPrivileges(r,i){let s=this.portalItem;if(!r||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(i);const o=!(et!=null&&et.findCredential(this.url)),c=r===s.id;if(c&&s.portal.user)return this._getUserPrivileges(s,o);let f,w;if(c)f=s.portal.url;else try{f=await uM(this.url,i)}catch(I){vn(I)}if(!f||!WR(f,s.portal.url))return this._fetchFallbackUserPrivileges(i);try{const I=i!=null?i.signal:null;w=await(et==null?void 0:et.getCredential(`${f}/sharing`,{prompt:!1,signal:I}))}catch(I){vn(I)}const v=!0,_=!1,$=!1;if(!w)return{features:{edit:v,fullEdit:_},content:{updateItem:$}};try{if(c?await s.reload():(s=new Be({id:r,portal:{url:f}}),await s.load(i)),s.portal.user)return this._getUserPrivileges(s,o)}catch(I){vn(I)}return{features:{edit:v,fullEdit:_},content:{updateItem:$}}}_getUserPrivileges(r,i){const s=iW(r);return i&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(s){vn(s)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?et==null?void 0:et.findCredential(this.url):null;if(!i)return!0;const s=bd.credential===i?bd.user:await this._fetchEditingUser(r);return bd.credential=i,bd.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var _,$;const i=($=(_=this.portalItem)==null?void 0:_.portal)==null?void 0:$.user;if(i)return i;const s=et==null?void 0:et.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const o=`${s.owningSystemUrl}/sharing/rest`,c=le.getDefault();if(c&&c.loaded&&Js(c.restUrl)===Js(o))return c.user;const f=`${o}/community/self`,w=r!=null?r.signal:null,v=await lM(pr(f,{authMode:"no-prompt",query:{f:"json"},signal:w}));return v.ok?Tt.fromJSON(v.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){var c;const s=i==null?void 0:i.portal,o=((c=this.portalItem)==null?void 0:c.id)&&(this.portalItem.portal||le.getDefault());return s&&o&&!bT(o.restUrl,s.restUrl)?(i.messages&&i.messages.push(new re("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return u([y({type:Be})],t.prototype,"portalItem",null),u([ce("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),u([me("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),u([y({clonable:!1})],t.prototype,"resourceReferences",void 0),u([y({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),u([y({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),u([y({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=u([j("esri.layers.mixins.PortalLayer")],t),t},bd={credential:null,user:null};let cc=class extends Bt{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([y()],cc.prototype,"updating",void 0),u([y()],cc.prototype,"status",void 0),cc=u([j("esri.layers.support.PublishingInfo")],cc);const pJ=Symbol(),dJ=e=>{var i;var t;let r=(i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const o=new cc;return this._checkPublishingStatus(o),o}_checkPublishingStatus(s){let f=0;const w=async _=>{let $;s.updating=!0;try{$=await this.fetchPublishingStatus()}catch{$="unavailable"}$!=="published"&&$!=="unavailable"||(s.status==="publishing"&&this.refresh(),v.remove()),s.status=$,s.updating=!1,v.removed||(f=setTimeout(w,_,_+125))},v={removed:!1,remove(){this.removed=!0,clearTimeout(f)}};this.when().catch((()=>v.remove())),w(250),this.addHandles(v)}},t=pJ,i);return u([y({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=u([j("esri.layers.mixins.PublishableLayer")],r),r},na=new st,Pc=new WeakMap;function hJ(e){yJ(e)&&na.push(new WeakRef(e))}function fJ(e){const t=na.find((r=>r.deref()===e));t&&na.remove(t)}function yJ(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function MC(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:MC(t,e%t):0}let r2=0,vd=0;function mJ(){const e=Date.now();let t=!1;for(const r of na){const i=r.deref();i?i.refreshInterval&&e-(Pc.get(i)??0)+5>=6e4*i.refreshInterval&&(Pc.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=na.length-1;r>=0;r--)na.at(r).deref()||na.removeAt(r)}kO((()=>{const e=Date.now();let t=0;for(const r of na){const i=r.deref();i&&(t=MC(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Pc.get(i)||Pc.set(i,e):Pc.delete(i))}if(t!==vd){if(vd=t,clearInterval(r2),vd===0)return void(r2=0);r2=setInterval(mJ,vd)}}),jb);const Vx=.1,gJ=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=W$((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||hJ(this)}),(()=>{}))}destroy(){fJ(this)}castRefreshInterval(r){return r>=Vx?r:r<=0?0:Vx}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){vO(this._debounceHasDataChanged()).then((i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})}),(i=>{xe.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})}))}async hasDataChanged(){return!0}get test(){}};return u([y({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Ft}}}}})],t.prototype,"refreshInterval",void 0),u([Yt("refreshInterval")],t.prototype,"castRefreshInterval",null),u([y({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),u([y({readOnly:!0})],t.prototype,"refreshParameters",null),t=u([j("esri.layers.mixins.RefreshableLayer")],t),t},CC=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&wJ(r,i.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return u([y({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),u([y({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),u([y({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=u([j("esri.layers.mixins.ScaleRangeLayer")],t),t};function wJ(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const kC=Ur()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Ao=class extends nt.ClonableMixin(se){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return bI(this.value,this.unit,"milliseconds")}};u([Ce(kC,{nonNullable:!0})],Ao.prototype,"unit",void 0),u([y({type:Number,json:{write:!0},nonNullable:!0})],Ao.prototype,"value",void 0),Ao=u([j("esri.time.TimeInterval")],Ao);function Gx(e,t){return Ao.fromJSON({value:e,unit:t})}let Fr=class extends nt.ClonableMixin(se){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?fr.fromArray(r.timeExtent):null}writeFullTimeExtent(t,r){(t==null?void 0:t.start)!=null&&t.end!=null?r.timeExtent=t.toArray():r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?Gx(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?Gx(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(t,r){r.timeInterval=(t==null?void 0:t.toJSON().value)??null,r.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};u([y({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Fr.prototype,"cumulative",void 0),u([y({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Fr.prototype,"endField",void 0),u([y({type:fr,json:{write:{enabled:!0,allowNull:!0}}})],Fr.prototype,"fullTimeExtent",void 0),u([ce("fullTimeExtent",["timeExtent"])],Fr.prototype,"readFullTimeExtent",null),u([me("fullTimeExtent")],Fr.prototype,"writeFullTimeExtent",null),u([y({type:Boolean,json:{write:!0}})],Fr.prototype,"hasLiveData",void 0),u([y({type:Ao,json:{write:{enabled:!0,allowNull:!0}}})],Fr.prototype,"interval",void 0),u([ce("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Fr.prototype,"readInterval",null),u([me("interval")],Fr.prototype,"writeInterval",null),u([y({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Fr.prototype,"startField",void 0),u([y(zh("timeReference",!0))],Fr.prototype,"timeZone",void 0),u([y({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Fr.prototype,"trackIdField",void 0),u([y({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Fr.prototype,"useTime",void 0),u([y({type:[Date],json:{read:!1}})],Fr.prototype,"stops",void 0),Fr=u([j("esri.layers.support.TimeInfo")],Fr);const bJ={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Ft}}},vJ=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const s=i.timeInfo.exportOptions;if(!s)return null;const o=s.timeOffset,c=kC.fromJSON(s.timeOffsetUnits);return o&&c?new Ao({value:o,unit:c}):null}set timeInfo(r){C6(r,this.fieldsIndex),this._set("timeInfo",r)}};return u([y({type:fr,json:{write:!1}})],t.prototype,"timeExtent",void 0),u([y({type:Ao})],t.prototype,"timeOffset",void 0),u([ce("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),u([y({value:null,type:Fr,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),u([y(bJ)],t.prototype,"useViewTime",void 0),t=u([j("esri.layers.mixins.TemporalLayer")],t),t};let hs=class extends nt.ClonableMixin(se){constructor(t){super(t),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};u([y({type:[Lt],json:{write:!0}})],hs.prototype,"labelingInfo",void 0),u([y(Xf)],hs.prototype,"labelsVisible",void 0),u([y({types:_p,json:{write:!0}})],hs.prototype,"renderer",void 0),u([y({type:Boolean,json:{write:!0}})],hs.prototype,"visible",void 0),hs=u([j("esri.layers.support.TrackPartInfo")],hs);let Ci=class extends nt.ClonableMixin(se){constructor(t){super(t),this.enabled=!0,this.fields=[],this.latestObservations=new hs({renderer:new wi({symbol:yw.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new hs({renderer:new wi({symbol:yw.clone()})}),this.trackLines=new hs({renderer:new wi({symbol:gM.clone()})}),this.timeField="startTimeField"}writeFields(t,r,i){const s=t.filter((o=>o.statisticType!=="avg_angle")).map((o=>o.toJSON()));Mr(i,s,r)}};u([y({type:Boolean,json:{write:!0}})],Ci.prototype,"enabled",void 0),u([y({type:[oi],json:{write:!0}})],Ci.prototype,"fields",void 0),u([me("fields")],Ci.prototype,"writeFields",null),u([y({type:hs,json:{write:!0}})],Ci.prototype,"latestObservations",void 0),u([y({type:Ao,json:{write:!0}})],Ci.prototype,"maxDisplayDuration",void 0),u([y({type:Number,json:{write:!0}})],Ci.prototype,"maxDisplayObservationsPerTrack",void 0),u([y(Kf)],Ci.prototype,"popupEnabled",void 0),u([y({type:Vu,json:{name:"popupInfo",write:!0}})],Ci.prototype,"popupTemplate",void 0),u([y({type:hs,json:{write:!0}})],Ci.prototype,"previousObservations",void 0),u([y({type:hs,json:{write:!0}})],Ci.prototype,"trackLines",void 0),u([y({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Ci.prototype,"timeField",void 0),Ci=u([j("esri.layers.support.TrackInfo")],Ci);const SJ=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return u([y({type:Ci})],t.prototype,"trackInfo",void 0),t=u([j("esri.layers.mixins.TrackableLayer")],t),t},qx=new pt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let bn=class extends nt.ClonableMixin(se){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([y({json:{write:!0}})],bn.prototype,"name",void 0),u([y({json:{write:!0}})],bn.prototype,"description",void 0),u([y({json:{read:qx.read,write:qx.write}})],bn.prototype,"drawingTool",void 0),u([y({json:{write:!0}})],bn.prototype,"prototype",void 0),u([y({json:{write:!0}})],bn.prototype,"thumbnail",void 0),bn=u([j("esri.layers.support.FeatureTemplate")],bn);let gn=class extends nt.ClonableMixin(se){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=Hf(t[i]);return r}writeDomains(t,r){var s;const i={};for(const o of Object.keys(t))t[o]&&(i[o]=(s=t[o])==null?void 0:s.toJSON());r.domains=i}};u([y({json:{write:!0}})],gn.prototype,"id",void 0),u([y({json:{write:!0}})],gn.prototype,"name",void 0),u([y({json:{write:!0}})],gn.prototype,"domains",void 0),u([ce("domains")],gn.prototype,"readDomains",null),u([me("domains")],gn.prototype,"writeDomains",null),u([y({type:[bn],json:{write:!0}})],gn.prototype,"templates",void 0),gn=u([j("esri.layers.support.FeatureType")],gn);function _J(){return{fields:{type:[Nr],value:null,set:function(e){if(e&&J("big-integer-warning-enabled")){const t=e.filter((r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8));if(t.length){const r=t.map((i=>`'${i.name}'`)).join(", ");xe.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return cf.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const r of e)((t=this.fieldsIndex)==null?void 0:t.has(r))||xe.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${r} found in outFields`,{layer:this,outFields:e});return xb(this.fieldsIndex,e)}}}}const i2=()=>xe.getLogger("esri.layers.support.labelingInfo"),EJ=/\[([^[\]]+)\]/gi;function Qx(e,t,r){return e?e.map((i=>{var o;const s=new Lt;if(s.read(i,r),s.labelExpression){const c=t.fields||((o=t.layerDefinition)==null?void 0:o.fields)||this.fields;s.labelExpression=s.labelExpression.replaceAll(EJ,((f,w)=>`[${xJ(w,c)}]`))}return s})):null}function xJ(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const s=t[i].name;if(s.toLowerCase()===r)return s}return e}const Wx=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],$J={esriGeometryPoint:Wx,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:Wx,esriGeometryEnvelope:null};function eie(e,t){const r=[];for(const i of e){const s=i.labelPlacement,o=$J[t];if(!i.symbol)return i2().warn("No ILabelClass symbol specified."),[];if(!o)return i2().error(new re("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(o.includes(s))r.push(i);else{const c=o[0];s&&i2().warn(`Found invalid label placement type ${s} for ${t}. Defaulting to ${c}`);const f=i.clone();f.labelPlacement=c,r.push(f)}}return r}const TJ="relationships/",IJ="expression/";let di=class extends Bt{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||vG((()=>Sl())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??Pe(()=>import("./featureUtils-ipHDGs3-.js"),__vite__mapDeps([153,39]),import.meta.url).then((e=>this._featureUtils=e))}get calculatedExpressions(){var t;const e=new st;if(!this.expressionsUsedInTitle.length)return e;if(!((t=this._arcadeTask)!=null&&t.value)){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const i=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(i.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:i,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(i,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){var t,r,i;let e=((t=this.effectivePopupTemplate)==null?void 0:t.title)??"";return typeof e!="string"?[]:(e=e.toLowerCase(),((i=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:i.filter((s=>e.includes(`{expression/${s.name.toLowerCase()}}`))))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>e.invalid===!0))}get requiredFields(){var r,i;const e=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const s of((i=this.calculatedExpressions)==null?void 0:i.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const c of o){const f=c.split("."),w=this.fieldsIndex.get(f.at(-1)??"");w&&e.add(w.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const s of t){const o=this.fieldsIndex.get(s);o&&e.add(o.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){var t,r;let e="";return this.displayField&&(e=((t=this.fieldsIndex.get(this.displayField))==null?void 0:t.name)??""),e||(e=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,t,r){const i=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],r)).get(i)??""}async getTitles(e,t,r){var o;const i=new Map,s=(r==null?void 0:r.timeZone)??"system";try{const[{substituteFieldsInLinksAndAttributes:c}]=await Promise.all([this.featureUtilsPromise,(o=this._arcadeTask)==null?void 0:o.promise]);r!=null&&r.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));const{fieldInfoMap:f,workingTitle:w}=this,v=w&&f;t.forEach((_=>{const $=_.getObjectId()??_.attributes[e.objectIdField],I=v?c({attributes:_.attributes,expressionAttributes:null,fieldInfoMap:f,globalAttributes:this._createFormattedAttributes(e,_,s).global,layer:e,text:w}):"";i.set($,I)}))}catch{}return i}async _checkAndReQueryGraphics(e,t){const r=t.map((i=>i.getObjectId()??i.attributes[e.objectIdField])).filter(gf);if(r.length!==t.length)return t;if(t.some((i=>!UF(i,this.requiredFields)))){const i=e.createQuery();i.where="1=1",i.outFields=[...this.requiredFields],i.objectIds=r;const s=await e.queryFeatures(i);if((s==null?void 0:s.features.length)===t.length)return s.features}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const r of e){if(!r.fieldName)continue;const i=this.fieldsIndex.get(r.fieldName),s=(i==null?void 0:i.name)??r.fieldName;r.fieldName=s,t.set(s.toLowerCase(),r)}return t}_createFormattedAttributes(e,t,r="system"){var c,f;const i=((c=this.effectivePopupTemplate)==null?void 0:c.fieldInfos)??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((f=this._arcadeTask)!=null&&f.value)){const w=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const v of this.calculatedExpressions)try{s[`expression/${v.name}`]=v.func({vars:{$feature:w}})}catch{}}const o={...t.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:o,graphic:t,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return $b(e).filter((t=>!(t.indexOf(TJ)===0||t.indexOf(IJ)===0)))}};u([y({readOnly:!0})],di.prototype,"_arcadeTask",null),u([y()],di.prototype,"_featureUtils",void 0),u([y({readOnly:!0})],di.prototype,"featureUtilsPromise",null),u([y({readOnly:!0})],di.prototype,"calculatedExpressions",null),u([y()],di.prototype,"displayField",void 0),u([y()],di.prototype,"effectivePopupTemplate",void 0),u([y()],di.prototype,"expressionsUsedInTitle",null),u([y()],di.prototype,"fieldsIndex",void 0),u([y()],di.prototype,"fieldInfoMap",null),u([y()],di.prototype,"fields",void 0),u([y()],di.prototype,"objectIdField",void 0),u([y()],di.prototype,"requiredFields",null),di=u([j("esri.layers.support.TitleCreator")],di);const EA=[];function MJ(e,t){if(Wh(e.url??""))return!0;const{wkid:r}=t;for(const i of EA){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}EA.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),EA.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),EA.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),EA.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),EA.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function CJ(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const s=await lM(i.populateFromStyle());if(Xs(r),s.ok===!1){const o=s.error;t!=null&&t.messages&&t.messages.push(new Mn("renderer:style-reference",`Failed to create unique value renderer from style reference: ${o.message}`,{error:o,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function kJ({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:s},o){if(!r)return null;const c=FJ({editFieldsInfo:t,fields:r,objectIdField:i},o);if(!c.length)return null;const f=jJ({titleBase:s,fields:r,displayField:e}),w=NJ();return new Vu({title:f,content:w,fieldInfos:c})}const OJ=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):bF(e,t);function PJ({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const i=e;return t&&(e=e.filter((s=>!t.includes(s.type)))),e===i&&(e=e.slice()),r!==!0&&e.sort(DJ),e}function DJ(e,t){return e.type==="oid"?-1:t.type==="oid"?1:Hx(e)?-1:Hx(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function FJ(e,t){const r=t==null?void 0:t.visibleFieldNames;return PJ({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||LJ,sortDisabled:t==null?void 0:t.sortDisabled}).map((i=>new kb({fieldName:i.name,isEditable:wF(i,e),label:i.alias,format:RJ(i),visible:OJ(i,{...e,visibleFieldNames:r})})))}function RJ(e){switch(e.type){case"small-integer":case"integer":case"single":return new Fd({digitSeparator:!0,places:0});case"double":return new Fd({digitSeparator:!0,places:2});case"string":return VF(e.name)?new Fd({digitSeparator:!0,places:0}):void 0;default:return}}function NJ(){return[new xu,new Eu]}function jJ(e){const t=pF(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function Hx(e){var r;return(e.name&&e.name.toLowerCase())==="name"?!0:((r=e.alias)==null?void 0:r.toLowerCase())==="name"}const LJ=["geometry","blob","raster","guid","xml"];var RA;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(RA||(RA={}));const Vr="FeatureLayer";function Sd(e,t){return new re("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function Jx(e){return e&&e instanceof st}const s2=_J();function n2(e,t,r){const i=!!(r!=null&&r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let Ee=class extends sW(rJ(eG(dJ(QV(LV(ZI(lJ(vJ(SJ(CC(gJ(JU(sJ(cJ(cI($V(HU(nt.ClonableMixin(Zt))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=ke.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=W$((async(t,r,i)=>{const{save:s,saveAs:o}=await Pe(()=>import("./featureLayerUtils-Bc6AG-8W.js"),__vite__mapDeps([154,155,156,157,152,158,32]),import.meta.url);switch(t){case RA.SAVE:return s(this,r);case RA.SAVE_AS:return o(this,i,r)}}))}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var i;const t=e!=null?e.signal:null;if((i=this.portalItem)!=null&&i.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then((s=>this.initLayerProperties(s)))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(vn).then((async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new re("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))})).then((()=>Yq(this,"load",e)));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return NA(e),new di({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,t){return t=t.layerDefinition||t,OM(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}get effectiveEditingEnabled(){return Kq(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i!=null&&i.writeLayerSchema&&Mr(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return SM(t.layerDefinition||t)}readObjectIdField(e,t){return _M(t.layerDefinition||t)}get parsedUrl(){const e=ws(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=$u(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=$u(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){HS(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){var s;t=t.layerDefinition||t;const i=(s=t.drawingInfo)==null?void 0:s.renderer;if(i){const o=ip(i,t,r)??void 0;return o||xe.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),o}return Tv(t,r)}set source(e){const t=this._get("source");t!==e&&(Jx(t)&&this._resetMemorySource(t),Jx(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof st?new Kn({layer:this,items:e}):e:null}readSource(e,t){const r=Sr.fromJSON(t.featureSet);return new Kn({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,t){const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e=e==null?void 0:e.map((o=>bn.fromJSON(o))),this._fixTemplates(e,i),this._fixTemplates(e,s),e}readTitle(e,t){var s,o,c;const r=((s=t.layerDefinition)==null?void 0:s.name)??t.name,i=t.title||((o=t.layerDefinition)==null?void 0:o.title);if(r){const f=(c=this.portalItem)==null?void 0:c.title;if(this.sublayerTitleMode==="item-title")return this.url?yN(this.url,r):r;let w=r;if(!w&&this.url){const v=Fl(this.url);v!=null&&(w=v.title)}return w?(this.sublayerTitleMode==="item-title-and-service-name"&&f&&f!==w&&(w=f+" - "+w),Yb(w)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){var r;return t.title||((r=t.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find((s=>s.name.toLowerCase()===r));i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e==null?void 0:e.map((o=>(o=gn.fromJSON(o),this._fixTemplates(o.templates,i),this._fixTemplates(o.templates,s),o)))}readVisible(e,t){var r;return((r=t.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const r=await kq(this,e,t,Vr);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const i=await Oq(this,e,t,r,Vr);return this.lastEditsEventDate=new Date,i}async applyEdits(e,t){return Pq(this,e,t)}async uploadAssets(e,t){return Dq(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return kJ(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await bO(Pe(()=>import("./FeatureLayerSource-D8xMEM1D.js"),__vite__mapDeps([159,78,86,68,160,161,82,115,81,116,149,51,52,5,53,63,56,162,163,93,91,92,9,8,10,7]),import.meta.url),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=Gq(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=q9(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){const r=await Fq(this,e,t,Vr);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return Rq(this,e,Vr)}async getFeatureTitle(e,t){return this._titleCreator.getTitle(this,e,t)}async getFeatureTitles(e,t){return this._titleCreator.getTitles(this,e,t)}getFeatureType(e){return xM(this.types,this.typeIdField,e)}getFieldDomain(e,t){var r;return Qq(this,e,t,((r=this.getField(e))==null?void 0:r.domain)??null)}async queryAttachments(e,t){return Nq(this,e,t,Vr)}async queryFeatures(e,t){const r=await this.load(),i=await r.source.queryFeatures(Te.from(e)??r.createQuery(),t);if(i!=null&&i.features)for(const s of i.features)s.layer=s.sourceLayer=r;return i}async queryObjectIds(e,t){return await jq(this,e,t,Vr)}async queryFeatureCount(e,t){return Lq(this,e,t,Vr)}async queryExtent(e,t){return Bq(this,e,t,Vr)}async queryRelatedFeatures(e,t){return Uq(this,e,t,Vr)}async queryRelatedFeaturesCount(e,t){return zq(this,e,t,Vr)}async queryTopFeatures(e,t){var c;const{source:r,capabilities:i}=await this.load();if(!r.queryTopFeatures||!((c=i==null?void 0:i.query)!=null&&c.supportsTopFeaturesQuery))throw new re(Vr,"Layer source does not support queryTopFeatures capability");const s=await Pe(()=>import("./TopFeaturesQuery-BANhByn1.js"),[],import.meta.url),o=await r.queryTopFeatures(s.default.from(e),t);if(o!=null&&o.features)for(const f of o.features)f.layer=f.sourceLayer=this;return o}async queryAttributeBins(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryAttributeBins)throw new re(Vr,"Layer source does not support queryAttributeBins capability");rQ(e,i,Vr);const s=await Pe(()=>import("./AttributeBinsQuery-0b-nhBhD.js"),__vite__mapDeps([164,54,51,52,5,53,47]),import.meta.url),o=await r.queryAttributeBins(s.default.from(e),t);if(o.features)for(const c of o.features)c.layer=c.sourceLayer=this;return o}async queryTopObjectIds(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopObjectIds||!(i!=null&&i.query.supportsTopFeaturesQuery))throw new re(Vr,"Layer source does not support queryTopObjectIds capability");const s=await Pe(()=>import("./TopFeaturesQuery-BANhByn1.js"),[],import.meta.url);return(await r.queryTopObjectIds(s.default.from(e),t)).filter(W9)}async queryTopFeaturesExtent(e,t){var o;const{source:r,capabilities:i}=await this.load();if(!r.queryTopExtents||!((o=i==null?void 0:i.query)!=null&&o.supportsTopFeaturesQuery))throw new re(Vr,"Layer source does not support queryTopExtents capability");const s=await Pe(()=>import("./TopFeaturesQuery-BANhByn1.js"),[],import.meta.url);return r.queryTopExtents(s.default.from(e),t)}async queryTopFeatureCount(e,t){var o;const{source:r,capabilities:i}=await this.load();if(!r.queryTopCount||!((o=i==null?void 0:i.query)!=null&&o.supportsTopFeaturesQuery))throw new re(Vr,"Layer source does not support queryFeatureCount capability");const s=await Pe(()=>import("./TopFeaturesQuery-BANhByn1.js"),[],import.meta.url);return r.queryTopCount(s.default.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:i,showLegend:s}=r;(i==null?void 0:i.length)===1&&(super.read(i[0],t),s!=null&&super.read({showLegend:s},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:s}=t;if(this.dynamicDataSource)return s==null||s.push(Sd(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&i!=="tables")return s==null||s.push(Sd(this,`a table source can only be written to tables, not ${i}`)),null;if(this._hasMemorySource())return s==null||s.push(Sd(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&i==="tables")return s==null||s.push(Sd(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new re(Vr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||MJ(this,e))}async save(e){return this._debouncedSaveOperations(RA.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(RA.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){var s;let i=(s=e.layerDefinition)==null?void 0:s.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((t=>t.trim())).includes("editing")}_writeEditingEnabled(e,t,r,i){var s,o;if(!e){const c=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Mr("layerDefinition.capabilities",c,t),r&&!(i!=null&&i.writeLayerSchema)&&(t.capabilities=c)}}_fetchFirstValidLayerId(e){return pr(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((t=>{const r=t.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)}))}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),HS(this.renderer,this.fieldsIndex),C6(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),CJ(this,{origin:"service"})}async hasDataChanged(){return Vq(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,r;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some((i=>i.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach((r=>{var s;const i=(s=r.prototype)==null?void 0:s.attributes;i&&t&&delete i[t]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new re("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new re("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((t=>{t.layer=this,t.sourceLayer=this})),this.addHandles([e.on("after-add",(t=>{t.item.layer=this,t.item.sourceLayer=this})),e.on("after-remove",(t=>{t.item.layer=null,t.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((t=>{t.layer=null,t.sourceLayer=null})),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};u([y({clonable:!1,readOnly:!0})],Ee.prototype,"_titleCreator",null),u([y(mG)],Ee.prototype,"attributeTableTemplate",void 0),u([ce("service","capabilities")],Ee.prototype,"readCapabilities",null),u([y({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ee.prototype,"charts",void 0),u([y({readOnly:!0})],Ee.prototype,"createQueryVersion",null),u([y({json:{read:{source:"layerDefinition.copyrightText"}}})],Ee.prototype,"copyright",void 0),u([y({json:{read:{source:"layerDefinition.displayField"}}})],Ee.prototype,"displayField",void 0),u([y({types:ea,readOnly:!0})],Ee.prototype,"defaultSymbol",void 0),u([y({type:js})],Ee.prototype,"dynamicDataSource",void 0),u([y({type:Boolean})],Ee.prototype,"editingEnabled",null),u([ce(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ee.prototype,"readEditingEnabled",null),u([ce("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ee.prototype,"readEditingEnabledFromWebMap",null),u([me(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ee.prototype,"writeEditingEnabled",null),u([me("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ee.prototype,"writeEditingEnabledToWebMap",null),u([y({readOnly:!0})],Ee.prototype,"effectiveEditingEnabled",null),u([y({clonable:!1,readOnly:!0})],Ee.prototype,"featureTitleFields",null),u([y({...s2.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:n2}}}}})],Ee.prototype,"fields",void 0),u([y(s2.fieldsIndex)],Ee.prototype,"fieldsIndex",void 0),u([y({type:KB,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ee.prototype,"formTemplate",void 0),u([y({json:{read:{source:"layerDefinition.extent"}}})],Ee.prototype,"fullExtent",void 0),u([y({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:n2,writer(e,t,r){const i=e?_w.toJSON(e):null;i&&Mr(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:_w.read}}})],Ee.prototype,"geometryType",void 0),u([y({json:{read:{source:"layerDefinition.hasM"}}})],Ee.prototype,"hasM",void 0),u([y({json:{read:{source:"layerDefinition.hasZ"}}})],Ee.prototype,"hasZ",void 0),u([y(hG)],Ee.prototype,"id",void 0),u([y({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ee.prototype,"infoFor3D",void 0),u([y({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ee.prototype,"isTable",void 0),u([ce("service","isTable",["type","geometryType"]),ce("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ee.prototype,"readIsTable",null),u([me("web-map","isTable")],Ee.prototype,"writeIsTable",null),u([y(Xf)],Ee.prototype,"labelsVisible",void 0),u([y({type:[Lt],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Qx,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:Qx,write:{layerContainerTypes:Ft}}})],Ee.prototype,"labelingInfo",void 0),u([y((()=>{const e=q(dG);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){Mr(i,ov(t),r)}}},e})())],Ee.prototype,"opacity",void 0),u([y(cG)],Ee.prototype,"legendEnabled",void 0),u([y({type:["show","hide"],json:(()=>{const e=q(aM.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Ee.prototype,"listMode",void 0),u([ce("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ee.prototype,"readGlobalIdField",null),u([y({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:n2}}}}})],Ee.prototype,"objectIdField",void 0),u([ce("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ee.prototype,"readObjectIdField",null),u([y({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Ft}}})],Ee.prototype,"operationalLayerType",void 0),u([y(s2.outFields)],Ee.prototype,"outFields",void 0),u([y({readOnly:!0})],Ee.prototype,"parsedUrl",null),u([y({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ee.prototype,"path",void 0),u([y(Kf)],Ee.prototype,"popupEnabled",void 0),u([y({type:Vu,json:{name:"popupInfo",write:!0}})],Ee.prototype,"popupTemplate",void 0),u([y({readOnly:!0})],Ee.prototype,"defaultPopupTemplate",null),u([y({types:_p,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:jH,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Ft,overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema,layerContainerTypes:Ft})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema,layerContainerTypes:Ft})}}})],Ee.prototype,"renderer",null),u([ce("service","renderer",["drawingInfo.renderer","defaultSymbol"]),ce("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ee.prototype,"readRenderer",null),u([y()],Ee.prototype,"resourceInfo",void 0),u([y((()=>{const e=q(AG);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Ee.prototype,"screenSizePerspectiveEnabled",void 0),u([y({clonable:!1})],Ee.prototype,"source",null),u([Yt("source")],Ee.prototype,"castSource",null),u([ce("portal-item","source",["featureSet"]),ce("web-map","source",["featureSet"])],Ee.prototype,"readSource",null),u([y({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ee.prototype,"spatialReference",void 0),u([y({type:Number})],Ee.prototype,"subtypeCode",void 0),u([y({type:[bn]})],Ee.prototype,"templates",void 0),u([ce("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ee.prototype,"readTemplates",null),u([y({type:Fr})],Ee.prototype,"timeInfo",void 0),u([y()],Ee.prototype,"title",void 0),u([ce("service","title",["name"]),ce("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ee.prototype,"readTitle",null),u([ce("web-map","title",["layerDefinition.name","title"])],Ee.prototype,"readTitleFromWebMap",null),u([y({type:String})],Ee.prototype,"sublayerTitleMode",void 0),u([y({json:{read:!1}})],Ee.prototype,"type",void 0),u([y({type:String})],Ee.prototype,"typeIdField",void 0),u([ce("service","typeIdField"),ce("typeIdField",["layerDefinition.typeIdField"])],Ee.prototype,"readTypeIdField",null),u([y({type:[gn]})],Ee.prototype,"types",void 0),u([ce("service","types",["types"]),ce("types",["layerDefinition.types"])],Ee.prototype,"readTypes",null),u([y({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:Ft}}}}})],Ee.prototype,"visible",void 0),u([ce("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ee.prototype,"readVisible",null),Ee=u([j("esri.layers.FeatureLayer")],Ee);const tie=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ee}},Symbol.toStringTag,{value:"Module"}));let _h=class extends st{constructor(e){super(e),this.addHandles([this.on("before-add",(t=>{t.item==null&&t.preventDefault()})),this.on("after-add",(t=>this._own(t.item))),this.on("after-remove",(t=>this._release(t.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(st.ofType(this.itemType.Type))(e):new st(e)}};function BJ(e,t){return{type:e,cast:k5,set(r){const i=C5(r,this._get(t),e);i.owner=this,this._set(t,i)}}}u([y()],_h.prototype,"owner",null),_h=u([j("esri.core.support.OwningCollection")],_h);let Dc=class extends _h{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};u([fb({Type:ur,ensureType:Br(ur)})],Dc.prototype,"itemType",void 0),Dc=u([j("esri.support.GraphicsCollection")],Dc);let ko=class extends ZI(CC(Zt)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new Dc,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};u([y({type:yn})],ko.prototype,"elevationInfo",void 0),u([y(BJ(Dc,"graphics"))],ko.prototype,"graphics",void 0),u([y({type:["show","hide"]})],ko.prototype,"listMode",void 0),u([y()],ko.prototype,"screenSizePerspectiveEnabled",void 0),u([y({readOnly:!0})],ko.prototype,"type",void 0),u([y({constructOnly:!0})],ko.prototype,"internal",void 0),ko=u([j("esri.layers.GraphicsLayer")],ko);var ba=(function(e){e=e||{};var t=typeof e<"u"?e:{},r={},i;for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);var s="";function o(Z){return t.locateFile?t.locateFile(Z,s):s+Z}var c;typeof document<"u"&&document.currentScript&&(s=document.currentScript.src),s.indexOf("blob:")!==0?s=s.substr(0,s.lastIndexOf("/")+1):s="",c=function(ie,te,ne){var a=new XMLHttpRequest;a.open("GET",ie,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status==200||a.status==0&&a.response){te(a.response);return}var lt=t0(ie);if(lt){te(lt.buffer);return}ne()},a.onerror=ne,a.send(null)};var f=t.print||console.log.bind(console),w=t.printErr||console.warn.bind(console);for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);r=null,t.arguments&&t.arguments;var v=0,_=function(Z){v=Z},$=function(){return v},I=8;function k(Z,ie,te,ne){switch(te=te||"i8",te.charAt(te.length-1)==="*"&&(te="i32"),te){case"i1":at[Z>>0]=ie;break;case"i8":at[Z>>0]=ie;break;case"i16":yt[Z>>1]=ie;break;case"i32":sr[Z>>2]=ie;break;case"i64":e0=[ie>>>0,(yo=ie,+py(yo)>=1?yo>0?(fy(+hy(yo/4294967296),4294967295)|0)>>>0:~~+dy((yo-+(~~yo>>>0))/4294967296)>>>0:0)],sr[Z>>2]=e0[0],sr[Z+4>>2]=e0[1];break;case"float":es[Z>>2]=ie;break;case"double":ts[Z>>3]=ie;break;default:rs("invalid type for setValue: "+te)}}function N(Z,ie,te){switch(ie=ie||"i8",ie.charAt(ie.length-1)==="*"&&(ie="i32"),ie){case"i1":return at[Z>>0];case"i8":return at[Z>>0];case"i16":return yt[Z>>1];case"i32":return sr[Z>>2];case"i64":return sr[Z>>2];case"float":return es[Z>>2];case"double":return ts[Z>>3];default:rs("invalid type for getValue: "+ie)}return null}var B=!1;function L(Z,ie){Z||rs("Assertion failed: "+ie)}function ee(Z){var ie=t["_"+Z];return L(ie,"Cannot call unknown function "+Z+", make sure it is exported"),ie}function ae(Z,ie,te,ne,a){var M={string:function(Ke){var _i=0;if(Ke!=null&&Ke!==0){var Ll=(Ke.length<<2)+1;_i=kp(Ll),We(Ke,_i,Ll)}return _i},array:function(Ke){var _i=kp(Ke.length);return dt(Ke,_i),_i}};function lt(Ke){return ie==="string"?ve(Ke):ie==="boolean"?!!Ke:Ke}var St=ee(Z),Rt=[],Ye=0;if(ne)for(var ht=0;ht<ne.length;ht++){var Re=M[te[ht]];Re?(Ye===0&&(Ye=Iy()),Rt[ht]=Re(ne[ht])):Rt[ht]=ne[ht]}var bt=St.apply(null,Rt);return bt=lt(bt),Ye!==0&&Ty(Ye),bt}function he(Z,ie,te,ne){te=te||[];var a=te.every(function(lt){return lt==="number"}),M=ie!=="string";return M&&a&&!ne?ee(Z):function(){return ae(Z,ie,te,arguments)}}var ye=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ge(Z,ie,te){for(var ne=ie+te,a=ie;Z[a]&&!(a>=ne);)++a;if(a-ie>16&&Z.subarray&&ye)return ye.decode(Z.subarray(ie,a));for(var M="";ie<a;){var lt=Z[ie++];if(!(lt&128)){M+=String.fromCharCode(lt);continue}var St=Z[ie++]&63;if((lt&224)==192){M+=String.fromCharCode((lt&31)<<6|St);continue}var Rt=Z[ie++]&63;if((lt&240)==224?lt=(lt&15)<<12|St<<6|Rt:lt=(lt&7)<<18|St<<12|Rt<<6|Z[ie++]&63,lt<65536)M+=String.fromCharCode(lt);else{var Ye=lt-65536;M+=String.fromCharCode(55296|Ye>>10,56320|Ye&1023)}}return M}function ve(Z,ie){return Z?ge(Ut,Z,ie):""}function ut(Z,ie,te,ne){if(!(ne>0))return 0;for(var a=te,M=te+ne-1,lt=0;lt<Z.length;++lt){var St=Z.charCodeAt(lt);if(St>=55296&&St<=57343){var Rt=Z.charCodeAt(++lt);St=65536+((St&1023)<<10)|Rt&1023}if(St<=127){if(te>=M)break;ie[te++]=St}else if(St<=2047){if(te+1>=M)break;ie[te++]=192|St>>6,ie[te++]=128|St&63}else if(St<=65535){if(te+2>=M)break;ie[te++]=224|St>>12,ie[te++]=128|St>>6&63,ie[te++]=128|St&63}else{if(te+3>=M)break;ie[te++]=240|St>>18,ie[te++]=128|St>>12&63,ie[te++]=128|St>>6&63,ie[te++]=128|St&63}}return ie[te]=0,te-a}function We(Z,ie,te){return ut(Z,Ut,ie,te)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function dt(Z,ie){at.set(Z,ie)}function ot(Z,ie){return Z%ie>0&&(Z+=ie-Z%ie),Z}var wt,at,Ut,yt,sr,es,ts;function Ht(Z){wt=Z,t.HEAP8=at=new Int8Array(Z),t.HEAP16=yt=new Int16Array(Z),t.HEAP32=sr=new Int32Array(Z),t.HEAPU8=Ut=new Uint8Array(Z),t.HEAPU16=new Uint16Array(Z),t.HEAPU32=new Uint32Array(Z),t.HEAPF32=es=new Float32Array(Z),t.HEAPF64=ts=new Float64Array(Z)}var Nl=5271520,Ep=28608,Ku=t.TOTAL_MEMORY||33554432;t.buffer?wt=t.buffer:wt=new ArrayBuffer(Ku),Ku=wt.byteLength,Ht(wt),sr[Ep>>2]=Nl;function jl(Z){for(;Z.length>0;){var ie=Z.shift();if(typeof ie=="function"){ie();continue}var te=ie.func;typeof te=="number"?ie.arg===void 0?t.dynCall_v(te):t.dynCall_vi(te,ie.arg):te(ie.arg===void 0?null:ie.arg)}}var xp=[],sy=[],ny=[],$p=[];function oy(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)uy(t.preRun.shift());jl(xp)}function ay(){jl(sy)}function ly(){jl(ny)}function Ay(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)cy(t.postRun.shift());jl($p)}function uy(Z){xp.unshift(Z)}function cy(Z){$p.unshift(Z)}var py=Math.abs,dy=Math.ceil,hy=Math.floor,fy=Math.min,Dn=0,Ta=null;function Tp(Z){Dn++,t.monitorRunDependencies&&t.monitorRunDependencies(Dn)}function Ip(Z){if(Dn--,t.monitorRunDependencies&&t.monitorRunDependencies(Dn),Dn==0&&Ta){var ie=Ta;Ta=null,ie()}}t.preloadedImages={},t.preloadedAudios={};var Cr=null,Xu="data:application/octet-stream;base64,";function Mp(Z){return String.prototype.startsWith?Z.startsWith(Xu):Z.indexOf(Xu)===0}var yo,e0;Cr="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var yy=28624;function my(Z,ie,te,ne){rs("Assertion failed: "+ve(Z)+", at: "+[ie?ve(ie):"unknown filename",te,ne?ve(ne):"unknown function"])}function Cp(){return at.length}function Gv(Z,ie,te){Ut.set(Ut.subarray(ie,ie+te),Z)}function gy(Z){return t.___errno_location&&(sr[t.___errno_location()>>2]=Z),Z}function wy(Z){rs("OOM")}function by(Z){try{var ie=new ArrayBuffer(Z);return ie.byteLength!=Z?void 0:(new Int8Array(ie).set(at),$y(ie),Ht(ie),1)}catch{}}function vy(Z){var ie=Cp(),te=16777216,ne=2147483648-te;if(Z>ne)return!1;for(var a=16777216,M=Math.max(ie,a);M<Z;)M<=536870912?M=ot(2*M,te):M=Math.min(ot((3*M+2147483648)/4,te),ne);var lt=by(M);return!!lt}var Sy=typeof atob=="function"?atob:function(Z){var ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",te="",ne,a,M,lt,St,Rt,Ye,ht=0;Z=Z.replace(/[^A-Za-z0-9\+\/\=]/g,"");do lt=ie.indexOf(Z.charAt(ht++)),St=ie.indexOf(Z.charAt(ht++)),Rt=ie.indexOf(Z.charAt(ht++)),Ye=ie.indexOf(Z.charAt(ht++)),ne=lt<<2|St>>4,a=(St&15)<<4|Rt>>2,M=(Rt&3)<<6|Ye,te=te+String.fromCharCode(ne),Rt!==64&&(te=te+String.fromCharCode(a)),Ye!==64&&(te=te+String.fromCharCode(M));while(ht<Z.length);return te};function _y(Z){try{for(var ie=Sy(Z),te=new Uint8Array(ie.length),ne=0;ne<ie.length;++ne)te[ne]=ie.charCodeAt(ne);return te}catch{throw new Error("Converting base64 string to bytes failed.")}}function t0(Z){if(Mp(Z))return _y(Z.slice(Xu.length))}var Ey={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},xy={b:_,c:$,d:my,e:gy,f:Cp,g:Gv,h:vy,i:wy,o:yy,p:Ep},Ae=(function(Z,ie,te){"almost asm";var ne=new Z.Int8Array(te),a=new Z.Int32Array(te);new Z.Uint8Array(te),new Z.Float32Array(te);var M=new Z.Float64Array(te),lt=ie.o|0,St=ie.p|0,Rt=Z.Math.floor,Ye=Z.Math.abs,ht=Z.Math.sqrt,Re=Z.Math.pow,bt=Z.Math.cos,Ke=Z.Math.sin,_i=Z.Math.tan,Ll=Z.Math.acos,i0=Z.Math.asin,s0=Z.Math.atan,Jr=Z.Math.atan2,zt=Z.Math.ceil,is=Z.Math.imul,Bl=Z.Math.min,My=Z.Math.max,bs=Z.Math.clz32,ze=ie.b,P=ie.c,je=ie.d,ui=ie.e,Cy=ie.f,ky=ie.g,n0=ie.h,Dp=ie.i,x=28640;function K(n){return ne=new Int8Array(n),a=new Int32Array(n),M=new Float64Array(n),te=n,!0}function pe(n){n=n|0;var l=0;return l=x,x=x+n|0,x=x+15&-16,l|0}function Fe(){return x|0}function _t(n){n=n|0,x=n}function Jt(n,l){n=n|0,x=n}function nr(n,l){n=n|0,l=l|0;var A=0,p=0,h=0;return(n|0)<0?(l=2,l|0):(n|0)>13780509?(l=Lp(15,l)|0,l|0):(A=((n|0)<0)<<31>>31,h=Or(n|0,A|0,3,0)|0,p=P()|0,A=Oe(n|0,A|0,1,0)|0,A=Or(h|0,p|0,A|0,P()|0)|0,A=Oe(A|0,P()|0,1,0)|0,n=P()|0,a[l>>2]=A,a[l+4>>2]=n,l=0,l|0)}function wr(n,l,A,p){return n=n|0,l=l|0,A=A|0,p=p|0,qv(n,l,A,p,0)|0}function qv(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0;if(S=x,x=x+16|0,g=S,!(Qv(n,l,A,p,h)|0))return p=0,x=S,p|0;do if((A|0)>=0){if((A|0)>13780509){if(m=Lp(15,g)|0,m|0)break;b=g,g=a[b>>2]|0,b=a[b+4>>2]|0}else m=((A|0)<0)<<31>>31,E=Or(A|0,m|0,3,0)|0,b=P()|0,m=Oe(A|0,m|0,1,0)|0,m=Or(E|0,b|0,m|0,P()|0)|0,m=Oe(m|0,P()|0,1,0)|0,b=P()|0,a[g>>2]=m,a[g+4>>2]=b,g=m;if(vo(p|0,0,g<<3|0)|0,h|0){vo(h|0,0,g<<2|0)|0,m=sn(n,l,A,p,h,g,b,0)|0;break}m=xi(g,4)|0,m?(E=sn(n,l,A,p,m,g,b,0)|0,De(m),m=E):m=13}else m=2;while(!1);return E=m,x=S,E|0}function Qv(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0;if(U=x,x=x+16|0,F=U,R=U+8|0,D=F,a[D>>2]=n,a[D+4>>2]=l,(A|0)<0)return R=2,x=U,R|0;if(m=p,a[m>>2]=n,a[m+4>>2]=l,m=(h|0)!=0,m&&(a[h>>2]=0),Dt(n,l)|0)return R=9,x=U,R|0;a[R>>2]=0;e:do if((A|0)>=1)if(m)for(T=1,E=0,O=0,D=1,m=n;;){if(!(E|O)){if(m=kr(m,l,4,R,F)|0,m|0)break e;if(l=F,m=a[l>>2]|0,l=a[l+4>>2]|0,Dt(m,l)|0){m=9;break e}}if(m=kr(m,l,a[26800+(O<<2)>>2]|0,R,F)|0,m|0)break e;if(l=F,m=a[l>>2]|0,l=a[l+4>>2]|0,n=p+(T<<3)|0,a[n>>2]=m,a[n+4>>2]=l,a[h+(T<<2)>>2]=D,n=E+1|0,g=(n|0)==(D|0),b=O+1|0,S=(b|0)==6,Dt(m,l)|0){m=9;break e}if(D=D+(S&g&1)|0,(D|0)>(A|0)){m=0;break}else T=T+1|0,E=g?0:n,O=g?S?0:b:O}else for(T=1,E=0,O=0,D=1,m=n;;){if(!(E|O)){if(m=kr(m,l,4,R,F)|0,m|0)break e;if(l=F,m=a[l>>2]|0,l=a[l+4>>2]|0,Dt(m,l)|0){m=9;break e}}if(m=kr(m,l,a[26800+(O<<2)>>2]|0,R,F)|0,m|0)break e;if(l=F,m=a[l>>2]|0,l=a[l+4>>2]|0,n=p+(T<<3)|0,a[n>>2]=m,a[n+4>>2]=l,n=E+1|0,g=(n|0)==(D|0),b=O+1|0,S=(b|0)==6,Dt(m,l)|0){m=9;break e}if(D=D+(S&g&1)|0,(D|0)>(A|0)){m=0;break}else T=T+1|0,E=g?0:n,O=g?S?0:b:O}else m=0;while(!1);return R=m,x=U,R|0}function sn(n,l,A,p,h,m,g,b){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0,m=m|0,g=g|0,b=b|0;var S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0;if(U=x,x=x+16|0,F=U+8|0,R=U,S=Ql(n|0,l|0,m|0,g|0)|0,T=P()|0,O=p+(S<<3)|0,G=O,Y=a[G>>2]|0,G=a[G+4>>2]|0,E=(Y|0)==(n|0)&(G|0)==(l|0),!((Y|0)==0&(G|0)==0|E))do S=Oe(S|0,T|0,1,0)|0,S=ql(S|0,P()|0,m|0,g|0)|0,T=P()|0,O=p+(S<<3)|0,Y=O,G=a[Y>>2]|0,Y=a[Y+4>>2]|0,E=(G|0)==(n|0)&(Y|0)==(l|0);while(!((G|0)==0&(Y|0)==0|E));if(S=h+(S<<2)|0,E&&(a[S>>2]|0)<=(b|0)||(Y=O,a[Y>>2]=n,a[Y+4>>2]=l,a[S>>2]=b,(b|0)>=(A|0)))return Y=0,x=U,Y|0;switch(E=b+1|0,a[F>>2]=0,S=kr(n,l,2,F,R)|0,S|0){case 9:{D=9;break}case 0:{S=R,S=sn(a[S>>2]|0,a[S+4>>2]|0,A,p,h,m,g,E)|0,S||(D=9);break}}e:do if((D|0)==9){switch(a[F>>2]=0,S=kr(n,l,3,F,R)|0,S|0){case 9:break;case 0:{if(S=R,S=sn(a[S>>2]|0,a[S+4>>2]|0,A,p,h,m,g,E)|0,S|0)break e;break}default:break e}switch(a[F>>2]=0,S=kr(n,l,1,F,R)|0,S|0){case 9:break;case 0:{if(S=R,S=sn(a[S>>2]|0,a[S+4>>2]|0,A,p,h,m,g,E)|0,S|0)break e;break}default:break e}switch(a[F>>2]=0,S=kr(n,l,5,F,R)|0,S|0){case 9:break;case 0:{if(S=R,S=sn(a[S>>2]|0,a[S+4>>2]|0,A,p,h,m,g,E)|0,S|0)break e;break}default:break e}switch(a[F>>2]=0,S=kr(n,l,4,F,R)|0,S|0){case 9:break;case 0:{if(S=R,S=sn(a[S>>2]|0,a[S+4>>2]|0,A,p,h,m,g,E)|0,S|0)break e;break}default:break e}switch(a[F>>2]=0,S=kr(n,l,6,F,R)|0,S|0){case 9:break;case 0:{if(S=R,S=sn(a[S>>2]|0,a[S+4>>2]|0,A,p,h,m,g,E)|0,S|0)break e;break}default:break e}return Y=0,x=U,Y|0}while(!1);return Y=S,x=U,Y|0}function kr(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0;if(A>>>0>6)return h=1,h|0;if(O=(a[p>>2]|0)%6|0,a[p>>2]=O,(O|0)>0){m=0;do A=Ca(A)|0,m=m+1|0;while((m|0)<(a[p>>2]|0))}if(O=oe(n|0,l|0,45)|0,P()|0,T=O&127,T>>>0>121)return h=5,h|0;S=Ei(n,l)|0,m=oe(n|0,l|0,52)|0,P()|0,m=m&15;e:do if(!m)E=8;else{for(;;){if(g=(15-m|0)*3|0,b=oe(n|0,l|0,g|0)|0,P()|0,b=b&7,(b|0)==7){l=5;break}if(R=(ss(m)|0)==0,m=m+-1|0,D=fe(7,0,g|0)|0,l=l&~(P()|0),F=fe(a[(R?432:16)+(b*28|0)+(A<<2)>>2]|0,0,g|0)|0,g=P()|0,A=a[(R?640:224)+(b*28|0)+(A<<2)>>2]|0,n=F|n&~D,l=g|l,!A){A=0;break e}if(!m){E=8;break e}}return l|0}while(!1);(E|0)==8&&(R=a[848+(T*28|0)+(A<<2)>>2]|0,F=fe(R|0,0,45)|0,n=F|n,l=P()|0|l&-1040385,A=a[4272+(T*28|0)+(A<<2)>>2]|0,(R&127|0)==127&&(R=fe(a[848+(T*28|0)+20>>2]|0,0,45)|0,l=P()|0|l&-1040385,A=a[4272+(T*28|0)+20>>2]|0,n=ka(R|n,l)|0,l=P()|0,a[p>>2]=(a[p>>2]|0)+1)),b=oe(n|0,l|0,45)|0,P()|0,b=b&127;e:do if(Vt(b)|0){t:do if((Ei(n,l)|0)==1){if((T|0)!=(b|0))if(Zv(b,a[7696+(T*28|0)>>2]|0)|0){n=Qy(n,l)|0,g=1,l=P()|0;break}else je(27795,26864,533,26872);switch(S|0){case 3:{n=ka(n,l)|0,l=P()|0,a[p>>2]=(a[p>>2]|0)+1,g=0;break t}case 5:{n=Qy(n,l)|0,l=P()|0,a[p>>2]=(a[p>>2]|0)+5,g=0;break t}case 0:return R=9,R|0;default:return R=1,R|0}}else g=0;while(!1);if((A|0)>0){m=0;do n=qy(n,l)|0,l=P()|0,m=m+1|0;while((m|0)!=(A|0))}if((T|0)!=(b|0)){if(!(Py(b)|0)){if((g|0)!=0|(Ei(n,l)|0)!=5)break;a[p>>2]=(a[p>>2]|0)+1;break}switch(O&127){case 8:case 118:break e}(Ei(n,l)|0)!=3&&(a[p>>2]=(a[p>>2]|0)+1)}}else if((A|0)>0){m=0;do n=ka(n,l)|0,l=P()|0,m=m+1|0;while((m|0)!=(A|0))}while(!1);return a[p>>2]=((a[p>>2]|0)+A|0)%6|0,R=h,a[R>>2]=n,a[R+4>>2]=l,R=0,R|0}function LC(n,l,A,p){return n=n|0,l=l|0,A=A|0,p=p|0,Wv(n,l,A,p)|0?(vo(p|0,0,A*48|0)|0,p=BC(n,l,A,p)|0,p|0):(p=0,p|0)}function Wv(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0;if(R=x,x=x+16|0,D=R,F=R+8|0,O=D,a[O>>2]=n,a[O+4>>2]=l,(A|0)<0)return F=2,x=R,F|0;if(!A)return F=p,a[F>>2]=n,a[F+4>>2]=l,F=0,x=R,F|0;a[F>>2]=0;e:do if(Dt(n,l)|0)n=9;else{h=0,O=n;do{if(n=kr(O,l,4,F,D)|0,n|0)break e;if(l=D,O=a[l>>2]|0,l=a[l+4>>2]|0,h=h+1|0,Dt(O,l)|0){n=9;break e}}while((h|0)<(A|0));T=p,a[T>>2]=O,a[T+4>>2]=l,T=A+-1|0,E=0,n=1;do{if(h=26800+(E<<2)|0,(E|0)==5)for(g=a[h>>2]|0,m=0,h=n;;){if(n=D,n=kr(a[n>>2]|0,a[n+4>>2]|0,g,F,D)|0,n|0)break e;if((m|0)!=(T|0))if(S=D,b=a[S>>2]|0,S=a[S+4>>2]|0,n=p+(h<<3)|0,a[n>>2]=b,a[n+4>>2]=S,!(Dt(b,S)|0))n=h+1|0;else{n=9;break e}else n=h;if(m=m+1|0,(m|0)>=(A|0))break;h=n}else for(g=D,S=a[h>>2]|0,b=0,h=n,m=a[g>>2]|0,g=a[g+4>>2]|0;;){if(n=kr(m,g,S,F,D)|0,n|0)break e;if(g=D,m=a[g>>2]|0,g=a[g+4>>2]|0,n=p+(h<<3)|0,a[n>>2]=m,a[n+4>>2]=g,n=h+1|0,Dt(m,g)|0){n=9;break e}if(b=b+1|0,(b|0)>=(A|0))break;h=n}E=E+1|0}while(E>>>0<6);n=D,n=(O|0)==(a[n>>2]|0)&&(l|0)==(a[n+4>>2]|0)?0:9}while(!1);return F=n,x=R,F|0}function BC(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0;if(O=x,x=x+16|0,g=O,!A)return a[p>>2]=n,a[p+4>>2]=l,p=0,x=O,p|0;do if((A|0)>=0){if((A|0)>13780509){if(h=Lp(15,g)|0,h|0)break;m=g,h=a[m>>2]|0,m=a[m+4>>2]|0}else h=((A|0)<0)<<31>>31,T=Or(A|0,h|0,3,0)|0,m=P()|0,h=Oe(A|0,h|0,1,0)|0,h=Or(T|0,m|0,h|0,P()|0)|0,h=Oe(h|0,P()|0,1,0)|0,m=P()|0,T=g,a[T>>2]=h,a[T+4>>2]=m;if(E=xi(h,8)|0,!E)h=13;else{if(T=xi(h,4)|0,!T){De(E),h=13;break}if(h=sn(n,l,A,E,T,h,m,0)|0,h|0){De(E),De(T);break}if(l=a[g>>2]|0,g=a[g+4>>2]|0,(g|0)>0|(g|0)==0&l>>>0>0){h=0,b=0,S=0;do n=E+(b<<3)|0,m=a[n>>2]|0,n=a[n+4>>2]|0,!((m|0)==0&(n|0)==0)&&(a[T+(b<<2)>>2]|0)==(A|0)&&(D=p+(h<<3)|0,a[D>>2]=m,a[D+4>>2]=n,h=h+1|0),b=Oe(b|0,S|0,1,0)|0,S=P()|0;while((S|0)<(g|0)|(S|0)==(g|0)&b>>>0<l>>>0)}De(E),De(T),h=0}}else h=2;while(!1);return D=h,x=O,D|0}function Oy(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0;for(b=x,x=x+16|0,m=b,g=b+8|0,h=(Dt(n,l)|0)==0,h=h?1:2;;){if(a[g>>2]=0,E=(kr(n,l,h,g,m)|0)==0,S=m,E&((a[S>>2]|0)==(A|0)?(a[S+4>>2]|0)==(p|0):0)){n=4;break}if(h=h+1|0,h>>>0>=7){h=7,n=4;break}}return(n|0)==4?(x=b,h|0):0}function UC(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0;if(b=x,x=x+48|0,h=b+16|0,m=b+8|0,g=b,A=c0(A)|0,A|0)return g=A,x=b,g|0;if(E=n,S=a[E+4>>2]|0,A=m,a[A>>2]=a[E>>2],a[A+4>>2]=S,v3(m,h),A=e3(h,l,g)|0,!A){if(l=a[m>>2]|0,m=a[n+8>>2]|0,(m|0)>0){h=a[n+12>>2]|0,A=0;do l=(a[h+(A<<3)>>2]|0)+l|0,A=A+1|0;while((A|0)<(m|0))}A=g,h=a[A>>2]|0,A=a[A+4>>2]|0,m=((l|0)<0)<<31>>31,(A|0)<(m|0)|(A|0)==(m|0)&h>>>0<l>>>0?(A=g,a[A>>2]=l,a[A+4>>2]=m,A=m):l=h,S=Oe(l|0,A|0,12,0)|0,E=P()|0,A=g,a[A>>2]=S,a[A+4>>2]=E,A=p,a[A>>2]=S,a[A+4>>2]=E,A=0}return E=A,x=b,E|0}function Hv(n,l,A,p,h,m,g){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0,m=m|0,g=g|0;var b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0,Ie=0,_e=0,Qe=0,He=0,At=0,Le=0,Me=0,ue=0,rt=0,Ot=0,Xe=0,Pt=0,pi=0,F3=0;if(Ot=x,x=x+64|0,Le=Ot+48|0,Me=Ot+32|0,ue=Ot+24|0,de=Ot+8|0,Ie=Ot,S=a[n>>2]|0,(S|0)<=0)return rt=0,x=Ot,rt|0;for(_e=n+4|0,Qe=Le+8|0,He=Me+8|0,At=de+8|0,b=0,Q=0;;){E=a[_e>>2]|0,H=E+(Q<<4)|0,a[Le>>2]=a[H>>2],a[Le+4>>2]=a[H+4>>2],a[Le+8>>2]=a[H+8>>2],a[Le+12>>2]=a[H+12>>2],(Q|0)==(S+-1|0)?(a[Me>>2]=a[E>>2],a[Me+4>>2]=a[E+4>>2],a[Me+8>>2]=a[E+8>>2],a[Me+12>>2]=a[E+12>>2]):(H=E+(Q+1<<4)|0,a[Me>>2]=a[H>>2],a[Me+4>>2]=a[H+4>>2],a[Me+8>>2]=a[H+8>>2],a[Me+12>>2]=a[H+12>>2]),S=XC(Le,Me,p,ue)|0;e:do if(S)E=0,b=S;else if(S=ue,E=a[S>>2]|0,S=a[S+4>>2]|0,(S|0)>0|(S|0)==0&E>>>0>0){Y=0,H=0;t:for(;;){if(Pt=1/(+(E>>>0)+4294967296*+(S|0)),F3=+M[Le>>3],S=zr(E|0,S|0,Y|0,H|0)|0,pi=+(S>>>0)+4294967296*+(P()|0),Xe=+(Y>>>0)+4294967296*+(H|0),M[de>>3]=Pt*(F3*pi)+Pt*(+M[Me>>3]*Xe),M[At>>3]=Pt*(+M[Qe>>3]*pi)+Pt*(+M[He>>3]*Xe),S=Wy(de,p,Ie)|0,S|0){b=S;break}G=Ie,U=a[G>>2]|0,G=a[G+4>>2]|0,D=Ql(U|0,G|0,l|0,A|0)|0,T=P()|0,S=g+(D<<3)|0,O=S,E=a[O>>2]|0,O=a[O+4>>2]|0;r:do if((E|0)==0&(O|0)==0)z=S,rt=16;else for(F=0,R=0;;){if((F|0)>(A|0)|(F|0)==(A|0)&R>>>0>l>>>0){b=1;break t}if((E|0)==(U|0)&(O|0)==(G|0))break r;if(S=Oe(D|0,T|0,1,0)|0,D=ql(S|0,P()|0,l|0,A|0)|0,T=P()|0,R=Oe(R|0,F|0,1,0)|0,F=P()|0,S=g+(D<<3)|0,O=S,E=a[O>>2]|0,O=a[O+4>>2]|0,(E|0)==0&(O|0)==0){z=S,rt=16;break}}while(!1);if((rt|0)==16&&(rt=0,!((U|0)==0&(G|0)==0))&&(R=z,a[R>>2]=U,a[R+4>>2]=G,R=m+(a[h>>2]<<3)|0,a[R>>2]=U,a[R+4>>2]=G,R=h,R=Oe(a[R>>2]|0,a[R+4>>2]|0,1,0)|0,U=P()|0,G=h,a[G>>2]=R,a[G+4>>2]=U),Y=Oe(Y|0,H|0,1,0)|0,H=P()|0,S=ue,E=a[S>>2]|0,S=a[S+4>>2]|0,!((S|0)>(H|0)|(S|0)==(H|0)&E>>>0>Y>>>0)){E=1;break e}}E=0}else E=1;while(!1);if(Q=Q+1|0,!E){rt=21;break}if(S=a[n>>2]|0,(Q|0)>=(S|0)){b=0,rt=21;break}}return(rt|0)==21?(x=Ot,b|0):0}function zC(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0,Ie=0,_e=0,Qe=0,He=0,At=0,Le=0,Me=0,ue=0,rt=0,Ot=0,Xe=0,Pt=0,pi=0;if(pi=x,x=x+112|0,rt=pi+80|0,S=pi+72|0,Ot=pi,Xe=pi+56|0,h=c0(A)|0,h|0)return Pt=h,x=pi,Pt|0;if(E=n+8|0,Pt=nn((a[E>>2]<<5)+32|0)|0,!Pt)return Pt=13,x=pi,Pt|0;if(em(n,Pt),h=c0(A)|0,!h){if(Me=n,ue=a[Me+4>>2]|0,h=S,a[h>>2]=a[Me>>2],a[h+4>>2]=ue,v3(S,rt),h=e3(rt,l,Ot)|0,h)Me=0,ue=0;else{if(h=a[S>>2]|0,m=a[E>>2]|0,(m|0)>0){g=a[n+12>>2]|0,A=0;do h=(a[g+(A<<3)>>2]|0)+h|0,A=A+1|0;while((A|0)!=(m|0));A=h}else A=h;h=Ot,m=a[h>>2]|0,h=a[h+4>>2]|0,g=((A|0)<0)<<31>>31,(h|0)<(g|0)|(h|0)==(g|0)&m>>>0<A>>>0?(h=Ot,a[h>>2]=A,a[h+4>>2]=g,h=g):A=m,Me=Oe(A|0,h|0,12,0)|0,ue=P()|0,h=Ot,a[h>>2]=Me,a[h+4>>2]=ue,h=0}if(!h){if(A=xi(Me,8)|0,!A)return De(Pt),Pt=13,x=pi,Pt|0;if(b=xi(Me,8)|0,!b)return De(Pt),De(A),Pt=13,x=pi,Pt|0;At=rt,a[At>>2]=0,a[At+4>>2]=0,At=n,Le=a[At+4>>2]|0,h=S,a[h>>2]=a[At>>2],a[h+4>>2]=Le,h=Hv(S,Me,ue,l,rt,A,b)|0;e:do if(h)De(A),De(b),De(Pt);else{t:do if((a[E>>2]|0)>0){for(g=n+12|0,m=0;h=Hv((a[g>>2]|0)+(m<<3)|0,Me,ue,l,rt,A,b)|0,m=m+1|0,!(h|0);)if((m|0)>=(a[E>>2]|0))break t;De(A),De(b),De(Pt);break e}while(!1);(ue|0)>0|(ue|0)==0&Me>>>0>0&&vo(b|0,0,Me<<3|0)|0,Le=rt,At=a[Le+4>>2]|0;t:do if((At|0)>0|(At|0)==0&(a[Le>>2]|0)>>>0>0){_e=A,Qe=b,He=A,At=b,Le=A,h=A,z=A,de=b,Ie=b,A=b;r:for(;;){for(G=0,Y=0,H=0,Q=0,m=0,g=0;;){b=Ot,S=b+56|0;do a[b>>2]=0,b=b+4|0;while((b|0)<(S|0));if(l=_e+(G<<3)|0,E=a[l>>2]|0,l=a[l+4>>2]|0,Qv(E,l,1,Ot,0)|0){b=Ot,S=b+56|0;do a[b>>2]=0,b=b+4|0;while((b|0)<(S|0));b=xi(7,4)|0,b|0&&(sn(E,l,1,Ot,b,7,0,0)|0,De(b))}for(U=0;;){R=Ot+(U<<3)|0,F=a[R>>2]|0,R=a[R+4>>2]|0;i:do if((F|0)==0&(R|0)==0)b=m,S=g;else{if(T=Ql(F|0,R|0,Me|0,ue|0)|0,E=P()|0,b=p+(T<<3)|0,l=b,S=a[l>>2]|0,l=a[l+4>>2]|0,!((S|0)==0&(l|0)==0)){O=0,D=0;do{if((O|0)>(ue|0)|(O|0)==(ue|0)&D>>>0>Me>>>0)break r;if((S|0)==(F|0)&(l|0)==(R|0)){b=m,S=g;break i}b=Oe(T|0,E|0,1,0)|0,T=ql(b|0,P()|0,Me|0,ue|0)|0,E=P()|0,D=Oe(D|0,O|0,1,0)|0,O=P()|0,b=p+(T<<3)|0,l=b,S=a[l>>2]|0,l=a[l+4>>2]|0}while(!((S|0)==0&(l|0)==0))}if((F|0)==0&(R|0)==0){b=m,S=g;break}Oa(F,R,Xe)|0,tm(n,Pt,Xe)|0&&(D=Oe(m|0,g|0,1,0)|0,g=P()|0,O=b,a[O>>2]=F,a[O+4>>2]=R,m=Qe+(m<<3)|0,a[m>>2]=F,a[m+4>>2]=R,m=D),b=m,S=g}while(!1);if(U=U+1|0,U>>>0>=7)break;m=b,g=S}if(G=Oe(G|0,Y|0,1,0)|0,Y=P()|0,H=Oe(H|0,Q|0,1,0)|0,Q=P()|0,g=rt,m=a[g>>2]|0,g=a[g+4>>2]|0,(Q|0)<(g|0)|(Q|0)==(g|0)&H>>>0<m>>>0)m=b,g=S;else break}if((g|0)>0|(g|0)==0&m>>>0>0){m=0,g=0;do Q=_e+(m<<3)|0,a[Q>>2]=0,a[Q+4>>2]=0,m=Oe(m|0,g|0,1,0)|0,g=P()|0,Q=rt,H=a[Q+4>>2]|0;while((g|0)<(H|0)|((g|0)==(H|0)?m>>>0<(a[Q>>2]|0)>>>0:0))}if(Q=rt,a[Q>>2]=b,a[Q+4>>2]=S,(S|0)>0|(S|0)==0&b>>>0>0)U=A,G=Ie,Y=Le,H=de,Q=Qe,A=z,Ie=h,de=He,z=U,h=G,Le=At,At=Y,He=H,Qe=_e,_e=Q;else break t}De(He),De(At),De(Pt),h=1;break e}else h=b;while(!1);De(Pt),De(A),De(h),h=0}while(!1);return Pt=h,x=pi,Pt|0}}return De(Pt),Pt=h,x=pi,Pt|0}function VC(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;if(T=x,x=x+176|0,S=T,(l|0)<1)return $3(A,0,0),E=0,x=T,E|0;for(b=n,b=oe(a[b>>2]|0,a[b+4>>2]|0,52)|0,P()|0,$3(A,(l|0)>6?l:6,b&15),b=0;p=n+(b<<3)|0,p=Vl(a[p>>2]|0,a[p+4>>2]|0,S)|0,!(p|0);){if(p=a[S>>2]|0,(p|0)>0){g=0;do m=S+8+(g<<4)|0,g=g+1|0,p=S+8+(((g|0)%(p|0)|0)<<4)|0,h=m7(A,p,m)|0,h?M3(A,h)|0:y7(A,m,p)|0,p=a[S>>2]|0;while((g|0)<(p|0))}if(b=b+1|0,(b|0)>=(l|0)){p=0,E=13;break}}return(E|0)==13?(x=T,p|0):(T3(A),E=p,x=T,E|0)}function GC(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0;if(m=x,x=x+32|0,p=m,h=m+16|0,n=VC(n,l,h)|0,n|0)return A=n,x=m,A|0;if(a[A>>2]=0,a[A+4>>2]=0,a[A+8>>2]=0,n=I3(h)|0,n|0)do{l=qk(A)|0;do Qk(l,n)|0,g=n+16|0,a[p>>2]=a[g>>2],a[p+4>>2]=a[g+4>>2],a[p+8>>2]=a[g+8>>2],a[p+12>>2]=a[g+12>>2],M3(h,n)|0,n=g7(h,p)|0;while((n|0)!=0);n=I3(h)|0}while((n|0)!=0);return T3(h),n=Wk(A)|0,n?(m3(A),g=n,x=m,g|0):(g=0,x=m,g|0)}function Vt(n){return n=n|0,n>>>0>121?(n=0,n|0):(n=a[7696+(n*28|0)+16>>2]|0,n|0)}function Py(n){return n=n|0,(n|0)==4|(n|0)==117|0}function Jv(n){return n=n|0,a[11120+((a[n>>2]|0)*216|0)+((a[n+4>>2]|0)*72|0)+((a[n+8>>2]|0)*24|0)+(a[n+12>>2]<<3)>>2]|0}function qC(n){return n=n|0,a[11120+((a[n>>2]|0)*216|0)+((a[n+4>>2]|0)*72|0)+((a[n+8>>2]|0)*24|0)+(a[n+12>>2]<<3)+4>>2]|0}function QC(n,l){n=n|0,l=l|0,n=7696+(n*28|0)|0,a[l>>2]=a[n>>2],a[l+4>>2]=a[n+4>>2],a[l+8>>2]=a[n+8>>2],a[l+12>>2]=a[n+12>>2]}function WC(n,l){n=n|0,l=l|0;var A=0,p=0;if(l>>>0>20)return l=-1,l|0;do if((a[11120+(l*216|0)>>2]|0)!=(n|0))if((a[11120+(l*216|0)+8>>2]|0)!=(n|0))if((a[11120+(l*216|0)+16>>2]|0)!=(n|0))if((a[11120+(l*216|0)+24>>2]|0)!=(n|0))if((a[11120+(l*216|0)+32>>2]|0)!=(n|0))if((a[11120+(l*216|0)+40>>2]|0)!=(n|0))if((a[11120+(l*216|0)+48>>2]|0)!=(n|0))if((a[11120+(l*216|0)+56>>2]|0)!=(n|0))if((a[11120+(l*216|0)+64>>2]|0)!=(n|0))if((a[11120+(l*216|0)+72>>2]|0)!=(n|0))if((a[11120+(l*216|0)+80>>2]|0)!=(n|0))if((a[11120+(l*216|0)+88>>2]|0)!=(n|0))if((a[11120+(l*216|0)+96>>2]|0)!=(n|0))if((a[11120+(l*216|0)+104>>2]|0)!=(n|0))if((a[11120+(l*216|0)+112>>2]|0)!=(n|0))if((a[11120+(l*216|0)+120>>2]|0)!=(n|0))if((a[11120+(l*216|0)+128>>2]|0)!=(n|0))if((a[11120+(l*216|0)+136>>2]|0)==(n|0))n=2,A=1,p=2;else{if((a[11120+(l*216|0)+144>>2]|0)==(n|0)){n=0,A=2,p=0;break}if((a[11120+(l*216|0)+152>>2]|0)==(n|0)){n=0,A=2,p=1;break}if((a[11120+(l*216|0)+160>>2]|0)==(n|0)){n=0,A=2,p=2;break}if((a[11120+(l*216|0)+168>>2]|0)==(n|0)){n=1,A=2,p=0;break}if((a[11120+(l*216|0)+176>>2]|0)==(n|0)){n=1,A=2,p=1;break}if((a[11120+(l*216|0)+184>>2]|0)==(n|0)){n=1,A=2,p=2;break}if((a[11120+(l*216|0)+192>>2]|0)==(n|0)){n=2,A=2,p=0;break}if((a[11120+(l*216|0)+200>>2]|0)==(n|0)){n=2,A=2,p=1;break}if((a[11120+(l*216|0)+208>>2]|0)==(n|0)){n=2,A=2,p=2;break}else n=-1;return n|0}else n=2,A=1,p=1;else n=2,A=1,p=0;else n=1,A=1,p=2;else n=1,A=1,p=1;else n=1,A=1,p=0;else n=0,A=1,p=2;else n=0,A=1,p=1;else n=0,A=1,p=0;else n=2,A=0,p=2;else n=2,A=0,p=1;else n=2,A=0,p=0;else n=1,A=0,p=2;else n=1,A=0,p=1;else n=1,A=0,p=0;else n=0,A=0,p=2;else n=0,A=0,p=1;else n=0,A=0,p=0;while(!1);return l=a[11120+(l*216|0)+(A*72|0)+(n*24|0)+(p<<3)+4>>2]|0,l|0}function Zv(n,l){return n=n|0,l=l|0,(a[7696+(n*28|0)+20>>2]|0)==(l|0)?(l=1,l|0):(l=(a[7696+(n*28|0)+24>>2]|0)==(l|0),l|0)}function Dy(n,l){return n=n|0,l=l|0,a[848+(n*28|0)+(l<<2)>>2]|0}function Fy(n,l){return n=n|0,l=l|0,(a[848+(n*28|0)>>2]|0)==(l|0)?(l=0,l|0):(a[848+(n*28|0)+4>>2]|0)==(l|0)?(l=1,l|0):(a[848+(n*28|0)+8>>2]|0)==(l|0)?(l=2,l|0):(a[848+(n*28|0)+12>>2]|0)==(l|0)?(l=3,l|0):(a[848+(n*28|0)+16>>2]|0)==(l|0)?(l=4,l|0):(a[848+(n*28|0)+20>>2]|0)==(l|0)?(l=5,l|0):((a[848+(n*28|0)+24>>2]|0)==(l|0)?6:7)|0}function HC(){return 122}function JC(n){n=n|0;var l=0,A=0,p=0;l=0;do fe(l|0,0,45)|0,p=P()|0|134225919,A=n+(l<<3)|0,a[A>>2]=-1,a[A+4>>2]=p,l=l+1|0;while((l|0)!=122);return 0}function ZC(n){n=n|0;var l=0,A=0,p=0;return p=+M[n+16>>3],A=+M[n+24>>3],l=p-A,+(p<A?l+6.283185307179586:l)}function Yv(n){return n=n|0,+M[n+16>>3]<+M[n+24>>3]|0}function YC(n){return n=n|0,+(+M[n>>3]-+M[n+8>>3])}function Ry(n,l){n=n|0,l=l|0;var A=0,p=0,h=0;return A=+M[l>>3],!(A>=+M[n+8>>3])||!(A<=+M[n>>3])?(l=0,l|0):(p=+M[n+16>>3],A=+M[n+24>>3],h=+M[l+8>>3],l=h>=A,n=h<=p&1,p<A?l&&(n=1):l||(n=0),l=(n|0)!=0,l|0)}function Ny(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;return+M[n>>3]<+M[l+8>>3]||+M[n+8>>3]>+M[l>>3]?(p=0,p|0):(m=+M[n+16>>3],A=n+24|0,T=+M[A>>3],g=m<T,p=l+16|0,E=+M[p>>3],h=l+24|0,S=+M[h>>3],b=E<S,l=T-E<S-m,n=g?b|l?1:2:0,l=b?g?1:l?2:1:0,m=+ji(m,n),m<+ji(+M[h>>3],l)||(T=+ji(+M[A>>3],n),T>+ji(+M[p>>3],l))?(b=0,b|0):(b=1,b|0))}function KC(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0;m=+M[n+16>>3],S=+M[n+24>>3],n=m<S,b=+M[l+16>>3],g=+M[l+24>>3],h=b<g,l=S-b<g-m,a[A>>2]=n?h|l?1:2:0,a[p>>2]=h?n?1:l?2:1:0}function Kv(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;return+M[n>>3]<+M[l>>3]||+M[n+8>>3]>+M[l+8>>3]?(p=0,p|0):(p=n+16|0,S=+M[p>>3],m=+M[n+24>>3],g=S<m,A=l+16|0,T=+M[A>>3],h=l+24|0,E=+M[h>>3],b=T<E,l=m-T<E-S,n=g?b|l?1:2:0,l=b?g?1:l?2:1:0,m=+ji(m,n),m<=+ji(+M[h>>3],l)?(T=+ji(+M[p>>3],n),b=T>=+ji(+M[A>>3],l),b|0):(b=0,b|0))}function Xv(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0;h=x,x=x+176|0,p=h,a[p>>2]=4,b=+M[l>>3],M[p+8>>3]=b,m=+M[l+16>>3],M[p+16>>3]=m,M[p+24>>3]=b,b=+M[l+24>>3],M[p+32>>3]=b,g=+M[l+8>>3],M[p+40>>3]=g,M[p+48>>3]=b,M[p+56>>3]=g,M[p+64>>3]=m,l=p+72|0,A=l+96|0;do a[l>>2]=0,l=l+4|0;while((l|0)<(A|0));Wl(n|0,p|0,168)|0,x=h}function e3(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0;R=x,x=x+288|0,T=R+264|0,O=R+96|0,E=R,b=E,S=b+96|0;do a[b>>2]=0,b=b+4|0;while((b|0)<(S|0));return l=Jy(l,E)|0,l|0?(F=l,x=R,F|0):(S=E,E=a[S>>2]|0,S=a[S+4>>2]|0,Oa(E,S,T)|0,Vl(E,S,O)|0,g=+A0(T,O+8|0),M[T>>3]=+M[n>>3],S=T+8|0,M[S>>3]=+M[n+16>>3],M[O>>3]=+M[n+8>>3],E=O+8|0,M[E>>3]=+M[n+24>>3],h=+A0(T,O),G=+M[S>>3]-+M[E>>3],m=+Ye(+G),U=+M[T>>3]-+M[O>>3],p=+Ye(+U),!(G==0|U==0)&&(G=+P3(+m,+p),G=+zt(+(h*h/+zp(+(G/+zp(+m,+p)),3)/(g*(g*2.59807621135)*.8))),M[lt>>3]=G,D=~~G>>>0,F=+Ye(G)>=1?G>0?~~+Bl(+Rt(G/4294967296),4294967295)>>>0:~~+zt((G-+(~~G>>>0))/4294967296)>>>0:0,(a[lt+4>>2]&2146435072|0)!=2146435072)?(O=(D|0)==0&(F|0)==0,l=A,a[l>>2]=O?1:D,a[l+4>>2]=O?0:F,l=0):l=1,F=l,x=R,F|0)}function XC(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0;E=x,x=x+288|0,g=E+264|0,b=E+96|0,S=E,h=S,m=h+96|0;do a[h>>2]=0,h=h+4|0;while((h|0)<(m|0));return A=Jy(A,S)|0,A|0?(p=A,x=E,p|0):(A=S,h=a[A>>2]|0,A=a[A+4>>2]|0,Oa(h,A,g)|0,Vl(h,A,b)|0,T=+A0(g,b+8|0),T=+zt(+(+A0(n,l)/(T*2))),M[lt>>3]=T,A=~~T>>>0,h=+Ye(T)>=1?T>0?~~+Bl(+Rt(T/4294967296),4294967295)>>>0:~~+zt((T-+(~~T>>>0))/4294967296)>>>0:0,(a[lt+4>>2]&2146435072|0)==2146435072?(p=1,x=E,p|0):(S=(A|0)==0&(h|0)==0,a[p>>2]=S?1:A,a[p+4>>2]=S?0:h,p=0,x=E,p|0))}function ek(n,l){n=n|0,l=+l;var A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;m=n+16|0,g=+M[m>>3],A=n+24|0,h=+M[A>>3],p=g-h,p=g<h?p+6.283185307179586:p,E=+M[n>>3],b=n+8|0,S=+M[b>>3],T=E-S,p=(p*l-p)*.5,l=(T*l-T)*.5,E=E+l,M[n>>3]=E>1.5707963267948966?1.5707963267948966:E,l=S-l,M[b>>3]=l<-1.5707963267948966?-1.5707963267948966:l,l=g+p,l=l>3.141592653589793?l+-6.283185307179586:l,M[m>>3]=l<-3.141592653589793?l+6.283185307179586:l,l=h-p,l=l>3.141592653589793?l+-6.283185307179586:l,M[A>>3]=l<-3.141592653589793?l+6.283185307179586:l}function tk(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0,a[n>>2]=l,a[n+4>>2]=A,a[n+8>>2]=p}function rk(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0;O=l+8|0,a[O>>2]=0,S=+M[n>>3],g=+Ye(+S),E=+M[n+8>>3],b=+Ye(+E)*1.1547005383792515,g=g+b*.5,A=~~g,n=~~b,g=g-+(A|0),b=b-+(n|0);do if(g<.5)if(g<.3333333333333333)if(a[l>>2]=A,b<(g+1)*.5){a[l+4>>2]=n;break}else{n=n+1|0,a[l+4>>2]=n;break}else if(D=1-g,n=(!(b<D)&1)+n|0,a[l+4>>2]=n,D<=b&b<g*2){A=A+1|0,a[l>>2]=A;break}else{a[l>>2]=A;break}else{if(!(g<.6666666666666666))if(A=A+1|0,a[l>>2]=A,b<g*.5){a[l+4>>2]=n;break}else{n=n+1|0,a[l+4>>2]=n;break}if(b<1-g){if(a[l+4>>2]=n,g*2+-1<b){a[l>>2]=A;break}}else n=n+1|0,a[l+4>>2]=n;A=A+1|0,a[l>>2]=A}while(!1);do if(S<0)if(n&1){T=(n+1|0)/2|0,T=zr(A|0,((A|0)<0)<<31>>31|0,T|0,((T|0)<0)<<31>>31|0)|0,A=~~(+(A|0)-((+(T>>>0)+4294967296*+(P()|0))*2+1)),a[l>>2]=A;break}else{T=(n|0)/2|0,T=zr(A|0,((A|0)<0)<<31>>31|0,T|0,((T|0)<0)<<31>>31|0)|0,A=~~(+(A|0)-(+(T>>>0)+4294967296*+(P()|0))*2),a[l>>2]=A;break}while(!1);T=l+4|0,E<0&&(A=A-((n<<1|1|0)/2|0)|0,a[l>>2]=A,n=0-n|0,a[T>>2]=n),p=n-A|0,(A|0)<0?(h=0-A|0,a[T>>2]=p,a[O>>2]=h,a[l>>2]=0,n=p,A=0):h=0,(n|0)<0&&(A=A-n|0,a[l>>2]=A,h=h-n|0,a[O>>2]=h,a[T>>2]=0,n=0),m=A-h|0,p=n-h|0,(h|0)<0&&(a[l>>2]=m,a[T>>2]=p,a[O>>2]=0,n=p,A=m,h=0),p=(n|0)<(A|0)?n:A,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(a[l>>2]=A-p,a[T>>2]=n-p,a[O>>2]=h-p)}function Zr(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0;l=a[n>>2]|0,g=n+4|0,A=a[g>>2]|0,(l|0)<0&&(A=A-l|0,a[g>>2]=A,m=n+8|0,a[m>>2]=(a[m>>2]|0)-l,a[n>>2]=0,l=0),(A|0)<0?(l=l-A|0,a[n>>2]=l,m=n+8|0,h=(a[m>>2]|0)-A|0,a[m>>2]=h,a[g>>2]=0,A=0):(h=n+8|0,m=h,h=a[h>>2]|0),(h|0)<0&&(l=l-h|0,a[n>>2]=l,A=A-h|0,a[g>>2]=A,a[m>>2]=0,h=0),p=(A|0)<(l|0)?A:l,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(a[n>>2]=l-p,a[g>>2]=A-p,a[m>>2]=h-p)}function Ia(n,l){n=n|0,l=l|0;var A=0,p=0;p=a[n+8>>2]|0,A=+((a[n+4>>2]|0)-p|0),M[l>>3]=+((a[n>>2]|0)-p|0)-A*.5,M[l+8>>3]=A*.8660254037844386}function ci(n,l,A){n=n|0,l=l|0,A=A|0,a[A>>2]=(a[l>>2]|0)+(a[n>>2]|0),a[A+4>>2]=(a[l+4>>2]|0)+(a[n+4>>2]|0),a[A+8>>2]=(a[l+8>>2]|0)+(a[n+8>>2]|0)}function jy(n,l,A){n=n|0,l=l|0,A=A|0,a[A>>2]=(a[n>>2]|0)-(a[l>>2]|0),a[A+4>>2]=(a[n+4>>2]|0)-(a[l+4>>2]|0),a[A+8>>2]=(a[n+8>>2]|0)-(a[l+8>>2]|0)}function t3(n,l){n=n|0,l=l|0;var A=0,p=0;A=is(a[n>>2]|0,l)|0,a[n>>2]=A,A=n+4|0,p=is(a[A>>2]|0,l)|0,a[A>>2]=p,n=n+8|0,l=is(a[n>>2]|0,l)|0,a[n>>2]=l}function Fp(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;g=a[n>>2]|0,b=(g|0)<0,p=(a[n+4>>2]|0)-(b?g:0)|0,m=(p|0)<0,h=(m?0-p|0:0)+((a[n+8>>2]|0)-(b?g:0))|0,A=(h|0)<0,n=A?0:h,l=(m?0:p)-(A?h:0)|0,h=(b?0:g)-(m?p:0)-(A?h:0)|0,A=(l|0)<(h|0)?l:h,A=(n|0)<(A|0)?n:A,p=(A|0)>0,n=n-(p?A:0)|0,l=l-(p?A:0)|0;e:do switch(h-(p?A:0)|0){case 0:switch(l|0){case 0:return b=(n|0)==0?0:(n|0)==1?1:7,b|0;case 1:return b=(n|0)==0?2:(n|0)==1?3:7,b|0;default:break e}case 1:switch(l|0){case 0:return b=(n|0)==0?4:(n|0)==1?5:7,b|0;case 1:{if(!n)n=6;else break e;return n|0}default:break e}}while(!1);return b=7,b|0}function ik(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0;if(S=n+8|0,g=a[S>>2]|0,b=(a[n>>2]|0)-g|0,E=n+4|0,g=(a[E>>2]|0)-g|0,b>>>0>715827881|g>>>0>715827881){if(p=(b|0)>0,h=2147483647-b|0,m=-2147483648-b|0,(p?(h|0)<(b|0):(m|0)>(b|0))||(A=b<<1,p?(2147483647-A|0)<(b|0):(-2147483648-A|0)>(b|0))||((g|0)>0?(2147483647-g|0)<(g|0):(-2147483648-g|0)>(g|0))||(l=b*3|0,A=g<<1,(p?(h|0)<(A|0):(m|0)>(A|0))||((b|0)>-1?(l|-2147483648|0)>=(g|0):(l^-2147483648|0)<(g|0))))return E=1,E|0}else A=g<<1,l=b*3|0;return p=wo(+(l-g|0)*.14285714285714285)|0,a[n>>2]=p,h=wo(+(A+b|0)*.14285714285714285)|0,a[E>>2]=h,a[S>>2]=0,A=(h|0)<(p|0),l=A?p:h,A=A?h:p,(A|0)<0&&(((A|0)==-2147483648||((l|0)>0?(2147483647-l|0)<(A|0):(-2147483648-l|0)>(A|0)))&&je(27795,26892,354,26903),((l|0)>-1?(l|-2147483648|0)>=(A|0):(l^-2147483648|0)<(A|0))&&je(27795,26892,354,26903)),l=h-p|0,(p|0)<0?(A=0-p|0,a[E>>2]=l,a[S>>2]=A,a[n>>2]=0,p=0):(l=h,A=0),(l|0)<0&&(p=p-l|0,a[n>>2]=p,A=A-l|0,a[S>>2]=A,a[E>>2]=0,l=0),m=p-A|0,h=l-A|0,(A|0)<0?(a[n>>2]=m,a[E>>2]=h,a[S>>2]=0,l=h,h=m,A=0):h=p,p=(l|0)<(h|0)?l:h,p=(A|0)<(p|0)?A:p,(p|0)<=0?(E=0,E|0):(a[n>>2]=h-p,a[E>>2]=l-p,a[S>>2]=A-p,E=0,E|0)}function sk(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0,S=0;if(g=n+8|0,h=a[g>>2]|0,m=(a[n>>2]|0)-h|0,b=n+4|0,h=(a[b>>2]|0)-h|0,m>>>0>715827881|h>>>0>715827881){if(A=(m|0)>0,(A?(2147483647-m|0)<(m|0):(-2147483648-m|0)>(m|0))||(l=m<<1,p=(h|0)>0,p?(2147483647-h|0)<(h|0):(-2147483648-h|0)>(h|0)))return b=1,b|0;if(S=h<<1,(p?(2147483647-S|0)<(h|0):(-2147483648-S|0)>(h|0))||(A?(2147483647-l|0)<(h|0):(-2147483648-l|0)>(h|0))||(A=h*3|0,(h|0)>-1?(A|-2147483648|0)>=(m|0):(A^-2147483648|0)<(m|0)))return S=1,S|0}else A=h*3|0,l=m<<1;return p=wo(+(l+h|0)*.14285714285714285)|0,a[n>>2]=p,h=wo(+(A-m|0)*.14285714285714285)|0,a[b>>2]=h,a[g>>2]=0,A=(h|0)<(p|0),l=A?p:h,A=A?h:p,(A|0)<0&&(((A|0)==-2147483648||((l|0)>0?(2147483647-l|0)<(A|0):(-2147483648-l|0)>(A|0)))&&je(27795,26892,402,26917),((l|0)>-1?(l|-2147483648|0)>=(A|0):(l^-2147483648|0)<(A|0))&&je(27795,26892,402,26917)),l=h-p|0,(p|0)<0?(A=0-p|0,a[b>>2]=l,a[g>>2]=A,a[n>>2]=0,p=0):(l=h,A=0),(l|0)<0&&(p=p-l|0,a[n>>2]=p,A=A-l|0,a[g>>2]=A,a[b>>2]=0,l=0),m=p-A|0,h=l-A|0,(A|0)<0?(a[n>>2]=m,a[b>>2]=h,a[g>>2]=0,l=h,h=m,A=0):h=p,p=(l|0)<(h|0)?l:h,p=(A|0)<(p|0)?A:p,(p|0)<=0?(S=0,S|0):(a[n>>2]=h-p,a[b>>2]=l-p,a[g>>2]=A-p,S=0,S|0)}function nk(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;g=n+8|0,A=a[g>>2]|0,l=(a[n>>2]|0)-A|0,b=n+4|0,A=(a[b>>2]|0)-A|0,p=wo(+((l*3|0)-A|0)*.14285714285714285)|0,a[n>>2]=p,l=wo(+((A<<1)+l|0)*.14285714285714285)|0,a[b>>2]=l,a[g>>2]=0,A=l-p|0,(p|0)<0?(m=0-p|0,a[b>>2]=A,a[g>>2]=m,a[n>>2]=0,l=A,p=0,A=m):A=0,(l|0)<0&&(p=p-l|0,a[n>>2]=p,A=A-l|0,a[g>>2]=A,a[b>>2]=0,l=0),m=p-A|0,h=l-A|0,(A|0)<0?(a[n>>2]=m,a[b>>2]=h,a[g>>2]=0,l=h,h=m,A=0):h=p,p=(l|0)<(h|0)?l:h,p=(A|0)<(p|0)?A:p,!((p|0)<=0)&&(a[n>>2]=h-p,a[b>>2]=l-p,a[g>>2]=A-p)}function r3(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;g=n+8|0,A=a[g>>2]|0,l=(a[n>>2]|0)-A|0,b=n+4|0,A=(a[b>>2]|0)-A|0,p=wo(+((l<<1)+A|0)*.14285714285714285)|0,a[n>>2]=p,l=wo(+((A*3|0)-l|0)*.14285714285714285)|0,a[b>>2]=l,a[g>>2]=0,A=l-p|0,(p|0)<0?(m=0-p|0,a[b>>2]=A,a[g>>2]=m,a[n>>2]=0,l=A,p=0,A=m):A=0,(l|0)<0&&(p=p-l|0,a[n>>2]=p,A=A-l|0,a[g>>2]=A,a[b>>2]=0,l=0),m=p-A|0,h=l-A|0,(A|0)<0?(a[n>>2]=m,a[b>>2]=h,a[g>>2]=0,l=h,h=m,A=0):h=p,p=(l|0)<(h|0)?l:h,p=(A|0)<(p|0)?A:p,!((p|0)<=0)&&(a[n>>2]=h-p,a[b>>2]=l-p,a[g>>2]=A-p)}function Rp(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;l=a[n>>2]|0,g=n+4|0,A=a[g>>2]|0,b=n+8|0,p=a[b>>2]|0,h=A+(l*3|0)|0,a[n>>2]=h,A=p+(A*3|0)|0,a[g>>2]=A,l=(p*3|0)+l|0,a[b>>2]=l,p=A-h|0,(h|0)<0?(l=l-h|0,a[g>>2]=p,a[b>>2]=l,a[n>>2]=0,A=p,p=0):p=h,(A|0)<0&&(p=p-A|0,a[n>>2]=p,l=l-A|0,a[b>>2]=l,a[g>>2]=0,A=0),m=p-l|0,h=A-l|0,(l|0)<0?(a[n>>2]=m,a[g>>2]=h,a[b>>2]=0,p=m,l=0):h=A,A=(h|0)<(p|0)?h:p,A=(l|0)<(A|0)?l:A,!((A|0)<=0)&&(a[n>>2]=p-A,a[g>>2]=h-A,a[b>>2]=l-A)}function Ma(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;h=a[n>>2]|0,g=n+4|0,l=a[g>>2]|0,b=n+8|0,A=a[b>>2]|0,p=(l*3|0)+h|0,h=A+(h*3|0)|0,a[n>>2]=h,a[g>>2]=p,l=(A*3|0)+l|0,a[b>>2]=l,A=p-h|0,(h|0)<0?(l=l-h|0,a[g>>2]=A,a[b>>2]=l,a[n>>2]=0,h=0):A=p,(A|0)<0&&(h=h-A|0,a[n>>2]=h,l=l-A|0,a[b>>2]=l,a[g>>2]=0,A=0),m=h-l|0,p=A-l|0,(l|0)<0?(a[n>>2]=m,a[g>>2]=p,a[b>>2]=0,h=m,l=0):p=A,A=(p|0)<(h|0)?p:h,A=(l|0)<(A|0)?l:A,!((A|0)<=0)&&(a[n>>2]=h-A,a[g>>2]=p-A,a[b>>2]=l-A)}function i3(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0;(l+-1|0)>>>0>=6||(h=(a[15440+(l*12|0)>>2]|0)+(a[n>>2]|0)|0,a[n>>2]=h,b=n+4|0,p=(a[15440+(l*12|0)+4>>2]|0)+(a[b>>2]|0)|0,a[b>>2]=p,g=n+8|0,l=(a[15440+(l*12|0)+8>>2]|0)+(a[g>>2]|0)|0,a[g>>2]=l,A=p-h|0,(h|0)<0?(l=l-h|0,a[b>>2]=A,a[g>>2]=l,a[n>>2]=0,p=0):(A=p,p=h),(A|0)<0&&(p=p-A|0,a[n>>2]=p,l=l-A|0,a[g>>2]=l,a[b>>2]=0,A=0),m=p-l|0,h=A-l|0,(l|0)<0?(a[n>>2]=m,a[b>>2]=h,a[g>>2]=0,p=m,l=0):h=A,A=(h|0)<(p|0)?h:p,A=(l|0)<(A|0)?l:A,!((A|0)<=0)&&(a[n>>2]=p-A,a[b>>2]=h-A,a[g>>2]=l-A))}function s3(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;h=a[n>>2]|0,g=n+4|0,l=a[g>>2]|0,b=n+8|0,A=a[b>>2]|0,p=l+h|0,h=A+h|0,a[n>>2]=h,a[g>>2]=p,l=A+l|0,a[b>>2]=l,A=p-h|0,(h|0)<0?(l=l-h|0,a[g>>2]=A,a[b>>2]=l,a[n>>2]=0,p=0):(A=p,p=h),(A|0)<0&&(p=p-A|0,a[n>>2]=p,l=l-A|0,a[b>>2]=l,a[g>>2]=0,A=0),m=p-l|0,h=A-l|0,(l|0)<0?(a[n>>2]=m,a[g>>2]=h,a[b>>2]=0,p=m,l=0):h=A,A=(h|0)<(p|0)?h:p,A=(l|0)<(A|0)?l:A,!((A|0)<=0)&&(a[n>>2]=p-A,a[g>>2]=h-A,a[b>>2]=l-A)}function Np(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;l=a[n>>2]|0,g=n+4|0,p=a[g>>2]|0,b=n+8|0,A=a[b>>2]|0,h=p+l|0,a[n>>2]=h,p=A+p|0,a[g>>2]=p,l=A+l|0,a[b>>2]=l,A=p-h|0,(h|0)<0?(l=l-h|0,a[g>>2]=A,a[b>>2]=l,a[n>>2]=0,p=0):(A=p,p=h),(A|0)<0&&(p=p-A|0,a[n>>2]=p,l=l-A|0,a[b>>2]=l,a[g>>2]=0,A=0),m=p-l|0,h=A-l|0,(l|0)<0?(a[n>>2]=m,a[g>>2]=h,a[b>>2]=0,p=m,l=0):h=A,A=(h|0)<(p|0)?h:p,A=(l|0)<(A|0)?l:A,!((A|0)<=0)&&(a[n>>2]=p-A,a[g>>2]=h-A,a[b>>2]=l-A)}function Ca(n){switch(n=n|0,n|0){case 1:{n=5;break}case 5:{n=4;break}case 4:{n=6;break}case 6:{n=2;break}case 2:{n=3;break}case 3:{n=1;break}}return n|0}function mo(n){switch(n=n|0,n|0){case 1:{n=3;break}case 3:{n=2;break}case 2:{n=6;break}case 6:{n=4;break}case 4:{n=5;break}case 5:{n=1;break}}return n|0}function n3(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;l=a[n>>2]|0,g=n+4|0,A=a[g>>2]|0,b=n+8|0,p=a[b>>2]|0,h=A+(l<<1)|0,a[n>>2]=h,A=p+(A<<1)|0,a[g>>2]=A,l=(p<<1)+l|0,a[b>>2]=l,p=A-h|0,(h|0)<0?(l=l-h|0,a[g>>2]=p,a[b>>2]=l,a[n>>2]=0,A=p,p=0):p=h,(A|0)<0&&(p=p-A|0,a[n>>2]=p,l=l-A|0,a[b>>2]=l,a[g>>2]=0,A=0),m=p-l|0,h=A-l|0,(l|0)<0?(a[n>>2]=m,a[g>>2]=h,a[b>>2]=0,p=m,l=0):h=A,A=(h|0)<(p|0)?h:p,A=(l|0)<(A|0)?l:A,!((A|0)<=0)&&(a[n>>2]=p-A,a[g>>2]=h-A,a[b>>2]=l-A)}function o3(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;h=a[n>>2]|0,g=n+4|0,l=a[g>>2]|0,b=n+8|0,A=a[b>>2]|0,p=(l<<1)+h|0,h=A+(h<<1)|0,a[n>>2]=h,a[g>>2]=p,l=(A<<1)+l|0,a[b>>2]=l,A=p-h|0,(h|0)<0?(l=l-h|0,a[g>>2]=A,a[b>>2]=l,a[n>>2]=0,h=0):A=p,(A|0)<0&&(h=h-A|0,a[n>>2]=h,l=l-A|0,a[b>>2]=l,a[g>>2]=0,A=0),m=h-l|0,p=A-l|0,(l|0)<0?(a[n>>2]=m,a[g>>2]=p,a[b>>2]=0,h=m,l=0):p=A,A=(p|0)<(h|0)?p:h,A=(l|0)<(A|0)?l:A,!((A|0)<=0)&&(a[n>>2]=h-A,a[g>>2]=p-A,a[b>>2]=l-A)}function Ly(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0;return g=(a[n>>2]|0)-(a[l>>2]|0)|0,b=(g|0)<0,p=(a[n+4>>2]|0)-(a[l+4>>2]|0)-(b?g:0)|0,m=(p|0)<0,h=(b?0-g|0:0)+(a[n+8>>2]|0)-(a[l+8>>2]|0)+(m?0-p|0:0)|0,n=(h|0)<0,l=n?0:h,A=(m?0:p)-(n?h:0)|0,h=(b?0:g)-(m?p:0)-(n?h:0)|0,n=(A|0)<(h|0)?A:h,n=(l|0)<(n|0)?l:n,p=(n|0)>0,l=l-(p?n:0)|0,A=A-(p?n:0)|0,n=h-(p?n:0)|0,n=(n|0)>-1?n:0-n|0,A=(A|0)>-1?A:0-A|0,l=(l|0)>-1?l:0-l|0,l=(A|0)>(l|0)?A:l,((n|0)>(l|0)?n:l)|0}function ok(n,l){n=n|0,l=l|0;var A=0;A=a[n+8>>2]|0,a[l>>2]=(a[n>>2]|0)-A,a[l+4>>2]=(a[n+4>>2]|0)-A}function ak(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0;return p=a[n>>2]|0,a[l>>2]=p,h=a[n+4>>2]|0,g=l+4|0,a[g>>2]=h,b=l+8|0,a[b>>2]=0,A=(h|0)<(p|0),n=A?p:h,A=A?h:p,(A|0)<0&&((A|0)==-2147483648||((n|0)>0?(2147483647-n|0)<(A|0):(-2147483648-n|0)>(A|0))||((n|0)>-1?(n|-2147483648|0)>=(A|0):(n^-2147483648|0)<(A|0)))?(l=1,l|0):(n=h-p|0,(p|0)<0?(A=0-p|0,a[g>>2]=n,a[b>>2]=A,a[l>>2]=0,p=0):(n=h,A=0),(n|0)<0&&(p=p-n|0,a[l>>2]=p,A=A-n|0,a[b>>2]=A,a[g>>2]=0,n=0),m=p-A|0,h=n-A|0,(A|0)<0?(a[l>>2]=m,a[g>>2]=h,a[b>>2]=0,n=h,h=m,A=0):h=p,p=(n|0)<(h|0)?n:h,p=(A|0)<(p|0)?A:p,(p|0)<=0?(l=0,l|0):(a[l>>2]=h-p,a[g>>2]=n-p,a[b>>2]=A-p,l=0,l|0))}function a3(n){n=n|0;var l=0,A=0,p=0,h=0;l=n+8|0,h=a[l>>2]|0,A=h-(a[n>>2]|0)|0,a[n>>2]=A,p=n+4|0,n=(a[p>>2]|0)-h|0,a[p>>2]=n,a[l>>2]=0-(n+A)}function lk(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;A=a[n>>2]|0,l=0-A|0,a[n>>2]=l,g=n+8|0,a[g>>2]=0,b=n+4|0,p=a[b>>2]|0,h=p+A|0,(A|0)>0?(a[b>>2]=h,a[g>>2]=A,a[n>>2]=0,l=0,p=h):A=0,(p|0)<0?(m=l-p|0,a[n>>2]=m,A=A-p|0,a[g>>2]=A,a[b>>2]=0,h=m-A|0,l=0-A|0,(A|0)<0?(a[n>>2]=h,a[b>>2]=l,a[g>>2]=0,p=l,A=0):(p=0,h=m)):h=l,l=(p|0)<(h|0)?p:h,l=(A|0)<(l|0)?A:l,!((l|0)<=0)&&(a[n>>2]=h-l,a[b>>2]=p-l,a[g>>2]=A-l)}function Ak(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0;if(O=x,x=x+64|0,T=O,b=O+56|0,!(!0&(l&2013265920|0)==134217728&(!0&(p&2013265920|0)==134217728)))return h=5,x=O,h|0;if((n|0)==(A|0)&(l|0)==(p|0))return a[h>>2]=0,h=0,x=O,h|0;if(g=oe(n|0,l|0,52)|0,P()|0,g=g&15,E=oe(A|0,p|0,52)|0,P()|0,(g|0)!=(E&15|0))return h=12,x=O,h|0;if(m=g+-1|0,g>>>0>1){Gy(n,l,m,T)|0,Gy(A,p,m,b)|0,E=T,S=a[E>>2]|0,E=a[E+4>>2]|0;e:do if((S|0)==(a[b>>2]|0)&&(E|0)==(a[b+4>>2]|0)){g=(g^15)*3|0,m=oe(n|0,l|0,g|0)|0,P()|0,m=m&7,g=oe(A|0,p|0,g|0)|0,P()|0,g=g&7;do if((m|0)==0|(g|0)==0)a[h>>2]=1,m=0;else if((m|0)==7)m=5;else{if((m|0)==1|(g|0)==1&&Dt(S,E)|0){m=5;break}if((a[15536+(m<<2)>>2]|0)!=(g|0)&&(a[15568+(m<<2)>>2]|0)!=(g|0))break e;a[h>>2]=1,m=0}while(!1);return h=m,x=O,h|0}while(!1)}m=T,g=m+56|0;do a[m>>2]=0,m=m+4|0;while((m|0)<(g|0));return wr(n,l,1,T)|0,l=T,!((a[l>>2]|0)==(A|0)&&(a[l+4>>2]|0)==(p|0))&&(l=T+8|0,!((a[l>>2]|0)==(A|0)&&(a[l+4>>2]|0)==(p|0)))&&(l=T+16|0,!((a[l>>2]|0)==(A|0)&&(a[l+4>>2]|0)==(p|0)))&&(l=T+24|0,!((a[l>>2]|0)==(A|0)&&(a[l+4>>2]|0)==(p|0)))&&(l=T+32|0,!((a[l>>2]|0)==(A|0)&&(a[l+4>>2]|0)==(p|0)))&&(l=T+40|0,!((a[l>>2]|0)==(A|0)&&(a[l+4>>2]|0)==(p|0)))?(m=T+48|0,m=((a[m>>2]|0)==(A|0)?(a[m+4>>2]|0)==(p|0):0)&1):m=1,a[h>>2]=m,h=0,x=O,h|0}function uk(n,l,A,p,h){return n=n|0,l=l|0,A=A|0,p=p|0,h=h|0,A=Oy(n,l,A,p)|0,(A|0)==7?(h=11,h|0):(p=fe(A|0,0,56)|0,l=l&-2130706433|(P()|0)|268435456,a[h>>2]=n|p,a[h+4>>2]=l,h=0,h|0)}function ck(n,l,A){return n=n|0,l=l|0,A=A|0,!0&(l&2013265920|0)==268435456?(a[A>>2]=n,a[A+4>>2]=l&-2130706433|134217728,A=0,A|0):(A=6,A|0)}function pk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0;return h=x,x=x+16|0,p=h,a[p>>2]=0,!0&(l&2013265920|0)==268435456?(m=oe(n|0,l|0,56)|0,P()|0,p=kr(n,l&-2130706433|134217728,m&7,p,A)|0,x=h,p|0):(p=6,x=h,p|0)}function dk(n,l){n=n|0,l=l|0;var A=0;switch(A=oe(n|0,l|0,56)|0,P()|0,A&7){case 0:case 7:return A=0,A|0}return A=l&-2130706433|134217728,!(!0&(l&2013265920|0)==268435456)||!0&(l&117440512|0)==16777216&(Dt(n,A)|0)!=0?(A=0,A|0):(A=zy(n,A)|0,A|0)}function hk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0;return h=x,x=x+16|0,p=h,!0&(l&2013265920|0)==268435456?(m=l&-2130706433|134217728,g=A,a[g>>2]=n,a[g+4>>2]=m,a[p>>2]=0,l=oe(n|0,l|0,56)|0,P()|0,p=kr(n,m,l&7,p,A+8|0)|0,x=h,p|0):(p=6,x=h,p|0)}function fk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0;return h=(Dt(n,l)|0)==0,l=l&-2130706433,p=A,a[p>>2]=h?n:0,a[p+4>>2]=h?l|285212672:0,p=A+8|0,a[p>>2]=n,a[p+4>>2]=l|301989888,p=A+16|0,a[p>>2]=n,a[p+4>>2]=l|318767104,p=A+24|0,a[p>>2]=n,a[p+4>>2]=l|335544320,p=A+32|0,a[p>>2]=n,a[p+4>>2]=l|352321536,A=A+40|0,a[A>>2]=n,a[A+4>>2]=l|369098752,0}function jp(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0;return g=x,x=x+16|0,h=g,m=l&-2130706433|134217728,!0&(l&2013265920|0)==268435456?(p=oe(n|0,l|0,56)|0,P()|0,p=p7(n,m,p&7)|0,(p|0)==-1?(a[A>>2]=0,m=6,x=g,m|0):(zl(n,m,h)|0&&je(27795,26932,282,26947),l=oe(n|0,l|0,52)|0,P()|0,l=l&15,Dt(n,m)|0?By(h,l,p,2,A):Uy(h,l,p,2,A),m=0,x=g,m|0)):(m=6,x=g,m|0)}function yk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0;p=x,x=x+16|0,h=p,mk(n,l,A,h),rk(h,A+4|0),x=p}function mk(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0;if(b=x,x=x+16|0,S=b,gk(n,A,S),m=+Ll(+(1-+M[S>>3]*.5)),m<1e-16){a[p>>2]=0,a[p+4>>2]=0,a[p+8>>2]=0,a[p+12>>2]=0,x=b;return}if(S=a[A>>2]|0,h=+M[15920+(S*24|0)>>3],h=+l0(h-+l0(+Fk(15600+(S<<4)|0,n))),ss(l)|0?g=+l0(h+-.3334731722518321):g=h,h=+_i(+m)*2.618033988749896,(l|0)>0){n=0;do h=h*2.6457513110645907,n=n+1|0;while((n|0)!=(l|0))}m=+bt(+g)*h,M[p>>3]=m,g=+Ke(+g)*h,M[p+8>>3]=g,x=b}function gk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0;if(m=x,x=x+32|0,h=m,c7(n,h),a[l>>2]=0,M[A>>3]=5,p=+dr(16400,h),p<+M[A>>3]&&(a[l>>2]=0,M[A>>3]=p),p=+dr(16424,h),p<+M[A>>3]&&(a[l>>2]=1,M[A>>3]=p),p=+dr(16448,h),p<+M[A>>3]&&(a[l>>2]=2,M[A>>3]=p),p=+dr(16472,h),p<+M[A>>3]&&(a[l>>2]=3,M[A>>3]=p),p=+dr(16496,h),p<+M[A>>3]&&(a[l>>2]=4,M[A>>3]=p),p=+dr(16520,h),p<+M[A>>3]&&(a[l>>2]=5,M[A>>3]=p),p=+dr(16544,h),p<+M[A>>3]&&(a[l>>2]=6,M[A>>3]=p),p=+dr(16568,h),p<+M[A>>3]&&(a[l>>2]=7,M[A>>3]=p),p=+dr(16592,h),p<+M[A>>3]&&(a[l>>2]=8,M[A>>3]=p),p=+dr(16616,h),p<+M[A>>3]&&(a[l>>2]=9,M[A>>3]=p),p=+dr(16640,h),p<+M[A>>3]&&(a[l>>2]=10,M[A>>3]=p),p=+dr(16664,h),p<+M[A>>3]&&(a[l>>2]=11,M[A>>3]=p),p=+dr(16688,h),p<+M[A>>3]&&(a[l>>2]=12,M[A>>3]=p),p=+dr(16712,h),p<+M[A>>3]&&(a[l>>2]=13,M[A>>3]=p),p=+dr(16736,h),p<+M[A>>3]&&(a[l>>2]=14,M[A>>3]=p),p=+dr(16760,h),p<+M[A>>3]&&(a[l>>2]=15,M[A>>3]=p),p=+dr(16784,h),p<+M[A>>3]&&(a[l>>2]=16,M[A>>3]=p),p=+dr(16808,h),p<+M[A>>3]&&(a[l>>2]=17,M[A>>3]=p),p=+dr(16832,h),p<+M[A>>3]&&(a[l>>2]=18,M[A>>3]=p),p=+dr(16856,h),!(p<+M[A>>3])){x=m;return}a[l>>2]=19,M[A>>3]=p,x=m}function o0(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0;if(m=+u7(n),m<1e-16){l=15600+(l<<4)|0,a[h>>2]=a[l>>2],a[h+4>>2]=a[l+4>>2],a[h+8>>2]=a[l+8>>2],a[h+12>>2]=a[l+12>>2];return}if(g=+Jr(+ +M[n+8>>3],+ +M[n>>3]),(A|0)>0){n=0;do m=m*.37796447300922725,n=n+1|0;while((n|0)!=(A|0))}b=m*.3333333333333333,p?(A=(ss(A)|0)==0,m=+s0(+((A?b:b*.37796447300922725)*.381966011250105))):(m=+s0(+(m*.381966011250105)),ss(A)|0&&(g=+l0(g+.3334731722518321))),Rk(15600+(l<<4)|0,+l0(+M[15920+(l*24|0)>>3]-g),m,h)}function wk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0;p=x,x=x+16|0,h=p,Ia(n+4|0,h),o0(h,a[n>>2]|0,l,0,A),x=p}function By(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0,Ie=0,_e=0,Qe=0,He=0,At=0,Le=0,Me=0,ue=0,rt=0,Ot=0,Xe=0;if(rt=x,x=x+272|0,m=rt+256|0,H=rt+240|0,Le=rt,Me=rt+224|0,ue=rt+208|0,Q=rt+176|0,z=rt+160|0,de=rt+192|0,Ie=rt+144|0,_e=rt+128|0,Qe=rt+112|0,He=rt+96|0,At=rt+80|0,a[m>>2]=l,a[H>>2]=a[n>>2],a[H+4>>2]=a[n+4>>2],a[H+8>>2]=a[n+8>>2],a[H+12>>2]=a[n+12>>2],l3(H,m,Le),a[h>>2]=0,H=p+A+((p|0)==5&1)|0,(H|0)<=(A|0)){x=rt;return}S=a[m>>2]|0,E=Me+4|0,T=Q+4|0,O=A+5|0,D=16880+(S<<2)|0,F=16960+(S<<2)|0,R=_e+8|0,U=Qe+8|0,G=He+8|0,Y=ue+4|0,b=A;e:for(;;){g=Le+(((b|0)%5|0)<<4)|0,a[ue>>2]=a[g>>2],a[ue+4>>2]=a[g+4>>2],a[ue+8>>2]=a[g+8>>2],a[ue+12>>2]=a[g+12>>2];do;while((Ul(ue,S,0,1)|0)==2);if((b|0)>(A|0)&(ss(l)|0)!=0){if(a[Q>>2]=a[ue>>2],a[Q+4>>2]=a[ue+4>>2],a[Q+8>>2]=a[ue+8>>2],a[Q+12>>2]=a[ue+12>>2],Ia(E,z),p=a[Q>>2]|0,m=a[17040+(p*80|0)+(a[Me>>2]<<2)>>2]|0,a[Q>>2]=a[18640+(p*80|0)+(m*20|0)>>2],g=a[18640+(p*80|0)+(m*20|0)+16>>2]|0,(g|0)>0){n=0;do s3(T),n=n+1|0;while((n|0)<(g|0))}switch(g=18640+(p*80|0)+(m*20|0)+4|0,a[de>>2]=a[g>>2],a[de+4>>2]=a[g+4>>2],a[de+8>>2]=a[g+8>>2],t3(de,(a[D>>2]|0)*3|0),ci(T,de,T),Zr(T),Ia(T,Ie),Ot=+(a[F>>2]|0),M[_e>>3]=Ot*3,M[R>>3]=0,Xe=Ot*-1.5,M[Qe>>3]=Xe,M[U>>3]=Ot*2.598076211353316,M[He>>3]=Xe,M[G>>3]=Ot*-2.598076211353316,a[17040+((a[Q>>2]|0)*80|0)+(a[ue>>2]<<2)>>2]|0){case 1:{n=Qe,p=_e;break}case 3:{n=He,p=Qe;break}case 2:{n=_e,p=He;break}default:{n=12;break e}}E3(z,Ie,p,n,At),o0(At,a[Q>>2]|0,S,1,h+8+(a[h>>2]<<4)|0),a[h>>2]=(a[h>>2]|0)+1}if((b|0)<(O|0)&&(Ia(Y,Q),o0(Q,a[ue>>2]|0,S,1,h+8+(a[h>>2]<<4)|0),a[h>>2]=(a[h>>2]|0)+1),a[Me>>2]=a[ue>>2],a[Me+4>>2]=a[ue+4>>2],a[Me+8>>2]=a[ue+8>>2],a[Me+12>>2]=a[ue+12>>2],b=b+1|0,(b|0)>=(H|0)){n=3;break}}if((n|0)==3){x=rt;return}else(n|0)==12&&je(26970,27017,572,27027)}function l3(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0;S=x,x=x+128|0,p=S+64|0,h=S,m=p,g=20240,b=m+60|0;do a[m>>2]=a[g>>2],m=m+4|0,g=g+4|0;while((m|0)<(b|0));m=h,g=20304,b=m+60|0;do a[m>>2]=a[g>>2],m=m+4|0,g=g+4|0;while((m|0)<(b|0));b=(ss(a[l>>2]|0)|0)==0,p=b?p:h,h=n+4|0,n3(h),o3(h),ss(a[l>>2]|0)|0&&(Ma(h),a[l>>2]=(a[l>>2]|0)+1),a[A>>2]=a[n>>2],l=A+4|0,ci(h,p,l),Zr(l),a[A+16>>2]=a[n>>2],l=A+20|0,ci(h,p+12|0,l),Zr(l),a[A+32>>2]=a[n>>2],l=A+36|0,ci(h,p+24|0,l),Zr(l),a[A+48>>2]=a[n>>2],l=A+52|0,ci(h,p+36|0,l),Zr(l),a[A+64>>2]=a[n>>2],A=A+68|0,ci(h,p+48|0,A),Zr(A),x=S}function Ul(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0;if(R=x,x=x+32|0,D=R+12|0,b=R,F=n+4|0,O=a[16960+(l<<2)>>2]|0,T=(p|0)!=0,O=T?O*3|0:O,h=a[F>>2]|0,E=n+8|0,g=a[E>>2]|0,T){if(m=n+12|0,p=a[m>>2]|0,h=g+h+p|0,(h|0)==(O|0))return F=1,x=R,F|0;S=m}else S=n+12|0,p=a[S>>2]|0,h=g+h+p|0;if((h|0)<=(O|0))return F=0,x=R,F|0;do if((p|0)>0){if(p=a[n>>2]|0,(g|0)>0){m=18640+(p*80|0)+60|0,p=n;break}p=18640+(p*80|0)+40|0,A?(tk(D,O,0,0),jy(F,D,b),Np(b),ci(b,D,F),m=p,p=n):(m=p,p=n)}else m=18640+((a[n>>2]|0)*80|0)+20|0,p=n;while(!1);if(a[p>>2]=a[m>>2],h=m+16|0,(a[h>>2]|0)>0){p=0;do s3(F),p=p+1|0;while((p|0)<(a[h>>2]|0))}return n=m+4|0,a[D>>2]=a[n>>2],a[D+4>>2]=a[n+4>>2],a[D+8>>2]=a[n+8>>2],l=a[16880+(l<<2)>>2]|0,t3(D,T?l*3|0:l),ci(F,D,F),Zr(F),T?p=((a[E>>2]|0)+(a[F>>2]|0)+(a[S>>2]|0)|0)==(O|0)?1:2:p=2,F=p,x=R,F|0}function bk(n,l){n=n|0,l=l|0;var A=0;do A=Ul(n,l,0,1)|0;while((A|0)==2);return A|0}function Uy(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0,Ie=0,_e=0,Qe=0,He=0,At=0,Le=0;if(He=x,x=x+240|0,m=He+224|0,de=He+208|0,Ie=He,_e=He+192|0,Qe=He+176|0,G=He+160|0,Y=He+144|0,H=He+128|0,Q=He+112|0,z=He+96|0,a[m>>2]=l,a[de>>2]=a[n>>2],a[de+4>>2]=a[n+4>>2],a[de+8>>2]=a[n+8>>2],a[de+12>>2]=a[n+12>>2],A3(de,m,Ie),a[h>>2]=0,U=p+A+((p|0)==6&1)|0,(U|0)<=(A|0)){x=He;return}S=a[m>>2]|0,E=A+6|0,T=16960+(S<<2)|0,O=Y+8|0,D=H+8|0,F=Q+8|0,R=_e+4|0,g=0,b=A,p=-1;e:for(;;){if(m=(b|0)%6|0,n=Ie+(m<<4)|0,a[_e>>2]=a[n>>2],a[_e+4>>2]=a[n+4>>2],a[_e+8>>2]=a[n+8>>2],a[_e+12>>2]=a[n+12>>2],n=g,g=Ul(_e,S,0,1)|0,(b|0)>(A|0)&(ss(l)|0)!=0&&(n|0)!=1&&(a[_e>>2]|0)!=(p|0)){switch(Ia(Ie+(((m+5|0)%6|0)<<4)+4|0,Qe),Ia(Ie+(m<<4)+4|0,G),At=+(a[T>>2]|0),M[Y>>3]=At*3,M[O>>3]=0,Le=At*-1.5,M[H>>3]=Le,M[D>>3]=At*2.598076211353316,M[Q>>3]=Le,M[F>>3]=At*-2.598076211353316,m=a[de>>2]|0,a[17040+(m*80|0)+(((p|0)==(m|0)?a[_e>>2]|0:p)<<2)>>2]|0){case 1:{n=H,p=Y;break}case 3:{n=Q,p=H;break}case 2:{n=Y,p=Q;break}default:{n=8;break e}}E3(Qe,G,p,n,z),!(x3(Qe,z)|0)&&!(x3(G,z)|0)&&(o0(z,a[de>>2]|0,S,1,h+8+(a[h>>2]<<4)|0),a[h>>2]=(a[h>>2]|0)+1)}if((b|0)<(E|0)&&(Ia(R,Qe),o0(Qe,a[_e>>2]|0,S,1,h+8+(a[h>>2]<<4)|0),a[h>>2]=(a[h>>2]|0)+1),b=b+1|0,(b|0)>=(U|0)){n=3;break}else p=a[_e>>2]|0}if((n|0)==3){x=He;return}else(n|0)==8&&je(27054,27017,737,27099)}function A3(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0;S=x,x=x+160|0,p=S+80|0,h=S,m=p,g=20368,b=m+72|0;do a[m>>2]=a[g>>2],m=m+4|0,g=g+4|0;while((m|0)<(b|0));m=h,g=20448,b=m+72|0;do a[m>>2]=a[g>>2],m=m+4|0,g=g+4|0;while((m|0)<(b|0));b=(ss(a[l>>2]|0)|0)==0,p=b?p:h,h=n+4|0,n3(h),o3(h),ss(a[l>>2]|0)|0&&(Ma(h),a[l>>2]=(a[l>>2]|0)+1),a[A>>2]=a[n>>2],l=A+4|0,ci(h,p,l),Zr(l),a[A+16>>2]=a[n>>2],l=A+20|0,ci(h,p+12|0,l),Zr(l),a[A+32>>2]=a[n>>2],l=A+36|0,ci(h,p+24|0,l),Zr(l),a[A+48>>2]=a[n>>2],l=A+52|0,ci(h,p+36|0,l),Zr(l),a[A+64>>2]=a[n>>2],l=A+68|0,ci(h,p+48|0,l),Zr(l),a[A+80>>2]=a[n>>2],A=A+84|0,ci(h,p+60|0,A),Zr(A),x=S}function vk(n,l){return n=n|0,l=l|0,l=oe(n|0,l|0,52)|0,P()|0,l&15|0}function u3(n,l){return n=n|0,l=l|0,l=oe(n|0,l|0,45)|0,P()|0,l&127|0}function zy(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0;return!(!0&(l&-16777216|0)==134217728)||(p=oe(n|0,l|0,52)|0,P()|0,p=p&15,A=oe(n|0,l|0,45)|0,P()|0,A=A&127,A>>>0>121)?(n=0,n|0):(g=(p^15)*3|0,h=oe(n|0,l|0,g|0)|0,g=fe(h|0,P()|0,g|0)|0,h=P()|0,m=zr(-1227133514,-1171,g|0,h|0)|0,!((g&613566756&m|0)==0&(h&4681&(P()|0)|0)==0)||(g=(p*3|0)+19|0,m=fe(~n|0,~l|0,g|0)|0,g=oe(m|0,P()|0,g|0)|0,!((p|0)==15|(g|0)==0&(P()|0)==0))?(g=0,g|0):!(ne[20528+A>>0]|0)||(l=l&8191,(n|0)==0&(l|0)==0)?(g=1,g|0):(g=O3(n|0,l|0)|0,P()|0,((63-g|0)%3|0|0)!=0|0))}function Vy(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0;if(h=fe(l|0,0,52)|0,m=P()|0,A=fe(A|0,0,45)|0,A=m|(P()|0)|134225919,(l|0)<1){m=-1,p=A,l=n,a[l>>2]=m,n=n+4|0,a[n>>2]=p;return}for(m=1,h=-1;g=(15-m|0)*3|0,b=fe(7,0,g|0)|0,A=A&~(P()|0),g=fe(p|0,0,g|0)|0,h=h&~b|g,A=A|(P()|0),(m|0)!=(l|0);)m=m+1|0;b=n,g=b,a[g>>2]=h,b=b+4|0,a[b>>2]=A}function Gy(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0;if(m=oe(n|0,l|0,52)|0,P()|0,m=m&15,A>>>0>15)return p=4,p|0;if((m|0)<(A|0))return p=12,p|0;if((m|0)==(A|0))return a[p>>2]=n,a[p+4>>2]=l,p=0,p|0;if(h=fe(A|0,0,52)|0,h=h|n,n=P()|0|l&-15728641,(m|0)>(A|0))do l=fe(7,0,(14-A|0)*3|0)|0,A=A+1|0,h=l|h,n=P()|0|n;while((A|0)<(m|0));return a[p>>2]=h,a[p+4>>2]=n,p=0,p|0}function a0(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0;if(m=oe(n|0,l|0,52)|0,P()|0,m=m&15,!((A|0)<16&(m|0)<=(A|0)))return p=4,p|0;h=A-m|0,A=oe(n|0,l|0,45)|0,P()|0;e:do if(!(Vt(A&127)|0))A=go(7,0,h,((h|0)<0)<<31>>31)|0,h=P()|0;else{t:do if(m|0){for(A=1;g=fe(7,0,(15-A|0)*3|0)|0,!!((g&n|0)==0&((P()|0)&l|0)==0);)if(A>>>0<m>>>0)A=A+1|0;else break t;A=go(7,0,h,((h|0)<0)<<31>>31)|0,h=P()|0;break e}while(!1);A=go(7,0,h,((h|0)<0)<<31>>31)|0,A=Or(A|0,P()|0,5,0)|0,A=Oe(A|0,P()|0,-5,-1)|0,A=bo(A|0,P()|0,6,0)|0,A=Oe(A|0,P()|0,1,0)|0,h=P()|0}while(!1);return g=p,a[g>>2]=A,a[g+4>>2]=h,g=0,g|0}function Dt(n,l){n=n|0,l=l|0;var A=0,p=0,h=0;if(h=oe(n|0,l|0,45)|0,P()|0,!(Vt(h&127)|0))return h=0,h|0;h=oe(n|0,l|0,52)|0,P()|0,h=h&15;e:do if(!h)A=0;else for(p=1;;){if(A=oe(n|0,l|0,(15-p|0)*3|0)|0,P()|0,A=A&7,A|0)break e;if(p>>>0<h>>>0)p=p+1|0;else{A=0;break}}while(!1);return h=(A|0)==0&1,h|0}function Sk(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0;if(g=x,x=x+16|0,m=g,Zy(m,n,l,A),l=m,n=a[l>>2]|0,l=a[l+4>>2]|0,(n|0)==0&(l|0)==0)return x=g,0;h=0,A=0;do b=p+(h<<3)|0,a[b>>2]=n,a[b+4>>2]=l,h=Oe(h|0,A|0,1,0)|0,A=P()|0,Yy(m),b=m,n=a[b>>2]|0,l=a[b+4>>2]|0;while(!((n|0)==0&(l|0)==0));return x=g,0}function c3(n,l,A,p){return n=n|0,l=l|0,A=A|0,p=p|0,(p|0)<(A|0)?(A=l,p=n,ze(A|0),p|0):(A=fe(-1,-1,((p-A|0)*3|0)+3|0)|0,p=fe(~A|0,~(P()|0)|0,(15-p|0)*3|0)|0,A=~(P()|0)&l,p=~p&n,ze(A|0),p|0)}function p3(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0;return h=oe(n|0,l|0,52)|0,P()|0,h=h&15,(A|0)<16&(h|0)<=(A|0)?((h|0)<(A|0)&&(h=fe(-1,-1,((A+-1-h|0)*3|0)+3|0)|0,h=fe(~h|0,~(P()|0)|0,(15-A|0)*3|0)|0,l=~(P()|0)&l,n=~h&n),h=fe(A|0,0,52)|0,A=l&-15728641|(P()|0),a[p>>2]=n|h,a[p+4>>2]=A,p=0,p|0):(p=4,p|0)}function _k(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0,Ie=0,_e=0,Qe=0,He=0,At=0,Le=0,Me=0,ue=0;if((A|0)==0&(p|0)==0)return ue=0,ue|0;if(h=n,m=a[h>>2]|0,h=a[h+4>>2]|0,!0&(h&15728640|0)==0){if(!((p|0)>0|(p|0)==0&A>>>0>0)||(ue=l,a[ue>>2]=m,a[ue+4>>2]=h,(A|0)==1&(p|0)==0))return ue=0,ue|0;h=1,m=0;do Le=n+(h<<3)|0,Me=a[Le+4>>2]|0,ue=l+(h<<3)|0,a[ue>>2]=a[Le>>2],a[ue+4>>2]=Me,h=Oe(h|0,m|0,1,0)|0,m=P()|0;while((m|0)<(p|0)|(m|0)==(p|0)&h>>>0<A>>>0);return h=0,h|0}if(At=A<<3,Me=nn(At)|0,!Me)return ue=13,ue|0;if(Wl(Me|0,n|0,At|0)|0,Le=xi(A,8)|0,!Le)return De(Me),ue=13,ue|0;e:for(;;){h=Me,E=a[h>>2]|0,h=a[h+4>>2]|0,Qe=oe(E|0,h|0,52)|0,P()|0,Qe=Qe&15,He=Qe+-1|0,_e=(Qe|0)!=0,Ie=(p|0)>0|(p|0)==0&A>>>0>0;t:do if(_e&Ie){if(H=fe(He|0,0,52)|0,Q=P()|0,He>>>0>15){if(!((E|0)==0&(h|0)==0)){ue=16;break e}for(m=0,n=0;;){if(m=Oe(m|0,n|0,1,0)|0,n=P()|0,!((n|0)<(p|0)|(n|0)==(p|0)&m>>>0<A>>>0))break t;if(g=Me+(m<<3)|0,de=a[g>>2]|0,g=a[g+4>>2]|0,!((de|0)==0&(g|0)==0)){h=g,ue=16;break e}}}for(b=E,n=h,m=0,g=0;;){if(!((b|0)==0&(n|0)==0)){if(!(!0&(n&117440512|0)==0)){ue=21;break e}if(T=oe(b|0,n|0,52)|0,P()|0,T=T&15,(T|0)<(He|0)){h=12,ue=27;break e}if((T|0)!=(He|0)&&(b=b|H,n=n&-15728641|Q,T>>>0>=Qe>>>0)){S=He;do de=fe(7,0,(14-S|0)*3|0)|0,S=S+1|0,b=de|b,n=P()|0|n;while(S>>>0<T>>>0)}if(D=Ql(b|0,n|0,A|0,p|0)|0,F=P()|0,S=Le+(D<<3)|0,T=S,O=a[T>>2]|0,T=a[T+4>>2]|0,!((O|0)==0&(T|0)==0)){G=0,Y=0;do{if((G|0)>(p|0)|(G|0)==(p|0)&Y>>>0>A>>>0){ue=31;break e}if((O|0)==(b|0)&(T&-117440513|0)==(n|0)){R=oe(O|0,T|0,56)|0,P()|0,R=R&7,U=R+1|0,de=oe(O|0,T|0,45)|0,P()|0;r:do if(!(Vt(de&127)|0))T=7;else{if(O=oe(O|0,T|0,52)|0,P()|0,O=O&15,!O){T=6;break}for(T=1;;){if(de=fe(7,0,(15-T|0)*3|0)|0,!((de&b|0)==0&((P()|0)&n|0)==0)){T=7;break r}if(T>>>0<O>>>0)T=T+1|0;else{T=6;break}}}while(!1);if((R+2|0)>>>0>T>>>0){ue=41;break e}de=fe(U|0,0,56)|0,n=P()|0|n&-117440513,z=S,a[z>>2]=0,a[z+4>>2]=0,b=de|b}else D=Oe(D|0,F|0,1,0)|0,D=ql(D|0,P()|0,A|0,p|0)|0,F=P()|0;Y=Oe(Y|0,G|0,1,0)|0,G=P()|0,S=Le+(D<<3)|0,T=S,O=a[T>>2]|0,T=a[T+4>>2]|0}while(!((O|0)==0&(T|0)==0))}de=S,a[de>>2]=b,a[de+4>>2]=n}if(m=Oe(m|0,g|0,1,0)|0,g=P()|0,!((g|0)<(p|0)|(g|0)==(p|0)&m>>>0<A>>>0))break t;n=Me+(m<<3)|0,b=a[n>>2]|0,n=a[n+4>>2]|0}}while(!1);if(de=Oe(A|0,p|0,5,0)|0,z=P()|0,z>>>0<0|(z|0)==0&de>>>0<11){ue=85;break}if(de=bo(A|0,p|0,6,0)|0,P()|0,de=xi(de,8)|0,!de){ue=48;break}do if(Ie){for(U=0,n=0,R=0,G=0;;){if(T=Le+(U<<3)|0,g=T,m=a[g>>2]|0,g=a[g+4>>2]|0,(m|0)==0&(g|0)==0)z=R;else{O=oe(m|0,g|0,56)|0,P()|0,O=O&7,b=O+1|0,D=g&-117440513,z=oe(m|0,g|0,45)|0,P()|0;t:do if(Vt(z&127)|0){if(F=oe(m|0,g|0,52)|0,P()|0,F=F&15,F|0)for(S=1;;){if(z=fe(7,0,(15-S|0)*3|0)|0,!((m&z|0)==0&(D&(P()|0)|0)==0))break t;if(S>>>0<F>>>0)S=S+1|0;else break}g=fe(b|0,0,56)|0,m=g|m,g=P()|0|D,b=T,a[b>>2]=m,a[b+4>>2]=g,b=O+2|0}while(!1);(b|0)==7?(z=de+(n<<3)|0,a[z>>2]=m,a[z+4>>2]=g&-117440513,n=Oe(n|0,R|0,1,0)|0,z=P()|0):z=R}if(U=Oe(U|0,G|0,1,0)|0,G=P()|0,(G|0)<(p|0)|(G|0)==(p|0)&U>>>0<A>>>0)R=z;else break}if(Ie){if(Y=He>>>0>15,H=fe(He|0,0,52)|0,Q=P()|0,!_e){for(m=0,S=0,b=0,g=0;(E|0)==0&(h|0)==0||(He=l+(m<<3)|0,a[He>>2]=E,a[He+4>>2]=h,m=Oe(m|0,S|0,1,0)|0,S=P()|0),b=Oe(b|0,g|0,1,0)|0,g=P()|0,!!((g|0)<(p|0)|(g|0)==(p|0)&b>>>0<A>>>0);)h=Me+(b<<3)|0,E=a[h>>2]|0,h=a[h+4>>2]|0;h=z;break}for(m=0,S=0,g=0,b=0;;){do if(!((E|0)==0&(h|0)==0)){if(F=oe(E|0,h|0,52)|0,P()|0,F=F&15,Y|(F|0)<(He|0)){ue=80;break e}if((F|0)!=(He|0)){if(T=E|H,O=h&-15728641|Q,F>>>0>=Qe>>>0){D=He;do _e=fe(7,0,(14-D|0)*3|0)|0,D=D+1|0,T=_e|T,O=P()|0|O;while(D>>>0<F>>>0)}}else T=E,O=h;R=Ql(T|0,O|0,A|0,p|0)|0,D=0,F=0,G=P()|0;do{if((D|0)>(p|0)|(D|0)==(p|0)&F>>>0>A>>>0){ue=81;break e}if(_e=Le+(R<<3)|0,U=a[_e+4>>2]|0,(U&-117440513|0)==(O|0)&&(a[_e>>2]|0)==(T|0)){ue=65;break}_e=Oe(R|0,G|0,1,0)|0,R=ql(_e|0,P()|0,A|0,p|0)|0,G=P()|0,F=Oe(F|0,D|0,1,0)|0,D=P()|0,_e=Le+(R<<3)|0}while(!((a[_e>>2]|0)==(T|0)&&(a[_e+4>>2]|0)==(O|0)));if((ue|0)==65&&(ue=0,!0&(U&117440512|0)==100663296))break;_e=l+(m<<3)|0,a[_e>>2]=E,a[_e+4>>2]=h,m=Oe(m|0,S|0,1,0)|0,S=P()|0}while(!1);if(g=Oe(g|0,b|0,1,0)|0,b=P()|0,!((b|0)<(p|0)|(b|0)==(p|0)&g>>>0<A>>>0))break;h=Me+(g<<3)|0,E=a[h>>2]|0,h=a[h+4>>2]|0}h=z}else m=0,h=z}else m=0,n=0,h=0;while(!1);if(vo(Le|0,0,At|0)|0,Wl(Me|0,de|0,n<<3|0)|0,De(de),(n|0)==0&(h|0)==0){ue=89;break}else l=l+(m<<3)|0,p=h,A=n}if((ue|0)==16)!0&(h&117440512|0)==0?(h=4,ue=27):ue=21;else if((ue|0)==31)je(27795,27122,529,27132);else{if((ue|0)==41)return De(Me),De(Le),ue=10,ue|0;if((ue|0)==48)return De(Me),De(Le),ue=13,ue|0;(ue|0)==80?je(27795,27122,620,27132):(ue|0)==81?je(27795,27122,632,27132):(ue|0)==85&&(Wl(l|0,Me|0,A<<3|0)|0,ue=89)}return(ue|0)==21?(De(Me),De(Le),ue=5,ue|0):(ue|0)==27?(De(Me),De(Le),ue=h,ue|0):(ue|0)==89?(De(Me),De(Le),ue=0,ue|0):0}function Ek(n,l,A,p,h,m,g){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0,m=m|0,g=g|0;var b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0;if(U=x,x=x+16|0,R=U,!((A|0)>0|(A|0)==0&l>>>0>0))return R=0,x=U,R|0;if((g|0)>=16)return R=12,x=U,R|0;D=0,F=0,O=0,b=0;e:for(;;){if(E=n+(D<<3)|0,S=a[E>>2]|0,E=a[E+4>>2]|0,T=oe(S|0,E|0,52)|0,P()|0,(T&15|0)>(g|0)){b=12,S=11;break}if(Zy(R,S,E,g),T=R,E=a[T>>2]|0,T=a[T+4>>2]|0,(E|0)==0&(T|0)==0)S=O;else{S=O;do{if(!((b|0)<(m|0)|(b|0)==(m|0)&S>>>0<h>>>0)){S=10;break e}O=p+(S<<3)|0,a[O>>2]=E,a[O+4>>2]=T,S=Oe(S|0,b|0,1,0)|0,b=P()|0,Yy(R),O=R,E=a[O>>2]|0,T=a[O+4>>2]|0}while(!((E|0)==0&(T|0)==0))}if(D=Oe(D|0,F|0,1,0)|0,F=P()|0,(F|0)<(A|0)|(F|0)==(A|0)&D>>>0<l>>>0)O=S;else{b=0,S=11;break}}return(S|0)==10?(R=14,x=U,R|0):(S|0)==11?(x=U,b|0):0}function xk(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0;D=x,x=x+16|0,O=D;e:do if((A|0)>0|(A|0)==0&l>>>0>0){for(E=0,g=0,m=0,T=0;;){if(S=n+(E<<3)|0,b=a[S>>2]|0,S=a[S+4>>2]|0,!((b|0)==0&(S|0)==0)&&(S=(a0(b,S,p,O)|0)==0,b=O,g=Oe(a[b>>2]|0,a[b+4>>2]|0,g|0,m|0)|0,m=P()|0,!S)){m=12;break}if(E=Oe(E|0,T|0,1,0)|0,T=P()|0,!((T|0)<(A|0)|(T|0)==(A|0)&E>>>0<l>>>0))break e}return x=D,m|0}else g=0,m=0;while(!1);return a[h>>2]=g,a[h+4>>2]=m,h=0,x=D,h|0}function $k(n,l){return n=n|0,l=l|0,l=oe(n|0,l|0,52)|0,P()|0,l&1|0}function Ei(n,l){n=n|0,l=l|0;var A=0,p=0,h=0;if(h=oe(n|0,l|0,52)|0,P()|0,h=h&15,!h)return h=0,h|0;for(p=1;;){if(A=oe(n|0,l|0,(15-p|0)*3|0)|0,P()|0,A=A&7,A|0){p=5;break}if(p>>>0<h>>>0)p=p+1|0;else{A=0,p=5;break}}return(p|0)==5?A|0:0}function qy(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0;if(S=oe(n|0,l|0,52)|0,P()|0,S=S&15,!S)return b=l,S=n,ze(b|0),S|0;for(b=1,A=0;;){m=(15-b|0)*3|0,p=fe(7,0,m|0)|0,h=P()|0,g=oe(n|0,l|0,m|0)|0,P()|0,m=fe(Ca(g&7)|0,0,m|0)|0,g=P()|0,n=m|n&~p,l=g|l&~h;e:do if(!A)if((m&p|0)==0&(g&h|0)==0)A=0;else if(p=oe(n|0,l|0,52)|0,P()|0,p=p&15,!p)A=1;else{A=1;t:for(;;){switch(g=oe(n|0,l|0,(15-A|0)*3|0)|0,P()|0,g&7){case 1:break t;case 0:break;default:{A=1;break e}}if(A>>>0<p>>>0)A=A+1|0;else{A=1;break e}}for(A=1;;)if(g=(15-A|0)*3|0,h=oe(n|0,l|0,g|0)|0,P()|0,m=fe(7,0,g|0)|0,l=l&~(P()|0),g=fe(Ca(h&7)|0,0,g|0)|0,n=n&~m|g,l=l|(P()|0),A>>>0<p>>>0)A=A+1|0;else{A=1;break}}while(!1);if(b>>>0<S>>>0)b=b+1|0;else break}return ze(l|0),n|0}function ka(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0;if(p=oe(n|0,l|0,52)|0,P()|0,p=p&15,!p)return A=l,p=n,ze(A|0),p|0;for(A=1;m=(15-A|0)*3|0,g=oe(n|0,l|0,m|0)|0,P()|0,h=fe(7,0,m|0)|0,l=l&~(P()|0),m=fe(Ca(g&7)|0,0,m|0)|0,n=m|n&~h,l=P()|0|l,A>>>0<p>>>0;)A=A+1|0;return ze(l|0),n|0}function Tk(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0;if(S=oe(n|0,l|0,52)|0,P()|0,S=S&15,!S)return b=l,S=n,ze(b|0),S|0;for(b=1,A=0;;){m=(15-b|0)*3|0,p=fe(7,0,m|0)|0,h=P()|0,g=oe(n|0,l|0,m|0)|0,P()|0,m=fe(mo(g&7)|0,0,m|0)|0,g=P()|0,n=m|n&~p,l=g|l&~h;e:do if(!A)if((m&p|0)==0&(g&h|0)==0)A=0;else if(p=oe(n|0,l|0,52)|0,P()|0,p=p&15,!p)A=1;else{A=1;t:for(;;){switch(g=oe(n|0,l|0,(15-A|0)*3|0)|0,P()|0,g&7){case 1:break t;case 0:break;default:{A=1;break e}}if(A>>>0<p>>>0)A=A+1|0;else{A=1;break e}}for(A=1;;)if(h=(15-A|0)*3|0,m=fe(7,0,h|0)|0,g=l&~(P()|0),l=oe(n|0,l|0,h|0)|0,P()|0,l=fe(mo(l&7)|0,0,h|0)|0,n=n&~m|l,l=g|(P()|0),A>>>0<p>>>0)A=A+1|0;else{A=1;break}}while(!1);if(b>>>0<S>>>0)b=b+1|0;else break}return ze(l|0),n|0}function Qy(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0;if(p=oe(n|0,l|0,52)|0,P()|0,p=p&15,!p)return A=l,p=n,ze(A|0),p|0;for(A=1;g=(15-A|0)*3|0,m=fe(7,0,g|0)|0,h=l&~(P()|0),l=oe(n|0,l|0,g|0)|0,P()|0,l=fe(mo(l&7)|0,0,g|0)|0,n=l|n&~m,l=P()|0|h,A>>>0<p>>>0;)A=A+1|0;return ze(l|0),n|0}function Ik(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;if(S=x,x=x+64|0,b=S+40|0,p=S+24|0,h=S+12|0,m=S,fe(l|0,0,52)|0,A=P()|0|134225919,!l)return(a[n+4>>2]|0)>2||(a[n+8>>2]|0)>2||(a[n+12>>2]|0)>2?(g=0,b=0,ze(g|0),x=S,b|0):(fe(Jv(n)|0,0,45)|0,g=P()|0|A,b=-1,ze(g|0),x=S,b|0);if(a[b>>2]=a[n>>2],a[b+4>>2]=a[n+4>>2],a[b+8>>2]=a[n+8>>2],a[b+12>>2]=a[n+12>>2],g=b+4|0,(l|0)>0)for(n=-1;a[p>>2]=a[g>>2],a[p+4>>2]=a[g+4>>2],a[p+8>>2]=a[g+8>>2],l&1?(nk(g),a[h>>2]=a[g>>2],a[h+4>>2]=a[g+4>>2],a[h+8>>2]=a[g+8>>2],Rp(h)):(r3(g),a[h>>2]=a[g>>2],a[h+4>>2]=a[g+4>>2],a[h+8>>2]=a[g+8>>2],Ma(h)),jy(p,h,m),Zr(m),T=(15-l|0)*3|0,E=fe(7,0,T|0)|0,A=A&~(P()|0),T=fe(Fp(m)|0,0,T|0)|0,n=T|n&~E,A=P()|0|A,(l|0)>1;)l=l+-1|0;else n=-1;e:do if((a[g>>2]|0)<=2&&(a[b+8>>2]|0)<=2&&(a[b+12>>2]|0)<=2){if(p=Jv(b)|0,l=fe(p|0,0,45)|0,l=l|n,n=P()|0|A&-1040385,m=qC(b)|0,!(Vt(p)|0)){if((m|0)<=0)break;for(h=0;;){if(p=oe(l|0,n|0,52)|0,P()|0,p=p&15,p)for(A=1;T=(15-A|0)*3|0,b=oe(l|0,n|0,T|0)|0,P()|0,E=fe(7,0,T|0)|0,n=n&~(P()|0),T=fe(Ca(b&7)|0,0,T|0)|0,l=l&~E|T,n=n|(P()|0),A>>>0<p>>>0;)A=A+1|0;if(h=h+1|0,(h|0)==(m|0))break e}}h=oe(l|0,n|0,52)|0,P()|0,h=h&15;t:do if(h){A=1;r:for(;;){switch(T=oe(l|0,n|0,(15-A|0)*3|0)|0,P()|0,T&7){case 1:break r;case 0:break;default:break t}if(A>>>0<h>>>0)A=A+1|0;else break t}if(Zv(p,a[b>>2]|0)|0)for(A=1;b=(15-A|0)*3|0,E=fe(7,0,b|0)|0,T=n&~(P()|0),n=oe(l|0,n|0,b|0)|0,P()|0,n=fe(mo(n&7)|0,0,b|0)|0,l=l&~E|n,n=T|(P()|0),A>>>0<h>>>0;)A=A+1|0;else for(A=1;T=(15-A|0)*3|0,b=oe(l|0,n|0,T|0)|0,P()|0,E=fe(7,0,T|0)|0,n=n&~(P()|0),T=fe(Ca(b&7)|0,0,T|0)|0,l=l&~E|T,n=n|(P()|0),A>>>0<h>>>0;)A=A+1|0}while(!1);if((m|0)>0){A=0;do l=qy(l,n)|0,n=P()|0,A=A+1|0;while((A|0)!=(m|0))}}else l=0,n=0;while(!1);return E=n,T=l,ze(E|0),x=S,T|0}function ss(n){return n=n|0,(n|0)%2|0|0}function Wy(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0;return h=x,x=x+16|0,p=h,l>>>0>15?(p=4,x=h,p|0):(a[n+4>>2]&2146435072|0)==2146435072||(a[n+8+4>>2]&2146435072|0)==2146435072?(p=3,x=h,p|0):(yk(n,l,p),l=Ik(p,l)|0,p=P()|0,a[A>>2]=l,a[A+4>>2]=p,(l|0)==0&(p|0)==0&&je(27795,27122,959,27145),p=0,x=h,p|0)}function Hy(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0;if(h=A+4|0,m=oe(n|0,l|0,52)|0,P()|0,m=m&15,g=oe(n|0,l|0,45)|0,P()|0,p=(m|0)==0,Vt(g&127)|0){if(p)return g=1,g|0;p=1}else{if(p)return g=0,g|0;(a[h>>2]|0)==0&&(a[A+8>>2]|0)==0?p=(a[A+12>>2]|0)!=0&1:p=1}for(A=1;A&1?Rp(h):Ma(h),g=oe(n|0,l|0,(15-A|0)*3|0)|0,P()|0,i3(h,g&7),A>>>0<m>>>0;)A=A+1|0;return p|0}function zl(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;if(T=x,x=x+16|0,S=T,E=oe(n|0,l|0,45)|0,P()|0,E=E&127,E>>>0>121)return a[A>>2]=0,a[A+4>>2]=0,a[A+8>>2]=0,a[A+12>>2]=0,E=5,x=T,E|0;e:do if((Vt(E)|0)!=0&&(m=oe(n|0,l|0,52)|0,P()|0,m=m&15,(m|0)!=0)){p=1;t:for(;;){switch(b=oe(n|0,l|0,(15-p|0)*3|0)|0,P()|0,b&7){case 5:break t;case 0:break;default:{p=l;break e}}if(p>>>0<m>>>0)p=p+1|0;else{p=l;break e}}for(h=1,p=l;l=(15-h|0)*3|0,g=fe(7,0,l|0)|0,b=p&~(P()|0),p=oe(n|0,p|0,l|0)|0,P()|0,p=fe(mo(p&7)|0,0,l|0)|0,n=n&~g|p,p=b|(P()|0),h>>>0<m>>>0;)h=h+1|0}else p=l;while(!1);if(b=7696+(E*28|0)|0,a[A>>2]=a[b>>2],a[A+4>>2]=a[b+4>>2],a[A+8>>2]=a[b+8>>2],a[A+12>>2]=a[b+12>>2],!(Hy(n,p,A)|0))return E=0,x=T,E|0;if(g=A+4|0,a[S>>2]=a[g>>2],a[S+4>>2]=a[g+4>>2],a[S+8>>2]=a[g+8>>2],m=oe(n|0,p|0,52)|0,P()|0,b=m&15,m&1?(Ma(g),m=b+1|0):m=b,!(Vt(E)|0))p=0;else{e:do if(!b)p=0;else for(l=1;;){if(h=oe(n|0,p|0,(15-l|0)*3|0)|0,P()|0,h=h&7,h|0){p=h;break e}if(l>>>0<b>>>0)l=l+1|0;else{p=0;break}}while(!1);p=(p|0)==4&1}if(!(Ul(A,m,p,0)|0))(m|0)!=(b|0)&&(a[g>>2]=a[S>>2],a[g+4>>2]=a[S+4>>2],a[g+8>>2]=a[S+8>>2]);else{if(Vt(E)|0)do;while((Ul(A,m,0,0)|0)!=0);(m|0)!=(b|0)&&r3(g)}return E=0,x=T,E|0}function Oa(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0;return m=x,x=x+16|0,p=m,h=zl(n,l,p)|0,h|0?(x=m,h|0):(h=oe(n|0,l|0,52)|0,P()|0,wk(p,h&15,A),h=0,x=m,h|0)}function Vl(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0;if(g=x,x=x+16|0,m=g,p=zl(n,l,m)|0,p|0)return m=p,x=g,m|0;p=oe(n|0,l|0,45)|0,P()|0,p=(Vt(p&127)|0)==0,h=oe(n|0,l|0,52)|0,P()|0,h=h&15;e:do if(!p){if(h|0)for(p=1;;){if(b=fe(7,0,(15-p|0)*3|0)|0,!((b&n|0)==0&((P()|0)&l|0)==0))break e;if(p>>>0<h>>>0)p=p+1|0;else break}return By(m,h,0,5,A),b=0,x=g,b|0}while(!1);return Uy(m,h,0,6,A),b=0,x=g,b|0}function Mk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0;if(h=oe(n|0,l|0,45)|0,P()|0,!(Vt(h&127)|0))return h=2,a[A>>2]=h,0;if(h=oe(n|0,l|0,52)|0,P()|0,h=h&15,!h)return h=5,a[A>>2]=h,0;for(p=1;;){if(m=fe(7,0,(15-p|0)*3|0)|0,!((m&n|0)==0&((P()|0)&l|0)==0)){p=2,n=6;break}if(p>>>0<h>>>0)p=p+1|0;else{p=5,n=6;break}}return(n|0)==6&&(a[A>>2]=p),0}function d3(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0;O=x,x=x+128|0,E=O+112|0,m=O+96|0,T=O,h=oe(n|0,l|0,52)|0,P()|0,b=h&15,a[E>>2]=b,g=oe(n|0,l|0,45)|0,P()|0,g=g&127;e:do if(Vt(g)|0){if(b|0)for(p=1;;){if(S=fe(7,0,(15-p|0)*3|0)|0,!((S&n|0)==0&((P()|0)&l|0)==0)){h=0;break e}if(p>>>0<b>>>0)p=p+1|0;else break}if(h&1)h=1;else return S=fe(b+1|0,0,52)|0,T=P()|0|l&-15728641,E=fe(7,0,(14-b|0)*3|0)|0,T=d3((S|n)&~E,T&~(P()|0),A)|0,x=O,T|0}else h=0;while(!1);if(p=zl(n,l,m)|0,!p){h?(l3(m,E,T),S=5):(A3(m,E,T),S=6);e:do if(Vt(g)|0)if(!b)n=5;else for(p=1;;){if(g=fe(7,0,(15-p|0)*3|0)|0,!((g&n|0)==0&((P()|0)&l|0)==0)){n=2;break e}if(p>>>0<b>>>0)p=p+1|0;else{n=5;break}}else n=2;while(!1);vo(A|0,-1,n<<2|0)|0;e:do if(h)for(m=0;;){if(g=T+(m<<4)|0,bk(g,a[E>>2]|0)|0,g=a[g>>2]|0,b=a[A>>2]|0,(b|0)==-1|(b|0)==(g|0))p=A;else{h=0;do{if(h=h+1|0,h>>>0>=n>>>0){p=1;break e}p=A+(h<<2)|0,b=a[p>>2]|0}while(!((b|0)==-1|(b|0)==(g|0)))}if(a[p>>2]=g,m=m+1|0,m>>>0>=S>>>0){p=0;break}}else for(m=0;;){if(g=T+(m<<4)|0,Ul(g,a[E>>2]|0,0,1)|0,g=a[g>>2]|0,b=a[A>>2]|0,(b|0)==-1|(b|0)==(g|0))p=A;else{h=0;do{if(h=h+1|0,h>>>0>=n>>>0){p=1;break e}p=A+(h<<2)|0,b=a[p>>2]|0}while(!((b|0)==-1|(b|0)==(g|0)))}if(a[p>>2]=g,m=m+1|0,m>>>0>=S>>>0){p=0;break}}while(!1)}return T=p,x=O,T|0}function Ck(){return 12}function Jy(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0;if(n>>>0>15)return b=4,b|0;if(fe(n|0,0,52)|0,b=P()|0|134225919,!n){A=0,p=0;do Vt(p)|0&&(fe(p|0,0,45)|0,g=b|(P()|0),n=l+(A<<3)|0,a[n>>2]=-1,a[n+4>>2]=g,A=A+1|0),p=p+1|0;while((p|0)!=122);return A=0,A|0}A=0,g=0;do{if(Vt(g)|0){for(fe(g|0,0,45)|0,p=1,h=-1,m=b|(P()|0);S=fe(7,0,(15-p|0)*3|0)|0,h=h&~S,m=m&~(P()|0),(p|0)!=(n|0);)p=p+1|0;S=l+(A<<3)|0,a[S>>2]=h,a[S+4>>2]=m,A=A+1|0}g=g+1|0}while((g|0)!=122);return A=0,A|0}function kk(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0;if(H=x,x=x+16|0,G=H,Y=oe(n|0,l|0,52)|0,P()|0,Y=Y&15,A>>>0>15)return Y=4,x=H,Y|0;if((Y|0)<(A|0))return Y=12,x=H,Y|0;if((Y|0)!=(A|0))if(m=fe(A|0,0,52)|0,m=m|n,b=P()|0|l&-15728641,(Y|0)>(A|0)){S=A;do U=fe(7,0,(14-S|0)*3|0)|0,S=S+1|0,m=U|m,b=P()|0|b;while((S|0)<(Y|0));U=m}else U=m;else U=n,b=l;R=oe(U|0,b|0,45)|0,P()|0;e:do if(Vt(R&127)|0){if(S=oe(U|0,b|0,52)|0,P()|0,S=S&15,S|0)for(m=1;;){if(R=fe(7,0,(15-m|0)*3|0)|0,!((R&U|0)==0&((P()|0)&b|0)==0)){E=33;break e}if(m>>>0<S>>>0)m=m+1|0;else break}if(R=p,a[R>>2]=0,a[R+4>>2]=0,(Y|0)>(A|0)){for(R=l&-15728641,F=Y;;){if(D=F,F=F+-1|0,F>>>0>15|(Y|0)<(F|0)){E=19;break}if((Y|0)!=(F|0))if(m=fe(F|0,0,52)|0,m=m|n,S=P()|0|R,(Y|0)<(D|0))O=m;else{E=F;do O=fe(7,0,(14-E|0)*3|0)|0,E=E+1|0,m=O|m,S=P()|0|S;while((E|0)<(Y|0));O=m}else O=n,S=l;if(T=oe(O|0,S|0,45)|0,P()|0,!(Vt(T&127)|0))m=0;else{T=oe(O|0,S|0,52)|0,P()|0,T=T&15;t:do if(!T)m=0;else for(E=1;;){if(m=oe(O|0,S|0,(15-E|0)*3|0)|0,P()|0,m=m&7,m|0)break t;if(E>>>0<T>>>0)E=E+1|0;else{m=0;break}}while(!1);m=(m|0)==0&1}if(S=oe(n|0,l|0,(15-D|0)*3|0)|0,P()|0,S=S&7,(S|0)==7){h=5,E=42;break}if(m=(m|0)!=0,(S|0)==1&m){h=5,E=42;break}if(O=S+(((S|0)!=0&m)<<31>>31)|0,O|0&&(E=Y-D|0,E=go(7,0,E,((E|0)<0)<<31>>31)|0,T=P()|0,m?(m=Or(E|0,T|0,5,0)|0,m=Oe(m|0,P()|0,-5,-1)|0,m=bo(m|0,P()|0,6,0)|0,m=Oe(m|0,P()|0,1,0)|0,S=P()|0):(m=E,S=T),D=O+-1|0,D=Or(E|0,T|0,D|0,((D|0)<0)<<31>>31|0)|0,D=Oe(m|0,S|0,D|0,P()|0)|0,O=P()|0,T=p,T=Oe(D|0,O|0,a[T>>2]|0,a[T+4>>2]|0)|0,O=P()|0,D=p,a[D>>2]=T,a[D+4>>2]=O),(F|0)<=(A|0)){E=37;break}}if((E|0)==19)je(27795,27122,1276,27158);else if((E|0)==37){g=p,h=a[g+4>>2]|0,g=a[g>>2]|0;break}else if((E|0)==42)return x=H,h|0}else h=0,g=0}else E=33;while(!1);e:do if((E|0)==33)if(R=p,a[R>>2]=0,a[R+4>>2]=0,(Y|0)>(A|0)){for(m=Y;;){if(h=oe(n|0,l|0,(15-m|0)*3|0)|0,P()|0,h=h&7,(h|0)==7){h=5;break}if(g=Y-m|0,g=go(7,0,g,((g|0)<0)<<31>>31)|0,h=Or(g|0,P()|0,h|0,0)|0,g=P()|0,R=p,g=Oe(a[R>>2]|0,a[R+4>>2]|0,h|0,g|0)|0,h=P()|0,R=p,a[R>>2]=g,a[R+4>>2]=h,m=m+-1|0,(m|0)<=(A|0))break e}return x=H,h|0}else h=0,g=0;while(!1);return a0(U,b,Y,G)|0&&je(27795,27122,1236,27173),Y=G,G=a[Y+4>>2]|0,((h|0)>-1|(h|0)==-1&g>>>0>4294967295)&((G|0)>(h|0)|((G|0)==(h|0)?(a[Y>>2]|0)>>>0>g>>>0:0))?(Y=0,x=H,Y|0):(je(27795,27122,1316,27158),0)}function Ok(n,l,A,p,h,m){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0,m=m|0;var g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0;if(O=x,x=x+16|0,g=O,h>>>0>15)return m=4,x=O,m|0;if(b=oe(A|0,p|0,52)|0,P()|0,b=b&15,(b|0)>(h|0))return m=12,x=O,m|0;if(a0(A,p,h,g)|0&&je(27795,27122,1236,27173),T=g,E=a[T+4>>2]|0,!(((l|0)>-1|(l|0)==-1&n>>>0>4294967295)&((E|0)>(l|0)|((E|0)==(l|0)?(a[T>>2]|0)>>>0>n>>>0:0))))return m=2,x=O,m|0;T=h-b|0,h=fe(h|0,0,52)|0,S=P()|0|p&-15728641,E=m,a[E>>2]=h|A,a[E+4>>2]=S,E=oe(A|0,p|0,45)|0,P()|0;e:do if(Vt(E&127)|0){if(b|0)for(g=1;;){if(E=fe(7,0,(15-g|0)*3|0)|0,!((E&A|0)==0&((P()|0)&p|0)==0))break e;if(g>>>0<b>>>0)g=g+1|0;else break}if((T|0)<1)return m=0,x=O,m|0;for(E=b^15,p=-1,S=1,g=1;;){b=T-S|0,b=go(7,0,b,((b|0)<0)<<31>>31)|0,A=P()|0;do if(g)if(g=Or(b|0,A|0,5,0)|0,g=Oe(g|0,P()|0,-5,-1)|0,g=bo(g|0,P()|0,6,0)|0,h=P()|0,(l|0)>(h|0)|(l|0)==(h|0)&n>>>0>g>>>0){l=Oe(n|0,l|0,-1,-1)|0,l=zr(l|0,P()|0,g|0,h|0)|0,g=P()|0,D=m,R=a[D>>2]|0,D=a[D+4>>2]|0,U=(E+p|0)*3|0,F=fe(7,0,U|0)|0,D=D&~(P()|0),p=bo(l|0,g|0,b|0,A|0)|0,n=P()|0,h=Oe(p|0,n|0,2,0)|0,U=fe(h|0,P()|0,U|0)|0,D=P()|0|D,h=m,a[h>>2]=U|R&~F,a[h+4>>2]=D,n=Or(p|0,n|0,b|0,A|0)|0,n=zr(l|0,g|0,n|0,P()|0)|0,g=0,l=P()|0;break}else{U=m,F=a[U>>2]|0,U=a[U+4>>2]|0,R=fe(7,0,(E+p|0)*3|0)|0,U=U&~(P()|0),g=m,a[g>>2]=F&~R,a[g+4>>2]=U,g=1;break}else F=m,h=a[F>>2]|0,F=a[F+4>>2]|0,p=(E+p|0)*3|0,D=fe(7,0,p|0)|0,F=F&~(P()|0),U=bo(n|0,l|0,b|0,A|0)|0,g=P()|0,p=fe(U|0,g|0,p|0)|0,F=P()|0|F,R=m,a[R>>2]=p|h&~D,a[R+4>>2]=F,g=Or(U|0,g|0,b|0,A|0)|0,n=zr(n|0,l|0,g|0,P()|0)|0,g=0,l=P()|0;while(!1);if((T|0)>(S|0))p=~S,S=S+1|0;else{l=0;break}}return x=O,l|0}while(!1);if((T|0)<1)return U=0,x=O,U|0;for(h=b^15,g=1;;)if(R=T-g|0,R=go(7,0,R,((R|0)<0)<<31>>31)|0,U=P()|0,S=m,A=a[S>>2]|0,S=a[S+4>>2]|0,b=(h-g|0)*3|0,p=fe(7,0,b|0)|0,S=S&~(P()|0),D=bo(n|0,l|0,R|0,U|0)|0,F=P()|0,b=fe(D|0,F|0,b|0)|0,S=P()|0|S,E=m,a[E>>2]=b|A&~p,a[E+4>>2]=S,U=Or(D|0,F|0,R|0,U|0)|0,n=zr(n|0,l|0,U|0,P()|0)|0,l=P()|0,(T|0)<=(g|0)){l=0;break}else g=g+1|0;return x=O,l|0}function Zy(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0;h=oe(l|0,A|0,52)|0,P()|0,h=h&15,(l|0)==0&(A|0)==0|((p|0)>15|(h|0)>(p|0))?(m=-1,l=-1,A=0,h=0):(l=c3(l,A,h+1|0,p)|0,g=(P()|0)&-15728641,A=fe(p|0,0,52)|0,A=l|A,g=g|(P()|0),l=(Dt(A,g)|0)==0,m=h,l=l?-1:p,h=g),g=n,a[g>>2]=A,a[g+4>>2]=h,a[n+8>>2]=m,a[n+12>>2]=l}function h3(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0;if(h=oe(n|0,l|0,52)|0,P()|0,h=h&15,m=p+8|0,a[m>>2]=h,(n|0)==0&(l|0)==0|((A|0)>15|(h|0)>(A|0))){A=p,a[A>>2]=0,a[A+4>>2]=0,a[m>>2]=-1,a[p+12>>2]=-1;return}if(n=c3(n,l,h+1|0,A)|0,m=(P()|0)&-15728641,h=fe(A|0,0,52)|0,h=n|h,m=m|(P()|0),n=p,a[n>>2]=h,a[n+4>>2]=m,n=p+12|0,Dt(h,m)|0){a[n>>2]=A;return}else{a[n>>2]=-1;return}}function Yy(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0;if(A=n,l=a[A>>2]|0,A=a[A+4>>2]|0,!((l|0)==0&(A|0)==0)&&(p=oe(l|0,A|0,52)|0,P()|0,p=p&15,b=fe(1,0,(p^15)*3|0)|0,l=Oe(b|0,P()|0,l|0,A|0)|0,A=P()|0,b=n,a[b>>2]=l,a[b+4>>2]=A,b=n+8|0,g=a[b>>2]|0,!((p|0)<(g|0)))){for(S=n+12|0,m=p;;){if((m|0)==(g|0)){p=5;break}if(E=(m|0)==(a[S>>2]|0),h=(15-m|0)*3|0,p=oe(l|0,A|0,h|0)|0,P()|0,p=p&7,E&((p|0)==1&!0)){p=7;break}if(!((p|0)==7&!0)){p=10;break}if(E=fe(1,0,h|0)|0,l=Oe(l|0,A|0,E|0,P()|0)|0,A=P()|0,E=n,a[E>>2]=l,a[E+4>>2]=A,(m|0)>(g|0))m=m+-1|0;else{p=10;break}}if((p|0)==5){E=n,a[E>>2]=0,a[E+4>>2]=0,a[b>>2]=-1,a[S>>2]=-1;return}else if((p|0)==7){g=fe(1,0,h|0)|0,g=Oe(l|0,A|0,g|0,P()|0)|0,b=P()|0,E=n,a[E>>2]=g,a[E+4>>2]=b,a[S>>2]=m+-1;return}else if((p|0)==10)return}}function l0(n){n=+n;var l=0;return l=n<0?n+6.283185307179586:n,+(n>=6.283185307179586?l+-6.283185307179586:l)}function Gl(n,l){return n=n|0,l=l|0,+Ye(+(+M[n>>3]-+M[l>>3]))<17453292519943298e-27?(l=+Ye(+(+M[n+8>>3]-+M[l+8>>3]))<17453292519943298e-27,l|0):(l=0,l|0)}function ji(n,l){switch(n=+n,l=l|0,l|0){case 1:{n=n<0?n+6.283185307179586:n;break}case 2:{n=n>0?n+-6.283185307179586:n;break}}return+n}function Pk(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0;return h=+M[l>>3],p=+M[n>>3],m=+Ke(+((h-p)*.5)),A=+Ke(+((+M[l+8>>3]-+M[n+8>>3])*.5)),A=m*m+A*(+bt(+h)*+bt(+p)*A),+(+Jr(+ +ht(+A),+ +ht(+(1-A)))*2)}function A0(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0;return h=+M[l>>3],p=+M[n>>3],m=+Ke(+((h-p)*.5)),A=+Ke(+((+M[l+8>>3]-+M[n+8>>3])*.5)),A=m*m+A*(+bt(+h)*+bt(+p)*A),+(+Jr(+ +ht(+A),+ +ht(+(1-A)))*2*6371.007180918475)}function Dk(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0;return h=+M[l>>3],p=+M[n>>3],m=+Ke(+((h-p)*.5)),A=+Ke(+((+M[l+8>>3]-+M[n+8>>3])*.5)),A=m*m+A*(+bt(+h)*+bt(+p)*A),+(+Jr(+ +ht(+A),+ +ht(+(1-A)))*2*6371.007180918475*1e3)}function Fk(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0;return m=+M[l>>3],p=+bt(+m),h=+M[l+8>>3]-+M[n+8>>3],g=p*+Ke(+h),A=+M[n>>3],+ +Jr(+g,+(+Ke(+m)*+bt(+A)-+bt(+h)*(p*+Ke(+A))))}function Rk(n,l,A,p){n=n|0,l=+l,A=+A,p=p|0;var h=0,m=0,g=0,b=0;if(A<1e-16){a[p>>2]=a[n>>2],a[p+4>>2]=a[n+4>>2],a[p+8>>2]=a[n+8>>2],a[p+12>>2]=a[n+12>>2];return}m=l<0?l+6.283185307179586:l,m=l>=6.283185307179586?m+-6.283185307179586:m;do if(m<1e-16)l=+M[n>>3]+A,M[p>>3]=l,h=p;else{if(h=+Ye(+(m+-3.141592653589793))<1e-16,l=+M[n>>3],h){l=l-A,M[p>>3]=l,h=p;break}if(g=+bt(+A),A=+Ke(+A),l=g*+Ke(+l)+ +bt(+m)*(A*+bt(+l)),l=l>1?1:l,l=+i0(+(l<-1?-1:l)),M[p>>3]=l,+Ye(+(l+-1.5707963267948966))<1e-16){M[p>>3]=1.5707963267948966,M[p+8>>3]=0;return}if(+Ye(+(l+1.5707963267948966))<1e-16){M[p>>3]=-1.5707963267948966,M[p+8>>3]=0;return}if(b=1/+bt(+l),m=A*+Ke(+m)*b,A=+M[n>>3],l=b*((g-+Ke(+l)*+Ke(+A))/+bt(+A)),g=m>1?1:m,l=l>1?1:l,l=+M[n+8>>3]+ +Jr(+(g<-1?-1:g),+(l<-1?-1:l)),l>3.141592653589793)do l=l+-6.283185307179586;while(l>3.141592653589793);if(l<-3.141592653589793)do l=l+6.283185307179586;while(l<-3.141592653589793);M[p+8>>3]=l;return}while(!1);if(+Ye(+(l+-1.5707963267948966))<1e-16){M[h>>3]=1.5707963267948966,M[p+8>>3]=0;return}if(+Ye(+(l+1.5707963267948966))<1e-16){M[h>>3]=-1.5707963267948966,M[p+8>>3]=0;return}if(l=+M[n+8>>3],l>3.141592653589793)do l=l+-6.283185307179586;while(l>3.141592653589793);if(l<-3.141592653589793)do l=l+6.283185307179586;while(l<-3.141592653589793);M[p+8>>3]=l}function f3(n,l){return n=n|0,l=l|0,n>>>0>15?(l=4,l|0):(M[l>>3]=+M[20656+(n<<3)>>3],l=0,l|0)}function Nk(n,l){return n=n|0,l=l|0,n>>>0>15?(l=4,l|0):(M[l>>3]=+M[20784+(n<<3)>>3],l=0,l|0)}function jk(n,l){return n=n|0,l=l|0,n>>>0>15?(l=4,l|0):(M[l>>3]=+M[20912+(n<<3)>>3],l=0,l|0)}function Lk(n,l){return n=n|0,l=l|0,n>>>0>15?(l=4,l|0):(M[l>>3]=+M[21040+(n<<3)>>3],l=0,l|0)}function Lp(n,l){n=n|0,l=l|0;var A=0;return n>>>0>15?(l=4,l|0):(A=go(7,0,n,((n|0)<0)<<31>>31)|0,A=Or(A|0,P()|0,120,0)|0,n=P()|0,a[l>>2]=A|2,a[l+4>>2]=n,l=0,l|0)}function y3(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0;return D=+M[l>>3],T=+M[n>>3],S=+Ke(+((D-T)*.5)),m=+M[l+8>>3],E=+M[n+8>>3],g=+Ke(+((m-E)*.5)),b=+bt(+T),O=+bt(+D),g=S*S+g*(O*b*g),g=+Jr(+ +ht(+g),+ +ht(+(1-g)))*2,S=+M[A>>3],D=+Ke(+((S-D)*.5)),p=+M[A+8>>3],m=+Ke(+((p-m)*.5)),h=+bt(+S),m=D*D+m*(O*h*m),m=+Jr(+ +ht(+m),+ +ht(+(1-m)))*2,S=+Ke(+((T-S)*.5)),p=+Ke(+((E-p)*.5)),p=S*S+p*(b*h*p),p=+Jr(+ +ht(+p),+ +ht(+(1-p)))*2,h=(g+m+p)*.5,+(+s0(+ +ht(+(+_i(+(h*.5))*+_i(+((h-g)*.5))*+_i(+((h-m)*.5))*+_i(+((h-p)*.5)))))*4)}function Ky(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0;if(b=x,x=x+192|0,m=b+168|0,g=b,h=Oa(n,l,m)|0,h|0)return A=h,x=b,A|0;if(Vl(n,l,g)|0&&je(27795,27190,415,27199),l=a[g>>2]|0,(l|0)>0){if(p=+y3(g+8|0,g+8+(((l|0)!=1&1)<<4)|0,m)+0,(l|0)!=1){n=1;do h=n,n=n+1|0,p=p+ +y3(g+8+(h<<4)|0,g+8+(((n|0)%(l|0)|0)<<4)|0,m);while((n|0)<(l|0))}}else p=0;return M[A>>3]=p,A=0,x=b,A|0}function Bk(n,l,A){return n=n|0,l=l|0,A=A|0,n=Ky(n,l,A)|0,n|0||(M[A>>3]=+M[A>>3]*6371.007180918475*6371.007180918475),n|0}function Uk(n,l,A){return n=n|0,l=l|0,A=A|0,n=Ky(n,l,A)|0,n|0||(M[A>>3]=+M[A>>3]*6371.007180918475*6371.007180918475*1e3*1e3),n|0}function zk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;if(b=x,x=x+176|0,g=b,n=jp(n,l,g)|0,n|0)return g=n,x=b,g|0;if(M[A>>3]=0,n=a[g>>2]|0,(n|0)<=1)return g=0,x=b,g|0;l=n+-1|0,n=0,p=+M[g+8>>3],h=+M[g+16>>3],m=0;do n=n+1|0,E=p,p=+M[g+8+(n<<4)>>3],T=+Ke(+((p-E)*.5)),S=h,h=+M[g+8+(n<<4)+8>>3],S=+Ke(+((h-S)*.5)),S=T*T+S*(+bt(+p)*+bt(+E)*S),m=m+ +Jr(+ +ht(+S),+ +ht(+(1-S)))*2;while((n|0)<(l|0));return M[A>>3]=m,g=0,x=b,g|0}function Vk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;if(b=x,x=x+176|0,g=b,n=jp(n,l,g)|0,n|0)return g=n,m=+M[A>>3],m=m*6371.007180918475,M[A>>3]=m,x=b,g|0;if(M[A>>3]=0,n=a[g>>2]|0,(n|0)<=1)return g=0,m=0,m=m*6371.007180918475,M[A>>3]=m,x=b,g|0;l=n+-1|0,n=0,p=+M[g+8>>3],h=+M[g+16>>3],m=0;do n=n+1|0,E=p,p=+M[g+8+(n<<4)>>3],T=+Ke(+((p-E)*.5)),S=h,h=+M[g+8+(n<<4)+8>>3],S=+Ke(+((h-S)*.5)),S=T*T+S*(+bt(+E)*+bt(+p)*S),m=m+ +Jr(+ +ht(+S),+ +ht(+(1-S)))*2;while((n|0)!=(l|0));return M[A>>3]=m,g=0,T=m,T=T*6371.007180918475,M[A>>3]=T,x=b,g|0}function Gk(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;if(b=x,x=x+176|0,g=b,n=jp(n,l,g)|0,n|0)return g=n,m=+M[A>>3],m=m*6371.007180918475,m=m*1e3,M[A>>3]=m,x=b,g|0;if(M[A>>3]=0,n=a[g>>2]|0,(n|0)<=1)return g=0,m=0,m=m*6371.007180918475,m=m*1e3,M[A>>3]=m,x=b,g|0;l=n+-1|0,n=0,p=+M[g+8>>3],h=+M[g+16>>3],m=0;do n=n+1|0,E=p,p=+M[g+8+(n<<4)>>3],T=+Ke(+((p-E)*.5)),S=h,h=+M[g+8+(n<<4)+8>>3],S=+Ke(+((h-S)*.5)),S=T*T+S*(+bt(+E)*+bt(+p)*S),m=m+ +Jr(+ +ht(+S),+ +ht(+(1-S)))*2;while((n|0)!=(l|0));return M[A>>3]=m,g=0,T=m,T=T*6371.007180918475,T=T*1e3,M[A>>3]=T,x=b,g|0}function qk(n){n=n|0;var l=0,A=0,p=0;return l=xi(1,12)|0,l||je(27280,27235,49,27293),A=n+4|0,p=a[A>>2]|0,p|0?(p=p+8|0,a[p>>2]=l,a[A>>2]=l,l|0):(a[n>>2]|0&&je(27310,27235,61,27333),p=n,a[p>>2]=l,a[A>>2]=l,l|0)}function Qk(n,l){n=n|0,l=l|0;var A=0,p=0;return p=nn(24)|0,p||je(27347,27235,78,27361),a[p>>2]=a[l>>2],a[p+4>>2]=a[l+4>>2],a[p+8>>2]=a[l+8>>2],a[p+12>>2]=a[l+12>>2],a[p+16>>2]=0,l=n+4|0,A=a[l>>2]|0,A|0?(a[A+16>>2]=p,a[l>>2]=p,p|0):(a[n>>2]|0&&je(27376,27235,82,27361),a[n>>2]=p,a[l>>2]=p,p|0)}function m3(n){n=n|0;var l=0,A=0,p=0,h=0;if(n)for(p=1;;){if(l=a[n>>2]|0,l|0)do{if(A=a[l>>2]|0,A|0)do h=A,A=a[A+16>>2]|0,De(h);while((A|0)!=0);h=l,l=a[l+8>>2]|0,De(h)}while((l|0)!=0);if(l=n,n=a[n+8>>2]|0,p||De(l),n)p=0;else break}}function Wk(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0,Ie=0,_e=0,Qe=0,He=0,At=0,Le=0,Me=0,ue=0,rt=0,Ot=0,Xe=0;if(h=n+8|0,a[h>>2]|0)return Xe=1,Xe|0;if(p=a[n>>2]|0,!p)return Xe=0,Xe|0;l=p,A=0;do A=A+1|0,l=a[l+8>>2]|0;while((l|0)!=0);if(A>>>0<2)return Xe=0,Xe|0;rt=nn(A<<2)|0,rt||je(27396,27235,317,27415),ue=nn(A<<5)|0,ue||je(27437,27235,321,27415),a[n>>2]=0,Ie=n+4|0,a[Ie>>2]=0,a[h>>2]=0,A=0,Me=0,de=0,O=0;e:for(;;){if(T=a[p>>2]|0,T){m=0,g=T;do{if(S=+M[g+8>>3],l=g,g=a[g+16>>2]|0,E=(g|0)==0,h=E?T:g,b=+M[h+8>>3],+Ye(+(S-b))>3.141592653589793){Xe=14;break}m=m+(b-S)*(+M[l>>3]+ +M[h>>3])}while(!E);if((Xe|0)==14){Xe=0,m=0,l=T;do z=+M[l+8>>3],Le=l+16|0,At=a[Le>>2]|0,At=(At|0)==0?T:At,Q=+M[At+8>>3],m=m+(+M[l>>3]+ +M[At>>3])*((Q<0?Q+6.283185307179586:Q)-(z<0?z+6.283185307179586:z)),l=a[((l|0)==0?p:Le)>>2]|0;while((l|0)!=0)}m>0?(a[rt+(Me<<2)>>2]=p,Me=Me+1|0,h=de,l=O):Xe=19}else Xe=19;if((Xe|0)==19){Xe=0;do if(A){if(l=A+8|0,a[l>>2]|0){Xe=21;break e}if(A=xi(1,12)|0,!A){Xe=23;break e}a[l>>2]=A,h=A+4|0,g=A,l=O}else if(O){h=Ie,g=O+8|0,l=p,A=n;break}else if(a[n>>2]|0){Xe=27;break e}else{h=Ie,g=n,l=p,A=n;break}while(!1);if(a[g>>2]=p,a[h>>2]=p,g=ue+(de<<5)|0,E=a[p>>2]|0,E){for(T=ue+(de<<5)+8|0,M[T>>3]=17976931348623157e292,O=ue+(de<<5)+24|0,M[O>>3]=17976931348623157e292,M[g>>3]=-17976931348623157e292,D=ue+(de<<5)+16|0,M[D>>3]=-17976931348623157e292,Y=17976931348623157e292,H=-17976931348623157e292,h=0,F=E,S=17976931348623157e292,U=17976931348623157e292,G=-17976931348623157e292,b=-17976931348623157e292;m=+M[F>>3],z=+M[F+8>>3],F=a[F+16>>2]|0,R=(F|0)==0,Q=+M[(R?E:F)+8>>3],m<S&&(M[T>>3]=m,S=m),z<U&&(M[O>>3]=z,U=z),m>G?M[g>>3]=m:m=G,z>b&&(M[D>>3]=z,b=z),Y=z>0&z<Y?z:Y,H=z<0&z>H?z:H,h=h|+Ye(+(z-Q))>3.141592653589793,!R;)G=m;h&&(M[D>>3]=H,M[O>>3]=Y)}else a[g>>2]=0,a[g+4>>2]=0,a[g+8>>2]=0,a[g+12>>2]=0,a[g+16>>2]=0,a[g+20>>2]=0,a[g+24>>2]=0,a[g+28>>2]=0;h=de+1|0}if(Le=p+8|0,p=a[Le>>2]|0,a[Le>>2]=0,p)de=h,O=l;else{Xe=45;break}}if((Xe|0)==21)je(27213,27235,35,27247);else if((Xe|0)==23)je(27267,27235,37,27247);else if((Xe|0)==27)je(27310,27235,61,27333);else if((Xe|0)==45){e:do if((Me|0)>0){for(Le=(h|0)==0,He=h<<2,At=(n|0)==0,Qe=0,l=0;;){if(_e=a[rt+(Qe<<2)>>2]|0,Le)Xe=73;else{if(de=nn(He)|0,!de){Xe=50;break}if(Ie=nn(He)|0,!Ie){Xe=52;break}t:do if(At)A=0;else{for(h=0,A=0,g=n;p=ue+(h<<5)|0,g3(a[g>>2]|0,p,a[_e>>2]|0)|0?(a[de+(A<<2)>>2]=g,a[Ie+(A<<2)>>2]=p,R=A+1|0):R=A,g=a[g+8>>2]|0,g;)h=h+1|0,A=R;if((R|0)>0)if(p=a[de>>2]|0,(R|0)==1)A=p;else for(D=0,F=-1,A=p,O=p;;){for(E=a[O>>2]|0,p=0,g=0;h=a[a[de+(g<<2)>>2]>>2]|0,(h|0)==(E|0)?T=p:T=p+((g3(h,a[Ie+(g<<2)>>2]|0,a[E>>2]|0)|0)&1)|0,g=g+1|0,(g|0)!=(R|0);)p=T;if(h=(T|0)>(F|0),A=h?O:A,p=D+1|0,(p|0)==(R|0))break t;D=p,F=h?T:F,O=a[de+(p<<2)>>2]|0}else A=0}while(!1);if(De(de),De(Ie),A){if(h=A+4|0,p=a[h>>2]|0,p)A=p+8|0;else if(a[A>>2]|0){Xe=70;break}a[A>>2]=_e,a[h>>2]=_e}else Xe=73}if((Xe|0)==73){if(Xe=0,l=a[_e>>2]|0,l|0)do Ie=l,l=a[l+16>>2]|0,De(Ie);while((l|0)!=0);De(_e),l=1}if(Qe=Qe+1|0,(Qe|0)>=(Me|0)){Ot=l;break e}}(Xe|0)==50?je(27452,27235,249,27471):(Xe|0)==52?je(27490,27235,252,27471):(Xe|0)==70&&je(27310,27235,61,27333)}else Ot=0;while(!1);return De(rt),De(ue),Xe=Ot,Xe|0}return 0}function g3(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0;if(!(Ry(l,A)|0)||(l=Yv(l)|0,p=+M[A>>3],h=+M[A+8>>3],h=l&h<0?h+6.283185307179586:h,n=a[n>>2]|0,!n))return n=0,n|0;if(l){l=0,E=h,A=n;e:for(;;){for(;g=+M[A>>3],h=+M[A+8>>3],A=A+16|0,T=a[A>>2]|0,T=(T|0)==0?n:T,m=+M[T>>3],b=+M[T+8>>3],g>m?(S=g,g=b):(S=m,m=g,g=h,h=b),p=p==m|p==S?p+2220446049250313e-31:p,!!(p<m|p>S);)if(A=a[A>>2]|0,!A){A=22;break e}if(b=g<0?g+6.283185307179586:g,g=h<0?h+6.283185307179586:h,E=b==E|g==E?E+-2220446049250313e-31:E,S=b+(g-b)*((p-m)/(S-m)),(S<0?S+6.283185307179586:S)>E&&(l=l^1),A=a[A>>2]|0,!A){A=22;break}}if((A|0)==22)return l|0}else{l=0,E=h,A=n;e:for(;;){for(;g=+M[A>>3],h=+M[A+8>>3],A=A+16|0,T=a[A>>2]|0,T=(T|0)==0?n:T,m=+M[T>>3],b=+M[T+8>>3],g>m?(S=g,g=b):(S=m,m=g,g=h,h=b),p=p==m|p==S?p+2220446049250313e-31:p,!!(p<m|p>S);)if(A=a[A>>2]|0,!A){A=22;break e}if(E=g==E|h==E?E+-2220446049250313e-31:E,g+(h-g)*((p-m)/(S-m))>E&&(l=l^1),A=a[A>>2]|0,!A){A=22;break}}if((A|0)==22)return l|0}return 0}function Fn(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0;if(H=x,x=x+32|0,Y=H+16|0,G=H,m=oe(n|0,l|0,52)|0,P()|0,m=m&15,F=oe(A|0,p|0,52)|0,P()|0,(m|0)!=(F&15|0))return Y=12,x=H,Y|0;if(E=oe(n|0,l|0,45)|0,P()|0,E=E&127,T=oe(A|0,p|0,45)|0,P()|0,T=T&127,E>>>0>121|T>>>0>121)return Y=5,x=H,Y|0;if(F=(E|0)!=(T|0),F){if(b=Fy(E,T)|0,(b|0)==7)return Y=1,x=H,Y|0;S=Fy(T,E)|0,(S|0)==7?je(27514,27538,161,27548):(R=b,g=S)}else R=0,g=0;O=Vt(E)|0,D=Vt(T)|0,a[Y>>2]=0,a[Y+4>>2]=0,a[Y+8>>2]=0,a[Y+12>>2]=0;do if(R){if(T=a[4272+(E*28|0)+(R<<2)>>2]|0,b=(T|0)>0,D)if(b){E=0,S=A,b=p;do S=Tk(S,b)|0,b=P()|0,g=mo(g)|0,(g|0)==1&&(g=mo(1)|0),E=E+1|0;while((E|0)!=(T|0));T=g,E=S,S=b}else T=g,E=A,S=p;else if(b){E=0,S=A,b=p;do S=Qy(S,b)|0,b=P()|0,g=mo(g)|0,E=E+1|0;while((E|0)!=(T|0));T=g,E=S,S=b}else T=g,E=A,S=p;if(Hy(E,S,Y)|0,F||je(27563,27538,191,27548),b=(O|0)!=0,g=(D|0)!=0,b&g&&je(27590,27538,192,27548),b){if(g=Ei(n,l)|0,(g|0)==7){m=5;break}if(ne[22e3+(g*7|0)+R>>0]|0){m=1;break}S=a[21168+(g*28|0)+(R<<2)>>2]|0,E=S}else if(g){if(g=Ei(E,S)|0,(g|0)==7){m=5;break}if(ne[22e3+(g*7|0)+T>>0]|0){m=1;break}E=0,S=a[21168+(T*28|0)+(g<<2)>>2]|0}else E=0,S=0;if((E|S|0)<0)m=5;else{if((S|0)>0){b=Y+4|0,g=0;do Np(b),g=g+1|0;while((g|0)!=(S|0))}if(a[G>>2]=0,a[G+4>>2]=0,a[G+8>>2]=0,i3(G,R),m|0)for(;ss(m)|0?Rp(G):Ma(G),(m|0)>1;)m=m+-1|0;if((E|0)>0){m=0;do Np(G),m=m+1|0;while((m|0)!=(E|0))}U=Y+4|0,ci(U,G,U),Zr(U),U=51}}else if(Hy(A,p,Y)|0,(O|0)!=0&(D|0)!=0)if((T|0)!=(E|0)&&je(27621,27538,261,27548),g=Ei(n,l)|0,m=Ei(A,p)|0,(g|0)==7|(m|0)==7)m=5;else if(ne[22e3+(g*7|0)+m>>0]|0)m=1;else if(g=a[21168+(g*28|0)+(m<<2)>>2]|0,(g|0)>0){b=Y+4|0,m=0;do Np(b),m=m+1|0;while((m|0)!=(g|0));U=51}else U=51;else U=51;while(!1);return(U|0)==51&&(m=Y+4|0,a[h>>2]=a[m>>2],a[h+4>>2]=a[m+4>>2],a[h+8>>2]=a[m+8>>2],m=0),Y=m,x=H,Y|0}function w3(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0;if(U=x,x=x+48|0,E=U+36|0,g=U+24|0,b=U+12|0,S=U,h=oe(n|0,l|0,52)|0,P()|0,h=h&15,D=oe(n|0,l|0,45)|0,P()|0,D=D&127,D>>>0>121)return p=5,x=U,p|0;if(T=Vt(D)|0,fe(h|0,0,52)|0,G=P()|0|134225919,m=p,a[m>>2]=-1,a[m+4>>2]=G,!h)return h=Fp(A)|0,(h|0)==7||(h=Dy(D,h)|0,(h|0)==127)?(G=1,x=U,G|0):(F=fe(h|0,0,45)|0,R=P()|0,D=p,R=a[D+4>>2]&-1040385|R,G=p,a[G>>2]=a[D>>2]|F,a[G+4>>2]=R,G=0,x=U,G|0);for(a[E>>2]=a[A>>2],a[E+4>>2]=a[A+4>>2],a[E+8>>2]=a[A+8>>2],A=h;;){if(m=A,A=A+-1|0,a[g>>2]=a[E>>2],a[g+4>>2]=a[E+4>>2],a[g+8>>2]=a[E+8>>2],ss(m)|0){if(h=ik(E)|0,h|0){A=13;break}a[b>>2]=a[E>>2],a[b+4>>2]=a[E+4>>2],a[b+8>>2]=a[E+8>>2],Rp(b)}else{if(h=sk(E)|0,h|0){A=13;break}a[b>>2]=a[E>>2],a[b+4>>2]=a[E+4>>2],a[b+8>>2]=a[E+8>>2],Ma(b)}if(jy(g,b,S),Zr(S),h=p,H=a[h>>2]|0,h=a[h+4>>2]|0,Q=(15-m|0)*3|0,Y=fe(7,0,Q|0)|0,h=h&~(P()|0),Q=fe(Fp(S)|0,0,Q|0)|0,h=P()|0|h,G=p,a[G>>2]=Q|H&~Y,a[G+4>>2]=h,(m|0)<=1){A=14;break}}e:do if((A|0)!=13&&(A|0)==14)if((a[E>>2]|0)<=1&&(a[E+4>>2]|0)<=1&&(a[E+8>>2]|0)<=1){A=Fp(E)|0,h=Dy(D,A)|0,(h|0)==127?S=0:S=Vt(h)|0;t:do if(A){if(T){if(h=Ei(n,l)|0,(h|0)==7){h=5;break e}if(m=a[21376+(h*28|0)+(A<<2)>>2]|0,(m|0)>0){h=A,A=0;do h=Ca(h)|0,A=A+1|0;while((A|0)!=(m|0))}else h=A;if((h|0)==1){h=9;break e}A=Dy(D,h)|0,(A|0)==127&&je(27648,27538,411,27678),Vt(A)|0?je(27693,27538,412,27678):(R=A,F=m,O=h)}else R=h,F=0,O=A;if(b=a[4272+(D*28|0)+(O<<2)>>2]|0,(b|0)<=-1&&je(27724,27538,419,27678),!S){if((F|0)<0){h=5;break e}if(F|0){m=p,h=0,A=a[m>>2]|0,m=a[m+4>>2]|0;do A=ka(A,m)|0,m=P()|0,Q=p,a[Q>>2]=A,a[Q+4>>2]=m,h=h+1|0;while((h|0)<(F|0))}if((b|0)<=0){h=R,A=58;break}for(m=p,h=0,A=a[m>>2]|0,m=a[m+4>>2]|0;;)if(A=ka(A,m)|0,m=P()|0,Q=p,a[Q>>2]=A,a[Q+4>>2]=m,h=h+1|0,(h|0)==(b|0)){h=R,A=58;break t}}if(g=Fy(R,D)|0,(g|0)==7&&je(27514,27538,428,27678),h=p,A=a[h>>2]|0,h=a[h+4>>2]|0,(b|0)>0){m=0;do A=ka(A,h)|0,h=P()|0,Q=p,a[Q>>2]=A,a[Q+4>>2]=h,m=m+1|0;while((m|0)!=(b|0))}if(h=Ei(A,h)|0,(h|0)==7&&je(27795,27538,440,27678),A=Py(R)|0,A=a[(A?21792:21584)+(g*28|0)+(h<<2)>>2]|0,(A|0)<0&&je(27795,27538,454,27678),!A)h=R,A=58;else{g=p,h=0,m=a[g>>2]|0,g=a[g+4>>2]|0;do m=qy(m,g)|0,g=P()|0,Q=p,a[Q>>2]=m,a[Q+4>>2]=g,h=h+1|0;while((h|0)<(A|0));h=R,A=58}}else if((T|0)!=0&(S|0)!=0){if(A=Ei(n,l)|0,m=p,m=Ei(a[m>>2]|0,a[m+4>>2]|0)|0,(A|0)==7|(m|0)==7){h=5;break e}if(m=a[21376+(A*28|0)+(m<<2)>>2]|0,(m|0)<0){h=5;break e}if(!m)A=59;else{b=p,A=0,g=a[b>>2]|0,b=a[b+4>>2]|0;do g=ka(g,b)|0,b=P()|0,Q=p,a[Q>>2]=g,a[Q+4>>2]=b,A=A+1|0;while((A|0)<(m|0));A=58}}else A=58;while(!1);if((A|0)==58&&S&&(A=59),(A|0)==59&&(Q=p,(Ei(a[Q>>2]|0,a[Q+4>>2]|0)|0)==1)){h=9;break}Q=p,Y=a[Q>>2]|0,Q=a[Q+4>>2]&-1040385,H=fe(h|0,0,45)|0,Q=Q|(P()|0),h=p,a[h>>2]=Y|H,a[h+4>>2]=Q,h=0}else h=1;while(!1);return Q=h,x=U,Q|0}function Hk(n,l,A,p,h,m){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0,m=m|0;var g=0,b=0;return b=x,x=x+16|0,g=b,h?n=15:(n=Fn(n,l,A,p,g)|0,n||(ok(g,m),n=0)),x=b,n|0}function Jk(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0;return g=x,x=x+16|0,m=g,p?A=15:(A=ak(A,m)|0,A||(A=w3(n,l,m,h)|0)),x=g,A|0}function Zk(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0;return S=x,x=x+32|0,g=S+12|0,b=S,m=Fn(n,l,n,l,g)|0,m|0?(b=m,x=S,b|0):(n=Fn(n,l,A,p,b)|0,n|0?(b=n,x=S,b|0):(g=Ly(g,b)|0,b=h,a[b>>2]=g,a[b+4>>2]=((g|0)<0)<<31>>31,b=0,x=S,b|0))}function Yk(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0;return S=x,x=x+32|0,g=S+12|0,b=S,m=Fn(n,l,n,l,g)|0,!m&&(m=Fn(n,l,A,p,b)|0,!m)?(p=Ly(g,b)|0,p=Oe(p|0,((p|0)<0)<<31>>31|0,1,0)|0,g=P()|0,b=h,a[b>>2]=p,a[b+4>>2]=g,b=0,x=S,b|0):(b=m,x=S,b|0)}function Kk(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0,Ie=0,_e=0,Qe=0;if(_e=x,x=x+48|0,de=_e+24|0,g=_e+12|0,Ie=_e,m=Fn(n,l,n,l,de)|0,!m&&(m=Fn(n,l,A,p,g)|0,!m)){Q=Ly(de,g)|0,z=((Q|0)<0)<<31>>31,a[de>>2]=0,a[de+4>>2]=0,a[de+8>>2]=0,a[g>>2]=0,a[g+4>>2]=0,a[g+8>>2]=0,Fn(n,l,n,l,de)|0&&je(27795,27538,692,27747),Fn(n,l,A,p,g)|0&&je(27795,27538,697,27747),a3(de),a3(g),T=(Q|0)==0?0:1/+(Q|0),A=a[de>>2]|0,U=T*+((a[g>>2]|0)-A|0),G=de+4|0,p=a[G>>2]|0,Y=T*+((a[g+4>>2]|0)-p|0),H=de+8|0,m=a[H>>2]|0,T=T*+((a[g+8>>2]|0)-m|0),a[Ie>>2]=A,O=Ie+4|0,a[O>>2]=p,D=Ie+8|0,a[D>>2]=m;e:do if((Q|0)<0)m=0;else for(F=0,R=0;;){S=+(R>>>0)+4294967296*+(F|0),Qe=U*S+ +(A|0),b=Y*S+ +(p|0),S=T*S+ +(m|0),A=~~+Vp(+Qe),g=~~+Vp(+b),m=~~+Vp(+S),Qe=+Ye(+(+(A|0)-Qe)),b=+Ye(+(+(g|0)-b)),S=+Ye(+(+(m|0)-S));do if(Qe>b&Qe>S)A=0-(g+m)|0,p=g;else if(E=0-A|0,b>S){p=E-m|0;break}else{p=g,m=E-g|0;break}while(!1);if(a[Ie>>2]=A,a[O>>2]=p,a[D>>2]=m,lk(Ie),m=w3(n,l,Ie,h+(R<<3)|0)|0,m|0)break e;if(!((F|0)<(z|0)|(F|0)==(z|0)&R>>>0<Q>>>0)){m=0;break e}A=Oe(R|0,F|0,1,0)|0,p=P()|0,F=p,R=A,A=a[de>>2]|0,p=a[G>>2]|0,m=a[H>>2]|0}while(!1);return Ie=m,x=_e,Ie|0}return Ie=m,x=_e,Ie|0}function go(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0;if((A|0)==0&(p|0)==0)return h=0,m=1,ze(h|0),m|0;m=n,h=l,n=1,l=0;do g=(A&1|0)==0&!0,n=Or((g?1:m)|0,(g?0:h)|0,n|0,l|0)|0,l=P()|0,A=k3(A|0,p|0,1)|0,p=P()|0,m=Or(m|0,h|0,m|0,h|0)|0,h=P()|0;while(!((A|0)==0&(p|0)==0));return ze(l|0),n|0}function Xy(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0;b=x,x=x+16|0,m=b,g=oe(n|0,l|0,52)|0,P()|0,g=g&15;do if(g){if(h=Oa(n,l,m)|0,!h){E=+M[m>>3],S=1/+bt(+E),T=+M[25968+(g<<3)>>3],M[A>>3]=E+T,M[A+8>>3]=E-T,E=+M[m+8>>3],S=T*S,M[A+16>>3]=S+E,M[A+24>>3]=E-S;break}return g=h,x=b,g|0}else{if(h=oe(n|0,l|0,45)|0,P()|0,h=h&127,h>>>0>121)return g=5,x=b,g|0;m=22064+(h<<5)|0,a[A>>2]=a[m>>2],a[A+4>>2]=a[m+4>>2],a[A+8>>2]=a[m+8>>2],a[A+12>>2]=a[m+12>>2],a[A+16>>2]=a[m+16>>2],a[A+20>>2]=a[m+20>>2],a[A+24>>2]=a[m+24>>2],a[A+28>>2]=a[m+28>>2];break}while(!1);return ek(A,p?1.4:1.1),p=26096+(g<<3)|0,(a[p>>2]|0)==(n|0)&&(a[p+4>>2]|0)==(l|0)&&(M[A>>3]=1.5707963267948966),g=26224+(g<<3)|0,(a[g>>2]|0)==(n|0)&&(a[g+4>>2]|0)==(l|0)&&(M[A+8>>3]=-1.5707963267948966),+M[A>>3]!=1.5707963267948966&&+M[A+8>>3]!=-1.5707963267948966?(g=0,x=b,g|0):(M[A+16>>3]=3.141592653589793,M[A+24>>3]=-3.141592653589793,g=0,x=b,g|0)}function Xk(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0;E=x,x=x+48|0,g=E+32|0,m=E+40|0,b=E,Vy(g,0,0,0),S=a[g>>2]|0,g=a[g+4>>2]|0;do if(A>>>0<=15){if(h=c0(p)|0,h|0){p=b,a[p>>2]=0,a[p+4>>2]=0,a[b+8>>2]=h,a[b+12>>2]=-1,p=b+16|0,S=b+29|0,a[p>>2]=0,a[p+4>>2]=0,a[p+8>>2]=0,ne[p+12>>0]=0,ne[S>>0]=ne[m>>0]|0,ne[S+1>>0]=ne[m+1>>0]|0,ne[S+2>>0]=ne[m+2>>0]|0;break}if(h=xi((a[l+8>>2]|0)+1|0,32)|0,h){em(l,h),T=b,a[T>>2]=S,a[T+4>>2]=g,a[b+8>>2]=0,a[b+12>>2]=A,a[b+16>>2]=p,a[b+20>>2]=l,a[b+24>>2]=h,ne[b+28>>0]=0,S=b+29|0,ne[S>>0]=ne[m>>0]|0,ne[S+1>>0]=ne[m+1>>0]|0,ne[S+2>>0]=ne[m+2>>0]|0;break}else{p=b,a[p>>2]=0,a[p+4>>2]=0,a[b+8>>2]=13,a[b+12>>2]=-1,p=b+16|0,S=b+29|0,a[p>>2]=0,a[p+4>>2]=0,a[p+8>>2]=0,ne[p+12>>0]=0,ne[S>>0]=ne[m>>0]|0,ne[S+1>>0]=ne[m+1>>0]|0,ne[S+2>>0]=ne[m+2>>0]|0;break}}else S=b,a[S>>2]=0,a[S+4>>2]=0,a[b+8>>2]=4,a[b+12>>2]=-1,S=b+16|0,T=b+29|0,a[S>>2]=0,a[S+4>>2]=0,a[S+8>>2]=0,ne[S+12>>0]=0,ne[T>>0]=ne[m>>0]|0,ne[T+1>>0]=ne[m+1>>0]|0,ne[T+2>>0]=ne[m+2>>0]|0;while(!1);Bp(b),a[n>>2]=a[b>>2],a[n+4>>2]=a[b+4>>2],a[n+8>>2]=a[b+8>>2],a[n+12>>2]=a[b+12>>2],a[n+16>>2]=a[b+16>>2],a[n+20>>2]=a[b+20>>2],a[n+24>>2]=a[b+24>>2],a[n+28>>2]=a[b+28>>2],x=E}function Bp(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0;if(z=x,x=x+336|0,F=z+168|0,R=z,p=n,A=a[p>>2]|0,p=a[p+4>>2]|0,(A|0)==0&(p|0)==0){x=z;return}if(l=n+28|0,ne[l>>0]|0?(A=b3(A,p)|0,p=P()|0):ne[l>>0]=1,Q=n+20|0,!(a[a[Q>>2]>>2]|0)){l=n+24|0,A=a[l>>2]|0,A|0&&De(A),H=n,a[H>>2]=0,a[H+4>>2]=0,a[n+8>>2]=0,a[Q>>2]=0,a[n+12>>2]=-1,a[n+16>>2]=0,a[l>>2]=0,x=z;return}H=n+16|0,l=a[H>>2]|0,h=l&15;e:do if((A|0)==0&(p|0)==0)Y=n+24|0;else{U=n+12|0,O=(h|0)==3,T=l&255,S=(h|1|0)==3,D=n+24|0,E=(h+-1|0)>>>0<3,g=(h|2|0)==3,b=R+8|0;t:for(;;){if(m=oe(A|0,p|0,52)|0,P()|0,m=m&15,(m|0)==(a[U>>2]|0)){switch(T&15){case 0:case 2:case 3:{if(h=Oa(A,p,F)|0,h|0){G=15;break t}if(tm(a[Q>>2]|0,a[D>>2]|0,F)|0){G=19;break t}break}}if(S&&(h=a[(a[Q>>2]|0)+4>>2]|0,a[F>>2]=a[h>>2],a[F+4>>2]=a[h+4>>2],a[F+8>>2]=a[h+8>>2],a[F+12>>2]=a[h+12>>2],Ry(26832,F)|0)){if(Wy(a[(a[Q>>2]|0)+4>>2]|0,m,R)|0){G=25;break}if(h=R,(a[h>>2]|0)==(A|0)&&(a[h+4>>2]|0)==(p|0)){G=29;break}}if(E){if(h=Vl(A,p,F)|0,h|0){G=32;break}if(Xy(A,p,R,0)|0){G=36;break}if(g&&S3(a[Q>>2]|0,a[D>>2]|0,F,R)|0){G=42;break}if(S&&_3(a[Q>>2]|0,a[D>>2]|0,F,R)|0){G=42;break}}if(O){if(l=Xy(A,p,F,1)|0,h=a[D>>2]|0,l|0){G=45;break}if(Ny(h,F)|0){if(Xv(R,F),Kv(F,a[D>>2]|0)|0){G=53;break}if(tm(a[Q>>2]|0,a[D>>2]|0,b)|0){G=53;break}if(_3(a[Q>>2]|0,a[D>>2]|0,R,F)|0){G=53;break}}}}do if((m|0)<(a[U>>2]|0)){if(l=Xy(A,p,F,1)|0,h=a[D>>2]|0,l|0){G=58;break t}if(!(Ny(h,F)|0)){G=73;break}if(Kv(a[D>>2]|0,F)|0&&(Xv(R,F),S3(a[Q>>2]|0,a[D>>2]|0,R,F)|0)){G=65;break t}if(A=p3(A,p,m+1|0,R)|0,A|0){G=67;break t}p=R,A=a[p>>2]|0,p=a[p+4>>2]|0}else G=73;while(!1);if((G|0)==73&&(G=0,A=b3(A,p)|0,p=P()|0),(A|0)==0&(p|0)==0){Y=D;break e}}switch(G|0){case 15:{l=a[D>>2]|0,l|0&&De(l),G=n,a[G>>2]=0,a[G+4>>2]=0,a[Q>>2]=0,a[U>>2]=-1,a[H>>2]=0,a[D>>2]=0,a[n+8>>2]=h,G=20;break}case 19:{a[n>>2]=A,a[n+4>>2]=p,G=20;break}case 25:{je(27795,27761,470,27772);break}case 29:{a[n>>2]=A,a[n+4>>2]=p,x=z;return}case 32:{l=a[D>>2]|0,l|0&&De(l),Y=n,a[Y>>2]=0,a[Y+4>>2]=0,a[Q>>2]=0,a[U>>2]=-1,a[H>>2]=0,a[D>>2]=0,a[n+8>>2]=h,x=z;return}case 36:{je(27795,27761,493,27772);break}case 42:{a[n>>2]=A,a[n+4>>2]=p,x=z;return}case 45:{h|0&&De(h),G=n,a[G>>2]=0,a[G+4>>2]=0,a[Q>>2]=0,a[U>>2]=-1,a[H>>2]=0,a[D>>2]=0,a[n+8>>2]=l,G=55;break}case 53:{a[n>>2]=A,a[n+4>>2]=p,G=55;break}case 58:{h|0&&De(h),G=n,a[G>>2]=0,a[G+4>>2]=0,a[Q>>2]=0,a[U>>2]=-1,a[H>>2]=0,a[D>>2]=0,a[n+8>>2]=l,G=71;break}case 65:{a[n>>2]=A,a[n+4>>2]=p,G=71;break}case 67:{l=a[D>>2]|0,l|0&&De(l),Y=n,a[Y>>2]=0,a[Y+4>>2]=0,a[Q>>2]=0,a[U>>2]=-1,a[H>>2]=0,a[D>>2]=0,a[n+8>>2]=A,x=z;return}}if((G|0)==20){x=z;return}else if((G|0)==55){x=z;return}else if((G|0)==71){x=z;return}}while(!1);l=a[Y>>2]|0,l|0&&De(l),G=n,a[G>>2]=0,a[G+4>>2]=0,a[n+8>>2]=0,a[Q>>2]=0,a[n+12>>2]=-1,a[H>>2]=0,a[Y>>2]=0,x=z}function b3(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0;O=x,x=x+16|0,T=O,p=oe(n|0,l|0,52)|0,P()|0,p=p&15,A=oe(n|0,l|0,45)|0,P()|0;do if(p){for(;A=fe(p+4095|0,0,52)|0,h=P()|0|l&-15728641,m=(15-p|0)*3|0,g=fe(7,0,m|0)|0,b=P()|0,A=A|n|g,h=h|b,S=oe(n|0,l|0,m|0)|0,P()|0,S=S&7,p=p+-1|0,!(S>>>0<6);)if(p)l=h,n=A;else{E=4;break}if((E|0)==4){A=oe(A|0,h|0,45)|0,P()|0;break}return T=(S|0)==0&(Dt(A,h)|0)!=0,T=fe((T?2:1)+S|0,0,m|0)|0,E=P()|0|l&~b,T=T|n&~g,ze(E|0),x=O,T|0}while(!1);return A=A&127,A>>>0>120?(E=0,T=0,ze(E|0),x=O,T|0):(Vy(T,0,A+1|0,0),E=a[T+4>>2]|0,T=a[T>>2]|0,ze(E|0),x=O,T|0)}function e7(n,l,A,p,h,m){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0,m=m|0;var g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0;G=x,x=x+160|0,O=G+80|0,b=G+64|0,D=G+112|0,U=G,Xk(O,n,l,A),E=O,Zy(b,a[E>>2]|0,a[E+4>>2]|0,l),E=b,S=a[E>>2]|0,E=a[E+4>>2]|0,g=a[O+8>>2]|0,F=D+4|0,a[F>>2]=a[O>>2],a[F+4>>2]=a[O+4>>2],a[F+8>>2]=a[O+8>>2],a[F+12>>2]=a[O+12>>2],a[F+16>>2]=a[O+16>>2],a[F+20>>2]=a[O+20>>2],a[F+24>>2]=a[O+24>>2],a[F+28>>2]=a[O+28>>2],F=U,a[F>>2]=S,a[F+4>>2]=E,F=U+8|0,a[F>>2]=g,n=U+12|0,l=D,A=n+36|0;do a[n>>2]=a[l>>2],n=n+4|0,l=l+4|0;while((n|0)<(A|0));if(D=U+48|0,a[D>>2]=a[b>>2],a[D+4>>2]=a[b+4>>2],a[D+8>>2]=a[b+8>>2],a[D+12>>2]=a[b+12>>2],(S|0)==0&(E|0)==0)return U=g,x=G,U|0;A=U+16|0,T=U+24|0,O=U+28|0,g=0,b=0,l=S,n=E;do{if(!((g|0)<(h|0)|(g|0)==(h|0)&b>>>0<p>>>0)){R=4;break}if(E=b,b=Oe(b|0,g|0,1,0)|0,g=P()|0,E=m+(E<<3)|0,a[E>>2]=l,a[E+4>>2]=n,Yy(D),n=D,l=a[n>>2]|0,n=a[n+4>>2]|0,(l|0)==0&(n|0)==0){if(Bp(A),l=A,n=a[l>>2]|0,l=a[l+4>>2]|0,(n|0)==0&(l|0)==0){R=10;break}h3(n,l,a[O>>2]|0,D),n=D,l=a[n>>2]|0,n=a[n+4>>2]|0}E=U,a[E>>2]=l,a[E+4>>2]=n}while(!((l|0)==0&(n|0)==0));return(R|0)==4?(n=U+40|0,l=a[n>>2]|0,l|0&&De(l),R=U+16|0,a[R>>2]=0,a[R+4>>2]=0,a[T>>2]=0,a[U+36>>2]=0,a[O>>2]=-1,a[U+32>>2]=0,a[n>>2]=0,h3(0,0,0,D),a[U>>2]=0,a[U+4>>2]=0,a[F>>2]=0,U=14,x=G,U|0):((R|0)==10&&(a[U>>2]=0,a[U+4>>2]=0,a[F>>2]=a[T>>2]),U=a[F>>2]|0,x=G,U|0)}function t7(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0;if(O=x,x=x+48|0,S=O+32|0,b=O+40|0,E=O,!(a[n>>2]|0))return T=p,a[T>>2]=0,a[T+4>>2]=0,T=0,x=O,T|0;Vy(S,0,0,0),g=S,h=a[g>>2]|0,g=a[g+4>>2]|0;do if(l>>>0>15)T=E,a[T>>2]=0,a[T+4>>2]=0,a[E+8>>2]=4,a[E+12>>2]=-1,T=E+16|0,A=E+29|0,a[T>>2]=0,a[T+4>>2]=0,a[T+8>>2]=0,ne[T+12>>0]=0,ne[A>>0]=ne[b>>0]|0,ne[A+1>>0]=ne[b+1>>0]|0,ne[A+2>>0]=ne[b+2>>0]|0,A=4,T=9;else{if(A=c0(A)|0,A|0){S=E,a[S>>2]=0,a[S+4>>2]=0,a[E+8>>2]=A,a[E+12>>2]=-1,S=E+16|0,T=E+29|0,a[S>>2]=0,a[S+4>>2]=0,a[S+8>>2]=0,ne[S+12>>0]=0,ne[T>>0]=ne[b>>0]|0,ne[T+1>>0]=ne[b+1>>0]|0,ne[T+2>>0]=ne[b+2>>0]|0,T=9;break}if(A=xi((a[n+8>>2]|0)+1|0,32)|0,!A){T=E,a[T>>2]=0,a[T+4>>2]=0,a[E+8>>2]=13,a[E+12>>2]=-1,T=E+16|0,A=E+29|0,a[T>>2]=0,a[T+4>>2]=0,a[T+8>>2]=0,ne[T+12>>0]=0,ne[A>>0]=ne[b>>0]|0,ne[A+1>>0]=ne[b+1>>0]|0,ne[A+2>>0]=ne[b+2>>0]|0,A=13,T=9;break}em(n,A),F=E,a[F>>2]=h,a[F+4>>2]=g,g=E+8|0,a[g>>2]=0,a[E+12>>2]=l,a[E+20>>2]=n,a[E+24>>2]=A,ne[E+28>>0]=0,h=E+29|0,ne[h>>0]=ne[b>>0]|0,ne[h+1>>0]=ne[b+1>>0]|0,ne[h+2>>0]=ne[b+2>>0]|0,a[E+16>>2]=3,D=+YC(A),D=D*+ZC(A),m=+Ye(+ +M[A>>3]),m=D/+bt(+ +zp(+m,+ +Ye(+ +M[A+8>>3])))*6371.007180918475*6371.007180918475,h=E+12|0,A=a[h>>2]|0;e:do if((A|0)>0)do{if(f3(A+-1|0,S)|0,!(m/+M[S>>3]>10))break e;F=a[h>>2]|0,A=F+-1|0,a[h>>2]=A}while((F|0)>1);while(!1);if(Bp(E),h=p,a[h>>2]=0,a[h+4>>2]=0,h=E,A=a[h>>2]|0,h=a[h+4>>2]|0,!((A|0)==0&(h|0)==0))do a0(A,h,l,S)|0,b=S,n=p,b=Oe(a[n>>2]|0,a[n+4>>2]|0,a[b>>2]|0,a[b+4>>2]|0)|0,n=P()|0,F=p,a[F>>2]=b,a[F+4>>2]=n,Bp(E),F=E,A=a[F>>2]|0,h=a[F+4>>2]|0;while(!((A|0)==0&(h|0)==0));A=a[g>>2]|0}while(!1);return F=A,x=O,F|0}function u0(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0;if(!(Ry(l,A)|0)||(l=Yv(l)|0,p=+M[A>>3],h=+M[A+8>>3],h=l&h<0?h+6.283185307179586:h,D=a[n>>2]|0,(D|0)<=0))return D=0,D|0;if(O=a[n+4>>2]|0,l){l=0,T=h,A=-1,n=0;e:for(;;){for(E=n;g=+M[O+(E<<4)>>3],h=+M[O+(E<<4)+8>>3],n=(A+2|0)%(D|0)|0,m=+M[O+(n<<4)>>3],b=+M[O+(n<<4)+8>>3],g>m?(S=g,g=b):(S=m,m=g,g=h,h=b),p=p==m|p==S?p+2220446049250313e-31:p,!!(p<m|p>S);)if(A=E+1|0,(A|0)>=(D|0)){A=22;break e}else n=E,E=A,A=n;if(b=g<0?g+6.283185307179586:g,g=h<0?h+6.283185307179586:h,T=b==T|g==T?T+-2220446049250313e-31:T,S=b+(g-b)*((p-m)/(S-m)),(S<0?S+6.283185307179586:S)>T&&(l=l^1),n=E+1|0,(n|0)>=(D|0)){A=22;break}else A=E}if((A|0)==22)return l|0}else{l=0,T=h,A=-1,n=0;e:for(;;){for(E=n;g=+M[O+(E<<4)>>3],h=+M[O+(E<<4)+8>>3],n=(A+2|0)%(D|0)|0,m=+M[O+(n<<4)>>3],b=+M[O+(n<<4)+8>>3],g>m?(S=g,g=b):(S=m,m=g,g=h,h=b),p=p==m|p==S?p+2220446049250313e-31:p,!!(p<m|p>S);)if(A=E+1|0,(A|0)>=(D|0)){A=22;break e}else n=E,E=A,A=n;if(T=g==T|h==T?T+-2220446049250313e-31:T,g+(h-g)*((p-m)/(S-m))>T&&(l=l^1),n=E+1|0,(n|0)>=(D|0)){A=22;break}else A=E}if((A|0)==22)return l|0}return 0}function v3(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0;if(R=a[n>>2]|0,!R){a[l>>2]=0,a[l+4>>2]=0,a[l+8>>2]=0,a[l+12>>2]=0,a[l+16>>2]=0,a[l+20>>2]=0,a[l+24>>2]=0,a[l+28>>2]=0;return}if(U=l+8|0,M[U>>3]=17976931348623157e292,G=l+24|0,M[G>>3]=17976931348623157e292,M[l>>3]=-17976931348623157e292,Y=l+16|0,M[Y>>3]=-17976931348623157e292,!((R|0)<=0)){for(D=a[n+4>>2]|0,E=17976931348623157e292,T=-17976931348623157e292,O=0,n=-1,m=17976931348623157e292,g=17976931348623157e292,S=-17976931348623157e292,p=-17976931348623157e292,F=0;A=+M[D+(F<<4)>>3],b=+M[D+(F<<4)+8>>3],n=n+2|0,h=+M[D+(((n|0)==(R|0)?0:n)<<4)+8>>3],A<m&&(M[U>>3]=A,m=A),b<g&&(M[G>>3]=b,g=b),A>S?M[l>>3]=A:A=S,b>p&&(M[Y>>3]=b,p=b),E=b>0&b<E?b:E,T=b<0&b>T?b:T,O=O|+Ye(+(b-h))>3.141592653589793,n=F+1|0,(n|0)!=(R|0);)H=F,S=A,F=n,n=H;O&&(M[Y>>3]=T,M[G>>3]=E)}}function c0(n){return n=n|0,(n>>>0<4?0:15)|0}function em(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0,Ie=0,_e=0;if(R=a[n>>2]|0,R){if(U=l+8|0,M[U>>3]=17976931348623157e292,G=l+24|0,M[G>>3]=17976931348623157e292,M[l>>3]=-17976931348623157e292,Y=l+16|0,M[Y>>3]=-17976931348623157e292,(R|0)>0){for(h=a[n+4>>2]|0,D=17976931348623157e292,F=-17976931348623157e292,p=0,A=-1,S=17976931348623157e292,E=17976931348623157e292,O=-17976931348623157e292,g=-17976931348623157e292,H=0;m=+M[h+(H<<4)>>3],T=+M[h+(H<<4)+8>>3],Ie=A+2|0,b=+M[h+(((Ie|0)==(R|0)?0:Ie)<<4)+8>>3],m<S&&(M[U>>3]=m,S=m),T<E&&(M[G>>3]=T,E=T),m>O?M[l>>3]=m:m=O,T>g&&(M[Y>>3]=T,g=T),D=T>0&T<D?T:D,F=T<0&T>F?T:F,p=p|+Ye(+(T-b))>3.141592653589793,A=H+1|0,(A|0)!=(R|0);)Ie=H,O=m,H=A,A=Ie;p&&(M[Y>>3]=F,M[G>>3]=D)}}else a[l>>2]=0,a[l+4>>2]=0,a[l+8>>2]=0,a[l+12>>2]=0,a[l+16>>2]=0,a[l+20>>2]=0,a[l+24>>2]=0,a[l+28>>2]=0;if(Ie=n+8|0,A=a[Ie>>2]|0,!((A|0)<=0)){de=n+12|0,z=0;do if(h=a[de>>2]|0,p=z,z=z+1|0,G=l+(z<<5)|0,Y=a[h+(p<<3)>>2]|0,Y){if(H=l+(z<<5)+8|0,M[H>>3]=17976931348623157e292,n=l+(z<<5)+24|0,M[n>>3]=17976931348623157e292,M[G>>3]=-17976931348623157e292,Q=l+(z<<5)+16|0,M[Q>>3]=-17976931348623157e292,(Y|0)>0){for(R=a[h+(p<<3)+4>>2]|0,D=17976931348623157e292,F=-17976931348623157e292,h=0,p=-1,U=0,S=17976931348623157e292,E=17976931348623157e292,T=-17976931348623157e292,g=-17976931348623157e292;m=+M[R+(U<<4)>>3],O=+M[R+(U<<4)+8>>3],p=p+2|0,b=+M[R+(((p|0)==(Y|0)?0:p)<<4)+8>>3],m<S&&(M[H>>3]=m,S=m),O<E&&(M[n>>3]=O,E=O),m>T?M[G>>3]=m:m=T,O>g&&(M[Q>>3]=O,g=O),D=O>0&O<D?O:D,F=O<0&O>F?O:F,h=h|+Ye(+(O-b))>3.141592653589793,p=U+1|0,(p|0)!=(Y|0);)_e=U,U=p,T=m,p=_e;h&&(M[Q>>3]=F,M[n>>3]=D)}}else a[G>>2]=0,a[G+4>>2]=0,a[G+8>>2]=0,a[G+12>>2]=0,a[G+16>>2]=0,a[G+20>>2]=0,a[G+24>>2]=0,a[G+28>>2]=0,A=a[Ie>>2]|0;while((z|0)<(A|0))}}function tm(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0;if(!(u0(n,l,A)|0))return h=0,h|0;if(h=n+8|0,(a[h>>2]|0)<=0)return h=1,h|0;for(p=n+12|0,n=0;;){if(m=n,n=n+1|0,u0((a[p>>2]|0)+(m<<3)|0,l+(n<<5)|0,A)|0){n=0,p=6;break}if((n|0)>=(a[h>>2]|0)){n=1,p=6;break}}return(p|0)==6?n|0:0}function S3(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0;if(E=x,x=x+16|0,b=E,g=A+8|0,!(u0(n,l,g)|0))return S=0,x=E,S|0;S=n+8|0;e:do if((a[S>>2]|0)>0){for(m=n+12|0,h=0;;){if(T=h,h=h+1|0,u0((a[m>>2]|0)+(T<<3)|0,l+(h<<5)|0,g)|0){h=0;break}if((h|0)>=(a[S>>2]|0))break e}return x=E,h|0}while(!1);if(Up(n,l,A,p)|0)return T=0,x=E,T|0;a[b>>2]=a[A>>2],a[b+4>>2]=g,h=a[S>>2]|0;e:do if((h|0)>0)for(n=n+12|0,g=0,m=h;;){if(h=a[n>>2]|0,(a[h+(g<<3)>>2]|0)>0){if(u0(b,p,a[h+(g<<3)+4>>2]|0)|0){h=0;break e}if(h=g+1|0,Up((a[n>>2]|0)+(g<<3)|0,l+(h<<5)|0,A,p)|0){h=0;break e}m=a[S>>2]|0}else h=g+1|0;if((h|0)<(m|0))g=h;else{h=1;break}}else h=1;while(!1);return T=h,x=E,T|0}function Up(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0,Ie=0,_e=0,Qe=0;if(Ie=x,x=x+176|0,H=Ie+172|0,h=Ie+168|0,Q=Ie,!(Ny(l,p)|0))return n=0,x=Ie,n|0;if(KC(l,p,H,h),Wl(Q|0,A|0,168)|0,(a[A>>2]|0)>0){l=0;do _e=Q+8+(l<<4)+8|0,Y=+ji(+M[_e>>3],a[h>>2]|0),M[_e>>3]=Y,l=l+1|0;while((l|0)<(a[A>>2]|0))}U=+M[p>>3],G=+M[p+8>>3],Y=+ji(+M[p+16>>3],a[h>>2]|0),F=+ji(+M[p+24>>3],a[h>>2]|0);e:do if((a[n>>2]|0)>0){if(p=n+4|0,h=a[Q>>2]|0,(h|0)<=0){for(l=0;;)if(l=l+1|0,(l|0)>=(a[n>>2]|0)){l=0;break e}}for(A=0;;){if(l=a[p>>2]|0,D=+M[l+(A<<4)>>3],R=+ji(+M[l+(A<<4)+8>>3],a[H>>2]|0),l=a[p>>2]|0,A=A+1|0,_e=(A|0)%(a[n>>2]|0)|0,m=+M[l+(_e<<4)>>3],g=+ji(+M[l+(_e<<4)+8>>3],a[H>>2]|0),!(D>=U)|!(m>=U)&&!(D<=G)|!(m<=G)&&!(R<=F)|!(g<=F)&&!(R>=Y)|!(g>=Y)){O=m-D,E=g-R,l=0;do if(Qe=l,l=l+1|0,_e=(l|0)==(h|0)?0:l,m=+M[Q+8+(Qe<<4)+8>>3],g=+M[Q+8+(_e<<4)+8>>3]-m,b=+M[Q+8+(Qe<<4)>>3],S=+M[Q+8+(_e<<4)>>3]-b,T=O*g-E*S,T!=0&&(z=R-m,de=D-b,S=(z*S-g*de)/T,!(S<0|S>1))&&(T=(O*z-E*de)/T,T>=0&T<=1)){l=1;break e}while((l|0)<(h|0))}if((A|0)>=(a[n>>2]|0)){l=0;break}}}else l=0;while(!1);return Qe=l,x=Ie,Qe|0}function _3(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0;if(Up(n,l,A,p)|0)return m=1,m|0;if(m=n+8|0,(a[m>>2]|0)<=0)return m=0,m|0;for(h=n+12|0,n=0;;){if(g=n,n=n+1|0,Up((a[h>>2]|0)+(g<<3)|0,l+(n<<5)|0,A,p)|0){n=1,h=6;break}if((n|0)>=(a[m>>2]|0)){n=0,h=6;break}}return(h|0)==6?n|0:0}function r7(){return 8}function i7(){return 16}function s7(){return 168}function n7(){return 8}function o7(){return 16}function a7(){return 12}function l7(){return 8}function A7(n){return n=n|0,+(+((a[n>>2]|0)>>>0)+4294967296*+(a[n+4>>2]|0))}function u7(n){n=n|0;var l=0,A=0;return A=+M[n>>3],l=+M[n+8>>3],+ +ht(+(A*A+l*l))}function E3(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0;E=+M[n>>3],S=+M[l>>3]-E,b=+M[n+8>>3],g=+M[l+8>>3]-b,O=+M[A>>3],m=+M[p>>3]-O,D=+M[A+8>>3],T=+M[p+8>>3]-D,m=(m*(b-D)-(E-O)*T)/(S*T-g*m),M[h>>3]=E+S*m,M[h+8>>3]=b+g*m}function x3(n,l){return n=n|0,l=l|0,+Ye(+(+M[n>>3]-+M[l>>3]))<11920928955078125e-23?(l=+Ye(+(+M[n+8>>3]-+M[l+8>>3]))<11920928955078125e-23,l|0):(l=0,l|0)}function dr(n,l){n=n|0,l=l|0;var A=0,p=0,h=0;return h=+M[n>>3]-+M[l>>3],p=+M[n+8>>3]-+M[l+8>>3],A=+M[n+16>>3]-+M[l+16>>3],+(h*h+p*p+A*A)}function c7(n,l){n=n|0,l=l|0;var A=0,p=0,h=0;A=+M[n>>3],p=+bt(+A),A=+Ke(+A),M[l+16>>3]=A,A=+M[n+8>>3],h=p*+bt(+A),M[l>>3]=h,A=p*+Ke(+A),M[l+8>>3]=A}function p7(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0;if(m=x,x=x+16|0,h=m,p=Dt(n,l)|0,(A+-1|0)>>>0>5||(p=(p|0)!=0,(A|0)==1&p))return h=-1,x=m,h|0;do if(p0(n,l,h)|0)p=-1;else if(p){p=((a[26352+(A<<2)>>2]|0)+5-(a[h>>2]|0)|0)%5|0;break}else{p=((a[26384+(A<<2)>>2]|0)+6-(a[h>>2]|0)|0)%6|0;break}while(!1);return h=p,x=m,h|0}function p0(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0,E=0;if(E=x,x=x+32|0,g=E+16|0,b=E,p=zl(n,l,g)|0,p|0)return A=p,x=E,A|0;m=u3(n,l)|0,S=Ei(n,l)|0,QC(m,b),p=WC(m,a[g>>2]|0)|0;e:do if(Vt(m)|0){do switch(m|0){case 4:{n=0;break}case 14:{n=1;break}case 24:{n=2;break}case 38:{n=3;break}case 49:{n=4;break}case 58:{n=5;break}case 63:{n=6;break}case 72:{n=7;break}case 83:{n=8;break}case 97:{n=9;break}case 107:{n=10;break}case 117:{n=11;break}default:{p=1;break e}}while(!1);if(h=a[26416+(n*24|0)+8>>2]|0,l=a[26416+(n*24|0)+16>>2]|0,n=a[g>>2]|0,(n|0)!=(a[b>>2]|0)&&(b=Py(m)|0,n=a[g>>2]|0,b|(n|0)==(l|0)&&(p=(p+1|0)%6|0)),(S|0)==3&(n|0)==(l|0)){p=(p+5|0)%6|0,h=22;break}(S|0)==5&(n|0)==(h|0)&&(p=(p+1|0)%6|0),h=22}else h=22;while(!1);return(h|0)==22&&(a[A>>2]=p,p=0),A=p,x=E,A|0}function ns(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0;if(Q=x,x=x+32|0,H=Q+24|0,G=Q+20|0,R=Q+8|0,F=Q+16|0,D=Q,S=(Dt(n,l)|0)==0,S=S?6:5,T=oe(n|0,l|0,52)|0,P()|0,T=T&15,S>>>0<=A>>>0)return p=2,x=Q,p|0;O=(T|0)==0,!O&&(U=fe(7,0,(T^15)*3|0)|0,(U&n|0)==0&((P()|0)&l|0)==0)?h=A:m=4;e:do if((m|0)==4){if(h=(Dt(n,l)|0)!=0,((h?4:5)|0)<(A|0)||p0(n,l,H)|0||(m=(a[H>>2]|0)+A|0,h?h=26704+(((m|0)%5|0)<<2)|0:h=26736+(((m|0)%6|0)<<2)|0,U=a[h>>2]|0,(U|0)==7))return p=1,x=Q,p|0;a[G>>2]=0,h=kr(n,l,U,G,R)|0;do if(!h){if(b=R,E=a[b>>2]|0,b=a[b+4>>2]|0,g=b>>>0<l>>>0|(b|0)==(l|0)&E>>>0<n>>>0,m=g?E:n,g=g?b:l,!O&&(O=fe(7,0,(T^15)*3|0)|0,(E&O|0)==0&(b&(P()|0)|0)==0))h=A;else{if(b=(A+-1+S|0)%(S|0)|0,h=Dt(n,l)|0,(b|0)<0&&je(27795,27797,246,27806),S=(h|0)!=0,((S?4:5)|0)<(b|0)&&je(27795,27797,246,27806),p0(n,l,H)|0&&je(27795,27797,246,27806),h=(a[H>>2]|0)+b|0,S?h=26704+(((h|0)%5|0)<<2)|0:h=26736+(((h|0)%6|0)<<2)|0,b=a[h>>2]|0,(b|0)==7&&je(27795,27797,246,27806),a[F>>2]=0,h=kr(n,l,b,F,D)|0,h|0)break;E=D,S=a[E>>2]|0,E=a[E+4>>2]|0;do if(E>>>0<g>>>0|(E|0)==(g|0)&S>>>0<m>>>0){if(Dt(S,E)|0?m=Oy(S,E,n,l)|0:m=a[26800+((((a[F>>2]|0)+(a[26768+(b<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,h=Dt(S,E)|0,(m+-1|0)>>>0>5){h=-1,m=S,g=E;break}if(h=(h|0)!=0,(m|0)==1&h){h=-1,m=S,g=E;break}do if(p0(S,E,H)|0)h=-1;else if(h){h=((a[26352+(m<<2)>>2]|0)+5-(a[H>>2]|0)|0)%5|0;break}else{h=((a[26384+(m<<2)>>2]|0)+6-(a[H>>2]|0)|0)%6|0;break}while(!1);m=S,g=E}else h=A;while(!1);b=R,E=a[b>>2]|0,b=a[b+4>>2]|0}if((m|0)==(E|0)&(g|0)==(b|0)){if(S=(Dt(E,b)|0)!=0,S?n=Oy(E,b,n,l)|0:n=a[26800+((((a[G>>2]|0)+(a[26768+(U<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,h=Dt(E,b)|0,(n+-1|0)>>>0<=5&&(Y=(h|0)!=0,!((n|0)==1&Y)))do if(p0(E,b,H)|0)h=-1;else if(Y){h=((a[26352+(n<<2)>>2]|0)+5-(a[H>>2]|0)|0)%5|0;break}else{h=((a[26384+(n<<2)>>2]|0)+6-(a[H>>2]|0)|0)%6|0;break}while(!1);else h=-1;h=h+1|0,h=(h|0)==6|S&(h|0)==5?0:h}l=g,n=m;break e}while(!1);return p=h,x=Q,p|0}while(!1);return Y=fe(h|0,0,56)|0,H=P()|0|l&-2130706433|536870912,a[p>>2]=Y|n,a[p+4>>2]=H,p=0,x=Q,p|0}function d7(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0;return m=(Dt(n,l)|0)==0,p=ns(n,l,0,A)|0,h=(p|0)==0,m?!h||(p=ns(n,l,1,A+8|0)|0,p|0)||(p=ns(n,l,2,A+16|0)|0,p|0)||(p=ns(n,l,3,A+24|0)|0,p|0)||(p=ns(n,l,4,A+32|0)|0,p)?(m=p,m|0):ns(n,l,5,A+40|0)|0:!h||(p=ns(n,l,1,A+8|0)|0,p|0)||(p=ns(n,l,2,A+16|0)|0,p|0)||(p=ns(n,l,3,A+24|0)|0,p|0)||(p=ns(n,l,4,A+32|0)|0,p|0)?(m=p,m|0):(m=A+40|0,a[m>>2]=0,a[m+4>>2]=0,m=0,m|0)}function h7(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0,b=0,S=0;return S=x,x=x+192|0,h=S,m=S+168|0,g=oe(n|0,l|0,56)|0,P()|0,g=g&7,b=l&-2130706433|134217728,p=zl(n,b,m)|0,p|0?(b=p,x=S,b|0):(l=oe(n|0,l|0,52)|0,P()|0,l=l&15,Dt(n,b)|0?By(m,l,g,1,h):Uy(m,l,g,1,h),b=h+8|0,a[A>>2]=a[b>>2],a[A+4>>2]=a[b+4>>2],a[A+8>>2]=a[b+8>>2],a[A+12>>2]=a[b+12>>2],b=0,x=S,b|0)}function f7(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0;return h=x,x=x+16|0,A=h,!(!0&(l&2013265920|0)==536870912)||(p=l&-2130706433|134217728,!(zy(n,p)|0))?(p=0,x=h,p|0):(m=oe(n|0,l|0,56)|0,P()|0,m=(ns(n,p,m&7,A)|0)==0,p=A,p=m&((a[p>>2]|0)==(n|0)?(a[p+4>>2]|0)==(l|0):0)&1,x=h,p|0)}function $3(n,l,A){n=n|0,l=l|0,A=A|0;var p=0;(l|0)>0?(p=xi(l,4)|0,a[n>>2]=p,p||je(27819,27842,40,27856)):a[n>>2]=0,a[n+4>>2]=l,a[n+8>>2]=0,a[n+12>>2]=A}function T3(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0;h=n+4|0,m=n+12|0,g=n+8|0;e:for(;;){for(A=a[h>>2]|0,l=0;;){if((l|0)>=(A|0))break e;if(p=a[n>>2]|0,b=a[p+(l<<2)>>2]|0,!b)l=l+1|0;else break}l=p+(~~(+Ye(+(+Re(10,+ +(15-(a[m>>2]|0)|0))*(+M[b>>3]+ +M[b+8>>3])))%+(A|0))>>>0<<2)|0,A=a[l>>2]|0;t:do if(A|0){if(p=b+32|0,(A|0)==(b|0))a[l>>2]=a[p>>2];else{if(A=A+32|0,l=a[A>>2]|0,!l)break;for(;(l|0)!=(b|0);)if(A=l+32|0,l=a[A>>2]|0,!l)break t;a[A>>2]=a[p>>2]}De(b),a[g>>2]=(a[g>>2]|0)+-1}while(!1)}De(a[n>>2]|0)}function I3(n){n=n|0;var l=0,A=0,p=0;for(p=a[n+4>>2]|0,A=0;;){if((A|0)>=(p|0)){l=0,A=4;break}if(l=a[(a[n>>2]|0)+(A<<2)>>2]|0,!l)A=A+1|0;else{A=4;break}}return(A|0)==4?l|0:0}function M3(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0;if(A=~~(+Ye(+(+Re(10,+ +(15-(a[n+12>>2]|0)|0))*(+M[l>>3]+ +M[l+8>>3])))%+(a[n+4>>2]|0))>>>0,A=(a[n>>2]|0)+(A<<2)|0,p=a[A>>2]|0,!p)return m=1,m|0;m=l+32|0;do if((p|0)!=(l|0)){if(A=a[p+32>>2]|0,!A)return m=1,m|0;for(h=A;;){if((h|0)==(l|0)){h=8;break}if(A=a[h+32>>2]|0,A)p=h,h=A;else{A=1,h=10;break}}if((h|0)==8){a[p+32>>2]=a[m>>2];break}else if((h|0)==10)return A|0}else a[A>>2]=a[m>>2];while(!1);return De(l),m=n+8|0,a[m>>2]=(a[m>>2]|0)+-1,m=0,m|0}function y7(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0;m=nn(40)|0,m||je(27872,27842,98,27885),a[m>>2]=a[l>>2],a[m+4>>2]=a[l+4>>2],a[m+8>>2]=a[l+8>>2],a[m+12>>2]=a[l+12>>2],h=m+16|0,a[h>>2]=a[A>>2],a[h+4>>2]=a[A+4>>2],a[h+8>>2]=a[A+8>>2],a[h+12>>2]=a[A+12>>2],a[m+32>>2]=0,h=~~(+Ye(+(+Re(10,+ +(15-(a[n+12>>2]|0)|0))*(+M[l>>3]+ +M[l+8>>3])))%+(a[n+4>>2]|0))>>>0,h=(a[n>>2]|0)+(h<<2)|0,p=a[h>>2]|0;do if(!p)a[h>>2]=m;else{for(;!(Gl(p,l)|0&&Gl(p+16|0,A)|0);)if(h=a[p+32>>2]|0,p=(h|0)==0?p:h,!(a[p+32>>2]|0)){g=10;break}if((g|0)==10){a[p+32>>2]=m;break}return De(m),g=p,g|0}while(!1);return g=n+8|0,a[g>>2]=(a[g>>2]|0)+1,g=m,g|0}function m7(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0;if(h=~~(+Ye(+(+Re(10,+ +(15-(a[n+12>>2]|0)|0))*(+M[l>>3]+ +M[l+8>>3])))%+(a[n+4>>2]|0))>>>0,h=a[(a[n>>2]|0)+(h<<2)>>2]|0,!h)return A=0,A|0;if(!A){for(n=h;;){if(Gl(n,l)|0){p=10;break}if(n=a[n+32>>2]|0,!n){n=0,p=10;break}}if((p|0)==10)return n|0}for(n=h;;){if(Gl(n,l)|0&&Gl(n+16|0,A)|0){p=10;break}if(n=a[n+32>>2]|0,!n){n=0,p=10;break}}return(p|0)==10?n|0:0}function g7(n,l){n=n|0,l=l|0;var A=0;if(A=~~(+Ye(+(+Re(10,+ +(15-(a[n+12>>2]|0)|0))*(+M[l>>3]+ +M[l+8>>3])))%+(a[n+4>>2]|0))>>>0,n=a[(a[n>>2]|0)+(A<<2)>>2]|0,!n)return A=0,A|0;for(;;){if(Gl(n,l)|0){l=5;break}if(n=a[n+32>>2]|0,!n){n=0,l=5;break}}return(l|0)==5?n|0:0}function w7(){return 27904}function wo(n){return n=+n,~~+D3(+n)|0}function nn(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0,U=0,G=0,Y=0,H=0,Q=0,z=0,de=0;de=x,x=x+16|0,D=de;do if(n>>>0<245){if(E=n>>>0<11?16:n+11&-8,n=E>>>3,O=a[6977]|0,A=O>>>n,A&3|0)return l=(A&1^1)+n|0,n=27948+(l<<1<<2)|0,A=n+8|0,p=a[A>>2]|0,h=p+8|0,m=a[h>>2]|0,(m|0)==(n|0)?a[6977]=O&~(1<<l):(a[m+12>>2]=n,a[A>>2]=m),z=l<<3,a[p+4>>2]=z|3,z=p+z+4|0,a[z>>2]=a[z>>2]|1,z=h,x=de,z|0;if(T=a[6979]|0,E>>>0>T>>>0){if(A|0)return l=2<<n,l=A<<n&(l|0-l),l=(l&0-l)+-1|0,b=l>>>12&16,l=l>>>b,A=l>>>5&8,l=l>>>A,m=l>>>2&4,l=l>>>m,n=l>>>1&2,l=l>>>n,p=l>>>1&1,p=(A|b|m|n|p)+(l>>>p)|0,l=27948+(p<<1<<2)|0,n=l+8|0,m=a[n>>2]|0,b=m+8|0,A=a[b>>2]|0,(A|0)==(l|0)?(n=O&~(1<<p),a[6977]=n):(a[A+12>>2]=l,a[n>>2]=A,n=O),z=p<<3,g=z-E|0,a[m+4>>2]=E|3,h=m+E|0,a[h+4>>2]=g|1,a[m+z>>2]=g,T|0&&(p=a[6982]|0,l=T>>>3,A=27948+(l<<1<<2)|0,l=1<<l,n&l?(n=A+8|0,l=a[n>>2]|0):(a[6977]=n|l,l=A,n=A+8|0),a[n>>2]=p,a[l+12>>2]=p,a[p+8>>2]=l,a[p+12>>2]=A),a[6979]=g,a[6982]=h,z=b,x=de,z|0;if(m=a[6978]|0,m){for(A=(m&0-m)+-1|0,h=A>>>12&16,A=A>>>h,p=A>>>5&8,A=A>>>p,g=A>>>2&4,A=A>>>g,b=A>>>1&2,A=A>>>b,S=A>>>1&1,S=a[28212+((p|h|g|b|S)+(A>>>S)<<2)>>2]|0,A=S,b=S,S=(a[S+4>>2]&-8)-E|0;n=a[A+16>>2]|0,!(!n&&(n=a[A+20>>2]|0,!n));)g=(a[n+4>>2]&-8)-E|0,h=g>>>0<S>>>0,A=n,b=h?n:b,S=h?g:S;if(g=b+E|0,g>>>0>b>>>0){h=a[b+24>>2]|0,l=a[b+12>>2]|0;do if((l|0)==(b|0)){if(n=b+20|0,l=a[n>>2]|0,!l&&(n=b+16|0,l=a[n>>2]|0,!l)){A=0;break}for(;;)if(p=l+20|0,A=a[p>>2]|0,A)l=A,n=p;else if(p=l+16|0,A=a[p>>2]|0,A)l=A,n=p;else break;a[n>>2]=0,A=l}else A=a[b+8>>2]|0,a[A+12>>2]=l,a[l+8>>2]=A,A=l;while(!1);do if(h|0){if(l=a[b+28>>2]|0,n=28212+(l<<2)|0,(b|0)==(a[n>>2]|0)){if(a[n>>2]=A,!A){a[6978]=m&~(1<<l);break}}else if(z=h+16|0,a[((a[z>>2]|0)==(b|0)?z:h+20|0)>>2]=A,!A)break;a[A+24>>2]=h,l=a[b+16>>2]|0,l|0&&(a[A+16>>2]=l,a[l+24>>2]=A),l=a[b+20>>2]|0,l|0&&(a[A+20>>2]=l,a[l+24>>2]=A)}while(!1);return S>>>0<16?(z=S+E|0,a[b+4>>2]=z|3,z=b+z+4|0,a[z>>2]=a[z>>2]|1):(a[b+4>>2]=E|3,a[g+4>>2]=S|1,a[g+S>>2]=S,T|0&&(p=a[6982]|0,l=T>>>3,A=27948+(l<<1<<2)|0,l=1<<l,l&O?(n=A+8|0,l=a[n>>2]|0):(a[6977]=l|O,l=A,n=A+8|0),a[n>>2]=p,a[l+12>>2]=p,a[p+8>>2]=l,a[p+12>>2]=A),a[6979]=S,a[6982]=g),z=b+8|0,x=de,z|0}else O=E}else O=E}else O=E}else if(n>>>0<=4294967231)if(n=n+11|0,E=n&-8,p=a[6978]|0,p){h=0-E|0,n=n>>>8,n?E>>>0>16777215?S=31:(O=(n+1048320|0)>>>16&8,U=n<<O,b=(U+520192|0)>>>16&4,U=U<<b,S=(U+245760|0)>>>16&2,S=14-(b|O|S)+(U<<S>>>15)|0,S=E>>>(S+7|0)&1|S<<1):S=0,A=a[28212+(S<<2)>>2]|0;e:do if(!A)A=0,n=0,U=61;else for(n=0,b=E<<((S|0)==31?0:25-(S>>>1)|0),m=0;;){if(g=(a[A+4>>2]&-8)-E|0,g>>>0<h>>>0)if(g)n=A,h=g;else{n=A,h=0,U=65;break e}if(U=a[A+20>>2]|0,A=a[A+16+(b>>>31<<2)>>2]|0,m=(U|0)==0|(U|0)==(A|0)?m:U,A)b=b<<1;else{A=m,U=61;break}}while(!1);if((U|0)==61){if((A|0)==0&(n|0)==0){if(n=2<<S,n=(n|0-n)&p,!n){O=E;break}O=(n&0-n)+-1|0,g=O>>>12&16,O=O>>>g,m=O>>>5&8,O=O>>>m,b=O>>>2&4,O=O>>>b,S=O>>>1&2,O=O>>>S,A=O>>>1&1,n=0,A=a[28212+((m|g|b|S|A)+(O>>>A)<<2)>>2]|0}A?U=65:(b=n,g=h)}if((U|0)==65)for(m=A;;)if(O=(a[m+4>>2]&-8)-E|0,A=O>>>0<h>>>0,h=A?O:h,n=A?m:n,A=a[m+16>>2]|0,A||(A=a[m+20>>2]|0),A)m=A;else{b=n,g=h;break}if((b|0)!=0&&g>>>0<((a[6979]|0)-E|0)>>>0&&(T=b+E|0,T>>>0>b>>>0)){m=a[b+24>>2]|0,l=a[b+12>>2]|0;do if((l|0)==(b|0)){if(n=b+20|0,l=a[n>>2]|0,!l&&(n=b+16|0,l=a[n>>2]|0,!l)){l=0;break}for(;;)if(h=l+20|0,A=a[h>>2]|0,A)l=A,n=h;else if(h=l+16|0,A=a[h>>2]|0,A)l=A,n=h;else break;a[n>>2]=0}else z=a[b+8>>2]|0,a[z+12>>2]=l,a[l+8>>2]=z;while(!1);do if(m){if(n=a[b+28>>2]|0,A=28212+(n<<2)|0,(b|0)==(a[A>>2]|0)){if(a[A>>2]=l,!l){p=p&~(1<<n),a[6978]=p;break}}else if(z=m+16|0,a[((a[z>>2]|0)==(b|0)?z:m+20|0)>>2]=l,!l)break;a[l+24>>2]=m,n=a[b+16>>2]|0,n|0&&(a[l+16>>2]=n,a[n+24>>2]=l),n=a[b+20>>2]|0,n&&(a[l+20>>2]=n,a[n+24>>2]=l)}while(!1);e:do if(g>>>0<16)z=g+E|0,a[b+4>>2]=z|3,z=b+z+4|0,a[z>>2]=a[z>>2]|1;else{if(a[b+4>>2]=E|3,a[T+4>>2]=g|1,a[T+g>>2]=g,l=g>>>3,g>>>0<256){A=27948+(l<<1<<2)|0,n=a[6977]|0,l=1<<l,n&l?(n=A+8|0,l=a[n>>2]|0):(a[6977]=n|l,l=A,n=A+8|0),a[n>>2]=T,a[l+12>>2]=T,a[T+8>>2]=l,a[T+12>>2]=A;break}if(l=g>>>8,l?g>>>0>16777215?A=31:(Q=(l+1048320|0)>>>16&8,z=l<<Q,H=(z+520192|0)>>>16&4,z=z<<H,A=(z+245760|0)>>>16&2,A=14-(H|Q|A)+(z<<A>>>15)|0,A=g>>>(A+7|0)&1|A<<1):A=0,l=28212+(A<<2)|0,a[T+28>>2]=A,n=T+16|0,a[n+4>>2]=0,a[n>>2]=0,n=1<<A,!(p&n)){a[6978]=p|n,a[l>>2]=T,a[T+24>>2]=l,a[T+12>>2]=T,a[T+8>>2]=T;break}l=a[l>>2]|0;t:do if((a[l+4>>2]&-8|0)!=(g|0)){for(p=g<<((A|0)==31?0:25-(A>>>1)|0);A=l+16+(p>>>31<<2)|0,n=a[A>>2]|0,!!n;)if((a[n+4>>2]&-8|0)==(g|0)){l=n;break t}else p=p<<1,l=n;a[A>>2]=T,a[T+24>>2]=l,a[T+12>>2]=T,a[T+8>>2]=T;break e}while(!1);Q=l+8|0,z=a[Q>>2]|0,a[z+12>>2]=T,a[Q>>2]=T,a[T+8>>2]=z,a[T+12>>2]=l,a[T+24>>2]=0}while(!1);return z=b+8|0,x=de,z|0}else O=E}else O=E;else O=-1;while(!1);if(A=a[6979]|0,A>>>0>=O>>>0)return l=A-O|0,n=a[6982]|0,l>>>0>15?(z=n+O|0,a[6982]=z,a[6979]=l,a[z+4>>2]=l|1,a[n+A>>2]=l,a[n+4>>2]=O|3):(a[6979]=0,a[6982]=0,a[n+4>>2]=A|3,z=n+A+4|0,a[z>>2]=a[z>>2]|1),z=n+8|0,x=de,z|0;if(g=a[6980]|0,g>>>0>O>>>0)return H=g-O|0,a[6980]=H,z=a[6983]|0,Q=z+O|0,a[6983]=Q,a[Q+4>>2]=H|1,a[z+4>>2]=O|3,z=z+8|0,x=de,z|0;if(a[7095]|0?n=a[7097]|0:(a[7097]=4096,a[7096]=4096,a[7098]=-1,a[7099]=-1,a[7100]=0,a[7088]=0,a[7095]=D&-16^1431655768,n=4096),b=O+48|0,S=O+47|0,m=n+S|0,h=0-n|0,E=m&h,E>>>0<=O>>>0||(n=a[7087]|0,n|0&&(T=a[7085]|0,D=T+E|0,D>>>0<=T>>>0|D>>>0>n>>>0)))return z=0,x=de,z|0;e:do if(a[7088]&4)l=0,U=143;else{A=a[6983]|0;t:do if(A){for(p=28356;D=a[p>>2]|0,!(D>>>0<=A>>>0&&(D+(a[p+4>>2]|0)|0)>>>0>A>>>0);)if(n=a[p+8>>2]|0,n)p=n;else{U=128;break t}if(l=m-g&h,l>>>0<2147483647)if(n=So(l|0)|0,(n|0)==((a[p>>2]|0)+(a[p+4>>2]|0)|0)){if((n|0)!=-1){g=l,m=n,U=145;break e}}else p=n,U=136;else l=0}else U=128;while(!1);do if((U|0)==128)if(A=So(0)|0,(A|0)!=-1&&(l=A,F=a[7096]|0,R=F+-1|0,l=((R&l|0)==0?0:(R+l&0-F)-l|0)+E|0,F=a[7085]|0,R=l+F|0,l>>>0>O>>>0&l>>>0<2147483647)){if(D=a[7087]|0,D|0&&R>>>0<=F>>>0|R>>>0>D>>>0){l=0;break}if(n=So(l|0)|0,(n|0)==(A|0)){g=l,m=A,U=145;break e}else p=n,U=136}else l=0;while(!1);do if((U|0)==136){if(A=0-l|0,!(b>>>0>l>>>0&(l>>>0<2147483647&(p|0)!=-1)))if((p|0)==-1){l=0;break}else{g=l,m=p,U=145;break e}if(n=a[7097]|0,n=S-l+n&0-n,n>>>0>=2147483647){g=l,m=p,U=145;break e}if((So(n|0)|0)==-1){So(A|0)|0,l=0;break}else{g=n+l|0,m=p,U=145;break e}}while(!1);a[7088]=a[7088]|4,U=143}while(!1);if((U|0)==143&&E>>>0<2147483647&&(H=So(E|0)|0,R=So(0)|0,G=R-H|0,Y=G>>>0>(O+40|0)>>>0,!((H|0)==-1|Y^1|H>>>0<R>>>0&((H|0)!=-1&(R|0)!=-1)^1))&&(g=Y?G:l,m=H,U=145),(U|0)==145){l=(a[7085]|0)+g|0,a[7085]=l,l>>>0>(a[7086]|0)>>>0&&(a[7086]=l),S=a[6983]|0;e:do if(S){for(l=28356;;){if(n=a[l>>2]|0,A=a[l+4>>2]|0,(m|0)==(n+A|0)){U=154;break}if(p=a[l+8>>2]|0,p)l=p;else break}if((U|0)==154&&(Q=l+4|0,(a[l+12>>2]&8|0)==0)&&m>>>0>S>>>0&n>>>0<=S>>>0){a[Q>>2]=A+g,z=(a[6980]|0)+g|0,H=S+8|0,H=(H&7|0)==0?0:0-H&7,Q=S+H|0,H=z-H|0,a[6983]=Q,a[6980]=H,a[Q+4>>2]=H|1,a[S+z+4>>2]=40,a[6984]=a[7099];break}for(m>>>0<(a[6981]|0)>>>0&&(a[6981]=m),A=m+g|0,l=28356;;){if((a[l>>2]|0)==(A|0)){U=162;break}if(n=a[l+8>>2]|0,n)l=n;else break}if((U|0)==162&&(a[l+12>>2]&8|0)==0){a[l>>2]=m,T=l+4|0,a[T>>2]=(a[T>>2]|0)+g,T=m+8|0,T=m+((T&7|0)==0?0:0-T&7)|0,l=A+8|0,l=A+((l&7|0)==0?0:0-l&7)|0,E=T+O|0,b=l-T-O|0,a[T+4>>2]=O|3;t:do if((S|0)==(l|0))z=(a[6980]|0)+b|0,a[6980]=z,a[6983]=E,a[E+4>>2]=z|1;else{if((a[6982]|0)==(l|0)){z=(a[6979]|0)+b|0,a[6979]=z,a[6982]=E,a[E+4>>2]=z|1,a[E+z>>2]=z;break}if(n=a[l+4>>2]|0,(n&3|0)==1){g=n&-8,p=n>>>3;r:do if(n>>>0<256)if(n=a[l+8>>2]|0,A=a[l+12>>2]|0,(A|0)==(n|0)){a[6977]=a[6977]&~(1<<p);break}else{a[n+12>>2]=A,a[A+8>>2]=n;break}else{m=a[l+24>>2]|0,n=a[l+12>>2]|0;do if((n|0)==(l|0)){if(A=l+16|0,p=A+4|0,n=a[p>>2]|0,n)A=p;else if(n=a[A>>2]|0,!n){n=0;break}for(;;)if(h=n+20|0,p=a[h>>2]|0,p)n=p,A=h;else if(h=n+16|0,p=a[h>>2]|0,p)n=p,A=h;else break;a[A>>2]=0}else z=a[l+8>>2]|0,a[z+12>>2]=n,a[n+8>>2]=z;while(!1);if(!m)break;A=a[l+28>>2]|0,p=28212+(A<<2)|0;do if((a[p>>2]|0)!=(l|0)){if(z=m+16|0,a[((a[z>>2]|0)==(l|0)?z:m+20|0)>>2]=n,!n)break r}else{if(a[p>>2]=n,n|0)break;a[6978]=a[6978]&~(1<<A);break r}while(!1);if(a[n+24>>2]=m,A=l+16|0,p=a[A>>2]|0,p|0&&(a[n+16>>2]=p,a[p+24>>2]=n),A=a[A+4>>2]|0,!A)break;a[n+20>>2]=A,a[A+24>>2]=n}while(!1);l=l+g|0,h=g+b|0}else h=b;if(l=l+4|0,a[l>>2]=a[l>>2]&-2,a[E+4>>2]=h|1,a[E+h>>2]=h,l=h>>>3,h>>>0<256){A=27948+(l<<1<<2)|0,n=a[6977]|0,l=1<<l,n&l?(n=A+8|0,l=a[n>>2]|0):(a[6977]=n|l,l=A,n=A+8|0),a[n>>2]=E,a[l+12>>2]=E,a[E+8>>2]=l,a[E+12>>2]=A;break}l=h>>>8;do if(!l)p=0;else{if(h>>>0>16777215){p=31;break}Q=(l+1048320|0)>>>16&8,z=l<<Q,H=(z+520192|0)>>>16&4,z=z<<H,p=(z+245760|0)>>>16&2,p=14-(H|Q|p)+(z<<p>>>15)|0,p=h>>>(p+7|0)&1|p<<1}while(!1);if(l=28212+(p<<2)|0,a[E+28>>2]=p,n=E+16|0,a[n+4>>2]=0,a[n>>2]=0,n=a[6978]|0,A=1<<p,!(n&A)){a[6978]=n|A,a[l>>2]=E,a[E+24>>2]=l,a[E+12>>2]=E,a[E+8>>2]=E;break}l=a[l>>2]|0;r:do if((a[l+4>>2]&-8|0)!=(h|0)){for(p=h<<((p|0)==31?0:25-(p>>>1)|0);A=l+16+(p>>>31<<2)|0,n=a[A>>2]|0,!!n;)if((a[n+4>>2]&-8|0)==(h|0)){l=n;break r}else p=p<<1,l=n;a[A>>2]=E,a[E+24>>2]=l,a[E+12>>2]=E,a[E+8>>2]=E;break t}while(!1);Q=l+8|0,z=a[Q>>2]|0,a[z+12>>2]=E,a[Q>>2]=E,a[E+8>>2]=z,a[E+12>>2]=l,a[E+24>>2]=0}while(!1);return z=T+8|0,x=de,z|0}for(l=28356;n=a[l>>2]|0,!(n>>>0<=S>>>0&&(z=n+(a[l+4>>2]|0)|0,z>>>0>S>>>0));)l=a[l+8>>2]|0;h=z+-47|0,n=h+8|0,n=h+((n&7|0)==0?0:0-n&7)|0,h=S+16|0,n=n>>>0<h>>>0?S:n,l=n+8|0,A=g+-40|0,H=m+8|0,H=(H&7|0)==0?0:0-H&7,Q=m+H|0,H=A-H|0,a[6983]=Q,a[6980]=H,a[Q+4>>2]=H|1,a[m+A+4>>2]=40,a[6984]=a[7099],A=n+4|0,a[A>>2]=27,a[l>>2]=a[7089],a[l+4>>2]=a[7090],a[l+8>>2]=a[7091],a[l+12>>2]=a[7092],a[7089]=m,a[7090]=g,a[7092]=0,a[7091]=l,l=n+24|0;do Q=l,l=l+4|0,a[l>>2]=7;while((Q+8|0)>>>0<z>>>0);if((n|0)!=(S|0)){if(m=n-S|0,a[A>>2]=a[A>>2]&-2,a[S+4>>2]=m|1,a[n>>2]=m,l=m>>>3,m>>>0<256){A=27948+(l<<1<<2)|0,n=a[6977]|0,l=1<<l,n&l?(n=A+8|0,l=a[n>>2]|0):(a[6977]=n|l,l=A,n=A+8|0),a[n>>2]=S,a[l+12>>2]=S,a[S+8>>2]=l,a[S+12>>2]=A;break}if(l=m>>>8,l?m>>>0>16777215?p=31:(Q=(l+1048320|0)>>>16&8,z=l<<Q,H=(z+520192|0)>>>16&4,z=z<<H,p=(z+245760|0)>>>16&2,p=14-(H|Q|p)+(z<<p>>>15)|0,p=m>>>(p+7|0)&1|p<<1):p=0,A=28212+(p<<2)|0,a[S+28>>2]=p,a[S+20>>2]=0,a[h>>2]=0,l=a[6978]|0,n=1<<p,!(l&n)){a[6978]=l|n,a[A>>2]=S,a[S+24>>2]=A,a[S+12>>2]=S,a[S+8>>2]=S;break}l=a[A>>2]|0;t:do if((a[l+4>>2]&-8|0)!=(m|0)){for(p=m<<((p|0)==31?0:25-(p>>>1)|0);A=l+16+(p>>>31<<2)|0,n=a[A>>2]|0,!!n;)if((a[n+4>>2]&-8|0)==(m|0)){l=n;break t}else p=p<<1,l=n;a[A>>2]=S,a[S+24>>2]=l,a[S+12>>2]=S,a[S+8>>2]=S;break e}while(!1);Q=l+8|0,z=a[Q>>2]|0,a[z+12>>2]=S,a[Q>>2]=S,a[S+8>>2]=z,a[S+12>>2]=l,a[S+24>>2]=0}}else z=a[6981]|0,(z|0)==0|m>>>0<z>>>0&&(a[6981]=m),a[7089]=m,a[7090]=g,a[7092]=0,a[6986]=a[7095],a[6985]=-1,a[6990]=27948,a[6989]=27948,a[6992]=27956,a[6991]=27956,a[6994]=27964,a[6993]=27964,a[6996]=27972,a[6995]=27972,a[6998]=27980,a[6997]=27980,a[7e3]=27988,a[6999]=27988,a[7002]=27996,a[7001]=27996,a[7004]=28004,a[7003]=28004,a[7006]=28012,a[7005]=28012,a[7008]=28020,a[7007]=28020,a[7010]=28028,a[7009]=28028,a[7012]=28036,a[7011]=28036,a[7014]=28044,a[7013]=28044,a[7016]=28052,a[7015]=28052,a[7018]=28060,a[7017]=28060,a[7020]=28068,a[7019]=28068,a[7022]=28076,a[7021]=28076,a[7024]=28084,a[7023]=28084,a[7026]=28092,a[7025]=28092,a[7028]=28100,a[7027]=28100,a[7030]=28108,a[7029]=28108,a[7032]=28116,a[7031]=28116,a[7034]=28124,a[7033]=28124,a[7036]=28132,a[7035]=28132,a[7038]=28140,a[7037]=28140,a[7040]=28148,a[7039]=28148,a[7042]=28156,a[7041]=28156,a[7044]=28164,a[7043]=28164,a[7046]=28172,a[7045]=28172,a[7048]=28180,a[7047]=28180,a[7050]=28188,a[7049]=28188,a[7052]=28196,a[7051]=28196,z=g+-40|0,H=m+8|0,H=(H&7|0)==0?0:0-H&7,Q=m+H|0,H=z-H|0,a[6983]=Q,a[6980]=H,a[Q+4>>2]=H|1,a[m+z+4>>2]=40,a[6984]=a[7099];while(!1);if(l=a[6980]|0,l>>>0>O>>>0)return H=l-O|0,a[6980]=H,z=a[6983]|0,Q=z+O|0,a[6983]=Q,a[Q+4>>2]=H|1,a[z+4>>2]=O|3,z=z+8|0,x=de,z|0}return z=w7()|0,a[z>>2]=12,z=0,x=de,z|0}function De(n){n=n|0;var l=0,A=0,p=0,h=0,m=0,g=0,b=0,S=0;if(n){A=n+-8|0,h=a[6981]|0,n=a[n+-4>>2]|0,l=n&-8,S=A+l|0;do if(n&1)b=A,g=A;else{if(p=a[A>>2]|0,!(n&3)||(g=A+(0-p)|0,m=p+l|0,g>>>0<h>>>0))return;if((a[6982]|0)==(g|0)){if(n=S+4|0,l=a[n>>2]|0,(l&3|0)!=3){b=g,l=m;break}a[6979]=m,a[n>>2]=l&-2,a[g+4>>2]=m|1,a[g+m>>2]=m;return}if(A=p>>>3,p>>>0<256)if(n=a[g+8>>2]|0,l=a[g+12>>2]|0,(l|0)==(n|0)){a[6977]=a[6977]&~(1<<A),b=g,l=m;break}else{a[n+12>>2]=l,a[l+8>>2]=n,b=g,l=m;break}h=a[g+24>>2]|0,n=a[g+12>>2]|0;do if((n|0)==(g|0)){if(l=g+16|0,A=l+4|0,n=a[A>>2]|0,n)l=A;else if(n=a[l>>2]|0,!n){n=0;break}for(;;)if(p=n+20|0,A=a[p>>2]|0,A)n=A,l=p;else if(p=n+16|0,A=a[p>>2]|0,A)n=A,l=p;else break;a[l>>2]=0}else b=a[g+8>>2]|0,a[b+12>>2]=n,a[n+8>>2]=b;while(!1);if(h){if(l=a[g+28>>2]|0,A=28212+(l<<2)|0,(a[A>>2]|0)==(g|0)){if(a[A>>2]=n,!n){a[6978]=a[6978]&~(1<<l),b=g,l=m;break}}else if(b=h+16|0,a[((a[b>>2]|0)==(g|0)?b:h+20|0)>>2]=n,!n){b=g,l=m;break}a[n+24>>2]=h,l=g+16|0,A=a[l>>2]|0,A|0&&(a[n+16>>2]=A,a[A+24>>2]=n),l=a[l+4>>2]|0,l?(a[n+20>>2]=l,a[l+24>>2]=n,b=g,l=m):(b=g,l=m)}else b=g,l=m}while(!1);if(!(g>>>0>=S>>>0)&&(n=S+4|0,p=a[n>>2]|0,!!(p&1))){if(p&2)a[n>>2]=p&-2,a[b+4>>2]=l|1,a[g+l>>2]=l,h=l;else{if((a[6983]|0)==(S|0)){if(S=(a[6980]|0)+l|0,a[6980]=S,a[6983]=b,a[b+4>>2]=S|1,(b|0)!=(a[6982]|0))return;a[6982]=0,a[6979]=0;return}if((a[6982]|0)==(S|0)){S=(a[6979]|0)+l|0,a[6979]=S,a[6982]=g,a[b+4>>2]=S|1,a[g+S>>2]=S;return}h=(p&-8)+l|0,A=p>>>3;do if(p>>>0<256)if(l=a[S+8>>2]|0,n=a[S+12>>2]|0,(n|0)==(l|0)){a[6977]=a[6977]&~(1<<A);break}else{a[l+12>>2]=n,a[n+8>>2]=l;break}else{m=a[S+24>>2]|0,n=a[S+12>>2]|0;do if((n|0)==(S|0)){if(l=S+16|0,A=l+4|0,n=a[A>>2]|0,n)l=A;else if(n=a[l>>2]|0,!n){A=0;break}for(;;)if(p=n+20|0,A=a[p>>2]|0,A)n=A,l=p;else if(p=n+16|0,A=a[p>>2]|0,A)n=A,l=p;else break;a[l>>2]=0,A=n}else A=a[S+8>>2]|0,a[A+12>>2]=n,a[n+8>>2]=A,A=n;while(!1);if(m|0){if(n=a[S+28>>2]|0,l=28212+(n<<2)|0,(a[l>>2]|0)==(S|0)){if(a[l>>2]=A,!A){a[6978]=a[6978]&~(1<<n);break}}else if(p=m+16|0,a[((a[p>>2]|0)==(S|0)?p:m+20|0)>>2]=A,!A)break;a[A+24>>2]=m,n=S+16|0,l=a[n>>2]|0,l|0&&(a[A+16>>2]=l,a[l+24>>2]=A),n=a[n+4>>2]|0,n|0&&(a[A+20>>2]=n,a[n+24>>2]=A)}}while(!1);if(a[b+4>>2]=h|1,a[g+h>>2]=h,(b|0)==(a[6982]|0)){a[6979]=h;return}}if(n=h>>>3,h>>>0<256){A=27948+(n<<1<<2)|0,l=a[6977]|0,n=1<<n,l&n?(l=A+8|0,n=a[l>>2]|0):(a[6977]=l|n,n=A,l=A+8|0),a[l>>2]=b,a[n+12>>2]=b,a[b+8>>2]=n,a[b+12>>2]=A;return}n=h>>>8,n?h>>>0>16777215?p=31:(g=(n+1048320|0)>>>16&8,S=n<<g,m=(S+520192|0)>>>16&4,S=S<<m,p=(S+245760|0)>>>16&2,p=14-(m|g|p)+(S<<p>>>15)|0,p=h>>>(p+7|0)&1|p<<1):p=0,n=28212+(p<<2)|0,a[b+28>>2]=p,a[b+20>>2]=0,a[b+16>>2]=0,l=a[6978]|0,A=1<<p;e:do if(!(l&A))a[6978]=l|A,a[n>>2]=b,a[b+24>>2]=n,a[b+12>>2]=b,a[b+8>>2]=b;else{n=a[n>>2]|0;t:do if((a[n+4>>2]&-8|0)!=(h|0)){for(p=h<<((p|0)==31?0:25-(p>>>1)|0);A=n+16+(p>>>31<<2)|0,l=a[A>>2]|0,!!l;)if((a[l+4>>2]&-8|0)==(h|0)){n=l;break t}else p=p<<1,n=l;a[A>>2]=b,a[b+24>>2]=n,a[b+12>>2]=b,a[b+8>>2]=b;break e}while(!1);g=n+8|0,S=a[g>>2]|0,a[S+12>>2]=b,a[g>>2]=b,a[b+8>>2]=S,a[b+12>>2]=n,a[b+24>>2]=0}while(!1);if(S=(a[6985]|0)+-1|0,a[6985]=S,!(S|0)){for(n=28364;n=a[n>>2]|0,n;)n=n+8|0;a[6985]=-1}}}}function xi(n,l){n=n|0,l=l|0;var A=0;return n?(A=is(l,n)|0,(l|n)>>>0>65535&&(A=((A>>>0)/(n>>>0)|0|0)==(l|0)?A:-1)):A=0,n=nn(A)|0,!n||!(a[n+-4>>2]&3)||vo(n|0,0,A|0)|0,n|0}function Oe(n,l,A,p){return n=n|0,l=l|0,A=A|0,p=p|0,A=n+A>>>0,ze(l+p+(A>>>0<n>>>0|0)>>>0|0),A|0|0}function zr(n,l,A,p){return n=n|0,l=l|0,A=A|0,p=p|0,p=l-p-(A>>>0>n>>>0|0)>>>0,ze(p|0),n-A>>>0|0|0}function C3(n){return n=n|0,(n?31-(bs(n^n-1)|0)|0:32)|0}function rm(n,l,A,p,h){n=n|0,l=l|0,A=A|0,p=p|0,h=h|0;var m=0,g=0,b=0,S=0,E=0,T=0,O=0,D=0,F=0,R=0;if(T=n,S=l,E=S,g=A,D=p,b=D,!E)return m=(h|0)!=0,b?m?(a[h>>2]=n|0,a[h+4>>2]=l&0,D=0,h=0,ze(D|0),h|0):(D=0,h=0,ze(D|0),h|0):(m&&(a[h>>2]=(T>>>0)%(g>>>0),a[h+4>>2]=0),D=0,h=(T>>>0)/(g>>>0)>>>0,ze(D|0),h|0);m=(b|0)==0;do if(g){if(!m){if(m=(bs(b|0)|0)-(bs(E|0)|0)|0,m>>>0<=31){O=m+1|0,b=31-m|0,l=m-31>>31,g=O,n=T>>>(O>>>0)&l|E<<b,l=E>>>(O>>>0)&l,m=0,b=T<<b;break}return h?(a[h>>2]=n|0,a[h+4>>2]=S|l&0,D=0,h=0,ze(D|0),h|0):(D=0,h=0,ze(D|0),h|0)}if(m=g-1|0,m&g|0){b=(bs(g|0)|0)+33-(bs(E|0)|0)|0,R=64-b|0,O=32-b|0,S=O>>31,F=b-32|0,l=F>>31,g=b,n=O-1>>31&E>>>(F>>>0)|(E<<O|T>>>(b>>>0))&l,l=l&E>>>(b>>>0),m=T<<R&S,b=(E<<R|T>>>(F>>>0))&S|T<<O&b-33>>31;break}return h|0&&(a[h>>2]=m&T,a[h+4>>2]=0),(g|0)==1?(F=S|l&0,R=n|0|0,ze(F|0),R|0):(R=C3(g|0)|0,F=E>>>(R>>>0)|0,R=E<<32-R|T>>>(R>>>0)|0,ze(F|0),R|0)}else{if(m)return h|0&&(a[h>>2]=(E>>>0)%(g>>>0),a[h+4>>2]=0),F=0,R=(E>>>0)/(g>>>0)>>>0,ze(F|0),R|0;if(!T)return h|0&&(a[h>>2]=0,a[h+4>>2]=(E>>>0)%(b>>>0)),F=0,R=(E>>>0)/(b>>>0)>>>0,ze(F|0),R|0;if(m=b-1|0,!(m&b))return h|0&&(a[h>>2]=n|0,a[h+4>>2]=m&E|l&0),F=0,R=E>>>((C3(b|0)|0)>>>0),ze(F|0),R|0;if(m=(bs(b|0)|0)-(bs(E|0)|0)|0,m>>>0<=30){l=m+1|0,b=31-m|0,g=l,n=E<<b|T>>>(l>>>0),l=E>>>(l>>>0),m=0,b=T<<b;break}return h?(a[h>>2]=n|0,a[h+4>>2]=S|l&0,F=0,R=0,ze(F|0),R|0):(F=0,R=0,ze(F|0),R|0)}while(!1);if(!g)E=b,S=0,b=0;else{O=A|0|0,T=D|p&0,E=Oe(O|0,T|0,-1,-1)|0,A=P()|0,S=b,b=0;do p=S,S=m>>>31|S<<1,m=b|m<<1,p=n<<1|p>>>31|0,D=n>>>31|l<<1|0,zr(E|0,A|0,p|0,D|0)|0,R=P()|0,F=R>>31|((R|0)<0?-1:0)<<1,b=F&1,n=zr(p|0,D|0,F&O|0,(((R|0)<0?-1:0)>>31|((R|0)<0?-1:0)<<1)&T|0)|0,l=P()|0,g=g-1|0;while((g|0)!=0);E=S,S=0}return g=0,h|0&&(a[h>>2]=n,a[h+4>>2]=l),F=(m|0)>>>31|(E|g)<<1|(g<<1|m>>>31)&0|S,R=(m<<1|0)&-2|b,ze(F|0),R|0}function bo(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0;return E=l>>31|((l|0)<0?-1:0)<<1,S=((l|0)<0?-1:0)>>31|((l|0)<0?-1:0)<<1,m=p>>31|((p|0)<0?-1:0)<<1,h=((p|0)<0?-1:0)>>31|((p|0)<0?-1:0)<<1,b=zr(E^n|0,S^l|0,E|0,S|0)|0,g=P()|0,n=m^E,l=h^S,zr((rm(b,g,zr(m^A|0,h^p|0,m|0,h|0)|0,P()|0,0)|0)^n|0,(P()|0)^l|0,n|0,l|0)|0}function b7(n,l){n=n|0,l=l|0;var A=0,p=0,h=0,m=0;return m=n&65535,h=l&65535,A=is(h,m)|0,p=n>>>16,n=(A>>>16)+(is(h,p)|0)|0,h=l>>>16,l=is(h,m)|0,ze((n>>>16)+(is(h,p)|0)+(((n&65535)+l|0)>>>16)|0),n+l<<16|A&65535|0|0}function Or(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0;return h=n,m=A,A=b7(h,m)|0,n=P()|0,ze((is(l,m)|0)+(is(p,h)|0)+n|n&0|0),A|0|0|0}function ql(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0,g=0,b=0,S=0,E=0;return h=x,x=x+16|0,b=h|0,g=l>>31|((l|0)<0?-1:0)<<1,m=((l|0)<0?-1:0)>>31|((l|0)<0?-1:0)<<1,E=p>>31|((p|0)<0?-1:0)<<1,S=((p|0)<0?-1:0)>>31|((p|0)<0?-1:0)<<1,n=zr(g^n|0,m^l|0,g|0,m|0)|0,l=P()|0,rm(n,l,zr(E^A|0,S^p|0,E|0,S|0)|0,P()|0,b)|0,p=zr(a[b>>2]^g|0,a[b+4>>2]^m|0,g|0,m|0)|0,A=P()|0,x=h,ze(A|0),p|0}function Ql(n,l,A,p){n=n|0,l=l|0,A=A|0,p=p|0;var h=0,m=0;return m=x,x=x+16|0,h=m|0,rm(n,l,A,p,h)|0,x=m,ze(a[h+4>>2]|0),a[h>>2]|0|0}function k3(n,l,A){return n=n|0,l=l|0,A=A|0,(A|0)<32?(ze(l>>A|0),n>>>A|(l&(1<<A)-1)<<32-A):(ze(((l|0)<0?-1:0)|0),l>>A-32|0)}function oe(n,l,A){return n=n|0,l=l|0,A=A|0,(A|0)<32?(ze(l>>>A|0),n>>>A|(l&(1<<A)-1)<<32-A):(ze(0),l>>>A-32|0)}function fe(n,l,A){return n=n|0,l=l|0,A=A|0,(A|0)<32?(ze(l<<A|(n&(1<<A)-1<<32-A)>>>32-A|0),n<<A):(ze(n<<A-32|0),0)}function O3(n,l,A){return n=n|0,l=l|0,l=bs(l)|0,(l|0)==32&&(l=l+(bs(n)|0)|0),ze(0),l|0}function P3(n,l){return n=+n,l=+l,n!=n?+l:l!=l?+n:+My(+n,+l)}function zp(n,l){return n=+n,l=+l,n!=n?+l:l!=l?+n:+Bl(+n,+l)}function Vp(n){return n=+n,n>=0?+Rt(n+.5):+zt(n-.5)}function Wl(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0;if((A|0)>=8192)return ky(n|0,l|0,A|0)|0,n|0;if(m=n|0,h=n+A|0,(n&3)==(l&3)){for(;n&3;){if(!A)return m|0;ne[n>>0]=ne[l>>0]|0,n=n+1|0,l=l+1|0,A=A-1|0}for(A=h&-4|0,p=A-64|0;(n|0)<=(p|0);)a[n>>2]=a[l>>2],a[n+4>>2]=a[l+4>>2],a[n+8>>2]=a[l+8>>2],a[n+12>>2]=a[l+12>>2],a[n+16>>2]=a[l+16>>2],a[n+20>>2]=a[l+20>>2],a[n+24>>2]=a[l+24>>2],a[n+28>>2]=a[l+28>>2],a[n+32>>2]=a[l+32>>2],a[n+36>>2]=a[l+36>>2],a[n+40>>2]=a[l+40>>2],a[n+44>>2]=a[l+44>>2],a[n+48>>2]=a[l+48>>2],a[n+52>>2]=a[l+52>>2],a[n+56>>2]=a[l+56>>2],a[n+60>>2]=a[l+60>>2],n=n+64|0,l=l+64|0;for(;(n|0)<(A|0);)a[n>>2]=a[l>>2],n=n+4|0,l=l+4|0}else for(A=h-4|0;(n|0)<(A|0);)ne[n>>0]=ne[l>>0]|0,ne[n+1>>0]=ne[l+1>>0]|0,ne[n+2>>0]=ne[l+2>>0]|0,ne[n+3>>0]=ne[l+3>>0]|0,n=n+4|0,l=l+4|0;for(;(n|0)<(h|0);)ne[n>>0]=ne[l>>0]|0,n=n+1|0,l=l+1|0;return m|0}function vo(n,l,A){n=n|0,l=l|0,A=A|0;var p=0,h=0,m=0,g=0;if(m=n+A|0,l=l&255,(A|0)>=67){for(;n&3;)ne[n>>0]=l,n=n+1|0;for(p=m&-4|0,g=l|l<<8|l<<16|l<<24,h=p-64|0;(n|0)<=(h|0);)a[n>>2]=g,a[n+4>>2]=g,a[n+8>>2]=g,a[n+12>>2]=g,a[n+16>>2]=g,a[n+20>>2]=g,a[n+24>>2]=g,a[n+28>>2]=g,a[n+32>>2]=g,a[n+36>>2]=g,a[n+40>>2]=g,a[n+44>>2]=g,a[n+48>>2]=g,a[n+52>>2]=g,a[n+56>>2]=g,a[n+60>>2]=g,n=n+64|0;for(;(n|0)<(p|0);)a[n>>2]=g,n=n+4|0}for(;(n|0)<(m|0);)ne[n>>0]=l,n=n+1|0;return m-A|0}function D3(n){return n=+n,n>=0?+Rt(n+.5):+zt(n-.5)}function So(n){n=n|0;var l=0,A=0,p=0;return p=Cy()|0,A=a[St>>2]|0,l=A+n|0,(n|0)>0&(l|0)<(A|0)|(l|0)<0?(Dp(l|0)|0,ui(12),-1):(l|0)>(p|0)&&!(n0(l|0)|0)?(ui(12),-1):(a[St>>2]=l,A|0)}return{___divdi3:bo,___muldi3:Or,___remdi3:ql,___uremdi3:Ql,_areNeighborCells:Ak,_bitshift64Ashr:k3,_bitshift64Lshr:oe,_bitshift64Shl:fe,_calloc:xi,_cellAreaKm2:Bk,_cellAreaM2:Uk,_cellAreaRads2:Ky,_cellToBoundary:Vl,_cellToCenterChild:p3,_cellToChildPos:kk,_cellToChildren:Sk,_cellToChildrenSize:a0,_cellToLatLng:Oa,_cellToLocalIj:Hk,_cellToParent:Gy,_cellToVertex:ns,_cellToVertexes:d7,_cellsToDirectedEdge:uk,_cellsToLinkedMultiPolygon:GC,_childPosToCell:Ok,_compactCells:_k,_destroyLinkedMultiPolygon:m3,_directedEdgeToBoundary:jp,_directedEdgeToCells:hk,_edgeLengthKm:Vk,_edgeLengthM:Gk,_edgeLengthRads:zk,_emscripten_replace_memory:K,_free:De,_getBaseCellNumber:u3,_getDirectedEdgeDestination:pk,_getDirectedEdgeOrigin:ck,_getHexagonAreaAvgKm2:f3,_getHexagonAreaAvgM2:Nk,_getHexagonEdgeLengthAvgKm:jk,_getHexagonEdgeLengthAvgM:Lk,_getIcosahedronFaces:d3,_getNumCells:Lp,_getPentagons:Jy,_getRes0Cells:JC,_getResolution:vk,_greatCircleDistanceKm:A0,_greatCircleDistanceM:Dk,_greatCircleDistanceRads:Pk,_gridDisk:wr,_gridDiskDistances:qv,_gridDistance:Zk,_gridPathCells:Kk,_gridPathCellsSize:Yk,_gridRing:LC,_gridRingUnsafe:Wv,_i64Add:Oe,_i64Subtract:zr,_isPentagon:Dt,_isResClassIII:$k,_isValidCell:zy,_isValidDirectedEdge:dk,_isValidVertex:f7,_latLngToCell:Wy,_llvm_ctlz_i64:O3,_llvm_maxnum_f64:P3,_llvm_minnum_f64:zp,_llvm_round_f64:Vp,_localIjToCell:Jk,_malloc:nn,_maxFaceCount:Mk,_maxGridDiskSize:nr,_maxPolygonToCellsSize:UC,_maxPolygonToCellsSizeExperimental:t7,_memcpy:Wl,_memset:vo,_originToDirectedEdges:fk,_pentagonCount:Ck,_polygonToCells:zC,_polygonToCellsExperimental:e7,_readInt64AsDoubleFromPointer:A7,_res0CellCount:HC,_round:D3,_sbrk:So,_sizeOfCellBoundary:s7,_sizeOfCoordIJ:l7,_sizeOfGeoLoop:n7,_sizeOfGeoPolygon:o7,_sizeOfH3Index:r7,_sizeOfLatLng:i7,_sizeOfLinkedGeoPolygon:a7,_uncompactCells:Ek,_uncompactCellsSize:xk,_vertexToLatLng:h7,establishStackSpace:Jt,stackAlloc:pe,stackRestore:_t,stackSave:Fe}})(Ey,xy,wt);t.___divdi3=Ae.___divdi3,t.___muldi3=Ae.___muldi3,t.___remdi3=Ae.___remdi3,t.___uremdi3=Ae.___uremdi3,t._areNeighborCells=Ae._areNeighborCells,t._bitshift64Ashr=Ae._bitshift64Ashr,t._bitshift64Lshr=Ae._bitshift64Lshr,t._bitshift64Shl=Ae._bitshift64Shl,t._calloc=Ae._calloc,t._cellAreaKm2=Ae._cellAreaKm2,t._cellAreaM2=Ae._cellAreaM2,t._cellAreaRads2=Ae._cellAreaRads2,t._cellToBoundary=Ae._cellToBoundary,t._cellToCenterChild=Ae._cellToCenterChild,t._cellToChildPos=Ae._cellToChildPos,t._cellToChildren=Ae._cellToChildren,t._cellToChildrenSize=Ae._cellToChildrenSize,t._cellToLatLng=Ae._cellToLatLng,t._cellToLocalIj=Ae._cellToLocalIj,t._cellToParent=Ae._cellToParent,t._cellToVertex=Ae._cellToVertex,t._cellToVertexes=Ae._cellToVertexes,t._cellsToDirectedEdge=Ae._cellsToDirectedEdge,t._cellsToLinkedMultiPolygon=Ae._cellsToLinkedMultiPolygon,t._childPosToCell=Ae._childPosToCell,t._compactCells=Ae._compactCells,t._destroyLinkedMultiPolygon=Ae._destroyLinkedMultiPolygon,t._directedEdgeToBoundary=Ae._directedEdgeToBoundary,t._directedEdgeToCells=Ae._directedEdgeToCells,t._edgeLengthKm=Ae._edgeLengthKm,t._edgeLengthM=Ae._edgeLengthM,t._edgeLengthRads=Ae._edgeLengthRads;var $y=t._emscripten_replace_memory=Ae._emscripten_replace_memory;t._free=Ae._free,t._getBaseCellNumber=Ae._getBaseCellNumber,t._getDirectedEdgeDestination=Ae._getDirectedEdgeDestination,t._getDirectedEdgeOrigin=Ae._getDirectedEdgeOrigin,t._getHexagonAreaAvgKm2=Ae._getHexagonAreaAvgKm2,t._getHexagonAreaAvgM2=Ae._getHexagonAreaAvgM2,t._getHexagonEdgeLengthAvgKm=Ae._getHexagonEdgeLengthAvgKm,t._getHexagonEdgeLengthAvgM=Ae._getHexagonEdgeLengthAvgM,t._getIcosahedronFaces=Ae._getIcosahedronFaces,t._getNumCells=Ae._getNumCells,t._getPentagons=Ae._getPentagons,t._getRes0Cells=Ae._getRes0Cells,t._getResolution=Ae._getResolution,t._greatCircleDistanceKm=Ae._greatCircleDistanceKm,t._greatCircleDistanceM=Ae._greatCircleDistanceM,t._greatCircleDistanceRads=Ae._greatCircleDistanceRads,t._gridDisk=Ae._gridDisk,t._gridDiskDistances=Ae._gridDiskDistances,t._gridDistance=Ae._gridDistance,t._gridPathCells=Ae._gridPathCells,t._gridPathCellsSize=Ae._gridPathCellsSize,t._gridRing=Ae._gridRing,t._gridRingUnsafe=Ae._gridRingUnsafe,t._i64Add=Ae._i64Add,t._i64Subtract=Ae._i64Subtract,t._isPentagon=Ae._isPentagon,t._isResClassIII=Ae._isResClassIII,t._isValidCell=Ae._isValidCell,t._isValidDirectedEdge=Ae._isValidDirectedEdge,t._isValidVertex=Ae._isValidVertex,t._latLngToCell=Ae._latLngToCell,t._llvm_ctlz_i64=Ae._llvm_ctlz_i64,t._llvm_maxnum_f64=Ae._llvm_maxnum_f64,t._llvm_minnum_f64=Ae._llvm_minnum_f64,t._llvm_round_f64=Ae._llvm_round_f64,t._localIjToCell=Ae._localIjToCell,t._malloc=Ae._malloc,t._maxFaceCount=Ae._maxFaceCount,t._maxGridDiskSize=Ae._maxGridDiskSize,t._maxPolygonToCellsSize=Ae._maxPolygonToCellsSize,t._maxPolygonToCellsSizeExperimental=Ae._maxPolygonToCellsSizeExperimental,t._memcpy=Ae._memcpy,t._memset=Ae._memset,t._originToDirectedEdges=Ae._originToDirectedEdges,t._pentagonCount=Ae._pentagonCount,t._polygonToCells=Ae._polygonToCells,t._polygonToCellsExperimental=Ae._polygonToCellsExperimental,t._readInt64AsDoubleFromPointer=Ae._readInt64AsDoubleFromPointer,t._res0CellCount=Ae._res0CellCount,t._round=Ae._round,t._sbrk=Ae._sbrk,t._sizeOfCellBoundary=Ae._sizeOfCellBoundary,t._sizeOfCoordIJ=Ae._sizeOfCoordIJ,t._sizeOfGeoLoop=Ae._sizeOfGeoLoop,t._sizeOfGeoPolygon=Ae._sizeOfGeoPolygon,t._sizeOfH3Index=Ae._sizeOfH3Index,t._sizeOfLatLng=Ae._sizeOfLatLng,t._sizeOfLinkedGeoPolygon=Ae._sizeOfLinkedGeoPolygon,t._uncompactCells=Ae._uncompactCells,t._uncompactCellsSize=Ae._uncompactCellsSize,t._vertexToLatLng=Ae._vertexToLatLng,t.establishStackSpace=Ae.establishStackSpace;var kp=t.stackAlloc=Ae.stackAlloc,Ty=t.stackRestore=Ae.stackRestore,Iy=t.stackSave=Ae.stackSave;if(t.asm=Ae,t.cwrap=he,t.setValue=k,t.getValue=N,Cr){Mp(Cr)||(Cr=o(Cr));{Tp();var r0=function(Z){Z.byteLength&&(Z=new Uint8Array(Z)),Ut.set(Z,I),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,Ip()},Op=function(){c(Cr,r0,function(){throw"could not load memory initializer "+Cr})},Pp=t0(Cr);if(Pp)r0(Pp.buffer);else if(t.memoryInitializerRequest){var X=function(){var Z=t.memoryInitializerRequest,ie=Z.response;if(Z.status!==200&&Z.status!==0){var te=t0(t.memoryInitializerRequestURL);if(te)ie=te.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+Z.status+", retrying "+Cr),Op();return}}r0(ie)};t.memoryInitializerRequest.response?setTimeout(X,0):t.memoryInitializerRequest.addEventListener("load",X)}else Op()}}var kt;Ta=function Z(){kt||rn(),kt||(Ta=Z)};function rn(Z){if(Dn>0||(oy(),Dn>0))return;function ie(){kt||(kt=!0,!B&&(ay(),ly(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Ay()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),ie()},1)):ie()}t.run=rn;function rs(Z){throw t.onAbort&&t.onAbort(Z),Z+="",f(Z),w(Z),B=!0,"abort("+Z+"). Build with -s ASSERTIONS=1 for more info."}if(t.abort=rs,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return rn(),e})(typeof ba=="object"?ba:{}),qe="number",Ne=qe,$0=qe,Ve=qe,Ge=qe,Dr=qe,$e=qe,UJ=[["sizeOfH3Index",qe],["sizeOfLatLng",qe],["sizeOfCellBoundary",qe],["sizeOfGeoLoop",qe],["sizeOfGeoPolygon",qe],["sizeOfLinkedGeoPolygon",qe],["sizeOfCoordIJ",qe],["readInt64AsDoubleFromPointer",qe],["isValidCell",$0,[Ve,Ge]],["latLngToCell",Ne,[qe,qe,Dr,$e]],["cellToLatLng",Ne,[Ve,Ge,$e]],["cellToBoundary",Ne,[Ve,Ge,$e]],["maxGridDiskSize",Ne,[qe,$e]],["gridDisk",Ne,[Ve,Ge,qe,$e]],["gridDiskDistances",Ne,[Ve,Ge,qe,$e,$e]],["gridRing",Ne,[Ve,Ge,qe,$e]],["gridRingUnsafe",Ne,[Ve,Ge,qe,$e]],["maxPolygonToCellsSize",Ne,[$e,Dr,qe,$e]],["polygonToCells",Ne,[$e,Dr,qe,$e]],["maxPolygonToCellsSizeExperimental",Ne,[$e,Dr,qe,$e]],["polygonToCellsExperimental",Ne,[$e,Dr,qe,qe,qe,$e]],["cellsToLinkedMultiPolygon",Ne,[$e,qe,$e]],["destroyLinkedMultiPolygon",null,[$e]],["compactCells",Ne,[$e,$e,qe,qe]],["uncompactCells",Ne,[$e,qe,qe,$e,qe,Dr]],["uncompactCellsSize",Ne,[$e,qe,qe,Dr,$e]],["isPentagon",$0,[Ve,Ge]],["isResClassIII",$0,[Ve,Ge]],["getBaseCellNumber",qe,[Ve,Ge]],["getResolution",qe,[Ve,Ge]],["maxFaceCount",Ne,[Ve,Ge,$e]],["getIcosahedronFaces",Ne,[Ve,Ge,$e]],["cellToParent",Ne,[Ve,Ge,Dr,$e]],["cellToChildren",Ne,[Ve,Ge,Dr,$e]],["cellToCenterChild",Ne,[Ve,Ge,Dr,$e]],["cellToChildrenSize",Ne,[Ve,Ge,Dr,$e]],["cellToChildPos",Ne,[Ve,Ge,Dr,$e]],["childPosToCell",Ne,[qe,qe,Ve,Ge,Dr,$e]],["areNeighborCells",Ne,[Ve,Ge,Ve,Ge,$e]],["cellsToDirectedEdge",Ne,[Ve,Ge,Ve,Ge,$e]],["getDirectedEdgeOrigin",Ne,[Ve,Ge,$e]],["getDirectedEdgeDestination",Ne,[Ve,Ge,$e]],["isValidDirectedEdge",$0,[Ve,Ge]],["directedEdgeToCells",Ne,[Ve,Ge,$e]],["originToDirectedEdges",Ne,[Ve,Ge,$e]],["directedEdgeToBoundary",Ne,[Ve,Ge,$e]],["gridDistance",Ne,[Ve,Ge,Ve,Ge,$e]],["gridPathCells",Ne,[Ve,Ge,Ve,Ge,$e]],["gridPathCellsSize",Ne,[Ve,Ge,Ve,Ge,$e]],["cellToLocalIj",Ne,[Ve,Ge,Ve,Ge,qe,$e]],["localIjToCell",Ne,[Ve,Ge,$e,qe,$e]],["getHexagonAreaAvgM2",Ne,[Dr,$e]],["getHexagonAreaAvgKm2",Ne,[Dr,$e]],["getHexagonEdgeLengthAvgM",Ne,[Dr,$e]],["getHexagonEdgeLengthAvgKm",Ne,[Dr,$e]],["greatCircleDistanceM",qe,[$e,$e]],["greatCircleDistanceKm",qe,[$e,$e]],["greatCircleDistanceRads",qe,[$e,$e]],["cellAreaM2",Ne,[Ve,Ge,$e]],["cellAreaKm2",Ne,[Ve,Ge,$e]],["cellAreaRads2",Ne,[Ve,Ge,$e]],["edgeLengthM",Ne,[Ve,Ge,$e]],["edgeLengthKm",Ne,[Ve,Ge,$e]],["edgeLengthRads",Ne,[Ve,Ge,$e]],["getNumCells",Ne,[Dr,$e]],["getRes0Cells",Ne,[$e]],["res0CellCount",qe],["getPentagons",Ne,[qe,$e]],["pentagonCount",qe],["cellToVertex",Ne,[Ve,Ge,qe,$e]],["cellToVertexes",Ne,[Ve,Ge,$e]],["vertexToLatLng",Ne,[Ve,Ge,$e]],["isValidVertex",$0,[Ve,Ge]]],zJ=0,VJ=1,GJ=2,qJ=3,QJ=4,WJ=5,HJ=6,JJ=7,ZJ=8,YJ=9,KJ=10,XJ=11,eZ=12,tZ=13,rZ=14,iZ=15,Hr={};Hr[zJ]="Success";Hr[VJ]="The operation failed but a more specific error is not available";Hr[GJ]="Argument was outside of acceptable range";Hr[qJ]="Latitude or longitude arguments were outside of acceptable range";Hr[QJ]="Resolution argument was outside of acceptable range";Hr[WJ]="Cell argument was not valid";Hr[HJ]="Directed edge argument was not valid";Hr[JJ]="Undirected edge argument was not valid";Hr[ZJ]="Vertex argument was not valid";Hr[YJ]="Pentagon distortion was encountered";Hr[KJ]="Duplicate input";Hr[XJ]="Cell arguments were not neighbors";Hr[eZ]="Cell arguments had incompatible resolutions";Hr[tZ]="Memory allocation failed";Hr[rZ]="Bounds of provided memory were insufficient";Hr[iZ]="Mode or flags argument was not valid";var sZ="Unknown error";function nZ(e,t,r){var i=r&&"value"in r,s=new Error((e[t]||sZ)+" (code: "+t+(i?", value: "+r.value:"")+")");return s.code=t,s}function oZ(e,t){var r=arguments.length===2?{value:t}:{};return nZ(Hr,e,r)}function aZ(e){if(e!==0)throw oZ(e)}var fo={};UJ.forEach(function(t){fo[t[0]]=ba.cwrap.apply(ba,t)});var Zx=16,Hw=8;fo.sizeOfH3Index();fo.sizeOfLatLng();var lZ=fo.sizeOfCellBoundary();fo.sizeOfGeoPolygon();fo.sizeOfGeoLoop();fo.sizeOfLinkedGeoPolygon();fo.sizeOfCoordIJ();var AZ=/[^0-9a-fA-F]/;function uZ(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||AZ.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),Zx),r=parseInt(e.substring(e.length-8),Zx);return[r,t]}function Yx(e){return hZ(ba.getValue(e,"double"))}function cZ(e){return[Yx(e+Hw),Yx(e)]}function pZ(e,t,r){for(var i=ba.getValue(e,"i32"),s=e+Hw,o=[],c=cZ,f=0;f<i*2;f+=2)o.push(c(s+Hw*f));return o.push(o[0]),o}function dZ(e,t){var r=ba._malloc(lZ),i=uZ(e),s=i[0],o=i[1];try{return aZ(fo.cellToBoundary(s,o,r)),pZ(r,t,t)}finally{ba._free(r)}}function hZ(e){return e*180/Math.PI}const fZ=(e="compositeKey")=>(console.time("RENDERER"),{type:"unique-value",field:e,legendOptions:{title:"UGB Assets vs Harms"},defaultSymbol:{type:"simple-fill",color:"#cccccc",outline:{color:[0,0,0,.2],width:.5}},uniqueValueInfos:[{value:"1,1",label:"Assets:1, Harms:1",symbol:{type:"simple-fill",color:"#d3d3d3",outline:{color:[0,0,0,.2],width:.5}}},{value:"1,2",label:"Assets:1, Harms:2",symbol:{type:"simple-fill",color:"#d6b3a0",outline:{color:[0,0,0,.2],width:.5}}},{value:"1,3",label:"Assets:1, Harms:3",symbol:{type:"simple-fill",color:"#d9926a",outline:{color:[0,0,0,.2],width:.5}}},{value:"1,4",label:"Assets:1, Harms:4",symbol:{type:"simple-fill",color:"#dd6a29",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,1",label:"Assets:2, Harms:1",symbol:{type:"simple-fill",color:"#9cc4d2",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,2",label:"Assets:2, Harms:2",symbol:{type:"simple-fill",color:"#9ea69f",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,3",label:"Assets:2, Harms:3",symbol:{type:"simple-fill",color:"#a08769",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,4",label:"Assets:2, Harms:4",symbol:{type:"simple-fill",color:"#a36229",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,1",label:"Assets:3, Harms:1",symbol:{type:"simple-fill",color:"#5fb2d1",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,2",label:"Assets:3, Harms:2",symbol:{type:"simple-fill",color:"#60979f",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,3",label:"Assets:3, Harms:3",symbol:{type:"simple-fill",color:"#617b69",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,4",label:"Assets:3, Harms:4",symbol:{type:"simple-fill",color:"#635929",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,1",label:"Assets:4, Harms:1",symbol:{type:"simple-fill",color:"#169dd0",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,2",label:"Assets:4, Harms:2",symbol:{type:"simple-fill",color:"#16869e",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,3",label:"Assets:4, Harms:3",symbol:{type:"simple-fill",color:"#166d68",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,4",label:"Assets:4, Harms:4",symbol:{type:"simple-fill",color:"#174f28",outline:{color:[0,0,0,.2],width:.5}}}]});function yZ(){const e=mZ();return(t,r)=>{const{memory:i,uncompress:s}=e.exports,o=68e3,c=o+t.byteLength,f=o+t.byteLength+r;if(i.buffer.byteLength<f){const $=i.buffer.byteLength/65536,k=Math.ceil(f/65536)-$;i.grow(k)}const w=new Uint8Array(i.buffer);w.set(t,o);const v=s(o,t.byteLength,c);if(v===-1)throw new Error("invalid snappy length header");if(v===-2)throw new Error("missing eof marker");if(v===-3)throw new Error("premature end of input");if(v)throw new Error(`failed to uncompress data ${v}`);return w.slice(c,c+r)}}function mZ(){const e=atob(gZ),t=new Uint8Array(e.length);for(let i=0;i<e.length;i+=1)t[i]=e.charCodeAt(i);const r=new WebAssembly.Module(t);return new WebAssembly.Instance(r)}const gZ="AGFzbQEAAAABEANgAABgA39/fwF/YAF/AX8DBgUAAQEBAgUDAQACBj8KfwFBoIwEC38AQYAIC38AQaAMC38AQaAMC38AQaCMBAt/AEGACAt/AEGgjAQLfwBBgIAIC38AQQALfwBBAQsHwQEOBm1lbW9yeQIAEV9fd2FzbV9jYWxsX2N0b3JzAAAGbWVtY3B5AAEHbWVtbW92ZQACCnVuY29tcHJlc3MAAwxfX2Rzb19oYW5kbGUDAQpfX2RhdGFfZW5kAwILX19zdGFja19sb3cDAwxfX3N0YWNrX2hpZ2gDBA1fX2dsb2JhbF9iYXNlAwULX19oZWFwX2Jhc2UDBgpfX2hlYXBfZW5kAwcNX19tZW1vcnlfYmFzZQMIDF9fdGFibGVfYmFzZQMJCuASBQIAC8sBAQN/AkAgAkUNAAJAAkAgAkEHcSIDDQAgACEEIAIhBQwBCyAAIQQgAiEFA0AgBCABLQAAOgAAIARBAWohBCABQQFqIQEgBUF/aiEFIANBf2oiAw0ACwsgAkEISQ0AA0AgBCABLQAAOgAAIAQgAS0AAToAASAEIAEtAAI6AAIgBCABLQADOgADIAQgAS0ABDoABCAEIAEtAAU6AAUgBCABLQAGOgAGIAQgAS0ABzoAByAEQQhqIQQgAUEIaiEBIAVBeGoiBQ0ACwsgAAugAwEEfwJAIAAgAUYNAAJAAkAgACABSQ0AIAEgAmoiAyAASw0BCyACRQ0BAkACQCACQQdxIgMNACAAIQQgAiEFDAELIAAhBCACIQUDQCAEIAEtAAA6AAAgBEEBaiEEIAFBAWohASAFQX9qIQUgA0F/aiIDDQALCyACQQhJDQEDQCAEIAEtAAA6AAAgBCABLQABOgABIAQgAS0AAjoAAiAEIAEtAAM6AAMgBCABLQAEOgAEIAQgAS0ABToABSAEIAEtAAY6AAYgBCABLQAHOgAHIARBCGohBCABQQhqIQEgBUF4aiIFDQAMAgsLIAJFDQACQAJAIAJBA3EiBA0AIAAgAmohBiACIQUMAQsgAiEFA0AgBUF/aiIFIABqIgYgBSABaiIDLQAAOgAAIARBf2oiBA0ACwsgAkEESQ0AIAZBfGohASADQXxqIQQDQCABQQNqIARBA2otAAA6AAAgAUECaiAEQQJqLQAAOgAAIAFBAWogBEEBai0AADoAACABIAQtAAA6AAAgAUF8aiEBIARBfGohBCAFQXxqIgUNAAsLIAALswoBCX8jgICAgABBIGsiAySAgICAACADQQlqQgA3AAAgA0IANwIEIAMgA0EYajYCAEF/IQQCQCABRQ0AIAMgAUF/aiIFNgIcIAMgAEEBajYCGCAALAAAIgZB/wBxIQcCQCAGQX9KDQAgBUUNASADIAFBfmoiBTYCHCADIABBAmo2AhggACwAASIGQf8AcUEHdCAHciEHQX8hBCAGQX9KDQAgBUUNASADIAFBfWoiBTYCHCADIABBA2o2AhggACwAAiIGQf8AcUEOdCAHciEHQX8hBCAGQX9KDQAgBUUNASADIAFBfGoiBTYCHCADIABBBGo2AhggACwAAyIGQf8AcUEVdCAHciEHQX8hBCAGQX9KDQAgBUUNASADIAFBe2o2AhwgAyAAQQVqNgIYIAAsAAQiAUEASA0BIAFBHHQgB3IhBwsgAiAHaiEIAkACQCADEISAgIAADQAgAiEADAELIAMoAgQhASACIQADQAJAIAMoAgggAWtBBEoNACADIAE2AgQgAxCEgICAAEUNAiADKAIEIQELIAFBAWohBQJAAkAgAS0AACIGQQNxDQAgCCAAayEJIAMoAggiCiAFayEEIAZBAnYiC0EBaiEHAkAgBkE/Sw0AIARBEEkNACAJQRBIDQAgACABKAIBNgIAIAAgASgCBTYCBCAAIAEoAgk2AgggACABKAINNgIMIAAgB2ohACADKAIIIAUgB2oiAWtBBEoNAyADIAE2AgQgAxCEgICAAEUNBAwCCwJAAkAgBkHwAU8NACAFIQYMAQsgCiAFIAtBRWoiAWoiBmshBCABQQJ0QYCIgIAAaigCACAFKAIAcUEBaiEHCwJAIAcgBE0NAANAIAggAGsgBEkNBSAAIAYgBBCBgICAACEAIAMoAgAiASABKAIAIgkgAygCDCIFaiIGNgIAIAFBBGoiASABKAIAIgogBWsiATYCACADIAE2AgwgACAEaiEAIAFFDQUgAyAJIApqNgIIIAcgBGshByABIQQgByABSw0ACyAIIABrIQkLIAkgB0kNAyAAIAYgBxCBgICAACAHaiEAIAMoAgggBiAHaiIBa0EESg0CIAMgATYCBCADEISAgIAADQEMAwsgACACayAGQQF0QaCIgIAAai8BACIBQQt2IgpBAnRBgIiAgABqKAIAIAUoAgBxIAFBgA5xaiIHQX9qTQ0CIAggAGshBAJAAkAgAUH/AXEiCUEQSw0AIAdBCEkNACAEQRBJDQAgACAAIAdrIgEoAgA2AgAgACABKAIENgIEIAAgASgCCDYCCCAAIAFBDGooAgA2AgwMAQsCQAJAAkAgBCAJQQpqSQ0AIAAgB2shBCAAIQEgCSEGIAdBB0wNAQwCCyAEIAlJDQUgCUEBaiEEQQAgB2shByAAIQEDQCABIAEgB2otAAA6AAAgAUEBaiEBIARBf2oiBEEBSw0ADAMLCwNAIAEgBCgCADYCACABIAQoAgQ2AgQgBiAHayEGIAEgB2oiASAEayIHQQhIDQALCyAGQQFIDQAgBkEIaiEHA0AgASAEKAIANgIAIAEgBCgCBDYCBCABQQhqIQEgBEEIaiEEIAdBeGoiB0EISw0ACwsgACAJaiEAIAMoAgggBSAKaiIBa0EESg0BIAMgATYCBCADEISAgIAARQ0CCyADKAIEIQEMAAsLIAMoAgAiASABKAIEIAMoAgwiBGs2AgQgASAEIAEoAgBqNgIAAkAgAy0AEA0AQX4hBAwBC0EAQX0gCCAARhshBAsgA0EgaiSAgICAACAEC7YDAQd/AkAgACgCBCIBIAAoAggiAkcNACAAKAIAIgIgAigCACIDIAAoAgwiBGoiATYCACACQQRqIgIgAigCACICIARrIgU2AgAgACAFNgIMAkAgAiAERw0AIABBAToAEEEADwsgACADIAJqIgI2AggLAkACQAJAIAIgAWsiAiABLQAAQQF0QaCIgIAAai8BAEELdkEBaiIFTw0AIABBEWogASACEIKAgIAAIQYgACgCDCEEQQAhByAAQQA2AgwgACgCACIBIAEoAgQgBGs2AgQgASAEIAEoAgBqIgM2AgADQCABQQRqKAIAIgFFDQMgBiACaiADIAUgAmsiBCABIAQgAUkbIgQQgYCAgAAaIAAoAgAiASABKAIEIARrNgIEIAEgASgCACAEaiIDNgIAIAQgAmoiAiAFSQ0ACyAAIAY2AgQgACAGIAVqNgIIDAELAkAgAkEESw0AIAAgAEERaiABIAIQgoCAgAAiASACajYCCCAAIAE2AgQgACgCDCECIABBADYCDCAAKAIAIgEgASgCBCACazYCBCABIAIgASgCAGo2AgAMAQsgACABNgIEC0EBIQcLIAcLC6gEAQBBgAgLoAQAAAAA/wAAAP//AAD///8A/////wAAAAAAAAAAAAAAAAEABAgBEAEgAgAFCAIQAiADAAYIAxADIAQABwgEEAQgBQAICAUQBSAGAAkIBhAGIAcACggHEAcgCAALCAgQCCAJAAQJCRAJIAoABQkKEAogCwAGCQsQCyAMAAcJDBAMIA0ACAkNEA0gDgAJCQ4QDiAPAAoJDxAPIBAACwkQEBAgEQAEChEQESASAAUKEhASIBMABgoTEBMgFAAHChQQFCAVAAgKFRAVIBYACQoWEBYgFwAKChcQFyAYAAsKGBAYIBkABAsZEBkgGgAFCxoQGiAbAAYLGxAbIBwABwscEBwgHQAICx0QHSAeAAkLHhAeIB8ACgsfEB8gIAALCyAQICAhAAQMIRAhICIABQwiECIgIwAGDCMQIyAkAAcMJBAkICUACAwlECUgJgAJDCYQJiAnAAoMJxAnICgACwwoECggKQAEDSkQKSAqAAUNKhAqICsABg0rECsgLAAHDSwQLCAtAAgNLRAtIC4ACQ0uEC4gLwAKDS8QLyAwAAsNMBAwIDEABA4xEDEgMgAFDjIQMiAzAAYOMxAzIDQABw40EDQgNQAIDjUQNSA2AAkONhA2IDcACg43EDcgOAALDjgQOCA5AAQPORA5IDoABQ86EDogOwAGDzsQOyA8AAcPPBA8IAEICA89ED0gARAJDz4QPiABGAoPPxA/IAEgCw9AEEAgAGQEbmFtZQE9BQARX193YXNtX2NhbGxfY3RvcnMBBm1lbWNweQIHbWVtbW92ZQMKdW5jb21wcmVzcwQKcmVmaWxsX3RhZwcSAQAPX19zdGFja19wb2ludGVyCQoBAAcucm9kYXRhADIJcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBDFVidW50dSBjbGFuZwsxNi4wLjYgKDE1KQAsD3RhcmdldF9mZWF0dXJlcwIrD211dGFibGUtZ2xvYmFscysIc2lnbi1leHQ=";async function zv(e){const{asyncBufferFromUrl:t,parquetQuery:r}=await Pe(async()=>{const{asyncBufferFromUrl:o,parquetQuery:c}=await import("./index-D5h2n3Yg.js");return{asyncBufferFromUrl:o,parquetQuery:c}},[],import.meta.url),s=await t({url:`https://raw.githubusercontent.com/DLCDOFFICIAL/RiskAssessmentViewer/main/dist/data/${e}`});return r({file:s,compressors:{SNAPPY:yZ()}})}async function wZ(e){console.time("LoadParquet TIME:");const t=await zv(e);console.timeEnd("LoadParquet TIME:"),console.time("Create Hex Store TIME:");const r={electric_transmission_lines:[],highway:[],tsunami_zone:[]},i={};t.forEach(o=>{const c=o.GRID_ID;i[c]||(i[c]=[]),i[c].push(o)});const s=Object.keys(i);return console.timeEnd("Create Hex Store TIME:"),{hexStore:i,uniqueHexes:s,flags_data:r}}function OC(e,t){e&&t.sort().forEach(r=>{const i=document.createElement("calcite-combobox-item");i.setAttribute("value",r);const s=PC(r);i.setAttribute("heading",s),e.append(i)})}function PC(e){if(!e)return"";const t={community_center_dist:"Community Center Distance",library_dist:"Library Distance",burn_prob:"Burn Probability",flame_length:"Flame Length"};return t[e]?t[e]:e.replace(/_/g," ").split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" ")}function DC(e,t){e&&e.addEventListener("calciteComboboxChange",()=>{var i;const r=((i=e.selectedItems)==null?void 0:i.map(s=>s.value))||[];t(r)})}function Kx(e,t,r){if(!e)return;const i=t.filter(s=>s.type===r).map(s=>s.value);OC(e,i)}async function bZ(e,t,r="places.parquet"){try{const s=(await zv(r)).map(o=>o.name);OC(e,s),DC(e,o=>{var f;const c=((f=o[0])==null?void 0:f.replaceAll(/[ /]/g,"_").toLowerCase())||null;t(c)})}catch(i){console.error("Failed to create place elements:",i)}}async function vZ(e,t,r="harms_assets.parquet"){try{const i=await zv(r),s=e.querySelector('calcite-combobox-item-group[label="Harms"]'),o=e.querySelector('calcite-combobox-item-group[label="Vulnerabilities"]');Kx(o,i,"asset"),Kx(s,i,"harm"),DC(e,c=>{t(c.length?c:null)})}catch(i){console.error("Failed to create indicator elements:",i)}}function SZ(e,t){const r=typeof e=="string"?document.getElementById(e):e;r&&r.addEventListener("calciteRadioButtonGroupChange",()=>{t(r.value)})}function T0(e){const t={q1:.25,q2:.5,q3:.75};return e<=t.q1?1:e<=t.q2?2:e<=t.q3?3:4}function o2(e){return{1:"0-25%",2:"25-50%",3:"50-75%",4:"75-100%"}[e]||null}function _Z(e,t,r){if(e==1){t[1]+=r;return}if(e==2){t[2]+=r;return}if(e==3){t[3]+=r;return}if(e==4){t[4]+=r;return}}const EZ=(e="ugb_pct_rank",t=[],r)=>{let i=0,s=0,o=0,c=0,f={1:"",2:"",3:"",4:""},w="";t.forEach(L=>{if(!r.has(L.var))return;const ee=L[e],ae=T0(ee),he=o2(ae);let ge=`${PC(L.var)}: ${he} <br>`;_Z(ae,f,ge),L.type==="harm"?(i+=ee,o+=1):(s+=ee,c+=1)}),Object.keys(f).sort((L,ee)=>ee-L).forEach(L=>{f[L]!==""&&(w+=f[L],f[L]="")});const v=o>0?i/o:0,_=c>0?s/c:0,$=T0(v),I=T0(_),k=o2($),N=o2(I),B=`${T0(_)},${T0(v)}`;return{avg_harms:k,avg_assets:N,quartile_string:B,displayString:w}};let $r=null,vi=null,Fi=null,Fc=null,ff=null,yf=!1,iA=null,Jw=null,FC="ugb_pct_rank";function xZ(e){e.when(()=>{e.watch("zoom",t=>{vi&&(t>=10?(vi.visible=!0,yf=!0,Fi.visible=!1):(vi.visible=!1,yf=!1,Fi.visible=!0))})})}function Xx(e,t){console.time("CREATE HEX LAYER");const r=e.map(i=>{const s={type:"polygon",rings:dZ(i,!0)},o={type:"simple-fill",color:[227,139,79,.6],outline:{color:[255,255,255,.8],width:1}};return new ur({geometry:s,symbol:o,attributes:{grid_id:i,hex_id:i,displayString:i,final_value_assets:0,final_value_harms:0}})});return console.timeEnd("CREATE HEX LAYER"),new Ee({objectIdField:"grid_id",opacity:.85,popupEnabled:!0,popupTemplate:{outFields:["*"],content:function(i){return i.graphic.attributes.displayString}},fields:[{name:"grid_id",type:"oid"},{name:"hex_id",type:"string"},{name:"final_value_harms",type:"double"},{name:"final_value_assets",type:"double"},{name:"compositeKey",type:"string"},{name:"displayString",type:"string"}],renderer:fZ(),source:r})}async function _d(e,t,r){e.visible=!1;const{indicators_set:i,region:s}=r;$r.extent,e.source.items.map(c=>{const f=c.attributes.hex_id,w=EZ(s,t[f],i);return c.attributes.final_value_harms=w.avg_harms,c.attributes.final_value_assets=w.avg_assets,c.attributes.compositeKey=w.quartile_string,c.attributes.displayString=w.displayString,{attributes:c.attributes}});const o=5e4;for(let c=0;c<e.source.items.length;c+=o){const f=e.source.items.slice(c,c+o).map(w=>({attributes:w.attributes}));await e.applyEdits({updateFeatures:f})}}function $Z(e){$r=e,$r.popup.dockEnabled=!0,$r.popup.featureNavigationEnabled=!1,$r.popup.autoCloseEnabled=!0,$r.popup.dockOptions={buttonEnabled:!1,breakpoint:!1},$r.popup.maxHeight=200,$r.on("click",async t=>{const r=await $r.hitTest(t);iA&&(iA.style.border="");let i=null;yf?i=vi:i=Fi;const s=r.results.filter(o=>o.graphic.layer===i);if(s.length>0){const o=s[0].graphic;o.attributes.hex_id;const c=o.attributes.compositeKey,f=document.getElementById(c);f.style.border="3px solid yellow",iA=f}}),zA(()=>$r.popup.visible,t=>{!t&&iA&&(iA.style.border="",iA=null)})}function RC(e){Jw=e}function TZ(e){FC=e}async function e$(e,t){Fi&&vi&&NC();const{hexStore:r,uniqueHexes:i,flags_data:s}=await wZ(e);t?(Fi=Xx(i,$r.map),ff=r,$r.map.add(Fi),await $r.whenLayerView(Fi).then(()=>{const o=Fi.fullExtent;o&&$r.goTo(o.expand(1.15))})):setTimeout(()=>{vi=Xx(i,$r.map),Fc=r,$r.map.add(vi),vi.visible=!1},0)}function IZ(){NC(),$r.goTo({center:[-120.5,44],zoom:6})}function MZ(){if(!vi||!Fc||!Jw)return;const e={indicators_set:new Set(Jw),region:FC};yf?(_d(vi,Fc,e),vi.visible=!0,_d(Fi,ff,e)):(_d(Fi,ff,e),Fi.visible=!0,_d(vi,Fc,e))}function NC(){vi&&$r.map.layers.remove(vi),Fi&&$r.map.layers.remove(Fi),vi=null,Fc=null,Fi=null,ff=null}const Ru=document.querySelector("#indicator-combobox"),CZ=document.querySelector("#place-combobox"),t$=document.querySelector("#comparison-region calcite-radio-button-group"),kZ=document.querySelector("arcgis-map"),Vv=kZ.view,OZ=document.getElementById("updateIndicatorsBtn");$Z(Vv);xZ(Vv);const jC=document.getElementById("legend-container");Vv.ui.add(jC,"bottom-left");jC.style.display="block";vZ(Ru,e=>{RC(e)});Ru.addEventListener("calciteComboboxChange",()=>{Ru.selectedItems.length===0&&RC([])});Ru.selectionDisplay="single";Ru.selectAllEnabled=!0;Ru.requestUpdate();bZ(CZ,async e=>{e?(await e$(`${e}_low.parquet`,!0),e$(`${e}.parquet`,!1)):IZ()});SZ(t$,()=>{TZ(t$.selectedItem.value)});OZ.addEventListener("click",()=>{MZ()});export{Xs as $,bte as A,u as B,le as C,gte as D,GM as E,y as F,ew as G,vte as H,ws as I,j as J,pa as K,gf as L,mY as M,oK as N,Ir as O,VF as P,Ab as Q,ct as R,Fs as S,PF as T,qi as U,Qr as V,gt as W,mp as X,tW as Y,Be as Z,Pe as _,Fv as a,vl as a$,sQ as a0,ty as a1,nq as a2,oq as a3,aq as a4,q as a5,Qu as a6,kI as a7,Rl as a8,Xee as a9,eH as aA,Wu as aB,ke as aC,mc as aD,I5 as aE,M5 as aF,T5 as aG,B7 as aH,MX as aI,P_ as aJ,XX as aK,cX as aL,IX as aM,dL as aN,_f as aO,k7 as aP,nt as aQ,nK as aR,pt as aS,Ce as aT,Qf as aU,ks as aV,ZV as aW,fr as aX,Br as aY,i4 as aZ,Qs as a_,Kee as aa,st as ab,ur as ac,wte as ad,Qee as ae,qc as af,Qte as ag,ZY as ah,hp as ai,Ni as aj,xl as ak,kn as al,xt as am,et as an,PT as ao,DT as ap,XW as aq,mH as ar,wC as as,oH as at,uH as au,pH as av,gC as aw,gH as ax,cH as ay,YW as az,fN as b,kR as b$,Q$ as b0,H$ as b1,op as b2,yb as b3,Ue as b4,P7 as b5,EW as b6,vn as b7,AK as b8,lK as b9,IL as bA,xf as bB,hb as bC,KX as bD,yp as bE,gp as bF,SX as bG,V$ as bH,a2 as bI,UZ as bJ,d$ as bK,hK as bL,b$ as bM,Vf as bN,Gf as bO,JN as bP,Xb as bQ,ev as bR,HN as bS,Cl as bT,vp as bU,rp as bV,dK as bW,Bt as bX,zA as bY,o_ as bZ,gr as b_,aK as ba,OF as bb,HY as bc,JY as bd,ha as be,dte as bf,Xo as bg,lM as bh,yte as bi,c9 as bj,rb as bk,ce as bl,tS as bm,Pn as bn,$u as bo,jK as bp,Ws as bq,YZ as br,it as bs,GZ as bt,M7 as bu,QN as bv,Vd as bw,Ure as bx,e4 as by,Bre as bz,rW as c,xr as c$,jb as c0,HT as c1,cf as c2,GU as c3,vF as c4,WY as c5,vG as c6,AF as c7,R6 as c8,DF as c9,Dv as cA,Pv as cB,fL as cC,q$ as cD,qte as cE,Sr as cF,FR as cG,v4 as cH,QK as cI,ti as cJ,kO as cK,QY as cL,xb as cM,mv as cN,yY as cO,ob as cP,ZI as cQ,gJ as cR,sJ as cS,cJ as cT,CC as cU,cI as cV,Zt as cW,hG as cX,cG as cY,cr as cZ,ir as c_,KY as ca,xn as cb,YY as cc,N6 as cd,gK as ce,BT as cf,UN as cg,LT as ch,Lc as ci,$5 as cj,EX as ck,Uj as cl,zs as cm,xm as cn,t5 as co,pp as cp,jL as cq,W9 as cr,Mn as cs,Nr as ct,jZ as cu,VK as cv,NZ as cw,YR as cx,Tn as cy,Wb as cz,zZ as d,Rte as d$,fi as d0,Wi as d1,uG as d2,JU as d3,$V as d4,HU as d5,qu as d6,dR as d7,pG as d8,n8 as d9,x_ as dA,yn as dB,Gc as dC,Wh as dD,Yt as dE,FW as dF,Je as dG,zY as dH,BY as dI,dre as dJ,UY as dK,lp as dL,ii as dM,FU as dN,mre as dO,lo as dP,pR as dQ,KK as dR,Sa as dS,JK as dT,DZ as dU,FZ as dV,ZK as dW,HX as dX,ree as dY,rN as dZ,Tq as d_,zK as da,Sf as db,dp as dc,Qc as dd,Zo as de,Xi as df,cN as dg,Bf as dh,Jb as di,pN as dj,TC as dk,FK as dl,tt as dm,Rc as dn,me as dp,It as dq,Ee as dr,fX as ds,VQ as dt,dX as du,_X as dv,Mr as dw,Sp as dx,tp as dy,ko as dz,fte as e,wN as e$,Cte as e0,oI as e1,_c as e2,so as e3,$q as e4,Nte as e5,jte as e6,Fre as e7,Nre as e8,Rre as e9,PI as eA,Lz as eB,wK as eC,tX as eD,m_ as eE,QT as eF,WT as eG,mK as eH,Az as eI,OI as eJ,DI as eK,GN as eL,xa as eM,$Q as eN,W as eO,hz as eP,xQ as eQ,Zf as eR,qZ as eS,Th as eT,Bv as eU,jt as eV,RZ as eW,Os as eX,yN as eY,Yb as eZ,gN as e_,Pre as ea,bre as eb,Ere as ec,$re as ed,uC as ee,HQ as ef,mh as eg,YK as eh,LK as ei,W$ as ej,Yq as ek,NU as el,Yee as em,VV as en,Zee as eo,zV as ep,f$ as eq,SO as er,Jte as es,Te as et,VL as eu,GL as ev,qL as ew,Ez as ex,BL as ey,xz as ez,sK as f,Td as f$,_l as f0,AT as f1,lJ as f2,LV as f3,rJ as f4,eG as f5,vJ as f6,SJ as f7,HS as f8,C6 as f9,vf as fA,Ct as fB,yG as fC,fG as fD,dG as fE,gre as fF,Aj as fG,tj as fH,e5 as fI,jee as fJ,zf as fK,gU as fL,NA as fM,C5 as fN,v$ as fO,Mm as fP,G0 as fQ,tf as fR,IK as fS,$O as fT,co as fU,C as fV,vh as fW,$A as fX,$w as fY,CI as fZ,BZ as f_,kJ as fa,rQ as fb,mG as fc,zh as fd,_J as fe,Xf as ff,Qx as fg,Lt as fh,Kg as fi,Kf as fj,Vu as fk,jH as fl,_p as fm,AG as fn,bn as fo,KQ as fp,Ur as fq,T_ as fr,gn as fs,VA as ft,iN as fu,va as fv,Js as fw,RA as fx,ip as fy,Tv as fz,Mb as g,MK as g$,nX as g0,EE as g1,xE as g2,ll as g3,TY as g4,wi as g5,KB as g6,sW as g7,QV as g8,Pq as g9,ar as gA,Nt as gB,Ji as gC,di as gD,Gq as gE,Hq as gF,pq as gG,gM as gH,yw as gI,lG as gJ,Ft as gK,Kq as gL,kq as gM,Oq as gN,bO as gO,Fq as gP,Rq as gQ,Wq as gR,Nq as gS,jq as gT,Lq as gU,Bq as gV,Uq as gW,zq as gX,Fr as gY,U7 as gZ,Nu as g_,xM as ga,Vq as gb,MJ as gc,hT as gd,bT as ge,PK as gf,UK as gg,Ire as gh,Cre as gi,Mre as gj,kre as gk,Tre as gl,pee as gm,Hi as gn,pte as go,zL as gp,L1 as gq,$X as gr,QX as gs,eee as gt,TK as gu,KZ as gv,q9 as gw,qee as gx,Gee as gy,ju as gz,mf as h,_Y as h$,RM as h0,k5 as h1,VY as h2,WZ as h3,HZ as h4,QZ as h5,JR as h6,Dl as h7,y$ as h8,eY as h9,eie as hA,vA as hB,nJ as hC,Vi as hD,L_ as hE,Se as hF,mr as hG,GK as hH,F9 as hI,gX as hJ,pX as hK,vX as hL,yK as hM,hR as hN,Yu as hO,sf as hP,yz as hQ,gs as hR,ft as hS,HK as hT,mN as hU,x7 as hV,tte as hW,T$ as hX,bG as hY,wX as hZ,J$ as h_,js as ha,oQ as hb,UL as hc,LL as hd,hH as he,PM as hf,qN as hg,KN as hh,Kw as hi,JZ as hj,Xw as hk,ZZ as hl,Hte as hm,Wte as hn,IM as ho,$M as hp,lv as hq,WX as hr,qX as hs,IW as ht,tre as hu,OM as hv,ub as hw,yA as hx,Si as hy,vr as hz,Ree as i,BV as i$,SY as i0,PV as i1,EY as i2,vY as i3,yX as i4,_R as i5,Ao as i6,Qq as i7,qY as i8,eQ as i9,Pl as iA,Sn as iB,MW as iC,bK as iD,xv as iE,NG as iF,Tb as iG,WK as iH,m$ as iI,ST as iJ,OK as iK,JT as iL,a_ as iM,IT as iN,qK as iO,Kt as iP,Zte as iQ,xV as iR,lf as iS,ai as iT,rA as iU,$7 as iV,G9 as iW,to as iX,Pu as iY,Gre as iZ,EV as i_,Gte as ia,Vte as ib,tY as ic,hY as id,Oc as ie,la as ig,nf as ih,bJ as ii,_7 as ij,fre as ik,LY as il,mz as im,lz as io,uz as ip,fY as iq,YX as ir,BW as is,LW as it,Gd as iu,qf as iv,TX as iw,fp as ix,Lte as iy,Are as iz,xe as j,ea as j$,UV as j0,XV as j1,GH as j2,aJ as j3,NX as j4,fK as j5,rz as j6,RK as j7,Lf as j8,TA as j9,qb as jA,$z as jB,_z as jC,Sz as jD,KL as jE,pK as jF,No as jG,iz as jH,cR as jI,Cee as jJ,kY as jK,Zu as jL,Gt as jM,PG as jN,OG as jO,mt as jP,Go as jQ,Ite as jR,Tte as jS,Bs as jT,DA as jU,Us as jV,i_ as jW,dee as jX,hee as jY,fee as jZ,bl as j_,Oj as ja,AN as jb,A5 as jc,wn as jd,lte as je,R5 as jf,vO as jg,Ate as jh,E5 as ji,Vj as jj,lX as jk,Mj as jl,Rj as jm,s5 as jn,rX as jo,z$ as jp,Zw as jq,eS as jr,V5 as js,NM as jt,zX as ju,UX as jv,QL as jw,Su as jx,GX as jy,VX as jz,UF as k,Qj as k$,cre as k0,pre as k1,hre as k2,pf as k3,wY as k4,ab as k5,ca as k6,sb as k7,nb as k8,iK as k9,Xh as kA,c1 as kB,h1 as kC,I$ as kD,SN as kE,XZ as kF,C7 as kG,g$ as kH,JX as kI,ZX as kJ,zz as kK,Uz as kL,O_ as kM,Pee as kN,bY as kO,VW as kP,iX as kQ,WE as kR,zE as kS,Lj as kT,VE as kU,oX as kV,ox as kW,GE as kX,qE as kY,xX as kZ,_re as k_,O7 as ka,zb as kb,DK as kc,dT as kd,BK as ke,yj as kf,fj as kg,XK as kh,QO as ki,p$ as kj,Wr as kk,Rr as kl,$H as km,CH as kn,mX as ko,TH as kp,MH as kq,iee as kr,nee as ks,tee as kt,TO as ku,rY as kv,IH as kw,Ea as kx,p1 as ky,Wt as kz,ire as l,aX as l0,ZE as l1,hx as l2,IE as l3,fx as l4,yx as l5,eL as l6,AX as l7,sX as l8,_1 as l9,Kte as lA,ere as lB,tie as lC,mx as la,uX as lb,nx as lc,Ax as ld,Ore as le,hf as lf,Dre as lg,IY as lh,$E as li,wre as lj,GY as lk,AW as ll,xre as lm,Cn as ln,da as lo,XN as lp,bX as lq,hX as lr,vq as ls,z3 as lt,Hee as lu,pU as lv,Ka as lw,Ote as lx,kte as ly,Bte as lz,Sl as m,J as n,Nee as o,Fl as p,NK as q,kl as r,re as s,CJ as t,rre as u,pr as v,se as w,mte as x,$f as y,TG as z};
