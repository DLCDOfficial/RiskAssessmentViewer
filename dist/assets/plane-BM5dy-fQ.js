import{cp as q,a6 as _}from"./index-DzoQLc5A.js";import{P as a,u as v,g as h,_ as x,c as O,H as g,A as X}from"./vec32-LyzMesOw.js";import{r as H,c as D}from"./vectorStacks-BcGsIGGR.js";function b(I=c){return[I[0],I[1],I[2],I[3]]}function k(I=c[0],n=c[1],r=c[2],N=c[3]){return L(I,n,r,N,H.get())}function d(I,n){return L(n[0],n[1],n[2],n[3],I)}function B(I){return I}function L(I,n,r,N,u=b()){return u[0]=I,u[1]=n,u[2]=r,u[3]=N,u}function j(I,n,r){const N=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],u=Math.abs(N-1)>1e-5&&N>1e-12?1/Math.sqrt(N):1;return r[0]=n[0]*u,r[1]=n[1]*u,r[2]=n[2]*u,r[3]=-(r[0]*I[0]+r[1]*I[1]+r[2]*I[2]),r}function w(I,n,r,N=b()){const u=r[0]-n[0],o=r[1]-n[1],t=r[2]-n[2],E=I[0]-n[0],P=I[1]-n[1],p=I[2]-n[2],U=o*p-t*P,C=t*E-u*p,l=u*P-o*E,A=U*U+C*C+l*l,F=Math.abs(A-1)>1e-5&&A>1e-12?1/Math.sqrt(A):1;return N[0]=U*F,N[1]=C*F,N[2]=l*F,N[3]=-(N[0]*I[0]+N[1]*I[1]+N[2]*I[2]),N}function y(I,n,r,N=0,u=Math.floor(r*(1/3)),o=Math.floor(r*(2/3))){if(r<3)return!1;n(S,N);let t=u,E=!1;for(;t<r-1&&!E;)n(i,t),t++,E=!g(S,i);if(!E)return!1;for(t=Math.max(t,o),E=!1;t<r&&!E;)n(f,t),t++,O(s,S,i),X(s,s),O(M,i,f),X(M,M),E=!g(S,f)&&!g(i,f)&&Math.abs(a(s,M))<z;return E?(w(S,i,f,I),!0):(N!==0||u!==1||o!==2)&&y(I,n,r,0,1,2)}const z=.99619469809,S=_(),i=_(),f=_(),s=_(),M=_();function G(I,n,r){return n!==I&&d(I,n),I[3]=-a(I,r),I}function J(I,n,r,N){return x(f,n,I),j(r,f,N)}function Q(I,n,r){return n!=null&&R(m(I,n.origin,n.direction,V,r))}function II(I,n,r){return R(m(I,n.origin,n.vector,T.NONE,r))}function nI(I,n,r){return R(m(I,n.origin,n.vector,T.CLAMP,r))}function rI(I,n){return $(I,n)>=0}function NI(I,n,r){const N=h(D.get(),I,-I[3]),u=K(I,O(D.get(),n,N),D.get());return v(r,u,N),r}function K(I,n,r){const N=h(D.get(),I,a(I,n));return O(r,n,N),r}function $(I,n){return a(I,n)+I[3]}var e;function R(I){return I===e.INTERSECTS_INSIDE_OUT||I===e.INTERSECTS_OUTSIDE_IN}function m(I,n,r,N,u){const o=a(I,r),t=$(I,n);if(o===0)return t>=0?e.INSIDE:e.OUTSIDE;let E=-t/o;return N&T.CLAMP&&(E=q(E,0,1)),!(N&T.INFINITE_MIN)&&E<0||!(N&T.INFINITE_MAX)&&E>1?t>=0?e.INSIDE:e.OUTSIDE:(v(u,n,h(u,r,E)),t>=0?e.INTERSECTS_INSIDE_OUT:e.INTERSECTS_OUTSIDE_IN)}(function(I){I[I.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",I[I.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",I[I.INSIDE=2]="INSIDE",I[I.OUTSIDE=3]="OUTSIDE"})(e||(e={}));const c=[0,0,1,0];var T;(function(I){I[I.NONE=0]="NONE",I[I.CLAMP=1]="CLAMP",I[I.INFINITE_MIN=4]="INFINITE_MIN",I[I.INFINITE_MAX=8]="INFINITE_MAX"})(T||(T={}));T.INFINITE_MIN|T.INFINITE_MAX;const V=T.INFINITE_MAX;export{k as D,NI as H,b as M,B as O,J as P,L as U,d as h,Q as q,y as v,nI as w,II as x,G as y,rI as z};
