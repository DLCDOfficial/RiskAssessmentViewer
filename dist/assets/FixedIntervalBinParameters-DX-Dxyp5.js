const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./geodesicBufferOperator-fUyiova5.js","./index-DzoQLc5A.js","./index-FMl8DCyv.css","./operatorGeodesicBuffer-CDKSUYkc.js","./SimpleGeometryCursor-B92kdZ15.js","./geodeticCurveType-CirnHLSB.js"])))=>i.map(i=>d[i]);
import{L as H,cA as ee,cb as k,aj as b,iu as U,al as $,fY as Z,fX as te,iv as re,K as ie,iw as ne,X as se,aS as S,ix as ae,ai as oe,c1 as O,_ as le,aD as E,s as ue,cj as L,aF as pe,bT as me,aQ as R,w as _,B as n,F as o,aT as f,J as v,aY as w,iy as J,dw as T,fq as ye}from"./index-DzoQLc5A.js";import{R as ce}from"./normalizeUtils-PTTPU64I.js";import{t as V}from"./json-Wa8cmqdu.js";const F=[0,0];function C(e,t){if(!t)return null;if("x"in t){const r={x:0,y:0};return[r.x,r.y]=e(t.x,t.y,F),t.z!=null&&(r.z=t.z),t.m!=null&&(r.m=t.m),r}if("xmin"in t){const r={xmin:0,ymin:0,xmax:0,ymax:0};return[r.xmin,r.ymin]=e(t.xmin,t.ymin,F),[r.xmax,r.ymax]=e(t.xmax,t.ymax,F),t.hasZ&&(r.zmin=t.zmin,r.zmax=t.zmax,r.hasZ=!0),t.hasM&&(r.mmin=t.mmin,r.mmax=t.mmax,r.hasM=!0),r}return"rings"in t?{rings:M(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:M(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:K(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function M(e,t){const r=[];for(const i of e)r.push(K(i,t));return r}function K(e,t){const r=[];for(const i of e){const s=t(i[0],i[1],[0,0]);r.push(s),i.length>2&&s.push(i[2]),i.length>3&&s.push(i[3])}return r}async function Q(e,t){if(!e||!t)return;const r=Array.isArray(e)?e.map((i=>i.geometry!=null?i.geometry.spatialReference:null)).filter(H):[e];await ee(r.map((i=>({source:i,dest:t}))))}const W=C.bind(null,te),X=C.bind(null,re);function Y(e,t,r,i){if(!e)return null;if(r||(r=t,t=e.spatialReference),!k(t)||!k(r)||b(t,r))return e;if(U(t,r)){const s=$(r)?W(e):X(e);return s.spatialReference=r,s}return Z(V,[e],t,r,null,i)[0]}class de{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,r,i,s){if(!(t!=null&&t.length)||!r||!i||b(r,i))return t;const l={geometries:t,inSpatialReference:r,outSpatialReference:i,geographicTransformation:s,resolve:ie()};return this._jobs.push(l),this._timer??(this._timer=setTimeout(this._process,10)),l.resolve.promise}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:r,inSpatialReference:i,outSpatialReference:s,resolve:l,geographicTransformation:u}=t;U(i,s)?$(s)?l(r.map(W)):l(r.map(X)):l(Z(V,r,i,s,u,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const fe=new de;function ke(e,t,r,i){return fe.push(e,t,r,i)}const he=new S({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),A=Object.freeze({}),ve="frequency";async function Oe(e,t,r){var s,l;const i=e.bin;return i.onField&&(i.onField=i.onField.trim()),(s=i.onExpression)!=null&&s.value&&(i.onExpression.value=i.onExpression.value.trim()),i.splitBy&&(i.splitBy.value&&(i.splitBy.value=i.splitBy.value.trim()),i.splitBy.outAlias&&(i.splitBy.outAlias=i.splitBy.outAlias.trim())),i.stackBy&&(i.stackBy.value&&(i.stackBy.value=i.stackBy.value.trim()),i.stackBy.outAlias&&(i.stackBy.outAlias=i.stackBy.outAlias.trim())),"normalizationField"in i.parameters&&i.parameters.normalizationField&&(i.parameters.normalizationField=i.parameters.normalizationField.trim()),(l=e.outStatistics)!=null&&l.length||(e.outStatistics=[{statisticType:"count",onStatisticField:"1",outStatisticFieldName:ve}]),ge(e,t,r)}async function ge(e,t,r){const{outFields:i,orderByFields:s,groupByFieldsForStatistics:l,outStatistics:u}=e;if(i)for(let a=0;a<i.length;a++)i[a]=i[a].trim();if(s)for(let a=0;a<s.length;a++)s[a]=s[a].trim();if(l)for(let a=0;a<l.length;a++)l[a]=l[a].trim();if(u)for(let a=0;a<u.length;a++)u[a].onStatisticField&&(u[a].onStatisticField=u[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),xe(e,t,r)}async function xe(e,t,r){var l;if(!e)return null;let{where:i}=e;if(e.where=i=i==null?void 0:i.trim(),(!i||/^1 *= *1$/.test(i)||t&&t===i)&&(e.where=null),!e.geometry)return e;let s=await Be(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:u}=e.geometry;s=ne(s),s.spatialReference=u}if(s){await Q(s.spatialReference,r),s=we(s,r);const u=(await ce(se(s)))[0];if(u==null)throw A;const a="quantizationParameters"in e&&((l=e.quantizationParameters)==null?void 0:l.tolerance)||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,g=a&&G(s,r)?{densificationStep:8*a}:void 0,D=u.toJSON(),j=Y(D,D.spatialReference,r,g);if(!j)throw A;j.spatialReference=r,e.geometry=j}return e}function G(e,t){if(!e)return!1;const r=e.spatialReference;return(L(e)||E(e)||pe(e))&&!b(r,t)&&!me(r,t)}function we(e,t){const r=e.spatialReference;return G(e,t)&&L(e)?{spatialReference:r,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function Be(e){const{distance:t,units:r}=e,i=e.geometry;if(t==null||"vertexAttributes"in i)return i;const s=i.spatialReference,l=r?he.fromJSON(r):ae(s),u=s&&(oe(s)||$(s))?i:await Q(s,O).then((()=>Y(i,O))),a=await le(()=>import("./geodesicBufferOperator-fUyiova5.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);await a.load();const g=a.execute(u,t||1,{unit:l})??void 0;if(!g||!E(g)||g.rings.length===0)throw new ue("unsupported-query:invalid-parameters","Invalid parameters for query by distance");return g}function Me(e,t){return e==null?null:typeof e=="string"?t?new Date(`1970-01-01T${e}Z`).getTime():new Date(e).getTime():e instanceof Date?e.getTime():e}const Se=new S({esriFieldTypeInteger:"integer",esriFieldTypeString:"string"});let y=class extends R.ClonableMixin(_){constructor(t){super(t),this.alias=null,this.responseType=null,this.type=null,this.value=null,this.valueType=null}};n([o({type:String,json:{name:"outAlias",write:!0}})],y.prototype,"alias",void 0),n([o({type:String})],y.prototype,"responseType",void 0),n([o({type:String,json:{write:!0}})],y.prototype,"type",void 0),n([o({type:String,json:{write:!0}})],y.prototype,"value",void 0),n([f(Se)],y.prototype,"valueType",void 0),y=n([v("esri.rest.support.AttributeBinsGrouping")],y);const B=y;y.from=w(y);const Te=new S({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeDate:"date",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"}),je=new S({naturalLog:"natural-log",squareRoot:"square-root"});let p=class extends R.ClonableMixin(_){constructor(e){super(e),this.expression=null,this.expressionValueType=null,this.field=null,this.firstDayOfWeek=null,this.hideUpperBound=null,this.splitBy=null,this.stackBy=null,this.transformation=null}};n([o({type:String,json:{name:"onExpression.value",write:!0}})],p.prototype,"expression",void 0),n([f(Te,{name:"onExpression.valueType"})],p.prototype,"expressionValueType",void 0),n([o({type:String,json:{name:"onField",write:!0}})],p.prototype,"field",void 0),n([o({type:String,json:{write:!0}})],p.prototype,"firstDayOfWeek",void 0),n([o({type:String,json:{write:!0}})],p.prototype,"hideUpperBound",void 0),n([o({type:B,json:{write:{overridePolicy(){var e,t;return{enabled:((e=this.splitBy)==null?void 0:e.value)!=null||((t=this.splitBy)==null?void 0:t.type)!=null}}}}})],p.prototype,"splitBy",void 0),n([o({type:B,json:{write:{target:{stackBy:{type:B},jsonStyle:{type:String}},writer:(e,t)=>{e&&(t.stackBy=e.toJSON(),e.responseType!=null&&(t.jsonStyle=e.responseType))},overridePolicy(){var e,t;return{enabled:((e=this.stackBy)==null?void 0:e.value)!=null||((t=this.stackBy)==null?void 0:t.type)!=null}}},read:{source:["stackBy","jsonStyle"],reader:(e,t)=>B.fromJSON({...t.stackBy,responseType:t.jsonStyle})}}})],p.prototype,"stackBy",void 0),n([f(je)],p.prototype,"transformation",void 0),p=n([v("esri.rest.support.BinParametersBase")],p);function z(e,t,r){T(r,e instanceof Date?e.getTime():e,t)}let c=class extends J(p){constructor(t){super(t),this.numBins=null,this.end=null,this.start=null,this.type="auto-interval"}};n([o({type:Number,json:{name:"parameters.numberOfBins",write:!0}})],c.prototype,"numBins",void 0),n([o({json:{name:"parameters.end",write:{writer:z}}})],c.prototype,"end",void 0),n([o({json:{name:"parameters.start",write:{writer:z}}})],c.prototype,"start",void 0),n([f({autoIntervalBin:"auto-interval"},{readOnly:!0})],c.prototype,"type",void 0),c=n([v("esri.rest.support.AutoIntervalBinParameters")],c),c.from=w(c);const Fe=ye()({year:"years",quarter:"quarters",month:"months",week:"weeks",day:"days",hour:"hours",minute:"minutes",second:"seconds"});let h=class extends R.ClonableMixin(_){constructor(t){super(t),this.value=null,this.unit=null}};n([o({type:Number,json:{name:"number",write:!0}})],h.prototype,"value",void 0),n([f(Fe)],h.prototype,"unit",void 0),h=n([v("esri.rest.support.DateBinTimeInterval")],h);const I=h;h.from=w(h);function P(e,t,r){T(r,typeof e=="string"?e:e==null?void 0:e.getTime(),t)}function N(e,t){const r=e.parameters[t];return r?typeof r=="string"?r:new Date(r):null}let m=class extends p{constructor(t){super(t),this.end=null,this.interval=null,this.offset=null,this.returnFullIntervalBin=!1,this.start=null,this.snapToData=null,this.type="date"}};n([o({cast:e=>e!=null?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.end",read:{reader:(e,t)=>N(t,"end")},write:{writer:P}}})],m.prototype,"end",void 0),n([o({type:I,json:{name:"parameters",write:!0}})],m.prototype,"interval",void 0),n([o({type:I,json:{name:"parameters.offset",write:!0}})],m.prototype,"offset",void 0),n([o({type:Boolean,json:{name:"parameters.returnFullIntervalBin",write:!0}})],m.prototype,"returnFullIntervalBin",void 0),n([o({cast:e=>e!=null?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.start",read:{reader:(e,t)=>N(t,"start")},write:{writer:P}}})],m.prototype,"start",void 0),n([o({type:String,json:{name:"parameters.snapToData",write:!0}})],m.prototype,"snapToData",void 0),n([f({dateBin:"date"},{readOnly:!0})],m.prototype,"type",void 0),m=n([v("esri.rest.support.DateBinParameters")],m),m.from=w(m);function be(e){return e[0]instanceof Date}function $e(e,t,r){T(r,e&&be(e)?e.map((i=>i.getTime())):e,t)}let x=class extends p{constructor(t){super(t),this.boundaries=[],this.type="fixed-boundaries"}};n([o({json:{name:"parameters.boundaries",write:{writer:$e}}})],x.prototype,"boundaries",void 0),n([f({fixedBoundariesBin:"fixed-boundaries"},{readOnly:!0})],x.prototype,"type",void 0),x=n([v("esri.rest.support.FixedBoundariesBinParameters")],x),x.from=w(x);function q(e,t,r){T(r,e instanceof Date?e.getTime():e,t)}let d=class extends J(p){constructor(e){super(e),this.end=null,this.interval=null,this.start=null,this.type="fixed-interval"}};n([o({json:{name:"parameters.end",write:{writer:q}}})],d.prototype,"end",void 0),n([o({type:Number,json:{name:"parameters.interval",write:!0}})],d.prototype,"interval",void 0),n([o({json:{name:"parameters.start",write:{writer:q}}})],d.prototype,"start",void 0),n([f({fixedIntervalBin:"fixed-interval"},{readOnly:!0})],d.prototype,"type",void 0),d=n([v("esri.rest.support.FixedIntervalBinParameters")],d),d.from=w(d);export{xe as B,A as S,m as a,c as b,ge as c,ke as d,he as g,Me as h,Y as j,d as m,x as n,Fe as s,Oe as w,Q as x,p as y};
