const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WhereClauseCache-DOjtGize.js","./WhereClause-BMNqinzW.js","./arcadeUtils-DkAuahqe.js","./arcade-BW2XYcer.js","./aiServices-m_n14f1F.js","./ImmutableArray-BPVd6ESQ.js","./shared-BP5E8iZN.js","./number-0XJjYpJh.js","./commonProperties-DHiB1uzW.js","./featureConversionUtils-D-LqQla5.js","./OptimizedFeature-BX2Fv57A.js","./memoryEstimations-FXmOR3Da.js","./OptimizedFeatureSet-BR8EEvDc.js","./unitConversion-Bk3Wy7HF.js","./batchExec-BGdKqjsD.js","./QueueProcessor-C20k4M9F.js","./IdentityManager-DGFZGQxo.js","./substitute-a26Eclsh.js","./ElevationLayer-Bj5o9X6g.js","./ArcGISCachedService-C8Rm5HbE.js","./TileInfoTilemapCache-BXWI3JZl.js","./TilemapCache-ByzCDpR-.js","./ByteSizeUnit-BsxeN7wM.js","./WorkerHandle-DaPftS32.js","./webStyleSymbolUtils-COzWNGhD.js","./devEnvironmentUtils-BfO8ai13.js","./portalLayers-BMwJ3faq.js","./associatedFeatureServiceUtils-Hw6BWDwo.js","./fetchService-BvdBXm7w.js","./loadUtils-C5ijQS2p.js","./lazyLayerLoader-C6BysIZi.js","./arcgisLayers-CAHlDg8N.js","./statsWorker-DXQeTEr8.js","./utils-Cxe9WjVo.js","./quantizationUtils-DYQAh1iP.js","./utils-CBZW4JOx.js","./utils-DsWcl2LX.js","./ClassBreaksDefinition-t2eZJFj7.js","./geometryEngineWorker-C3Rv6yWF.js","./geometryEngineJSON-DGETChXf.js","./geometryEngineBase-BV9OKxkg.js","./_commonjsHelpers-BcY2WciP.js","./index-BbP3371Q.js","./json-Wa8cmqdu.js","./CSVSourceWorker-BlENB1Ck.js","./date-Ctp1FiBW.js","./executeQueryForSnapping-vVba2f_L.js","./queryUtils-B9c19Zb-.js","./QueryEngine-B1ev4RcY.js","./timeSupport-DatnoGP0.js","./QueryEngineCapabilities-CsRUnGk7.js","./SnappingCandidate-DGkpYqI6.js","./FixedIntervalBinParameters-DjQIUiUf.js","./FeatureStore-CmU8msTx.js","./BoundsStore-BJhnv-Xs.js","./PooledRBush-DHs9vrXE.js","./optimizedFeatureQueryEngineAdapter-B67zsj_1.js","./clientSideDefaults-DHi-q5qv.js","./EdgeProcessingWorker-zhkwon2o.js","./workerHelper-XDCDBAUX.js","./InterleavedLayout-Bu3L8Yon.js","./BufferView-BiaPvrYH.js","./types-BKo2foNY.js","./edgeProcessing-C-VptJrX.js","./deduplicate-DcsG6PtB.js","./Indices-D7SwbwlE.js","./VertexAttribute-BfkzOMLV.js","./glUtil-BwK5JhCm.js","./VertexElementDescriptor-BLyltQyJ.js","./Normals-TvKR058D.js","./ElevationSamplerWorker-BOjjKChF.js","./MeshLocalVertexSpace-C3oh9adx.js","./vertexSpaceConversion-BUfQ8qzg.js","./mat3f64-B5o_lm6j.js","./mat4f64-q_b6UJoq.js","./spatialReferenceEllipsoidUtils-B4lMglMW.js","./computeTranslationToOriginAndRotation-BxQClubn.js","./projectPointToVector-p3v2Hsyu.js","./meshVertexSpaceUtils-BmvQZWtm.js","./vec3-DtAX4KKr.js","./vec4-DAjf4H-U.js","./FeatureServiceSnappingSourceWorker-BIk-YaV5.js","./symbologySnappingCandidates-CZrpFwPd.js","./pbfQueryUtils-baxiGRf8.js","./pbf-Cob5seTN.js","./query-Baxi3Vsa.js","./GeoJSONSourceWorker-Bna9FYYg.js","./geojson-aMvaetgW.js","./sourceUtils-B_hZ2qAi.js","./MemorySourceWorker-BfaiqX8Y.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-DTbTae4e.js","./dehydratedFeatures-CQI1jAkX.js","./FeaturePipelineWorker-DsIOT9ut.js","./AttributeStore-zactQsLn.js","./Utils-DGWfgZwY.js","./UpdateTracking2D-CrPW6Fbp.js","./BidiEngine-QXap_35O.js","./GeometryUtils-BgMDhw--.js","./rasterizingUtils-CEtLB04z.js","./floatRGBA-CnmNbjHp.js","./Rect-CUzevAry.js","./constants-BFLErLYb.js","./streamLayerUtils-CKwt2uXH.js","./MeshWriterRegistry-DehXyNFi.js","./TechniqueType-pk2C5RYg.js","./PieChartMeshWriter-CSYN4p0J.js","./libtess-CxREXcRb.js","./earcut-D9gy186-.js","./operatorGeodeticDensify-Ytx8UJhf.js","./SimpleGeometryCursor-B92kdZ15.js","./geodeticCurveType-CirnHLSB.js","./normalizeUtilsSync-CyN8a5rH.js","./ogcFeatureUtils-Cezsq5ce.js","./bundle-f9Aq1vvB.js","./CircularArray-CujHzHWW.js","./createConnection-DWoN8LxZ.js","./PointCloudWorker-DkLiMPa3.js","./quat-CA25Wx6V.js","./quatf64-aQ5IuZRd.js","./vec3f32-WCVSSNPR.js","./PointCloudUniqueValueRenderer-imHQGep5.js","./I3SBinaryReader-BBRUWBRS.js","./orientedBoundingBox-DhbIkeZV.js","./plane-B1JluO_q.js","./vectorStacks-DtvicEBJ.js","./RasterWorker-Cm_en9e1.js","./GeographicTransformation-C1nVX2ka.js","./dataUtils-C9mgDq1Z.js","./RasterSymbolizer-DPT28sAx.js","./colorUtils-CZMGde11.js","./rasterFunctionHelper-Bhcmav1K.js","./clipUtils-DFGbJ1Ti.js","./rasterProjectionHelper-BqXro79d.js","./PolynomialTransform-DaByuwdP.js","./SceneLayerSnappingSourceWorker-Cj0xert1.js","./lineSegment-BGqxwoO-.js","./sphere-Db9vA9gR.js","./Octree-Dfxmd_-G.js","./SceneLayerWorker-DeyMPiNJ.js","./projectVectorToVector-DUWsiXF7.js","./I3SUtil-DMoBvgQk.js","./edgeUtils-X-x2jB9l.js","./NormalAttribute.glsl-H_2Nd7bM.js","./glsl-Cj7KC756.js","./ShaderOutput-Bdd80V3g.js","./BindType-BBwFZqyN.js","./WFSSourceWorker-DhHzbcNw.js","./wfsUtils-tbYc3Kfo.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-DvpVDJda.js","./constants-BwsikM5h.js","./config-DHajyIwB.js","./StyleDefinition-f_gPAELT.js","./SourceLayerData-BK_8CgUA.js","./StyleRepository-C1YpH6BO.js","./Feature3DPipelineWorker-BbPx_AvN.js","./dehydratedFeatureUtils-B1QJSBSv.js","./hydratedFeatures-BNFUGBjK.js","./OutputColorHighlightOID.glsl-B8By6aT3.js","./videoUtils-BZvP_p_I.js","./requestImageUtils-BcI6dEM7.js","./basicInterfaces-N86vRvDz.js","./TextureFormat-1mYWTFa-.js","./triangle-Cqw4ilqK.js","./renderState-D7mbBu9b.js","./boundedPlane-B0ipr0Ph.js","./HUDMaterial.glsl-BDtn65f_.js","./ShaderBuilder-DXsnQGVy.js","./DefaultMaterial-BgnLp4jp.js","./HUDMaterial-BzXib2sj.js","./primitiveObjectSymbolUtils-B8xAYjCb.js","./IntersectorType-gQim6TH1.js","./TextureCompressionWorker-CWe6ju8x.js","./OverrideHelper-CIdCg6FM.js","./layersLoader-DQNk7xYu.js","./featureUtils-6dw3Aud_.js","./featureLayerUtils-BC5Zgmn6.js","./originUtils-Bk7oQ_Q-.js","./utils-OlhsSe4a.js","./saveUtils-DQaF9zXZ.js","./FeatureLayerSource-C8Ftukyp.js","./External-D08viG82.js","./applyEditsUtils-DTnC1aRu.js","./MeshTransform-DUtpdOAZ.js","./axisAngleDegrees-aDHu3agJ.js","./editingSupport-ChHajdTo.js","./QueryTask-CRh1zqA_.js","./executeForIds-abu_XYLa.js","./executeQueryJSON-Dbeke5MY.js","./AttributeBinsQuery-CPvW6nix.js","./Popup-CaNNh6jG.js","./unitFormatUtils-DNCrXMbD.js","./quantityUtils-DlsjHcqC.js","./AttachmentInfo-DDDG0ZLq.js","./utils-jkmNxsH5.js","./cimSymbolUtils-DcmJzgqu.js","./ReactiveSet-OngasGhM.js","./symbolUtils-BHpWypD6.js","./layerViewUtils-SF5bL8Ka.js","./layersCreator-D-MkJNrY.js","./webglDeps-BZ9ojuHp.js","./ProgramTemplate-Che9rOmH.js","./FramebufferObject-ZmAZjrDN.js","./NestedMap-BVvDppQU.js","./mapViewDeps-EFNVvGjo.js","./FeatureCommandQueue-Da6i38xy.js","./GraphShaderModule-9Z6HqME0.js","./utils-C6AK1f7c.js","./WGLContainer-5LhyvvwX.js","./Container-v9yzY8uQ.js","./SDFHelper-DbPRech8.js","./GridShader-DZZR6yYk.js","./testSVGPremultipliedAlpha-BIGWsNJc.js","./SymbolFader-COgiyo-F.js","./RenderingContext-BNXDwkgh.js","./CIMResourceManager-CRMlWRyU.js","./utils-Dtvt3ykd.js","./utils-ehcGqGxa.js","./projectOperator-Jnkzcqce.js","./GraphicsView2D-3WbGhRt9.js","./GraphicContainer-D-E4u43H.js","./AGraphicContainer-BYKNgY22.js","./TechniqueInstance-BeHEh4gi.js","./TileContainer-CdIB8rHq.js","./gridUtils-HfborUhV.js","./geodesicUtils-DJb18wBW.js","./TileLayerView2D-CVTgZBVw.js","./imageUtils-kaFzUrOg.js","./BitmapTechnique-DrKfLgLd.js","./bitmapUtils-BU8mNbMA.js","./LayerView-DktjoXem.js","./HighlightGraphicContainer-DolQO15H.js","./RefreshableLayerView-CsPCPCcC.js","./MapServiceLayerViewHelper-CTxYWz_R.js","./floorFilterUtils-MtPgm5NF.js","./drapedUtils-BCTwlfiF.js","./sublayerUtils-D2C4thEk.js","./popupUtils-C8RxDmzv.js","./FeatureLayerView2D-BfhMOyhJ.js","./timeSupport-DtmAC3K2.js","./AttributeBinsFeatureSet-DqJuGrJo.js","./constants-B4mRqufT.js","./BaseDynamicLayerView2D-D4fBFIjg.js","./BitmapContainer-DYoOEgtD.js","./ExportStrategy-4NVlTtKL.js","./CatalogLayerView2D-CAYmR_Lm.js","./CatalogDynamicGroupLayerView2D-CYyXUrar.js","./CatalogFootprintLayerView2D-B2J7ehSx.js","./GeoRSSLayerView2D-BZi-PDoa.js","./GraphicsLayerView2D-DKWdOO03.js","./GroupLayerView2D-Bt9RekvM.js","./ImageryLayerView2D-CVozHDBx.js","./RasterVFDisplayObject-B4_qamvK.js","./ImageryTileLayerView2D-BmlYrsk-.js","./rasterFieldUtils-BQ5QDfjp.js","./rasterUtils-CtznV39r.js","./RawBlockCache-BWo9J65G.js","./KMLLayerView2D-Cdwx0d8v.js","./kmlUtils-C1O-HlBo.js","./KnowledgeGraphLayerView2D-gU-UJwOW.js","./MapImageLayerView2D-Bv8yOdzd.js","./ExportImageParameters-Q3OvVZOD.js","./MapNotesLayerView2D-Cy3y0GKz.js","./MediaLayerView2D-CfLkPPew.js","./mediaLayerUtils-CkodikAy.js","./OverlayContainer-CUBr_xUD.js","./OGCFeatureLayerView2D-2YzF01Qo.js","./RouteLayerView2D-BfHzu-0U.js","./Stop-C8BS64NN.js","./networkEnums-D-W5WDRG.js","./StreamLayerView2D-DzEsV0dQ.js","./SubtypeGroupLayerView2D-BURNzTon.js","./VectorTileLayerView2D-s1x0zyXn.js","./VideoLayerView2D-DlWIY5c-.js","./GraphicsLayer-C7OxbiE8.js","./videoUtils-gC3jovXe.js","./WMSLayerView2D-CDsfO3u-.js","./ExportWMSImageParameters-D8Ph-idd.js","./WMTSLayerView2D-C5PorHaT.js","./apng-BVz8s8td.js","./webdocSaveUtils-FjlU6KTV.js","./resourceUtils-BOrQg7ej.js","./resourceUtils-DBvQjvBb.js","./queryAssociations-C4op-eEs.js","./Association-BIn3bgj5.js","./synthesizeAssociationGeometries-X4Go3z1i.js"])))=>i.map(i=>d[i]);
var JK=Object.getPrototypeOf;var ZK=Reflect.get;var IP=e=>{throw TypeError(e)};var _T=(e,t,r)=>t.has(e)||IP("Cannot "+r);var Y=(e,t,r)=>(_T(e,t,"read from private field"),r?r.call(e):t.get(e)),Ue=(e,t,r)=>t.has(e)?IP("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Oe=(e,t,r,i)=>(_T(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Pi=(e,t,r)=>(_T(e,t,"access private method"),r);var ST=(e,t,r)=>ZK(JK(e),r,t);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();function a(e,t,r,i){var s,n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function vke(e,t){return function(r,i){t(r,i,e)}}function wke(e,t,r,i){function s(n){return n instanceof r?n:new r((function(o){o(n)}))}return new(r||(r=Promise))((function(n,o){function l(v){try{m(i.next(v))}catch(_){o(_)}}function p(v){try{m(i.throw(v))}catch(_){o(_)}}function m(v){v.done?n(v.value):s(v.value).then(l,p)}m((i=i.apply(e,[])).next())}))}function bke(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:i,async:r})}return t}var YK=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function _ke(e){function t(n){e.error=e.hasError?new YK(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}var r,i=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&i===1)return i=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var n=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(n).then(s,(function(o){return t(o),s()}))}else i|=1}catch(o){t(o)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}let gc;function K(e){return typeof gc[e]=="function"?gc[e]=gc[e](globalThis):gc[e]}var $9,x9,I9,M9;gc=($9=globalThis.dojoConfig)!=null&&$9.has||(x9=globalThis.esriConfig)!=null&&x9.has?{...(I9=globalThis.dojoConfig)==null?void 0:I9.has,...(M9=globalThis.esriConfig)==null?void 0:M9.has}:{},K.add=(e,t,r,i)=>{(i||gc[e]===void 0)&&(gc[e]=t),r&&K(e)},K.cache=gc,K.add("big-integer-warning-enabled",!0),K.add("esri-deprecation-warnings",!0),K.add("esri-tests-disable-screenshots",!1),K.add("esri-tests-use-full-window",!1),K.add("esri-tests-post-to-influx",!0),K.add("esri-cim-animations-enable-status","enabled"),K.add("esri-cim-animations-spotlight",!1),K.add("esri-cim-animations-freeze-time",!1),(()=>{var t;K.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(K.add("host-browser",e),K.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),K.add("dom",e),K("host-browser")){const r=navigator,i=r.userAgent,s=r.appVersion,n=parseFloat(s);if(K.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),K.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),K.add("khtml",s.includes("Konqueror")?n:void 0),K.add("edge",parseFloat(i.split("Edge/")[1])||void 0),K.add("opr",parseFloat(i.split("OPR/")[1])||void 0),K.add("webkit",!K("wp")&&!K("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),K.add("chrome",!K("edge")&&!K("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),K.add("android",!K("wp")&&parseFloat(i.split("Android ")[1])||void 0),K.add("safari",!s.includes("Safari")||K("wp")||K("chrome")||K("android")||K("edge")||K("opr")?void 0:parseFloat(s.split("Version/")[1])),K.add("mac",s.includes("Macintosh")),!K("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),l=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",p=parseFloat(l.replace(/_/,".").replaceAll("_",""));K.add(o,p),K.add("ios",p)}K("webkit")||(!i.includes("Gecko")||K("wp")||K("khtml")||K("edge")||K.add("mozilla",n),K("mozilla")&&K.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&K.add("esri-mobile",t),r&&K.add("esri-iPhone",r),K.add("esri-geolocation",!!navigator.geolocation)}K.add("esri-wasm","WebAssembly"in globalThis),K.add("esri-performance-mode-frames-between-render",20),K.add("esri-force-performance-mode",!1),K.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t})),K.add("wasm-simd",(()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))})),K.add("esri-atomics","Atomics"in globalThis),K.add("esri-workers","Worker"in globalThis),K.add("web-feat:cache","caches"in globalThis),K.add("esri-workers-arraybuffer-transfer",!K("safari")||Number(K("safari"))>=12),K.add("workers-pool-size",8),K.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),K.add("featurelayer-simplify-payload-size-factors",[1,1,4]),K.add("featurelayer-fast-triangulation-enabled",!0),K.add("featurelayer-animation-enabled",!0),K.add("featurelayer-snapshot-enabled",!0),K.add("featurelayer-snapshot-initial-tolerance",0),K.add("featurelayer-snapshot-point-min-threshold",8e4),K.add("featurelayer-snapshot-point-max-threshold",4e5),K.add("featurelayer-snapshot-multipoint-min-threshold",2e4),K.add("featurelayer-snapshot-multipoint-max-threshold",1e5),K.add("featurelayer-snapshot-polygon-min-threshold",1e3),K.add("featurelayer-snapshot-polygon-max-threshold",2e3),K.add("featurelayer-snapshot-polyline-min-threshold",1e3),K.add("featurelayer-snapshot-polyline-max-threshold",2e3),K.add("featurelayer-snapshot-max-vertex-count",25e4),K.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),K.add("featurelayer-snapshot-concurrency",4),K.add("featurelayer-snapshot-coverage",.1),K.add("featurelayer-query-max-depth",4),K.add("featurelayer-query-pausing-enabled",!1),K.add("featurelayer-query-tile-concurrency",4),K.add("featurelayer-query-tile-max-features",6e5),K.add("featurelayer-advanced-symbols",!1),K.add("featurelayer-pbf",!0),K.add("featurelayer-pbf-statistics",!1),K.add("feature-layers-workers",!0),K.add("feature-polyline-generalization-factor",1),K.add("mapview-transitions-duration",200),K.add("mapview-essential-goto-duration",200),K.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),K.add("mapserver-pbf-version-support",10.81),K.add("mapservice-popup-identify-max-tolerance",20),K.add("request-queue-concurrency-hosted",16),K.add("request-queue-concurrency-non-hosted",4),K.add("curve-densification-coarse-segments",128),K.add("curve-densification-max-segments",2e3),K.add("curve-densification-min-segments",3),K.add("curve-densification-pixel-deviation",.5),K.add("view-readyState-waiting-delay",1e3),K.add("gradient-depth-bias",.01),K.add("gradient-depth-epsilon",1e-8),K.add("enable-feature:esri-compress-textures",!0),K("host-webworker")||K("host-browser")&&(K.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),K.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{K.add("esri-image-decode",!0,!0,!0)})).catch((()=>{K.add("esri-image-decode",!1,!0,!0)}))}return!1})),K.add("esri-url-encodes-apostrophe",(()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")})))})();const MP=new WeakMap;function KK(e,t,r=!1){const i=`ðŸ›‘ DEPRECATED - ${t}`;if(!r)return void e.warn(i);let s=MP.get(e);s||(s=new Set,MP.set(e,s)),s.has(t)||(s.add(t),e.warn(i))}const db="https://www.esriurl.com/";function XK(e,t,r,i={}){K("esri-deprecation-warnings")&&jc(e,`This widget is deprecated. Use the ${t} component instead.`,{see:[`${t} component reference: ${db}${r}/`,`Esri's move to web components: ${db}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...i})}function eX(e,t,r,i={}){K("esri-deprecation-warnings")&&jc(e,`This view model is deprecated. Use the ${t} component directly instead.`,{see:[`${t} component reference: ${db}${r}/`,`Esri's move to web components: ${db}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...i})}function Ske(e,t,r={}){K("esri-deprecation-warnings")&&jc(e,`Module: ${t}`,r)}function U9(e,t,r={}){if(K("esri-deprecation-warnings")){const{moduleName:i}=r;jc(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function V9(e,t,r={}){if(K("esri-deprecation-warnings")){const{moduleName:i}=r;jc(e,`Property: ${(i?i+"::":"")+t}`,r)}}function tX(e,t,r={}){K("esri-deprecation-warnings")&&jc(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function jc(e,t,r={}){if(K("esri-deprecation-warnings")){const{replacement:i,version:s,see:n,warnOnce:o}=r;let l=t;if(i&&(l+=`
	ðŸ› ï¸ Replacement: ${i}`),s&&(l+=`
	âš™ï¸ Version: ${s}`),n)if(Array.isArray(n)){l+=`
	ðŸ”— See for more details:`;for(const p of n)l+=`
		${p}`}else l+=`
	ðŸ”— See ${n} for more details.`;KK(e,l,o)}}function Eke(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function rX(e,t){for(const r of e)if(r!=null&&t(r))return r}function pb(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let F0=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach((r=>{t+=r.length})),t}add(t,r){if(pb(t)){const i=this._getOrCreateGroup(r);for(const s of t)kP(s)&&i.push(s)}else kP(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach((i=>i.forEach(t)));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(M1(t))}remove(t){if(typeof t!="string"&&pb(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(CP(this._getGroup(t)),this._groups.delete(M1(t)),this):this}removeAll(){return this._groups.forEach(CP),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(M1(t),r),r}_getGroup(t){return this._groups.get(M1(t))}};function M1(e){return e||"_default_"}function CP(e){for(const t of e)t instanceof F0?t.removeAll():t.remove()}function kP(e){return e!=null&&(!!e.remove||e instanceof F0)}function $ke(e){}function iX(e){return()=>e}function xke(e){return e}var Zs;let sX=(Zs=class{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Zs._m}getInt(){return this._seed=(Zs._a*this._seed+Zs._c)%Zs._m,this._seed}getFloat(){return this.getInt()/(Zs._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Zs._m*i}},Zs._m=2147483647,Zs._a=48271,Zs._c=0,Zs);const nX=1.5,Ike=1/nX,Mke=.5;function Cke(e,t){return t?e.filter(((r,i,s)=>s.findIndex(t.bind(null,r))===i)):Array.from(new Set(e))}function oX(e,t,r,i,s,n,o){if(e==null&&i==null)return!0;t=Math.max(0,t),s=Math.max(0,s),r=Math.max(0,r<0?((e==null?void 0:e.length)??0)+r:r),n=Math.max(0,n<0?((i==null?void 0:i.length)??0)+n:n);const l=r-t;if(e==null||i==null||l!==n-s)return!1;if(o){for(let p=0;p<l;p++)if(!o(e[t+p],i[s+p]))return!1}else for(let p=0;p<l;p++)if(e[t+p]!==i[s+p])return!1;return!0}function oS(e,t,r){return oX(e,0,(e==null?void 0:e.length)??0,t,0,(t==null?void 0:t.length)??0,r)}function RP(e,t,r){let i,s;return r?(i=t.filter((n=>!e.some((o=>r(o,n))))),s=e.filter((n=>!t.some((o=>r(o,n)))))):(i=t.filter((n=>!e.includes(n))),s=e.filter((n=>!t.includes(n)))),{added:i,removed:s}}function kke(e){return e&&typeof e.length=="number"}let z9=class{constructor(){this.last=0}};const G9=new z9;function p$(e,t,r,i){i=i||G9;const s=Math.max(0,i.last-10);for(let o=s;o<r;++o)if(e[o]===t)return i.last=o,o;const n=Math.min(s,r);for(let o=0;o<n;++o)if(e[o]===t)return i.last=o,o;return-1}function aX(e,t,r,i){const s=e.length,n=p$(e,t,s,i);if(n!==-1)return e[n]=e[s-1],e.pop(),t}const mo=new Set;function lX(e,t,r=e.length,i=t.length,s,n){if(i===0||r===0)return r;mo.clear();for(let l=0;l<i;++l)mo.add(t[l]);s=s||G9;const o=Math.max(0,s.last-10);for(let l=o;l<r;++l)if(mo.has(e[l])&&(n==null||n.push(e[l]),mo.delete(e[l]),e[l]=e[r-1],--r,--l,mo.size===0||r===0))return mo.clear(),r;for(let l=0;l<o;++l)if(mo.has(e[l])&&(n==null||n.push(e[l]),mo.delete(e[l]),e[l]=e[r-1],--r,--l,mo.size===0||r===0))return mo.clear(),r;return mo.clear(),r}function Oke(e,t,r){const i=e.length;if(t>=i)return e.slice();const s=q9(r),n=new Set,o=[];for(;o.length<t;){const l=Math.floor(s()*i);n.has(l)||(n.add(l),o.push(e[l]))}return o}function q9(e){return e?(OP.seed=e,()=>OP.getFloat()):Math.random}const OP=new sX;function Pke(e,t){if(!e)return e;const r=q9(t);for(let i=e.length-1;i>0;i--){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}return e}function Dk(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function Ga(e,t){return e!=null}const Nke=[];function Lke(e){return e instanceof ArrayBuffer}function Fk(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function H9(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function W9(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function jk(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function Q9(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function Bk(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function J9(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function uX(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float16Array"}function aS(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function lS(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function cX(e){return"buffer"in e}const Z9=1024;function Dke(e){return lS(e)||aS(e)||Bk(e)||jk(e)||Fk(e)}function Fke(e){return lS(e)||aS(e)}function jke(e){return lS(e)?179769e303:uX(e)?65504:aS(e)?3402823e32:J9(e)?4294967295:Q9(e)?65535:H9(e)||W9(e)?255:Bk(e)?2147483647:jk(e)?32767:Fk(e)?127:256}const Bke=-32768,Uke=-2147483648;function dX(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function H(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=X9(e);if(t!=null)return t;if(hb(e))return e.clone();if(Y9(e))return e.map(H);if(K9(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=H(e[i]);return r}function h$(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=X9(e);if(t!=null)return t;if(Y9(e)){let i=!0;const s=e.map((n=>{const o=h$(n);return n!=null&&o==null&&(i=!1),o}));return i?s:null}if(hb(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(K9(e))return null;const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const s=e[i],n=h$(s);if(s!=null&&n==null)return null;r[i]=n}return r}function hb(e){return typeof e.clone=="function"}function Y9(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function K9(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function PP(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function X9(e){if(Fk(e)||H9(e)||W9(e)||jk(e)||Q9(e)||Bk(e)||J9(e)||aS(e)||lS(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,H(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(H(r));return t}return null}function Uk(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function ej(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&oS(e,t):e instanceof Set?t instanceof Set&&hX(e,t):e instanceof Map?t instanceof Map&&AX(e,t):!!PP(e)&&PP(t)&&pX(e,t))}function pX(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function hX(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function AX(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const s=t.get(r);if(s!==i||s===void 0&&!t.has(r))return!1}return!0}function Vk(e,t,r=!1){return rj(e,t,r)}function uS(e,t){if(t!=null)return t[e]||tj(e.split("."),!1,t)}function jr(e,t,r){const i=e.split("."),s=i.pop(),n=tj(i,!0,r);n&&s&&(n[s]=t)}function NP(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(NP(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(NP(e[r],t[r]))return!0;return!1}return e!==t}function tj(e,t,r){let i=r;for(const s of e){if(i==null)return;if(!(s in i)){if(!t)return;i[s]={}}i=i[s]}return i}function rj(e,t,r){return t?Object.keys(t).reduce(((i,s)=>{if(s==="__proto__")return i;let n=i[s],o=t[s];return n===o?i:n===void 0?(i[s]=H(o),i):(Array.isArray(o)||Array.isArray(i)?(n=n?Array.isArray(n)?i[s]=n.slice():i[s]=[n]:i[s]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach((l=>{n.includes(l)||n.push(l)})):i[s]=o.slice())):o&&typeof o=="object"?i[s]=rj(n,o,r):i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[s]=o),i)}),e||{}):e}var C9;const Pt={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:(C9=globalThis.location)==null?void 0:C9.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Vk(Pt,globalThis.esriConfig,!0),delete Pt.has),!Pt.assetsPath){{const e="4.33";Pt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Pt.defaultAssetsPath=Pt.assetsPath}const fX=/\{([^}]+)\}/g;function LP(e){return e??""}function eh(e,t){return t?e.replaceAll(fX,typeof t=="object"?(r,i)=>LP(uS(i,t)):(r,i)=>LP(t(i))):e}function Vke(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,(r=>t!=null&&t.includes(r)?r:`\\${r}`))}function ij(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let DP;function zke(e){return DP??(DP=new DOMParser),DP.parseFromString(e||"","text/html").body.innerText||""}function Gke(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function qke(e,...t){let r=e[0];for(let i=0;i<t.length;++i)r+=t[i]+e[i+1];return r}const FP={info:0,warn:1,error:2,none:3};var Hr;let de=(Hr=class{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Hr._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Hr.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Hr._loggers.get(t)||new Hr({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!Hr._throttlingDisabled){const s=yX(i),n=this._loggedMessages[t].get(s);if(r==="once"&&n!=null||r==="oncePerTick"&&n&&n>=Hr._tickCounter)return;this._loggedMessages[t].set(s,Hr._tickCounter),Hr._scheduleTickCounterIncrement()}for(const s of Pt.log.interceptors)if(s(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const s=i[t];if(s!=null)return s;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",mX)}_matchLevel(t){const r=Pt.log.level||"warn";return FP[this._parentWithMember("level",r)]<=FP[t]}static _scheduleTickCounterIncrement(){Hr._tickCounterScheduled||(Hr._tickCounterScheduled=!0,Promise.resolve().then((()=>{Hr._tickCounter++,Hr._tickCounterScheduled=!1})))}},Hr._loggers=new Map,Hr._tickCounter=0,Hr._tickCounterScheduled=!1,Hr._throttlingDisabled=!1,Hr);function mX(e,t,...r){console[e](`[${t}]`,...r)}function yX(...e){return ij(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}function sj(e,t){if(e==null)throw new Error(t??"value is None")}function cr(e){return e==null||e.destroy(),null}function Hke(e){return e==null||e.dispose(),null}function vr(e){return e==null||e.remove(),null}function h0(e){return e==null||e.abort(),null}function Wke(e){return e==null||e.release(),null}function gX(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function nj(e,t){let r;return e.some(((i,s)=>(r=t(i,s),r!=null))),r??void 0}const oj=Symbol("Accessor-beforeDestroy"),vX={remove:()=>{}};function Lt(e){return e?{remove(){e&&(e(),e=void 0)}}:vX}function aj(e){e.forEach((t=>t==null?void 0:t.remove()))}function Qke(e){aj(e),e.length=0}function th(e){return Lt((()=>aj(e)))}function Jke(e){return Lt((()=>{var t;return(t=e())==null?void 0:t.remove()}))}function Zke(e){return Lt((()=>e==null?void 0:e.abort()))}function Yke(e){return Lt(e!=null?()=>e.destroy():void 0)}function wX(e){return typeof e=="object"&&!!e&&"remove"in e&&typeof e.remove=="function"}function Kke(e){wX(e)&&e.remove()}function Xke(e){return{[Symbol.dispose](){e.remove()}}}function Cs(e){return e.__accessor__??null}function bX(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function Fw(e,t,r){return r?Ab(e,t,{policy:r,path:""}):Ab(e,t,null)}function Ab(e,t,r){return t?Object.keys(t).reduce(((i,s)=>{const n=s;if(n==="__proto__")return i;let o=null,l="merge";if(r&&(o=r.path?`${r.path}.${s}`:s,l=r.policy(o)),l==="replace"||l==="replace-arrays"&&Array.isArray(i[n]))return i[n]=t[n],i;if(i[n]===void 0)return i[n]=H(t[n]),i;let p=i[n],m=t[n];if(p===m)return i;if(Array.isArray(m)||Array.isArray(i))p=p?Array.isArray(p)?i[n]=p.slice():i[n]=[p]:i[n]=[],m&&(Array.isArray(m)||(m=[m]),m.forEach((v=>{p.includes(v)||p.push(v)})));else if(m&&typeof m=="object")if(r){const v=r.path;r.path=o,i[n]=Ab(p,m,r),r.path=v}else i[n]=Ab(p,m,null);else i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[n]=m);return i}),e||{}):e}function lj(e){return Array.isArray(e)?e:e.split(".")}function jP(e){return e.includes(",")?e.split(",").map((t=>t.trim())):[e.trim()]}function _X(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...jP(r));return t}return jP(e)}function uj(e,t,r,i){const s=_X(t);if(s.length!==1){const n=s.map((o=>i(e,o,r)));return th(n)}return i(e,s[0],r)}function cj(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=Cs(t);return bX(i,r)?i.get(r):t[r]}function dj(e,t,r){if(e==null)return e;const i=cj(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:dj(i,t,r+1)}function Nv(e,t,r=0){return typeof t!="string"||t.includes(".")?dj(e,lj(t),r):cj(t,e)}function qo(e,t){return Nv(e,t)}function BP(e,t){return Nv(t,e)!==void 0}const Sn={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function Lv(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=H(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Dv(e,t){const r=Lv(e);let i=r[t];return i||(i=r[t]={}),i}function SX(e,t){return Fw(e,t,TX)}const EX=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function TX(e){return EX.test(e)?"replace":"merge"}function $X(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function xX(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}var Lc;let j0=(Lc=class{constructor(t,r,i,s=1,n=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let r;if(Lc.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let s=0;s<i;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):xX(r)&&r.acquire(...t),r}release(t){t&&!Lc.test.disabled&&(this._releaseFunction?this._releaseFunction(t):$X(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}},Lc.test={disabled:!1},Lc),IX=class{constructor(t,r){this._observers=t,this._observer=r}remove(){Dk(this._observers,this._observer)}},pj=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return MX;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,s=!1;const n=r.length;for(let o=0;o<n;++o){const l=r[o];if(l.destroyed)s=!0;else if(l===t){i=!0;break}}return i||(r.push(t),s&&this._removeDestroyedObservers()),new IX(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let s=0;s<r;++s){for(;s+i<r&&t[s+i].destroyed;)++i;if(i>0){if(!(s+i<r))break;t[s]=t[s+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const MX=Lt();var _t;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(_t||(_t={}));const A$=_t.USER+1;function tu(e){switch(e){case"defaults":return _t.DEFAULTS;case"service":return _t.SERVICE;case"portal-item":return _t.PORTAL_ITEM;case"web-scene":return _t.WEB_SCENE;case"web-map":return _t.WEB_MAP;case"link-chart":return _t.LINK_CHART;case"user":return _t.USER;default:return null}}function Hg(e){switch(e){case _t.DEFAULTS:return"defaults";case _t.SERVICE:return"service";case _t.PORTAL_ITEM:return"portal-item";case _t.WEB_SCENE:return"web-scene";case _t.WEB_MAP:return"web-map";case _t.LINK_CHART:return"link-chart";case _t.USER:return"user"}}function CX(e){return Hg(e)}const yr={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let cS=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach((t=>{this._handles.push(t.observe(this._observer))})),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const fb=new cS,ry=[];let og=fb;function Ze(e){og.onAccessed(e)}let jw=!1,Bw=!1;function qa(e,t,r){if(jw)return zk(e,t,r);let i=null;return hj(e),i=t.call(r),Aj(),i}function kX(e,t){return qa(fb,e,t)}function zk(e,t,r){const i=jw;jw=!0,hj(e);let s=null;try{s=t.call(r)}catch(n){Bw&&de.getLogger("esri.core.accessorSupport.tracking").error(n)}return Aj(),jw=i,s}function hj(e){og=e,ry.push(e)}function Aj(){const e=ry.length;if(e>1){const t=ry.pop();og=ry[e-2],t.onTrackingEnd()}else if(e===1){const t=ry.pop();og=fb,t.onTrackingEnd()}else og=fb}function fj(e,t){if(t.flags&yr.DepTrackingInitialized)return;t.flags|=yr.DepTrackingInitialized;const r=Bw;Bw=!1,t.flags&yr.AutoTracked?zk(t.trackingTarget,t.metadata.get,e):mj(e,t),Bw=r}const RX=[];function mj(e,t){t.flags&yr.ExplicitlyTracking||(t.flags|=yr.ExplicitlyTracking,zk(t.trackingTarget,(()=>{const r=t.metadata.dependsOn||RX;for(const i of r)if(typeof i!="string"||i.includes(".")){const s=lj(i);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=UP(o,s[n],n!==s.length-1)}else UP(e,i,!1)})),t.flags&=-129)}function UP(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=Cs(e);if(s){const n=s.propertiesByName.get(i);n&&(Ze(n),fj(e,n))}return r?e[i]:void 0}let VP=class extends pj{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new cS(this),this.flags=0,this.flags=yr.Dirty|(r.nonNullable?yr.NonNullable:0)|(r.hasOwnProperty("value")?yr.HasDefaultValue:0)|(r.get===void 0?yr.DepTrackingInitialized:0)|(r.dependsOn===void 0?yr.AutoTracked:0)}destroy(){this.flags&yr.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&Ze(this);const r=t.store,i=this.propertyName,s=this.flags,n=r.get(i);if(s&yr.Computing||~s&yr.Dirty&&r.has(i))return n;this.flags|=yr.Computing;const o=t.host;let l;s&yr.AutoTracked?l=qa(this.trackingTarget,this.metadata.get,o):(mj(o,this),l=this.metadata.get.call(o)),this.flags|=yr.DepTrackingInitialized,r.set(i,l,_t.COMPUTED);const p=r.get(i);return p===n?this.flags&=-2:kX(this.commit,this),this.flags&=-5,p}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&yr.Overridden&&(this.flags|=yr.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},OX=class yj{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new yj;return this._values.forEach(((i,s)=>{t&&t.has(s)||r.set(s,H(i))})),r}get(t){return this._values.get(t)}originOf(){return _t.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}isAtOrigin(t,r){return this.has(t)}isBelowOrigin(t,r){return!this.has(t)}forEach(t){this._values.forEach(t)}};function vh(e,t,r){return e!==void 0}function zP(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&yr.NonNullable)||(i.lifecycle,!1))}let PX=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Sn.INITIALIZING,this.store=new OX,this.mutable=!0,this._origin=_t.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const s=new VP(i,r[i]);this.propertiesByName.set(i,s)}this.metadata=r}initialize(){this.lifecycle=Sn.CONSTRUCTING}constructed(){this.lifecycle=Sn.CONSTRUCTED}destroy(){this.lifecycle=Sn.DESTROYED,this.propertiesByName.forEach((t=>t.destroy()))}get initialized(){return this.lifecycle!==Sn.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(!vh(r))return;if(r.metadata.get)return r.getComputed(this);this.mutable&&Ze(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&yr.HasDefaultValue)return"defaults"}return Hg(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(vh(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);vh(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const s=this.propertiesByName.get(r);if(!vh(s))return"";const n=new cS,o=qa(n,(()=>{var m;return(m=s.metadata.get)==null?void 0:m.call(t)}));let l=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;const p=n.accessed??new Set;if(p.size===0)return l;i+="  ";for(const m of p)m instanceof VP&&(l+=`${i}${m.propertyName}: undefined
`);return l}setAtOrigin(t,r,i){const s=this.propertiesByName.get(t);if(vh(s))return this._setAtOrigin(s,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&yr.Overridden)}clearOrigin(t,r){const i=this.store,s=this.propertiesByName.get(t);if(!vh(s))return;const n=i.isAtOrigin(t,r)&&!(s.flags&yr.Overridden);i.delete(t,r),n&&s.notifyChange()}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&yr.Overridden&&(r.flags&=-3,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!zP(i,t,r,this))return;const s=i.metadata.cast;if(s){const n=this._cast(s,r),{valid:o,value:l}=n;if(ET.release(n),!o)return;r=l}i.flags|=yr.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!zP(i,t,r,this))return;const s=i.metadata.cast;if(s){const o=this._cast(s,r),{valid:l,value:p}=o;if(ET.release(o),!l)return;r=p}const n=i.metadata.set;n?n.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=tu(t)}getDefaultOrigin(){return Hg(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==Sn.INITIALIZING?this._origin:_t.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const s=this.store,n=t.propertyName;if(s.isAtOrigin(n,i)&&Uk(r,s.get(n))&&~t.flags&yr.Overridden)return;const o=s.isBelowOrigin(n,i)||s.isAtOrigin(n,i);o&&t.invalidate(),s.set(n,r,i),o&&t.commit(),fj(this.host,t)}_cast(t,r){const i=ET.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},NX=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const ET=new j0(NX);function LX(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((r,i)=>i===""?"$":(uS(i,t)??"").toString()))}let gj=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&LX(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},Q=class vj extends gj{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return H(r)}catch{return"[object]"}})))}}catch(t){throw de.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new vj(t.name,t.message,t.details)}};Q.prototype.type="error";function mb(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))mb(e,i,t[i]);else{if(t.includes(".")){const s=t.split("."),n=s.splice(-1,1)[0];return void mb(qo(e,s),n,r)}const i=e.__accessor__;i!=null&&DX(t,i),e[t]=r}}function DX(e,t){if(K("esri-unknown-property-errors")&&!FX(e,t))throw new Q("set:unknown-property",jX(e,t))}function FX(e,t){return t.metadata[e]!=null}function jX(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let BX;function UX(){return BX}var GP;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(GP||(GP={}));function VX(e){e.length=0}let ws=class{constructor(t=50,r=50){this._pool=new j0(Array,void 0,VX,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return TT.acquire()}static release(t){return TT.release(t)}static prune(){TT.prune()}};const TT=new ws(100);let wj=class extends j0{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const C1=[];function yb(e){C1.push(e),C1.length===1&&queueMicrotask((()=>{const t=C1.slice();C1.length=0;for(const r of t)r()}))}let ag=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort(((t,r)=>t-r))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((t,r)=>t+r),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var f$;(function(e){const t=(n,o,l,p)=>{let m=o,v=o;const _=l>>>1,E=n[m-1];for(;v<=_;){v=m<<1,v<l&&p(n[v-1],n[v])<0&&++v;const $=n[v-1];if(p($,E)<=0)break;n[m-1]=$,m=v}n[m-1]=E},r=(n,o)=>n<o?-1:n>o?1:0;function i(n,o,l,p){o===void 0&&(o=0),l===void 0&&(l=n.length),p===void 0&&(p=r);for(let v=l>>>1;v>o;v--)t(n,v,l,p);const m=o+1;for(let v=l-1;v>o;v--){const _=n[o];n[o]=n[v],n[v]=_,t(n,m,v,p)}}function*s(n,o,l,p){o===void 0&&(o=0),l===void 0&&(l=n.length),p===void 0&&(p=r);for(let v=l>>>1;v>o;v--)t(n,v,l,p),yield;const m=o+1;for(let v=l-1;v>o;v--){const _=n[o];n[o]=n[v],n[v]=_,t(n,m,v,p),yield}}e.sort=i,e.iterableSort=s})(f$||(f$={}));const qP=f$,zX=1.5,GX=1.1;let lg=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new z9,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>HP(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const s=this.data[i];t(s)&&r.push(s)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,HP(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=p$(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(p$(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=lX(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){qP.sort(this.data,0,this.length,t)}iterableSort(t){return qP.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)if(t.call(r,i[n]))return i[n]}filterInPlace(t,r){let i=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(r,n,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=n,i++)}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)t.call(r,i[n],n,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(r,this.data[s],s,this.data);return i}reduce(t,r){let i=r;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const r=this.length,i=this.data;for(let s=0;s<r;++s)if(i[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function HP(e){e.data.length>zX*e.length&&(e.data.length=Math.floor(e.length*GX))}function qX(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return Lt((()=>e.clearTimeout(i)))}}}const B0=qX(globalThis);function dS(e){return HX(e)||bj(e)}function HX(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function bj(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function U0(e,t,r){if(!dS(e))throw new TypeError("target is not a Evented or EventTarget object");return bj(e)?WX(e,t,r):e.on(t,r)}function WX(e,t,r,i){if(Array.isArray(t)){const s=t.slice();for(const n of s)e.addEventListener(n,r,i);return Lt((()=>{for(const n of s)e.removeEventListener(n,r,i)}))}return e.addEventListener(t,r,i),Lt((()=>e.removeEventListener(t,r,i)))}function _j(e,t,r){if(!dS(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=U0(e,t,(s=>{i.remove(),r.call(e,s)}));return i}function rr(e="Aborted"){return new Q("AbortError",e)}function dr(e,t="Aborted"){if(oo(e))throw rr(t)}function Fv(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function oo(e){const t=Fv(e);return t!=null&&t.aborted}function ka(e){if(zi(e))throw e}function WP(e){if(!zi(e))throw e}function Ko(e,t){const r=Fv(e);if(r!=null){if(!r.aborted)return _j(r,"abort",(()=>t()));t()}}function Gk(e,t){const r=Fv(e);if(r!=null)return dr(r),_j(r,"abort",(()=>t(rr())))}function Sj(e,t){return Fv(t)==null?e:new Promise(((r,i)=>{let s=Ko(t,(()=>i(rr())));const n=()=>{s=vr(s)};e.then(n,n),e.then(r,i)}))}function zi(e){return(e==null?void 0:e.name)==="AbortError"}async function Wg(e){try{return await e}catch(t){if(!zi(t))throw t;return}}async function qk(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map((o=>e[o])),s=await qk(i),n={};return r.map(((o,l)=>n[o]=s[l])),n}const t=e;return Promise.allSettled(t).then((r=>Array.from(t,((i,s)=>{const n=r[s];return n.status==="fulfilled"?{promise:i,value:n.value}:{promise:i,error:n.reason}}))))}async function QX(e){return(await Promise.allSettled(e)).filter((t=>t.status==="fulfilled")).map((t=>t.value))}async function dRe(e){return(await Promise.allSettled(e)).filter((t=>t.status==="rejected")).map((t=>t.reason))}function Ej(e,t=void 0,r){const i=new AbortController;return Ko(r,(()=>i.abort())),new Promise(((s,n)=>{let o=setTimeout((()=>{o=0,s(t)}),e);Ko(i,(()=>{o&&(clearTimeout(o),n(rr()))}))}))}function pRe(e,t,r,i){const s=r&&"abort"in r?r:null;i!=null||s||(i=r);let n=setTimeout((()=>{n=0,s==null||s.abort()}),t);const o=()=>i||new Q("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then((l=>{if(n===0)throw o();return clearTimeout(n),l}),(l=>{throw clearTimeout(n),n===0?o():l}))}function JX(e,t){const r=new AbortController,i=setTimeout((()=>r.abort()),t);return Ko(e,(()=>{r.abort(),clearTimeout(i)})),{...e,signal:r.signal}}function Xa(e){return e&&typeof e.then=="function"}function m$(e){return Xa(e)?e:Promise.resolve(e)}function pS(e,t=-1){let r,i,s,n,o=null;const l=(...p)=>{if(r){i=p,n&&n.reject(rr()),n=Cn();const E=n.promise;if(o){const $=o;o=null,$.abort()}return E}if(s=n||Cn(),n=null,t>0){const E=new AbortController;r=m$(e(...p,E.signal));const $=r;Ej(t).then((()=>{r===$&&(n?E.abort():o=E)}))}else r=1,r=m$(e(...p));const m=()=>{const E=i;i=s=r=o=null,E!=null&&l(...E)},v=r,_=s;return v.then(m,m),v.then(_.resolve,_.reject),_.promise};return l}function Cn(){let e,t;const r=new Promise(((s,n)=>{e=s,t=n})),i=s=>{e(s)};return i.resolve=s=>e(s),i.reject=s=>t(s),i.timeout=(s,n)=>B0.setTimeout((()=>i.reject(n)),s),i.promise=r,i}function hRe(e,t){t.then(e.resolve,e.reject)}async function QP(e){await Promise.resolve(),dr(e)}function ARe(e){return e}function ZX(e){return 1e3*e}function fRe(e){return e}function mRe(e){return .001*e}let YX=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},KX=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},y$=0;const xm={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},g$=["prepare","preRender","render","postRender","update","finish"],v$=[],Fp=new lg;let XX=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Tj()}};function eee(){Sp!=null&&(cancelAnimationFrame(Sp),Sp=requestAnimationFrame(Hk))}function Tj(){Sp==null&&(y$=performance.now(),Sp=requestAnimationFrame(Hk))}const gb={frameTasks:Fp,willDispatch:!1,clearFrameTasks:tee,dispatch:xj,executeFrameTasks:ree,reschedule:eee};function jv(e){const t=new KX(e);return v$.push(t),gb.willDispatch||(gb.willDispatch=!0,yb(xj)),t}function A0(e){const t=new YX(e);return Fp.push(t),Tj(),new XX(t)}let Sp=null;function tee(e=!1){Fp.forAll((t=>{t.removed=!0})),e&&$j()}function Hk(){const e=performance.now();Sp=null,Sp=Fp.some((r=>!r.paused&&!r.removed))?requestAnimationFrame(Hk):null,gb.executeFrameTasks(e)}function ree(e){const t=e-y$;y$=e;const r=1e3/60,i=Math.max(0,t-r);xm.time=e,xm.frameDuration=r-i;for(let s=0;s<g$.length;s++){const n=performance.now(),o=g$[s];Fp.forAll((l=>{var p;l.paused||l.removed||(s===0&&l.ticks++,l.phases[o]&&(xm.elapsedFrameTime=performance.now()-e,xm.deltaTime=l.ticks===0?0:t,(p=l.phases[o])==null||p.call(l,xm)))})),oee[s].push(performance.now()-n)}$j(),aee.push(performance.now()-e)}const k1=new lg;function $j(){Fp.forAll((e=>{e.removed&&k1.push(e)})),Fp.removeUnorderedMany(k1.data,k1.length),k1.clear()}function xj(){for(;v$.length;){const e=v$.shift();e.isActive&&e.callback()}gb.willDispatch=!1}function iee(e=1,t){const r=Cn(),i=()=>{oo(t)?r.reject(rr()):e===0?r():(--e,yb((()=>i())))};return i(),r.promise}function see(e){return iee(1,e)}async function nee(e){await see(e),await new Promise((t=>requestAnimationFrame((()=>{e!=null&&e.aborted||t()}))))}const oee=g$.map((e=>new ag(e))),aee=new ag("total");function Ij(e,t){for(const r of e.values())if(t(r))return!0;return!1}function vb(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function JP(e,t){return t!=null&&e.add(t),e}function Wk(e,t){const r=new Set;return vb(r,e),vb(r,t),r}function lee(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function wRe(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function bRe(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function uee(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function cee(e,t){return uee(Wk(e,t),lee(e,t))}let dee=0;function Uw(){return++dee}let Bv=class extends cS{constructor(t){super(new pee(t)),this._observer&&ZP.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&ZP.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}},pee=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=hee}};const ZP=new FinalizationRegistry((e=>{var t;(t=e.deref())==null||t.destroy()}));function hee(){}let KA=!1;const wb=[];function Mj(e,t){let r=new Bv(n),i=null,s=!1;function n(){if(!r||s)return;if(KA)return void Rj(n);const l=i;r.clear(),KA=!0,s=!0,i=qa(r,e),s=!1,KA=!1,t(i,l),Oj()}function o(){r&&(r.destroy(),r=null,i=null)}return s=!0,i=qa(r,e),s=!1,Lt(o)}function Cj(e,t){let r=new Bv(s),i=null;function s(){t(i,o)}function n(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=qa(r,e),i):null}return o(),Lt(n)}function kj(e,t){let r=!1,i=!1;const s=!!(t!=null&&t.sync);let n=new Bv((()=>{r||i||(i=!0,s?o():queueMicrotask(o))}));function o(){i=!1,n&&!r&&(KA?Rj(o):(n.clear(),KA=!0,r=!0,qa(n,e),r=!1,KA=!1,Oj()))}function l(){n&&(n.destroy(),n=null)}return r=!0,qa(n,e),r=!1,Lt(l)}function Rj(e){wb.includes(e)||wb.unshift(e)}function Oj(){for(;wb.length;)wb.pop()()}var ug;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(ug||(ug={}));var kp;let Qk=(kp=class{constructor(){this.uid=Uw(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,s,n){return this.pool.acquire(ug.Untracked,t,r,i,s,n,Uk)}static acquireTracked(t,r,i,s){return this.pool.acquire(ug.Tracked,t,r,i,null,null,s)}notify(t,r){this.type===ug.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,s,n,o,l){this.uid=Uw(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=s,this.target=n,this.path=o,this.equals=l}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Uw(),this.removed=!0}},kp.pool=new wj(kp),kp);const Vw=new ws,su=new Set;let bb;function _b(e){su.delete(e),su.add(e),bb||(bb=jv(mee))}function Aee(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function fee(e){for(const t of su.values())t.target===e&&(t.removed=!0)}function mee(){let e=10;for(;bb&&e--;){bb=null;const t=yee(),r=Vw.acquire();for(const i of t){const s=i.uid;Aee(i),s===i.uid&&i.removed&&r.push(i)}for(const i of su)i.removed&&(r.push(i),su.delete(i));for(const i of r)Qk.pool.release(i);Vw.release(r),Vw.release(t),w$.forEach((i=>i()))}}function yee(){const e=Vw.acquire();e.length=su.size;let t=0;for(const r of su)e[t]=r,++t;return su.clear(),e}const w$=new Set;function gee(e){return w$.add(e),Lt((()=>w$.delete(e)))}function vee(e,t,r){let i=uj(e,t,r,((s,n,o)=>{let l,p,m=Cj((()=>Nv(s,n)),((v,_)=>{var E;((E=s.__accessor__)==null?void 0:E.lifecycle)===Sn.DESTROYED||l&&l.uid!==p?i.remove():(l||(l=Qk.acquireUntracked(v,o,_,s,n),p=l.uid),_b(l))}));return Lt((()=>{m.remove(),l&&(l.uid!==p||l.removed||(l.removed=!0,_b(l)),l=null),i=m=null}))}));return i}function wee(e,t,r){const i=uj(e,t,r,((s,n,o)=>{let l=!1;return Mj((()=>Nv(s,n)),((p,m)=>{s.__accessor__.lifecycle!==Sn.DESTROYED?l||(l=!0,Uk(m,p)||o.call(s,p,m,n,s),l=!1):i.remove()}))}));return i}function bee(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Sn.DESTROYED?i?wee(e,t,r):vee(e,t,r):Lt()}function _ee(e,t,r){let i,s,n=Cj(e,((o,l)=>{i&&i.uid!==s?n.remove():(i||(i=Qk.acquireTracked(o,t,l,r),s=i.uid),_b(i))}));return Lt((()=>{n.remove(),i&&(i.uid!==s||i.removed||(i.removed=!0,_b(i)),i=null),n=null}))}function See(e,t,r){let i=!1;return Mj(e,((s,n)=>{i||(i=!0,r(n,s)||t(s,n),i=!1)}))}function Eee(e,t,r=!1,i=ej){return r?See(e,t,i):_ee(e,t,i)}function YP(e){return Ij(su,(t=>t.oldValue===e))}function Tee(e,t){for(const r of e.values())if(t(r))return!0;return!1}function ERe(e,t){for(const r of e.values())if(t(r))return r;return null}function rh(e,t,r){const i=e.get(t);if(i!==void 0)return i;const s=r();return e.set(t,s),s}function TRe(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const Ep=()=>de.getLogger("esri.core.accessorSupport.ensureTypes");function $ee(e){if(e==null)return e;const t=new Date(e);return isNaN(t.getTime())?(Ep().error("Accessor#set",`Invalid date value: '${e}', falling back to current date`),new Date):t}function xee(e){return e==null?e:!!e}function Uv(e){return e==null?e:e.toString()}function bs(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function Jk(e){return e==null?e:Math.round(parseFloat(e))}function Iee(e){return null}function Mee(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function Pj(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function Sb(e,t){return t!=null&&e&&!(t instanceof e)}function Nj(e){return e&&"isCollection"in e}function KP(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Cee(e,t){if(!(t!=null&&t.constructor)||!Nj(t.constructor))return b$(e,t)?t:new e(t);const r=KP(e.prototype.itemType),i=KP(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(b$(e,t),t):new e(t):t}function b$(e,t){return!!Pj(t)&&(Ep().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+hS(e)+"'"),!0)}function Vv(e,t){return t==null?t:Nj(e)?Cee(e,t):Sb(e,t)?b$(e,t)?t:new e(t):t}function hS(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const kee=new WeakMap;function Ree(e){switch(e){case Number:return t=>bs(t);case Et:return Jk;case Boolean:return xee;case String:return Uv;case Date:return $ee;case V0:return Iee;default:return rh(kee,e,(()=>Vv.bind(null,e)))}}function Br(e,t){const r=Ree(e);return arguments.length===1?r:r(t)}function Qg(e,t,r){return arguments.length===1?Qg.bind(null,e):t&&(Array.isArray(t)?t.map((i=>e(i,r))):[e(t,r)])}function Oee(e,t){return arguments.length===1?Qg((r=>Br(e,r))):Qg((r=>Br(e,r)),t)}function Lj(e,t,r){return t!==0&&Array.isArray(r)?r.map((i=>Lj(e,t-1,i))):e(r)}function Eb(e,t,r){if(arguments.length===2)return n=>Eb(e,t,n);if(!r)return r;r=Lj(e,t,r);let i=t,s=r;for(;i>0&&Array.isArray(s);)i--,s=s[0];if(s!==void 0)for(let n=0;n<i;n++)r=[r];return r}function Pee(e,t,r){return arguments.length===2?Eb((i=>Br(e,i)),t):Eb((i=>Br(e,i)),t,r)}function Dj(e){return!!Array.isArray(e)&&!e.some((t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)}))}function _$(e,t){if(arguments.length===2)return _$(e).call(null,t);const r=new Set,i=e.filter((l=>typeof l!="function")),s=e.filter((l=>typeof l=="function"));for(const l of e)typeof l!="string"&&typeof l!="number"||r.add(l);let n=null,o=null;return(l,p)=>{if(l==null)return l;const m=typeof l,v=m==="string"||m==="number";return v&&(r.has(l)||s.some((_=>m==="string"&&_===String||m==="number"&&_===Number)))||m==="object"&&s.some((_=>!Sb(l,_)))?l:(v&&i.length?(n||(n=i.map((_=>typeof _=="string"?`'${_}'`:`${_}`)).join(", ")),Ep().error("Accessor#set",`'${l}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof l=="object"&&s.length?(o||(o=s.map((_=>hS(_))).join(", ")),Ep().error("Accessor#set",`'${l}' is not a valid value for this property, value must be one of ${o}`)):Ep().error("Accessor#set",`'${l}' is not a valid value for this property`),p&&(p.valid=!1),null)}}function Ha(e,t){if(arguments.length===2)return Ha(e).call(null,t);const r={},i=[],s=[];for(const p in e.typeMap){const m=e.typeMap[p];r[p]=Br(m),i.push(hS(m)),s.push(p)}const n=()=>`'${i.join("', '")}'`,o=()=>`'${s.join("', '")}'`,l=typeof e.key=="string"?p=>p[e.key]:e.key;return p=>{if(e.base&&!Sb(e.base,p)||p==null)return p;const m=l(p)||e.defaultKeyValue,v=r[m];if(!v)return Ep().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Sb(e.typeMap[m],p))return p;if(typeof e.key=="string"&&!Pj(p)){const _={};for(const E in p)E!==e.key&&(_[E]=p[E]);return v(_)}return v(p)}}let Et=class{},V0=class{};const IRe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Nee(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function Fj(e){switch(e.type){case"native":return Br(e.value);case"array":return Qg(Fj(e.value));case"one-of":return Lee(e);default:return null}}function Lee(e){let t=null;return(r,i)=>E$(r,e)?r:(t==null&&(t=S$(e)),Ep().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function S$(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Et:return"integer";case Date:return"date";case V0:return"null";default:return hS(e.value)}case"array":return`array of ${S$(e.value)}`;case"one-of":{const t=e.values.map((r=>S$(r)));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function E$(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Et:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case V0:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((r=>!E$(r,t.value)));case"one-of":return t.values.some((r=>E$(e,r)))}}function A(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),s=Dv(t,r);i&&(i.get||i.set?(s.get=i.get||s.get,s.set=i.set||s.set):"value"in i&&("value"in e&&de.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=i.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const p=typeof n=="string"?n:n.source,m=typeof n=="string"?null:n.overridable===!0;let v;s.dependsOn=[p],s.get=function(){let _=qo(this,p);if(typeof _=="function"){v||(v=p.split(".").slice(0,-1).join("."));const E=qo(this,v);E&&(_=_.bind(E))}return _},s.readOnly||(s.set=m?function(_){this._override(r,_)}:function(_){mb(this,p,_)})}const o=e.type,l=e.types;if(!s.cast){let p;o?p=Dee(o):l&&(p=Array.isArray(l)?Qg(Ha(l[0])):Ha(l)),e.cast=Fee(e.cast,p)}SX(s,e),e.range&&(s.cast=Mee(s.cast,e.range))}}function Zk(e,t,r){const i=Dv(e,r);i.json||(i.json={});let s=i.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function Dee(e){let t=0,r=e;if(Nee(e))return Fj(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(Dj(i))return t===0?_$(i):Eb(_$(i),t);if(t===1)return Oee(i);if(t>1)return Pee(i,t);const s=e;return s.from?s.from:Br(s)}function Fee(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}function jee(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const s=t[i];r[i].forEach((n=>{t[n]=s})),delete t[i]}}}let kn=class extends gj{constructor(t,r,i){super(t,r,i)}};kn.prototype.type="warning";function jj(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const T$=()=>de.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function XP(e,t,r){var i,s;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((s=t.read)==null?void 0:s.enabled)===!1||Vee(e)&&jr("read.reader",z0(e),t))}function z0(e){var r,i;const t=e.ndimArray??0;if(t>1)return Uee(e);if(t===1)return e5(e);if("type"in e&&Uj(e.type)){const s=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,n=e5(typeof s=="function"?{type:s}:{types:s});return(o,l,p)=>{const m=n(o,l,p);return m&&new e.type(m)}}return Yk(e)}function Yk(e){return"type"in e?Bee(e.type):zee(e.types)}function Bee(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void T$().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,i),n}:e.fromJSON}function Bj(e,t,r,i){return i!==0&&Array.isArray(t)?t.map((s=>Bj(e,s,r,i-1))):e(t,void 0,r)}function Uee(e){const t=Yk(e),r=Bj.bind(null,t),i=e.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=r(s,o,i);let l=i,p=s;for(;l>0&&Array.isArray(p);)l--,p=p[0];if(p!==void 0)for(let m=0;m<l;m++)s=[s];return s}}function e5(e){const t=Yk(e);return(r,i,s)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const l of r){const p=t(l,void 0,s);p!==void 0&&o.push(p)}return o}const n=t(r,void 0,s);return n!==void 0?[n]:void 0}}function Uj(e){if(!jj(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?Kk(t.Type):Vj(t.Type))}function Vee(e){return"types"in e?Vj(e.types):Kk(e.type)}function Kk(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||Uj(e))}function Vj(e){for(const t in e.typeMap)if(!Kk(e.typeMap[t]))return!1;return!0}function zee(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(s,n,o)=>{if(s==null)return s;const l=typeof s;if(l!=="object")return void T$().error(`Expected JSON value of type 'object' to deserialize, but got '${l}'`);t||(t=Gee(e));const p=e.key;if(typeof p!="string")return;const m=s[p],v=m?t[m]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!v){const E=`Type '${m||"unknown"}' is not supported`;return o!=null&&o.messages&&s&&o.messages.push(new kn(`${r}:unsupported`,E,{definition:s,context:o})),void T$().error(E)}const _=new v;return _.read(s,o),i?i(_):_}}function Gee(e){var r,i;const t={};for(const s in e.typeMap){const n=e.typeMap[s],o=Lv(n.prototype);if(typeof e.key=="function")continue;const l=o[e.key];if(!l)continue;if((r=l.json)!=null&&r.type&&Array.isArray(l.json.type)&&l.json.type.length===1&&typeof l.json.type[0]=="string"){t[l.json.type[0]]=n;continue}const p=(i=l.json)==null?void 0:i.write;if(!(p!=null&&p.writer)){t[s]=n;continue}const m=p.target,v=typeof m=="string"?m:e.key,_={};p.writer(s,_,v),_[v]&&(t[_[v]]=n)}return t}function qee(e){if(e.json||(e.json={}),r5(e.json),i5(e.json),t5(e.json),e.json.origins)for(const t in e.json.origins)r5(e.json.origins[t]),i5(e.json.origins[t]),t5(e.json.origins[t]);return!0}function t5(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function r5(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function i5(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function s5(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&jj(e.type))?t.write.writer=Qee:r>1?t.write.writer=Jee(r):t.types?Array.isArray(t.types)?t.write.writer=Wee(t.types[0]):t.write.writer=Hee(t.types):t.write.writer=Jg}function Hee(e){return(t,r,i,s)=>t?zj(t,e,s)?Jg(t,r,i,s):void 0:Jg(t,r,i,s)}function zj(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new Q(`${i}:unsupported`,s,{definition:e,context:r})),de.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function Wee(e){return(t,r,i,s)=>!t||!Array.isArray(t)?Jg(t,r,i,s):Jg(t.filter((n=>zj(n,e,s))),r,i,s)}function Jg(e,t,r,i){jr(r,Tb(e,i),t)}function Tb(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?$b(e):e}function $b(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Qee(e,t,r,i){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map((n=>Tb(n,i))),typeof s.toArray=="function"&&(s=s.toArray())):s=[Tb(e,i)],jr(r,s,t)}function Gj(e,t,r){return r!==0&&Array.isArray(e)?e.map((i=>Gj(i,t,r-1))):Tb(e,t)}function Jee(e){return(t,r,i,s)=>{let n;if(t===null)n=null;else{n=Gj(t,s,e);let o=e,l=n;for(;o>0&&Array.isArray(l);)o--,l=l[0];if(l!==void 0)for(let p=0;p<o;p++)n=[n]}jr(i,n,r)}}function Zee(e,t){return Xk(e,"any",t==null?void 0:t.origin)}function $$(e,t){return Xk(e,"read",t==null?void 0:t.origin)}function qj(e,t){return Xk(e,"write",t==null?void 0:t.origin)}function Xk(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let s;s=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],s&&(t==="any"||t in s)&&(i=s)}return i}function Yee(e){var r;const t=Kee(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],n=s.types?Xee(s):t;XP(n,s,!1),s.types&&!s.write&&((r=e.json.write)!=null&&r.enabled)&&(s.write={...e.json.write}),s5(n,s)}XP(t,e.json,!0),s5(t,e.json)}function Kee(e){return e.json.types?x$(e.json):e.type?Hj(e):x$(e)}function Xee(e){return e.type?Hj(e):x$(e)}function Hj(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!Dj(r);)r=r[0],t++;return{type:r,ndimArray:t}}function x$(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function ete(e){qee(e)&&(jee(e),Yee(e))}const $T=new Set,xT=new Set;function P(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,rte(t);const r=[],i=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!$T.has(s.initialize)&&($T.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!xT.has(s.destroy)&&(xT.add(s.destroy),i.push(s.destroy)),s=Object.getPrototypeOf(s);$T.clear(),xT.clear();const n=class extends t{constructor(...l){if(super(...l),this.constructor===n&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let p=r.length-1;p>=0;p--)r[p].call(this)}}),i.length){let p=!1;const m=this[oj];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!p){this.__accessor__.lifecycle=Sn.DESTROYING,p=!0,m.call(this);for(let v=0;v<i.length;v++)i[v].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=Lv(t.prototype),n.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function tte(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&Ze(i);const s=r.store;return s.has(e)?s.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function rte(e){const t=e.prototype,r=Lv(t),i={};for(const s of Object.getOwnPropertyNames(r)){const n=r[s];ete(n),i[s]={enumerable:!0,configurable:!0,get:tte(s,n),set(o){const l=this.__accessor__;if(l!==void 0){if(l.mutable)return l.initialized&&n.readOnly?n5("read-only",s):l.lifecycle===Sn.CONSTRUCTED&&n.constructOnly?n5("construct-only",s):void l.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const n5=(e,t)=>{de.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var o5,a5;function ite(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const ia=Symbol("Accessor-Handles"),IT=Symbol("Accessor-Initialized");var Dc;let je=(Dc=class{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...p){super(...p),this.inherited=null,s&&s.apply(this,p)}}Lv(o.prototype);for(const l in t){const p=t[l];o.prototype[l]=typeof p=="function"?function(...m){const v=this.inherited;let _;this.inherited=function(...E){if(n.prototype[l])return n.prototype[l].apply(this,E)};try{_=p.apply(this,m)}catch(E){throw this.inherited=v,E}return this.inherited=v,_}:t[l]}for(const l in r){const p=ite(r[l]);A(p)(o.prototype,l)}return P(i)(o)}static freeze(t){return t instanceof Dc?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof Dc?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var i;if(this[o5]=null,this[a5]=!1,this.constructor===Dc)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new PX(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[IT]=!0}initialize(){}[oj](){this[ia]=cr(this[ia])}destroy(){var t;this.destroyed||(fee(this),this.__accessor__.destroy(),(t=UX())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[IT]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Sn.DESTROYED||!1}get destroying(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Sn.DESTROYING||!1}commitProperty(t){qo(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return mb(this,t,r),this}watch(t,r,i){return U9(de.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),bee(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const s of i)s.remove();return}(this[ia]??(this[ia]=new F0)).add(t,r)}removeHandles(t){var r;(r=this[ia])==null||r.remove(t)}removeAllHandles(){var t;(t=this[ia])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[ia])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[ia])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}},o5=ia,a5=IT,Dc);const Wj=e=>{let t=class extends e{clone(){var p;const r=Cs(this);sj(r,"unable to clone instance of non-accessor class");const i=r.metadata,s=r.store,n={},o=new Map;for(const m in i){const v=i[m],_=s==null?void 0:s.originOf(m),E=v.clonable;if(v.readOnly||E===!1||_!==_t.USER&&_!==_t.DEFAULTS&&_!==_t.WEB_MAP&&_!==_t.WEB_SCENE)continue;const $=this[m];let M=null;M=typeof E=="function"?E($):E==="reference"?$:h$($),$!=null&&M==null||(_===_t.DEFAULTS?o.set(m,M):n[m]=M)}const l=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const m=(p=Cs(l))==null?void 0:p.store;if(m)for(const[v,_]of o)m.set(v,_,_t.DEFAULTS)}return l}};return t=a([P("esri.core.Clonable")],t),t};let iy=class extends Wj(je){};iy=a([P("esri.core.Clonable")],iy),(function(e){e.ClonableMixin=Wj})(iy||(iy={}));const Ge=iy;let zw=class Qj{constructor(){this._emitter=new Qj.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){var m;let o=(m=this._listenersMap)==null?void 0:m.get(s);if(!o)return!1;const l=this._target||this;let p=!1;for(const v of o.slice()){const _="deref"in v?v.deref():v;_?_==null||_.call(l,n):p=!0}return p&&(o=o.filter((v=>!("deref"in v)||v.deref()!=null)),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const l=s.map((p=>this.on(p,n)));return th(l)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),Lt((()=>{var m;const l=(m=this._listenersMap)==null?void 0:m.get(s),p=(l==null?void 0:l.indexOf(n))??-1;p>=0&&l.splice(p,1)}))}once(s,n){const o=this.on(s,(l=>{o.remove();const p="deref"in n?n.deref():n;p==null||p.call(null,l)}));return o}hasEventListener(s){var o;const n=(o=this._listenersMap)==null?void 0:o.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let s=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=a([P("esri.core.Evented")],s),s};let r=class extends je{constructor(){super(...arguments),this._emitter=new zw.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,s){return this._emitter.emit(i,s)}on(i,s){return this._emitter.on(i,s)}once(i,s){return this._emitter.once(i,s)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=a([P("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(zw||(zw={}));const el=zw;var zt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(zt||(zt={}));function eR(e){return(t,r)=>{t[r]=e}}let G0=class extends pj{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};function Zg(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}var cl;let ste=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},nte=class{constructor(t,r,i,s,n){this.target=t,this.added=r,this.removed=i,this.start=s,this.deleteCount=n}};const Ln=new j0(ste,void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}));function l5(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function MT(e){return e?e instanceof Zu?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function CT(e){if(e!=null&&e.length)return e[0]}function ote(e,t,r,i){const s=Math.min(e.length-r,t.length-i);let n=0;for(;n<s&&e[r+n]===t[i+n];)n++;return n}function Jj(e,t,r,i){t&&t.forEach(((s,n,o)=>{e.push(s),Jj(e,r.call(i,s,n,o),r,i)}))}const Su=new Set,Eu=new Set,Tu=new Set,kT=new Map;let ate=0;var Rp;let Zu=(Rp=class extends el.EventedAccessor{static isCollection(t){return t!=null&&t instanceof cl}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new G0,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:ate++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof cl?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Ze(this._observable),this._items}set items(t){this._emitBeforeChanges(zt.ADD)||(this._splice(0,this.length,MT(t)),this._emitAfterChanges(zt.ADD))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t))}on(t,r){if(this.destroyed)return Lt();if(t==="change"){const i=this._chgListeners,s={removed:!1,callback:r};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Lt((()=>{s.removed=!0,i.splice(i.indexOf(s),1)}))}return this._emitter.on(t,r)}once(t,r){const i="deref"in r?()=>r.deref():()=>r,s=this.on(t,(n=>{var o;(o=i())==null||o.call(null,n),s.remove()}));return s}add(t,r){if(Ze(this._observable),this._emitBeforeChanges(zt.ADD))return this;const i=this.getNextIndex(r??null);return this._splice(i,0,[t]),this._emitAfterChanges(zt.ADD),this}addMany(t,r=this._items.length){if(Ze(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(zt.ADD))return this;const i=this.getNextIndex(r);return this._splice(i,0,MT(t)),this._emitAfterChanges(zt.ADD),this}at(t){if(Ze(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ze(this._observable),!this.length||this._emitBeforeChanges(zt.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(zt.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ze(this._observable),this._createNewInstance({items:this._items.map(H)})}concat(...t){Ze(this._observable);const r=t.map(MT);return this._createNewInstance({items:this._items.concat(...r)})}drain(t,r){if(Ze(this._observable),!this.length||this._emitBeforeChanges(zt.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let n=0;n<s;n++)t.call(r,i[n],n,i);this._emitAfterChanges(zt.REMOVE)}destroyAll(){this.drain(l5)}destroyMany(t){const r=this.removeMany(t);return r.forEach(l5),r}every(t,r){return Ze(this._observable),this._items.every(t,r)}filter(t,r){Ze(this._observable);const i=arguments.length===2?this._items.filter(t,r):this._items.filter(t);return this._createNewInstance({items:i})}find(t,r){return Ze(this._observable),this._items.find(t,r)}findIndex(t,r){return Ze(this._observable),this._items.findIndex(t,r)}flatten(t,r){Ze(this._observable);const i=[];return Jj(i,this,t,r),new cl(i)}forEach(t,r){return Ze(this._observable),this._items.forEach(t,r)}getItemAt(t){return Ze(this._observable),this._items[t]}getNextIndex(t){Ze(this._observable);const r=this.length;return(t=t??r)<0?t=0:t>r&&(t=r),t}includes(t,r=0){return Ze(this._observable),this._items.includes(t,r)}indexOf(t,r=0){return Ze(this._observable),this._items.indexOf(t,r)}join(t=","){return Ze(this._observable),this._items.join(t)}lastIndexOf(t,r=this.length-1){return Ze(this._observable),this._items.lastIndexOf(t,r)}map(t,r){Ze(this._observable);const i=this._items.map(t,r);return new cl({items:i})}reorder(t,r=this.length-1){Ze(this._observable);const i=this.indexOf(t);if(i!==-1){if(r<0?r=0:r>=this.length&&(r=this.length-1),i!==r){if(this._emitBeforeChanges(zt.MOVE))return t;this._splice(i,1),this._splice(r,0,[t]),this._emitAfterChanges(zt.MOVE)}return t}}pop(){if(Ze(this._observable),!this.length||this._emitBeforeChanges(zt.REMOVE))return;const t=CT(this._splice(this.length-1,1));return this._emitAfterChanges(zt.REMOVE),t}push(...t){return Ze(this._observable),this._emitBeforeChanges(zt.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(zt.ADD)),this.length}reduce(t,r){Ze(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,r):i.reduce(t)}reduceRight(t,r){Ze(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,r):i.reduceRight(t)}remove(t){return Ze(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ze(this._observable),t<0||t>=this.length||this._emitBeforeChanges(zt.REMOVE))return;const r=CT(this._splice(t,1));return this._emitAfterChanges(zt.REMOVE),r}removeMany(t){if(Ze(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(zt.REMOVE))return[];const r=t instanceof cl?t.toArray():t,i=this._items,s=[],n=r.length;for(let o=0;o<n;o++){const l=r[o],p=i.indexOf(l);if(p>-1){const m=1+ote(r,i,o+1,p+1),v=this._splice(p,m);v&&v.length>0&&s.push.apply(s,v),o+=m-1}}return this._emitAfterChanges(zt.REMOVE),s}reverse(){if(Ze(this._observable),this._emitBeforeChanges(zt.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(zt.MOVE),this}shift(){if(Ze(this._observable),!this.length||this._emitBeforeChanges(zt.REMOVE))return;const t=CT(this._splice(0,1));return this._emitAfterChanges(zt.REMOVE),t}slice(t=0,r=this.length){return Ze(this._observable),this._createNewInstance({items:this._items.slice(t,r)})}some(t,r){return Ze(this._observable),this._items.some(t,r)}sort(t){if(Ze(this._observable),!this.length||this._emitBeforeChanges(zt.MOVE)||!this._requiresSort(t))return this;const r=this._splice(0,this.length);return arguments.length?r.sort(t):r.sort(),this._splice(0,0,r),this._emitAfterChanges(zt.MOVE),this}_requiresSort(t=(r,i)=>r===i?0:r<i?-1:1){const r=this.length-1;for(let i=0;i<r;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,r,...i){Ze(this._observable),arguments.length===1&&(r=this.length),r??(r=0);const s=(r?zt.REMOVE:0)|(i.length?zt.ADD:0);if(this._emitBeforeChanges(s))return[];const n=this._splice(t,r,i)||[];return this._emitAfterChanges(s),n}toArray(){return Ze(this._observable),this._items.slice()}toJSON(t){return Ze(this._observable),this.toArray().map((r=>Zg(r)?r.toJSON(t):r))}toLocaleString(){return Ze(this._observable),this._items.toLocaleString()}toString(){return Ze(this._observable),this._items.toString()}unshift(...t){return Ze(this._observable),!t.length||this._emitBeforeChanges(zt.ADD)||(this._splice(0,0,t),this._emitAfterChanges(zt.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,r,i){const s=this._items,n=this.itemType;let o,l;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=jv((()=>this._dispatchChange()))),t<0&&(t+=this.length),r){if(l=s.splice(t,r),this.hasEventListener("before-remove")){const p=Ln.acquire();p.target=this,p.cancellable=!0;for(let m=0,v=l.length;m<v;m++)o=l[m],p.reset(o),this.emit("before-remove",p),p.defaultPrevented&&(l.splice(m,1),s.splice(t,0,o),t+=1,m-=1,v-=1);Ln.release(p)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const p=Ln.acquire();p.target=this,p.cancellable=!1;const m=l.length;for(let v=0;v<m;v++)p.reset(l[v]),this.emit("after-remove",p);Ln.release(p)}}if(i!=null&&i.length){if(n){const _=[];for(const E of i){const $=n.ensureType(E);$==null&&E!=null||_.push($)}i=_}const p=this.hasEventListener("before-add"),m=this.hasEventListener("after-add"),v=t===this.length;if(p||m){const _=Ln.acquire();_.target=this,_.cancellable=!0;const E=Ln.acquire();E.target=this,E.cancellable=!1;for(const $ of i)p?(_.reset($),this.emit("before-add",_),_.defaultPrevented||(v?s.push($):s.splice(t++,0,$),this._set("length",s.length),m&&(E.reset($),this.emit("after-add",E)))):(v?s.push($):s.splice(t++,0,$),this._set("length",s.length),E.reset($),this.emit("after-add",E));Ln.release(E),Ln.release(_)}else{if(v)for(const _ of i)s.push(_);else s.splice(t,0,...i);this._set("length",s.length)}}if((i!=null&&i.length||l!=null&&l.length)&&this._notifyChangeEvent(i,l),this.hasEventListener("after-splice")){const p=new nte(this,i,l,t,r);this.emit("after-splice",p)}return l}_emitBeforeChanges(t){let r=!1;if(this.hasEventListener("before-changes")){const i=Ln.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),r=i.defaultPrevented,Ln.release(i)}return r}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const r=Ln.acquire();r.target=this,r.cancellable=!1,r.type=t,this.emit("after-changes",r),Ln.release(r)}this._observable.notify()}_notifyChangeEvent(t,r){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:r})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const r of t){const i=r.changes;Su.clear(),Eu.clear(),Tu.clear();for(const{added:m,removed:v}of i){if(m)if(Tu.size===0&&Eu.size===0)for(const _ of m)Su.add(_);else for(const _ of m)Eu.has(_)?(Tu.add(_),Eu.delete(_)):Tu.has(_)||Su.add(_);if(v)if(Tu.size===0&&Su.size===0)for(const _ of v)Eu.add(_);else for(const _ of v)Su.has(_)?Su.delete(_):(Tu.delete(_),Eu.add(_))}const s=ws.acquire();Su.forEach((m=>{s.push(m)}));const n=ws.acquire();Eu.forEach((m=>{n.push(m)}));const o=this._items,l=r.items,p=ws.acquire();if(Tu.forEach((m=>{l.indexOf(m)!==o.indexOf(m)&&p.push(m)})),r.listeners&&(s.length||n.length||p.length)){const m={target:this,added:s,removed:n,moved:p},v=r.listeners.length;for(let _=0;_<v;_++){const E=r.listeners[_];E.removed||E.callback.call(this,m)}}ws.release(s),ws.release(n),ws.release(p)}Su.clear(),Eu.clear(),Tu.clear()}},cl=Rp,Rp.ofType=t=>{if(!t)return cl;if(kT.has(t))return kT.get(t);let r=null;if(typeof t=="function")r=t.prototype.declaredClass;else if(t.base)r=t.base.prototype.declaredClass;else for(const s in t.typeMap){const n=t.typeMap[s].prototype.declaredClass;r?r+=` | ${n}`:r=n}let i=class extends cl{};return a([eR({Type:t,ensureType:typeof t=="function"?Br(t):Ha(t)})],i.prototype,"itemType",void 0),i=a([P(`esri.core.Collection<${r}>`)],i),kT.set(t,i),i},Rp);a([A()],Zu.prototype,"_updating",void 0),a([A()],Zu.prototype,"length",void 0),a([A()],Zu.prototype,"items",null),a([A({readOnly:!0})],Zu.prototype,"updating",null),Zu=cl=a([P("esri.core.Collection")],Zu);const Te=Zu;let lte=class Zj{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new Zj;return this._values.forEach(((i,s)=>{t&&t.has(s)||r.set(s,H(i.value),i.origin)})),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??_t.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter((i=>{var s;return((s=this._values.get(i))==null?void 0:s.origin)===t}))}set(t,r,i){if((i=this._normalizeOrigin(i))===_t.DEFAULTS){const s=this._values.get(t);if((s==null?void 0:s.origin)!=null&&s.origin>i)return}this._values.set(t,new ute(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}isAtOrigin(t,r){return r=this._normalizeOrigin(r),this.has(t,r)&&this.originOf(t)===r}isBelowOrigin(t,r){return r=this._normalizeOrigin(r),!this.has(t)||this.originOf(t)<r}forEach(t){this._values.forEach((({value:r},i)=>t(r,i)))}_normalizeOrigin(t){if(t!=null)return t===_t.DEFAULTS?t:_t.USER}},ute=class{constructor(t,r){this.value=t,this.origin=r}};function Yj(e,t,r){t.keys().forEach((s=>{r.set(s,t.get(s),_t.DEFAULTS)}));const i=e.metadata;Object.keys(i).forEach((s=>{e.internalGet(s)&&r.set(s,e.internalGet(s),_t.DEFAULTS)}))}function cte(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&BP(i,r))return!0}else for(const s of i)if(s===t||s.includes(".")&&s.indexOf(t)===0&&BP(s,r))return!0;return!1}function dte(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function pte(e,t,r,i,s){let n=$$(t[r],s);dte(n)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))n=$$(t[o],s),cte(n,r,i)&&(e[o]=!0)}function hte(e,t,r,i){const s=r.metadata,n=Zee(s[t],i),o=n==null?void 0:n.default;if(o===void 0)return;const l=typeof o=="function"?o.call(e,t,i):o;l!==void 0&&r.set(t,l)}const Kj={origin:"service"};function Xj(e,t,r=Kj){if(!t||typeof t!="object")return;const i=Cs(e),s=i.metadata,n={};for(const o of Object.getOwnPropertyNames(t))pte(n,s,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(n)){const l=$$(s[o],r).read,p=l==null?void 0:l.source;let m;m=p&&typeof p=="string"?Nv(t,p):t[o],l!=null&&l.reader&&(m=l.reader.call(e,m,t,r)),m!==void 0&&i.set(o,m)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||hte(e,o,i,r)}i.setDefaultOrigin("user")}function eB(e,t,r,i=Kj){var n;const s={...i,messages:[]};r(s),(n=s.messages)==null||n.forEach((o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)}))}function Ate(e,t,r,i,s){var o,l;const n={};return(l=(o=t.write)==null?void 0:o.writer)==null||l.call(e,i,n,r,s),n}function tB(e,t,r,i,s,n){if(!(i!=null&&i.write))return!1;const o=qo(e,r);if(!s&&i.write.overridePolicy){const l=i.write.overridePolicy.call(e,o,r,n??void 0);l!==void 0&&(s=l)}if(s||(s=i.write),!s||s.enabled===!1||s.layerContainerTypes&&(n!=null&&n.layerContainerType)&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const l=new Q("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return l&&(n!=null&&n.messages)?n.messages.push(l):l&&!n&&de.getLogger("esri.core.accessorSupport.write").error(l.name,l.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===_t.DEFAULTS)&&fte(e,r,n,i,o)||!s.ignoreOrigin&&(n!=null&&n.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<tu(n.origin))}function fte(e,t,r,i,s){const n=i.default;if(n===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,r??void 0);return oS(o,s)}return!1}return n===s}function mte(e,t,r,i){const s=Cs(e),n=s.metadata,o=qj(n[t],i);return!!o&&tB(e,s,t,o,r,i)}function rB(e,t,r){var n,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Fw(t,e.toJSON(r));const i=Cs(e),s=i.metadata;for(const l in s){const p=qj(s[l],r);if(!tB(e,i,l,p,void 0,r))continue;const m=qo(e,l),v=Ate(e,p,p.write&&typeof p.write.target=="string"?p.write.target:l,m,r);Object.keys(v).length>0&&(t=Fw(t,v),(o=(n=r==null?void 0:r.resources)==null?void 0:n.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then((()=>Fw(t,v,(()=>"replace-arrays"))))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:l,oldOrigin:CX(i.store.originOf(l)),newOrigin:r.origin}))}return t}const iB=e=>{let t=class extends e{constructor(...r){super(...r);const i=Cs(this),s=i.store,n=new lte;i.store=n,Yj(i,s,n)}read(r,i){Xj(this,r,i)}write(r,i){return rB(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return yte.call(this,r,i)}};return t=a([P("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function yte(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let sy=class extends iB(je){};sy=a([P("esri.core.JSONSupport")],sy),(function(e){e.JSONSupportMixin=iB})(sy||(sy={}));const ee=sy,gte=Object.prototype.toString;function vte(e){const t="__accessorMetadata__"in e?Br(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return wte.apply(this,r)}}function wte(e,t,r,i){Dv(e,t).cast=i}function bte(e){return(t,r)=>{Dv(t,e).cast=t[r]}}function Ft(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&gte.call(e[0])==="[object Function]"?vte(e[0]):e.length===1&&typeof e[0]=="string"?bte(e[0]):void 0}function pe(e,t,r){let i,s;return t===void 0||Array.isArray(t)?(s=e,r=t,i=[void 0]):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const l=n.constructor.prototype;i.forEach((p=>{const m=Zk(n,p,s);m.read&&typeof m.read=="object"||(m.read={}),m.read.reader=l[o],r&&(m.read.source=(m.read.source||[]).concat(r))}))}}function ye(e,t,r){let i,s;return t===void 0?(s=e,i=[void 0]):typeof t!="string"?(s=e,i=[void 0],r=t):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const l=n.constructor.prototype;for(const p of i){const m=Zk(n,p,s);m.write&&typeof m.write=="object"||(m.write={}),r&&(m.write.target=r),m.write.writer=l[o]}}}const _te="modulepreload",Ste=function(e,t){return new URL(e,t).href},u5={},ce=function(t,r,i){let s=Promise.resolve();if(r&&r.length>0){let o=function(v){return Promise.all(v.map(_=>Promise.resolve(_).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};const l=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),m=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));s=o(r.map(v=>{if(v=Ste(v,i),v in u5)return;u5[v]=!0;const _=v.endsWith(".css"),E=_?'[rel="stylesheet"]':"";if(!!i)for(let k=l.length-1;k>=0;k--){const N=l[k];if(N.href===v&&(!_||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${E}`))return;const M=document.createElement("link");if(M.rel=_?"stylesheet":_te,_||(M.as="script"),M.crossOrigin="",M.href=v,m&&M.setAttribute("nonce",m),document.head.appendChild(M),_)return new Promise((k,N)=>{M.addEventListener("load",k),M.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${v}`)))})}))}function n(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&n(l.reason);return t().catch(n)})};let RT;async function Ete(){return RT==null&&(RT=ce(()=>import("./WhereClauseCache-DOjtGize.js"),__vite__mapDeps([0,1]),import.meta.url).then((e=>new e.WhereClauseCache(500,500)))),RT}async function sB(e,t){const r=await Ete(),i=r.get(e,t);if(i==null)throw r.getError(e,t);return i}function Gw(e,t){return e||(e=null),t||(t=null),e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function I$(e,t){return e||(e=null),t||(t=null),e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function Tte(e,t){return t.length===0?null:`${e} IN (${$te(t)})`}function $te(e){return e.map((t=>typeof t=="string"?xte(t):t)).join(",")}function xte(e){return`'${e.replaceAll("'","''")}'`}function Ite(e){return typeof e=="number"}function LRe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function DRe(e){return typeof e=="boolean"}function zv(e){return typeof e=="string"||e instanceof String}function Mte(e){return e==null||zv(e)}function FRe(e){return Array.isArray(e)}function nB(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function jRe(e){return e instanceof Date}class ih extends Error{}class Cte extends ih{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class kte extends ih{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Rte extends ih{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class NA extends ih{}class oB extends ih{constructor(t){super(`Invalid unit ${t}`)}}class es extends ih{}class $u extends ih{constructor(){super("Zone is an abstract class")}}const ke="numeric",Xo="short",In="long",xb={year:ke,month:ke,day:ke},aB={year:ke,month:Xo,day:ke},Ote={year:ke,month:Xo,day:ke,weekday:Xo},lB={year:ke,month:In,day:ke},uB={year:ke,month:In,day:ke,weekday:In},cB={hour:ke,minute:ke},dB={hour:ke,minute:ke,second:ke},pB={hour:ke,minute:ke,second:ke,timeZoneName:Xo},hB={hour:ke,minute:ke,second:ke,timeZoneName:In},AB={hour:ke,minute:ke,hourCycle:"h23"},fB={hour:ke,minute:ke,second:ke,hourCycle:"h23"},mB={hour:ke,minute:ke,second:ke,hourCycle:"h23",timeZoneName:Xo},yB={hour:ke,minute:ke,second:ke,hourCycle:"h23",timeZoneName:In},gB={year:ke,month:ke,day:ke,hour:ke,minute:ke},vB={year:ke,month:ke,day:ke,hour:ke,minute:ke,second:ke},wB={year:ke,month:Xo,day:ke,hour:ke,minute:ke},bB={year:ke,month:Xo,day:ke,hour:ke,minute:ke,second:ke},Pte={year:ke,month:Xo,day:ke,weekday:Xo,hour:ke,minute:ke},_B={year:ke,month:In,day:ke,hour:ke,minute:ke,timeZoneName:Xo},SB={year:ke,month:In,day:ke,hour:ke,minute:ke,second:ke,timeZoneName:Xo},EB={year:ke,month:In,day:ke,weekday:In,hour:ke,minute:ke,timeZoneName:In},TB={year:ke,month:In,day:ke,weekday:In,hour:ke,minute:ke,second:ke,timeZoneName:In};class sh{get type(){throw new $u}get name(){throw new $u}get ianaName(){return this.name}get isUniversal(){throw new $u}offsetName(t,r){throw new $u}formatOffset(t,r){throw new $u}offset(t){throw new $u}equals(t){throw new $u}get isValid(){throw new $u}}let OT=null;class AS extends sh{static get instance(){return OT===null&&(OT=new AS),OT}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return LB(t,r,i)}formatOffset(t,r){return cg(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const M$=new Map;function Nte(e){let t=M$.get(e);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),M$.set(e,t)),t}const Lte={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Dte(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,s,n,o,l,p,m,v]=i;return[o,s,n,l,p,m,v]}function Fte(e,t){const r=e.formatToParts(t),i=[];for(let s=0;s<r.length;s++){const{type:n,value:o}=r[s],l=Lte[n];n==="era"?i[l]=o:yt(l)||(i[l]=parseInt(o,10))}return i}const PT=new Map;class an extends sh{static create(t){let r=PT.get(t);return r===void 0&&PT.set(t,r=new an(t)),r}static resetCache(){PT.clear(),M$.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=an.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return LB(t,r,i,this.name)}formatOffset(t,r){return cg(this.offset(t),r)}offset(t){if(!this.valid)return NaN;const r=new Date(t);if(isNaN(r))return NaN;const i=Nte(this.name);let[s,n,o,l,p,m,v]=i.formatToParts?Fte(i,r):Dte(i,r);l==="BC"&&(s=-Math.abs(s)+1);const E=mS({year:s,month:n,day:o,hour:p===24?0:p,minute:m,second:v,millisecond:0});let $=+r;const M=$%1e3;return $-=M>=0?M:1e3+M,(E-$)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let c5={};function jte(e,t={}){const r=JSON.stringify([e,t]);let i=c5[r];return i||(i=new Intl.ListFormat(e,t),c5[r]=i),i}const C$=new Map;function k$(e,t={}){const r=JSON.stringify([e,t]);let i=C$.get(r);return i===void 0&&(i=new Intl.DateTimeFormat(e,t),C$.set(r,i)),i}const R$=new Map;function Bte(e,t={}){const r=JSON.stringify([e,t]);let i=R$.get(r);return i===void 0&&(i=new Intl.NumberFormat(e,t),R$.set(r,i)),i}const O$=new Map;function Ute(e,t={}){const{base:r,...i}=t,s=JSON.stringify([e,i]);let n=O$.get(s);return n===void 0&&(n=new Intl.RelativeTimeFormat(e,t),O$.set(s,n)),n}let ny=null;function Vte(){return ny||(ny=new Intl.DateTimeFormat().resolvedOptions().locale,ny)}const P$=new Map;function $B(e){let t=P$.get(e);return t===void 0&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),P$.set(e,t)),t}const N$=new Map;function zte(e){let t=N$.get(e);if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in t||(t={...xB,...t}),N$.set(e,t)}return t}function Gte(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,s;try{i=k$(e).resolvedOptions(),s=e}catch{const p=e.substring(0,r);i=k$(p).resolvedOptions(),s=p}const{numberingSystem:n,calendar:o}=i;return[s,n,o]}}function qte(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function Hte(e){const t=[];for(let r=1;r<=12;r++){const i=Pe.utc(2009,r,1);t.push(e(i))}return t}function Wte(e){const t=[];for(let r=1;r<=7;r++){const i=Pe.utc(2016,11,13+r);t.push(e(i))}return t}function R1(e,t,r,i){const s=e.listingMode();return s==="error"?null:s==="en"?r(t):i(t)}function Qte(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||$B(e.locale).numberingSystem==="latn"}class Jte{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:n,...o}=i;if(!r||Object.keys(o).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=Bte(t,l)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):nR(t,3);return ti(r,this.padTo)}}}class Zte{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&an.create(l).valid?(s=l,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=k$(r,n)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Yte{constructor(t,r,i){this.opts={style:"long",...i},!r&&PB()&&(this.rtf=Ute(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):vre(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const xB={firstDay:1,minimalDays:4,weekend:[6,7]};class Qt{static fromOpts(t){return Qt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,s,n=!1){const o=t||Lr.defaultLocale,l=o||(n?"en-US":Vte()),p=r||Lr.defaultNumberingSystem,m=i||Lr.defaultOutputCalendar,v=D$(s)||Lr.defaultWeekSettings;return new Qt(l,p,m,v,o)}static resetCache(){ny=null,C$.clear(),R$.clear(),O$.clear(),P$.clear(),N$.clear()}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:s}={}){return Qt.create(t,r,i,s)}constructor(t,r,i,s,n){const[o,l,p]=Gte(t);this.locale=o,this.numberingSystem=r||l||null,this.outputCalendar=i||p||null,this.weekSettings=s,this.intl=qte(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Qte(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Qt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,D$(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return R1(this,t,jB,()=>{const i=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=Hte(n=>this.extract(n,i,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1){return R1(this,t,VB,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=Wte(n=>this.extract(n,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return R1(this,void 0,()=>zB,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Pe.utc(2016,11,13,9),Pe.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return R1(this,t,GB,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Pe.utc(-40,1,1),Pe.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const s=this.dtFormatter(t,r),n=s.formatToParts(),o=n.find(l=>l.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new Jte(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new Zte(t,this.intl,r)}relFormatter(t={}){return new Yte(this.intl,this.isEnglish(),t)}listFormatter(t={}){return jte(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||$B(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:NB()?zte(this.locale):xB}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let NT=null;class ii extends sh{static get utcInstance(){return NT===null&&(NT=new ii(0)),NT}static instance(t){return t===0?ii.utcInstance:new ii(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new ii(yS(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${cg(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${cg(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return cg(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Kte extends sh{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function lc(e,t){if(yt(e)||e===null)return t;if(e instanceof sh)return e;if(sre(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?AS.instance:r==="utc"||r==="gmt"?ii.utcInstance:ii.parseSpecifier(r)||an.create(e)}else return Cc(e)?ii.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Kte(e)}const tR={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},d5={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Xte=tR.hanidec.replace(/[\[|\]]/g,"").split("");function ere(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(tR.hanidec)!==-1)t+=Xte.indexOf(e[r]);else for(const s in d5){const[n,o]=d5[s];i>=n&&i<=o&&(t+=i-n)}}return parseInt(t,10)}else return t}const L$=new Map;function tre(){L$.clear()}function yo({numberingSystem:e},t=""){const r=e||"latn";let i=L$.get(r);i===void 0&&(i=new Map,L$.set(r,i));let s=i.get(t);return s===void 0&&(s=new RegExp(`${tR[r]}${t}`),i.set(t,s)),s}let p5=()=>Date.now(),h5="system",A5=null,f5=null,m5=null,y5=60,g5,v5=null;class Lr{static get now(){return p5}static set now(t){p5=t}static set defaultZone(t){h5=t}static get defaultZone(){return lc(h5,AS.instance)}static get defaultLocale(){return A5}static set defaultLocale(t){A5=t}static get defaultNumberingSystem(){return f5}static set defaultNumberingSystem(t){f5=t}static get defaultOutputCalendar(){return m5}static set defaultOutputCalendar(t){m5=t}static get defaultWeekSettings(){return v5}static set defaultWeekSettings(t){v5=D$(t)}static get twoDigitCutoffYear(){return y5}static set twoDigitCutoffYear(t){y5=t%100}static get throwOnInvalid(){return g5}static set throwOnInvalid(t){g5=t}static resetCaches(){Qt.resetCache(),an.resetCache(),Pe.resetCache(),tre()}}class Ho{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const IB=[0,31,59,90,120,151,181,212,243,273,304,334],MB=[0,31,60,91,121,152,182,213,244,274,305,335];function ro(e,t){return new Ho("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function rR(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function CB(e,t,r){return r+(Gv(e)?MB:IB)[t-1]}function kB(e,t){const r=Gv(e)?MB:IB,i=r.findIndex(n=>n<t),s=t-r[i];return{month:i+1,day:s}}function iR(e,t){return(e-t+7)%7+1}function Ib(e,t=4,r=1){const{year:i,month:s,day:n}=e,o=CB(i,s,n),l=iR(rR(i,s,n),r);let p=Math.floor((o-l+14-t)/7),m;return p<1?(m=i-1,p=Yg(m,t,r)):p>Yg(i,t,r)?(m=i+1,p=1):m=i,{weekYear:m,weekNumber:p,weekday:l,...gS(e)}}function w5(e,t=4,r=1){const{weekYear:i,weekNumber:s,weekday:n}=e,o=iR(rR(i,1,t),r),l=XA(i);let p=s*7+n-o-7+t,m;p<1?(m=i-1,p+=XA(m)):p>l?(m=i+1,p-=XA(i)):m=i;const{month:v,day:_}=kB(m,p);return{year:m,month:v,day:_,...gS(e)}}function LT(e){const{year:t,month:r,day:i}=e,s=CB(t,r,i);return{year:t,ordinal:s,...gS(e)}}function b5(e){const{year:t,ordinal:r}=e,{month:i,day:s}=kB(t,r);return{year:t,month:i,day:s,...gS(e)}}function _5(e,t){if(!yt(e.localWeekday)||!yt(e.localWeekNumber)||!yt(e.localWeekYear)){if(!yt(e.weekday)||!yt(e.weekNumber)||!yt(e.weekYear))throw new NA("Cannot mix locale-based week fields with ISO-based week fields");return yt(e.localWeekday)||(e.weekday=e.localWeekday),yt(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),yt(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function rre(e,t=4,r=1){const i=fS(e.weekYear),s=io(e.weekNumber,1,Yg(e.weekYear,t,r)),n=io(e.weekday,1,7);return i?s?n?!1:ro("weekday",e.weekday):ro("week",e.weekNumber):ro("weekYear",e.weekYear)}function ire(e){const t=fS(e.year),r=io(e.ordinal,1,XA(e.year));return t?r?!1:ro("ordinal",e.ordinal):ro("year",e.year)}function RB(e){const t=fS(e.year),r=io(e.month,1,12),i=io(e.day,1,Mb(e.year,e.month));return t?r?i?!1:ro("day",e.day):ro("month",e.month):ro("year",e.year)}function OB(e){const{hour:t,minute:r,second:i,millisecond:s}=e,n=io(t,0,23)||t===24&&r===0&&i===0&&s===0,o=io(r,0,59),l=io(i,0,59),p=io(s,0,999);return n?o?l?p?!1:ro("millisecond",s):ro("second",i):ro("minute",r):ro("hour",t)}function yt(e){return typeof e>"u"}function Cc(e){return typeof e=="number"}function fS(e){return typeof e=="number"&&e%1===0}function sre(e){return typeof e=="string"}function nre(e){return Object.prototype.toString.call(e)==="[object Date]"}function PB(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function NB(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function ore(e){return Array.isArray(e)?e:[e]}function S5(e,t,r){if(e.length!==0)return e.reduce((i,s)=>{const n=[t(s),s];return i&&r(i[0],n[0])===i[0]?i:n},null)[1]}function are(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function f0(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D$(e){if(e==null)return null;if(typeof e!="object")throw new es("Week settings must be an object");if(!io(e.firstDay,1,7)||!io(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!io(t,1,7)))throw new es("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function io(e,t,r){return fS(e)&&e>=t&&e<=r}function lre(e,t){return e-t*Math.floor(e/t)}function ti(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Yu(e){if(!(yt(e)||e===null||e===""))return parseInt(e,10)}function ld(e){if(!(yt(e)||e===null||e===""))return parseFloat(e)}function sR(e){if(!(yt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function nR(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function Gv(e){return e%4===0&&(e%100!==0||e%400===0)}function XA(e){return Gv(e)?366:365}function Mb(e,t){const r=lre(t-1,12)+1,i=e+(t-r)/12;return r===2?Gv(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function mS(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function E5(e,t,r){return-iR(rR(e,1,t),r)+t-1}function Yg(e,t=4,r=1){const i=E5(e,t,r),s=E5(e+1,t,r);return(XA(e)-i+s)/7}function F$(e){return e>99?e:e>Lr.twoDigitCutoffYear?1900+e:2e3+e}function LB(e,t,r,i=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(n.timeZone=i);const o={timeZoneName:t,...n},l=new Intl.DateTimeFormat(r,o).formatToParts(s).find(p=>p.type.toLowerCase()==="timezonename");return l?l.value:null}function yS(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,s=r<0||Object.is(r,-0)?-i:i;return r*60+s}function DB(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new es(`Invalid unit value ${e}`);return t}function Cb(e,t){const r={};for(const i in e)if(f0(e,i)){const s=e[i];if(s==null)continue;r[t(i)]=DB(s)}return r}function cg(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${ti(r,2)}:${ti(i,2)}`;case"narrow":return`${s}${r}${i>0?`:${i}`:""}`;case"techie":return`${s}${ti(r,2)}${ti(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function gS(e){return are(e,["hour","minute","second","millisecond"])}const ure=["January","February","March","April","May","June","July","August","September","October","November","December"],FB=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],cre=["J","F","M","A","M","J","J","A","S","O","N","D"];function jB(e){switch(e){case"narrow":return[...cre];case"short":return[...FB];case"long":return[...ure];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const BB=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],UB=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],dre=["M","T","W","T","F","S","S"];function VB(e){switch(e){case"narrow":return[...dre];case"short":return[...UB];case"long":return[...BB];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const zB=["AM","PM"],pre=["Before Christ","Anno Domini"],hre=["BC","AD"],Are=["B","A"];function GB(e){switch(e){case"narrow":return[...Are];case"short":return[...hre];case"long":return[...pre];default:return null}}function fre(e){return zB[e.hour<12?0:1]}function mre(e,t){return VB(t)[e.weekday-1]}function yre(e,t){return jB(t)[e.month-1]}function gre(e,t){return GB(t)[e.year<0?0:1]}function vre(e,t,r="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&n){const _=e==="days";switch(t){case 1:return _?"tomorrow":`next ${s[e][0]}`;case-1:return _?"yesterday":`last ${s[e][0]}`;case 0:return _?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,l=Math.abs(t),p=l===1,m=s[e],v=i?p?m[1]:m[2]||m[1]:p?s[e][0]:e;return o?`${l} ${v} ago`:`in ${l} ${v}`}function T5(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const wre={D:xb,DD:aB,DDD:lB,DDDD:uB,t:cB,tt:dB,ttt:pB,tttt:hB,T:AB,TT:fB,TTT:mB,TTTT:yB,f:gB,ff:wB,fff:_B,ffff:EB,F:vB,FF:bB,FFF:SB,FFFF:TB};class ss{static create(t,r={}){return new ss(t,r)}static parseFormat(t){let r=null,i="",s=!1;const n=[];for(let o=0;o<t.length;o++){const l=t.charAt(o);l==="'"?(i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),r=null,i="",s=!s):s||l===r?i+=l:(i.length>0&&n.push({literal:/^\s+$/.test(i),val:i}),i=l,r=l)}return i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),n}static macroTokenToFormatOpts(t){return wre[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return ti(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=($,M)=>this.loc.extract(t,$,M),o=$=>t.isOffsetFixed&&t.offset===0&&$.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,$.format):"",l=()=>i?fre(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),p=($,M)=>i?yre(t,$):n(M?{month:$}:{month:$,day:"numeric"},"month"),m=($,M)=>i?mre(t,$):n(M?{weekday:$}:{weekday:$,month:"long",day:"numeric"},"weekday"),v=$=>{const M=ss.macroTokenToFormatOpts($);return M?this.formatWithSystemDefault(t,M):$},_=$=>i?gre(t,$):n({era:$},"era"),E=$=>{switch($){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return l();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return m("short",!0);case"cccc":return m("long",!0);case"ccccc":return m("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return m("short",!1);case"EEEE":return m("long",!1);case"EEEEE":return m("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return p("short",!0);case"LLLL":return p("long",!0);case"LLLLL":return p("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return p("short",!1);case"MMMM":return p("long",!1);case"MMMMM":return p("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return _("short");case"GG":return _("long");case"GGGGG":return _("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return v($)}};return T5(ss.parseFormat(r),E)}formatDurationFromString(t,r){const i=p=>{switch(p[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=p=>m=>{const v=i(m);return v?this.num(p.get(v),m.length):m},n=ss.parseFormat(r),o=n.reduce((p,{literal:m,val:v})=>m?p:p.concat(v),[]),l=t.shiftTo(...o.map(i).filter(p=>p));return T5(n,s(l))}}const qB=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function q0(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function H0(...e){return t=>e.reduce(([r,i,s],n)=>{const[o,l,p]=n(t,s);return[{...r,...o},l||i,p]},[{},null,1]).slice(0,2)}function W0(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const s=r.exec(e);if(s)return i(s)}return[null,null]}function HB(...e){return(t,r)=>{const i={};let s;for(s=0;s<e.length;s++)i[e[s]]=Yu(t[r+s]);return[i,null,r+s]}}const WB=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,bre=`(?:${WB.source}?(?:\\[(${qB.source})\\])?)?`,oR=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,QB=RegExp(`${oR.source}${bre}`),aR=RegExp(`(?:T${QB.source})?`),_re=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Sre=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ere=/(\d{4})-?(\d{3})/,Tre=HB("weekYear","weekNumber","weekDay"),$re=HB("year","ordinal"),xre=/(\d{4})-(\d\d)-(\d\d)/,JB=RegExp(`${oR.source} ?(?:${WB.source}|(${qB.source}))?`),Ire=RegExp(`(?: ${JB.source})?`);function ef(e,t,r){const i=e[t];return yt(i)?r:Yu(i)}function Mre(e,t){return[{year:ef(e,t),month:ef(e,t+1,1),day:ef(e,t+2,1)},null,t+3]}function Q0(e,t){return[{hours:ef(e,t,0),minutes:ef(e,t+1,0),seconds:ef(e,t+2,0),milliseconds:sR(e[t+3])},null,t+4]}function qv(e,t){const r=!e[t]&&!e[t+1],i=yS(e[t+1],e[t+2]),s=r?null:ii.instance(i);return[{},s,t+3]}function Hv(e,t){const r=e[t]?an.create(e[t]):null;return[{},r,t+1]}const Cre=RegExp(`^T?${oR.source}$`),kre=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Rre(e){const[t,r,i,s,n,o,l,p,m]=e,v=t[0]==="-",_=p&&p[0]==="-",E=($,M=!1)=>$!==void 0&&(M||$&&v)?-$:$;return[{years:E(ld(r)),months:E(ld(i)),weeks:E(ld(s)),days:E(ld(n)),hours:E(ld(o)),minutes:E(ld(l)),seconds:E(ld(p),p==="-0"),milliseconds:E(sR(m),_)}]}const Ore={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function lR(e,t,r,i,s,n,o){const l={year:t.length===2?F$(Yu(t)):Yu(t),month:FB.indexOf(r)+1,day:Yu(i),hour:Yu(s),minute:Yu(n)};return o&&(l.second=Yu(o)),e&&(l.weekday=e.length>3?BB.indexOf(e)+1:UB.indexOf(e)+1),l}const Pre=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Nre(e){const[,t,r,i,s,n,o,l,p,m,v,_]=e,E=lR(t,s,i,r,n,o,l);let $;return p?$=Ore[p]:m?$=0:$=yS(v,_),[E,new ii($)]}function Lre(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Dre=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Fre=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,jre=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function $5(e){const[,t,r,i,s,n,o,l]=e;return[lR(t,s,i,r,n,o,l),ii.utcInstance]}function Bre(e){const[,t,r,i,s,n,o,l]=e;return[lR(t,l,r,i,s,n,o),ii.utcInstance]}const Ure=q0(_re,aR),Vre=q0(Sre,aR),zre=q0(Ere,aR),Gre=q0(QB),ZB=H0(Mre,Q0,qv,Hv),qre=H0(Tre,Q0,qv,Hv),Hre=H0($re,Q0,qv,Hv),Wre=H0(Q0,qv,Hv);function Qre(e){return W0(e,[Ure,ZB],[Vre,qre],[zre,Hre],[Gre,Wre])}function Jre(e){return W0(Lre(e),[Pre,Nre])}function Zre(e){return W0(e,[Dre,$5],[Fre,$5],[jre,Bre])}function Yre(e){return W0(e,[kre,Rre])}const Kre=H0(Q0);function Xre(e){return W0(e,[Cre,Kre])}const eie=q0(xre,Ire),tie=q0(JB),rie=H0(Q0,qv,Hv);function iie(e){return W0(e,[eie,ZB],[tie,rie])}const x5="Invalid Duration",YB={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},sie={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...YB},Dn=146097/400,wh=146097/4800,nie={years:{quarters:4,months:12,weeks:Dn/7,days:Dn,hours:Dn*24,minutes:Dn*24*60,seconds:Dn*24*60*60,milliseconds:Dn*24*60*60*1e3},quarters:{months:3,weeks:Dn/28,days:Dn/4,hours:Dn*24/4,minutes:Dn*24*60/4,seconds:Dn*24*60*60/4,milliseconds:Dn*24*60*60*1e3/4},months:{weeks:wh/7,days:wh,hours:wh*24,minutes:wh*24*60,seconds:wh*24*60*60,milliseconds:wh*24*60*60*1e3},...YB},np=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],oie=np.slice(0).reverse();function xu(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Bt(i)}function KB(e,t){let r=t.milliseconds??0;for(const i of oie.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function I5(e,t){const r=KB(e,t)<0?-1:1;np.reduceRight((i,s)=>{if(yt(t[s]))return i;if(i){const n=t[i]*r,o=e[s][i],l=Math.floor(n/o);t[s]+=l*r,t[i]-=l*o*r}return s},null),np.reduce((i,s)=>{if(yt(t[s]))return i;if(i){const n=t[i]%1;t[i]-=n,t[s]+=n*e[i][s]}return s},null)}function aie(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class Bt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?nie:sie;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||Qt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return Bt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new es(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Bt({values:Cb(t,Bt.normalizeUnit),loc:Qt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(Cc(t))return Bt.fromMillis(t);if(Bt.isDuration(t))return t;if(typeof t=="object")return Bt.fromObject(t);throw new es(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=Yre(t);return i?Bt.fromObject(i,r):Bt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=Xre(t);return i?Bt.fromObject(i,r):Bt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new es("need to specify a reason the Duration is invalid");const i=t instanceof Ho?t:new Ho(t,r);if(Lr.throwOnInvalid)throw new Rte(i);return new Bt({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new oB(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?ss.create(this.loc,i).formatDurationFromString(this,t):x5}toHuman(t={}){if(!this.isValid)return x5;const r=np.map(i=>{const s=this.values[i];return yt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=nR(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Pe.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?KB(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=Bt.fromDurationLike(t),i={};for(const s of np)(f0(r.values,s)||f0(this.values,s))&&(i[s]=r.get(s)+this.get(s));return xu(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=Bt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=DB(t(this.values[i],i));return xu(this,{values:r},!0)}get(t){return this[Bt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...Cb(t,Bt.normalizeUnit)};return xu(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:s,conversionAccuracy:i};return xu(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return I5(this.matrix,t),xu(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=aie(this.normalize().shiftToAll().toObject());return xu(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Bt.normalizeUnit(o));const r={},i={},s=this.toObject();let n;for(const o of np)if(t.indexOf(o)>=0){n=o;let l=0;for(const m in i)l+=this.matrix[m][o]*i[m],i[m]=0;Cc(s[o])&&(l+=s[o]);const p=Math.trunc(l);r[o]=p,i[o]=(l*1e3-p*1e3)/1e3}else Cc(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(r[n]+=o===n?i[o]:i[o]/this.matrix[n][o]);return I5(this.matrix,r),xu(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return xu(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of np)if(!r(this.values[i],t.values[i]))return!1;return!0}}const bh="Invalid Interval";function lie(e,t){return!e||!e.isValid?Rr.invalid("missing or invalid start"):!t||!t.isValid?Rr.invalid("missing or invalid end"):t<e?Rr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Rr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new es("need to specify a reason the Interval is invalid");const i=t instanceof Ho?t:new Ho(t,r);if(Lr.throwOnInvalid)throw new kte(i);return new Rr({invalid:i})}static fromDateTimes(t,r){const i=Im(t),s=Im(r),n=lie(i,s);return n??new Rr({start:i,end:s})}static after(t,r){const i=Bt.fromDurationLike(r),s=Im(t);return Rr.fromDateTimes(s,s.plus(i))}static before(t,r){const i=Bt.fromDurationLike(r),s=Im(t);return Rr.fromDateTimes(s.minus(i),s)}static fromISO(t,r){const[i,s]=(t||"").split("/",2);if(i&&s){let n,o;try{n=Pe.fromISO(i,r),o=n.isValid}catch{o=!1}let l,p;try{l=Pe.fromISO(s,r),p=l.isValid}catch{p=!1}if(o&&p)return Rr.fromDateTimes(n,l);if(o){const m=Bt.fromISO(s,r);if(m.isValid)return Rr.after(n,m)}else if(p){const m=Bt.fromISO(i,r);if(m.isValid)return Rr.before(l,m)}}return Rr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let s;return r!=null&&r.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(t,r),Math.floor(s.diff(i,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?Rr.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Im).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),i=[];let{s}=this,n=0;for(;s<this.e;){const o=r[n]||this.e,l=+o>+this.e?this.e:o;i.push(Rr.fromDateTimes(s,l)),s=l,n+=1}return i}splitBy(t){const r=Bt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,s=1,n;const o=[];for(;i<this.e;){const l=this.start.plus(r.mapUnits(p=>p*s));n=+l>+this.e?this.e:l,o.push(Rr.fromDateTimes(i,n)),i=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:Rr.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Rr.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const s=[],n=t.map(p=>[{time:p.s,type:"s"},{time:p.e,type:"e"}]),o=Array.prototype.concat(...n),l=o.sort((p,m)=>p.time-m.time);for(const p of l)i+=p.type==="s"?1:-1,i===1?r=p.time:(r&&+r!=+p.time&&s.push(Rr.fromDateTimes(r,p.time)),r=null);return Rr.merge(s)}difference(...t){return Rr.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:bh}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=xb,r={}){return this.isValid?ss.create(this.s.loc.clone(r),t).formatInterval(this):bh}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:bh}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:bh}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:bh}toFormat(t,{separator:r=" â€“ "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:bh}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):Bt.invalid(this.invalidReason)}mapEndpoints(t){return Rr.fromDateTimes(t(this.s),t(this.e))}}class O1{static hasDST(t=Lr.defaultZone){const r=Pe.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return an.isValidZone(t)}static normalizeZone(t){return lc(t,Lr.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||Qt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||Qt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||Qt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Qt.create(r,i,n)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Qt.create(r,i,n)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Qt.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Qt.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Qt.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Qt.create(r,null,"gregory").eras(t)}static features(){return{relative:PB(),localeWeek:NB()}}}function M5(e,t){const r=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(Bt.fromMillis(i).as("days"))}function uie(e,t,r){const i=[["years",(p,m)=>m.year-p.year],["quarters",(p,m)=>m.quarter-p.quarter+(m.year-p.year)*4],["months",(p,m)=>m.month-p.month+(m.year-p.year)*12],["weeks",(p,m)=>{const v=M5(p,m);return(v-v%7)/7}],["days",M5]],s={},n=e;let o,l;for(const[p,m]of i)r.indexOf(p)>=0&&(o=p,s[p]=m(e,t),l=n.plus(s),l>t?(s[p]--,e=n.plus(s),e>t&&(l=e,s[p]--,e=n.plus(s))):e=l);return[e,s,l,o]}function cie(e,t,r,i){let[s,n,o,l]=uie(e,t,r);const p=t-s,m=r.filter(_=>["hours","minutes","seconds","milliseconds"].indexOf(_)>=0);m.length===0&&(o<t&&(o=s.plus({[l]:1})),o!==s&&(n[l]=(n[l]||0)+p/(o-s)));const v=Bt.fromObject(n,i);return m.length>0?Bt.fromMillis(p,i).shiftTo(...m).plus(v):v}const die="missing Intl.DateTimeFormat.formatToParts support";function Gt(e,t=r=>r){return{regex:e,deser:([r])=>t(ere(r))}}const pie="Â ",XB=`[ ${pie}]`,eU=new RegExp(XB,"g");function hie(e){return e.replace(/\./g,"\\.?").replace(eU,XB)}function C5(e){return e.replace(/\./g,"").replace(eU," ").toLowerCase()}function go(e,t){return e===null?null:{regex:RegExp(e.map(hie).join("|")),deser:([r])=>e.findIndex(i=>C5(r)===C5(i))+t}}function k5(e,t){return{regex:e,deser:([,r,i])=>yS(r,i),groups:t}}function P1(e){return{regex:e,deser:([t])=>t}}function Aie(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function fie(e,t){const r=yo(t),i=yo(t,"{2}"),s=yo(t,"{3}"),n=yo(t,"{4}"),o=yo(t,"{6}"),l=yo(t,"{1,2}"),p=yo(t,"{1,3}"),m=yo(t,"{1,6}"),v=yo(t,"{1,9}"),_=yo(t,"{2,4}"),E=yo(t,"{4,6}"),$=N=>({regex:RegExp(Aie(N.val)),deser:([U])=>U,literal:!0}),k=(N=>{if(e.literal)return $(N);switch(N.val){case"G":return go(t.eras("short"),0);case"GG":return go(t.eras("long"),0);case"y":return Gt(m);case"yy":return Gt(_,F$);case"yyyy":return Gt(n);case"yyyyy":return Gt(E);case"yyyyyy":return Gt(o);case"M":return Gt(l);case"MM":return Gt(i);case"MMM":return go(t.months("short",!0),1);case"MMMM":return go(t.months("long",!0),1);case"L":return Gt(l);case"LL":return Gt(i);case"LLL":return go(t.months("short",!1),1);case"LLLL":return go(t.months("long",!1),1);case"d":return Gt(l);case"dd":return Gt(i);case"o":return Gt(p);case"ooo":return Gt(s);case"HH":return Gt(i);case"H":return Gt(l);case"hh":return Gt(i);case"h":return Gt(l);case"mm":return Gt(i);case"m":return Gt(l);case"q":return Gt(l);case"qq":return Gt(i);case"s":return Gt(l);case"ss":return Gt(i);case"S":return Gt(p);case"SSS":return Gt(s);case"u":return P1(v);case"uu":return P1(l);case"uuu":return Gt(r);case"a":return go(t.meridiems(),0);case"kkkk":return Gt(n);case"kk":return Gt(_,F$);case"W":return Gt(l);case"WW":return Gt(i);case"E":case"c":return Gt(r);case"EEE":return go(t.weekdays("short",!1),1);case"EEEE":return go(t.weekdays("long",!1),1);case"ccc":return go(t.weekdays("short",!0),1);case"cccc":return go(t.weekdays("long",!0),1);case"Z":case"ZZ":return k5(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return k5(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return P1(/[a-z_+-/]{1,256}?/i);case" ":return P1(/[^\S\n\r]/);default:return $(N)}})(e)||{invalidReason:die};return k.token=e,k}const mie={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function yie(e,t,r){const{type:i,value:s}=e;if(i==="literal"){const p=/^\s+$/.test(s);return{literal:!p,val:p?" ":s}}const n=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let l=mie[o];if(typeof l=="object"&&(l=l[n]),l)return{literal:!1,val:l}}function gie(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function vie(e,t,r){const i=e.match(t);if(i){const s={};let n=1;for(const o in r)if(f0(r,o)){const l=r[o],p=l.groups?l.groups+1:1;!l.literal&&l.token&&(s[l.token.val[0]]=l.deser(i.slice(n,n+p))),n+=p}return[i,s]}else return[i,{}]}function wie(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return yt(e.z)||(r=an.create(e.z)),yt(e.Z)||(r||(r=new ii(e.Z)),i=e.Z),yt(e.q)||(e.M=(e.q-1)*3+1),yt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),yt(e.u)||(e.S=sR(e.u)),[Object.keys(e).reduce((n,o)=>{const l=t(o);return l&&(n[l]=e[o]),n},{}),r,i]}let DT=null;function bie(){return DT||(DT=Pe.fromMillis(1555555555555)),DT}function _ie(e,t){if(e.literal)return e;const r=ss.macroTokenToFormatOpts(e.val),i=sU(r,t);return i==null||i.includes(void 0)?e:i}function tU(e,t){return Array.prototype.concat(...e.map(r=>_ie(r,t)))}class rU{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=tU(ss.parseFormat(r),t),this.units=this.tokens.map(i=>fie(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,s]=gie(this.units);this.regex=RegExp(i,"i"),this.handlers=s}}explainFromTokens(t){if(this.isValid){const[r,i]=vie(t,this.regex,this.handlers),[s,n,o]=i?wie(i):[null,null,void 0];if(f0(i,"a")&&f0(i,"H"))throw new NA("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:s,zone:n,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function iU(e,t,r){return new rU(e,r).explainFromTokens(t)}function Sie(e,t,r){const{result:i,zone:s,specificOffset:n,invalidReason:o}=iU(e,t,r);return[i,s,n,o]}function sU(e,t){if(!e)return null;const i=ss.create(t,e).dtFormatter(bie()),s=i.formatToParts(),n=i.resolvedOptions();return s.map(o=>yie(o,e,n))}const FT="Invalid DateTime",R5=864e13;function oy(e){return new Ho("unsupported zone",`the zone "${e.name}" is not supported`)}function jT(e){return e.weekData===null&&(e.weekData=Ib(e.c)),e.weekData}function BT(e){return e.localWeekData===null&&(e.localWeekData=Ib(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function ud(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Pe({...r,...t,old:r})}function nU(e,t,r){let i=e-t*60*1e3;const s=r.offset(i);if(t===s)return[i,t];i-=(s-t)*60*1e3;const n=r.offset(i);return s===n?[i,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function N1(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function qw(e,t,r){return nU(mS(e),t,r)}function O5(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n={...e.c,year:i,month:s,day:Math.min(e.c.day,Mb(i,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Bt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),l=mS(n);let[p,m]=nU(l,r,e.zone);return o!==0&&(p+=o,m=e.zone.offset(p)),{ts:p,o:m}}function _h(e,t,r,i,s,n){const{setZone:o,zone:l}=r;if(e&&Object.keys(e).length!==0||t){const p=t||l,m=Pe.fromObject(e,{...r,zone:p,specificOffset:n});return o?m:m.setZone(l)}else return Pe.invalid(new Ho("unparsable",`the input "${s}" can't be parsed as ${i}`))}function L1(e,t,r=!0){return e.isValid?ss.create(Qt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function UT(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=ti(e.c.year,r?6:4),t?(i+="-",i+=ti(e.c.month),i+="-",i+=ti(e.c.day)):(i+=ti(e.c.month),i+=ti(e.c.day)),i}function P5(e,t,r,i,s,n){let o=ti(e.c.hour);return t?(o+=":",o+=ti(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=ti(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=ti(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=ti(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!n?o+="Z":e.o<0?(o+="-",o+=ti(Math.trunc(-e.o/60)),o+=":",o+=ti(Math.trunc(-e.o%60))):(o+="+",o+=ti(Math.trunc(e.o/60)),o+=":",o+=ti(Math.trunc(e.o%60)))),n&&(o+="["+e.zone.ianaName+"]"),o}const oU={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Eie={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Tie={ordinal:1,hour:0,minute:0,second:0,millisecond:0},aU=["year","month","day","hour","minute","second","millisecond"],$ie=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],xie=["year","ordinal","hour","minute","second","millisecond"];function Iie(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new oB(e);return t}function N5(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Iie(e)}}function Mie(e){if(ay===void 0&&(ay=Lr.now()),e.type!=="iana")return e.offset(ay);const t=e.name;let r=j$.get(t);return r===void 0&&(r=e.offset(ay),j$.set(t,r)),r}function L5(e,t){const r=lc(t.zone,Lr.defaultZone);if(!r.isValid)return Pe.invalid(oy(r));const i=Qt.fromObject(t);let s,n;if(yt(e.year))s=Lr.now();else{for(const p of aU)yt(e[p])&&(e[p]=oU[p]);const o=RB(e)||OB(e);if(o)return Pe.invalid(o);const l=Mie(r);[s,n]=qw(e,l,r)}return new Pe({ts:s,zone:r,loc:i,o:n})}function D5(e,t,r){const i=yt(r.round)?!0:r.round,s=(o,l)=>(o=nR(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,l)),n=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return s(n(r.unit),r.unit);for(const o of r.units){const l=n(o);if(Math.abs(l)>=1)return s(l,o)}return s(e>t?-0:0,r.units[r.units.length-1])}function F5(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let ay;const j$=new Map;class Pe{constructor(t){const r=t.zone||Lr.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Ho("invalid input"):null)||(r.isValid?null:oy(r));this.ts=yt(t.ts)?Lr.now():t.ts;let s=null,n=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[s,n]=[t.old.c,t.old.o];else{const l=Cc(t.o)&&!t.old?t.o:r.offset(this.ts);s=N1(this.ts,l),i=Number.isNaN(s.year)?new Ho("invalid input"):null,s=i?null:s,n=i?null:l}this._zone=r,this.loc=t.loc||Qt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new Pe({})}static local(){const[t,r]=F5(arguments),[i,s,n,o,l,p,m]=r;return L5({year:i,month:s,day:n,hour:o,minute:l,second:p,millisecond:m},t)}static utc(){const[t,r]=F5(arguments),[i,s,n,o,l,p,m]=r;return t.zone=ii.utcInstance,L5({year:i,month:s,day:n,hour:o,minute:l,second:p,millisecond:m},t)}static fromJSDate(t,r={}){const i=nre(t)?t.valueOf():NaN;if(Number.isNaN(i))return Pe.invalid("invalid input");const s=lc(r.zone,Lr.defaultZone);return s.isValid?new Pe({ts:i,zone:s,loc:Qt.fromObject(r)}):Pe.invalid(oy(s))}static fromMillis(t,r={}){if(Cc(t))return t<-R5||t>R5?Pe.invalid("Timestamp out of range"):new Pe({ts:t,zone:lc(r.zone,Lr.defaultZone),loc:Qt.fromObject(r)});throw new es(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(Cc(t))return new Pe({ts:t*1e3,zone:lc(r.zone,Lr.defaultZone),loc:Qt.fromObject(r)});throw new es("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=lc(r.zone,Lr.defaultZone);if(!i.isValid)return Pe.invalid(oy(i));const s=Qt.fromObject(r),n=Cb(t,N5),{minDaysInFirstWeek:o,startOfWeek:l}=_5(n,s),p=Lr.now(),m=yt(r.specificOffset)?i.offset(p):r.specificOffset,v=!yt(n.ordinal),_=!yt(n.year),E=!yt(n.month)||!yt(n.day),$=_||E,M=n.weekYear||n.weekNumber;if(($||v)&&M)throw new NA("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(E&&v)throw new NA("Can't mix ordinal dates with month/day");const k=M||n.weekday&&!$;let N,U,G=N1(p,m);k?(N=$ie,U=Eie,G=Ib(G,o,l)):v?(N=xie,U=Tie,G=LT(G)):(N=aU,U=oU);let W=!1;for(const Ie of N){const $e=n[Ie];yt($e)?W?n[Ie]=U[Ie]:n[Ie]=G[Ie]:W=!0}const Z=k?rre(n,o,l):v?ire(n):RB(n),ie=Z||OB(n);if(ie)return Pe.invalid(ie);const ne=k?w5(n,o,l):v?b5(n):n,[ge,we]=qw(ne,m,i),xe=new Pe({ts:ge,zone:i,o:we,loc:s});return n.weekday&&$&&t.weekday!==xe.weekday?Pe.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${xe.toISO()}`):xe.isValid?xe:Pe.invalid(xe.invalid)}static fromISO(t,r={}){const[i,s]=Qre(t);return _h(i,s,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,s]=Jre(t);return _h(i,s,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,s]=Zre(t);return _h(i,s,r,"HTTP",r)}static fromFormat(t,r,i={}){if(yt(t)||yt(r))throw new es("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=i,o=Qt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[l,p,m,v]=Sie(o,t,r);return v?Pe.invalid(v):_h(l,p,i,`format ${r}`,t,m)}static fromString(t,r,i={}){return Pe.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,s]=iie(t);return _h(i,s,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new es("need to specify a reason the DateTime is invalid");const i=t instanceof Ho?t:new Ho(t,r);if(Lr.throwOnInvalid)throw new Cte(i);return new Pe({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=sU(t,Qt.fromObject(r));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(t,r={}){return tU(ss.parseFormat(t),Qt.fromObject(r)).map(s=>s.val).join("")}static resetCache(){ay=void 0,j$.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?jT(this).weekYear:NaN}get weekNumber(){return this.isValid?jT(this).weekNumber:NaN}get weekday(){return this.isValid?jT(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?BT(this).weekday:NaN}get localWeekNumber(){return this.isValid?BT(this).weekNumber:NaN}get localWeekYear(){return this.isValid?BT(this).weekYear:NaN}get ordinal(){return this.isValid?LT(this.c).ordinal:NaN}get monthShort(){return this.isValid?O1.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?O1.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?O1.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?O1.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=mS(this.c),s=this.zone.offset(i-t),n=this.zone.offset(i+t),o=this.zone.offset(i-s*r),l=this.zone.offset(i-n*r);if(o===l)return[this];const p=i-o*r,m=i-l*r,v=N1(p,o),_=N1(m,l);return v.hour===_.hour&&v.minute===_.minute&&v.second===_.second&&v.millisecond===_.millisecond?[ud(this,{ts:p}),ud(this,{ts:m})]:[this]}get isInLeapYear(){return Gv(this.year)}get daysInMonth(){return Mb(this.year,this.month)}get daysInYear(){return this.isValid?XA(this.year):NaN}get weeksInWeekYear(){return this.isValid?Yg(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Yg(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:s}=ss.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:s}}toUTC(t=0,r={}){return this.setZone(ii.instance(t),r)}toLocal(){return this.setZone(Lr.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=lc(t,Lr.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(r||i){const n=t.offset(this.ts),o=this.toObject();[s]=qw(o,n,t)}return ud(this,{ts:s,zone:t})}else return Pe.invalid(oy(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const s=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return ud(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=Cb(t,N5),{minDaysInFirstWeek:i,startOfWeek:s}=_5(r,this.loc),n=!yt(r.weekYear)||!yt(r.weekNumber)||!yt(r.weekday),o=!yt(r.ordinal),l=!yt(r.year),p=!yt(r.month)||!yt(r.day),m=l||p,v=r.weekYear||r.weekNumber;if((m||o)&&v)throw new NA("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&o)throw new NA("Can't mix ordinal dates with month/day");let _;n?_=w5({...Ib(this.c,i,s),...r},i,s):yt(r.ordinal)?(_={...this.toObject(),...r},yt(r.day)&&(_.day=Math.min(Mb(_.year,_.month),_.day))):_=b5({...LT(this.c),...r});const[E,$]=qw(_,this.o,this.zone);return ud(this,{ts:E,o:$})}plus(t){if(!this.isValid)return this;const r=Bt.fromDurationLike(t);return ud(this,O5(this,r))}minus(t){if(!this.isValid)return this;const r=Bt.fromDurationLike(t).negate();return ud(this,O5(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},s=Bt.normalizeUnit(t);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(r){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(i.weekNumber=this.weekNumber-1),i.weekday=n}else i.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?ss.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):FT}toLocaleString(t=xb,r={}){return this.isValid?ss.create(this.loc.clone(r),t).formatDateTime(this):FT}toLocaleParts(t={}){return this.isValid?ss.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=t==="extended";let l=UT(this,o);return l+="T",l+=P5(this,o,r,i,s,n),l}toISODate({format:t="extended"}={}){return this.isValid?UT(this,t==="extended"):null}toISOWeekDate(){return L1(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+P5(this,o==="extended",r,t,i,n):null}toRFC2822(){return L1(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return L1(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?UT(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(r||t)&&(i&&(s+=" "),r?s+="z":t&&(s+="ZZ")),L1(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():FT}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return Bt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},n=ore(r).map(Bt.normalizeUnit),o=t.valueOf()>this.valueOf(),l=o?this:t,p=o?t:this,m=cie(l,p,n,s);return o?m.negate():m}diffNow(t="milliseconds",r={}){return this.diff(Pe.now(),t,r)}until(t){return this.isValid?Rr.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const s=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(r,i)<=s&&s<=n.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Pe.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),D5(r,this.plus(i),{...t,numeric:"always",units:s,unit:n})}toRelativeCalendar(t={}){return this.isValid?D5(t.base||Pe.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Pe.isDateTime))throw new es("min requires all arguments be DateTimes");return S5(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Pe.isDateTime))throw new es("max requires all arguments be DateTimes");return S5(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:s=null,numberingSystem:n=null}=i,o=Qt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return iU(o,t,r)}static fromStringExplain(t,r,i={}){return Pe.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:s=null}=r,n=Qt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return new rU(n,t)}static fromFormatParser(t,r,i={}){if(yt(t)||yt(r))throw new es("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=i,o=Qt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(r.locale))throw new es(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);const{result:l,zone:p,specificOffset:m,invalidReason:v}=r.explainFromTokens(t);return v?Pe.invalid(v):_h(l,p,i,`format ${r.format}`,t,m)}static get DATE_SHORT(){return xb}static get DATE_MED(){return aB}static get DATE_MED_WITH_WEEKDAY(){return Ote}static get DATE_FULL(){return lB}static get DATE_HUGE(){return uB}static get TIME_SIMPLE(){return cB}static get TIME_WITH_SECONDS(){return dB}static get TIME_WITH_SHORT_OFFSET(){return pB}static get TIME_WITH_LONG_OFFSET(){return hB}static get TIME_24_SIMPLE(){return AB}static get TIME_24_WITH_SECONDS(){return fB}static get TIME_24_WITH_SHORT_OFFSET(){return mB}static get TIME_24_WITH_LONG_OFFSET(){return yB}static get DATETIME_SHORT(){return gB}static get DATETIME_SHORT_WITH_SECONDS(){return vB}static get DATETIME_MED(){return wB}static get DATETIME_MED_WITH_SECONDS(){return bB}static get DATETIME_MED_WITH_WEEKDAY(){return Pte}static get DATETIME_FULL(){return _B}static get DATETIME_FULL_WITH_SECONDS(){return SB}static get DATETIME_HUGE(){return EB}static get DATETIME_HUGE_WITH_SECONDS(){return TB}}function Im(e){if(Pe.isDateTime(e))return e;if(e&&e.valueOf&&Cc(e.valueOf()))return Pe.fromJSDate(e);if(e&&typeof e=="object")return Pe.fromObject(e);throw new es(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Cie="HH:mm",kie="HH:mm:ss",Rie="HH:mm:ss.SSS",Oie=[Rie,kie,Cie,"TT"],Pie="yyyy-MM-dd";function j5(e){if(!e||!zv(e))return null;const t=Pe.fromFormat(e,Pie);return t.isValid?t:null}function B5(e){return e&&zv(e)?nj(Oie,(t=>{const r=Pe.fromFormat(e,t);return r.isValid?r:null}))??null:null}function U5(e){if(!e||!zv(e))return null;const t=Pe.fromISO(e);return t.isValid?t:null}var kb;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(kb||(kb={}));const lU=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function Nie(e){return e!=null&&lU.has(e.type)}function uU(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function cU(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function dU(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const Lie=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);Wk(lU,Lie);function BRe(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue,n=Nie(e);return uU(e)||dU(e)||cU(e)?{...Die(e,s,i),isInteger:n}:{min:i!=null&&typeof i=="number"?i:null,max:s!=null&&typeof s=="number"?s:null,rawMin:i,rawMax:s,isInteger:n}}function Die(e,t,r){var i,s,n,o,l,p;return uU(e)?{min:(i=j5(r))==null?void 0:i.toMillis(),max:(s=j5(t))==null?void 0:s.toMillis(),rawMin:r,rawMax:t}:dU(e)?{min:(n=B5(r))==null?void 0:n.toMillis(),max:(o=B5(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:cU(e)?{min:(l=U5(r))==null?void 0:l.toMillis(),max:(p=U5(t))==null?void 0:p.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}function Fie(e){if(!e)return;const t=e.match(jie);return t!=null&&t.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const jie=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function Bie(e){var t,r;return((r=(t=e.match(Uie))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const Uie=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let VT;function jp(){return VT||(VT=(async()=>{const[e,t,r]=await Promise.all([ce(()=>import("./arcadeUtils-DkAuahqe.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,1,13]),import.meta.url),ce(()=>import("./batchExec-BGdKqjsD.js"),__vite__mapDeps([14,15]),import.meta.url),ce(()=>import("./aiServices-m_n14f1F.js").then(i=>i.ag),__vite__mapDeps([4,5,6,7,8]),import.meta.url)]);return{arcade:e.arcade,arcadeUtils:e,batchExec:t,aiServices:r,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),VT}const Vie=/^([0-9_])/,zie=/[^a-z0-9_\u0080-\uffff]+/gi;function Gie(e){return e==null?null:e.trim().replaceAll(zie,"_").replace(Vie,"F$1")||null}const qie=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Hie=["field","normalizationField"];function V5(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(z5(qie,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)z5(Hie,i,t)}}function z5(e,t,r){if(e)for(const i of e){const s=uS(i,t),n=s&&typeof s!="function"&&r.get(s);n&&jr(i,n.name,t)}}function pU(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(s==null?void 0:s.name)??null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(s==null?void 0:s.name)??null}}const zT=new Set;function vS(e,t){return e&&t?(zT.clear(),Bp(zT,e,t),Array.from(zT).sort()):[]}function Bp(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of r)xs(e,t,s);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const s of r)s!=null&&e.add(s)}}function xs(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function URe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map((r=>r.name)):t}function VRe(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=vS(e,t);return i.length/e.fields.length>=r?["*"]:i}async function ls(e,t,r){var n;if(!r)return;let i;const s=Fie(r);if(s)i=[s];else{const{arcadeUtils:o}=await jp();i=o.extractFieldNames(r,(n=t==null?void 0:t.fields)==null?void 0:n.map((l=>l.name)))}for(const o of i)xs(e,t,o)}async function uR(e,t,r){if(r&&r!=="1=1"){const i=await sB(r,t);if(!i.isStandardized)throw new Q("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});Bp(e,t,i.fieldNames)}}function Wie({displayField:e,fields:t}){return e||(t!=null&&t.length?GT(t,"name-or-title")||GT(t,"unique-identifier")||GT(t,"type-or-category")||Qie(t):null)}function Qie(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function GT(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}async function zRe(e,t){var i;if(!t)return;const r=(i=t.elevationInfo)==null?void 0:i.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function Jie(e,t,r){r.onStatisticExpression?ls(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function GRe(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],s=r.popupTemplate;i.push(hU(e,t,s)),r.fields&&i.push(...r.fields.map((async n=>Jie(e,t.fieldsIndex,n)))),await Promise.all(i)}async function qRe(e,t){var n,o,l;const{fieldsIndex:r,trackInfo:i}=t;if(!t||!i||!r)return;const s=[(n=i.latestObservations.renderer)==null?void 0:n.collectRequiredFields(e,r),(o=i.previousObservations.renderer)==null?void 0:o.collectRequiredFields(e,r),(l=i.trackLines.renderer)==null?void 0:l.collectRequiredFields(e,r)];i.popupTemplate&&s.push(hU(e,t,i.popupTemplate));for(const p of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(p)for(const m of p)s.push(mU(e,r,m));await Promise.all(s)}async function hU(e,t,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map((n=>ls(e,t.fieldsIndex,n.expression))));const s=r==null?void 0:r.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&i.push(ls(e,t.fieldsIndex,n.expressionInfo.expression));await Promise.all(i)}async function HRe(e,t,r){t&&(t.timeInfo&&(r!=null&&r.timeExtent)&&Bp(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Bp(e,t.fieldsIndex,[t.floorInfo.floorField]),(r==null?void 0:r.where)!=null&&await uR(e,t.fieldsIndex,r.where))}async function WRe(e,t,r){t&&r&&await Promise.all(r.map((i=>Zie(e,t,i))))}async function Zie(e,t,r){t&&r&&(r.valueExpression?await ls(e,t.fieldsIndex,r.valueExpression):r.field&&xs(e,t.fieldsIndex,r.field))}function QRe(e){return e?vS(e.fieldsIndex,AU(e)):[]}function Yie(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?vS(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function JRe(e,t,r){if(!t||!r)return;const i=t.fieldsIndex;await Promise.all(r.filters.map((s=>uR(e,i,s.where))))}const Kie=new Set(["oid","global-id","guid"]),Xie=new Set(["oid","global-id"]),ese=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function tse(e){const t=new Set;fU(e).forEach((i=>t.add(i))),Yie(e).forEach((i=>t.add(i.toLowerCase())));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach((i=>t.add(i.toLowerCase()))),Object.values(r.transformFieldRoles).forEach((i=>t.add(i.toLowerCase())))),Array.from(t)}function AU(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:s,editorField:n}=t;return[r,i,s,n].filter(Boolean)}function fU(e){return AU(e).map((t=>t.toLowerCase()))}function rse(e,t){var r;return e.editable&&!Kie.has(e.type)&&!fU(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function ise(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||tse(t).includes(r)||Xie.has(e.type)||ese.some((s=>s.test(r))))}async function ZRe(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r!=null&&r.length&&await Promise.all(r.map((s=>mU(e,i,s))))}async function mU(e,t,r){if(!r)return;const i=r.getLabelExpression(),s=r.where;if(i.type==="arcade")await ls(e,t,i.expression);else{const n=i.expression.match(/{[^}]*}/g);n&&n.forEach((o=>{xs(e,t,o.slice(1,-1))}))}await uR(e,t,s)}function sse(e){const t=e.defaultValue;return t!==void 0&&gU(e,t)?t:e.nullable?null:void 0}function YRe(e){const t=typeof e=="string"?{type:e}:e;return bU(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function yU(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function nse(e){return e===null||yU(e)}function ose(e){return e===null||Number.isInteger(e)}function ase(){return!0}function gU(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?ose:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?nse:yU;break;case"string":case"esriFieldTypeString":r=e.nullable?Mte:zv;break;default:r=ase}return arguments.length===1?r:r(t)}const lse=["integer","small-integer","big-integer","long"],use=["single","double"],cse=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],dse=["esriFieldTypeSingle","esriFieldTypeDouble"],vU=new Set([...lse,...cse]),pse=new Set([...use,...dse]),hse=Wk(vU,pse);function Ase(e){return e!=null&&vU.has(e.type)}function wU(e){return e!=null&&hse.has(e.type)}function bU(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function fse(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function KRe(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function XRe(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function mse(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function G5(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function q5(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function e4e(e,t){return yse(e,t)===null}var Rb,Ob;function t4e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function yse(e,t){return e==null||e.nullable&&t===null?null:gU(e,t)?wU(e)&&!gse(e.type,Number(t))?Rb.OUT_OF_RANGE:null:Ob.INVALID_TYPE}function gse(e,t){const r=typeof e=="string"?_U(e):e;if(!r)return!1;const i=r.min,s=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=s:t>=i&&t<=s}function _U(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return vse;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return wse;case"esriFieldTypeBigInteger":case"big-integer":return bse;case"esriFieldTypeSingle":case"single":return _se;case"esriFieldTypeDouble":case"double":return Sse}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Rb||(Rb={})),(function(e){e.INVALID_TYPE="type-validation-error::invalid-type"})(Ob||(Ob={}));const vse={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},wse={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},bse={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},_se={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Sse={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function r4e(e,t,r){switch(e){case kb.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case kb.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Ob.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Rb.OUT_OF_RANGE:{const{min:i,max:s}=_U(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${s}`}}}function Ese(e,t){return!Tse(e,t,null)}function Tse(e,t,r){if(!(e!=null&&e.attributes)||!t)return!0;const i=new Set(Object.keys(e.attributes));let s=!1;for(const n of t)if(!i.has(n)&&(s=!0,r==null))break;return s}function $se(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some((t=>e.toLowerCase().startsWith(t)))}function cR(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map((r=>r.slice(1,-1).split(":")[0].trim())):[]}let Hw=class extends ee{constructor(t){super(t),this.type=null}};a([A({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Hw.prototype,"type",void 0),Hw=a([P("esri.popup.content.Content")],Hw);const du=Hw;let ct=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=xse(t),this.apiValues=H5(this._apiToJSON),this.jsonValues=H5(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,s,n)=>{const o=this.toJSON(i);o!==void 0&&jr(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function xse(e){const t={};for(const r in e)t[e[r]]=r;return t}function H5(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function si(){return function(e,t){return new ct(e,{ignoreUnknown:!0,...t})}}const D1=new ct({asc:"ascending",desc:"descending"});let ly=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.field=null,this.order="ascending"}};a([A({type:String,json:{write:!0}})],ly.prototype,"field",void 0),a([A({type:D1.apiValues,json:{type:D1.jsonValues,read:D1.read,write:D1.write}})],ly.prototype,"order",void 0),ly=a([P("esri.popup.support.AttachmentsOrderByInfo")],ly);const Ise=ly;let Pu=class extends Ge.ClonableMixin(du){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};a([A({type:String,json:{write:!0}})],Pu.prototype,"description",void 0),a([A({type:["auto","preview","list"],json:{write:!0}})],Pu.prototype,"displayType",void 0),a([A({type:[Ise],json:{write:!0}})],Pu.prototype,"orderByFields",void 0),a([A({type:String,json:{write:!0}})],Pu.prototype,"title",void 0),a([A({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Pu.prototype,"type",void 0),Pu=a([P("esri.popup.content.AttachmentsContent")],Pu);const m0=Pu;var B$;let vd=B$=class extends du{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new B$({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?H(this.outFields):null})}};a([A()],vd.prototype,"creator",void 0),a([A()],vd.prototype,"destroyer",void 0),a([A()],vd.prototype,"outFields",void 0),a([A({type:["custom"],readOnly:!0})],vd.prototype,"type",void 0),vd=B$=a([P("esri.popup.content.CustomContent")],vd);const Mse=vd;var U$;let Vh=U$=class extends ee{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new U$({title:this.title,expression:this.expression})}};a([A({type:String,json:{write:!0}})],Vh.prototype,"title",void 0),a([A({type:String,json:{write:!0}})],Vh.prototype,"expression",void 0),a([A({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Vh.prototype,"returnType",void 0),Vh=U$=a([P("esri.popup.ElementExpressionInfo")],Vh);const Cse=Vh;var V$;let uy=V$=class extends du{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new V$({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};a([A({type:Cse,json:{write:!0}})],uy.prototype,"expressionInfo",void 0),a([A({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],uy.prototype,"type",void 0),uy=V$=a([P("esri.popup.content.ExpressionContent")],uy);const wS=uy;function Ne(e,t={}){const r=e instanceof ct?e:new ct(e,t),{alwaysWriteDefaults:i,default:s,ignoreUnknown:n=!0,name:o,nonNullable:l,readOnly:p=!1}=t;return A({type:n?r.apiValues:String,json:{type:r.jsonValues,default:s,name:o,read:!p&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:l,readOnly:p})}let dg;var k9,R9;const kse=((k9=globalThis.esriConfig)==null?void 0:k9.locale)??((R9=globalThis.dojoConfig)==null?void 0:R9.locale);var O9;const pg=(O9=globalThis.document)==null?void 0:O9.documentElement;function SU(){var r;const e=pg==null?void 0:pg.getAttribute("lang"),t=(r=globalThis.navigator)==null?void 0:r.language;return kse??e??t??"en"}function sn(){return dg===void 0&&(dg=SU()),dg}const Rse=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function dR(e=sn()){var t;return(t=Rse.exec(e))==null?void 0:t.groups}const Ww=[];function EU(e){return Ww.push(e),Lt((()=>{Ww.splice(Ww.indexOf(e),1)}))}const Qw=[];function pR(e){return Qw.push(e),Lt((()=>Qw.splice(Qw.indexOf(e),1)))}function W5(){const e=SU();dg!==e&&([...Qw].forEach((t=>t(e))),dg=e,[...Ww].forEach((t=>t(e))))}var P9;(P9=globalThis.addEventListener)==null||P9.call(globalThis,"languagechange",W5),pg&&new MutationObserver((()=>{W5()})).observe(pg,{attributeFilter:["lang"]});const ao="system",Bc="unknown",Uc="UTC",Ose=Intl.DateTimeFormat().resolvedOptions().timeZone,Q5=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]),Pse="shortOffset";function Nse(e){return"timeZoneIANA"in e}function Lse(e){return e.startsWith("UTC")}function Pb(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?Jw(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?Dse(r):null}}}}}function Jw(e,t=ao){return e?Nse(e)?e.timeZoneIANA:Fse(e,t):t}function Dse(e){return{timeZoneIANA:e}}function Fse(e,t=ao){if(!e||!Q5.has(e.timeZone))return t;const r=Q5.get(e.timeZone);return Lse(e.timeZone)||e.respectsDaylightSaving?r:jse(r)}function jse(e){const t=Pe.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${ii.instance(-r).formatOffset(0,"narrow")}`}function a4e(e,t,r,i,s){if(t&&s==="date")return{timeZone:Uc,timeZoneName:void 0};const n=i.timeStyle||i.hour,o=r===Bc;return{timeZone:o?s==="timestamp-offset"?void 0:e??Uc:r,timeZoneName:o&&n?Pse:void 0}}function Bse(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map((i=>i.toLowerCase())));return e===ao||e===Bc||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const Use={year:void 0,month:void 0,day:void 0,weekday:void 0},Vse={hour:void 0,minute:void 0,second:void 0},TU={timeZone:Uc},sa={year:"numeric",month:"numeric",day:"numeric"},Mm={year:"numeric",month:"long",day:"numeric"},Cm={year:"numeric",month:"short",day:"numeric"},km={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ku={hour:"numeric",minute:"numeric"},wd={...Ku,second:"numeric"},$U={hourCycle:"h23"},Rm={...Ku,...$U},Om={...wd,...$U},xU={"short-date":sa,"short-date-short-time":{...sa,...Ku},"short-date-short-time-24":{...sa,...Rm},"short-date-long-time":{...sa,...wd},"short-date-long-time-24":{...sa,...Om},"short-date-le":sa,"short-date-le-short-time":{...sa,...Ku},"short-date-le-short-time-24":{...sa,...Rm},"short-date-le-long-time":{...sa,...wd},"short-date-le-long-time-24":{...sa,...Om},"long-month-day-year":Mm,"long-month-day-year-short-time":{...Mm,...Ku},"long-month-day-year-short-time-24":{...Mm,...Rm},"long-month-day-year-long-time":{...Mm,...wd},"long-month-day-year-long-time-24":{...Mm,...Om},"day-short-month-year":Cm,"day-short-month-year-short-time":{...Cm,...Ku},"day-short-month-year-short-time-24":{...Cm,...Rm},"day-short-month-year-long-time":{...Cm,...wd},"day-short-month-year-long-time-24":{...Cm,...Om},"long-date":km,"long-date-short-time":{...km,...Ku},"long-date-short-time-24":{...km,...Rm},"long-date-long-time":{...km,...wd},"long-date-long-time-24":{...km,...Om},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ku,"long-time":wd},zse=si()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),IU={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},Gse=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2));var N9;const qse=(N9=Gse.find((({type:e})=>e==="month")))==null?void 0:N9.value.toLowerCase();function MU(){var r;const e=sn(),t=(r=dR(e))==null?void 0:r.language;return(t&&IU[t])??e}qse!=="mart"&&(IU.bs="sr-Latn-CS");let z$=new WeakMap;const bS=xU["short-date-short-time"];function Hse(e){let t=z$.get(e);if(!t){const r=MU(),i=AR(e.timeZone??ao),s={...e,timeZone:i};t=new Intl.DateTimeFormat(r,s),z$.set(e,t)}return t}function l4e(e){return xU[e]}function hR(e,t=bS){return Hse(t).format(e)}function u4e(e,t=bS){return hR(new Date(e),{...t,...TU,...Vse})}function c4e(e,t=bS){return hR(new Date(`1970-01-01T${e}Z`),{...t,...TU,...Use})}function d4e(e,t=bS){if(t.timeZone)return hR(new Date(e),t);const r=Pe.fromISO(e,{setZone:!0}),i=r.offset===0?Uc:t.timeZone,s={...t,timeZone:i};return r.toLocaleString(s,{locale:MU()})}function AR(e){switch(e){case ao:return Ose;case Bc:return Uc;default:return e}}pR((()=>{z$=new WeakMap}));let zh=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};a([Ne(zse)],zh.prototype,"dateFormat",void 0),a([A({type:Boolean,json:{write:!0}})],zh.prototype,"digitSeparator",void 0),a([A({type:Et,json:{write:!0}})],zh.prototype,"places",void 0),zh=a([P("esri.popup.support.FieldInfoFormat")],zh);const Zw=zh;var G$;let Eo=G$=class extends ee{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new G$({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};a([A({type:String,json:{write:!0}})],Eo.prototype,"fieldName",void 0),a([A({type:Zw,json:{write:!0}})],Eo.prototype,"format",void 0),a([A({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Eo.prototype,"isEditable",void 0),a([A({type:String,json:{write:!0}})],Eo.prototype,"label",void 0),a([Ne(new ct({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Eo.prototype,"stringFieldOption",void 0),a([A({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Eo.prototype,"statisticType",void 0),a([A({type:String,json:{write:!0}})],Eo.prototype,"tooltip",void 0),a([A({type:Boolean,json:{write:!0}})],Eo.prototype,"visible",void 0),Eo=G$=a([P("esri.popup.FieldInfo")],Eo);const fR=Eo;var q$;let dl=q$=class extends du{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map((r=>r.toJSON()))}clone(){return new q$(H({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};a([A({type:Object,json:{write:!0}})],dl.prototype,"attributes",void 0),a([A({type:String,json:{write:!0}})],dl.prototype,"description",void 0),a([A({type:[fR]})],dl.prototype,"fieldInfos",void 0),a([ye("fieldInfos")],dl.prototype,"writeFieldInfos",null),a([A({type:String,json:{write:!0}})],dl.prototype,"title",void 0),a([A({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],dl.prototype,"type",void 0),dl=q$=a([P("esri.popup.content.FieldsContent")],dl);const y0=dl;let bd=class extends ee{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};a([A({type:String,json:{write:!0}})],bd.prototype,"altText",void 0),a([A({type:String,json:{write:!0}})],bd.prototype,"caption",void 0),a([A({type:String,json:{write:!0}})],bd.prototype,"title",void 0),a([A({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],bd.prototype,"type",void 0),bd=a([P("esri.popup.content.mixins.MediaInfo")],bd);const mR=bd,Nb={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function CU(e){return!!Nb[e]||!!Nb[e.toLowerCase()]}function yR(e){return Nb[e]??Nb[e.toLowerCase()]}function Wse(e){return[...yR(e)]}function qT(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function kU(e,t,r,i=1){const s=(e%360+360)%360/360,n=r<=.5?r*(t+1):r+t-r*t,o=2*r-n;return[Math.round(255*qT(o,n,s+1/3)),Math.round(255*qT(o,n,s)),Math.round(255*qT(o,n,s-1/3)),i]}function Qse(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const l=[0,0,0,1];let p;return n&&(p=o&i,o>>=r,l[3]=s*p/255),p=o&i,o>>=r,l[2]=s*p,p=o&i,o>>=r,l[1]=s*p,p=o&i,o>>=r,l[0]=s*p,l}function RU(e){if(e[0]!=="#"||isNaN(+`0x${e.slice(1)}`))return null;switch(e.length){case 4:case 5:{const t=parseInt(e.slice(1,2),16),r=parseInt(e.slice(2,3),16),i=parseInt(e.slice(3,4),16),s=e.length===4?15:parseInt(e.slice(4),16);return[t+16*t,r+16*r,i+16*i,(s+16*s)/255]}case 7:case 9:return[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16),(e.length===7?255:parseInt(e.slice(7),16))/255];default:return null}}function OU(e){const t=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(t){const r=t[2].split(/\s*,\s*/),i=t[1];if(i==="rgb"&&r.length===3||i==="rgba"&&r.length===4){const s=r[0];if(s.charAt(s.length-1)==="%"){const n=r.map((o=>2.56*parseFloat(o)));return r.length===4&&(n[3]=parseFloat(r[3])),J5(n)}return J5(r.map((n=>parseFloat(n))))}if(i==="hsl"&&r.length===3||i==="hsla"&&r.length===4)return kU(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3]??"1"))}return null}function J5(e){return e[0]=tf(e[0]),e[1]=tf(e[1]),e[2]=tf(e[2]),e[3]=e.length===4?NU(e[3]):1,e}function PU(e){let t=CU(e)?yR(e):null;return t??(t=OU(e)),t??(t=RU(e)),t}function A4e(e){const t=PU(e);return t!=null?[t[0]/255,t[1]/255,t[2]/255,t[3]]:null}function NU(e){return LU(e,0,1)}function tf(e){return Math.round(LU(e,0,255))}function LU(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}const f4e=2.2,Z5=new Float32Array(1);function m4e(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function lo(e,t,r){return Math.min(Math.max(e,t),r)}function y4e(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function cy(e,t,r){return e+(t-e)*r}function g4e(e,t,r,i,s){return cy(i,s,(e-t)/(r-t))}function Wv(e){return e*Math.PI/180}function DU(e){return 180*e/Math.PI}function v4e(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function w4e(e){return Math.acos(lo(e,-1,1))}function Jse(e){return Math.asin(lo(e,-1,1))}function Jo(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}function FU(e,t,r=1e-6){return!Jo(e,t,r)&&e>t}function H$(e,t,r=1e-6){return!Jo(e,t,r)&&e<t}function Zse(e,t,r=1e-6){return Jo(e,t,r)||e>t}const Lb=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function W$(e){return Lb.setFloat64(0,e),Lb.getBigInt64(0)}function Yse(e){return Lb.setBigInt64(0,e),Lb.getFloat64(0)}const Yw=BigInt("1000000"),Kse=jU(1);function jU(e){const t=W$(e=Math.abs(e)),r=Yse(t<=Yw?Yw:t-Yw);return Math.abs(e-r)}function b4e(e,t,r=Kse){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&jU(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=W$(e),s=W$(t);return i<0!=s<0?!1:!((i<s?s-i:i-s)>Yw)}function _4e(e,t,r=1e-6){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;const i=Math.abs(e-t),s=Math.abs(e),n=Math.abs(t);if(e===0||t===0||s<1e-12&&n<1e-12){if(i>.01*r)return!1}else if(i/(s+n)>r)return!1;return!0}function S4e(e){return BU(Math.max(-Y5,Math.min(e,Y5)))}function BU(e){return Z5[0]=e,Z5[0]}function E4e(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Jo(t,1)&&Jo(r,1)&&Jo(i,1))}const Y5=BU(34028234663852886e22);function T4e(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function F1(e){return lo(Jk(e),0,255)}function j1(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let Kw=class Ls{static blendColors(t,r,i,s=new Ls){return s.r=Math.round(t.r+(r.r-t.r)*i),s.g=Math.round(t.g+(r.g-t.g)*i),s.b=Math.round(t.b+(r.b-t.b)*i),s.a=t.a+(r.a-t.a)*i,s._sanitize()}static fromRgb(t,r){const i=OU(t);return i?Ls.fromArray(i,r):null}static fromHex(t,r=new Ls){const i=RU(t);return i?Ls.fromArray(i,r):null}static fromArray(t,r=new Ls){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=PU(t);return i?Ls.fromArray(i,r):null}static fromJSON(t){return t!=null?new Ls([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Ls.fromString(t,this):Array.isArray(t)?Ls.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Ls||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,s=i===3||i===4,n=i===4||i===8,o=`#${j1(this.r,s)}${j1(this.g,s)}${j1(this.b,s)}${n?j1(Math.round(255*this.a),s):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Ls.AlphaMode.ALWAYS){const r=F1(this.r),i=F1(this.g),s=F1(this.b);return t===Ls.AlphaMode.ALWAYS||this.a!==1?[r,i,s,F1(255*this.a)]:[r,i,s]}clone(){return new Ls(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=tf(this.r),this.g=tf(this.g),this.b=tf(this.b),this.a=NU(this.a),this}_set(t,r,i,s){this.r=t,this.g=r,this.b=i,this.a=s}};Kw.prototype.declaredClass="esri.Color",(function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"})(Kw||(Kw={}));const Ke=Kw;var Q$;let _d=Q$=class extends je{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new Q$({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};a([A()],_d.prototype,"color",void 0),a([A()],_d.prototype,"fieldName",void 0),a([A()],_d.prototype,"tooltip",void 0),a([A()],_d.prototype,"value",void 0),_d=Q$=a([P("esri.popup.content.support.ChartMediaInfoValueSeries")],_d);const Xse=_d;var J$;let Nu=J$=class extends ee{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new J$({colors:H(this.colors),fields:H(this.fields),normalizeField:this.normalizeField,series:H(this.series),tooltipField:this.tooltipField})}};a([A({type:[Ke],json:{type:[[Et]],write:!0}})],Nu.prototype,"colors",void 0),a([A({type:[String],json:{write:{isRequired:!0}}})],Nu.prototype,"fields",void 0),a([A({type:String,json:{write:!0}})],Nu.prototype,"normalizeField",void 0),a([A({type:[Xse],json:{read:!1}})],Nu.prototype,"series",void 0),a([A({type:String,json:{write:!0}})],Nu.prototype,"tooltipField",void 0),Nu=J$=a([P("esri.popup.content.support.ChartMediaInfoValue")],Nu);const ene=Nu;let dy=class extends mR{constructor(t){super(t),this.type=null,this.value=void 0}};a([A({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],dy.prototype,"type",void 0),a([A({type:ene,json:{write:{isRequired:!0}}})],dy.prototype,"value",void 0),dy=a([P("esri.popup.content.mixins.ChartMediaInfo")],dy);const _S=dy,SS=si()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var Z$;let Xw=Z$=class extends _S{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new Z$({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};a([A({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:SS.write,isRequired:!0}}})],Xw.prototype,"type",void 0),Xw=Z$=a([P("esri.popup.content.BarChartMediaInfo")],Xw);const UU=Xw;var Y$;let e2=Y$=class extends _S{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new Y$({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};a([A({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:SS.write,isRequired:!0}}})],e2.prototype,"type",void 0),e2=Y$=a([P("esri.popup.content.ColumnChartMediaInfo")],e2);const VU=e2;var K$;let py=K$=class extends ee{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new K$({linkURL:this.linkURL,sourceURL:this.sourceURL})}};a([A({type:String,json:{write:!0}})],py.prototype,"linkURL",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],py.prototype,"sourceURL",void 0),py=K$=a([P("esri.popup.content.support.ImageMediaInfoValue")],py);const tne=py;var X$;let Gh=X$=class extends mR{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new X$({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};a([A({type:Number,json:{write:!0}})],Gh.prototype,"refreshInterval",void 0),a([A({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Gh.prototype,"type",void 0),a([A({type:tne,json:{write:{isRequired:!0}}})],Gh.prototype,"value",void 0),Gh=X$=a([P("esri.popup.content.ImageMediaInfo")],Gh);const zU=Gh;var ex;let t2=ex=class extends _S{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new ex({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};a([A({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:SS.write,isRequired:!0}}})],t2.prototype,"type",void 0),t2=ex=a([P("esri.popup.content.LineChartMediaInfo")],t2);const GU=t2;var tx;let r2=tx=class extends _S{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new tx({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};a([A({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:SS.write,isRequired:!0}}})],r2.prototype,"type",void 0),r2=tx=a([P("esri.popup.content.PieChartMediaInfo")],r2);const qU=r2,rx={base:mR,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":UU,"column-chart":VU,"line-chart":GU,"pie-chart":qU,image:zU}};var ix;let To=ix=class extends du{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map((t=>t.type==="image"?zU.fromJSON(t):t.type==="barchart"?UU.fromJSON(t):t.type==="columnchart"?VU.fromJSON(t):t.type==="linechart"?GU.fromJSON(t):t.type==="piechart"?qU.fromJSON(t):void 0)).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map((r=>r.toJSON()))}clone(){return new ix(H({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};a([A()],To.prototype,"activeMediaInfoIndex",void 0),a([A({type:Object,json:{write:!0}})],To.prototype,"attributes",void 0),a([A({type:String,json:{write:!0}})],To.prototype,"description",void 0),a([A({types:[rx]})],To.prototype,"mediaInfos",void 0),a([pe("mediaInfos")],To.prototype,"readMediaInfos",null),a([ye("mediaInfos")],To.prototype,"writeMediaInfos",null),a([A({type:String,json:{write:!0}})],To.prototype,"title",void 0),a([A({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],To.prototype,"type",void 0),To=ix=a([P("esri.popup.content.MediaContent")],To);const Kg=To;var sx;let hy=sx=class extends ee{constructor(e){super(e),this.field=null,this.order=null}clone(){return new sx({field:this.field,order:this.order})}};a([A({type:String,json:{write:!0}})],hy.prototype,"field",void 0),a([A({type:["asc","desc"],json:{write:!0}})],hy.prototype,"order",void 0),hy=sx=a([P("esri.popup.support.RelatedRecordsInfoFieldOrder")],hy);const gR=hy;let na=class extends Ge.ClonableMixin(du){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};a([A({type:String,json:{write:!0}})],na.prototype,"description",void 0),a([A({type:Number,json:{type:Et,write:!0}})],na.prototype,"displayCount",void 0),a([A({type:["list"],json:{write:{isRequired:!0}}})],na.prototype,"displayType",void 0),a([A({type:[gR],json:{write:!0}})],na.prototype,"orderByFields",void 0),a([A({type:Number,json:{type:Et,write:{isRequired:!0}}})],na.prototype,"relationshipId",void 0),a([A({type:String,json:{write:!0}})],na.prototype,"title",void 0),a([A({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],na.prototype,"type",void 0),na=a([P("esri.popup.content.RelationshipContent")],na);const Xg=na;var nx;let Ay=nx=class extends du{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new nx({text:this.text})}};a([A({type:String,json:{write:!0}})],Ay.prototype,"text",void 0),a([A({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ay.prototype,"type",void 0),Ay=nx=a([P("esri.popup.content.TextContent")],Ay);const ev=Ay;let pl=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};a([A({type:String,json:{write:!0}})],pl.prototype,"title",void 0),a([A({type:String,json:{write:!0}})],pl.prototype,"description",void 0),a([A({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],pl.prototype,"type",void 0),a([A({type:Number,json:{type:Et,write:!0}})],pl.prototype,"associatedNetworkSourceId",void 0),a([A({type:Number,json:{type:Et,write:!0}})],pl.prototype,"associatedAssetGroup",void 0),a([A({type:Number,json:{type:Et,write:!0}})],pl.prototype,"associatedAssetType",void 0),pl=a([P("esri.popup.support.UtilityNetworkAssociationType")],pl);const HU=pl;let Lu=class extends Ge.ClonableMixin(du){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};a([A({type:String,json:{write:!0}})],Lu.prototype,"description",void 0),a([A({type:Number,json:{type:Et,write:!0}})],Lu.prototype,"displayCount",void 0),a([A({type:String,json:{write:!0}})],Lu.prototype,"title",void 0),a([A({type:[HU],json:{write:!0}})],Lu.prototype,"associationTypes",void 0),a([Ne({utilityNetworkAssociations:"utility-network-associations"})],Lu.prototype,"type",void 0),Lu=a([P("esri.popup.content.UtilityNetworkAssociationsContent")],Lu);const vR=Lu,rne={base:null,key:"type",typeMap:{attachment:m0,media:Kg,text:ev,expression:wS,field:y0,relationship:Xg,utilityNetworkAssociations:vR}},ine={base:null,key:"type",typeMap:{attachment:m0,media:Kg,text:ev,expression:wS,field:y0,relationship:Xg}};var ox;let Sd=ox=class extends ee{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new ox({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};a([A({type:String,json:{write:!0}})],Sd.prototype,"name",void 0),a([A({type:String,json:{write:!0}})],Sd.prototype,"title",void 0),a([A({type:String,json:{write:!0}})],Sd.prototype,"expression",void 0),a([A({type:["string","number"],json:{write:!0}})],Sd.prototype,"returnType",void 0),Sd=ox=a([P("esri.popup.ExpressionInfo")],Sd);const sne=Sd;var ax;let fy=ax=class extends ee{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new ax({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};a([A({type:Boolean,json:{write:!0}})],fy.prototype,"returnTopmostRaster",void 0),a([A({type:Boolean,json:{write:!0}})],fy.prototype,"showNoDataRecords",void 0),fy=ax=a([P("esri.popup.LayerOptions")],fy);const nne=fy;var lx;let my=lx=class extends ee{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new lx({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?H(this.orderByFields):null})}};a([A({type:Boolean,json:{write:!0}})],my.prototype,"showRelatedRecords",void 0),a([A({type:[gR],json:{write:!0}})],my.prototype,"orderByFields",void 0),my=lx=a([P("esri.popup.RelatedRecordsInfo")],my);const K5=my;let WU=0;const QU=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+WU++})}};return t=a([P("esri.core.Identifiable")],t),t},one=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:WU++})}};return t=a([P("esri.core.Identifiable.NumericIdentifiable")],t),t};let yy=class extends QU(class{}){};yy=a([P("esri.core.Identifiable")],yy),(function(e){e.IdentifiableMixin=QU,e.NumericIdentifiableMixin=one})(yy||(yy={}));const J0=yy;var ux;let Fn=ux=class extends J0.IdentifiableMixin(je){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new ux({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};a([A()],Fn.prototype,"active",void 0),a([A()],Fn.prototype,"className",void 0),a([A()],Fn.prototype,"disabled",void 0),a([A()],Fn.prototype,"icon",void 0),a([A()],Fn.prototype,"id",void 0),a([A()],Fn.prototype,"indicator",void 0),a([A()],Fn.prototype,"title",void 0),a([A()],Fn.prototype,"type",void 0),a([A()],Fn.prototype,"visible",void 0),Fn=ux=a([P("esri.support.actions.ActionBase")],Fn);const wR=Fn;var cx;let i2=cx=class extends wR{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new cx({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};a([A()],i2.prototype,"image",void 0),i2=cx=a([P("esri.support.actions.ActionButton")],i2);const ane=i2;var dx;let gy=dx=class extends wR{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new dx({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};a([A()],gy.prototype,"image",void 0),a([A()],gy.prototype,"value",void 0),gy=dx=a([P("esri.support.actions.ActionToggle")],gy);const lne=gy,Pm="relationships/",X5="expression/",une=Te.ofType({key:"type",defaultKeyValue:"button",base:wR,typeMap:{button:ane,toggle:lne}}),cne={base:du,key:"type",typeMap:{media:Kg,custom:Mse,text:ev,attachments:m0,fields:y0,expression:wS,relationship:Xg,utilityNetworkAssociations:vR}},JU=new Set(["attachments","fields","media","text","expression","relationship"]),dne=new Set([...JU,"utility-network-associations"]);let Kr=class extends Ge.ClonableMixin(ee){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map((r=>Ha(cne,r))):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Xa(t)?t:(de.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeWebMapContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeFieldInfos(t,r,i,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(t){const l=o?o.filter((m=>m.type==="fields")):[],p=l.length&&l.every((m=>{var v;return(v=m.fieldInfos)==null?void 0:v.length}));r.fieldInfos=t.filter(Boolean).map((m=>{const v=m.toJSON(s);return p&&(v.visible=!1),v}))}if(o)for(const l of o)l.type==="fields"&&this._writeFieldsContent(l,r)}writeLayerOptions(t,r,i,s){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),Bp(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter((s=>(i==null?void 0:i.origin)==="web-scene"?JU.has(s.type):dne.has(s.type))).map((s=>s==null?void 0:s.toJSON(i))),r.popupElements.forEach((s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)}))):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=H(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach((s=>{const n=r.fieldInfos.find((o=>{var l,p;return((l=o.fieldName)==null?void 0:l.toLowerCase())===((p=s.fieldName)==null?void 0:p.toLowerCase())}));n?n.visible=!0:r.fieldInfos.push(s)})):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var n,o;const i=((n=t.orderByFields)==null?void 0:n.map((l=>this._toFieldOrderJSON(l,t.relationshipId))))||[],s=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=H(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const s={description:!1,mediaInfos:!1};return i.map((n=>n.type==="media"?(n.mediaInfos||!r||s.mediaInfos||(n.mediaInfos=r,s.mediaInfos=!0),Kg.fromJSON(n)):n.type==="text"?(n.text||!t||s.description||(n.text=t,s.description=!0),ev.fromJSON(n)):n.type==="attachments"?m0.fromJSON(n):n.type==="fields"?y0.fromJSON(n):n.type==="expression"?wS.fromJSON(n):n.type==="relationship"?Xg.fromJSON(n):n.type==="utilityNetworkAssociations"?vR.fromJSON(n):void 0)).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(Pm)))return null;const s=r.replace(Pm,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?Xg.fromJSON({relationshipId:n,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:s}=t;return{field:`${Pm}${r}/${s}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];t?n.push(new ev({text:t})):n.push(new y0),Array.isArray(r)&&r.length&&n.push(Kg.fromJSON({mediaInfos:r})),i&&n.push(m0.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:l}=s;return o&&(l!=null&&l.length)&&l.forEach((p=>{const m=this._toRelationshipContent(p);m&&n.push(m)})),n.length?n:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce(((s,n)=>[...s,...this._getMediaInfoFields(n)]),[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:s}=t,n=s||{},{fields:o,normalizeField:l,tooltipField:p,sourceURL:m,linkURL:v}=n,_=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(m),...this._extractFieldNames(v),...o??[]];return l&&_.push(l),p&&_.push(p),_}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce(((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]]),r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce(((r,i)=>[...r,...this._getContentElementFields(i)]),[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map((s=>ls(t,r,s.expression))))}_getFieldInfoFields(t){return t?t.filter((({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(Pm)||r.startsWith(X5)))).map((r=>r.fieldName)):[]}_getActionsFields(t){return t?t.toArray().reduce(((r,i)=>[...r,...this._getActionFields(i)]),[]):[]}_getActionFields(t){const{className:r,title:i,type:s}=t,n=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(n)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return cR(t).filter((r=>!(r.indexOf(Pm)===0||r.indexOf(X5)===0)))}};a([A({type:une})],Kr.prototype,"actions",void 0),a([A()],Kr.prototype,"content",void 0),a([Ft("content")],Kr.prototype,"castContent",null),a([pe("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Kr.prototype,"readContent",null),a([ye("web-scene","content",{popupElements:{type:Te.ofType(ine)},showAttachments:{type:Boolean},mediaInfos:{type:Te.ofType(rx)},description:{type:String},relatedRecordsInfo:{type:K5}})],Kr.prototype,"writeWebSceneContent",null),a([ye("content",{popupElements:{type:Te.ofType(rne)},showAttachments:{type:Boolean},mediaInfos:{type:Te.ofType(rx)},description:{type:String},relatedRecordsInfo:{type:K5}})],Kr.prototype,"writeWebMapContent",null),a([A({type:[sne],json:{write:!0}})],Kr.prototype,"expressionInfos",void 0),a([A({type:[fR]})],Kr.prototype,"fieldInfos",void 0),a([ye("fieldInfos")],Kr.prototype,"writeFieldInfos",null),a([A({type:nne})],Kr.prototype,"layerOptions",void 0),a([ye("layerOptions")],Kr.prototype,"writeLayerOptions",null),a([A({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Kr.prototype,"lastEditInfoEnabled",void 0),a([A()],Kr.prototype,"outFields",void 0),a([A()],Kr.prototype,"overwriteActions",void 0),a([A()],Kr.prototype,"returnGeometry",void 0),a([A({json:{type:String}})],Kr.prototype,"title",void 0),a([ye("title")],Kr.prototype,"writeTitle",null),Kr=a([P("esri.PopupTemplate")],Kr);const Z0=Kr;function Qe(e,t,r={}){return bR(e,t,r,ZU)}function ks(e,t,r={}){return bR(e,t,r,YU)}function bR(e,t,r={},i){let s=null;const n=r.once?(o,l)=>{i(o)&&(vr(s),t(o,l))}:(o,l)=>{i(o)&&t(o,l)};if(s=Eee(e,n,r.sync,r.equals),r.initial){const o=e();n(o,o)}return s}function Vc(e,t,r,i={}){let s=null,n=null,o=null;function l(){var v;s&&n&&(n.remove(),(v=i.onListenerRemove)==null||v.call(i,s),s=null,n=null)}function p(v){i.once&&i.once&&vr(o),r(v)}const m=Qe(e,((v,_)=>{var E;l(),dS(v)&&(s=v,n=U0(v,t,p),(E=i.onListenerAdd)==null||E.call(i,v))}),{sync:i.sync,initial:!0});return o=Lt((()=>{m.remove(),l()})),o}function Qv(e,t){return pne(e,YU,t)}function pne(e,t,r){if(oo(r))return Promise.reject(rr());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let s=null;function n(){s=vr(s)}return new Promise(((o,l)=>{s=th([Ko(r,(()=>{n(),l(rr())})),bR(e,(p=>{n(),o(p)}),{sync:!1,once:!0},t??ZU)])}))}function ZU(e){return!0}function YU(e){return!!e}function R4e(e,t,r={}){let i=!1;const s=Qe(e,((n,o)=>{i||t(n,o)}),r);return{remove(){s.remove()},pause(){i=!0},resume(){i=!1}}}const Wa={sync:!0},Vi={initial:!0},vs={sync:!0,initial:!0};let _R=class{constructor(t,r,i,s,n,o){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=s,this.scaleHeight=n;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Ir=new _R(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ba=new _R(3396190,1/169.8944472236118,23e4,6e4,.111),zc=new _R(1737400,0,0,0,0),hne=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Ane={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function eN(e){const t=e==null?void 0:e.match(hne);if(!t)return null;const[,r,i,s]=t;if(!r)return null;let n=null,o=null,l=null;const{devext:p,qaext:m,www:v}=Ane;if(i)if(n=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=p);break;case"qa":({customBaseUrl:o,portalHostname:l}=m);break;default:return null}else({customBaseUrl:o,portalHostname:l}=v);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=p);break;case"qaext":({customBaseUrl:o,portalHostname:l}=m);break;case"www":({customBaseUrl:o,portalHostname:l}=v);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:l,urlKey:n}}function KU(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function XU(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function eV(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function fne(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const mne=()=>de.getLogger("esri.core.urlUtils"),Y0=Pt.request,tN="esri/config: esriConfig.request.proxyUrl is not set.",tV=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,rV=/^\s*http:/i,yne=/^\s*https:/i,gne=/^\s*file:/i,iV=/:\d+$/,vne=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,wne=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),bne=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let kc=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(wne);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(bne),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const B1={},_ne=new kc(Pt.applicationUrl);let ns=_ne;const Sne=Ene();let SR=Sne;const ER=()=>ns,N4e=()=>SR;function Ene(){const e=ns.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${ns.scheme}://${ns.host}${ns.port!=null?`:${ns.port}`:""}`}${t}`}function mi(e){if(!e)return null;const t={path:null,query:null},r=new kc(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=TR(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function TR(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const s=i.indexOf("=");let n,o;s<0?(n=decodeURIComponent(i),o=""):(n=decodeURIComponent(i.slice(0,s)),o=decodeURIComponent(i.slice(s+1)));let l=r[n];typeof l=="string"&&(l=r[n]=[l]),Array.isArray(l)?l.push(o):r[n]=o}return r}function tv(e,t){return e?Object.keys(e).map((r=>{const i=e[r];if(i==null)return"";const s=encodeURIComponent(r)+"=";return Array.isArray(i)?i.map((n=>Zg(n)?s+encodeURIComponent(JSON.stringify(n)):s+encodeURIComponent(n))).join("&"):Zg(i)?s+encodeURIComponent(JSON.stringify(i)):s+encodeURIComponent(i)})).filter((r=>r)).join("&"):""}function sV(e=!1){let t,r=Y0.proxyUrl;if(typeof e=="string"){t=lV(e);const i=ES(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw mne().warn(tN),new Q("urlUtils:proxy-not-set",tN);return t&&hx()&&(r=CR(r)),mi(r)}function L4e(e,t=!1){const r=ES(e);let i,s;if(r){const n=$R(r.proxyUrl);i=n.path,s=n.query?TR(n.query):null}else if(t){const n=sV(e);i=n.path,s=n.query}if(i){const n=mi(e);e=i+"?"+n.path;const o=tv({...s,...n.query});o&&(e=`${e}?${o}`)}return e}const Nm={path:"",query:""};function $R(e){const t=e.indexOf("?");return t!==-1?(Nm.path=e.slice(0,t),Nm.query=e.slice(t+1)):(Nm.path=e,Nm.query=null),Nm}function nV(e){return e=(e=Fb(e=Lne(e=$R(e).path),!0)).toLowerCase()}function Tne(e){const t={proxyUrl:e.proxyUrl,urlPrefix:nV(e.urlPrefix)},r=Y0.proxyRules,i=t.urlPrefix;let s=r.length;for(let n=0;n<r.length;n++){const o=r[n].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;s=n;break}o.indexOf(i)===0&&(s=n+1)}return r.splice(s,0,t),s}function ES(e){const t=Y0.proxyRules,r=nV(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function $ne(e,t){if(!e||!t)return!1;e=Db(e),t=Db(t);const r=eN(e),i=eN(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&Ua(e,t,!0)}function oV(e,t){return e=Db(e),t=Db(t),Fb(e)===Fb(t)}function Db(e){const t=(e=no(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function px(e,t=Y0.interceptors){const r=i=>i instanceof RegExp?i.test(e):typeof i=="string"?e.startsWith(i):i==null;if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function Ua(e,t,r=!1){if(!e||!t)return!1;const i=fx(e),s=fx(t);return!(!r&&i.scheme!==s.scheme)&&i.host!=null&&s.host!=null&&i.host.toLowerCase()===s.host.toLowerCase()&&i.port===s.port}function xR(e){if(typeof e=="string"){if(!nn(e))return!0;e=fx(e)}if(Ua(e,ns))return!0;const t=Y0.trustedServers||[];for(let r=0;r<t.length;r++){const i=xne(t[r]);for(let s=0;s<i.length;s++)if(Ua(e,i[s]))return!0}return!1}function xne(e){return B1[e]||(MR(e)||Qa(e)?B1[e]=[new kc(en(e))]:B1[e]=[new kc(`http://${e}`),new kc(`https://${e}`)]),B1[e]}function en(e,t=SR,r){return Qa(e)?r!=null&&r.preserveProtocolRelative?e:ns.scheme==="http"&&ns.authority===Mn(e).slice(2)?`http:${e}`:`https:${e}`:MR(e)?e:Up(e[0]==="/"?Pne(t):t,e)}function IR(e,t=SR,r){if(e==null||!nn(e))return e;const i=no(e),s=i.toLowerCase(),n=no(t).toLowerCase().replace(/\/+$/,""),o=r?no(r).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const l=(_,E,$)=>($=_.indexOf(E,$))===-1?_.length:$;let p=l(s,"/",s.indexOf("//")+2),m=-1;for(;s.slice(0,p+1)===n.slice(0,p)+"/"&&(m=p+1,p!==s.length);)p=l(s,"/",p+1);if(m===-1||o&&m<o.length)return e;e=i.slice(m);const v=n.slice(m-1).replaceAll(/[^/]+/g,"").length;if(v>0)for(let _=0;_<v;_++)e=`../${e}`;else e=`./${e}`;return e}function no(e){return e=jne(e=Fne(e=Dne(e=en(e=e.trim()))))}function Up(...e){const t=e.filter(Ga);if(!(t!=null&&t.length))return;const r=[];if(nn(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(r.push(s.slice(0,n+1)),Rne(t[0])&&(r[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce(((s,n)=>n?s.concat(n.split("/")):s),[]);for(let s=0;s<i.length;s++){const n=i[s];n===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!n&&s===i.length-1||n&&(n!=="."||r.length===0))&&r.push(n)}return r.join("/")}function Mn(e,t=!1){if(e==null||K0(e)||pu(e))return null;let r=e.indexOf("://");if(r===-1&&Qa(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=Fb(e,!0)),e}function nn(e){return Qa(e)||MR(e)}function K0(e){return e!=null&&e.slice(0,5)==="blob:"}function pu(e){return e!=null&&e.slice(0,5)==="data:"}function Ine(e){const t=Vp(e);return t!=null&&t.isBase64?eV(t.data):null}function D4e(e){return fne(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Mne=/^data:(.*?)(;base64)?,(.*)$/;function Vp(e){const t=e.match(Mne);if(!t)return null;const[,r,i,s]=t;return{mediaType:r,isBase64:!!i,data:s}}function aV(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Cne(e){return(await fetch(e)).blob()}function F4e(e){const t=Ine(e);if(!t)return null;const r=Vp(e);return new Blob([t],{type:r.mediaType})}function Qa(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function MR(e){return e!=null&&tV.test(e)}function lV(e){return e!=null&&yne.test(e)||ns.scheme==="https"&&Qa(e)}function kne(e){return e!=null&&rV.test(e)||ns.scheme==="http"&&Qa(e)}function Rne(e){return e!=null&&gne.test(e)}function CR(e){return Qa(e)?`https:${e}`:e.replace(rV,"https:")}function One(){return ns.scheme==="http"}function hx(){return ns.scheme==="https"}function Fb(e,t=!1){return Qa(e)?e.slice(2):(e=e.replace(tV,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Pne(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Nne(e){let t=0;if(nn(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function j4e(e,t){if(!e)return"";const r=mi(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(s,"")}function Lne(e){return e.endsWith("/")?e:`${e}/`}function uV(e){return e.replace(/\/+$/,"")}function Dne(e){if(/^https?:\/\//i.test(e)){const t=$R(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Fne(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function jne(e){const t=Y0.httpsDomains;if(!kne(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),iV.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return One()&&i===ns.authority&&!vne.test(e)||(hx()&&i===ns.authority||t&&t.some((s=>i===s||i.endsWith(`.${s}`)))||hx()&&!ES(e))&&(e=CR(e)),e}function Ax(e,t,r){if(!(t&&r&&e&&nn(e)))return e;const i=e.indexOf("//"),s=e.indexOf("/",i+2),n=e.indexOf(":",i+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function cV(e,t){const r=new URL(e);return r.host=t,r.port&&!iV.test(t)&&(r.port=""),r.toString()}function Bne(e){return new URL(e).host}function fx(e){return typeof e=="string"?new kc(en(e)):(e.scheme||(e.scheme=ns.scheme),e)}function B4e(e){return Une.test(e)}function dV(e,t){const r=mi(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function pV(e,t,r){const i=mi(e),s=i.query||{};return s[t]=String(r),`${i.path}?${tv(s)}`}function HT(e,t){if(!t)return e;const r=mi(e),i=r.query||{};for(const[n,o]of Object.entries(t))o!=null&&(i[n]=o);const s=tv(i);return s?`${r.path}?${s}`:r.path}function hV(e){if(e==null)return null;const t=e.match(AV);return t?t[2]:null}function rN(e){if(e==null)return null;const t=e.match(AV);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function U4e(e){return typeof e=="string"?Vp(e)??{data:e}:new Promise(((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(Vp(i.result)),i.onerror=s=>r(s)}))}const AV=/([^.]*)\.([^/]*)$/,Une=/(^data:image\/svg|\.svg$)/i,fV="20250917",mV="2136612b0849a0d597a86ff9f672ef9f9b4016c4";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const yV="4.33";let st,kR=yV;kR="4.33.14";function V4e(e){st=e}function z4e(e){const t=st==null?void 0:st.findCredential(e);return t!=null&&t.token?pV(e,"token",t.token):e}K("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),K("host-webworker");function nh(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=en(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=IR(e,t.portalItem.itemUrl);s!=null&&Vne.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=mx(e,t==null?void 0:t.portal))&&$S.test(e)?RR(e):e}function zp(e,t,r=g0.YES){var s,n;if((e=e&&$S.test(e)?bV(e):e)==null)return e;!nn(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=en(e);if(t){const o=((s=t.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((n=t.url)==null?void 0:n.path);if(o){const l=mx(o,t.portal),p=mx(i,t.portal);i=IR(p,l,l),i!=null&&i!==p&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=wV(i,t==null?void 0:t.portal),nn(i)&&(i=no(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!nn(i)&&!pu(i)&&r===g0.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function TS(e,t,r){return nh(e,r)}function Gp(e,t,r,i){const s=zp(e,i);s!==void 0&&(t[r]=s)}const $S=/\/items\/([^/]+)\/resources\/(.*)/,Vne=/^\.\/resources\//;function gV(e){const t=(e==null?void 0:e.match($S))??null;return(t==null?void 0:t[1])??null}function vV(e){const t=(e==null?void 0:e.match($S))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:l}=rN(r);return{prefix:null,filename:o,extension:l}}const{path:s,extension:n}=rN(r.slice(i+1));return{prefix:r.slice(0,i),filename:s,extension:n}}function wV(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Ax(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function mx(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=ER();return Ua(i,`${i.scheme}://${r}`)?Ax(e,t.portalHostname,r):Ax(e,r,t.portalHostname)}function RR(e){if(!e)return e||null;let t=e;return t&&st&&!st.findCredential(t)&&(t=XU(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function bV(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&st&&!st.findCredential(t)&&(t=XU(t)),t}var g0;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(g0||(g0={}));const zne=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return g0},ensureMainOnlineDomain:wV,fromCDNUrl:bV,fromJSON:nh,itemIdFromResourceUrl:gV,prefixAndFilenameFromResourceUrl:vV,read:TS,toCDNUrl:RR,toJSON:zp,write:Gp},Symbol.toStringTag,{value:"Module"})),_V={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},SV=Object.values(_V),EV=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${SV.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Gne=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${SV.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),qne=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function G4e(e){return EV.test(e)}function Ja(e){if(e==null)return null;const t=mi(e),r=(t==null?void 0:t.path.match(EV))||(t==null?void 0:t.path.match(Gne));if(!r)return null;const[,i,s,n,o]=r,l=s.indexOf("/");return{title:OR(l!==-1?s.slice(l+1):s),serverType:_V[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function Hne(e){const t=mi(e).path.match(qne);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function OR(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Wne(e,t){const r=[];if(e){const i=Ja(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=OR(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function jb(e){let t=Mn(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(t)))}function Qne(e,t){return e&&uV(dV(e,t))}function Jne(e){let{url:t}=e;if(!t)return{url:t};t=dV(t,e.logger);const r=mi(t),i=Ja(r.path);let s;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(s=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const n=Hne(r.path);n!=null&&(t=n.serviceUrl,s=n.sublayerId)}return{url:uV(t),layerId:s}}function Zne(e,t,r,i,s){Gp(t,i,"url",s),i.url&&e.layerId!=null&&(i.url=Up(i.url,r,e.layerId.toString()))}function q4e(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),n=t.includes("/wmsserver");return r&&(i||s||n)}function H4e(e){var i;if(!e)return!1;const t=new kc(en(e)),r=(i=t.authority)==null?void 0:i.toLowerCase();return r==="server.arcgisonline.com"||r==="services.arcgisonline.com"}const Yne=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function PR(e){if(!NR(e))return null;const t=i=>i instanceof RegExp?i.test(e):typeof i=="string"&&e.startsWith(i),r=Pt.apiKeys;if(Array.isArray(r.scopes)){for(const i of r.scopes)if(Array.isArray(i.urls)){if(i.urls.some(t))return i.token}else if(t(i.urls))return i.token}return r.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(e)?r.basemapStyles:Pt.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(e)?Pt.apiKey:null}function yx(){return Pt.apiKey!=null||Pt.apiKeys.basemapStyles!=null}function Kne(e,t){return t?NR(e):PR(e)!=null}function NR(e){const t=Mn(e,!0);return!!t&&!Yne.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function Xne(e,t,r=!1,i){return new Promise(((s,n)=>{if(oo(i))return void n(iN());let o=()=>{m(),n(new Error(`Unable to load ${t}`))},l=()=>{const v=e;m(),s(v)},p=()=>{if(!e)return;const v=e;m(),v.src="",n(iN())};const m=()=>{K("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",l)),o=null,l=null,e=null,i!=null&&i.removeEventListener("abort",p),p=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",p),K("esri-image-decode")?e.decode().then(l,o):(e.addEventListener("error",o),e.addEventListener("load",l))}))}function iN(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const TV="Timeout exceeded";function eoe(){return new Error(TV)}function W4e(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===TV}function toe(e){Pt.request.crossOriginNoCorsDomains||(Pt.request.crossOriginNoCorsDomains={});const t=Pt.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[Mn(r)??""]=0:(t[Mn("http://"+r)??""]=0,t[Mn("https://"+r)??""]=0)}function roe(e){const t=Pt.request.crossOriginNoCorsDomains;if(t){let r=Mn(e);if(r)return r=r.toLowerCase(),!Ua(r,ER())&&t[r]<Date.now()-36e5}return!1}async function ioe(e){var s;const t=mi(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=Pt.request.crossOriginNoCorsDomains,i=Mn(e);r&&i&&(r[i.toLowerCase()]=Date.now())}const gx=new Map;function soe(e,t){const r=t==null?void 0:t.preferredHost;if(!r||Ua(e,`https://${r}`,!0))return;const i=Ja(e);if(!i||i.serverType!=="FeatureServer"||KU(e))return;const s=i.url.path.toLowerCase();gx.has(s)||gx.set(s,r)}function sN(e){var i;const t=(i=Ja(e))==null?void 0:i.url.path.toLowerCase();if(!t)return e;const r=gx.get(t);return r?cV(e,r):e}async function Nt(e,t){var $;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=TR(t.query.toString().replaceAll("+"," ")));const r=pu(e),i=K0(e);i||r||(e=no(e));const s={url:e,requestOptions:{...t}},n=M=>({data:M,getAllHeaders:v0,getHeader:v0,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=px(e,Yn.internalInterceptors);if(o){const M=await oN(o,s);if(M!=null)return n(M)}let l=px(e);if(l){const M=await oN(l,s);if(M!=null)return n(M);l.after||l.error||(l=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(K("host-webworker")||K("host-node")))throw Zo("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw Zo("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||i)throw Zo("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await uoe(),Bb)return Bb.execute(e,t);const p=new AbortController,m=Ko(t,(()=>p.abort())),v={controller:p,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:s,redoRequest:!1,useIdentity:Yn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=t.useRequestQueue?Aoe(v):wx(v),E=await _.finally((()=>m==null?void 0:m.remove()));return($=l==null?void 0:l.after)==null||$.call(l,E),E}let Bb,$V=!1;const Yn=Pt.request,xV="FormData"in globalThis,noe=new Set([499,498,403,401]),ooe=new Set(["COM_0056","COM_0057","SB_0008"]),aoe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],v0=()=>null,Ub=Symbol();function loe(e){const t=Mn(e);t&&!Nt._corsServers.includes(t)&&Nt._corsServers.push(t)}function nN(e){const t=Mn(e);return!t||t.endsWith(".arcgis.com")||Nt._corsServers.includes(t)||xR(t)}function Zo(e,t,r,i){var o;let s;const n={url:r.url,requestOptions:r.requestOptions,getAllHeaders:v0,getHeader:v0,ssl:!1};if(t instanceof Q)return t.details?(t.details=H(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=n,t;if(t){const l=i&&(()=>Array.from(i.headers)),p=i&&(_=>i.headers.get(_)),m=i==null?void 0:i.status,v=t.message;v&&(s=v),l&&p&&(n.getAllHeaders=l,n.getHeader=p),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||m||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?(n.messages=[t.details],s??(s=t.details)):(n.messages=t.details,s??(s=(o=n.messages)==null?void 0:o[0])),n.raw=Ub in t?t[Ub]:t}return s??(s="Error"),zi(t)?rr():new Q(e,s,n)}async function uoe(){K("host-webworker")&&(!Bb&&globalThis.invokeStaticMessage?Bb=await ce(()=>import("./request-TOj_vJQW.js"),[],import.meta.url):$V=!0)}async function vx(){st||await ce(()=>import("./IdentityManager-DGFZGQxo.js"),__vite__mapDeps([16,17]),import.meta.url)}async function coe(e){var l;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,s=r.body;let n=null,o=null;if(xV&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Yn.priority,redirect:"follow",signal:i},(n||o)&&(e.fetchOptions.body=n||o),($V||r.authMode==="anonymous")&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(l=r.query)!=null&&l.token||n!=null&&n.get("token")),!e.hasToken){const p=PR(t);p&&(r.query??(r.query={}),r.query.token=p,e.hasToken=!0)}if(e.useIdentity&&!e.hasToken&&!e.credential&&!e.credentialToken&&!IV(t)&&!oo(i)){let p;r.authMode==="immediate"?(await vx(),p=await st.getCredential(t,{signal:i})):r.authMode==="no-prompt"?(await vx(),p=await st.getCredential(t,{prompt:!1,signal:i}).catch((()=>{}))):st&&(p=st.findCredential(t)),p&&(e.credential=p,e.credentialToken=p.token,e.useSSL=!!p.ssl)}}function IV(e){return aoe.some((t=>t.test(e)))}async function doe(e){let t=e.params.url,r=sN(t);const i=e.params.requestOptions,s=e.fetchOptions??{},n=K0(t)||pu(t),o=i.responseType||"json",l=n?0:i.timeout!=null?i.timeout:Yn.timeout;let p=!1;if(!n){e.useSSL&&(t=CR(t));let $={...i.query};e.credentialToken&&($.token=e.credentialToken);let M=tv($);K("esri-url-encodes-apostrophe")&&(M=M.replaceAll("'","%27"));const k=r.length+1+M.length;let N;p=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||k>Yn.maxUrlLength;const U=i.useProxy||!!ES(t);if(U){const G=sV(t);N=G.path,!p&&N.length+1+k>Yn.maxUrlLength&&(p=!0),G.query&&($={...G.query,...$})}if(s.method==="HEAD"&&(p||U)){if(p)throw k>Yn.maxUrlLength?Zo("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Zo("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(U)throw Zo("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(p?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=HT(t,$):(s.body=tv($),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):t=HT(t,$),U&&(e.useProxy=!0,t=`${N}?${t}`),$.token&&xV&&s.body instanceof FormData&&!KU(t)&&s.body.set("token",$.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!Ua(t,ER())){if(xR(t))e.withCredentials=!0;else if(st){const G=st.findServerInfo(t);G!=null&&G.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(s.credentials="include",roe(t)&&await ioe(p?HT(t,$):t)),r=sN(t)}let m,v,_=0,E=!1;l>0&&(_=setTimeout((()=>{E=!0,e.controller.abort()}),l));try{if(i.responseType==="native-request-init")v=s,v.url=r,i.signal?v.signal=i.signal:delete v.signal;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||p||poe(i.headers)||!n&&!e.useProxy&&Yn.proxyUrl&&!nN(t)){if(Nt._beforeFetch&&await Nt._beforeFetch(t,s),m=await fetch(r,s),Nt._afterFetch&&await Nt._afterFetch(m),e.useProxy||loe(t),i.responseType==="native")v=m;else if(s.method!=="HEAD")if(m.ok){switch(o){case"array-buffer":v=await m.arrayBuffer();break;case"blob":case"image":v=await m.blob();break;default:v=await m.text()}if(_&&(clearTimeout(_),_=0),o==="json"||o==="xml"||o==="document")if(v)switch(o){case"json":v=JSON.parse(v);break;case"xml":v=aN(v,"application/xml");break;case"document":v=aN(v,"text/html")}else v=null;if(v){if(o==="array-buffer"||o==="blob"){const $=m.headers.get("Content-Type");if($&&/application\/json|text\/plain/i.test($)&&v[o==="blob"?"size":"byteLength"]<=750)try{const M=await new Response(v).json();M.error&&(v=M)}catch{}}o==="image"&&v instanceof Blob&&(v=await lN(URL.createObjectURL(v),e,!0))}}else{v=await m.text();try{v=JSON.parse(v)}catch{}}}else v=await lN(r,e)}catch($){if($.name==="AbortError")throw E?eoe():rr("Request canceled");if(!(!m&&$ instanceof TypeError&&Yn.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||nN(t))throw $;e.redoRequest=!0,Tne({proxyUrl:Yn.proxyUrl,urlPrefix:Mn(t)??""})}finally{_&&clearTimeout(_)}return[m,v]}async function oN(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(s){r=Zo("request:interceptor",s,t)}if((i instanceof Error||i instanceof Q)&&(r=Zo("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function poe(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function aN(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}Nt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Nt._beforeFetch=void 0,Nt._afterFetch=void 0;const hoe=new Map;async function Aoe(e){const t=moe(e.params.url);if(!t)return wx(e);const{QueueProcessor:r}=await ce(()=>import("./QueueProcessor-C20k4M9F.js"),[],import.meta.url);return rh(hoe,t.origin,(()=>{const s=t.isHosted?K("request-queue-concurrency-hosted"):K("request-queue-concurrency-non-hosted");return new r({concurrency:s,process:n=>{if(oo(n.params.requestOptions))throw Zo("",rr("Request canceled"),n.params);return wx(n)}})})).push(e)}async function wx(e){var n,o;let t,r;await coe(e);try{do[t,r]=await doe(e);while(!await foe(e,t,r))}catch(l){const p=Zo("request:server",l,e.params,t);throw p.details.ssl=e.useSSL,(n=e.interceptor)!=null&&n.error&&e.interceptor.error(p),p}const i=e.params.url;if(r)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!xR(i)){const l=Mn(i,!0);l&&Yn.trustedServers.push(l)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&toe(r.authorizedCrossOriginNoCorsDomains)}else(e.params.requestOptions.responseType||"json")==="json"&&soe(i,r);const s=e.credential;if(s&&st){const l=st.findServerInfo(s.server);let p=l==null?void 0:l.owningSystemUrl;if(p){p=p.replace(/\/?$/,"/sharing");const m=st.findCredential(p,s.userId);m&&st._getIdenticalSvcIdx(p,m)===-1&&m.resources.unshift(p)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):v0,getHeader:t?l=>t.headers.get(l):v0,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function foe(e,t,r){var m;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let s,n;if(r&&(r.error&&typeof r.error=="object"?s=r.error:r.status==="error"&&Array.isArray(r.messages)&&(s={...r},s[Ub]=r,s.details=r.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[Ub]=r,s;let o,l=null;s&&(n=Number(s.code),l=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o==null?void 0:o.toUpperCase());const p=i.authMode;if(n===403&&(l===4||(m=s.message)!=null&&m.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(p!=="no-prompt"||n===498)&&n!==void 0&&noe.has(n)&&!IV(e.params.url)&&(n!==403||(!o||!ooe.has(o))&&(l==null||l===2&&e.credentialToken))){await vx();try{const v=await st.getCredential(e.params.url,{error:Zo("request:server",s,e.params),credential:e.credential,prompt:p!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=v,e.credentialToken=v.token,e.useSSL=e.useSSL||v.ssl,!1}catch(v){if(p==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=v}}if(s)throw s;return!0}function lN(e,t,r=!1){const i=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Yn.priority,s.src=e,Xne(s,e,r,i)}function moe(e){let t,r;return typeof e=="string"?(t=Mn(e,!0),r=jb(e)):(t=e.origin,r=jb(e.toString())),t==null?null:{origin:t,isHosted:r}}function Or(e){if(!Pt.assetsPath)throw de.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Q("assets:path-not-set","config.assetsPath is not set");return Up(Pt.assetsPath,e)}let WT,q=null;function LR(){return!!q}function yoe(){return!!K("esri-wasm")}function MV(){return WT||(WT=ce(()=>import("./pe-wasm-dPKcsouR.js"),[],import.meta.url).then((({default:e})=>e({locateFile:t=>Or(`esri/geometry/support/${t}`)}))).then((e=>{RV(e)})),WT)}var bx,gr;(function(e){function t(n,o,l){q.ensureCache.prepare();const p=Kd(l),m=l===p,v=q.ensureFloat64(p),_=q._pe_geog_to_proj(q.getPointer(n),o,v);return _&&uc(l,o,v,m),_}function r(n,o,l,p){switch(p){case gr.PE_TRANSFORM_P_TO_G:return i(n,o,l);case gr.PE_TRANSFORM_G_TO_P:return t(n,o,l)}return 0}function i(n,o,l){return s(n,o,l,0)}function s(n,o,l,p){q.ensureCache.prepare();const m=Kd(l),v=l===m,_=q.ensureFloat64(m),E=q._pe_proj_to_geog_center(q.getPointer(n),o,_,p);return E&&uc(l,o,_,v),E}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=s})(bx||(bx={})),(function(e){function t(){e.PE_BUFFER_MAX=q.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=q.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=q.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=q.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=q.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=q.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=q.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=q.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=q.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=q.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=q.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=q.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=q.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=q.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=q.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=q.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=q.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=q.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=q.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=q.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=q.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=q.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=q.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=q.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=q.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=q.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=q.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=q.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=q.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=q.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=q.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=q.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t})(gr||(gr={}));let CV=null;var _x;(function(e){const t={},r={},i=$=>{const M=$.getType();switch(M){case gr.PE_TYPE_GEOGCS:$=q.castObject($,q.PeGeogcs);break;case gr.PE_TYPE_PROJCS:$=q.castObject($,q.PeProjcs);break;case gr.PE_TYPE_GEOGTRAN:$=q.castObject($,q.PeGeogtran);break;default:M&gr.PE_TYPE_UNIT&&($=q.castObject($,q.PeUnit))}return $};function s(){q.PeFactory.prototype.initialize(null)}function n($){return o(gr.PE_TYPE_COORDSYS,$)}function o($,M){let k=null,N=t[$];if(N||(N={},t[$]=N),N.hasOwnProperty(String(M))&&(k=N[M],q.compare(k,q.NULL)&&(k=null)),!k){const U=q.PeFactory.prototype.factoryByType($,M);q.compare(U,q.NULL)||(k=i(U),N[M]=k)}return k}function l($,M){let k=null,N=r[$];if(N||(N={},r[$]=N),N.hasOwnProperty(M)&&(k=N[M],q.compare(k,q.NULL)&&(k=null)),!k){const U=q.PeFactory.prototype.fromString($,M);q.compare(U,q.NULL)||(k=i(U),N[M]=k)}return k}function p($){return o(gr.PE_TYPE_GEOGCS,$)}function m($){return o(gr.PE_TYPE_GEOGTRAN,$)}function v($){return q.PeFactory.prototype.getCode($)}function _($){return o(gr.PE_TYPE_PROJCS,$)}function E($){return o(gr.PE_TYPE_UNIT,$)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=l,e.geogcs=p,e.geogtran=m,e.getCode=v,e.projcs=_,e.unit=E})(_x||(_x={}));let kV=null;var Vb,Sx,Ex,Tx,$x,xx,zb,Ix,Gb,qb,Mx;function RV(e){function t(n,o,l){n[o]=l(n[o])}q=e,gr.init(),Vb.init(),zb.init(),Gb.init(),qb.init(),CV=class extends q.PeDouble{constructor(n=NaN){super(n)}destroy(){q.destroy(this)}[Symbol.dispose](){this.destroy()}},kV=class extends q.PeGCSExtent{destroy(){q.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[q.PeAngunit,q.PeDatum,q.PeGeogcs,q.PeGeogtran,q.PeObject,q.PeParameter,q.PePrimem,q.PeProjcs,q.PeSpheroid,q.PeUnit];for(const n of r)t(n.prototype,"getName",(o=>function(){return o.call(this,new Array(gr.PE_NAME_MAX))}));for(const n of[q.PeGeogtran,q.PeProjcs])t(n.prototype,"getParameters",(o=>function(){const l=new Array(gr.PE_PARM_MAX);let p=o.call(this);for(let m=0;m<l.length;m++){const v=q.getValue(p,"*");l[m]=v?q.wrapPointer(v,q.PeParameter):null,p+=Int32Array.BYTES_PER_ELEMENT}return l}));t(q.PeHorizon.prototype,"getCoord",(n=>function(o=!1){const l=this.getSize();if(!l)return null;const p=[];return uc(p,l,n.call(this),o),p})),t(q.PeGTlistExtendedEntry.prototype,"getEntries",(n=>{const o=q._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;const p=n.call(this);if(!q.compare(p,q.NULL)){l=[p];const m=this.getSteps();if(m>1){const v=q.getPointer(p);for(let _=1;_<m;_++)l.push(q.wrapPointer(v+o*_,q.PeGTlistExtendedGTs))}}return l}}));const i=q._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let l=null;const p=n.call(this);if(!q.compare(p,q.NULL)){l=[p];const m=p.getNump();if(m>1){const v=q.getPointer(p);for(let _=1;_<m;_++)l.push(q.wrapPointer(v+i*_,q.PeHorizon))}}return o.set(n,l),l};t(q.PeProjcs.prototype,"horizonGcsGenerate",s),t(q.PeProjcs.prototype,"horizonPcsGenerate",s),q.PeObject.prototype.toString=function(n=gr.PE_STR_OPTS_NONE){q.ensureCache.prepare();const o=q.getPointer(this),l=q.ensureInt8(new Array(gr.PE_BUFFER_MAX));return q.UTF8ToString(q._pe_object_to_string_ext(o,n,l))},q.PeGeogcs.prototype.destroy=function(){this.Delete(),Oo(this),this.ptr=0},q.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},q.PeProjcs.prototype.destroy=function(){this.Delete(),Oo(this),this.ptr=0},q.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Oo(e){if(!e)return;const t=q.getClass(e);if(!t)return;const r=q.getCache(t);if(!r)return;const i=q.getPointer(e);i&&delete r[i]}function U1(e,t){const r=[],i=new Array(t);for(let s=0;s<e;s++)r.push(q.ensureInt8(i));return r}function Kd(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function uc(e,t,r,i=!1){if(i)for(let s=0;s<2*t;s++)e[s]=q.getValue(r+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=q.getValue(r,"double"),e[n][1]=q.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=q.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=q._pe_getPeGTlistExtendedEntrySize()}function i(s,n,o,l,p,m){let v=null;const _=new q.PeInteger(m);try{const E=q.PeGTlistExtended.prototype.getGTlist(s,n,o,l,p,_);if((m=_.val)&&(v=[E],m>1)){const $=q.getPointer(E);for(let M=1;M<m;M++)v.push(q.wrapPointer($+t*M,q.PeGTlistExtendedEntry))}}finally{q.destroy(_)}return v}e.init=r,e.getGTlist=i})(Vb||(Vb={})),(function(e){function t(r){if(r!=null&&r.length){for(const i of r)Oo(i),i.getEntries().forEach((s=>{Oo(s);const n=s.getGeogtran();Oo(n),n.getParameters().forEach(Oo),[n.getGeogcs1(),n.getGeogcs2()].forEach((o=>{Oo(o);const l=o.getDatum();Oo(l),Oo(l.getSpheroid()),Oo(o.getPrimem()),Oo(o.getUnit())}))}));q.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t})(Sx||(Sx={})),(function(e){function t(r,i,s,n,o){q.ensureCache.prepare();const l=Kd(s),p=s===l,m=q.ensureFloat64(l);let v=0;n&&(v=q.ensureFloat64(n));const _=q._pe_geog_to_geog(q.getPointer(r),i,m,v,o);return _&&uc(s,i,m,p),_}e.geogToGeog=t})(Ex||(Ex={})),(function(e){function t(n,o,l,p,m,v,_,E){q.PeLineType.prototype.geodesic_coordinate(n,o,l,p,m,v,_,E)}function r(n,o,l,p,m,v,_,E,$){q.PeLineType.prototype.geodetic_coordinate(n,o,l,p,m,v,_,E,$)}function i(n,o,l,p,m,v,_,E,$,M){q.PeLineType.prototype.geodetic_distance(n,o,l,p,m,v,_,E,$,M)}function s(n,o,l,p,m,v,_,E,$){q.PeLineType.prototype.great_elliptic_distance(n,o,l,p,m,v,_,E,$)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=s})(Tx||(Tx={})),(function(e){function t(o,l){return q.PeMath.prototype.phi_to_eta(o,l)}function r(o,l){return q.PeMath.prototype.eta_to_phi(o,l)}function i(o,l){return q.PeMath.prototype.phi_to_phig(o,l)}function s(o,l,p){return q.PeMath.prototype.q(o,l,p)}function n(o,l){return q.PeMath.prototype.q90(o,l)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=s,e.q90=n})($x||($x={})),(function(e){const t=(m,v,_,E,$,M)=>{let k,N;switch(q.ensureCache.prepare(),m){case"dd":k=q._pe_geog_to_dd,N=gr.PE_DD_MAX;break;case"ddm":k=q._pe_geog_to_ddm,N=gr.PE_DDM_MAX;break;case"dms":k=q._pe_geog_to_dms,N=gr.PE_DMS_MAX}let U=0;v&&(U=q.getPointer(v));const G=Kd(E),W=q.ensureFloat64(G),Z=U1(_,N),ie=k(U,_,W,$,q.ensureInt32(Z));if(ie)for(let ne=0;ne<_;ne++)M[ne]=q.UTF8ToString(Z[ne]);return ie},r=(m,v,_,E,$)=>{let M;switch(q.ensureCache.prepare(),m){case"dd":M=q._pe_dd_to_geog;break;case"ddm":M=q._pe_ddm_to_geog;break;case"dms":M=q._pe_dms_to_geog}let k=0;v&&(k=q.getPointer(v));const N=E.map((Z=>q.ensureString(Z))),U=q.ensureInt32(N),G=q.ensureFloat64(new Array(2*_)),W=M(k,_,U,G);return W&&uc($,_,G),W};function i(m,v,_,E,$){return t("dms",m,v,_,E,$)}function s(m,v,_,E){return r("dms",m,v,_,E)}function n(m,v,_,E,$){return t("ddm",m,v,_,E,$)}function o(m,v,_,E){return r("ddm",m,v,_,E)}function l(m,v,_,E,$){return t("dd",m,v,_,E,$)}function p(m,v,_,E){return r("dd",m,v,_,E)}e.geogToDms=i,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=l,e.ddToGeog=p})(xx||(xx={})),(function(e){function t(){e.PE_MGRS_STYLE_NEW=q.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=q.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=q.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=q.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=q.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(s,n,o,l,p,m,v){q.ensureCache.prepare();let _=0;s&&(_=q.getPointer(s));const E=Kd(o),$=q.ensureFloat64(E),M=U1(n,gr.PE_MGRS_MAX),k=q.ensureInt32(M),N=q._pe_geog_to_mgrs_extended(_,n,$,l,p,m,k);if(N)for(let U=0;U<n;U++)v[U]=q.UTF8ToString(M[U]);return N}function i(s,n,o,l,p){q.ensureCache.prepare();let m=0;s&&(m=q.getPointer(s));const v=o.map((M=>q.ensureString(M))),_=q.ensureInt32(v),E=q.ensureFloat64(new Array(2*n)),$=q._pe_mgrs_to_geog_extended(m,n,_,l,E);return $&&uc(p,n,E),$}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i})(zb||(zb={})),(function(e){function t(i,s,n,o,l,p,m){q.ensureCache.prepare();let v=0;i&&(v=q.getPointer(i));const _=Kd(n),E=q.ensureFloat64(_),$=U1(s,gr.PE_MGRS_MAX),M=q.ensureInt32($),k=q._pe_geog_to_usng(v,s,E,o,l,p,M);if(k)for(let N=0;N<s;N++)m[N]=q.UTF8ToString($[N]);return k}function r(i,s,n,o){q.ensureCache.prepare();let l=0;i&&(l=q.getPointer(i));const p=n.map((E=>q.ensureString(E))),m=q.ensureInt32(p),v=q.ensureFloat64(new Array(2*s)),_=q._pe_usng_to_geog(l,s,m,v);return _&&uc(o,s,v),_}e.geogToUsng=t,e.usngToGeog=r})(Ix||(Ix={})),(function(e){function t(){e.PE_UTM_OPTS_NONE=q.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=q.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=q.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(s,n,o,l,p){q.ensureCache.prepare();let m=0;s&&(m=q.getPointer(s));const v=Kd(o),_=q.ensureFloat64(v),E=U1(n,gr.PE_UTM_MAX),$=q.ensureInt32(E),M=q._pe_geog_to_utm(m,n,_,l,$);if(M)for(let k=0;k<n;k++)p[k]=q.UTF8ToString(E[k]);return M}function i(s,n,o,l,p){q.ensureCache.prepare();let m=0;s&&(m=q.getPointer(s));const v=o.map((M=>q.ensureString(M))),_=q.ensureInt32(v),E=q.ensureFloat64(new Array(2*n)),$=q._pe_utm_to_geog(m,n,_,l,E);return $&&uc(p,n,E),$}e.init=t,e.geogToUtm=r,e.utmToGeog=i})(Gb||(Gb={})),(function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=q.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=q.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=q.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=q.PePCSInfo.prototype.PE_POLE_POINT}function i(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,l=null;return t.has(s)&&(l=t.get(s),l[n]&&(o=l[n])),o||(o=q.PePCSInfo.prototype.generate(s,n),l||(l=[],t.set(s,l)),l[n]=o),o}e.init=r,e.generate=i})(qb||(qb={})),(function(e){function t(){return q.PeVersion.prototype.version_string()}e.versionString=t})(Mx||(Mx={}));const goe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return bx},get PeDefs(){return gr},get PeDouble(){return CV},get PeFactory(){return _x},get PeGCSExtent(){return kV},get PeGTTransformations(){return Ex},get PeGTlistExtended(){return Vb},get PeGTlistExtendedEntry(){return Sx},get PeLineType(){return Tx},get PeMath(){return $x},get PeNotationDms(){return xx},get PeNotationMgrs(){return zb},get PeNotationUsng(){return Ix},get PeNotationUtm(){return Gb},get PePCSInfo(){return qb},get PeVersion(){return Mx},_init:RV,get _pe(){return q},isLoaded:LR,isSupported:yoe,load:MV},Symbol.toStringTag,{value:"Module"}));var qp;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(qp||(qp={}));let y;const O={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(y=2e3;y<=2045;y++)O[y]=0;for(y=2056;y<=2065;y++)O[y]=0;for(y=2067;y<=2135;y++)O[y]=0;for(y=2137;y<=2154;y++)O[y]=0;for(y=2161;y<=2170;y++)O[y]=0;for(y=2172;y<=2193;y++)O[y]=0;for(y=2195;y<=2198;y++)O[y]=0;for(y=2200;y<=2203;y++)O[y]=0;for(y=2205;y<=2217;y++)O[y]=0;for(y=2222;y<=2224;y++)O[y]=1;for(y=2225;y<=2250;y++)O[y]=2;for(y=2251;y<=2253;y++)O[y]=1;for(y=2257;y<=2264;y++)O[y]=2;for(y=2274;y<=2279;y++)O[y]=2;for(y=2280;y<=2282;y++)O[y]=1;for(y=2283;y<=2289;y++)O[y]=2;for(y=2290;y<=2292;y++)O[y]=0;for(y=2308;y<=2313;y++)O[y]=0;for(y=2315;y<=2491;y++)O[y]=0;for(y=2494;y<=2866;y++)O[y]=0;for(y=2867;y<=2869;y++)O[y]=1;for(y=2870;y<=2888;y++)O[y]=2;for(y=2891;y<=2895;y++)O[y]=2;for(y=2896;y<=2898;y++)O[y]=1;for(y=2902;y<=2908;y++)O[y]=2;for(y=2915;y<=2920;y++)O[y]=2;for(y=2921;y<=2923;y++)O[y]=1;for(y=2924;y<=2930;y++)O[y]=2;for(y=2931;y<=2962;y++)O[y]=0;for(y=2964;y<=2968;y++)O[y]=2;for(y=2969;y<=2973;y++)O[y]=0;for(y=2975;y<=2991;y++)O[y]=0;for(y=2995;y<=3051;y++)O[y]=0;for(y=3054;y<=3079;y++)O[y]=0;for(y=3081;y<=3088;y++)O[y]=0;for(y=3092;y<=3101;y++)O[y]=0;for(y=3106;y<=3138;y++)O[y]=0;for(y=3146;y<=3151;y++)O[y]=0;for(y=3153;y<=3166;y++)O[y]=0;for(y=3168;y<=3172;y++)O[y]=0;for(y=3174;y<=3203;y++)O[y]=0;for(y=3294;y<=3358;y++)O[y]=0;for(y=3367;y<=3403;y++)O[y]=0;for(y=3408;y<=3416;y++)O[y]=0;for(y=3417;y<=3438;y++)O[y]=2;for(y=3441;y<=3446;y++)O[y]=2;for(y=3447;y<=3450;y++)O[y]=0;for(y=3451;y<=3459;y++)O[y]=2;for(y=3460;y<=3478;y++)O[y]=0;for(y=3554;y<=3559;y++)O[y]=0;for(y=3560;y<=3570;y++)O[y]=2;for(y=3571;y<=3581;y++)O[y]=0;for(y=3594;y<=3597;y++)O[y]=0;for(y=3601;y<=3604;y++)O[y]=0;for(y=3637;y<=3639;y++)O[y]=0;for(y=3665;y<=3667;y++)O[y]=0;for(y=3693;y<=3695;y++)O[y]=0;for(y=3701;y<=3727;y++)O[y]=0;for(y=3728;y<=3739;y++)O[y]=2;for(y=3740;y<=3751;y++)O[y]=0;for(y=3753;y<=3760;y++)O[y]=2;for(y=3761;y<=3773;y++)O[y]=0;for(y=3775;y<=3777;y++)O[y]=0;for(y=3779;y<=3781;y++)O[y]=0;for(y=3783;y<=3785;y++)O[y]=0;for(y=3788;y<=3791;y++)O[y]=0;for(y=3797;y<=3802;y++)O[y]=0;for(y=3814;y<=3816;y++)O[y]=0;for(y=3825;y<=3829;y++)O[y]=0;for(y=3832;y<=3841;y++)O[y]=0;for(y=3844;y<=3852;y++)O[y]=0;for(y=3873;y<=3885;y++)O[y]=0;for(y=3890;y<=3893;y++)O[y]=0;for(y=3907;y<=3912;y++)O[y]=0;for(y=3942;y<=3950;y++)O[y]=0;for(y=3968;y<=3970;y++)O[y]=0;for(y=3973;y<=3976;y++)O[y]=0;for(y=3986;y<=3989;y++)O[y]=0;for(y=3994;y<=3997;y++)O[y]=0;for(y=4048;y<=4051;y++)O[y]=0;for(y=4056;y<=4063;y++)O[y]=0;for(y=4093;y<=4096;y++)O[y]=0;for(y=4390;y<=4398;y++)O[y]=0;for(y=4399;y<=4413;y++)O[y]=2;for(y=4418;y<=4433;y++)O[y]=2;for(y=4455;y<=4457;y++)O[y]=2;for(y=4484;y<=4489;y++)O[y]=0;for(y=4491;y<=4554;y++)O[y]=0;for(y=4568;y<=4589;y++)O[y]=0;for(y=4652;y<=4656;y++)O[y]=0;for(y=4766;y<=4800;y++)O[y]=0;for(y=5014;y<=5016;y++)O[y]=0;for(y=5069;y<=5072;y++)O[y]=0;for(y=5105;y<=5130;y++)O[y]=0;for(y=5167;y<=5188;y++)O[y]=0;for(y=5253;y<=5259;y++)O[y]=0;for(y=5269;y<=5275;y++)O[y]=0;for(y=5292;y<=5311;y++)O[y]=0;for(y=5329;y<=5331;y++)O[y]=0;for(y=5343;y<=5349;y++)O[y]=0;for(y=5355;y<=5357;y++)O[y]=0;for(y=5387;y<=5389;y++)O[y]=0;for(y=5459;y<=5463;y++)O[y]=0;for(y=5479;y<=5482;y++)O[y]=0;for(y=5518;y<=5520;y++)O[y]=0;for(y=5530;y<=5539;y++)O[y]=0;for(y=5550;y<=5552;y++)O[y]=0;for(y=5562;y<=5583;y++)O[y]=0;for(y=5623;y<=5625;y++)O[y]=2;for(y=5631;y<=5639;y++)O[y]=0;for(y=5649;y<=5653;y++)O[y]=0;for(y=5663;y<=5680;y++)O[y]=0;for(y=5682;y<=5685;y++)O[y]=0;for(y=5875;y<=5877;y++)O[y]=0;for(y=5896;y<=5899;y++)O[y]=0;for(y=5921;y<=5940;y++)O[y]=0;for(y=6050;y<=6125;y++)O[y]=0;for(y=6244;y<=6275;y++)O[y]=0;for(y=6328;y<=6348;y++)O[y]=0;for(y=6350;y<=6356;y++)O[y]=0;for(y=6366;y<=6372;y++)O[y]=0;for(y=6381;y<=6387;y++)O[y]=0;for(y=6393;y<=6404;y++)O[y]=0;for(y=6480;y<=6483;y++)O[y]=0;for(y=6511;y<=6514;y++)O[y]=0;for(y=6579;y<=6581;y++)O[y]=0;for(y=6619;y<=6624;y++)O[y]=0;for(y=6625;y<=6627;y++)O[y]=2;for(y=6628;y<=6632;y++)O[y]=0;for(y=6634;y<=6637;y++)O[y]=0;for(y=6669;y<=6692;y++)O[y]=0;for(y=6707;y<=6709;y++)O[y]=0;for(y=6720;y<=6723;y++)O[y]=0;for(y=6732;y<=6738;y++)O[y]=0;for(y=6931;y<=6933;y++)O[y]=0;for(y=6956;y<=6959;y++)O[y]=0;for(y=7005;y<=7007;y++)O[y]=0;for(y=7057;y<=7070;y++)O[y]=2;for(y=7074;y<=7082;y++)O[y]=0;for(y=7109;y<=7118;y++)O[y]=0;for(y=7119;y<=7127;y++)O[y]=1;for(y=7374;y<=7376;y++)O[y]=0;for(y=7528;y<=7586;y++)O[y]=0;for(y=7587;y<=7645;y++)O[y]=2;for(y=7692;y<=7696;y++)O[y]=0;for(y=7755;y<=7787;y++)O[y]=0;for(y=7791;y<=7795;y++)O[y]=0;for(y=7799;y<=7801;y++)O[y]=0;for(y=7803;y<=7805;y++)O[y]=0;for(y=7825;y<=7831;y++)O[y]=0;for(y=7845;y<=7859;y++)O[y]=0;for(y=8013;y<=8032;y++)O[y]=0;for(y=8065;y<=8068;y++)O[y]=1;for(y=8518;y<=8529;y++)O[y]=2;for(y=8533;y<=8536;y++)O[y]=2;for(y=8538;y<=8540;y++)O[y]=2;for(y=8677;y<=8679;y++)O[y]=0;for(y=8836;y<=8840;y++)O[y]=0;for(y=8857;y<=8859;y++)O[y]=0;for(y=8908;y<=8910;y++)O[y]=0;for(y=9154;y<=9159;y++)O[y]=0;for(y=9205;y<=9218;y++)O[y]=0;for(y=9271;y<=9273;y++)O[y]=0;for(y=9295;y<=9297;y++)O[y]=0;for(y=9356;y<=9360;y++)O[y]=0;for(y=9404;y<=9407;y++)O[y]=0;for(y=9476;y<=9482;y++)O[y]=0;for(y=9487;y<=9494;y++)O[y]=0;for(y=9697;y<=9699;y++)O[y]=0;for(y=9821;y<=9865;y++)O[y]=0;for(y=10285;y<=10291;y++)O[y]=0;for(y=10314;y<=10317;y++)O[y]=0;for(y=10448;y<=10465;y++)O[y]=0;for(y=10726;y<=10729;y++)O[y]=0;for(y=10731;y<=10733;y++)O[y]=0;for(y=11114;y<=11118;y++)O[y]=0;for(y=20004;y<=20032;y++)O[y]=0;for(y=20047;y<=20049;y++)O[y]=0;for(y=20062;y<=20092;y++)O[y]=0;for(y=20135;y<=20138;y++)O[y]=0;for(y=20248;y<=20258;y++)O[y]=0;for(y=20348;y<=20358;y++)O[y]=0;for(y=20436;y<=20440;y++)O[y]=0;for(y=20822;y<=20824;y++)O[y]=0;for(y=20904;y<=20932;y++)O[y]=0;for(y=20934;y<=20936;y++)O[y]=0;for(y=21004;y<=21032;y++)O[y]=0;for(y=21035;y<=21037;y++)O[y]=0;for(y=21095;y<=21097;y++)O[y]=0;for(y=21148;y<=21150;y++)O[y]=0;for(y=21207;y<=21264;y++)O[y]=0;for(y=21307;y<=21364;y++)O[y]=0;for(y=21413;y<=21423;y++)O[y]=0;for(y=21453;y<=21463;y++)O[y]=0;for(y=21473;y<=21483;y++)O[y]=0;for(y=21780;y<=21782;y++)O[y]=0;for(y=21891;y<=21894;y++)O[y]=0;for(y=21896;y<=21899;y++)O[y]=0;for(y=22171;y<=22177;y++)O[y]=0;for(y=22181;y<=22187;y++)O[y]=0;for(y=22191;y<=22197;y++)O[y]=0;for(y=22207;y<=22222;y++)O[y]=0;for(y=22229;y<=22232;y++)O[y]=0;for(y=22234;y<=22236;y++)O[y]=0;for(y=22243;y<=22250;y++)O[y]=0;for(y=22262;y<=22265;y++)O[y]=0;for(y=22307;y<=22322;y++)O[y]=0;for(y=22348;y<=22357;y++)O[y]=0;for(y=22407;y<=22422;y++)O[y]=0;for(y=22462;y<=22465;y++)O[y]=0;for(y=22521;y<=22525;y++)O[y]=0;for(y=22607;y<=22622;y++)O[y]=0;for(y=22641;y<=22646;y++)O[y]=0;for(y=22648;y<=22657;y++)O[y]=0;for(y=22707;y<=22722;y++)O[y]=0;for(y=22762;y<=22765;y++)O[y]=0;for(y=22807;y<=22822;y++)O[y]=0;for(y=22991;y<=22994;y++)O[y]=0;for(y=23028;y<=23038;y++)O[y]=0;for(y=23301;y<=23333;y++)O[y]=2;for(y=23830;y<=23853;y++)O[y]=0;for(y=23866;y<=23872;y++)O[y]=0;for(y=23877;y<=23884;y++)O[y]=0;for(y=23886;y<=23894;y++)O[y]=0;for(y=23946;y<=23948;y++)O[y]=0;for(y=24311;y<=24313;y++)O[y]=0;for(y=24342;y<=24347;y++)O[y]=0;for(y=24370;y<=24374;y++)O[y]=10;for(y=24375;y<=24381;y++)O[y]=0;for(y=24718;y<=24721;y++)O[y]=0;for(y=24817;y<=24821;y++)O[y]=0;for(y=24877;y<=24882;y++)O[y]=0;for(y=24891;y<=24893;y++)O[y]=0;for(y=25391;y<=25395;y++)O[y]=0;for(y=25828;y<=25838;y++)O[y]=0;for(y=26191;y<=26195;y++)O[y]=0;for(y=26391;y<=26393;y++)O[y]=0;for(y=26701;y<=26722;y++)O[y]=0;for(y=26729;y<=26799;y++)O[y]=2;for(y=26801;y<=26803;y++)O[y]=2;for(y=26811;y<=26813;y++)O[y]=2;for(y=26847;y<=26870;y++)O[y]=2;for(y=26891;y<=26899;y++)O[y]=0;for(y=26901;y<=26923;y++)O[y]=0;for(y=26929;y<=26946;y++)O[y]=0;for(y=26948;y<=26998;y++)O[y]=0;for(y=27037;y<=27040;y++)O[y]=0;for(y=27205;y<=27232;y++)O[y]=0;for(y=27258;y<=27260;y++)O[y]=0;for(y=27391;y<=27398;y++)O[y]=0;for(y=27561;y<=27564;y++)O[y]=0;for(y=27571;y<=27574;y++)O[y]=0;for(y=27581;y<=27584;y++)O[y]=0;for(y=27591;y<=27594;y++)O[y]=0;for(y=27700;y<=27707;y++)O[y]=0;for(y=28191;y<=28193;y++)O[y]=0;for(y=28348;y<=28358;y++)O[y]=0;for(y=28402;y<=28432;y++)O[y]=0;for(y=28462;y<=28492;y++)O[y]=0;for(y=29118;y<=29122;y++)O[y]=0;for(y=29168;y<=29172;y++)O[y]=0;for(y=29177;y<=29185;y++)O[y]=0;for(y=29187;y<=29195;y++)O[y]=0;for(y=29900;y<=29903;y++)O[y]=0;for(y=30161;y<=30179;y++)O[y]=0;for(y=30491;y<=30494;y++)O[y]=0;for(y=30729;y<=30732;y++)O[y]=0;for(y=31251;y<=31259;y++)O[y]=0;for(y=31265;y<=31268;y++)O[y]=0;for(y=31275;y<=31279;y++)O[y]=0;for(y=31281;y<=31297;y++)O[y]=0;for(y=31461;y<=31469;y++)O[y]=0;for(y=31491;y<=31495;y++)O[y]=0;for(y=31917;y<=31922;y++)O[y]=0;for(y=31965;y<=32e3;y++)O[y]=0;for(y=32001;y<=32003;y++)O[y]=2;for(y=32005;y<=32031;y++)O[y]=2;for(y=32033;y<=32060;y++)O[y]=2;for(y=32064;y<=32067;y++)O[y]=2;for(y=32074;y<=32077;y++)O[y]=2;for(y=32081;y<=32086;y++)O[y]=0;for(y=32107;y<=32130;y++)O[y]=0;for(y=32133;y<=32159;y++)O[y]=0;for(y=32164;y<=32167;y++)O[y]=2;for(y=32180;y<=32199;y++)O[y]=0;for(y=32201;y<=32260;y++)O[y]=0;for(y=32301;y<=32360;y++)O[y]=0;for(y=32401;y<=32460;y++)O[y]=0;for(y=32501;y<=32560;y++)O[y]=0;for(y=32601;y<=32662;y++)O[y]=0;for(y=32664;y<=32667;y++)O[y]=2;for(y=32701;y<=32761;y++)O[y]=0;for(y=53001;y<=53004;y++)O[y]=0;for(y=53008;y<=53019;y++)O[y]=0;for(y=53021;y<=53032;y++)O[y]=0;for(y=53034;y<=53037;y++)O[y]=0;for(y=53042;y<=53046;y++)O[y]=0;for(y=53074;y<=53080;y++)O[y]=0;for(y=54001;y<=54004;y++)O[y]=0;for(y=54008;y<=54019;y++)O[y]=0;for(y=54021;y<=54032;y++)O[y]=0;for(y=54034;y<=54037;y++)O[y]=0;for(y=54042;y<=54046;y++)O[y]=0;for(y=54048;y<=54053;y++)O[y]=0;for(y=54074;y<=54080;y++)O[y]=0;for(y=54090;y<=54096;y++)O[y]=0;for(y=54098;y<=54101;y++)O[y]=0;for(y=65161;y<=65163;y++)O[y]=0;for(y=102001;y<=102040;y++)O[y]=0;for(y=102042;y<=102063;y++)O[y]=0;for(y=102065;y<=102067;y++)O[y]=0;for(y=102070;y<=102117;y++)O[y]=0;for(y=102122;y<=102216;y++)O[y]=0;for(y=102221;y<=102377;y++)O[y]=0;for(y=102382;y<=102388;y++)O[y]=0;for(y=102389;y<=102398;y++)O[y]=2;for(y=102399;y<=102444;y++)O[y]=0;for(y=102445;y<=102447;y++)O[y]=2;for(y=102448;y<=102458;y++)O[y]=0;for(y=102459;y<=102468;y++)O[y]=2;for(y=102469;y<=102499;y++)O[y]=0;for(y=102500;y<=102519;y++)O[y]=1;for(y=102520;y<=102524;y++)O[y]=0;for(y=102525;y<=102529;y++)O[y]=2;for(y=102530;y<=102588;y++)O[y]=0;for(y=102590;y<=102598;y++)O[y]=0;for(y=102601;y<=102603;y++)O[y]=0;for(y=102605;y<=102628;y++)O[y]=0;for(y=102629;y<=102646;y++)O[y]=2;for(y=102648;y<=102700;y++)O[y]=2;for(y=102701;y<=102703;y++)O[y]=0;for(y=102707;y<=102730;y++)O[y]=2;for(y=102733;y<=102758;y++)O[y]=2;for(y=102767;y<=102900;y++)O[y]=0;for(y=102901;y<=102933;y++)O[y]=2;for(y=102934;y<=102950;y++)O[y]=13;for(y=102951;y<=102963;y++)O[y]=0;for(y=102965;y<=102969;y++)O[y]=0;for(y=102971;y<=102973;y++)O[y]=0;for(y=102975;y<=102989;y++)O[y]=0;for(y=102990;y<=102992;y++)O[y]=1;for(y=102997;y<=103002;y++)O[y]=0;for(y=103003;y<=103008;y++)O[y]=2;for(y=103009;y<=103011;y++)O[y]=0;for(y=103012;y<=103014;y++)O[y]=2;for(y=103019;y<=103021;y++)O[y]=0;for(y=103022;y<=103024;y++)O[y]=2;for(y=103029;y<=103031;y++)O[y]=0;for(y=103032;y<=103034;y++)O[y]=2;for(y=103065;y<=103068;y++)O[y]=0;for(y=103074;y<=103076;y++)O[y]=0;for(y=103077;y<=103079;y++)O[y]=1;for(y=103080;y<=103082;y++)O[y]=0;for(y=103083;y<=103085;y++)O[y]=2;for(y=103090;y<=103093;y++)O[y]=0;for(y=103097;y<=103099;y++)O[y]=0;for(y=103100;y<=103102;y++)O[y]=2;for(y=103107;y<=103109;y++)O[y]=0;for(y=103110;y<=103112;y++)O[y]=2;for(y=103113;y<=103116;y++)O[y]=0;for(y=103117;y<=103120;y++)O[y]=2;for(y=103153;y<=103157;y++)O[y]=0;for(y=103158;y<=103162;y++)O[y]=2;for(y=103163;y<=103165;y++)O[y]=0;for(y=103166;y<=103168;y++)O[y]=1;for(y=103169;y<=103171;y++)O[y]=2;for(y=103186;y<=103188;y++)O[y]=0;for(y=103189;y<=103191;y++)O[y]=2;for(y=103192;y<=103195;y++)O[y]=0;for(y=103196;y<=103199;y++)O[y]=2;for(y=103200;y<=103224;y++)O[y]=0;for(y=103225;y<=103227;y++)O[y]=1;for(y=103232;y<=103237;y++)O[y]=0;for(y=103238;y<=103243;y++)O[y]=2;for(y=103244;y<=103246;y++)O[y]=0;for(y=103247;y<=103249;y++)O[y]=2;for(y=103254;y<=103256;y++)O[y]=0;for(y=103257;y<=103259;y++)O[y]=2;for(y=103264;y<=103266;y++)O[y]=0;for(y=103267;y<=103269;y++)O[y]=2;for(y=103300;y<=103375;y++)O[y]=0;for(y=103381;y<=103383;y++)O[y]=0;for(y=103384;y<=103386;y++)O[y]=1;for(y=103387;y<=103389;y++)O[y]=0;for(y=103390;y<=103392;y++)O[y]=2;for(y=103397;y<=103399;y++)O[y]=0;for(y=103400;y<=103471;y++)O[y]=2;for(y=103476;y<=103478;y++)O[y]=0;for(y=103479;y<=103481;y++)O[y]=2;for(y=103486;y<=103488;y++)O[y]=0;for(y=103489;y<=103491;y++)O[y]=2;for(y=103492;y<=103495;y++)O[y]=0;for(y=103496;y<=103499;y++)O[y]=2;for(y=103528;y<=103543;y++)O[y]=0;for(y=103544;y<=103548;y++)O[y]=2;for(y=103549;y<=103551;y++)O[y]=0;for(y=103552;y<=103554;y++)O[y]=1;for(y=103555;y<=103557;y++)O[y]=2;for(y=103558;y<=103560;y++)O[y]=0;for(y=103571;y<=103573;y++)O[y]=0;for(y=103574;y<=103576;y++)O[y]=2;for(y=103577;y<=103580;y++)O[y]=0;for(y=103581;y<=103583;y++)O[y]=2;for(y=103595;y<=103694;y++)O[y]=0;for(y=103696;y<=103699;y++)O[y]=0;for(y=103700;y<=103793;y++)O[y]=2;for(y=103794;y<=103890;y++)O[y]=0;for(y=103891;y<=103896;y++)O[y]=2;for(y=103900;y<=103971;y++)O[y]=2;for(y=103972;y<=103977;y++)O[y]=0;for(y=112e3;y<=112101;y++)O[y]=0;const OV=[102100,102113,3857,3785,900913],voe=[104905,104971],woe=[4326,...OV,...voe],rv=[-20037508342788905e-9,20037508342788905e-9],Cx=[-20037508342787e-6,20037508342787e-6],QT={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:rv,origin:Cx,dx:1e-5},PV={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:rv,origin:Cx,dx:1e-5},102100:QT,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:rv,origin:Cx,dx:1e-5},3857:QT,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:QT};function Jr(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||Za(e)&&Za(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const l=t.latestWkid;return l!=null&&r===l}let s,n;return e.wkt2&&t.wkt2?(s=e.wkt2,n=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,n=t.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function Is(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&PV[t]||null}function Hb(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function X0(e){if(!Tn(e))return!1;const{wkid:t}=e;if(t)return O[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function boe(e){return!(NV(e)||LV(e))}function Hp(e){return(e==null?void 0:e.wkid)===4326}function Q4e(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function uN(e){return(e==null?void 0:e.wkid)===qp.CGCS2000}function Za(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&OV.includes(t)}function _oe(e){return(e==null?void 0:e.wkid)===32662}function xS(e){return e===qp.GCSMARS2000||e===qp.GCSMARS2000_SPHERE}function NV(e){return xS(e==null?void 0:e.wkid)}function IS(e){return e===qp.GCSMOON2000}function LV(e){return IS(e==null?void 0:e.wkid)}function Soe(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&woe.includes(t)}function Tn(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const DV={wkid:4326,wkt:eh(PV[4326].wkTemplate,{Central_Meridian:"0.0"})},FV={wkid:102100,latestWkid:3857},Eoe={wkid:32662};function DR(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Toe=DR(Ir),FR=DR(Ba),jR=DR(zc),$oe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Ir.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},xoe=FR.wkt.toUpperCase(),Ioe=jR.wkt.toUpperCase();function Moe(e){if(e!=null&&Tn(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(xS(t))return Ba;const i=r==null?void 0:r.toUpperCase();if(r&&i===xoe)return Ba;if(IS(t)||i&&i===Ioe)return zc}return Ir}function J4e(e){return xS(e)?Ba:IS(e)?zc:Ir}function Wb(e){return Jr(e,Toe)}function Gc(e){return Wb(e)||Jr(e,FR)||Jr(e,jR)}const jV=39.37,Coe=Ir.radius*Math.PI/200,BV=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,w0=O,UV=/UNIT\[([^\]]+)]/i,koe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),Roe=si()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),vo=e=>e*e,Iu=e=>e*e*e,iv={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:vo(.001)},"square-centimeters":{inBaseUnits:vo(.01)},"square-decimeters":{inBaseUnits:vo(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:vo(1e3)},"square-inches":{inBaseUnits:vo(.0254)},"square-feet":{inBaseUnits:vo(.3048)},"square-yards":{inBaseUnits:vo(.9144)},"square-miles":{inBaseUnits:vo(1609.344)},"square-nautical-miles":{inBaseUnits:vo(1852)},"square-us-feet":{inBaseUnits:vo(1200/3937)},acres:{inBaseUnits:.0015625*vo(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Iu(.001)},"cubic-centimeters":{inBaseUnits:1e3*Iu(.01)},"cubic-decimeters":{inBaseUnits:1e3*Iu(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Iu(1e3)},"cubic-inches":{inBaseUnits:1e3*Iu(.0254)},"cubic-feet":{inBaseUnits:1e3*Iu(.3048)},"cubic-yards":{inBaseUnits:1e3*Iu(.9144)},"cubic-miles":{inBaseUnits:1e3*Iu(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Ooe=(()=>{const e={};for(const t in iv)for(const r in iv[t].units)e[r]=t;return e})();function Poe(e,t,r){return e*iv[r].units[t].inBaseUnits}function Noe(e,t,r){return e/iv[r].units[t].inBaseUnits}const Loe=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],Doe=["metric","imperial"],VV=[...Doe,...Loe],Foe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function kx(e){const t=Ooe[e];if(!t)throw new Error("unknown type");return t}function cN(e,t=null){return t=t||kx(e),iv[t].baseUnit===e}function Pr(e,t,r){if(t===r)return e;const i=kx(t);if(i!==kx(r))throw new Error("incompatible units");const s=cN(t,i)?e:Poe(e,t,i);return cN(r,i)?s:Noe(s,r,i)}function Z4e(e,t,r,i=!1){if(!i&&X0(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=oh(t);return s!==r&&(e=s?Pr(e,s,r):Pr(e*=po(t),"meters",r)),e}function Y4e(e,t,r,i=!1){if(!i&&X0(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=oh(r);return t!==s&&(e=s?Pr(e,t,s):Pr(e,t,"meters")/po(r)),e}function joe(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function K4e(e){return joe(e)}function X4e(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function eOe(e,t){const r=Pr(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function tOe(e,t){const r=Pr(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function rOe(e,t){const r=Pr(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function iOe(e,t){const r=Pr(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function sOe(e,t){const r=Pr(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function nOe(e,t){const r=Pr(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function Boe(e,t,r){return Pr(e,t,"meters")/(r*Math.PI/180)}function BR(e){return Roe.fromJSON(e.toLowerCase())||null}function Qb(e){if(e!=null&&!boe(e))return 1;const t=po(e);return t>1e5?1:t}function zV(e){return po(e)>=Moe(e).metersPerDegree?"meters":oh(e)}function po(e,t=Ir.metersPerDegree){return Uoe(e,!0)??t}function Uoe(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let s=null;if(r){if(xS(r))return Ba.metersPerDegree;if(IS(r))return zc.metersPerDegree;s=w0.values[w0[r]],!s&&t&&koe.has(r)&&(s=Coe)}else i&&(HV(i)?s=dN(BV.exec(i),s):qV(i)&&(s=dN(UV.exec(i),s)));return s}function oOe(e){return X0(e)?1:po(e)}function dN(e,t){return e!=null&&e[1]?GV(e[1]):t}function GV(e){return parseFloat(e.split(",")[1])}function oh(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=w0.units[w0[t]];else if(r){const s=HV(r)?BV:qV(r)?UV:null;if(s){const n=s.exec(r);n!=null&&n[1]&&(i=zoe(n[1]))}}return i!=null?BR(i):null}function aOe(e){const t=oh(e);return t!=null&&VV.includes(t)?t:null}function lOe(e){const t=zV(e);return t!=null&&VV.includes(t)?t:null}function uOe(e){const t=oh(e);return t==null?null:Foe.get(t)}function qV(e){return/^GEOCCS/i.test(e)}function HV(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const Voe=1e-7;function zoe(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!BR(r)){const i=GV(e);r=null;const s=w0.values;for(let n=0;n<s.length;++n)if(Math.abs(i-s[n])<Voe){r=w0.units[n];break}}return r}function cOe(e){const t=oh(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const Goe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},qoe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Hoe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Woe=si()(Goe),Qoe=si()(qoe),dOe=si()(Hoe);var oa,La;let Ce=(La=class extends ee{static fromJSON(t){if(!t)return null;if((t==null?void 0:t.wkid)===102100)return oa.WebMercator;if((t==null?void 0:t.wkid)===4326)return oa.WGS84;const r=new oa;return r.read(t),r}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return Hp(this)}get isWebMercator(){return Za(this)}get isGeographic(){return X0(this)}get isWrappable(){return Soe(this)}get metersPerUnit(){return po(this)}get unit(){return oh(this)||(this.isGeographic?"degrees":null)}writeWkt(t,r){this.wkid||(r.wkt=t)}clone(){if(this===oa.WGS84)return new oa(DV);if(this===oa.WebMercator)return new oa(FV);const t=new oa;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=H(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:r,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:s}=t.imageCoordinateSystem,n=this.imageCoordinateSystem;return r==null||s?JSON.stringify(n)===JSON.stringify(t.imageCoordinateSystem):i?n.id===r&&n.referenceServiceName===i:n.id===r}return Jr(this,t)}toJSON(t){return this.write(void 0,t)}},oa=La,La.GCS_NAD_1927=null,La.WGS84=null,La.WebMercator=null,La.PlateCarree=null,La);a([A({readOnly:!0})],Ce.prototype,"isWGS84",null),a([A({readOnly:!0})],Ce.prototype,"isWebMercator",null),a([A({readOnly:!0})],Ce.prototype,"isGeographic",null),a([A({readOnly:!0})],Ce.prototype,"isWrappable",null),a([A({type:Et,json:{write:!0}})],Ce.prototype,"latestWkid",void 0),a([A({readOnly:!0})],Ce.prototype,"metersPerUnit",null),a([A({readOnly:!0})],Ce.prototype,"unit",null),a([A({type:Et,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Ce.prototype,"wkid",void 0),a([A({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Ce.prototype,"wkt",void 0),a([ye("wkt"),ye("web-scene","wkt")],Ce.prototype,"writeWkt",null),a([A({type:String,json:{write:!1}})],Ce.prototype,"wkt2",void 0),a([A({type:Et,json:{write:!0}})],Ce.prototype,"vcsWkid",void 0),a([A({type:Et,json:{write:!0}})],Ce.prototype,"latestVcsWkid",void 0),a([A()],Ce.prototype,"imageCoordinateSystem",void 0),Ce=oa=a([P("esri.geometry.SpatialReference")],Ce),Ce.prototype.toJSON.isDefaultToJSON=!0,Ce.GCS_NAD_1927=je.freeze(new Ce({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Ce.WGS84=je.freeze(new Ce(DV)),Ce.WebMercator=je.freeze(new Ce(FV)),Ce.PlateCarree=je.freeze(new Ce(Eoe));let Ci=class extends ee{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ce.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof Ce)return t;if(t!=null){const i=new Ce;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};a([A()],Ci.prototype,"type",void 0),a([A({readOnly:!0})],Ci.prototype,"cache",null),a([A({readOnly:!0})],Ci.prototype,"extent",null),a([A({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ci.prototype,"hasM",void 0),a([A({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ci.prototype,"hasZ",void 0),a([A({type:Ce,json:{write:!0},value:Ce.WGS84})],Ci.prototype,"spatialReference",void 0),a([pe("spatialReference")],Ci.prototype,"readSpatialReference",null),Ci=a([P("esri.geometry.Geometry")],Ci);function b0(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new Q("internal:mesh","Mesh geometries are not supported for this operation")}function Joe(e){e.forEach(b0)}const Zoe=57.29577951308232,Yoe=.017453292519943;function pN(e){return e*Zoe}function hN(e){return e*Yoe}function hOe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Ir.radius))}function Rx(e){return e.wkid!=null||e.wkt!=null}const JT=[0,0];function Jb(e,t,r,i,s){const n=e,o=s;if(o.spatialReference=r,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,JT,i);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,JT,i),[o.xmax,o.ymax]=t(n.xmax,n.ymax,JT,i);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const l="paths"in n?n.paths:n.rings,p=[];let m;for(let v=0;v<l.length;v++){const _=l[v];m=[],p.push(m);for(let E=0;E<_.length;E++)m.push(t(_[E][0],_[E][1],[0,0],i)),_[E].length>2&&m[E].push(_[E][2]),_[E].length>3&&m[E].push(_[E][3])}"paths"in o?o.paths=p:o.rings=p}else if("points"in n&&"points"in o){const l=n.points,p=[];for(let m=0;m<l.length;m++)p[m]=t(l[m][0],l[m][1],[0,0],i),l[m].length>2&&p[m].push(l[m][2]),l[m].length>3&&p[m].push(l[m][3]);o.points=p}return s}function s2(e,t){const r=e&&(Rx(e)?e:e.spatialReference),i=t&&(Rx(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!Jr(i,r)||Za(i)&&Hp(r)||Za(r)&&Hp(i))}function MS(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(Rx(t)?t:t.spatialReference);return s2(r,i)?Jr(r,i)?H(e):Za(i)?Jb(e,LA,Ce.WebMercator,!1,H(e)):Hp(i)?Jb(e,CS,Ce.WGS84,!1,H(e)):null:null}function LA(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=hN(t);return r[0]=hN(e)*Ir.radius,r[1]=Ir.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function CS(e,t,r=[0,0],i=!1){if(e===rv[0])r[0]=-180;else if(e===rv[1])r[0]=180;else{const s=pN(e/Ir.radius);r[0]=i?s:s-360*Math.floor((s+180)/360)}return r[1]=pN(Math.PI/2-2*Math.atan(Math.exp(-t/Ir.radius))),r}function Rc(e,t=!1,r=H(e)){return b0(e),b0(r),Jb(e,LA,Ce.WebMercator,t,r)}function DA(e,t=!1,r=H(e)){return b0(e),b0(r),Jb(e,CS,Ce.WGS84,t,r)}function WV(e,t){const r=e.x-t.x,i=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+s*s)}function Koe(e){var t;return((t=QV(e,JV))==null?void 0:t[0])??null}function Xoe(e){var t;return((t=QV(e,JV))==null?void 0:t[1])??null}function QV({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(Za(r))return CS(e,t,i);if(X0(r))return i[0]=e,i[1]=t,i}return null}const JV=[0,0];var n2;const ZT=[0,0];function AN(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Je=n2=class extends Ci{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",je.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],r=n[2],i=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,r=n.z,i=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Ce(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)de.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)de.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&(s!=null&&s.isWebMercator)){const l=LA(n.longitude,n.latitude,ZT);e=l[0],t=l[1]}}}else AN(r)?(s=r,r=null):AN(i)&&(s=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?de.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&de.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Xoe(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",LA(r,e,ZT)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return Koe(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",LA(e,t,ZT)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new n2;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return n2.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:s,spatialReference:n}=this,{z:o,m:l}=e;let{x:p,y:m,spatialReference:v}=e;if(!n.equals(v))if(n.isWebMercator&&v.isWGS84)[p,m]=LA(p,m),v=n;else{if(!n.isWGS84||!v.isWebMercator)return!1;[p,m]=CS(p,m),v=n}return t===p&&r===m&&i===o&&s===l&&n.wkid===v.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=Is(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,s=2*i;let n;return t>i?(n=Math.ceil(Math.abs(t-i)/s),t-=n*s):t<r&&(n=Math.ceil(Math.abs(t-r)/s),t+=n*s),this._set("x",t),this}distance(e){return WV(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};a([A({readOnly:!0})],Je.prototype,"cache",null),a([A({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Je.prototype,"hasM",null),a([A({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Je.prototype,"hasZ",null),a([A({type:Number})],Je.prototype,"latitude",null),a([A({type:Number})],Je.prototype,"longitude",null),a([A({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ft((e=>isNaN(e)?e:bs(e)))],Je.prototype,"x",void 0),a([ye("x")],Je.prototype,"writeX",null),a([pe("x")],Je.prototype,"readX",null),a([A({type:Number,json:{write:!0}})],Je.prototype,"y",void 0),a([A({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Je.prototype,"z",void 0),a([A({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Je.prototype,"m",void 0),Je=n2=a([P("esri.geometry.Point")],Je),Je.prototype.toJSON.isDefaultToJSON=!0;const YT=[0,0];function Jv(e,t){return t!=null&&As(e,t.x,t.y,t.z)}function AOe(e,t){var r;if(!((r=t.points)!=null&&r.length))return!1;for(const i of t.points)if(!_0(e,i))return!1;return!0}function eae(e,t){const{xmin:r,ymin:i,zmin:s,xmax:n,ymax:o,zmax:l}=t;return e.hasZ&&t.hasZ?As(e,r,i,s)&&As(e,r,o,s)&&As(e,n,o,s)&&As(e,n,i,s)&&As(e,r,i,l)&&As(e,r,o,l)&&As(e,n,o,l)&&As(e,n,i,l):As(e,r,i)&&As(e,r,o)&&As(e,n,o)&&As(e,n,i)}function _0(e,t){return As(e,t[0],t[1])}function tae(e,t){return As(e,t[0],t[1],t[2])}function As(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function UR(e,t){return YT[1]=t.y,YT[0]=t.x,rae(e,YT)}function rae(e,t){return VR(e.rings,t)}function VR(e,t){if(!e)return!1;if(iae(e))return fN(!1,e,t);let r=!1;for(let i=0,s=e.length;i<s;i++)r=fN(r,e[i],t);return r}function iae(e){return!Array.isArray(e[0][0])}function fN(e,t,r){const[i,s]=r;let n=e,o=0;for(let l=0,p=t.length;l<p;l++){o++,o===p&&(o=0);const[m,v]=t[l],[_,E]=t[o];(v<s&&E>=s||E<s&&v>=s)&&m+(s-v)/(E-v)*(_-m)<i&&(n=!n)}return n}function sae(e,t){return Jv(e,t)}function nae(e,t){const r=e.hasZ&&t.hasZ;let i,s,n;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function oae(e,t){const{points:r,hasZ:i}=t,s=i?tae:_0;for(const n of r)if(s(e,n))return!0;return!1}const Wp=[0,0],Qp=[0,0],Jp=[0,0],Zp=[0,0],aae=[Wp,Qp,Jp,Zp],ZV=[[Jp,Wp],[Wp,Qp],[Qp,Zp],[Zp,Jp]];function lae(e,t){return uae(e,t.rings)}function uae(e,t){Wp[0]=e.xmin,Wp[1]=e.ymax,Qp[0]=e.xmax,Qp[1]=e.ymax,Jp[0]=e.xmin,Jp[1]=e.ymin,Zp[0]=e.xmax,Zp[1]=e.ymin;for(const r of aae)if(VR(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(_0(e,i))return!0;for(let s=1;s<r.length;s++){const n=r[s];if(_0(e,n)||YV(i,n,ZV))return!0;i=n}}return!1}function cae(e,t){Wp[0]=e.xmin,Wp[1]=e.ymax,Qp[0]=e.xmax,Qp[1]=e.ymax,Jp[0]=e.xmin,Jp[1]=e.ymin,Zp[0]=e.xmax,Zp[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let s=i[0];if(_0(e,s))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(_0(e,o)||YV(s,o,ZV))return!0;s=o}}return!1}const _i=[0,0];function dae(e){for(let t=0;t<e.length;t++){const r=e[t];for(let s=0;s<r.length-1;s++){const n=r[s],o=r[s+1];for(let l=t+1;l<e.length;l++)for(let p=0;p<e[l].length-1;p++){const m=e[l][p],v=e[l][p+1];if(Ox(n,o,m,v,_i)&&!(_i[0]===n[0]&&_i[1]===n[1]||_i[0]===m[0]&&_i[1]===m[1]||_i[0]===o[0]&&_i[1]===o[1]||_i[0]===v[0]&&_i[1]===v[1]))return!0}}const i=r.length;if(!(i<=4))for(let s=0;s<i-3;s++){let n=i-1;s===0&&(n=i-2);const o=r[s],l=r[s+1];for(let p=s+2;p<n;p++){const m=r[p],v=r[p+1];if(Ox(o,l,m,v,_i)&&!(_i[0]===o[0]&&_i[1]===o[1]||_i[0]===m[0]&&_i[1]===m[1]||_i[0]===l[0]&&_i[1]===l[1]||_i[0]===v[0]&&_i[1]===v[1]))return!0}}}return!1}function YV(e,t,r){for(let i=0;i<r.length;i++)if(Ox(e,t,r[i][0],r[i][1]))return!0;return!1}function Ox(e,t,r,i,s){const[n,o]=e,[l,p]=t,[m,v]=r,[_,E]=i,$=_-m,M=n-m,k=l-n,N=E-v,U=o-v,G=p-o,W=N*k-$*G;if(W===0)return!1;const Z=($*U-N*M)/W,ie=(k*U-G*M)/W;return Z>=0&&Z<=1&&ie>=0&&ie<=1&&(s&&(s[0]=n+Z*(l-n),s[1]=o+Z*(p-o)),!0)}function pae(e){switch(e){case"esriGeometryEnvelope":case"extent":return nae;case"esriGeometryMultipoint":case"multipoint":return oae;case"esriGeometryPoint":case"point":return sae;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return lae;case"esriGeometryPolyline":case"polyline":return cae}}var $o;function hae(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Mu(e,t,r){return t==null?r:r==null?t:e(t,r)}let At=$o=class extends Ci{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,s){return hae(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Ce.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:s??Ce.WGS84}}static fromPoint(e){return new $o({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Je({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new $o;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&s2(t,r)&&(e=t.isWebMercator?Rc(e):DA(e,!0)),e.type==="point"?Jv(this,e):e.type==="extent"&&eae(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&s2(t,r)&&(e=t.isWebMercator?Rc(e):DA(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!Jr(t,r)&&s2(t,r)&&(e=t.isWebMercator?Rc(e):DA(e,!0)),pae(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Mu(Math.min,this.zmin,e.zmin),this.zmax=Mu(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Mu(Math.min,this.mmin,e.mmin),this.mmax=Mu(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Mu(Math.max,this.zmin,e.zmin),this.zmax=Mu(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Mu(Math.max,this.mmin,e.mmin),this.mmax=Mu(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Is(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?DA(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=KT(i.x,e).x),this.spatialReference=new Ce(eh((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,s=this.xmin,n=this.xmax;return s>=r&&s<=i&&n>=r&&n<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const s=r??Is(i);if(s==null)return this;const n=this._getParts(s).map((p=>p.extent));if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return n;let o=!0,l=!0;return n.forEach((p=>{p.hasZ||(o=!1),p.hasM||(l=!1)})),{rings:n.map((p=>{const m=[[p.xmin,p.ymin],[p.xmin,p.ymax],[p.xmax,p.ymax],[p.xmax,p.ymin],[p.xmin,p.ymin]];if(o){const v=(p.zmax-p.zmin)/2;for(let _=0;_<m.length;_++)m[_].push(v)}if(l){const v=(p.mmax-p.mmin)/2;for(let _=0;_<m.length;_++)m[_].push(v)}return m})),hasZ:o,hasM:l,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,l=this.width,p=this.xmin,m=this.xmax;let v;e=e||Is(o);const[_,E]=e.valid;v=KT(this.xmin,e);const $=v.x,M=v.frameId;v=KT(this.xmax,e);const k=v.x,N=v.frameId,U=$===k&&l>0;if(l>2*E){const G=new $o(p<m?$:k,s,E,n,o),W=new $o(_,s,p<m?k:$,n,o),Z=new $o(0,s,E,n,o),ie=new $o(_,s,0,n,o),ne=[],ge=[];G.contains(Z)&&ne.push(M),G.contains(ie)&&ge.push(M),W.contains(Z)&&ne.push(N),W.contains(ie)&&ge.push(N);for(let we=M+1;we<N;we++)ne.push(we),ge.push(we);t.push({extent:G,frameIds:[M]},{extent:W,frameIds:[N]},{extent:Z,frameIds:ne},{extent:ie,frameIds:ge})}else $>k||U?t.push({extent:new $o($,s,E,n,o),frameIds:[M]},{extent:new $o(_,s,k,n,o),frameIds:[N]}):t.push({extent:new $o($,s,k,n,o),frameIds:[M]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const s={};r&&(s.zmin=this.zmin,s.zmax=this.zmax),i&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}};function KT(e,t){const[r,i]=t.valid,s=2*i;let n,o=0;return e>i?(n=Math.ceil(Math.abs(e-i)/s),e-=n*s,o=n):e<r&&(n=Math.ceil(Math.abs(e-r)/s),e+=n*s,o=-n),{x:e,frameId:o}}a([A({readOnly:!0})],At.prototype,"cache",null),a([A({readOnly:!0})],At.prototype,"center",null),a([A({readOnly:!0})],At.prototype,"extent",null),a([A({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],At.prototype,"hasM",null),a([A({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],At.prototype,"hasZ",null),a([A({readOnly:!0})],At.prototype,"height",null),a([A({readOnly:!0})],At.prototype,"width",null),a([A({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],At.prototype,"xmin",void 0),a([A({type:Number,json:{write:!0}})],At.prototype,"ymin",void 0),a([A({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],At.prototype,"mmin",void 0),a([A({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],At.prototype,"zmin",void 0),a([A({type:Number,json:{write:!0}})],At.prototype,"xmax",void 0),a([A({type:Number,json:{write:!0}})],At.prototype,"ymax",void 0),a([A({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],At.prototype,"mmax",void 0),a([A({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],At.prototype,"zmax",void 0),At=$o=a([P("esri.geometry.Extent")],At),At.prototype.toJSON.isDefaultToJSON=!0;function S0(e,t,r=!1){let{hasM:i,hasZ:s}=e;Array.isArray(t)?t.length!==4||i||s?t.length===3&&r&&!i?(s=!0,i=!1):t.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=i}var Px;function mN(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function Aae(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Kn=Px=class extends Ci{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var s;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):Aae(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(s=r.points)==null?void 0:s[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new At,r=this.hasZ,i=this.hasM,s=r?3:2,n=e[0],o=mN(Math.min),l=mN(Math.max);let p,m,v,_,[E,$]=n,[M,k]=n;for(let N=0,U=e.length;N<U;N++){const G=e[N],[W,Z]=G;if(E=o(E,W),$=o($,Z),M=l(M,W),k=l(k,Z),r&&G.length>2){const ie=G[2];p=o(p,ie),v=l(v,ie)}if(i&&G.length>s){const ie=G[s];m=o(m,ie),_=l(_,ie)}}return t.xmin=E,t.ymin=$,t.xmax=M,t.ymax=k,t.spatialReference=this.spatialReference,r?(t.zmin=p,t.zmax=v):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=m,t.mmax=_):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=H(this.points)}addPoint(e){return S0(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:H(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Px(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new Je(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Je(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(S0(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};a([A({readOnly:!0})],Kn.prototype,"cache",null),a([A()],Kn.prototype,"extent",null),a([A({type:[[Number]],json:{write:{isRequired:!0}}})],Kn.prototype,"points",void 0),a([ye("points")],Kn.prototype,"writePoints",null),Kn=Px=a([P("esri.geometry.Multipoint")],Kn),Kn.prototype.toJSON.isDefaultToJSON=!0;function fOe(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function fae(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var Zb;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Zb||(Zb={}));function mOe(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,r=e.hasM;if(e.type==="point")return r&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:r?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const i=e.clone().normalize();if(!i)return null;let s=!1,n=!1;return i.forEach((o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)})),i.map((o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const p=.5*(o.zmax-o.zmin);for(let m=0;m<l.length;m++)l[m].push(p)}if(n&&o.hasM){const p=.5*(o.mmax-o.mmin);for(let m=0;m<l.length;m++)l[m].push(p)}return l}))}return null}function kS(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function KV(e,t,r){const i=e[0]+r*(t[0]-e[0]),s=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,s,e[2]+r*(t[2]-e[2])]:[i,s]}function mae(e,t,r,i){return yae(e,t,r[i],r[i+1])}function yae(e,t,r,i){const[s,n]=t,[o,l]=r,[p,m]=i,v=p-o,_=m-l,E=v*v+_*_,$=(s-o)*v+(n-l)*_,M=Math.min(1,Math.max(0,$/E));return e[0]=o+v*M,e[1]=l+_*M,e}function yOe(e,t,r,i,s,n){let o=r,l=i,p=s-o,m=n-l;if(p!==0||m!==0){const v=((e-o)*p+(t-l)*m)/(p*p+m*m);v>1?(o=s,l=n):v>0&&(o+=p*v,l+=m*v)}return p=e-o,m=t-l,p*p+m*m}function XV(e,t){return KV(e,t,.5)}function gOe(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=kS(e[i],e[i+1]);return r}function vOe(e,t){if(t<=0)return e[0];const r=e.length;let i=0;for(let s=0;s<r-1;++s){const n=kS(e[s],e[s+1]);if(t-i<n){const o=(t-i)/n;return KV(e[s],e[s+1],o)}i+=n}return e[r-1]}function ez(e,t=Zb.X,r=Zb.Y){let i=0;const s=e.length;let n=e[0];for(let o=1;o<s;o++){const l=e[o];i+=(l[t]-n[t])*(l[r]+n[r]),n=l}if(tz(e)){const o=e[0];i+=(o[t]-n[t])*(o[r]+n[r])}return i>=0}function tz(e){const t=e.length;return t>0&&!oS(e[0],e[t-1])}function wOe(e){"rings"in e&&(gae(e),vae(e))}function gae(e){if("rings"in e)for(const t of e.rings)tz(t)&&t.push(t[0].slice())}function vae(e){if(!("rings"in e)||e.rings.length===0||ez(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function bOe(e){return e.type!=="polygon"&&e.type!=="polyline"||wae(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function wae(e,t){const r=Is(t);if(!r)return;const i=r.valid[0],s=r.valid[1],n=s-i;for(const o of e){let l=1/0,p=-1/0;for(const v of o){const _=bae(v[0],i,s);l=Math.min(l,_),p=Math.max(p,_),v[0]=_}const m=p-l;n-m<m&&o.forEach((v=>{v[0]<0&&(v[0]+=n)}))}}function bae(e,t,r){const i=r-t;return e<t?r-(t-e)%i:e>r?t+(e-t)%i:e}function _Oe(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[r,i]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return r.length===i.length&&r.every(((s,n)=>s.length===i[n].length))}function SOe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function _ae(e){return e?Sae(e.rings,e.hasZ??!1):null}function Sae(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const l=rz(e[n],t,s);l&&i.push(l)}if(i.sort(((n,o)=>{let l=n[2]-o[2];return l===0&&t&&(l=n[4]-o[4]),l})),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const n=e[0]&&e[0].length?Eae(e[0],t):null;if(!n)return null;r[0]=n[0],r[1]=n[1],t&&n.length>2&&(r[2]=n[2])}return r}function rz(e,t,r){let i=0,s=0,n=0,o=0,l=0;const p=e.length?e[0][0]:0,m=e.length?e[0][1]:0,v=e.length&&t?e[0][2]:0;for(let E=0;E<e.length;E++){const $=e[E],M=e[(E+1)%e.length],[k,N,U]=$,G=k-p,W=N-m,[Z,ie,ne]=M,ge=Z-p,we=ie-m,xe=G*we-ge*W;if(o+=xe,i+=(G+ge)*xe,s+=(W+we)*xe,t&&$.length>2&&M.length>2){const Ie=U-v,$e=ne-v,Re=G*$e-ge*Ie;n+=(Ie+$e)*Re,l+=Re}k<r[0]&&(r[0]=k),k>r[1]&&(r[1]=k),N<r[2]&&(r[2]=N),N>r[3]&&(r[3]=N),t&&(U<r[4]&&(r[4]=U),U>r[5]&&(r[5]=U))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;o*=.5,l*=.5;const _=[i/(6*o)+p,s/(6*o)+m,o];return t&&(r[4]===r[5]||l===0?(_[3]=(r[4]+r[5])/2,_[4]=0):(_[3]=n/(6*l)+v,_[4]=l)),_}function EOe(e,t){let r=0,i=0,s=0;e.nextPoint();const n=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let l=0;l<e.pathSize;l++){e.seekInPath(l);const p=[e.x,e.y];e.seekInPath((l+1)%e.pathSize);const m=[e.x,e.y],[v,_]=p,E=v-n,$=_-o,[M,k]=m,N=M-n,U=k-o,G=E*U-N*$;s+=G,r+=(E+N)*G,i+=($+U)*G,v<t[0]&&(t[0]=v),v>t[1]&&(t[1]=v),_<t[2]&&(t[2]=_),_>t[3]&&(t[3]=_)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+n,i/(6*s)+o,s]):null}function Eae(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;for(let p=0,m=e.length;p<m-1;p++){const v=e[p],_=e[p+1];if(v&&_){r[0]=v[0],r[1]=v[1],i[0]=_[0],i[1]=_[1],t&&v.length>2&&_.length>2&&(r[2]=v[2],i[2]=_[2]);const E=kS(r,i);if(E){s+=E;const $=XV(v,_);n+=E*$[0],o+=E*$[1],t&&$.length>2&&(l+=E*$[2])}}}return s>0?t?[n/s,o/s,l/s]:[n/s,o/s]:e.length?e[0]:null}function Tae(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],s=[],n=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=rz(fae(e),e.hasZ,n);o&&s.push(o)}if(s.sort(((o,l)=>{let p=o[2]-l[2];return p===0&&t&&(p=o[4]-l[4]),p})),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?$ae(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function $ae(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;if(e.nextPoint()){let p=e.x,m=e.y,v=e.z;for(;e.nextPoint();){const _=e.x,E=e.y,$=e.z;r[0]=p,r[1]=m,i[0]=_,i[1]=E,t&&(r[2]=v,i[2]=$);const M=kS(r,i);if(M){s+=M;const k=XV(r,i);n+=M*k[0],o+=M*k[1],t&&k.length>2&&(l+=M*k[2])}p=_,m=E,v=$}}return s>0?t?[n/s,o/s,l/s]:[n/s,o/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const xae=1e-6;function TOe(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<xae){const s=Tae(e);return s?[s[0],s[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)Mae(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const Iae=1/3;function Mae(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,s=r.y;r.nextPoint();let n,o=r.x-i,l=r.y-s,p=0,m=0;for(;r.nextPoint();)p=r.x-i,m=r.y-s,n=.5*Iae*(p*l-m*o),e[0]+=n*(o+p),e[1]+=n*(l+m),o=p,l=m;const v=r.getCurrentRingArea(),_=[i,s];return _[0]-=t[0],_[1]-=t[1],_[0]*=v,_[1]*=v,e[0]+=_[0],e[1]+=_[1],e}function Ts(e=Oae){return[e[0],e[1],e[2],e[3]]}function iz(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function $Oe(e,t,r,i,s=Ts()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function xOe(e,t=Ts()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Cae(e,t,r=new At){return r.xmin=e[0],r.ymin=e[1],r.xmax=e[2],r.ymax=e[3],r.spatialReference=t,r}function IOe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function MOe(e,t,r){if(t!=null)if("length"in t)Nx(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else iz(r,e)}function COe(e,t,r=e){const i=t.length;let s=e[0],n=e[1],o=e[2],l=e[3];for(let p=0;p<i;p++){const m=t[p];s=Math.min(s,m[0]),n=Math.min(n,m[1]),o=Math.max(o,m[0]),l=Math.max(l,m[1])}return r[0]=s,r[1]=n,r[2]=o,r[3]=l,r}function kOe(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function zR(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function GR(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function ROe(e){return zR(e)*GR(e)}function OOe(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function POe(e){const t=zR(e),r=GR(e);return Math.sqrt(t*t+r*r)}function NOe(e,t){return kae(e,t.x,t.y)}function kae(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function LOe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function DOe(e,t,r){return Math.max(t[0],e[0])-r<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-r<=Math.min(t[3],e[3])}function Rae(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function FOe(e,t,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+t,i[3]=e[3]+r,i}function jOe(e){return e?iz(e,yN):Ts(yN)}function Nx(e){return e!=null&&e.length===4}function BOe(e,t){return Nx(e)&&Nx(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const yN=[1/0,1/0,-1/0,-1/0],Oae=[0,0,0,0];function sz(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function nz(e){return e.points!==void 0}function oz(e){return e.x!==void 0&&e.y!==void 0}function az(e){return e.paths!==void 0}function lz(e){return e.rings!==void 0}function uz(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const vc=uz(Math.min),wc=uz(Math.max);function UOe(e,t){return az(t)?E0(e,t.paths,!1,!1):lz(t)?E0(e,t.rings,!1,!1):nz(t)?qR(e,t.points,!1,!1,!1,!1):sz(t)?cz(e,t):(oz(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function VOe(e){let t,r,i,s;for(e.reset(),t=i=1/0,r=s=-1/0;e.nextPath();){const n=Pae(e);t=Math.min(n[0],t),i=Math.min(n[1],i),r=Math.max(n[2],r),s=Math.max(n[3],s)}return Ts([t,i,r,s])}function Pae(e){let t,r,i,s;for(t=i=1/0,r=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),s=Math.max(e.y,s);return Ts([t,i,r,s])}function zOe(e,t){return az(t)?E0(e,t.paths,!0,!1):lz(t)?E0(e,t.rings,!0,!1):nz(t)?qR(e,t.points,!0,!1,!0,!1):sz(t)?cz(e,t,!0,!1,!0,!1):(oz(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function E0(e,t,r,i){const s=r?3:2;if(!t.length||!t[0].length)return null;let n,o,l,p,[m,v]=t[0][0],[_,E]=t[0][0];for(let $=0;$<t.length;$++){const M=t[$];for(let k=0;k<M.length;k++){const N=M[k],[U,G]=N;if(m=vc(m,U),v=vc(v,G),_=wc(_,U),E=wc(E,G),r&&N.length>2){const W=N[2];n=vc(n,W),o=wc(o,W)}if(i&&N.length>s){const W=N[s];l=vc(n,W),p=wc(o,W)}}}return r?i?(e[0]=m,e[1]=v,e[2]=n,e[3]=l,e[4]=_,e[5]=E,e[6]=o,e[7]=p,e.length=8,e):(e[0]=m,e[1]=v,e[2]=n,e[3]=_,e[4]=E,e[5]=o,e.length=6,e):i?(e[0]=m,e[1]=v,e[2]=l,e[3]=_,e[4]=E,e[5]=p,e.length=6,e):(e[0]=m,e[1]=v,e[2]=_,e[3]=E,e.length=4,e)}function cz(e,t,r,i,s,n){const o=t.xmin,l=t.xmax,p=t.ymin,m=t.ymax;let v=t.zmin,_=t.zmax,E=t.mmin,$=t.mmax;return s?(v=v||0,_=_||0,n?(E=E||0,$=$||0,e[0]=o,e[1]=p,e[2]=v,e[3]=E,e[4]=l,e[5]=m,e[6]=_,e[7]=$,e):(e[0]=o,e[1]=p,e[2]=v,e[3]=l,e[4]=m,e[5]=_,e)):n?(E=E||0,$=$||0,e[0]=o,e[1]=p,e[2]=E,e[3]=l,e[4]=m,e[5]=$,e):(e[0]=o,e[1]=p,e[2]=l,e[3]=m,e)}function qR(e,t,r,i,s,n){const o=r?3:2,l=i&&n,p=r&&s;if(!t.length||!t[0].length)return null;let m,v,_,E,[$,M]=t[0],[k,N]=t[0];for(let U=0;U<t.length;U++){const G=t[U],[W,Z]=G;if($=vc($,W),M=vc(M,Z),k=wc(k,W),N=wc(N,Z),p&&G.length>2){const ie=G[2];m=vc(m,ie),v=wc(v,ie)}if(l&&G.length>o){const ie=G[o];_=vc(m,ie),E=wc(v,ie)}}return s?(m=m||0,v=v||0,n?(_=_||0,E=E||0,e[0]=$,e[1]=M,e[2]=m,e[3]=_,e[4]=k,e[5]=N,e[6]=v,e[7]=E,e):(e[0]=$,e[1]=M,e[2]=m,e[3]=k,e[4]=N,e[5]=v,e)):n?(_=_||0,E=E||0,e[0]=$,e[1]=M,e[2]=_,e[3]=k,e[4]=N,e[5]=E,e):(e[0]=$,e[1]=M,e[2]=k,e[3]=N,e)}function Nae(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Lae(e){return e.points!==void 0}function Dae(e){return e.x!==void 0&&e.y!==void 0}function Fae(e){return e.paths!==void 0}function jae(e){return e.rings!==void 0}const HR=[];function dz(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function pz(e,t,r,i,s,n){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:s,zmax:n}}function hz(e,t,r,i,s,n){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:s,mmax:n}}function Az(e,t,r,i,s,n,o,l){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:s,ymax:n,zmax:o,mmax:l}}function WR(e,t=!1,r=!1){return t?r?Az(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):pz(e[0],e[1],e[2],e[3],e[4],e[5]):r?hz(e[0],e[1],e[2],e[3],e[4],e[5]):dz(e[0],e[1],e[2],e[3])}function GOe(e){return e?Nae(e)?e:Dae(e)?Uae(e):jae(e)?fz(e):Fae(e)?mz(e):Lae(e)?Bae(e):null:null}function Bae(e){const{hasZ:t,hasM:r,points:i}=e;return WR(qR(HR,i,t??!1,r??!1),t,r)}function Uae(e){const{x:t,y:r,z:i,m:s}=e,n=s!=null;return i!=null?n?Az(t,r,i,s,t,r,i,s):pz(t,r,i,t,r,i):n?hz(t,r,s,t,r,s):dz(t,r,t,r)}function fz(e){const{hasZ:t,hasM:r,rings:i}=e,s=E0(HR,i,t??!1,r??!1);return s?WR(s,t,r):null}function mz(e){const{hasZ:t,hasM:r,paths:i}=e,s=E0(HR,i,t??!1,r??!1);return s?WR(s,t,r):null}var o2;function gN(e){return!Array.isArray(e[0])}function Vae(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function zae(e){var n,o;if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),Vae(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=Ce.WGS84),{...e,hasM:r,hasZ:i,rings:t,spatialReference:s}}let ur=o2=class extends Ci{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,s=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(s=!0);const n={rings:t.map((o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const p=o.zmin+.5*(o.zmax-o.zmin);for(let m=0;m<l.length;m++)l[m].push(p)}if(s&&o.hasM){const p=o.mmin+.5*(o.mmax-o.mmin);for(let m=0;m<l.length;m++)l[m].push(p)}return l})),spatialReference:r};return i&&(n.hasZ=!0),s&&(n.hasM=!0),new o2(n)}constructor(e){super(zae(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=_ae(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Je;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=H(e)}get extent(){const e=fz(this),{spatialReference:t}=this;return e?new At({...e,spatialReference:t}):null}get isSelfIntersecting(){return V9(de.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),dae(this.rings)}writeRings(e,t){t.rings=H(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(gN(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new o2;return e.spatialReference=this.spatialReference,e.rings=H(this.rings),e.curveRings=H(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([s,n,o,l],[p,m,v,_])=>s===p&&n===m&&(o==null&&v==null||o===v)&&(l==null&&_==null||l===_);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!oS(n,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=MS(e,this.spatialReference);return UR(this,t??e)}isClockwise(e){const t=gN(e)?e.map((r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y])):e;return ez(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new Je(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new Je(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new Je(r[0],r[1],r[2],r[3],this.spatialReference):new Je(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(S0(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Je(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map((s=>new Je(s,r)));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(S0(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};a([A({readOnly:!0})],ur.prototype,"cache",null),a([A({readOnly:!0})],ur.prototype,"centroid",null),a([A({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],ur.prototype,"curveRings",void 0),a([ye("curveRings")],ur.prototype,"writeCurveRings",null),a([A({readOnly:!0})],ur.prototype,"extent",null),a([A({readOnly:!0})],ur.prototype,"isSelfIntersecting",null),a([A({type:[[[Number]]],json:{write:{isRequired:!0}}})],ur.prototype,"rings",void 0),a([ye("rings")],ur.prototype,"writeRings",null),ur=o2=a([P("esri.geometry.Polygon")],ur),ur.prototype.toJSON.isDefaultToJSON=!0;var Lx;function Gae(e){return!Array.isArray(e[0])}function qae(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function Hae(e){var n,o;if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),qae(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=Ce.WGS84),{...e,hasM:r,hasZ:i,paths:t,spatialReference:s}}let $r=Lx=class extends Ci{constructor(e){super(Hae(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=H(e)}get extent(){const e=mz(this),{spatialReference:t}=this;return e?new At({...e,spatialReference:t}):null}writePaths(e,t){t.paths=H(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(Gae(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new Lx;return e.spatialReference=this.spatialReference,e.paths=H(this.paths),e.curvePaths=H(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new Je(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new Je(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new Je(r[0],r[1],r[2],r[3],this.spatialReference):new Je(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(S0(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map((s=>new Je(s,r)));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Je(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(S0(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};a([A({readOnly:!0})],$r.prototype,"cache",null),a([A({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],$r.prototype,"curvePaths",void 0),a([ye("curvePaths")],$r.prototype,"writeCurvePaths",null),a([A({readOnly:!0})],$r.prototype,"extent",null),a([A({type:[[[Number]]],json:{write:{isRequired:!0}}})],$r.prototype,"paths",void 0),a([ye("paths")],$r.prototype,"writePaths",null),$r=Lx=a([P("esri.geometry.Polyline")],$r),$r.prototype.toJSON.isDefaultToJSON=!0;function yz(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function gz(e){return e.points!==void 0}function vz(e){return e.x!==void 0&&e.y!==void 0}function wz(e){return e.paths!==void 0||e.curvePaths!==void 0}function rf(e){return e.rings!==void 0||e.curveRings!==void 0}function Ya(e){return e==null?null:e instanceof Ci?e:vz(e)?Je.fromJSON(e):wz(e)?$r.fromJSON(e):rf(e)?ur.fromJSON(e):gz(e)?Kn.fromJSON(e):yz(e)?At.fromJSON(e):null}function em(e){return e?vz(e)?"esriGeometryPoint":wz(e)?"esriGeometryPolyline":rf(e)?"esriGeometryPolygon":yz(e)?"esriGeometryEnvelope":gz(e)?"esriGeometryMultipoint":null:null}const Wae={esriGeometryPoint:Je,esriGeometryPolyline:$r,esriGeometryPolygon:ur,esriGeometryEnvelope:At,esriGeometryMultipoint:Kn,esriGeometryMultiPatch:ur};function Qae(e){return e&&Wae[e]||null}const Jae=si()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),vN=si()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),tm={base:Ci,key:"type",typeMap:{extent:At,multipoint:Kn,point:Je,polyline:$r,polygon:ur}};function qOe(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const r=[];for(const i of t.fieldNames)r.push(e.attributes[i]??null);return JSON.stringify(r)}}}function Zae(e,t){var r,i,s;if("uniqueIdFields"in t&&((r=t.uniqueIdFields)!=null&&r.length)){if(t.uniqueIdFields.length===1)return(i=e.attributes)==null?void 0:i[t.uniqueIdFields[0]];const n=t.uniqueIdFields.map((o=>{var l;return(l=e.attributes)==null?void 0:l[o]}));return JSON.stringify(n)}return"objectIdField"in t&&t.objectIdField?(s=e.attributes)==null?void 0:s[t.objectIdField]:null}const wN=new ct({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Yae=0,Fr=class extends ee{constructor(t){super(t),this.id="sym"+Yae++,this.type=null,this.color=new Ke([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};a([A({type:wN.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:wN.write,isRequired:!0}}})],Fr.prototype,"type",void 0),a([A({type:Ke,json:{write:{allowNull:!0}}})],Fr.prototype,"color",void 0),a([pe("color")],Fr.prototype,"readColor",null),Fr=a([P("esri.symbols.Symbol")],Fr);var Dx;let is=Dx=class extends Fr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map((n=>{const o=n.valueExpressionInfo;return o?ls(e,t,o.expression):null}));await Promise.all(s)}}}clone(){return new Dx({data:H(this.data)})}hash(){return ij(JSON.stringify(this.data)).toString()}};a([A({json:{write:!1}})],is.prototype,"color",void 0),a([A({json:{write:!0}})],is.prototype,"data",void 0),a([pe("data",["symbol"])],is.prototype,"readData",null),a([ye("data",{})],is.prototype,"writeData",null),a([Ne({CIMSymbolReference:"cim"},{readOnly:!0})],is.prototype,"type",void 0),is=Dx=a([P("esri.symbols.CIMSymbol")],is);function uu(e,t,r=Te){return t||(t=new r),t===e||(t.removeAll(),Kae(e)?t.addMany(e):e&&t.add(e)),t}function bz(e){return e}function Kae(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Xu;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Xu||(Xu={}));let Xae=class{constructor(){this._resolver=Cn(),this._status=Xu.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=Xu.RESOLVED,this._cleanUp()}),(()=>{this._status=Xu.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Xu.RESOLVED}isRejected(){return this._status===Xu.REJECTED}isFulfilled(){return this._status!==Xu.PENDING}abort(){this._resolver.reject(rr())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=Cn(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then((()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()}),(s=>{this.isFulfilled()||this._allPromise!==i||zi(s)||this._resolver.reject(s)})),t.resolve()}};const _z=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new Xae,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then((()=>this)).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=a([P("esri.core.Promise")],t),t};let Fa=class extends _z(je){};Fa=a([P("esri.core.Promise")],Fa),(function(e){e.EsriPromiseMixin=_z})(Fa||(Fa={}));const ele="not-loaded",tle="loading",rle="failed",bN="loaded",Sz=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((i=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise(((l,p)=>{const m=Gk(n,p);this.destroyed&&p(new Q("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,p).finally((()=>{m&&m.remove()}))}));if(this.loadStatus===ele){this._set("loadStatus",tle);const l=this._loadController=new AbortController;s({signal:l.signal})}return i(),o}}))),this.when((()=>{this._set("loadStatus",bN),this._loadController=null}),(i=>{this._set("loadStatus",rle),this._set("loadError",i),this._loadController=null}))}destroy(){this._loadController&&(this._loadController=h0(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===bN}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new Q("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return a([A({readOnly:!0})],t.prototype,"loaded",null),a([A({readOnly:!0})],t.prototype,"loadError",void 0),a([A({clonable:!1})],t.prototype,"loadStatus",void 0),a([A({type:[kn],readOnly:!0})],t.prototype,"loadWarnings",null),t=a([P("esri.core.Loadable")],t),t};let os=class extends Sz(Fa){};os=a([P("esri.core.Loadable")],os),(function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=Sz,e.isLoadable=t})(os||(os={}));let V1;function ile(e){return V1&&!V1.destroyed||(V1=e()),V1}var Fx;const sle=new ct({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Nr=Fx=class extends je{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new Fx({categories:this.categories?H(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map((o=>Array.isArray(o)?JSON.stringify(o):o)));let i="";if(this.extent){const o=MS(this.extent,Ce.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:r,bbox:i,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map((o=>sle.toJSON(o.trim()))).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};a([A()],Nr.prototype,"categories",void 0),a([A()],Nr.prototype,"disableExtraQuery",void 0),a([A({type:At})],Nr.prototype,"extent",void 0),a([A()],Nr.prototype,"filter",void 0),a([A()],Nr.prototype,"num",void 0),a([A()],Nr.prototype,"query",void 0),a([A()],Nr.prototype,"sortField",void 0),a([A()],Nr.prototype,"sortOrder",null),a([A()],Nr.prototype,"start",void 0),Nr=Fx=a([P("esri.portal.PortalQueryParams")],Nr);var jx;let kr=jx=class extends ee{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then((t=>{const r=t.categorySchema||[];return r.some((i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas"))?this._fetchCategorySchemaSet("LivingAtlas",e):r}))}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new Q("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new jx({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Br(Nr,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new Nr,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Nr,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then((i=>{const s=i.contentCategorySetsGroupQuery;if(s){const n=new Nr({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(n,t)}throw new Q("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((i=>{if(i.total){const s=i.results[0],n=new Nr({num:1,query:`typekeywords:"${e}"`});return s.queryItems(n,t)}throw new Q("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((i=>i.total?i.results[0].fetchData("json",t).then((s=>{const n=s==null?void 0:s.categorySchema;return n!=null&&n.length?n:[]})):[]))}};a([A()],kr.prototype,"access",void 0),a([A({type:Date})],kr.prototype,"created",void 0),a([A()],kr.prototype,"description",void 0),a([A()],kr.prototype,"id",void 0),a([A()],kr.prototype,"isInvitationOnly",void 0),a([A({type:Date})],kr.prototype,"modified",void 0),a([A()],kr.prototype,"owner",void 0),a([A()],kr.prototype,"portal",void 0),a([A()],kr.prototype,"snippet",void 0),a([A()],kr.prototype,"sortField",void 0),a([A()],kr.prototype,"sortOrder",void 0),a([A()],kr.prototype,"sourceJSON",void 0),a([A()],kr.prototype,"tags",void 0),a([A()],kr.prototype,"thumbnail",void 0),a([A({readOnly:!0})],kr.prototype,"thumbnailUrl",null),a([A()],kr.prototype,"title",void 0),a([A({readOnly:!0})],kr.prototype,"url",null),kr=jx=a([P("esri.portal.PortalGroup")],kr);let Ed=class extends je{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};a([A()],Ed.prototype,"nextQueryParams",void 0),a([A()],Ed.prototype,"queryParams",void 0),a([A()],Ed.prototype,"results",void 0),a([A()],Ed.prototype,"total",void 0),Ed=a([P("esri.portal.PortalQueryResult")],Ed);let hl=class extends ee{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Q("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};a([A({type:Date})],hl.prototype,"created",void 0),a([A()],hl.prototype,"id",void 0),a([A()],hl.prototype,"portal",void 0),a([A()],hl.prototype,"title",void 0),a([A({readOnly:!0})],hl.prototype,"url",null),a([A()],hl.prototype,"username",void 0),hl=a([P("esri.portal.PortalFolder")],hl);var Bx;let Ht=Bx=class extends ee{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.id}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.id}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),r!=null&&(typeof r=="string"?s.query.text=r:typeof r=="object"&&(s.query.text=JSON.stringify(r))));let n=this.userContentUrl;return i&&(n+="/"+(typeof i=="string"?i:i.id)),this.portal.request(n+"/addItem",s).then((o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load())))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],s=e.map((n=>n.id));if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:t}},o=await this.portal.request(r,n);for(const l of o.results){const p=e.find((_=>l.itemId===_.id)),m=l.success;let v=null;m?(p.id=null,p.portal=null):l.error&&(v=new Q("portal:delete-item-failed",l.error.message,l.error)),i.push({item:p,success:m,error:v})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then((t=>{let r;return r=t&&t.folders?t.folders.map((i=>{const s=hl.fromJSON(i);return s.portal=this.portal,s})):[],r}))}fetchGroups(){return this.portal.request(this.url??"").then((e=>{let t;return t=e&&e.groups?e.groups.map((r=>{const i=kr.fromJSON(r);return i.portal=this.portal,i})):[],t}))}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await ce(()=>Promise.resolve().then(()=>xH),void 0,import.meta.url),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:i});let n;return s!=null&&s.items?(n=s.items.map((o=>{const l=r.fromJSON(o);return l.portal=this.portal,l})),await Promise.all(n.map((o=>o.load()))),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then((e=>e.tags))}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new kr({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new Q("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new Q("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new Bx({sourceJSON:e});return t.read(e),t}};a([A()],Ht.prototype,"access",void 0),a([A({type:Date})],Ht.prototype,"created",void 0),a([A()],Ht.prototype,"culture",void 0),a([A()],Ht.prototype,"description",void 0),a([A()],Ht.prototype,"email",void 0),a([A()],Ht.prototype,"favGroupId",void 0),a([A()],Ht.prototype,"fullName",void 0),a([A()],Ht.prototype,"id",void 0),a([A({type:Date})],Ht.prototype,"modified",void 0),a([A()],Ht.prototype,"orgId",void 0),a([A()],Ht.prototype,"portal",void 0),a([A()],Ht.prototype,"preferredView",void 0),a([A()],Ht.prototype,"privileges",void 0),a([A()],Ht.prototype,"region",void 0),a([A()],Ht.prototype,"role",void 0),a([A()],Ht.prototype,"roleId",void 0),a([A()],Ht.prototype,"sourceJSON",void 0),a([A()],Ht.prototype,"thumbnail",void 0),a([A({readOnly:!0})],Ht.prototype,"thumbnailUrl",null),a([A()],Ht.prototype,"units",void 0),a([A({readOnly:!0})],Ht.prototype,"userContentUrl",null),a([A({readOnly:!0})],Ht.prototype,"url",null),a([A()],Ht.prototype,"username",void 0),a([A()],Ht.prototype,"userLicenseTypeId",void 0),a([A()],Ht.prototype,"userType",void 0),Ht=Bx=a([P("esri.portal.PortalUser")],Ht);var dn;let Lm;const _N={PortalGroup:()=>Promise.resolve({default:kr}),PortalItem:()=>ce(()=>Promise.resolve().then(()=>xH),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:Ht})};var Da;let me=(Da=class extends ee.JSONSupportMixin(os){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Pt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){SN.unregister(this),this.defaultBasemap=cr(this.defaultBasemap),this.defaultDevBasemap=cr(this.defaultDevBasemap),this.defaultVectorBasemap=cr(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=vr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const r of t)Pt.request.trustedServers.includes(r)||Pt.request.trustedServers.push(r);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,r=!t||this.canSearchPublic;return this.id&&!r?` AND orgid:${this.id}`:null}get hasAPIKey(){return Kne(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const r=t.indexOf("/sharing");t=r>0?t.slice(0,r):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,r=this.thumbnail;return t&&r?this._normalizeSSL(t+"/portals/self/resources/"+r):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let r=null;return t&&(r=Ht.fromJSON(t),r.portal=this),r}load(t){const r=ce(()=>Promise.resolve().then(()=>fwe),void 0,import.meta.url).then((({default:i})=>{dr(t),Lm=i})).then((()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t))).then((i=>{var s;if(!this.hasAPIKey&&st){const n=st;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==dn.AUTH_MODE_AUTO&&this.authMode!==dn.AUTH_MODE_NO_PROMPT||((s=this._esriIdCredentialCreateHandle)==null||s.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",nle(new WeakRef(this))),SN.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)}));return this.addResolvingPromise(r),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),r=(await ce(async()=>{const{default:i}=await import("./ElevationLayer-Bj5o9X6g.js");return{default:i}},__vite__mapDeps([18,19,20,21,22,11,23]),import.meta.url)).default;return t?t.map((i=>new r({id:i.id,url:i.url}))):[]}async fetchBasemaps(t,r){const i=await this._fetchBasemaps(t,r);if((r==null?void 0:r.include3d)===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(t,r);i.unshift(...s)}return i}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const r=new Nr;r.query=this.default3DBasemapQuery,r.disableExtraQuery=!0;const i=(await this.queryItems(r,t)).results.find((s=>s.type==="Web Scene"));return i?new Lm({portalItem:i}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then((r=>r.categorySchema)):oo(t)?Promise.reject(rr()):Promise.resolve([])}async fetchClassificationSchema(t){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",t).then((r=>r.classificationSchema)):null}fetchFeaturedGroups(t){const r=this.featuredGroups,i=new Nr({num:100,sortField:"title"});if(r!=null&&r.length){const s=[];for(const n of r)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,t).then((n=>n.results))}return oo(t)?Promise.reject(rr()):Promise.resolve([])}fetchRegions(t){var i;const r=((i=this.user)==null?void 0:i.culture)||this.culture||sn();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:r}})}fetchSettings(t){var i;const r=((i=this.user)==null?void 0:i.culture)||this.culture||sn();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:r}})}static getDefault(){return ile((()=>new dn))}queryGroups(t,r){return this.queryPortal("/community/groups",t,"PortalGroup",r)}queryItems(t,r){return this.queryPortal("/search",t,"PortalItem",r)}queryUsers(t,r){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",r)}fetchSelf(t=this.authMode,r=!1,i){const s=this.restUrl+"/portals/self",n={authMode:t,query:{culture:sn().toLowerCase()},withCredentials:!0,...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),r&&(n.query.default=!0),this.request(s,n)}queryPortal(t,r,i,s){const n=Br(Nr,r),o=l=>this.request(this.restUrl+t,{...n.toRequestOptions(this),...s}).then((p=>{const m=n.clone();return m.start=p.nextStart,new Ed({nextQueryParams:m,queryParams:n,total:p.total,results:dn._resultsToTypedArray(l,{portal:this},p,s)})})).then((p=>Promise.all(p.results.map((m=>typeof m.when=="function"?m.when():p))).then((()=>p),(m=>(ka(m),p)))));return i&&_N[i]?_N[i]().then((({default:l})=>(dr(s),o(l)))):o()}signIn(){if(this.hasAPIKey)return this.load().then((()=>{if(!this.user)throw new Q("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")}));if(this.authMode===dn.AUTH_MODE_ANONYMOUS||this.authMode===dn.AUTH_MODE_NO_PROMPT&&!st)return Promise.reject(new Q("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=r=>Promise.resolve().then((()=>this.loadStatus==="not-loaded"?(r||(this.authMode="immediate"),this.load().then((()=>null))):this.loadStatus==="loading"?this.load().then((()=>this.credential?null:(this.credential=r,this.fetchSelf("immediate")))):this.user&&this.credential===r?null:(this.credential=r,this.fetchSelf("immediate")))).then((i=>{i&&(this.sourceJSON=i,this.read(i))}));return st?st.getCredential(this.restUrl,{prompt:this.authMode!==dn.AUTH_MODE_NO_PROMPT}).then((r=>t(r))):t(this.credential)}normalizeUrl(t){var i;const r=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(r?t+(t.includes("?")?"&":"?")+"token="+r:t)}requestToTypedArray(t,r,i){return this.request(t,r).then((s=>{const n=dn._resultsToTypedArray(i,{portal:this},s);return Promise.all(n.map((o=>typeof o.when=="function"?o.when():s))).then((()=>n),(()=>n))}))}request(t,r={}){const i={f:"json",...r.query},{authMode:s=this.authMode===dn.AUTH_MODE_ANONYMOUS||this.authMode===dn.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:o=!1,method:l="auto",responseType:p="json",signal:m}=r,v={authMode:s,body:n,cacheBust:o,method:l,query:i,responseType:p,timeout:0,signal:m};return r.withCredentials&&(v.withCredentials=!0),Nt(this._normalizeSSL(t),v).then((_=>_.data))}toJSON(){throw new Q("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new dn({sourceJSON:t})}_getHelperService(t){const r=this.helperServices&&this.helperServices[t];if(!r)throw new Q("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return r}async _fetchBasemaps(t,r){const i=new Nr;i.query=t||(yx()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,r);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,r);return o.total?o.results.filter((l=>l.type==="Web Map")).map((l=>new Lm({portalItem:l}))):[]}async _fetchBasemaps3D(t,r){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];if(yx())return[];const s=new Nr({query:i,disableExtraQuery:!0}),n=await this.queryGroups(s,r);if(!n.total)return[];const o=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=o.sortField||"name",s.sortOrder=o.sortOrder||"desc";const l=await o.queryItems(s,r);return l.total?l.results.filter((p=>p.type==="Web Scene")).map((p=>new Lm({portalItem:p}))):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const r=Lm.fromJSON(t);return r.portalItem={portal:this},r}return null}static _resultsToTypedArray(t,r,i,s){let n;if(i){const o=s!=null?s.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||r)&&(n=n.map((l=>{const p=Object.assign(t?t.fromJSON(l):l,r);return typeof p.load=="function"&&p.load(o),p})))}else n=[];return n}},dn=Da,Da.AUTH_MODE_ANONYMOUS="anonymous",Da.AUTH_MODE_AUTO="auto",Da.AUTH_MODE_IMMEDIATE="immediate",Da.AUTH_MODE_NO_PROMPT="no-prompt",Da);a([A()],me.prototype,"access",void 0),a([A()],me.prototype,"allSSL",void 0),a([A()],me.prototype,"authMode",void 0),a([A()],me.prototype,"authorizedCrossOriginDomains",void 0),a([pe("authorizedCrossOriginDomains")],me.prototype,"readAuthorizedCrossOriginDomains",null),a([A()],me.prototype,"basemapGalleryGroupQuery",void 0),a([A({json:{name:"3DBasemapGalleryGroupQuery"}})],me.prototype,"basemapGalleryGroupQuery3D",void 0),a([A()],me.prototype,"bingKey",void 0),a([A()],me.prototype,"canListApps",void 0),a([A()],me.prototype,"canListData",void 0),a([A()],me.prototype,"canListPreProvisionedItems",void 0),a([A()],me.prototype,"canProvisionDirectPurchase",void 0),a([A()],me.prototype,"canSearchPublic",void 0),a([A()],me.prototype,"canShareBingPublic",void 0),a([A()],me.prototype,"canSharePublic",void 0),a([A()],me.prototype,"canSignInArcGIS",void 0),a([A()],me.prototype,"canSignInIDP",void 0),a([A()],me.prototype,"colorSetsGroupQuery",void 0),a([A()],me.prototype,"commentsEnabled",void 0),a([A({type:Date})],me.prototype,"created",void 0),a([A()],me.prototype,"credential",void 0),a([A()],me.prototype,"culture",void 0),a([A()],me.prototype,"currentVersion",void 0),a([A()],me.prototype,"customBaseUrl",void 0),a([A()],me.prototype,"default3DBasemapQuery",void 0),a([A()],me.prototype,"defaultBasemap",void 0),a([pe("defaultBasemap")],me.prototype,"readDefaultBasemap",null),a([A()],me.prototype,"defaultDevBasemap",void 0),a([pe("defaultDevBasemap")],me.prototype,"readDefaultDevBasemap",null),a([A({type:At})],me.prototype,"defaultExtent",void 0),a([A()],me.prototype,"defaultVectorBasemap",void 0),a([pe("defaultVectorBasemap")],me.prototype,"readDefaultVectorBasemap",null),a([A()],me.prototype,"description",void 0),a([A()],me.prototype,"devBasemapGalleryGroupQuery",void 0),a([A()],me.prototype,"eueiEnabled",void 0),a([A({readOnly:!0})],me.prototype,"extraQuery",null),a([A()],me.prototype,"featuredGroups",void 0),a([A()],me.prototype,"featuredItemsGroupQuery",void 0),a([A()],me.prototype,"galleryTemplatesGroupQuery",void 0),a([A()],me.prototype,"layoutGroupQuery",void 0),a([A()],me.prototype,"livingAtlasGroupQuery",void 0),a([A({readOnly:!0})],me.prototype,"hasAPIKey",null),a([A()],me.prototype,"hasCategorySchema",void 0),a([A()],me.prototype,"hasClassificationSchema",void 0),a([A()],me.prototype,"helpBase",void 0),a([A()],me.prototype,"helperServices",void 0),a([A()],me.prototype,"helpMap",void 0),a([A()],me.prototype,"homePageFeaturedContent",void 0),a([A()],me.prototype,"homePageFeaturedContentCount",void 0),a([A()],me.prototype,"httpPort",void 0),a([A()],me.prototype,"httpsPort",void 0),a([A()],me.prototype,"id",void 0),a([A()],me.prototype,"ipCntryCode",void 0),a([A({readOnly:!0})],me.prototype,"isOrganization",null),a([A()],me.prototype,"isPortal",void 0),a([A()],me.prototype,"isReadOnly",void 0),a([A({readOnly:!0})],me.prototype,"itemPageUrl",null),a([A()],me.prototype,"layerTemplatesGroupQuery",void 0),a([A()],me.prototype,"maxTokenExpirationMinutes",void 0),a([A({type:Date})],me.prototype,"modified",void 0),a([A()],me.prototype,"name",void 0),a([A()],me.prototype,"portalHostname",void 0),a([A()],me.prototype,"portalMode",void 0),a([A()],me.prototype,"portalProperties",void 0),a([A()],me.prototype,"region",void 0),a([A()],me.prototype,"recycleBinEnabled",void 0),a([A({readOnly:!0})],me.prototype,"restUrl",null),a([A()],me.prototype,"rotatorPanels",void 0),a([A()],me.prototype,"showHomePageDescription",void 0),a([A()],me.prototype,"sourceJSON",void 0),a([A()],me.prototype,"staticImagesUrl",void 0),a([A({json:{name:"2DStylesGroupQuery"}})],me.prototype,"stylesGroupQuery2d",void 0),a([A({json:{name:"stylesGroupQuery"}})],me.prototype,"stylesGroupQuery3d",void 0),a([A()],me.prototype,"supportsHostedServices",void 0),a([A()],me.prototype,"symbolSetsGroupQuery",void 0),a([A()],me.prototype,"templatesGroupQuery",void 0),a([A()],me.prototype,"thumbnail",void 0),a([A({readOnly:!0})],me.prototype,"thumbnailUrl",null),a([A()],me.prototype,"units",void 0),a([A()],me.prototype,"url",void 0),a([A()],me.prototype,"urlKey",void 0),a([pe("urlKey")],me.prototype,"readUrlKey",null),a([A()],me.prototype,"user",void 0),a([pe("user")],me.prototype,"readUser",null),a([A()],me.prototype,"use3dBasemaps",void 0),a([A()],me.prototype,"useDefault3dBasemap",void 0),a([A()],me.prototype,"useStandardizedQuery",void 0),a([A()],me.prototype,"useVectorBasemaps",void 0),a([A()],me.prototype,"vectorBasemapGalleryGroupQuery",void 0),me=dn=a([P("esri.portal.Portal")],me);const SN=new FinalizationRegistry((e=>{e.remove()}));function nle(e){const t=st;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch((()=>{}))}}let Es=class extends ee{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};a([A({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Es.prototype,"enabled",void 0),a([ye("enabled")],Es.prototype,"writeEnabled",null),a([A({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Es.prototype,"type",void 0),Es=a([P("esri.symbols.Symbol3DLayer")],Es);const ole=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,ale="screenUtils.toPt: input not recognized!",Ez=96;function lle(e){return e?e/72*Ez:0}function uo(e){return e?72*e/Ez:0}function Rt(e){if(typeof e=="string"){const t=e.match(ole);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=i==="px"?uo(r):r;return s?-n:n}return console.warn(ale),null}return e}function Oi(e=0,t=0){return{x:e,y:t}}function XOe(e){return e?Oi(e.x,e.y):null}function ePe(e=0,t=0){return[e,t]}function tPe(e=0,t=0,r=0){return[e,t,r]}function rPe(e){return e}function iPe(e){return e}function sPe(e){return e}function nPe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function RS(e){const t=Jk(100*(1-e));return Math.max(0,Math.min(t,100))}function sv(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function ule(e,t){const r=t.transparency!=null?sv(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new Ke([i[0]||0,i[1]||0,i[2]||0,r]):null}function cle(e,t){t.color=e.toJSON().slice(0,3);const r=RS(e.a);r!==0&&(t.transparency=r)}function Zc(e){return{type:Ke,nonNullable:e==null?void 0:e.nonNullable,json:{type:[Et],default:null,read:{source:["color","transparency"],reader:ule},write:{target:{color:{type:[Et],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:Et}},writer:cle}}}}const Ka={type:Number,cast:Rt,json:{write:!0}};var Yb;function oPe(e){return e==="emissive"?Yb.Emissive:Yb.Color}(function(e){e[e.Emissive=0]="Emissive",e[e.Color=1]="Color"})(Yb||(Yb={}));let Td=class extends ee{constructor(t){super(t),this.color=new Ke([0,0,0,1]),this.extensionLength=0,this.size=uo(1)}clone(){}cloneProperties(){return{color:H(this.color),size:this.size,extensionLength:this.extensionLength}}};a([A({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Td.prototype,"type",void 0),a([A(Zc({colorRequiredOnWrite:!0}))],Td.prototype,"color",void 0),a([A({...Ka,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Td.prototype,"extensionLength",void 0),a([A(Ka)],Td.prototype,"size",void 0),Td=a([P("esri.symbols.edges.Edges3D")],Td);const QR=Td;var Ux;let a2=Ux=class extends QR{constructor(e){super(e),this.type="sketch"}clone(){return new Ux(this.cloneProperties())}};a([Ne({sketch:"sketch"},{readOnly:!0})],a2.prototype,"type",void 0),a2=Ux=a([P("esri.symbols.edges.SketchEdges3D")],a2);const dle=a2;var Vx;let l2=Vx=class extends QR{constructor(e){super(e),this.type="solid"}clone(){return new Vx(this.cloneProperties())}};a([Ne({solid:"solid"},{readOnly:!0})],l2.prototype,"type",void 0),l2=Vx=a([P("esri.symbols.edges.SolidEdges3D")],l2);const Tz=l2,$z={types:{key:"type",base:QR,typeMap:{solid:Tz,sketch:dle}},json:{write:!0}};var zx;let FA=zx=class extends ee{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const e={strength:this.strength,source:this.source};return new zx(e)}};a([A({json:{write:!1}})],FA.prototype,"strength",void 0),a([A({json:{write:!1}})],FA.prototype,"source",void 0),FA=zx=a([P("esri.symbols.support.Symbol3DEmissive")],FA);var Gx;let $n=Gx=class extends ee{constructor(e){super(e),this.color=null,this.emissive=new FA({source:"emissive"})}clone(){var t,r;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissive:((r=this.emissive)==null?void 0:r.clone())??null};return new Gx(e)}};a([A(Zc())],$n.prototype,"color",void 0),a([A({type:FA,json:{write:!1}})],$n.prototype,"emissive",void 0),$n=Gx=a([P("esri.symbols.support.Symbol3DMaterial")],$n);var qx,ff;let Ol=(ff=class extends Es{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var t,r;return new qx({edges:(t=this.edges)==null?void 0:t.clone(),enabled:this.enabled,material:(r=this.material)==null?void 0:r.clone(),castShadows:this.castShadows,size:this.size})}},qx=ff,ff);a([Ne({Extrude:"extrude"},{readOnly:!0})],Ol.prototype,"type",void 0),a([A({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ol.prototype,"size",void 0),a([A({type:$n,json:{write:!0}})],Ol.prototype,"material",void 0),a([A({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ol.prototype,"castShadows",void 0),a([A($z)],Ol.prototype,"edges",void 0),Ol=qx=a([P("esri.symbols.ExtrudeSymbol3DLayer")],Ol);let hg=class extends ee{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};a([A({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],hg.prototype,"type",void 0),hg=a([P("esri.symbols.patterns.LinePattern3D")],hg);const ple=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Hx;const hle=si()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let op=Hx=class extends hg{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Hx(e)}};a([A({type:["style"],json:{write:{isRequired:!0}}})],op.prototype,"type",void 0),a([Ne(hle),A({type:ple,json:{write:{isRequired:!0}}})],op.prototype,"style",void 0),op=Hx=a([P("esri.symbols.patterns.LineStylePattern3D")],op);let Ag=class extends ee{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};a([A({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ag.prototype,"type",void 0),Ag=a([P("esri.symbols.patterns.Pattern3D")],Ag);const Ale=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Wx;let jA=Wx=class extends Ag{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new Wx({style:this.style})}};a([A({type:["style"],json:{write:{isRequired:!0}}})],jA.prototype,"type",void 0),a([A({type:Ale,json:{read:!0,write:{isRequired:!0}}})],jA.prototype,"style",void 0),jA=Wx=a([P("esri.symbols.patterns.StylePattern3D")],jA);const fle={types:{key:"type",base:Ag,typeMap:{style:jA}},json:{write:!0}},xz={types:{key:"type",base:hg,typeMap:{style:op}},json:{write:!0}},fg=new Ke("white"),mle=new Ke([255,255,255,0]);function yle(e){return e.r===0&&e.g===0&&e.b===0}var Qx;let mg=Qx=class extends $n{constructor(e){super(e),this.colorMixMode=null}clone(){var t,r;const e={color:((t=this.color)==null?void 0:t.clone())??null,colorMixMode:this.colorMixMode,emissive:((r=this.emissive)==null?void 0:r.clone())??null};return new Qx(e)}};a([Ne({multiply:"multiply",replace:"replace",tint:"tint"})],mg.prototype,"colorMixMode",void 0),mg=Qx=a([P("esri.symbols.support.Symbol3DFillMaterial")],mg);function Yc(){return[0,0,0]}function gle(e){return[e[0],e[1],e[2]]}function rm(e,t,r){return[e,t,r]}function vle(e,t,r){return[e,t,r]}function wle(e,t=Yc()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Iz(){return Yc()}function Mz(){return rm(1,1,1)}function Cz(){return rm(1,0,0)}function kz(){return rm(0,1,0)}function Rz(){return rm(0,0,1)}const ble=Iz(),_le=Mz(),Sle=Cz(),Ele=kz(),Tle=Rz();Object.freeze(Object.defineProperty({__proto__:null,ONES:_le,UNIT_X:Sle,UNIT_Y:Ele,UNIT_Z:Tle,ZEROS:ble,clone:gle,create:Yc,freeze:vle,fromArray:wle,fromValues:rm,ones:Mz,unitX:Cz,unitY:kz,unitZ:Rz,zeros:Iz},Symbol.toStringTag,{value:"Module"}));function $le(e,t=!1){return e<=Z9?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function cPe(e){return(cX(e)?e.byteLength/8:e.length)<=Z9?Array.from(e):new Float64Array(e)}function dPe(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function Zv(e=Cle){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function JR(e,t,r,i,s,n,o=Zv()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function pPe(e,t=Zv()){return xle(e,0,e.length/3,t)}function xle(e,t,r,i=Zv()){return Oz(i,Jx),Ile(i,e,t,r),i}function hPe(e,t=$le(24)){const[r,i,s,n,o,l]=e;return t[0]=r,t[1]=i,t[2]=s,t[3]=r,t[4]=i,t[5]=l,t[6]=r,t[7]=o,t[8]=s,t[9]=r,t[10]=o,t[11]=l,t[12]=n,t[13]=i,t[14]=s,t[15]=n,t[16]=i,t[17]=l,t[18]=n,t[19]=o,t[20]=s,t[21]=n,t[22]=o,t[23]=l,t}function APe(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new At(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function fPe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function mPe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function yPe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Ile(e,t,r=0,i=t.length/3){let s=e[0],n=e[1],o=e[2],l=e[3],p=e[4],m=e[5];for(let v=0;v<i;v++)s=Math.min(s,t[r+3*v]),n=Math.min(n,t[r+3*v+1]),o=Math.min(o,t[r+3*v+2]),l=Math.max(l,t[r+3*v]),p=Math.max(p,t[r+3*v+1]),m=Math.max(m,t[r+3*v+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=l,e[4]=p,e[5]=m}function gPe(e,t,r){const i=t.length;let s=e[0],n=e[1],o=e[2],l=e[3],p=e[4],m=e[5];if(r)for(let v=0;v<i;v++){const _=t[v];s=Math.min(s,_[0]),n=Math.min(n,_[1]),o=Math.min(o,_[2]),l=Math.max(l,_[0]),p=Math.max(p,_[1]),m=Math.max(m,_[2])}else for(let v=0;v<i;v++){const _=t[v];s=Math.min(s,_[0]),n=Math.min(n,_[1]),l=Math.max(l,_[0]),p=Math.max(p,_[1])}e[0]=s,e[1]=n,e[2]=o,e[3]=l,e[4]=p,e[5]=m}function vPe(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function Yv(e){return e[0]>=e[3]?0:e[3]-e[0]}function Kv(e){return e[1]>=e[4]?0:e[4]-e[1]}function Xv(e){return e[2]>=e[5]?0:e[5]-e[2]}function wPe(e){const t=Yv(e),r=Xv(e),i=Kv(e);return Math.sqrt(t*t+r*r+i*i)}function bPe(e,t=[0,0,0]){return t[0]=e[0]+Yv(e)/2,t[1]=e[1]+Kv(e)/2,t[2]=e[2]+Xv(e)/2,t}function _Pe(e,t=[0,0,0]){return t[0]=Yv(e),t[1]=Kv(e),t[2]=Xv(e),t}function SPe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function Mle(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function EPe(e,t){return t==null||Mle(e,t)}function TPe(e,t,r,i,s=e){return s[0]=e[0]+t,s[1]=e[1]+r,s[2]=e[2]+i,s[3]=e[3]+t,s[4]=e[4]+r,s[5]=e[5]+i,s}function $Pe(e,t,r=e){const i=e[0]+Yv(e)/2,s=e[1]+Kv(e)/2,n=e[2]+Xv(e)/2;return r[0]=i+(e[0]-i)*t,r[1]=s+(e[1]-s)*t,r[2]=n+(e[2]-n)*t,r[3]=i+(e[3]-i)*t,r[4]=s+(e[4]-s)*t,r[5]=n+(e[5]-n)*t,r}function xPe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function IPe(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function MPe(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function Oz(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function CPe(e){return e?Oz(e,Jx):Zv(Jx)}function kPe(e,t){return t||(t=Ts()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function RPe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function OPe(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function EN(e){return e.length===6}function PPe(e){return Yv(e)===0&&Kv(e)===0&&Xv(e)===0}function NPe(e,t,r){if(e==null||t==null)return e===t;if(!EN(e)||!EN(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const Jx=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Cle=[0,0,0,0,0,0];Zv();function LPe(e,{isPrimitive:t,width:r,depth:i,height:s}){const n=t?10:1;if(r==null&&s==null&&i==null)return[n*e[0],n*e[1],n*e[2]];const o=rm(r,i,s);let l;for(let p=0;p<3;p++){const m=o[p];if(m!=null){l=m/e[p];break}}for(let p=0;p<3;p++)o[p]==null&&(o[p]=e[p]*l);return o}const kle=JR(-.5,-.5,-.5,.5,.5,.5),Rle=JR(-.5,-.5,0,.5,.5,1),Ole=JR(-.5,-.5,0,.5,.5,.5);function DPe(e){switch(e){case"sphere":case"cube":case"diamond":return kle;case"cylinder":case"cone":case"inverted-cone":return Rle;case"tetrahedron":return Ole;default:return}}const ZR=["butt","square","round"],Ple=[...ZR,"none"],Pz=["miter","bevel","round"];var Zx;let $d=Zx=class extends ee{constructor(e){super(e),this.color=new Ke([0,0,0,1]),this.size=uo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new Zx(e)}};a([A(Zc({colorRequiredOnWrite:!0}))],$d.prototype,"color",void 0),a([A({...Ka,json:{write:{isRequired:!0}}})],$d.prototype,"size",void 0),a([A(xz)],$d.prototype,"pattern",void 0),a([A({type:ZR,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],$d.prototype,"patternCap",void 0),$d=Zx=a([P("esri.symbols.support.Symbol3DOutline")],$d);var u2,mf;let gs=(mf=class extends Es{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new u2(t)}static fromSimpleFillSymbol(t){var s,n,o;const r=t.outline&&t.outline.style&&t.outline.style!=="solid"?new op({style:t.outline.style}):null,i={size:((s=t.outline)==null?void 0:s.width)??0,color:(((n=t.outline)==null?void 0:n.color)??fg).clone(),pattern:r};return r&&((o=t.outline)!=null&&o.cap)&&(i.patternCap=t.outline.cap),new u2({material:new mg({color:(t.color??mle).clone()}),pattern:t.style&&t.style!=="solid"?new jA({style:t.style}):null,outline:i})}},u2=mf,mf);a([Ne({Fill:"fill"},{readOnly:!0})],gs.prototype,"type",void 0),a([A({type:mg,json:{write:!0}})],gs.prototype,"material",void 0),a([A(fle)],gs.prototype,"pattern",void 0),a([A({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],gs.prototype,"castShadows",void 0),a([A({type:$d,json:{write:!0}})],gs.prototype,"outline",void 0),a([A($z)],gs.prototype,"edges",void 0),gs=u2=a([P("esri.symbols.FillSymbol3DLayer")],gs);var Yx;const Nle=si()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let xd=Yx=class extends ee{constructor(e){super(e)}readHref(e,t,r){return e?nh(e,r):t.dataURI}writeHref(e,t,r,i){e&&(pu(e)?t.dataURI=e:(t.href=zp(e,i),nn(t.href)&&(t.href=no(t.href))))}clone(){return new Yx({href:this.href,primitive:this.primitive})}};a([A({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],xd.prototype,"href",void 0),a([pe("href")],xd.prototype,"readHref",null),a([ye("href",{href:{type:String},dataURI:{type:String}})],xd.prototype,"writeHref",null),a([Ne(Nle)],xd.prototype,"primitive",void 0),xd=Yx=a([P("esri.symbols.support.IconSymbol3DLayerResource")],xd);const FPe="circle";var Kx;let BA=Kx=class extends je{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new Kx({x:this.x,y:this.y})}};a([A({type:Number})],BA.prototype,"x",void 0),a([A({type:Number})],BA.prototype,"y",void 0),BA=Kx=a([P("esri.symbols.support.Symbol3DAnchorPosition2D")],BA);var Xx;let vy=Xx=class extends ee{constructor(e){super(e),this.color=new Ke([0,0,0,1]),this.size=uo(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new Xx(e)}};a([A(Zc({colorRequiredOnWrite:!0}))],vy.prototype,"color",void 0),a([A({...Ka,json:{write:{isRequired:!0}}})],vy.prototype,"size",void 0),vy=Xx=a([P("esri.symbols.support.Symbol3DIconOutline")],vy);var qh,yf;let Bi=(yf=class extends Es{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new qh({anchor:this.anchor,anchorPosition:H(this.anchorPosition),enabled:this.enabled,material:H(this.material),outline:H(this.outline),resource:H(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(t){const r=t.color||fg,i=TN(t),s=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||fg).clone()}:null;return new qh({size:t.size,angle:t.angle,resource:{primitive:Dle((()=>de.getLogger(this.prototype)),t.style)},material:{color:r},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const r=!t.color||yle(t.color)?fg:t.color,i=TN(t);return new qh({size:t.width<=t.height?t.height:t.width,angle:t.angle,resource:{href:t.url},material:{color:r.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new qh({resource:{href:aV({mediaType:"application/json",data:JSON.stringify(t.data)})}})}},qh=yf,yf);function TN(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=$N(e.xoffset),s=$N(e.yoffset);return(i||s)&&t&&r?{x:-i/t,y:s/r}:null}function $N(e){return isFinite(e)?e:0}a([A({type:$n,json:{write:!0}})],Bi.prototype,"material",void 0),a([A({type:xd,json:{write:!0}})],Bi.prototype,"resource",void 0),a([Ne({Icon:"icon"},{readOnly:!0})],Bi.prototype,"type",void 0),a([A({...Ka,json:{write:{isRequired:!0}}})],Bi.prototype,"size",void 0),a([Ne({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Bi.prototype,"anchor",void 0),a([A({type:BA,json:{type:[Number],read:{reader:e=>new BA({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Bi.prototype,"anchorPosition",void 0),a([A({type:vy,json:{write:!0}})],Bi.prototype,"outline",void 0),a([A({type:Number,json:{write:!0,default:0}})],Bi.prototype,"angle",void 0),Bi=qh=a([P("esri.symbols.IconSymbol3DLayer")],Bi);const Lle={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Dle(e,t){return Lle[t]||(e().warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Fle=["begin","end","begin-end"],Nz=["arrow","circle","square","diamond","cross","x"];let zl=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};a([A({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],zl.prototype,"type",void 0),a([A({type:Fle,json:{default:"begin-end",write:!0}})],zl.prototype,"placement",void 0),a([A({type:Nz,json:{default:"arrow",write:!0}})],zl.prototype,"style",void 0),a([A({type:Ke,json:{type:[Et],default:null,write:!0}})],zl.prototype,"color",void 0),zl=a([P("esri.symbols.LineStyleMarker3D")],zl);var c2,gf;let ys=(gf=class extends Es{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=uo(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new c2(t)}static fromSimpleLineSymbol(t){var i;const r={enabled:!0,size:t.width??uo(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new op({style:t.style}):null,material:new $n({color:(t.color||fg).clone()}),marker:t.marker?new zl({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new c2(r)}},c2=gf,gf);a([A({type:$n,json:{write:!0}})],ys.prototype,"material",void 0),a([Ne({Line:"line"},{readOnly:!0})],ys.prototype,"type",void 0),a([A({type:Pz,json:{write:!0,default:"miter"}})],ys.prototype,"join",void 0),a([A({type:ZR,json:{write:!0,default:"butt"}})],ys.prototype,"cap",void 0),a([A({...Ka,json:{write:{isRequired:!0}}})],ys.prototype,"size",void 0),a([A(xz)],ys.prototype,"pattern",void 0),a([A({types:{key:"type",base:zl,typeMap:{style:zl}},json:{write:!0}})],ys.prototype,"marker",void 0),ys=c2=a([P("esri.symbols.LineSymbol3DLayer")],ys);var eI;const jle=si()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let wy=eI=class extends ee{clone(){return new eI({href:this.href,primitive:this.primitive})}};a([A({type:String,json:{read:TS,write:Gp}})],wy.prototype,"href",void 0),a([Ne(jle)],wy.prototype,"primitive",void 0),wy=eI=a([P("esri.symbols.support.ObjectSymbol3DLayerResource")],wy);const BPe="sphere";var tI;let Xd=tI=class extends je{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new tI({x:this.x,y:this.y,z:this.z})}};a([A({type:Number})],Xd.prototype,"x",void 0),a([A({type:Number})],Xd.prototype,"y",void 0),a([A({type:Number})],Xd.prototype,"z",void 0),Xd=tI=a([P("esri.symbols.support.Symbol3DAnchorPosition3D")],Xd);var rI,vf;let $i=(vf=class extends Es{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,r,i;return new rI({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((r=this.material)==null?void 0:r.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},rI=vf,vf);a([A({type:$n,json:{write:!0}})],$i.prototype,"material",void 0),a([A({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],$i.prototype,"castShadows",void 0),a([A({type:wy,json:{write:!0}})],$i.prototype,"resource",void 0),a([Ne({Object:"object"},{readOnly:!0})],$i.prototype,"type",void 0),a([A({type:Number,json:{write:!0}})],$i.prototype,"width",void 0),a([A({type:Number,json:{write:!0}})],$i.prototype,"height",void 0),a([A({type:Number,json:{write:!0}})],$i.prototype,"depth",void 0),a([Ne({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],$i.prototype,"anchor",void 0),a([A({type:Xd,json:{type:[Number],read:{reader:e=>new Xd({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],$i.prototype,"anchorPosition",void 0),a([A({type:Number,json:{write:!0}})],$i.prototype,"heading",void 0),a([A({type:Number,json:{write:!0}})],$i.prototype,"tilt",void 0),a([A({type:Number,json:{write:!0}})],$i.prototype,"roll",void 0),a([A({readOnly:!0})],$i.prototype,"isPrimitive",null),$i=rI=a([P("esri.symbols.ObjectSymbol3DLayer")],$i);var iI,wf;let ji=(wf=class extends Es{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,r){return t??(r.height==null&&r.size!=null?r.size:void 0)}readHeight(t,r){return t??(r.width==null&&r.size!=null?r.size:void 0)}clone(){return new iI({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},iI=wf,wf);a([A({type:$n,json:{write:!0}})],ji.prototype,"material",void 0),a([A({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ji.prototype,"castShadows",void 0),a([Ne({Path:"path"},{readOnly:!0})],ji.prototype,"type",void 0),a([A({type:["circle","quad"],json:{write:!0,default:"circle"}})],ji.prototype,"profile",void 0),a([A({type:Pz,json:{write:!0,default:"miter"}})],ji.prototype,"join",void 0),a([A({type:Ple,json:{write:!0,default:"butt"}})],ji.prototype,"cap",void 0),a([A({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ji.prototype,"width",void 0),a([pe("width",["width","size","height"])],ji.prototype,"readWidth",null),a([A({type:Number,json:{write:!0}})],ji.prototype,"height",void 0),a([pe("height",["height","size","width"])],ji.prototype,"readHeight",null),a([A({type:["center","bottom","top"],json:{write:!0,default:"center"}})],ji.prototype,"anchor",void 0),a([A({type:["heading","all"],json:{write:!0,default:"all"}})],ji.prototype,"profileRotation",void 0),ji=iI=a([P("esri.symbols.PathSymbol3DLayer")],ji);const Ble=["none","underline","line-through"],Ule=["normal","italic","oblique"],Vle=["normal","lighter","bold","bolder"],Lz={type:Number,cast:e=>{const t=bs(e);return t===0?1:lo(t,.1,4)},nonNullable:!0},zle=["left","right","center"],Gle=["baseline","top","middle","bottom"],Dz={type:zle,nonNullable:!0},Fz={type:Gle,nonNullable:!0},UPe=8;var sI;let Jn=sI=class extends ee{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Rt(e)}clone(){return new sI({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};a([A({type:Ble,json:{default:"none",write:!0}})],Jn.prototype,"decoration",void 0),a([A({type:String,json:{write:!0}})],Jn.prototype,"family",void 0),a([A({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Jn.prototype,"size",void 0),a([Ft("size")],Jn.prototype,"castSize",null),a([A({type:Ule,json:{default:"normal",write:!0}})],Jn.prototype,"style",void 0),a([A({type:Vle,json:{default:"normal",write:!0}})],Jn.prototype,"weight",void 0),Jn=sI=a([P("esri.symbols.Font")],Jn);var nI;let UA=nI=class extends ee{constructor(){super(...arguments),this.color=new Ke([0,0,0,1]),this.size=0}clone(){const e={color:H(this.color),size:this.size};return new nI(e)}};a([A(Zc())],UA.prototype,"color",void 0),a([A(Ka)],UA.prototype,"size",void 0),UA=nI=a([P("esri.symbols.support.Symbol3DHalo")],UA);let yg=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.color=null}};a([A(Zc())],yg.prototype,"color",void 0),yg=a([P("esri.symbols.support.Symbol3DTextBackground")],yg);var d2,bf;let pi=(bf=class extends Es{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,r,i,s){const n={...s,textSymbol3D:!0};r.font=t.write({},n),delete r.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new d2({enabled:this.enabled,font:this.font&&H(this.font),halo:this.halo&&H(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:H(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new d2({font:t.font!=null?t.font.clone():new Jn,halo:qle(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new $n({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new yg({color:t.backgroundColor.clone()}):null})}},d2=bf,bf);function qle(e,t){return e&&t!=null&&t>0?new UA({color:H(e),size:t}):null}a([A({type:Jn,json:{write:!0}})],pi.prototype,"font",null),a([ye("font")],pi.prototype,"writeFont",null),a([A({type:UA,json:{write:!0}})],pi.prototype,"halo",void 0),a([A({...Dz,json:{default:"center",write:!0}})],pi.prototype,"horizontalAlignment",void 0),a([A({...Lz,json:{default:1,write:!0}})],pi.prototype,"lineHeight",void 0),a([A({type:$n,json:{write:!0}})],pi.prototype,"material",void 0),a([A({type:yg,json:{write:!0}})],pi.prototype,"background",void 0),a([A(Ka)],pi.prototype,"size",null),a([A({type:String,json:{write:!0}})],pi.prototype,"text",void 0),a([Ne({Text:"text"},{readOnly:!0})],pi.prototype,"type",void 0),a([A({...Fz,json:{default:"baseline",write:!0}})],pi.prototype,"verticalAlignment",void 0),pi=d2=a([P("esri.symbols.TextSymbol3DLayer")],pi);var oI,_f;let Pl=(_f=class extends Es{constructor(t){super(t),this.color=aI.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new oI({color:H(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},oI=_f,_f);a([A({type:Ke,nonNullable:!0,json:{type:[Et],write:(e,t,r)=>t[r]=e.toArray(Ke.AlphaMode.UNLESS_OPAQUE),default:()=>aI.clone(),defaultEquals:e=>e.toCss(!0)===aI.toCss(!0)}})],Pl.prototype,"color",void 0),a([Ne({Water:"water"},{readOnly:!0})],Pl.prototype,"type",void 0),a([A({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Pl.prototype,"waterbodySize",void 0),a([A({type:Number,json:{write:!0,default:null}})],Pl.prototype,"waveDirection",void 0),a([A({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Pl.prototype,"waveStrength",void 0),Pl=oI=a([P("esri.symbols.WaterSymbol3DLayer")],Pl);const aI=new Ke([0,119,190]);var lI;let Gl=lI=class extends je{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new lI({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};a([A({type:String})],Gl.prototype,"name",void 0),a([A({type:String})],Gl.prototype,"styleUrl",void 0),a([A({type:String})],Gl.prototype,"styleName",void 0),a([A({type:me})],Gl.prototype,"portal",void 0),Gl=lI=a([P("esri.symbols.support.StyleOrigin")],Gl);var uI;let gg=uI=class extends je{constructor(){super(...arguments),this.url=""}clone(){return new uI({url:this.url})}};a([A({type:String})],gg.prototype,"url",void 0),gg=uI=a([P("esri.symbols.support.Thumbnail")],gg);const jz={icon:Bi,object:$i,line:ys,path:ji,fill:gs,extrude:Ol,text:pi,water:Pl},Hle=Te.ofType({base:Es,key:"type",typeMap:jz,errorContext:"symbol-layer"});let Js=class extends Fr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,s=i||Te;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&de.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){uu(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const s=nh(t.styleUrl,i);return new Gl({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new Gl({portal:(i==null?void 0:i.portal)||me.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new kn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,s){if(t.styleUrl&&t.name){let n=zp(t.styleUrl,s);nn(n)&&(n=no(n)),r.styleOrigin={styleUrl:n,name:t.name}}else t.styleName&&t.name&&(t.portal&&(s!=null&&s.portal)&&!oV(t.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new kn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Es||t&&jz[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};a([A({json:{read:!1,write:!1}})],Js.prototype,"color",null),a([A({type:Hle,nonNullable:!0,json:{write:!0}}),Ft(bz)],Js.prototype,"symbolLayers",null),a([A({type:Gl})],Js.prototype,"styleOrigin",void 0),a([pe("styleOrigin")],Js.prototype,"readStyleOrigin",null),a([ye("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Js.prototype,"writeStyleOrigin",null),a([A({type:gg,json:{read:!1}})],Js.prototype,"thumbnail",void 0),a([A({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Js.prototype,"type",void 0),Js=a([P("esri.symbols.Symbol3D")],Js);let VA=class extends ee{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};a([A({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],VA.prototype,"type",void 0),a([A({readOnly:!0})],VA.prototype,"visible",void 0),VA=a([P("esri.symbols.callouts.Callout3D")],VA);var cI;let p2=cI=class extends ee{constructor(e){super(e),this.color=new Ke("white")}clone(){return new cI({color:H(this.color)})}};a([A(Zc({colorRequiredOnWrite:!0}))],p2.prototype,"color",void 0),p2=cI=a([P("esri.symbols.callouts.LineCallout3DBorder")],p2);const Wle=p2;var dI;let Nl=dI=class extends VA{constructor(e){super(e),this.type="line",this.color=new Ke([0,0,0,1]),this.size=uo(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new dI({color:H(this.color),size:this.size,border:H(this.border)})}};a([Ne({line:"line"})],Nl.prototype,"type",void 0),a([A(Zc({colorRequiredOnWrite:!0}))],Nl.prototype,"color",void 0),a([A({...Ka,json:{write:{isRequired:!0}}})],Nl.prototype,"size",void 0),a([A({type:Wle,json:{write:!0}})],Nl.prototype,"border",void 0),a([A({readOnly:!0})],Nl.prototype,"visible",null),Nl=dI=a([P("esri.symbols.callouts.LineCallout3D")],Nl);function YR(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function Bz(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!YR(e)}function qPe(e){return e.type==="point-3d"||e.type==="label-3d"}function HPe(e){return e.horizontalAlignment==="center"}const Uz={types:{key:"type",base:VA,typeMap:{line:Nl}},json:{write:!0}};var pI;let cc=pI=class extends ee{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new pI({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};a([A({...Ka,json:{write:{isRequired:!0}}})],cc.prototype,"screenLength",void 0),a([A({type:Number,nonNullable:!0,json:{write:!0,default:0}})],cc.prototype,"minWorldLength",void 0),a([A({type:Number,json:{write:!0}})],cc.prototype,"maxWorldLength",void 0),cc=pI=a([P("esri.symbols.support.Symbol3DVerticalOffset")],cc);var h2;const Vz=Te.ofType({base:null,key:"type",typeMap:{text:pi}});let Do=h2=class extends Js{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Vz,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Bz(this)}hasVisibleVerticalOffset(){return YR(this)}clone(){return new h2({styleOrigin:H(this.styleOrigin),symbolLayers:H(this.symbolLayers),thumbnail:H(this.thumbnail),callout:H(this.callout),verticalOffset:H(this.verticalOffset)})}static fromTextSymbol(e){return new h2({symbolLayers:new Te([pi.fromTextSymbol(e)])})}};a([A({type:cc,json:{write:!0}})],Do.prototype,"verticalOffset",void 0),a([A(Uz)],Do.prototype,"callout",void 0),a([A({json:{read:!1,write:!1}})],Do.prototype,"styleOrigin",void 0),a([A({type:Vz})],Do.prototype,"symbolLayers",void 0),a([Ne({LabelSymbol3D:"label-3d"},{readOnly:!0})],Do.prototype,"type",void 0),Do=h2=a([P("esri.symbols.LabelSymbol3D")],Do);var A2;const zz=Te.ofType({base:null,key:"type",typeMap:{line:ys,path:ji}}),Qle=Te.ofType({base:null,key:"type",typeMap:{line:ys,path:ji}});let Wo=A2=class extends Js{constructor(e){super(e),this.symbolLayers=new zz,this.type="line-3d"}clone(){return new A2({styleOrigin:H(this.styleOrigin),symbolLayers:H(this.symbolLayers),thumbnail:H(this.thumbnail)})}static fromSimpleLineSymbol(e){return new A2({symbolLayers:new Te([ys.fromSimpleLineSymbol(e)])})}};a([A({type:zz,json:{type:Qle}})],Wo.prototype,"symbolLayers",void 0),a([Ne({LineSymbol3D:"line-3d"},{readOnly:!0})],Wo.prototype,"type",void 0),Wo=A2=a([P("esri.symbols.LineSymbol3D")],Wo);var f2;const Gz=Te.ofType({base:null,key:"type",typeMap:{fill:gs}});let ru=f2=class extends Js{constructor(e){super(e),this.symbolLayers=new Gz,this.type="mesh-3d"}clone(){return new f2({styleOrigin:H(this.styleOrigin),symbolLayers:H(this.symbolLayers),thumbnail:H(this.thumbnail)})}static fromSimpleFillSymbol(e){return new f2({symbolLayers:new Te([gs.fromSimpleFillSymbol(e)])})}};a([A({type:Gz})],ru.prototype,"symbolLayers",void 0),a([Ne({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],ru.prototype,"type",void 0),ru=f2=a([P("esri.symbols.MeshSymbol3D")],ru);let by=class extends Fr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};a([Ne({esriSLS:"simple-line"},{readOnly:!0})],by.prototype,"type",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],by.prototype,"width",void 0),by=a([P("esri.symbols.LineSymbol")],by);var hI;let aa=hI=class extends ee{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new hI({color:H(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};a([A({type:["begin","end","begin-end"],json:{write:!0}})],aa.prototype,"placement",void 0),a([Ne({"line-marker":"line-marker"},{readOnly:!0}),A({json:{origins:{"web-map":{write:!1}}}})],aa.prototype,"type",void 0),a([A({type:Nz})],aa.prototype,"style",void 0),a([ye("style")],aa.prototype,"writeStyle",null),a([A({type:Ke,value:null,json:{write:{allowNull:!0}}})],aa.prototype,"color",null),a([pe("color")],aa.prototype,"readColor",null),a([ye("color")],aa.prototype,"writeColor",null),aa=hI=a([P("esri.symbols.LineSymbolMarker")],aa);const Jle=aa;var AI;const XT=new ct({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Qr=AI=class extends by{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=Rt(r)),i!=null&&(o.cap=i),s!=null&&(o.join=s),n!=null&&(o.miterLimit=Rt(n)),o}clone(){var e;return new AI({color:H(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};a([Ne({esriSLS:"simple-line"},{readOnly:!0})],Qr.prototype,"type",void 0),a([A({type:XT.apiValues,json:{read:XT.read,write:XT.write}})],Qr.prototype,"style",void 0),a([A({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Qr.prototype,"cap",void 0),a([A({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Qr.prototype,"join",void 0),a([A({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Jle}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"marker",void 0),a([A({type:Number,json:{read:!1,write:!1}})],Qr.prototype,"miterLimit",void 0),Qr=AI=a([P("esri.symbols.SimpleLineSymbol")],Qr);let zA=class extends Fr{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};a([A({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Qr}},json:{default:null,write:!0}})],zA.prototype,"outline",void 0),a([A({type:["simple-fill","picture-fill"],readOnly:!0})],zA.prototype,"type",void 0),zA=a([P("esri.symbols.FillSymbol")],zA);function Zle(e,t,r){return t.imageData?aV({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):qz(t.url,r)}function qz(e,t){if(!nn(e)){const r=Kle(t);if(r)return Up(r,"images",e)}return nh(e,t)}function Yle(e,t,r,i){if(pu(e)){const s=Vp(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,r&&r.imageData===t.imageData&&r.url&&Gp(r.url,t,"url",i)}else Gp(e,t,"url",i)}const Hz={json:{read:{source:["imageData","url"],reader:Zle},write:{writer(e,t,r,i){Yle(e,t,this.source,i)}}}},Wz={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=qz(t.url,r)),i}}}};function Kle(e){var s,n;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(s=r.parsedUrl)==null?void 0:s.path:i==="map-image"||i==="tile"?(n=e.url)==null?void 0:n.path:null}var fI;let zs=fI=class extends zA{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),r!=null&&(s.width=Rt(r)),i!=null&&(s.height=Rt(i)),s}clone(){const e=new fI({color:H(this.color),height:this.height,outline:H(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",H(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};a([Ne({esriPFS:"picture-fill"},{readOnly:!0})],zs.prototype,"type",void 0),a([A(Hz)],zs.prototype,"url",void 0),a([A({type:Number,json:{write:!0}})],zs.prototype,"xscale",void 0),a([A({type:Number,json:{write:!0}})],zs.prototype,"yscale",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],zs.prototype,"width",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],zs.prototype,"height",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],zs.prototype,"xoffset",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],zs.prototype,"yoffset",void 0),a([A(Wz)],zs.prototype,"source",void 0),zs=fI=a([P("esri.symbols.PictureFillSymbol")],zs);let Ll=class extends Fr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};a([A({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ll.prototype,"angle",void 0),a([A({type:["simple-marker","picture-marker"],readOnly:!0})],Ll.prototype,"type",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],Ll.prototype,"xoffset",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],Ll.prototype,"yoffset",void 0),a([A({cast:e=>e==="auto"?e:bs(Rt(e)),json:{write:!0}})],Ll.prototype,"size",void 0),Ll=a([P("esri.symbols.MarkerSymbol")],Ll);var mI;let fs=mI=class extends Ll{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=Rt(t)),r!=null&&(i.height=Rt(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new mI({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",H(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};a([A({json:{write:!1}})],fs.prototype,"color",void 0),a([Ne({esriPMS:"picture-marker"},{readOnly:!0})],fs.prototype,"type",void 0),a([A(Hz)],fs.prototype,"url",void 0),a([A(Wz)],fs.prototype,"source",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],fs.prototype,"height",void 0),a([pe("height",["height","size"])],fs.prototype,"readHeight",null),a([A({type:Number,cast:Rt,json:{write:!0}})],fs.prototype,"width",void 0),a([A({json:{write:!1}})],fs.prototype,"size",void 0),fs=mI=a([P("esri.symbols.PictureMarkerSymbol")],fs);var Id;const Qz=Te.ofType({base:null,key:"type",typeMap:{icon:Bi,object:$i,text:pi}});let _s=Id=class extends Js{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Qz,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Bz(this)}hasVisibleVerticalOffset(){return YR(this)}clone(){return new Id({verticalOffset:H(this.verticalOffset),callout:H(this.callout),styleOrigin:H(this.styleOrigin),symbolLayers:H(this.symbolLayers),thumbnail:H(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Id({symbolLayers:new Te([Bi.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Id({symbolLayers:new Te([Bi.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,s;if(((s=(i=e.data)==null?void 0:i.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new Id(r!=null&&r.callout?{symbolLayers:new Te([Bi.fromCIMSymbol(e)]),callout:new Nl({size:.5,color:new Ke([0,0,0])}),verticalOffset:new cc({screenLength:40})}:{symbolLayers:new Te([Bi.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Id({symbolLayers:new Te([pi.fromTextSymbol(e)])})}};a([A({type:cc,json:{write:!0}})],_s.prototype,"verticalOffset",void 0),a([A(Uz)],_s.prototype,"callout",void 0),a([A({type:Qz,json:{origins:{"web-scene":{write:!0}}}})],_s.prototype,"symbolLayers",void 0),a([Ne({PointSymbol3D:"point-3d"},{readOnly:!0})],_s.prototype,"type",void 0),_s=Id=a([P("esri.symbols.PointSymbol3D")],_s);var _y;const Jz=Te.ofType({base:null,key:"type",typeMap:{extrude:Ol,fill:gs,icon:Bi,line:ys,object:$i,text:pi,water:Pl}});let so=_y=class extends Js{constructor(e){super(e),this.symbolLayers=new Jz,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&jc(de.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&jc(de.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Vc((()=>this.symbolLayers),"after-add",(({item:t})=>e(t)),Wa))}clone(){return new _y({styleOrigin:H(this.styleOrigin),symbolLayers:H(this.symbolLayers),thumbnail:H(this.thumbnail)})}static fromJSON(e){var r;const t=new _y;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new _y({symbolLayers:new Te([gs.fromSimpleFillSymbol(e)])})}};a([A({type:Jz,json:{write:!0}})],so.prototype,"symbolLayers",void 0),a([Ne({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],so.prototype,"type",void 0),so=_y=a([P("esri.symbols.PolygonSymbol3D")],so);var yI;const e3=new ct({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let En=yI=class extends zA{constructor(...e){super(...e),this.color=new Ke([0,0,0,.25]),this.outline=new Qr,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new yI({color:H(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};a([A()],En.prototype,"color",void 0),a([A()],En.prototype,"outline",void 0),a([Ne({esriSFS:"simple-fill"},{readOnly:!0})],En.prototype,"type",void 0),a([A({type:e3.apiValues,json:{read:e3.read,write:e3.write}})],En.prototype,"style",void 0),En=yI=a([P("esri.symbols.SimpleFillSymbol")],En);var gI;const t3=new ct({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let hi=gI=class extends Ll{constructor(...e){super(...e),this.color=new Ke([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Qr}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=Rt(t)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new gI({angle:this.angle,color:H(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};a([A()],hi.prototype,"color",void 0),a([ye("color")],hi.prototype,"writeColor",null),a([Ne({esriSMS:"simple-marker"},{readOnly:!0})],hi.prototype,"type",void 0),a([A()],hi.prototype,"size",void 0),a([A({type:t3.apiValues,json:{read:t3.read,write:t3.write}})],hi.prototype,"style",void 0),a([A({type:String,json:{write:!0}})],hi.prototype,"path",null),a([A({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Qr}},json:{default:null,write:!0}})],hi.prototype,"outline",void 0),hi=gI=a([P("esri.symbols.SimpleMarkerSymbol")],hi);var vI;let Wt=vI=class extends Fr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Jn,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return Rt(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new vI({angle:this.angle,backgroundColor:H(this.backgroundColor),borderLineColor:H(this.borderLineColor),borderLineSize:this.borderLineSize,color:H(this.color),font:this.font&&this.font.clone(),haloColor:H(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};a([A({type:Ke,json:{write:!0}})],Wt.prototype,"backgroundColor",void 0),a([A({type:Ke,json:{write:!0}})],Wt.prototype,"borderLineColor",void 0),a([A({type:Number,json:{write:!0},cast:Rt})],Wt.prototype,"borderLineSize",void 0),a([A({type:Jn,json:{write:!0}})],Wt.prototype,"font",void 0),a([A({...Dz,json:{write:!0}})],Wt.prototype,"horizontalAlignment",void 0),a([A({type:Boolean,json:{write:!0}})],Wt.prototype,"kerning",void 0),a([A({type:Ke,json:{write:!0}})],Wt.prototype,"haloColor",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],Wt.prototype,"haloSize",void 0),a([A({type:Boolean,json:{write:!0}})],Wt.prototype,"rightToLeft",void 0),a([A({type:Boolean,json:{write:!0}})],Wt.prototype,"rotated",void 0),a([A({type:String,json:{write:!0}})],Wt.prototype,"text",void 0),a([Ne({esriTS:"text"},{readOnly:!0})],Wt.prototype,"type",void 0),a([A({...Fz,json:{write:!0}})],Wt.prototype,"verticalAlignment",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],Wt.prototype,"xoffset",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],Wt.prototype,"yoffset",void 0),a([A({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Wt.prototype,"angle",void 0),a([A({type:Number,json:{write:!0}})],Wt.prototype,"width",void 0),a([A({type:Number})],Wt.prototype,"lineWidth",void 0),a([ye("lineWidth")],Wt.prototype,"writeLineWidth",null),a([Ft("lineWidth")],Wt.prototype,"castLineWidth",null),a([A(Lz)],Wt.prototype,"lineHeight",void 0),a([ye("lineHeight")],Wt.prototype,"writeLineHeight",null),Wt=vI=a([P("esri.symbols.TextSymbol")],Wt);var wI;let Mi=wI=class extends Fr{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:me.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new wI({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol(e)}async fetchCIMSymbol(e){U9(de.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const t=await this._fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new Q("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,r=t?this._fetchCacheKey:null;if(t!=null){const o=r&&t.get(r);if(o)return o.clone()}const{resolveWebStyleSymbol:i}=await ce(()=>import("./webStyleSymbolUtils-COzWNGhD.js"),__vite__mapDeps([24,25]),import.meta.url);dr(e);const s=i(this,{portal:this.portal},e);s.catch((o=>{de.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)}));const n=await s;return t!=null&&t.set(r,n.clone()),n}};a([A({json:{write:!1}})],Mi.prototype,"color",void 0),a([A({type:String,json:{write:!0}})],Mi.prototype,"styleName",void 0),a([A({type:me,json:{write:!1}})],Mi.prototype,"portal",void 0),a([A({type:String,json:{read:TS,write:Gp}})],Mi.prototype,"styleUrl",void 0),a([A({type:gg,json:{read:!1}})],Mi.prototype,"thumbnail",void 0),a([A({type:String,json:{write:!0}})],Mi.prototype,"name",void 0),a([Ne({styleSymbolReference:"web-style"},{readOnly:!0})],Mi.prototype,"type",void 0),a([A()],Mi.prototype,"_fetchCacheKey",null),Mi=wI=a([P("esri.symbols.WebStyleSymbol")],Mi);function ZPe(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Zz(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const bc={base:Fr,key:"type",typeMap:{"simple-fill":En,"picture-fill":zs,"picture-marker":fs,"simple-line":Qr,"simple-marker":hi,text:Wt,"label-3d":Do,"line-3d":Wo,"mesh-3d":ru,"point-3d":_s,"polygon-3d":so,"web-style":Mi,cim:is},errorContext:"symbol"},YPe={base:Fr,key:"type",typeMap:{"picture-marker":fs,"simple-marker":hi,"point-3d":_s,cim:is},errorContext:"symbol"},KPe={base:Fr,key:"type",typeMap:{"simple-line":Qr,"line-3d":Wo,cim:is},errorContext:"symbol"},XPe={base:Fr,key:"type",typeMap:{"simple-fill":En,"picture-fill":zs,"polygon-3d":so,cim:is},errorContext:"symbol"},Xle={base:Fr,key:"type",typeMap:{"picture-marker":fs,"simple-marker":hi,text:Wt,"web-style":Mi,cim:is},errorContext:"symbol"},eue=z0({types:bc}),Yz={base:Fr,key:"type",typeMap:{"simple-fill":En,"picture-fill":zs,"picture-marker":fs,"simple-line":Qr,"simple-marker":hi,text:Wt,"line-3d":Wo,"mesh-3d":ru,"point-3d":_s,"polygon-3d":so,"web-style":Mi,cim:is},errorContext:"symbol"},tue={base:Fr,key:"type",typeMap:{text:Wt,"label-3d":Do},errorContext:"symbol"},xN={base:Fr,key:"type",typeMap:{"line-3d":Wo,"mesh-3d":ru,"point-3d":_s,"polygon-3d":so,"web-style":Mi,cim:is},errorContext:"symbol"},rue={base:Fr,key:"type",typeMap:{"label-3d":Do},errorContext:"symbol"},Kz=Ha(bc);var bI;function iue(e){if(!e)return null;const t={};for(const r in e){const i=Ya(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function sue(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}var Sf;let Sr=(Sf=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:Uw(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&tX(de.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const r=this._get("aggregateGeometries");JSON.stringify(r)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const r=this._get("attributes");r!==t&&(this._set("attributes",t),this._notifyLayer("attributes",r,t))}set geometry(t){const r=this._get("geometry");r!==t&&(this._set("geometry",t),(t==null?void 0:t.type)!=="mesh"&&this._notifyLayer("geometry",r,t))}set popupTemplate(t){const r=this._get("popupTemplate");r!==t&&(this._set("popupTemplate",t),this._notifyLayer("popupTemplate",r,t))}set symbol(t){const r=this._get("symbol");r!==t&&(this._set("symbol",t),this._notifyLayer("symbol",r,t))}get version(){return this._version}set visible(t){const r=this._get("visible");r!==t&&(this._set("visible",t),this._notifyLayer("visible",r,t))}cloneShallow(){return new bI({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[r,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(t){var r;return(r=this.attributes)==null?void 0:r[t]}setAttribute(t,r){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=r,this._notifyLayer("attributes",i,r,t)}else this.attributes={[t]:r}}getObjectId(){const t=this.sourceLayer??this.layer;return t?Zae(this,t):null}getGlobalId(){const t=this.sourceLayer??this.layer;return t&&"globalIdField"in t&&t.globalIdField?this.getAttribute(t.globalIdField):null}toJSON(){var t;return{aggregateGeometries:sue(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Zg(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyMeshTransformChanged(t={}){const{geometry:r}=this;if((r==null?void 0:r.type)==="mesh"){const i={origin:r.origin,transform:r.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,r,i,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:t,oldValue:r,newValue:i};t==="origin-transform"&&(n.action=s),t==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([ks((()=>{var t,r;return((t=this.geometry)==null?void 0:t.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(r=this.geometry.transform)==null?void 0:r.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0}),(({localMatrix:t,origin:r})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===r||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=r,this.notifyMeshTransformChanged())})),ks((()=>{var t;return((t=this.geometry)==null?void 0:t.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0}),(()=>{var r;const t=this.geometry;(t==null?void 0:t.type)==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(r=t.transform)==null?void 0:r.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)}),{equals:(t,r)=>t===r,sync:!0})])}},bI=Sf,Sf);a([A({value:null,json:{read:iue}})],Sr.prototype,"aggregateGeometries",null),a([A({value:null})],Sr.prototype,"attributes",null),a([A({value:null,types:tm,json:{read:Ya}})],Sr.prototype,"geometry",null),a([A({type:Boolean})],Sr.prototype,"isAggregate",void 0),a([A({clonable:!1})],Sr.prototype,"layer",void 0),a([A({clonable:"reference"})],Sr.prototype,"origin",void 0),a([A({type:Z0,value:null})],Sr.prototype,"popupTemplate",null),a([A({clonable:"reference"})],Sr.prototype,"sourceLayer",void 0),a([A({value:null,types:bc})],Sr.prototype,"symbol",null),a([A({clonable:!1,json:{read:!1,write:!1}})],Sr.prototype,"_version",void 0),a([A({type:Boolean,value:!0})],Sr.prototype,"visible",null),Sr=bI=a([P("esri.Graphic")],Sr);let nue=class Xz{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(A$),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new Xz,i=this._originStores[_t.DEFAULTS];i&&i.forEach(((s,n)=>{r.set(n,H(s),_t.DEFAULTS)}));for(let s=_t.SERVICE;s<A$;s++){const n=this._originStores[s];n&&n.forEach(((o,l)=>{t&&t.has(l)||r.set(l,H(o),s)}))}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=_t.USER){let s=this._originStores[i];if(s||(s=new Map,this._originStores[i]=s),s.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const n=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),n!==r}return!1}delete(t,r=_t.USER){const i=this._originStores[r];if(!i)return;const s=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let n=r-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,n);break}}}return s}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],s=i==null?void 0:i.get(t),n=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,r),n!==s}originOf(t){return this._propertyOriginMap.get(t)||_t.DEFAULTS}isAtOrigin(t,r){return this.has(t,r)&&this.originOf(t)===r}isBelowOrigin(t,r){return!this.has(t)||this.originOf(t)<r}forEach(t){this._values.forEach(t)}};const eG=e=>{let t=class extends e{constructor(...r){super(...r);const i=Cs(this),s=i.store,n=new nue;i.store=n,Yj(i,s,n)}read(r,i){Xj(this,r,i)}getAtOrigin(r,i){const s=r3(this),n=tu(i);if(typeof r=="string")return s.get(r,n);const o={};return r.forEach((l=>{o[l]=s.get(l,n)})),o}originOf(r){return Hg(this.originIdOf(r))}originIdOf(r){return r3(this).originOf(r)}revert(r,i){const s=r3(this),n=tu(i),o=Cs(this);let l;l=typeof r=="string"?r==="*"?s.keys(n):[r]:r,l.forEach((p=>{o.invalidate(p),s.revert(p,n),o.commit(p)}))}};return t=a([P("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function r3(e){return Cs(e).store}let IN=class extends eG(je){};IN=a([P("esri.core.ReadOnlyMultiOriginJSONSupport")],IN);const oue=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){Cs(this).clearOrigin(r,tu(i))}write(r,i){return rB(this,r=r||{},i),r}setAtOrigin(r,i,s){Cs(this).setAtOrigin(r,i,tu(s))}removeOrigin(r){const i=MN(this),s=tu(r),n=i.keys(s);for(const o of n)i.originOf(o)===s&&i.set(o,i.get(o,s),_t.USER)}updateOrigin(r,i){const s=MN(this),n=tu(i),o=qo(this,r);for(let l=n+1;l<A$;++l)s.delete(r,l);s.set(r,o,n)}toJSON(r){return this.write({},r)}};return t=a([P("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function MN(e){return Cs(e).store}const OS=e=>{let t=class extends oue(eG(e)){constructor(...r){super(...r)}};return t=a([P("esri.core.MultiOriginJSONSupport")],t),t};let _I=class extends OS(je){};_I=a([P("esri.core.MultiOriginJSONSupport")],_I);const tr=(e=>e)(["operational-layers","basemap","ground"]);var SI;let Md=SI=class extends ee{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new SI({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};a([A({type:String,json:{write:!0}})],Md.prototype,"expression",void 0),a([A({type:String,json:{write:!0}})],Md.prototype,"name",void 0),a([A({type:["boolean","date","number","string"],json:{write:!0}})],Md.prototype,"returnType",void 0),a([A({type:String,json:{write:!0}})],Md.prototype,"title",void 0),Md=SI=a([P("esri.form.ExpressionInfo")],Md);const aue=Md;let Cd=class extends ee{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};a([A({type:String,json:{write:!0}})],Cd.prototype,"description",void 0),a([A({type:String,json:{write:!0}})],Cd.prototype,"label",void 0),a([A()],Cd.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],Cd.prototype,"visibilityExpression",void 0),Cd=a([P("esri.form.elements.Element")],Cd);const qc=Cd;let m2=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.type=null}};a([A()],m2.prototype,"type",void 0),m2=a([P("esri.form.elements.inputs.attachments.Input")],m2);const Hc=m2,PS=["any","capture","upload"];let Hh=class extends Hc{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};a([A({type:["audio"],readOnly:!0,json:{write:!0}})],Hh.prototype,"type",void 0),a([A({type:PS,json:{write:!0}})],Hh.prototype,"inputMethod",void 0),a([A({type:Number,json:{write:!0}})],Hh.prototype,"maxDuration",void 0),Hh=a([P("esri.form.elements.inputs.attachments.AudioInput")],Hh);const CN=Hh;let Sy=class extends Hc{constructor(t){super(t),this.type="document",this.maxFileSize=null}};a([A({type:["document"],readOnly:!0,json:{write:!0}})],Sy.prototype,"type",void 0),a([A({type:Number,json:{write:!0}})],Sy.prototype,"maxFileSize",void 0),Sy=a([P("esri.form.elements.inputs.attachments.DocumentInput")],Sy);const kN=Sy;let Wh=class extends Hc{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};a([A({type:["image"],readOnly:!0,json:{write:!0}})],Wh.prototype,"type",void 0),a([A({type:PS,json:{write:!0}})],Wh.prototype,"inputMethod",void 0),a([A({type:Number,json:{write:!0}})],Wh.prototype,"maxImageSize",void 0),Wh=a([P("esri.form.elements.inputs.attachments.ImageInput")],Wh);const RN=Wh;let Ey=class extends Hc{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};a([A({type:["signature"],readOnly:!0,json:{write:!0}})],Ey.prototype,"type",void 0),a([A({type:PS,json:{write:!0}})],Ey.prototype,"inputMethod",void 0),Ey=a([P("esri.form.elements.inputs.attachments.SignatureInput")],Ey);const ON=Ey;let Qh=class extends Hc{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};a([A({type:["video"],readOnly:!0,json:{write:!0}})],Qh.prototype,"type",void 0),a([A({type:PS,json:{write:!0}})],Qh.prototype,"inputMethod",void 0),a([A({type:Number,json:{write:!0}})],Qh.prototype,"maxDuration",void 0),Qh=a([P("esri.form.elements.inputs.attachments.VideoInput")],Qh);const PN=Qh;function tG(e){return{nestableTypes:{base:Hc,key:"type",typeMap:{audio:CN,document:kN,image:RN,signature:ON,video:PN}},allTypes:{base:Hc,key:"type",typeMap:{attachment:e,audio:CN,document:kN,image:RN,signature:ON,video:PN}}}}function lue(e,t,r){return e?e.map((i=>Ha(t.nestableTypes,i))):null}function uue(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter((s=>i[s.type])).map((s=>i[s.type].fromJSON(s)))}function cue(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter((s=>i[s.type])).map((s=>s.toJSON()))}let wa=class extends Hc{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return lue(t,i3)}readInputs(t,r){return uue(r.inputTypes,i3)}writeInputs(t,r){r.inputTypes=cue(t,i3)}};a([A({type:["attachment"],readOnly:!0,json:{write:!0}})],wa.prototype,"type",void 0),a([A({type:["any","exact","exactOrNone"],json:{write:!0}})],wa.prototype,"attachmentAssociationType",void 0),a([A({json:{write:{isRequired:!0}}})],wa.prototype,"inputTypes",void 0),a([Ft("inputTypes")],wa.prototype,"castInputs",null),a([pe("inputTypes")],wa.prototype,"readInputs",null),a([ye("inputTypes")],wa.prototype,"writeInputs",null),wa=a([P("esri.form.elements.inputs.attachments.AttachmentInput")],wa);const i3=tG(wa),due=wa;var EI;const pue=tG(due);let pn=EI=class extends qc{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new EI({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};a([A({type:Boolean,json:{write:!0}})],pn.prototype,"allowUserRename",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],pn.prototype,"attachmentKeyword",void 0),a([A({type:Boolean,json:{write:!0}})],pn.prototype,"displayFilename",void 0),a([A({type:String,json:{write:!0}})],pn.prototype,"editableExpression",void 0),a([A({type:String,json:{write:!0}})],pn.prototype,"filenameExpression",void 0),a([A({types:pue.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],pn.prototype,"input",void 0),a([A({type:Number,json:{write:!0}})],pn.prototype,"maxAttachmentCount",void 0),a([A({type:Number,json:{write:!0}})],pn.prototype,"minAttachmentCount",void 0),a([A({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],pn.prototype,"type",void 0),a([A({type:Boolean,json:{write:!0}})],pn.prototype,"useOriginalFilename",void 0),pn=EI=a([P("esri.form.elements.AttachmentElement")],pn);const NN=pn;let y2=class extends ee{constructor(t){super(t),this.type=null}};a([A()],y2.prototype,"type",void 0),y2=a([P("esri.form.elements.inputs.Input")],y2);const hu=y2;let Ty=class extends hu{constructor(t){super(t),this.maxLength=null,this.minLength=0}};a([A({type:Number,json:{write:!0}})],Ty.prototype,"maxLength",void 0),a([A({type:Number,json:{write:!0}})],Ty.prototype,"minLength",void 0),Ty=a([P("esri.form.elements.inputs.TextInput")],Ty);const KR=Ty;var TI;let g2=TI=class extends KR{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new TI({maxLength:this.maxLength,minLength:this.minLength})}};a([A({type:["barcode-scanner"],json:{read:!1,write:!0}})],g2.prototype,"type",void 0),g2=TI=a([P("esri.form.elements.inputs.BarcodeScannerInput")],g2);const hue=g2;var $I;let Jh=$I=class extends hu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new $I({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};a([A({type:String,json:{write:!0}})],Jh.prototype,"noValueOptionLabel",void 0),a([A({type:Boolean,json:{write:!0}})],Jh.prototype,"showNoValueOption",void 0),a([A({type:["combo-box"],json:{read:!1,write:!0}})],Jh.prototype,"type",void 0),Jh=$I=a([P("esri.form.elements.inputs.ComboBoxInput")],Jh);const Aue=Jh;var xI;function LN(e){return e??null}function DN(e){return e??null}let la=xI=class extends hu{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return LN(t.max)}writeMax(e,t){t.max=DN(e)}readMin(e,t){return LN(t.min)}writeMin(e,t){t.min=DN(e)}clone(){return new xI({max:this.max,min:this.min})}};a([A({type:String,json:{type:String,write:!0}})],la.prototype,"max",void 0),a([pe("max")],la.prototype,"readMax",null),a([ye("max")],la.prototype,"writeMax",null),a([A({type:String,json:{type:String,write:!0}})],la.prototype,"min",void 0),a([pe("min")],la.prototype,"readMin",null),a([ye("min")],la.prototype,"writeMin",null),a([A({type:["date-picker"],json:{read:!1,write:!0}})],la.prototype,"type",void 0),la=xI=a([P("esri.form.elements.inputs.DatePickerInput")],la);const fue=la;var II;function s3(e){return e??null}function n3(e){return e??null}let Ds=II=class extends hu{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return s3(t.max)}writeMax(e,t){t.max=n3(e)}readMin(e,t){return s3(t.min)}writeMin(e,t){t.min=n3(e)}readTimeResolution(e,t){return s3(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=n3(e)}clone(){return new II({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};a([A({type:Boolean,json:{write:!0}})],Ds.prototype,"includeTimeOffset",void 0),a([A({type:String,json:{type:String,write:!0}})],Ds.prototype,"max",void 0),a([pe("max")],Ds.prototype,"readMax",null),a([ye("max")],Ds.prototype,"writeMax",null),a([A({type:String,json:{type:String,write:!0}})],Ds.prototype,"min",void 0),a([pe("min")],Ds.prototype,"readMin",null),a([ye("min")],Ds.prototype,"writeMin",null),a([A({type:String,json:{type:String,write:!0}})],Ds.prototype,"timeResolution",void 0),a([pe("timeResolution")],Ds.prototype,"readTimeResolution",null),a([ye("timeResolution")],Ds.prototype,"writeTimeResolution",null),a([A({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Ds.prototype,"type",void 0),Ds=II=a([P("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Ds);const mue=Ds;var MI;function FN(e){return e!=null?new Date(e):null}function jN(e){return e?e.getTime():null}let xo=MI=class extends hu{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return FN(t.max)}writeMax(e,t){t.max=jN(e)}readMin(e,t){return FN(t.min)}writeMin(e,t){t.min=jN(e)}clone(){return new MI({includeTime:this.includeTime,max:this.max,min:this.min})}};a([A({type:Boolean,json:{write:!0}})],xo.prototype,"includeTime",void 0),a([A({type:Date,json:{type:Number,write:!0}})],xo.prototype,"max",void 0),a([pe("max")],xo.prototype,"readMax",null),a([ye("max")],xo.prototype,"writeMax",null),a([A({type:Date,json:{type:Number,write:!0}})],xo.prototype,"min",void 0),a([pe("min")],xo.prototype,"readMin",null),a([ye("min")],xo.prototype,"writeMin",null),a([A({type:["datetime-picker"],json:{read:!1,write:!0}})],xo.prototype,"type",void 0),xo=MI=a([P("esri.form.elements.inputs.DateTimePickerInput")],xo);const yue=xo;var CI;let Zh=CI=class extends hu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new CI({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};a([A({type:String,json:{write:!0}})],Zh.prototype,"noValueOptionLabel",void 0),a([A({type:Boolean,json:{write:!0}})],Zh.prototype,"showNoValueOption",void 0),a([A({type:["radio-buttons"],json:{read:!1,write:!0}})],Zh.prototype,"type",void 0),Zh=CI=a([P("esri.form.elements.inputs.RadioButtonsInput")],Zh);const gue=Zh;var kI;let Yh=kI=class extends hu{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new kI({offValue:this.offValue,onValue:this.onValue})}};a([A({type:[String,Number],json:{write:!0}})],Yh.prototype,"offValue",void 0),a([A({type:[String,Number],json:{write:!0}})],Yh.prototype,"onValue",void 0),a([A({type:["switch"],json:{read:!1,write:!0}})],Yh.prototype,"type",void 0),Yh=kI=a([P("esri.form.elements.inputs.SwitchInput")],Yh);const vue=Yh;var RI;let v2=RI=class extends KR{constructor(e){super(e),this.type="text-area"}clone(){return new RI({maxLength:this.maxLength,minLength:this.minLength})}};a([A({type:["text-area"],json:{read:!1,write:!0}})],v2.prototype,"type",void 0),v2=RI=a([P("esri.form.elements.inputs.TextAreaInput")],v2);const wue=v2;var OI;let w2=OI=class extends KR{constructor(e){super(e),this.type="text-box"}clone(){return new OI({maxLength:this.maxLength,minLength:this.minLength})}};a([A({type:["text-box"],json:{read:!1,write:!0}})],w2.prototype,"type",void 0),w2=OI=a([P("esri.form.elements.inputs.TextBoxInput")],w2);const bue=w2;var PI;function o3(e){return e??null}function a3(e){return e??null}let hn=PI=class extends hu{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return o3(t.max)}writeMax(e,t){t.max=a3(e)}readMin(e,t){return o3(t.min)}writeMin(e,t){t.min=a3(e)}readTimeResolution(e,t){return o3(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=a3(e)}clone(){return new PI({max:this.max,min:this.min,timeResolution:this.timeResolution})}};a([A({type:String,json:{type:String,write:!0}})],hn.prototype,"max",void 0),a([pe("max")],hn.prototype,"readMax",null),a([ye("max")],hn.prototype,"writeMax",null),a([A({type:String,json:{type:String,write:!0}})],hn.prototype,"min",void 0),a([pe("min")],hn.prototype,"readMin",null),a([ye("min")],hn.prototype,"writeMin",null),a([A({type:String,json:{type:String,write:!0}})],hn.prototype,"timeResolution",void 0),a([pe("timeResolution")],hn.prototype,"readTimeResolution",null),a([ye("timeResolution")],hn.prototype,"writeTimeResolution",null),a([A({type:["time-picker"],json:{read:!1,write:!0}})],hn.prototype,"type",void 0),hn=PI=a([P("esri.form.elements.inputs.TimePickerInput")],hn);const _ue=hn,Sue={base:hu,key:"type",typeMap:{"barcode-scanner":hue,"combo-box":Aue,"date-picker":fue,"datetime-picker":yue,"datetimeoffset-picker":mue,"radio-buttons":gue,switch:vue,"text-area":wue,"text-box":bue,"time-picker":_ue}};var NI;let ap=NI=class extends ee{constructor(e){super(e),this.name=null,this.code=null}clone(){return new NI({name:this.name,code:this.code})}};a([A({type:String,json:{write:{isRequired:!0}}})],ap.prototype,"name",void 0),a([A({type:[String,Number],json:{write:{isRequired:!0}}})],ap.prototype,"code",void 0),ap=NI=a([P("esri.layers.support.CodedValue")],ap);const Eue=new ct({inherited:"inherited",codedValue:"coded-value",range:"range"});let _c=class extends ee{constructor(t){super(t),this.name=null,this.type=null}};a([A({type:String,json:{write:!0}})],_c.prototype,"name",void 0),a([Ne(Eue),A({json:{write:{isRequired:!0}}})],_c.prototype,"type",void 0),_c=a([P("esri.layers.support.Domain")],_c);var LI,Ef;let Sc=(Ef=class extends _c{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let r=null;if(this.codedValues){const i=String(t);this.codedValues.some((s=>(String(s.code)===i&&(r=s.name),!!r)))}return r}clone(){return new LI({codedValues:H(this.codedValues),name:this.name})}},LI=Ef,Ef);a([A({type:[ap],json:{write:{isRequired:!0}}})],Sc.prototype,"codedValues",void 0),a([Ne({codedValue:"coded-value"})],Sc.prototype,"type",void 0),Sc=LI=a([P("esri.layers.support.CodedValueDomain")],Sc);var DI,Tf;let vg=(Tf=class extends _c{constructor(t){super(t),this.type="inherited"}clone(){return new DI}},DI=Tf,Tf);a([Ne({inherited:"inherited"})],vg.prototype,"type",void 0),vg=DI=a([P("esri.layers.support.InheritedDomain")],vg);var FI,$f;let ep=($f=class extends _c{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new FI({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},FI=$f,$f);a([A({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],ep.prototype,"maxValue",void 0),a([A({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],ep.prototype,"minValue",void 0),a([Ne({range:"range"})],ep.prototype,"type",void 0),ep=FI=a([P("esri.layers.support.RangeDomain")],ep);const rG={key:"type",base:_c,typeMap:{range:ep,"coded-value":Sc,inherited:vg}};function NS(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return ep.fromJSON(e);case"codedValue":return Sc.fromJSON(e);case"inherited":return vg.fromJSON(e)}return null}var jI;let jn=jI=class extends qc{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new jI({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};a([A({types:rG,json:{read:{reader:NS},write:!0}})],jn.prototype,"domain",void 0),a([A({type:Boolean,json:{write:!0}})],jn.prototype,"editable",void 0),a([A({type:String,json:{write:!0}})],jn.prototype,"editableExpression",void 0),a([A({type:String,json:{write:!0}})],jn.prototype,"fieldName",void 0),a([A({type:String,json:{write:!0}})],jn.prototype,"hint",void 0),a([A({types:Sue,json:{read:{source:"inputType"},write:{target:"inputType"}}})],jn.prototype,"input",void 0),a([A({type:String,json:{write:!0}})],jn.prototype,"requiredExpression",void 0),a([A({type:String,json:{read:!1,write:!0}})],jn.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],jn.prototype,"valueExpression",void 0),jn=jI=a([P("esri.form.elements.FieldElement")],jn);const BN=jn;var BI;let Al=BI=class extends qc{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new BI({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:H(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};a([A({type:Number,json:{write:!0}})],Al.prototype,"displayCount",void 0),a([A({type:["list"],json:{write:!0}})],Al.prototype,"displayType",void 0),a([A({type:String,json:{write:!0}})],Al.prototype,"editableExpression",void 0),a([A({type:[gR],json:{write:!0}})],Al.prototype,"orderByFields",void 0),a([A({type:Number,json:{write:!0}})],Al.prototype,"relationshipId",void 0),a([A({type:["relationship"],json:{read:!1,write:!0}})],Al.prototype,"type",void 0),Al=BI=a([P("esri.form.elements.RelationshipElement")],Al);const UN=Al;var UI;let Kh=UI=class extends qc{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new UI({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};a([A({type:String,json:{write:!0}})],Kh.prototype,"text",void 0),a([A({type:String,json:{write:!0}})],Kh.prototype,"textFormat",void 0),a([A({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Kh.prototype,"type",void 0),Kh=UI=a([P("esri.form.elements.TextElement")],Kh);const VN=Kh;let Xh=class extends Ge.ClonableMixin(qc){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};a([A({type:[HU],json:{write:{isRequired:!0}}})],Xh.prototype,"associationTypes",void 0),a([A({type:String,json:{write:!0}})],Xh.prototype,"editableExpression",void 0),a([A({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],Xh.prototype,"type",void 0),Xh=a([P("esri.form.elements.UtilityNetworkAssociationsElement")],Xh);const zN=Xh,Tue=e=>e.type==="field",$ue=e=>e.type==="group",xue=e=>e.type==="text";function iG(e){return{typesWithGroup:{base:qc,key:"type",typeMap:{attachment:NN,field:BN,group:e,relationship:UN,text:VN,utilityNetworkAssociations:zN}},typesWithoutGroup:{base:qc,key:"type",typeMap:{attachment:NN,field:BN,relationship:UN,text:VN,utilityNetworkAssociations:zN}}}}function sG(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((s=>i[s.type])).map((s=>i[s.type].fromJSON(s)))}function nG(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((s=>i[s.type])).map((s=>s.toJSON()))}function oG(e,t,r=!0){return e?e.map((i=>Ha(r?t.typesWithGroup:t.typesWithoutGroup,i))):null}var VI;let ba=VI=class extends qc{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return oG(e,l3,!1)}readElements(e,t){return sG(t.formElements,l3,!1)}writeElements(e,t){t.formElements=nG(e,l3,!1)}clone(){return new VI({description:this.description,elements:H(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};a([A({json:{write:!0}})],ba.prototype,"elements",void 0),a([Ft("elements")],ba.prototype,"castElements",null),a([pe("elements",["formElements"])],ba.prototype,"readElements",null),a([ye("elements")],ba.prototype,"writeElements",null),a([A({type:["collapsed","expanded"],json:{write:!0}})],ba.prototype,"initialState",void 0),a([A({type:String,json:{read:!1,write:!0}})],ba.prototype,"type",void 0),ba=VI=a([P("esri.form.elements.GroupElement")],ba);const l3=iG(ba),Iue=ba;var zI;const u3=iG(Iue);let Io=zI=class extends ee{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return oG(e,u3)}readElements(e,t){return sG(t.formElements,u3)}writeElements(e,t){t.formElements=nG(e,u3)}clone(){return new zI({description:this.description,expressionInfos:H(this.expressionInfos),elements:H(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:s,expressionInfos:n,title:o}=this;if(wg(r,e,i),wg(r,e,o),!s)return[];const l=Mue(s,n).map((p=>ls(r,e,p)));await Promise.all(l);for(const p of s)aG(r,{fieldsIndex:e,relationships:t},p);return Array.from(r).sort()}};function aG(e,t,r){var s;const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(wg(e,i,r.label),wg(e,i,r.description),r.type){case"field":xs(e,i,r.fieldName);break;case"group":r.elements.forEach((n=>aG(e,t,n)));break;case"relationship":if(t.relationships){const n=t.relationships.find((o=>o.id===r.relationshipId));n&&xs(e,i,n.keyField)}Bp(e,i,(s=r.orderByFields)==null?void 0:s.map((n=>n.field)));break;case"text":wg(e,i,r.text)}}function Mue(e,t){if(!t||t.length===0)return[];const r=lG(e),i=[];for(const s of t)r.has(s.name)&&i.push(s.expression);return i}function lG(e){const t=new Set;for(const r of e)if(JP(t,r.visibilityExpression),!xue(r)){if($ue(r))vb(t,lG(r.elements));else if(JP(t,r.editableExpression),Tue(r)){const{requiredExpression:i,valueExpression:s}=r;vb(t,[i,s])}}return t}function wg(e,t,r){Bp(e,t,cR(r))}a([A({type:String,json:{write:!0}})],Io.prototype,"description",void 0),a([A({json:{write:!0}})],Io.prototype,"elements",void 0),a([Ft("elements")],Io.prototype,"castElements",null),a([pe("elements",["formElements"])],Io.prototype,"readElements",null),a([ye("elements")],Io.prototype,"writeElements",null),a([A({type:[aue],json:{write:!0}})],Io.prototype,"expressionInfos",void 0),a([A({type:Boolean,json:{default:!1,write:!0}})],Io.prototype,"preserveFieldValuesWhenHidden",void 0),a([A({type:String,json:{write:!0}})],Io.prototype,"title",void 0),Io=zI=a([P("esri.form.FormTemplate")],Io);const Cue=Io;async function kue(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await ce(async()=>{const{fromItem:s}=await import("./portalLayers-BMwJ3faq.js");return{fromItem:s}},__vite__mapDeps([26,27,28,29,30]),import.meta.url);try{return await r(t)}catch(s){const n=t==null?void 0:t.portalItem,o=(n==null?void 0:n.id)||"unset",l=((i=n==null?void 0:n.portal)==null?void 0:i.url)||Pt.portalUrl;throw de.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",s),s}}const GN={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function c3(e,t,r,i=ao){const s=new an(AR(i)),n=Pe.fromJSDate(e,{zone:s}),o=r==="decades"||r==="centuries"?"year":cG(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),n.plus({[o]:t}).toJSDate()}function A5e(e,t,r="milliseconds"){const i=e.getTime(),s=uG(t,r,"milliseconds");return new Date(i+s)}function qN(e,t,r=ao){const i=new an(AR(r)),s=Pe.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=s.startOf("year"),{year:l}=o,p=l-l%(t==="decades"?10:100);return o.set({year:p}).toJSDate()}const n=cG(t);return s.startOf(n).toJSDate()}function uG(e,t,r){return e===0?0:e*GN[t]/GN[r]}function f5e(e,t){return e&&t?e.intersection(t):e||t}function cG(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Bn,xf;let qt=(xf=class extends ee{static get allTime(){return HN}static get empty(){return Rue}static fromArray(t){return new Bn({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,r){return r.end!=null?new Date(r.end):null}writeEnd(t,r){r.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(Bn.allTime)}get isEmpty(){return this.equals(Bn.empty)}readStart(t,r){return r.start!=null?new Date(r.start):null}writeStart(t,r){r.start=(t==null?void 0:t.getTime())??null}clone(){return new Bn({end:this.end,start:this.start})}equals(t){var o,l,p,m;if(!t)return!1;const r=((o=this.start)==null?void 0:o.getTime())??this.start,i=((l=this.end)==null?void 0:l.getTime())??this.end,s=((p=t.start)==null?void 0:p.getTime())??t.start,n=((m=t.end)==null?void 0:m.getTime())??t.end;return r===s&&i===n}expandTo(t,r=ao){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=qN(i,t,r));let s=this.end;if(s){const n=qN(s,t,r);s=s.getTime()===n.getTime()?n:c3(n,1,t,r)}return new Bn({start:i,end:s})}intersection(t){var p,m,v,_;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Bn.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const r=((p=this.start)==null?void 0:p.getTime())??-1/0,i=((m=this.end)==null?void 0:m.getTime())??1/0,s=((v=t.start)==null?void 0:v.getTime())??-1/0,n=((_=t.end)==null?void 0:_.getTime())??1/0;let o,l;return s>=r&&s<=i?o=s:r>=s&&r<=n&&(o=r),i>=s&&i<=n?l=i:n>=r&&n<=i&&(l=n),o==null||l==null||isNaN(o)||isNaN(l)?Bn.empty:new Bn({start:o===-1/0?null:new Date(o),end:l===1/0?null:new Date(l)})}offset(t,r,i=ao){if(this.isEmpty||this.isAllTime)return this.clone();const s=new Bn,{start:n,end:o}=this;return n!=null&&(s.start=c3(n,t,r,i)),o!=null&&(s.end=c3(o,t,r,i)),s}toArray(){var t,r;return this.isEmpty?[void 0,void 0]:[((t=this.start)==null?void 0:t.getTime())??null,((r=this.end)==null?void 0:r.getTime())??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return HN.clone();const r=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Bn({start:r,end:i})}},Bn=xf,xf);a([A({type:Date,json:{write:{allowNull:!0}}})],qt.prototype,"end",void 0),a([pe("end")],qt.prototype,"readEnd",null),a([ye("end")],qt.prototype,"writeEnd",null),a([A({readOnly:!0,json:{read:!1}})],qt.prototype,"isAllTime",null),a([A({readOnly:!0,json:{read:!1}})],qt.prototype,"isEmpty",null),a([A({type:Date,json:{write:{allowNull:!0}}})],qt.prototype,"start",void 0),a([pe("start")],qt.prototype,"readStart",null),a([ye("start")],qt.prototype,"writeStart",null),qt=Bn=a([P("esri.time.TimeExtent")],qt);const HN=new qt,Rue=new qt({start:void 0,end:void 0});let Oue=0,br=class extends el.EventedMixin(J0.IdentifiableMixin(os)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new At(-180,-90,180,90,Ce.WGS84),this.id=Date.now().toString(16)+"-layer-"+Oue++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ce.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await ce(async()=>{const{fromUrl:i}=await import("./arcgisLayers-CAHlDg8N.js");return{fromUrl:i}},__vite__mapDeps([31,27,28,30]),import.meta.url)).fromUrl(r)}static fromPortalItem(t){return kue(t)}initialize(){this.when().catch((t=>{zi(t)||de.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})}))}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&t&&(t=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return mi(this.url)}createLayerView(t,r){return Promise.reject(new Q("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Nt(t,{query:{f:"json"},responseType:"json"})).data;throw new Q("layer:no-attribution-data","Layer does not have attribution data")}};a([A({type:String})],br.prototype,"attributionDataUrl",void 0),a([A({readOnly:!0})],br.prototype,"effectiveVisible",null),a([A({type:At})],br.prototype,"fullExtent",void 0),a([A({readOnly:!0})],br.prototype,"hasAttributionData",null),a([A({type:String,clonable:!1})],br.prototype,"id",void 0),a([A({type:Boolean,nonNullable:!0})],br.prototype,"legendEnabled",void 0),a([A({type:["show","hide","hide-children"]})],br.prototype,"listMode",void 0),a([A({type:Number,range:{min:0,max:1},nonNullable:!0})],br.prototype,"opacity",void 0),a([A({clonable:!1})],br.prototype,"parent",void 0),a([A({readOnly:!0})],br.prototype,"parsedUrl",null),a([A({type:Boolean,readOnly:!0})],br.prototype,"persistenceEnabled",void 0),a([A({type:Boolean})],br.prototype,"popupEnabled",void 0),a([A({type:Boolean})],br.prototype,"attributionVisible",void 0),a([A({type:Ce})],br.prototype,"spatialReference",void 0),a([A({type:String})],br.prototype,"title",void 0),a([A({readOnly:!0,json:{read:!1}})],br.prototype,"type",void 0),a([A()],br.prototype,"url",void 0),a([A({type:qt})],br.prototype,"visibilityTimeExtent",void 0),a([A({type:Boolean,nonNullable:!0})],br.prototype,"visible",void 0),br=a([P("esri.layers.Layer")],br);let nv=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new G0,this._items=new Set}get length(){return Ze(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Ze(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach((i=>{t(i)||this._items.delete(i)})),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ze(this._observable),yield*this._items}};const dG=new FinalizationRegistry((e=>{e.close()}));function Pue(e,t){dG.register(e,t,t)}function Nue(e){dG.unregister(e)}function pG(e,t){return new Proxy({},{get:(r,i,s)=>(...n)=>{let o,l;const p=n[n.length-1];return Lue(p)&&(o=p.signal,l=p.transferList,n.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),n,{transferList:l,signal:o})}})}function Lue(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const Due={statsWorker:()=>ce(()=>import("./statsWorker-DXQeTEr8.js"),__vite__mapDeps([32,33,34,35,36,37]),import.meta.url),geometryEngineWorker:()=>ce(()=>import("./geometryEngineWorker-C3Rv6yWF.js"),__vite__mapDeps([38,39,40,41,42,43]),import.meta.url),arcadeGeometryOperatorsWorker:()=>ce(()=>import("./operatorsWorker-CW7qYQxo.js"),[],import.meta.url),CSVSourceWorker:()=>ce(()=>import("./CSVSourceWorker-BlENB1Ck.js"),__vite__mapDeps([44,45,43,10,11,46,47,48,9,12,0,1,49,50,34,33,35,36,37,51,52,53,54,55,56,7,57]),import.meta.url),EdgeProcessingWorker:()=>ce(()=>import("./EdgeProcessingWorker-zhkwon2o.js"),__vite__mapDeps([58,59,60,61,62,63,64,65,66,67,68,69]),import.meta.url),ElevationSamplerWorker:()=>ce(()=>import("./ElevationSamplerWorker-BOjjKChF.js"),__vite__mapDeps([70,55,71,72,73,74,75,76,77,78,79,61,80]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>ce(()=>import("./FeatureServiceSnappingSourceWorker-BIk-YaV5.js"),__vite__mapDeps([81,46,47,43,48,9,10,11,12,0,1,49,50,34,33,35,36,37,51,52,53,54,55,56,82,83,84,85,22]),import.meta.url),GeoJSONSourceWorker:()=>ce(()=>import("./GeoJSONSourceWorker-Bna9FYYg.js"),__vite__mapDeps([86,9,10,11,12,46,47,43,48,0,1,49,50,34,33,35,36,37,51,52,53,54,55,56,87,45,57,88]),import.meta.url),LercWorker:()=>ce(()=>import("./LercWorker-BHCTnzyc.js"),[],import.meta.url),MemorySourceWorker:()=>ce(()=>import("./MemorySourceWorker-BfaiqX8Y.js"),__vite__mapDeps([89,9,10,11,12,90,46,47,43,48,0,1,49,50,34,33,35,36,37,51,52,53,54,55,56,57,88,45]),import.meta.url),PBFDecoderWorker:()=>ce(()=>import("./PBFDecoderWorker-DTbTae4e.js"),__vite__mapDeps([91,92,11,9,10,12,83,84]),import.meta.url),FeaturePipelineWorker:()=>ce(()=>import("./FeaturePipelineWorker-DsIOT9ut.js"),__vite__mapDeps([93,94,95,68,96,97,10,11,98,99,100,101,102,47,43,49,9,12,34,103,104,105,106,107,108,15,56,48,0,1,50,33,35,36,37,51,52,109,110,111,112,85,83,84,113,87,45,57,88,114,42,115,116]),import.meta.url),PointCloudWorker:()=>ce(()=>import("./PointCloudWorker-DkLiMPa3.js"),__vite__mapDeps([117,118,73,119,120,121,122,66,123,74,75,76,124,125]),import.meta.url),RasterWorker:()=>ce(()=>import("./RasterWorker-Cm_en9e1.js"),__vite__mapDeps([126,127,128,129,41,42,130,131,132,133,134]),import.meta.url),SceneLayerSnappingSourceWorker:()=>ce(()=>import("./SceneLayerSnappingSourceWorker-Cj0xert1.js"),__vite__mapDeps([135,136,137,73,125,74,119,138,124,61,63,64,65,60,62,66,67,68,69]),import.meta.url),SceneLayerWorker:()=>ce(()=>import("./SceneLayerWorker-DeyMPiNJ.js"),__vite__mapDeps([139,71,79,140,77,137,73,125,74,119,141,122,66,142,100,143,144,145,146,123,118,75,76,124]),import.meta.url),WFSSourceWorker:()=>ce(()=>import("./WFSSourceWorker-DhHzbcNw.js"),__vite__mapDeps([147,9,10,11,12,46,47,43,48,0,1,49,50,34,33,35,36,37,51,52,53,54,55,56,87,45,88,148,149]),import.meta.url),WorkerTileHandler:()=>ce(()=>import("./WorkerTileHandler-DvpVDJda.js"),__vite__mapDeps([150,151,98,101,152,153,84,11,107,154,155,68,130,108,97]),import.meta.url),Lyr3DWorker:()=>ce(()=>import("./Lyr3DWorker-L5gmKnCZ.js"),[],import.meta.url),Feature3DPipelineWorker:()=>ce(()=>import("./Feature3DPipelineWorker-BbPx_AvN.js"),__vite__mapDeps([156,48,9,10,11,12,0,1,49,47,43,50,34,33,35,36,37,51,52,74,157,144,78,71,140,77,158,120,159,160,161,162,163,61,65,164,137,73,125,119,136,66,146,145,165,123,118,75,76,124,166,167,168,169,60,62,143,170,100,171,172,55,85,83,84]),import.meta.url),TextureCompressionWorker:()=>ce(()=>import("./TextureCompressionWorker-CWe6ju8x.js"),__vite__mapDeps([173,163]),import.meta.url)},hG="worker:port-closed";var Ri;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Ri||(Ri={}));let Fue=0;function AG(){return Fue++}function jue(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function ov(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function XR(e,t,r,i){if(t.type===Ri.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Ri.INVOKE&&t.type!==Ri.RESPONSE)return void e.postMessage(t);let s;if(jue(r)?(s=WN(r.transferList),t.data=r.result):(s=WN(i),t.data=r),s){if(K("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Ri.INVOKE:throw o;case Ri.RESPONSE:return void XR(e,{type:Ri.RESPONSE,jobId:t.jobId,error:ov(o)})}}}e.postMessage(t,s)}else e.postMessage(t)}function av(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function WN(e){if(!(e!=null&&e.length))return null;if(K("esri-workers-arraybuffer-transfer"))return e;const t=e.filter((r=>!Bue(r)));return t.length?t:null}function Bue(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function g5e(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===hG;if(!(zi(t)||r))throw t;return}}const{CLOSE:QN,ABORT:JN,INVOKE:ZN,RESPONSE:Dm,OPEN_PORT:YN,ON:Uue}=Ri,Vue=2;let zue=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Ri.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Xn;let T0=(Xn=class{static connect(t,r){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new Xn(i.port1,{channel:i,client:s,schedule:r});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),Xn.clients.set(n,s),i.port2}static loadWorker(t){const r=Due[t];return r?r():Promise.resolve(null)}constructor(t,r,i,s){this._port=t,this._jobQueue=i,this._lowPriorityJobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new zue((n=>this._onInvokeMessage(n))),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:QN}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=i==null?void 0:i.signal,n=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new Q(hG,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=AG();return new Promise(((l,p)=>{if(oo(s))return this._processWork(),void p(rr());const m=Ko(s,(()=>{const _=this._outJobs.get(o);_&&(this._outJobs.delete(o),this._processWork(),vr(_.abortHandle),this._post({type:JN,jobId:o}),p(rr()))})),v={resolve:l,reject:p,abortHandle:m,debugInfo:t};this._outJobs.set(o,v),this._post({type:ZN,jobId:o,methodName:t,abortable:s!=null},r,n)}))}createInvokeProxy(t){return pG(this,t)}on(t,r){const i=new MessageChannel;function s(n){r(n.data)}return this._port.postMessage({type:Ri.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),Lt((()=>{i.port1.postMessage({type:Ri.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",s)}))}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:YN,port:t.port2}),t.port1}_processWork(){var o,l;if(this._outJobs.size>=Vue)return;const t=((o=this._jobQueue)==null?void 0:o.pop())??((l=this._lowPriorityJobQueue)==null?void 0:l.pop());if(!t)return;const{methodName:r,data:i,invokeOptions:s,resolver:n}=t;this.apply(r,i,s).then((p=>n.resolve(p))).catch((p=>n.reject(p)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((t=>{vr(t.abortHandle),t.reject(rr(`Worker closing, aborting job calling '${t.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule((()=>this._processMessage(t,!0))):this._processMessage(t,!1)}_processMessage(t,r){const i=av(t);if(i)switch(i.type){case Dm:this._onResponseMessage(i);break;case ZN:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case JN:this._onAbortMessage(i);break;case QN:this._onCloseMessage();break;case YN:this._onOpenPortMessage(i);break;case Uue:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Xn.clients.get(this)===t&&t.destroy(),Xn.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s=[],abortable:n}=t,o=n?new AbortController:null,l=this._inJobs;let p,m=this._client,v=m[r];try{if(!v&&r&&r.includes(".")){const _=r.split(".");for(let E=0;E<_.length-1;E++)m=m[_[E]],v=m[_[E+1]]}if(typeof v!="function")throw new TypeError(`${r} is not a function`);s.push({client:this,signal:o?o.signal:null}),p=v.apply(m,s)}catch(_){return void this._post({type:Dm,jobId:i,error:ov(_)})}Xa(p)?(l.set(i,{controller:o,promise:p}),p.then((_=>{l.has(i)&&(l.delete(i),this._post({type:Dm,jobId:i},_))}),(_=>{l.has(i)&&(l.delete(i),zi(_)||this._post({type:Dm,jobId:i,error:ov(_||{message:`Error encountered at method ${r}`})}))}))):this._post({type:Dm,jobId:i},p)}_onOpenPortMessage(t){new Xn(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,(n=>{r.postMessage(n)})),s=U0(t.port,"message",(n=>{const o=av(n);(o==null?void 0:o.type)===Ri.CLOSE&&(s.remove(),i.remove(),r.close())}))}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs;if(!n.has(r))return;const o=n.get(r);n.delete(r),this._processWork(),vr(o.abortHandle),i?o.reject(Q.fromJSON(JSON.parse(i))):o.resolve(s)}_post(t,r,i){return XR(this._port,t,r,i)}},Xn.kernelInfo={buildDate:fV,fullVersion:kR,revision:mV},Xn.clients=new Map,Xn),Gue=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new nv,this._ongoingLowPriorityJobsQueue=new nv}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise(((i,s)=>{let n=!0;const o=l=>{dr(r.signal),n&&(n=!1,l())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let l=0;l<t.length;++l){const p=t[l];Xa(p)?this._clientPromises[l]=p.then((m=>(this._clients[l]=new T0(m,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(i),this._clients[l])),(()=>(o(s),null))):(this._clients[l]=new T0(p,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[l]=Promise.resolve(this._clients[l]),o(i))}}))}broadcast(t,r,i){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then((l=>l==null?void 0:l.invoke(t,r,i)))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(rr(`Worker closing, aborting job calling '${t.methodName}'`));for(;t=this._ongoingLowPriorityJobsQueue.pop();)t.resolver.reject(rr(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then((i=>i==null?void 0:i.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,Nue(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=Cn();((i==null?void 0:i.priority)==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:t,data:r,invokeOptions:i,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then((l=>l==null?void 0:l.jobAdded()))}return s.promise}createInvokeProxy(t){return pG(this,t)}on(t,r){return Promise.all(this._clientPromises).then((()=>th(this._clients.map((i=>i.on(t,r))))))}openPorts(){return new Promise((t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then((n=>{n&&(r[s]=n.openPort()),--i===0&&t(r)}))}))}get test(){}};const que={async request(e,t){var o,l;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=px(e.url))!=null&&o.after)?i:"array-buffer";const s=await Nt(e.url,r),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((l=s.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},Hue={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let b2=new WeakMap,fG={};function GI(e){var r;const t=e||fG;if(!b2.has(t)){const i=sn(),s=(r=dR(i))==null?void 0:r.language,n=s&&Hue[s]||i;b2.set(t,new Intl.NumberFormat(n,e))}return b2.get(t)}function b5e(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function _5e(e,t){return Object.is(e,-0)&&(e=0),GI(t).format(e)}function S5e(e,t=sn()){var i,s;if(!e)return null;let r=KN.get(t);if(!r){const n=GI().formatToParts(12345.6),o=[...GI({useGrouping:!1}).format(9876543210)].reverse(),l=new Map(o.map((($,M)=>[$,M]))),p=new RegExp(`[${(i=n.find(($=>$.type==="group")))==null?void 0:i.value}]`,"g"),m=new RegExp(`[${(s=n.find(($=>$.type==="decimal")))==null?void 0:s.value}]`),v=new RegExp(`[${o.join("")}]`,"g"),_=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,E=/[-\u2212\u2013\u2014\u2015]/g;r=$=>{if(($=$.trim().replaceAll(p,"").replace(m,".").replace(v,(k=>String(l.get(k)))).replaceAll(_,"").replaceAll(E,"-"))==="")return null;const M=Number($);return isNaN(M)?null:M},KN.set(t,r)}return r(e)}pR((()=>{b2=new WeakMap,fG={}}));const KN=new Map,mG={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Wue(e){return e in mG}function XN(e){if(Wue(e)){const t=mG[e];return t===!0?e:t}return null}const $y=[],sf=new Map;function eL(e){for(const t of sf.keys())vG(e.pattern,t)&&sf.delete(t)}function Que(e){return $y.includes(e)||(eL(e),$y.unshift(e)),Lt((()=>{const t=$y.indexOf(e);t>-1&&($y.splice(t,1),eL(e))}))}async function yG(e){const t=sn();sf.has(e)||sf.set(e,Jue(e,t));const r=sf.get(e);return r&&await Zue.add(r),r}function gG(e){const t=dR(e);return t?XN(e)??XN(t.language):null}async function Jue(e,t){const r=[];for(const i of $y)if(vG(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(s){r.push(s)}throw r.length?new Q("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new Q("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function vG(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}pR((()=>{sf.clear()}));const Zue=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Cn())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Yue(e,t,r,i){const s=t.exec(r);if(!s)throw new Q("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],l=gG(i),p=`${n}${o}.json`,m=l?`${n}${o}_${l}.json`:p;let v;try{v=await tL(e(m))}catch(_){if(m===p)throw new Q("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:_});try{v=await tL(e(p))}catch(E){throw new Q("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:E})}}return v}async function tL(e){if(rL.fetchBundleAsset!=null)return rL.fetchBundleAsset(e);const t=await Nt(e,{responseType:"text"});return JSON.parse(t.data)}let Kue=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let s;s=typeof i=="string"?n=>new URL(n,new URL(i,window.location.href)).href:i instanceof URL?n=>new URL(n,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return Yue(this.getAssetUrl,this.matcher,t,r)}};function Xue(e){return new Kue(e)}const rL={};Que(Xue({pattern:"esri/",location:Or}));const iL={};function ece(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.slice())||[],paths:{...iL.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=iL.baseUrl),t}let tce=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((r=>{this[r]=(...i)=>t[r](...i)}))}},_2=class{constructor(){this._dispatcher=new tce,this._workerPostMessage({type:Ri.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){yb((()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))}))}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){yb((()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))}))}async _workerMessageHandler(t){const r=av(t);if(r&&r.type===Ri.OPEN){const{modulePath:i,jobId:s}=r;let n=await T0.loadWorker(i);n||(n=await import(i));const o=T0.connect(n);this._workerPostMessage({type:Ri.OPENED,jobId:s,data:o})}}};const qI=()=>de.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:rce}=Ri,ice='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let z1,G1;const sL="Failed to create Worker. Fallback to execute module in main thread";async function sce(){if(!K("esri-workers"))return nL(new _2);if(!z1&&!G1)try{const t=ice.split("{CONFIGURATION}").join(nce());z1=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){G1=t||{}}let e;if(z1)try{e=new Worker(z1,{name:"esri-worker-"+oce++})}catch{qI().warn(sL,G1),e=new _2}else qI().warn(sL,G1),e=new _2;return nL(e)}async function nL(e){return new Promise((t=>{function r(s){const n=av(s);n&&n.type===rce&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(s){s.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),qI().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new _2).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)}))}function nce(){let e;if(Pt.default!=null){const s={...Pt};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(Pt));e.assetsPath=en(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?en(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=sn(),e.has={"esri-csp-restrictions":K("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":K("esri-2d-update-debug"),"esri-2d-log-updating":K("esri-2d-log-updating"),"featurelayer-pbf":K("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":K("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":K("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":K("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":K("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":K("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":K("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":K("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":K("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":K("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":K("featurelayer-snapshot-enabled"),"esri-atomics":K("esri-atomics"),"esri-shared-array-buffer":K("esri-shared-array-buffer"),"esri-tiles-debug":K("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":K("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":K("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=en(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=en(e.workers.workerPath):e.workers.workerPath=en(Or("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Pt.workers.loaderConfig,r=ece({baseUrl:t==null?void 0:t.baseUrl,locale:sn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:fV,fullVersion:kR,revision:mV}})}let oce=0;const{ABORT:oL,INVOKE:ace,OPEN:lce,OPENED:uce,RESPONSE:Fm}=Ri;let cce=class wG{static async create(t){const r=await sce();return new wG(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",(i=>{i.preventDefault(),de.getLogger("esri.core.workers.WorkerOwner").error(i)}))}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,s=AG();return new Promise(((n,o)=>{const l={resolve:n,reject:o,abortHandle:Gk(i,(()=>{this._outJobs.delete(s),this._post({type:oL,jobId:s})}))};this._outJobs.set(s,l),this._post({type:lce,jobId:s,modulePath:t})}))}_onMessage(t){const r=av(t);if(r)switch(r.type){case uce:this._onOpenedMessage(r);break;case Fm:this._onResponseMessage(r);break;case oL:this._onAbortMessage(r);break;case ace:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s,abortable:n}=t,o=n?new AbortController:null,l=this._inJobs,p=que[r];let m;try{if(typeof p!="function")throw new TypeError(`${r} is not a function`);m=p.call(null,s,{signal:o?o.signal:null})}catch(v){return void this._post({type:Fm,jobId:i,error:ov(v)})}Xa(m)?(l.set(i,{controller:o,promise:m}),m.then((v=>{l.has(i)&&(l.delete(i),this._post({type:Fm,jobId:i},v))}),(v=>{l.has(i)&&(l.delete(i),v||(v={message:"Error encountered at method"+r}),zi(v)||this._post({type:Fm,jobId:i,error:ov(v||{message:`Error encountered at method ${r}`})}))}))):this._post({type:Fm,jobId:i},m)}_onOpenedMessage(t){const{jobId:r,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),vr(s.abortHandle),s.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),vr(n.abortHandle),i?n.reject(Q.fromJSON(JSON.parse(i))):n.resolve(s))}_post(t,r,i){return XR(this.worker,t,r,i)}};const aL=K("host-browser")?Math.min(navigator.hardwareConcurrency-1,K("workers-pool-size")??8):0;let lp=K("esri-mobile")?Math.min(aL,3):aL;lp||(lp=K("safari")&&K("mac")?7:2);let lL=0;const S2=[];function dce(){bG()}async function q1(e,t){const r=new Gue,{registryTarget:i,...s}=t;return await r.open(e,s),i&&Pue(i,r),r}async function pce(e,t={}){if(typeof e!="string")throw new Q("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(K("host-webworker")&&!K("esri-workers")&&(r="local"),r==="local"){let i=await T0.loadWorker(e);i||(i=await import(e)),dr(t.signal);const s=t.client||i;return q1([T0.connect(i,t.schedule)],{...t,client:s})}if(await bG(),dr(t.signal),r==="dedicated"){const i=lL++%lp;return q1([await S2[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,lp);if(i<lp){const s=new Array(i);for(let n=0;n<i;++n){const o=lL++%lp;s[n]=S2[o].open(e,t)}return q1(s,t)}}return q1(S2.map((i=>i.open(e,t))),t)}let H1=null;async function bG(){if(H1)return H1;new AbortController;const e=[];for(let t=0;t<lp;t++){const r=cce.create(t).then((i=>(S2[t]=i,i)));e.push(r)}return H1=Promise.all(e),H1}function uL(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const s of i)s.length>2&&(s[2]*=r)}function hce(e,t,r){if(!e&&!t||!r)return;const i=Qb(r);cL(e,r,i),cL(t,r,i)}function cL(e,t,r){if(e)for(const i of e)Ace(i.geometry,t,r)}function Ace(e,t,r){if(!(e!=null&&e.spatialReference)||Jr(e.spatialReference,t))return;const i=Qb(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)uL(e,e.rings,i);else if("paths"in e)uL(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=i)}}function _G(e,t,r){if(t==null||r==null||r.vcsWkid||Jr(t,r)||Gc(t)||Gc(r))return null;const i=Qb(t)/Qb(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>fce(s,i);case"polyline":case"esriGeometryPolyline":return s=>yce(s,i);case"polygon":case"esriGeometryPolygon":return s=>mce(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>gce(s,i);case"extent":case"esriGeometryEnvelope":return s=>vce(s,i);default:return null}}function fce(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function mce(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function yce(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function gce(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function vce(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function dL(e,t,r){if(!(r!=null&&r.features)||!r.hasZ)return;const i=_G(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const s of r.features)i(s.geometry)}const e4=new ct({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var HI;const wce=new ct({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var If;let xi=(If=class extends ee{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return i?wce.fromJSON(i.fieldValueType):null}clone(){var t;return new HI({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((t=this.domain)==null?void 0:t.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},HI=If,If);a([A({type:String,json:{write:!0}})],xi.prototype,"alias",void 0),a([A({type:[String,Number],json:{write:{allowNull:!0}}})],xi.prototype,"defaultValue",void 0),a([A()],xi.prototype,"description",void 0),a([pe("description")],xi.prototype,"readDescription",null),a([A({types:rG,json:{read:{reader:NS},write:!0}})],xi.prototype,"domain",void 0),a([A({type:Boolean,json:{write:!0}})],xi.prototype,"editable",void 0),a([A({type:Et,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],xi.prototype,"length",void 0),a([A({type:String,json:{write:!0}})],xi.prototype,"name",void 0),a([A({type:Boolean,json:{write:!0}})],xi.prototype,"nullable",void 0),a([Ne(e4)],xi.prototype,"type",void 0),a([A()],xi.prototype,"valueType",void 0),a([pe("valueType",["description"])],xi.prototype,"readValueType",null),a([A({type:Boolean,json:{read:!1}})],xi.prototype,"visible",void 0),xi=HI=a([P("esri.layers.support.Field")],xi);var WI;const QI=new ct({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let ci=WI=class extends ee{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,Sr)}writeGeometryType(e,t,r,i){if(e)return void QI.write(e,t,r,i);const{features:s}=this;if(s){for(const n of s)if((n==null?void 0:n.geometry)!=null)return void QI.write(n.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=Ya(e);return i&&!r&&t.spatialReference&&(i.spatialReference=Ce.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new WI(this.cloneProperties())}cloneProperties(){return H({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const s=e==null?void 0:e[r];i.geometry=(s==null?void 0:s.toJSON())||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,s]}=e,n=m=>Math.round((m-i)/t),o=m=>Math.round((s-m)/r),l=this.features,p=this._getQuantizationFunction(this.geometryType,n,o);for(let m=0,v=l.length;m<v;m++)p!=null&&p(l[m].geometry)||(l.splice(m,1),m--,v--);return this.transform=e,this}unquantize(){var E,$;const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,s],scale:[n,o]}=r,l=M=>M*n+i,p=M=>s-M*o;let m=null,v=null;if(this.hasZ&&((E=r==null?void 0:r.scale)==null?void 0:E[2])!=null){const{translate:[,,M],scale:[,,k]}=r;m=N=>N*k+M}if(this.hasM&&(($=r==null?void 0:r.scale)==null?void 0:$[3])!=null){const{translate:[,,,M],scale:[,,,k]}=r;v=N=>N==null?N:N*k+M}const _=this._getHydrationFunction(e,l,p,m,v);for(const{geometry:M}of t)M!=null&&_&&_(M);return this.transform=null,this}readFeaturesWithClass(e,t,r){var n;const i=Ce.fromJSON(t.spatialReference),s=[];for(let o=0;o<e.length;o++){const l=e[o],p=r.fromJSON(l),m=(n=l.geometry)==null?void 0:n.spatialReference;p.geometry==null||m||(p.geometry.spatialReference=i);const v=l.aggregateGeometries,_=p.aggregateGeometries;if(v&&_!=null)for(const E in _){const $=_[E],M=v[E],k=M==null?void 0:M.spatialReference;$==null||k||($.spatialReference=i)}s.push(p)}return s}_quantizePoints(e,t,r){let i,s;const n=[];for(let o=0,l=e.length;o<l;o++){const p=e[o];if(o>0){const m=t(p[0]),v=r(p[1]);m===i&&v===s||(n.push([m-i,v-s]),i=m,s=v)}else i=t(p[0]),s=r(p[1]),n.push([i,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const s=rf(i)?i.rings:i.paths,n=[];for(let o=0,l=s.length;o<l;o++){const p=s[o],m=this._quantizePoints(p,t,r);m&&n.push(m)}return n.length>0?(rf(i)?i.rings=n:i.paths=n,i):null}:e==="multipoint"?i=>{const s=this._quantizePoints(i.points,t,r);return s&&s.length>0?(i.points=s,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,s){return e==="point"?n=>{n.x=t(n.x),n.y=r(n.y),i&&(n.z=i(n.z))}:e==="polyline"||e==="polygon"?n=>{const o=rf(n)?n.rings:n.paths;let l,p;for(let m=0,v=o.length;m<v;m++){const _=o[m];for(let E=0,$=_.length;E<$;E++){const M=_[E];E>0?(l+=M[0],p+=M[1]):(l=M[0],p=M[1]),M[0]=t(l),M[1]=r(p)}}if(i&&s)for(let m=0,v=o.length;m<v;m++){const _=o[m];for(let E=0,$=_.length;E<$;E++){const M=_[E];M[2]=i(M[2]),M[3]=s(M[3])}}else if(i)for(let m=0,v=o.length;m<v;m++){const _=o[m];for(let E=0,$=_.length;E<$;E++){const M=_[E];M[2]=i(M[2])}}else if(s)for(let m=0,v=o.length;m<v;m++){const _=o[m];for(let E=0,$=_.length;E<$;E++){const M=_[E];M[2]=s(M[2])}}}:e==="extent"?n=>{n.xmin=t(n.xmin),n.ymin=r(n.ymin),n.xmax=t(n.xmax),n.ymax=r(n.ymax),i&&n.zmax!=null&&n.zmin!=null&&(n.zmax=i(n.zmax),n.zmin=i(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:e==="multipoint"?n=>{const o=n.points;let l,p;for(let m=0,v=o.length;m<v;m++){const _=o[m];m>0?(l+=_[0],p+=_[1]):(l=_[0],p=_[1]),_[0]=t(l),_[1]=r(p)}if(i&&s)for(let m=0,v=o.length;m<v;m++){const _=o[m];_[2]=i(_[2]),_[3]=s(_[3])}else if(i)for(let m=0,v=o.length;m<v;m++){const _=o[m];_[2]=i(_[2])}else if(s)for(let m=0,v=o.length;m<v;m++){const _=o[m];_[2]=s(_[2])}}:null}};a([A({type:String,json:{write:!0}})],ci.prototype,"displayFieldName",void 0),a([A({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ci.prototype,"exceededTransferLimit",void 0),a([A({type:[Sr],json:{write:!0}})],ci.prototype,"features",void 0),a([pe("features")],ci.prototype,"readFeatures",null),a([A({type:[xi],json:{write:!0}})],ci.prototype,"fields",void 0),a([A({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:QI.read}}})],ci.prototype,"geometryType",void 0),a([ye("geometryType")],ci.prototype,"writeGeometryType",null),a([A({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ci.prototype,"hasM",void 0),a([A({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ci.prototype,"hasZ",void 0),a([A({types:tm,json:{write:!0}})],ci.prototype,"queryGeometry",void 0),a([pe("queryGeometry")],ci.prototype,"readQueryGeometry",null),a([A({type:Ce,json:{write:!0}})],ci.prototype,"spatialReference",void 0),a([ye("spatialReference")],ci.prototype,"writeSpatialReference",null),a([A({json:{write:!0}})],ci.prototype,"transform",void 0),ci=WI=a([P("esri.rest.support.FeatureSet")],ci),ci.prototype.toJSON.isDefaultToJSON=!0;let bce=0,Dl=class extends os.LoadableMixin(Fa.EsriPromiseMixin(Te)){constructor(t){super(t),this._idToClientGeometry=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var r;const t=(r=this.layer)==null?void 0:r.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then((()=>this._applyEdits(t)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);dL(t,this.layer.spatialReference,i);const s=ci.fromJSON(i);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return s;const n=this.layer.objectIdField;for(const o of s.features){const l=o.attributes[n],p=this._idToClientGeometry.get(l);p!==void 0&&(o.geometry=p)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new Q("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return dL(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then((()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r)))}queryObjectIds(t,r={}){return this.load(r).then((()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r)))}queryExtent(t,r={}){return this.load(r).then((()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r))).then((i=>({count:i.count,extent:At.fromJSON(i.extent)})))}querySnapping(t,r={}){return this.load(r).then((()=>this._connection.invoke("querySnapping",t,r)))}async queryAttributeBins(t,r={}){return await this.load(),this._connection.invoke("queryAttributeBins",t==null?void 0:t.toJSON(),r)}async _applyEdits(t){if(!this._connection)throw new Q("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=v=>"objectId"in v&&v.objectId!=null?v.objectId:"attributes"in v&&v.attributes[r]!=null?v.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const v of t.deleteFeatures){const _=o(v);_!=null&&s.push(_)}const l=t.updateFeatures&&this._idToClientGeometry?new Map:null;if(t.updateFeatures){for(const v of t.updateFeatures)if(n.push(this._serializeFeature(v)),l&&v.geometry!=null){const _=o(v);_!=null&&l.set(_,v)}}hce(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:p,featureEditResults:m}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:s});return this.fullExtent=p,i&&i.finish(m.uidToObjectId),this._updateIdToClientGeometries(l,m),this._createEditsResult(m)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:s}of t)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||i.push(s.load({signal:r}));i.length&&await Promise.all(i)}_updateIdToClientGeometries(t,r){if(this._idToClientGeometry){if(t)for(const i of r.updateResults){if(!i.success)continue;const s=t.get(i.objectId);s!=null&&this._addIdToClientGeometry(s)}for(const i of r.deleteResults)i.success&&this._idToClientGeometry.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:""};return{objectId:t.objectId,globalId:t.globalId,error:r?new Q("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let s=null;for(let o=0;o<t.length;o++){const l=t[o],p=this._serializeFeature(l);s||l.geometry==null||(s=l.geometry.type),i[o]=p,r.set(`${p.uid}`,l)}const n=this;return{features:i,inferredGeometryType:s,finish(o){const l=n.sourceJSON.objectIdField;for(const p in o){const m=o[p],v=r.get(p);v&&(v.attributes||(v.attributes={}),m===-1?delete v.attributes[l]:v.attributes[l]=m,n._addIdToClientGeometry(v))}}}}_addIdToClientGeometry(t){var s;if(!this._idToClientGeometry)return;const r=this.sourceJSON.objectIdField,i=(s=t.attributes)==null?void 0:s[r];i!=null&&this._idToClientGeometry.set(i,t.geometry??null)}get _layerOrSourceGeometryType(){var t,r;return((t=this.layer)==null?void 0:t.geometryType)??((r=this.sourceJSON)==null?void 0:r.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),s=(bce++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:r}:{uid:s,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?ur.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await pce("MemorySourceWorker",{strategy:K("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:s,hasM:n,hasZ:o,timeInfo:l,dateFieldsTimeZone:p}=this.layer,m=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const v=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",(M=>{de.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),M.preventDefault()})));const _={features:v.features,fields:r==null?void 0:r.map((M=>M.toJSON())),geometryType:vN.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:m?null:i&&i.toJSON(),timeInfo:(l==null?void 0:l.toJSON())??null,dateFieldsTimeZone:p},E=await this._connection.invoke("load",_,{signal:t});for(const M of E.warnings)de.getLogger(this.layer).warn("#load()",`${M.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:M});E.featureErrors.length&&de.getLogger(this.layer).warn("#load()",`Encountered ${E.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:E.featureErrors});const $=E.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(v.inferredGeometryType)&&($.geometryType=vN.toJSON(v.inferredGeometryType)),this.sourceJSON=$,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),v.finish(E.assignedObjectIds)}};a([eR({Type:Sr,ensureType:Br(Sr)})],Dl.prototype,"itemType",void 0),a([A()],Dl.prototype,"type",void 0),a([A({constructOnly:!0})],Dl.prototype,"layer",void 0),a([A({readOnly:!0})],Dl.prototype,"_workerGeometryType",null),a([A()],Dl.prototype,"sourceJSON",void 0),Dl=a([P("esri.layers.graphics.sources.MemorySource")],Dl);function _ce(e){return"portalItem"in e}const Sce=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):_ce(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return a([A({type:String})],t.prototype,"apiKey",null),t=a([P("esri.layers.mixins.APIKeyMixin")],t),t},Ece=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Ja(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",Qne(r,de.getLogger(this)))}};return a([A()],t.prototype,"title",null),a([A({type:String})],t.prototype,"url",null),t=a([P("esri.layers.mixins.ArcGISService")],t),t};function LS(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Tce(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $ce(e,t,r,i,s,n,o,l,p,m,v,_,E,$,M,k){const N=new Float32Array(16);return N[0]=e,N[1]=t,N[2]=r,N[3]=i,N[4]=s,N[5]=n,N[6]=o,N[7]=l,N[8]=p,N[9]=m,N[10]=v,N[11]=_,N[12]=E,N[13]=$,N[14]=M,N[15]=k,N}const xce=LS();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:xce,clone:Tce,create:LS,fromValues:$ce},Symbol.toStringTag,{value:"Module"}));let t4=1e-6;function Ms(){return t4}function Ice(e){t4=e}const DS=Math.random,Mce=Math.PI/180,Cce=180/Math.PI;function r4(e){return e*Mce}function kce(e){return e*Cce}function Rce(e,t){return Math.abs(e-t)<=t4*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:DS,equals:Rce,getEpsilon:Ms,setEpsilon:Ice,toDegree:kce,toRadian:r4},Symbol.toStringTag,{value:"Module"}));function SG(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Kc(e,t,r,i,s,n,o,l,p,m,v,_,E,$,M,k,N){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=l,e[7]=p,e[8]=m,e[9]=v,e[10]=_,e[11]=E,e[12]=$,e[13]=M,e[14]=k,e[15]=N,e}function FS(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Xc(e,t){if(e===t){const r=t[1],i=t[2],s=t[3],n=t[6],o=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Oce(e,t){return EG(e,t)||FS(e),e}function EG(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],p=t[6],m=t[7],v=t[8],_=t[9],E=t[10],$=t[11],M=t[12],k=t[13],N=t[14],U=t[15],G=r*l-i*o,W=r*p-s*o,Z=r*m-n*o,ie=i*p-s*l,ne=i*m-n*l,ge=s*m-n*p,we=v*k-_*M,xe=v*N-E*M,Ie=v*U-$*M,$e=_*N-E*k,Re=_*U-$*k,pt=E*U-$*N;let qe=G*pt-W*Re+Z*$e+ie*Ie-ne*xe+ge*we;return qe?(qe=1/qe,e[0]=(l*pt-p*Re+m*$e)*qe,e[1]=(s*Re-i*pt-n*$e)*qe,e[2]=(k*ge-N*ne+U*ie)*qe,e[3]=(E*ne-_*ge-$*ie)*qe,e[4]=(p*Ie-o*pt-m*xe)*qe,e[5]=(r*pt-s*Ie+n*xe)*qe,e[6]=(N*Z-M*ge-U*W)*qe,e[7]=(v*ge-E*Z+$*W)*qe,e[8]=(o*Re-l*Ie+m*we)*qe,e[9]=(i*Ie-r*Re-n*we)*qe,e[10]=(M*ne-k*Z+U*G)*qe,e[11]=(_*Z-v*ne-$*G)*qe,e[12]=(l*xe-o*$e-p*we)*qe,e[13]=(r*$e-i*xe+s*we)*qe,e[14]=(k*W-M*ie-N*G)*qe,e[15]=(v*ie-_*W+E*G)*qe,e):null}function Pce(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],p=t[6],m=t[7],v=t[8],_=t[9],E=t[10],$=t[11],M=t[12],k=t[13],N=t[14],U=t[15];return e[0]=l*(E*U-$*N)-_*(p*U-m*N)+k*(p*$-m*E),e[1]=-(i*(E*U-$*N)-_*(s*U-n*N)+k*(s*$-n*E)),e[2]=i*(p*U-m*N)-l*(s*U-n*N)+k*(s*m-n*p),e[3]=-(i*(p*$-m*E)-l*(s*$-n*E)+_*(s*m-n*p)),e[4]=-(o*(E*U-$*N)-v*(p*U-m*N)+M*(p*$-m*E)),e[5]=r*(E*U-$*N)-v*(s*U-n*N)+M*(s*$-n*E),e[6]=-(r*(p*U-m*N)-o*(s*U-n*N)+M*(s*m-n*p)),e[7]=r*(p*$-m*E)-o*(s*$-n*E)+v*(s*m-n*p),e[8]=o*(_*U-$*k)-v*(l*U-m*k)+M*(l*$-m*_),e[9]=-(r*(_*U-$*k)-v*(i*U-n*k)+M*(i*$-n*_)),e[10]=r*(l*U-m*k)-o*(i*U-n*k)+M*(i*m-n*l),e[11]=-(r*(l*$-m*_)-o*(i*$-n*_)+v*(i*m-n*l)),e[12]=-(o*(_*N-E*k)-v*(l*N-p*k)+M*(l*E-p*_)),e[13]=r*(_*N-E*k)-v*(i*N-s*k)+M*(i*E-s*_),e[14]=-(r*(l*N-p*k)-o*(i*N-s*k)+M*(i*p-s*l)),e[15]=r*(l*E-p*_)-o*(i*E-s*_)+v*(i*p-s*l),e}function Nce(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],l=e[6],p=e[7],m=e[8],v=e[9],_=e[10],E=e[11],$=e[12],M=e[13],k=e[14],N=e[15];return(t*o-r*n)*(_*N-E*k)-(t*l-i*n)*(v*N-E*M)+(t*p-s*n)*(v*k-_*M)+(r*l-i*o)*(m*N-E*$)-(r*p-s*o)*(m*k-_*$)+(i*p-s*l)*(m*M-v*$)}function TG(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],p=t[5],m=t[6],v=t[7],_=t[8],E=t[9],$=t[10],M=t[11],k=t[12],N=t[13],U=t[14],G=t[15];let W=r[0],Z=r[1],ie=r[2],ne=r[3];return e[0]=W*i+Z*l+ie*_+ne*k,e[1]=W*s+Z*p+ie*E+ne*N,e[2]=W*n+Z*m+ie*$+ne*U,e[3]=W*o+Z*v+ie*M+ne*G,W=r[4],Z=r[5],ie=r[6],ne=r[7],e[4]=W*i+Z*l+ie*_+ne*k,e[5]=W*s+Z*p+ie*E+ne*N,e[6]=W*n+Z*m+ie*$+ne*U,e[7]=W*o+Z*v+ie*M+ne*G,W=r[8],Z=r[9],ie=r[10],ne=r[11],e[8]=W*i+Z*l+ie*_+ne*k,e[9]=W*s+Z*p+ie*E+ne*N,e[10]=W*n+Z*m+ie*$+ne*U,e[11]=W*o+Z*v+ie*M+ne*G,W=r[12],Z=r[13],ie=r[14],ne=r[15],e[12]=W*i+Z*l+ie*_+ne*k,e[13]=W*s+Z*p+ie*E+ne*N,e[14]=W*n+Z*m+ie*$+ne*U,e[15]=W*o+Z*v+ie*M+ne*G,e}function Lce(e,t,r){const i=r[0],s=r[1],n=r[2];if(t===e)e[12]=t[0]*i+t[4]*s+t[8]*n+t[12],e[13]=t[1]*i+t[5]*s+t[9]*n+t[13],e[14]=t[2]*i+t[6]*s+t[10]*n+t[14],e[15]=t[3]*i+t[7]*s+t[11]*n+t[15];else{const o=t[0],l=t[1],p=t[2],m=t[3],v=t[4],_=t[5],E=t[6],$=t[7],M=t[8],k=t[9],N=t[10],U=t[11];e[0]=o,e[1]=l,e[2]=p,e[3]=m,e[4]=v,e[5]=_,e[6]=E,e[7]=$,e[8]=M,e[9]=k,e[10]=N,e[11]=U,e[12]=o*i+v*s+M*n+t[12],e[13]=l*i+_*s+k*n+t[13],e[14]=p*i+E*s+N*n+t[14],e[15]=m*i+$*s+U*n+t[15]}return e}function Dce(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Fce(e,t,r,i){let s=i[0],n=i[1],o=i[2],l=Math.sqrt(s*s+n*n+o*o);if(l<=Ms())return void SG(e,t);l=1/l,s*=l,n*=l,o*=l;const p=Math.sin(r),m=Math.cos(r),v=1-m,_=t[0],E=t[1],$=t[2],M=t[3],k=t[4],N=t[5],U=t[6],G=t[7],W=t[8],Z=t[9],ie=t[10],ne=t[11],ge=s*s*v+m,we=n*s*v+o*p,xe=o*s*v-n*p,Ie=s*n*v-o*p,$e=n*n*v+m,Re=o*n*v+s*p,pt=s*o*v+n*p,qe=n*o*v-s*p,Ot=o*o*v+m;e[0]=_*ge+k*we+W*xe,e[1]=E*ge+N*we+Z*xe,e[2]=$*ge+U*we+ie*xe,e[3]=M*ge+G*we+ne*xe,e[4]=_*Ie+k*$e+W*Re,e[5]=E*Ie+N*$e+Z*Re,e[6]=$*Ie+U*$e+ie*Re,e[7]=M*Ie+G*$e+ne*Re,e[8]=_*pt+k*qe+W*Ot,e[9]=E*pt+N*qe+Z*Ot,e[10]=$*pt+U*qe+ie*Ot,e[11]=M*pt+G*qe+ne*Ot,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function jce(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[4],o=t[5],l=t[6],p=t[7],m=t[8],v=t[9],_=t[10],E=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+m*i,e[5]=o*s+v*i,e[6]=l*s+_*i,e[7]=p*s+E*i,e[8]=m*s-n*i,e[9]=v*s-o*i,e[10]=_*s-l*i,e[11]=E*s-p*i,e}function Bce(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],l=t[2],p=t[3],m=t[8],v=t[9],_=t[10],E=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-m*i,e[1]=o*s-v*i,e[2]=l*s-_*i,e[3]=p*s-E*i,e[8]=n*i+m*s,e[9]=o*i+v*s,e[10]=l*i+_*s,e[11]=p*i+E*s,e}function Uce(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],l=t[2],p=t[3],m=t[4],v=t[5],_=t[6],E=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+m*i,e[1]=o*s+v*i,e[2]=l*s+_*i,e[3]=p*s+E*i,e[4]=m*s-n*i,e[5]=v*s-o*i,e[6]=_*s-l*i,e[7]=E*s-p*i,e}function Vce(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function zce(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Gce(e,t,r){if(t===0)return FS(e);let i=r[0],s=r[1],n=r[2],o=Math.sqrt(i*i+s*s+n*n);if(o<=Ms())return null;o=1/o,i*=o,s*=o,n*=o;const l=Math.sin(t),p=Math.cos(t),m=1-p;return e[0]=i*i*m+p,e[1]=s*i*m+n*l,e[2]=n*i*m-s*l,e[3]=0,e[4]=i*s*m-n*l,e[5]=s*s*m+p,e[6]=n*s*m+i*l,e[7]=0,e[8]=i*n*m+s*l,e[9]=s*n*m-i*l,e[10]=n*n*m+p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function qce(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Hce(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Wce(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $G(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=i+i,p=s+s,m=n+n,v=i*l,_=i*p,E=i*m,$=s*p,M=s*m,k=n*m,N=o*l,U=o*p,G=o*m;return e[0]=1-($+k),e[1]=_+G,e[2]=E-U,e[3]=0,e[4]=_-G,e[5]=1-(v+k),e[6]=M+N,e[7]=0,e[8]=E+U,e[9]=M-N,e[10]=1-(v+$),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Qce(e,t){const r=Jce,i=-t[0],s=-t[1],n=-t[2],o=t[3],l=t[4],p=t[5],m=t[6],v=t[7],_=i*i+s*s+n*n+o*o;return _>0?(r[0]=2*(l*o+v*i+p*n-m*s)/_,r[1]=2*(p*o+v*s+m*i-l*n)/_,r[2]=2*(m*o+v*n+l*s-p*i)/_):(r[0]=2*(l*o+v*i+p*n-m*s),r[1]=2*(p*o+v*s+m*i-l*n),r[2]=2*(m*o+v*n+l*s-p*i)),$G(e,t,r),e}const Jce=Yc();function Zce(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Yce(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],l=t[6],p=t[8],m=t[9],v=t[10];return e[0]=Math.sqrt(r*r+i*i+s*s),e[1]=Math.sqrt(n*n+o*o+l*l),e[2]=Math.sqrt(p*p+m*m+v*v),e}function Kce(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function Xce(e,t,r,i){const s=t[0],n=t[1],o=t[2],l=t[3],p=s+s,m=n+n,v=o+o,_=s*p,E=s*m,$=s*v,M=n*m,k=n*v,N=o*v,U=l*p,G=l*m,W=l*v,Z=i[0],ie=i[1],ne=i[2];return e[0]=(1-(M+N))*Z,e[1]=(E+W)*Z,e[2]=($-G)*Z,e[3]=0,e[4]=(E-W)*ie,e[5]=(1-(_+N))*ie,e[6]=(k+U)*ie,e[7]=0,e[8]=($+G)*ne,e[9]=(k-U)*ne,e[10]=(1-(_+M))*ne,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function ede(e,t,r,i,s){const n=t[0],o=t[1],l=t[2],p=t[3],m=n+n,v=o+o,_=l+l,E=n*m,$=n*v,M=n*_,k=o*v,N=o*_,U=l*_,G=p*m,W=p*v,Z=p*_,ie=i[0],ne=i[1],ge=i[2],we=s[0],xe=s[1],Ie=s[2],$e=(1-(k+U))*ie,Re=($+Z)*ie,pt=(M-W)*ie,qe=($-Z)*ne,Ot=(1-(E+U))*ne,ni=(N+G)*ne,Ct=(M+W)*ge,It=(N-G)*ge,Gi=(1-(E+k))*ge;return e[0]=$e,e[1]=Re,e[2]=pt,e[3]=0,e[4]=qe,e[5]=Ot,e[6]=ni,e[7]=0,e[8]=Ct,e[9]=It,e[10]=Gi,e[11]=0,e[12]=r[0]+we-($e*we+qe*xe+Ct*Ie),e[13]=r[1]+xe-(Re*we+Ot*xe+It*Ie),e[14]=r[2]+Ie-(pt*we+ni*xe+Gi*Ie),e[15]=1,e}function tde(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,l=i+i,p=s+s,m=r*o,v=i*o,_=i*l,E=s*o,$=s*l,M=s*p,k=n*o,N=n*l,U=n*p;return e[0]=1-_-M,e[1]=v+U,e[2]=E-N,e[3]=0,e[4]=v-U,e[5]=1-m-M,e[6]=$+k,e[7]=0,e[8]=E+N,e[9]=$-k,e[10]=1-m-_,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function rde(e,t,r,i,s,n,o){const l=1/(r-t),p=1/(s-i),m=1/(n-o);return e[0]=2*n*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*p,e[6]=0,e[7]=0,e[8]=(r+t)*l,e[9]=(s+i)*p,e[10]=(o+n)*m,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*m,e[15]=0,e}function ide(e,t,r,i,s){const n=1/Math.tan(t/2);let o;return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(i-s),e[10]=(s+i)*o,e[14]=2*s*i*o):(e[10]=-1,e[14]=-2*i),e}function sde(e,t,r,i){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),p=2/(o+l),m=2/(s+n);return e[0]=p,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=m,e[6]=0,e[7]=0,e[8]=-(o-l)*p*.5,e[9]=(s-n)*m*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function nde(e,t,r,i,s,n,o){const l=1/(t-r),p=1/(i-s),m=1/(n-o);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*m,e[11]=0,e[12]=(t+r)*l,e[13]=(s+i)*p,e[14]=(o+n)*m,e[15]=1,e}function ode(e,t,r,i){const s=t[0],n=t[1],o=t[2];let l=s-r[0],p=n-r[1],m=o-r[2];const v=Ms();if(Math.abs(l)<v&&Math.abs(p)<v&&Math.abs(m)<v)return void FS(e);let _=1/Math.sqrt(l*l+p*p+m*m);l*=_,p*=_,m*=_;const E=i[0],$=i[1],M=i[2];let k=$*m-M*p,N=M*l-E*m,U=E*p-$*l;_=Math.sqrt(k*k+N*N+U*U),_?(_=1/_,k*=_,N*=_,U*=_):(k=0,N=0,U=0);let G=p*U-m*N,W=m*k-l*U,Z=l*N-p*k;_=Math.sqrt(G*G+W*W+Z*Z),_?(_=1/_,G*=_,W*=_,Z*=_):(G=0,W=0,Z=0),e[0]=k,e[1]=G,e[2]=l,e[3]=0,e[4]=N,e[5]=W,e[6]=p,e[7]=0,e[8]=U,e[9]=Z,e[10]=m,e[11]=0,e[12]=-(k*s+N*n+U*o),e[13]=-(G*s+W*n+Z*o),e[14]=-(l*s+p*n+m*o),e[15]=1}function ade(e,t,r,i){const s=t[0],n=t[1],o=t[2],l=i[0],p=i[1],m=i[2];let v=s-r[0],_=n-r[1],E=o-r[2],$=v*v+_*_+E*E;$>0&&($=1/Math.sqrt($),v*=$,_*=$,E*=$);let M=p*E-m*_,k=m*v-l*E,N=l*_-p*v;return $=M*M+k*k+N*N,$>0&&($=1/Math.sqrt($),M*=$,k*=$,N*=$),e[0]=M,e[1]=k,e[2]=N,e[3]=0,e[4]=_*N-E*k,e[5]=E*M-v*N,e[6]=v*k-_*M,e[7]=0,e[8]=v,e[9]=_,e[10]=E,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function lde(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ude(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function cde(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function xG(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function dde(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function pde(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function hde(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ade(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],p=e[6],m=e[7],v=e[8],_=e[9],E=e[10],$=e[11],M=e[12],k=e[13],N=e[14],U=e[15],G=t[0],W=t[1],Z=t[2],ie=t[3],ne=t[4],ge=t[5],we=t[6],xe=t[7],Ie=t[8],$e=t[9],Re=t[10],pt=t[11],qe=t[12],Ot=t[13],ni=t[14],Ct=t[15],It=Ms();return Math.abs(r-G)<=It*Math.max(1,Math.abs(r),Math.abs(G))&&Math.abs(i-W)<=It*Math.max(1,Math.abs(i),Math.abs(W))&&Math.abs(s-Z)<=It*Math.max(1,Math.abs(s),Math.abs(Z))&&Math.abs(n-ie)<=It*Math.max(1,Math.abs(n),Math.abs(ie))&&Math.abs(o-ne)<=It*Math.max(1,Math.abs(o),Math.abs(ne))&&Math.abs(l-ge)<=It*Math.max(1,Math.abs(l),Math.abs(ge))&&Math.abs(p-we)<=It*Math.max(1,Math.abs(p),Math.abs(we))&&Math.abs(m-xe)<=It*Math.max(1,Math.abs(m),Math.abs(xe))&&Math.abs(v-Ie)<=It*Math.max(1,Math.abs(v),Math.abs(Ie))&&Math.abs(_-$e)<=It*Math.max(1,Math.abs(_),Math.abs($e))&&Math.abs(E-Re)<=It*Math.max(1,Math.abs(E),Math.abs(Re))&&Math.abs($-pt)<=It*Math.max(1,Math.abs($),Math.abs(pt))&&Math.abs(M-qe)<=It*Math.max(1,Math.abs(M),Math.abs(qe))&&Math.abs(k-Ot)<=It*Math.max(1,Math.abs(k),Math.abs(Ot))&&Math.abs(N-ni)<=It*Math.max(1,Math.abs(N),Math.abs(ni))&&Math.abs(U-Ct)<=It*Math.max(1,Math.abs(U),Math.abs(Ct))}function fde(e){const t=Ms(),r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],l=e[6],p=e[8],m=e[9],v=e[10];return Math.abs(1-(r*r+n*n+p*p))<=t&&Math.abs(1-(i*i+o*o+m*m))<=t&&Math.abs(1-(s*s+l*l+v*v))<=t}function mde(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const yde=TG,gde=xG;Object.freeze(Object.defineProperty({__proto__:null,add:cde,adjoint:Pce,copy:SG,determinant:Nce,equals:Ade,exactEquals:hde,frob:ude,fromQuat:tde,fromQuat2:Qce,fromRotation:Gce,fromRotationTranslation:$G,fromRotationTranslationScale:Xce,fromRotationTranslationScaleOrigin:ede,fromScaling:zce,fromTranslation:Vce,fromXRotation:qce,fromYRotation:Hce,fromZRotation:Wce,frustum:rde,getRotation:Kce,getScale:Yce,getTranslation:Zce,hasIdentityRotation:mde,identity:FS,invert:EG,invertOrIdentity:Oce,isOrthoNormal:fde,lookAt:ode,mul:yde,multiply:TG,multiplyScalar:dde,multiplyScalarAndAdd:pde,ortho:nde,perspective:ide,perspectiveFromFieldOfView:sde,rotate:Fce,rotateX:jce,rotateY:Bce,rotateZ:Uce,scale:Dce,set:Kc,str:lde,sub:gde,subtract:xG,targetTo:ade,translate:Lce,transpose:Xc},Symbol.toStringTag,{value:"Module"}));const vde=(e,t)=>{const r=Kc(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Xc(r,r)},wde=(e,t)=>{const r=Kc(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Xc(r,r)},bde=(e,t)=>{const r=1-t,i=Kc(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Xc(i,i)},_de=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),s=Kc(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return Xc(s,s)},Sde=(e,t)=>{const r=1-2*t,i=Kc(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return Xc(i,i)},Ede=(e,t)=>{const r=Kc(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Xc(r,r)},Tde=(e,t)=>{const r=1-t,i=Kc(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Xc(i,i)};let IG=class MG{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=Ks(t.strength,r.strength,i),this.radius=Ks(t.radius,r.radius,i),this.threshold=Ks(t.threshold,r.threshold,i)}clone(){return new MG(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:bg(this.radius),strength:this.strength,threshold:this.threshold}}},CG=class kG{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(Ks(t.radius,r.radius,i))}clone(){return new kG(this.radius)}toJSON(){return{type:"blur",radius:bg(this.radius)}}},JI=class RG{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=Ks(t.amount,r.amount,i),this._updateMatrix()}clone(){return new RG(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||LS();switch(this.type){case"brightness":this._colorMatrix=vde(t,this.amount);break;case"contrast":this._colorMatrix=wde(t,this.amount);break;case"grayscale":this._colorMatrix=bde(t,this.amount);break;case"invert":this._colorMatrix=Sde(t,this.amount);break;case"saturate":this._colorMatrix=Ede(t,this.amount);break;case"sepia":this._colorMatrix=Tde(t,this.amount)}}},OG=class PG{constructor(t,r,i,s){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=s,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=Ks(t.offsetX,r.offsetX,i),this.offsetY=Ks(t.offsetY,r.offsetY,i),this.blurRadius=Ks(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(Ks(t.color[0],r.color[0],i)),this.color[1]=Math.round(Ks(t.color[1],r.color[1],i)),this.color[2]=Math.round(Ks(t.color[2],r.color[2],i)),this.color[3]=Ks(t.color[3],r.color[3],i)}clone(){return new PG(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:bg(this.offsetX),yoffset:bg(this.offsetY),blurRadius:bg(this.blurRadius),color:t}}},NG=class LG{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=Ks(t.angle,r.angle,i),this._updateMatrix()}clone(){return new LG(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||LS();this._colorMatrix=_de(t,this.angle)}},DG=class FG{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=Ks(t.amount,r.amount,i)}clone(){return new FG(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Ks(e,t,r){return e+(t-e)*r}function bg(e){return Math.round(1e3*uo(e))/1e3}function $de(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new JI(e.type,0);case"saturate":case"brightness":case"contrast":return new JI(e.type,1);case"opacity":return new DG(1);case"hue-rotate":return new NG(0);case"blur":return new CG(0);case"drop-shadow":return new OG(0,0,0,[...yR("transparent")]);case"bloom":return new IG(0,0,1)}}function xde(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((i,s)=>i.type===r[s].type))}function Ide(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let s=i.length;s<r.length;s++)i.push($de(r[s]))}function Mde(e){const t=e[0];return!!t&&"type"in t}function Cde(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)}let pL=class extends SyntaxError{constructor(t,r,i,s){super(t),this.expected=r,this.found=i,this.location=s,this.name="SyntaxError"}format(t){let r="Error: "+this.message;if(this.location){let i=null;const s=t.find((p=>p.source===this.location.source));s&&(i=s.text.split(/\r\n|\n|\r/g));const n=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,l=this.location.source+":"+o.line+":"+o.column;if(i){const p=this.location.end,m="".padEnd(o.line.toString().length," "),v=i[n.line-1],_=(n.line===p.line?p.column:v.length+1)-n.column||1;r+=`
 --> `+l+`
`+m+` |
`+o.line+" | "+v+`
`+m+" | "+"".padEnd(n.column-1," ")+"".padEnd(_,"^")}else r+=`
 at `+l}return r}static buildMessage(t,r){function i(E){return E.codePointAt(0).toString(16).toUpperCase()}const s=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function n(E){return s?E.replace(s,($=>"\\u{"+i($)+"}")):E}function o(E){return n(E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,($=>"\\x0"+i($))).replace(/[\x10-\x1F\x7F-\x9F]/g,($=>"\\x"+i($))))}function l(E){return n(E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,($=>"\\x0"+i($))).replace(/[\x10-\x1F\x7F-\x9F]/g,($=>"\\x"+i($))))}const p={literal:E=>'"'+o(E.text)+'"',class(E){const $=E.parts.map((M=>Array.isArray(M)?l(M[0])+"-"+l(M[1]):l(M)));return"["+(E.inverted?"^":"")+$.join("")+"]"+(E.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:E=>E.description};function m(E){return p[E.type](E)}function v(E){const $=E.map(m);if($.sort(),$.length>0){let M=1;for(let k=1;k<$.length;k++)$[k-1]!==$[k]&&($[M]=$[k],M++);$.length=M}switch($.length){case 1:return $[0];case 2:return $[0]+" or "+$[1];default:return $.slice(0,-1).join(", ")+", or "+$[$.length-1]}}function _(E){return E?'"'+o(E)+'"':"end of input"}return"Expected "+v(t)+" but "+_(r)+" found."}};function kde(e,t){const r={},i=(t=t!==void 0?t:{}).grammarSource,s={start:vt};let n=vt;const o="none",l=")",p=",",m="(",v="%",_="px",E="cm",$="mm",M="in",k="pt",N="pc",U="deg",G="rad",W="grad",Z="turn",ie="#",ne=".",ge="e",we=/^[ \t\n\r]/,xe=/^[a-z\-]/,Ie=/^[0-9a-fA-F]/,$e=/^[+\-]/,Re=/^[0-9]/,pt=ir("none"),qe=R("none",!1),Ot=R(")",!1),ni=R(",",!1),Ct=Tt([" ","	",`
`,"\r"],!1,!1,!1),It=ir("function"),Gi=R("(",!1),u1=ir("identifier"),pm=Tt([["a","z"],"-"],!1,!1,!1),uh=ir("percentage"),c1=R("%",!1),_E=ir("length"),SE=R("px",!1),d1=R("cm",!1),EE=R("mm",!1),TE=R("in",!1),$E=R("pt",!1),xE=R("pc",!1),IE=ir("angle"),ME=R("deg",!1),CE=R("rad",!1),kE=R("grad",!1),RE=R("turn",!1),OE=ir("number"),tl=ir("color"),rd=R("#",!1),p1=Tt([["0","9"],["a","f"],["A","F"]],!1,!1,!1),h1=Tt(["+","-"],!1,!1,!1),gi=Tt([["0","9"]],!1,!1,!1),hm=R(".",!1),A1=R("e",!1);function mu(){return[]}function Am(I,ae){return{type:"function",name:I,parameters:ae||[]}}function PE(I,ae){return ae.length>0?JE(I,ae,3):[I]}function NE(I){return{type:"quantity",value:I.value,unit:I.unit}}function f1(I){return{type:"color",colorType:I.type,value:I.value}}function NO(I){return I}function LE(){return Ae()}function DE(I){return{value:I,unit:"%"}}function FE(I){return{value:I,unit:"px"}}function jE(I){return{value:I,unit:"cm"}}function BE(I){return{value:I,unit:"mm"}}function UE(I){return{value:I,unit:"in"}}function fm(I){return{value:I,unit:"pt"}}function VE(I){return{value:I,unit:"pc"}}function zE(I){return{value:I,unit:"deg"}}function ve(I){return{value:I,unit:"rad"}}function GE(I){return{value:I,unit:"grad"}}function m1(I){return{value:I,unit:"turn"}}function qE(I){return{value:I,unit:null}}function HE(){return{type:"hex",value:Ae()}}function mm(I){return{type:"function",value:I}}function y1(){return{type:"named",value:Ae()}}function g1(){return parseFloat(Ae())}let le=0|t.peg$currPos,Jt=le;const ea=[{line:1,column:1}];let Rn,se=le,he=t.peg$maxFailExpected||[],ue=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');n=s[t.startRule]}function Ae(){return e.substring(Jt,le)}function d(I=le){const ae=e.codePointAt(I);return ae===void 0?"":String.fromCodePoint(ae)}function R(I,ae){return{type:"literal",text:I,ignoreCase:ae}}function Tt(I,ae,Se,tt){return{type:"class",parts:I,inverted:ae,ignoreCase:Se,unicode:tt}}function Ut(){return{type:"end"}}function ir(I){return{type:"other",description:I}}function gt(I){let ae,Se=ea[I];if(Se)return Se;if(I>=ea.length)ae=ea.length-1;else for(ae=I;!ea[--ae];);for(Se=ea[ae],Se={line:Se.line,column:Se.column};ae<I;)e.charCodeAt(ae)===10?(Se.line++,Se.column=1):Se.column++,ae++;return ea[I]=Se,Se}function kt(I,ae,Se){const tt=gt(I),Vt=gt(ae);return{source:i,start:{offset:I,line:tt.line,column:tt.column},end:{offset:ae,line:Vt.line,column:Vt.column}}}function rt(I){le<se||(le>se&&(se=le,he=[]),he.push(I))}function jt(I,ae,Se){return new pL(pL.buildMessage(I,ae),I,ae,Se)}function vt(){let I;return I=Rs(),I===r&&(I=ch()),I}function Rs(){let I,ae;return ue++,I=le,pr(),e.substr(le,4)===o?(ae=o,le+=4):(ae=r,ue===0&&rt(qe)),ae!==r?(pr(),Jt=I,I=mu()):(le=I,I=r),ue--,I===r&&ue===0&&rt(pt),I}function ch(){let I,ae;if(I=[],ae=ym(),ae!==r)for(;ae!==r;)I.push(ae),ae=ym();else I=r;return I}function ym(){let I,ae,Se,tt;return I=le,pr(),ae=On(),ae!==r?(pr(),Se=gm(),Se===r&&(Se=null),pr(),e.charCodeAt(le)===41?(tt=l,le++):(tt=r,ue===0&&rt(Ot)),tt!==r?(pr(),Jt=I,I=Am(ae,Se)):(le=I,I=r)):(le=I,I=r),I}function gm(){let I,ae,Se,tt,Vt,wr,Ur,oi;if(I=le,ae=qi(),ae!==r){for(Se=[],tt=le,Vt=pr(),e.charCodeAt(le)===44?(wr=p,le++):(wr=r,ue===0&&rt(ni)),wr===r&&(wr=null),Ur=pr(),oi=qi(),oi!==r?(Vt=[Vt,wr,Ur,oi],tt=Vt):(le=tt,tt=r);tt!==r;)Se.push(tt),tt=le,Vt=pr(),e.charCodeAt(le)===44?(wr=p,le++):(wr=r,ue===0&&rt(ni)),wr===r&&(wr=null),Ur=pr(),oi=qi(),oi!==r?(Vt=[Vt,wr,Ur,oi],tt=Vt):(le=tt,tt=r);Jt=I,I=PE(ae,Se)}else le=I,I=r;return I}function qi(){let I,ae;return I=le,ae=WE(),ae===r&&(ae=fo(),ae===r&&(ae=dt(),ae===r&&(ae=D()))),ae!==r&&(Jt=I,ae=NE(ae)),I=ae,I===r&&(I=le,ae=nt(),ae!==r&&(Jt=I,ae=f1(ae)),I=ae),I}function pr(){let I,ae;for(ue++,I=[],ae=e.charAt(le),we.test(ae)?le++:(ae=r,ue===0&&rt(Ct));ae!==r;)I.push(ae),ae=e.charAt(le),we.test(ae)?le++:(ae=r,ue===0&&rt(Ct));return ue--,I}function On(){let I,ae,Se;return ue++,I=le,ae=dh(),ae!==r?(e.charCodeAt(le)===40?(Se=m,le++):(Se=r,ue===0&&rt(Gi)),Se!==r?(Jt=I,I=ae):(le=I,I=r)):(le=I,I=r),ue--,I===r&&(ae=r,ue===0&&rt(It)),I}function dh(){let I,ae,Se;if(ue++,I=le,ae=[],Se=e.charAt(le),xe.test(Se)?le++:(Se=r,ue===0&&rt(pm)),Se!==r)for(;Se!==r;)ae.push(Se),Se=e.charAt(le),xe.test(Se)?le++:(Se=r,ue===0&&rt(pm));else ae=r;return ae!==r&&(Jt=I,ae=LE()),I=ae,ue--,I===r&&(ae=r,ue===0&&rt(u1)),I}function WE(){let I,ae,Se;return ue++,I=le,pr(),ae=us(),ae!==r?(e.charCodeAt(le)===37?(Se=v,le++):(Se=r,ue===0&&rt(c1)),Se!==r?(Jt=I,I=DE(ae)):(le=I,I=r)):(le=I,I=r),ue--,I===r&&ue===0&&rt(uh),I}function fo(){let I,ae,Se;return ue++,I=le,pr(),ae=us(),ae!==r?(e.substr(le,2)===_?(Se=_,le+=2):(Se=r,ue===0&&rt(SE)),Se!==r?(Jt=I,I=FE(ae)):(le=I,I=r)):(le=I,I=r),I===r&&(I=le,pr(),ae=us(),ae!==r?(e.substr(le,2)===E?(Se=E,le+=2):(Se=r,ue===0&&rt(d1)),Se!==r?(Jt=I,I=jE(ae)):(le=I,I=r)):(le=I,I=r),I===r&&(I=le,pr(),ae=us(),ae!==r?(e.substr(le,2)===$?(Se=$,le+=2):(Se=r,ue===0&&rt(EE)),Se!==r?(Jt=I,I=BE(ae)):(le=I,I=r)):(le=I,I=r),I===r&&(I=le,pr(),ae=us(),ae!==r?(e.substr(le,2)===M?(Se=M,le+=2):(Se=r,ue===0&&rt(TE)),Se!==r?(Jt=I,I=UE(ae)):(le=I,I=r)):(le=I,I=r),I===r&&(I=le,pr(),ae=us(),ae!==r?(e.substr(le,2)===k?(Se=k,le+=2):(Se=r,ue===0&&rt($E)),Se!==r?(Jt=I,I=fm(ae)):(le=I,I=r)):(le=I,I=r),I===r&&(I=le,pr(),ae=us(),ae!==r?(e.substr(le,2)===N?(Se=N,le+=2):(Se=r,ue===0&&rt(xE)),Se!==r?(Jt=I,I=VE(ae)):(le=I,I=r)):(le=I,I=r)))))),ue--,I===r&&ue===0&&rt(_E),I}function dt(){let I,ae,Se;return ue++,I=le,ae=us(),ae!==r?(e.substr(le,3)===U?(Se=U,le+=3):(Se=r,ue===0&&rt(ME)),Se!==r?(Jt=I,I=zE(ae)):(le=I,I=r)):(le=I,I=r),I===r&&(I=le,ae=us(),ae!==r?(e.substr(le,3)===G?(Se=G,le+=3):(Se=r,ue===0&&rt(CE)),Se!==r?(Jt=I,I=ve(ae)):(le=I,I=r)):(le=I,I=r),I===r&&(I=le,ae=us(),ae!==r?(e.substr(le,4)===W?(Se=W,le+=4):(Se=r,ue===0&&rt(kE)),Se!==r?(Jt=I,I=GE(ae)):(le=I,I=r)):(le=I,I=r),I===r&&(I=le,ae=us(),ae!==r?(e.substr(le,4)===Z?(Se=Z,le+=4):(Se=r,ue===0&&rt(RE)),Se!==r?(Jt=I,I=m1(ae)):(le=I,I=r)):(le=I,I=r)))),ue--,I===r&&(ae=r,ue===0&&rt(IE)),I}function D(){let I,ae;return ue++,I=le,pr(),ae=us(),ae!==r?(Jt=I,I=qE(ae)):(le=I,I=r),ue--,I===r&&ue===0&&rt(OE),I}function nt(){let I,ae,Se,tt;if(ue++,I=le,e.charCodeAt(le)===35?(ae=ie,le++):(ae=r,ue===0&&rt(rd)),ae!==r){if(Se=[],tt=e.charAt(le),Ie.test(tt)?le++:(tt=r,ue===0&&rt(p1)),tt!==r)for(;tt!==r;)Se.push(tt),tt=e.charAt(le),Ie.test(tt)?le++:(tt=r,ue===0&&rt(p1));else Se=r;Se!==r?(Jt=I,I=HE()):(le=I,I=r)}else le=I,I=r;return I===r&&(I=le,ae=ym(),ae!==r&&(Jt=I,ae=mm(ae)),I=ae,I===r&&(I=le,ae=dh(),ae!==r&&(Jt=I,ae=y1()),I=ae)),ue--,I===r&&(ae=r,ue===0&&rt(tl)),I}function us(){let I,ae,Se,tt,Vt,wr,Ur,oi;for(I=le,ae=e.charAt(le),$e.test(ae)?le++:(ae=r,ue===0&&rt(h1)),ae===r&&(ae=null),Se=le,tt=[],Vt=e.charAt(le),Re.test(Vt)?le++:(Vt=r,ue===0&&rt(gi));Vt!==r;)tt.push(Vt),Vt=e.charAt(le),Re.test(Vt)?le++:(Vt=r,ue===0&&rt(gi));if(e.charCodeAt(le)===46?(Vt=ne,le++):(Vt=r,ue===0&&rt(hm)),Vt!==r){if(wr=[],Ur=e.charAt(le),Re.test(Ur)?le++:(Ur=r,ue===0&&rt(gi)),Ur!==r)for(;Ur!==r;)wr.push(Ur),Ur=e.charAt(le),Re.test(Ur)?le++:(Ur=r,ue===0&&rt(gi));else wr=r;wr!==r?(tt=[tt,Vt,wr],Se=tt):(le=Se,Se=r)}else le=Se,Se=r;if(Se===r)if(Se=[],tt=e.charAt(le),Re.test(tt)?le++:(tt=r,ue===0&&rt(gi)),tt!==r)for(;tt!==r;)Se.push(tt),tt=e.charAt(le),Re.test(tt)?le++:(tt=r,ue===0&&rt(gi));else Se=r;if(Se!==r){if(tt=le,e.charCodeAt(le)===101?(Vt=ge,le++):(Vt=r,ue===0&&rt(A1)),Vt!==r){if(wr=e.charAt(le),$e.test(wr)?le++:(wr=r,ue===0&&rt(h1)),wr===r&&(wr=null),Ur=[],oi=e.charAt(le),Re.test(oi)?le++:(oi=r,ue===0&&rt(gi)),oi!==r)for(;oi!==r;)Ur.push(oi),oi=e.charAt(le),Re.test(oi)?le++:(oi=r,ue===0&&rt(gi));else Ur=r;Ur!==r?(Vt=[Vt,wr,Ur],tt=Vt):(le=tt,tt=r)}else le=tt,tt=r;tt===r&&(tt=null),Jt=I,I=g1()}else le=I,I=r;return I}function QE(I,ae){return I.map((function(Se){return Se[ae]}))}function JE(I,ae,Se){return[I].concat(QE(ae,Se))}Rn=n();const vm=Rn!==r&&le===e.length;function v1(){throw Rn!==r&&le<e.length&&rt(Ut()),jt(he,se<e.length?d(se):null,se<e.length?kt(se,se+1):kt(se,se))}return t.peg$library?{peg$result:Rn,peg$currPos:le,peg$FAILED:r,peg$maxFailExpected:he,peg$maxFailPos:se,peg$success:vm,peg$throw:vm?void 0:v1}:vm?Rn:void v1()}function jG(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=hL(e);return r&&r.length!==0?r:null}const t=e.map((r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new Q("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:hL(r.value)}}));t.sort(((r,i)=>i.effects.length-r.effects.length));for(let r=0;r<t.length-1;r++){if(!xde(t[r].effects,t[r+1].effects))throw new Q("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});Ide(t[r].effects,t[r+1].effects)}return t.sort(((r,i)=>i.scale-r.scale)),t}function hL(e){let t;if(!e)return[];try{t=kde(e)}catch(r){throw new Q("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map((r=>Rde(r)))}function Rde(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Ode(e);case"opacity":return Pde(e);case"hue-rotate":return Nde(e);case"blur":return Lde(e);case"drop-shadow":return Dde(e);case"bloom":return Fde(e)}}catch(t){throw t.details.filter=e,t}throw new Q("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Ode(e){let t=1;return im(e.parameters,1),e.parameters.length===1&&(t=Fo(e.parameters[0])),new JI(e.name,t)}function Pde(e){let t=1;return im(e.parameters,1),e.parameters.length===1&&(t=Fo(e.parameters[0])),new DG(t)}function Nde(e){let t=0;return im(e.parameters,1),e.parameters.length===1&&(t=Gde(e.parameters[0])),new NG(t)}function Lde(e){let t=0;return im(e.parameters,1),e.parameters.length===1&&(t=n4(e.parameters[0]),e1(t,e.parameters[0])),new CG(t)}function Dde(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new Q("effect:type-error","Accepts only one color",{});r=qde(i)}else{const s=n4(i);if(Object.isFrozen(t))throw new Q("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&e1(s,i)}if(t.length<2||t.length>3)throw new Q("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new OG(t[0],t[1],t[2]||0,r||BG("black"))}function Fde(e){let t=1,r=0,i=0;return im(e.parameters,3),e.parameters[0]&&(t=Fo(e.parameters[0])),e.parameters[1]&&(r=n4(e.parameters[1]),e1(r,e.parameters[1])),e.parameters[2]&&(i=Fo(e.parameters[2])),new IG(t,r,i)}function im(e,t){if(e.length>t)throw new Q("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function jS(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in s4)return"<length>";if(e.unit in i4)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function e1(e,t){if(e<0)throw new Q("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function jde(e){if(e.type!=="quantity"||e.unit!==null)throw new Q("effect:type-error",`Expected <double>, Actual: ${jS(e)}`,{term:e})}function Bde(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new Q("effect:type-error",`Expected <double> or <percentage>, Actual: ${jS(e)}`,{term:e})}const i4={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Ude(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&i4[e.unit]!=null))throw new Q("effect:type-error",`Expected <angle>, Actual: ${jS(e)}`,{term:e})}const s4={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Vde(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&s4[e.unit]!=null))throw new Q("effect:type-error",`Expected <length>, Actual: ${jS(e)}`,{term:e})}function Fo(e){Bde(e);const t=e.value;return e1(t,e),e.unit==="%"?.01*t:t}function zde(e){return jde(e),e1(e.value,e),e.value}function Gde(e){return Ude(e),e.value*i4[e.unit]||0}function n4(e){return Vde(e),e.value*s4[e.unit]||0}function qde(e){switch(e.colorType){case"hex":return Qse(e.value);case"named":return BG(e.value);case"function":return Qde(e.value)}}function BG(e){if(!CU(e))throw new Q("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Wse(e)}const Hde=/^rgba?/i,Wde=/^hsla?/i;function Qde(e){if(im(e.parameters,4),Hde.test(e.name))return[Fo(e.parameters[0]),Fo(e.parameters[1]),Fo(e.parameters[2]),e.parameters[3]?Fo(e.parameters[3]):1];if(Wde.test(e.name))return kU(zde(e.parameters[0]),Fo(e.parameters[1]),Fo(e.parameters[2]),e.parameters[3]?Fo(e.parameters[3]):1);throw new Q("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function lv(e,t,r){var i;try{return Zde(e)}catch(s){(i=r==null?void 0:r.messages)==null||i.push(s)}return null}function uv(e,t,r,i){try{const s=Jde(e);jr(r,s,t)}catch(s){i.messages&&i.messages.push(s)}}function Jde(e){const t=jG(e);return t?Mde(t)?t.map((r=>r.toJSON())):t.map((({scale:r,effects:i})=>({scale:r,value:i.map((s=>s.toJSON()))}))):null}function Zde(e){if(!e||e.length===0)return null;if(Yde(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:AL(r.value)});return t}return AL(e)}function Yde(e){const t=e[0];return!!t&&"scale"in t}function AL(e){if(!(e!=null&&e.length))return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[il(r,"amount")];break;case"blur":i=[il(r,"radius","pt")];break;case"hue-rotate":i=[il(r,"angle","deg")];break;case"drop-shadow":i=[il(r,"xoffset","pt"),il(r,"yoffset","pt"),il(r,"blurRadius","pt"),Kde(r,"color")];break;case"bloom":i=[il(r,"strength"),il(r,"radius","pt"),il(r,"threshold")]}const s=`${r.type}(${i.filter(Boolean).join(" ")})`;jG(s),t.push(s)}return t.join(" ")}function il(e,t,r){if(e[t]==null)throw new Q("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function Kde(e,t){if(e[t]==null)throw new Q("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const Xde={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:tr}},"portal-item":{read:!0,write:{layerContainerTypes:tr}}}}},fL={read:{reader:lv},write:{allowNull:!0,writer:uv,layerContainerTypes:tr}},epe={json:{read:!1,write:!1,origins:{"web-map":fL,"portal-item":fL}}},tpe=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return a([A(Xde)],t.prototype,"blendMode",void 0),a([A(epe)],t.prototype,"effect",void 0),t=a([P("esri.layers.mixins.BlendLayer")],t),t},rpe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return a([A({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=a([P("esri.layers.mixins.CustomParametersMixin")],t),t},UG=96;function M5e(e,t){const r=e.extent,i=e.width,s=po(r==null?void 0:r.spatialReference);return r&&i?r.width/i*s*jV*UG:0}function C5e(e,t){return e/(po(t)*jV*UG)}function k5e(e,t,r){return ipe(e,t)&&spe(e,r)}function ipe(e,t){return t===0||Jo(e,t)||e<t}function spe(e,t){return t===0||Jo(e,t)||e>t}function npe(e,t){return Jo(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}const ope="randomUUID"in crypto;function sm(){if(ope)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function R5e(){return`{${sm().toUpperCase()}}`}function ape(){return`{${sm()}}`}function lpe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const mL={write:{overridePolicy:(e,t,r)=>({enabled:!r||r.filterMode==="scale"})}};let Fl=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.id=sm(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};a([A({type:String,json:{write:!0}})],Fl.prototype,"id",void 0),a([A({type:Number,json:mL})],Fl.prototype,"maxScale",void 0),a([A({type:Number,json:mL})],Fl.prototype,"minScale",void 0),a([A({type:String,json:{write:!0}})],Fl.prototype,"title",void 0),a([A({type:String,json:{write:!0}})],Fl.prototype,"where",void 0),Fl=a([P("esri.layers.support.DisplayFilter")],Fl);function upe(e,t){return{...t,filterMode:e.mode}}function P5e(e,t){return VG(e,t).next().value??null}function N5e(e,t,r){const i=cpe(e);if(i&&(FU(t,i[0])||H$(r,i[1])))return"";const s=Array.from(VG(e,t,r)),n=dpe(s,t,r)?"1=1":s.map((o=>o.where||"1=1")).reduce(((o,l)=>I$(o,l)),"");return n&&n!=="1=1"?n:""}function cpe(e){if(zG(e)==="manual")return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:i}of e.filters)t[0]=Math.max(t[0],cv(r)),t[1]=Math.min(t[1],Kb(i));return t}function*VG(e,t,r){if(zG(e)==="manual"){const i=e.filters.find((s=>s.id===e.activeFilterId));i&&(yield i)}else{typeof t=="object"&&(t=t.scale);for(const i of e.filters)ppe(i.minScale,i.maxScale,t,r)&&(yield i)}}function dpe(e,t,r){var n,o;if(e.length===0)return!0;const i=cv((n=e.at(0))==null?void 0:n.minScale),s=Kb((o=e.at(-1))==null?void 0:o.maxScale);if(H$(i,t)||FU(s,r))return!0;for(let l=0;l<e.length-1;l++){const p=e[l],m=e[l+1];if(H$(cv(m.minScale),Kb(p.maxScale)))return!0}return!1}function ppe(e,t,r,i){return e=cv(e),r=cv(r),t=Kb(t),!(!Jo(r,e)&&(i??r)>e)&&!Zse(t,r)&&(i===void 0||!Jo(i,e))}function zG(e){return"mode"in e?e.mode:e.filterMode}function cv(e){return e||Number.POSITIVE_INFINITY}function Kb(e){return e||0}let kd=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.activeFilterId=null,this.filters=new(Te.ofType(Fl)),this.mode="manual"}writeFilters(t,r,i,s){const n=t.toArray();this.mode==="scale"&&n.sort(((o,l)=>{const p=npe(l.minScale,o.minScale),m=o.maxScale-l.maxScale;return p===0?m:p})),r[i]=n.map((o=>o.toJSON(s)))}write(t,r){return super.write(t,upe(this,r))}};a([A({type:String,json:{write:{overridePolicy:(e,t,r)=>({enabled:r.filterMode==="manual",isRequired:!0})}}})],kd.prototype,"activeFilterId",void 0),a([A({type:Te.ofType(Fl),nonNullable:!0,json:{write:!0}})],kd.prototype,"filters",void 0),a([ye("filters")],kd.prototype,"writeFilters",null),a([A({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],kd.prototype,"mode",void 0),kd=a([P("esri.layers.support.DisplayFilterInfo")],kd);const hpe=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return a([A(Ape)],t.prototype,"displayFilterEnabled",void 0),a([A(fpe)],t.prototype,"displayFilterInfo",void 0),t=a([P("esri.layers.mixins.DisplayFilteredLayer")],t),t},Ape={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:tr,writer(e,t,r){jr(r,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},fpe={type:kd,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:tr},origins:{"web-scene":{write:!1,read:!1}}}},ZI=ape(),GG=new Map,qG=new Map;async function D5e(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let s=GG.get(i);if(!s){const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await Nt(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function yL(e,t,r=!1){var n,o,l;if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(n=qG.get(i))==null?void 0:n.entries();if(s){for(const[p,m]of s)if(m.name===t){const v=!((o=m.stack)!=null&&o.hasForwardEdits());if(!v&&r){const[{deleteForwardEdits:_},{default:E}]=await Promise.all([ce(()=>import("./deleteForwardEdits-DQXSgx71.js"),[],import.meta.url),ce(()=>import("./DeleteForwardEditsParameters-DP87joQu.js"),[],import.meta.url)]),$=await _(i,p,new E({sessionId:ZI,moment:m.moment}));return $.success&&((l=m.stack)==null||l.clearForwardEdits()),$.success}return v}}return!0}function E2(e,t){var s;if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=(s=qG.get(r))==null?void 0:s.entries();if(i){for(const[n,o]of i)if(o.name===t)return o.lockType==="edit"}return!1}const o4=new el.EventEmitter;function HG(e){return o4.on("apply-edits",new WeakRef(e))}function WG(e){return o4.on("update-moment",new WeakRef(e))}function gL(e,t,r=null,i=!1){const s=Cn();return i=t==null||i,o4.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:s.promise}),s}const QG=Symbol();function F5e(e){return e!=null&&typeof e=="object"&&QG in e}function jm(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function _g(e,t,r){const i=new URL(e).host,s=GG.get(i),n=o=>!o||o===s;return n(t)&&n(r)||t===r}const mpe=e=>{var i;var t;let r=(i=class extends e{constructor(...s){super(...s),this[t]=!0,this._applyEditsHandler=n=>{const{serviceUrl:o,layerId:l,gdbVersion:p,mayReceiveServiceEdits:m,result:v}=n,_=o===this.url,E=l!=null&&this.layerId!=null&&l===this.layerId,$=jm(this),M=jm(this)&&_g(o,p,this.gdbVersion);if(!_||$&&!M||!E&&!m)return;const k=v.then((N=>{var W;if(this.lastEditsEventDate=new Date,E&&(N.addedFeatures.length||N.updatedFeatures.length||N.deletedFeatures.length||N.addedAttachments.length||N.updatedAttachments.length||N.deletedAttachments.length))return this.emit("edits",H(N)),N;const U=(W=N.editedFeatures)==null?void 0:W.find((({layerId:Z})=>Z===this.layerId));if(U){const{adds:Z,updates:ie,deletes:ne}=U.editedFeatures,ge={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:Z?Z.map((({attributes:we})=>({objectId:this.objectIdField&&we[this.objectIdField],globalId:this.globalIdField&&we[this.globalIdField]}))):[],deletedFeatures:ne?ne.map((({attributes:we})=>({objectId:this.objectIdField&&we[this.objectIdField],globalId:this.globalIdField&&we[this.globalIdField]}))):[],updatedFeatures:ie?ie.map((({current:{attributes:we}})=>({objectId:this.objectIdField&&we[this.objectIdField],globalId:this.globalIdField&&we[this.globalIdField]}))):[],editedFeatures:H(N.editedFeatures),exceededTransferLimit:!1,historicMoment:H(N.historicMoment)};return this.emit("edits",ge),ge}const G={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:H(N.editedFeatures),exceededTransferLimit:!1,historicMoment:H(N.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(o,p,G.historicMoment)&&this.emit("edits",G),G})).then((N=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(o,p,N.historicMoment)&&(this.historicMoment=N.historicMoment),N)));this.emit("apply-edits",{result:k})},this._updateMomentHandler=n=>{const{serviceUrl:o,gdbVersion:l,moment:p}=n,m=o===this.url,v=jm(this),_=jm(this)&&_g(o,l,this.gdbVersion),E=jm(this)&&!_g(o,this.gdbVersion,null);m&&v&&_&&E&&"historicMoment"in this&&this.historicMoment!==p&&(this.historicMoment=p)},this.when().then((()=>{this.addHandles(HG(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(WG(this._updateMomentHandler))}),(()=>{}))}_shouldUpdateHistoricMoment(s,n,o){return"historicMoment"in this&&this.historicMoment!==o&&E2(s,n)}},t=QG,i);return a([A()],r.prototype,"lastEditsEventDate",void 0),r=a([P("esri.layers.mixins.EditBusLayer")],r),r};var YI;let eA=YI=class extends ee{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new YI({mapLayerId:e,gdbVersion:t})}};a([Ne({mapLayer:"map-layer"}),A({json:{write:{isRequired:!0}}})],eA.prototype,"type",void 0),a([A({type:Et,json:{write:{isRequired:!0}}})],eA.prototype,"mapLayerId",void 0),a([A({type:String,json:{write:!0}})],eA.prototype,"gdbVersion",void 0),eA=YI=a([P("esri.layers.support.source.MapLayerSource")],eA);var KI;let fl=KI=class extends ee{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:s}=this,n={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:s};return new KI(n)}};a([Ne({queryTable:"query-table"}),A({json:{write:{isRequired:!0}}})],fl.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],fl.prototype,"workspaceId",void 0),a([A({type:String,json:{write:!0}})],fl.prototype,"query",void 0),a([A({type:String,json:{write:!0}})],fl.prototype,"oidFields",void 0),a([A({type:Ce,json:{write:!0}})],fl.prototype,"spatialReference",void 0),a([Ne(Jae)],fl.prototype,"geometryType",void 0),fl=KI=a([P("esri.layers.support.source.QueryTableDataSource")],fl);var XI;let tA=XI=class extends ee{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new XI({workspaceId:e,dataSourceName:t})}};a([Ne({raster:"raster"}),A({json:{write:{isRequired:!0}}})],tA.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],tA.prototype,"dataSourceName",void 0),a([A({type:String,json:{write:!0}})],tA.prototype,"workspaceId",void 0),tA=XI=a([P("esri.layers.support.source.RasterDataSource")],tA);var eM;let Rd=eM=class extends ee{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new eM({workspaceId:e,gdbVersion:t,dataSourceName:r})}};a([Ne({table:"table"}),A({json:{write:{isRequired:!0}}})],Rd.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],Rd.prototype,"workspaceId",void 0),a([A({type:String,json:{write:!0}})],Rd.prototype,"gdbVersion",void 0),a([A({type:String,json:{write:!0}})],Rd.prototype,"dataSourceName",void 0),Rd=eM=a([P("esri.layers.support.source.TableDataSource")],Rd);var tM,rM;const ype=si()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let An=tM=class extends ee{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return vL()(e,t,r)}castLeftTableSource(e){return Ha(iM(),e)}readRightTableSource(e,t,r){return vL()(e,t,r)}castRightTableSource(e){return Ha(iM(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:s}=this,n={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:s};return new tM(n)}};a([Ne({joinTable:"join-table"}),A({json:{write:{isRequired:!0}}})],An.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],An.prototype,"leftTableKey",void 0),a([A({type:String,json:{write:!0}})],An.prototype,"rightTableKey",void 0),a([A({json:{write:!0}})],An.prototype,"leftTableSource",void 0),a([pe("leftTableSource")],An.prototype,"readLeftTableSource",null),a([Ft("leftTableSource")],An.prototype,"castLeftTableSource",null),a([A({json:{write:!0}})],An.prototype,"rightTableSource",void 0),a([pe("rightTableSource")],An.prototype,"readRightTableSource",null),a([Ft("rightTableSource")],An.prototype,"castRightTableSource",null),a([Ne(ype)],An.prototype,"joinType",void 0),An=tM=a([P("esri.layers.support.source.JoinTableDataSource")],An);let d3=null;function vL(){return d3||(d3=z0({types:iM()})),d3}let p3=null;function iM(){return p3||(p3={key:"type",base:null,typeMap:{"data-layer":jo,"map-layer":eA}}),p3}const gpe={key:"type",base:null,typeMap:{"join-table":An,"query-table":fl,raster:tA,table:Rd}};var Mf;let jo=(Mf=class extends ee{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:r}=this;return new rM({fields:t,dataSource:r})}},rM=Mf,Mf);a([Ne({dataLayer:"data-layer"}),A({json:{write:{isRequired:!0}}})],jo.prototype,"type",void 0),a([A({type:[xi],json:{write:!0}})],jo.prototype,"fields",void 0),a([A({types:gpe,json:{write:!0}})],jo.prototype,"dataSource",void 0),jo=rM=a([P("esri.layers.support.source.DataLayerSource")],jo),jo.from=Br(jo);let Od=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};a([A({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Od.prototype,"onFields",void 0),a([A({type:String,json:{write:!0}})],Od.prototype,"operator",void 0),a([A({type:String,json:{write:!0}})],Od.prototype,"searchTerm",void 0),a([A({type:String,json:{write:!0}})],Od.prototype,"searchType",void 0),Od=a([P("esri.rest.support.FullTextSearch")],Od);const vpe=Od;var sM;const wL=new ct({upperLeft:"upper-left",lowerLeft:"lower-left"});let ec=sM=class extends ee{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new sM(H({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};a([A({type:At,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ec.prototype,"extent",void 0),a([A({type:["view","edit"],json:{write:!0}})],ec.prototype,"mode",void 0),a([A({type:String,json:{read:wL.read,write:wL.write}})],ec.prototype,"originPosition",void 0),a([A({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ec.prototype,"tolerance",void 0),ec=sM=a([P("esri.rest.support.QuantizationParameters")],ec);const wpe=new ct({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var nM;const bL=new ct({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Mo=nM=class extends ee{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=H(e))}clone(){return new nM({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:H(this.statisticParameters)})}};a([A({type:Number,json:{write:!0}})],Mo.prototype,"maxPointCount",void 0),a([A({type:Number,json:{write:!0}})],Mo.prototype,"maxRecordCount",void 0),a([A({type:Number,json:{write:!0}})],Mo.prototype,"maxVertexCount",void 0),a([A({type:String,json:{write:!0}})],Mo.prototype,"onStatisticField",void 0),a([A({type:String,json:{write:!0}})],Mo.prototype,"outStatisticFieldName",void 0),a([A({type:String,json:{read:{source:"statisticType",reader:bL.read},write:{target:"statisticType",writer:bL.write}}})],Mo.prototype,"statisticType",void 0),a([A({type:Object})],Mo.prototype,"statisticParameters",void 0),a([ye("statisticParameters")],Mo.prototype,"writeStatisticParameters",null),Mo=nM=a([P("esri.rest.support.StatisticDefinition")],Mo);var T2;const bpe=new ct({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var Op;let Ve=(Op=class extends ee{static from(t){return Vv(T2,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,r){r.historicMoment=t&&t.getTime()}writeParameterValues(t,r){if(t){const i={};for(const s in t){const n=t[s];Array.isArray(n)?i[s]=n.map((o=>o instanceof Date?o.getTime():o)):n instanceof Date?i[s]=n.getTime():i[s]=n}r.parameterValues=i}}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,r.where="1=1"}writeWhere(t,r){r.where=t||"1=1"}clone(){return new T2(H({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},T2=Op,Op.MAX_MAX_RECORD_COUNT_FACTOR=5,Op);a([A({json:{write:!0}})],Ve.prototype,"aggregateIds",void 0),a([A({type:Boolean,json:{write:!0}})],Ve.prototype,"cacheHint",void 0),a([A({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"compactGeometryEnabled",void 0),a([A({json:{write:!0}})],Ve.prototype,"datumTransformation",void 0),a([Ft("datumTransformation")],Ve.prototype,"castDatumTransformation",null),a([A({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"defaultSpatialReferenceEnabled",void 0),a([A({type:Number,json:{write:!0}})],Ve.prototype,"distance",void 0),a([A({type:jo,json:{write:!0}})],Ve.prototype,"dynamicDataSource",void 0),a([A({type:String,json:{write:!0}})],Ve.prototype,"formatOf3DObjects",void 0),a([A({type:[vpe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ve.prototype,"fullText",void 0),a([A({type:String,json:{write:!0}})],Ve.prototype,"gdbVersion",void 0),a([A({types:tm,json:{read:Ya,write:!0}})],Ve.prototype,"geometry",void 0),a([A({type:Number,json:{write:!0}})],Ve.prototype,"geometryPrecision",void 0),a([A({type:[String],json:{write:!0}})],Ve.prototype,"groupByFieldsForStatistics",void 0),a([A({type:String,json:{write:!0}})],Ve.prototype,"having",void 0),a([A({type:Date})],Ve.prototype,"historicMoment",void 0),a([ye("historicMoment")],Ve.prototype,"writeHistoricMoment",null),a([A({type:Number,json:{write:!0}})],Ve.prototype,"maxAllowableOffset",void 0),a([A({type:Number,cast:e=>e<1?1:e>Ve.MAX_MAX_RECORD_COUNT_FACTOR?Ve.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Ve.prototype,"maxRecordCountFactor",void 0),a([A({type:["xyFootprint"],json:{write:!0}})],Ve.prototype,"multipatchOption",void 0),a([A({type:Number,json:{read:{source:"resultRecordCount"}}})],Ve.prototype,"num",void 0),a([A({json:{write:!0}})],Ve.prototype,"objectIds",void 0),a([A({type:[String],json:{write:!0}})],Ve.prototype,"orderByFields",void 0),a([A({type:[String],json:{write:!0}})],Ve.prototype,"outFields",void 0),a([A({type:Ce,json:{name:"outSR",write:!0}})],Ve.prototype,"outSpatialReference",void 0),a([A({type:[Mo],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ve.prototype,"outStatistics",void 0),a([A({json:{write:!0}})],Ve.prototype,"parameterValues",void 0),a([ye("parameterValues")],Ve.prototype,"writeParameterValues",null),a([A({type:Je,json:{write:!0}})],Ve.prototype,"pixelSize",void 0),a([A({type:ec,json:{write:!0}})],Ve.prototype,"quantizationParameters",void 0),a([A({type:[Object],json:{write:!0}})],Ve.prototype,"rangeValues",void 0),a([A({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ve.prototype,"relationParameter",void 0),a([A({type:String,json:{write:!0}})],Ve.prototype,"resultType",void 0),a([A({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnCentroid",void 0),a([A({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnDistinctValues",void 0),a([A({type:Boolean,json:{default:!0,write:!0}})],Ve.prototype,"returnExceededLimitFeatures",void 0),a([A({type:Boolean,json:{write:!0}})],Ve.prototype,"returnGeometry",void 0),a([A({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnQueryGeometry",void 0),a([A({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnM",void 0),a([A({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ve.prototype,"returnZ",void 0),a([A({type:Boolean,json:{write:!0}})],Ve.prototype,"returnTrueCurves",void 0),a([A({type:Ce,json:{write:!0}})],Ve.prototype,"sourceSpatialReference",void 0),a([Ne(wpe,{ignoreUnknown:!1,name:"spatialRel"})],Ve.prototype,"spatialRelationship",void 0),a([A({type:Number,json:{read:{source:"resultOffset"}}})],Ve.prototype,"start",void 0),a([ye("start"),ye("num")],Ve.prototype,"writeStart",null),a([A({type:String,json:{write:!0}})],Ve.prototype,"sqlFormat",void 0),a([A({type:String,json:{write:!0}})],Ve.prototype,"text",void 0),a([A({type:qt,json:{write:!0}})],Ve.prototype,"timeExtent",void 0),a([A({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"timeReferenceUnknownClient",void 0),a([Ne(bpe,{ignoreUnknown:!1}),A({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],Ve.prototype,"units",void 0),a([A({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],Ve.prototype,"where",void 0),a([ye("where")],Ve.prototype,"writeWhere",null),Ve=T2=a([P("esri.rest.support.Query")],Ve);var oM;const h3=new ct({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),A3=new ct({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ua=oM=class extends ee{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:o,distance:l}=this;return new Ve({geometry:H(r),objectIds:H(n),spatialRelationship:i,timeExtent:H(s),where:t,units:o,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:s,units:n,distance:o}=this;return new oM({geometry:H(t),objectIds:H(s),spatialRelationship:r,timeExtent:H(i),where:e,units:n,distance:o})}};a([A({type:String,json:{write:!0}})],ua.prototype,"where",void 0),a([A({types:tm,json:{write:!0}})],ua.prototype,"geometry",void 0),a([A({type:h3.apiValues,json:{name:"spatialRel",read:{reader:h3.read},write:{allowNull:!1,writer:h3.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],ua.prototype,"spatialRelationship",void 0),a([A({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ua.prototype,"distance",void 0),a([A({type:[Number],json:{write:!0}})],ua.prototype,"objectIds",void 0),a([A({type:A3.apiValues,json:{read:A3.read,write:{writer:A3.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ua.prototype,"units",void 0),a([A({type:qt,json:{write:!0}})],ua.prototype,"timeExtent",void 0),ua=oM=a([P("esri.layers.support.FeatureFilter")],ua);const _pe=ua;var aM;const _L={read:{reader:lv},write:{writer:uv,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},SL={read:{reader:lv},write:{writer:uv,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},EL={name:"showExcludedLabels",default:!0};let Pd=aM=class extends ee{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var i,s;const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const n=Object.keys(r.filter);if(n.length>1||n[0]!=="where")return(i=t.messages)==null||i.push(new Q("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return(s=t.messages)==null||s.push(new Q("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new aM({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};a([A({type:_pe,json:{write:{allowNull:!0,writer(e,t,r,i){const s=e==null?void 0:e.write({},i);s&&Object.keys(s).length!==0?jr(r,s,t):jr(r,null,t)}}}})],Pd.prototype,"filter",void 0),a([A({json:{read:lv,write:{writer:uv,allowNull:!0},origins:{"web-map":_L,"portal-item":_L}}})],Pd.prototype,"includedEffect",void 0),a([A({json:{read:lv,write:{writer:uv,allowNull:!0},origins:{"web-map":SL,"portal-item":SL}}})],Pd.prototype,"excludedEffect",void 0),a([A({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":EL,"portal-item":EL}}})],Pd.prototype,"excludedLabelsVisible",void 0),Pd=aM=a([P("esri.layers.support.FeatureEffect")],Pd);const TL={write:{allowNull:!0}},Spe={type:Pd,json:{origins:{"web-map":TL,"portal-item":TL}}},Epe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return a([A(Spe)],t.prototype,"featureEffect",void 0),t=a([P("esri.layers.mixins.FeatureEffectLayer")],t),t};var xy;const Xb=si()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),JG=Xb.jsonValues.slice();aX(JG,"orthometric");const Sg=si()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let ms=xy=class extends ee{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return Xb.write(e,t,r)}readHeightModel(e,t,r){return Xb.read(e)||(r!=null&&r.messages&&r.messages.push(Tpe(e,{context:r})),null)}readHeightUnit(e,t,r){return Sg.read(e)||(r!=null&&r.messages&&r.messages.push($L(e,{context:r})),null)}readHeightUnitService(e,t,r){return BR(e)||Sg.read(e)||(r!=null&&r.messages&&r.messages.push($L(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new xy({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=zV(t);return new xy({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new xy;return t.read(e,{origin:"web-scene"}),t}};function $L(e,t){return new kn("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Tpe(e,t){return new kn("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}a([A({type:Xb.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:JG,default:"ellipsoidal",write:{isRequired:!0}}}}})],ms.prototype,"heightModel",void 0),a([ye("web-scene","heightModel")],ms.prototype,"writeHeightModel",null),a([pe(["web-scene","service"],"heightModel")],ms.prototype,"readHeightModel",null),a([A({type:Sg.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Sg.jsonValues,write:{writer:Sg.write,isRequired:!0}}}}})],ms.prototype,"heightUnit",void 0),a([pe("web-scene","heightUnit")],ms.prototype,"readHeightUnit",null),a([pe("service","heightUnit")],ms.prototype,"readHeightUnitService",null),a([A({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],ms.prototype,"vertCRS",void 0),a([pe("service","vertCRS",["vertCRS","ellipsoid","geoid"])],ms.prototype,"readVertCRS",null),ms=xy=a([P("esri.geometry.HeightModelInfo")],ms);var lM;let Iy=lM=class extends ee{constructor(e){super(e)}async collectRequiredFields(e,t){return ls(e,t,this.expression)}clone(){return new lM({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};a([A({type:String,json:{write:{isRequired:!0}}})],Iy.prototype,"expression",void 0),a([A({type:String,json:{write:!0}})],Iy.prototype,"title",void 0),Iy=lM=a([P("esri.symbols.support.FeatureExpressionInfo")],Iy);const xL=Iy,BS={unknown:1,inches:Pr(1,"meters","inches"),feet:Pr(1,"meters","feet"),"us-feet":Pr(1,"meters","us-feet"),yards:Pr(1,"meters","yards"),miles:Pr(1,"meters","miles"),"nautical-miles":Pr(1,"meters","nautical-miles"),millimeters:Pr(1,"meters","millimeters"),centimeters:Pr(1,"meters","centimeters"),decimeters:Pr(1,"meters","decimeters"),meters:Pr(1,"meters","meters"),kilometers:Pr(1,"meters","kilometers"),"decimal-degrees":1/Boe(1,"meters",Ir.radius)};function B5e(e){return!!e&&BS[e]!=null}function U5e(e){return 1/(BS[e]||1)}function $pe(){const e=Object.keys(BS);return Dk(e,"decimal-degrees"),e.sort(),e}const xpe=$pe();var uM;const W1=si()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),IL=new ct({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});var Cf;let ml=(Cf=class extends ee{constructor(t){super(t),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(t,r){return t!=null?t.expression?t:void 0:r.featureExpression&&r.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(t,r,i,s){r[i]=t.write({},s),t.expression==="0"&&(r.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:r}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||r?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,r):null}clone(){return new uM({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&gX(this.featureExpressionInfo,t.featureExpressionInfo)}},uM=Cf,Cf);a([A({type:xL,json:{write:!0}})],ml.prototype,"featureExpressionInfo",void 0),a([pe("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ml.prototype,"readFeatureExpressionInfo",null),a([ye("featureExpressionInfo",{featureExpressionInfo:{type:xL},"featureExpression.value":{type:[0]}})],ml.prototype,"writeFeatureExpressionInfo",null),a([A({type:W1.apiValues,nonNullable:!0,json:{type:W1.jsonValues,read:W1.read,write:{writer:W1.write,isRequired:!0}}})],ml.prototype,"mode",null),a([A({type:Number,json:{write:!0}})],ml.prototype,"offset",void 0),a([A({type:xpe,json:{type:String,read:IL.read,write:IL.write}})],ml.prototype,"unit",null),ml=uM=a([P("esri.symbols.support.ElevationInfo")],ml);let rA=class extends ee{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};a([A({type:String,json:{write:!0}})],rA.prototype,"description",void 0),a([A({type:String,json:{write:!0}})],rA.prototype,"label",void 0),a([A()],rA.prototype,"type",void 0),rA=a([P("esri.tables.elements.AttributeTableElement")],rA);const nm=rA;let My=class extends Ge.ClonableMixin(nm){constructor(t){super(t),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};a([A({type:["auto"],json:{write:!0}})],My.prototype,"displayType",void 0),a([A({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],My.prototype,"type",void 0),My=a([P("esri.tables.elements.AttributeTableAttachmentElement")],My);const ZG=My;let Nd=class extends Ge.ClonableMixin(nm){constructor(t){super(t),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};a([A({type:String,json:{read:!1,write:!1}})],Nd.prototype,"description",void 0),a([A({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Nd.prototype,"fieldName",void 0),a([A({type:String,json:{read:!1,write:!1}})],Nd.prototype,"label",void 0),a([A({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Nd.prototype,"type",void 0),Nd=a([P("esri.tables.elements.AttributeTableFieldElement")],Nd);const YG=Nd;let Cy=class extends Ge.ClonableMixin(nm){constructor(t){super(t),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};a([A({type:Number,json:{type:Et,write:{enabled:!0,isRequired:!0}}})],Cy.prototype,"relationshipId",void 0),a([A({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Cy.prototype,"type",void 0),Cy=a([P("esri.tables.elements.AttributeTableRelationshipElement")],Cy);const KG=Cy,XG={base:nm,key:"type",typeMap:{attachment:ZG,field:YG,relationship:KG}};function Ipe(e){return{typesWithGroup:{base:nm,key:"type",typeMap:{attachment:ZG,field:YG,group:e,relationship:KG}},typesWithoutGroup:XG}}let ky=class extends Ge.ClonableMixin(nm){constructor(t){super(t),this.elements=null,this.type="group"}clone(){return super.clone()}};a([A({types:[XG],json:{name:"attributeTableElements",write:!0}})],ky.prototype,"elements",void 0),a([A({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],ky.prototype,"type",void 0),ky=a([P("esri.tables.elements.AttributeTableGroupElement")],ky);const Mpe=ky;let Ry=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.field=null,this.order=null}};a([A({type:String,json:{write:!0}})],Ry.prototype,"field",void 0),a([A({type:["asc","desc"],json:{write:!0}})],Ry.prototype,"order",void 0),Ry=a([P("esri.tables.support.FieldOrder")],Ry);const Cpe=Ry;var cM;const kpe=Ipe(Mpe);let Oy=cM=class extends ee{constructor(e){super(e),this.elements=null,this.orderByFields=null}clone(){return new cM({elements:H(this.elements),orderByFields:H(this.orderByFields)})}};a([A({types:[kpe.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],Oy.prototype,"elements",void 0),a([A({type:[Cpe],json:{write:!0}})],Oy.prototype,"orderByFields",void 0),Oy=cM=a([P("esri.tables.AttributeTableTemplate")],Oy);const Rpe=Oy,Ope={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:tr}}},US={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},VS={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:tr}}},Ppe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Gp}}},Npe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:tr}}},Lpe={value:null,type:ml,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:tr}}};function Q5e(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const eq={write:{enabled:!0,layerContainerTypes:tr},read:!0},dM={type:Number,json:{origins:{"web-document":eq,"portal-item":{write:{layerContainerTypes:tr}}}}},Dpe={...dM,json:{...dM.json,origins:{"web-document":{...eq,write:{enabled:!0,layerContainerTypes:tr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>{var i;return r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(i=t.layerDefinition)!=null&&i.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?sv(t.layerDefinition.drawingInfo.transparency):void 0:sv(t.drawingInfo.transparency)}}}},J5e={type:At,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=At.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Ce.fromJSON(t.spatialReference)),r}}}},read:!1}},Fpe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},jpe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:tr}}},Bpe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:tr}}},tq={json:{write:{ignoreOrigin:!0,layerContainerTypes:tr},origins:{"web-map":{read:!1,write:!1}}}},Upe={type:Rpe,json:{name:"attributeTableInfo",write:!0}};let yl=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};a([A()],yl.prototype,"creatorField",void 0),a([A()],yl.prototype,"creationDateField",void 0),a([A()],yl.prototype,"editorField",void 0),a([A()],yl.prototype,"editDateField",void 0),a([A()],yl.prototype,"realm",void 0),a([A(Pb("dateFieldsTimeReference",!0))],yl.prototype,"timeZone",void 0),yl=a([P("esri.layers.support.EditFieldsInfo")],yl);let _a=class extends Ge.ClonableMixin(ee){constructor(t){super(t)}};a([A({constructOnly:!0,json:{write:!0}})],_a.prototype,"name",void 0),a([A({constructOnly:!0,json:{write:!0}})],_a.prototype,"fields",void 0),a([A({constructOnly:!0,json:{write:!0}})],_a.prototype,"isAscending",void 0),a([A({constructOnly:!0,json:{write:!0}})],_a.prototype,"indexType",void 0),a([A({constructOnly:!0,json:{write:!0}})],_a.prototype,"isUnique",void 0),a([A({constructOnly:!0,json:{write:!0}})],_a.prototype,"description",void 0),_a=a([P("esri.layers.support.FeatureIndex")],_a);function K5e(e,t,r){return qk(e.map(((i,s)=>t.apply(r,[i,s]))))}async function Vpe(e,t,r){return(await qk(e.map(((i,s)=>t.apply(r,[i,s]))))).map((i=>i.value))}function a4(e){return{ok:!0,value:e}}function l4(e){return{ok:!1,error:e}}function zpe(e){return e!=null&&e.ok===!0?e.value:null}function Gpe(e){return e!=null&&e.ok===!1?e.error:null}async function zS(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return a4(await e)}catch(t){return l4(t)}}async function qpe(e){try{return a4(await e)}catch(t){return ka(t),l4(t)}}function GS(e,t){return new Du(e,t)}let Du=class extends je{get value(){return zpe(this._result)}get error(){return Gpe(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=h0(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then((s=>{this._result=a4(s),this._cleanup()}),(s=>{this._result=l4(s),this._cleanup()})),this._abortHandle=Ko(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=vr(this._abortHandle),this._abortController=null}};a([A()],Du.prototype,"value",null),a([A()],Du.prototype,"error",null),a([A()],Du.prototype,"finished",null),a([A()],Du.prototype,"promise",void 0),a([A()],Du.prototype,"_result",void 0),Du=a([P("esri.core.asyncUtils.ReactiveTask")],Du);async function rq(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=iq(e));const i=Hpe(e),s=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let n=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;t.start+=i}return n}function Hpe(e){return iq(e)*Wpe(e)}function Wpe(e){return e.capabilities.query.maxRecordCount||2e3}function iq(e){return e.capabilities.query.supportsMaxRecordCountFactor?Ve.MAX_MAX_RECORD_COUNT_FACTOR:1}const Q1=new WeakMap;function u4(e){return!e.destroyed&&(Q1.has(e)||e.addHandles([Qe((()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||u4(t))}),(t=>Q1.set(e,t)),vs),Lt((()=>Q1.delete(e)))]),Q1.get(e))}function Qpe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function eNe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="graphics"}function Jpe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="map-image"}function Zpe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="knowledge-graph"&&"layers"in e}function tNe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="knowledge-graph-sublayer"}function ML(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function dc(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const rNe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function pM(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function iNe(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function qS(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function sNe(e){var r;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((r=e==null?void 0:e.source)==null?void 0:r.type)==="feature-layer"}async function c4(e,t){const r=st==null?void 0:st.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const s=`${e.slice(0,i)}/rest/info`,n=t!=null?t.signal:null,{data:o}=await Nt(s,{query:{f:"json"},responseType:"json",signal:n});return(o==null?void 0:o.owningSystemUrl)||null}function sq(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Ype(e){return sq(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function Kpe(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Xpe(e){return!!Kpe(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}function nNe(e){const t=new Te;for(const r of e.allLayers.concat(e.allTables))r.type==="csv"||u4(r)||("charts"in r&&t.push(r),r.type==="subtype-group"&&t.push(...r.sublayers));return t}function ehe(e,t){return null}function oNe(e){return null}function hM(e){return!e||e.type==="Feature Service"&&!e.sourceUrl}function aNe(e,t){!t||!hM(e)||ehe(e.url)}var AM;let Py=AM=class extends ee{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new AM({minValue:this.minValue,maxValue:this.maxValue})}};a([A({type:Number,json:{write:!0}})],Py.prototype,"minValue",void 0),a([A({type:Number,json:{write:!0}})],Py.prototype,"maxValue",void 0),Py=AM=a([P("esri.renderers.support.AuthoringInfoClassBreakInfo")],Py);var fM;let tc=fM=class extends ee{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new fM({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:H(this.classBreakInfos)})}};a([A({type:String,json:{write:!0}})],tc.prototype,"field",void 0),a([A({type:String,json:{write:!0}})],tc.prototype,"normalizationField",void 0),a([A({type:String,json:{write:!0}})],tc.prototype,"label",void 0),a([A({type:[Py],json:{write:!0}})],tc.prototype,"classBreakInfos",void 0),tc=fM=a([P("esri.renderers.support.AuthoringInfoFieldInfo")],tc);var mM;let iA=mM=class extends ee{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new mM({label:this.label,value:this.value,size:this.size})}};a([A({type:String,json:{write:!0}})],iA.prototype,"label",void 0),a([A({type:Number,json:{write:!0}})],iA.prototype,"size",void 0),a([A({type:Number,json:{write:!0}})],iA.prototype,"value",void 0),iA=mM=a([P("esri.renderers.support.AuthoringInfoSizeStop")],iA);const the=iA;var yM;const J1=new ct({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Z1=new ct({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),CL={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},kL=["high-to-low","above-and-below","centered-on","extremes"],RL=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],OL=["seconds","minutes","hours","days","months","years"],rhe=["circle","diamond","hexagon-flat","hexagon-pointy","square"],ihe=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let ai=yM=class extends ee{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(e){this._set("spikeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new yM({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:H(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};a([A({types:CL,json:{write:!0}})],ai.prototype,"endTime",void 0),a([Ft("endTime")],ai.prototype,"castEndTime",null),a([A({type:String,json:{write:!0}})],ai.prototype,"field",void 0),a([A({type:Number,json:{write:!0}})],ai.prototype,"maxSliderValue",void 0),a([A({type:Number,json:{write:!0}})],ai.prototype,"minSliderValue",void 0),a([A({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],ai.prototype,"normalizationField",null),a([A({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],ai.prototype,"referenceSizeScale",null),a([A({type:rhe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],ai.prototype,"referenceSizeSymbolStyle",null),a([A({type:ihe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],ai.prototype,"spikeSymbolStyle",null),a([A({types:CL,json:{write:!0}})],ai.prototype,"startTime",void 0),a([Ft("startTime")],ai.prototype,"castStartTime",null),a([A({type:[the],json:{origins:{"web-scene":{write:!1}},write:!0}})],ai.prototype,"sizeStops",null),a([A({type:J1.apiValues,value:null,json:{type:J1.jsonValues,read:J1.read,write:J1.write}})],ai.prototype,"style",null),a([A({type:RL,value:null,json:{type:RL,origins:{"web-scene":{type:kL,write:{writer:(e,t)=>{kL.includes(e)&&(t.theme=e)}}}},write:!0}})],ai.prototype,"theme",null),a([A({type:Z1.apiValues,json:{type:Z1.jsonValues,read:Z1.read,write:Z1.write}})],ai.prototype,"type",void 0),a([A({type:OL,json:{type:OL,write:!0}})],ai.prototype,"units",void 0),ai=yM=a([P("esri.renderers.support.AuthoringInfoVisualVariable")],ai);const she=ai;let nf=class extends ee{constructor(t){super(t),this.type=null}};a([A({readOnly:!0,json:{read:!1,write:!0}})],nf.prototype,"type",void 0),nf=a([P("esri.rest.support.ColorRamp")],nf);var gM;let ql=gM=class extends nf{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new gM({fromColor:H(this.fromColor),toColor:H(this.toColor),algorithm:this.algorithm})}};a([Ne({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],ql.prototype,"algorithm",void 0),a([A({type:Ke,json:{type:[Et],write:!0}})],ql.prototype,"fromColor",void 0),a([A({type:Ke,json:{type:[Et],write:!0}})],ql.prototype,"toColor",void 0),a([A({type:["algorithmic"]})],ql.prototype,"type",void 0),ql=gM=a([P("esri.rest.support.AlgorithmicColorRamp")],ql);var vM;let GA=vM=class extends nf{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new vM({colorRamps:H(this.colorRamps)})}};a([A({type:[ql],json:{write:!0}})],GA.prototype,"colorRamps",void 0),a([A({type:["multipart"]})],GA.prototype,"type",void 0),GA=vM=a([P("esri.rest.support.MultipartColorRamp")],GA);const nhe={key:"type",base:nf,typeMap:{algorithmic:ql,multipart:GA}};function ohe(e){return e!=null&&e.type?e.type==="algorithmic"?ql.fromJSON(e):e.type==="multipart"?GA.fromJSON(e):null:null}var wM;const cd=new ct({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Y1=new ct({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),PL=new ct({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),NL=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],ahe=["high-to-low","above-and-below","above","below"],lhe=["flow-line","wave-front"],uhe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let fr=wM=class extends ee{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?ohe(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new wM({classificationMethod:this.classificationMethod,colorRamp:H(this.colorRamp),fadeRatio:H(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:H(this.field1),field2:H(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((t=>t.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};a([A({type:cd.apiValues,value:null,json:{type:cd.jsonValues,read:cd.read,write:cd.write,origins:{"web-document":{default:"manual",type:cd.jsonValues,read:cd.read,write:cd.write}}}})],fr.prototype,"classificationMethod",null),a([A({types:nhe,json:{write:!0}})],fr.prototype,"colorRamp",void 0),a([pe("colorRamp")],fr.prototype,"readColorRamp",null),a([A({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fr.prototype,"fadeRatio",void 0),a([A({type:[String],value:null,json:{write:!0}})],fr.prototype,"fields",null),a([A({type:tc,value:null,json:{write:!0}})],fr.prototype,"field1",null),a([A({type:tc,value:null,json:{write:!0}})],fr.prototype,"field2",null),a([A({type:lhe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],fr.prototype,"flowTheme",null),a([A({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],fr.prototype,"focus",null),a([A({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],fr.prototype,"isAutoGenerated",void 0),a([A({type:Number,value:null,json:{type:Et,write:!0}})],fr.prototype,"numClasses",null),a([A({type:NL,json:{type:NL,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],fr.prototype,"lengthUnit",void 0),a([A({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fr.prototype,"maxSliderValue",void 0),a([A({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fr.prototype,"minSliderValue",void 0),a([A({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fr.prototype,"statistics",null),a([A({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],fr.prototype,"standardDeviationInterval",null),a([A({type:Y1.apiValues,value:null,json:{type:Y1.jsonValues,read:Y1.read,write:Y1.write,origins:{"web-scene":{type:PL.jsonValues,write:{writer:PL.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],fr.prototype,"type",null),a([A({type:[she],json:{write:!0}})],fr.prototype,"visualVariables",void 0),a([A({type:uhe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],fr.prototype,"univariateSymbolStyle",null),a([A({type:ahe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],fr.prototype,"univariateTheme",null),fr=wM=a([P("esri.renderers.support.AuthoringInfo")],fr);const f3=new ct({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let xn=class extends ee{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};a([A({type:fr,json:{write:!0}})],xn.prototype,"authoringInfo",void 0),a([A({type:f3.apiValues,readOnly:!0,json:{type:f3.jsonValues,read:!1,write:{writer:f3.write,ignoreOrigin:!0,isRequired:!0}}})],xn.prototype,"type",void 0),xn=a([P("esri.renderers.Renderer")],xn);let Ny=class extends Ge.ClonableMixin(ee){constructor(){super(...arguments),this.showLegend=null,this.title=null}};a([A({type:Boolean,json:{write:!0}})],Ny.prototype,"showLegend",void 0),a([A({type:String,json:{write:!0}})],Ny.prototype,"title",void 0),Ny=a([P("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Ny);const nq=Ny,m3=new ct({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Ki=class extends ee{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(de.getLogger(this).error(".field: field must be a string value"),null):Uv(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};a([A()],Ki.prototype,"index",void 0),a([A({type:m3.apiValues,readOnly:!0,json:{read:m3.read,write:{writer:m3.write,isRequired:!0}}})],Ki.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],Ki.prototype,"field",void 0),a([Ft("field")],Ki.prototype,"castField",null),a([A({type:String,json:{write:!0}})],Ki.prototype,"valueExpression",void 0),a([A({type:String,json:{write:!0}})],Ki.prototype,"valueExpressionTitle",void 0),a([A({readOnly:!0})],Ki.prototype,"arcadeRequired",null),a([A({type:nq,json:{write:!0}})],Ki.prototype,"legendOptions",void 0),Ki=a([P("esri.renderers.visualVariables.VisualVariable")],Ki);var bM;let Ld=bM=class extends ee{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new bM({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};a([A({type:Ke,json:{type:[Et],write:{isRequired:!0}}})],Ld.prototype,"color",void 0),a([A({type:String,json:{write:!0}})],Ld.prototype,"label",void 0),a([A({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Ld.prototype,"value",void 0),a([ye("value")],Ld.prototype,"writeValue",null),Ld=bM=a([P("esri.renderers.visualVariables.support.ColorStop")],Ld);const che=Ld;var _M;let rc=_M=class extends Ki{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((t=>!!t))).sort(((t,r)=>t.value-r.value)),this._set("stops",e)}clone(){var e;return new _M({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};a([A({readOnly:!0})],rc.prototype,"cache",null),a([A({type:["color"],json:{type:["colorInfo"]}})],rc.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],rc.prototype,"normalizationField",void 0),a([A({type:[che],json:{write:!0}})],rc.prototype,"stops",null),rc=_M=a([P("esri.renderers.visualVariables.ColorVariable")],rc);var SM;let Fu=SM=class extends ee{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return sv(t.transparency)}writeOpacity(e,t,r){t[r]=RS(e)}clone(){return new SM({label:this.label,opacity:this.opacity,value:this.value})}};a([A({type:String,json:{write:!0}})],Fu.prototype,"label",void 0),a([A({type:Number,json:{type:Et,write:{target:"transparency",isRequired:!0}}})],Fu.prototype,"opacity",void 0),a([pe("opacity",["transparency"])],Fu.prototype,"readOpacity",null),a([ye("opacity")],Fu.prototype,"writeOpacity",null),a([A({type:Number,json:{write:{isRequired:!0}}})],Fu.prototype,"value",void 0),Fu=SM=a([P("esri.renderers.visualVariables.support.OpacityStop")],Fu);const dhe=Fu;var EM;let Hl=EM=class extends Ki{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((t=>!!t))).sort(((t,r)=>t.value-r.value)),this._set("stops",e)}clone(){var e;return new EM({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};a([A({readOnly:!0})],Hl.prototype,"cache",null),a([A({type:["opacity"],json:{type:["transparencyInfo"]}})],Hl.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],Hl.prototype,"normalizationField",void 0),a([A({type:[dhe],json:{write:!0}})],Hl.prototype,"stops",null),Hl=EM=a([P("esri.renderers.visualVariables.OpacityVariable")],Hl);var TM;let ic=TM=class extends Ki{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new TM({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};a([A({readOnly:!0})],ic.prototype,"cache",null),a([A({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ic.prototype,"axis",void 0),a([A({type:["rotation"],json:{type:["rotationInfo"]}})],ic.prototype,"type",void 0),a([A({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ic.prototype,"rotationType",void 0),ic=TM=a([P("esri.renderers.visualVariables.RotationVariable")],ic);function phe(e){return Rt(e)}var $M;let Bo=$M=class extends ee{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new $M({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};a([A({type:String,json:{write:!0}})],Bo.prototype,"label",void 0),a([A({type:Number,cast:Rt,json:{write:{isRequired:!0}}})],Bo.prototype,"size",void 0),a([A({type:Number,json:{write:{isRequired:!0}}})],Bo.prototype,"value",void 0),a([A({type:Boolean,json:{write:!1}})],Bo.prototype,"useMinValue",void 0),a([A({type:Boolean,json:{write:!1}})],Bo.prototype,"useMaxValue",void 0),Bo=$M=a([P("esri.renderers.visualVariables.support.SizeStop")],Bo);let $2=class extends nq{constructor(){super(...arguments),this.customValues=null}};a([A({type:[Number],json:{write:!0}})],$2.prototype,"customValues",void 0),$2=a([P("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],$2);const hhe=$2;var nu,Ai;function qA(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Yp(e){return e!=null&&!isNaN(e)&&isFinite(e)}function oq(e){return e.valueExpression?nu.Expression:e.field&&typeof e.field=="string"?nu.Field:nu.Unknown}function Ahe(e,t){const r=t||oq(e),i=e.valueUnit||"unknown";return r===nu.Unknown?Ai.Constant:e.stops?Ai.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Ai.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Ai.Proportional:Ai.Additive:Ai.Identity:Ai.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(nu||(nu={})),(function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"})(Ai||(Ai={}));const aq=()=>de.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),HS=e=>aq().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),WS=()=>aq().error("Use of arcade expressions requires an arcade context"),LL=new Sr,x2=Math.PI,lq=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function uq(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((M=>M.type==="color")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void HS("ColorVariable");const s=typeof t=="number",n=s?null:t,o=n==null?void 0:n.attributes;let l=s?t:null;const p=i.field,{ipData:m,hasExpression:v}=i.cache;let _=i.cache.compiledFunc;if(!p&&!v){const M=i.stops;return M&&M[0]&&M[0].color}if(typeof l!="number")if(v){if((r==null?void 0:r.arcade)==null)return void WS();const M={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},k=r.arcade.arcadeUtils,N=k.getViewInfo(M),U=k.createExecContext(n,N,r.timeZone);if(!_){const G=k.createSyntaxTree(i.valueExpression);_=k.createFunction(G),i.cache.compiledFunc=_}l=k.executeFunction(_,U)}else o&&(l=o[p]);const E=i.normalizationField,$=o!=null&&E!=null?parseFloat(o[E]):void 0;if(l!=null&&(!E||s||!isNaN($)&&$!==0)){Yp($)&&!s&&(l/=$);const M=d4(l,m);if(M){const k=M[0],N=M[1],U=k===N?i.stops[k].color:Ke.blendColors(i.stops[k].color,i.stops[N].color,M[2],r!=null?r.color:void 0);return new Ke(U)}}}function cq(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((M=>M.type==="opacity")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void HS("OpacityVariable");const s=typeof t=="number",n=s?null:t,o=n==null?void 0:n.attributes;let l=s?t:null;const p=i.field,{ipData:m,hasExpression:v}=i.cache;let _=i.cache.compiledFunc;if(!p&&!v){const M=i.stops;return M&&M[0]&&M[0].opacity}if(typeof l!="number")if(v){if((r==null?void 0:r.arcade)==null)return void WS();const M={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},k=r.arcade.arcadeUtils,N=k.getViewInfo(M),U=k.createExecContext(n,N,r.timeZone);if(!_){const G=k.createSyntaxTree(i.valueExpression);_=k.createFunction(G),i.cache.compiledFunc=_}l=k.executeFunction(_,U)}else o&&(l=o[p]);const E=i.normalizationField,$=o!=null&&E!=null?parseFloat(o[E]):void 0;if(l!=null&&(!E||s||!isNaN($)&&$!==0)){Yp($)&&!s&&(l/=$);const M=d4(l,m);if(M){const k=M[0],N=M[1];if(k===N)return i.stops[k].opacity;{const U=i.stops[k].opacity;return U+(i.stops[N].opacity-U)*M[2]}}}}function dq(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(($=>$.type==="rotation")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void HS("RotationVariable");const s=i.axis||"heading",n=s==="heading"&&i.rotationType==="arithmetic"?90:0,o=s==="heading"&&i.rotationType==="arithmetic"?-1:1,l=typeof t=="number"?null:t,p=l==null?void 0:l.attributes,m=i.field,{hasExpression:v}=i.cache;let _=i.cache.compiledFunc,E=null;if(!m&&!v)return E;if(v){if((r==null?void 0:r.arcade)==null)return void WS();const $={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},M=r.arcade.arcadeUtils,k=M.getViewInfo($),N=M.createExecContext(l,k,r.timeZone);if(!_){const U=M.createSyntaxTree(i.valueExpression);_=M.createFunction(U),i.cache.compiledFunc=_}E=M.executeFunction(_,N)}else p&&(E=p[m]);return E=typeof E!="number"||isNaN(E)?null:n+o*E,E}function fhe(e,t,r){const i=typeof t=="number",s=i?null:t,n=s==null?void 0:s.attributes;let o=i?t:null;const{isScaleDriven:l}=e.cache;let p=e.cache.compiledFunc;if(l){const v=r!=null?r.scale:void 0,_=r!=null?r.view:void 0;o=v==null||_==="3d"?mhe(e):v}else if(!i)switch(e.inputValueType){case nu.Expression:{if((r==null?void 0:r.arcade)==null)return void WS();const v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},_=r.arcade.arcadeUtils,E=_.getViewInfo(v),$=_.createExecContext(s,E,r.timeZone);if(!p){const M=_.createSyntaxTree(e.valueExpression);p=_.createFunction(M),e.cache.compiledFunc=p}o=_.executeFunction(p,$);break}case nu.Field:n&&(o=n[e.field]);break;case nu.Unknown:o=null}if(!Yp(o))return null;if(i||!e.normalizationField)return o;const m=n?parseFloat(n[e.normalizationField]):null;return Yp(m)&&m!==0?o/m:null}function mhe(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function QS(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((n=>n.type==="size")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void HS("SizeVariable");const s=hq(fhe(i,t,r),i,t,r,i.cache.ipData);return s==null||isNaN(s)?void 0:s}function on(e,t,r){return e==null?null:qA(e)?QS(e,t,r):Yp(e)?e:null}function pq(e,t,r){return Yp(r)&&e>r?r:Yp(t)&&e<t?t:e}function yhe(e,t,r,i){const s=on(t.minSize,r,i)||t.minDataValue;return e==null&&s==null?null:(e??0)+(s??0)}function ghe(e,t,r){const i=e.stops;let s=(i==null?void 0:i.length)&&i[0].size;return s==null&&(s=e.minSize),on(s,t,r)}function vhe(e,t,r,i){const s=on(t.minSize,r,i);if(e==null)return s;const{minDataValue:n,maxDataValue:o}=t;if(n==null||o==null)return null;const l=(e-n)/(o-n),p=on(t.maxSize,r,i),m=i!=null?i.shape:void 0;if(e<=n)return s;if(e>=o)return p;if(s==null||p==null)return null;if(t.scaleBy==="area"&&m){const v=m==="circle",_=v?x2*(s/2)**2:s*s,E=_+l*((v?x2*(p/2)**2:p*p)-_);return v?2*Math.sqrt(E/x2):Math.sqrt(E)}return s+l*(p-s)}function whe(e,t,r,i){const s=on(t.minSize,r,i);if(e==null||s==null)return s;const n=i!=null?i.shape:void 0,{minDataValue:o}=t;if(o==null)return null;const l=e/o,p=on(t.maxSize,r,i);let m=null;return m=n==="circle"?2*Math.sqrt(l*(s/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(l*s**2):l*s,pq(m,s,p)}function bhe(e,t,r,i,s){var p,m,v;if(e==null)return null;const[n,o,l]=d4(e,s);if(n===o)return on((p=t.stops)==null?void 0:p[n].size,r,i);{const _=on((m=t.stops)==null?void 0:m[n].size,r,i),E=on((v=t.stops)==null?void 0:v[o].size,r,i);return _==null||E==null?null:_+(E-_)*l}}function _he(e,t,r,i){const s=((i==null?void 0:i.resolution)??1)*BS[t.valueUnit],n=on(t.minSize,r,i),o=on(t.maxSize,r,i),{valueRepresentation:l}=t;if(e==null)return n;let p=null;return p=l==="area"?2*Math.sqrt(e/x2)/s:l==="radius"||l==="distance"?2*e/s:e/s,pq(p,n,o)}function hq(e,t,r,i,s){switch(t.transformationType){case Ai.Additive:return yhe(e,t,r,i);case Ai.Constant:return ghe(t,r,i);case Ai.ClampedLinear:return vhe(e,t,r,i);case Ai.Proportional:return whe(e,t,r,i);case Ai.Stops:return bhe(e,t,r,i,s);case Ai.RealWorldSize:return _he(e,t,r,i);case Ai.Identity:return e;case Ai.Unknown:return null}}function She(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const s={scale:t,view:r};let n=on(e.minSize,LL,s),o=on(e.maxSize,LL,s);if(n!=null||o!=null){if(n>o){const l=o;o=n,n=l}return{minSize:n,maxSize:o}}}function Ehe(e,t,r){if(!e.visualVariables)return;const i=[],s=[],n=[],o=[],l=[];for(const p of e.visualVariables)switch(p.type){case"color":s.push(p);break;case"opacity":n.push(p);break;case"rotation":l.push(p);break;case"size":o.push(p)}return s.forEach((p=>{const m=uq(p,t,r);i.push({variable:p,value:m})})),n.forEach((p=>{const m=cq(p,t,r);i.push({variable:p,value:m})})),l.forEach((p=>{const m=dq(p,t,r);i.push({variable:p,value:m})})),o.forEach((p=>{const m=QS(p,t,r);i.push({variable:p,value:m})})),i}function d4(e,t){if(!t)return;let r=0,i=t.length-1;return t.some(((s,n)=>e<s?(i=n,!0):(r=n,!1))),[r,i,(e-t[r])/(t[i]-t[r])]}function The(e,t,r){const i=["proportional","proportional","proportional"];for(const s of e){const n=s.useSymbolValue?"symbol-value":QS(s,t,r)??"proportional";switch(s.axis){case"width":i[0]=n;break;case"depth":i[1]=n;break;case"height":i[2]=n;break;case"width-and-depth":i[0]=n,i[1]=n;break;case"all":case void 0:case null:i[0]=n,i[1]=n,i[2]=n;break;default:s.axis}}return i}const hNe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:The,getColor:uq,getOpacity:cq,getRotationAngle:dq,getSize:QS,getSizeForValue:hq,getSizeFromNumberOrVariable:on,getSizeRangeAtScale:She,getVisualVariableValues:Ehe,viewScaleRE:lq},Symbol.toStringTag,{value:"Module"}));var xM;const K1=new ct({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),IM=new ct({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function DL(e){if(e!=null)return typeof e=="string"||typeof e=="number"?phe(e):e.type==="size"?qA(e)?e:(delete(e={...e}).type,new Dt(e)):void 0}function FL(e,t,r){if(typeof e!="object")return e;const i=new Dt;return i.read(e,r),i}let Dt=xM=class extends Ki{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&lq.test(this.valueExpression)}}set index(e){qA(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),qA(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return oq(this)}set maxDataValue(e){e&&this.stops&&(de.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(de.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return DL(e)}readMaxSize(e,t,r){return FL(e,t,r)}set minDataValue(e){e&&this.stops&&(de.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(de.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return DL(e)}readMinSize(e,t,r){return FL(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter((t=>!!t))).sort(((t,r)=>t.value-r.value)):e&&(de.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Ahe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i!=null&&i.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;i.messages.push(new Q("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?IM.read(e):null}clone(){var e,t;return new xM({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:qA(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:qA(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map((r=>r.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===Ai.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Ai.Stops){const e=this.stops;if(!e)return this;const t=e.map((i=>i.size)).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map((t=>t.value||0))}};a([A({readOnly:!0})],Dt.prototype,"cache",null),a([A({type:K1.apiValues,json:{type:K1.jsonValues,origins:{"web-map":{read:!1}},read:K1.read,write:K1.write}})],Dt.prototype,"axis",void 0),a([A()],Dt.prototype,"index",null),a([A({type:String,readOnly:!0})],Dt.prototype,"inputValueType",null),a([A({type:hhe,json:{write:!0}})],Dt.prototype,"legendOptions",void 0),a([A({type:Number,value:null,json:{write:!0}})],Dt.prototype,"maxDataValue",null),a([A({type:Number,value:null,json:{write:!0}})],Dt.prototype,"maxSize",null),a([Ft("maxSize")],Dt.prototype,"castMaxSize",null),a([pe("maxSize")],Dt.prototype,"readMaxSize",null),a([A({type:Number,value:null,json:{write:!0}})],Dt.prototype,"minDataValue",null),a([A({type:Number,value:null,json:{write:!0}})],Dt.prototype,"minSize",null),a([Ft("minSize")],Dt.prototype,"castMinSize",null),a([pe("minSize")],Dt.prototype,"readMinSize",null),a([A({type:String,json:{write:!0}})],Dt.prototype,"normalizationField",void 0),a([A({readOnly:!0})],Dt.prototype,"arcadeRequired",null),a([A({type:String})],Dt.prototype,"scaleBy",void 0),a([A({type:[Bo],value:null,json:{write:!0}})],Dt.prototype,"stops",null),a([A({type:["outline"],json:{write:!0}})],Dt.prototype,"target",void 0),a([A({type:String,readOnly:!0})],Dt.prototype,"transformationType",null),a([A({type:["size"],json:{type:["sizeInfo"]}})],Dt.prototype,"type",void 0),a([A({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Dt.prototype,"useSymbolValue",void 0),a([A({type:String,json:{write:!0}})],Dt.prototype,"valueExpression",void 0),a([pe("valueExpression",["valueExpression","expression"])],Dt.prototype,"readValueExpression",null),a([ye("web-scene","valueExpression")],Dt.prototype,"writeValueExpressionWebScene",null),a([A({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Dt.prototype,"valueRepresentation",void 0),a([A({type:IM.apiValues,json:{write:IM.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Dt.prototype,"valueUnit",void 0),a([pe("valueUnit")],Dt.prototype,"readValueUnit",null),Dt=xM=a([P("esri.renderers.visualVariables.SizeVariable")],Dt);const $he={color:rc,size:Dt,opacity:Hl,rotation:ic},xhe=new ct({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Ihe=/^\[([^\]]+)\]$/i;let I2=class extends je{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter((r=>!!r)),t==null?void 0:t.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some((r=>!!r.target))&&t.sort(((r,i)=>{let s=null;return s=r.target===i.target?0:r.target?1:-1,s}));for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:s,rotationType:n}=r,o=s==null?void 0:s.match(Ihe),l=o==null?void 0:o[1];if(l&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:n,field:l})),t)return t.map((p=>{const m=xhe.read(p.type),v=$he[m];v||(de.getLogger(this).warn(`Unknown variable type: ${m}`),i!=null&&i.messages&&i.messages.push(new kn("visual-variable:unsupported",`visualVariable of type '${m}' is not supported`,{definition:p,context:i})));const _=new v;return _.read(p,i),_}))}writeVariables(t,r){const i=[];for(const s of t){const n=s.toJSON(r);n&&i.push(n)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};a([A()],I2.prototype,"visualVariables",null),I2=a([P("esri.renderers.visualVariables.VisualVariableFactory")],I2);const Mhe={base:Ki,key:"type",typeMap:{opacity:Hl,color:rc,rotation:ic,size:Dt}},om=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new I2}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,s){return this._vvFactory.readVariables(r,i,s)}writeVisualVariables(r,i,s,n){i[s]=this._vvFactory.writeVariables(r,n)}get arcadeRequiredForVisualVariables(){var r;return((r=this.visualVariables)==null?void 0:r.some((({arcadeRequired:i})=>i)))??!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){var s;return((s=this.visualVariables)==null?void 0:s.filter((n=>n.type===r&&(typeof i=="string"?n.target===i:i!==!1||!n.target))))??[]}async collectVVRequiredFields(r,i){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&xs(r,i,n.field),n.normalizationField&&xs(r,i,n.normalizationField),n.valueExpression&&(Che(n.valueExpression,r,i)||await ls(r,i,n.valueExpression)))}};return a([A({types:[Mhe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),a([pe("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),a([ye("visualVariables")],t.prototype,"writeVisualVariables",null),t=a([P("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Che(e,t,r){const i=Bie(e);return i!=null&&(xs(t,r,i),!0)}const p4=[252,146,31,255],khe=[153,153,153,255],Rhe={type:"esriSMS",style:"esriSMSCircle",size:6,color:p4,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Ohe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:p4},Phe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Nhe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Lhe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Dhe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Fhe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},e_=hi.fromJSON(Rhe),h4=Qr.fromJSON(Ohe),Aq=En.fromJSON(Phe),jhe=Wt.fromJSON(Nhe);function fNe(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return e_;case"polyline":return h4;case"polygon":case"extent":return Aq}return null}const mNe=hi.fromJSON(Lhe),yNe=Qr.fromJSON(Dhe),gNe=En.fromJSON(Fhe),Bhe=_s.fromSimpleMarkerSymbol(e_),Uhe=Wo.fromSimpleLineSymbol(h4),Vhe=so.fromSimpleFillSymbol(Aq),zhe=new ru({symbolLayers:new Te([new gs({material:{color:p4},edges:new Tz({size:uo(1),color:new Ke(khe)})})])}),Ghe=new Wo({symbolLayers:new Te([new ys({material:{color:new Ke([0,0,0])},size:uo(1)})])}),qhe=new so({symbolLayers:new Te([new gs({outline:{color:new Ke([0,0,0]),size:uo(1)}})])});function vNe(e){if(e==null)return null;switch(e.type){case"mesh":return zhe;case"point":case"multipoint":return Bhe;case"polyline":return Uhe;case"polygon":case"extent":return Vhe}return null}const jL="#useCIMFallbackSymbology()",Sh={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Hhe(e,t=Sh){var p,m,v,_;if(!e)return{symbol:null};const{retainId:r=Sh.retainId,ignoreDrivers:i=Sh.ignoreDrivers,hasLabelingContext:s=Sh.hasLabelingContext,retainCIM:n=Sh.retainCIM,cimFallbackEnabled:o=Sh.cimFallbackEnabled}=t;let l=null;if(Zz(e)||e instanceof Mi)l=e.clone();else if(e.type==="cim"){const E=(m=(p=e.data)==null?void 0:p.symbol)==null?void 0:m.type;switch(E){case"CIMPointSymbol":l=n?e.clone():_s.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(l=Ghe.clone(),(v=t==null?void 0:t.logWarning)==null||v.call(t,jL,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(l=qhe.clone(),(_=t==null?void 0:t.logWarning)==null||_.call(t,jL,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!l)return{error:new Q("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${E||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof Qr)l=Wo.fromSimpleLineSymbol(e);else if(e instanceof hi)l=_s.fromSimpleMarkerSymbol(e);else if(e instanceof fs)l=_s.fromPictureMarkerSymbol(e);else if(e instanceof En)l=t.geometryType&&t.geometryType==="mesh"?ru.fromSimpleFillSymbol(e):so.fromSimpleFillSymbol(e);else{if(!(e instanceof Wt))return{error:new Q("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};l=s?Do.fromTextSymbol(e):_s.fromTextSymbol(e)}return r&&l&&l.type!=="cim"&&(l.id=e.id),!i||l.type==="cim"||l instanceof Mi||l.symbolLayers.forEach((E=>E.ignoreDrivers=!0)),{symbol:l}}function t_(e,t,r,i){const s=fq(e,{},{context:i,isLabelSymbol:!1});s!=null&&jr(r,s,t)}function BL(e,t,r,i){const s=fq(e,{},{context:i,isLabelSymbol:!0});s!=null&&(t[r]=s)}function UL(e){return Zz(e)||e instanceof Mi}function Whe(e){return(e==null?void 0:e.type)==="polygon-3d"||(e==null?void 0:e.type)==="line-3d"}function fq(e,t,r){var l;if(e==null)return null;const{context:i,isLabelSymbol:s}=r,n=i==null?void 0:i.origin,o=i==null?void 0:i.messages;if(n==="web-scene"&&!UL(e)){const p=Hhe(e,{retainCIM:!0,hasLabelingContext:s});return p.symbol!=null?p.symbol.write(t,i):(o==null||o.push(new Q("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:p.error})),null)}return pM(i==null?void 0:i.layer)&&Whe(e)?(o==null||o.push(new Q("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(l=i==null?void 0:i.layer)==null?void 0:l.declaredClass}'.`,{symbol:e,context:i})),null):(n==="web-map"||n==="portal-item"&&!pM(i==null?void 0:i.layer))&&UL(e)?(o==null||o.push(new Q("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function wNe(e,t){return eue(e,null,t)}const JS={types:Yz,json:{write:{writer:t_},origins:{"web-scene":{types:xN,write:{writer:t_},read:{reader:z0({types:xN})}}}}},A4=Vk({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},JS),f4={types:{base:Fr,key:"type",typeMap:{"simple-fill":bc.typeMap["simple-fill"],"picture-fill":bc.typeMap["picture-fill"],"polygon-3d":bc.typeMap["polygon-3d"],cim:bc.typeMap.cim}},json:{write:{writer:t_},origins:{"web-scene":{type:so,write:{writer:t_}}}}},M2={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var MM;let Ss=MM=class extends om(xn){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map((r=>r.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new MM({description:this.description,label:this.label,symbol:H(this.symbol),visualVariables:H(this.visualVariables),authoringInfo:H(this.authoringInfo)})}};a([A({type:String,json:{write:!0}})],Ss.prototype,"description",void 0),a([A({type:String,json:{write:!0}})],Ss.prototype,"label",void 0),a([A(A4)],Ss.prototype,"symbol",void 0),a([Ne({simple:"simple"})],Ss.prototype,"type",void 0),Ss=MM=a([P("esri.renderers.SimpleRenderer")],Ss);const Qhe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function CM(e){return e instanceof je}function VL(e){return e instanceof Te?Object.keys(e.items):CM(e)?Cs(e).keys():e?Object.keys(e):[]}function X1(e,t){return e instanceof Te?e.items[t]:e[t]}function Jhe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Eg(e){return e?e.declaredClass:null}function mq(e,t){var _;const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=VL(e),s=VL(t);if(i.length===0&&s.length===0)return;if(!i.length||!s.length||Jhe(e,t))return{type:"complete",oldValue:e,newValue:t};const n=s.filter((E=>!i.includes(E))),o=i.filter((E=>!s.includes(E))),l=i.filter((E=>s.includes(E)&&X1(e,E)!==X1(t,E))).concat(n,o).sort(),p=Eg(e);if(p&&Qhe.has(p)&&l.length)return{type:"complete",oldValue:e,newValue:t};let m;const v=CM(e)&&CM(t);for(const E of l){const $=X1(e,E),M=X1(t,E);let k;if((v||typeof $!="function"&&typeof M!="function")&&$!==M&&($!=null||M!=null)){if(r&&r[E]&&typeof r[E]=="function")k=(_=r[E])==null?void 0:_.call(r,$,M);else if($ instanceof Date&&M instanceof Date){if($.getTime()===M.getTime())continue;k={type:"complete",oldValue:$,newValue:M}}else k=typeof $=="object"&&typeof M=="object"&&Eg($)===Eg(M)?mq($,M):{type:"complete",oldValue:$,newValue:M};k!=null&&(m!=null?m.diff[E]=k:m={type:"partial",diff:{[E]:k}})}}return m}function bNe(e,t){return Zhe(e,t)}function Zhe(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const s of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const n=i.diff[s];if(!n)return!1;i=n}}return!0}function _Ne(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function Yhe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&Eg(e)!==Eg(t)?{type:"complete",oldValue:e,newValue:t}:mq(e,t)}function ew(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const r of t.added)if(!ew(r))return!1;for(const r of t.removed)if(!ew(r))return!1;for(const r of t.changed)if(!ew(r))return!1;return!0}case"partial":for(const t in e.diff)if(!ew(e.diff[t]))return!1;return!0}}var kM;const Khe=si()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Ly=kM=class extends Ge.ClonableMixin(ee){static from(e){return Vv(kM,e)}constructor(e){super(e),this.title=null,this.order=null}};a([A({type:String,json:{write:!0}})],Ly.prototype,"title",void 0),a([Ne(Khe)],Ly.prototype,"order",void 0),Ly=kM=a([P("esri.renderers.support.RendererLegendOptions")],Ly);const m4=Ly;let Go=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};a([A(M2)],Go.prototype,"value",void 0),a([A(M2)],Go.prototype,"value2",void 0),a([A(M2)],Go.prototype,"value3",void 0),Go=a([P("esri.renderers.support.UniqueValue")],Go);let jl=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map((i=>new Go({value:i}))):r==="object"?t[0]instanceof Go?t:t.map((i=>new Go(i))):null}};a([A({type:String,json:{write:!0}})],jl.prototype,"description",void 0),a([A({type:String,json:{write:!0}})],jl.prototype,"label",void 0),a([A(JS)],jl.prototype,"symbol",void 0),a([A({type:[Go],json:{type:[[String]],read:{reader:e=>e?e.map((t=>new Go({value:t[0],value2:t[1],value3:t[2]}))):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const s=[i.value,i.value2,i.value3].filter(Ga).map((n=>n.toString()));r.push(s)}t.values=r}}}})],jl.prototype,"values",void 0),a([Ft("values")],jl.prototype,"castValues",null),jl=a([P("esri.renderers.support.UniqueValueClass")],jl);let up=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.heading=null,this.classes=null}};a([A({type:String,json:{write:!0}})],up.prototype,"heading",void 0),a([A({type:[jl],json:{write:{isRequired:!0}}})],up.prototype,"classes",void 0),up=a([P("esri.renderers.support.UniqueValueGroup")],up);var RM;let zo=RM=class extends ee{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new RM({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};a([A({type:String,json:{write:!0}})],zo.prototype,"description",void 0),a([A({type:String,json:{write:!0}})],zo.prototype,"label",void 0),a([A(A4)],zo.prototype,"symbol",void 0),a([A(M2)],zo.prototype,"value",void 0),zo=RM=a([P("esri.renderers.support.UniqueValueInfo")],zo);const zL=new Map;async function Xhe(e,t){try{return{data:(await iAe(e,t)).data,baseUrl:Nne(e),styleUrl:e}}catch(r){return ka(r),null}}function eAe(e,t,r){var p;const i=t.portal!=null?t.portal:me.getDefault();let s;const n=`${i.url} - ${(p=i.user)==null?void 0:p.username} - ${e}`,o=zL.get(n);if(o)return o;const l=tAe(e,i,r).then((m=>(s=m,m.fetchData()))).then((m=>({data:m,baseUrl:s.itemUrl??"",styleName:e})));return zL.set(n,l),l}function tAe(e,t,r){return t.load(r).then((()=>{const i=new Nr({disableExtraQuery:!0,query:`owner:${GL} AND type:${qL} AND typekeywords:"${e}"`});return t.queryItems(i,r)})).then((({results:i})=>{var o;let s=null;const n=e.toLowerCase();if(i&&Array.isArray(i)){for(const l of i)if(((o=l.typeKeywords)==null?void 0:o.some((m=>m.toLowerCase()===n)))&&l.type===qL&&l.owner===GL){s=l;break}}if(!s)throw new Q("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(r)}))}function rAe(e,t,r){return(e==null?void 0:e.styleUrl)!=null?Xhe(e.styleUrl,r):(e==null?void 0:e.styleName)!=null?eAe(e.styleName,t,r):Promise.reject(new Q("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function $Ne(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function xNe(e,t){for(const r of t)switch(r){case"cim":if(e.cimRef)return{format:r,url:encodeURI(e.cimRef)};break;case"web-gltf-basisu":{const i=y3(e,"gltf_basisu");if(i)return{format:r,url:i};break}case"web-gltf":{const i=y3(e,"gltf");if(i)return{format:r,url:i};break}case"web":{const i=y3(e,"gltf");if(i)return{format:"web-gltf",url:i};if(e.webRef)return{format:r,url:encodeURI(e.webRef)};break}}}function y3(e,t){var r,i;if(!K("enable-feature:force-wosr"))return(i=(r=e.formatInfos)==null?void 0:r.find((s=>s.type===t)))==null?void 0:i.href}function iAe(e,t){const r={responseType:"json",query:{f:"json"},...t};return Nt(no(e),r)}const GL="esri_en",qL="Style",INe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Dy;const HL="uvInfos-watcher",WL="uvGroups-watcher",sAe=",",nAe=Br(zo);function oAe(e){const{field1:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=e,l=!(!t||!r);return[{classes:(n??[]).map((p=>{var U;const{symbol:m,label:v,value:_,description:E}=p,[$,M,k]=l?((U=_==null?void 0:_.toString())==null?void 0:U.split(s||""))||[]:[_],N=[];return(t||o)&&N.push($),r&&N.push(M),i&&N.push(k),{symbol:m,label:v,values:[N],description:E}}))}]}function Eh(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let sr=Dy=class extends om(xn){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<r.length;n++){const o=t.find((l=>l.value===r[n].value));o?Yhe(o,r[n])?(s.changed.push({type:"complete",oldValue:o,newValue:r[n]}),i=!0):s.unchanged.push({oldValue:o,newValue:r[n]}):(s.added.push(r[n]),i=!0)}for(let n=0;n<t.length;n++)r.find((o=>o.value===t[n].value))||(s.removed.push(t[n]),i=!0);return i?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:Uv(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i!=null&&i.messages?i.messages.push(new Q("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):de.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||me.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=nh(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=zp(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?de.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?de.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var i;if(this.styleOrigin)return void de.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?nAe(e):new zo({value:e,symbol:Kz(t)}),(i=this.uniqueValueInfos)==null||i.push(r),this._valueInfoMap[Eh(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void de.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[Eh(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await jp()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void de.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return(r==null?void 0:r.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(r==null?void 0:r.arcade)==null){const s=await jp(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}const i=this._getUniqueValueInfo(e,r);return(i==null?void 0:i.symbol)||this.defaultSymbol}get symbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){var i;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=(i=this.uniqueValueInfos)==null?void 0:i.reduce(((s,n)=>s+n.getMeshHash()),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Dy({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:H(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:H(this.visualVariables),legendOptions:H(this.legendOptions),authoringInfo:H(this.authoringInfo),backgroundFillSymbol:H(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=H(this.uniqueValueInfos),r=H(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(H(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map((i=>i.collectRequiredFields(e,t))),ls(e,t,this.valueExpression)];xs(e,t,this.field),xs(e,t,this.field2),xs(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return rAe(this.styleOrigin,{portal:this.portal}).then((e=>{var r;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach((i=>{const s=new Mi({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const n=new zo({value:i.name,symbol:s});t.push(n),this._valueInfoMap[Eh(i.name)]=n})),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((r=this.uniqueValueInfos)!=null&&r.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",sAe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[Eh(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(HL);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(Qe((()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description})),((i,s)=>{i!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(t,HL)}}_watchUniqueValueGroups(){this.removeHandles(WL);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(Qe((()=>({classes:r.classes})),((i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const i of r.classes??[])t.push(Qe((()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description})),((s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(t,WL)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!t||!r);for(const p of n)for(const m of p.classes??[]){const{symbol:v,label:_,values:E,description:$}=m;for(const M of E??[]){const{value:k,value2:N,value3:U}=M,G=[k];r&&G.push(N),i&&G.push(U);const W=l?G.join(s||""):G[0]??void 0;e.push(new zo({symbol:v,label:_,value:W,description:$}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!t&&!i||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),l=n.map((m=>{var U;const{symbol:v,label:_,value:E,description:$}=m,[M,k,N]=o?((U=E==null?void 0:E.toString())==null?void 0:U.split(s||""))||[]:[E];return new jl({symbol:v,label:_,description:$,values:[new Go({value:M,value2:k,value3:N})]})})),p=[new up({classes:l})];e&&Object.freeze(p),this._set("uniqueValueGroups",p),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=t??{};let l=this._cache.compiledFunc;const p=n.arcadeUtils;if(!l){const v=p.createSyntaxTree(this.valueExpression);l=p.createFunction(v),this._cache.compiledFunc=l}const m=p.executeFunction(l,p.createExecContext(e,p.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._valueInfoMap[Eh(m)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const s=this.field2,n=this.field3,o=[];t&&o.push(r[t]),s&&o.push(r[s]),n&&o.push(r[n]),i=o.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[Eh(i)]}static fromPortalStyle(e,t){const r=new Dy(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",(t==null?void 0:t.portal)||me.getDefault());const i=r.populateFromStyle();return i.catch((s=>{de.getLogger(this.prototype).error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)})),i}static fromStyleUrl(e,t){const r=new Dy(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch((s=>{de.getLogger(this.prototype).error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)})),i}};a([A({readOnly:!0})],sr.prototype,"_cache",null),a([Ne({uniqueValue:"unique-value"})],sr.prototype,"type",void 0),a([A(f4)],sr.prototype,"backgroundFillSymbol",void 0),a([A({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],sr.prototype,"field",null),a([Ft("field")],sr.prototype,"castField",null),a([ye("field")],sr.prototype,"writeField",null),a([A({type:String,value:null,json:{write:!0}})],sr.prototype,"field2",null),a([A({type:String,value:null,json:{write:!0}})],sr.prototype,"field3",null),a([A({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],sr.prototype,"orderByClassesEnabled",void 0),a([A({type:String,value:null,json:{write:!0}})],sr.prototype,"valueExpression",null),a([A({type:String,json:{write:!0}})],sr.prototype,"valueExpressionTitle",void 0),a([A({type:m4,json:{write:!0}})],sr.prototype,"legendOptions",void 0),a([A({type:String,json:{write:!0}})],sr.prototype,"defaultLabel",void 0),a([A(Vk({...JS},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],sr.prototype,"defaultSymbol",null),a([A({type:String,value:null,json:{write:!0}})],sr.prototype,"fieldDelimiter",null),a([A({type:me,readOnly:!0})],sr.prototype,"portal",void 0),a([pe("portal",["styleName"])],sr.prototype,"readPortal",null),a([A({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],sr.prototype,"styleOrigin",void 0),a([pe("styleOrigin",["styleName","styleUrl"])],sr.prototype,"readStyleOrigin",null),a([ye("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],sr.prototype,"writeStyleOrigin",null),a([A({type:[up],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||oAe(t)).map((i=>up.fromJSON(i,r)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],sr.prototype,"uniqueValueGroups",null),a([A({type:[zo],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],sr.prototype,"uniqueValueInfos",null),sr=Dy=a([P("esri.renderers.UniqueValueRenderer")],sr);var OM,kf;let li=(kf=class extends ee{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10}clone(){return new OM(H({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},OM=kf,kf);a([A({type:[String],json:{write:!0}})],li.prototype,"attachmentTypes",void 0),a([A({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],li.prototype,"attachmentsWhere",void 0),a([A({type:Boolean,json:{write:!0}})],li.prototype,"cacheHint",void 0),a([A({type:[String],json:{write:!0}})],li.prototype,"keywords",void 0),a([A({type:[String],json:{write:!0}})],li.prototype,"globalIds",void 0),a([A({json:{write:!0}})],li.prototype,"name",void 0),a([A({type:Number,json:{read:{source:"resultRecordCount"}}})],li.prototype,"num",void 0),a([A({type:[Number],json:{write:!0}})],li.prototype,"objectIds",void 0),a([A({type:[String],json:{write:!0}})],li.prototype,"orderByFields",void 0),a([A({type:Boolean,json:{default:!1,write:!0}})],li.prototype,"returnMetadata",void 0),a([A({type:[Number],json:{write:!0}})],li.prototype,"size",void 0),a([A({type:Number,json:{read:{source:"resultOffset"}}})],li.prototype,"start",void 0),a([ye("start"),ye("num")],li.prototype,"writeStart",null),a([A({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],li.prototype,"where",void 0),li=OM=a([P("esri.rest.support.AttachmentQuery")],li),li.from=Br(li);const yq=si()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),QL="percent-of-total",JL="field",MNe=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const i=!!this.normalizationField,s=this.normalizationTotal!=null;return i||s?(r=i&&JL||s&&QL||null,i&&s&&de.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==JL&&r!==QL||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return a([A({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),a([A({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),a([A({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),a([A({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),a([Ne(yq,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=a([P("esri.rest.support.NormalizationBinParametersMixin")],t),t};var PM,Rf;let ar=(Rf=class extends ee{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,r){r.historicMoment=t&&t.getTime()}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(r.definitionExpression="1=1")}clone(){return new PM(H({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},PM=Rf,Rf);a([A({type:Boolean,json:{write:!0}})],ar.prototype,"cacheHint",void 0),a([A({type:jo,json:{write:!0}})],ar.prototype,"dynamicDataSource",void 0),a([A({type:String,json:{write:!0}})],ar.prototype,"gdbVersion",void 0),a([A({type:Number,json:{write:!0}})],ar.prototype,"geometryPrecision",void 0),a([A({type:Date})],ar.prototype,"historicMoment",void 0),a([ye("historicMoment")],ar.prototype,"_writeHistoricMoment",null),a([A({type:Number,json:{write:!0}})],ar.prototype,"maxAllowableOffset",void 0),a([A({json:{write:!0}})],ar.prototype,"objectIds",void 0),a([A({type:[String],json:{write:!0}})],ar.prototype,"orderByFields",void 0),a([A({type:[String],json:{write:!0}})],ar.prototype,"outFields",void 0),a([A({type:Ce,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ar.prototype,"outSpatialReference",void 0),a([A({json:{write:!0}})],ar.prototype,"relationshipId",void 0),a([A({type:Number,json:{read:{source:"resultOffset"}}})],ar.prototype,"start",void 0),a([ye("start"),ye("num")],ar.prototype,"writeStart",null),a([A({type:Number,json:{read:{source:"resultRecordCount"}}})],ar.prototype,"num",void 0),a([A({json:{write:!0}})],ar.prototype,"returnGeometry",void 0),a([A({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ar.prototype,"returnM",void 0),a([A({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ar.prototype,"returnZ",void 0),a([A({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ar.prototype,"where",void 0),ar=PM=a([P("esri.rest.support.RelationshipQuery")],ar),ar.from=Br(ar);const CNe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return ar}},Symbol.toStringTag,{value:"Module"})),NM=new ct({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function aAe(e,t,r,i){const s=await ed(e);if(await y4(e,t,i),!s.addAttachment)throw new Q(i,"Layer source does not support addAttachment capability");return s.addAttachment(t,r)}function y4(e,t,r){var n,o;const{attributes:i}=t,{objectIdField:s}=e;return(o=(n=e.capabilities)==null?void 0:n.data)!=null&&o.supportsAttachment?t?i?s&&i[s]?Promise.resolve():Promise.reject(new Q(r,`feature is missing the identifying attribute ${s}`)):Promise.reject(new Q(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new Q(r,"A feature is required to add/delete/update attachments")):Promise.reject(new Q(r,"this layer doesn't support attachments"))}async function lAe(e,t,r,i,s){const n=await ed(e);if(await y4(e,t,s),!n.updateAttachment)throw new Q(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(t,r,i)}async function uAe(e,t,r){const{applyEdits:i}=await ce(()=>import("./editingSupport-ChHajdTo.js"),[],import.meta.url),s=await e.load();let n=r;return s.type==="feature"&&s.infoFor3D&&t.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await kAe(s,t.deleteFeatures,s.globalIdField)}),i(s,s.source,t,r)}async function cAe(e,t,r){const{uploadAssets:i}=await ce(()=>import("./editingSupport-ChHajdTo.js"),[],import.meta.url),s=await e.load();return i(s,s.source,t,r)}async function dAe(e,t,r,i){const s=await ed(e);if(await y4(e,t,i),!s.deleteAttachments)throw new Q(i,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,r)}async function pAe(e,t,r){const i=(await e.load({signal:t==null?void 0:t.signal})).source;if(!i.fetchRecomputedExtents)throw new Q(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function hAe(e,t,r,i){var $,M,k,N;t=li.from(t),await e.load();const s=e.source,n=e.capabilities;if(!(($=n==null?void 0:n.data)!=null&&$.supportsAttachment))throw new Q(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:l,globalIds:p,num:m,size:v,start:_,where:E}=t;if(!((M=n==null?void 0:n.operations)!=null&&M.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(p==null?void 0:p.length)>0||(v==null?void 0:v.length)>0||m||_||E))throw new Q(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(l!=null&&l.length||p!=null&&p.length||E))throw new Q(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new Q(i,"Layer source does not support queryAttachments capability",t);return!((k=n==null?void 0:n.attachment)!=null&&k.supportsOrderByFields)&&((N=t.orderByFields)!=null&&N.length)&&((t=t.clone()).orderByFields=null),s.queryAttachments(t)}async function AAe(e,t,r,i){const s=await ed(e);if(!s.queryObjectIds)throw new Q(i,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(Ve.from(t)??e.createQuery(),r)}async function fAe(e,t,r,i){const s=await ed(e);if(!s.queryFeatureCount)throw new Q(i,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(Ve.from(t)??e.createQuery(),r)}async function mAe(e,t,r,i){const s=await ed(e);if(!s.queryExtent)throw new Q(i,"Layer source does not support queryExtent capability");return s.queryExtent(Ve.from(t)??e.createQuery(),r)}async function yAe(e,t,r,i){const s=await ed(e);if(!s.queryRelatedFeatures)throw new Q(i,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(ar.from(t),r)}async function gAe(e,t,r,i){const s=await ed(e);if(!s.queryRelatedFeaturesCount)throw new Q(i,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(ar.from(t),r)}async function vAe(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await sB(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function wAe(e){var o,l;const t=new Ve;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,t.outFields=["*"],t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null;const r=(o=e.capabilities)==null?void 0:o.query;r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference);const i=(l=e.capabilities)==null?void 0:l.data;i!=null&&i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i!=null&&i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM);const{timeOffset:s,timeExtent:n}=e;return t.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,t}function gq(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function vq(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function bAe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function _Ae(e,t,r,i){var p,m;const s=r==null?void 0:r.feature,n=!!((p=e.subtypes)!=null&&p.length);if(n&&!(r!=null&&r.excludeImpliedDomains)){const v=EAe(e,t);if(v)return v}const o=n&&SAe(e,s);if(o){const v=(m=o==null?void 0:o.domains)==null?void 0:m[t];return(v==null?void 0:v.type)==="inherited"?i:v}const l=_q(e.types,e.typeIdField,s);if(l){const v=l.domains&&l.domains[t];if(v&&(v==null?void 0:v.type)!=="inherited")return v}if(i)return i;if(!(r!=null&&r.excludeImpliedDomains)){const v=TAe(e,t);if(v)return v}return null}function SAe(e,t){const{subtypes:r,subtypeField:i}=e;if(!(t!=null&&t.attributes)||!(r!=null&&r.length)||!i)return null;const s=t.attributes[i];return s==null?null:r.find((n=>n.code===s))}function EAe(e,t){var o,l;const{fieldsIndex:r,subtypeField:i}=e,{name:s,type:n}=r.get(t)??{};if(!s)return null;if((i&&((o=r.get(i))==null?void 0:o.name))===s&&((l=e.subtypes)!=null&&l.length)){const p=e.subtypes.map((m=>new ap({code:wq(m.code,n),name:m.name})));if(p!=null&&p.length)return new Sc({codedValues:p})}return null}function TAe(e,t){var n,o;const{fieldsIndex:r}=e,{name:i,type:s}=r.get(t)??{};if(!i)return null;if(("typeIdField"in e?(n=r.get(e.typeIdField))==null?void 0:n.name:null)===i&&"types"in e&&((o=e.types)!=null&&o.length)){const l=e.types.map((p=>new ap({code:wq(p.id,s),name:p.name})));return new Sc({codedValues:l})}return null}function wq(e,t){return t?bU({type:t})&&typeof e=="number"?`${e}`:Ase({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function ed(e){return(await e.load()).source}async function kNe(e,t){if(!st)return;const r=st.findCredential(e);if(r)return r.userId;let i;try{const s=await c4(e,t);s&&(i=await st.checkSignInStatus(`${s}/sharing`))}catch{}return i?i.userId:null}async function bq(e,t){if(!st||st.findCredential(e))return;let r;try{const i=await c4(e,t);i&&(r=await st.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await st.getCredential(e,{signal:i})}catch{}}async function $Ae(e,t,r){var s;const i=(s=e.parsedUrl)==null?void 0:s.path;i&&e.authenticationTriggerEvent===t&&await bq(i,r)}async function RNe(e){var r;const t=(r=e.parsedUrl)==null?void 0:r.path;t&&xAe(e)&&await bq(t)}function xAe(e){return IAe(e)&&("serviceDefinitionExpression"in e&&r_(e.serviceDefinitionExpression)||"definitionExpression"in e&&r_(e.definitionExpression))}function IAe(e){var t;return!(!sq(e)||!((t=e.capabilities)!=null&&t.query.supportsCurrentUser))}function r_(e){return!!(e!=null&&e.toLowerCase().includes("current_user"))}function MAe(e){return!C2(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const g3=z0({types:Yz});function g4(e,t){var r;if(e.defaultSymbol)return(r=e.types)!=null&&r.length?new sr({defaultSymbol:g3(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map((i=>({id:i.id,symbol:g3(i.symbol,i,t)})))}):new Ss({symbol:g3(e.defaultSymbol,e,t)})}function CAe(e){var i,s,n;let t=(i=e.sourceJSON)==null?void 0:i.cacheMaxAge;if(!t)return!1;const r=(n=(s=e.editingInfo)==null?void 0:s.lastEditDate)==null?void 0:n.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function kAe(e,t,r){if(t==null)return null;const i=[],{objectIdField:s}=e;if(t.forEach((m=>{let v=null;if("attributes"in m){const{attributes:_}=m;v={globalId:_[r],objectId:_[s]!=null&&_[s]!==-1?_[s]:null}}else v={globalId:m.globalId,objectId:m.objectId!=null&&m.objectId!==-1?m.objectId:null};v.globalId!=null&&(v.objectId!=null&&v.objectId!==-1||i.push(v.globalId))})),i.length===0)return null;const n=e.createQuery();n.where=i.map((m=>`${r}='${m}'`)).join(" OR "),n.returnGeometry=!1,n.outFields=[s,r],n.cacheHint=!1;const o=await qpe(rq(e,n));if(!o.ok)return null;const l=new Map,p=o.value.features;for(const m of p){const v=m.attributes[r],_=m.attributes[s];v!=null&&_!=null&&_!==-1&&l.set(lpe(v),_)}return l}function _q(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find((s=>{const{id:n}=s;return n!=null&&n.toString()===i.toString()}))??null}function C2(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||RAe(e)}function RAe(e){var t,r;return!!((r=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&r.toLowerCase().split(",").map((i=>i.trim())).includes("map"))}function OAe(e,t,r){var n;const i=t==null?void 0:t.queryAttributeBins;if(!((n=t==null?void 0:t.operations)!=null&&n.supportsQueryBins)||!i)throw new Q(r,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!i.supportsAutoInterval)throw new Q(r,"Layer source does not support auto-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!ZL(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new Q(r,"Layer source does not support normalization binning");break;case"date":if(!i.supportsDate)throw new Q(r,"Layer source does not support date binning");if(e.binParameters.snapToData&&!i.supportsSnapToData)throw new Q(r,"Layer source does not support snapToData binning");if(e.binParameters.returnFullIntervalBin&&!i.supportsReturnFullIntervalBin)throw new Q(r,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!i.supportsFixedBoundaries)throw new Q(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!i.supportsFixedInterval)throw new Q(r,"Layer source does not support fixed-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!ZL(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new Q(r,"Layer source does not support normalization binning")}if(e.binParameters.stackBy&&!i.supportsStackBy)throw new Q(r,"Layer source does not support stackBy binning");if(e.binParameters.splitBy&&!i.supportsSplitBy)throw new Q(r,"Layer source does not support splitBy binning");if(e.binParameters.firstDayOfWeek&&!i.supportsFirstDayOfWeek)throw new Q(r,"Layer source does not support firstDayOfWeek binning");const s=i==null?void 0:i.supportedStatistics;if(e.outStatistics&&s){const o=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:l}of e.outStatistics){const p=o.get(l);if(p&&!s[p])throw new Q(r,`Layer source does not support ${l} statistic type`)}}}function ZL(e,t){return e!=null&&!!(t!=null&&t[yq.toJSON(e)])}let sA=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};a([A({type:String,json:{read:{source:"shapeAreaFieldName"}}})],sA.prototype,"shapeAreaField",void 0),a([A({type:String,json:{read:{source:"shapeLengthFieldName"}}})],sA.prototype,"shapeLengthField",void 0),a([A({type:String,json:{read:e=>Woe.read(e)||Qoe.read(e)}})],sA.prototype,"units",void 0),sA=a([P("esri.layers.support.GeometryFieldsInfo")],sA);var LM;let nA=LM=class extends ee{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Te}clone(){return new LM({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};a([A({type:String,json:{write:{isRequired:!0}}})],nA.prototype,"floorField",void 0),a([A({json:{read:!1,write:!1}})],nA.prototype,"viewAllMode",void 0),a([A({json:{read:!1,write:!1}})],nA.prototype,"viewAllLevelIds",void 0),nA=LM=a([P("esri.layers.support.LayerFloorInfo")],nA);const YL=new ct({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),KL=new ct({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let fn=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};a([A({json:{read:YL.read,write:YL.write}})],fn.prototype,"cardinality",void 0),a([A({json:{name:"catalogID"}})],fn.prototype,"catalogId",void 0),a([A({json:{read:!0,write:!0}})],fn.prototype,"composite",void 0),a([A({json:{read:!0,write:!0}})],fn.prototype,"id",void 0),a([A({json:{read:!0,write:!0}})],fn.prototype,"keyField",void 0),a([A({json:{read:!0,write:!0}})],fn.prototype,"keyFieldInRelationshipTable",void 0),a([A({json:{read:!0,write:!0}})],fn.prototype,"name",void 0),a([A({json:{read:!0,write:!0}})],fn.prototype,"relatedTableId",void 0),a([A({json:{read:!0,write:!0}})],fn.prototype,"relationshipTableId",void 0),a([A({json:{read:KL.read,write:KL.write}})],fn.prototype,"role",void 0),fn=a([P("esri.layers.support.Relationship")],fn);const PAe=[["binary","application/octet-stream","bin",""]];function NNe(e,t){return $q(t.name,(e==null?void 0:e.supportedFormats)??[])!=null}function LNe(e,t){if(!e)return!1;const r=NAe(t,e.supportedFormats??[]);return r!=null&&e.editFormats.includes(r)}function Sq(e,t){return w4(jAe(e,t))}function Eq(e,t){return w4($q(e,t))}function DNe(e,t){return xq(FAe(e,t))}function NAe(e,t){return Eq(e.name,t)??Sq(e.type,t)}function ZS(e,t,r){return Sq(e,r)??Eq(t,r)}function Tq({supportedFormats:e}){return ZS("model/gltf-binary","glb",e)}function FNe(e){const t=Tq(e);return t!=null&&e.editFormats.includes(t)}function LAe({supportedFormats:e}){return ZS("model/gltf+json","gltf",e)}function DAe(e){if(!e)return null;const t=Tq(e),r=LAe(e);let i=null;for(const s of e.queryFormats){if(s===t)return s;s===r&&(i=s)}return i}function jNe({supportedFormats:e}){return ZS("application/esri3do-SR_world","wld",e)}function BNe({supportedFormats:e}){return ZS("application/esri3do-SR_prj","prj",e)}function v4(e){return[...PAe,...e]}function FAe(e,t){return v4(t).find((r=>w4(r)===e))}function jAe(e,t){const r=e.toLowerCase();return v4(t).find((i=>xq(i)===r))}function $q(e,t){const r=e.toLowerCase();return v4(t).find((i=>BAe(i).some((s=>r.endsWith(s)))))}function w4(e){return e==null?void 0:e[0]}function xq(e){return e==null?void 0:e[1].toLowerCase()}function BAe(e){return(e==null?void 0:e[2].split(",").map((t=>t.toLowerCase())))??[]}function UNe(e){var t;return(t=e.tables)==null?void 0:t.find((r=>r.role==="assetMaps"))}function Me(e,t,r){return!!Iq(e,t,r)}function oA(e,t,r){return Iq(e,t,r)}function Iq(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const UAe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function VAe(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map((i=>i.toLowerCase()));return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function t1(e,t){var i;const r=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map((s=>s.toLowerCase()));return!!(r!=null&&r.includes(t.toLowerCase()))}function zAe(e){var r;const t=(r=e==null?void 0:e.supportedStatisticTypes)==null?void 0:r.map((i=>i.toLowerCase()));return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_cont")),percentileDiscrete:!!(t!=null&&t.includes("percentile_disc")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function GAe(e){var r;const t=(r=e==null?void 0:e.supportedNormalizationTypes)==null?void 0:r.map((i=>i.toLowerCase()));return{field:!!(t!=null&&t.includes("field")),log:!!(t!=null&&t.includes("log")),naturalLog:!!(t!=null&&t.includes("naturallog")),percentOfTotal:!!(t!=null&&t.includes("percentoftotal")),squareRoot:!!(t!=null&&t.includes("squareroot"))}}function Mq(e,t){return{analytics:qAe(e),attachment:HAe(e),data:WAe(e),metadata:QAe(e),operations:JAe(e.capabilities,e,t),query:ZAe(e,t),queryAttributeBins:XAe(e),queryRelated:YAe(e),queryTopFeatures:KAe(e),editing:efe(e)}}function qAe(e){return{supportsCacheHint:t1(e.advancedQueryCapabilities,"queryAnalytics")}}function HAe(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:t1(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:Me(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:Me(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((i=>{const s=UAe[i.name];s&&(r[s]=!!i.isEnabled)})),r}function WAe(e){return{isVersioned:Me(e,"isDataVersioned",!1),isBranchVersioned:Me(e,"isDataBranchVersioned",!1),supportsAttachment:Me(e,"hasAttachments",!1),supportsM:Me(e,"hasM",!1),supportsZ:Me(e,"hasZ",!1)}}function QAe(e){return{supportsAdvancedFieldProperties:Me(e,"supportsFieldDescriptionProperty",!1)}}function JAe(e,t,r){var E;const i=(e==null?void 0:e.toLowerCase().split(",").map(($=>$.trim())))??[],s=r?Ja(r):null,n=i.includes((s==null?void 0:s.serverType)==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone&&((E=t.uniqueIdInfo)==null?void 0:E.OIDFieldContainsHashValue)!==!0;let l=o&&i.includes("create"),p=o&&i.includes("delete"),m=o&&i.includes("update");const v=i.includes("changetracking"),_=t.advancedQueryCapabilities;return o&&!(l||p||m)&&(l=p=m=!0),{supportsCalculate:Me(t,"supportsCalculate",!1),supportsTruncate:Me(t,"supportsTruncate",!1),supportsValidateSql:Me(t,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:p,supportsEditing:o,supportsChangeTracking:v,supportsQuery:n,supportsQueryAnalytics:Me(_,"supportsQueryAnalytic",!1),supportsQueryAttachments:Me(_,"supportsQueryAttachments",!1),supportsQueryBins:Me(_,"supportsQueryBins",!1)||!!t.queryBinsCapabilities,supportsQueryTopFeatures:Me(_,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Me(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:m,supportsExceedsLimitStatistics:Me(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Me(t,"supportsAsyncConvert3D",!1)}}function ZAe(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,n=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),l=!o||n>=K("mapserver-pbf-version-support"),p=jb(t),m=new Set((e.supportedQueryFormats??"").split(",").map((v=>v.toLowerCase().trim())));return{maxRecordCount:oA(e,"maxRecordCount",void 0),maxRecordCountFactor:oA(e,"maxRecordCountFactor",void 0),maxUniqueIDCount:oA(e,"maxUniqueIDCount",void 0),standardMaxRecordCount:oA(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:VAe(r),supportsCacheHint:Me(r,"supportsQueryWithCacheHint",!1)||t1(r,"query"),supportsCentroid:Me(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:p,supportsCurrentUser:Me(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:Me(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Me(r,"supportsDisjointSpatialRel",!1),supportsDistance:Me(r,"supportsQueryWithDistance",!1),supportsDistinct:Me(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Me(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:l&&m.has("pbf"),supportsFullTextSearch:Me(r,"supportsFullTextSearch",!1),supportsGeometryProperties:Me(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:Me(r,"supportsHavingClause",!1),supportsHistoricMoment:Me(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Me(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Me(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Me(r,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:Me(r,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:Me(r,"supportsPercentileStatistics",!1),supportsQuantization:Me(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Me(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Me(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:Me(i,"allowOthersToQuery",!0),supportsQueryGeometry:Me(e,"supportsReturningQueryGeometry",!1),supportsResultType:Me(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!DAe(e.infoFor3D),supportsSpatialAggregationStatistics:Me(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Me(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Me(e,"useStandardizedQueries",!1),supportsStatistics:Me(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:Me(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:Me(r,"supportsTrueCurve",!1),tileMaxRecordCount:oA(e,"tileMaxRecordCount",void 0)}}function YAe(e){const t=e.advancedQueryCapabilities,r=Me(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Me(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:t1(t,"queryRelated")}}function KAe(e){return{supportsCacheHint:t1(e.advancedQueryCapabilities,"queryTopFilter")}}function XAe(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:Me(t,"supportsDateBin",!1),supportsFixedInterval:Me(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:Me(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Me(t,"supportsFixedBoundariesBin",!1),supportsStackBy:Me(t,"supportsStackBy",!1),supportsSplitBy:Me(t,"supportsSplitBy",!1),supportsSnapToData:Me(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:Me(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:Me(t,"supportsFirstDayOfWeek",!1),supportsNormalization:Me(t,"supportsNormalization",!1),supportedStatistics:zAe(t),supportedNormalizationTypes:GAe(t)}}function efe(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Me(e,"allowGeometryUpdates",!0),supportsGlobalId:Me(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Me(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Me(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Me(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Me(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Me(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Me(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Me(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Me(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Me(r,"supportsAsyncApplyEdits",!1),zDefault:oA(e,"zDefault",void 0)}}function VNe(e){var t;return{operations:{supportsAppend:Me(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:Me(e,"supportsExportClip",!1),supportsExportFrameset:Me(e,"supportsExportFrameset",!1),supportsMensuration:Me(e,"supportsMensuration",!1),supportsPreviews:Me(e,"supportsPreviews",!1),supportsUpdate:Me(e,"supportsUpdate",!1)}}}let gl=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=NS(t[i]);return r}writeDomains(t,r){var s;if(!t)return;const i={};for(const n of Object.keys(t))t[n]&&(i[n]=(s=t[n])==null?void 0:s.toJSON());r.domains=i}};a([A({type:Number,json:{write:!0}})],gl.prototype,"code",void 0),a([A({type:Object,json:{write:!0}})],gl.prototype,"defaultValues",void 0),a([A({json:{write:!0}})],gl.prototype,"domains",void 0),a([pe("domains")],gl.prototype,"readDomains",null),a([ye("domains")],gl.prototype,"writeDomains",null),a([A({type:String,json:{write:!0}})],gl.prototype,"name",void 0),gl=a([P("esri.layers.support.Subtype")],gl);const GNe=Math.PI/180,qNe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Cu=Ir.radius,wo=Ir.eccentricitySquared,tfe={a1:Cu*wo,a2:Cu*wo*Cu*wo,a3:Cu*wo*wo/2,a4:Cu*wo*Cu*wo*2.5,a5:Cu*wo+Cu*wo*wo/2,a6:1-wo},HNe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Ir.radius,f:Ir.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:zc.radius,f:zc.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ba.radius,f:Ba.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ba.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var te;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(te||(te={}));const rfe={[te.WGS84]:{[te.CGCS2000]:mr,[te.GCSMARS2000]:null,[te.GCSMOON2000]:null,[te.LON_LAT]:mr,[te.SPHERICAL_ECEF]:$g,[te.SPHERICAL_MARS_PCPF]:null,[te.SPHERICAL_MOON_PCPF]:null,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:of,[te.PLATE_CARREE]:af,[te.WGS84]:mr,[te.WGS84_ECEF]:cf},[te.CGCS2000]:{[te.CGCS2000]:mr,[te.GCSMARS2000]:null,[te.GCSMOON2000]:null,[te.LON_LAT]:mr,[te.SPHERICAL_ECEF]:$g,[te.SPHERICAL_MARS_PCPF]:null,[te.SPHERICAL_MOON_PCPF]:null,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:of,[te.PLATE_CARREE]:af,[te.WGS84]:mr,[te.WGS84_ECEF]:cf},[te.GCSMARS2000]:{[te.CGCS2000]:null,[te.GCSMARS2000]:mr,[te.GCSMOON2000]:null,[te.LON_LAT]:mr,[te.SPHERICAL_ECEF]:null,[te.SPHERICAL_MARS_PCPF]:t8,[te.SPHERICAL_MOON_PCPF]:null,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:null,[te.PLATE_CARREE]:null,[te.WGS84]:null,[te.WGS84_ECEF]:null},[te.GCSMOON2000]:{[te.CGCS2000]:null,[te.GCSMARS2000]:null,[te.GCSMOON2000]:mr,[te.LON_LAT]:mr,[te.SPHERICAL_ECEF]:null,[te.SPHERICAL_MARS_PCPF]:null,[te.SPHERICAL_MOON_PCPF]:e8,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:null,[te.PLATE_CARREE]:null,[te.WGS84]:null,[te.WGS84_ECEF]:null},[te.WEB_MERCATOR]:{[te.CGCS2000]:Tg,[te.GCSMARS2000]:null,[te.GCSMOON2000]:null,[te.LON_LAT]:Tg,[te.SPHERICAL_ECEF]:sfe,[te.SPHERICAL_MARS_PCPF]:null,[te.SPHERICAL_MOON_PCPF]:null,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:mr,[te.PLATE_CARREE]:afe,[te.WGS84]:Tg,[te.WGS84_ECEF]:nfe},[te.WGS84_ECEF]:{[te.CGCS2000]:df,[te.GCSMARS2000]:null,[te.GCSMOON2000]:null,[te.LON_LAT]:df,[te.SPHERICAL_ECEF]:mfe,[te.SPHERICAL_MARS_PCPF]:null,[te.SPHERICAL_MOON_PCPF]:null,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:yfe,[te.PLATE_CARREE]:lfe,[te.WGS84]:df,[te.WGS84_ECEF]:mr},[te.SPHERICAL_ECEF]:{[te.CGCS2000]:uf,[te.GCSMARS2000]:null,[te.GCSMOON2000]:null,[te.LON_LAT]:uf,[te.SPHERICAL_ECEF]:mr,[te.SPHERICAL_MARS_PCPF]:null,[te.SPHERICAL_MOON_PCPF]:null,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:hfe,[te.PLATE_CARREE]:ufe,[te.WGS84]:uf,[te.WGS84_ECEF]:Afe},[te.SPHERICAL_MARS_PCPF]:{[te.CGCS2000]:null,[te.GCSMARS2000]:i8,[te.GCSMOON2000]:null,[te.LON_LAT]:i8,[te.SPHERICAL_ECEF]:null,[te.SPHERICAL_MARS_PCPF]:mr,[te.SPHERICAL_MOON_PCPF]:null,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:null,[te.PLATE_CARREE]:null,[te.WGS84]:null,[te.WGS84_ECEF]:null},[te.SPHERICAL_MOON_PCPF]:{[te.CGCS2000]:null,[te.GCSMARS2000]:null,[te.GCSMOON2000]:r8,[te.LON_LAT]:r8,[te.SPHERICAL_ECEF]:null,[te.SPHERICAL_MARS_PCPF]:null,[te.SPHERICAL_MOON_PCPF]:mr,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:null,[te.PLATE_CARREE]:null,[te.WGS84]:null,[te.WGS84_ECEF]:null},[te.UNKNOWN]:{[te.CGCS2000]:null,[te.GCSMARS2000]:null,[te.GCSMOON2000]:null,[te.LON_LAT]:null,[te.SPHERICAL_ECEF]:null,[te.SPHERICAL_MARS_PCPF]:null,[te.SPHERICAL_MOON_PCPF]:null,[te.UNKNOWN]:mr,[te.WEB_MERCATOR]:null,[te.PLATE_CARREE]:null,[te.WGS84]:null,[te.WGS84_ECEF]:null},[te.LON_LAT]:{[te.CGCS2000]:mr,[te.GCSMARS2000]:mr,[te.GCSMOON2000]:mr,[te.LON_LAT]:mr,[te.SPHERICAL_ECEF]:$g,[te.SPHERICAL_MARS_PCPF]:t8,[te.SPHERICAL_MOON_PCPF]:e8,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:of,[te.PLATE_CARREE]:af,[te.WGS84]:mr,[te.WGS84_ECEF]:cf},[te.PLATE_CARREE]:{[te.CGCS2000]:lf,[te.GCSMARS2000]:null,[te.GCSMOON2000]:null,[te.LON_LAT]:lf,[te.SPHERICAL_ECEF]:cfe,[te.SPHERICAL_MARS_PCPF]:null,[te.SPHERICAL_MOON_PCPF]:null,[te.UNKNOWN]:null,[te.WEB_MERCATOR]:dfe,[te.PLATE_CARREE]:mr,[te.WGS84]:lf,[te.WGS84_ECEF]:pfe}};function Cq(e,t){var r;return(r=ife(e,t))==null?void 0:r.projector}function ife(e,t){if(e==null||t==null)return null;if(sl.source.spatialReference===e&&sl.dest.spatialReference===t)return sl;const r=XL(e,sl.source),i=XL(t,sl.dest);return r===te.UNKNOWN&&i===te.UNKNOWN?Jr(e,t)?sl.projector=mr:sl.projector=null:sl.projector=rfe[r][i],sl}function XL(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=po(e,1)),Wb(e)?t.spatialReferenceId=te.SPHERICAL_ECEF:Hp(e)?t.spatialReferenceId=te.WGS84:Za(e)?t.spatialReferenceId=te.WEB_MERCATOR:_oe(e)?t.spatialReferenceId=te.PLATE_CARREE:e.wkt===$oe.wkt?t.spatialReferenceId=te.WGS84_ECEF:e.wkid===qp.CGCS2000?t.spatialReferenceId=te.CGCS2000:e.wkt===FR.wkt?t.spatialReferenceId=te.SPHERICAL_MARS_PCPF:e.wkt===jR.wkt?t.spatialReferenceId=te.SPHERICAL_MOON_PCPF:NV(e)?t.spatialReferenceId=te.GCSMARS2000:LV(e)?t.spatialReferenceId=te.GCSMOON2000:t.spatialReferenceId=te.UNKNOWN):te.UNKNOWN}function mr(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function Tg(e,t,r,i){r[i]=x0*(e[t]/Tp),r[i+1]=x0*(kq-2*Math.atan(Math.exp(-e[t+1]/Tp))),r[i+2]=e[t+2]}function sfe(e,t,r,i){const s=e[t]/Tp,n=kq-2*Math.atan(Math.exp(-e[t+1]/Tp)),o=Tp+e[t+2],l=Math.cos(n)*o;r[i]=Math.cos(s)*l,r[i+1]=Math.sin(s)*l,r[i+2]=Math.sin(n)*o}function nfe(e,t,r,i){Tg(e,t,r,i),cf(r,i,r,i)}function ofe(e,t,r,i,s){const n=.4999999*Math.PI,o=lo($0*e[t+1],-n,n),l=Math.sin(o);r[i++]=$0*e[t]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+l)/(1-l)),r[i]=e[t+2]}function of(e,t,r,i){ofe(e,t,r,i,Ir)}function af(e,t,r,i){r[i]=e[t]*s8,r[i+1]=e[t+1]*s8,r[i+2]=e[t+2]}function lf(e,t,r,i){r[i]=e[t]*n8,r[i+1]=e[t+1]*n8,r[i+2]=e[t+2]}function afe(e,t,r,i){Tg(e,t,r,i),af(r,i,r,i)}function lfe(e,t,r,i){df(e,t,r,i),af(r,i,r,i)}function ufe(e,t,r,i){uf(e,t,r,i),af(r,i,r,i)}function cfe(e,t,r,i){lf(e,t,r,i),$g(r,i,r,i)}function dfe(e,t,r,i){lf(e,t,r,i),of(r,i,r,i)}function pfe(e,t,r,i){lf(e,t,r,i),cf(r,i,r,i)}function b4(e,t,r,i,s){const n=s+e[t+2],o=$0*e[t+1],l=$0*e[t],p=Math.cos(o)*n;r[i]=Math.cos(l)*p,r[i+1]=Math.sin(l)*p,r[i+2]=Math.sin(o)*n}function e8(e,t,r,i){b4(e,t,r,i,zc.radius)}function t8(e,t,r,i){b4(e,t,r,i,Ba.radius)}function $g(e,t,r,i){b4(e,t,r,i,Ir.radius)}function _4(e,t,r,i,s){const n=e[t],o=e[t+1],l=e[t+2],p=Math.sqrt(n*n+o*o+l*l),m=Jse(l/(p===0?1:p)),v=Math.atan2(o,n);r[i++]=x0*v,r[i++]=x0*m,r[i]=p-s}function r8(e,t,r,i){_4(e,t,r,i,zc.radius)}function i8(e,t,r,i){_4(e,t,r,i,Ba.radius)}function uf(e,t,r,i){_4(e,t,r,i,Ir.radius)}function hfe(e,t,r,i){uf(e,t,r,i),of(r,i,r,i)}function Afe(e,t,r,i){uf(e,t,r,i),cf(r,i,r,i)}function ffe(e,t,r,i,s){const n=$0*e[t],o=$0*e[t+1],l=e[t+2],p=Math.sin(o),m=Math.cos(o),v=s.radius/Math.sqrt(1-s.eccentricitySquared*p*p);r[i++]=(v+l)*m*Math.cos(n),r[i++]=(v+l)*m*Math.sin(n),r[i++]=(v*(1-s.eccentricitySquared)+l)*p}function cf(e,t,r,i){ffe(e,t,r,i,Ir)}function df(e,t,r,i){const s=tfe,n=e[t],o=e[t+1],l=e[t+2];let p,m,v,_,E,$,M,k,N,U,G,W,Z,ie,ne,ge,we,xe,Ie,$e,Re;p=Math.abs(l),m=n*n+o*o,v=Math.sqrt(m),_=m+l*l,E=Math.sqrt(_),$e=Math.atan2(o,n),$=l*l/_,M=m/_,ie=s.a2/E,ne=s.a3-s.a4/E,M>.3?(k=p/E*(1+M*(s.a1+ie+$*ne)/E),Ie=Math.asin(k),U=k*k,N=Math.sqrt(1-U)):(N=v/E*(1-$*(s.a5-ie-M*ne)/E),Ie=Math.acos(N),U=1-N*N,k=Math.sqrt(U)),G=1-Ir.eccentricitySquared*U,W=Ir.radius/Math.sqrt(G),Z=s.a6*W,ie=v-W*N,ne=p-Z*k,we=N*ie+k*ne,ge=N*ne-k*ie,xe=ge/(Z/G+we),Ie+=xe,Re=we+ge*xe/2,l<0&&(Ie=-Ie),r[i++]=x0*$e,r[i++]=x0*Ie,r[i]=Re}function mfe(e,t,r,i){df(e,t,r,i),$g(r,i,r,i)}function yfe(e,t,r,i){df(e,t,r,i),of(r,i,r,i)}const sl={source:{spatialReference:null,spatialReferenceId:te.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:te.UNKNOWN,metersPerUnit:1},projector:mr},$0=Wv(1),x0=DU(1),kq=.5*Math.PI,Tp=Ir.radius,s8=Tp*Math.PI/180,n8=180/(Tp*Math.PI);function r1(e,t,r,i,s,n,o=Math.floor(e.length/3)){const l=Cq(t,s);if(l==null)return!1;if(l===mr){if(e===i&&r===n)return!0;const m=r+3*o;for(let v=r,_=n;v<m;v++,_++)i[_]=e[v];return!0}const p=r+3*o;for(let m=r,v=n;m<p;m+=3,v+=3)l(e,m,i,v);return!0}const WNe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:r1},Symbol.toStringTag,{value:"Module"}));function o8(e,t,r,i,s,n){return tw[0]=e,tw[1]=t,tw[2]=r,r1(tw,i,0,s,n,0)}const tw=Yc();let rw=0,v3=class DM{static fromGE(t){const r=new DM;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=rw++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=rw++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=rw++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=rw++}getInverse(){const t=new DM;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},i_=class Fy{static cacheKey(t,r){var i,s,n,o,l,p;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((s=t.wkt)==null?void 0:s.toString())??"",((n=t.wkt2)==null?void 0:n.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((l=r.wkt)==null?void 0:l.toString())??"",((p=r.wkt2)==null?void 0:p.toString())??""].join()}static fromGE(t){const r=new Fy;let i="";for(const s of t.steps){const n=v3.fromGE(s);r.steps.push(n),i+=n.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof v3?this.steps.push(r):this.steps.push(new v3({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new Fy;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[Fy.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const n of this.steps)i+=n.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const s=this._cachedProjection[Fy.cacheKey(t,r)];return s===void 0?null:s}},Yo=null,Wc=null,xg=null,k2={};const S4=new G0;function Au(){return!!Yo&&LR()}function Rq(){return!!Au()||(Ze(S4),cu(),!1)}function Oq(e,t){return!e||!t||co(e,t)||Rq()}function gfe(e,t){return!co(e,t)&&!Au()}function cu(e){return xg==null&&(xg=Promise.all([MV(),ce(()=>import("./geometryEngineBase-BV9OKxkg.js"),__vite__mapDeps([40,41,42]),import.meta.url).then((t=>t.g)),ce(()=>import("./hydrated-CLnklNdo.js"),[],import.meta.url)])),xg.then((([,t,{hydratedAdapter:r}])=>{dr(e),Wc=r,Yo=t.default,Yo._enableProjection(goe),S4.notify()}))}function td(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:(Joe(e),FM(Wc,e,e[0].spatialReference,t,r,i)):(b0(e),FM(Wc,[e],e.spatialReference,t,r,i)[0])}function FM(e,t,r,i,s=null,n=null){if(r==null||i==null)return t;if(co(r,i,s))return t.map((o=>R2(o,r,i)));if(s==null&&Wb(r))return t.map((o=>R2(o,r,Ce.WGS84))).map((o=>dv(o,i)));if(s==null&&Wb(i))return t.map((o=>dv(o,Ce.WGS84))).map((o=>R2(o,Ce.WGS84,i)));if(s==null){const o=i_.cacheKey(r,i);k2[o]!==void 0?s=k2[o]:((s=Nq(r,i,void 0))==null&&(s=new i_),k2[o]=s)}if(Yo==null||e==null)throw new YS;return n!=null?Yo._project(e,t,r,i,s,n):Yo._project(e,t,r,i,s)}function vfe(e,t){const r=Pq([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function Pq(e,t){if(!Au()){for(const r of e)if(r!=null&&!Jr(r.spatialReference,t)&&Tn(r.spatialReference)&&Tn(t)&&!co(r.spatialReference,t))return Ze(S4),{pending:cu(),geometries:null}}return{pending:null,geometries:e.map((r=>r==null?null:Jr(r.spatialReference,t)?r:Tn(r.spatialReference)&&Tn(t)?dv(r,t):null))}}function Nq(e,t,r=null){if(e==null||t==null)return null;if(Yo==null||Wc==null)throw new YS;const i=Yo._getTransformation(Wc,e,t,r,r==null?void 0:r.spatialReference);return i!==null?i_.fromGE(i):null}function wfe(e,t,r=null){if(Yo==null||Wc==null)throw new YS;const i=Yo._getTransformationBySuitability(Wc,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const s=[];for(const n of i)s.push(i_.fromGE(n));return s}return[]}let YS=class extends Q{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function bfe(){Yo=null,Wc=null,xg=null,k2={}}const _fe={get loadPromise(){return xg}};function dv(e,t){try{const r=td(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=_G(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof YS))throw r;return null}}async function Lq(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await E4(i,t,null,r),dv(e,t)}function co(e,t,r){return!r&&(!!Jr(e,t)||Tn(e)&&Tn(t)&&!!Cq(e,t))}function Sfe(e,t){if(Jr(e,t))return!0;if(!Tn(e)||!Tn(t))return!1;const r=Hp(e)||Za(e)||uN(e),i=Hp(t)||Za(t)||uN(t);return r&&i}async function E4(e,t,r,i){if(Au())return QP(i);if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(s&&n&&!co(s,n,o))return cu(i)}else if(e&&t&&!co(e,t,r))return cu(i);return QP(i)}function R2(e,t,r){return e?"x"in e?Dq(e,t,new Je,r,0):"xmin"in e?Vq(e,t,new At,r,0):"rings"in e?Uq(e,t,new ur,r,0):"paths"in e?jq(e,t,new $r,r,0):"points"in e?Fq(e,t,new Kn,r,0):null:null}function Efe(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&Dq(e,e.spatialReference,t,r,i)!=null}function Dq(e,t,r,i,s){ts[0]=e.x,ts[1]=e.y;const n=e.z;return ts[2]=n!==void 0?n:s,r1(ts,t,0,ts,i,0)?(r.x=ts[0],r.y=ts[1],r.spatialReference=i,n!==void 0||Gc(i)?(r.z=ts[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function Tfe(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Fq(e,e.spatialReference,t,r,i)!=null}function Fq(e,t,r,i,s){const{points:n,hasZ:o,hasM:l}=e,p=[],m=n.length,v=[];for(const E of n)v.push(E[0],E[1],o?E[2]:s);if(!r1(v,t,0,v,i,0,m))return null;const _=o||Gc(i);for(let E=0;E<m;++E){const $=3*E,M=v[$],k=v[$+1];_&&l?p.push([M,k,v[$+2],n[E][3]]):_?p.push([M,k,v[$+2]]):l?p.push([M,k,n[E][2]]):p.push([M,k])}return r.points=p,r.spatialReference=i,r.hasZ=o,r.hasM=l,r}function $fe(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&jq(e,e.spatialReference,t,r,i)!=null}function jq(e,t,r,i,s){const{paths:n,hasZ:o,hasM:l}=e,p=[];if(!zq(n,o??!1,l??!1,t,p,i,s))return null;const m=o||Gc(i);return r.paths=p,r.spatialReference=i,r.hasZ=m,r.hasM=l,r}function Bq(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Uq(e,e.spatialReference,t,r,i)!=null}function Uq(e,t,r,i,s){const{rings:n,hasZ:o,hasM:l}=e,p=[];if(!zq(n,o??!1,l??!1,t,p,i,s))return null;const m=o||Gc(i);return r.rings=p,r.spatialReference=i,r.hasZ=m,r.hasM=l,r}function xfe(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Vq(e,e.spatialReference,t,r,i)!=null}function Vq(e,t,r,i,s){const{xmin:n,ymin:o,xmax:l,ymax:p,hasZ:m,hasM:v}=e,_=m?e.zmin:s;if(!o8(n,o,_,t,ts,i))return null;const E=m||Gc(i);r.xmin=ts[0],r.ymin=ts[1],E&&(r.zmin=ts[2]);const $=m?e.zmax:s;return o8(l,p,$,t,ts,i)?(r.xmax=ts[0],r.ymax=ts[1],E&&(r.zmax=ts[2]),v&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function zq(e,t,r,i,s,n,o=0){const l=new Array;for(const v of e)for(const _ of v)l.push(_[0],_[1],t?_[2]:o);if(!r1(l,i,0,l,n,0))return!1;let p=0;s.length=0;const m=t||Gc(n);for(const v of e){const _=new Array;for(const E of v)m&&r?_.push([l[p++],l[p++],l[p++],E[3]]):m?_.push([l[p++],l[p++],l[p++]]):r?(_.push([l[p++],l[p++],E[2]]),p++):(_.push([l[p++],l[p++]]),p++);s.push(_)}return!0}const ts=Yc(),JNe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:co,getTransformation:Nq,getTransformations:wfe,initializeProjection:E4,isEqualBaseGCS:Sfe,isLoaded:Au,isLoadedOrLoad:Rq,isLoadedOrLoadFor:Oq,load:cu,project:td,projectExtent:xfe,projectMany:FM,projectMultipoint:Tfe,projectOrLoad:vfe,projectOrLoadMany:Pq,projectPoint:Efe,projectPolygon:Bq,projectPolyline:$fe,projectWithZConversion:Lq,projectWithoutEngine:R2,requiresLoad:gfe,test:_fe,tryProjectWithZConversion:dv,unload:bfe},Symbol.toStringTag,{value:"Module"}));async function Ife(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return DA(e);const r=Ce.WGS84;return await E4(t,r),td(e,r)}function Mfe(e,t){if(!T4(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function T4(e,t){var r;return!!((r=e.typeKeywords)!=null&&r.includes(t))}function ZNe(e){return T4(e,$4.HOSTED_SERVICE)}function Cfe(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function YNe(e,t,r){r?Mfe(e,t):Cfe(e,t)}async function KNe(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return Ife(r)}const $4={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function kfe(e){var p;const{portal:t,isOrgItem:r,itemControl:i}=e,s=(p=t.user)==null?void 0:p.privileges;let n=!s||s.includes("features:user:edit"),o=!!r&&!!(s!=null&&s.includes("features:user:fullEdit"));const l=i==="update"||i==="admin";return l?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:l}}}const Rfe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Te.ofType(_a)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Ce.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:s,operations:n,editing:o}=r;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||n.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(r_(this.serviceDefinitionExpression)||r_(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(CAe(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i!=null&&i.creatorField||i!=null&&i.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,i){return Mq(i,this.url)}readEditingInfo(r,i){const{editingInfo:s}=i;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=H(r),{operations:s,editing:n}=i;return C2(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=n.supportsDeleteByOthers=n.supportsGeometryUpdate=n.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=n.supportsGeometryUpdate=!0),i)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,i){return gq(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||C2(this))return!1;const{operations:i,editing:s}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:s}=r;return C2(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return vq(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}readUniqueIdFields(r,i){var s;return(s=i.uniqueIdInfo)!=null&&s.OIDFieldContainsHashValue?i.uniqueIdInfo.fields:null}set url(r){if(r==null)return void this._set("url",r);const i=Jne({layer:this,url:r,nonStandardUrlAllowed:!0,logger:de.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,s,n){Zne(this,r,null,i,n)}readVersion(r,i){return bAe(i)}get isUrlHostModified(){var o;const{loaded:r,url:i,_isUrlHostModified:s}=this;if(s)return!0;if(!r||!i||this.originIdOf("url")<_t.USER)return!1;const n=(o=this.sourceJSON)==null?void 0:o.preferredHost;if(!n||!Ua(i,`https://${n}`,!0))return!1;for(let l=_t.USER-1;l>=_t.PORTAL_ITEM;l--){const p=this.getAtOrigin("url",Hg(l));if(p)return!Ua(i,p,!0)}return!1}applyPreferredHost(r){const{url:i,portalItem:s}=this;!i||hM(s)}applyHostFromPortalItem(){const{url:r,portalItem:i}=this;if(!r||this.originIdOf("url")===_t.USER||!(i!=null&&i.url)||!hM(i)||!T4(i,$4.HOSTED_SERVICE)||Ua(r,i.url,!0)||!this._isUrlHostModificationEnabled)return;const s=Bne(i.url);this._set("url",cV(r,s)),this._isUrlHostModified=!0}};return a([A({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),a([A({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),a([A({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),a([pe("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),a([A(Pb("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),a([A({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),a([A({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),a([A({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),a([A({readOnly:!0,type:yl})],t.prototype,"editFieldsInfo",void 0),a([A({readOnly:!0})],t.prototype,"editingInfo",void 0),a([pe("editingInfo")],t.prototype,"readEditingInfo",null),a([A({readOnly:!0})],t.prototype,"effectiveCapabilities",null),a([A()],t.prototype,"effectiveEditingEnabled",null),a([A((()=>{const r=H(Lpe),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),a([A()],t.prototype,"fieldsIndex",void 0),a([A({type:nA,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:tr}}})],t.prototype,"floorInfo",void 0),a([A({type:At,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),a([A()],t.prototype,"gdbVersion",void 0),a([A({readOnly:!0,type:sA,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),a([A({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:NM.read}}}})],t.prototype,"geometryType",void 0),a([A({type:String})],t.prototype,"globalIdField",void 0),a([pe("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),a([A({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),a([A({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),a([A({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),a([A({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),a([A({readOnly:!0,type:ms})],t.prototype,"heightModelInfo",void 0),a([A({type:Date})],t.prototype,"historicMoment",void 0),a([A({type:Te.ofType(_a),readOnly:!0})],t.prototype,"indexes",void 0),a([A({readOnly:!0})],t.prototype,"isTable",void 0),a([pe("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),a([A({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),a([A(Bpe)],t.prototype,"maxScale",void 0),a([pe("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),a([A(jpe)],t.prototype,"minScale",void 0),a([pe("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),a([A({type:String})],t.prototype,"objectIdField",void 0),a([pe("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),a([A(Pb("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),a([A({type:[fn],readOnly:!0})],t.prototype,"relationships",void 0),a([A({type:Boolean})],t.prototype,"returnM",void 0),a([A({type:Boolean})],t.prototype,"returnZ",void 0),a([A({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),a([A({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),a([pe("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),a([A({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),a([A()],t.prototype,"sourceJSON",void 0),a([A({type:Ce,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),a([A({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),a([A({type:[gl],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),a([A({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),a([A({type:[String],readOnly:!0})],t.prototype,"uniqueIdFields",void 0),a([pe("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],t.prototype,"readUniqueIdFields",null),a([A(Ppe)],t.prototype,"url",null),a([ye("url")],t.prototype,"writeUrl",null),a([A({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),a([pe("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),a([A({readOnly:!0})],t.prototype,"isUrlHostModified",null),t=a([P("esri.layers.mixins.FeatureLayerBase")],t),t};let pc=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};a([A({type:String,json:{write:!0}})],pc.prototype,"expression",void 0),a([A({type:String,json:{write:!0}})],pc.prototype,"title",void 0),a([A({type:String,json:{write:!0}})],pc.prototype,"returnType",void 0),pc=a([P("esri.layers.support.ExpressionInfo")],pc);var jM,Of;let rs=(Of=class extends ee{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new jM({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:H(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},jM=Of,Of);a([A({type:Boolean,json:{write:!0}})],rs.prototype,"isAutoGenerated",void 0),a([A({type:String,json:{write:!0}})],rs.prototype,"name",void 0),a([A({type:String,json:{write:!0}})],rs.prototype,"alias",void 0),a([A({type:String,json:{write:!0}})],rs.prototype,"onStatisticField",void 0),a([A({type:pc,json:{write:!0}})],rs.prototype,"onStatisticExpression",void 0),a([A({type:String,json:{write:!0}})],rs.prototype,"statisticType",void 0),rs=jM=a([P("esri.layers.support.AggregateField")],rs);let Oc=class extends ee{constructor(){super(...arguments),this.type=null}};a([A({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Oc.prototype,"type",void 0),Oc=a([P("esri.layers.support.FeatureReduction")],Oc);const x4="__begin__",I4="__end__",Ofe=new RegExp(x4,"ig"),Pfe=new RegExp(I4,"ig"),a8=new RegExp("^"+x4,"i"),l8=new RegExp(I4+"$","i"),s_='"',Nfe=s_+" + ",Lfe=" + "+s_;function Dfe(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Ffe(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function M4(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Dfe(e.labelExpression),t.type="conventional"),t}function jfe(e){const t=M4(e);if(!t)return null;switch(t.type){case"conventional":return BM(t.expression);case"arcade":return t.expression}return null}function Bfe(e){const t=M4(e);if(!t)return null;switch(t.type){case"conventional":return Vfe(t.expression);case"arcade":return Gq(t.expression)}return null}function BM(e){let t;return e?(t=eh(e,(r=>x4+'$feature["'+r+'"]'+I4)),t=a8.test(t)?t.replace(a8,""):s_+t,t=l8.test(t)?t.replace(l8,""):t+s_,t=t.replaceAll(Ofe,Nfe).replaceAll(Pfe,Lfe)):t='""',t}const Ufe=/^\s*\{([^}]+)\}\s*$/i;function Vfe(e){const t=e==null?void 0:e.match(Ufe);return(t==null?void 0:t[1].trim())||null}const zfe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,Gfe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,qfe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Gq(e){if(!e)return null;let t=zfe.exec(e)||Gfe.exec(e);return t?t[1]||t[3]:(t=qfe.exec(e),t?t[2]:null)}var UM,Pf;let Bl=(Pf=class extends ee{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,r){return r.value?BM(r.value):t}writeExpression(t,r,i){this.value!=null&&(t=BM(this.value)),t!=null&&(r[i]=t)}clone(){return new UM({expression:this.expression,title:this.title,value:this.value})}},UM=Pf,Pf);a([A({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Bl.prototype,"expression",void 0),a([pe("expression",["expression","value"])],Bl.prototype,"readExpression",null),a([ye("expression")],Bl.prototype,"writeExpression",null),a([A({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Bl.prototype,"title",void 0),a([A({json:{read:!1,write:!1}})],Bl.prototype,"value",void 0),Bl=UM=a([P("esri.layers.support.LabelExpressionInfo")],Bl);var VM;const iw=new ct({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function sw(e,t,r){return{enabled:!pM(r==null?void 0:r.layer)}}function qq(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function Hfe(e){return(e==null?void 0:e.type)==="map-image"}function Hq(e){var t,r;return!!Hfe(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function Wfe(e){return qq(e)||Hq(e==null?void 0:e.layer)}var Nf;let lr=(Nf=class extends ee{static evaluateWhere(t,r){const i=(s,n,o)=>{switch(n){case"=":return s==o;case"<>":return s!=o;case">":return s>o;case">=":return s>=o;case"<":return s<o;case"<=":return s<=o}return!1};try{if(t==null)return!0;const s=t.split(" ");if(s.length===3)return i(r[s[0]],s[1],s[2]);if(s.length===7){const n=i(r[s[0]],s[1],s[2]),o=s[3],l=i(r[s[4]],s[5],s[6]);switch(o){case"AND":return n&&l;case"OR":return n||l}}return!1}catch{}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=jhe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,r){const i=r.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,r,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=Ffe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=Gq(this.labelExpressionInfo.expression);s&&(t="["+s+"]")}}t!=null&&(r[i]=t)}writeLabelExpressionInfo(t,r,i,s){if(t==null&&this.labelExpression!=null&&qq(s))t=new Bl({expression:this.getLabelExpressionArcade()});else if(!t)return;const n=t.toJSON(s);n.expression&&(r[i]=n)}writeMaxScale(t,r){(t||this.minScale)&&(r.maxScale=t)}writeMinScale(t,r){(t||this.maxScale)&&(r.minScale=t)}getLabelExpression(){return M4(this)}getLabelExpressionArcade(){return jfe(this)}getLabelExpressionSingleField(){return Bfe(this)}hash(){return JSON.stringify(this)}clone(){return new VM({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:H(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:H(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},VM=Nf,Nf);a([A({type:String,json:{write:!0}})],lr.prototype,"name",void 0),a([A({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:sw}}}}})],lr.prototype,"allowOverrun",void 0),a([A({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:sw}}}}})],lr.prototype,"deconflictionStrategy",void 0),a([A({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&Hq(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],lr.prototype,"labelExpression",void 0),a([pe("labelExpression")],lr.prototype,"readLabelExpression",null),a([ye("labelExpression")],lr.prototype,"writeLabelExpression",null),a([A({type:Bl,json:{write:{overridePolicy:(e,t,r)=>Wfe(r)?{allowNull:!0}:{enabled:!1}}}})],lr.prototype,"labelExpressionInfo",void 0),a([ye("labelExpressionInfo")],lr.prototype,"writeLabelExpressionInfo",null),a([A({type:iw.apiValues,json:{type:iw.jsonValues,read:iw.read,write:iw.write}})],lr.prototype,"labelPlacement",void 0),a([A({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],lr.prototype,"labelPosition",void 0),a([A({type:Number})],lr.prototype,"maxScale",void 0),a([ye("maxScale")],lr.prototype,"writeMaxScale",null),a([A({type:Number})],lr.prototype,"minScale",void 0),a([ye("minScale")],lr.prototype,"writeMinScale",null),a([A({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:sw}}}}})],lr.prototype,"repeatLabel",void 0),a([A({type:Number,cast:Rt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:sw}}}}})],lr.prototype,"repeatLabelDistance",void 0),a([A({types:tue,json:{origins:{"web-scene":{types:rue,write:BL,default:null}},write:BL,default:null}})],lr.prototype,"symbol",void 0),a([A({type:Boolean,json:{write:!0}})],lr.prototype,"useCodedValues",void 0),a([A({type:String,json:{write:!0}})],lr.prototype,"where",void 0),lr=VM=a([P("esri.layers.support.LabelClass")],lr);var zM;let Uo=zM=class extends ee{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new zM({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};a([A({type:String,json:{write:!0}})],Uo.prototype,"description",void 0),a([A({type:String,json:{write:!0}})],Uo.prototype,"label",void 0),a([A({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Uo.prototype,"minValue",void 0),a([A({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Uo.prototype,"maxValue",void 0),a([A(A4)],Uo.prototype,"symbol",void 0),Uo=zM=a([P("esri.renderers.support.ClassBreakInfo")],Uo);var GM;const Wq="log",O2="percent-of-total",P2="field",nw=new ct({esriNormalizeByLog:Wq,esriNormalizeByPercentOfTotal:O2,esriNormalizeByField:P2}),Qfe=Br(Uo);let Gr=GM=class extends om(xn){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map((s=>{const n=new Uo;return n.read(s,r),n.minValue==null&&(n.minValue=i),n.maxValue==null&&(n.maxValue=n.minValue),i=n.maxValue,n}))}writeClassBreakInfos(e,t,r,i){const s=e.map((n=>n.write({},i)));this._areClassBreaksConsecutive()&&s.forEach((n=>delete n.classMinValue)),t[r]=s}castField(e){return e==null?e:typeof e=="function"?(de.getLogger(this).error(".field: field must be a string value"),null):Uv(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&P2||r&&O2||null,t&&r&&de.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==P2&&e!==O2||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new Uo({minValue:e,maxValue:t,symbol:Kz(r)}):Qfe(H(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&de.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await jp()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void de.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const s=await jp(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((i,s)=>i+s.getMeshHash()),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new GM({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:H(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:H(this.visualVariables),legendOptions:H(this.legendOptions),authoringInfo:H(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map((i=>i.collectRequiredFields(e,t))),ls(e,t,this.valueExpression)];xs(e,t,this.field),xs(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=t??{},{valueExpression:l}=this;let p=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const m=n.arcadeUtils;if(!p){const _=m.createSyntaxTree(l);p=m.createFunction(_),this._compiledValueExpression.compiledFunction=p}this._compiledValueExpression.valueExpression=l;const v=m.executeFunction(p,m.createExecContext(e,m.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._getBreakIndexfromInfos(v)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let s=parseFloat(r[t]);if(i){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===Wq)s=Math.log(s)*Math.LOG10E;else if(i!==O2||n==null||isNaN(n)){if(i===P2&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};a([A(f4)],Gr.prototype,"backgroundFillSymbol",void 0),a([A({type:[Uo],json:{write:{isRequired:!0}}})],Gr.prototype,"classBreakInfos",void 0),a([pe("classBreakInfos")],Gr.prototype,"readClassBreakInfos",null),a([ye("classBreakInfos")],Gr.prototype,"writeClassBreakInfos",null),a([A({type:String,json:{write:!0}})],Gr.prototype,"defaultLabel",void 0),a([A(JS)],Gr.prototype,"defaultSymbol",void 0),a([A({type:String,json:{write:!0}})],Gr.prototype,"field",void 0),a([Ft("field")],Gr.prototype,"castField",null),a([A({type:Boolean})],Gr.prototype,"isMaxInclusive",void 0),a([A({type:m4,json:{write:!0}})],Gr.prototype,"legendOptions",void 0),a([A({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Gr.prototype,"minValue",null),a([A({type:String,json:{write:!0}})],Gr.prototype,"normalizationField",void 0),a([A({type:Number,json:{write:!0}})],Gr.prototype,"normalizationTotal",void 0),a([A({type:nw.apiValues,value:null,json:{type:nw.jsonValues,read:nw.read,write:nw.write}})],Gr.prototype,"normalizationType",null),a([Ne({classBreaks:"class-breaks"})],Gr.prototype,"type",void 0),a([A({type:String,json:{write:!0}})],Gr.prototype,"valueExpression",void 0),a([A({type:String,json:{write:!0}})],Gr.prototype,"valueExpressionTitle",void 0),Gr=GM=a([P("esri.renderers.ClassBreaksRenderer")],Gr);const qM=-3,Jfe=qM-1;var Ul;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Ul||(Ul={}));let Zfe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear()}register(t){this._users.set(t.id.slice(0,-1),t)}deregister(t){this.clear(t),this._sizeLimits.delete(t),this._users.delete(t.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){const i=this._db.get(t.id+r);return(i==null?void 0:i.size)??0}put(t,r,i,s,n){r=t.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,Ul.ALL)),s>this._maxSize)return void this._notifyRemove(r,i,s,Ul.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${r}`),void this._notifyRemove(r,i,0,Ul.ALL);const l=1+Math.max(n,Jfe)-qM;this._db.set(r,new Yfe(i,s,l)),this._size+=s,t.size+=s,this._checkSize()}updateSize(t,r,i,s){r=t.id+r;const n=this._db.get(r);if(n&&n.entry===i){for(this._size-=n.size,t.size-=n.size;s>this._maxSize;){const o=this._notifyRemove(r,i,s,Ul.SOME);if(!(o!=null&&o>0))return void this._db.delete(r);s=o}n.size=s,this._size+=s,t.size+=s,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i==null?void 0:i.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach(((o,l)=>{const p=o.lifetime;i[p]=(i[p]||0)+o.size,this._users.forEach((m=>{const{id:v,name:_}=m;if(l.startsWith(v)){const E=r[_]||0;r[_]=E+o.size}}))}));const s={};this._users.forEach((o=>{const l=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const p=r[l]||0;r[l]=p,s[l]=Math.round(100*o.hitRate)+"%"}else s[l]="0%"}));const n=Object.keys(r);n.sort(((o,l)=>r[l]-r[o])),n.forEach((o=>t[o]=Math.round(r[o]/2**20)+"MB / "+s[o]));for(let o=i.length-1;o>=0;--o){const l=i[o];l&&(t["Priority "+(o+qM-1)]=Math.round(l/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forEach((t=>t.resetHitRate()))}clear(t){const r=t.id;this._db.forEach(((i,s)=>{s.startsWith(r)&&(this._size-=i.size,this._db.delete(s),this._notifyRemove(s,i.entry,i.size,Ul.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,r)=>this._notifyRemove(r,t.entry,t.size,Ul.ALL))),this._users.forEach((t=>t.size=0)),this._size=0,this._db.clear()}*values(t){for(const[r,i]of this._db)r.startsWith(t.id)&&(yield i.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,s){var l;const n=(l=this._users.get(t.split(w3)[0]))==null?void 0:l.removeFunc,o=n==null?void 0:n(r,s,i);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach(((t,r)=>this._checkSizeLimits(t,r))),this._checkSizeLimits(this.maxSize)}setMaxSize(t,r){r==null||r<=0?this._sizeLimits.delete(t):this._sizeLimits.set(t,r)}_checkSizeLimits(t,r){const i=r??this;if(i.size<=t)return;const s=r==null?void 0:r.id;let n=!0;for(;n;){n=!1;for(const[o,l]of this._db)if(l.lifetime===0&&(!s||o.startsWith(s))){const p=r??this._users.get(o.split(w3)[0]);if(this._purgeItem(o,l,p),i.size<=.9*t)return;n||(n=this._db.has(o))}}for(const[o,l]of this._db)if(!s||o.startsWith(s)){const p=r??this._users.get(o.split(w3)[0]);if(this._purgeItem(o,l,p),i.size<=.9*t)return}}_purgeItem(t,r,i){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const s=this._notifyRemove(t,r.entry,r.size,Ul.SOME);s!=null&&s>0&&(this._size+=s,i&&(i.size+=s),r.lives=r.lifetime,r.size=s,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},Yfe=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}};const w3=":";let Kfe=class{constructor(t,r){this.removeFunc=r,this._storage=new Zfe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},u8=class Qq{static parse(t,r,i){const s=[],n=[],o=t.split(";");for(let l=0;l<o.length;l++){const p=o[l];if(p){if(p.includes("po:")){const m=p.slice(3).split("|");if(m.length===3){const[v,_,E]=m,$=e0e(v,_,E);$&&n.push($)}}else if(p.includes("|")){for(const m of p.split("|"))if(r.has(m)){s.push(m);break}}else if(r.has(p))s.push(p);else if(l===0){s.length=0,s.push(t0e(i));break}}}return new Qq(s,n)}constructor(t,r){this.partNames=t,this.overrides=r}};function Xfe(e,t){if(e==="DashTemplate")return t.split(" ").map((r=>Number(r)));if(e==="Color"){const r=new Ke(t).toRgba();return[r[0],r[1],r[2],255*r[3]]}return Number(t)}function e0e(e,t,r){return{primitiveName:e,propertyName:t,value:Xfe(t,r),defaultValue:null}}function t0e(e){switch(e){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}let Jq=class HM{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new Q(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new HM(this.major,this.minor,this._context)}static parse(t,r=""){const[i,s]=t.split("."),n=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!n.test(i))throw new Q((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(s!=null&&s.match)||!n.test(s))throw new Q((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),l=parseInt(s,10);return new HM(o,l,r)}};var Lf;let Ra=(Lf=class{},Lf.instance=new an("Etc/UTC"),Lf);function r0e(e){return e instanceof sh?e===Ra.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function sLe(e){return r0e(e)?Ra.instance:e}function i0e(e){return"timeZone"in e}function s0e(e){return"timeZone"in e}function n0e(e){return"dateFieldsTimeZone"in e}const o0e=new Map;let n_=class N2{static fromJSON(t){return new N2(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new N2(t.fields??[],d8(t))}static fromLayerJSON(t){return new N2(t.fields??[],d8(t))}constructor(t=[],r){var s;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const n of this.fields){const o=n==null?void 0:n.name,l=c8(o);if(o&&l){const p=tp(o);this._fieldsMap.set(o,n),this._fieldsMap.set(p,n),this._normalizedFieldsMap.set(l,n),i.push(`${p}:${n.type}:${(s=this._timeZoneByFieldName)==null?void 0:s.get(o)}`),fse(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):wU(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),G5(n)||q5(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)G5(t)||q5(t)||t.nullable||sse(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(tp(t))??this._normalizedFieldsMap.get(c8(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(de.getLogger("esri.layers.support.FieldsIndex").errorOnce(new Q("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),Uc):Zq.has(r.type)?Bc:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===Bc?Ra.instance:r===Uc?ii.utcInstance:rh(o0e,r,(()=>an.create(r))):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return mse(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;return((r=this.get(t))==null?void 0:r.name)??void 0}toJSON(){return{fields:this.fields.map((t=>Zg(t)?t.toJSON():t)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function tp(e){return e.trim().toLowerCase()}function c8(e){var t;return((t=Gie(e))==null?void 0:t.toLowerCase())??""}const Zq=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function d8(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:s}=e,n=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",l=n0e(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?Jw(e.dateFieldsTimeReference):null,p=s?i0e(s)?s.timeZone??l:s.dateFieldsTimeReference?Jw(s.dateFieldsTimeReference):l??Uc:null,m=i?s0e(i)?i.timeZone??l:i.timeReference?Jw(i.timeReference):l:null,v=new Map([[tp((s==null?void 0:s.creationDateField)??""),p],[tp((s==null?void 0:s.editDateField)??""),p],[tp(n),m],[tp(o),m]]);for(const{name:_,type:E}of e.fields)if(Zq.has(E))t.set(_,Bc);else if(E!=="date"&&E!=="esriFieldTypeDate")t.set(_,null);else if(r)t.set(_,Bc);else{const $=v.get(tp(_??""))??l;t.set(_,$)}return t}var mt;(function(e){e.AsyncNotEnabled="AsyncNotEnabled",e.ModulesNotSupported="ModulesNotSupported",e.CircularModules="CircularModules",e.CannotCompareDateAndTime="CannotCompareDateAndTime",e.NeverReach="NeverReach",e.UnsupportedHashType="UnsupportedHashType",e.InvalidParameter="InvalidParameter",e.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",e.UnexpectedToken="UnexpectedToken",e.Unrecognized="Unrecognized",e.UnrecognizedType="UnrecognizedType",e.MaximumCallDepth="MaximumCallDepth",e.BooleanConditionRequired="BooleanConditionRequired",e.TypeNotAllowedInFeature="TypeNotAllowedInFeature",e.KeyMustBeString="KeyMustBeString",e.WrongNumberOfParameters="WrongNumberOfParameters",e.CallNonFunction="CallNonFunction",e.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",e.NoFunctionInDictionary="NoFunctionInDictionary",e.NoFunctionInArray="NoFunctionInArray",e.AssignModuleFunction="AssignModuleFunction",e.LogicExpressionOrAnd="LogicExpressionOrAnd",e.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",e.FunctionNotFound="FunctionNotFound",e.InvalidMemberAccessKey="InvalidMemberAccessKey",e.UnsupportedUnaryOperator="UnsupportUnaryOperator",e.InvalidIdentifier="InvalidIdentifier",e.MemberOfNull="MemberOfNull",e.UnsupportedOperator="UnsupportedOperator",e.Cancelled="Cancelled",e.ModuleAccessorMustBeString="ModuleAccessorMustBeString",e.ModuleExportNotFound="ModuleExportNotFound",e.Immutable="Immutable",e.OutOfBounds="OutOfBounds",e.IllegalResult="IllegalResult",e.FieldNotFound="FieldNotFound",e.PortalRequired="PortalRequired",e.LogicError="LogicError",e.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",e.KeyAccessorMustBeString="KeyAccessorMustBeString",e.WrongSpatialReference="WrongSpatialReference",e.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",e.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(mt||(mt={}));const Yq={[mt.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[mt.LogicError]:"Logic error - {reason}",[mt.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[mt.NeverReach]:"Encountered unreachable logic",[mt.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[mt.ModuleAccessorMustBeString]:"Module accessor must be a string",[mt.ModuleExportNotFound]:"Module has no export with provided identifier",[mt.ModulesNotSupported]:"Current profile does not support modules",[mt.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[mt.FunctionNotFound]:"Function not found",[mt.FieldNotFound]:"Key not found - {key}",[mt.CircularModules]:"Circular module dependencies are not allowed",[mt.Cancelled]:"Execution cancelled",[mt.UnsupportedHashType]:"Type not supported in hash function",[mt.IllegalResult]:"Value is not a supported return type",[mt.PortalRequired]:"Portal is required",[mt.InvalidParameter]:"Invalid parameter",[mt.WrongNumberOfParameters]:"Call with wrong number of parameters",[mt.Unrecognized]:"Unrecognized code structure",[mt.UnrecognizedType]:"Unrecognized type",[mt.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[mt.BooleanConditionRequired]:"Conditions must use booleans",[mt.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[mt.NoFunctionInArray]:"Arrays cannot contain functions.",[mt.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[mt.KeyAccessorMustBeString]:"Accessor must be a string",[mt.KeyMustBeString]:"Object keys must be a string",[mt.Immutable]:"Object is immutable",[mt.UnexpectedToken]:"Unexpected token",[mt.MemberOfNull]:"Cannot access property of null object",[mt.MaximumCallDepth]:"Exceeded maximum function depth",[mt.OutOfBounds]:"Out of bounds",[mt.InvalidIdentifier]:"Identifier not recognized",[mt.CallNonFunction]:"Expression is not a function",[mt.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[mt.AssignModuleFunction]:"Cannot assign function to module variable",[mt.UnsupportedUnaryOperator]:"Unsupported unary operator",[mt.UnsupportedOperator]:"Unsupported operator",[mt.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[mt.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[mt.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[mt.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[mt.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};let a0e=class extends Error{constructor(...t){super(...t)}},p8=class Kq extends a0e{constructor(t,r){super(C4(r)+t.message,{cause:t}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,Kq),r!=null&&r.loc&&(this.loc=r.loc)}},l0e=class Xq extends Error{constructor(t,r,i,s){super("Execution error - "+C4(i)+eh(Yq[r],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,Xq),i!=null&&i.loc&&(this.loc=i.loc)}};function C4(e){var t,r;return e&&e.loc?`Line : ${(t=e.loc.start)==null?void 0:t.line}, ${(r=e.loc.start)==null?void 0:r.column}: `:""}let oLe=class eH extends Error{constructor(t,r,i,s){super("Compilation error - "+C4(i)+eh(Yq[r],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,eH),i!=null&&i.loc&&(this.loc=i.loc)}},aLe=class tH extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,tH)}};function lLe(e,t,r){return r.declaredRootClass==="esri.arcade.arcadeexecutionerror"||r.declaredRootClass==="esri.arcade.arcadecompilationerror"?r.loc===null&&(t!=null&&t.loc)?new p8(r,{cause:r}):r:(r.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||r.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||r.declaredRootClass,t!=null&&t.loc?new p8(r,{cause:r}):r)}var o_;(function(e){e.UnrecognizedUri="UnrecognizedUri",e.UnsupportedUriProtocol="UnsupportedUriProtocol"})(o_||(o_={}));const u0e={[o_.UnrecognizedUri]:"Unrecognized uri - {uri}",[o_.UnsupportedUriProtocol]:"Unrecognized uri protocol"};let uLe=class rH extends Error{constructor(t,r){super(eh(u0e[t],r)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,rH)}};function L2(e){return e.toLowerCase().replaceAll(/[\s-]+/g,"")}let cLe=class{constructor(t,r){const i=new Map;for(const s of t){const n=L2(s);if(i.has(n))throw new Error(`${s} already added as ${i.get(n)}`);i.set(n,s)}if(r!=null)for(const[s,n]of r){const o=L2(s);if(i.has(o))throw new Error(`${s} already associated with ${i.get(o)}`);i.set(o,n)}this._enumMap=i}lookup(t){return this._enumMap.get(L2(t))}get(t){const r=this.lookup(t);if(r==null)throw new l0e(null,mt.InvalidParameter,null);return r}};var a_;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(a_||(a_={}));const c0e={[a_.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let d0e=class iH extends Error{constructor(t,r){super(eh(c0e[t],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,iH)}};function Th(e,t,r){return e<t?e-t:e>r?e-r:0}function $h(e,t,r){return e<t?t:e>r?r:e}let iu=class Vr{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,r=1,i=1,s=0,n=0,o=0,l=0,p){if(isNaN(t)||isNaN(r)||isNaN(i)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(l))return null;const m=Pe.local(t,r).daysInMonth;let v=Pe.fromObject({day:$h(i,1,m),year:t,month:$h(r,1,12),hour:$h(s,0,23),minute:$h(n,0,59),second:$h(o,0,59),millisecond:$h(l,0,999)},{zone:Ta(p)});return v=v.plus({months:Th(r,1,12),days:Th(i,1,m),hours:Th(s,0,23),minutes:Th(n,0,59),seconds:Th(o,0,59),milliseconds:Th(l,0,999)}),new Vr(v)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,r){const i=Ta(r);return t.isUnknownTimeZone||i===Ra.instance?Vr.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,i):new Vr(t._date.setZone(i))}static dateJSToArcadeDate(t){return new Vr(Pe.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,r="system"){const i=Ta(r);return new Vr(Pe.fromJSDate(t,{zone:i}))}static unknownEpochToArcadeDate(t){return new Vr(Pe.fromMillis(t,{zone:Ra.instance}))}static unknownDateJSToArcadeDate(t){return new Vr(Pe.fromMillis(t.getTime(),{zone:Ra.instance}))}static epochToArcadeDate(t,r="system"){const i=Ta(r);return new Vr(Pe.fromMillis(t,{zone:i}))}static dateTimeToArcadeDate(t){return new Vr(t)}clone(){return new Vr(this._date)}changeTimeZone(t){const r=Ta(t);return Vr.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(t,r){const i=Ta(r);return t.zone===Ra.instance||i===Ra.instance?Vr.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,i):new Vr(t.setZone(i))}static nowToArcadeDate(t){const r=Ta(t);return new Vr(Pe.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new Vr(Pe.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Vr.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===Ra.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new Vr(this._date.plus(t))}diff(t,r){return this._date.diff(t._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,r){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(t,r){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Vr(this._date.toUTC())}toLocal(){return new Vr(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const r=Pe.fromISO(t,{setZone:!0});return new Vr(r)}};function Ta(e,t=!0){if(e instanceof sh)return e;switch(L2(e)){case"system":return"system";case"utc":return"UTC";case"unknown":return Ra.instance}if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const i=ii.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(i)return i}const r=an.create(e);if(!r.isValid){if(t)throw new d0e(a_.TimeZoneNotRecognized);return null}return r}function h8(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const r=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const i of e.match(r)||[])switch(i){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=i;break;default:i.length>=2&&i.slice(0,1)==="["&&i.slice(-1)==="]"?t+=`'${i.slice(1,-1)}'`:t+=`'${i}'`}return t}const A8="esri.core.sql.dateonly";let p0e=class mn{constructor(t,r,i){this._year=t,this._month=r,this._day=i,this.declaredRootClass=A8}static isDateOnly(t){return typeof t=="object"&&t!=null&&"declaredRootClass"in t&&t.declaredRootClass===A8}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(t){return mn.isDateOnly(t)&&t.day===this.day&&t.month===this.month&&t.year===this.year}clone(){return new mn(this._year,this._month,this._day)}toDateTime(t){return Pe.fromObject({day:this.day,month:this.month,year:this.year},{zone:Ta(t)})}toDateTimeLuxon(t){return Pe.fromObject({day:this.day,month:this.month,year:this.year},{zone:Ta(t)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(t=null,r=!0){if(t===null||t==="")return this.toString();if(r&&(t=h8(t)),!t)return"";const i=this.toDateTime("unknown");return iu.dateTimeToArcadeDate(i).toFormat(t,{locale:sn(),numberingSystem:"latn"})}toArcadeDate(){const t=this.toDateTime("unknown");return iu.dateTimeToArcadeDate(t)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(t,r){return mn.fromDateTime(this.toUTCDateTime().plus({[t]:r}))}toUTCDateTime(){return Pe.utc(this.year,this.month,this.day,0,0,0,0)}difference(t,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}static fromMilliseconds(t){const r=Pe.fromMillis(t,{zone:ii.utcInstance});return r.isValid?mn.fromParts(r.year,r.month,r.day):null}static fromSeconds(t){const r=Pe.fromSeconds(t,{zone:ii.utcInstance});return r.isValid?mn.fromParts(r.year,r.month,r.day):null}static fromReader(t){if(!t)return null;const r=t.split("-");return r.length!==3?null:new mn(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10))}static fromParts(t,r,i){const s=new mn(t,r,i);return s.isValid===!1?null:s}static fromDateJS(t){return mn.fromParts(t.getFullYear(),t.getMonth()+1,t.getDay())}static fromDateTime(t){return mn.fromParts(t.year,t.month,t.day)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,r=null){if(t===""||t===null)return null;const i=[];if(r)(r=h8(r))&&i.push(r);else if(r===null||r===""){const s=Pe.fromISO(t,{setZone:!0});return s.isValid?mn.fromParts(s.year,s.month,s.day):null}for(const s of i){const n=Pe.fromFormat(t,r??s);if(n.isValid)return new mn(n.year,n.month,n.day)}return null}static fromNow(t="system"){const r=Pe.fromJSDate(new Date).setZone(Ta(t));return new mn(r.year,r.month,r.day)}};function pLe(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new At({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function hLe(e){if(e==null)return null;const t=e.clone();return e.cache._geVersion!==void 0&&(t.cache._geVersion=e.cache._geVersion),t}function ow(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function f8(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let r="";for(const i of e.match(t)||[])switch(i){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":r+=i;break;case"A":case"a":r+="a";break;default:r+=`'${i}'`}return r}const m8="esri.core.sql.timeonly";let h0e=class ca{constructor(t,r,i,s){this._hour=t,this._minute=r,this._second=i,this._millisecond=s,this.declaredRootClass=m8}static isTimeOnly(t){return typeof t=="object"&&t!=null&&"declaredRootClass"in t&&t.declaredRootClass===m8}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(t){return ca.isTimeOnly(t)&&t.hour===this.hour&&t.minute===this.minute&&t.second===this.second&&t.millisecond===this.millisecond}clone(){return new ca(this.hour,this.minute,this.second,this.millisecond)}isValid(){return ow(this.hour)&&ow(this.minute)&&ow(this.second)&&ow(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(t=null){return t===null||t===""?this.toString():(t=f8(t))?Pe.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(t,{locale:sn(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(t,r,i,s){const n=new ca(t,r,i,s);return n.isValid()?n:null}static fromReader(t){if(!t)return null;const r=t.split(":");return r.length!==3?null:new ca(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),0)}static fromMilliseconds(t){if(t>864e5||t<0)return null;const r=Math.floor(t/1e3%60),i=Math.floor(t/6e4%60),s=Math.floor(t/36e5%24),n=Math.floor(t%1e3);return new ca(s,i,r,n)}static fromDateJS(t){return new ca(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static fromDateTime(t){return new ca(t.hour,t.minute,t.second,t.millisecond)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,r=null){if(t===""||t===null)return null;const i=[];r?(r=f8(r))&&i.push(r):r!==null&&r!==""||(i.push("HH:mm:ss"),i.push("HH:mm:ss.SSS"),i.push("hh:mm:ss a"),i.push("hh:mm:ss.SSS a"),i.push("HH:mm"),i.push("hh:mm a"),i.push("H:mm"),i.push("h:mm a"),i.push("H:mm:ss"),i.push("h:mm:ss a"),i.push("H:mm:ss.SSS"),i.push("h:mm:ss.SSS a"));for(const s of i){const n=Pe.fromFormat(t,s);if(n.isValid)return new ca(n.hour,n.minute,n.second,n.millisecond)}return null}plus(t,r){switch(t){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return ca.fromDateTime(this.toUTCDateTime().plus({[t]:r}))}return null}toUTCDateTime(){return Pe.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(t,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}};const A0e=["geometry","scale","timeProperties"];function ALe(e,t){if(t!=null)for(const r of A0e)t.hasArcadeDependency(r)&&e.add(r);return e}function fLe(e,t){return sH.create(e,t,null,["$feature","$view"])}function f0e(e,t,r){return sH.create(e,t,r,["$feature","$view","$config"])}let sH=class nH{static async create(t,r,i,s){const{arcade:n,Dictionary:o}=await jp();let l;try{l=n.parseScript(t)}catch($){throw new Q("arcade-bad-expression","Failed to parse arcade script",{script:t,error:$})}const p=n.scriptUsesGeometryEngine(l);p&&await n.enableGeometrySupport(),await n.loadDependentModules(new Set,l,null,!1,p);const m={vars:s.reduce((($,M)=>({...$,[M]:null})),{}),spatialReference:r,useAsync:!1},v=n.compileScript(l,m);let _=null;i!=null&&(_=new o(i),_.immutable=!0);const E=new o;return E.immutable=!1,E.setField("scale",0),new nH(t,n,l,v,r,E,_,o)}constructor(t,r,i,s,n,o,l,p){this.script=t,this._arcade=r,this._syntaxTree=i,this._compiled=s,this._spatialReference=n,this._viewDict=o,this._configDict=l,this._dictionaryCtor=p,this._dependencies=new Map,this._featureReader=new oH,this._dependencies.set("geometry",r.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(t,r){var s;const i=(s=r.$view)==null?void 0:s.timeZone;if(r.$view){let n;if(this._viewDict.setField("scale",r.$view.scale),r.$view.timeProperties!=null){const{currentStart:o,currentEnd:l}=r.$view.timeProperties;n=new this._dictionaryCtor({currentStart:o!=null?i!=null?iu.epochToArcadeDate(o,i):iu.unknownEpochToArcadeDate(o):void 0,currentEnd:l!=null?i!=null?iu.epochToArcadeDate(l,i):iu.unknownEpochToArcadeDate(l):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",n)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:t},spatialReference:this._spatialReference,timeZone:i})}repurposeFeature(t,r){return this._featureReader.bind(t,r,this._spatialReference),this._featureReader}references(t){return this._dependencies.get(t)??!1}},oH=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(t,r,i){const s=r??new n_(aH(t.attributes));this._boundTarget=t,this._boundSchema.fields=s.fields,this._boundSchema.fieldsIndex=s,this._boundSchema.spatialReference=i}_getField(t){return this._boundSchema.fieldsIndex.get(t)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(t){this._contextTimeZone=t}readArcadeFeature(){return this}hasField(t){return this._boundSchema.fieldsIndex.has(t)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const t=Ya(this._boundTarget.geometry);if(t){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");t.spatialReference=this._boundSchema.spatialReference}return t}isUnknownDateTimeField(t){return this._boundSchema.fieldsIndex.getTimeZone(t)===Bc}field(t,r=!0){const i=this._getField(t);if(i){const s=this._boundTarget.attributes[i.name];if(s==null)return null;switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return p0e.fromReader(s);case"time-only":case"esriFieldTypeTimeOnly":return h0e.fromReader(s);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return iu.fromReaderAsTimeStampOffset(s);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(t)?iu.unknownEpochToArcadeDate(s):iu.epochToArcadeDate(s,this.contextTimeZone??ao);default:return s}}if(r)throw new Error(`Field ${t} does not exist`);return null}setField(t,r){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map((t=>t.name))}castToText(t=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(t=null){var r;return{attributes:this._boundTarget.attributes,geometry:(t==null?void 0:t.keepGeometryType)===!0?this.geometry():((r=this.geometry())==null?void 0:r.toJSON())??null}}castAsJsonAsync(t=null,r=null){return Promise.resolve(this.castAsJson(r))}};function aH(e){const t=[];for(const r in e)t.push({name:r,alias:r,type:typeof e[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return t}let m0e=class lH{static async from(t,r,i){const s=t.dictionary_version?Jq.parse(t.dictionary_version):null,n=new Set(t.itemsNames),o={};if(r)for(const _ in r)o[_]=r[_];if(t.authoringInfo.configuration)for(const _ of t.authoringInfo.configuration)o.hasOwnProperty(_.name)||(o[_.name]=_.value);const l=new Set(t.authoringInfo.symbol);for(const _ of Object.keys(i))l.delete(_);l.size&&de.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:l});const p=await f0e(t.expression,null,o);if(!p)throw new Q("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const m=!s||!s.greaterEqual(4,0);m&&de.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:s});const v=new y0e(i,m);return new lH(m,n,p,v)}constructor(t,r,i,s){this._requiresFieldCoercionToString=t,this._itemNames=r,this._compiled=i,this._reader=s}get itemNames(){return this._itemNames}evaluate(t,r,i,s){try{return this._reader.bind(t,i,s),this._compiled.evaluate(this._reader,{$view:{scale:r}})}catch(n){de.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:n})}return null}createDictionaryFieldsIndex(t){if(!this._requiresFieldCoercionToString)return new n_(t);const r=t.map((i=>({...i,type:"esriFieldTypeString"})));return new n_(r)}},y0e=class extends oH{constructor(t,r){super(),this._fieldMap=t,this._requiresFieldCoercionToString=r}_getField(t){const r=this._fieldMap[t]??t;return this._boundSchema.fieldsIndex.get(r)}field(t){if(!this._requiresFieldCoercionToString)return super.field(t,!1);const r=this._getField(t);return r==null||this._boundTarget.attributes[r.name]==null?"":""+this._boundTarget.attributes[r.name]}};var y8,g8,v8,w8,b8,_8,S8,E8,T8,$8,WM,QM,x8,I8,M8,C8,k8,R8,O8,P8,N8,L8,D8,F8,j8,B8,U8,V8,z8,G8,q8,H8,W8,Q8,J8,Z8,Y8,K8,X8,e6,t6,r6,i6,s6,n6,o6,a6,l6,u6,c6,d6,p6,h6,A6,f6,l_,m6,y6,g6,v6,w6,b6,_6;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(y8||(y8={})),(function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"})(g8||(g8={})),(function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"})(v8||(v8={})),(function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"})(w8||(w8={})),(function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"})(b8||(b8={})),(function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"})(_8||(_8={})),(function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"})(S8||(S8={})),(function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"})(E8||(E8={})),(function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"})(T8||(T8={})),(function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"})($8||($8={})),(function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"})(WM||(WM={})),(function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"})(QM||(QM={})),(function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"})(x8||(x8={})),(function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"})(I8||(I8={})),(function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"})(M8||(M8={})),(function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"})(C8||(C8={})),(function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"})(k8||(k8={})),(function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"})(R8||(R8={})),(function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"})(O8||(O8={})),(function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"})(P8||(P8={})),(function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"})(N8||(N8={})),(function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"})(L8||(L8={})),(function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"})(D8||(D8={})),(function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"})(F8||(F8={})),(function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"})(j8||(j8={})),(function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"})(B8||(B8={})),(function(e){e.Fast="Fast",e.Accurate="Accurate"})(U8||(U8={})),(function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"})(V8||(V8={})),(function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"})(z8||(z8={})),(function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"})(G8||(G8={})),(function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"})(q8||(q8={})),(function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"})(H8||(H8={})),(function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"})(W8||(W8={})),(function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AlongLine=1]="AlongLine"})(Q8||(Q8={})),(function(e){e[e.Auto=0]="Auto",e[e.Clockwise=1]="Clockwise",e[e.Counterclockwise=2]="Counterclockwise"})(J8||(J8={})),(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"})(Z8||(Z8={})),(function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"})(Y8||(Y8={})),(function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"})(K8||(K8={})),(function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"})(X8||(X8={})),(function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"})(e6||(e6={})),(function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"})(t6||(t6={})),(function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"})(r6||(r6={})),(function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"})(i6||(i6={})),(function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(s6||(s6={})),(function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"})(n6||(n6={})),(function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"})(o6||(o6={})),(function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"})(a6||(a6={})),(function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"})(l6||(l6={})),(function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"})(u6||(u6={})),(function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"})(c6||(c6={})),(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(d6||(d6={})),(function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"})(p6||(p6={})),(function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"})(h6||(h6={})),(function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"})(A6||(A6={})),(function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(f6||(f6={})),(function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"})(l_||(l_={})),(function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"})(m6||(m6={})),(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(y6||(y6={})),(function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"})(g6||(g6={})),(function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"})(v6||(v6={})),(function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"})(w6||(w6={})),(function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"})(b6||(b6={})),(function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"})(_6||(_6={}));const g0e={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},JM={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:l_.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:l_.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:WM.Loop,repeatdelay:0,easing:QM.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function v0e(e){return typeof e=="function"}function gLe(e,t,r,i){return v0e(e)?e(t,r,i):e}function vLe(e){return[e.r,e.g,e.b,e.a]}const w0e=` /-,
`;function S6(e){let t=e.length;for(;t--;)if(!w0e.includes(e.charAt(t)))return!1;return!0}function wLe(e,t){const r=[];let i=0,s=-1;do if(s=e.indexOf("[",i),s>=i){if(s>i){const n=e.slice(i,s);r.push([n,null,S6(n)])}if(i=s+1,s=e.indexOf("]",i),s>=i){if(s>i){const n=t[e.slice(i,s)];n&&r.push([null,n,!1])}i=s+1}}while(s!==-1);if(i<e.length){const n=e.slice(i);r.push([n,null,S6(n)])}return r}function bLe(e,t,r){let i="",s=null;for(const n of t){const[o,l,p]=n;if(o!=null&&o!=="")p?s=o:(s!=null&&(i+=s,s=null),i+=o);else{const m=e.readAttribute(l);m!=null&&m!==""&&(s!==null&&(i+=s,s=null),i+=m)}}return uH(i,r)}function _Le(e,t,r,i){let s="",n=null;for(const o of t){const[l,p,m]=o;if(l!=null&&l!=="")m?n=l:(n!=null&&(s+=n,n=null),s+=l);else{let v=p;r!=null&&(v=x0e(p,r));const _=e.attributes[v];_!=null&&_!==""&&(n!=null&&(s+=n,n=null),s+=_)}}return uH(s,i)}function uH(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function SLe(e,t,r,i,s,n,o=!0){const l=t/s,p=r/n,m=Math.ceil(l/2),v=Math.ceil(p/2);for(let _=0;_<n;_++)for(let E=0;E<s;E++){const $=4*(E+(o?n-_-1:_)*s);let M=0,k=0,N=0,U=0,G=0,W=0,Z=0;const ie=(_+.5)*p;for(let ne=Math.floor(_*p);ne<(_+1)*p;ne++){const ge=Math.abs(ie-(ne+.5))/v,we=(E+.5)*l,xe=ge*ge;for(let Ie=Math.floor(E*l);Ie<(E+1)*l;Ie++){let $e=Math.abs(we-(Ie+.5))/m;const Re=Math.sqrt(xe+$e*$e);Re>=-1&&Re<=1&&(M=2*Re*Re*Re-3*Re*Re+1,M>0&&($e=4*(Ie+ne*t),Z+=M*e[$e+3],N+=M,e[$e+3]<255&&(M=M*e[$e+3]/250),U+=M*e[$e],G+=M*e[$e+1],W+=M*e[$e+2],k+=M))}}i[$]=U/k,i[$+1]=G/k,i[$+2]=W/k,i[$+3]=Z/N}}function b0e(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function ELe(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function TLe(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function $Le(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function xLe(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function _0e(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const ILe=(e,t=0)=>e==null||isNaN(e)?t:e,MLe=(e,t)=>e??t,CLe=(e,t)=>e??t,kLe=e=>e.tintColor?b0e(e.tintColor):[255,255,255,1],RLe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function OLe(){return ce(()=>import("./geometryEngineJSON-DGETChXf.js").then(e=>e.g),__vite__mapDeps([39,40,41,42,43]),import.meta.url)}function PLe(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function NLe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function LLe(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function DLe(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function E6(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=E6(t);if(r!=null)return r}break;case"CIMTextSymbol":return E6(e.symbol);case"CIMSolidFill":return e.color}return null}function T6(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const r of t){const i=T6(r);if(i!=null)return i}break}case"CIMTextSymbol":return T6(e.symbol);case"CIMSolidStroke":return e.color}}function FLe(e){for(const t of e)if(t.enable)switch(t.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function $6(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=$6(t);if(r!==void 0)return r}break;case"CIMTextSymbol":return $6(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function jLe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function BLe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function ULe(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"})))}const VLe=e=>e.includes("data:image/svg+xml");function zLe(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function KS(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function GLe(e,t,r,i,s,n,o=!0){const{infos:l}=n;let p=1,m=0,v=0,_=0,E=1;for(const{absoluteAnchorPoint:k,offsetX:N,offsetY:U,rotation:G,size:W,frameHeight:Z,rotateClockWise:ie,scaleSymbolsProportionally:ne}of l)E=k?1:p,v=I6(N,U,m,E,v),_=x6(N,U,m,E,_),Z&&(ne||o)&&(p*=W/Z),m=M6(G,ie,m);const $=I6(i,s,m,E,v),M=x6(i,s,m,E,_);return{size:e*p,rotation:M6(t,r,m),offsetX:$,offsetY:M}}function S0e(e){if(e==null)return!1;if(Array.isArray(e))return e.every((t=>S0e(t)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function E0e(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...g0e[t]];const r=JM[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function T0e(e){return e.split(" ").map((t=>Number(t)))}function $0e(e){return typeof e=="string"?T0e(e):e}function qLe(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=$0e(e.dashTemplate)),e}function ZM(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return ZM(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return ZM(r.symbol)}}return"Normal"}function HLe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??JM.CIMVectorMarker.size;i>t&&(t=i);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>t&&(t=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&_0e(r.markerPlacement)){const i=r.size??JM.CIMVectorMarker.size;i>t&&(t=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>t&&(t=i)}}}return t}}}function x0e(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function WLe(e){return e.map((t=>({...t,propertyName:KS(t.propertyName)})))}function QLe(e){const t={};for(const r in e){const i=e[r];t[KS(r)]=i}return t}function x6(e,t,r,i,s){const n=r*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*e+o*t)*i+s}return t*i+s}function I6(e,t,r,i,s){const n=r*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*t)*i+s:e*i+s}function M6(e,t,r){return t?r-e:r+e}function JLe(e,t,r){const i=r==="Color"||r==="TintColor"||r==="ToColor",s=r==="Rotation"||r==="Angle"||r==="ToRotation";let n=t[KS(r)];if(n!=null&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=E0e(t.type,r.toLowerCase()),n!=null&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),t.primitiveName!=null){const o=e[t.primitiveName];if(o!=null){const l=o[r];l==null||(typeof l=="string"||typeof l=="number"||Array.isArray(l)?(n=l,n!=null&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:l,defaultValue:n},n!=null&&(i?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return n}function ZLe(e,t,r){if(t[KS(r)]!=null)return!0;if(t.primitiveName!=null){const i=e[t.primitiveName];if(i!=null&&i[r]!=null)return!0}return!1}function YLe(e,t){return Math.max(Math.min((e??t)/100,1),0)}const I0e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let cH=class{constructor(t,r,i,s){this.url=t,this.fieldMap=i,this.dictionaryInfo=s,this._symbolPartCache=new Kfe(100);const n=async()=>m0e.from(await s,r,i);this._evaluator=n()}async getSymbolAsync(t,r,i=!0){var _;const s=await this._evaluator,n=(r==null?void 0:r.fields)??aH(t.attributes),o=s.createDictionaryFieldsIndex(n),l=s.evaluate(t,(r==null?void 0:r.scale)??0,o,r==null?void 0:r.spatialReference);if(l==null)return null;const p=em(t.geometry),m=u8.parse(l,s.itemNames,p),v=p==="esriGeometryPoint"&&!((_=t.geometry)!=null&&_.hasZ);return await this._cimPartsToCIMSymbol(t,m.partNames,m.overrides,v,r,i,o)}async getSymbolForControlString(t,r,i){const s=await this._evaluator,n=u8.parse(t,s.itemNames,r),o=r==="esriGeometryPoint"&&!i,l=C6(await Promise.all(n.partNames.map((p=>this._getSymbolPart(p)))),n.overrides,o);return new is({data:l})}async _cimPartsToCIMSymbol(t,r,i,s,n,o,l){const p=r.map((_=>this._getSymbolPart(_,n)));let m=await Promise.all(p);if(o&&this.fieldMap&&m.length>0){const{OverrideHelper:_}=await ce(()=>import("./OverrideHelper-CIdCg6FM.js").then(E=>E.O),__vite__mapDeps([174,130,34]),import.meta.url);m=H(m);for(const E of m)_.applyDictionaryTextOverrides(E,t,this.fieldMap,l,ZM(E))}const v=C6(m,i,s);return new is({data:v})}async _fetchSymbolPart(t,r){const i=await this.dictionaryInfo,s=(this.url+"/"+i.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,t),{data:n}=await Nt(s,{responseType:"json",query:{f:"json"},...r});return n}async _getSymbolPart(t,r){let i=this._symbolPartCache.get(t);return i||(i=this._fetchSymbolPart(t,r),this._symbolPartCache.put(t,i)),i}};function C6(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.effects=null,i.symbolLayers=[];for(const s of e){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);i.symbolLayers.unshift(...n.symbolLayers)}}return r&&(i.callout=I0e),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var YM;let Co=YM=class extends om(xn){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const e=this.getDictionaryInfo();return new cH(this.url,this.config,this.fieldMap??{},e)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new YM({config:H(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:H(this.fieldMap),url:H(this.url),visualVariables:H(this.visualVariables)})}async getSymbolAsync(e,t,r=!0){return this._loader.getSymbolAsync(e,t,r)}async getSymbolForControlString(e,t,r){return this._loader.getSymbolForControlString(e,t,r)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await ls(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:e}=await Nt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return e}};a([A({type:cH})],Co.prototype,"_loader",null),a([A({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Co.prototype,"config",void 0),a([A({type:Object,json:{write:!0}})],Co.prototype,"fieldMap",void 0),a([A({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Co.prototype,"scaleExpression",void 0),a([ye("scaleExpression")],Co.prototype,"writeData",null),a([A({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Co.prototype,"scaleExpressionTitle",void 0),a([A({type:String,json:{write:!0}})],Co.prototype,"url",void 0),a([ye("visualVariables")],Co.prototype,"writeVisualVariables",null),Co=YM=a([P("esri.renderers.DictionaryRenderer")],Co);var KM;let vl=KM=class extends ee{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(de.getLogger(this).error(".field: field must be a string value"),null):Uv(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new KM({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};a([A({type:Ke,json:{type:[Number],write:!0}})],vl.prototype,"color",void 0),a([A({type:String,json:{write:!0}})],vl.prototype,"field",void 0),a([Ft("field")],vl.prototype,"castField",null),a([A({type:String,json:{write:!0}})],vl.prototype,"label",void 0),a([A({type:String,json:{write:!0}})],vl.prototype,"valueExpression",void 0),a([A({type:String,json:{write:!0}})],vl.prototype,"valueExpressionTitle",void 0),vl=KM=a([P("esri.renderers.support.AttributeColorInfo")],vl);const dH=vl;var XM;let D2=XM=class extends ee{constructor(){super(...arguments),this.unit=null}clone(){return new XM({unit:this.unit})}};a([A({type:String,json:{write:!0}})],D2.prototype,"unit",void 0),D2=XM=a([P("esri.renderers.support.DotDensityLegendOptions")],D2);const M0e=D2;var eC;let Fs=eC=class extends om(xn){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Ke([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Qr,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new En({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce(((t,r)=>t+r.getAttributeHash()),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new eC({attributes:H(this.attributes),backgroundColor:H(this.backgroundColor),dotBlendingEnabled:H(this.dotBlendingEnabled),dotShape:H(this.dotShape),dotSize:H(this.dotSize),dotValue:H(this.dotValue),legendOptions:H(this.legendOptions),outline:H(this.outline),referenceScale:H(this.referenceScale),seed:H(this.seed),visualVariables:H(this.visualVariables),authoringInfo:H(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map((r=>r.field||r.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await ls(e,t,r.valueExpression),r.field&&e.add(r.field)}};a([A({type:[dH],json:{write:!0}})],Fs.prototype,"attributes",void 0),a([A({type:Ke,json:{write:!0}})],Fs.prototype,"backgroundColor",void 0),a([A({type:Boolean,json:{write:!0}})],Fs.prototype,"dotBlendingEnabled",void 0),a([A({type:String,json:{write:!1}})],Fs.prototype,"dotShape",void 0),a([A({type:Number,json:{write:!0}})],Fs.prototype,"dotSize",void 0),a([A({type:M0e,json:{write:!0}})],Fs.prototype,"legendOptions",void 0),a([A({type:Qr,json:{default:null,write:!0}})],Fs.prototype,"outline",void 0),a([A({type:Number,json:{write:!0}})],Fs.prototype,"dotValue",void 0),a([A({type:Number,json:{write:!0}})],Fs.prototype,"referenceScale",void 0),a([A({type:Number,json:{write:!0}})],Fs.prototype,"seed",void 0),a([Ne({dotDensity:"dot-density"})],Fs.prototype,"type",void 0),Fs=eC=a([P("esri.renderers.DotDensityRenderer")],Fs);var tC;let Ec=tC=class extends ee{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new tC({color:this.color&&this.color.clone(),ratio:this.ratio})}};a([A({type:Ke,json:{type:[Et],default:null,write:{isRequired:!0}}})],Ec.prototype,"color",void 0),a([A({type:Number,json:{write:{isRequired:!0}}})],Ec.prototype,"ratio",void 0),Ec=tC=a([P("esri.renderers.support.HeatmapColorStop")],Ec);let aA=class extends Ge.ClonableMixin(ee){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};a([A({type:String,json:{write:!0}})],aA.prototype,"minLabel",void 0),a([A({type:String,json:{write:!0}})],aA.prototype,"maxLabel",void 0),a([A({type:String,json:{write:!0}})],aA.prototype,"title",void 0),aA=a([P("esri.renderers.support.HeatmapLegendOptions")],aA);function C0e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function k0e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function R0e(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}function O0e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function pH(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function hH(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function AH(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function P0e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function N0e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function L0e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function D0e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function F0e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function j0e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function B0e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function fH(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(r*r+i*i+s*s+n*n)}function mH(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return r*r+i*i+s*s+n*n}function yH(e){const t=e[0],r=e[1],i=e[2],s=e[3];return Math.sqrt(t*t+r*r+i*i+s*s)}function gH(e){const t=e[0],r=e[1],i=e[2],s=e[3];return t*t+r*r+i*i+s*s}function U0e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function V0e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function z0e(e,t){const r=t[0],i=t[1],s=t[2],n=t[3];let o=r*r+i*i+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=s*o,e[3]=n*o),e}function G0e(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function vH(e,t,r,i){const s=t[0],n=t[1],o=t[2],l=t[3];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e[3]=l+i*(r[3]-l),e}function q0e(e,t=1){const r=DS;let i,s,n,o,l,p;do i=2*r()-1,s=2*r()-1,l=i*i+s*s;while(l>=1);do n=2*r()-1,o=2*r()-1,p=n*n+o*o;while(p>=1);const m=Math.sqrt((1-l)/p);return e[0]=t*i,e[1]=t*s,e[2]=t*n*m,e[3]=t*o*m,e}function H0e(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12]*o,e[1]=r[1]*i+r[5]*s+r[9]*n+r[13]*o,e[2]=r[2]*i+r[6]*s+r[10]*n+r[14]*o,e[3]=r[3]*i+r[7]*s+r[11]*n+r[15]*o,e}function W0e(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],l=r[1],p=r[2],m=r[3],v=m*i+l*n-p*s,_=m*s+p*i-o*n,E=m*n+o*s-l*i,$=-o*i-l*s-p*n;return e[0]=v*m+$*-o+_*-p-E*-l,e[1]=_*m+$*-l+E*-o-v*-p,e[2]=E*m+$*-p+v*-l-_*-o,e[3]=t[3],e}function Q0e(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function J0e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Z0e(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=t[0],l=t[1],p=t[2],m=t[3],v=Ms();return Math.abs(r-o)<=v*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-l)<=v*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-p)<=v*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(n-m)<=v*Math.max(1,Math.abs(n),Math.abs(m))}const Y0e=pH,K0e=hH,X0e=AH,eme=fH,tme=mH,rme=yH,ime=gH;Object.freeze(Object.defineProperty({__proto__:null,add:O0e,ceil:P0e,copy:C0e,copyVec3:k0e,dist:eme,distance:fH,div:X0e,divide:AH,dot:G0e,equals:Z0e,exactEquals:J0e,floor:N0e,inverse:V0e,len:rme,length:yH,lerp:vH,max:D0e,min:L0e,mul:K0e,multiply:hH,negate:U0e,normalize:z0e,random:q0e,round:F0e,scale:j0e,scaleAndAdd:B0e,set:R0e,sqrDist:tme,sqrLen:ime,squaredDistance:mH,squaredLength:gH,str:Q0e,sub:Y0e,subtract:pH,transformMat4:H0e,transformQuat:W0e},Symbol.toStringTag,{value:"Module"}));function XS(){return[0,0,0,0]}function sme(e){return[e[0],e[1],e[2],e[3]]}function am(e,t,r,i){return[e,t,r,i]}function nme(e,t,r,i){return[e,t,r,i]}function ome(e,t=XS()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function wH(){return XS()}function bH(){return am(1,1,1,1)}function _H(){return am(1,0,0,0)}function SH(){return am(0,1,0,0)}function EH(){return am(0,0,1,0)}function TH(){return am(0,0,0,1)}const ame=wH(),lme=bH(),ume=_H(),cme=SH(),dme=EH(),pme=TH();Object.freeze(Object.defineProperty({__proto__:null,ONES:lme,UNIT_W:pme,UNIT_X:ume,UNIT_Y:cme,UNIT_Z:dme,ZEROS:ame,clone:sme,create:XS,freeze:nme,fromArray:ome,fromValues:am,ones:bH,unitW:TH,unitX:_H,unitY:SH,unitZ:EH,zeros:wH},Symbol.toStringTag,{value:"Module"}));const k4=2.4;function hme(e){return uo(e*k4)}function Ame(e){return lle(e)/k4}function fme(e,t,r,i){let{color:s,ratio:n}=t,{color:o,ratio:l}=r;l===n&&(l===1?n-=1e-6:l+=1e-6);const p=lo((i-n)/(l-n),0,1);vH(e,s.toArray(),o.toArray(),p)}function e8e(e){const r=new Uint8ClampedArray(2048);if(e=e.filter((({ratio:l})=>l>=0&&l<=1)).sort(((l,p)=>l.ratio-p.ratio)).map((({color:l,ratio:p})=>({color:l,ratio:Math.max(p,.001)}))),e.length<1)return r;let i=e[0],s=e[0],n=1;const o=XS();for(let l=0;l<512;l++){const p=(l+.5)/512;for(;p>s.ratio&&n<e.length;)i=s,s=e[n++];fme(o,i,s,p),r.set(o,4*l)}return r}function t8e(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function r8e(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var rC;function k6(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...l}=e;return l}}return e}let di=rC=class extends xn{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Ec({ratio:0,color:new Ke("rgba(255, 140, 0, 0)")}),new Ec({ratio:.75,color:new Ke("rgba(255, 140, 0, 1)")}),new Ec({ratio:.9,color:new Ke("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return k6(e)}get blurRadius(){return Ame(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",hme(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(k4**2*this.blurRadius**4)}read(e,t){e=k6(e),super.read(e,t)}getSymbol(){return new hi}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&xs(e,t,r),i&&typeof i=="string"&&await ls(e,t,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new rC({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:H(this.colorStops),field:this.field,legendOptions:H(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};a([A({type:fr,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],di.prototype,"authoringInfo",void 0),a([A({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],di.prototype,"blurRadius",null),a([A({type:[Ec],json:{write:{isRequired:!0}}})],di.prototype,"colorStops",void 0),a([A({type:String,json:{write:!0}})],di.prototype,"field",void 0),a([A({type:aA,json:{write:!0}})],di.prototype,"legendOptions",void 0),a([A({type:Number,json:{write:!0}})],di.prototype,"maxDensity",void 0),a([A({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],di.prototype,"maxPixelIntensity",null),a([A({type:Number,json:{write:!0}})],di.prototype,"minDensity",void 0),a([A({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],di.prototype,"minPixelIntensity",null),a([A({type:Number,cast:Rt,json:{write:!0}})],di.prototype,"radius",void 0),a([A({type:Number,range:{min:0},json:{default:0,write:!0}})],di.prototype,"referenceScale",void 0),a([Ne({heatmap:"heatmap"})],di.prototype,"type",void 0),a([A({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],di.prototype,"valueExpression",void 0),a([A({type:String})],di.prototype,"valueExpressionTitle",void 0),a([A({readOnly:!0})],di.prototype,"_pixelIntensityToDensity",null),di=rC=a([P("esri.renderers.HeatmapRenderer")],di);let rp=class extends Ge.ClonableMixin(ee){constructor(){super(...arguments),this.color=new Ke([0,0,0,0]),this.label=null,this.threshold=0}};a([A({type:Ke,json:{write:!0}})],rp.prototype,"color",void 0),a([A({type:String,json:{write:!0}})],rp.prototype,"label",void 0),a([A({type:Number,range:{min:0,max:1},json:{write:!0}})],rp.prototype,"threshold",void 0),rp=a([P("esri.renderers.support.OthersCategory")],rp);const mme={base:Ki,key:"type",typeMap:{size:Dt,opacity:Hl}};let js=class extends om(Ge.ClonableMixin(xn)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ke([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new rp,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new hi({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Ga)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((r,i)=>r+i.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((t,r)=>t+JSON.stringify(r)),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await ls(t,r,i.valueExpression),i.field&&t.add(i.field)}};a([A({type:[dH],json:{write:!0}})],js.prototype,"attributes",void 0),a([A(f4)],js.prototype,"backgroundFillSymbol",void 0),a([A({type:Ke,json:{write:!0}})],js.prototype,"defaultColor",void 0),a([A({type:String,json:{write:!0}})],js.prototype,"defaultLabel",void 0),a([A({type:Number,range:{min:0,max:1},json:{write:!0}})],js.prototype,"holePercentage",void 0),a([A({type:rp,json:{write:!0}})],js.prototype,"othersCategory",void 0),a([A({type:m4,json:{write:!0}})],js.prototype,"legendOptions",void 0),a([A({type:Qr,json:{default:null,write:!0}})],js.prototype,"outline",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],js.prototype,"size",void 0),a([Ne({pieChart:"pie-chart"})],js.prototype,"type",void 0),a([A({types:[mme]})],js.prototype,"visualVariables",void 0),js=a([P("esri.renderers.PieChartRenderer")],js);const i1={key:"type",base:xn,typeMap:{heatmap:di,simple:Ss,"unique-value":sr,"class-breaks":Gr,"dot-density":Fs,dictionary:Co,"pie-chart":js},errorContext:"renderer"},yme={key:"type",base:xn,typeMap:{simple:Ss,"unique-value":sr,"class-breaks":Gr,heatmap:di},errorContext:"renderer",validate:gme};function gme(e){switch(e.type){case"simple":return vme(e);case"unique-value":return wme(e);case"class-breaks":return bme(e);case"heatmap":return e}}function vme(e){if(e.symbol)return e;de.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function wme(e){const t=e.uniqueValueInfos,r=t==null?void 0:t.filter((({symbol:i,label:s},n)=>(i||de.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!i)));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=r),e}function bme(e){const t=e.classBreakInfos,r=t==null?void 0:t.filter((({symbol:i,label:s},n)=>(i||de.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!i)));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=r),e}function n8e(e,t){return pv(e,null,t)}const _me=z0({types:i1});function pv(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r!=null&&r.messages&&r.messages.push(new kn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):_me(e,t,r):null}var iC;let Fi=iC=class extends Oc{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Rt("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter((s=>s.statisticType!=="avg_angle")).map((s=>s.toJSON()));jr(r,i,t)}readRenderer(e,t,r){var s;const i=(s=t.drawingInfo)==null?void 0:s.renderer;return i?pv(i,t,r)??void 0:g4(t,r)}clone(){return new iC({fields:H(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:H(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:H(this.popupTemplate),renderer:H(this.renderer),binType:H(this.binType),size:this.size})}};a([Ne({binning:"binning"})],Fi.prototype,"type",void 0),a([Ne({geohash:"geohash",square:"square"}),A({type:["geohash","square"]})],Fi.prototype,"binType",void 0),a([A({type:Number,json:{write:!0}})],Fi.prototype,"fixedBinLevel",void 0),a([A({type:[lr],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Fi.prototype,"labelingInfo",void 0),a([A(VS)],Fi.prototype,"labelsVisible",void 0),a([A({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Fi.prototype,"maxScale",void 0),a([A(US)],Fi.prototype,"popupEnabled",void 0),a([A({type:Z0,json:{name:"popupInfo",write:!0}})],Fi.prototype,"popupTemplate",void 0),a([A({cast:e=>e==="auto"?e:bs(Rt(e))})],Fi.prototype,"size",void 0),a([A({type:[rs],json:{write:!0}})],Fi.prototype,"fields",void 0),a([ye("fields")],Fi.prototype,"writeFields",null),a([A({types:i1,json:{write:{target:"drawingInfo.renderer"}}})],Fi.prototype,"renderer",void 0),a([pe("renderer",["drawingInfo.renderer"])],Fi.prototype,"readRenderer",null),Fi=iC=a([P("esri.layers.support.FeatureReductionBinning")],Fi);var sC;function R6(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let qr=sC=class extends ee{constructor(e){super(e),this.type="cluster",this.clusterRadius=Rt("80px"),this.clusterMinSize=Rt("12px"),this.clusterMaxSize=Rt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){var s,n;const i=(s=t.drawingInfo)==null?void 0:s.renderer;return(n=i==null?void 0:i.authoringInfo)!=null&&n.isAutoGenerated?null:i?R6(i)?null:pv(i,t,r)??void 0:g4(t,r)}readSymbol(e,t,r){var s,n;const i=(s=t.drawingInfo)==null?void 0:s.renderer;if((n=i==null?void 0:i.authoringInfo)!=null&&n.isAutoGenerated)return null;if(i&&R6(i)){const o=pv(i,t,r);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,r,i){var n,o;const s=(o=(n=this.renderer)==null?void 0:n.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||s){const l=new Ss({symbol:e});t.drawingInfo={renderer:l.write({},i)}}}writeFields(e,t,r){const i=e.filter((s=>s.statisticType!=="avg_angle")).map((s=>s.toJSON()));jr(r,i,t)}readFields(e,t,r){return e.filter((i=>!i.isAutoGenerated)).map((i=>rs.fromJSON(i)))}clone(){return new sC({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:H(this.labelingInfo),labelsVisible:this.labelsVisible,fields:H(this.fields),maxScale:this.maxScale,renderer:H(this.renderer),symbol:H(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:H(this.popupTemplate)})}};a([A({type:["cluster"],readOnly:!0,json:{write:!0}})],qr.prototype,"type",void 0),a([A({cast:e=>e==="auto"?e:bs(Rt(e)),json:{write:!0}})],qr.prototype,"clusterRadius",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],qr.prototype,"clusterMinSize",void 0),a([A({type:Number,cast:Rt,json:{write:!0}})],qr.prototype,"clusterMaxSize",void 0),a([A({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],qr.prototype,"maxScale",void 0),a([A(US)],qr.prototype,"popupEnabled",void 0),a([A({type:Z0,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],qr.prototype,"popupTemplate",void 0),a([A({types:i1,json:{write:{target:"drawingInfo.renderer"}}})],qr.prototype,"renderer",void 0),a([pe("renderer",["drawingInfo.renderer"])],qr.prototype,"readRenderer",null),a([A({types:Xle})],qr.prototype,"symbol",void 0),a([pe("symbol",["drawingInfo.renderer"])],qr.prototype,"readSymbol",null),a([ye("symbol")],qr.prototype,"writeSymbol",null),a([A({type:[lr],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],qr.prototype,"labelingInfo",void 0),a([A(VS)],qr.prototype,"labelsVisible",void 0),a([A({type:[rs],json:{write:!0}})],qr.prototype,"fields",void 0),a([ye("fields")],qr.prototype,"writeFields",null),a([pe("fields")],qr.prototype,"readFields",null),qr=sC=a([P("esri.layers.support.FeatureReductionCluster")],qr);var nC;let Ig=nC=class extends Oc{constructor(e){super(e),this.type="selection"}clone(){return new nC}};a([A({type:["selection"]})],Ig.prototype,"type",void 0),Ig=nC=a([P("esri.layers.support.FeatureReductionSelection")],Ig);const O6={key:"type",base:Oc,typeMap:{cluster:qr,binning:Fi}},Sme={types:{key:"type",base:Oc,typeMap:{selection:Ig,cluster:qr,binning:Fi}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:O6},"portal-item":{types:O6},"web-scene":{types:{key:"type",base:Oc,typeMap:{selection:Ig}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:tr}}}}},xh={Base64:0,Hex:1,String:2,Raw:3},pf=8,$H=(1<<pf)-1;function Tc(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function Eme(e){const t=[];for(let r=0,i=e.length*pf;r<i;r+=pf)t[r>>5]|=(e.charCodeAt(r/pf)&$H)<<r%32;return t}function Tme(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=pf)t.push(String.fromCharCode(e[r>>5]>>>r%32&$H));return t.join("")}function $me(e){const t="0123456789abcdef",r=[];for(let i=0,s=4*e.length;i<s;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function xme(e){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let s=0,n=4*e.length;s<n;s+=3){const o=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let l=0;l<4;l++)8*s+6*l>32*e.length?i.push("="):i.push(r.charAt(o>>6*(3-l)&63))}return i.join("")}function Ime(e,t){return e<<t|e>>>32-t}function eE(e,t,r,i,s,n){return Tc(Ime(Tc(Tc(t,e),Tc(i,n)),s),r)}function Wi(e,t,r,i,s,n,o){return eE(t&r|~t&i,e,t,s,n,o)}function Qi(e,t,r,i,s,n,o){return eE(t&i|r&~i,e,t,s,n,o)}function Ji(e,t,r,i,s,n,o){return eE(t^r^i,e,t,s,n,o)}function Zi(e,t,r,i,s,n,o){return eE(r^(t|~i),e,t,s,n,o)}function Mme(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,s=-1732584194,n=271733878;for(let o=0;o<e.length;o+=16){const l=r,p=i,m=s,v=n;r=Wi(r,i,s,n,e[o],7,-680876936),n=Wi(n,r,i,s,e[o+1],12,-389564586),s=Wi(s,n,r,i,e[o+2],17,606105819),i=Wi(i,s,n,r,e[o+3],22,-1044525330),r=Wi(r,i,s,n,e[o+4],7,-176418897),n=Wi(n,r,i,s,e[o+5],12,1200080426),s=Wi(s,n,r,i,e[o+6],17,-1473231341),i=Wi(i,s,n,r,e[o+7],22,-45705983),r=Wi(r,i,s,n,e[o+8],7,1770035416),n=Wi(n,r,i,s,e[o+9],12,-1958414417),s=Wi(s,n,r,i,e[o+10],17,-42063),i=Wi(i,s,n,r,e[o+11],22,-1990404162),r=Wi(r,i,s,n,e[o+12],7,1804603682),n=Wi(n,r,i,s,e[o+13],12,-40341101),s=Wi(s,n,r,i,e[o+14],17,-1502002290),i=Wi(i,s,n,r,e[o+15],22,1236535329),r=Qi(r,i,s,n,e[o+1],5,-165796510),n=Qi(n,r,i,s,e[o+6],9,-1069501632),s=Qi(s,n,r,i,e[o+11],14,643717713),i=Qi(i,s,n,r,e[o],20,-373897302),r=Qi(r,i,s,n,e[o+5],5,-701558691),n=Qi(n,r,i,s,e[o+10],9,38016083),s=Qi(s,n,r,i,e[o+15],14,-660478335),i=Qi(i,s,n,r,e[o+4],20,-405537848),r=Qi(r,i,s,n,e[o+9],5,568446438),n=Qi(n,r,i,s,e[o+14],9,-1019803690),s=Qi(s,n,r,i,e[o+3],14,-187363961),i=Qi(i,s,n,r,e[o+8],20,1163531501),r=Qi(r,i,s,n,e[o+13],5,-1444681467),n=Qi(n,r,i,s,e[o+2],9,-51403784),s=Qi(s,n,r,i,e[o+7],14,1735328473),i=Qi(i,s,n,r,e[o+12],20,-1926607734),r=Ji(r,i,s,n,e[o+5],4,-378558),n=Ji(n,r,i,s,e[o+8],11,-2022574463),s=Ji(s,n,r,i,e[o+11],16,1839030562),i=Ji(i,s,n,r,e[o+14],23,-35309556),r=Ji(r,i,s,n,e[o+1],4,-1530992060),n=Ji(n,r,i,s,e[o+4],11,1272893353),s=Ji(s,n,r,i,e[o+7],16,-155497632),i=Ji(i,s,n,r,e[o+10],23,-1094730640),r=Ji(r,i,s,n,e[o+13],4,681279174),n=Ji(n,r,i,s,e[o],11,-358537222),s=Ji(s,n,r,i,e[o+3],16,-722521979),i=Ji(i,s,n,r,e[o+6],23,76029189),r=Ji(r,i,s,n,e[o+9],4,-640364487),n=Ji(n,r,i,s,e[o+12],11,-421815835),s=Ji(s,n,r,i,e[o+15],16,530742520),i=Ji(i,s,n,r,e[o+2],23,-995338651),r=Zi(r,i,s,n,e[o],6,-198630844),n=Zi(n,r,i,s,e[o+7],10,1126891415),s=Zi(s,n,r,i,e[o+14],15,-1416354905),i=Zi(i,s,n,r,e[o+5],21,-57434055),r=Zi(r,i,s,n,e[o+12],6,1700485571),n=Zi(n,r,i,s,e[o+3],10,-1894986606),s=Zi(s,n,r,i,e[o+10],15,-1051523),i=Zi(i,s,n,r,e[o+1],21,-2054922799),r=Zi(r,i,s,n,e[o+8],6,1873313359),n=Zi(n,r,i,s,e[o+15],10,-30611744),s=Zi(s,n,r,i,e[o+6],15,-1560198380),i=Zi(i,s,n,r,e[o+13],21,1309151649),r=Zi(r,i,s,n,e[o+4],6,-145523070),n=Zi(n,r,i,s,e[o+11],10,-1120210379),s=Zi(s,n,r,i,e[o+2],15,718787259),i=Zi(i,s,n,r,e[o+9],21,-343485551),r=Tc(r,l),i=Tc(i,p),s=Tc(s,m),n=Tc(n,v)}return[r,i,s,n]}function R4(e,t=xh.Hex){const r=t||xh.Base64,i=Mme(Eme(e),e.length*pf);switch(r){case xh.Raw:return i;case xh.Hex:return $me(i);case xh.String:return Tme(i);case xh.Base64:return xme(i)}}const Cme=()=>de.getLogger("esri.views.2d.layers.support.clusterUtils");K.add("esri-cluster-arcade-enabled",!0);const kme=K("esri-cluster-arcade-enabled"),Rme=new Set(["simple-line","simple-fill","picture-fill"]);function P6(e,t){let r=t.clone();if(!Ome(r))return r;if(t.symbols.some((i=>Rme.has(i.type)))&&(r=new Ss({symbol:new hi})),r.authoringInfo||(r.authoringInfo=new fr),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter((s=>s.valueExpression!=="$view.scale"));i.forEach((s=>{s.type==="rotation"?s.field?s.field=dd(e,s.field,"avg_angle","number"):s.valueExpression&&(s.field=Bm(e,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=dd(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=dd(e,s.field,"avg","number"):s.valueExpression&&(s.field=Bm(e,s.valueExpression,"avg","number"),s.valueExpression=null)})),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=dd(e,i.field,"sum","number"):i.valueExpression&&(i.field=Bm(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=dd(e,r.field,"mode","string"):r.valueExpression&&(r.field=Bm(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=dd(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=dd(e,r.field,"avg","number"):r.valueExpression&&(r.field=Bm(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const Ome=e=>{const t=r=>Cme().error(new Q("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!kme){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some((r=>!(!("valueExpression"in r)||!r.valueExpression))))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Pme(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,s="field",n=t.toLowerCase()+",norm:"+s+","+i.toLowerCase();return"cluster_avg_"+R4(n)}}}function Bm(e,t,r,i){const s=R4(t),n=r==="mode"?`cluster_type_${s}`:r==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some((o=>o.name===n))||e.push(new rs({name:n,isAutoGenerated:!0,onStatisticExpression:new pc({expression:t,returnType:i}),statisticType:r})),n}function dd(e,t,r,i,s){if(t==="cluster_count"||e.some((o=>o.name===t)))return t;const n=Pme(r,t,s);return e.some((o=>o.name===n))||(r==="avg_norm"?e.push(new rs({name:n,isAutoGenerated:!0,onStatisticExpression:new pc({expression:`$feature.${t} / $feature.${s}`,returnType:i}),statisticType:"avg"})):e.push(new rs({name:n,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),n}const Nme=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(Qe((()=>this.renderer),(()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}}),Wa))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,s){const n=r.clone();return"visualVariables"in n&&(n.visualVariables||(n.visualVariables=[]),n.visualVariables.some((o=>o.type==="size"))||n.visualVariables.push(new Dt({field:"cluster_count",stops:[new Bo({value:1}),new Bo({useMinValue:!0,size:i}),new Bo({useMaxValue:!0,size:s})]}))),n}_normalizeFeatureReduction(r){var _;if((r==null?void 0:r.type)!=="cluster")return r;const i=r.clone(),s=[new rs({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],n=(i.fields??[]).filter((E=>!E.isAutoGenerated)),o=r.renderer&&!((_=r.renderer.authoringInfo)!=null&&_.isAutoGenerated),{clusterMinSize:l,clusterMaxSize:p}=i;if(o){i.fields=[...s,...n];const E=this._withClusterVariable(i.renderer,l,p);return i.effectiveFeatureRenderer=E,i.effectiveClusterRenderer=E,i}if(r.symbol){if(i.fields=[...s,...n],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const E=P6(s,this.renderer),$=this._withClusterVariable(E,l,p),M="visualVariables"in $&&$.visualVariables?$.visualVariables:[],k=new Ss({symbol:r.symbol,visualVariables:M});return i.fields=[...s,...n],i.effectiveFeatureRenderer=$,i.effectiveClusterRenderer=k,i}if(!this.renderer)return r;const m=P6(s,this.renderer);i.fields=[...s,...n],i.renderer=m;const v=this._withClusterVariable(m,l,p);return i.effectiveFeatureRenderer=v,i.effectiveClusterRenderer=v,i}};return a([A(Sme)],t.prototype,"featureReduction",null),t=a([P("esri.layers.mixins.FeatureReductionLayer")],t),t},N6={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},L6={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},D6={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Lme={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":N6,"web-map/basemap":L6,"web-map/tables":D6,"link-chart/operational-layers":{...N6,LinkChartLayer:!0},"link-chart/basemap":L6,"link-chart/tables":D6,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},Dme=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,s){var n;return((n=s==null?void 0:s.portalItem)==null?void 0:n.type)==="Group Layer"?void 0:r}writeListMode(r,i,s,n){(n&&n.layerContainerType==="ground"||r&&mte(this,s,{},n))&&(i[s]=r)}writeOperationalLayerType(r,i,s){r&&(i[s]=r)}writeTitle(r,i){i.title=r??"Layer"}readVisibilityTimeExtent(r){return r?qt.fromArray(r):null}writeVisibilityTimeExtent(r,i,s,n){r&&n.layerContainerType!=="tables"&&(r.isEmpty?n!=null&&n.messages&&n.messages.push(new Q("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[s]=r.toArray())}read(r,i){i&&(i.layer=this),eB(this,r,(s=>super.read(r,s)),i)}write(r,i){var o,l;if(!this.persistenceEnabled&&!(i!=null&&i.ignorePersistenceEnabled))return null;if(i!=null&&i.origin){const p=`${i.origin}/${i.layerContainerType||"operational-layers"}`,m=Lme[p];let v=!!(m!=null&&m[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&p==="web-scene/operational-layers"&&(v=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&p==="web-map/operational-layers"&&(v=!1),!v)return(o=i.messages)==null||o.push(new Q("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${p}'`,{layer:this})),null}const s=super.write(r,{...i,layer:this}),n=!!i&&!!i.messages&&!!i.messages.filter((p=>p instanceof Q&&p.name==="web-document-write:property-required")).length;return K0(s==null?void 0:s.url)?((l=i==null?void 0:i.messages)==null||l.push(new Q("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:s}beforeSave(){}};return a([A({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),a([pe("id",["id"])],t.prototype,"readId",null),a([A(tq)],t.prototype,"listMode",void 0),a([ye("listMode")],t.prototype,"writeListMode",null),a([A({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:tr,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),a([ye("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),a([A(dM)],t.prototype,"opacity",void 0),a([A({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),a([A({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),a([ye("title"),ye(["web-scene"],"title")],t.prototype,"writeTitle",null),a([A({type:qt,json:{origins:{"web-scene":{write:{layerContainerTypes:tr}}}}})],t.prototype,"visibilityTimeExtent",void 0),a([pe("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),a([ye(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Et,V0]]}})],t.prototype,"writeVisibilityTimeExtent",null),a([A({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:tr}}})],t.prototype,"visible",void 0),t=a([P("esri.layers.mixins.OperationalLayer")],t),t};var oC;const aw=new ct({asc:"ascending",desc:"descending"});var Df;let ip=(Df=class extends ee{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new oC({field:this.field,valueExpression:this.valueExpression,order:this.order})}},oC=Df,Df);a([A({type:String,json:{write:!0}})],ip.prototype,"field",void 0),a([A({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],ip.prototype,"valueExpression",void 0),a([A({type:aw.apiValues,json:{type:aw.jsonValues,read:aw.read,write:aw.write}})],ip.prototype,"order",void 0),ip=oC=a([P("esri.layers.support.OrderByInfo")],ip);function Fme(e,t,r){if(!e)return null;const i=e.find((n=>!!n.field));if(!i)return null;const s=new ip;return s.read(i,r),[s]}function jme(e,t,r,i){const s=e.find((n=>!!n.field));s&&jr(r,[s.toJSON()],t)}const Bme={type:[ip],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:Fme},write:{writer:jme}}},Ume=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return a([A(Bme)],t.prototype,"orderBy",void 0),t=a([P("esri.layers.mixins.OrderedLayer")],t),t};let wl=class extends je{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:F6(t.path,t.portalItem)}:t}set path(t){t!=null&&nn(t)?de.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return F6(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new Q("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r!=null&&r.cacheBust?Date.now():null},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await ce(()=>import("./resourceUtils-DBvQjvBb.js"),[],import.meta.url);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function F6(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&nn(e)&&(e=IR(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}a([A()],wl.prototype,"portalItem",void 0),a([A({type:String,value:null})],wl.prototype,"path",null),a([Ft("path")],wl.prototype,"_castPath",null),a([A({type:String,readOnly:!0})],wl.prototype,"url",null),a([A({type:String,readOnly:!0})],wl.prototype,"cdnUrl",null),a([A({type:String,readOnly:!0})],wl.prototype,"itemRelativeUrl",null),wl=a([P("esri.portal.PortalItemResource")],wl);let cp=class extends je{constructor(t){super(t),this.created=null,this.rating=null}};a([A({type:Date})],cp.prototype,"created",void 0),a([A()],cp.prototype,"rating",void 0),cp=a([P("esri.portal.PortalRating")],cp);var Dd;const Vme=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),zme=new Set(["KML","GeoJson","CSV"]);let et=Dd=class extends ee.JSONSupportMixin(os){static from(e){return Vv(Dd,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new At(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var $;const e=(($=this.type)==null?void 0:$.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let s,n=!1,o=!1,l=!1,p=!1,m=!1,v=!1,_=!1,E=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),l=t.includes("Route Layer"),p=t.includes("Markup"),m=t.includes("Spatiotemporal"),v=t.includes("UtilityNetwork"),s=m&&o?"spatiotemporaltable":o?"table":l?"routelayer":p?"markup":m?"spatiotemporal":v?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(m=t.includes("Spatiotemporal"),_=t.includes("Relational"),s=m||_?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="reality mapping project"?s="realitymappingproject":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="urban project"?s="urbanproject":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro presentation"?s="propresentation":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(E=t.includes("Map"),s=E?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?Or(r+s+i+".png"):null}get isLayer(){return this.type!=null&&Vme.has(this.type)}get itemCdnUrl(){return RR(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,s;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((s=(i=this.portal)==null?void 0:i.user)==null?void 0:s.id);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=me.getDefault()),r=t.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{})).then((i=>{this.sourceJSON=i,this.read(i)}));return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},r=e instanceof cp?e.rating:e;return r==null||isNaN(r)||typeof e!="number"||(t.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new cp({rating:r,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:H(this.applicationProxies),avgRating:this.avgRating,categories:H(this.categories),classification:H(this.classification),created:H(this.created),culture:this.culture,description:this.description,extent:H(this.extent),groupCategories:H(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:H(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:H(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:H(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:H(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Dd({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(t=e[r])==null?void 0:t.join(", ");for(const r of["extent","classification"]){const i=e[r];i&&(e[r]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new cp(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Dd)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new Q("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new Q("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:s,tags:n,title:o}=e||{},l={method:"post",query:{copyPrivateResources:i==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!i,tags:n==null?void 0:n.join(","),title:o}},{itemId:p}=await t.request(`${r}/copy`,l);return new Dd({id:p,portal:t})}updateThumbnail(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")pu(t)?i.query={data:t}:i.query={url:en(t)},r!=null&&(i.query.filename=r);else{const s=new FormData;r!=null?s.append("file",t,r):s.append("file",t),i.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then((()=>this.reload()))})):Promise.reject(new Q("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await ce(()=>import("./resourceUtils-DBvQjvBb.js"),[],import.meta.url);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await ce(()=>import("./resourceUtils-DBvQjvBb.js"),[],import.meta.url);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await ce(()=>import("./resourceUtils-DBvQjvBb.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new Q("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await ce(()=>import("./resourceUtils-DBvQjvBb.js"),[],import.meta.url);return t(this,e)}resourceFromPath(e){return new wl({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:H(this.categories),classification:H(this.classification),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:H(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:H(this.typeKeywords),url:this.url};return dX(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Dd({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};a([A({type:["private","shared","org","public"]})],et.prototype,"access",void 0),a([A()],et.prototype,"accessInformation",void 0),a([A({type:String})],et.prototype,"apiKey",void 0),a([A({json:{read:{source:"appProxies"}}})],et.prototype,"applicationProxies",void 0),a([A()],et.prototype,"avgRating",void 0),a([A()],et.prototype,"categories",void 0),a([A()],et.prototype,"classification",void 0),a([A({type:Date})],et.prototype,"created",void 0),a([A()],et.prototype,"culture",void 0),a([A()],et.prototype,"description",void 0),a([A({readOnly:!0})],et.prototype,"displayName",null),a([A({type:At})],et.prototype,"extent",void 0),a([pe("extent")],et.prototype,"readExtent",null),a([A()],et.prototype,"groupCategories",void 0),a([A({readOnly:!0})],et.prototype,"iconUrl",null),a([A()],et.prototype,"id",void 0),a([A({readOnly:!0})],et.prototype,"isLayer",null),a([A({type:Boolean,readOnly:!0})],et.prototype,"isOrgItem",void 0),a([A()],et.prototype,"itemControl",void 0),a([A({readOnly:!0})],et.prototype,"itemPageUrl",null),a([A({readOnly:!0})],et.prototype,"itemUrl",null),a([A()],et.prototype,"licenseInfo",void 0),a([A({type:Date})],et.prototype,"modified",void 0),a([A()],et.prototype,"name",void 0),a([A()],et.prototype,"numComments",void 0),a([A()],et.prototype,"numRatings",void 0),a([A()],et.prototype,"numViews",void 0),a([A()],et.prototype,"owner",void 0),a([A()],et.prototype,"ownerFolder",void 0),a([A({type:me})],et.prototype,"portal",void 0),a([A()],et.prototype,"screenshots",void 0),a([A()],et.prototype,"size",void 0),a([A()],et.prototype,"snippet",void 0),a([A()],et.prototype,"sourceJSON",void 0),a([A({type:String})],et.prototype,"sourceUrl",void 0),a([A({type:String})],et.prototype,"spatialReference",void 0),a([A()],et.prototype,"tags",void 0),a([A()],et.prototype,"thumbnail",void 0),a([A({readOnly:!0})],et.prototype,"thumbnailUrl",null),a([A()],et.prototype,"title",void 0),a([A()],et.prototype,"type",void 0),a([A()],et.prototype,"typeKeywords",void 0),a([A({type:String,json:{read(e,t){var r;if(zme.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],et.prototype,"url",void 0),a([A({readOnly:!0})],et.prototype,"userItemUrl",null),et=Dd=a([P("esri.portal.PortalItem")],et);const xH=Object.freeze(Object.defineProperty({__proto__:null,get default(){return et}},Symbol.toStringTag,{value:"Module"})),Gme=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=cr(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,s){if(i.itemId)return new et({id:i.itemId,portal:s==null?void 0:s.portal})}writePortalItem(r,i){r!=null&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:n}=await ce(()=>import("./layersLoader-DQNk7xYu.js"),__vite__mapDeps([175,28,29,27]),import.meta.url);return dr(i),await n({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},i)}catch(n){throw zi(n)||de.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch((i=>(ka(i),!0))))}async setUserPrivileges(r,i){if(!Pt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:s,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(s){ka(s)}}async _fetchUserPrivileges(r,i){let s=this.portalItem;if(!r||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(i);const n=!(st!=null&&st.findCredential(this.url)),o=r===s.id;if(o&&s.portal.user)return this._getUserPrivileges(s,n);let l,p;if(o)l=s.portal.url;else try{l=await c4(this.url,i)}catch(E){ka(E)}if(!l||!$ne(l,s.portal.url))return this._fetchFallbackUserPrivileges(i);try{const E=i!=null?i.signal:null;p=await(st==null?void 0:st.getCredential(`${l}/sharing`,{prompt:!1,signal:E}))}catch(E){ka(E)}const m=!0,v=!1,_=!1;if(!p)return{features:{edit:m,fullEdit:v},content:{updateItem:_}};try{if(o?await s.reload():(s=new et({id:r,portal:{url:l}}),await s.load(i)),s.portal.user)return this._getUserPrivileges(s,n)}catch(E){ka(E)}return{features:{edit:m,fullEdit:v},content:{updateItem:_}}}_getUserPrivileges(r,i){const s=kfe(r);return i&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(s){ka(s)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?st==null?void 0:st.findCredential(this.url):null;if(!i)return!0;const s=lw.credential===i?lw.user:await this._fetchEditingUser(r);return lw.credential=i,lw.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var v,_;const i=(_=(v=this.portalItem)==null?void 0:v.portal)==null?void 0:_.user;if(i)return i;const s=st==null?void 0:st.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const n=`${s.owningSystemUrl}/sharing/rest`,o=me.getDefault();if(o&&o.loaded&&no(o.restUrl)===no(n))return o.user;const l=`${n}/community/self`,p=r!=null?r.signal:null,m=await zS(Nt(l,{authMode:"no-prompt",query:{f:"json"},signal:p}));return m.ok?Ht.fromJSON(m.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){var o;const s=i==null?void 0:i.portal,n=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||me.getDefault());return s&&n&&!oV(n.restUrl,s.restUrl)?(i.messages&&i.messages.push(new Q("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return a([A({type:et})],t.prototype,"portalItem",null),a([pe("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),a([ye("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),a([A({clonable:!1})],t.prototype,"resourceReferences",void 0),a([A({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),a([A({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),a([A({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=a([P("esri.layers.mixins.PortalLayer")],t),t},lw={credential:null,user:null};let jy=class extends je{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};a([A()],jy.prototype,"updating",void 0),a([A()],jy.prototype,"status",void 0),jy=a([P("esri.layers.support.PublishingInfo")],jy);const qme=Symbol(),Hme=e=>{var i;var t;let r=(i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const n=new jy;return this._checkPublishingStatus(n),n}_checkPublishingStatus(s){let l=0;const p=async v=>{let _;s.updating=!0;try{_=await this.fetchPublishingStatus()}catch{_="unavailable"}_!=="published"&&_!=="unavailable"||(s.status==="publishing"&&this.refresh(),m.remove()),s.status=_,s.updating=!1,m.removed||(l=setTimeout(p,v,v+125))},m={removed:!1,remove(){this.removed=!0,clearTimeout(l)}};this.when().catch((()=>m.remove())),p(250),this.addHandles(m)}},t=qme,i);return a([A({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=a([P("esri.layers.mixins.PublishableLayer")],r),r},$c=new Te,Mg=new WeakMap;function Wme(e){Jme(e)&&$c.push(new WeakRef(e))}function Qme(e){const t=$c.find((r=>r.deref()===e));t&&$c.remove(t)}function Jme(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function IH(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:IH(t,e%t):0}let b3=0,uw=0;function Zme(){const e=Date.now();let t=!1;for(const r of $c){const i=r.deref();i?i.refreshInterval&&e-(Mg.get(i)??0)+5>=6e4*i.refreshInterval&&(Mg.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=$c.length-1;r>=0;r--)$c.at(r).deref()||$c.removeAt(r)}kj((()=>{const e=Date.now();let t=0;for(const r of $c){const i=r.deref();i&&(t=IH(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Mg.get(i)||Mg.set(i,e):Mg.delete(i))}if(t!==uw){if(uw=t,clearInterval(b3),uw===0)return void(b3=0);b3=setInterval(Zme,uw)}}),Wa);const j6=.1,Yme=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=pS((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||Wme(this)}),(()=>{}))}destroy(){Qme(this)}castRefreshInterval(r){return r>=j6?r:r<=0?0:j6}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){Wg(this._debounceHasDataChanged()).then((i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})}),(i=>{de.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})}))}async hasDataChanged(){return!0}get test(){}};return a([A({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:tr}}}}})],t.prototype,"refreshInterval",void 0),a([Ft("refreshInterval")],t.prototype,"castRefreshInterval",null),a([A({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),a([A({readOnly:!0})],t.prototype,"refreshParameters",null),t=a([P("esri.layers.mixins.RefreshableLayer")],t),t},Kme=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&Xme(r,i.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return a([A({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),a([A({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),a([A({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=a([P("esri.layers.mixins.ScaleRangeLayer")],t),t};function Xme(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const O4=si()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Qo=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return uG(this.value,this.unit,"milliseconds")}};a([Ne(O4,{nonNullable:!0})],Qo.prototype,"unit",void 0),a([A({type:Number,json:{write:!0},nonNullable:!0})],Qo.prototype,"value",void 0),Qo=a([P("esri.time.TimeInterval")],Qo);function B6(e,t){return Qo.fromJSON({value:e,unit:t})}let Ti=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?qt.fromArray(r.timeExtent):null}writeFullTimeExtent(t,r){(t==null?void 0:t.start)!=null&&t.end!=null?r.timeExtent=t.toArray():r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?B6(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?B6(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(t,r){r.timeInterval=(t==null?void 0:t.toJSON().value)??null,r.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};a([A({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Ti.prototype,"cumulative",void 0),a([A({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Ti.prototype,"endField",void 0),a([A({type:qt,json:{write:{enabled:!0,allowNull:!0}}})],Ti.prototype,"fullTimeExtent",void 0),a([pe("fullTimeExtent",["timeExtent"])],Ti.prototype,"readFullTimeExtent",null),a([ye("fullTimeExtent")],Ti.prototype,"writeFullTimeExtent",null),a([A({type:Boolean,json:{write:!0}})],Ti.prototype,"hasLiveData",void 0),a([A({type:Qo,json:{write:{enabled:!0,allowNull:!0}}})],Ti.prototype,"interval",void 0),a([pe("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ti.prototype,"readInterval",null),a([ye("interval")],Ti.prototype,"writeInterval",null),a([A({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Ti.prototype,"startField",void 0),a([A(Pb("timeReference",!0))],Ti.prototype,"timeZone",void 0),a([A({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ti.prototype,"trackIdField",void 0),a([A({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Ti.prototype,"useTime",void 0),a([A({type:[Date],json:{read:!1}})],Ti.prototype,"stops",void 0),Ti=a([P("esri.layers.support.TimeInfo")],Ti);const eye={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:tr}}},tye=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const s=i.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=O4.fromJSON(s.timeOffsetUnits);return n&&o?new Qo({value:n,unit:o}):null}set timeInfo(r){pU(r,this.fieldsIndex),this._set("timeInfo",r)}};return a([A({type:qt,json:{write:!1}})],t.prototype,"timeExtent",void 0),a([A({type:Qo})],t.prototype,"timeOffset",void 0),a([pe("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),a([A({value:null,type:Ti,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),a([A(eye)],t.prototype,"useViewTime",void 0),t=a([P("esri.layers.mixins.TemporalLayer")],t),t};let eo=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};a([A({type:[lr],json:{write:!0}})],eo.prototype,"labelingInfo",void 0),a([A(VS)],eo.prototype,"labelsVisible",void 0),a([A({types:i1,json:{write:!0}})],eo.prototype,"renderer",void 0),a([A({type:Boolean,json:{write:!0}})],eo.prototype,"visible",void 0),eo=a([P("esri.layers.support.TrackPartInfo")],eo);let Bs=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.enabled=!0,this.fields=[],this.latestObservations=new eo({renderer:new Ss({symbol:e_.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new eo({renderer:new Ss({symbol:e_.clone()})}),this.trackLines=new eo({renderer:new Ss({symbol:h4.clone()})}),this.timeField="startTimeField"}writeFields(t,r,i){const s=t.filter((n=>n.statisticType!=="avg_angle")).map((n=>n.toJSON()));jr(i,s,r)}};a([A({type:Boolean,json:{write:!0}})],Bs.prototype,"enabled",void 0),a([A({type:[rs],json:{write:!0}})],Bs.prototype,"fields",void 0),a([ye("fields")],Bs.prototype,"writeFields",null),a([A({type:eo,json:{write:!0}})],Bs.prototype,"latestObservations",void 0),a([A({type:Qo,json:{write:!0}})],Bs.prototype,"maxDisplayDuration",void 0),a([A({type:Number,json:{write:!0}})],Bs.prototype,"maxDisplayObservationsPerTrack",void 0),a([A(US)],Bs.prototype,"popupEnabled",void 0),a([A({type:Z0,json:{name:"popupInfo",write:!0}})],Bs.prototype,"popupTemplate",void 0),a([A({type:eo,json:{write:!0}})],Bs.prototype,"previousObservations",void 0),a([A({type:eo,json:{write:!0}})],Bs.prototype,"trackLines",void 0),a([A({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Bs.prototype,"timeField",void 0),Bs=a([P("esri.layers.support.TrackInfo")],Bs);const rye=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return a([A({type:Bs})],t.prototype,"trackInfo",void 0),t=a([P("esri.layers.mixins.TrackableLayer")],t),t},U6=new ct({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let $a=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};a([A({json:{write:!0}})],$a.prototype,"name",void 0),a([A({json:{write:!0}})],$a.prototype,"description",void 0),a([A({json:{read:U6.read,write:U6.write}})],$a.prototype,"drawingTool",void 0),a([A({json:{write:!0}})],$a.prototype,"prototype",void 0),a([A({json:{write:!0}})],$a.prototype,"thumbnail",void 0),$a=a([P("esri.layers.support.FeatureTemplate")],$a);let Sa=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=NS(t[i]);return r}writeDomains(t,r){var s;const i={};for(const n of Object.keys(t))t[n]&&(i[n]=(s=t[n])==null?void 0:s.toJSON());r.domains=i}};a([A({json:{write:!0}})],Sa.prototype,"id",void 0),a([A({json:{write:!0}})],Sa.prototype,"name",void 0),a([A({json:{write:!0}})],Sa.prototype,"domains",void 0),a([pe("domains")],Sa.prototype,"readDomains",null),a([ye("domains")],Sa.prototype,"writeDomains",null),a([A({type:[$a],json:{write:!0}})],Sa.prototype,"templates",void 0),Sa=a([P("esri.layers.support.FeatureType")],Sa);function iye(){return{fields:{type:[xi],value:null,set:function(e){if(e&&K("big-integer-warning-enabled")){const t=e.filter((r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8));if(t.length){const r=t.map((i=>`'${i.name}'`)).join(", ");de.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return n_.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const r of e)((t=this.fieldsIndex)==null?void 0:t.has(r))||de.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${r} found in outFields`,{layer:this,outFields:e});return vS(this.fieldsIndex,e)}}}}const _3=()=>de.getLogger("esri.layers.support.labelingInfo"),sye=/\[([^[\]]+)\]/gi;function V6(e,t,r){return e?e.map((i=>{var n;const s=new lr;if(s.read(i,r),s.labelExpression){const o=t.fields||((n=t.layerDefinition)==null?void 0:n.fields)||this.fields;s.labelExpression=s.labelExpression.replaceAll(sye,((l,p)=>`[${nye(p,o)}]`))}return s})):null}function nye(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const s=t[i].name;if(s.toLowerCase()===r)return s}return e}const z6=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],oye={esriGeometryPoint:z6,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:z6,esriGeometryEnvelope:null};function f8e(e,t){const r=[];for(const i of e){const s=i.labelPlacement,n=oye[t];if(!i.symbol)return _3().warn("No ILabelClass symbol specified."),[];if(!n)return _3().error(new Q("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(n.includes(s))r.push(i);else{const o=n[0];s&&_3().warn(`Found invalid label placement type ${s} for ${t}. Defaulting to ${o}`);const l=i.clone();l.labelPlacement=o,r.push(l)}}return r}const aye="relationships/",lye="expression/";let ps=class extends je{constructor(t){super(t),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||GS((()=>jp())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??ce(()=>import("./featureUtils-6dw3Aud_.js"),__vite__mapDeps([176,35]),import.meta.url).then((t=>this._featureUtils=t))}get calculatedExpressions(){var r;const t=new Te;if(!this.expressionsUsedInTitle.length)return t;if(!((r=this._arcadeTask)!=null&&r.value)){for(const i of this.expressionsUsedInTitle??[])t.push({name:i.name,invalid:!0});return t}for(const i of this.expressionsUsedInTitle)try{const s=this._arcadeTask.value.arcade.parseScript(i.expression,["$layer","$map","$datastore"]);if(s.isAsync){t.push({name:i.name,invalid:!0});break}t.push({name:i.name,syntax:s,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(s,{vars:{$feature:"any"}})})}catch{t.push({name:i.name,invalid:!0});break}return t}get expressionsUsedInTitle(){var r,i,s;let t=((r=this.effectivePopupTemplate)==null?void 0:r.title)??"";return typeof t!="string"?[]:(t=t.toLowerCase(),((s=(i=this.effectivePopupTemplate)==null?void 0:i.expressionInfos)==null?void 0:s.filter((n=>t.includes(`{expression/${n.name.toLowerCase()}}`))))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((t=>t.invalid===!0))}get requiredFields(){var i,s;const t=new Set;if((i=this._arcadeTask)!=null&&i.value&&!this.hasBadExpressions)for(const n of((s=this.calculatedExpressions)==null?void 0:s.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(n.syntax);for(const l of o){const p=l.split("."),m=this.fieldsIndex.get(p.at(-1)??"");m&&t.add(m.name)}}catch{}const r=this._extractFieldNames(this.workingTitle);for(const n of r){const o=this.fieldsIndex.get(n);o&&t.add(o.name)}return this.objectIdField!=null&&t.add(this.objectIdField),t}get titleFromDisplayField(){var r,i;let t="";return this.displayField&&(t=((r=this.fieldsIndex.get(this.displayField))==null?void 0:r.name)??""),t||(t=((i=this.fieldsIndex.get(this.objectIdField))==null?void 0:i.name)??""),t?`{${t}}`:""}get workingTitle(){const t=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return t===""||t==null||this.hasBadExpressions||typeof t!="string"?this.titleFromDisplayField:t}async getTitle(t,r,i){const s=r.getObjectId()??r.attributes[t.objectIdField];return(await this.getTitles(t,[r],i)).get(s)??""}async getTitles(t,r,i){var o;const s=new Map,n=(i==null?void 0:i.timeZone)??"system";try{const[{substituteFieldsInLinksAndAttributes:l}]=await Promise.all([this.featureUtilsPromise,(o=this._arcadeTask)==null?void 0:o.promise]);i!=null&&i.fetchMissingFields&&(r=await this._checkAndReQueryGraphics(t,r));const{fieldInfoMap:p,workingTitle:m}=this,v=m&&p;r.forEach((_=>{const E=_.getObjectId()??_.attributes[t.objectIdField],$=v?l({attributes:_.attributes,expressionAttributes:null,fieldInfoMap:p,globalAttributes:this._createFormattedAttributes(t,_,n).global,layer:t,text:m}):"";s.set(E,$)}))}catch{}return s}async _checkAndReQueryGraphics(t,r){const i=r.map((s=>s.getObjectId()??s.attributes[t.objectIdField])).filter(Ga);if(i.length!==r.length)return r;if(r.some((s=>!Ese(s,this.requiredFields)))){const s=t.createQuery();s.where="1=1",s.outFields=[...this.requiredFields],s.objectIds=i;const n=await t.queryFeatures(s);if((n==null?void 0:n.features.length)===r.length)return n.features}return r}_createFieldInfoMap(t){const r=new Map;if(!t)return r;for(const i of t){if(!i.fieldName)continue;const s=this.fieldsIndex.get(i.fieldName),n=(s==null?void 0:s.name)??i.fieldName;i.fieldName=n,r.set(n.toLowerCase(),i)}return r}_createFormattedAttributes(t,r,i="system"){var l,p;const s=((l=this.effectivePopupTemplate)==null?void 0:l.fieldInfos)??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((p=this._arcadeTask)!=null&&p.value)){const m=this._arcadeTask.value.Feature.createFromGraphicLikeObject(r.geometry,r.attributes,t,null);for(const v of this.calculatedExpressions)try{n[`expression/${v.name}`]=v.func({vars:{$feature:m}})}catch{}}const o={...r.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:s,attributes:o,graphic:r,timeZone:i,layer:t,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(t){return cR(t).filter((r=>!(r.indexOf(aye)===0||r.indexOf(lye)===0)))}};a([A({readOnly:!0})],ps.prototype,"_arcadeTask",null),a([A()],ps.prototype,"_featureUtils",void 0),a([A({readOnly:!0})],ps.prototype,"featureUtilsPromise",null),a([A({readOnly:!0})],ps.prototype,"calculatedExpressions",null),a([A()],ps.prototype,"displayField",void 0),a([A()],ps.prototype,"effectivePopupTemplate",void 0),a([A()],ps.prototype,"expressionsUsedInTitle",null),a([A()],ps.prototype,"fieldsIndex",void 0),a([A()],ps.prototype,"fieldInfoMap",null),a([A()],ps.prototype,"fields",void 0),a([A()],ps.prototype,"objectIdField",void 0),a([A()],ps.prototype,"requiredFields",null),ps=a([P("esri.layers.support.TitleCreator")],ps);const lA=[];function uye(e,t){if(jb(e.url??""))return!0;const{wkid:r}=t;for(const i of lA){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}lA.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),lA.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),lA.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),lA.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),lA.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function cye(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const s=await zS(i.populateFromStyle());if(dr(r),s.ok===!1){const n=s.error;t!=null&&t.messages&&t.messages.push(new kn("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function dye({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:s},n){if(!r)return null;const o=fye({editFieldsInfo:t,fields:r,objectIdField:i},n);if(!o.length)return null;const l=gye({titleBase:s,fields:r,displayField:e}),p=yye();return new Z0({title:l,content:p,fieldInfos:o})}const pye=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):ise(e,t);function hye({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const i=e;return t&&(e=e.filter((s=>!t.includes(s.type)))),e===i&&(e=e.slice()),r!==!0&&e.sort(Aye),e}function Aye(e,t){return e.type==="oid"?-1:t.type==="oid"?1:G6(e)?-1:G6(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function fye(e,t){const r=t==null?void 0:t.visibleFieldNames;return hye({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||vye,sortDisabled:t==null?void 0:t.sortDisabled}).map((i=>new fR({fieldName:i.name,isEditable:rse(i,e),label:i.alias,format:mye(i),visible:pye(i,{...e,visibleFieldNames:r})})))}function mye(e){switch(e.type){case"small-integer":case"integer":case"single":return new Zw({digitSeparator:!0,places:0});case"double":return new Zw({digitSeparator:!0,places:2});case"string":return $se(e.name)?new Zw({digitSeparator:!0,places:0}):void 0;default:return}}function yye(){return[new y0,new m0]}function gye(e){const t=Wie(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function G6(e){var r;return(e.name&&e.name.toLowerCase())==="name"?!0:((r=e.alias)==null?void 0:r.toLowerCase())==="name"}const vye=["geometry","blob","raster","guid","xml"];var ja;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(ja||(ja={}));const Ni="FeatureLayer";function cw(e,t){return new Q("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function q6(e){return e&&e instanceof Te}const S3=iye();function E3(e,t,r){const i=!!(r!=null&&r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let Le=class extends Rfe(Nme(Epe(Hme(mpe(hpe(tpe(Ume(tye(rye(Kme(Yme(Ece(Dme(Gme(OS(rpe(Sce(Ge.ClonableMixin(br))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Ce.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=pS((async(t,r,i)=>{const{save:s,saveAs:n}=await ce(()=>import("./featureLayerUtils-BC5Zgmn6.js"),__vite__mapDeps([177,178,179,180,28]),import.meta.url);switch(t){case ja.SAVE:return s(this,r);case ja.SAVE_AS:return n(this,i,r)}}))}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var i;const t=e!=null?e.signal:null;if((i=this.portalItem)!=null&&i.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then((s=>this.initLayerProperties(s)))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(ka).then((async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new Q("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))})).then((()=>$Ae(this,"load",e)));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return cr(e),new ps({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,t){return t=t.layerDefinition||t,Mq(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}get effectiveEditingEnabled(){return MAe(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i!=null&&i.writeLayerSchema&&jr(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return gq(t.layerDefinition||t)}readObjectIdField(e,t){return vq(t.layerDefinition||t)}get parsedUrl(){const e=mi(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Up(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Up(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){V5(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){var s;t=t.layerDefinition||t;const i=(s=t.drawingInfo)==null?void 0:s.renderer;if(i){const n=pv(i,t,r)??void 0;return n||de.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),n}return g4(t,r)}set source(e){const t=this._get("source");t!==e&&(q6(t)&&this._resetMemorySource(t),q6(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Te?new Dl({layer:this,items:e}):e:null}readSource(e,t){const r=ci.fromJSON(t.featureSet);return new Dl({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,t){const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e=e==null?void 0:e.map((n=>$a.fromJSON(n))),this._fixTemplates(e,i),this._fixTemplates(e,s),e}readTitle(e,t){var s,n,o;const r=((s=t.layerDefinition)==null?void 0:s.name)??t.name,i=t.title||((n=t.layerDefinition)==null?void 0:n.title);if(r){const l=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?Wne(this.url,r):r;let p=r;if(!p&&this.url){const m=Ja(this.url);m!=null&&(p=m.title)}return p?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==p&&(p=l+" - "+p),OR(p)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){var r;return t.title||((r=t.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find((s=>s.name.toLowerCase()===r));i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e==null?void 0:e.map((n=>(n=Sa.fromJSON(n),this._fixTemplates(n.templates,i),this._fixTemplates(n.templates,s),n)))}readVisible(e,t){var r;return((r=t.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const r=await aAe(this,e,t,Ni);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const i=await lAe(this,e,t,r,Ni);return this.lastEditsEventDate=new Date,i}async applyEdits(e,t){return uAe(this,e,t)}async uploadAssets(e,t){return cAe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return dye(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await Sj(ce(()=>import("./FeatureLayerSource-C8Ftukyp.js"),__vite__mapDeps([181,71,78,182,183,184,74,118,73,119,185,186,57,50,187,188,85,83,84,11,10,12,189,9]),import.meta.url),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=wAe(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=Gw(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){const r=await dAe(this,e,t,Ni);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return pAe(this,e,Ni)}async getFeatureTitle(e,t){return this._titleCreator.getTitle(this,e,t)}async getFeatureTitles(e,t){return this._titleCreator.getTitles(this,e,t)}getFeatureType(e){return _q(this.types,this.typeIdField,e)}getFieldDomain(e,t){var r;return _Ae(this,e,t,((r=this.getField(e))==null?void 0:r.domain)??null)}async queryAttachments(e,t){return hAe(this,e,t,Ni)}async queryFeatures(e,t){const r=await this.load(),i=await r.source.queryFeatures(Ve.from(e)??r.createQuery(),t);if(i!=null&&i.features)for(const s of i.features)s.layer=s.sourceLayer=r;return i}async queryObjectIds(e,t){return await AAe(this,e,t,Ni)}async queryFeatureCount(e,t){return fAe(this,e,t,Ni)}async queryExtent(e,t){return mAe(this,e,t,Ni)}async queryRelatedFeatures(e,t){return yAe(this,e,t,Ni)}async queryRelatedFeaturesCount(e,t){return gAe(this,e,t,Ni)}async queryTopFeatures(e,t){var o;const{source:r,capabilities:i}=await this.load();if(!r.queryTopFeatures||!((o=i==null?void 0:i.query)!=null&&o.supportsTopFeaturesQuery))throw new Q(Ni,"Layer source does not support queryTopFeatures capability");const s=await ce(()=>import("./TopFeaturesQuery-CWKq-bce.js"),[],import.meta.url),n=await r.queryTopFeatures(s.default.from(e),t);if(n!=null&&n.features)for(const l of n.features)l.layer=l.sourceLayer=this;return n}async queryAttributeBins(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryAttributeBins)throw new Q(Ni,"Layer source does not support queryAttributeBins capability");OAe(e,i,Ni);const s=await ce(()=>import("./AttributeBinsQuery-CPvW6nix.js"),__vite__mapDeps([190,47,43,52]),import.meta.url),n=await r.queryAttributeBins(s.default.from(e),t);if(n.features)for(const o of n.features)o.layer=o.sourceLayer=this;return n}async queryTopObjectIds(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopObjectIds||!(i!=null&&i.query.supportsTopFeaturesQuery))throw new Q(Ni,"Layer source does not support queryTopObjectIds capability");const s=await ce(()=>import("./TopFeaturesQuery-CWKq-bce.js"),[],import.meta.url);return(await r.queryTopObjectIds(s.default.from(e),t)).filter(Ite)}async queryTopFeaturesExtent(e,t){var n;const{source:r,capabilities:i}=await this.load();if(!r.queryTopExtents||!((n=i==null?void 0:i.query)!=null&&n.supportsTopFeaturesQuery))throw new Q(Ni,"Layer source does not support queryTopExtents capability");const s=await ce(()=>import("./TopFeaturesQuery-CWKq-bce.js"),[],import.meta.url);return r.queryTopExtents(s.default.from(e),t)}async queryTopFeatureCount(e,t){var n;const{source:r,capabilities:i}=await this.load();if(!r.queryTopCount||!((n=i==null?void 0:i.query)!=null&&n.supportsTopFeaturesQuery))throw new Q(Ni,"Layer source does not support queryFeatureCount capability");const s=await ce(()=>import("./TopFeaturesQuery-CWKq-bce.js"),[],import.meta.url);return r.queryTopCount(s.default.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:i,showLegend:s}=r;(i==null?void 0:i.length)===1&&(super.read(i[0],t),s!=null&&super.read({showLegend:s},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:s}=t;if(this.dynamicDataSource)return s==null||s.push(cw(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&i!=="tables")return s==null||s.push(cw(this,`a table source can only be written to tables, not ${i}`)),null;if(this._hasMemorySource())return s==null||s.push(cw(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&i==="tables")return s==null||s.push(cw(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new Q(Ni,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||uye(this,e))}async save(e){return this._debouncedSaveOperations(ja.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(ja.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){var s;let i=(s=e.layerDefinition)==null?void 0:s.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((t=>t.trim())).includes("editing")}_writeEditingEnabled(e,t,r,i){var s,n;if(!e){const o=(n=(s=this.capabilities)==null?void 0:s.operations)!=null&&n.supportsSync?"Query,Sync":"Query";jr("layerDefinition.capabilities",o,t),r&&!(i!=null&&i.writeLayerSchema)&&(t.capabilities=o)}}_fetchFirstValidLayerId(e){return Nt(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((t=>{const r=t.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)}))}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),V5(this.renderer,this.fieldsIndex),pU(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),cye(this,{origin:"service"})}async hasDataChanged(){return vAe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,r;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some((i=>i.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach((r=>{var s;const i=(s=r.prototype)==null?void 0:s.attributes;i&&t&&delete i[t]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new Q("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new Q("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((t=>{t.layer=this,t.sourceLayer=this})),this.addHandles([e.on("after-add",(t=>{t.item.layer=this,t.item.sourceLayer=this})),e.on("after-remove",(t=>{t.item.layer=null,t.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((t=>{t.layer=null,t.sourceLayer=null})),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};a([A({clonable:!1,readOnly:!0})],Le.prototype,"_titleCreator",null),a([A(Upe)],Le.prototype,"attributeTableTemplate",void 0),a([pe("service","capabilities")],Le.prototype,"readCapabilities",null),a([A({json:{origins:{"web-scene":{write:!1}},write:!0}})],Le.prototype,"charts",void 0),a([A({readOnly:!0})],Le.prototype,"createQueryVersion",null),a([A({json:{read:{source:"layerDefinition.copyrightText"}}})],Le.prototype,"copyright",void 0),a([A({json:{read:{source:"layerDefinition.displayField"}}})],Le.prototype,"displayField",void 0),a([A({types:bc,readOnly:!0})],Le.prototype,"defaultSymbol",void 0),a([A({type:jo})],Le.prototype,"dynamicDataSource",void 0),a([A({type:Boolean})],Le.prototype,"editingEnabled",null),a([pe(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Le.prototype,"readEditingEnabled",null),a([pe("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Le.prototype,"readEditingEnabledFromWebMap",null),a([ye(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Le.prototype,"writeEditingEnabled",null),a([ye("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Le.prototype,"writeEditingEnabledToWebMap",null),a([A({readOnly:!0})],Le.prototype,"effectiveEditingEnabled",null),a([A({clonable:!1,readOnly:!0})],Le.prototype,"featureTitleFields",null),a([A({...S3.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:E3}}}}})],Le.prototype,"fields",void 0),a([A(S3.fieldsIndex)],Le.prototype,"fieldsIndex",void 0),a([A({type:Cue,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Le.prototype,"formTemplate",void 0),a([A({json:{read:{source:"layerDefinition.extent"}}})],Le.prototype,"fullExtent",void 0),a([A({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:E3,writer(e,t,r){const i=e?NM.toJSON(e):null;i&&jr(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:NM.read}}})],Le.prototype,"geometryType",void 0),a([A({json:{read:{source:"layerDefinition.hasM"}}})],Le.prototype,"hasM",void 0),a([A({json:{read:{source:"layerDefinition.hasZ"}}})],Le.prototype,"hasZ",void 0),a([A(Fpe)],Le.prototype,"id",void 0),a([A({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Le.prototype,"infoFor3D",void 0),a([A({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Le.prototype,"isTable",void 0),a([pe("service","isTable",["type","geometryType"]),pe("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Le.prototype,"readIsTable",null),a([ye("web-map","isTable")],Le.prototype,"writeIsTable",null),a([A(VS)],Le.prototype,"labelsVisible",void 0),a([A({type:[lr],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:V6,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:V6,write:{layerContainerTypes:tr}}})],Le.prototype,"labelingInfo",void 0),a([A((()=>{const e=H(Dpe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){jr(i,RS(t),r)}}},e})())],Le.prototype,"opacity",void 0),a([A(Npe)],Le.prototype,"legendEnabled",void 0),a([A({type:["show","hide"],json:(()=>{const e=H(tq.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Le.prototype,"listMode",void 0),a([pe("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Le.prototype,"readGlobalIdField",null),a([A({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:E3}}}}})],Le.prototype,"objectIdField",void 0),a([pe("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Le.prototype,"readObjectIdField",null),a([A({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:tr}}})],Le.prototype,"operationalLayerType",void 0),a([A(S3.outFields)],Le.prototype,"outFields",void 0),a([A({readOnly:!0})],Le.prototype,"parsedUrl",null),a([A({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Le.prototype,"path",void 0),a([A(US)],Le.prototype,"popupEnabled",void 0),a([A({type:Z0,json:{name:"popupInfo",write:!0}})],Le.prototype,"popupTemplate",void 0),a([A({readOnly:!0})],Le.prototype,"defaultPopupTemplate",null),a([A({types:i1,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:yme,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:tr,overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema,layerContainerTypes:tr})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema,layerContainerTypes:tr})}}})],Le.prototype,"renderer",null),a([pe("service","renderer",["drawingInfo.renderer","defaultSymbol"]),pe("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Le.prototype,"readRenderer",null),a([A()],Le.prototype,"resourceInfo",void 0),a([A((()=>{const e=H(Ope);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Le.prototype,"screenSizePerspectiveEnabled",void 0),a([A({clonable:!1})],Le.prototype,"source",null),a([Ft("source")],Le.prototype,"castSource",null),a([pe("portal-item","source",["featureSet"]),pe("web-map","source",["featureSet"])],Le.prototype,"readSource",null),a([A({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Le.prototype,"spatialReference",void 0),a([A({type:Number})],Le.prototype,"subtypeCode",void 0),a([A({type:[$a]})],Le.prototype,"templates",void 0),a([pe("templates",["editFieldsInfo","creatorField","editorField","templates"])],Le.prototype,"readTemplates",null),a([A({type:Ti})],Le.prototype,"timeInfo",void 0),a([A()],Le.prototype,"title",void 0),a([pe("service","title",["name"]),pe("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Le.prototype,"readTitle",null),a([pe("web-map","title",["layerDefinition.name","title"])],Le.prototype,"readTitleFromWebMap",null),a([A({type:String})],Le.prototype,"sublayerTitleMode",void 0),a([A({json:{read:!1}})],Le.prototype,"type",void 0),a([A({type:String})],Le.prototype,"typeIdField",void 0),a([pe("service","typeIdField"),pe("typeIdField",["layerDefinition.typeIdField"])],Le.prototype,"readTypeIdField",null),a([A({type:[Sa]})],Le.prototype,"types",void 0),a([pe("service","types",["types"]),pe("types",["layerDefinition.types"])],Le.prototype,"readTypes",null),a([A({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:tr}}}}})],Le.prototype,"visible",void 0),a([pe("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Le.prototype,"readVisible",null),Le=a([P("esri.layers.FeatureLayer")],Le);const y8e=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Le}},Symbol.toStringTag,{value:"Module"}));var Qc=(function(e){e=e||{};var t=typeof e<"u"?e:{},r={},i;for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);var s="";function n(se){return t.locateFile?t.locateFile(se,s):s+se}var o;typeof document<"u"&&document.currentScript&&(s=document.currentScript.src),s.indexOf("blob:")!==0?s=s.substr(0,s.lastIndexOf("/")+1):s="",o=function(he,ue,Ae){var d=new XMLHttpRequest;d.open("GET",he,!0),d.responseType="arraybuffer",d.onload=function(){if(d.status==200||d.status==0&&d.response){ue(d.response);return}var Tt=fm(he);if(Tt){ue(Tt.buffer);return}Ae()},d.onerror=Ae,d.send(null)};var l=t.print||console.log.bind(console),p=t.printErr||console.warn.bind(console);for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);r=null,t.arguments&&t.arguments;var m=0,v=function(se){m=se},_=function(){return m},E=8;function $(se,he,ue,Ae){switch(ue=ue||"i8",ue.charAt(ue.length-1)==="*"&&(ue="i32"),ue){case"i1":Re[se>>0]=he;break;case"i8":Re[se>>0]=he;break;case"i16":qe[se>>1]=he;break;case"i32":Ot[se>>2]=he;break;case"i64":Am=[he>>>0,(mu=he,+CE(mu)>=1?mu>0?(OE(+RE(mu/4294967296),4294967295)|0)>>>0:~~+kE((mu-+(~~mu>>>0))/4294967296)>>>0:0)],Ot[se>>2]=Am[0],Ot[se+4>>2]=Am[1];break;case"float":ni[se>>2]=he;break;case"double":Ct[se>>3]=he;break;default:Rn("invalid type for setValue: "+ue)}}function M(se,he,ue){switch(he=he||"i8",he.charAt(he.length-1)==="*"&&(he="i32"),he){case"i1":return Re[se>>0];case"i8":return Re[se>>0];case"i16":return qe[se>>1];case"i32":return Ot[se>>2];case"i64":return Ot[se>>2];case"float":return ni[se>>2];case"double":return Ct[se>>3];default:Rn("invalid type for getValue: "+he)}return null}var k=!1;function N(se,he){se||Rn("Assertion failed: "+he)}function U(se){var he=t["_"+se];return N(he,"Cannot call unknown function "+se+", make sure it is exported"),he}function G(se,he,ue,Ae,d){var R={string:function(vt){var Rs=0;if(vt!=null&&vt!==0){var ch=(vt.length<<2)+1;Rs=m1(ch),we(vt,Rs,ch)}return Rs},array:function(vt){var Rs=m1(vt.length);return xe(vt,Rs),Rs}};function Tt(vt){return he==="string"?ne(vt):he==="boolean"?!!vt:vt}var Ut=U(se),ir=[],gt=0;if(Ae)for(var kt=0;kt<Ae.length;kt++){var rt=R[ue[kt]];rt?(gt===0&&(gt=HE()),ir[kt]=rt(Ae[kt])):ir[kt]=Ae[kt]}var jt=Ut.apply(null,ir);return jt=Tt(jt),gt!==0&&qE(gt),jt}function W(se,he,ue,Ae){ue=ue||[];var d=ue.every(function(Tt){return Tt==="number"}),R=he!=="string";return R&&d&&!Ae?U(se):function(){return G(se,he,ue,arguments)}}var Z=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ie(se,he,ue){for(var Ae=he+ue,d=he;se[d]&&!(d>=Ae);)++d;if(d-he>16&&se.subarray&&Z)return Z.decode(se.subarray(he,d));for(var R="";he<d;){var Tt=se[he++];if(!(Tt&128)){R+=String.fromCharCode(Tt);continue}var Ut=se[he++]&63;if((Tt&224)==192){R+=String.fromCharCode((Tt&31)<<6|Ut);continue}var ir=se[he++]&63;if((Tt&240)==224?Tt=(Tt&15)<<12|Ut<<6|ir:Tt=(Tt&7)<<18|Ut<<12|ir<<6|se[he++]&63,Tt<65536)R+=String.fromCharCode(Tt);else{var gt=Tt-65536;R+=String.fromCharCode(55296|gt>>10,56320|gt&1023)}}return R}function ne(se,he){return se?ie(pt,se,he):""}function ge(se,he,ue,Ae){if(!(Ae>0))return 0;for(var d=ue,R=ue+Ae-1,Tt=0;Tt<se.length;++Tt){var Ut=se.charCodeAt(Tt);if(Ut>=55296&&Ut<=57343){var ir=se.charCodeAt(++Tt);Ut=65536+((Ut&1023)<<10)|ir&1023}if(Ut<=127){if(ue>=R)break;he[ue++]=Ut}else if(Ut<=2047){if(ue+1>=R)break;he[ue++]=192|Ut>>6,he[ue++]=128|Ut&63}else if(Ut<=65535){if(ue+2>=R)break;he[ue++]=224|Ut>>12,he[ue++]=128|Ut>>6&63,he[ue++]=128|Ut&63}else{if(ue+3>=R)break;he[ue++]=240|Ut>>18,he[ue++]=128|Ut>>12&63,he[ue++]=128|Ut>>6&63,he[ue++]=128|Ut&63}}return he[ue]=0,ue-d}function we(se,he,ue){return ge(se,pt,he,ue)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function xe(se,he){Re.set(se,he)}function Ie(se,he){return se%he>0&&(se+=he-se%he),se}var $e,Re,pt,qe,Ot,ni,Ct;function It(se){$e=se,t.HEAP8=Re=new Int8Array(se),t.HEAP16=qe=new Int16Array(se),t.HEAP32=Ot=new Int32Array(se),t.HEAPU8=pt=new Uint8Array(se),t.HEAPU16=new Uint16Array(se),t.HEAPU32=new Uint32Array(se),t.HEAPF32=ni=new Float32Array(se),t.HEAPF64=Ct=new Float64Array(se)}var Gi=5271536,u1=28624,pm=t.TOTAL_MEMORY||33554432;t.buffer?$e=t.buffer:$e=new ArrayBuffer(pm),pm=$e.byteLength,It($e),Ot[u1>>2]=Gi;function uh(se){for(;se.length>0;){var he=se.shift();if(typeof he=="function"){he();continue}var ue=he.func;typeof ue=="number"?he.arg===void 0?t.dynCall_v(ue):t.dynCall_vi(ue,he.arg):ue(he.arg===void 0?null:he.arg)}}var c1=[],_E=[],SE=[],d1=[];function EE(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)IE(t.preRun.shift());uh(c1)}function TE(){uh(_E)}function $E(){uh(SE)}function xE(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)ME(t.postRun.shift());uh(d1)}function IE(se){c1.unshift(se)}function ME(se){d1.unshift(se)}var CE=Math.abs,kE=Math.ceil,RE=Math.floor,OE=Math.min,tl=0,rd=null;function p1(se){tl++,t.monitorRunDependencies&&t.monitorRunDependencies(tl)}function h1(se){if(tl--,t.monitorRunDependencies&&t.monitorRunDependencies(tl),tl==0&&rd){var he=rd;rd=null,he()}}t.preloadedImages={},t.preloadedAudios={};var gi=null,hm="data:application/octet-stream;base64,";function A1(se){return String.prototype.startsWith?se.startsWith(hm):se.indexOf(hm)===0}var mu,Am;gi="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAdmVydGV4Um90YXRpb25zAGNlbGxUb1ZlcnRleABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var PE=28640;function NE(se,he,ue,Ae){Rn("Assertion failed: "+ne(se)+", at: "+[he?ne(he):"unknown filename",ue,Ae?ne(Ae):"unknown function"])}function f1(){return Re.length}function NO(se,he,ue){pt.set(pt.subarray(he,he+ue),se)}function LE(se){return t.___errno_location&&(Ot[t.___errno_location()>>2]=se),se}function DE(se){Rn("OOM")}function FE(se){try{var he=new ArrayBuffer(se);return he.byteLength!=se?void 0:(new Int8Array(he).set(Re),GE(he),It(he),1)}catch{}}function jE(se){var he=f1(),ue=16777216,Ae=2147483648-ue;if(se>Ae)return!1;for(var d=16777216,R=Math.max(he,d);R<se;)R<=536870912?R=Ie(2*R,ue):R=Math.min(Ie((3*R+2147483648)/4,ue),Ae);var Tt=FE(R);return!!Tt}var BE=typeof atob=="function"?atob:function(se){var he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ue="",Ae,d,R,Tt,Ut,ir,gt,kt=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Tt=he.indexOf(se.charAt(kt++)),Ut=he.indexOf(se.charAt(kt++)),ir=he.indexOf(se.charAt(kt++)),gt=he.indexOf(se.charAt(kt++)),Ae=Tt<<2|Ut>>4,d=(Ut&15)<<4|ir>>2,R=(ir&3)<<6|gt,ue=ue+String.fromCharCode(Ae),ir!==64&&(ue=ue+String.fromCharCode(d)),gt!==64&&(ue=ue+String.fromCharCode(R));while(kt<se.length);return ue};function UE(se){try{for(var he=BE(se),ue=new Uint8Array(he.length),Ae=0;Ae<he.length;++Ae)ue[Ae]=he.charCodeAt(Ae);return ue}catch{throw new Error("Converting base64 string to bytes failed.")}}function fm(se){if(A1(se))return UE(se.slice(hm.length))}var VE={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},zE={b:v,c:_,d:NE,e:LE,f:f1,g:NO,h:jE,i:DE,o:PE,p:u1},ve=(function(se,he,ue){"almost asm";var Ae=new se.Int8Array(ue),d=new se.Int32Array(ue);new se.Uint8Array(ue),new se.Float32Array(ue);var R=new se.Float64Array(ue),Tt=he.o|0,Ut=he.p|0,ir=se.Math.floor,gt=se.Math.abs,kt=se.Math.sqrt,rt=se.Math.pow,jt=se.Math.cos,vt=se.Math.sin,Rs=se.Math.tan,ch=se.Math.acos,ym=se.Math.asin,gm=se.Math.atan,qi=se.Math.atan2,pr=se.Math.ceil,On=se.Math.imul,dh=se.Math.min,WE=se.Math.max,fo=se.Math.clz32,dt=he.b,D=he.c,nt=he.d,us=he.e,QE=he.f,JE=he.g,vm=he.h,v1=he.i,I=28656;function ae(c){return Ae=new Int8Array(c),d=new Int32Array(c),R=new Float64Array(c),ue=c,!0}function Se(c){c=c|0;var u=0;return u=I,I=I+c|0,I=I+15&-16,u|0}function tt(){return I|0}function Vt(c){c=c|0,I=c}function wr(c,u){c=c|0,I=c}function Ur(c,u){c=c|0,u=u|0;var h=0,f=0,g=0;return(c|0)<0?(u=2,u|0):(c|0)>13780509?(u=E1(15,u)|0,u|0):(h=((c|0)<0)<<31>>31,g=bi(c|0,h|0,3,0)|0,f=D()|0,h=Ye(c|0,h|0,1,0)|0,h=bi(g|0,f|0,h|0,D()|0)|0,h=Ye(h|0,D()|0,1,0)|0,c=D()|0,d[u>>2]=h,d[u+4>>2]=c,u=0,u|0)}function oi(c,u,h,f){return c=c|0,u=u|0,h=h|0,f=f|0,LO(c,u,h,f,0)|0}function LO(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0;if(T=I,I=I+16|0,b=T,!(DO(c,u,h,f,g)|0))return f=0,I=T,f|0;do if((h|0)>=0){if((h|0)>13780509){if(w=E1(15,b)|0,w|0)break;S=b,b=d[S>>2]|0,S=d[S+4>>2]|0}else w=((h|0)<0)<<31>>31,x=bi(h|0,w|0,3,0)|0,S=D()|0,w=Ye(h|0,w|0,1,0)|0,w=bi(x|0,S|0,w|0,D()|0)|0,w=Ye(w|0,D()|0,1,0)|0,S=D()|0,d[b>>2]=w,d[b+4>>2]=S,b=w;if(bu(f|0,0,b<<3|0)|0,g|0){bu(g|0,0,b<<2|0)|0,w=ta(c,u,h,f,g,b,S,0)|0;break}w=Ps(b,4)|0,w?(x=ta(c,u,h,f,w,b,S,0)|0,Xe(w),w=x):w=13}else w=2;while(!1);return x=w,I=T,x|0}function DO(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0;if(V=I,I=I+16|0,j=V,B=V+8|0,F=j,d[F>>2]=c,d[F+4>>2]=u,(h|0)<0)return B=2,I=V,B|0;if(w=f,d[w>>2]=c,d[w+4>>2]=u,w=(g|0)!=0,w&&(d[g>>2]=0),Kt(c,u)|0)return B=9,I=V,B|0;d[B>>2]=0;e:do if((h|0)>=1)if(w)for(C=1,x=0,L=0,F=1,w=c;;){if(!(x|L)){if(w=vi(w,u,4,B,j)|0,w|0)break e;if(u=j,w=d[u>>2]|0,u=d[u+4>>2]|0,Kt(w,u)|0){w=9;break e}}if(w=vi(w,u,d[26800+(L<<2)>>2]|0,B,j)|0,w|0)break e;if(u=j,w=d[u>>2]|0,u=d[u+4>>2]|0,c=f+(C<<3)|0,d[c>>2]=w,d[c+4>>2]=u,d[g+(C<<2)>>2]=F,c=x+1|0,b=(c|0)==(F|0),S=L+1|0,T=(S|0)==6,Kt(w,u)|0){w=9;break e}if(F=F+(T&b&1)|0,(F|0)>(h|0)){w=0;break}else C=C+1|0,x=b?0:c,L=b?T?0:S:L}else for(C=1,x=0,L=0,F=1,w=c;;){if(!(x|L)){if(w=vi(w,u,4,B,j)|0,w|0)break e;if(u=j,w=d[u>>2]|0,u=d[u+4>>2]|0,Kt(w,u)|0){w=9;break e}}if(w=vi(w,u,d[26800+(L<<2)>>2]|0,B,j)|0,w|0)break e;if(u=j,w=d[u>>2]|0,u=d[u+4>>2]|0,c=f+(C<<3)|0,d[c>>2]=w,d[c+4>>2]=u,c=x+1|0,b=(c|0)==(F|0),S=L+1|0,T=(S|0)==6,Kt(w,u)|0){w=9;break e}if(F=F+(T&b&1)|0,(F|0)>(h|0)){w=0;break}else C=C+1|0,x=b?0:c,L=b?T?0:S:L}else w=0;while(!1);return B=w,I=V,B|0}function ta(c,u,h,f,g,w,b,S){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0,w=w|0,b=b|0,S=S|0;var T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0;if(V=I,I=I+16|0,j=V+8|0,B=V,T=yh(c|0,u|0,w|0,b|0)|0,C=D()|0,L=f+(T<<3)|0,J=L,oe=d[J>>2]|0,J=d[J+4>>2]|0,x=(oe|0)==(c|0)&(J|0)==(u|0),!((oe|0)==0&(J|0)==0|x))do T=Ye(T|0,C|0,1,0)|0,T=mh(T|0,D()|0,w|0,b|0)|0,C=D()|0,L=f+(T<<3)|0,oe=L,J=d[oe>>2]|0,oe=d[oe+4>>2]|0,x=(J|0)==(c|0)&(oe|0)==(u|0);while(!((J|0)==0&(oe|0)==0|x));if(T=g+(T<<2)|0,x&&(d[T>>2]|0)<=(S|0)||(oe=L,d[oe>>2]=c,d[oe+4>>2]=u,d[T>>2]=S,(S|0)>=(h|0)))return oe=0,I=V,oe|0;switch(x=S+1|0,d[j>>2]=0,T=vi(c,u,2,j,B)|0,T|0){case 9:{F=9;break}case 0:{T=B,T=ta(d[T>>2]|0,d[T+4>>2]|0,h,f,g,w,b,x)|0,T||(F=9);break}}e:do if((F|0)==9){switch(d[j>>2]=0,T=vi(c,u,3,j,B)|0,T|0){case 9:break;case 0:{if(T=B,T=ta(d[T>>2]|0,d[T+4>>2]|0,h,f,g,w,b,x)|0,T|0)break e;break}default:break e}switch(d[j>>2]=0,T=vi(c,u,1,j,B)|0,T|0){case 9:break;case 0:{if(T=B,T=ta(d[T>>2]|0,d[T+4>>2]|0,h,f,g,w,b,x)|0,T|0)break e;break}default:break e}switch(d[j>>2]=0,T=vi(c,u,5,j,B)|0,T|0){case 9:break;case 0:{if(T=B,T=ta(d[T>>2]|0,d[T+4>>2]|0,h,f,g,w,b,x)|0,T|0)break e;break}default:break e}switch(d[j>>2]=0,T=vi(c,u,4,j,B)|0,T|0){case 9:break;case 0:{if(T=B,T=ta(d[T>>2]|0,d[T+4>>2]|0,h,f,g,w,b,x)|0,T|0)break e;break}default:break e}switch(d[j>>2]=0,T=vi(c,u,6,j,B)|0,T|0){case 9:break;case 0:{if(T=B,T=ta(d[T>>2]|0,d[T+4>>2]|0,h,f,g,w,b,x)|0,T|0)break e;break}default:break e}return oe=0,I=V,oe|0}while(!1);return oe=T,I=V,oe|0}function vi(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0;if(h>>>0>6)return g=1,g|0;if(L=(d[f>>2]|0)%6|0,d[f>>2]=L,(L|0)>0){w=0;do h=nd(h)|0,w=w+1|0;while((w|0)<(d[f>>2]|0))}if(L=fe(c|0,u|0,45)|0,D()|0,C=L&127,C>>>0>121)return g=5,g|0;T=Os(c,u)|0,w=fe(c|0,u|0,52)|0,D()|0,w=w&15;e:do if(!w)x=8;else{for(;;){if(b=(15-w|0)*3|0,S=fe(c|0,u|0,b|0)|0,D()|0,S=S&7,(S|0)==7){u=5;break}if(B=(Pn(w)|0)==0,w=w+-1|0,F=be(7,0,b|0)|0,u=u&~(D()|0),j=be(d[(B?432:16)+(S*28|0)+(h<<2)>>2]|0,0,b|0)|0,b=D()|0,h=d[(B?640:224)+(S*28|0)+(h<<2)>>2]|0,c=j|c&~F,u=b|u,!h){h=0;break e}if(!w){x=8;break e}}return u|0}while(!1);(x|0)==8&&(B=d[848+(C*28|0)+(h<<2)>>2]|0,j=be(B|0,0,45)|0,c=j|c,u=D()|0|u&-1040385,h=d[4272+(C*28|0)+(h<<2)>>2]|0,(B&127|0)==127&&(B=be(d[848+(C*28|0)+20>>2]|0,0,45)|0,u=D()|0|u&-1040385,h=d[4272+(C*28|0)+20>>2]|0,c=od(B|c,u)|0,u=D()|0,d[f>>2]=(d[f>>2]|0)+1)),S=fe(c|0,u|0,45)|0,D()|0,S=S&127;e:do if(hr(S)|0){t:do if((Os(c,u)|0)==1){if((C|0)!=(S|0))if(UO(S,d[7696+(C*28|0)>>2]|0)|0){c=cT(c,u)|0,b=1,u=D()|0;break}else nt(27795,26864,533,26872);switch(T|0){case 3:{c=od(c,u)|0,u=D()|0,d[f>>2]=(d[f>>2]|0)+1,b=0;break t}case 5:{c=cT(c,u)|0,u=D()|0,d[f>>2]=(d[f>>2]|0)+5,b=0;break t}case 0:return B=9,B|0;default:return B=1,B|0}}else b=0;while(!1);if((h|0)>0){w=0;do c=uT(c,u)|0,u=D()|0,w=w+1|0;while((w|0)!=(h|0))}if((C|0)!=(S|0)){if(!(YE(S)|0)){if((b|0)!=0|(Os(c,u)|0)!=5)break;d[f>>2]=(d[f>>2]|0)+1;break}switch(L&127){case 8:case 118:break e}(Os(c,u)|0)!=3&&(d[f>>2]=(d[f>>2]|0)+1)}}else if((h|0)>0){w=0;do c=od(c,u)|0,u=D()|0,w=w+1|0;while((w|0)!=(h|0))}while(!1);return d[f>>2]=((d[f>>2]|0)+h|0)%6|0,B=g,d[B>>2]=c,d[B+4>>2]=u,B=0,B|0}function pY(c,u,h,f){return c=c|0,u=u|0,h=h|0,f=f|0,FO(c,u,h,f)|0?(bu(f|0,0,h*48|0)|0,f=hY(c,u,h,f)|0,f|0):(f=0,f|0)}function FO(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0;if(B=I,I=I+16|0,F=B,j=B+8|0,L=F,d[L>>2]=c,d[L+4>>2]=u,(h|0)<0)return j=2,I=B,j|0;if(!h)return j=f,d[j>>2]=c,d[j+4>>2]=u,j=0,I=B,j|0;d[j>>2]=0;e:do if(Kt(c,u)|0)c=9;else{g=0,L=c;do{if(c=vi(L,u,4,j,F)|0,c|0)break e;if(u=F,L=d[u>>2]|0,u=d[u+4>>2]|0,g=g+1|0,Kt(L,u)|0){c=9;break e}}while((g|0)<(h|0));C=f,d[C>>2]=L,d[C+4>>2]=u,C=h+-1|0,x=0,c=1;do{if(g=26800+(x<<2)|0,(x|0)==5)for(b=d[g>>2]|0,w=0,g=c;;){if(c=F,c=vi(d[c>>2]|0,d[c+4>>2]|0,b,j,F)|0,c|0)break e;if((w|0)!=(C|0))if(T=F,S=d[T>>2]|0,T=d[T+4>>2]|0,c=f+(g<<3)|0,d[c>>2]=S,d[c+4>>2]=T,!(Kt(S,T)|0))c=g+1|0;else{c=9;break e}else c=g;if(w=w+1|0,(w|0)>=(h|0))break;g=c}else for(b=F,T=d[g>>2]|0,S=0,g=c,w=d[b>>2]|0,b=d[b+4>>2]|0;;){if(c=vi(w,b,T,j,F)|0,c|0)break e;if(b=F,w=d[b>>2]|0,b=d[b+4>>2]|0,c=f+(g<<3)|0,d[c>>2]=w,d[c+4>>2]=b,c=g+1|0,Kt(w,b)|0){c=9;break e}if(S=S+1|0,(S|0)>=(h|0))break;g=c}x=x+1|0}while(x>>>0<6);c=F,c=(L|0)==(d[c>>2]|0)&&(u|0)==(d[c+4>>2]|0)?0:9}while(!1);return j=c,I=B,j|0}function hY(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0;if(L=I,I=I+16|0,b=L,!h)return d[f>>2]=c,d[f+4>>2]=u,f=0,I=L,f|0;do if((h|0)>=0){if((h|0)>13780509){if(g=E1(15,b)|0,g|0)break;w=b,g=d[w>>2]|0,w=d[w+4>>2]|0}else g=((h|0)<0)<<31>>31,C=bi(h|0,g|0,3,0)|0,w=D()|0,g=Ye(h|0,g|0,1,0)|0,g=bi(C|0,w|0,g|0,D()|0)|0,g=Ye(g|0,D()|0,1,0)|0,w=D()|0,C=b,d[C>>2]=g,d[C+4>>2]=w;if(x=Ps(g,8)|0,!x)g=13;else{if(C=Ps(g,4)|0,!C){Xe(x),g=13;break}if(g=ta(c,u,h,x,C,g,w,0)|0,g|0){Xe(x),Xe(C);break}if(u=d[b>>2]|0,b=d[b+4>>2]|0,(b|0)>0|(b|0)==0&u>>>0>0){g=0,S=0,T=0;do c=x+(S<<3)|0,w=d[c>>2]|0,c=d[c+4>>2]|0,!((w|0)==0&(c|0)==0)&&(d[C+(S<<2)>>2]|0)==(h|0)&&(F=f+(g<<3)|0,d[F>>2]=w,d[F+4>>2]=c,g=g+1|0),S=Ye(S|0,T|0,1,0)|0,T=D()|0;while((T|0)<(b|0)|(T|0)==(b|0)&S>>>0<u>>>0)}Xe(x),Xe(C),g=0}}else g=2;while(!1);return F=g,I=L,F|0}function ZE(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0;for(S=I,I=I+16|0,w=S,b=S+8|0,g=(Kt(c,u)|0)==0,g=g?1:2;;){if(d[b>>2]=0,x=(vi(c,u,g,b,w)|0)==0,T=w,x&((d[T>>2]|0)==(h|0)?(d[T+4>>2]|0)==(f|0):0)){c=4;break}if(g=g+1|0,g>>>0>=7){g=7,c=4;break}}return(c|0)==4?(I=S,g|0):0}function AY(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0;if(S=I,I=I+48|0,g=S+16|0,w=S+8|0,b=S,h=Tm(h)|0,h|0)return b=h,I=S,b|0;if(x=c,T=d[x+4>>2]|0,h=w,d[h>>2]=d[x>>2],d[h+4>>2]=T,hP(w,g),h=qO(g,u,b)|0,!h){if(u=d[w>>2]|0,w=d[c+8>>2]|0,(w|0)>0){g=d[c+12>>2]|0,h=0;do u=(d[g+(h<<3)>>2]|0)+u|0,h=h+1|0;while((h|0)<(w|0))}h=b,g=d[h>>2]|0,h=d[h+4>>2]|0,w=((u|0)<0)<<31>>31,(h|0)<(w|0)|(h|0)==(w|0)&g>>>0<u>>>0?(h=b,d[h>>2]=u,d[h+4>>2]=w,h=w):u=g,T=Ye(u|0,h|0,12,0)|0,x=D()|0,h=b,d[h>>2]=T,d[h+4>>2]=x,h=f,d[h>>2]=T,d[h+4>>2]=x,h=0}return x=h,I=S,x|0}function jO(c,u,h,f,g,w,b){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0,w=w|0,b=b|0;var S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0,He=0,Fe=0,ht=0,ft=0,$t=0,at=0,We=0,_e=0,St=0,Zt=0,wt=0,Yt=0,ds=0,xP=0;if(Zt=I,I=I+64|0,at=Zt+48|0,We=Zt+32|0,_e=Zt+24|0,Ee=Zt+8|0,He=Zt,T=d[c>>2]|0,(T|0)<=0)return St=0,I=Zt,St|0;for(Fe=c+4|0,ht=at+8|0,ft=We+8|0,$t=Ee+8|0,S=0,X=0;;){x=d[Fe>>2]|0,re=x+(X<<4)|0,d[at>>2]=d[re>>2],d[at+4>>2]=d[re+4>>2],d[at+8>>2]=d[re+8>>2],d[at+12>>2]=d[re+12>>2],(X|0)==(T+-1|0)?(d[We>>2]=d[x>>2],d[We+4>>2]=d[x+4>>2],d[We+8>>2]=d[x+8>>2],d[We+12>>2]=d[x+12>>2]):(re=x+(X+1<<4)|0,d[We>>2]=d[re>>2],d[We+4>>2]=d[re+4>>2],d[We+8>>2]=d[re+8>>2],d[We+12>>2]=d[re+12>>2]),T=$Y(at,We,f,_e)|0;e:do if(T)x=0,S=T;else if(T=_e,x=d[T>>2]|0,T=d[T+4>>2]|0,(T|0)>0|(T|0)==0&x>>>0>0){oe=0,re=0;t:for(;;){if(Yt=1/(+(x>>>0)+4294967296*+(T|0)),xP=+R[at>>3],T=wi(x|0,T|0,oe|0,re|0)|0,ds=+(T>>>0)+4294967296*+(D()|0),wt=+(oe>>>0)+4294967296*+(re|0),R[Ee>>3]=Yt*(xP*ds)+Yt*(+R[We>>3]*wt),R[$t>>3]=Yt*(+R[ht>>3]*ds)+Yt*(+R[ft>>3]*wt),T=dT(Ee,f,He)|0,T|0){S=T;break}J=He,V=d[J>>2]|0,J=d[J+4>>2]|0,F=yh(V|0,J|0,u|0,h|0)|0,C=D()|0,T=b+(F<<3)|0,L=T,x=d[L>>2]|0,L=d[L+4>>2]|0;r:do if((x|0)==0&(L|0)==0)z=T,St=16;else for(j=0,B=0;;){if((j|0)>(h|0)|(j|0)==(h|0)&B>>>0>u>>>0){S=1;break t}if((x|0)==(V|0)&(L|0)==(J|0))break r;if(T=Ye(F|0,C|0,1,0)|0,F=mh(T|0,D()|0,u|0,h|0)|0,C=D()|0,B=Ye(B|0,j|0,1,0)|0,j=D()|0,T=b+(F<<3)|0,L=T,x=d[L>>2]|0,L=d[L+4>>2]|0,(x|0)==0&(L|0)==0){z=T,St=16;break}}while(!1);if((St|0)==16&&(St=0,!((V|0)==0&(J|0)==0))&&(B=z,d[B>>2]=V,d[B+4>>2]=J,B=w+(d[g>>2]<<3)|0,d[B>>2]=V,d[B+4>>2]=J,B=g,B=Ye(d[B>>2]|0,d[B+4>>2]|0,1,0)|0,V=D()|0,J=g,d[J>>2]=B,d[J+4>>2]=V),oe=Ye(oe|0,re|0,1,0)|0,re=D()|0,T=_e,x=d[T>>2]|0,T=d[T+4>>2]|0,!((T|0)>(re|0)|(T|0)==(re|0)&x>>>0>oe>>>0)){x=1;break e}}x=0}else x=1;while(!1);if(X=X+1|0,!x){St=21;break}if(T=d[c>>2]|0,(X|0)>=(T|0)){S=0,St=21;break}}return(St|0)==21?(I=Zt,S|0):0}function fY(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0,He=0,Fe=0,ht=0,ft=0,$t=0,at=0,We=0,_e=0,St=0,Zt=0,wt=0,Yt=0,ds=0;if(ds=I,I=I+112|0,St=ds+80|0,T=ds+72|0,Zt=ds,wt=ds+56|0,g=Tm(h)|0,g|0)return Yt=g,I=ds,Yt|0;if(x=c+8|0,Yt=ra((d[x>>2]<<5)+32|0)|0,!Yt)return Yt=13,I=ds,Yt|0;if(gT(c,Yt),g=Tm(h)|0,!g){if(We=c,_e=d[We+4>>2]|0,g=T,d[g>>2]=d[We>>2],d[g+4>>2]=_e,hP(T,St),g=qO(St,u,Zt)|0,g)We=0,_e=0;else{if(g=d[T>>2]|0,w=d[x>>2]|0,(w|0)>0){b=d[c+12>>2]|0,h=0;do g=(d[b+(h<<3)>>2]|0)+g|0,h=h+1|0;while((h|0)!=(w|0));h=g}else h=g;g=Zt,w=d[g>>2]|0,g=d[g+4>>2]|0,b=((h|0)<0)<<31>>31,(g|0)<(b|0)|(g|0)==(b|0)&w>>>0<h>>>0?(g=Zt,d[g>>2]=h,d[g+4>>2]=b,g=b):h=w,We=Ye(h|0,g|0,12,0)|0,_e=D()|0,g=Zt,d[g>>2]=We,d[g+4>>2]=_e,g=0}if(!g){if(h=Ps(We,8)|0,!h)return Xe(Yt),Yt=13,I=ds,Yt|0;if(S=Ps(We,8)|0,!S)return Xe(Yt),Xe(h),Yt=13,I=ds,Yt|0;$t=St,d[$t>>2]=0,d[$t+4>>2]=0,$t=c,at=d[$t+4>>2]|0,g=T,d[g>>2]=d[$t>>2],d[g+4>>2]=at,g=jO(T,We,_e,u,St,h,S)|0;e:do if(g)Xe(h),Xe(S),Xe(Yt);else{t:do if((d[x>>2]|0)>0){for(b=c+12|0,w=0;g=jO((d[b>>2]|0)+(w<<3)|0,We,_e,u,St,h,S)|0,w=w+1|0,!(g|0);)if((w|0)>=(d[x>>2]|0))break t;Xe(h),Xe(S),Xe(Yt);break e}while(!1);(_e|0)>0|(_e|0)==0&We>>>0>0&&bu(S|0,0,We<<3|0)|0,at=St,$t=d[at+4>>2]|0;t:do if(($t|0)>0|($t|0)==0&(d[at>>2]|0)>>>0>0){Fe=h,ht=S,ft=h,$t=S,at=h,g=h,z=h,Ee=S,He=S,h=S;r:for(;;){for(J=0,oe=0,re=0,X=0,w=0,b=0;;){S=Zt,T=S+56|0;do d[S>>2]=0,S=S+4|0;while((S|0)<(T|0));if(u=Fe+(J<<3)|0,x=d[u>>2]|0,u=d[u+4>>2]|0,DO(x,u,1,Zt,0)|0){S=Zt,T=S+56|0;do d[S>>2]=0,S=S+4|0;while((S|0)<(T|0));S=Ps(7,4)|0,S|0&&(ta(x,u,1,Zt,S,7,0,0)|0,Xe(S))}for(V=0;;){B=Zt+(V<<3)|0,j=d[B>>2]|0,B=d[B+4>>2]|0;i:do if((j|0)==0&(B|0)==0)S=w,T=b;else{if(C=yh(j|0,B|0,We|0,_e|0)|0,x=D()|0,S=f+(C<<3)|0,u=S,T=d[u>>2]|0,u=d[u+4>>2]|0,!((T|0)==0&(u|0)==0)){L=0,F=0;do{if((L|0)>(_e|0)|(L|0)==(_e|0)&F>>>0>We>>>0)break r;if((T|0)==(j|0)&(u|0)==(B|0)){S=w,T=b;break i}S=Ye(C|0,x|0,1,0)|0,C=mh(S|0,D()|0,We|0,_e|0)|0,x=D()|0,F=Ye(F|0,L|0,1,0)|0,L=D()|0,S=f+(C<<3)|0,u=S,T=d[u>>2]|0,u=d[u+4>>2]|0}while(!((T|0)==0&(u|0)==0))}if((j|0)==0&(B|0)==0){S=w,T=b;break}ad(j,B,wt)|0,vT(c,Yt,wt)|0&&(F=Ye(w|0,b|0,1,0)|0,b=D()|0,L=S,d[L>>2]=j,d[L+4>>2]=B,w=ht+(w<<3)|0,d[w>>2]=j,d[w+4>>2]=B,w=F),S=w,T=b}while(!1);if(V=V+1|0,V>>>0>=7)break;w=S,b=T}if(J=Ye(J|0,oe|0,1,0)|0,oe=D()|0,re=Ye(re|0,X|0,1,0)|0,X=D()|0,b=St,w=d[b>>2]|0,b=d[b+4>>2]|0,(X|0)<(b|0)|(X|0)==(b|0)&re>>>0<w>>>0)w=S,b=T;else break}if((b|0)>0|(b|0)==0&w>>>0>0){w=0,b=0;do X=Fe+(w<<3)|0,d[X>>2]=0,d[X+4>>2]=0,w=Ye(w|0,b|0,1,0)|0,b=D()|0,X=St,re=d[X+4>>2]|0;while((b|0)<(re|0)|((b|0)==(re|0)?w>>>0<(d[X>>2]|0)>>>0:0))}if(X=St,d[X>>2]=S,d[X+4>>2]=T,(T|0)>0|(T|0)==0&S>>>0>0)V=h,J=He,oe=at,re=Ee,X=ht,h=z,He=g,Ee=ft,z=V,g=J,at=$t,$t=oe,ft=re,ht=Fe,Fe=X;else break t}Xe(ft),Xe($t),Xe(Yt),g=1;break e}else g=S;while(!1);Xe(Yt),Xe(h),Xe(g),g=0}while(!1);return Yt=g,I=ds,Yt|0}}return Xe(Yt),Yt=g,I=ds,Yt|0}function mY(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;if(C=I,I=I+176|0,T=C,(u|0)<1)return vP(h,0,0),x=0,I=C,x|0;for(S=c,S=fe(d[S>>2]|0,d[S+4>>2]|0,52)|0,D()|0,vP(h,(u|0)>6?u:6,S&15),S=0;f=c+(S<<3)|0,f=Ah(d[f>>2]|0,d[f+4>>2]|0,T)|0,!(f|0);){if(f=d[T>>2]|0,(f|0)>0){b=0;do w=T+8+(b<<4)|0,b=b+1|0,f=T+8+(((b|0)%(f|0)|0)<<4)|0,g=qK(h,f,w)|0,g?_P(h,g)|0:GK(h,w,f)|0,f=d[T>>2]|0;while((b|0)<(f|0))}if(S=S+1|0,(S|0)>=(u|0)){f=0,x=13;break}}return(x|0)==13?(I=C,f|0):(wP(h),x=f,I=C,x|0)}function yY(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0;if(w=I,I=I+32|0,f=w,g=w+16|0,c=mY(c,u,g)|0,c|0)return h=c,I=w,h|0;if(d[h>>2]=0,d[h+4>>2]=0,d[h+8>>2]=0,c=bP(g)|0,c|0)do{u=wK(h)|0;do bK(u,c)|0,b=c+16|0,d[f>>2]=d[b>>2],d[f+4>>2]=d[b+4>>2],d[f+8>>2]=d[b+8>>2],d[f+12>>2]=d[b+12>>2],_P(g,c)|0,c=HK(g,f)|0;while((c|0)!=0);c=bP(g)|0}while((c|0)!=0);return wP(g),c=_K(h)|0,c?(uP(h),b=c,I=w,b|0):(b=0,I=w,b|0)}function hr(c){return c=c|0,c>>>0>121?(c=0,c|0):(c=d[7696+(c*28|0)+16>>2]|0,c|0)}function YE(c){return c=c|0,(c|0)==4|(c|0)==117|0}function BO(c){return c=c|0,d[11120+((d[c>>2]|0)*216|0)+((d[c+4>>2]|0)*72|0)+((d[c+8>>2]|0)*24|0)+(d[c+12>>2]<<3)>>2]|0}function gY(c){return c=c|0,d[11120+((d[c>>2]|0)*216|0)+((d[c+4>>2]|0)*72|0)+((d[c+8>>2]|0)*24|0)+(d[c+12>>2]<<3)+4>>2]|0}function vY(c,u){c=c|0,u=u|0,c=7696+(c*28|0)|0,d[u>>2]=d[c>>2],d[u+4>>2]=d[c+4>>2],d[u+8>>2]=d[c+8>>2],d[u+12>>2]=d[c+12>>2]}function wY(c,u){c=c|0,u=u|0;var h=0,f=0;if(u>>>0>20)return u=-1,u|0;do if((d[11120+(u*216|0)>>2]|0)!=(c|0))if((d[11120+(u*216|0)+8>>2]|0)!=(c|0))if((d[11120+(u*216|0)+16>>2]|0)!=(c|0))if((d[11120+(u*216|0)+24>>2]|0)!=(c|0))if((d[11120+(u*216|0)+32>>2]|0)!=(c|0))if((d[11120+(u*216|0)+40>>2]|0)!=(c|0))if((d[11120+(u*216|0)+48>>2]|0)!=(c|0))if((d[11120+(u*216|0)+56>>2]|0)!=(c|0))if((d[11120+(u*216|0)+64>>2]|0)!=(c|0))if((d[11120+(u*216|0)+72>>2]|0)!=(c|0))if((d[11120+(u*216|0)+80>>2]|0)!=(c|0))if((d[11120+(u*216|0)+88>>2]|0)!=(c|0))if((d[11120+(u*216|0)+96>>2]|0)!=(c|0))if((d[11120+(u*216|0)+104>>2]|0)!=(c|0))if((d[11120+(u*216|0)+112>>2]|0)!=(c|0))if((d[11120+(u*216|0)+120>>2]|0)!=(c|0))if((d[11120+(u*216|0)+128>>2]|0)!=(c|0))if((d[11120+(u*216|0)+136>>2]|0)==(c|0))c=2,h=1,f=2;else{if((d[11120+(u*216|0)+144>>2]|0)==(c|0)){c=0,h=2,f=0;break}if((d[11120+(u*216|0)+152>>2]|0)==(c|0)){c=0,h=2,f=1;break}if((d[11120+(u*216|0)+160>>2]|0)==(c|0)){c=0,h=2,f=2;break}if((d[11120+(u*216|0)+168>>2]|0)==(c|0)){c=1,h=2,f=0;break}if((d[11120+(u*216|0)+176>>2]|0)==(c|0)){c=1,h=2,f=1;break}if((d[11120+(u*216|0)+184>>2]|0)==(c|0)){c=1,h=2,f=2;break}if((d[11120+(u*216|0)+192>>2]|0)==(c|0)){c=2,h=2,f=0;break}if((d[11120+(u*216|0)+200>>2]|0)==(c|0)){c=2,h=2,f=1;break}if((d[11120+(u*216|0)+208>>2]|0)==(c|0)){c=2,h=2,f=2;break}else c=-1;return c|0}else c=2,h=1,f=1;else c=2,h=1,f=0;else c=1,h=1,f=2;else c=1,h=1,f=1;else c=1,h=1,f=0;else c=0,h=1,f=2;else c=0,h=1,f=1;else c=0,h=1,f=0;else c=2,h=0,f=2;else c=2,h=0,f=1;else c=2,h=0,f=0;else c=1,h=0,f=2;else c=1,h=0,f=1;else c=1,h=0,f=0;else c=0,h=0,f=2;else c=0,h=0,f=1;else c=0,h=0,f=0;while(!1);return u=d[11120+(u*216|0)+(h*72|0)+(c*24|0)+(f<<3)+4>>2]|0,u|0}function UO(c,u){return c=c|0,u=u|0,(d[7696+(c*28|0)+20>>2]|0)==(u|0)?(u=1,u|0):(u=(d[7696+(c*28|0)+24>>2]|0)==(u|0),u|0)}function KE(c,u){return c=c|0,u=u|0,d[848+(c*28|0)+(u<<2)>>2]|0}function XE(c,u){return c=c|0,u=u|0,(d[848+(c*28|0)>>2]|0)==(u|0)?(u=0,u|0):(d[848+(c*28|0)+4>>2]|0)==(u|0)?(u=1,u|0):(d[848+(c*28|0)+8>>2]|0)==(u|0)?(u=2,u|0):(d[848+(c*28|0)+12>>2]|0)==(u|0)?(u=3,u|0):(d[848+(c*28|0)+16>>2]|0)==(u|0)?(u=4,u|0):(d[848+(c*28|0)+20>>2]|0)==(u|0)?(u=5,u|0):((d[848+(c*28|0)+24>>2]|0)==(u|0)?6:7)|0}function bY(){return 122}function _Y(c){c=c|0;var u=0,h=0,f=0;u=0;do be(u|0,0,45)|0,f=D()|0|134225919,h=c+(u<<3)|0,d[h>>2]=-1,d[h+4>>2]=f,u=u+1|0;while((u|0)!=122);return 0}function SY(c){c=c|0;var u=0,h=0,f=0;return f=+R[c+16>>3],h=+R[c+24>>3],u=f-h,+(f<h?u+6.283185307179586:u)}function VO(c){return c=c|0,+R[c+16>>3]<+R[c+24>>3]|0}function EY(c){return c=c|0,+(+R[c>>3]-+R[c+8>>3])}function eT(c,u){c=c|0,u=u|0;var h=0,f=0,g=0;return h=+R[u>>3],!(h>=+R[c+8>>3])||!(h<=+R[c>>3])?(u=0,u|0):(f=+R[c+16>>3],h=+R[c+24>>3],g=+R[u+8>>3],u=g>=h,c=g<=f&1,f<h?u&&(c=1):u||(c=0),u=(c|0)!=0,u|0)}function tT(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;return+R[c>>3]<+R[u+8>>3]||+R[c+8>>3]>+R[u>>3]?(f=0,f|0):(w=+R[c+16>>3],h=c+24|0,C=+R[h>>3],b=w<C,f=u+16|0,x=+R[f>>3],g=u+24|0,T=+R[g>>3],S=x<T,u=C-x<T-w,c=b?S|u?1:2:0,u=S?b?1:u?2:1:0,w=+ln(w,c),w<+ln(+R[g>>3],u)||(C=+ln(+R[h>>3],c),C>+ln(+R[f>>3],u))?(S=0,S|0):(S=1,S|0))}function TY(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0;w=+R[c+16>>3],T=+R[c+24>>3],c=w<T,S=+R[u+16>>3],b=+R[u+24>>3],g=S<b,u=T-S<b-w,d[h>>2]=c?g|u?1:2:0,d[f>>2]=g?c?1:u?2:1:0}function zO(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;return+R[c>>3]<+R[u>>3]||+R[c+8>>3]>+R[u+8>>3]?(f=0,f|0):(f=c+16|0,T=+R[f>>3],w=+R[c+24>>3],b=T<w,h=u+16|0,C=+R[h>>3],g=u+24|0,x=+R[g>>3],S=C<x,u=w-C<x-T,c=b?S|u?1:2:0,u=S?b?1:u?2:1:0,w=+ln(w,c),w<=+ln(+R[g>>3],u)?(C=+ln(+R[f>>3],c),S=C>=+ln(+R[h>>3],u),S|0):(S=0,S|0))}function GO(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0;g=I,I=I+176|0,f=g,d[f>>2]=4,S=+R[u>>3],R[f+8>>3]=S,w=+R[u+16>>3],R[f+16>>3]=w,R[f+24>>3]=S,S=+R[u+24>>3],R[f+32>>3]=S,b=+R[u+8>>3],R[f+40>>3]=b,R[f+48>>3]=S,R[f+56>>3]=b,R[f+64>>3]=w,u=f+72|0,h=u+96|0;do d[u>>2]=0,u=u+4|0;while((u|0)<(h|0));gh(c|0,f|0,168)|0,I=g}function qO(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0;B=I,I=I+288|0,C=B+264|0,L=B+96|0,x=B,S=x,T=S+96|0;do d[S>>2]=0,S=S+4|0;while((S|0)<(T|0));return u=hT(u,x)|0,u|0?(j=u,I=B,j|0):(T=x,x=d[T>>2]|0,T=d[T+4>>2]|0,ad(x,T,C)|0,Ah(x,T,L)|0,b=+Sm(C,L+8|0),R[C>>3]=+R[c>>3],T=C+8|0,R[T>>3]=+R[c+16>>3],R[L>>3]=+R[c+8>>3],x=L+8|0,R[x>>3]=+R[c+24>>3],g=+Sm(C,L),J=+R[T>>3]-+R[x>>3],w=+gt(+J),V=+R[C>>3]-+R[L>>3],f=+gt(+V),!(J==0|V==0)&&(J=+TP(+w,+f),J=+pr(+(g*g/+x1(+(J/+x1(+w,+f)),3)/(b*(b*2.59807621135)*.8))),R[Tt>>3]=J,F=~~J>>>0,j=+gt(J)>=1?J>0?~~+dh(+ir(J/4294967296),4294967295)>>>0:~~+pr((J-+(~~J>>>0))/4294967296)>>>0:0,(d[Tt+4>>2]&2146435072|0)!=2146435072)?(L=(F|0)==0&(j|0)==0,u=h,d[u>>2]=L?1:F,d[u+4>>2]=L?0:j,u=0):u=1,j=u,I=B,j|0)}function $Y(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0;x=I,I=I+288|0,b=x+264|0,S=x+96|0,T=x,g=T,w=g+96|0;do d[g>>2]=0,g=g+4|0;while((g|0)<(w|0));return h=hT(h,T)|0,h|0?(f=h,I=x,f|0):(h=T,g=d[h>>2]|0,h=d[h+4>>2]|0,ad(g,h,b)|0,Ah(g,h,S)|0,C=+Sm(b,S+8|0),C=+pr(+(+Sm(c,u)/(C*2))),R[Tt>>3]=C,h=~~C>>>0,g=+gt(C)>=1?C>0?~~+dh(+ir(C/4294967296),4294967295)>>>0:~~+pr((C-+(~~C>>>0))/4294967296)>>>0:0,(d[Tt+4>>2]&2146435072|0)==2146435072?(f=1,I=x,f|0):(T=(h|0)==0&(g|0)==0,d[f>>2]=T?1:h,d[f+4>>2]=T?0:g,f=0,I=x,f|0))}function xY(c,u){c=c|0,u=+u;var h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;w=c+16|0,b=+R[w>>3],h=c+24|0,g=+R[h>>3],f=b-g,f=b<g?f+6.283185307179586:f,x=+R[c>>3],S=c+8|0,T=+R[S>>3],C=x-T,f=(f*u-f)*.5,u=(C*u-C)*.5,x=x+u,R[c>>3]=x>1.5707963267948966?1.5707963267948966:x,u=T-u,R[S>>3]=u<-1.5707963267948966?-1.5707963267948966:u,u=b+f,u=u>3.141592653589793?u+-6.283185307179586:u,R[w>>3]=u<-3.141592653589793?u+6.283185307179586:u,u=g-f,u=u>3.141592653589793?u+-6.283185307179586:u,R[h>>3]=u<-3.141592653589793?u+6.283185307179586:u}function IY(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0,d[c>>2]=u,d[c+4>>2]=h,d[c+8>>2]=f}function MY(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0;L=u+8|0,d[L>>2]=0,T=+R[c>>3],b=+gt(+T),x=+R[c+8>>3],S=+gt(+x)*1.1547005383792515,b=b+S*.5,h=~~b,c=~~S,b=b-+(h|0),S=S-+(c|0);do if(b<.5)if(b<.3333333333333333)if(d[u>>2]=h,S<(b+1)*.5){d[u+4>>2]=c;break}else{c=c+1|0,d[u+4>>2]=c;break}else if(F=1-b,c=(!(S<F)&1)+c|0,d[u+4>>2]=c,F<=S&S<b*2){h=h+1|0,d[u>>2]=h;break}else{d[u>>2]=h;break}else{if(!(b<.6666666666666666))if(h=h+1|0,d[u>>2]=h,S<b*.5){d[u+4>>2]=c;break}else{c=c+1|0,d[u+4>>2]=c;break}if(S<1-b){if(d[u+4>>2]=c,b*2+-1<S){d[u>>2]=h;break}}else c=c+1|0,d[u+4>>2]=c;h=h+1|0,d[u>>2]=h}while(!1);do if(T<0)if(c&1){C=(c+1|0)/2|0,C=wi(h|0,((h|0)<0)<<31>>31|0,C|0,((C|0)<0)<<31>>31|0)|0,h=~~(+(h|0)-((+(C>>>0)+4294967296*+(D()|0))*2+1)),d[u>>2]=h;break}else{C=(c|0)/2|0,C=wi(h|0,((h|0)<0)<<31>>31|0,C|0,((C|0)<0)<<31>>31|0)|0,h=~~(+(h|0)-(+(C>>>0)+4294967296*+(D()|0))*2),d[u>>2]=h;break}while(!1);C=u+4|0,x<0&&(h=h-((c<<1|1|0)/2|0)|0,d[u>>2]=h,c=0-c|0,d[C>>2]=c),f=c-h|0,(h|0)<0?(g=0-h|0,d[C>>2]=f,d[L>>2]=g,d[u>>2]=0,c=f,h=0):g=0,(c|0)<0&&(h=h-c|0,d[u>>2]=h,g=g-c|0,d[L>>2]=g,d[C>>2]=0,c=0),w=h-g|0,f=c-g|0,(g|0)<0&&(d[u>>2]=w,d[C>>2]=f,d[L>>2]=0,c=f,h=w,g=0),f=(c|0)<(h|0)?c:h,f=(g|0)<(f|0)?g:f,!((f|0)<=0)&&(d[u>>2]=h-f,d[C>>2]=c-f,d[L>>2]=g-f)}function Hi(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0;u=d[c>>2]|0,b=c+4|0,h=d[b>>2]|0,(u|0)<0&&(h=h-u|0,d[b>>2]=h,w=c+8|0,d[w>>2]=(d[w>>2]|0)-u,d[c>>2]=0,u=0),(h|0)<0?(u=u-h|0,d[c>>2]=u,w=c+8|0,g=(d[w>>2]|0)-h|0,d[w>>2]=g,d[b>>2]=0,h=0):(g=c+8|0,w=g,g=d[g>>2]|0),(g|0)<0&&(u=u-g|0,d[c>>2]=u,h=h-g|0,d[b>>2]=h,d[w>>2]=0,g=0),f=(h|0)<(u|0)?h:u,f=(g|0)<(f|0)?g:f,!((f|0)<=0)&&(d[c>>2]=u-f,d[b>>2]=h-f,d[w>>2]=g-f)}function id(c,u){c=c|0,u=u|0;var h=0,f=0;f=d[c+8>>2]|0,h=+((d[c+4>>2]|0)-f|0),R[u>>3]=+((d[c>>2]|0)-f|0)-h*.5,R[u+8>>3]=h*.8660254037844386}function cs(c,u,h){c=c|0,u=u|0,h=h|0,d[h>>2]=(d[u>>2]|0)+(d[c>>2]|0),d[h+4>>2]=(d[u+4>>2]|0)+(d[c+4>>2]|0),d[h+8>>2]=(d[u+8>>2]|0)+(d[c+8>>2]|0)}function rT(c,u,h){c=c|0,u=u|0,h=h|0,d[h>>2]=(d[c>>2]|0)-(d[u>>2]|0),d[h+4>>2]=(d[c+4>>2]|0)-(d[u+4>>2]|0),d[h+8>>2]=(d[c+8>>2]|0)-(d[u+8>>2]|0)}function HO(c,u){c=c|0,u=u|0;var h=0,f=0;h=On(d[c>>2]|0,u)|0,d[c>>2]=h,h=c+4|0,f=On(d[h>>2]|0,u)|0,d[h>>2]=f,c=c+8|0,u=On(d[c>>2]|0,u)|0,d[c>>2]=u}function w1(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;b=d[c>>2]|0,S=(b|0)<0,f=(d[c+4>>2]|0)-(S?b:0)|0,w=(f|0)<0,g=(w?0-f|0:0)+((d[c+8>>2]|0)-(S?b:0))|0,h=(g|0)<0,c=h?0:g,u=(w?0:f)-(h?g:0)|0,g=(S?0:b)-(w?f:0)-(h?g:0)|0,h=(u|0)<(g|0)?u:g,h=(c|0)<(h|0)?c:h,f=(h|0)>0,c=c-(f?h:0)|0,u=u-(f?h:0)|0;e:do switch(g-(f?h:0)|0){case 0:switch(u|0){case 0:return S=(c|0)==0?0:(c|0)==1?1:7,S|0;case 1:return S=(c|0)==0?2:(c|0)==1?3:7,S|0;default:break e}case 1:switch(u|0){case 0:return S=(c|0)==0?4:(c|0)==1?5:7,S|0;case 1:{if(!c)c=6;else break e;return c|0}default:break e}}while(!1);return S=7,S|0}function CY(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0;if(T=c+8|0,b=d[T>>2]|0,S=(d[c>>2]|0)-b|0,x=c+4|0,b=(d[x>>2]|0)-b|0,S>>>0>715827881|b>>>0>715827881){if(f=(S|0)>0,g=2147483647-S|0,w=-2147483648-S|0,(f?(g|0)<(S|0):(w|0)>(S|0))||(h=S<<1,f?(2147483647-h|0)<(S|0):(-2147483648-h|0)>(S|0))||((b|0)>0?(2147483647-b|0)<(b|0):(-2147483648-b|0)>(b|0))||(u=S*3|0,h=b<<1,(f?(g|0)<(h|0):(w|0)>(h|0))||((S|0)>-1?(u|-2147483648|0)>=(b|0):(u^-2147483648|0)<(b|0))))return x=1,x|0}else h=b<<1,u=S*3|0;return f=vu(+(u-b|0)*.14285714285714285)|0,d[c>>2]=f,g=vu(+(h+S|0)*.14285714285714285)|0,d[x>>2]=g,d[T>>2]=0,h=(g|0)<(f|0),u=h?f:g,h=h?g:f,(h|0)<0&&(((h|0)==-2147483648||((u|0)>0?(2147483647-u|0)<(h|0):(-2147483648-u|0)>(h|0)))&&nt(27795,26892,354,26903),((u|0)>-1?(u|-2147483648|0)>=(h|0):(u^-2147483648|0)<(h|0))&&nt(27795,26892,354,26903)),u=g-f|0,(f|0)<0?(h=0-f|0,d[x>>2]=u,d[T>>2]=h,d[c>>2]=0,f=0):(u=g,h=0),(u|0)<0&&(f=f-u|0,d[c>>2]=f,h=h-u|0,d[T>>2]=h,d[x>>2]=0,u=0),w=f-h|0,g=u-h|0,(h|0)<0?(d[c>>2]=w,d[x>>2]=g,d[T>>2]=0,u=g,g=w,h=0):g=f,f=(u|0)<(g|0)?u:g,f=(h|0)<(f|0)?h:f,(f|0)<=0?(x=0,x|0):(d[c>>2]=g-f,d[x>>2]=u-f,d[T>>2]=h-f,x=0,x|0)}function kY(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0,T=0;if(b=c+8|0,g=d[b>>2]|0,w=(d[c>>2]|0)-g|0,S=c+4|0,g=(d[S>>2]|0)-g|0,w>>>0>715827881|g>>>0>715827881){if(h=(w|0)>0,(h?(2147483647-w|0)<(w|0):(-2147483648-w|0)>(w|0))||(u=w<<1,f=(g|0)>0,f?(2147483647-g|0)<(g|0):(-2147483648-g|0)>(g|0)))return S=1,S|0;if(T=g<<1,(f?(2147483647-T|0)<(g|0):(-2147483648-T|0)>(g|0))||(h?(2147483647-u|0)<(g|0):(-2147483648-u|0)>(g|0))||(h=g*3|0,(g|0)>-1?(h|-2147483648|0)>=(w|0):(h^-2147483648|0)<(w|0)))return T=1,T|0}else h=g*3|0,u=w<<1;return f=vu(+(u+g|0)*.14285714285714285)|0,d[c>>2]=f,g=vu(+(h-w|0)*.14285714285714285)|0,d[S>>2]=g,d[b>>2]=0,h=(g|0)<(f|0),u=h?f:g,h=h?g:f,(h|0)<0&&(((h|0)==-2147483648||((u|0)>0?(2147483647-u|0)<(h|0):(-2147483648-u|0)>(h|0)))&&nt(27795,26892,402,26917),((u|0)>-1?(u|-2147483648|0)>=(h|0):(u^-2147483648|0)<(h|0))&&nt(27795,26892,402,26917)),u=g-f|0,(f|0)<0?(h=0-f|0,d[S>>2]=u,d[b>>2]=h,d[c>>2]=0,f=0):(u=g,h=0),(u|0)<0&&(f=f-u|0,d[c>>2]=f,h=h-u|0,d[b>>2]=h,d[S>>2]=0,u=0),w=f-h|0,g=u-h|0,(h|0)<0?(d[c>>2]=w,d[S>>2]=g,d[b>>2]=0,u=g,g=w,h=0):g=f,f=(u|0)<(g|0)?u:g,f=(h|0)<(f|0)?h:f,(f|0)<=0?(T=0,T|0):(d[c>>2]=g-f,d[S>>2]=u-f,d[b>>2]=h-f,T=0,T|0)}function RY(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;b=c+8|0,h=d[b>>2]|0,u=(d[c>>2]|0)-h|0,S=c+4|0,h=(d[S>>2]|0)-h|0,f=vu(+((u*3|0)-h|0)*.14285714285714285)|0,d[c>>2]=f,u=vu(+((h<<1)+u|0)*.14285714285714285)|0,d[S>>2]=u,d[b>>2]=0,h=u-f|0,(f|0)<0?(w=0-f|0,d[S>>2]=h,d[b>>2]=w,d[c>>2]=0,u=h,f=0,h=w):h=0,(u|0)<0&&(f=f-u|0,d[c>>2]=f,h=h-u|0,d[b>>2]=h,d[S>>2]=0,u=0),w=f-h|0,g=u-h|0,(h|0)<0?(d[c>>2]=w,d[S>>2]=g,d[b>>2]=0,u=g,g=w,h=0):g=f,f=(u|0)<(g|0)?u:g,f=(h|0)<(f|0)?h:f,!((f|0)<=0)&&(d[c>>2]=g-f,d[S>>2]=u-f,d[b>>2]=h-f)}function WO(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;b=c+8|0,h=d[b>>2]|0,u=(d[c>>2]|0)-h|0,S=c+4|0,h=(d[S>>2]|0)-h|0,f=vu(+((u<<1)+h|0)*.14285714285714285)|0,d[c>>2]=f,u=vu(+((h*3|0)-u|0)*.14285714285714285)|0,d[S>>2]=u,d[b>>2]=0,h=u-f|0,(f|0)<0?(w=0-f|0,d[S>>2]=h,d[b>>2]=w,d[c>>2]=0,u=h,f=0,h=w):h=0,(u|0)<0&&(f=f-u|0,d[c>>2]=f,h=h-u|0,d[b>>2]=h,d[S>>2]=0,u=0),w=f-h|0,g=u-h|0,(h|0)<0?(d[c>>2]=w,d[S>>2]=g,d[b>>2]=0,u=g,g=w,h=0):g=f,f=(u|0)<(g|0)?u:g,f=(h|0)<(f|0)?h:f,!((f|0)<=0)&&(d[c>>2]=g-f,d[S>>2]=u-f,d[b>>2]=h-f)}function b1(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;u=d[c>>2]|0,b=c+4|0,h=d[b>>2]|0,S=c+8|0,f=d[S>>2]|0,g=h+(u*3|0)|0,d[c>>2]=g,h=f+(h*3|0)|0,d[b>>2]=h,u=(f*3|0)+u|0,d[S>>2]=u,f=h-g|0,(g|0)<0?(u=u-g|0,d[b>>2]=f,d[S>>2]=u,d[c>>2]=0,h=f,f=0):f=g,(h|0)<0&&(f=f-h|0,d[c>>2]=f,u=u-h|0,d[S>>2]=u,d[b>>2]=0,h=0),w=f-u|0,g=h-u|0,(u|0)<0?(d[c>>2]=w,d[b>>2]=g,d[S>>2]=0,f=w,u=0):g=h,h=(g|0)<(f|0)?g:f,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(d[c>>2]=f-h,d[b>>2]=g-h,d[S>>2]=u-h)}function sd(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;g=d[c>>2]|0,b=c+4|0,u=d[b>>2]|0,S=c+8|0,h=d[S>>2]|0,f=(u*3|0)+g|0,g=h+(g*3|0)|0,d[c>>2]=g,d[b>>2]=f,u=(h*3|0)+u|0,d[S>>2]=u,h=f-g|0,(g|0)<0?(u=u-g|0,d[b>>2]=h,d[S>>2]=u,d[c>>2]=0,g=0):h=f,(h|0)<0&&(g=g-h|0,d[c>>2]=g,u=u-h|0,d[S>>2]=u,d[b>>2]=0,h=0),w=g-u|0,f=h-u|0,(u|0)<0?(d[c>>2]=w,d[b>>2]=f,d[S>>2]=0,g=w,u=0):f=h,h=(f|0)<(g|0)?f:g,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(d[c>>2]=g-h,d[b>>2]=f-h,d[S>>2]=u-h)}function QO(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0;(u+-1|0)>>>0>=6||(g=(d[15440+(u*12|0)>>2]|0)+(d[c>>2]|0)|0,d[c>>2]=g,S=c+4|0,f=(d[15440+(u*12|0)+4>>2]|0)+(d[S>>2]|0)|0,d[S>>2]=f,b=c+8|0,u=(d[15440+(u*12|0)+8>>2]|0)+(d[b>>2]|0)|0,d[b>>2]=u,h=f-g|0,(g|0)<0?(u=u-g|0,d[S>>2]=h,d[b>>2]=u,d[c>>2]=0,f=0):(h=f,f=g),(h|0)<0&&(f=f-h|0,d[c>>2]=f,u=u-h|0,d[b>>2]=u,d[S>>2]=0,h=0),w=f-u|0,g=h-u|0,(u|0)<0?(d[c>>2]=w,d[S>>2]=g,d[b>>2]=0,f=w,u=0):g=h,h=(g|0)<(f|0)?g:f,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(d[c>>2]=f-h,d[S>>2]=g-h,d[b>>2]=u-h))}function JO(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;g=d[c>>2]|0,b=c+4|0,u=d[b>>2]|0,S=c+8|0,h=d[S>>2]|0,f=u+g|0,g=h+g|0,d[c>>2]=g,d[b>>2]=f,u=h+u|0,d[S>>2]=u,h=f-g|0,(g|0)<0?(u=u-g|0,d[b>>2]=h,d[S>>2]=u,d[c>>2]=0,f=0):(h=f,f=g),(h|0)<0&&(f=f-h|0,d[c>>2]=f,u=u-h|0,d[S>>2]=u,d[b>>2]=0,h=0),w=f-u|0,g=h-u|0,(u|0)<0?(d[c>>2]=w,d[b>>2]=g,d[S>>2]=0,f=w,u=0):g=h,h=(g|0)<(f|0)?g:f,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(d[c>>2]=f-h,d[b>>2]=g-h,d[S>>2]=u-h)}function _1(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;u=d[c>>2]|0,b=c+4|0,f=d[b>>2]|0,S=c+8|0,h=d[S>>2]|0,g=f+u|0,d[c>>2]=g,f=h+f|0,d[b>>2]=f,u=h+u|0,d[S>>2]=u,h=f-g|0,(g|0)<0?(u=u-g|0,d[b>>2]=h,d[S>>2]=u,d[c>>2]=0,f=0):(h=f,f=g),(h|0)<0&&(f=f-h|0,d[c>>2]=f,u=u-h|0,d[S>>2]=u,d[b>>2]=0,h=0),w=f-u|0,g=h-u|0,(u|0)<0?(d[c>>2]=w,d[b>>2]=g,d[S>>2]=0,f=w,u=0):g=h,h=(g|0)<(f|0)?g:f,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(d[c>>2]=f-h,d[b>>2]=g-h,d[S>>2]=u-h)}function nd(c){switch(c=c|0,c|0){case 1:{c=5;break}case 5:{c=4;break}case 4:{c=6;break}case 6:{c=2;break}case 2:{c=3;break}case 3:{c=1;break}}return c|0}function yu(c){switch(c=c|0,c|0){case 1:{c=3;break}case 3:{c=2;break}case 2:{c=6;break}case 6:{c=4;break}case 4:{c=5;break}case 5:{c=1;break}}return c|0}function ZO(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;u=d[c>>2]|0,b=c+4|0,h=d[b>>2]|0,S=c+8|0,f=d[S>>2]|0,g=h+(u<<1)|0,d[c>>2]=g,h=f+(h<<1)|0,d[b>>2]=h,u=(f<<1)+u|0,d[S>>2]=u,f=h-g|0,(g|0)<0?(u=u-g|0,d[b>>2]=f,d[S>>2]=u,d[c>>2]=0,h=f,f=0):f=g,(h|0)<0&&(f=f-h|0,d[c>>2]=f,u=u-h|0,d[S>>2]=u,d[b>>2]=0,h=0),w=f-u|0,g=h-u|0,(u|0)<0?(d[c>>2]=w,d[b>>2]=g,d[S>>2]=0,f=w,u=0):g=h,h=(g|0)<(f|0)?g:f,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(d[c>>2]=f-h,d[b>>2]=g-h,d[S>>2]=u-h)}function YO(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;g=d[c>>2]|0,b=c+4|0,u=d[b>>2]|0,S=c+8|0,h=d[S>>2]|0,f=(u<<1)+g|0,g=h+(g<<1)|0,d[c>>2]=g,d[b>>2]=f,u=(h<<1)+u|0,d[S>>2]=u,h=f-g|0,(g|0)<0?(u=u-g|0,d[b>>2]=h,d[S>>2]=u,d[c>>2]=0,g=0):h=f,(h|0)<0&&(g=g-h|0,d[c>>2]=g,u=u-h|0,d[S>>2]=u,d[b>>2]=0,h=0),w=g-u|0,f=h-u|0,(u|0)<0?(d[c>>2]=w,d[b>>2]=f,d[S>>2]=0,g=w,u=0):f=h,h=(f|0)<(g|0)?f:g,h=(u|0)<(h|0)?u:h,!((h|0)<=0)&&(d[c>>2]=g-h,d[b>>2]=f-h,d[S>>2]=u-h)}function iT(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0;return b=(d[c>>2]|0)-(d[u>>2]|0)|0,S=(b|0)<0,f=(d[c+4>>2]|0)-(d[u+4>>2]|0)-(S?b:0)|0,w=(f|0)<0,g=(S?0-b|0:0)+(d[c+8>>2]|0)-(d[u+8>>2]|0)+(w?0-f|0:0)|0,c=(g|0)<0,u=c?0:g,h=(w?0:f)-(c?g:0)|0,g=(S?0:b)-(w?f:0)-(c?g:0)|0,c=(h|0)<(g|0)?h:g,c=(u|0)<(c|0)?u:c,f=(c|0)>0,u=u-(f?c:0)|0,h=h-(f?c:0)|0,c=g-(f?c:0)|0,c=(c|0)>-1?c:0-c|0,h=(h|0)>-1?h:0-h|0,u=(u|0)>-1?u:0-u|0,u=(h|0)>(u|0)?h:u,((c|0)>(u|0)?c:u)|0}function OY(c,u){c=c|0,u=u|0;var h=0;h=d[c+8>>2]|0,d[u>>2]=(d[c>>2]|0)-h,d[u+4>>2]=(d[c+4>>2]|0)-h}function PY(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0;return f=d[c>>2]|0,d[u>>2]=f,g=d[c+4>>2]|0,b=u+4|0,d[b>>2]=g,S=u+8|0,d[S>>2]=0,h=(g|0)<(f|0),c=h?f:g,h=h?g:f,(h|0)<0&&((h|0)==-2147483648||((c|0)>0?(2147483647-c|0)<(h|0):(-2147483648-c|0)>(h|0))||((c|0)>-1?(c|-2147483648|0)>=(h|0):(c^-2147483648|0)<(h|0)))?(u=1,u|0):(c=g-f|0,(f|0)<0?(h=0-f|0,d[b>>2]=c,d[S>>2]=h,d[u>>2]=0,f=0):(c=g,h=0),(c|0)<0&&(f=f-c|0,d[u>>2]=f,h=h-c|0,d[S>>2]=h,d[b>>2]=0,c=0),w=f-h|0,g=c-h|0,(h|0)<0?(d[u>>2]=w,d[b>>2]=g,d[S>>2]=0,c=g,g=w,h=0):g=f,f=(c|0)<(g|0)?c:g,f=(h|0)<(f|0)?h:f,(f|0)<=0?(u=0,u|0):(d[u>>2]=g-f,d[b>>2]=c-f,d[S>>2]=h-f,u=0,u|0))}function KO(c){c=c|0;var u=0,h=0,f=0,g=0;u=c+8|0,g=d[u>>2]|0,h=g-(d[c>>2]|0)|0,d[c>>2]=h,f=c+4|0,c=(d[f>>2]|0)-g|0,d[f>>2]=c,d[u>>2]=0-(c+h)}function NY(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;h=d[c>>2]|0,u=0-h|0,d[c>>2]=u,b=c+8|0,d[b>>2]=0,S=c+4|0,f=d[S>>2]|0,g=f+h|0,(h|0)>0?(d[S>>2]=g,d[b>>2]=h,d[c>>2]=0,u=0,f=g):h=0,(f|0)<0?(w=u-f|0,d[c>>2]=w,h=h-f|0,d[b>>2]=h,d[S>>2]=0,g=w-h|0,u=0-h|0,(h|0)<0?(d[c>>2]=g,d[S>>2]=u,d[b>>2]=0,f=u,h=0):(f=0,g=w)):g=u,u=(f|0)<(g|0)?f:g,u=(h|0)<(u|0)?h:u,!((u|0)<=0)&&(d[c>>2]=g-u,d[S>>2]=f-u,d[b>>2]=h-u)}function LY(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0;if(L=I,I=I+64|0,C=L,S=L+56|0,!(!0&(u&2013265920|0)==134217728&(!0&(f&2013265920|0)==134217728)))return g=5,I=L,g|0;if((c|0)==(h|0)&(u|0)==(f|0))return d[g>>2]=0,g=0,I=L,g|0;if(b=fe(c|0,u|0,52)|0,D()|0,b=b&15,x=fe(h|0,f|0,52)|0,D()|0,(b|0)!=(x&15|0))return g=12,I=L,g|0;if(w=b+-1|0,b>>>0>1){lT(c,u,w,C)|0,lT(h,f,w,S)|0,x=C,T=d[x>>2]|0,x=d[x+4>>2]|0;e:do if((T|0)==(d[S>>2]|0)&&(x|0)==(d[S+4>>2]|0)){b=(b^15)*3|0,w=fe(c|0,u|0,b|0)|0,D()|0,w=w&7,b=fe(h|0,f|0,b|0)|0,D()|0,b=b&7;do if((w|0)==0|(b|0)==0)d[g>>2]=1,w=0;else if((w|0)==7)w=5;else{if((w|0)==1|(b|0)==1&&Kt(T,x)|0){w=5;break}if((d[15536+(w<<2)>>2]|0)!=(b|0)&&(d[15568+(w<<2)>>2]|0)!=(b|0))break e;d[g>>2]=1,w=0}while(!1);return g=w,I=L,g|0}while(!1)}w=C,b=w+56|0;do d[w>>2]=0,w=w+4|0;while((w|0)<(b|0));return oi(c,u,1,C)|0,u=C,!((d[u>>2]|0)==(h|0)&&(d[u+4>>2]|0)==(f|0))&&(u=C+8|0,!((d[u>>2]|0)==(h|0)&&(d[u+4>>2]|0)==(f|0)))&&(u=C+16|0,!((d[u>>2]|0)==(h|0)&&(d[u+4>>2]|0)==(f|0)))&&(u=C+24|0,!((d[u>>2]|0)==(h|0)&&(d[u+4>>2]|0)==(f|0)))&&(u=C+32|0,!((d[u>>2]|0)==(h|0)&&(d[u+4>>2]|0)==(f|0)))&&(u=C+40|0,!((d[u>>2]|0)==(h|0)&&(d[u+4>>2]|0)==(f|0)))?(w=C+48|0,w=((d[w>>2]|0)==(h|0)?(d[w+4>>2]|0)==(f|0):0)&1):w=1,d[g>>2]=w,g=0,I=L,g|0}function DY(c,u,h,f,g){return c=c|0,u=u|0,h=h|0,f=f|0,g=g|0,h=ZE(c,u,h,f)|0,(h|0)==7?(g=11,g|0):(f=be(h|0,0,56)|0,u=u&-2130706433|(D()|0)|268435456,d[g>>2]=c|f,d[g+4>>2]=u,g=0,g|0)}function FY(c,u,h){return c=c|0,u=u|0,h=h|0,!0&(u&2013265920|0)==268435456?(d[h>>2]=c,d[h+4>>2]=u&-2130706433|134217728,h=0,h|0):(h=6,h|0)}function jY(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0;return g=I,I=I+16|0,f=g,d[f>>2]=0,!0&(u&2013265920|0)==268435456?(w=fe(c|0,u|0,56)|0,D()|0,f=vi(c,u&-2130706433|134217728,w&7,f,h)|0,I=g,f|0):(f=6,I=g,f|0)}function XO(c,u){c=c|0,u=u|0;var h=0;switch(h=fe(c|0,u|0,56)|0,D()|0,h&7){case 0:case 7:return h=0,h|0}return h=u&-2130706433|134217728,!(!0&(u&2013265920|0)==268435456)||!0&(u&117440512|0)==16777216&(Kt(c,h)|0)!=0?(h=0,h|0):(h=oT(c,h)|0,h|0)}function BY(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0;return g=I,I=I+16|0,f=g,!0&(u&2013265920|0)==268435456?(w=u&-2130706433|134217728,b=h,d[b>>2]=c,d[b+4>>2]=w,d[f>>2]=0,u=fe(c|0,u|0,56)|0,D()|0,f=vi(c,w,u&7,f,h+8|0)|0,I=g,f|0):(f=6,I=g,f|0)}function UY(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0;return g=(Kt(c,u)|0)==0,u=u&-2130706433,f=h,d[f>>2]=g?c:0,d[f+4>>2]=g?u|285212672:0,f=h+8|0,d[f>>2]=c,d[f+4>>2]=u|301989888,f=h+16|0,d[f>>2]=c,d[f+4>>2]=u|318767104,f=h+24|0,d[f>>2]=c,d[f+4>>2]=u|335544320,f=h+32|0,d[f>>2]=c,d[f+4>>2]=u|352321536,h=h+40|0,d[h>>2]=c,d[h+4>>2]=u|369098752,0}function S1(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0;return b=I,I=I+16|0,g=b,w=u&-2130706433|134217728,!0&(u&2013265920|0)==268435456?(f=fe(c|0,u|0,56)|0,D()|0,f=UK(c,w,f&7)|0,(f|0)==-1?(d[h>>2]=0,w=6,I=b,w|0):(hh(c,w,g)|0&&nt(27795,26932,282,26947),u=fe(c|0,u|0,52)|0,D()|0,u=u&15,Kt(c,w)|0?sT(g,u,f,2,h):nT(g,u,f,2,h),w=0,I=b,w|0)):(w=6,I=b,w|0)}function VY(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0;f=I,I=I+16|0,g=f,zY(c,u,h,g),MY(g,h+4|0),I=f}function zY(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0;if(S=I,I=I+16|0,T=S,GY(c,h,T),w=+ch(+(1-+R[T>>3]*.5)),w<1e-16){d[f>>2]=0,d[f+4>>2]=0,d[f+8>>2]=0,d[f+12>>2]=0,I=S;return}if(T=d[h>>2]|0,g=+R[15920+(T*24|0)>>3],g=+_m(g-+_m(+cK(15600+(T<<4)|0,c))),Pn(u)|0?b=+_m(g+-.3334731722518321):b=g,g=+Rs(+w)*2.618033988749896,(u|0)>0){c=0;do g=g*2.6457513110645907,c=c+1|0;while((c|0)!=(u|0))}w=+jt(+b)*g,R[f>>3]=w,b=+vt(+b)*g,R[f+8>>3]=b,I=S}function GY(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0;if(w=I,I=I+32|0,g=w,BK(c,g),d[u>>2]=0,R[h>>3]=5,f=+Yr(16400,g),f<+R[h>>3]&&(d[u>>2]=0,R[h>>3]=f),f=+Yr(16424,g),f<+R[h>>3]&&(d[u>>2]=1,R[h>>3]=f),f=+Yr(16448,g),f<+R[h>>3]&&(d[u>>2]=2,R[h>>3]=f),f=+Yr(16472,g),f<+R[h>>3]&&(d[u>>2]=3,R[h>>3]=f),f=+Yr(16496,g),f<+R[h>>3]&&(d[u>>2]=4,R[h>>3]=f),f=+Yr(16520,g),f<+R[h>>3]&&(d[u>>2]=5,R[h>>3]=f),f=+Yr(16544,g),f<+R[h>>3]&&(d[u>>2]=6,R[h>>3]=f),f=+Yr(16568,g),f<+R[h>>3]&&(d[u>>2]=7,R[h>>3]=f),f=+Yr(16592,g),f<+R[h>>3]&&(d[u>>2]=8,R[h>>3]=f),f=+Yr(16616,g),f<+R[h>>3]&&(d[u>>2]=9,R[h>>3]=f),f=+Yr(16640,g),f<+R[h>>3]&&(d[u>>2]=10,R[h>>3]=f),f=+Yr(16664,g),f<+R[h>>3]&&(d[u>>2]=11,R[h>>3]=f),f=+Yr(16688,g),f<+R[h>>3]&&(d[u>>2]=12,R[h>>3]=f),f=+Yr(16712,g),f<+R[h>>3]&&(d[u>>2]=13,R[h>>3]=f),f=+Yr(16736,g),f<+R[h>>3]&&(d[u>>2]=14,R[h>>3]=f),f=+Yr(16760,g),f<+R[h>>3]&&(d[u>>2]=15,R[h>>3]=f),f=+Yr(16784,g),f<+R[h>>3]&&(d[u>>2]=16,R[h>>3]=f),f=+Yr(16808,g),f<+R[h>>3]&&(d[u>>2]=17,R[h>>3]=f),f=+Yr(16832,g),f<+R[h>>3]&&(d[u>>2]=18,R[h>>3]=f),f=+Yr(16856,g),!(f<+R[h>>3])){I=w;return}d[u>>2]=19,R[h>>3]=f,I=w}function wm(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0;if(w=+jK(c),w<1e-16){u=15600+(u<<4)|0,d[g>>2]=d[u>>2],d[g+4>>2]=d[u+4>>2],d[g+8>>2]=d[u+8>>2],d[g+12>>2]=d[u+12>>2];return}if(b=+qi(+ +R[c+8>>3],+ +R[c>>3]),(h|0)>0){c=0;do w=w*.37796447300922725,c=c+1|0;while((c|0)!=(h|0))}S=w*.3333333333333333,f?(h=(Pn(h)|0)==0,w=+gm(+((h?S:S*.37796447300922725)*.381966011250105))):(w=+gm(+(w*.381966011250105)),Pn(h)|0&&(b=+_m(b+.3334731722518321))),dK(15600+(u<<4)|0,+_m(+R[15920+(u*24|0)>>3]-b),w,g)}function qY(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0;f=I,I=I+16|0,g=f,id(c+4|0,g),wm(g,d[c>>2]|0,u,0,h),I=f}function sT(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0,He=0,Fe=0,ht=0,ft=0,$t=0,at=0,We=0,_e=0,St=0,Zt=0,wt=0;if(St=I,I=I+272|0,w=St+256|0,re=St+240|0,at=St,We=St+224|0,_e=St+208|0,X=St+176|0,z=St+160|0,Ee=St+192|0,He=St+144|0,Fe=St+128|0,ht=St+112|0,ft=St+96|0,$t=St+80|0,d[w>>2]=u,d[re>>2]=d[c>>2],d[re+4>>2]=d[c+4>>2],d[re+8>>2]=d[c+8>>2],d[re+12>>2]=d[c+12>>2],eP(re,w,at),d[g>>2]=0,re=f+h+((f|0)==5&1)|0,(re|0)<=(h|0)){I=St;return}T=d[w>>2]|0,x=We+4|0,C=X+4|0,L=h+5|0,F=16880+(T<<2)|0,j=16960+(T<<2)|0,B=Fe+8|0,V=ht+8|0,J=ft+8|0,oe=_e+4|0,S=h;e:for(;;){b=at+(((S|0)%5|0)<<4)|0,d[_e>>2]=d[b>>2],d[_e+4>>2]=d[b+4>>2],d[_e+8>>2]=d[b+8>>2],d[_e+12>>2]=d[b+12>>2];do;while((ph(_e,T,0,1)|0)==2);if((S|0)>(h|0)&(Pn(u)|0)!=0){if(d[X>>2]=d[_e>>2],d[X+4>>2]=d[_e+4>>2],d[X+8>>2]=d[_e+8>>2],d[X+12>>2]=d[_e+12>>2],id(x,z),f=d[X>>2]|0,w=d[17040+(f*80|0)+(d[We>>2]<<2)>>2]|0,d[X>>2]=d[18640+(f*80|0)+(w*20|0)>>2],b=d[18640+(f*80|0)+(w*20|0)+16>>2]|0,(b|0)>0){c=0;do JO(C),c=c+1|0;while((c|0)<(b|0))}switch(b=18640+(f*80|0)+(w*20|0)+4|0,d[Ee>>2]=d[b>>2],d[Ee+4>>2]=d[b+4>>2],d[Ee+8>>2]=d[b+8>>2],HO(Ee,(d[F>>2]|0)*3|0),cs(C,Ee,C),Hi(C),id(C,He),Zt=+(d[j>>2]|0),R[Fe>>3]=Zt*3,R[B>>3]=0,wt=Zt*-1.5,R[ht>>3]=wt,R[V>>3]=Zt*2.598076211353316,R[ft>>3]=wt,R[J>>3]=Zt*-2.598076211353316,d[17040+((d[X>>2]|0)*80|0)+(d[_e>>2]<<2)>>2]|0){case 1:{c=ht,f=Fe;break}case 3:{c=ft,f=ht;break}case 2:{c=Fe,f=ft;break}default:{c=12;break e}}mP(z,He,f,c,$t),wm($t,d[X>>2]|0,T,1,g+8+(d[g>>2]<<4)|0),d[g>>2]=(d[g>>2]|0)+1}if((S|0)<(L|0)&&(id(oe,X),wm(X,d[_e>>2]|0,T,1,g+8+(d[g>>2]<<4)|0),d[g>>2]=(d[g>>2]|0)+1),d[We>>2]=d[_e>>2],d[We+4>>2]=d[_e+4>>2],d[We+8>>2]=d[_e+8>>2],d[We+12>>2]=d[_e+12>>2],S=S+1|0,(S|0)>=(re|0)){c=3;break}}if((c|0)==3){I=St;return}else(c|0)==12&&nt(26970,27017,572,27027)}function eP(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0;T=I,I=I+128|0,f=T+64|0,g=T,w=f,b=20240,S=w+60|0;do d[w>>2]=d[b>>2],w=w+4|0,b=b+4|0;while((w|0)<(S|0));w=g,b=20304,S=w+60|0;do d[w>>2]=d[b>>2],w=w+4|0,b=b+4|0;while((w|0)<(S|0));S=(Pn(d[u>>2]|0)|0)==0,f=S?f:g,g=c+4|0,ZO(g),YO(g),Pn(d[u>>2]|0)|0&&(sd(g),d[u>>2]=(d[u>>2]|0)+1),d[h>>2]=d[c>>2],u=h+4|0,cs(g,f,u),Hi(u),d[h+16>>2]=d[c>>2],u=h+20|0,cs(g,f+12|0,u),Hi(u),d[h+32>>2]=d[c>>2],u=h+36|0,cs(g,f+24|0,u),Hi(u),d[h+48>>2]=d[c>>2],u=h+52|0,cs(g,f+36|0,u),Hi(u),d[h+64>>2]=d[c>>2],h=h+68|0,cs(g,f+48|0,h),Hi(h),I=T}function ph(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0;if(B=I,I=I+32|0,F=B+12|0,S=B,j=c+4|0,L=d[16960+(u<<2)>>2]|0,C=(f|0)!=0,L=C?L*3|0:L,g=d[j>>2]|0,x=c+8|0,b=d[x>>2]|0,C){if(w=c+12|0,f=d[w>>2]|0,g=b+g+f|0,(g|0)==(L|0))return j=1,I=B,j|0;T=w}else T=c+12|0,f=d[T>>2]|0,g=b+g+f|0;if((g|0)<=(L|0))return j=0,I=B,j|0;do if((f|0)>0){if(f=d[c>>2]|0,(b|0)>0){w=18640+(f*80|0)+60|0,f=c;break}f=18640+(f*80|0)+40|0,h?(IY(F,L,0,0),rT(j,F,S),_1(S),cs(S,F,j),w=f,f=c):(w=f,f=c)}else w=18640+((d[c>>2]|0)*80|0)+20|0,f=c;while(!1);if(d[f>>2]=d[w>>2],g=w+16|0,(d[g>>2]|0)>0){f=0;do JO(j),f=f+1|0;while((f|0)<(d[g>>2]|0))}return c=w+4|0,d[F>>2]=d[c>>2],d[F+4>>2]=d[c+4>>2],d[F+8>>2]=d[c+8>>2],u=d[16880+(u<<2)>>2]|0,HO(F,C?u*3|0:u),cs(j,F,j),Hi(j),C?f=((d[x>>2]|0)+(d[j>>2]|0)+(d[T>>2]|0)|0)==(L|0)?1:2:f=2,j=f,I=B,j|0}function HY(c,u){c=c|0,u=u|0;var h=0;do h=ph(c,u,0,1)|0;while((h|0)==2);return h|0}function nT(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0,He=0,Fe=0,ht=0,ft=0,$t=0,at=0;if(ft=I,I=I+240|0,w=ft+224|0,Ee=ft+208|0,He=ft,Fe=ft+192|0,ht=ft+176|0,J=ft+160|0,oe=ft+144|0,re=ft+128|0,X=ft+112|0,z=ft+96|0,d[w>>2]=u,d[Ee>>2]=d[c>>2],d[Ee+4>>2]=d[c+4>>2],d[Ee+8>>2]=d[c+8>>2],d[Ee+12>>2]=d[c+12>>2],tP(Ee,w,He),d[g>>2]=0,V=f+h+((f|0)==6&1)|0,(V|0)<=(h|0)){I=ft;return}T=d[w>>2]|0,x=h+6|0,C=16960+(T<<2)|0,L=oe+8|0,F=re+8|0,j=X+8|0,B=Fe+4|0,b=0,S=h,f=-1;e:for(;;){if(w=(S|0)%6|0,c=He+(w<<4)|0,d[Fe>>2]=d[c>>2],d[Fe+4>>2]=d[c+4>>2],d[Fe+8>>2]=d[c+8>>2],d[Fe+12>>2]=d[c+12>>2],c=b,b=ph(Fe,T,0,1)|0,(S|0)>(h|0)&(Pn(u)|0)!=0&&(c|0)!=1&&(d[Fe>>2]|0)!=(f|0)){switch(id(He+(((w+5|0)%6|0)<<4)+4|0,ht),id(He+(w<<4)+4|0,J),$t=+(d[C>>2]|0),R[oe>>3]=$t*3,R[L>>3]=0,at=$t*-1.5,R[re>>3]=at,R[F>>3]=$t*2.598076211353316,R[X>>3]=at,R[j>>3]=$t*-2.598076211353316,w=d[Ee>>2]|0,d[17040+(w*80|0)+(((f|0)==(w|0)?d[Fe>>2]|0:f)<<2)>>2]|0){case 1:{c=re,f=oe;break}case 3:{c=X,f=re;break}case 2:{c=oe,f=X;break}default:{c=8;break e}}mP(ht,J,f,c,z),!(yP(ht,z)|0)&&!(yP(J,z)|0)&&(wm(z,d[Ee>>2]|0,T,1,g+8+(d[g>>2]<<4)|0),d[g>>2]=(d[g>>2]|0)+1)}if((S|0)<(x|0)&&(id(B,ht),wm(ht,d[Fe>>2]|0,T,1,g+8+(d[g>>2]<<4)|0),d[g>>2]=(d[g>>2]|0)+1),S=S+1|0,(S|0)>=(V|0)){c=3;break}else f=d[Fe>>2]|0}if((c|0)==3){I=ft;return}else(c|0)==8&&nt(27054,27017,737,27099)}function tP(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0;T=I,I=I+160|0,f=T+80|0,g=T,w=f,b=20368,S=w+72|0;do d[w>>2]=d[b>>2],w=w+4|0,b=b+4|0;while((w|0)<(S|0));w=g,b=20448,S=w+72|0;do d[w>>2]=d[b>>2],w=w+4|0,b=b+4|0;while((w|0)<(S|0));S=(Pn(d[u>>2]|0)|0)==0,f=S?f:g,g=c+4|0,ZO(g),YO(g),Pn(d[u>>2]|0)|0&&(sd(g),d[u>>2]=(d[u>>2]|0)+1),d[h>>2]=d[c>>2],u=h+4|0,cs(g,f,u),Hi(u),d[h+16>>2]=d[c>>2],u=h+20|0,cs(g,f+12|0,u),Hi(u),d[h+32>>2]=d[c>>2],u=h+36|0,cs(g,f+24|0,u),Hi(u),d[h+48>>2]=d[c>>2],u=h+52|0,cs(g,f+36|0,u),Hi(u),d[h+64>>2]=d[c>>2],u=h+68|0,cs(g,f+48|0,u),Hi(u),d[h+80>>2]=d[c>>2],h=h+84|0,cs(g,f+60|0,h),Hi(h),I=T}function WY(c,u){return c=c|0,u=u|0,u=fe(c|0,u|0,52)|0,D()|0,u&15|0}function rP(c,u){return c=c|0,u=u|0,u=fe(c|0,u|0,45)|0,D()|0,u&127|0}function QY(c,u,h,f){return c=c|0,u=u|0,h=h|0,f=f|0,(h+-1|0)>>>0>14?(f=4,f|0):(h=fe(c|0,u|0,(15-h|0)*3|0)|0,D()|0,d[f>>2]=h&7,f=0,f|0)}function JY(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0;if(c>>>0>15)return f=4,f|0;if(u>>>0>121)return f=17,f|0;b=be(c|0,0,52)|0,g=D()|0,S=be(u|0,0,45)|0,g=g|(D()|0)|134225919;e:do if((c|0)>=1){for(S=1,b=(Ae[20528+u>>0]|0)!=0,w=-1;;){if(u=d[h+(S+-1<<2)>>2]|0,u>>>0>6){g=18,u=10;break}if(!((u|0)==0|b^1))if((u|0)==1){g=19,u=10;break}else b=0;if(x=(15-S|0)*3|0,T=be(7,0,x|0)|0,g=g&~(D()|0),u=be(u|0,((u|0)<0)<<31>>31|0,x|0)|0,w=u|w&~T,g=D()|0|g,(S|0)<(c|0))S=S+1|0;else break e}if((u|0)==10)return g|0}else w=-1;while(!1);return x=f,d[x>>2]=w,d[x+4>>2]=g,x=0,x|0}function oT(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0;return!(!0&(u&-16777216|0)==134217728)||(f=fe(c|0,u|0,52)|0,D()|0,f=f&15,h=fe(c|0,u|0,45)|0,D()|0,h=h&127,h>>>0>121)?(c=0,c|0):(b=(f^15)*3|0,g=fe(c|0,u|0,b|0)|0,b=be(g|0,D()|0,b|0)|0,g=D()|0,w=wi(-1227133514,-1171,b|0,g|0)|0,!((b&613566756&w|0)==0&(g&4681&(D()|0)|0)==0)||(b=(f*3|0)+19|0,w=be(~c|0,~u|0,b|0)|0,b=fe(w|0,D()|0,b|0)|0,!((f|0)==15|(b|0)==0&(D()|0)==0))?(b=0,b|0):!(Ae[20528+h>>0]|0)||(u=u&8191,(c|0)==0&(u|0)==0)?(b=1,b|0):(b=bT(c|0,u|0)|0,D()|0,((63-b|0)%3|0|0)!=0|0))}function ZY(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0;return!0&(u&-16777216|0)==134217728&&(f=fe(c|0,u|0,52)|0,D()|0,f=f&15,h=fe(c|0,u|0,45)|0,D()|0,h=h&127,h>>>0<=121)&&(b=(f^15)*3|0,g=fe(c|0,u|0,b|0)|0,b=be(g|0,D()|0,b|0)|0,g=D()|0,w=wi(-1227133514,-1171,b|0,g|0)|0,(b&613566756&w|0)==0&(g&4681&(D()|0)|0)==0)&&(b=(f*3|0)+19|0,w=be(~c|0,~u|0,b|0)|0,b=fe(w|0,D()|0,b|0)|0,(f|0)==15|(b|0)==0&(D()|0)==0)&&(!(Ae[20528+h>>0]|0)||(h=u&8191,(c|0)==0&(h|0)==0)||(b=bT(c|0,h|0)|0,D()|0,(63-b|0)%3|0|0))||XO(c,u)|0?(b=1,b|0):(b=(gP(c,u)|0)!=0&1,b|0)}function aT(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0;if(g=be(u|0,0,52)|0,w=D()|0,h=be(h|0,0,45)|0,h=w|(D()|0)|134225919,(u|0)<1){w=-1,f=h,u=c,d[u>>2]=w,c=c+4|0,d[c>>2]=f;return}for(w=1,g=-1;b=(15-w|0)*3|0,S=be(7,0,b|0)|0,h=h&~(D()|0),b=be(f|0,0,b|0)|0,g=g&~S|b,h=h|(D()|0),(w|0)!=(u|0);)w=w+1|0;S=c,b=S,d[b>>2]=g,S=S+4|0,d[S>>2]=h}function lT(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0;if(w=fe(c|0,u|0,52)|0,D()|0,w=w&15,h>>>0>15)return f=4,f|0;if((w|0)<(h|0))return f=12,f|0;if((w|0)==(h|0))return d[f>>2]=c,d[f+4>>2]=u,f=0,f|0;if(g=be(h|0,0,52)|0,g=g|c,c=D()|0|u&-15728641,(w|0)>(h|0))do u=be(7,0,(14-h|0)*3|0)|0,h=h+1|0,g=u|g,c=D()|0|c;while((h|0)<(w|0));return d[f>>2]=g,d[f+4>>2]=c,f=0,f|0}function bm(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0;if(w=fe(c|0,u|0,52)|0,D()|0,w=w&15,!((h|0)<16&(w|0)<=(h|0)))return f=4,f|0;g=h-w|0,h=fe(c|0,u|0,45)|0,D()|0;e:do if(!(hr(h&127)|0))h=gu(7,0,g,((g|0)<0)<<31>>31)|0,g=D()|0;else{t:do if(w|0){for(h=1;b=be(7,0,(15-h|0)*3|0)|0,!!((b&c|0)==0&((D()|0)&u|0)==0);)if(h>>>0<w>>>0)h=h+1|0;else break t;h=gu(7,0,g,((g|0)<0)<<31>>31)|0,g=D()|0;break e}while(!1);h=gu(7,0,g,((g|0)<0)<<31>>31)|0,h=bi(h|0,D()|0,5,0)|0,h=Ye(h|0,D()|0,-5,-1)|0,h=wu(h|0,D()|0,6,0)|0,h=Ye(h|0,D()|0,1,0)|0,g=D()|0}while(!1);return b=f,d[b>>2]=h,d[b+4>>2]=g,b=0,b|0}function Kt(c,u){c=c|0,u=u|0;var h=0,f=0,g=0;if(g=fe(c|0,u|0,45)|0,D()|0,!(hr(g&127)|0))return g=0,g|0;g=fe(c|0,u|0,52)|0,D()|0,g=g&15;e:do if(!g)h=0;else for(f=1;;){if(h=fe(c|0,u|0,(15-f|0)*3|0)|0,D()|0,h=h&7,h|0)break e;if(f>>>0<g>>>0)f=f+1|0;else{h=0;break}}while(!1);return g=(h|0)==0&1,g|0}function YY(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0;if(b=I,I=I+16|0,w=b,AT(w,c,u,h),u=w,c=d[u>>2]|0,u=d[u+4>>2]|0,(c|0)==0&(u|0)==0)return I=b,0;g=0,h=0;do S=f+(g<<3)|0,d[S>>2]=c,d[S+4>>2]=u,g=Ye(g|0,h|0,1,0)|0,h=D()|0,fT(w),S=w,c=d[S>>2]|0,u=d[S+4>>2]|0;while(!((c|0)==0&(u|0)==0));return I=b,0}function iP(c,u,h,f){return c=c|0,u=u|0,h=h|0,f=f|0,(f|0)<(h|0)?(h=u,f=c,dt(h|0),f|0):(h=be(-1,-1,((f-h|0)*3|0)+3|0)|0,f=be(~h|0,~(D()|0)|0,(15-f|0)*3|0)|0,h=~(D()|0)&u,f=~f&c,dt(h|0),f|0)}function sP(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0;return g=fe(c|0,u|0,52)|0,D()|0,g=g&15,(h|0)<16&(g|0)<=(h|0)?((g|0)<(h|0)&&(g=be(-1,-1,((h+-1-g|0)*3|0)+3|0)|0,g=be(~g|0,~(D()|0)|0,(15-h|0)*3|0)|0,u=~(D()|0)&u,c=~g&c),g=be(h|0,0,52)|0,h=u&-15728641|(D()|0),d[f>>2]=c|g,d[f+4>>2]=h,f=0,f|0):(f=4,f|0)}function KY(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0,He=0,Fe=0,ht=0,ft=0,$t=0,at=0,We=0,_e=0;if((h|0)==0&(f|0)==0)return _e=0,_e|0;if(g=c,w=d[g>>2]|0,g=d[g+4>>2]|0,!0&(g&15728640|0)==0){if(!((f|0)>0|(f|0)==0&h>>>0>0)||(_e=u,d[_e>>2]=w,d[_e+4>>2]=g,(h|0)==1&(f|0)==0))return _e=0,_e|0;g=1,w=0;do at=c+(g<<3)|0,We=d[at+4>>2]|0,_e=u+(g<<3)|0,d[_e>>2]=d[at>>2],d[_e+4>>2]=We,g=Ye(g|0,w|0,1,0)|0,w=D()|0;while((w|0)<(f|0)|(w|0)==(f|0)&g>>>0<h>>>0);return g=0,g|0}if($t=h<<3,We=ra($t)|0,!We)return _e=13,_e|0;if(gh(We|0,c|0,$t|0)|0,at=Ps(h,8)|0,!at)return Xe(We),_e=13,_e|0;e:for(;;){g=We,x=d[g>>2]|0,g=d[g+4>>2]|0,ht=fe(x|0,g|0,52)|0,D()|0,ht=ht&15,ft=ht+-1|0,Fe=(ht|0)!=0,He=(f|0)>0|(f|0)==0&h>>>0>0;t:do if(Fe&He){if(re=be(ft|0,0,52)|0,X=D()|0,ft>>>0>15){if(!((x|0)==0&(g|0)==0)){_e=16;break e}for(w=0,c=0;;){if(w=Ye(w|0,c|0,1,0)|0,c=D()|0,!((c|0)<(f|0)|(c|0)==(f|0)&w>>>0<h>>>0))break t;if(b=We+(w<<3)|0,Ee=d[b>>2]|0,b=d[b+4>>2]|0,!((Ee|0)==0&(b|0)==0)){g=b,_e=16;break e}}}for(S=x,c=g,w=0,b=0;;){if(!((S|0)==0&(c|0)==0)){if(!(!0&(c&117440512|0)==0)){_e=21;break e}if(C=fe(S|0,c|0,52)|0,D()|0,C=C&15,(C|0)<(ft|0)){g=12,_e=27;break e}if((C|0)!=(ft|0)&&(S=S|re,c=c&-15728641|X,C>>>0>=ht>>>0)){T=ft;do Ee=be(7,0,(14-T|0)*3|0)|0,T=T+1|0,S=Ee|S,c=D()|0|c;while(T>>>0<C>>>0)}if(F=yh(S|0,c|0,h|0,f|0)|0,j=D()|0,T=at+(F<<3)|0,C=T,L=d[C>>2]|0,C=d[C+4>>2]|0,!((L|0)==0&(C|0)==0)){J=0,oe=0;do{if((J|0)>(f|0)|(J|0)==(f|0)&oe>>>0>h>>>0){_e=31;break e}if((L|0)==(S|0)&(C&-117440513|0)==(c|0)){B=fe(L|0,C|0,56)|0,D()|0,B=B&7,V=B+1|0,Ee=fe(L|0,C|0,45)|0,D()|0;r:do if(!(hr(Ee&127)|0))C=7;else{if(L=fe(L|0,C|0,52)|0,D()|0,L=L&15,!L){C=6;break}for(C=1;;){if(Ee=be(7,0,(15-C|0)*3|0)|0,!((Ee&S|0)==0&((D()|0)&c|0)==0)){C=7;break r}if(C>>>0<L>>>0)C=C+1|0;else{C=6;break}}}while(!1);if((B+2|0)>>>0>C>>>0){_e=41;break e}Ee=be(V|0,0,56)|0,c=D()|0|c&-117440513,z=T,d[z>>2]=0,d[z+4>>2]=0,S=Ee|S}else F=Ye(F|0,j|0,1,0)|0,F=mh(F|0,D()|0,h|0,f|0)|0,j=D()|0;oe=Ye(oe|0,J|0,1,0)|0,J=D()|0,T=at+(F<<3)|0,C=T,L=d[C>>2]|0,C=d[C+4>>2]|0}while(!((L|0)==0&(C|0)==0))}Ee=T,d[Ee>>2]=S,d[Ee+4>>2]=c}if(w=Ye(w|0,b|0,1,0)|0,b=D()|0,!((b|0)<(f|0)|(b|0)==(f|0)&w>>>0<h>>>0))break t;c=We+(w<<3)|0,S=d[c>>2]|0,c=d[c+4>>2]|0}}while(!1);if(Ee=Ye(h|0,f|0,5,0)|0,z=D()|0,z>>>0<0|(z|0)==0&Ee>>>0<11){_e=85;break}if(Ee=wu(h|0,f|0,6,0)|0,D()|0,Ee=Ps(Ee,8)|0,!Ee){_e=48;break}do if(He){for(V=0,c=0,B=0,J=0;;){if(C=at+(V<<3)|0,b=C,w=d[b>>2]|0,b=d[b+4>>2]|0,(w|0)==0&(b|0)==0)z=B;else{L=fe(w|0,b|0,56)|0,D()|0,L=L&7,S=L+1|0,F=b&-117440513,z=fe(w|0,b|0,45)|0,D()|0;t:do if(hr(z&127)|0){if(j=fe(w|0,b|0,52)|0,D()|0,j=j&15,j|0)for(T=1;;){if(z=be(7,0,(15-T|0)*3|0)|0,!((w&z|0)==0&(F&(D()|0)|0)==0))break t;if(T>>>0<j>>>0)T=T+1|0;else break}b=be(S|0,0,56)|0,w=b|w,b=D()|0|F,S=C,d[S>>2]=w,d[S+4>>2]=b,S=L+2|0}while(!1);(S|0)==7?(z=Ee+(c<<3)|0,d[z>>2]=w,d[z+4>>2]=b&-117440513,c=Ye(c|0,B|0,1,0)|0,z=D()|0):z=B}if(V=Ye(V|0,J|0,1,0)|0,J=D()|0,(J|0)<(f|0)|(J|0)==(f|0)&V>>>0<h>>>0)B=z;else break}if(He){if(oe=ft>>>0>15,re=be(ft|0,0,52)|0,X=D()|0,!Fe){for(w=0,T=0,S=0,b=0;(x|0)==0&(g|0)==0||(ft=u+(w<<3)|0,d[ft>>2]=x,d[ft+4>>2]=g,w=Ye(w|0,T|0,1,0)|0,T=D()|0),S=Ye(S|0,b|0,1,0)|0,b=D()|0,!!((b|0)<(f|0)|(b|0)==(f|0)&S>>>0<h>>>0);)g=We+(S<<3)|0,x=d[g>>2]|0,g=d[g+4>>2]|0;g=z;break}for(w=0,T=0,b=0,S=0;;){do if(!((x|0)==0&(g|0)==0)){if(j=fe(x|0,g|0,52)|0,D()|0,j=j&15,oe|(j|0)<(ft|0)){_e=80;break e}if((j|0)!=(ft|0)){if(C=x|re,L=g&-15728641|X,j>>>0>=ht>>>0){F=ft;do Fe=be(7,0,(14-F|0)*3|0)|0,F=F+1|0,C=Fe|C,L=D()|0|L;while(F>>>0<j>>>0)}}else C=x,L=g;B=yh(C|0,L|0,h|0,f|0)|0,F=0,j=0,J=D()|0;do{if((F|0)>(f|0)|(F|0)==(f|0)&j>>>0>h>>>0){_e=81;break e}if(Fe=at+(B<<3)|0,V=d[Fe+4>>2]|0,(V&-117440513|0)==(L|0)&&(d[Fe>>2]|0)==(C|0)){_e=65;break}Fe=Ye(B|0,J|0,1,0)|0,B=mh(Fe|0,D()|0,h|0,f|0)|0,J=D()|0,j=Ye(j|0,F|0,1,0)|0,F=D()|0,Fe=at+(B<<3)|0}while(!((d[Fe>>2]|0)==(C|0)&&(d[Fe+4>>2]|0)==(L|0)));if((_e|0)==65&&(_e=0,!0&(V&117440512|0)==100663296))break;Fe=u+(w<<3)|0,d[Fe>>2]=x,d[Fe+4>>2]=g,w=Ye(w|0,T|0,1,0)|0,T=D()|0}while(!1);if(b=Ye(b|0,S|0,1,0)|0,S=D()|0,!((S|0)<(f|0)|(S|0)==(f|0)&b>>>0<h>>>0))break;g=We+(b<<3)|0,x=d[g>>2]|0,g=d[g+4>>2]|0}g=z}else w=0,g=z}else w=0,c=0,g=0;while(!1);if(bu(at|0,0,$t|0)|0,gh(We|0,Ee|0,c<<3|0)|0,Xe(Ee),(c|0)==0&(g|0)==0){_e=89;break}else u=u+(w<<3)|0,f=g,h=c}if((_e|0)==16)!0&(g&117440512|0)==0?(g=4,_e=27):_e=21;else if((_e|0)==31)nt(27795,27122,620,27132);else{if((_e|0)==41)return Xe(We),Xe(at),_e=10,_e|0;if((_e|0)==48)return Xe(We),Xe(at),_e=13,_e|0;(_e|0)==80?nt(27795,27122,711,27132):(_e|0)==81?nt(27795,27122,723,27132):(_e|0)==85&&(gh(u|0,We|0,h<<3|0)|0,_e=89)}return(_e|0)==21?(Xe(We),Xe(at),_e=5,_e|0):(_e|0)==27?(Xe(We),Xe(at),_e=g,_e|0):(_e|0)==89?(Xe(We),Xe(at),_e=0,_e|0):0}function XY(c,u,h,f,g,w,b){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0,w=w|0,b=b|0;var S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0;if(V=I,I=I+16|0,B=V,!((h|0)>0|(h|0)==0&u>>>0>0))return B=0,I=V,B|0;if((b|0)>=16)return B=12,I=V,B|0;F=0,j=0,L=0,S=0;e:for(;;){if(x=c+(F<<3)|0,T=d[x>>2]|0,x=d[x+4>>2]|0,C=fe(T|0,x|0,52)|0,D()|0,(C&15|0)>(b|0)){S=12,T=11;break}if(AT(B,T,x,b),C=B,x=d[C>>2]|0,C=d[C+4>>2]|0,(x|0)==0&(C|0)==0)T=L;else{T=L;do{if(!((S|0)<(w|0)|(S|0)==(w|0)&T>>>0<g>>>0)){T=10;break e}L=f+(T<<3)|0,d[L>>2]=x,d[L+4>>2]=C,T=Ye(T|0,S|0,1,0)|0,S=D()|0,fT(B),L=B,x=d[L>>2]|0,C=d[L+4>>2]|0}while(!((x|0)==0&(C|0)==0))}if(F=Ye(F|0,j|0,1,0)|0,j=D()|0,(j|0)<(h|0)|(j|0)==(h|0)&F>>>0<u>>>0)L=T;else{S=0,T=11;break}}return(T|0)==10?(B=14,I=V,B|0):(T|0)==11?(I=V,S|0):0}function eK(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0;F=I,I=I+16|0,L=F;e:do if((h|0)>0|(h|0)==0&u>>>0>0){for(x=0,b=0,w=0,C=0;;){if(T=c+(x<<3)|0,S=d[T>>2]|0,T=d[T+4>>2]|0,!((S|0)==0&(T|0)==0)&&(T=(bm(S,T,f,L)|0)==0,S=L,b=Ye(d[S>>2]|0,d[S+4>>2]|0,b|0,w|0)|0,w=D()|0,!T)){w=12;break}if(x=Ye(x|0,C|0,1,0)|0,C=D()|0,!((C|0)<(h|0)|(C|0)==(h|0)&x>>>0<u>>>0))break e}return I=F,w|0}else b=0,w=0;while(!1);return d[g>>2]=b,d[g+4>>2]=w,g=0,I=F,g|0}function tK(c,u){return c=c|0,u=u|0,u=fe(c|0,u|0,52)|0,D()|0,u&1|0}function Os(c,u){c=c|0,u=u|0;var h=0,f=0,g=0;if(g=fe(c|0,u|0,52)|0,D()|0,g=g&15,!g)return g=0,g|0;for(f=1;;){if(h=fe(c|0,u|0,(15-f|0)*3|0)|0,D()|0,h=h&7,h|0){f=5;break}if(f>>>0<g>>>0)f=f+1|0;else{h=0,f=5;break}}return(f|0)==5?h|0:0}function uT(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0;if(T=fe(c|0,u|0,52)|0,D()|0,T=T&15,!T)return S=u,T=c,dt(S|0),T|0;for(S=1,h=0;;){w=(15-S|0)*3|0,f=be(7,0,w|0)|0,g=D()|0,b=fe(c|0,u|0,w|0)|0,D()|0,w=be(nd(b&7)|0,0,w|0)|0,b=D()|0,c=w|c&~f,u=b|u&~g;e:do if(!h)if((w&f|0)==0&(b&g|0)==0)h=0;else if(f=fe(c|0,u|0,52)|0,D()|0,f=f&15,!f)h=1;else{h=1;t:for(;;){switch(b=fe(c|0,u|0,(15-h|0)*3|0)|0,D()|0,b&7){case 1:break t;case 0:break;default:{h=1;break e}}if(h>>>0<f>>>0)h=h+1|0;else{h=1;break e}}for(h=1;;)if(b=(15-h|0)*3|0,g=fe(c|0,u|0,b|0)|0,D()|0,w=be(7,0,b|0)|0,u=u&~(D()|0),b=be(nd(g&7)|0,0,b|0)|0,c=c&~w|b,u=u|(D()|0),h>>>0<f>>>0)h=h+1|0;else{h=1;break}}while(!1);if(S>>>0<T>>>0)S=S+1|0;else break}return dt(u|0),c|0}function od(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0;if(f=fe(c|0,u|0,52)|0,D()|0,f=f&15,!f)return h=u,f=c,dt(h|0),f|0;for(h=1;w=(15-h|0)*3|0,b=fe(c|0,u|0,w|0)|0,D()|0,g=be(7,0,w|0)|0,u=u&~(D()|0),w=be(nd(b&7)|0,0,w|0)|0,c=w|c&~g,u=D()|0|u,h>>>0<f>>>0;)h=h+1|0;return dt(u|0),c|0}function rK(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0;if(T=fe(c|0,u|0,52)|0,D()|0,T=T&15,!T)return S=u,T=c,dt(S|0),T|0;for(S=1,h=0;;){w=(15-S|0)*3|0,f=be(7,0,w|0)|0,g=D()|0,b=fe(c|0,u|0,w|0)|0,D()|0,w=be(yu(b&7)|0,0,w|0)|0,b=D()|0,c=w|c&~f,u=b|u&~g;e:do if(!h)if((w&f|0)==0&(b&g|0)==0)h=0;else if(f=fe(c|0,u|0,52)|0,D()|0,f=f&15,!f)h=1;else{h=1;t:for(;;){switch(b=fe(c|0,u|0,(15-h|0)*3|0)|0,D()|0,b&7){case 1:break t;case 0:break;default:{h=1;break e}}if(h>>>0<f>>>0)h=h+1|0;else{h=1;break e}}for(h=1;;)if(g=(15-h|0)*3|0,w=be(7,0,g|0)|0,b=u&~(D()|0),u=fe(c|0,u|0,g|0)|0,D()|0,u=be(yu(u&7)|0,0,g|0)|0,c=c&~w|u,u=b|(D()|0),h>>>0<f>>>0)h=h+1|0;else{h=1;break}}while(!1);if(S>>>0<T>>>0)S=S+1|0;else break}return dt(u|0),c|0}function cT(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0;if(f=fe(c|0,u|0,52)|0,D()|0,f=f&15,!f)return h=u,f=c,dt(h|0),f|0;for(h=1;b=(15-h|0)*3|0,w=be(7,0,b|0)|0,g=u&~(D()|0),u=fe(c|0,u|0,b|0)|0,D()|0,u=be(yu(u&7)|0,0,b|0)|0,c=u|c&~w,u=D()|0|g,h>>>0<f>>>0;)h=h+1|0;return dt(u|0),c|0}function iK(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;if(T=I,I=I+64|0,S=T+40|0,f=T+24|0,g=T+12|0,w=T,be(u|0,0,52)|0,h=D()|0|134225919,!u)return(d[c+4>>2]|0)>2||(d[c+8>>2]|0)>2||(d[c+12>>2]|0)>2?(b=0,S=0,dt(b|0),I=T,S|0):(be(BO(c)|0,0,45)|0,b=D()|0|h,S=-1,dt(b|0),I=T,S|0);if(d[S>>2]=d[c>>2],d[S+4>>2]=d[c+4>>2],d[S+8>>2]=d[c+8>>2],d[S+12>>2]=d[c+12>>2],b=S+4|0,(u|0)>0)for(c=-1;d[f>>2]=d[b>>2],d[f+4>>2]=d[b+4>>2],d[f+8>>2]=d[b+8>>2],u&1?(RY(b),d[g>>2]=d[b>>2],d[g+4>>2]=d[b+4>>2],d[g+8>>2]=d[b+8>>2],b1(g)):(WO(b),d[g>>2]=d[b>>2],d[g+4>>2]=d[b+4>>2],d[g+8>>2]=d[b+8>>2],sd(g)),rT(f,g,w),Hi(w),C=(15-u|0)*3|0,x=be(7,0,C|0)|0,h=h&~(D()|0),C=be(w1(w)|0,0,C|0)|0,c=C|c&~x,h=D()|0|h,(u|0)>1;)u=u+-1|0;else c=-1;e:do if((d[b>>2]|0)<=2&&(d[S+8>>2]|0)<=2&&(d[S+12>>2]|0)<=2){if(f=BO(S)|0,u=be(f|0,0,45)|0,u=u|c,c=D()|0|h&-1040385,w=gY(S)|0,!(hr(f)|0)){if((w|0)<=0)break;for(g=0;;){if(f=fe(u|0,c|0,52)|0,D()|0,f=f&15,f)for(h=1;C=(15-h|0)*3|0,S=fe(u|0,c|0,C|0)|0,D()|0,x=be(7,0,C|0)|0,c=c&~(D()|0),C=be(nd(S&7)|0,0,C|0)|0,u=u&~x|C,c=c|(D()|0),h>>>0<f>>>0;)h=h+1|0;if(g=g+1|0,(g|0)==(w|0))break e}}g=fe(u|0,c|0,52)|0,D()|0,g=g&15;t:do if(g){h=1;r:for(;;){switch(C=fe(u|0,c|0,(15-h|0)*3|0)|0,D()|0,C&7){case 1:break r;case 0:break;default:break t}if(h>>>0<g>>>0)h=h+1|0;else break t}if(UO(f,d[S>>2]|0)|0)for(h=1;S=(15-h|0)*3|0,x=be(7,0,S|0)|0,C=c&~(D()|0),c=fe(u|0,c|0,S|0)|0,D()|0,c=be(yu(c&7)|0,0,S|0)|0,u=u&~x|c,c=C|(D()|0),h>>>0<g>>>0;)h=h+1|0;else for(h=1;C=(15-h|0)*3|0,S=fe(u|0,c|0,C|0)|0,D()|0,x=be(7,0,C|0)|0,c=c&~(D()|0),C=be(nd(S&7)|0,0,C|0)|0,u=u&~x|C,c=c|(D()|0),h>>>0<g>>>0;)h=h+1|0}while(!1);if((w|0)>0){h=0;do u=uT(u,c)|0,c=D()|0,h=h+1|0;while((h|0)!=(w|0))}}else u=0,c=0;while(!1);return x=c,C=u,dt(x|0),I=T,C|0}function Pn(c){return c=c|0,(c|0)%2|0|0}function dT(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0;return g=I,I=I+16|0,f=g,u>>>0>15?(f=4,I=g,f|0):(d[c+4>>2]&2146435072|0)==2146435072||(d[c+8+4>>2]&2146435072|0)==2146435072?(f=3,I=g,f|0):(VY(c,u,f),u=iK(f,u)|0,f=D()|0,d[h>>2]=u,d[h+4>>2]=f,(u|0)==0&(f|0)==0&&nt(27795,27122,1050,27145),f=0,I=g,f|0)}function pT(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0;if(g=h+4|0,w=fe(c|0,u|0,52)|0,D()|0,w=w&15,b=fe(c|0,u|0,45)|0,D()|0,f=(w|0)==0,hr(b&127)|0){if(f)return b=1,b|0;f=1}else{if(f)return b=0,b|0;(d[g>>2]|0)==0&&(d[h+8>>2]|0)==0?f=(d[h+12>>2]|0)!=0&1:f=1}for(h=1;h&1?b1(g):sd(g),b=fe(c|0,u|0,(15-h|0)*3|0)|0,D()|0,QO(g,b&7),h>>>0<w>>>0;)h=h+1|0;return f|0}function hh(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;if(C=I,I=I+16|0,T=C,x=fe(c|0,u|0,45)|0,D()|0,x=x&127,x>>>0>121)return d[h>>2]=0,d[h+4>>2]=0,d[h+8>>2]=0,d[h+12>>2]=0,x=5,I=C,x|0;e:do if((hr(x)|0)!=0&&(w=fe(c|0,u|0,52)|0,D()|0,w=w&15,(w|0)!=0)){f=1;t:for(;;){switch(S=fe(c|0,u|0,(15-f|0)*3|0)|0,D()|0,S&7){case 5:break t;case 0:break;default:{f=u;break e}}if(f>>>0<w>>>0)f=f+1|0;else{f=u;break e}}for(g=1,f=u;u=(15-g|0)*3|0,b=be(7,0,u|0)|0,S=f&~(D()|0),f=fe(c|0,f|0,u|0)|0,D()|0,f=be(yu(f&7)|0,0,u|0)|0,c=c&~b|f,f=S|(D()|0),g>>>0<w>>>0;)g=g+1|0}else f=u;while(!1);if(S=7696+(x*28|0)|0,d[h>>2]=d[S>>2],d[h+4>>2]=d[S+4>>2],d[h+8>>2]=d[S+8>>2],d[h+12>>2]=d[S+12>>2],!(pT(c,f,h)|0))return x=0,I=C,x|0;if(b=h+4|0,d[T>>2]=d[b>>2],d[T+4>>2]=d[b+4>>2],d[T+8>>2]=d[b+8>>2],w=fe(c|0,f|0,52)|0,D()|0,S=w&15,w&1?(sd(b),w=S+1|0):w=S,!(hr(x)|0))f=0;else{e:do if(!S)f=0;else for(u=1;;){if(g=fe(c|0,f|0,(15-u|0)*3|0)|0,D()|0,g=g&7,g|0){f=g;break e}if(u>>>0<S>>>0)u=u+1|0;else{f=0;break}}while(!1);f=(f|0)==4&1}if(!(ph(h,w,f,0)|0))(w|0)!=(S|0)&&(d[b>>2]=d[T>>2],d[b+4>>2]=d[T+4>>2],d[b+8>>2]=d[T+8>>2]);else{if(hr(x)|0)do;while((ph(h,w,0,0)|0)!=0);(w|0)!=(S|0)&&WO(b)}return x=0,I=C,x|0}function ad(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0;return w=I,I=I+16|0,f=w,g=hh(c,u,f)|0,g|0?(I=w,g|0):(g=fe(c|0,u|0,52)|0,D()|0,qY(f,g&15,h),g=0,I=w,g|0)}function Ah(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0;if(b=I,I=I+16|0,w=b,f=hh(c,u,w)|0,f|0)return w=f,I=b,w|0;f=fe(c|0,u|0,45)|0,D()|0,f=(hr(f&127)|0)==0,g=fe(c|0,u|0,52)|0,D()|0,g=g&15;e:do if(!f){if(g|0)for(f=1;;){if(S=be(7,0,(15-f|0)*3|0)|0,!((S&c|0)==0&((D()|0)&u|0)==0))break e;if(f>>>0<g>>>0)f=f+1|0;else break}return sT(w,g,0,5,h),S=0,I=b,S|0}while(!1);return nT(w,g,0,6,h),S=0,I=b,S|0}function sK(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0;if(g=fe(c|0,u|0,45)|0,D()|0,!(hr(g&127)|0))return g=2,d[h>>2]=g,0;if(g=fe(c|0,u|0,52)|0,D()|0,g=g&15,!g)return g=5,d[h>>2]=g,0;for(f=1;;){if(w=be(7,0,(15-f|0)*3|0)|0,!((w&c|0)==0&((D()|0)&u|0)==0)){f=2,c=6;break}if(f>>>0<g>>>0)f=f+1|0;else{f=5,c=6;break}}return(c|0)==6&&(d[h>>2]=f),0}function nP(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0;L=I,I=I+128|0,x=L+112|0,w=L+96|0,C=L,g=fe(c|0,u|0,52)|0,D()|0,S=g&15,d[x>>2]=S,b=fe(c|0,u|0,45)|0,D()|0,b=b&127;e:do if(hr(b)|0){if(S|0)for(f=1;;){if(T=be(7,0,(15-f|0)*3|0)|0,!((T&c|0)==0&((D()|0)&u|0)==0)){g=0;break e}if(f>>>0<S>>>0)f=f+1|0;else break}if(g&1)g=1;else return T=be(S+1|0,0,52)|0,C=D()|0|u&-15728641,x=be(7,0,(14-S|0)*3|0)|0,C=nP((T|c)&~x,C&~(D()|0),h)|0,I=L,C|0}else g=0;while(!1);if(f=hh(c,u,w)|0,!f){g?(eP(w,x,C),T=5):(tP(w,x,C),T=6);e:do if(hr(b)|0)if(!S)c=5;else for(f=1;;){if(b=be(7,0,(15-f|0)*3|0)|0,!((b&c|0)==0&((D()|0)&u|0)==0)){c=2;break e}if(f>>>0<S>>>0)f=f+1|0;else{c=5;break}}else c=2;while(!1);bu(h|0,-1,c<<2|0)|0;e:do if(g)for(w=0;;){if(b=C+(w<<4)|0,HY(b,d[x>>2]|0)|0,b=d[b>>2]|0,S=d[h>>2]|0,(S|0)==-1|(S|0)==(b|0))f=h;else{g=0;do{if(g=g+1|0,g>>>0>=c>>>0){f=1;break e}f=h+(g<<2)|0,S=d[f>>2]|0}while(!((S|0)==-1|(S|0)==(b|0)))}if(d[f>>2]=b,w=w+1|0,w>>>0>=T>>>0){f=0;break}}else for(w=0;;){if(b=C+(w<<4)|0,ph(b,d[x>>2]|0,0,1)|0,b=d[b>>2]|0,S=d[h>>2]|0,(S|0)==-1|(S|0)==(b|0))f=h;else{g=0;do{if(g=g+1|0,g>>>0>=c>>>0){f=1;break e}f=h+(g<<2)|0,S=d[f>>2]|0}while(!((S|0)==-1|(S|0)==(b|0)))}if(d[f>>2]=b,w=w+1|0,w>>>0>=T>>>0){f=0;break}}while(!1)}return C=f,I=L,C|0}function nK(){return 12}function hT(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0;if(c>>>0>15)return S=4,S|0;if(be(c|0,0,52)|0,S=D()|0|134225919,!c){h=0,f=0;do hr(f)|0&&(be(f|0,0,45)|0,b=S|(D()|0),c=u+(h<<3)|0,d[c>>2]=-1,d[c+4>>2]=b,h=h+1|0),f=f+1|0;while((f|0)!=122);return h=0,h|0}h=0,b=0;do{if(hr(b)|0){for(be(b|0,0,45)|0,f=1,g=-1,w=S|(D()|0);T=be(7,0,(15-f|0)*3|0)|0,g=g&~T,w=w&~(D()|0),(f|0)!=(c|0);)f=f+1|0;T=u+(h<<3)|0,d[T>>2]=g,d[T+4>>2]=w,h=h+1|0}b=b+1|0}while((b|0)!=122);return h=0,h|0}function oK(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0;if(re=I,I=I+16|0,J=re,oe=fe(c|0,u|0,52)|0,D()|0,oe=oe&15,h>>>0>15)return oe=4,I=re,oe|0;if((oe|0)<(h|0))return oe=12,I=re,oe|0;if((oe|0)!=(h|0))if(w=be(h|0,0,52)|0,w=w|c,S=D()|0|u&-15728641,(oe|0)>(h|0)){T=h;do V=be(7,0,(14-T|0)*3|0)|0,T=T+1|0,w=V|w,S=D()|0|S;while((T|0)<(oe|0));V=w}else V=w;else V=c,S=u;B=fe(V|0,S|0,45)|0,D()|0;e:do if(hr(B&127)|0){if(T=fe(V|0,S|0,52)|0,D()|0,T=T&15,T|0)for(w=1;;){if(B=be(7,0,(15-w|0)*3|0)|0,!((B&V|0)==0&((D()|0)&S|0)==0)){x=33;break e}if(w>>>0<T>>>0)w=w+1|0;else break}if(B=f,d[B>>2]=0,d[B+4>>2]=0,(oe|0)>(h|0)){for(B=u&-15728641,j=oe;;){if(F=j,j=j+-1|0,j>>>0>15|(oe|0)<(j|0)){x=19;break}if((oe|0)!=(j|0))if(w=be(j|0,0,52)|0,w=w|c,T=D()|0|B,(oe|0)<(F|0))L=w;else{x=j;do L=be(7,0,(14-x|0)*3|0)|0,x=x+1|0,w=L|w,T=D()|0|T;while((x|0)<(oe|0));L=w}else L=c,T=u;if(C=fe(L|0,T|0,45)|0,D()|0,!(hr(C&127)|0))w=0;else{C=fe(L|0,T|0,52)|0,D()|0,C=C&15;t:do if(!C)w=0;else for(x=1;;){if(w=fe(L|0,T|0,(15-x|0)*3|0)|0,D()|0,w=w&7,w|0)break t;if(x>>>0<C>>>0)x=x+1|0;else{w=0;break}}while(!1);w=(w|0)==0&1}if(T=fe(c|0,u|0,(15-F|0)*3|0)|0,D()|0,T=T&7,(T|0)==7){g=5,x=42;break}if(w=(w|0)!=0,(T|0)==1&w){g=5,x=42;break}if(L=T+(((T|0)!=0&w)<<31>>31)|0,L|0&&(x=oe-F|0,x=gu(7,0,x,((x|0)<0)<<31>>31)|0,C=D()|0,w?(w=bi(x|0,C|0,5,0)|0,w=Ye(w|0,D()|0,-5,-1)|0,w=wu(w|0,D()|0,6,0)|0,w=Ye(w|0,D()|0,1,0)|0,T=D()|0):(w=x,T=C),F=L+-1|0,F=bi(x|0,C|0,F|0,((F|0)<0)<<31>>31|0)|0,F=Ye(w|0,T|0,F|0,D()|0)|0,L=D()|0,C=f,C=Ye(F|0,L|0,d[C>>2]|0,d[C+4>>2]|0)|0,L=D()|0,F=f,d[F>>2]=C,d[F+4>>2]=L),(j|0)<=(h|0)){x=37;break}}if((x|0)==19)nt(27795,27122,1367,27158);else if((x|0)==37){b=f,g=d[b+4>>2]|0,b=d[b>>2]|0;break}else if((x|0)==42)return I=re,g|0}else g=0,b=0}else x=33;while(!1);e:do if((x|0)==33)if(B=f,d[B>>2]=0,d[B+4>>2]=0,(oe|0)>(h|0)){for(w=oe;;){if(g=fe(c|0,u|0,(15-w|0)*3|0)|0,D()|0,g=g&7,(g|0)==7){g=5;break}if(b=oe-w|0,b=gu(7,0,b,((b|0)<0)<<31>>31)|0,g=bi(b|0,D()|0,g|0,0)|0,b=D()|0,B=f,b=Ye(d[B>>2]|0,d[B+4>>2]|0,g|0,b|0)|0,g=D()|0,B=f,d[B>>2]=b,d[B+4>>2]=g,w=w+-1|0,(w|0)<=(h|0))break e}return I=re,g|0}else g=0,b=0;while(!1);return bm(V,S,oe,J)|0&&nt(27795,27122,1327,27173),oe=J,J=d[oe+4>>2]|0,((g|0)>-1|(g|0)==-1&b>>>0>4294967295)&((J|0)>(g|0)|((J|0)==(g|0)?(d[oe>>2]|0)>>>0>b>>>0:0))?(oe=0,I=re,oe|0):(nt(27795,27122,1407,27158),0)}function aK(c,u,h,f,g,w){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0,w=w|0;var b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0;if(L=I,I=I+16|0,b=L,g>>>0>15)return w=4,I=L,w|0;if(S=fe(h|0,f|0,52)|0,D()|0,S=S&15,(S|0)>(g|0))return w=12,I=L,w|0;if(bm(h,f,g,b)|0&&nt(27795,27122,1327,27173),C=b,x=d[C+4>>2]|0,!(((u|0)>-1|(u|0)==-1&c>>>0>4294967295)&((x|0)>(u|0)|((x|0)==(u|0)?(d[C>>2]|0)>>>0>c>>>0:0))))return w=2,I=L,w|0;C=g-S|0,g=be(g|0,0,52)|0,T=D()|0|f&-15728641,x=w,d[x>>2]=g|h,d[x+4>>2]=T,x=fe(h|0,f|0,45)|0,D()|0;e:do if(hr(x&127)|0){if(S|0)for(b=1;;){if(x=be(7,0,(15-b|0)*3|0)|0,!((x&h|0)==0&((D()|0)&f|0)==0))break e;if(b>>>0<S>>>0)b=b+1|0;else break}if((C|0)<1)return w=0,I=L,w|0;for(x=S^15,f=-1,T=1,b=1;;){S=C-T|0,S=gu(7,0,S,((S|0)<0)<<31>>31)|0,h=D()|0;do if(b)if(b=bi(S|0,h|0,5,0)|0,b=Ye(b|0,D()|0,-5,-1)|0,b=wu(b|0,D()|0,6,0)|0,g=D()|0,(u|0)>(g|0)|(u|0)==(g|0)&c>>>0>b>>>0){u=Ye(c|0,u|0,-1,-1)|0,u=wi(u|0,D()|0,b|0,g|0)|0,b=D()|0,F=w,B=d[F>>2]|0,F=d[F+4>>2]|0,V=(x+f|0)*3|0,j=be(7,0,V|0)|0,F=F&~(D()|0),f=wu(u|0,b|0,S|0,h|0)|0,c=D()|0,g=Ye(f|0,c|0,2,0)|0,V=be(g|0,D()|0,V|0)|0,F=D()|0|F,g=w,d[g>>2]=V|B&~j,d[g+4>>2]=F,c=bi(f|0,c|0,S|0,h|0)|0,c=wi(u|0,b|0,c|0,D()|0)|0,b=0,u=D()|0;break}else{V=w,j=d[V>>2]|0,V=d[V+4>>2]|0,B=be(7,0,(x+f|0)*3|0)|0,V=V&~(D()|0),b=w,d[b>>2]=j&~B,d[b+4>>2]=V,b=1;break}else j=w,g=d[j>>2]|0,j=d[j+4>>2]|0,f=(x+f|0)*3|0,F=be(7,0,f|0)|0,j=j&~(D()|0),V=wu(c|0,u|0,S|0,h|0)|0,b=D()|0,f=be(V|0,b|0,f|0)|0,j=D()|0|j,B=w,d[B>>2]=f|g&~F,d[B+4>>2]=j,b=bi(V|0,b|0,S|0,h|0)|0,c=wi(c|0,u|0,b|0,D()|0)|0,b=0,u=D()|0;while(!1);if((C|0)>(T|0))f=~T,T=T+1|0;else{u=0;break}}return I=L,u|0}while(!1);if((C|0)<1)return V=0,I=L,V|0;for(g=S^15,b=1;;)if(B=C-b|0,B=gu(7,0,B,((B|0)<0)<<31>>31)|0,V=D()|0,T=w,h=d[T>>2]|0,T=d[T+4>>2]|0,S=(g-b|0)*3|0,f=be(7,0,S|0)|0,T=T&~(D()|0),F=wu(c|0,u|0,B|0,V|0)|0,j=D()|0,S=be(F|0,j|0,S|0)|0,T=D()|0|T,x=w,d[x>>2]=S|h&~f,d[x+4>>2]=T,V=bi(F|0,j|0,B|0,V|0)|0,c=wi(c|0,u|0,V|0,D()|0)|0,u=D()|0,(C|0)<=(b|0)){u=0;break}else b=b+1|0;return I=L,u|0}function AT(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0;g=fe(u|0,h|0,52)|0,D()|0,g=g&15,(u|0)==0&(h|0)==0|((f|0)>15|(g|0)>(f|0))?(w=-1,u=-1,h=0,g=0):(u=iP(u,h,g+1|0,f)|0,b=(D()|0)&-15728641,h=be(f|0,0,52)|0,h=u|h,b=b|(D()|0),u=(Kt(h,b)|0)==0,w=g,u=u?-1:f,g=b),b=c,d[b>>2]=h,d[b+4>>2]=g,d[c+8>>2]=w,d[c+12>>2]=u}function oP(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0;if(g=fe(c|0,u|0,52)|0,D()|0,g=g&15,w=f+8|0,d[w>>2]=g,(c|0)==0&(u|0)==0|((h|0)>15|(g|0)>(h|0))){h=f,d[h>>2]=0,d[h+4>>2]=0,d[w>>2]=-1,d[f+12>>2]=-1;return}if(c=iP(c,u,g+1|0,h)|0,w=(D()|0)&-15728641,g=be(h|0,0,52)|0,g=c|g,w=w|(D()|0),c=f,d[c>>2]=g,d[c+4>>2]=w,c=f+12|0,Kt(g,w)|0){d[c>>2]=h;return}else{d[c>>2]=-1;return}}function fT(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0;if(h=c,u=d[h>>2]|0,h=d[h+4>>2]|0,!((u|0)==0&(h|0)==0)&&(f=fe(u|0,h|0,52)|0,D()|0,f=f&15,S=be(1,0,(f^15)*3|0)|0,u=Ye(S|0,D()|0,u|0,h|0)|0,h=D()|0,S=c,d[S>>2]=u,d[S+4>>2]=h,S=c+8|0,b=d[S>>2]|0,!((f|0)<(b|0)))){for(T=c+12|0,w=f;;){if((w|0)==(b|0)){f=5;break}if(x=(w|0)==(d[T>>2]|0),g=(15-w|0)*3|0,f=fe(u|0,h|0,g|0)|0,D()|0,f=f&7,x&((f|0)==1&!0)){f=7;break}if(!((f|0)==7&!0)){f=10;break}if(x=be(1,0,g|0)|0,u=Ye(u|0,h|0,x|0,D()|0)|0,h=D()|0,x=c,d[x>>2]=u,d[x+4>>2]=h,(w|0)>(b|0))w=w+-1|0;else{f=10;break}}if((f|0)==5){x=c,d[x>>2]=0,d[x+4>>2]=0,d[S>>2]=-1,d[T>>2]=-1;return}else if((f|0)==7){b=be(1,0,g|0)|0,b=Ye(u|0,h|0,b|0,D()|0)|0,S=D()|0,x=c,d[x>>2]=b,d[x+4>>2]=S,d[T>>2]=w+-1;return}else if((f|0)==10)return}}function _m(c){c=+c;var u=0;return u=c<0?c+6.283185307179586:c,+(c>=6.283185307179586?u+-6.283185307179586:u)}function fh(c,u){return c=c|0,u=u|0,+gt(+(+R[c>>3]-+R[u>>3]))<17453292519943298e-27?(u=+gt(+(+R[c+8>>3]-+R[u+8>>3]))<17453292519943298e-27,u|0):(u=0,u|0)}function ln(c,u){switch(c=+c,u=u|0,u|0){case 1:{c=c<0?c+6.283185307179586:c;break}case 2:{c=c>0?c+-6.283185307179586:c;break}}return+c}function lK(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0;return g=+R[u>>3],f=+R[c>>3],w=+vt(+((g-f)*.5)),h=+vt(+((+R[u+8>>3]-+R[c+8>>3])*.5)),h=w*w+h*(+jt(+g)*+jt(+f)*h),+(+qi(+ +kt(+h),+ +kt(+(1-h)))*2)}function Sm(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0;return g=+R[u>>3],f=+R[c>>3],w=+vt(+((g-f)*.5)),h=+vt(+((+R[u+8>>3]-+R[c+8>>3])*.5)),h=w*w+h*(+jt(+g)*+jt(+f)*h),+(+qi(+ +kt(+h),+ +kt(+(1-h)))*2*6371.007180918475)}function uK(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0;return g=+R[u>>3],f=+R[c>>3],w=+vt(+((g-f)*.5)),h=+vt(+((+R[u+8>>3]-+R[c+8>>3])*.5)),h=w*w+h*(+jt(+g)*+jt(+f)*h),+(+qi(+ +kt(+h),+ +kt(+(1-h)))*2*6371.007180918475*1e3)}function cK(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0;return w=+R[u>>3],f=+jt(+w),g=+R[u+8>>3]-+R[c+8>>3],b=f*+vt(+g),h=+R[c>>3],+ +qi(+b,+(+vt(+w)*+jt(+h)-+jt(+g)*(f*+vt(+h))))}function dK(c,u,h,f){c=c|0,u=+u,h=+h,f=f|0;var g=0,w=0,b=0,S=0;if(h<1e-16){d[f>>2]=d[c>>2],d[f+4>>2]=d[c+4>>2],d[f+8>>2]=d[c+8>>2],d[f+12>>2]=d[c+12>>2];return}w=u<0?u+6.283185307179586:u,w=u>=6.283185307179586?w+-6.283185307179586:w;do if(w<1e-16)u=+R[c>>3]+h,R[f>>3]=u,g=f;else{if(g=+gt(+(w+-3.141592653589793))<1e-16,u=+R[c>>3],g){u=u-h,R[f>>3]=u,g=f;break}if(b=+jt(+h),h=+vt(+h),u=b*+vt(+u)+ +jt(+w)*(h*+jt(+u)),u=u>1?1:u,u=+ym(+(u<-1?-1:u)),R[f>>3]=u,+gt(+(u+-1.5707963267948966))<1e-16){R[f>>3]=1.5707963267948966,R[f+8>>3]=0;return}if(+gt(+(u+1.5707963267948966))<1e-16){R[f>>3]=-1.5707963267948966,R[f+8>>3]=0;return}if(S=1/+jt(+u),w=h*+vt(+w)*S,h=+R[c>>3],u=S*((b-+vt(+u)*+vt(+h))/+jt(+h)),b=w>1?1:w,u=u>1?1:u,u=+R[c+8>>3]+ +qi(+(b<-1?-1:b),+(u<-1?-1:u)),u>3.141592653589793)do u=u+-6.283185307179586;while(u>3.141592653589793);if(u<-3.141592653589793)do u=u+6.283185307179586;while(u<-3.141592653589793);R[f+8>>3]=u;return}while(!1);if(+gt(+(u+-1.5707963267948966))<1e-16){R[g>>3]=1.5707963267948966,R[f+8>>3]=0;return}if(+gt(+(u+1.5707963267948966))<1e-16){R[g>>3]=-1.5707963267948966,R[f+8>>3]=0;return}if(u=+R[c+8>>3],u>3.141592653589793)do u=u+-6.283185307179586;while(u>3.141592653589793);if(u<-3.141592653589793)do u=u+6.283185307179586;while(u<-3.141592653589793);R[f+8>>3]=u}function aP(c,u){return c=c|0,u=u|0,c>>>0>15?(u=4,u|0):(R[u>>3]=+R[20656+(c<<3)>>3],u=0,u|0)}function pK(c,u){return c=c|0,u=u|0,c>>>0>15?(u=4,u|0):(R[u>>3]=+R[20784+(c<<3)>>3],u=0,u|0)}function hK(c,u){return c=c|0,u=u|0,c>>>0>15?(u=4,u|0):(R[u>>3]=+R[20912+(c<<3)>>3],u=0,u|0)}function AK(c,u){return c=c|0,u=u|0,c>>>0>15?(u=4,u|0):(R[u>>3]=+R[21040+(c<<3)>>3],u=0,u|0)}function E1(c,u){c=c|0,u=u|0;var h=0;return c>>>0>15?(u=4,u|0):(h=gu(7,0,c,((c|0)<0)<<31>>31)|0,h=bi(h|0,D()|0,120,0)|0,c=D()|0,d[u>>2]=h|2,d[u+4>>2]=c,u=0,u|0)}function lP(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0;return F=+R[u>>3],C=+R[c>>3],T=+vt(+((F-C)*.5)),w=+R[u+8>>3],x=+R[c+8>>3],b=+vt(+((w-x)*.5)),S=+jt(+C),L=+jt(+F),b=T*T+b*(L*S*b),b=+qi(+ +kt(+b),+ +kt(+(1-b)))*2,T=+R[h>>3],F=+vt(+((T-F)*.5)),f=+R[h+8>>3],w=+vt(+((f-w)*.5)),g=+jt(+T),w=F*F+w*(L*g*w),w=+qi(+ +kt(+w),+ +kt(+(1-w)))*2,T=+vt(+((C-T)*.5)),f=+vt(+((x-f)*.5)),f=T*T+f*(S*g*f),f=+qi(+ +kt(+f),+ +kt(+(1-f)))*2,g=(b+w+f)*.5,+(+gm(+ +kt(+(+Rs(+(g*.5))*+Rs(+((g-b)*.5))*+Rs(+((g-w)*.5))*+Rs(+((g-f)*.5)))))*4)}function mT(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0;if(S=I,I=I+192|0,w=S+168|0,b=S,g=ad(c,u,w)|0,g|0)return h=g,I=S,h|0;if(Ah(c,u,b)|0&&nt(27795,27190,415,27199),u=d[b>>2]|0,(u|0)>0){if(f=+lP(b+8|0,b+8+(((u|0)!=1&1)<<4)|0,w)+0,(u|0)!=1){c=1;do g=c,c=c+1|0,f=f+ +lP(b+8+(g<<4)|0,b+8+(((c|0)%(u|0)|0)<<4)|0,w);while((c|0)<(u|0))}}else f=0;return R[h>>3]=f,h=0,I=S,h|0}function fK(c,u,h){return c=c|0,u=u|0,h=h|0,c=mT(c,u,h)|0,c|0||(R[h>>3]=+R[h>>3]*6371.007180918475*6371.007180918475),c|0}function mK(c,u,h){return c=c|0,u=u|0,h=h|0,c=mT(c,u,h)|0,c|0||(R[h>>3]=+R[h>>3]*6371.007180918475*6371.007180918475*1e3*1e3),c|0}function yK(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;if(S=I,I=I+176|0,b=S,c=S1(c,u,b)|0,c|0)return b=c,I=S,b|0;if(R[h>>3]=0,c=d[b>>2]|0,(c|0)<=1)return b=0,I=S,b|0;u=c+-1|0,c=0,f=+R[b+8>>3],g=+R[b+16>>3],w=0;do c=c+1|0,x=f,f=+R[b+8+(c<<4)>>3],C=+vt(+((f-x)*.5)),T=g,g=+R[b+8+(c<<4)+8>>3],T=+vt(+((g-T)*.5)),T=C*C+T*(+jt(+f)*+jt(+x)*T),w=w+ +qi(+ +kt(+T),+ +kt(+(1-T)))*2;while((c|0)<(u|0));return R[h>>3]=w,b=0,I=S,b|0}function gK(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;if(S=I,I=I+176|0,b=S,c=S1(c,u,b)|0,c|0)return b=c,w=+R[h>>3],w=w*6371.007180918475,R[h>>3]=w,I=S,b|0;if(R[h>>3]=0,c=d[b>>2]|0,(c|0)<=1)return b=0,w=0,w=w*6371.007180918475,R[h>>3]=w,I=S,b|0;u=c+-1|0,c=0,f=+R[b+8>>3],g=+R[b+16>>3],w=0;do c=c+1|0,x=f,f=+R[b+8+(c<<4)>>3],C=+vt(+((f-x)*.5)),T=g,g=+R[b+8+(c<<4)+8>>3],T=+vt(+((g-T)*.5)),T=C*C+T*(+jt(+x)*+jt(+f)*T),w=w+ +qi(+ +kt(+T),+ +kt(+(1-T)))*2;while((c|0)!=(u|0));return R[h>>3]=w,b=0,C=w,C=C*6371.007180918475,R[h>>3]=C,I=S,b|0}function vK(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;if(S=I,I=I+176|0,b=S,c=S1(c,u,b)|0,c|0)return b=c,w=+R[h>>3],w=w*6371.007180918475,w=w*1e3,R[h>>3]=w,I=S,b|0;if(R[h>>3]=0,c=d[b>>2]|0,(c|0)<=1)return b=0,w=0,w=w*6371.007180918475,w=w*1e3,R[h>>3]=w,I=S,b|0;u=c+-1|0,c=0,f=+R[b+8>>3],g=+R[b+16>>3],w=0;do c=c+1|0,x=f,f=+R[b+8+(c<<4)>>3],C=+vt(+((f-x)*.5)),T=g,g=+R[b+8+(c<<4)+8>>3],T=+vt(+((g-T)*.5)),T=C*C+T*(+jt(+x)*+jt(+f)*T),w=w+ +qi(+ +kt(+T),+ +kt(+(1-T)))*2;while((c|0)!=(u|0));return R[h>>3]=w,b=0,C=w,C=C*6371.007180918475,C=C*1e3,R[h>>3]=C,I=S,b|0}function wK(c){c=c|0;var u=0,h=0,f=0;return u=Ps(1,12)|0,u||nt(27280,27235,49,27293),h=c+4|0,f=d[h>>2]|0,f|0?(f=f+8|0,d[f>>2]=u,d[h>>2]=u,u|0):(d[c>>2]|0&&nt(27310,27235,61,27333),f=c,d[f>>2]=u,d[h>>2]=u,u|0)}function bK(c,u){c=c|0,u=u|0;var h=0,f=0;return f=ra(24)|0,f||nt(27347,27235,78,27361),d[f>>2]=d[u>>2],d[f+4>>2]=d[u+4>>2],d[f+8>>2]=d[u+8>>2],d[f+12>>2]=d[u+12>>2],d[f+16>>2]=0,u=c+4|0,h=d[u>>2]|0,h|0?(d[h+16>>2]=f,d[u>>2]=f,f|0):(d[c>>2]|0&&nt(27376,27235,82,27361),d[c>>2]=f,d[u>>2]=f,f|0)}function uP(c){c=c|0;var u=0,h=0,f=0,g=0;if(c)for(f=1;;){if(u=d[c>>2]|0,u|0)do{if(h=d[u>>2]|0,h|0)do g=h,h=d[h+16>>2]|0,Xe(g);while((h|0)!=0);g=u,u=d[u+8>>2]|0,Xe(g)}while((u|0)!=0);if(u=c,c=d[c+8>>2]|0,f||Xe(u),c)f=0;else break}}function _K(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0,He=0,Fe=0,ht=0,ft=0,$t=0,at=0,We=0,_e=0,St=0,Zt=0,wt=0;if(g=c+8|0,d[g>>2]|0)return wt=1,wt|0;if(f=d[c>>2]|0,!f)return wt=0,wt|0;u=f,h=0;do h=h+1|0,u=d[u+8>>2]|0;while((u|0)!=0);if(h>>>0<2)return wt=0,wt|0;St=ra(h<<2)|0,St||nt(27396,27235,317,27415),_e=ra(h<<5)|0,_e||nt(27437,27235,321,27415),d[c>>2]=0,He=c+4|0,d[He>>2]=0,d[g>>2]=0,h=0,We=0,Ee=0,L=0;e:for(;;){if(C=d[f>>2]|0,C){w=0,b=C;do{if(T=+R[b+8>>3],u=b,b=d[b+16>>2]|0,x=(b|0)==0,g=x?C:b,S=+R[g+8>>3],+gt(+(T-S))>3.141592653589793){wt=14;break}w=w+(S-T)*(+R[u>>3]+ +R[g>>3])}while(!x);if((wt|0)==14){wt=0,w=0,u=C;do z=+R[u+8>>3],at=u+16|0,$t=d[at>>2]|0,$t=($t|0)==0?C:$t,X=+R[$t+8>>3],w=w+(+R[u>>3]+ +R[$t>>3])*((X<0?X+6.283185307179586:X)-(z<0?z+6.283185307179586:z)),u=d[((u|0)==0?f:at)>>2]|0;while((u|0)!=0)}w>0?(d[St+(We<<2)>>2]=f,We=We+1|0,g=Ee,u=L):wt=19}else wt=19;if((wt|0)==19){wt=0;do if(h){if(u=h+8|0,d[u>>2]|0){wt=21;break e}if(h=Ps(1,12)|0,!h){wt=23;break e}d[u>>2]=h,g=h+4|0,b=h,u=L}else if(L){g=He,b=L+8|0,u=f,h=c;break}else if(d[c>>2]|0){wt=27;break e}else{g=He,b=c,u=f,h=c;break}while(!1);if(d[b>>2]=f,d[g>>2]=f,b=_e+(Ee<<5)|0,x=d[f>>2]|0,x){for(C=_e+(Ee<<5)+8|0,R[C>>3]=17976931348623157e292,L=_e+(Ee<<5)+24|0,R[L>>3]=17976931348623157e292,R[b>>3]=-17976931348623157e292,F=_e+(Ee<<5)+16|0,R[F>>3]=-17976931348623157e292,oe=17976931348623157e292,re=-17976931348623157e292,g=0,j=x,T=17976931348623157e292,V=17976931348623157e292,J=-17976931348623157e292,S=-17976931348623157e292;w=+R[j>>3],z=+R[j+8>>3],j=d[j+16>>2]|0,B=(j|0)==0,X=+R[(B?x:j)+8>>3],w<T&&(R[C>>3]=w,T=w),z<V&&(R[L>>3]=z,V=z),w>J?R[b>>3]=w:w=J,z>S&&(R[F>>3]=z,S=z),oe=z>0&z<oe?z:oe,re=z<0&z>re?z:re,g=g|+gt(+(z-X))>3.141592653589793,!B;)J=w;g&&(R[F>>3]=re,R[L>>3]=oe)}else d[b>>2]=0,d[b+4>>2]=0,d[b+8>>2]=0,d[b+12>>2]=0,d[b+16>>2]=0,d[b+20>>2]=0,d[b+24>>2]=0,d[b+28>>2]=0;g=Ee+1|0}if(at=f+8|0,f=d[at>>2]|0,d[at>>2]=0,f)Ee=g,L=u;else{wt=45;break}}if((wt|0)==21)nt(27213,27235,35,27247);else if((wt|0)==23)nt(27267,27235,37,27247);else if((wt|0)==27)nt(27310,27235,61,27333);else if((wt|0)==45){e:do if((We|0)>0){for(at=(g|0)==0,ft=g<<2,$t=(c|0)==0,ht=0,u=0;;){if(Fe=d[St+(ht<<2)>>2]|0,at)wt=73;else{if(Ee=ra(ft)|0,!Ee){wt=50;break}if(He=ra(ft)|0,!He){wt=52;break}t:do if($t)h=0;else{for(g=0,h=0,b=c;f=_e+(g<<5)|0,cP(d[b>>2]|0,f,d[Fe>>2]|0)|0?(d[Ee+(h<<2)>>2]=b,d[He+(h<<2)>>2]=f,B=h+1|0):B=h,b=d[b+8>>2]|0,b;)g=g+1|0,h=B;if((B|0)>0)if(f=d[Ee>>2]|0,(B|0)==1)h=f;else for(F=0,j=-1,h=f,L=f;;){for(x=d[L>>2]|0,f=0,b=0;g=d[d[Ee+(b<<2)>>2]>>2]|0,(g|0)==(x|0)?C=f:C=f+((cP(g,d[He+(b<<2)>>2]|0,d[x>>2]|0)|0)&1)|0,b=b+1|0,(b|0)!=(B|0);)f=C;if(g=(C|0)>(j|0),h=g?L:h,f=F+1|0,(f|0)==(B|0))break t;F=f,j=g?C:j,L=d[Ee+(f<<2)>>2]|0}else h=0}while(!1);if(Xe(Ee),Xe(He),h){if(g=h+4|0,f=d[g>>2]|0,f)h=f+8|0;else if(d[h>>2]|0){wt=70;break}d[h>>2]=Fe,d[g>>2]=Fe}else wt=73}if((wt|0)==73){if(wt=0,u=d[Fe>>2]|0,u|0)do He=u,u=d[u+16>>2]|0,Xe(He);while((u|0)!=0);Xe(Fe),u=1}if(ht=ht+1|0,(ht|0)>=(We|0)){Zt=u;break e}}(wt|0)==50?nt(27452,27235,249,27471):(wt|0)==52?nt(27490,27235,252,27471):(wt|0)==70&&nt(27310,27235,61,27333)}else Zt=0;while(!1);return Xe(St),Xe(_e),wt=Zt,wt|0}return 0}function cP(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;if(!(eT(u,h)|0)||(u=VO(u)|0,f=+R[h>>3],g=+R[h+8>>3],g=u&g<0?g+6.283185307179586:g,c=d[c>>2]|0,!c))return c=0,c|0;if(u){u=0,x=g,h=c;e:for(;;){for(;b=+R[h>>3],g=+R[h+8>>3],h=h+16|0,C=d[h>>2]|0,C=(C|0)==0?c:C,w=+R[C>>3],S=+R[C+8>>3],b>w?(T=b,b=S):(T=w,w=b,b=g,g=S),f=f==w|f==T?f+2220446049250313e-31:f,!!(f<w|f>T);)if(h=d[h>>2]|0,!h){h=22;break e}if(S=b<0?b+6.283185307179586:b,b=g<0?g+6.283185307179586:g,x=S==x|b==x?x+-2220446049250313e-31:x,T=S+(b-S)*((f-w)/(T-w)),(T<0?T+6.283185307179586:T)>x&&(u=u^1),h=d[h>>2]|0,!h){h=22;break}}if((h|0)==22)return u|0}else{u=0,x=g,h=c;e:for(;;){for(;b=+R[h>>3],g=+R[h+8>>3],h=h+16|0,C=d[h>>2]|0,C=(C|0)==0?c:C,w=+R[C>>3],S=+R[C+8>>3],b>w?(T=b,b=S):(T=w,w=b,b=g,g=S),f=f==w|f==T?f+2220446049250313e-31:f,!!(f<w|f>T);)if(h=d[h>>2]|0,!h){h=22;break e}if(x=b==x|g==x?x+-2220446049250313e-31:x,b+(g-b)*((f-w)/(T-w))>x&&(u=u^1),h=d[h>>2]|0,!h){h=22;break}}if((h|0)==22)return u|0}return 0}function rl(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0;if(re=I,I=I+32|0,oe=re+16|0,J=re,w=fe(c|0,u|0,52)|0,D()|0,w=w&15,j=fe(h|0,f|0,52)|0,D()|0,(w|0)!=(j&15|0))return oe=12,I=re,oe|0;if(x=fe(c|0,u|0,45)|0,D()|0,x=x&127,C=fe(h|0,f|0,45)|0,D()|0,C=C&127,x>>>0>121|C>>>0>121)return oe=5,I=re,oe|0;if(j=(x|0)!=(C|0),j){if(S=XE(x,C)|0,(S|0)==7)return oe=1,I=re,oe|0;T=XE(C,x)|0,(T|0)==7?nt(27514,27538,161,27548):(B=S,b=T)}else B=0,b=0;L=hr(x)|0,F=hr(C)|0,d[oe>>2]=0,d[oe+4>>2]=0,d[oe+8>>2]=0,d[oe+12>>2]=0;do if(B){if(C=d[4272+(x*28|0)+(B<<2)>>2]|0,S=(C|0)>0,F)if(S){x=0,T=h,S=f;do T=rK(T,S)|0,S=D()|0,b=yu(b)|0,(b|0)==1&&(b=yu(1)|0),x=x+1|0;while((x|0)!=(C|0));C=b,x=T,T=S}else C=b,x=h,T=f;else if(S){x=0,T=h,S=f;do T=cT(T,S)|0,S=D()|0,b=yu(b)|0,x=x+1|0;while((x|0)!=(C|0));C=b,x=T,T=S}else C=b,x=h,T=f;if(pT(x,T,oe)|0,j||nt(27563,27538,191,27548),S=(L|0)!=0,b=(F|0)!=0,S&b&&nt(27590,27538,192,27548),S){if(b=Os(c,u)|0,(b|0)==7){w=5;break}if(Ae[22e3+(b*7|0)+B>>0]|0){w=1;break}T=d[21168+(b*28|0)+(B<<2)>>2]|0,x=T}else if(b){if(b=Os(x,T)|0,(b|0)==7){w=5;break}if(Ae[22e3+(b*7|0)+C>>0]|0){w=1;break}x=0,T=d[21168+(C*28|0)+(b<<2)>>2]|0}else x=0,T=0;if((x|T|0)<0)w=5;else{if((T|0)>0){S=oe+4|0,b=0;do _1(S),b=b+1|0;while((b|0)!=(T|0))}if(d[J>>2]=0,d[J+4>>2]=0,d[J+8>>2]=0,QO(J,B),w|0)for(;Pn(w)|0?b1(J):sd(J),(w|0)>1;)w=w+-1|0;if((x|0)>0){w=0;do _1(J),w=w+1|0;while((w|0)!=(x|0))}V=oe+4|0,cs(V,J,V),Hi(V),V=51}}else if(pT(h,f,oe)|0,(L|0)!=0&(F|0)!=0)if((C|0)!=(x|0)&&nt(27621,27538,261,27548),b=Os(c,u)|0,w=Os(h,f)|0,(b|0)==7|(w|0)==7)w=5;else if(Ae[22e3+(b*7|0)+w>>0]|0)w=1;else if(b=d[21168+(b*28|0)+(w<<2)>>2]|0,(b|0)>0){S=oe+4|0,w=0;do _1(S),w=w+1|0;while((w|0)!=(b|0));V=51}else V=51;else V=51;while(!1);return(V|0)==51&&(w=oe+4|0,d[g>>2]=d[w>>2],d[g+4>>2]=d[w+4>>2],d[g+8>>2]=d[w+8>>2],w=0),oe=w,I=re,oe|0}function dP(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0;if(V=I,I=I+48|0,x=V+36|0,b=V+24|0,S=V+12|0,T=V,g=fe(c|0,u|0,52)|0,D()|0,g=g&15,F=fe(c|0,u|0,45)|0,D()|0,F=F&127,F>>>0>121)return f=5,I=V,f|0;if(C=hr(F)|0,be(g|0,0,52)|0,J=D()|0|134225919,w=f,d[w>>2]=-1,d[w+4>>2]=J,!g)return g=w1(h)|0,(g|0)==7||(g=KE(F,g)|0,(g|0)==127)?(J=1,I=V,J|0):(j=be(g|0,0,45)|0,B=D()|0,F=f,B=d[F+4>>2]&-1040385|B,J=f,d[J>>2]=d[F>>2]|j,d[J+4>>2]=B,J=0,I=V,J|0);for(d[x>>2]=d[h>>2],d[x+4>>2]=d[h+4>>2],d[x+8>>2]=d[h+8>>2],h=g;;){if(w=h,h=h+-1|0,d[b>>2]=d[x>>2],d[b+4>>2]=d[x+4>>2],d[b+8>>2]=d[x+8>>2],Pn(w)|0){if(g=CY(x)|0,g|0){h=13;break}d[S>>2]=d[x>>2],d[S+4>>2]=d[x+4>>2],d[S+8>>2]=d[x+8>>2],b1(S)}else{if(g=kY(x)|0,g|0){h=13;break}d[S>>2]=d[x>>2],d[S+4>>2]=d[x+4>>2],d[S+8>>2]=d[x+8>>2],sd(S)}if(rT(b,S,T),Hi(T),g=f,re=d[g>>2]|0,g=d[g+4>>2]|0,X=(15-w|0)*3|0,oe=be(7,0,X|0)|0,g=g&~(D()|0),X=be(w1(T)|0,0,X|0)|0,g=D()|0|g,J=f,d[J>>2]=X|re&~oe,d[J+4>>2]=g,(w|0)<=1){h=14;break}}e:do if((h|0)!=13&&(h|0)==14)if((d[x>>2]|0)<=1&&(d[x+4>>2]|0)<=1&&(d[x+8>>2]|0)<=1){h=w1(x)|0,g=KE(F,h)|0,(g|0)==127?T=0:T=hr(g)|0;t:do if(h){if(C){if(g=Os(c,u)|0,(g|0)==7){g=5;break e}if(w=d[21376+(g*28|0)+(h<<2)>>2]|0,(w|0)>0){g=h,h=0;do g=nd(g)|0,h=h+1|0;while((h|0)!=(w|0))}else g=h;if((g|0)==1){g=9;break e}h=KE(F,g)|0,(h|0)==127&&nt(27648,27538,411,27678),hr(h)|0?nt(27693,27538,412,27678):(B=h,j=w,L=g)}else B=g,j=0,L=h;if(S=d[4272+(F*28|0)+(L<<2)>>2]|0,(S|0)<=-1&&nt(27724,27538,419,27678),!T){if((j|0)<0){g=5;break e}if(j|0){w=f,g=0,h=d[w>>2]|0,w=d[w+4>>2]|0;do h=od(h,w)|0,w=D()|0,X=f,d[X>>2]=h,d[X+4>>2]=w,g=g+1|0;while((g|0)<(j|0))}if((S|0)<=0){g=B,h=58;break}for(w=f,g=0,h=d[w>>2]|0,w=d[w+4>>2]|0;;)if(h=od(h,w)|0,w=D()|0,X=f,d[X>>2]=h,d[X+4>>2]=w,g=g+1|0,(g|0)==(S|0)){g=B,h=58;break t}}if(b=XE(B,F)|0,(b|0)==7&&nt(27514,27538,428,27678),g=f,h=d[g>>2]|0,g=d[g+4>>2]|0,(S|0)>0){w=0;do h=od(h,g)|0,g=D()|0,X=f,d[X>>2]=h,d[X+4>>2]=g,w=w+1|0;while((w|0)!=(S|0))}if(g=Os(h,g)|0,(g|0)==7&&nt(27795,27538,440,27678),h=YE(B)|0,h=d[(h?21792:21584)+(b*28|0)+(g<<2)>>2]|0,(h|0)<0&&nt(27795,27538,454,27678),!h)g=B,h=58;else{b=f,g=0,w=d[b>>2]|0,b=d[b+4>>2]|0;do w=uT(w,b)|0,b=D()|0,X=f,d[X>>2]=w,d[X+4>>2]=b,g=g+1|0;while((g|0)<(h|0));g=B,h=58}}else if((C|0)!=0&(T|0)!=0){if(h=Os(c,u)|0,w=f,w=Os(d[w>>2]|0,d[w+4>>2]|0)|0,(h|0)==7|(w|0)==7){g=5;break e}if(w=d[21376+(h*28|0)+(w<<2)>>2]|0,(w|0)<0){g=5;break e}if(!w)h=59;else{S=f,h=0,b=d[S>>2]|0,S=d[S+4>>2]|0;do b=od(b,S)|0,S=D()|0,X=f,d[X>>2]=b,d[X+4>>2]=S,h=h+1|0;while((h|0)<(w|0));h=58}}else h=58;while(!1);if((h|0)==58&&T&&(h=59),(h|0)==59&&(X=f,(Os(d[X>>2]|0,d[X+4>>2]|0)|0)==1)){g=9;break}X=f,oe=d[X>>2]|0,X=d[X+4>>2]&-1040385,re=be(g|0,0,45)|0,X=X|(D()|0),g=f,d[g>>2]=oe|re,d[g+4>>2]=X,g=0}else g=1;while(!1);return X=g,I=V,X|0}function SK(c,u,h,f,g,w){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0,w=w|0;var b=0,S=0;return S=I,I=I+16|0,b=S,g?c=15:(c=rl(c,u,h,f,b)|0,c||(OY(b,w),c=0)),I=S,c|0}function EK(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0;return b=I,I=I+16|0,w=b,f?h=15:(h=PY(h,w)|0,h||(h=dP(c,u,w,g)|0)),I=b,h|0}function TK(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0;return T=I,I=I+32|0,b=T+12|0,S=T,w=rl(c,u,c,u,b)|0,w|0?(S=w,I=T,S|0):(c=rl(c,u,h,f,S)|0,c|0?(S=c,I=T,S|0):(b=iT(b,S)|0,S=g,d[S>>2]=b,d[S+4>>2]=((b|0)<0)<<31>>31,S=0,I=T,S|0))}function $K(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0;return T=I,I=I+32|0,b=T+12|0,S=T,w=rl(c,u,c,u,b)|0,!w&&(w=rl(c,u,h,f,S)|0,!w)?(f=iT(b,S)|0,f=Ye(f|0,((f|0)<0)<<31>>31|0,1,0)|0,b=D()|0,S=g,d[S>>2]=f,d[S+4>>2]=b,S=0,I=T,S|0):(S=w,I=T,S|0)}function xK(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0,He=0,Fe=0,ht=0;if(Fe=I,I=I+48|0,Ee=Fe+24|0,b=Fe+12|0,He=Fe,w=rl(c,u,c,u,Ee)|0,!w&&(w=rl(c,u,h,f,b)|0,!w)){X=iT(Ee,b)|0,z=((X|0)<0)<<31>>31,d[Ee>>2]=0,d[Ee+4>>2]=0,d[Ee+8>>2]=0,d[b>>2]=0,d[b+4>>2]=0,d[b+8>>2]=0,rl(c,u,c,u,Ee)|0&&nt(27795,27538,692,27747),rl(c,u,h,f,b)|0&&nt(27795,27538,697,27747),KO(Ee),KO(b),C=(X|0)==0?0:1/+(X|0),h=d[Ee>>2]|0,V=C*+((d[b>>2]|0)-h|0),J=Ee+4|0,f=d[J>>2]|0,oe=C*+((d[b+4>>2]|0)-f|0),re=Ee+8|0,w=d[re>>2]|0,C=C*+((d[b+8>>2]|0)-w|0),d[He>>2]=h,L=He+4|0,d[L>>2]=f,F=He+8|0,d[F>>2]=w;e:do if((X|0)<0)w=0;else for(j=0,B=0;;){T=+(B>>>0)+4294967296*+(j|0),ht=V*T+ +(h|0),S=oe*T+ +(f|0),T=C*T+ +(w|0),h=~~+I1(+ht),b=~~+I1(+S),w=~~+I1(+T),ht=+gt(+(+(h|0)-ht)),S=+gt(+(+(b|0)-S)),T=+gt(+(+(w|0)-T));do if(ht>S&ht>T)h=0-(b+w)|0,f=b;else if(x=0-h|0,S>T){f=x-w|0;break}else{f=b,w=x-b|0;break}while(!1);if(d[He>>2]=h,d[L>>2]=f,d[F>>2]=w,NY(He),w=dP(c,u,He,g+(B<<3)|0)|0,w|0)break e;if(!((j|0)<(z|0)|(j|0)==(z|0)&B>>>0<X>>>0)){w=0;break e}h=Ye(B|0,j|0,1,0)|0,f=D()|0,j=f,B=h,h=d[Ee>>2]|0,f=d[J>>2]|0,w=d[re>>2]|0}while(!1);return He=w,I=Fe,He|0}return He=w,I=Fe,He|0}function gu(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0;if((h|0)==0&(f|0)==0)return g=0,w=1,dt(g|0),w|0;w=c,g=u,c=1,u=0;do b=(h&1|0)==0&!0,c=bi((b?1:w)|0,(b?0:g)|0,c|0,u|0)|0,u=D()|0,h=EP(h|0,f|0,1)|0,f=D()|0,w=bi(w|0,g|0,w|0,g|0)|0,g=D()|0;while(!((h|0)==0&(f|0)==0));return dt(u|0),c|0}function yT(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0;S=I,I=I+16|0,w=S,b=fe(c|0,u|0,52)|0,D()|0,b=b&15;do if(b){if(g=ad(c,u,w)|0,!g){x=+R[w>>3],T=1/+jt(+x),C=+R[25968+(b<<3)>>3],R[h>>3]=x+C,R[h+8>>3]=x-C,x=+R[w+8>>3],T=C*T,R[h+16>>3]=T+x,R[h+24>>3]=x-T;break}return b=g,I=S,b|0}else{if(g=fe(c|0,u|0,45)|0,D()|0,g=g&127,g>>>0>121)return b=5,I=S,b|0;w=22064+(g<<5)|0,d[h>>2]=d[w>>2],d[h+4>>2]=d[w+4>>2],d[h+8>>2]=d[w+8>>2],d[h+12>>2]=d[w+12>>2],d[h+16>>2]=d[w+16>>2],d[h+20>>2]=d[w+20>>2],d[h+24>>2]=d[w+24>>2],d[h+28>>2]=d[w+28>>2];break}while(!1);return xY(h,f?1.4:1.1),f=26096+(b<<3)|0,(d[f>>2]|0)==(c|0)&&(d[f+4>>2]|0)==(u|0)&&(R[h>>3]=1.5707963267948966),b=26224+(b<<3)|0,(d[b>>2]|0)==(c|0)&&(d[b+4>>2]|0)==(u|0)&&(R[h+8>>3]=-1.5707963267948966),+R[h>>3]!=1.5707963267948966&&+R[h+8>>3]!=-1.5707963267948966?(b=0,I=S,b|0):(R[h+16>>3]=3.141592653589793,R[h+24>>3]=-3.141592653589793,b=0,I=S,b|0)}function IK(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0;x=I,I=I+48|0,b=x+32|0,w=x+40|0,S=x,aT(b,0,0,0),T=d[b>>2]|0,b=d[b+4>>2]|0;do if(h>>>0<=15){if(g=Tm(f)|0,g|0){f=S,d[f>>2]=0,d[f+4>>2]=0,d[S+8>>2]=g,d[S+12>>2]=-1,f=S+16|0,T=S+29|0,d[f>>2]=0,d[f+4>>2]=0,d[f+8>>2]=0,Ae[f+12>>0]=0,Ae[T>>0]=Ae[w>>0]|0,Ae[T+1>>0]=Ae[w+1>>0]|0,Ae[T+2>>0]=Ae[w+2>>0]|0;break}if(g=Ps((d[u+8>>2]|0)+1|0,32)|0,g){gT(u,g),C=S,d[C>>2]=T,d[C+4>>2]=b,d[S+8>>2]=0,d[S+12>>2]=h,d[S+16>>2]=f,d[S+20>>2]=u,d[S+24>>2]=g,Ae[S+28>>0]=0,T=S+29|0,Ae[T>>0]=Ae[w>>0]|0,Ae[T+1>>0]=Ae[w+1>>0]|0,Ae[T+2>>0]=Ae[w+2>>0]|0;break}else{f=S,d[f>>2]=0,d[f+4>>2]=0,d[S+8>>2]=13,d[S+12>>2]=-1,f=S+16|0,T=S+29|0,d[f>>2]=0,d[f+4>>2]=0,d[f+8>>2]=0,Ae[f+12>>0]=0,Ae[T>>0]=Ae[w>>0]|0,Ae[T+1>>0]=Ae[w+1>>0]|0,Ae[T+2>>0]=Ae[w+2>>0]|0;break}}else T=S,d[T>>2]=0,d[T+4>>2]=0,d[S+8>>2]=4,d[S+12>>2]=-1,T=S+16|0,C=S+29|0,d[T>>2]=0,d[T+4>>2]=0,d[T+8>>2]=0,Ae[T+12>>0]=0,Ae[C>>0]=Ae[w>>0]|0,Ae[C+1>>0]=Ae[w+1>>0]|0,Ae[C+2>>0]=Ae[w+2>>0]|0;while(!1);T1(S),d[c>>2]=d[S>>2],d[c+4>>2]=d[S+4>>2],d[c+8>>2]=d[S+8>>2],d[c+12>>2]=d[S+12>>2],d[c+16>>2]=d[S+16>>2],d[c+20>>2]=d[S+20>>2],d[c+24>>2]=d[S+24>>2],d[c+28>>2]=d[S+28>>2],I=x}function T1(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0;if(z=I,I=I+336|0,j=z+168|0,B=z,f=c,h=d[f>>2]|0,f=d[f+4>>2]|0,(h|0)==0&(f|0)==0){I=z;return}if(u=c+28|0,Ae[u>>0]|0?(h=pP(h,f)|0,f=D()|0):Ae[u>>0]=1,X=c+20|0,!(d[d[X>>2]>>2]|0)){u=c+24|0,h=d[u>>2]|0,h|0&&Xe(h),re=c,d[re>>2]=0,d[re+4>>2]=0,d[c+8>>2]=0,d[X>>2]=0,d[c+12>>2]=-1,d[c+16>>2]=0,d[u>>2]=0,I=z;return}re=c+16|0,u=d[re>>2]|0,g=u&15;e:do if((h|0)==0&(f|0)==0)oe=c+24|0;else{V=c+12|0,L=(g|0)==3,C=u&255,T=(g|1|0)==3,F=c+24|0,x=(g+-1|0)>>>0<3,b=(g|2|0)==3,S=B+8|0;t:for(;;){if(w=fe(h|0,f|0,52)|0,D()|0,w=w&15,(w|0)==(d[V>>2]|0)){switch(C&15){case 0:case 2:case 3:{if(g=ad(h,f,j)|0,g|0){J=15;break t}if(vT(d[X>>2]|0,d[F>>2]|0,j)|0){J=19;break t}break}}if(T&&(g=d[(d[X>>2]|0)+4>>2]|0,d[j>>2]=d[g>>2],d[j+4>>2]=d[g+4>>2],d[j+8>>2]=d[g+8>>2],d[j+12>>2]=d[g+12>>2],eT(26832,j)|0)){if(dT(d[(d[X>>2]|0)+4>>2]|0,w,B)|0){J=25;break}if(g=B,(d[g>>2]|0)==(h|0)&&(d[g+4>>2]|0)==(f|0)){J=29;break}}if(x){if(g=Ah(h,f,j)|0,g|0){J=32;break}if(yT(h,f,B,0)|0){J=36;break}if(b&&AP(d[X>>2]|0,d[F>>2]|0,j,B)|0){J=42;break}if(T&&fP(d[X>>2]|0,d[F>>2]|0,j,B)|0){J=42;break}}if(L){if(u=yT(h,f,j,1)|0,g=d[F>>2]|0,u|0){J=45;break}if(tT(g,j)|0){if(GO(B,j),zO(j,d[F>>2]|0)|0){J=53;break}if(vT(d[X>>2]|0,d[F>>2]|0,S)|0){J=53;break}if(fP(d[X>>2]|0,d[F>>2]|0,B,j)|0){J=53;break}}}}do if((w|0)<(d[V>>2]|0)){if(u=yT(h,f,j,1)|0,g=d[F>>2]|0,u|0){J=58;break t}if(!(tT(g,j)|0)){J=73;break}if(zO(d[F>>2]|0,j)|0&&(GO(B,j),AP(d[X>>2]|0,d[F>>2]|0,B,j)|0)){J=65;break t}if(h=sP(h,f,w+1|0,B)|0,h|0){J=67;break t}f=B,h=d[f>>2]|0,f=d[f+4>>2]|0}else J=73;while(!1);if((J|0)==73&&(J=0,h=pP(h,f)|0,f=D()|0),(h|0)==0&(f|0)==0){oe=F;break e}}switch(J|0){case 15:{u=d[F>>2]|0,u|0&&Xe(u),J=c,d[J>>2]=0,d[J+4>>2]=0,d[X>>2]=0,d[V>>2]=-1,d[re>>2]=0,d[F>>2]=0,d[c+8>>2]=g,J=20;break}case 19:{d[c>>2]=h,d[c+4>>2]=f,J=20;break}case 25:{nt(27795,27761,470,27772);break}case 29:{d[c>>2]=h,d[c+4>>2]=f,I=z;return}case 32:{u=d[F>>2]|0,u|0&&Xe(u),oe=c,d[oe>>2]=0,d[oe+4>>2]=0,d[X>>2]=0,d[V>>2]=-1,d[re>>2]=0,d[F>>2]=0,d[c+8>>2]=g,I=z;return}case 36:{nt(27795,27761,493,27772);break}case 42:{d[c>>2]=h,d[c+4>>2]=f,I=z;return}case 45:{g|0&&Xe(g),J=c,d[J>>2]=0,d[J+4>>2]=0,d[X>>2]=0,d[V>>2]=-1,d[re>>2]=0,d[F>>2]=0,d[c+8>>2]=u,J=55;break}case 53:{d[c>>2]=h,d[c+4>>2]=f,J=55;break}case 58:{g|0&&Xe(g),J=c,d[J>>2]=0,d[J+4>>2]=0,d[X>>2]=0,d[V>>2]=-1,d[re>>2]=0,d[F>>2]=0,d[c+8>>2]=u,J=71;break}case 65:{d[c>>2]=h,d[c+4>>2]=f,J=71;break}case 67:{u=d[F>>2]|0,u|0&&Xe(u),oe=c,d[oe>>2]=0,d[oe+4>>2]=0,d[X>>2]=0,d[V>>2]=-1,d[re>>2]=0,d[F>>2]=0,d[c+8>>2]=h,I=z;return}}if((J|0)==20){I=z;return}else if((J|0)==55){I=z;return}else if((J|0)==71){I=z;return}}while(!1);u=d[oe>>2]|0,u|0&&Xe(u),J=c,d[J>>2]=0,d[J+4>>2]=0,d[c+8>>2]=0,d[X>>2]=0,d[c+12>>2]=-1,d[re>>2]=0,d[oe>>2]=0,I=z}function pP(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0;L=I,I=I+16|0,C=L,f=fe(c|0,u|0,52)|0,D()|0,f=f&15,h=fe(c|0,u|0,45)|0,D()|0;do if(f){for(;h=be(f+4095|0,0,52)|0,g=D()|0|u&-15728641,w=(15-f|0)*3|0,b=be(7,0,w|0)|0,S=D()|0,h=h|c|b,g=g|S,T=fe(c|0,u|0,w|0)|0,D()|0,T=T&7,f=f+-1|0,!(T>>>0<6);)if(f)u=g,c=h;else{x=4;break}if((x|0)==4){h=fe(h|0,g|0,45)|0,D()|0;break}return C=(T|0)==0&(Kt(h,g)|0)!=0,C=be((C?2:1)+T|0,0,w|0)|0,x=D()|0|u&~S,C=C|c&~b,dt(x|0),I=L,C|0}while(!1);return h=h&127,h>>>0>120?(x=0,C=0,dt(x|0),I=L,C|0):(aT(C,0,h+1|0,0),x=d[C+4>>2]|0,C=d[C>>2]|0,dt(x|0),I=L,C|0)}function MK(c,u,h,f,g,w){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0,w=w|0;var b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0;J=I,I=I+160|0,L=J+80|0,S=J+64|0,F=J+112|0,V=J,IK(L,c,u,h),x=L,AT(S,d[x>>2]|0,d[x+4>>2]|0,u),x=S,T=d[x>>2]|0,x=d[x+4>>2]|0,b=d[L+8>>2]|0,j=F+4|0,d[j>>2]=d[L>>2],d[j+4>>2]=d[L+4>>2],d[j+8>>2]=d[L+8>>2],d[j+12>>2]=d[L+12>>2],d[j+16>>2]=d[L+16>>2],d[j+20>>2]=d[L+20>>2],d[j+24>>2]=d[L+24>>2],d[j+28>>2]=d[L+28>>2],j=V,d[j>>2]=T,d[j+4>>2]=x,j=V+8|0,d[j>>2]=b,c=V+12|0,u=F,h=c+36|0;do d[c>>2]=d[u>>2],c=c+4|0,u=u+4|0;while((c|0)<(h|0));if(F=V+48|0,d[F>>2]=d[S>>2],d[F+4>>2]=d[S+4>>2],d[F+8>>2]=d[S+8>>2],d[F+12>>2]=d[S+12>>2],(T|0)==0&(x|0)==0)return V=b,I=J,V|0;h=V+16|0,C=V+24|0,L=V+28|0,b=0,S=0,u=T,c=x;do{if(!((b|0)<(g|0)|(b|0)==(g|0)&S>>>0<f>>>0)){B=4;break}if(x=S,S=Ye(S|0,b|0,1,0)|0,b=D()|0,x=w+(x<<3)|0,d[x>>2]=u,d[x+4>>2]=c,fT(F),c=F,u=d[c>>2]|0,c=d[c+4>>2]|0,(u|0)==0&(c|0)==0){if(T1(h),u=h,c=d[u>>2]|0,u=d[u+4>>2]|0,(c|0)==0&(u|0)==0){B=10;break}oP(c,u,d[L>>2]|0,F),c=F,u=d[c>>2]|0,c=d[c+4>>2]|0}x=V,d[x>>2]=u,d[x+4>>2]=c}while(!((u|0)==0&(c|0)==0));return(B|0)==4?(c=V+40|0,u=d[c>>2]|0,u|0&&Xe(u),B=V+16|0,d[B>>2]=0,d[B+4>>2]=0,d[C>>2]=0,d[V+36>>2]=0,d[L>>2]=-1,d[V+32>>2]=0,d[c>>2]=0,oP(0,0,0,F),d[V>>2]=0,d[V+4>>2]=0,d[j>>2]=0,V=14,I=J,V|0):((B|0)==10&&(d[V>>2]=0,d[V+4>>2]=0,d[j>>2]=d[C>>2]),V=d[j>>2]|0,I=J,V|0)}function CK(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0;if(L=I,I=I+48|0,T=L+32|0,S=L+40|0,x=L,!(d[c>>2]|0))return C=f,d[C>>2]=0,d[C+4>>2]=0,C=0,I=L,C|0;aT(T,0,0,0),b=T,g=d[b>>2]|0,b=d[b+4>>2]|0;do if(u>>>0>15)C=x,d[C>>2]=0,d[C+4>>2]=0,d[x+8>>2]=4,d[x+12>>2]=-1,C=x+16|0,h=x+29|0,d[C>>2]=0,d[C+4>>2]=0,d[C+8>>2]=0,Ae[C+12>>0]=0,Ae[h>>0]=Ae[S>>0]|0,Ae[h+1>>0]=Ae[S+1>>0]|0,Ae[h+2>>0]=Ae[S+2>>0]|0,h=4,C=9;else{if(h=Tm(h)|0,h|0){T=x,d[T>>2]=0,d[T+4>>2]=0,d[x+8>>2]=h,d[x+12>>2]=-1,T=x+16|0,C=x+29|0,d[T>>2]=0,d[T+4>>2]=0,d[T+8>>2]=0,Ae[T+12>>0]=0,Ae[C>>0]=Ae[S>>0]|0,Ae[C+1>>0]=Ae[S+1>>0]|0,Ae[C+2>>0]=Ae[S+2>>0]|0,C=9;break}if(h=Ps((d[c+8>>2]|0)+1|0,32)|0,!h){C=x,d[C>>2]=0,d[C+4>>2]=0,d[x+8>>2]=13,d[x+12>>2]=-1,C=x+16|0,h=x+29|0,d[C>>2]=0,d[C+4>>2]=0,d[C+8>>2]=0,Ae[C+12>>0]=0,Ae[h>>0]=Ae[S>>0]|0,Ae[h+1>>0]=Ae[S+1>>0]|0,Ae[h+2>>0]=Ae[S+2>>0]|0,h=13,C=9;break}gT(c,h),j=x,d[j>>2]=g,d[j+4>>2]=b,b=x+8|0,d[b>>2]=0,d[x+12>>2]=u,d[x+20>>2]=c,d[x+24>>2]=h,Ae[x+28>>0]=0,g=x+29|0,Ae[g>>0]=Ae[S>>0]|0,Ae[g+1>>0]=Ae[S+1>>0]|0,Ae[g+2>>0]=Ae[S+2>>0]|0,d[x+16>>2]=3,F=+EY(h),F=F*+SY(h),w=+gt(+ +R[h>>3]),w=F/+jt(+ +x1(+w,+ +gt(+ +R[h+8>>3])))*6371.007180918475*6371.007180918475,g=x+12|0,h=d[g>>2]|0;e:do if((h|0)>0)do{if(aP(h+-1|0,T)|0,!(w/+R[T>>3]>10))break e;j=d[g>>2]|0,h=j+-1|0,d[g>>2]=h}while((j|0)>1);while(!1);if(T1(x),g=f,d[g>>2]=0,d[g+4>>2]=0,g=x,h=d[g>>2]|0,g=d[g+4>>2]|0,!((h|0)==0&(g|0)==0))do bm(h,g,u,T)|0,S=T,c=f,S=Ye(d[c>>2]|0,d[c+4>>2]|0,d[S>>2]|0,d[S+4>>2]|0)|0,c=D()|0,j=f,d[j>>2]=S,d[j+4>>2]=c,T1(x),j=x,h=d[j>>2]|0,g=d[j+4>>2]|0;while(!((h|0)==0&(g|0)==0));h=d[b>>2]|0}while(!1);return j=h,I=L,j|0}function Em(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0;if(!(eT(u,h)|0)||(u=VO(u)|0,f=+R[h>>3],g=+R[h+8>>3],g=u&g<0?g+6.283185307179586:g,F=d[c>>2]|0,(F|0)<=0))return F=0,F|0;if(L=d[c+4>>2]|0,u){u=0,C=g,h=-1,c=0;e:for(;;){for(x=c;b=+R[L+(x<<4)>>3],g=+R[L+(x<<4)+8>>3],c=(h+2|0)%(F|0)|0,w=+R[L+(c<<4)>>3],S=+R[L+(c<<4)+8>>3],b>w?(T=b,b=S):(T=w,w=b,b=g,g=S),f=f==w|f==T?f+2220446049250313e-31:f,!!(f<w|f>T);)if(h=x+1|0,(h|0)>=(F|0)){h=22;break e}else c=x,x=h,h=c;if(S=b<0?b+6.283185307179586:b,b=g<0?g+6.283185307179586:g,C=S==C|b==C?C+-2220446049250313e-31:C,T=S+(b-S)*((f-w)/(T-w)),(T<0?T+6.283185307179586:T)>C&&(u=u^1),c=x+1|0,(c|0)>=(F|0)){h=22;break}else h=x}if((h|0)==22)return u|0}else{u=0,C=g,h=-1,c=0;e:for(;;){for(x=c;b=+R[L+(x<<4)>>3],g=+R[L+(x<<4)+8>>3],c=(h+2|0)%(F|0)|0,w=+R[L+(c<<4)>>3],S=+R[L+(c<<4)+8>>3],b>w?(T=b,b=S):(T=w,w=b,b=g,g=S),f=f==w|f==T?f+2220446049250313e-31:f,!!(f<w|f>T);)if(h=x+1|0,(h|0)>=(F|0)){h=22;break e}else c=x,x=h,h=c;if(C=b==C|g==C?C+-2220446049250313e-31:C,b+(g-b)*((f-w)/(T-w))>C&&(u=u^1),c=x+1|0,(c|0)>=(F|0)){h=22;break}else h=x}if((h|0)==22)return u|0}return 0}function hP(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0;if(B=d[c>>2]|0,!B){d[u>>2]=0,d[u+4>>2]=0,d[u+8>>2]=0,d[u+12>>2]=0,d[u+16>>2]=0,d[u+20>>2]=0,d[u+24>>2]=0,d[u+28>>2]=0;return}if(V=u+8|0,R[V>>3]=17976931348623157e292,J=u+24|0,R[J>>3]=17976931348623157e292,R[u>>3]=-17976931348623157e292,oe=u+16|0,R[oe>>3]=-17976931348623157e292,!((B|0)<=0)){for(F=d[c+4>>2]|0,x=17976931348623157e292,C=-17976931348623157e292,L=0,c=-1,w=17976931348623157e292,b=17976931348623157e292,T=-17976931348623157e292,f=-17976931348623157e292,j=0;h=+R[F+(j<<4)>>3],S=+R[F+(j<<4)+8>>3],c=c+2|0,g=+R[F+(((c|0)==(B|0)?0:c)<<4)+8>>3],h<w&&(R[V>>3]=h,w=h),S<b&&(R[J>>3]=S,b=S),h>T?R[u>>3]=h:h=T,S>f&&(R[oe>>3]=S,f=S),x=S>0&S<x?S:x,C=S<0&S>C?S:C,L=L|+gt(+(S-g))>3.141592653589793,c=j+1|0,(c|0)!=(B|0);)re=j,T=h,j=c,c=re;L&&(R[oe>>3]=C,R[J>>3]=x)}}function Tm(c){return c=c|0,(c>>>0<4?0:15)|0}function gT(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0,He=0,Fe=0;if(B=d[c>>2]|0,B){if(V=u+8|0,R[V>>3]=17976931348623157e292,J=u+24|0,R[J>>3]=17976931348623157e292,R[u>>3]=-17976931348623157e292,oe=u+16|0,R[oe>>3]=-17976931348623157e292,(B|0)>0){for(g=d[c+4>>2]|0,F=17976931348623157e292,j=-17976931348623157e292,f=0,h=-1,T=17976931348623157e292,x=17976931348623157e292,L=-17976931348623157e292,b=-17976931348623157e292,re=0;w=+R[g+(re<<4)>>3],C=+R[g+(re<<4)+8>>3],He=h+2|0,S=+R[g+(((He|0)==(B|0)?0:He)<<4)+8>>3],w<T&&(R[V>>3]=w,T=w),C<x&&(R[J>>3]=C,x=C),w>L?R[u>>3]=w:w=L,C>b&&(R[oe>>3]=C,b=C),F=C>0&C<F?C:F,j=C<0&C>j?C:j,f=f|+gt(+(C-S))>3.141592653589793,h=re+1|0,(h|0)!=(B|0);)He=re,L=w,re=h,h=He;f&&(R[oe>>3]=j,R[J>>3]=F)}}else d[u>>2]=0,d[u+4>>2]=0,d[u+8>>2]=0,d[u+12>>2]=0,d[u+16>>2]=0,d[u+20>>2]=0,d[u+24>>2]=0,d[u+28>>2]=0;if(He=c+8|0,h=d[He>>2]|0,!((h|0)<=0)){Ee=c+12|0,z=0;do if(g=d[Ee>>2]|0,f=z,z=z+1|0,J=u+(z<<5)|0,oe=d[g+(f<<3)>>2]|0,oe){if(re=u+(z<<5)+8|0,R[re>>3]=17976931348623157e292,c=u+(z<<5)+24|0,R[c>>3]=17976931348623157e292,R[J>>3]=-17976931348623157e292,X=u+(z<<5)+16|0,R[X>>3]=-17976931348623157e292,(oe|0)>0){for(B=d[g+(f<<3)+4>>2]|0,F=17976931348623157e292,j=-17976931348623157e292,g=0,f=-1,V=0,T=17976931348623157e292,x=17976931348623157e292,C=-17976931348623157e292,b=-17976931348623157e292;w=+R[B+(V<<4)>>3],L=+R[B+(V<<4)+8>>3],f=f+2|0,S=+R[B+(((f|0)==(oe|0)?0:f)<<4)+8>>3],w<T&&(R[re>>3]=w,T=w),L<x&&(R[c>>3]=L,x=L),w>C?R[J>>3]=w:w=C,L>b&&(R[X>>3]=L,b=L),F=L>0&L<F?L:F,j=L<0&L>j?L:j,g=g|+gt(+(L-S))>3.141592653589793,f=V+1|0,(f|0)!=(oe|0);)Fe=V,V=f,C=w,f=Fe;g&&(R[X>>3]=j,R[c>>3]=F)}}else d[J>>2]=0,d[J+4>>2]=0,d[J+8>>2]=0,d[J+12>>2]=0,d[J+16>>2]=0,d[J+20>>2]=0,d[J+24>>2]=0,d[J+28>>2]=0,h=d[He>>2]|0;while((z|0)<(h|0))}}function vT(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0;if(!(Em(c,u,h)|0))return g=0,g|0;if(g=c+8|0,(d[g>>2]|0)<=0)return g=1,g|0;for(f=c+12|0,c=0;;){if(w=c,c=c+1|0,Em((d[f>>2]|0)+(w<<3)|0,u+(c<<5)|0,h)|0){c=0,f=6;break}if((c|0)>=(d[g>>2]|0)){c=1,f=6;break}}return(f|0)==6?c|0:0}function AP(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0;if(x=I,I=I+16|0,S=x,b=h+8|0,!(Em(c,u,b)|0))return T=0,I=x,T|0;T=c+8|0;e:do if((d[T>>2]|0)>0){for(w=c+12|0,g=0;;){if(C=g,g=g+1|0,Em((d[w>>2]|0)+(C<<3)|0,u+(g<<5)|0,b)|0){g=0;break}if((g|0)>=(d[T>>2]|0))break e}return I=x,g|0}while(!1);if($1(c,u,h,f)|0)return C=0,I=x,C|0;d[S>>2]=d[h>>2],d[S+4>>2]=b,g=d[T>>2]|0;e:do if((g|0)>0)for(c=c+12|0,b=0,w=g;;){if(g=d[c>>2]|0,(d[g+(b<<3)>>2]|0)>0){if(Em(S,f,d[g+(b<<3)+4>>2]|0)|0){g=0;break e}if(g=b+1|0,$1((d[c>>2]|0)+(b<<3)|0,u+(g<<5)|0,h,f)|0){g=0;break e}w=d[T>>2]|0}else g=b+1|0;if((g|0)<(w|0))b=g;else{g=1;break}}else g=1;while(!1);return C=g,I=x,C|0}function $1(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0,He=0,Fe=0,ht=0;if(He=I,I=I+176|0,re=He+172|0,g=He+168|0,X=He,!(tT(u,f)|0))return c=0,I=He,c|0;if(TY(u,f,re,g),gh(X|0,h|0,168)|0,(d[h>>2]|0)>0){u=0;do Fe=X+8+(u<<4)+8|0,oe=+ln(+R[Fe>>3],d[g>>2]|0),R[Fe>>3]=oe,u=u+1|0;while((u|0)<(d[h>>2]|0))}V=+R[f>>3],J=+R[f+8>>3],oe=+ln(+R[f+16>>3],d[g>>2]|0),j=+ln(+R[f+24>>3],d[g>>2]|0);e:do if((d[c>>2]|0)>0){if(f=c+4|0,g=d[X>>2]|0,(g|0)<=0){for(u=0;;)if(u=u+1|0,(u|0)>=(d[c>>2]|0)){u=0;break e}}for(h=0;;){if(u=d[f>>2]|0,F=+R[u+(h<<4)>>3],B=+ln(+R[u+(h<<4)+8>>3],d[re>>2]|0),u=d[f>>2]|0,h=h+1|0,Fe=(h|0)%(d[c>>2]|0)|0,w=+R[u+(Fe<<4)>>3],b=+ln(+R[u+(Fe<<4)+8>>3],d[re>>2]|0),!(F>=V)|!(w>=V)&&!(F<=J)|!(w<=J)&&!(B<=j)|!(b<=j)&&!(B>=oe)|!(b>=oe)){L=w-F,x=b-B,u=0;do if(ht=u,u=u+1|0,Fe=(u|0)==(g|0)?0:u,w=+R[X+8+(ht<<4)+8>>3],b=+R[X+8+(Fe<<4)+8>>3]-w,S=+R[X+8+(ht<<4)>>3],T=+R[X+8+(Fe<<4)>>3]-S,C=L*b-x*T,C!=0&&(z=B-w,Ee=F-S,T=(z*T-b*Ee)/C,!(T<0|T>1))&&(C=(L*z-x*Ee)/C,C>=0&C<=1)){u=1;break e}while((u|0)<(g|0))}if((h|0)>=(d[c>>2]|0)){u=0;break}}}else u=0;while(!1);return ht=u,I=He,ht|0}function fP(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0;if($1(c,u,h,f)|0)return w=1,w|0;if(w=c+8|0,(d[w>>2]|0)<=0)return w=0,w|0;for(g=c+12|0,c=0;;){if(b=c,c=c+1|0,$1((d[g>>2]|0)+(b<<3)|0,u+(c<<5)|0,h,f)|0){c=1,g=6;break}if((c|0)>=(d[w>>2]|0)){c=0,g=6;break}}return(g|0)==6?c|0:0}function kK(){return 8}function RK(){return 16}function OK(){return 168}function PK(){return 8}function NK(){return 16}function LK(){return 12}function DK(){return 8}function FK(c){return c=c|0,+(+((d[c>>2]|0)>>>0)+4294967296*+(d[c+4>>2]|0))}function jK(c){c=c|0;var u=0,h=0;return h=+R[c>>3],u=+R[c+8>>3],+ +kt(+(h*h+u*u))}function mP(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0;x=+R[c>>3],T=+R[u>>3]-x,S=+R[c+8>>3],b=+R[u+8>>3]-S,L=+R[h>>3],w=+R[f>>3]-L,F=+R[h+8>>3],C=+R[f+8>>3]-F,w=(w*(S-F)-(x-L)*C)/(T*C-b*w),R[g>>3]=x+T*w,R[g+8>>3]=S+b*w}function yP(c,u){return c=c|0,u=u|0,+gt(+(+R[c>>3]-+R[u>>3]))<11920928955078125e-23?(u=+gt(+(+R[c+8>>3]-+R[u+8>>3]))<11920928955078125e-23,u|0):(u=0,u|0)}function Yr(c,u){c=c|0,u=u|0;var h=0,f=0,g=0;return g=+R[c>>3]-+R[u>>3],f=+R[c+8>>3]-+R[u+8>>3],h=+R[c+16>>3]-+R[u+16>>3],+(g*g+f*f+h*h)}function BK(c,u){c=c|0,u=u|0;var h=0,f=0,g=0;h=+R[c>>3],f=+jt(+h),h=+vt(+h),R[u+16>>3]=h,h=+R[c+8>>3],g=f*+jt(+h),R[u>>3]=g,h=f*+vt(+h),R[u+8>>3]=h}function UK(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0;if(w=I,I=I+16|0,g=w,f=Kt(c,u)|0,(h+-1|0)>>>0>5||(f=(f|0)!=0,(h|0)==1&f))return g=-1,I=w,g|0;do if($m(c,u,g)|0)f=-1;else if(f){f=((d[26352+(h<<2)>>2]|0)+5-(d[g>>2]|0)|0)%5|0;break}else{f=((d[26384+(h<<2)>>2]|0)+6-(d[g>>2]|0)|0)%6|0;break}while(!1);return g=f,I=w,g|0}function $m(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0;if(C=I,I=I+32|0,S=C+16|0,T=C,f=hh(c,u,S)|0,f|0)return h=f,I=C,h|0;w=rP(c,u)|0,x=Os(c,u)|0,vY(w,T),f=wY(w,d[S>>2]|0)|0;do if(hr(w)|0){do switch(w|0){case 4:{g=0;break}case 14:{g=1;break}case 24:{g=2;break}case 38:{g=3;break}case 49:{g=4;break}case 58:{g=5;break}case 63:{g=6;break}case 72:{g=7;break}case 83:{g=8;break}case 97:{g=9;break}case 107:{g=10;break}case 117:{g=11;break}default:nt(27795,27797,75,27806)}while(!1);if(b=d[26416+(g*24|0)+8>>2]|0,u=d[26416+(g*24|0)+16>>2]|0,c=d[S>>2]|0,(c|0)!=(d[T>>2]|0)&&(T=YE(w)|0,c=d[S>>2]|0,T|(c|0)==(u|0)&&(f=(f+1|0)%6|0)),(x|0)==3&(c|0)==(u|0)){f=(f+5|0)%6|0;break}(x|0)==5&(c|0)==(b|0)&&(f=(f+1|0)%6|0)}while(!1);return d[h>>2]=f,h=0,I=C,h|0}function Nn(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0;if(X=I,I=I+32|0,re=X+24|0,J=X+20|0,B=X+8|0,j=X+16|0,F=X,T=(Kt(c,u)|0)==0,T=T?6:5,C=fe(c|0,u|0,52)|0,D()|0,C=C&15,T>>>0<=h>>>0)return f=2,I=X,f|0;L=(C|0)==0,!L&&(V=be(7,0,(C^15)*3|0)|0,(V&c|0)==0&((D()|0)&u|0)==0)?g=h:w=4;e:do if((w|0)==4){if(g=(Kt(c,u)|0)!=0,((g?4:5)|0)<(h|0)||$m(c,u,re)|0||(w=(d[re>>2]|0)+h|0,g?g=26704+(((w|0)%5|0)<<2)|0:g=26736+(((w|0)%6|0)<<2)|0,V=d[g>>2]|0,(V|0)==7))return f=1,I=X,f|0;d[J>>2]=0,g=vi(c,u,V,J,B)|0;do if(!g){if(S=B,x=d[S>>2]|0,S=d[S+4>>2]|0,b=S>>>0<u>>>0|(S|0)==(u|0)&x>>>0<c>>>0,w=b?x:c,b=b?S:u,!L&&(L=be(7,0,(C^15)*3|0)|0,(x&L|0)==0&(S&(D()|0)|0)==0))g=h;else{if(S=(h+-1+T|0)%(T|0)|0,g=Kt(c,u)|0,(S|0)<0&&nt(27795,27797,248,27822),T=(g|0)!=0,((T?4:5)|0)<(S|0)&&nt(27795,27797,248,27822),$m(c,u,re)|0&&nt(27795,27797,248,27822),g=(d[re>>2]|0)+S|0,T?g=26704+(((g|0)%5|0)<<2)|0:g=26736+(((g|0)%6|0)<<2)|0,S=d[g>>2]|0,(S|0)==7&&nt(27795,27797,248,27822),d[j>>2]=0,g=vi(c,u,S,j,F)|0,g|0)break;x=F,T=d[x>>2]|0,x=d[x+4>>2]|0;do if(x>>>0<b>>>0|(x|0)==(b|0)&T>>>0<w>>>0){if(Kt(T,x)|0?w=ZE(T,x,c,u)|0:w=d[26800+((((d[j>>2]|0)+(d[26768+(S<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,g=Kt(T,x)|0,(w+-1|0)>>>0>5){g=-1,w=T,b=x;break}if(g=(g|0)!=0,(w|0)==1&g){g=-1,w=T,b=x;break}do if($m(T,x,re)|0)g=-1;else if(g){g=((d[26352+(w<<2)>>2]|0)+5-(d[re>>2]|0)|0)%5|0;break}else{g=((d[26384+(w<<2)>>2]|0)+6-(d[re>>2]|0)|0)%6|0;break}while(!1);w=T,b=x}else g=h;while(!1);S=B,x=d[S>>2]|0,S=d[S+4>>2]|0}if((w|0)==(x|0)&(b|0)==(S|0)){if(T=(Kt(x,S)|0)!=0,T?c=ZE(x,S,c,u)|0:c=d[26800+((((d[J>>2]|0)+(d[26768+(V<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,g=Kt(x,S)|0,(c+-1|0)>>>0<=5&&(oe=(g|0)!=0,!((c|0)==1&oe)))do if($m(x,S,re)|0)g=-1;else if(oe){g=((d[26352+(c<<2)>>2]|0)+5-(d[re>>2]|0)|0)%5|0;break}else{g=((d[26384+(c<<2)>>2]|0)+6-(d[re>>2]|0)|0)%6|0;break}while(!1);else g=-1;g=g+1|0,g=(g|0)==6|T&(g|0)==5?0:g}u=b,c=w;break e}while(!1);return f=g,I=X,f|0}while(!1);return oe=be(g|0,0,56)|0,re=D()|0|u&-2130706433|536870912,d[f>>2]=oe|c,d[f+4>>2]=re,f=0,I=X,f|0}function VK(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0;return w=(Kt(c,u)|0)==0,f=Nn(c,u,0,h)|0,g=(f|0)==0,w?!g||(f=Nn(c,u,1,h+8|0)|0,f|0)||(f=Nn(c,u,2,h+16|0)|0,f|0)||(f=Nn(c,u,3,h+24|0)|0,f|0)||(f=Nn(c,u,4,h+32|0)|0,f)?(w=f,w|0):Nn(c,u,5,h+40|0)|0:!g||(f=Nn(c,u,1,h+8|0)|0,f|0)||(f=Nn(c,u,2,h+16|0)|0,f|0)||(f=Nn(c,u,3,h+24|0)|0,f|0)||(f=Nn(c,u,4,h+32|0)|0,f|0)?(w=f,w|0):(w=h+40|0,d[w>>2]=0,d[w+4>>2]=0,w=0,w|0)}function zK(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0,S=0,T=0;return T=I,I=I+192|0,g=T,w=T+168|0,b=fe(c|0,u|0,56)|0,D()|0,b=b&7,S=u&-2130706433|134217728,f=hh(c,S,w)|0,f|0?(S=f,I=T,S|0):(u=fe(c|0,u|0,52)|0,D()|0,u=u&15,Kt(c,S)|0?sT(w,u,b,1,g):nT(w,u,b,1,g),S=g+8|0,d[h>>2]=d[S>>2],d[h+4>>2]=d[S+4>>2],d[h+8>>2]=d[S+8>>2],d[h+12>>2]=d[S+12>>2],S=0,I=T,S|0)}function gP(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0;return g=I,I=I+16|0,h=g,!(!0&(u&2013265920|0)==536870912)||(f=u&-2130706433|134217728,!(oT(c,f)|0))?(f=0,I=g,f|0):(w=fe(c|0,u|0,56)|0,D()|0,w=(Nn(c,f,w&7,h)|0)==0,f=h,f=w&((d[f>>2]|0)==(c|0)?(d[f+4>>2]|0)==(u|0):0)&1,I=g,f|0)}function vP(c,u,h){c=c|0,u=u|0,h=h|0;var f=0;(u|0)>0?(f=Ps(u,4)|0,d[c>>2]=f,f||nt(27835,27858,40,27872)):d[c>>2]=0,d[c+4>>2]=u,d[c+8>>2]=0,d[c+12>>2]=h}function wP(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0;g=c+4|0,w=c+12|0,b=c+8|0;e:for(;;){for(h=d[g>>2]|0,u=0;;){if((u|0)>=(h|0))break e;if(f=d[c>>2]|0,S=d[f+(u<<2)>>2]|0,!S)u=u+1|0;else break}u=f+(~~(+gt(+(+rt(10,+ +(15-(d[w>>2]|0)|0))*(+R[S>>3]+ +R[S+8>>3])))%+(h|0))>>>0<<2)|0,h=d[u>>2]|0;t:do if(h|0){if(f=S+32|0,(h|0)==(S|0))d[u>>2]=d[f>>2];else{if(h=h+32|0,u=d[h>>2]|0,!u)break;for(;(u|0)!=(S|0);)if(h=u+32|0,u=d[h>>2]|0,!u)break t;d[h>>2]=d[f>>2]}Xe(S),d[b>>2]=(d[b>>2]|0)+-1}while(!1)}Xe(d[c>>2]|0)}function bP(c){c=c|0;var u=0,h=0,f=0;for(f=d[c+4>>2]|0,h=0;;){if((h|0)>=(f|0)){u=0,h=4;break}if(u=d[(d[c>>2]|0)+(h<<2)>>2]|0,!u)h=h+1|0;else{h=4;break}}return(h|0)==4?u|0:0}function _P(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0;if(h=~~(+gt(+(+rt(10,+ +(15-(d[c+12>>2]|0)|0))*(+R[u>>3]+ +R[u+8>>3])))%+(d[c+4>>2]|0))>>>0,h=(d[c>>2]|0)+(h<<2)|0,f=d[h>>2]|0,!f)return w=1,w|0;w=u+32|0;do if((f|0)!=(u|0)){if(h=d[f+32>>2]|0,!h)return w=1,w|0;for(g=h;;){if((g|0)==(u|0)){g=8;break}if(h=d[g+32>>2]|0,h)f=g,g=h;else{h=1,g=10;break}}if((g|0)==8){d[f+32>>2]=d[w>>2];break}else if((g|0)==10)return h|0}else d[h>>2]=d[w>>2];while(!1);return Xe(u),w=c+8|0,d[w>>2]=(d[w>>2]|0)+-1,w=0,w|0}function GK(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0;w=ra(40)|0,w||nt(27888,27858,98,27901),d[w>>2]=d[u>>2],d[w+4>>2]=d[u+4>>2],d[w+8>>2]=d[u+8>>2],d[w+12>>2]=d[u+12>>2],g=w+16|0,d[g>>2]=d[h>>2],d[g+4>>2]=d[h+4>>2],d[g+8>>2]=d[h+8>>2],d[g+12>>2]=d[h+12>>2],d[w+32>>2]=0,g=~~(+gt(+(+rt(10,+ +(15-(d[c+12>>2]|0)|0))*(+R[u>>3]+ +R[u+8>>3])))%+(d[c+4>>2]|0))>>>0,g=(d[c>>2]|0)+(g<<2)|0,f=d[g>>2]|0;do if(!f)d[g>>2]=w;else{for(;!(fh(f,u)|0&&fh(f+16|0,h)|0);)if(g=d[f+32>>2]|0,f=(g|0)==0?f:g,!(d[f+32>>2]|0)){b=10;break}if((b|0)==10){d[f+32>>2]=w;break}return Xe(w),b=f,b|0}while(!1);return b=c+8|0,d[b>>2]=(d[b>>2]|0)+1,b=w,b|0}function qK(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0;if(g=~~(+gt(+(+rt(10,+ +(15-(d[c+12>>2]|0)|0))*(+R[u>>3]+ +R[u+8>>3])))%+(d[c+4>>2]|0))>>>0,g=d[(d[c>>2]|0)+(g<<2)>>2]|0,!g)return h=0,h|0;if(!h){for(c=g;;){if(fh(c,u)|0){f=10;break}if(c=d[c+32>>2]|0,!c){c=0,f=10;break}}if((f|0)==10)return c|0}for(c=g;;){if(fh(c,u)|0&&fh(c+16|0,h)|0){f=10;break}if(c=d[c+32>>2]|0,!c){c=0,f=10;break}}return(f|0)==10?c|0:0}function HK(c,u){c=c|0,u=u|0;var h=0;if(h=~~(+gt(+(+rt(10,+ +(15-(d[c+12>>2]|0)|0))*(+R[u>>3]+ +R[u+8>>3])))%+(d[c+4>>2]|0))>>>0,c=d[(d[c>>2]|0)+(h<<2)>>2]|0,!c)return h=0,h|0;for(;;){if(fh(c,u)|0){u=5;break}if(c=d[c+32>>2]|0,!c){c=0,u=5;break}}return(u|0)==5?c|0:0}function WK(){return 27920}function vu(c){return c=+c,~~+$P(+c)|0}function ra(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0,V=0,J=0,oe=0,re=0,X=0,z=0,Ee=0;Ee=I,I=I+16|0,F=Ee;do if(c>>>0<245){if(x=c>>>0<11?16:c+11&-8,c=x>>>3,L=d[6981]|0,h=L>>>c,h&3|0)return u=(h&1^1)+c|0,c=27964+(u<<1<<2)|0,h=c+8|0,f=d[h>>2]|0,g=f+8|0,w=d[g>>2]|0,(w|0)==(c|0)?d[6981]=L&~(1<<u):(d[w+12>>2]=c,d[h>>2]=w),z=u<<3,d[f+4>>2]=z|3,z=f+z+4|0,d[z>>2]=d[z>>2]|1,z=g,I=Ee,z|0;if(C=d[6983]|0,x>>>0>C>>>0){if(h|0)return u=2<<c,u=h<<c&(u|0-u),u=(u&0-u)+-1|0,S=u>>>12&16,u=u>>>S,h=u>>>5&8,u=u>>>h,w=u>>>2&4,u=u>>>w,c=u>>>1&2,u=u>>>c,f=u>>>1&1,f=(h|S|w|c|f)+(u>>>f)|0,u=27964+(f<<1<<2)|0,c=u+8|0,w=d[c>>2]|0,S=w+8|0,h=d[S>>2]|0,(h|0)==(u|0)?(c=L&~(1<<f),d[6981]=c):(d[h+12>>2]=u,d[c>>2]=h,c=L),z=f<<3,b=z-x|0,d[w+4>>2]=x|3,g=w+x|0,d[g+4>>2]=b|1,d[w+z>>2]=b,C|0&&(f=d[6986]|0,u=C>>>3,h=27964+(u<<1<<2)|0,u=1<<u,c&u?(c=h+8|0,u=d[c>>2]|0):(d[6981]=c|u,u=h,c=h+8|0),d[c>>2]=f,d[u+12>>2]=f,d[f+8>>2]=u,d[f+12>>2]=h),d[6983]=b,d[6986]=g,z=S,I=Ee,z|0;if(w=d[6982]|0,w){for(h=(w&0-w)+-1|0,g=h>>>12&16,h=h>>>g,f=h>>>5&8,h=h>>>f,b=h>>>2&4,h=h>>>b,S=h>>>1&2,h=h>>>S,T=h>>>1&1,T=d[28228+((f|g|b|S|T)+(h>>>T)<<2)>>2]|0,h=T,S=T,T=(d[T+4>>2]&-8)-x|0;c=d[h+16>>2]|0,!(!c&&(c=d[h+20>>2]|0,!c));)b=(d[c+4>>2]&-8)-x|0,g=b>>>0<T>>>0,h=c,S=g?c:S,T=g?b:T;if(b=S+x|0,b>>>0>S>>>0){g=d[S+24>>2]|0,u=d[S+12>>2]|0;do if((u|0)==(S|0)){if(c=S+20|0,u=d[c>>2]|0,!u&&(c=S+16|0,u=d[c>>2]|0,!u)){h=0;break}for(;;)if(f=u+20|0,h=d[f>>2]|0,h)u=h,c=f;else if(f=u+16|0,h=d[f>>2]|0,h)u=h,c=f;else break;d[c>>2]=0,h=u}else h=d[S+8>>2]|0,d[h+12>>2]=u,d[u+8>>2]=h,h=u;while(!1);do if(g|0){if(u=d[S+28>>2]|0,c=28228+(u<<2)|0,(S|0)==(d[c>>2]|0)){if(d[c>>2]=h,!h){d[6982]=w&~(1<<u);break}}else if(z=g+16|0,d[((d[z>>2]|0)==(S|0)?z:g+20|0)>>2]=h,!h)break;d[h+24>>2]=g,u=d[S+16>>2]|0,u|0&&(d[h+16>>2]=u,d[u+24>>2]=h),u=d[S+20>>2]|0,u|0&&(d[h+20>>2]=u,d[u+24>>2]=h)}while(!1);return T>>>0<16?(z=T+x|0,d[S+4>>2]=z|3,z=S+z+4|0,d[z>>2]=d[z>>2]|1):(d[S+4>>2]=x|3,d[b+4>>2]=T|1,d[b+T>>2]=T,C|0&&(f=d[6986]|0,u=C>>>3,h=27964+(u<<1<<2)|0,u=1<<u,u&L?(c=h+8|0,u=d[c>>2]|0):(d[6981]=u|L,u=h,c=h+8|0),d[c>>2]=f,d[u+12>>2]=f,d[f+8>>2]=u,d[f+12>>2]=h),d[6983]=T,d[6986]=b),z=S+8|0,I=Ee,z|0}else L=x}else L=x}else L=x}else if(c>>>0<=4294967231)if(c=c+11|0,x=c&-8,f=d[6982]|0,f){g=0-x|0,c=c>>>8,c?x>>>0>16777215?T=31:(L=(c+1048320|0)>>>16&8,V=c<<L,S=(V+520192|0)>>>16&4,V=V<<S,T=(V+245760|0)>>>16&2,T=14-(S|L|T)+(V<<T>>>15)|0,T=x>>>(T+7|0)&1|T<<1):T=0,h=d[28228+(T<<2)>>2]|0;e:do if(!h)h=0,c=0,V=61;else for(c=0,S=x<<((T|0)==31?0:25-(T>>>1)|0),w=0;;){if(b=(d[h+4>>2]&-8)-x|0,b>>>0<g>>>0)if(b)c=h,g=b;else{c=h,g=0,V=65;break e}if(V=d[h+20>>2]|0,h=d[h+16+(S>>>31<<2)>>2]|0,w=(V|0)==0|(V|0)==(h|0)?w:V,h)S=S<<1;else{h=w,V=61;break}}while(!1);if((V|0)==61){if((h|0)==0&(c|0)==0){if(c=2<<T,c=(c|0-c)&f,!c){L=x;break}L=(c&0-c)+-1|0,b=L>>>12&16,L=L>>>b,w=L>>>5&8,L=L>>>w,S=L>>>2&4,L=L>>>S,T=L>>>1&2,L=L>>>T,h=L>>>1&1,c=0,h=d[28228+((w|b|S|T|h)+(L>>>h)<<2)>>2]|0}h?V=65:(S=c,b=g)}if((V|0)==65)for(w=h;;)if(L=(d[w+4>>2]&-8)-x|0,h=L>>>0<g>>>0,g=h?L:g,c=h?w:c,h=d[w+16>>2]|0,h||(h=d[w+20>>2]|0),h)w=h;else{S=c,b=g;break}if((S|0)!=0&&b>>>0<((d[6983]|0)-x|0)>>>0&&(C=S+x|0,C>>>0>S>>>0)){w=d[S+24>>2]|0,u=d[S+12>>2]|0;do if((u|0)==(S|0)){if(c=S+20|0,u=d[c>>2]|0,!u&&(c=S+16|0,u=d[c>>2]|0,!u)){u=0;break}for(;;)if(g=u+20|0,h=d[g>>2]|0,h)u=h,c=g;else if(g=u+16|0,h=d[g>>2]|0,h)u=h,c=g;else break;d[c>>2]=0}else z=d[S+8>>2]|0,d[z+12>>2]=u,d[u+8>>2]=z;while(!1);do if(w){if(c=d[S+28>>2]|0,h=28228+(c<<2)|0,(S|0)==(d[h>>2]|0)){if(d[h>>2]=u,!u){f=f&~(1<<c),d[6982]=f;break}}else if(z=w+16|0,d[((d[z>>2]|0)==(S|0)?z:w+20|0)>>2]=u,!u)break;d[u+24>>2]=w,c=d[S+16>>2]|0,c|0&&(d[u+16>>2]=c,d[c+24>>2]=u),c=d[S+20>>2]|0,c&&(d[u+20>>2]=c,d[c+24>>2]=u)}while(!1);e:do if(b>>>0<16)z=b+x|0,d[S+4>>2]=z|3,z=S+z+4|0,d[z>>2]=d[z>>2]|1;else{if(d[S+4>>2]=x|3,d[C+4>>2]=b|1,d[C+b>>2]=b,u=b>>>3,b>>>0<256){h=27964+(u<<1<<2)|0,c=d[6981]|0,u=1<<u,c&u?(c=h+8|0,u=d[c>>2]|0):(d[6981]=c|u,u=h,c=h+8|0),d[c>>2]=C,d[u+12>>2]=C,d[C+8>>2]=u,d[C+12>>2]=h;break}if(u=b>>>8,u?b>>>0>16777215?h=31:(X=(u+1048320|0)>>>16&8,z=u<<X,re=(z+520192|0)>>>16&4,z=z<<re,h=(z+245760|0)>>>16&2,h=14-(re|X|h)+(z<<h>>>15)|0,h=b>>>(h+7|0)&1|h<<1):h=0,u=28228+(h<<2)|0,d[C+28>>2]=h,c=C+16|0,d[c+4>>2]=0,d[c>>2]=0,c=1<<h,!(f&c)){d[6982]=f|c,d[u>>2]=C,d[C+24>>2]=u,d[C+12>>2]=C,d[C+8>>2]=C;break}u=d[u>>2]|0;t:do if((d[u+4>>2]&-8|0)!=(b|0)){for(f=b<<((h|0)==31?0:25-(h>>>1)|0);h=u+16+(f>>>31<<2)|0,c=d[h>>2]|0,!!c;)if((d[c+4>>2]&-8|0)==(b|0)){u=c;break t}else f=f<<1,u=c;d[h>>2]=C,d[C+24>>2]=u,d[C+12>>2]=C,d[C+8>>2]=C;break e}while(!1);X=u+8|0,z=d[X>>2]|0,d[z+12>>2]=C,d[X>>2]=C,d[C+8>>2]=z,d[C+12>>2]=u,d[C+24>>2]=0}while(!1);return z=S+8|0,I=Ee,z|0}else L=x}else L=x;else L=-1;while(!1);if(h=d[6983]|0,h>>>0>=L>>>0)return u=h-L|0,c=d[6986]|0,u>>>0>15?(z=c+L|0,d[6986]=z,d[6983]=u,d[z+4>>2]=u|1,d[c+h>>2]=u,d[c+4>>2]=L|3):(d[6983]=0,d[6986]=0,d[c+4>>2]=h|3,z=c+h+4|0,d[z>>2]=d[z>>2]|1),z=c+8|0,I=Ee,z|0;if(b=d[6984]|0,b>>>0>L>>>0)return re=b-L|0,d[6984]=re,z=d[6987]|0,X=z+L|0,d[6987]=X,d[X+4>>2]=re|1,d[z+4>>2]=L|3,z=z+8|0,I=Ee,z|0;if(d[7099]|0?c=d[7101]|0:(d[7101]=4096,d[7100]=4096,d[7102]=-1,d[7103]=-1,d[7104]=0,d[7092]=0,d[7099]=F&-16^1431655768,c=4096),S=L+48|0,T=L+47|0,w=c+T|0,g=0-c|0,x=w&g,x>>>0<=L>>>0||(c=d[7091]|0,c|0&&(C=d[7089]|0,F=C+x|0,F>>>0<=C>>>0|F>>>0>c>>>0)))return z=0,I=Ee,z|0;e:do if(d[7092]&4)u=0,V=143;else{h=d[6987]|0;t:do if(h){for(f=28372;F=d[f>>2]|0,!(F>>>0<=h>>>0&&(F+(d[f+4>>2]|0)|0)>>>0>h>>>0);)if(c=d[f+8>>2]|0,c)f=c;else{V=128;break t}if(u=w-b&g,u>>>0<2147483647)if(c=_u(u|0)|0,(c|0)==((d[f>>2]|0)+(d[f+4>>2]|0)|0)){if((c|0)!=-1){b=u,w=c,V=145;break e}}else f=c,V=136;else u=0}else V=128;while(!1);do if((V|0)==128)if(h=_u(0)|0,(h|0)!=-1&&(u=h,j=d[7100]|0,B=j+-1|0,u=((B&u|0)==0?0:(B+u&0-j)-u|0)+x|0,j=d[7089]|0,B=u+j|0,u>>>0>L>>>0&u>>>0<2147483647)){if(F=d[7091]|0,F|0&&B>>>0<=j>>>0|B>>>0>F>>>0){u=0;break}if(c=_u(u|0)|0,(c|0)==(h|0)){b=u,w=h,V=145;break e}else f=c,V=136}else u=0;while(!1);do if((V|0)==136){if(h=0-u|0,!(S>>>0>u>>>0&(u>>>0<2147483647&(f|0)!=-1)))if((f|0)==-1){u=0;break}else{b=u,w=f,V=145;break e}if(c=d[7101]|0,c=T-u+c&0-c,c>>>0>=2147483647){b=u,w=f,V=145;break e}if((_u(c|0)|0)==-1){_u(h|0)|0,u=0;break}else{b=c+u|0,w=f,V=145;break e}}while(!1);d[7092]=d[7092]|4,V=143}while(!1);if((V|0)==143&&x>>>0<2147483647&&(re=_u(x|0)|0,B=_u(0)|0,J=B-re|0,oe=J>>>0>(L+40|0)>>>0,!((re|0)==-1|oe^1|re>>>0<B>>>0&((re|0)!=-1&(B|0)!=-1)^1))&&(b=oe?J:u,w=re,V=145),(V|0)==145){u=(d[7089]|0)+b|0,d[7089]=u,u>>>0>(d[7090]|0)>>>0&&(d[7090]=u),T=d[6987]|0;e:do if(T){for(u=28372;;){if(c=d[u>>2]|0,h=d[u+4>>2]|0,(w|0)==(c+h|0)){V=154;break}if(f=d[u+8>>2]|0,f)u=f;else break}if((V|0)==154&&(X=u+4|0,(d[u+12>>2]&8|0)==0)&&w>>>0>T>>>0&c>>>0<=T>>>0){d[X>>2]=h+b,z=(d[6984]|0)+b|0,re=T+8|0,re=(re&7|0)==0?0:0-re&7,X=T+re|0,re=z-re|0,d[6987]=X,d[6984]=re,d[X+4>>2]=re|1,d[T+z+4>>2]=40,d[6988]=d[7103];break}for(w>>>0<(d[6985]|0)>>>0&&(d[6985]=w),h=w+b|0,u=28372;;){if((d[u>>2]|0)==(h|0)){V=162;break}if(c=d[u+8>>2]|0,c)u=c;else break}if((V|0)==162&&(d[u+12>>2]&8|0)==0){d[u>>2]=w,C=u+4|0,d[C>>2]=(d[C>>2]|0)+b,C=w+8|0,C=w+((C&7|0)==0?0:0-C&7)|0,u=h+8|0,u=h+((u&7|0)==0?0:0-u&7)|0,x=C+L|0,S=u-C-L|0,d[C+4>>2]=L|3;t:do if((T|0)==(u|0))z=(d[6984]|0)+S|0,d[6984]=z,d[6987]=x,d[x+4>>2]=z|1;else{if((d[6986]|0)==(u|0)){z=(d[6983]|0)+S|0,d[6983]=z,d[6986]=x,d[x+4>>2]=z|1,d[x+z>>2]=z;break}if(c=d[u+4>>2]|0,(c&3|0)==1){b=c&-8,f=c>>>3;r:do if(c>>>0<256)if(c=d[u+8>>2]|0,h=d[u+12>>2]|0,(h|0)==(c|0)){d[6981]=d[6981]&~(1<<f);break}else{d[c+12>>2]=h,d[h+8>>2]=c;break}else{w=d[u+24>>2]|0,c=d[u+12>>2]|0;do if((c|0)==(u|0)){if(h=u+16|0,f=h+4|0,c=d[f>>2]|0,c)h=f;else if(c=d[h>>2]|0,!c){c=0;break}for(;;)if(g=c+20|0,f=d[g>>2]|0,f)c=f,h=g;else if(g=c+16|0,f=d[g>>2]|0,f)c=f,h=g;else break;d[h>>2]=0}else z=d[u+8>>2]|0,d[z+12>>2]=c,d[c+8>>2]=z;while(!1);if(!w)break;h=d[u+28>>2]|0,f=28228+(h<<2)|0;do if((d[f>>2]|0)!=(u|0)){if(z=w+16|0,d[((d[z>>2]|0)==(u|0)?z:w+20|0)>>2]=c,!c)break r}else{if(d[f>>2]=c,c|0)break;d[6982]=d[6982]&~(1<<h);break r}while(!1);if(d[c+24>>2]=w,h=u+16|0,f=d[h>>2]|0,f|0&&(d[c+16>>2]=f,d[f+24>>2]=c),h=d[h+4>>2]|0,!h)break;d[c+20>>2]=h,d[h+24>>2]=c}while(!1);u=u+b|0,g=b+S|0}else g=S;if(u=u+4|0,d[u>>2]=d[u>>2]&-2,d[x+4>>2]=g|1,d[x+g>>2]=g,u=g>>>3,g>>>0<256){h=27964+(u<<1<<2)|0,c=d[6981]|0,u=1<<u,c&u?(c=h+8|0,u=d[c>>2]|0):(d[6981]=c|u,u=h,c=h+8|0),d[c>>2]=x,d[u+12>>2]=x,d[x+8>>2]=u,d[x+12>>2]=h;break}u=g>>>8;do if(!u)f=0;else{if(g>>>0>16777215){f=31;break}X=(u+1048320|0)>>>16&8,z=u<<X,re=(z+520192|0)>>>16&4,z=z<<re,f=(z+245760|0)>>>16&2,f=14-(re|X|f)+(z<<f>>>15)|0,f=g>>>(f+7|0)&1|f<<1}while(!1);if(u=28228+(f<<2)|0,d[x+28>>2]=f,c=x+16|0,d[c+4>>2]=0,d[c>>2]=0,c=d[6982]|0,h=1<<f,!(c&h)){d[6982]=c|h,d[u>>2]=x,d[x+24>>2]=u,d[x+12>>2]=x,d[x+8>>2]=x;break}u=d[u>>2]|0;r:do if((d[u+4>>2]&-8|0)!=(g|0)){for(f=g<<((f|0)==31?0:25-(f>>>1)|0);h=u+16+(f>>>31<<2)|0,c=d[h>>2]|0,!!c;)if((d[c+4>>2]&-8|0)==(g|0)){u=c;break r}else f=f<<1,u=c;d[h>>2]=x,d[x+24>>2]=u,d[x+12>>2]=x,d[x+8>>2]=x;break t}while(!1);X=u+8|0,z=d[X>>2]|0,d[z+12>>2]=x,d[X>>2]=x,d[x+8>>2]=z,d[x+12>>2]=u,d[x+24>>2]=0}while(!1);return z=C+8|0,I=Ee,z|0}for(u=28372;c=d[u>>2]|0,!(c>>>0<=T>>>0&&(z=c+(d[u+4>>2]|0)|0,z>>>0>T>>>0));)u=d[u+8>>2]|0;g=z+-47|0,c=g+8|0,c=g+((c&7|0)==0?0:0-c&7)|0,g=T+16|0,c=c>>>0<g>>>0?T:c,u=c+8|0,h=b+-40|0,re=w+8|0,re=(re&7|0)==0?0:0-re&7,X=w+re|0,re=h-re|0,d[6987]=X,d[6984]=re,d[X+4>>2]=re|1,d[w+h+4>>2]=40,d[6988]=d[7103],h=c+4|0,d[h>>2]=27,d[u>>2]=d[7093],d[u+4>>2]=d[7094],d[u+8>>2]=d[7095],d[u+12>>2]=d[7096],d[7093]=w,d[7094]=b,d[7096]=0,d[7095]=u,u=c+24|0;do X=u,u=u+4|0,d[u>>2]=7;while((X+8|0)>>>0<z>>>0);if((c|0)!=(T|0)){if(w=c-T|0,d[h>>2]=d[h>>2]&-2,d[T+4>>2]=w|1,d[c>>2]=w,u=w>>>3,w>>>0<256){h=27964+(u<<1<<2)|0,c=d[6981]|0,u=1<<u,c&u?(c=h+8|0,u=d[c>>2]|0):(d[6981]=c|u,u=h,c=h+8|0),d[c>>2]=T,d[u+12>>2]=T,d[T+8>>2]=u,d[T+12>>2]=h;break}if(u=w>>>8,u?w>>>0>16777215?f=31:(X=(u+1048320|0)>>>16&8,z=u<<X,re=(z+520192|0)>>>16&4,z=z<<re,f=(z+245760|0)>>>16&2,f=14-(re|X|f)+(z<<f>>>15)|0,f=w>>>(f+7|0)&1|f<<1):f=0,h=28228+(f<<2)|0,d[T+28>>2]=f,d[T+20>>2]=0,d[g>>2]=0,u=d[6982]|0,c=1<<f,!(u&c)){d[6982]=u|c,d[h>>2]=T,d[T+24>>2]=h,d[T+12>>2]=T,d[T+8>>2]=T;break}u=d[h>>2]|0;t:do if((d[u+4>>2]&-8|0)!=(w|0)){for(f=w<<((f|0)==31?0:25-(f>>>1)|0);h=u+16+(f>>>31<<2)|0,c=d[h>>2]|0,!!c;)if((d[c+4>>2]&-8|0)==(w|0)){u=c;break t}else f=f<<1,u=c;d[h>>2]=T,d[T+24>>2]=u,d[T+12>>2]=T,d[T+8>>2]=T;break e}while(!1);X=u+8|0,z=d[X>>2]|0,d[z+12>>2]=T,d[X>>2]=T,d[T+8>>2]=z,d[T+12>>2]=u,d[T+24>>2]=0}}else z=d[6985]|0,(z|0)==0|w>>>0<z>>>0&&(d[6985]=w),d[7093]=w,d[7094]=b,d[7096]=0,d[6990]=d[7099],d[6989]=-1,d[6994]=27964,d[6993]=27964,d[6996]=27972,d[6995]=27972,d[6998]=27980,d[6997]=27980,d[7e3]=27988,d[6999]=27988,d[7002]=27996,d[7001]=27996,d[7004]=28004,d[7003]=28004,d[7006]=28012,d[7005]=28012,d[7008]=28020,d[7007]=28020,d[7010]=28028,d[7009]=28028,d[7012]=28036,d[7011]=28036,d[7014]=28044,d[7013]=28044,d[7016]=28052,d[7015]=28052,d[7018]=28060,d[7017]=28060,d[7020]=28068,d[7019]=28068,d[7022]=28076,d[7021]=28076,d[7024]=28084,d[7023]=28084,d[7026]=28092,d[7025]=28092,d[7028]=28100,d[7027]=28100,d[7030]=28108,d[7029]=28108,d[7032]=28116,d[7031]=28116,d[7034]=28124,d[7033]=28124,d[7036]=28132,d[7035]=28132,d[7038]=28140,d[7037]=28140,d[7040]=28148,d[7039]=28148,d[7042]=28156,d[7041]=28156,d[7044]=28164,d[7043]=28164,d[7046]=28172,d[7045]=28172,d[7048]=28180,d[7047]=28180,d[7050]=28188,d[7049]=28188,d[7052]=28196,d[7051]=28196,d[7054]=28204,d[7053]=28204,d[7056]=28212,d[7055]=28212,z=b+-40|0,re=w+8|0,re=(re&7|0)==0?0:0-re&7,X=w+re|0,re=z-re|0,d[6987]=X,d[6984]=re,d[X+4>>2]=re|1,d[w+z+4>>2]=40,d[6988]=d[7103];while(!1);if(u=d[6984]|0,u>>>0>L>>>0)return re=u-L|0,d[6984]=re,z=d[6987]|0,X=z+L|0,d[6987]=X,d[X+4>>2]=re|1,d[z+4>>2]=L|3,z=z+8|0,I=Ee,z|0}return z=WK()|0,d[z>>2]=12,z=0,I=Ee,z|0}function Xe(c){c=c|0;var u=0,h=0,f=0,g=0,w=0,b=0,S=0,T=0;if(c){h=c+-8|0,g=d[6985]|0,c=d[c+-4>>2]|0,u=c&-8,T=h+u|0;do if(c&1)S=h,b=h;else{if(f=d[h>>2]|0,!(c&3)||(b=h+(0-f)|0,w=f+u|0,b>>>0<g>>>0))return;if((d[6986]|0)==(b|0)){if(c=T+4|0,u=d[c>>2]|0,(u&3|0)!=3){S=b,u=w;break}d[6983]=w,d[c>>2]=u&-2,d[b+4>>2]=w|1,d[b+w>>2]=w;return}if(h=f>>>3,f>>>0<256)if(c=d[b+8>>2]|0,u=d[b+12>>2]|0,(u|0)==(c|0)){d[6981]=d[6981]&~(1<<h),S=b,u=w;break}else{d[c+12>>2]=u,d[u+8>>2]=c,S=b,u=w;break}g=d[b+24>>2]|0,c=d[b+12>>2]|0;do if((c|0)==(b|0)){if(u=b+16|0,h=u+4|0,c=d[h>>2]|0,c)u=h;else if(c=d[u>>2]|0,!c){c=0;break}for(;;)if(f=c+20|0,h=d[f>>2]|0,h)c=h,u=f;else if(f=c+16|0,h=d[f>>2]|0,h)c=h,u=f;else break;d[u>>2]=0}else S=d[b+8>>2]|0,d[S+12>>2]=c,d[c+8>>2]=S;while(!1);if(g){if(u=d[b+28>>2]|0,h=28228+(u<<2)|0,(d[h>>2]|0)==(b|0)){if(d[h>>2]=c,!c){d[6982]=d[6982]&~(1<<u),S=b,u=w;break}}else if(S=g+16|0,d[((d[S>>2]|0)==(b|0)?S:g+20|0)>>2]=c,!c){S=b,u=w;break}d[c+24>>2]=g,u=b+16|0,h=d[u>>2]|0,h|0&&(d[c+16>>2]=h,d[h+24>>2]=c),u=d[u+4>>2]|0,u?(d[c+20>>2]=u,d[u+24>>2]=c,S=b,u=w):(S=b,u=w)}else S=b,u=w}while(!1);if(!(b>>>0>=T>>>0)&&(c=T+4|0,f=d[c>>2]|0,!!(f&1))){if(f&2)d[c>>2]=f&-2,d[S+4>>2]=u|1,d[b+u>>2]=u,g=u;else{if((d[6987]|0)==(T|0)){if(T=(d[6984]|0)+u|0,d[6984]=T,d[6987]=S,d[S+4>>2]=T|1,(S|0)!=(d[6986]|0))return;d[6986]=0,d[6983]=0;return}if((d[6986]|0)==(T|0)){T=(d[6983]|0)+u|0,d[6983]=T,d[6986]=b,d[S+4>>2]=T|1,d[b+T>>2]=T;return}g=(f&-8)+u|0,h=f>>>3;do if(f>>>0<256)if(u=d[T+8>>2]|0,c=d[T+12>>2]|0,(c|0)==(u|0)){d[6981]=d[6981]&~(1<<h);break}else{d[u+12>>2]=c,d[c+8>>2]=u;break}else{w=d[T+24>>2]|0,c=d[T+12>>2]|0;do if((c|0)==(T|0)){if(u=T+16|0,h=u+4|0,c=d[h>>2]|0,c)u=h;else if(c=d[u>>2]|0,!c){h=0;break}for(;;)if(f=c+20|0,h=d[f>>2]|0,h)c=h,u=f;else if(f=c+16|0,h=d[f>>2]|0,h)c=h,u=f;else break;d[u>>2]=0,h=c}else h=d[T+8>>2]|0,d[h+12>>2]=c,d[c+8>>2]=h,h=c;while(!1);if(w|0){if(c=d[T+28>>2]|0,u=28228+(c<<2)|0,(d[u>>2]|0)==(T|0)){if(d[u>>2]=h,!h){d[6982]=d[6982]&~(1<<c);break}}else if(f=w+16|0,d[((d[f>>2]|0)==(T|0)?f:w+20|0)>>2]=h,!h)break;d[h+24>>2]=w,c=T+16|0,u=d[c>>2]|0,u|0&&(d[h+16>>2]=u,d[u+24>>2]=h),c=d[c+4>>2]|0,c|0&&(d[h+20>>2]=c,d[c+24>>2]=h)}}while(!1);if(d[S+4>>2]=g|1,d[b+g>>2]=g,(S|0)==(d[6986]|0)){d[6983]=g;return}}if(c=g>>>3,g>>>0<256){h=27964+(c<<1<<2)|0,u=d[6981]|0,c=1<<c,u&c?(u=h+8|0,c=d[u>>2]|0):(d[6981]=u|c,c=h,u=h+8|0),d[u>>2]=S,d[c+12>>2]=S,d[S+8>>2]=c,d[S+12>>2]=h;return}c=g>>>8,c?g>>>0>16777215?f=31:(b=(c+1048320|0)>>>16&8,T=c<<b,w=(T+520192|0)>>>16&4,T=T<<w,f=(T+245760|0)>>>16&2,f=14-(w|b|f)+(T<<f>>>15)|0,f=g>>>(f+7|0)&1|f<<1):f=0,c=28228+(f<<2)|0,d[S+28>>2]=f,d[S+20>>2]=0,d[S+16>>2]=0,u=d[6982]|0,h=1<<f;e:do if(!(u&h))d[6982]=u|h,d[c>>2]=S,d[S+24>>2]=c,d[S+12>>2]=S,d[S+8>>2]=S;else{c=d[c>>2]|0;t:do if((d[c+4>>2]&-8|0)!=(g|0)){for(f=g<<((f|0)==31?0:25-(f>>>1)|0);h=c+16+(f>>>31<<2)|0,u=d[h>>2]|0,!!u;)if((d[u+4>>2]&-8|0)==(g|0)){c=u;break t}else f=f<<1,c=u;d[h>>2]=S,d[S+24>>2]=c,d[S+12>>2]=S,d[S+8>>2]=S;break e}while(!1);b=c+8|0,T=d[b>>2]|0,d[T+12>>2]=S,d[b>>2]=S,d[S+8>>2]=T,d[S+12>>2]=c,d[S+24>>2]=0}while(!1);if(T=(d[6989]|0)+-1|0,d[6989]=T,!(T|0)){for(c=28380;c=d[c>>2]|0,c;)c=c+8|0;d[6989]=-1}}}}function Ps(c,u){c=c|0,u=u|0;var h=0;return c?(h=On(u,c)|0,(u|c)>>>0>65535&&(h=((h>>>0)/(c>>>0)|0|0)==(u|0)?h:-1)):h=0,c=ra(h)|0,!c||!(d[c+-4>>2]&3)||bu(c|0,0,h|0)|0,c|0}function Ye(c,u,h,f){return c=c|0,u=u|0,h=h|0,f=f|0,h=c+h>>>0,dt(u+f+(h>>>0<c>>>0|0)>>>0|0),h|0|0}function wi(c,u,h,f){return c=c|0,u=u|0,h=h|0,f=f|0,f=u-f-(h>>>0>c>>>0|0)>>>0,dt(f|0),c-h>>>0|0|0}function SP(c){return c=c|0,(c?31-(fo(c^c-1)|0)|0:32)|0}function wT(c,u,h,f,g){c=c|0,u=u|0,h=h|0,f=f|0,g=g|0;var w=0,b=0,S=0,T=0,x=0,C=0,L=0,F=0,j=0,B=0;if(C=c,T=u,x=T,b=h,F=f,S=F,!x)return w=(g|0)!=0,S?w?(d[g>>2]=c|0,d[g+4>>2]=u&0,F=0,g=0,dt(F|0),g|0):(F=0,g=0,dt(F|0),g|0):(w&&(d[g>>2]=(C>>>0)%(b>>>0),d[g+4>>2]=0),F=0,g=(C>>>0)/(b>>>0)>>>0,dt(F|0),g|0);w=(S|0)==0;do if(b){if(!w){if(w=(fo(S|0)|0)-(fo(x|0)|0)|0,w>>>0<=31){L=w+1|0,S=31-w|0,u=w-31>>31,b=L,c=C>>>(L>>>0)&u|x<<S,u=x>>>(L>>>0)&u,w=0,S=C<<S;break}return g?(d[g>>2]=c|0,d[g+4>>2]=T|u&0,F=0,g=0,dt(F|0),g|0):(F=0,g=0,dt(F|0),g|0)}if(w=b-1|0,w&b|0){S=(fo(b|0)|0)+33-(fo(x|0)|0)|0,B=64-S|0,L=32-S|0,T=L>>31,j=S-32|0,u=j>>31,b=S,c=L-1>>31&x>>>(j>>>0)|(x<<L|C>>>(S>>>0))&u,u=u&x>>>(S>>>0),w=C<<B&T,S=(x<<B|C>>>(j>>>0))&T|C<<L&S-33>>31;break}return g|0&&(d[g>>2]=w&C,d[g+4>>2]=0),(b|0)==1?(j=T|u&0,B=c|0|0,dt(j|0),B|0):(B=SP(b|0)|0,j=x>>>(B>>>0)|0,B=x<<32-B|C>>>(B>>>0)|0,dt(j|0),B|0)}else{if(w)return g|0&&(d[g>>2]=(x>>>0)%(b>>>0),d[g+4>>2]=0),j=0,B=(x>>>0)/(b>>>0)>>>0,dt(j|0),B|0;if(!C)return g|0&&(d[g>>2]=0,d[g+4>>2]=(x>>>0)%(S>>>0)),j=0,B=(x>>>0)/(S>>>0)>>>0,dt(j|0),B|0;if(w=S-1|0,!(w&S))return g|0&&(d[g>>2]=c|0,d[g+4>>2]=w&x|u&0),j=0,B=x>>>((SP(S|0)|0)>>>0),dt(j|0),B|0;if(w=(fo(S|0)|0)-(fo(x|0)|0)|0,w>>>0<=30){u=w+1|0,S=31-w|0,b=u,c=x<<S|C>>>(u>>>0),u=x>>>(u>>>0),w=0,S=C<<S;break}return g?(d[g>>2]=c|0,d[g+4>>2]=T|u&0,j=0,B=0,dt(j|0),B|0):(j=0,B=0,dt(j|0),B|0)}while(!1);if(!b)x=S,T=0,S=0;else{L=h|0|0,C=F|f&0,x=Ye(L|0,C|0,-1,-1)|0,h=D()|0,T=S,S=0;do f=T,T=w>>>31|T<<1,w=S|w<<1,f=c<<1|f>>>31|0,F=c>>>31|u<<1|0,wi(x|0,h|0,f|0,F|0)|0,B=D()|0,j=B>>31|((B|0)<0?-1:0)<<1,S=j&1,c=wi(f|0,F|0,j&L|0,(((B|0)<0?-1:0)>>31|((B|0)<0?-1:0)<<1)&C|0)|0,u=D()|0,b=b-1|0;while((b|0)!=0);x=T,T=0}return b=0,g|0&&(d[g>>2]=c,d[g+4>>2]=u),j=(w|0)>>>31|(x|b)<<1|(b<<1|w>>>31)&0|T,B=(w<<1|0)&-2|S,dt(j|0),B|0}function wu(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0;return x=u>>31|((u|0)<0?-1:0)<<1,T=((u|0)<0?-1:0)>>31|((u|0)<0?-1:0)<<1,w=f>>31|((f|0)<0?-1:0)<<1,g=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,S=wi(x^c|0,T^u|0,x|0,T|0)|0,b=D()|0,c=w^x,u=g^T,wi((wT(S,b,wi(w^h|0,g^f|0,w|0,g|0)|0,D()|0,0)|0)^c|0,(D()|0)^u|0,c|0,u|0)|0}function QK(c,u){c=c|0,u=u|0;var h=0,f=0,g=0,w=0;return w=c&65535,g=u&65535,h=On(g,w)|0,f=c>>>16,c=(h>>>16)+(On(g,f)|0)|0,g=u>>>16,u=On(g,w)|0,dt((c>>>16)+(On(g,f)|0)+(((c&65535)+u|0)>>>16)|0),c+u<<16|h&65535|0|0}function bi(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0;return g=c,w=h,h=QK(g,w)|0,c=D()|0,dt((On(u,w)|0)+(On(f,g)|0)+c|c&0|0),h|0|0|0}function mh(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0,b=0,S=0,T=0,x=0;return g=I,I=I+16|0,S=g|0,b=u>>31|((u|0)<0?-1:0)<<1,w=((u|0)<0?-1:0)>>31|((u|0)<0?-1:0)<<1,x=f>>31|((f|0)<0?-1:0)<<1,T=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,c=wi(b^c|0,w^u|0,b|0,w|0)|0,u=D()|0,wT(c,u,wi(x^h|0,T^f|0,x|0,T|0)|0,D()|0,S)|0,f=wi(d[S>>2]^b|0,d[S+4>>2]^w|0,b|0,w|0)|0,h=D()|0,I=g,dt(h|0),f|0}function yh(c,u,h,f){c=c|0,u=u|0,h=h|0,f=f|0;var g=0,w=0;return w=I,I=I+16|0,g=w|0,wT(c,u,h,f,g)|0,I=w,dt(d[g+4>>2]|0),d[g>>2]|0|0}function EP(c,u,h){return c=c|0,u=u|0,h=h|0,(h|0)<32?(dt(u>>h|0),c>>>h|(u&(1<<h)-1)<<32-h):(dt(((u|0)<0?-1:0)|0),u>>h-32|0)}function fe(c,u,h){return c=c|0,u=u|0,h=h|0,(h|0)<32?(dt(u>>>h|0),c>>>h|(u&(1<<h)-1)<<32-h):(dt(0),u>>>h-32|0)}function be(c,u,h){return c=c|0,u=u|0,h=h|0,(h|0)<32?(dt(u<<h|(c&(1<<h)-1<<32-h)>>>32-h|0),c<<h):(dt(c<<h-32|0),0)}function bT(c,u,h){return c=c|0,u=u|0,u=fo(u)|0,(u|0)==32&&(u=u+(fo(c)|0)|0),dt(0),u|0}function TP(c,u){return c=+c,u=+u,c!=c?+u:u!=u?+c:+WE(+c,+u)}function x1(c,u){return c=+c,u=+u,c!=c?+u:u!=u?+c:+dh(+c,+u)}function I1(c){return c=+c,c>=0?+ir(c+.5):+pr(c-.5)}function gh(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0;if((h|0)>=8192)return JE(c|0,u|0,h|0)|0,c|0;if(w=c|0,g=c+h|0,(c&3)==(u&3)){for(;c&3;){if(!h)return w|0;Ae[c>>0]=Ae[u>>0]|0,c=c+1|0,u=u+1|0,h=h-1|0}for(h=g&-4|0,f=h-64|0;(c|0)<=(f|0);)d[c>>2]=d[u>>2],d[c+4>>2]=d[u+4>>2],d[c+8>>2]=d[u+8>>2],d[c+12>>2]=d[u+12>>2],d[c+16>>2]=d[u+16>>2],d[c+20>>2]=d[u+20>>2],d[c+24>>2]=d[u+24>>2],d[c+28>>2]=d[u+28>>2],d[c+32>>2]=d[u+32>>2],d[c+36>>2]=d[u+36>>2],d[c+40>>2]=d[u+40>>2],d[c+44>>2]=d[u+44>>2],d[c+48>>2]=d[u+48>>2],d[c+52>>2]=d[u+52>>2],d[c+56>>2]=d[u+56>>2],d[c+60>>2]=d[u+60>>2],c=c+64|0,u=u+64|0;for(;(c|0)<(h|0);)d[c>>2]=d[u>>2],c=c+4|0,u=u+4|0}else for(h=g-4|0;(c|0)<(h|0);)Ae[c>>0]=Ae[u>>0]|0,Ae[c+1>>0]=Ae[u+1>>0]|0,Ae[c+2>>0]=Ae[u+2>>0]|0,Ae[c+3>>0]=Ae[u+3>>0]|0,c=c+4|0,u=u+4|0;for(;(c|0)<(g|0);)Ae[c>>0]=Ae[u>>0]|0,c=c+1|0,u=u+1|0;return w|0}function bu(c,u,h){c=c|0,u=u|0,h=h|0;var f=0,g=0,w=0,b=0;if(w=c+h|0,u=u&255,(h|0)>=67){for(;c&3;)Ae[c>>0]=u,c=c+1|0;for(f=w&-4|0,b=u|u<<8|u<<16|u<<24,g=f-64|0;(c|0)<=(g|0);)d[c>>2]=b,d[c+4>>2]=b,d[c+8>>2]=b,d[c+12>>2]=b,d[c+16>>2]=b,d[c+20>>2]=b,d[c+24>>2]=b,d[c+28>>2]=b,d[c+32>>2]=b,d[c+36>>2]=b,d[c+40>>2]=b,d[c+44>>2]=b,d[c+48>>2]=b,d[c+52>>2]=b,d[c+56>>2]=b,d[c+60>>2]=b,c=c+64|0;for(;(c|0)<(f|0);)d[c>>2]=b,c=c+4|0}for(;(c|0)<(w|0);)Ae[c>>0]=u,c=c+1|0;return w-h|0}function $P(c){return c=+c,c>=0?+ir(c+.5):+pr(c-.5)}function _u(c){c=c|0;var u=0,h=0,f=0;return f=QE()|0,h=d[Ut>>2]|0,u=h+c|0,(c|0)>0&(u|0)<(h|0)|(u|0)<0?(v1(u|0)|0,us(12),-1):(u|0)>(f|0)&&!(vm(u|0)|0)?(us(12),-1):(d[Ut>>2]=u,h|0)}return{___divdi3:wu,___muldi3:bi,___remdi3:mh,___uremdi3:yh,_areNeighborCells:LY,_bitshift64Ashr:EP,_bitshift64Lshr:fe,_bitshift64Shl:be,_calloc:Ps,_cellAreaKm2:fK,_cellAreaM2:mK,_cellAreaRads2:mT,_cellToBoundary:Ah,_cellToCenterChild:sP,_cellToChildPos:oK,_cellToChildren:YY,_cellToChildrenSize:bm,_cellToLatLng:ad,_cellToLocalIj:SK,_cellToParent:lT,_cellToVertex:Nn,_cellToVertexes:VK,_cellsToDirectedEdge:DY,_cellsToLinkedMultiPolygon:yY,_childPosToCell:aK,_compactCells:KY,_constructCell:JY,_destroyLinkedMultiPolygon:uP,_directedEdgeToBoundary:S1,_directedEdgeToCells:BY,_edgeLengthKm:gK,_edgeLengthM:vK,_edgeLengthRads:yK,_emscripten_replace_memory:ae,_free:Xe,_getBaseCellNumber:rP,_getDirectedEdgeDestination:jY,_getDirectedEdgeOrigin:FY,_getHexagonAreaAvgKm2:aP,_getHexagonAreaAvgM2:pK,_getHexagonEdgeLengthAvgKm:hK,_getHexagonEdgeLengthAvgM:AK,_getIcosahedronFaces:nP,_getIndexDigit:QY,_getNumCells:E1,_getPentagons:hT,_getRes0Cells:_Y,_getResolution:WY,_greatCircleDistanceKm:Sm,_greatCircleDistanceM:uK,_greatCircleDistanceRads:lK,_gridDisk:oi,_gridDiskDistances:LO,_gridDistance:TK,_gridPathCells:xK,_gridPathCellsSize:$K,_gridRing:pY,_gridRingUnsafe:FO,_i64Add:Ye,_i64Subtract:wi,_isPentagon:Kt,_isResClassIII:tK,_isValidCell:oT,_isValidDirectedEdge:XO,_isValidIndex:ZY,_isValidVertex:gP,_latLngToCell:dT,_llvm_ctlz_i64:bT,_llvm_maxnum_f64:TP,_llvm_minnum_f64:x1,_llvm_round_f64:I1,_localIjToCell:EK,_malloc:ra,_maxFaceCount:sK,_maxGridDiskSize:Ur,_maxPolygonToCellsSize:AY,_maxPolygonToCellsSizeExperimental:CK,_memcpy:gh,_memset:bu,_originToDirectedEdges:UY,_pentagonCount:nK,_polygonToCells:fY,_polygonToCellsExperimental:MK,_readInt64AsDoubleFromPointer:FK,_res0CellCount:bY,_round:$P,_sbrk:_u,_sizeOfCellBoundary:OK,_sizeOfCoordIJ:DK,_sizeOfGeoLoop:PK,_sizeOfGeoPolygon:NK,_sizeOfH3Index:kK,_sizeOfLatLng:RK,_sizeOfLinkedGeoPolygon:LK,_uncompactCells:XY,_uncompactCellsSize:eK,_vertexToLatLng:zK,establishStackSpace:wr,stackAlloc:Se,stackRestore:Vt,stackSave:tt}})(VE,zE,$e);t.___divdi3=ve.___divdi3,t.___muldi3=ve.___muldi3,t.___remdi3=ve.___remdi3,t.___uremdi3=ve.___uremdi3,t._areNeighborCells=ve._areNeighborCells,t._bitshift64Ashr=ve._bitshift64Ashr,t._bitshift64Lshr=ve._bitshift64Lshr,t._bitshift64Shl=ve._bitshift64Shl,t._calloc=ve._calloc,t._cellAreaKm2=ve._cellAreaKm2,t._cellAreaM2=ve._cellAreaM2,t._cellAreaRads2=ve._cellAreaRads2,t._cellToBoundary=ve._cellToBoundary,t._cellToCenterChild=ve._cellToCenterChild,t._cellToChildPos=ve._cellToChildPos,t._cellToChildren=ve._cellToChildren,t._cellToChildrenSize=ve._cellToChildrenSize,t._cellToLatLng=ve._cellToLatLng,t._cellToLocalIj=ve._cellToLocalIj,t._cellToParent=ve._cellToParent,t._cellToVertex=ve._cellToVertex,t._cellToVertexes=ve._cellToVertexes,t._cellsToDirectedEdge=ve._cellsToDirectedEdge,t._cellsToLinkedMultiPolygon=ve._cellsToLinkedMultiPolygon,t._childPosToCell=ve._childPosToCell,t._compactCells=ve._compactCells,t._constructCell=ve._constructCell,t._destroyLinkedMultiPolygon=ve._destroyLinkedMultiPolygon,t._directedEdgeToBoundary=ve._directedEdgeToBoundary,t._directedEdgeToCells=ve._directedEdgeToCells,t._edgeLengthKm=ve._edgeLengthKm,t._edgeLengthM=ve._edgeLengthM,t._edgeLengthRads=ve._edgeLengthRads;var GE=t._emscripten_replace_memory=ve._emscripten_replace_memory;t._free=ve._free,t._getBaseCellNumber=ve._getBaseCellNumber,t._getDirectedEdgeDestination=ve._getDirectedEdgeDestination,t._getDirectedEdgeOrigin=ve._getDirectedEdgeOrigin,t._getHexagonAreaAvgKm2=ve._getHexagonAreaAvgKm2,t._getHexagonAreaAvgM2=ve._getHexagonAreaAvgM2,t._getHexagonEdgeLengthAvgKm=ve._getHexagonEdgeLengthAvgKm,t._getHexagonEdgeLengthAvgM=ve._getHexagonEdgeLengthAvgM,t._getIcosahedronFaces=ve._getIcosahedronFaces,t._getIndexDigit=ve._getIndexDigit,t._getNumCells=ve._getNumCells,t._getPentagons=ve._getPentagons,t._getRes0Cells=ve._getRes0Cells,t._getResolution=ve._getResolution,t._greatCircleDistanceKm=ve._greatCircleDistanceKm,t._greatCircleDistanceM=ve._greatCircleDistanceM,t._greatCircleDistanceRads=ve._greatCircleDistanceRads,t._gridDisk=ve._gridDisk,t._gridDiskDistances=ve._gridDiskDistances,t._gridDistance=ve._gridDistance,t._gridPathCells=ve._gridPathCells,t._gridPathCellsSize=ve._gridPathCellsSize,t._gridRing=ve._gridRing,t._gridRingUnsafe=ve._gridRingUnsafe,t._i64Add=ve._i64Add,t._i64Subtract=ve._i64Subtract,t._isPentagon=ve._isPentagon,t._isResClassIII=ve._isResClassIII,t._isValidCell=ve._isValidCell,t._isValidDirectedEdge=ve._isValidDirectedEdge,t._isValidIndex=ve._isValidIndex,t._isValidVertex=ve._isValidVertex,t._latLngToCell=ve._latLngToCell,t._llvm_ctlz_i64=ve._llvm_ctlz_i64,t._llvm_maxnum_f64=ve._llvm_maxnum_f64,t._llvm_minnum_f64=ve._llvm_minnum_f64,t._llvm_round_f64=ve._llvm_round_f64,t._localIjToCell=ve._localIjToCell,t._malloc=ve._malloc,t._maxFaceCount=ve._maxFaceCount,t._maxGridDiskSize=ve._maxGridDiskSize,t._maxPolygonToCellsSize=ve._maxPolygonToCellsSize,t._maxPolygonToCellsSizeExperimental=ve._maxPolygonToCellsSizeExperimental,t._memcpy=ve._memcpy,t._memset=ve._memset,t._originToDirectedEdges=ve._originToDirectedEdges,t._pentagonCount=ve._pentagonCount,t._polygonToCells=ve._polygonToCells,t._polygonToCellsExperimental=ve._polygonToCellsExperimental,t._readInt64AsDoubleFromPointer=ve._readInt64AsDoubleFromPointer,t._res0CellCount=ve._res0CellCount,t._round=ve._round,t._sbrk=ve._sbrk,t._sizeOfCellBoundary=ve._sizeOfCellBoundary,t._sizeOfCoordIJ=ve._sizeOfCoordIJ,t._sizeOfGeoLoop=ve._sizeOfGeoLoop,t._sizeOfGeoPolygon=ve._sizeOfGeoPolygon,t._sizeOfH3Index=ve._sizeOfH3Index,t._sizeOfLatLng=ve._sizeOfLatLng,t._sizeOfLinkedGeoPolygon=ve._sizeOfLinkedGeoPolygon,t._uncompactCells=ve._uncompactCells,t._uncompactCellsSize=ve._uncompactCellsSize,t._vertexToLatLng=ve._vertexToLatLng,t.establishStackSpace=ve.establishStackSpace;var m1=t.stackAlloc=ve.stackAlloc,qE=t.stackRestore=ve.stackRestore,HE=t.stackSave=ve.stackSave;if(t.asm=ve,t.cwrap=W,t.setValue=$,t.getValue=M,gi){A1(gi)||(gi=n(gi));{p1();var mm=function(se){se.byteLength&&(se=new Uint8Array(se)),pt.set(se,E),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,h1()},y1=function(){o(gi,mm,function(){throw"could not load memory initializer "+gi})},g1=fm(gi);if(g1)mm(g1.buffer);else if(t.memoryInitializerRequest){var le=function(){var se=t.memoryInitializerRequest,he=se.response;if(se.status!==200&&se.status!==0){var ue=fm(t.memoryInitializerRequestURL);if(ue)he=ue.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+gi),y1();return}}mm(he)};t.memoryInitializerRequest.response?setTimeout(le,0):t.memoryInitializerRequest.addEventListener("load",le)}else y1()}}var Jt;rd=function se(){Jt||ea(),Jt||(rd=se)};function ea(se){if(tl>0||(EE(),tl>0))return;function he(){Jt||(Jt=!0,!k&&(TE(),$E(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),xE()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),he()},1)):he()}t.run=ea;function Rn(se){throw t.onAbort&&t.onAbort(se),se+="",l(se),p(se),k=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(t.abort=Rn,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return ea(),e})(typeof Qc=="object"?Qc:{}),ot="number",it=ot,Ih=ot,lt=ot,ut=ot,Si=ot,De=ot,wye=[["sizeOfH3Index",ot],["sizeOfLatLng",ot],["sizeOfCellBoundary",ot],["sizeOfGeoLoop",ot],["sizeOfGeoPolygon",ot],["sizeOfLinkedGeoPolygon",ot],["sizeOfCoordIJ",ot],["readInt64AsDoubleFromPointer",ot],["isValidCell",Ih,[lt,ut]],["isValidIndex",Ih,[lt,ut]],["latLngToCell",it,[ot,ot,Si,De]],["cellToLatLng",it,[lt,ut,De]],["cellToBoundary",it,[lt,ut,De]],["maxGridDiskSize",it,[ot,De]],["gridDisk",it,[lt,ut,ot,De]],["gridDiskDistances",it,[lt,ut,ot,De,De]],["gridRing",it,[lt,ut,ot,De]],["gridRingUnsafe",it,[lt,ut,ot,De]],["maxPolygonToCellsSize",it,[De,Si,ot,De]],["polygonToCells",it,[De,Si,ot,De]],["maxPolygonToCellsSizeExperimental",it,[De,Si,ot,De]],["polygonToCellsExperimental",it,[De,Si,ot,ot,ot,De]],["cellsToLinkedMultiPolygon",it,[De,ot,De]],["destroyLinkedMultiPolygon",null,[De]],["compactCells",it,[De,De,ot,ot]],["uncompactCells",it,[De,ot,ot,De,ot,Si]],["uncompactCellsSize",it,[De,ot,ot,Si,De]],["isPentagon",Ih,[lt,ut]],["isResClassIII",Ih,[lt,ut]],["getBaseCellNumber",ot,[lt,ut]],["getResolution",ot,[lt,ut]],["getIndexDigit",ot,[lt,ut,ot]],["constructCell",it,[ot,ot,De,De]],["maxFaceCount",it,[lt,ut,De]],["getIcosahedronFaces",it,[lt,ut,De]],["cellToParent",it,[lt,ut,Si,De]],["cellToChildren",it,[lt,ut,Si,De]],["cellToCenterChild",it,[lt,ut,Si,De]],["cellToChildrenSize",it,[lt,ut,Si,De]],["cellToChildPos",it,[lt,ut,Si,De]],["childPosToCell",it,[ot,ot,lt,ut,Si,De]],["areNeighborCells",it,[lt,ut,lt,ut,De]],["cellsToDirectedEdge",it,[lt,ut,lt,ut,De]],["getDirectedEdgeOrigin",it,[lt,ut,De]],["getDirectedEdgeDestination",it,[lt,ut,De]],["isValidDirectedEdge",Ih,[lt,ut]],["directedEdgeToCells",it,[lt,ut,De]],["originToDirectedEdges",it,[lt,ut,De]],["directedEdgeToBoundary",it,[lt,ut,De]],["gridDistance",it,[lt,ut,lt,ut,De]],["gridPathCells",it,[lt,ut,lt,ut,De]],["gridPathCellsSize",it,[lt,ut,lt,ut,De]],["cellToLocalIj",it,[lt,ut,lt,ut,ot,De]],["localIjToCell",it,[lt,ut,De,ot,De]],["getHexagonAreaAvgM2",it,[Si,De]],["getHexagonAreaAvgKm2",it,[Si,De]],["getHexagonEdgeLengthAvgM",it,[Si,De]],["getHexagonEdgeLengthAvgKm",it,[Si,De]],["greatCircleDistanceM",ot,[De,De]],["greatCircleDistanceKm",ot,[De,De]],["greatCircleDistanceRads",ot,[De,De]],["cellAreaM2",it,[lt,ut,De]],["cellAreaKm2",it,[lt,ut,De]],["cellAreaRads2",it,[lt,ut,De]],["edgeLengthM",it,[lt,ut,De]],["edgeLengthKm",it,[lt,ut,De]],["edgeLengthRads",it,[lt,ut,De]],["getNumCells",it,[Si,De]],["getRes0Cells",it,[De]],["res0CellCount",ot],["getPentagons",it,[ot,De]],["pentagonCount",ot],["cellToVertex",it,[lt,ut,ot,De]],["cellToVertexes",it,[lt,ut,De]],["vertexToLatLng",it,[lt,ut,De]],["isValidVertex",Ih,[lt,ut]]],bye=0,_ye=1,Sye=2,Eye=3,Tye=4,$ye=5,xye=6,Iye=7,Mye=8,Cye=9,kye=10,Rye=11,Oye=12,Pye=13,Nye=14,Lye=15,Dye=16,Fye=17,jye=18,Bye=19,Zr={};Zr[bye]="Success";Zr[_ye]="The operation failed but a more specific error is not available";Zr[Sye]="Argument was outside of acceptable range";Zr[Eye]="Latitude or longitude arguments were outside of acceptable range";Zr[Tye]="Resolution argument was outside of acceptable range";Zr[$ye]="Cell argument was not valid";Zr[xye]="Directed edge argument was not valid";Zr[Iye]="Undirected edge argument was not valid";Zr[Mye]="Vertex argument was not valid";Zr[Cye]="Pentagon distortion was encountered";Zr[kye]="Duplicate input";Zr[Rye]="Cell arguments were not neighbors";Zr[Oye]="Cell arguments had incompatible resolutions";Zr[Pye]="Memory allocation failed";Zr[Nye]="Bounds of provided memory were insufficient";Zr[Lye]="Mode or flags argument was not valid";Zr[Dye]="Index argument was not valid";Zr[Fye]="Base cell number was outside of acceptable range";Zr[jye]="Child indexing digits invalid";Zr[Bye]="Child indexing digits refer to a deleted subsequence";var Uye="Unknown error";function Vye(e,t,r){var i=r&&"value"in r,s=new Error((e[t]||Uye)+" (code: "+t+(i?", value: "+r.value:"")+")");return s.code=t,s}function zye(e,t){var r=arguments.length===2?{value:t}:{};return Vye(Zr,e,r)}function Gye(e){if(e!==0)throw zye(e)}var fu={};wye.forEach(function(t){fu[t[0]]=Qc.cwrap.apply(Qc,t)});var H6=16,aC=8;fu.sizeOfH3Index();fu.sizeOfLatLng();var qye=fu.sizeOfCellBoundary();fu.sizeOfGeoPolygon();fu.sizeOfGeoLoop();fu.sizeOfLinkedGeoPolygon();fu.sizeOfCoordIJ();var Hye=/[^0-9a-fA-F]/;function Wye(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||Hye.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),H6),r=parseInt(e.substring(e.length-8),H6);return[r,t]}function W6(e){return Yye(Qc.getValue(e,"double"))}function Qye(e){return[W6(e+aC),W6(e)]}function Jye(e,t,r){for(var i=Qc.getValue(e,"i32"),s=e+aC,n=[],o=Qye,l=0;l<i*2;l+=2)n.push(o(s+aC*l));return n.push(n[0]),n}function Zye(e,t){var r=Qc._malloc(qye),i=Wye(e),s=i[0],n=i[1];try{return Gye(fu.cellToBoundary(s,n,r)),Jye(r,t,t)}finally{Qc._free(r)}}function Yye(e){return e*180/Math.PI}const Kye=(e="compositeKey")=>(console.time("RENDERER"),{type:"unique-value",field:e,legendOptions:{title:"UGB Assets vs Harms"},defaultSymbol:{type:"simple-fill",color:"#cccccc",outline:{color:[0,0,0,.2],width:.5}},uniqueValueInfos:[{value:"1,1",label:"Assets:1, Harms:1",symbol:{type:"simple-fill",color:"#d3d3d3",outline:{color:[0,0,0,.2],width:.5}}},{value:"1,2",label:"Assets:1, Harms:2",symbol:{type:"simple-fill",color:"#d6b3a0",outline:{color:[0,0,0,.2],width:.5}}},{value:"1,3",label:"Assets:1, Harms:3",symbol:{type:"simple-fill",color:"#d9926a",outline:{color:[0,0,0,.2],width:.5}}},{value:"1,4",label:"Assets:1, Harms:4",symbol:{type:"simple-fill",color:"#dd6a29",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,1",label:"Assets:2, Harms:1",symbol:{type:"simple-fill",color:"#9cc4d2",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,2",label:"Assets:2, Harms:2",symbol:{type:"simple-fill",color:"#9ea69f",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,3",label:"Assets:2, Harms:3",symbol:{type:"simple-fill",color:"#a08769",outline:{color:[0,0,0,.2],width:.5}}},{value:"2,4",label:"Assets:2, Harms:4",symbol:{type:"simple-fill",color:"#a36229",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,1",label:"Assets:3, Harms:1",symbol:{type:"simple-fill",color:"#5fb2d1",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,2",label:"Assets:3, Harms:2",symbol:{type:"simple-fill",color:"#60979f",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,3",label:"Assets:3, Harms:3",symbol:{type:"simple-fill",color:"#617b69",outline:{color:[0,0,0,.2],width:.5}}},{value:"3,4",label:"Assets:3, Harms:4",symbol:{type:"simple-fill",color:"#635929",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,1",label:"Assets:4, Harms:1",symbol:{type:"simple-fill",color:"#169dd0",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,2",label:"Assets:4, Harms:2",symbol:{type:"simple-fill",color:"#16869e",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,3",label:"Assets:4, Harms:3",symbol:{type:"simple-fill",color:"#166d68",outline:{color:[0,0,0,.2],width:.5}}},{value:"4,4",label:"Assets:4, Harms:4",symbol:{type:"simple-fill",color:"#174f28",outline:{color:[0,0,0,.2],width:.5}}}]});function Xye(){const e=ege();return(t,r)=>{const{memory:i,uncompress:s}=e.exports,n=68e3,o=n+t.byteLength,l=n+t.byteLength+r;if(i.buffer.byteLength<l){const _=i.buffer.byteLength/65536,$=Math.ceil(l/65536)-_;i.grow($)}const p=new Uint8Array(i.buffer);p.set(t,n);const m=s(n,t.byteLength,o);if(m===-1)throw new Error("invalid snappy length header");if(m===-2)throw new Error("missing eof marker");if(m===-3)throw new Error("premature end of input");if(m)throw new Error(`failed to uncompress data ${m}`);return p.slice(o,o+r)}}function ege(){const e=atob(tge),t=new Uint8Array(e.length);for(let i=0;i<e.length;i+=1)t[i]=e.charCodeAt(i);const r=new WebAssembly.Module(t);return new WebAssembly.Instance(r)}const tge="AGFzbQEAAAABEANgAABgA39/fwF/YAF/AX8DBgUAAQEBAgUDAQACBj8KfwFBoIwEC38AQYAIC38AQaAMC38AQaAMC38AQaCMBAt/AEGACAt/AEGgjAQLfwBBgIAIC38AQQALfwBBAQsHwQEOBm1lbW9yeQIAEV9fd2FzbV9jYWxsX2N0b3JzAAAGbWVtY3B5AAEHbWVtbW92ZQACCnVuY29tcHJlc3MAAwxfX2Rzb19oYW5kbGUDAQpfX2RhdGFfZW5kAwILX19zdGFja19sb3cDAwxfX3N0YWNrX2hpZ2gDBA1fX2dsb2JhbF9iYXNlAwULX19oZWFwX2Jhc2UDBgpfX2hlYXBfZW5kAwcNX19tZW1vcnlfYmFzZQMIDF9fdGFibGVfYmFzZQMJCuASBQIAC8sBAQN/AkAgAkUNAAJAAkAgAkEHcSIDDQAgACEEIAIhBQwBCyAAIQQgAiEFA0AgBCABLQAAOgAAIARBAWohBCABQQFqIQEgBUF/aiEFIANBf2oiAw0ACwsgAkEISQ0AA0AgBCABLQAAOgAAIAQgAS0AAToAASAEIAEtAAI6AAIgBCABLQADOgADIAQgAS0ABDoABCAEIAEtAAU6AAUgBCABLQAGOgAGIAQgAS0ABzoAByAEQQhqIQQgAUEIaiEBIAVBeGoiBQ0ACwsgAAugAwEEfwJAIAAgAUYNAAJAAkAgACABSQ0AIAEgAmoiAyAASw0BCyACRQ0BAkACQCACQQdxIgMNACAAIQQgAiEFDAELIAAhBCACIQUDQCAEIAEtAAA6AAAgBEEBaiEEIAFBAWohASAFQX9qIQUgA0F/aiIDDQALCyACQQhJDQEDQCAEIAEtAAA6AAAgBCABLQABOgABIAQgAS0AAjoAAiAEIAEtAAM6AAMgBCABLQAEOgAEIAQgAS0ABToABSAEIAEtAAY6AAYgBCABLQAHOgAHIARBCGohBCABQQhqIQEgBUF4aiIFDQAMAgsLIAJFDQACQAJAIAJBA3EiBA0AIAAgAmohBiACIQUMAQsgAiEFA0AgBUF/aiIFIABqIgYgBSABaiIDLQAAOgAAIARBf2oiBA0ACwsgAkEESQ0AIAZBfGohASADQXxqIQQDQCABQQNqIARBA2otAAA6AAAgAUECaiAEQQJqLQAAOgAAIAFBAWogBEEBai0AADoAACABIAQtAAA6AAAgAUF8aiEBIARBfGohBCAFQXxqIgUNAAsLIAALswoBCX8jgICAgABBIGsiAySAgICAACADQQlqQgA3AAAgA0IANwIEIAMgA0EYajYCAEF/IQQCQCABRQ0AIAMgAUF/aiIFNgIcIAMgAEEBajYCGCAALAAAIgZB/wBxIQcCQCAGQX9KDQAgBUUNASADIAFBfmoiBTYCHCADIABBAmo2AhggACwAASIGQf8AcUEHdCAHciEHQX8hBCAGQX9KDQAgBUUNASADIAFBfWoiBTYCHCADIABBA2o2AhggACwAAiIGQf8AcUEOdCAHciEHQX8hBCAGQX9KDQAgBUUNASADIAFBfGoiBTYCHCADIABBBGo2AhggACwAAyIGQf8AcUEVdCAHciEHQX8hBCAGQX9KDQAgBUUNASADIAFBe2o2AhwgAyAAQQVqNgIYIAAsAAQiAUEASA0BIAFBHHQgB3IhBwsgAiAHaiEIAkACQCADEISAgIAADQAgAiEADAELIAMoAgQhASACIQADQAJAIAMoAgggAWtBBEoNACADIAE2AgQgAxCEgICAAEUNAiADKAIEIQELIAFBAWohBQJAAkAgAS0AACIGQQNxDQAgCCAAayEJIAMoAggiCiAFayEEIAZBAnYiC0EBaiEHAkAgBkE/Sw0AIARBEEkNACAJQRBIDQAgACABKAIBNgIAIAAgASgCBTYCBCAAIAEoAgk2AgggACABKAINNgIMIAAgB2ohACADKAIIIAUgB2oiAWtBBEoNAyADIAE2AgQgAxCEgICAAEUNBAwCCwJAAkAgBkHwAU8NACAFIQYMAQsgCiAFIAtBRWoiAWoiBmshBCABQQJ0QYCIgIAAaigCACAFKAIAcUEBaiEHCwJAIAcgBE0NAANAIAggAGsgBEkNBSAAIAYgBBCBgICAACEAIAMoAgAiASABKAIAIgkgAygCDCIFaiIGNgIAIAFBBGoiASABKAIAIgogBWsiATYCACADIAE2AgwgACAEaiEAIAFFDQUgAyAJIApqNgIIIAcgBGshByABIQQgByABSw0ACyAIIABrIQkLIAkgB0kNAyAAIAYgBxCBgICAACAHaiEAIAMoAgggBiAHaiIBa0EESg0CIAMgATYCBCADEISAgIAADQEMAwsgACACayAGQQF0QaCIgIAAai8BACIBQQt2IgpBAnRBgIiAgABqKAIAIAUoAgBxIAFBgA5xaiIHQX9qTQ0CIAggAGshBAJAAkAgAUH/AXEiCUEQSw0AIAdBCEkNACAEQRBJDQAgACAAIAdrIgEoAgA2AgAgACABKAIENgIEIAAgASgCCDYCCCAAIAFBDGooAgA2AgwMAQsCQAJAAkAgBCAJQQpqSQ0AIAAgB2shBCAAIQEgCSEGIAdBB0wNAQwCCyAEIAlJDQUgCUEBaiEEQQAgB2shByAAIQEDQCABIAEgB2otAAA6AAAgAUEBaiEBIARBf2oiBEEBSw0ADAMLCwNAIAEgBCgCADYCACABIAQoAgQ2AgQgBiAHayEGIAEgB2oiASAEayIHQQhIDQALCyAGQQFIDQAgBkEIaiEHA0AgASAEKAIANgIAIAEgBCgCBDYCBCABQQhqIQEgBEEIaiEEIAdBeGoiB0EISw0ACwsgACAJaiEAIAMoAgggBSAKaiIBa0EESg0BIAMgATYCBCADEISAgIAARQ0CCyADKAIEIQEMAAsLIAMoAgAiASABKAIEIAMoAgwiBGs2AgQgASAEIAEoAgBqNgIAAkAgAy0AEA0AQX4hBAwBC0EAQX0gCCAARhshBAsgA0EgaiSAgICAACAEC7YDAQd/AkAgACgCBCIBIAAoAggiAkcNACAAKAIAIgIgAigCACIDIAAoAgwiBGoiATYCACACQQRqIgIgAigCACICIARrIgU2AgAgACAFNgIMAkAgAiAERw0AIABBAToAEEEADwsgACADIAJqIgI2AggLAkACQAJAIAIgAWsiAiABLQAAQQF0QaCIgIAAai8BAEELdkEBaiIFTw0AIABBEWogASACEIKAgIAAIQYgACgCDCEEQQAhByAAQQA2AgwgACgCACIBIAEoAgQgBGs2AgQgASAEIAEoAgBqIgM2AgADQCABQQRqKAIAIgFFDQMgBiACaiADIAUgAmsiBCABIAQgAUkbIgQQgYCAgAAaIAAoAgAiASABKAIEIARrNgIEIAEgASgCACAEaiIDNgIAIAQgAmoiAiAFSQ0ACyAAIAY2AgQgACAGIAVqNgIIDAELAkAgAkEESw0AIAAgAEERaiABIAIQgoCAgAAiASACajYCCCAAIAE2AgQgACgCDCECIABBADYCDCAAKAIAIgEgASgCBCACazYCBCABIAIgASgCAGo2AgAMAQsgACABNgIEC0EBIQcLIAcLC6gEAQBBgAgLoAQAAAAA/wAAAP//AAD///8A/////wAAAAAAAAAAAAAAAAEABAgBEAEgAgAFCAIQAiADAAYIAxADIAQABwgEEAQgBQAICAUQBSAGAAkIBhAGIAcACggHEAcgCAALCAgQCCAJAAQJCRAJIAoABQkKEAogCwAGCQsQCyAMAAcJDBAMIA0ACAkNEA0gDgAJCQ4QDiAPAAoJDxAPIBAACwkQEBAgEQAEChEQESASAAUKEhASIBMABgoTEBMgFAAHChQQFCAVAAgKFRAVIBYACQoWEBYgFwAKChcQFyAYAAsKGBAYIBkABAsZEBkgGgAFCxoQGiAbAAYLGxAbIBwABwscEBwgHQAICx0QHSAeAAkLHhAeIB8ACgsfEB8gIAALCyAQICAhAAQMIRAhICIABQwiECIgIwAGDCMQIyAkAAcMJBAkICUACAwlECUgJgAJDCYQJiAnAAoMJxAnICgACwwoECggKQAEDSkQKSAqAAUNKhAqICsABg0rECsgLAAHDSwQLCAtAAgNLRAtIC4ACQ0uEC4gLwAKDS8QLyAwAAsNMBAwIDEABA4xEDEgMgAFDjIQMiAzAAYOMxAzIDQABw40EDQgNQAIDjUQNSA2AAkONhA2IDcACg43EDcgOAALDjgQOCA5AAQPORA5IDoABQ86EDogOwAGDzsQOyA8AAcPPBA8IAEICA89ED0gARAJDz4QPiABGAoPPxA/IAEgCw9AEEAgAGQEbmFtZQE9BQARX193YXNtX2NhbGxfY3RvcnMBBm1lbWNweQIHbWVtbW92ZQMKdW5jb21wcmVzcwQKcmVmaWxsX3RhZwcSAQAPX19zdGFja19wb2ludGVyCQoBAAcucm9kYXRhADIJcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBDFVidW50dSBjbGFuZwsxNi4wLjYgKDE1KQAsD3RhcmdldF9mZWF0dXJlcwIrD211dGFibGUtZ2xvYmFscysIc2lnbi1leHQ=";async function P4(e){const{asyncBufferFromUrl:t,parquetQuery:r}=await ce(async()=>{const{asyncBufferFromUrl:n,parquetQuery:o}=await import("./index-CYkGMpLt.js");return{asyncBufferFromUrl:n,parquetQuery:o}},[],import.meta.url),s=await t({url:`https://raw.githubusercontent.com/DLCDOFFICIAL/RiskAssessmentViewer/main/dist/data/${e}`});return r({file:s,compressors:{SNAPPY:Xye()}})}async function rge(e){console.time("LoadParquet TIME:");const t=await P4(e);console.timeEnd("LoadParquet TIME:"),console.time("Create Hex Store TIME:");const r={electric_transmission_lines:[],highway:[],tsunami_zone:[]},i={};t.forEach(n=>{const o=n.GRID_ID;i[o]||(i[o]=[]),i[o].push(n)});const s=Object.keys(i);return console.timeEnd("Create Hex Store TIME:"),{hexStore:i,uniqueHexes:s,flags_data:r}}function MH(e,t){e&&t.sort().forEach(r=>{const i=document.createElement("calcite-combobox-item");i.setAttribute("value",r);const s=CH(r);i.setAttribute("heading",s),e.append(i)})}function CH(e){if(!e)return"";const t={community_center_dist:"Community Center Distance",library_dist:"Library Distance",burn_prob:"Burn Probability",flame_length:"Flame Length"};return t[e]?t[e]:e.replace(/_/g," ").split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" ")}function kH(e,t){e&&e.addEventListener("calciteComboboxChange",()=>{var i;const r=((i=e.selectedItems)==null?void 0:i.map(s=>s.value))||[];t(r)})}function Q6(e,t,r){if(!e)return;const i=t.filter(s=>s.type===r).map(s=>s.value);MH(e,i)}async function ige(e,t,r="places.parquet"){try{const s=(await P4(r)).map(n=>n.name);MH(e,s),kH(e,n=>{var l;const o=((l=n[0])==null?void 0:l.replaceAll(/[ /]/g,"_").toLowerCase())||null;t(o)})}catch(i){console.error("Failed to create place elements:",i)}}async function sge(e,t,r="harms_assets.parquet"){try{const i=await P4(r),s=e.querySelector('calcite-combobox-item-group[label="Harms"]'),n=e.querySelector('calcite-combobox-item-group[label="Vulnerabilities"]');Q6(n,i,"asset"),Q6(s,i,"harm"),kH(e,o=>{t(o.length?o:null)})}catch(i){console.error("Failed to create indicator elements:",i)}}function nge(e,t){const r=typeof e=="string"?document.getElementById(e):e;r&&r.addEventListener("calciteRadioButtonGroupChange",()=>{t(r.value)})}function Um(e){const t={q1:.25,q2:.5,q3:.75};return e<=t.q1?1:e<=t.q2?2:e<=t.q3?3:4}function T3(e){return{1:"0-25%",2:"25-50%",3:"50-75%",4:"75-100%"}[e]||null}function oge(e,t,r){if(e==1){t[1]+=r;return}if(e==2){t[2]+=r;return}if(e==3){t[3]+=r;return}if(e==4){t[4]+=r;return}}const age=(e="ugb_pct_rank",t=[],r)=>{let i=0,s=0,n=0,o=0,l={1:"",2:"",3:"",4:""},p="";t.forEach(N=>{if(!r.has(N.var))return;const U=N[e],G=Um(U),W=T3(G);let ie=`${CH(N.var)}: ${W} <br>`;oge(G,l,ie),N.type==="harm"?(i+=U,n+=1):(s+=U,o+=1)}),Object.keys(l).sort((N,U)=>U-N).forEach(N=>{l[N]!==""&&(p+=l[N],l[N]="")});const m=n>0?i/n:0,v=o>0?s/o:0,_=Um(m),E=Um(v),$=T3(_),M=T3(E),k=`${Um(v)},${Um(m)}`;return{avg_harms:$,avg_assets:M,quartile_string:k,displayString:p}};let ei=null,$s=null,tn=null,Cg=null,u_=null,c_=!1,Mh=null,lC=null,RH="ugb_pct_rank",hv=!0;const d_=document.getElementById("loader"),dw=document.getElementById("updateIndicatorsBtn");function lge(e){e.when(()=>{e.watch("zoom",t=>{$s&&(t>=10?($s.visible=!0,c_=!0,tn.visible=!1):($s.visible=!1,c_=!1,tn.visible=!0))})})}function J6(e,t){hv=!0,console.time("CREATE HEX LAYER");const r=e.map(i=>{const s={type:"polygon",rings:Zye(i,!0)},n={type:"simple-fill",color:[227,139,79,.6],outline:{color:[255,255,255,.8],width:1}};return new Sr({geometry:s,symbol:n,attributes:{grid_id:i,hex_id:i,displayString:i,final_value_assets:0,final_value_harms:0}})});return console.timeEnd("CREATE HEX LAYER"),new Le({objectIdField:"grid_id",opacity:.85,popupEnabled:!0,popupTemplate:{outFields:["*"],content:function(i){return i.graphic.attributes.displayString}},fields:[{name:"grid_id",type:"oid"},{name:"hex_id",type:"string"},{name:"final_value_harms",type:"double"},{name:"final_value_assets",type:"double"},{name:"compositeKey",type:"string"},{name:"displayString",type:"string"}],renderer:Kye(),source:r})}async function pw(e,t,r){hv=!0,e.visible=!1;const{indicators_set:i,region:s}=r;ei.extent,e.source.items.map(o=>{const l=o.attributes.hex_id,p=age(s,t[l],i);return o.attributes.final_value_harms=p.avg_harms,o.attributes.final_value_assets=p.avg_assets,o.attributes.compositeKey=p.quartile_string,o.attributes.displayString=p.displayString,{attributes:o.attributes}});const n=5e4;for(let o=0;o<e.source.items.length;o+=n){const l=e.source.items.slice(o,o+n).map(p=>({attributes:p.attributes}));await e.applyEdits({updateFeatures:l})}}function uge(e){ei=e,ei.popup.dockEnabled=!0,ei.popup.featureNavigationEnabled=!1,ei.popup.autoCloseEnabled=!0,ei.popup.dockOptions={buttonEnabled:!1,breakpoint:!1},ei.popup.maxHeight=200,ei.on("click",async t=>{const r=await ei.hitTest(t);Mh&&(Mh.style.border="");let i=null;c_?i=$s:i=tn;const s=r.results.filter(n=>n.graphic.layer===i);if(s.length>0){const n=s[0].graphic;n.attributes.hex_id;const o=n.attributes.compositeKey,l=document.getElementById(o);l.style.border="3px solid yellow",Mh=l}}),Qe(()=>ei.popup.visible,t=>{!t&&Mh&&(Mh.style.border="",Mh=null)}),ei.watch("updating",t=>{hv&&(dw.loading=!0,dw.disabled=!0,d_.classList.toggle("hidden",!t),t||(d_.classList.toggle("hidden",!0),hv=!1,dw.loading=!1,dw.disabled=!1))})}function OH(e){lC=e}function cge(e){RH=e}async function Z6(e,t){d_.classList.toggle("hidden",!1),tn&&$s&&PH();const{hexStore:r,uniqueHexes:i,flags_data:s}=await rge(e);t?(tn=J6(i,ei.map),u_=r,ei.map.add(tn),await ei.whenLayerView(tn).then(()=>{const n=tn.fullExtent;n&&ei.goTo(n.expand(1.15))})):setTimeout(()=>{$s=J6(i,ei.map),Cg=r,ei.map.add($s),$s.visible=!1},0)}function dge(){PH(),ei.goTo({center:[-120.5,44],zoom:6})}function pge(){if(d_.classList.toggle("hidden",!1),hv=!0,!$s||!Cg||!lC)return;const e={indicators_set:new Set(lC),region:RH};c_?(pw($s,Cg,e),$s.visible=!0,pw(tn,u_,e)):(pw(tn,u_,e),tn.visible=!0,pw($s,Cg,e))}function PH(){$s&&ei.map.layers.remove($s),tn&&ei.map.layers.remove(tn),$s=null,Cg=null,tn=null,u_=null}const dp=(...e)=>{const t=[];for(let i=0;i<e.length;i++){const s=e[i];if(typeof s=="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(typeof s=="object")for(const n in s)s[n]&&t.push(n)}const r=t.join(" ");return t.length=0,r};let Av=class{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}};const hge=(e,t)=>{let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r.parentNode instanceof ShadowRoot?r=r.parentNode.host:r=r.parentNode}return!1},Age=(e,t,r)=>{const i=fge(t).subscribe;return i(s=>{s.some(o=>hge(e,o.target))&&r()})},$3={},fge=e=>{const t=e.join(","),r=$3[t];if(r!==void 0)return r;const i=new Set,s=new MutationObserver(o=>i.forEach(l=>l(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const n={subscribe:o=>(i.add(o),()=>{i.delete(o),i.size===0&&(s.disconnect(),$3[t]=void 0)})};return $3[t]=n,n},mge=(e,t)=>{var i,s;let r=e;for(;r;){const n=(i=r.closest)==null?void 0:i.call(r,t);if(n)return n;const o=(s=r.getRootNode)==null?void 0:s.call(r);if(o===globalThis.document)return null;r=o.host}return null},yge=(e,t,r)=>{const i=mge(e,`[${t}]`);return(i==null?void 0:i.getAttribute(t))??r},Er=(e,t,...r)=>{try{return e==null?void 0:e.call(t,...r)}catch(i){console.error(i,e)}},uC=async(e,t,...r)=>{try{return await(e==null?void 0:e.call(t,...r))}catch(i){console.error(i,e)}},gge="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),vge=new Set(gge),p_="en",wge={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},bge=async(e,t,r="")=>{const i=`${t}/${r}`,s=`${i}${e}.json`;return x3[s]??(x3[s]=NH(e,i)),await x3[s]},x3={},NH=async(e,t)=>{const r=`${t}${e}.json`;try{const i=await fetch(r);if(i.ok)return await i.json()}catch(i){return console.error(i),{}}return e===p_?{}:await NH(p_,t)},LH=e=>{var r;const t=yge(e,"lang",((r=globalThis.navigator)==null?void 0:r.language)||p_);return{lang:t,t9nLocale:DH(t)}},DH=e=>{const[t,r]=e.split("-"),i=t.toLowerCase();let s=i;return r&&(s=`${i}-${r.toUpperCase()}`),s=wge[s]??s,vge.has(s)?s:r?DH(i):p_},_ge=(e,t,r,i)=>{let s;const n=()=>Sge(e,t(),i).then(o=>{((s==null?void 0:s.lang)!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&r(o),s=o}).catch(console.error);return queueMicrotask(n),Age(e,["lang"],n)},Sge=async(e,t,r=e.localName.split("-").slice(1).join("-"))=>{const{lang:i,t9nLocale:s}=LH(e),n=`${t}/${r}/t9n`,l=r===null?{}:await bge(s,n,"messages.");return{lang:i,t9nLocale:s,t9nStrings:l}},Ege=e=>e.replace(Tge,(t,r)=>`${r===0?"":"-"}${t.toLowerCase()}`),Tge=/[A-Z]+(?![a-z])|[A-Z]/gu,$ge=(e,t)=>{const r=t/xge;let i=0;const s=setInterval(()=>{i+=r,i>=t&&(clearInterval(s),e())},r);return s},xge=4;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const F2=globalThis,N4=F2.ShadowRoot&&(F2.ShadyCSS===void 0||F2.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,L4=Symbol(),Y6=new WeakMap;let FH=class{constructor(t,r,i){if(this._$cssResult$=!0,i!==L4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=r}get styleSheet(){let t=this.o;const r=this.t;if(N4&&t===void 0){const i=r!==void 0&&r.length===1;i&&(t=Y6.get(r)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&Y6.set(r,t))}return t}toString(){return this.cssText}};const Ige=e=>new FH(typeof e=="string"?e:e+"",void 0,L4),ah=(e,...t)=>{const r=e.length===1?e[0]:t.reduce((i,s,n)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+e[n+1],e[0]);return new FH(r,e,L4)},Mge=(e,t)=>{if(N4)e.adoptedStyleSheets=t.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of t){const i=document.createElement("style"),s=F2.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=r.cssText,e.appendChild(i)}},K6=N4?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let r="";for(const i of t.cssRules)r+=i.cssText;return Ige(r)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Cge,defineProperty:kge,getOwnPropertyDescriptor:Rge,getOwnPropertyNames:Oge,getOwnPropertySymbols:Pge,getPrototypeOf:Nge}=Object,Pc=globalThis,X6=Pc.trustedTypes,Lge=X6?X6.emptyScript:"",I3=Pc.reactiveElementPolyfillSupport,kg=(e,t)=>e,cC={toAttribute(e,t){switch(t){case Boolean:e=e?Lge:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=e!==null;break;case Number:r=e===null?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch{r=null}}return r}},tE=(e,t)=>!Cge(e,t),eD={attribute:!0,type:String,converter:cC,reflect:!1,useDefault:!1,hasChanged:tE};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Pc.litPropertyMetadata??(Pc.litPropertyMetadata=new WeakMap);let uA=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,r=eD){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(t,r),!r.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(t,i,r);s!==void 0&&kge(this.prototype,t,s)}}static getPropertyDescriptor(t,r,i){const{get:s,set:n}=Rge(this.prototype,t)??{get(){return this[r]},set(o){this[r]=o}};return{get:s,set(o){const l=s==null?void 0:s.call(this);n==null||n.call(this,o),this.requestUpdate(t,l,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??eD}static _$Ei(){if(this.hasOwnProperty(kg("elementProperties")))return;const t=Nge(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(kg("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(kg("properties"))){const r=this.properties,i=[...Oge(r),...Pge(r)];for(const s of i)this.createProperty(s,r[s])}const t=this[Symbol.metadata];if(t!==null){const r=litPropertyMetadata.get(t);if(r!==void 0)for(const[i,s]of r)this.elementProperties.set(i,s)}this._$Eh=new Map;for(const[r,i]of this.elementProperties){const s=this._$Eu(r,i);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const r=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const s of i)r.unshift(K6(s))}else t!==void 0&&r.push(K6(t));return r}static _$Eu(t,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(r=>r(this))}addController(t){var r;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((r=t.hostConnected)==null||r.call(t))}removeController(t){var r;(r=this._$EO)==null||r.delete(t)}_$E_(){const t=new Map,r=this.constructor.elementProperties;for(const i of r.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Mge(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostConnected)==null?void 0:i.call(r)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostDisconnected)==null?void 0:i.call(r)})}attributeChangedCallback(t,r,i){this._$AK(t,i)}_$ET(t,r){var n;const i=this.constructor.elementProperties.get(t),s=this.constructor._$Eu(t,i);if(s!==void 0&&i.reflect===!0){const o=(((n=i.converter)==null?void 0:n.toAttribute)!==void 0?i.converter:cC).toAttribute(r,i.type);this._$Em=t,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(t,r){var n,o;const i=this.constructor,s=i._$Eh.get(t);if(s!==void 0&&this._$Em!==s){const l=i.getPropertyOptions(s),p=typeof l.converter=="function"?{fromAttribute:l.converter}:((n=l.converter)==null?void 0:n.fromAttribute)!==void 0?l.converter:cC;this._$Em=s;const m=p.fromAttribute(r,l.type);this[s]=m??((o=this._$Ej)==null?void 0:o.get(s))??m,this._$Em=null}}requestUpdate(t,r,i,s=!1,n){var o;if(t!==void 0){const l=this.constructor;if(s===!1&&(n=this[t]),i??(i=l.getPropertyOptions(t)),!((i.hasChanged??tE)(n,r)||i.useDefault&&i.reflect&&n===((o=this._$Ej)==null?void 0:o.get(t))&&!this.hasAttribute(l._$Eu(t,i))))return;this.C(t,r,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,r,{useDefault:i,reflect:s,wrapped:n},o){i&&!(this._$Ej??(this._$Ej=new Map)).has(t)&&(this._$Ej.set(t,o??r??this[t]),n!==!0||o!==void 0)||(this._$AL.has(t)||(this.hasUpdated||i||(r=void 0),this._$AL.set(t,r)),s===!0&&this._$Em!==t&&(this._$Eq??(this._$Eq=new Set)).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[n,o]of this._$Ep)this[n]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[n,o]of s){const{wrapped:l}=o,p=this[n];l!==!0||this._$AL.has(n)||p===void 0||this.C(n,void 0,o,p)}}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),(i=this._$EO)==null||i.forEach(s=>{var n;return(n=s.hostUpdate)==null?void 0:n.call(s)}),this.update(r)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(r)}willUpdate(t){}_$AE(t){var r;(r=this._$EO)==null||r.forEach(i=>{var s;return(s=i.hostUpdated)==null?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(t){}firstUpdated(t){}};uA.elementStyles=[],uA.shadowRootOptions={mode:"open"},uA[kg("elementProperties")]=new Map,uA[kg("finalized")]=new Map,I3==null||I3({ReactiveElement:uA}),(Pc.reactiveElementVersions??(Pc.reactiveElementVersions=[])).push("2.1.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Rg=globalThis,tD=e=>e,h_=Rg.trustedTypes,rD=h_?h_.createPolicy("lit-html",{createHTML:e=>e}):void 0,jH="$lit$",hc=`lit$${Math.random().toFixed(9).slice(2)}$`,BH="?"+hc,Dge=`<${BH}>`,Kp=document,fv=()=>Kp.createComment(""),mv=e=>e===null||typeof e!="object"&&typeof e!="function",D4=Array.isArray,Fge=e=>D4(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",M3=`[ 	
\f\r]`,Vm=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,iD=/-->/g,sD=/>/g,pd=RegExp(`>|${M3}(?:([^\\s"'>=/]+)(${M3}*=${M3}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),nD=/'/g,oD=/"/g,UH=/^(?:script|style|textarea|title)$/i,VH=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),ri=VH(1),dC=VH(2),Jc=Symbol.for("lit-noChange"),xt=Symbol.for("lit-nothing"),aD=new WeakMap,pp=Kp.createTreeWalker(Kp,129);function zH(e,t){if(!D4(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return rD!==void 0?rD.createHTML(t):t}const jge=(e,t)=>{const r=e.length-1,i=[];let s,n=t===2?"<svg>":t===3?"<math>":"",o=Vm;for(let l=0;l<r;l++){const p=e[l];let m,v,_=-1,E=0;for(;E<p.length&&(o.lastIndex=E,v=o.exec(p),v!==null);)E=o.lastIndex,o===Vm?v[1]==="!--"?o=iD:v[1]!==void 0?o=sD:v[2]!==void 0?(UH.test(v[2])&&(s=RegExp("</"+v[2],"g")),o=pd):v[3]!==void 0&&(o=pd):o===pd?v[0]===">"?(o=s??Vm,_=-1):v[1]===void 0?_=-2:(_=o.lastIndex-v[2].length,m=v[1],o=v[3]===void 0?pd:v[3]==='"'?oD:nD):o===oD||o===nD?o=pd:o===iD||o===sD?o=Vm:(o=pd,s=void 0);const $=o===pd&&e[l+1].startsWith("/>")?" ":"";n+=o===Vm?p+Dge:_>=0?(i.push(m),p.slice(0,_)+jH+p.slice(_)+hc+$):p+hc+(_===-2?l:$)}return[zH(e,n+(e[r]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),i]};let pC=class GH{constructor({strings:t,_$litType$:r},i){let s;this.parts=[];let n=0,o=0;const l=t.length-1,p=this.parts,[m,v]=jge(t,r);if(this.el=GH.createElement(m,i),pp.currentNode=this.el.content,r===2||r===3){const _=this.el.content.firstChild;_.replaceWith(..._.childNodes)}for(;(s=pp.nextNode())!==null&&p.length<l;){if(s.nodeType===1){if(s.hasAttributes())for(const _ of s.getAttributeNames())if(_.endsWith(jH)){const E=v[o++],$=s.getAttribute(_).split(hc),M=/([.?@])?(.*)/.exec(E);p.push({type:1,index:n,name:M[2],strings:$,ctor:M[1]==="."?Uge:M[1]==="?"?Vge:M[1]==="@"?zge:rE}),s.removeAttribute(_)}else _.startsWith(hc)&&(p.push({type:6,index:n}),s.removeAttribute(_));if(UH.test(s.tagName)){const _=s.textContent.split(hc),E=_.length-1;if(E>0){s.textContent=h_?h_.emptyScript:"";for(let $=0;$<E;$++)s.append(_[$],fv()),pp.nextNode(),p.push({type:2,index:++n});s.append(_[E],fv())}}}else if(s.nodeType===8)if(s.data===BH)p.push({type:2,index:n});else{let _=-1;for(;(_=s.data.indexOf(hc,_+1))!==-1;)p.push({type:7,index:n}),_+=hc.length-1}n++}}static createElement(t,r){const i=Kp.createElement("template");return i.innerHTML=t,i}};function I0(e,t,r=e,i){var o,l;if(t===Jc)return t;let s=i!==void 0?(o=r._$Co)==null?void 0:o[i]:r._$Cl;const n=mv(t)?void 0:t._$litDirective$;return(s==null?void 0:s.constructor)!==n&&((l=s==null?void 0:s._$AO)==null||l.call(s,!1),n===void 0?s=void 0:(s=new n(e),s._$AT(e,r,i)),i!==void 0?(r._$Co??(r._$Co=[]))[i]=s:r._$Cl=s),s!==void 0&&(t=I0(e,s._$AS(e,t.values),s,i)),t}let Bge=class{constructor(t,r){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:r},parts:i}=this._$AD,s=((t==null?void 0:t.creationScope)??Kp).importNode(r,!0);pp.currentNode=s;let n=pp.nextNode(),o=0,l=0,p=i[0];for(;p!==void 0;){if(o===p.index){let m;p.type===2?m=new F4(n,n.nextSibling,this,t):p.type===1?m=new p.ctor(n,p.name,p.strings,this,t):p.type===6&&(m=new Gge(n,this,t)),this._$AV.push(m),p=i[++l]}o!==(p==null?void 0:p.index)&&(n=pp.nextNode(),o++)}return pp.currentNode=Kp,s}p(t){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,r),r+=i.strings.length-2):i._$AI(t[r])),r++}},F4=class qH{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,r,i,s){this.type=2,this._$AH=xt,this._$AN=void 0,this._$AA=t,this._$AB=r,this._$AM=i,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=r.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,r=this){t=I0(this,t,r),mv(t)?t===xt||t==null||t===""?(this._$AH!==xt&&this._$AR(),this._$AH=xt):t!==this._$AH&&t!==Jc&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):Fge(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==xt&&mv(this._$AH)?this._$AA.nextSibling.data=t:this.T(Kp.createTextNode(t)),this._$AH=t}$(t){var n;const{values:r,_$litType$:i}=t,s=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=pC.createElement(zH(i.h,i.h[0]),this.options)),i);if(((n=this._$AH)==null?void 0:n._$AD)===s)this._$AH.p(r);else{const o=new Bge(s,this),l=o.u(this.options);o.p(r),this.T(l),this._$AH=o}}_$AC(t){let r=aD.get(t.strings);return r===void 0&&aD.set(t.strings,r=new pC(t)),r}k(t){D4(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,s=0;for(const n of t)s===r.length?r.push(i=new qH(this.O(fv()),this.O(fv()),this,this.options)):i=r[s],i._$AI(n),s++;s<r.length&&(this._$AR(i&&i._$AB.nextSibling,s),r.length=s)}_$AR(t=this._$AA.nextSibling,r){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,r);t!==this._$AB;){const s=tD(t).nextSibling;tD(t).remove(),t=s}}setConnected(t){var r;this._$AM===void 0&&(this._$Cv=t,(r=this._$AP)==null||r.call(this,t))}},rE=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,r,i,s,n){this.type=1,this._$AH=xt,this._$AN=void 0,this.element=t,this.name=r,this._$AM=s,this.options=n,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=xt}_$AI(t,r=this,i,s){const n=this.strings;let o=!1;if(n===void 0)t=I0(this,t,r,0),o=!mv(t)||t!==this._$AH&&t!==Jc,o&&(this._$AH=t);else{const l=t;let p,m;for(t=n[0],p=0;p<n.length-1;p++)m=I0(this,l[i+p],r,p),m===Jc&&(m=this._$AH[p]),o||(o=!mv(m)||m!==this._$AH[p]),m===xt?t=xt:t!==xt&&(t+=(m??"")+n[p+1]),this._$AH[p]=m}o&&!s&&this.j(t)}j(t){t===xt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},Uge=class extends rE{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===xt?void 0:t}},Vge=class extends rE{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==xt)}},zge=class extends rE{constructor(t,r,i,s,n){super(t,r,i,s,n),this.type=5}_$AI(t,r=this){if((t=I0(this,t,r,0)??xt)===Jc)return;const i=this._$AH,s=t===xt&&i!==xt||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,n=t!==xt&&(i===xt||s);s&&this.element.removeEventListener(this.name,this,i),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,t):this._$AH.handleEvent(t)}},Gge=class{constructor(t,r,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){I0(this,t)}};const C3=Rg.litHtmlPolyfillSupport;C3==null||C3(pC,F4),(Rg.litHtmlVersions??(Rg.litHtmlVersions=[])).push("3.3.2");const qge=(e,t,r)=>{const i=(r==null?void 0:r.renderBefore)??t;let s=i._$litPart$;if(s===void 0){const n=(r==null?void 0:r.renderBefore)??null;i._$litPart$=s=new F4(t.insertBefore(fv(),n),n,void 0,r??{})}return s._$AI(e),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $p=globalThis;let ou=class extends uA{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const t=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=t.firstChild),t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=qge(r,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Jc}};var L9;ou._$litElement$=!0,ou.finalized=!0,(L9=$p.litElementHydrateSupport)==null||L9.call($p,{LitElement:ou});const k3=$p.litElementPolyfillSupport;k3==null||k3({LitElement:ou});($p.litElementVersions??($p.litElementVersions=[])).push("4.2.2");const j4=Symbol.for("controller"),Hge=e=>typeof e=="object"&&e!==null&&(j4 in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),Wge=e=>typeof(e==null?void 0:e.then)=="function";let By;const HA=e=>{By!==e&&(By=e,queueMicrotask(()=>By===e?By=void 0:0))},lm=e=>By;let Fd=[];const HH=e=>{if(e===void 0){Fd=[];return}const t=Fd.indexOf(e);Fd=t===-1?[...Fd,e]:Fd.slice(0,t+1),queueMicrotask(()=>Fd=[])},WH=()=>Fd;let WA;const Qge=e=>{WA!==e&&(WA=e,queueMicrotask(()=>WA===e?WA=void 0:0))},Jge=()=>{const e=WA;return WA=void 0,e},Zge=async(e,t)=>{const r=B4(e);if(r===void 0)return e;if(await r.ready,typeof t=="function"){const i=r.watchExports(s=>t(s,i))}return r.exports},Yge=async e=>{const t=B4(e);return await t.ready,t},B4=e=>{const r=lm().manager.X(e);if(r!==void 0)return r;if(Hge(e))return e;const i=Jge();if(i!==void 0)return i};let hC=!1;const Kge=e=>{hC=!0;try{return e()}finally{hC=!1}},Xge=(e,t,r)=>{const i=Object.keys(e),s=i.length;xc===void 0&&queueMicrotask(U4),xc??(xc=new Map);let n=xc.get(e);return n===void 0&&(n={callbacks:[],keyCount:s},xc.set(e,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(i)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const l=m=>Er(t,null,m),p=o[s];p===void 0?l(void 0):e[p]===r?l(p):l(void 0)}),r};let xc;const U4=()=>{xc==null||xc.forEach(({callbacks:e},t)=>{const r=Object.keys(t);e.forEach(i=>i(r))}),xc=void 0},QH=(e,t,r)=>{const i=e.manager;return i.V!==xt&&i.V!==r&&i.S(void 0,void 0),i.T.length===0&&queueMicrotask(()=>i.S(void 0,void 0)),i.V=r,i.T.push((s,n)=>Er(t,void 0,r===n?s:void 0)),r},V4=(e=[lm(),...WH()],t,r)=>{const i=Array.isArray(e)?e:[e];let s=i.length+1;const n=o=>{s-=1,o!==void 0&&(s=Math.min(s,0)),s===0&&t(o)};i.forEach(o=>Xge(o,l=>n(l===void 0?void 0:{key:l,host:o,isReactive:!1}),r));for(const o of i)if("manager"in o&&o.manager.component===o){QH(o,l=>n(l===void 0?void 0:{key:l,host:o,isReactive:!0}),r);break}return r},z4=(e="",t={},r=lm())=>{const i={emit:s=>{e===""&&U4();const n=new CustomEvent(e,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(n),n}};return e===""&&V4(void 0,s=>e=s.key,i),i},A_=z4.bind(null,"");var JH;JH=j4;var Ff,jf,Ap,Bf,Uf,Vf,zf,Gf,Ac,fp,qs,xa,Ql,qf,j2,D9;let ZH=(D9=class{constructor(t){Ue(this,qf);Ue(this,Ff);Ue(this,jf);Ue(this,Ap);Ue(this,Bf);Ue(this,Uf);Ue(this,Vf);Ue(this,zf);Ue(this,Gf);Ue(this,Ac);Ue(this,fp);Ue(this,qs);Ue(this,xa);Ue(this,Ql);Oe(this,Ff,[]),Oe(this,jf,[]),Oe(this,Ap,[]),Oe(this,Bf,[]),Oe(this,Uf,[]),Oe(this,Vf,[]),Oe(this,zf,[]),Oe(this,Gf,[]),Oe(this,Ac,[]),Oe(this,fp,!1),this.P=new Av,this.connectedCalled=!1,this.loadedCalled=!1,this[JH]=!0,Oe(this,Ql,[]);const r=this,i=t??lm();Oe(r,qs,i),r.ready=r.P.promise,Oe(r,xa,uD(r)),r.component=i,Y(r,qs).addController(r),Y(r,qs).manager===void 0||(HH(r),queueMicrotask(()=>r.catchUpLifecycle()))}catchUpLifecycle(){const{manager:t}=Y(this,qs);t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),Y(t,fp)&&this.triggerLoad().then(()=>t.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return Y(this,xa)}set exports(t){const r=Y(this,xa);r!==t&&(Oe(this,xa,t),Y(this,Ql).forEach(Er),this.connectedCalled&&this.O!==!1&&Y(this,qs).requestUpdate(this.O,r)),this.P.resolve(t)}setProvisionalExports(t,r=!0){Oe(this,xa,r?uD(t):t),Y(this,Ql).forEach(Er)}watchExports(t){const r=()=>t(Y(this,xa));return Y(this,Ql).push(r),()=>void Y(this,Ql).splice(Y(this,Ql).indexOf(r),1)}get use(){return HA(Y(this,qs)),Zge}get useRef(){return HA(Y(this,qs)),Yge}get useRefSync(){return HA(Y(this,qs)),B4}controllerRemoved(){Y(this,qs).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){Y(this,Ff).push(t)}onDisconnected(t){Y(this,jf).push(t)}onLoad(t){Y(this,Ap).push(t)}onLoaded(t){Y(this,Bf).push(t)}onUpdate(t){Y(this,Uf).push(t)}onUpdated(t){Y(this,Vf).push(t)}onDestroy(t){Y(this,zf).push(t)}onLifecycle(t){Y(this,Gf).push(t),this.connectedCalled&&Y(this,qs).el.isConnected&&Pi(this,qf,j2).call(this,t)}triggerConnected(){const t=this;t.hostConnected&&Er(t.hostConnected,t),Y(t,Ff).forEach(Er),t.triggerLifecycle(),t.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&Er(t.hostDisconnected,t),Y(t,jf).forEach(Er),Y(t,Ac).forEach(Er),Oe(t,Ac,[])}async triggerLoad(){if(Y(this,fp))return;Oe(this,fp,!0);const t=this;t.hostLoad&&await uC(t.hostLoad,t),Y(this,Ap).length>0&&await Promise.allSettled(Y(this,Ap).map(uC)),this.P.resolve(Y(this,xa))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Er(this.hostLoaded,this),Y(this,Bf).forEach(Er),this.loadedCalled=!0)}triggerUpdate(t){this.hostUpdate&&Er(this.hostUpdate,this,t),Y(this,Uf).forEach(lD,t)}triggerUpdated(t){this.hostUpdated&&Er(this.hostUpdated,this,t),Y(this,Vf).forEach(lD,t)}triggerDestroy(){this.hostDestroy&&Er(this.hostDestroy,this),Y(this,zf).forEach(Er)}triggerLifecycle(){this.hostLifecycle&&Pi(this,qf,j2).call(this,()=>this.hostLifecycle()),Y(this,Gf).forEach(Pi(this,qf,j2),this)}},Ff=new WeakMap,jf=new WeakMap,Ap=new WeakMap,Bf=new WeakMap,Uf=new WeakMap,Vf=new WeakMap,zf=new WeakMap,Gf=new WeakMap,Ac=new WeakMap,fp=new WeakMap,qs=new WeakMap,xa=new WeakMap,Ql=new WeakMap,qf=new WeakSet,j2=function(t){HA(Y(this,qs));const r=Er(t);(Array.isArray(r)?r:[r]).forEach(s=>{typeof s=="function"?Y(this,Ac).push(s):typeof s=="object"&&typeof s.remove=="function"&&Y(this,Ac).push(s.remove)})},D9);function lD(e){Er(e,void 0,this)}const G4=ZH,uD=e=>{if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t={get(i,s,n){if(!((s==="exports"||s==="_exports")&&s in i&&i[s]===r)&&(s in i||s in Promise.prototype||typeof s=="symbol"))return typeof i=="function"?i[s]:Reflect.get(i,s,n)}},r=new Proxy(e,t);return r},eve=1,tve=2,rve=4,ive=8,sve=16,nve=32,ove=64,YH=e=>{var r,i;let t=e;for(;t=t.parentNode??t.host;)if((r=t==null?void 0:t.constructor)!=null&&r.lumina){const s=t;return(i=s.manager)!=null&&i.loadedCalled||(s.J??s._offspring).push(e),(s.I??s._postLoad).promise}return!1},yv={};function KH(){}const B2=Object.defineProperty,ave=globalThis.HTMLElement??KH;var Hs,Jl,Hf,Tv,AC,Wf;let M8e=(Wf=class extends ave{constructor(){var s,n;super();Ue(this,Tv);Ue(this,Hs);Ue(this,Jl);Ue(this,Hf);Oe(this,Jl,{}),Oe(this,Hf,[]),this.I=new Av,this.H=new Av,this.J=[];const r=this,i=r.constructor;r._offspring=r.J,r._postLoad=r.I,(s=i.C)==null||s.forEach(o=>{Object.hasOwn(r,o)&&(Y(r,Jl)[o]=r[o],delete r[o])}),i.A?Pi(n=r,Tv,AC).call(n,{a:i.A}):i.B.then(async o=>{var l,p;await i.K.p,Pi(p=r,Tv,AC).call(p,await(((l=o.default)==null?void 0:l.then(m=>typeof m=="function"?{a:m}:m))??o))}).catch(o=>{r.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const r of this.C??[])B2(this.prototype,r,{configurable:!0,enumerable:!0,get(){return Y(this,Jl)[r]},set(i){Y(this,Jl)[r]=i}});for(const r of this.E??[])B2(this.prototype,r,{async value(...i){return Y(this,Hs)||await this.H.promise,await Y(this,Hs)[r](...i)},configurable:!0});for(const r of this.D??[])B2(this.prototype,r,{value(...i){return Y(this,Hs)[r](...i)},configurable:!0})}get manager(){var r;return(r=Y(this,Hs))==null?void 0:r.manager}attributeChangedCallback(r,i,s){var n;(n=Y(this,Hs))==null||n.attributeChangedCallback(r,i,s),Y(this,Hs)||Y(this,Hf).push(r)}connectedCallback(){var r,i;Y(this,Hs)?(i=(r=Y(this,Hs)).connectedCallback)==null||i.call(r):queueMicrotask(()=>this.G=YH(this))}disconnectedCallback(){var r,i;(i=(r=Y(this,Hs))==null?void 0:r.disconnectedCallback)==null||i.call(r)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var r;(r=Y(this,Hs))==null||r.requestUpdate()}},Hs=new WeakMap,Jl=new WeakMap,Hf=new WeakMap,Tv=new WeakSet,AC=function(r){var E;const i=this.constructor,s=i.L,n=Y(this,Jl),o=Object.values(r).find($=>$.L===s),l=`${s}--lazy`;let p=o;for(;p&&!Object.hasOwn(p,"lumina");)p=Object.getPrototypeOf(p);uve(p),!i.A&&(i.A=o,customElements.define(l,o)),o.N=this;const v=document.createElement(l);o.N=void 0,Oe(this,Hs,v),Oe(this,Jl,v),Y(this,Hf).forEach($=>v.attributeChangedCallback($,null,this.getAttribute($))),Object.entries(n).forEach(lve,v);const _=this.isConnected;(_||this.G)&&((E=v.connectedCallback)==null||E.call(v),_||v.disconnectedCallback())},Wf.lumina=!0,Wf);function lve([e,t]){this[e]=t}const uve=e=>{const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(s,n){r.setAttribute.call(this.el,s,n)},t.removeAttribute=function(s){r.removeAttribute.call(this.el,s)},B2(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const q4={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},H4=e=>(...t)=>({_$litDirective$:e,values:t});let W4=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,r,i){this._$Ct=t,this._$AM=r,this._$Ci=i}_$AS(t,r){return this.update(t,r)}update(t,r){return this.render(...r)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const XH=H4(class extends W4{constructor(e){var t;if(super(e),e.type!==q4.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var i,s;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(n=>n!=="")));for(const n in t)t[n]&&!((i=this.nt)!=null&&i.has(n))&&this.st.add(n);return this.render(t)}const r=e.element.classList;for(const n of this.st)n in t||(r.remove(n),this.st.delete(n));for(const n in t){const o=!!t[n];o===this.st.has(n)||(s=this.nt)!=null&&s.has(n)||(o?(r.add(n),this.st.add(n)):(r.remove(n),this.st.delete(n)))}return Jc}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const eW="important",cve=" !"+eW,tW=H4(class extends W4{constructor(e){var t;if(super(e),e.type!==q4.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,r)=>{const i=e[r];return i==null?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(e,[t]){const{style:r}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const i of this.ft)t[i]==null&&(this.ft.delete(i),i.includes("-")?r.removeProperty(i):r[i]=null);for(const i in t){const s=t[i];if(s!=null){this.ft.add(i);const n=typeof s=="string"&&s.endsWith(cve);i.includes("-")||n?r.setProperty(i,n?s.slice(0,-11):s,n?eW:""):r[i]=s}}return Jc}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dve=e=>e.strings===void 0,pve={},k8e=(e,t=pve)=>e._$AH=t;var Zl,No,Qf,F9;let hve=(F9=class extends G4{constructor(r){super(r);Ue(this,Zl);Ue(this,No);Ue(this,Qf);this.destroyed=!1,this.R=!1,this.V=xt,this.T=[],Oe(this,Qf,new WeakMap),Oe(this,No,r),this.exports=void 0,this.hasDestroy=fC in r&&typeof r.destroy=="function",ou.prototype.addController.call(r,{hostConnected:()=>{if(this.destroyed){const i=r.el.localName;throw r.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${fC} prop.`)}Y(this,Zl)!==void 0&&clearTimeout(Y(this,Zl)),U4();for(const i of r.M)"triggerConnected"in i?i.triggerConnected():Er(i.hostConnected,i)},hostDisconnected:()=>{for(const i of r.M)"triggerDisconnected"in i?i.triggerDisconnected():Er(i.hostDisconnected,i);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const i of r.M)"triggerUpdate"in i?i.triggerUpdate(this.Q):Er(i.hostUpdate,i,this.Q)},hostUpdated:()=>{for(const i of r.M)"triggerUpdated"in i?i.triggerUpdated(this.Q):Er(i.hostUpdated,i,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),HA(r)}async destroy(){if(!this.destroyed){Y(this,No).el.isConnected&&(this.hasDestroy=!1,Y(this,No).el.remove()),Oe(this,Zl,void 0),this.destroyed=!0;for(const r of Y(this,No).M)"triggerDestroy"in r?r.triggerDestroy():Er(r.hostDestroy,r);Y(this,No).M.splice(0)}}U(){Y(this,Zl)!==void 0&&clearTimeout(Y(this,Zl)),!Y(this,No).el.isConnected&&!Y(this,No).autoDestroyDisabled&&Oe(this,Zl,$ge(()=>void Y(this,No).destroy(),Ave))}S(r,i){const s=this.T;this.V=xt,this.T=[],s.forEach(n=>n(r,i))}W(r,i){(typeof i=="object"&&i!==null||typeof i=="function")&&Y(this,Qf).set(i,r)}X(r){if(typeof r=="object"&&r!==null||typeof r=="function")return Y(this,Qf).get(r)}},Zl=new WeakMap,No=new WeakMap,Qf=new WeakMap,F9),Ave=1e3;const fC="autoDestroyDisabled";var mp,$v,xv,yp,Ia,L0,rW,iW,Fc;let Q4=(Fc=class extends ou{constructor(){super();Ue(this,L0);Ue(this,mp);Ue(this,$v);Ue(this,xv);Ue(this,yp);Ue(this,Ia);this.M=[],this.manager=new hve(this);const r=this,i=r.constructor,s=i.N,n=i.K.o,o=Fc.prototype.shouldUpdate;Oe(r,yp,(s==null?void 0:s.H)??new Av),r.I=(s==null?void 0:s.I)??new Av,r.J=(s==null?void 0:s.J)??[],r._offspring=r.J,r._postLoad=r.I,r.el=s??r,Oe(r,xv,r.enableUpdating),r.enableUpdating=KH,r.shouldUpdate!==o&&(Oe(r,$v,r.shouldUpdate),r.shouldUpdate=o),n&&(Oe(r,mp,new Map),i.elementProperties.forEach((l,p)=>Y(r,mp).set(p,n())))}static finalizeStyles(r){var n;const i=super.finalizeStyles(r),s=this.shadowRootOptions===yv;return((n=this.K)==null?void 0:n.commonStyles)===void 0||s?i:[this.K.commonStyles,...i]}static createProperty(r,i){const s=typeof i=="number"?i:Array.isArray(i)?i[0]:0,n=Array.isArray(i)?i[1]:void 0,o=(n==null?void 0:n.hasChanged)??tE,l={attribute:s&eve&&typeof r=="string"?Ege(r):!1,reflect:!!(s&tve),type:s&rve?Boolean:s&ive?Number:void 0,state:!!(s&sve),readOnly:!!(s&nve),noAccessor:!!(s&ove),c:!1,...n,hasChanged(p,m){const v=o(p,m);return l.c=v,v}};super.createProperty(r,l)}static getPropertyDescriptor(r,i,s){const n=this.K,o=super.getPropertyDescriptor(r,i,s);return s.d=o,{...o,get(){var l,p;return(l=n.t)==null||l.call(n,Y(this,mp).get(r)),(p=o.get)==null?void 0:p.call(this)},set(l){var m,v;const p=this.manager;if(s.readOnly&&!hC&&(p.R||p.connectedCalled))throw Error(`Cannot assign to read-only property "${r}" of ${this.el.localName}. Trying to assign "${l}"`);o.set.call(this,l??void 0),s.c&&((v=(m=Y(this,mp))==null?void 0:m.get(r))==null||v.notify()),p.T.length>0&&(p==null||p.S(r,l))}}}connectedCallback(){var s,n;if(this.el.hasAttribute("defer-hydration"))return;const r=(n=(s=this.constructor.K).c)==null?void 0:n.call(s,()=>this.requestUpdate());Oe(this,Ia,r);const i=!this.manager.connectedCalled;super.connectedCallback(),i?queueMicrotask(()=>Pi(this,L0,iW).call(this).catch(o=>{Y(this,yp).reject(o),setTimeout(()=>{throw o})})):r&&this.requestUpdate()}disconnectedCallback(){var r;super.disconnectedCallback(),(r=Y(this,Ia))==null||r.destroy(),Oe(this,Ia,void 0)}createRenderRoot(){const r=this.el.shadowRoot,i=this.constructor,s=i.shadowRootOptions,o=r??(s===yv?this.el:this.el.attachShadow(s));if(r)return ou.prototype.createRenderRoot.call(this),r;if(this.isConnected){const l=o.getRootNode();l.adoptedStyleSheets=[...l.adoptedStyleSheets,...i.elementStyles.map(p=>"styleSheet"in p?p.styleSheet:p)]}return o}shouldUpdate(r){var i;return this.manager.Q=r,((i=Y(this,$v))==null?void 0:i.call(this,r))??!0}update(r){Y(this,Ia)?Pi(this,L0,rW).call(this,r):super.update(r)}listen(r,i,s){const n=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(this.el.addEventListener(r,n,s),()=>this.el.removeEventListener(r,n,s)))}listenOn(r,i,s,n){const o=(s==null?void 0:s.bind(this))??s;this.manager.onLifecycle(()=>(r.addEventListener(i,o,n),()=>r.removeEventListener(i,o,n)))}async componentOnReady(){return await Y(this,yp).promise,this}addController(r){var i;this.M.push(r),!(j4 in r)&&this.renderRoot&&this.el.isConnected&&((i=r.hostConnected)==null||i.call(r))}removeController(r){var i;this.M.splice(this.M.indexOf(r),1),(i=r.controllerRemoved)==null||i.call(r)}},mp=new WeakMap,$v=new WeakMap,xv=new WeakMap,yp=new WeakMap,Ia=new WeakMap,L0=new WeakSet,rW=function(r){try{Y(this,Ia).clear(),this.constructor.K.r(Y(this,Ia),()=>ST(Fc.prototype,this,"update").call(this,r))}catch(i){throw Y(this,Ia).clear(),i}},iW=async function(){var n,o;const r=this.el.G??YH(this.el);r&&await r;const i=[];for(const l of this.M)"triggerLoad"in l?i.push(l.triggerLoad()):i.push(uC(l.hostLoad,l));await Promise.all(i),await((n=this.load)==null?void 0:n.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(l=>l.has(fC)&&this.manager.U()),Y(this,xv).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const s=this.J.filter(l=>{var p;return!((p=l.manager)!=null&&p.loadedCalled)});s.length&&await Promise.allSettled(s.map(async l=>await l.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const l of this.M)"triggerLoaded"in l?l.triggerLoaded():Er(l.hostLoaded,l);(o=this.loaded)==null||o.call(this),Y(this,yp).resolve()},Fc.lumina=!0,Fc);const fve=e=>{let t;const r=s=>{var n;t=new URL(s,((n=globalThis.location)==null?void 0:n.href)||void 0).href},i={...e,getAssetPath(s){var o;const n=new URL(s,t);return n.origin!==((o=globalThis.location)==null?void 0:o.origin)?n.href:n.pathname},setAssetPath:r,customElement(s,n){n.K=i,n.L=s,customElements.get(s)||customElements.define(s,n)}};return r(e.defaultAssetPath),i},Wn=e=>typeof e=="object"&&e!=null?XH(e):e,cD=e=>typeof e=="object"&&e!=null?tW(e):e,QA=xt;let mve=class{constructor(t,r){this._observable=new G0,this._value=t,this._equalityFunction=r}get value(){return Ze(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function Xp(e,t=ej){return new mve(e,t)}function yve(e,t){return Xp(e,t)}function sW(){return new G0}function gve(e){return new Bv(e)}function nW(e){Ze(e)}function vve(e,t){return qa(e,t)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const s1=fve({defaultAssetPath:"https://js.arcgis.com/4.33/map-components/",hydratedAttribute:"hydrated"}),{customElement:J4,getAssetPath:wve,setAssetPath:P8e}=s1;s1.t=nW;s1.o=sW;s1.c=gve;s1.r=vve;const iE=e=>(...t)=>{const r=WH(),i=new e(...t),s=i.exports;HH(r.at(-1));const n=i.component.manager;n.W(i,s),i.watchExports(n.W.bind(n,i)),Qge(i);const o=[i.component,...r].reverse();return V4(o,l=>l===void 0?void 0:bve(i,l,s),s)},bve=(e,{host:t,key:r,isReactive:i},s)=>{var _;const n=t,o=n[r]!==e.exports,l=n[r]!==s,p=s!==e.exports;if(o&&!l&&p&&(n[r]=e.exports),t===e.component){if(i){const E=e.component.manager;l&&E.W(e,n[r]),e.onUpdate($=>{if($.has(r)){const M=n[r];M!==e.exports&&E.W(e,M)}})}e.O=i?void 0:r}const v=(_=e.component.constructor.elementProperties.get(r))==null?void 0:_.readOnly;e.watchExports(()=>{n[r]!==e.exports&&(v?Kge(()=>{n[r]=e.exports}):n[r]=e.exports)})},Li=(e,t)=>{const i=lm().manager;i.onLoaded(()=>i.onLifecycle(()=>Vc(e,t,s.emit)));const s=z4();return s},oW=(e,t)=>r=>_ve(r,e);var gp,Jf,fc;class aW extends G4{constructor(r,i){super(r);Ue(this,gp);Ue(this,Jf);Ue(this,fc);this.Y=new Map,this.A=void 0,Oe(this,Jf,sW());const s=this;Oe(s,fc,i),s.Z(),s.setProvisionalExports(Sve(r,new WeakRef(s),r.M.length-1,s.instance,s.Y),!1),QH(r,n=>{if(n){const o=Qe(()=>r[n],l=>{if(l===s.instance)return;const p=s.instance;s.exports=l,s.instance=l,s.Y.forEach((m,v)=>r.requestUpdate(m,p[v])),Y(s,gp)&&p.destroy(),Oe(s,gp,!1)},{sync:!0});s.onDestroy(o.remove)}},s.exports)}get exports(){return nW(Y(this,Jf)),super.exports}set exports(r){super.exports=r,Y(this,Jf).notify()}Z(){var i;const r=this;r.instance="prototype"in Y(r,fc)&&"declaredClass"in Y(r,fc).prototype?new(Y(r,fc)):Y(i=r,fc).call(i),Oe(r,gp,!0)}hostConnected(){this.exports=this.instance}hostDestroy(){var r,i;Y(this,gp)&&((i=(r=this.instance).destroy)==null||i.call(r))}}gp=new WeakMap,Jf=new WeakMap,fc=new WeakMap;const _ve=iE(aW),Sve=(e,t,r,i,s)=>new Proxy(i,{get:(n,o)=>{const l=n[o];if(typeof o=="symbol"||s.has(o))return l;const p=e.M[r];return p.A=o,V4(e,m=>{if(p.A=void 0,m!==void 0){const v=m.key;s.set(o,v);const _=e.constructor.getPropertyOptions(v),E=o!==v&&v.toLowerCase().includes("disable");Eve(t,_,o,v,E),_.i===void 0&&Tve(_,r,o,E)}},l)}}),Eve=(e,t,r,i,s,n)=>n=Qe(()=>{const o=e.deref();return o===void 0||o.component.manager.destroyed?n=n.remove():o.exports[r]},(o,l)=>{if(!n)return;const p=e.deref().component;p==null||p.requestUpdate(i,s?!l:l),t.c=!1},{sync:!0}),Tve=(e,t,r,i)=>{e.d.get=function(){var n;const s=(n=this.M[t])==null?void 0:n.exports[r];return i?!s:s},e.d.set=function(s){const n=this.M[t];n.A!==r&&(n.exports[r]=i?!s:s)}},$ve=(e,t)=>{const r=t.manager.useRefSync(e);r==null||r.hostDestroy(),r==null||r.Z(),r==null||r.hostConnected()};let jd=class extends Ge{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};a([A({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],jd.prototype,"row",void 0),a([A({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],jd.prototype,"column",void 0),a([A({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],jd.prototype,"rows",void 0),a([A({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],jd.prototype,"columns",void 0),jd=a([P("esri.CameraLayout")],jd);const lW=jd;let Z4=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return dD(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return lo(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+mC(this.range,t-r,i)}minimalMonotonic(t,r,i){return dD(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,s=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(s)?i:s}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function dD(e,t,r,i,s=0,n=!1){return(i-=s)<t?i+=mC(e,t-i):i>r&&(i-=mC(e,i-r)),n&&i===r&&(i=t),i+s}function mC(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const D8e=new Z4(0,2*Math.PI),F8e=new Z4(-Math.PI,Math.PI),xve=new Z4(0,360);let da=class extends Ge.ClonableMixin(ee){constructor(...t){super(...t),this.position=new Je([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new lW}normalizeCtorArgs(t,r,i,s){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const n={position:t};return r!=null&&(n.heading=r),i!=null&&(n.tilt=i),s!=null&&(n.fov=s),n}return t}writePosition(t,r,i,s){const n=t.clone();n.x=bs(t.x||0),n.y=bs(t.y||0),n.z=t.hasZ?bs(t.z||0):t.z,r[i]=n.write({},s)}readPosition(t,r){const i=new Je;return i.read(t,r),i.x=bs(i.x||0),i.y=bs(i.y||0),i.z=i.hasZ?bs(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};a([A({type:Je,json:{write:{isRequired:!0}}})],da.prototype,"position",void 0),a([ye("position")],da.prototype,"writePosition",null),a([pe("position")],da.prototype,"readPosition",null),a([A({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ft((e=>xve.normalize(bs(e))))],da.prototype,"heading",void 0),a([A({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ft((e=>lo(bs(e),-180,180)))],da.prototype,"tilt",void 0),a([A({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Ft((e=>lo(bs(e,55),1,170)))],da.prototype,"fov",void 0),a([A({type:lW,nonNullable:!0,json:{read:!1,write:!1}})],da.prototype,"layout",void 0),da=a([P("esri.Camera")],da);const Ive=da;var yC;let ju=yC=class extends ee{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new yC({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};a([A({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:R3}}}}})],ju.prototype,"rotation",void 0),a([Ft("rotation")],ju.prototype,"castRotation",null),a([A({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:R3}}}}})],ju.prototype,"scale",void 0),a([A({types:tm,json:{read:Ya,write:!0,origins:{"web-scene":{read:Ya,write:{overridePolicy:R3}}}}})],ju.prototype,"targetGeometry",void 0),a([A({type:Ive,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],ju.prototype,"camera",void 0),ju=yC=a([P("esri.Viewpoint")],ju);const fi=ju;function R3(){return{enabled:!this.camera}}let Pa=class extends Te{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(kj((()=>this._refresh()),Wa))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r)}_createNewInstance(t){return new Te(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(s=>!!s);for(const s of r)if(s){if(i(s)){const n=this.indexOf(s,t);n>=0?n!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)t=this._processCollection(t,o);else t=this._processCollection(t,n)}}return t}};a([A()],Pa.prototype,"getCollections",void 0),a([A()],Pa.prototype,"getChildrenFunction",void 0),a([A()],Pa.prototype,"itemFilterFunction",void 0),Pa=a([P("esri.core.CollectionFlattener")],Pa);var gC,Zf;let Ui=(Zf=class extends ee{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new gC({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},gC=Zf,Zf);a([A({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ui.prototype,"cols",void 0),a([A({type:Et,json:{write:!0}})],Ui.prototype,"level",void 0),a([A({type:String,json:{write:!0}})],Ui.prototype,"levelValue",void 0),a([A({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ui.prototype,"origin",void 0),a([A({type:Number,json:{write:!0}})],Ui.prototype,"resolution",void 0),a([A({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ui.prototype,"rows",void 0),a([A({type:Number,json:{write:!0}})],Ui.prototype,"scale",void 0),Ui=gC=a([P("esri.layers.support.LOD")],Ui);let Mve=class{constructor(t,r,i,s,n=void 0){this.id=t,this.level=r,this.row=i,this.col=s,this.extent=n}};var Bu;const pD=new ct({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var Yf;let Di=(Yf=class extends ee{static create(t={}){const{resolutionFactor:r=1,scales:i,size:s=256,spatialReference:n=Ce.WebMercator,numLODs:o=24}=t;if(!Tn(n)){const E=[];if(i)for(let $=0;$<i.length;$++){const M=i[$];E.push(new Ui({level:$,scale:M,resolution:M}))}else{let $=5e-4;for(let M=o-1;M>=0;M--)E.unshift(new Ui({level:M,scale:$,resolution:$})),$*=2}return new Bu({dpi:96,lods:E,origin:new Je(0,0,n),size:[s,s],spatialReference:n})}const l=Is(n),p=t.origin?new Je({x:t.origin.x,y:t.origin.y,spatialReference:n}):new Je(l?{x:l.origin[0],y:l.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),m=96,v=1/(po(n)*39.37*m),_=[];if(i)for(let E=0;E<i.length;E++){const $=i[E],M=$*v;_.push(new Ui({level:E,scale:$,resolution:M}))}else{let E=X0(n)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const $=Math.ceil(o/r);_.push(new Ui({level:0,scale:E,resolution:E*v}));for(let M=1;M<$;M++){const k=E/2**r,N=k*v;_.push(new Ui({level:M,scale:k,resolution:N})),E=k}}return new Bu({dpi:m,lods:_,origin:p,size:[s,s],spatialReference:n})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:r}=this;if(t&&r){const i=Is(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-r.x)<=i.dx}return!1}readOrigin(t,r){return Je.fromJSON({spatialReference:r.spatialReference,...t})}set lods(t){let r=0,i=0;const s=[],n=this._levelToLOD={};t&&(r=-1/0,i=1/0,t.forEach((o=>{s.push(o.scale),r=o.scale>r?o.scale:r,i=o.scale<i?o.scale:i,n[o.level]=o}))),this._set("scales",s),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,r){return[r.cols,r.rows]}writeSize(t,r){r.cols=t[0],r.rows=t[1]}zoomToScale(t){const r=this.scales;if(t<=0)return r[0];if(t>=r.length-1)return r[r.length-1];const i=Math.floor(t),s=i+1;return r[i]/(r[i]/r[s])**(t-i)}scaleToZoom(t){const r=this.scales,i=r.length-1;let s=0;for(;s<i;s++){const n=r[s],o=r[s+1];if(n<=t)return s;if(o===t)return s+1;if(n>t&&o<t)return s+Math.log(n/t)/Math.log(n/o)}return s}tileAt(t,r,i,s){const n=this.lodAt(t);if(!n)return null;let o,l;if(typeof r=="number")o=r,l=i;else if(Jr(r.spatialReference,this.spatialReference))o=r.x,l=r.y,s=i;else{const v=MS(r,this.spatialReference);if(v==null)return null;o=v.x,l=v.y,s=i}const p=n.resolution*this.size[0],m=n.resolution*this.size[1];return s||(s=new Mve(null,0,0,0,Ts())),s.level=t,s.row=Math.floor((this.origin.y-l)/m+.001),s.col=Math.floor((o-this.origin.x)/p+.001),this.updateTileInfo(s),s}updateTileInfo(t,r=Bu.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&r===Bu.ExtrapolateOptions.POWER_OF_TWO){const l=this.lods[this.lods.length-1];l.level<t.level&&(i=l)}if(!i)return;const s=t.level-i.level,n=i.resolution*this.size[0]/2**s,o=i.resolution*this.size[1]/2**s;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=Ts()),t.extent[0]=this.origin.x+t.col*n,t.extent[1]=this.origin.y-(t.row+1)*o,t.extent[2]=t.extent[0]+n,t.extent[3]=t.extent[1]+o}upsampleTile(t){const r=this._upsampleLevels[t.level];return!(!r||r.parentLevel===-1)&&(t.level=r.parentLevel,t.row=Math.floor(t.row/r.factor+.001),t.col=Math.floor(t.col/r.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,r){const i=this.lodAt(r.level);if(i==null)return null;const{resolution:s}=i,n=s*this.size[0],o=s*this.size[1];return t[0]=this.origin.x+r.col*n,t[1]=this.origin.y-(r.row+1)*o,t[2]=t[0]+n,t[3]=t[1]+o,t}lodAt(t){var r;return((r=this._levelToLOD)==null?void 0:r[t])??null}clone(){return Bu.fromJSON(this.write({}))}getCompatibleForVTL(t){if(this.size[0]!==this.size[1]||this.size[0]===256&&t===512)return null;const r=(this.size[0]===512&&t===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===t&&r===0)return this;const i=[],s=this.lods.length-r;for(let n=0;n<s;n++){const o=n+r,{scale:l,resolution:p}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new Ui({level:n,scale:l,resolution:p}))}return new Bu({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];this._upsampleLevels[s.level]={parentLevel:r?r.level:-1,factor:r?r.resolution/s.resolution:0},r=s}}},Bu=Yf,Yf);a([A({type:Number,json:{write:!0}})],Di.prototype,"compressionQuality",void 0),a([A({type:Number,json:{write:!0}})],Di.prototype,"dpi",void 0),a([A({type:String,json:{read:pD.read,write:pD.write,origins:{"web-scene":{read:!1,write:!1}}}})],Di.prototype,"format",void 0),a([A({readOnly:!0})],Di.prototype,"isWrappable",null),a([A({type:Je,json:{write:!0}})],Di.prototype,"origin",void 0),a([pe("origin")],Di.prototype,"readOrigin",null),a([A({type:[Ui],value:null,json:{write:!0}})],Di.prototype,"lods",null),a([A({readOnly:!0})],Di.prototype,"scales",void 0),a([A({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Di.prototype,"size",void 0),a([pe("size",["rows","cols"])],Di.prototype,"readSize",null),a([ye("size",{cols:{type:Et},rows:{type:Et}})],Di.prototype,"writeSize",null),a([A({type:Ce,json:{write:!0}})],Di.prototype,"spatialReference",void 0),Di=Bu=a([P("esri.layers.support.TileInfo")],Di),(function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"})(Di||(Di={}));const U2={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],s=this.values;return i>=r?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},O3={xsmall:544,small:768,medium:992,large:1200};function Cve(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function P3(e,t){return t?U2[e].valueToClassName[t].split(" "):[]}const kve=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=O3}initialize(){this.addHandles(Qe((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),Vi))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!Cve(r)){const i=JSON.stringify(O3,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=O3}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=ws.acquire(),i=ws.acquire();let s,n=!1;for(s in U2){const o=this[s],l=U2[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==l&&(n=!0,this[s]=l,P3(s,o).forEach((p=>i.push(p))),P3(s,l).forEach((p=>r.push(p))))}n&&(this._applyClassNameChanges(r,i),ws.release(r),ws.release(i))}_applyClassNameChanges(r,i){const s=this.container;s&&(i.forEach((n=>s.classList.remove(n))),r.forEach((n=>s.classList.add(n))))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in U2)P3(i,this[i]).forEach((s=>r.classList.remove(s)))}};return a([A()],t.prototype,"breakpoints",null),a([A()],t.prototype,"orientation",void 0),a([A()],t.prototype,"widthBreakpoint",void 0),a([A()],t.prototype,"heightBreakpoint",void 0),t=a([P("esri.views.BreakpointsOwner")],t),t};function Y4(e){return typeof e=="string"?document.getElementById(e):e??null}function hD(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let xp=class extends je{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,Qe)}addWhen(t,r,i={}){return this._installWatch(t,r,i,ks)}addOnCollectionChange(t,r,{initial:i=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([Vc(t,"after-changes",this._createSyncUpdatingCallback(),Wa),Vc(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>r({added:[],removed:o.toArray()}):void 0})],n),Lt((()=>this.removeHandles(n)))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(Lt((()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(hw)||this._set("updating",!1))})),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},s){const n=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,n);const o=s(t,r,i);return this.addHandles(o,n),Lt((()=>this.removeHandles(n)))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),s=Qe(t,i,{sync:!0,equals:()=>!1});return this.addHandles(s,r),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(hw),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(jv((()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(hw))})),hw)}}};a([A({readOnly:!0})],xp.prototype,"updating",void 0),xp=a([P("esri.core.support.UpdatingHandles")],xp);const hw=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(é›·å®—æ°‘) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f_=function(){return f_=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f_.apply(this,arguments)},vC={exports:{}},Mr={},wC={exports:{}},lh={};function uW(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Rve(e,t,r){}function Ove(e,t,r){}var Pve=/javascript\s*\:/img;function Nve(e,t){return Pve.test(t)?"":t}lh.whiteList=uW();lh.getDefaultWhiteList=uW;lh.onAttr=Rve;lh.onIgnoreAttr=Ove;lh.safeAttrValue=Nve;var Lve={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},zm=Lve;function Dve(e,t){e=zm.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,s=0,n=0,o="";function l(){if(!i){var v=zm.trim(e.slice(s,n)),_=v.indexOf(":");if(_!==-1){var E=zm.trim(v.slice(0,_)),$=zm.trim(v.slice(_+1));if(E){var M=t(s,o.length,E,$,v);M&&(o+=M+"; ")}}}s=n+1}for(;n<r;n++){var p=e[n];if(p==="/"&&e[n+1]==="*"){var m=e.indexOf("*/",n+2);if(m===-1)break;n=m+1,s=n+1,i=!1}else p==="("?i=!0:p===")"?i=!1:p===";"?i||l():p===`
`&&l()}return zm.trim(o)}var Fve=Dve,Aw=lh,jve=Fve;function AD(e){return e==null}function Bve(e){var t={};for(var r in e)t[r]=e[r];return t}function cW(e){e=Bve(e||{}),e.whiteList=e.whiteList||Aw.whiteList,e.onAttr=e.onAttr||Aw.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Aw.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Aw.safeAttrValue,this.options=e}cW.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onAttr,n=r.onIgnoreAttr,o=r.safeAttrValue,l=jve(e,function(p,m,v,_,E){var $=i[v],M=!1;if($===!0?M=$:typeof $=="function"?M=$(_):$ instanceof RegExp&&(M=$.test(_)),M!==!0&&(M=!1),_=o(v,_),!!_){var k={position:m,sourcePosition:p,source:E,isWhite:M};if(M){var N=s(v,_,k);return AD(N)?v+":"+_:N}else{var N=n(v,_,k);if(!AD(N))return N}}});return l};var Uve=cW;(function(e,t){var r=lh,i=Uve;function s(o,l){var p=new i(l);return p.process(o)}t=e.exports=s,t.FilterCSS=i;for(var n in r)t[n]=r[n]})(wC,wC.exports);var K4=wC.exports,X4={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},Vve=K4.FilterCSS,zve=K4.getDefaultWhiteList,m_=X4;function dW(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var pW=new Vve;function Gve(e,t,r){}function qve(e,t,r){}function Hve(e,t,r){}function Wve(e,t,r){}function hW(e){return e.replace(Jve,"&lt;").replace(Zve,"&gt;")}function Qve(e,t,r,i){if(r=vW(r),t==="href"||t==="src"){if(r=m_.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(fw.lastIndex=0,fw.test(r))return""}else if(t==="style"){if(fD.lastIndex=0,fD.test(r)||(mD.lastIndex=0,mD.test(r)&&(fw.lastIndex=0,fw.test(r))))return"";i!==!1&&(i=i||pW,r=i.process(r))}return r=wW(r),r}var Jve=/</g,Zve=/>/g,Yve=/"/g,Kve=/&quot;/g,Xve=/&#([a-zA-Z0-9]*);?/gim,e1e=/&colon;?/gim,t1e=/&newline;?/gim,fw=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,fD=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,mD=/u\s*r\s*l\s*\(.*/gi;function AW(e){return e.replace(Yve,"&quot;")}function fW(e){return e.replace(Kve,'"')}function mW(e){return e.replace(Xve,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function yW(e){return e.replace(e1e,":").replace(t1e," ")}function gW(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return m_.trim(t)}function vW(e){return e=fW(e),e=mW(e),e=yW(e),e=gW(e),e}function wW(e){return e=AW(e),e=hW(e),e}function r1e(){return""}function i1e(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:m_.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,l,p){if(i(o))if(p.isClosing){var m="[/removed]",v=p.position+m.length;return s.push([n!==!1?n:p.position,v]),n=!1,m}else return n||(n=p.position),"[removed]";else return t(o,l,p)},remove:function(o){var l="",p=0;return m_.forEach(s,function(m){l+=o.slice(p,m[0]),p=m[1]}),l+=o.slice(p),l}}}function s1e(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var s=e.indexOf("-->",i);if(s===-1)break;r=s+3}return t}function n1e(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}Mr.whiteList=dW();Mr.getDefaultWhiteList=dW;Mr.onTag=Gve;Mr.onIgnoreTag=qve;Mr.onTagAttr=Hve;Mr.onIgnoreTagAttr=Wve;Mr.safeAttrValue=Qve;Mr.escapeHtml=hW;Mr.escapeQuote=AW;Mr.unescapeQuote=fW;Mr.escapeHtmlEntities=mW;Mr.escapeDangerHtml5Entities=yW;Mr.clearNonPrintableCharacter=gW;Mr.friendlyAttrValue=vW;Mr.escapeAttrValue=wW;Mr.onIgnoreTagStripAll=r1e;Mr.StripTagBody=i1e;Mr.stripCommentTag=s1e;Mr.stripBlankChar=n1e;Mr.cssFilter=pW;Mr.getDefaultCSSWhiteList=zve;var sE={},sc=X4;function o1e(e){var t=sc.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=sc.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function a1e(e){return e.slice(0,2)==="</"}function l1e(e,t,r){var i="",s=0,n=!1,o=!1,l=0,p=e.length,m="",v="";e:for(l=0;l<p;l++){var _=e.charAt(l);if(n===!1){if(_==="<"){n=l;continue}}else if(o===!1){if(_==="<"){i+=r(e.slice(s,l)),n=l,s=l;continue}if(_===">"){i+=r(e.slice(s,n)),v=e.slice(n,l+1),m=o1e(v),i+=t(n,i.length,m,v,a1e(v)),s=l+1,n=!1;continue}if(_==='"'||_==="'")for(var E=1,$=e.charAt(l-E);$.trim()===""||$==="=";){if($==="="){o=_;continue e}$=e.charAt(l-++E)}}else if(_===o){o=!1;continue}}return s<e.length&&(i+=r(e.substr(s))),i}var u1e=/[^a-zA-Z0-9\\_:.-]/gim;function c1e(e,t){var r=0,i=0,s=[],n=!1,o=e.length;function l(E,$){if(E=sc.trim(E),E=E.replace(u1e,"").toLowerCase(),!(E.length<1)){var M=t(E,$||"");M&&s.push(M)}}for(var p=0;p<o;p++){var m=e.charAt(p),v,_;if(n===!1&&m==="="){n=e.slice(r,p),r=p+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:p1e(e,p+1);continue}if(n!==!1&&p===i){if(_=e.indexOf(m,p+1),_===-1)break;v=sc.trim(e.slice(i+1,_)),l(n,v),n=!1,p=_,r=p+1;continue}if(/\s|\n|\t/.test(m))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(_=d1e(e,p),_===-1){v=sc.trim(e.slice(r,p)),l(v),n=!1,r=p+1;continue}else{p=_-1;continue}else if(_=h1e(e,p-1),_===-1){v=sc.trim(e.slice(r,p)),v=yD(v),l(n,v),n=!1,r=p+1;continue}else continue}return r<e.length&&(n===!1?l(e.slice(r)):l(n,yD(sc.trim(e.slice(r))))),sc.trim(s.join(" "))}function d1e(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function p1e(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function h1e(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function A1e(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function yD(e){return A1e(e)?e.substr(1,e.length-2):e}sE.parseTag=l1e;sE.parseAttr=c1e;var f1e=K4.FilterCSS,Po=Mr,bW=sE,m1e=bW.parseTag,y1e=bW.parseAttr,V2=X4;function mw(e){return e==null}function g1e(e){var t=V2.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=V2.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=V2.trim(e.slice(0,-1))),{html:e,closing:r}}function v1e(e){var t={};for(var r in e)t[r]=e[r];return t}function w1e(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function _W(e){e=v1e(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Po.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=w1e(e.whiteList||e.allowList):e.whiteList=Po.whiteList,e.onTag=e.onTag||Po.onTag,e.onTagAttr=e.onTagAttr||Po.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Po.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Po.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Po.safeAttrValue,e.escapeHtml=e.escapeHtml||Po.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new f1e(e.css))}_W.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onTag,n=r.onIgnoreTag,o=r.onTagAttr,l=r.onIgnoreTagAttr,p=r.safeAttrValue,m=r.escapeHtml,v=t.cssFilter;r.stripBlankChar&&(e=Po.stripBlankChar(e)),r.allowCommentTag||(e=Po.stripCommentTag(e));var _=!1;r.stripIgnoreTagBody&&(_=Po.StripTagBody(r.stripIgnoreTagBody,n),n=_.onIgnoreTag);var E=m1e(e,function($,M,k,N,U){var G={sourcePosition:$,position:M,isClosing:U,isWhite:Object.prototype.hasOwnProperty.call(i,k)},W=s(k,N,G);if(!mw(W))return W;if(G.isWhite){if(G.isClosing)return"</"+k+">";var Z=g1e(N),ie=i[k],ne=y1e(Z.html,function(ge,we){var xe=V2.indexOf(ie,ge)!==-1,Ie=o(k,ge,we,xe);return mw(Ie)?xe?(we=p(k,ge,we,v),we?ge+'="'+we+'"':ge):(Ie=l(k,ge,we,xe),mw(Ie)?void 0:Ie):Ie});return N="<"+k,ne&&(N+=" "+ne),Z.closing&&(N+=" /"),N+=">",N}else return W=n(k,N,G),mw(W)?m(N):W},m);return _&&(E=_.remove(E)),E};var b1e=_W;(function(e,t){var r=Mr,i=sE,s=b1e;function n(l,p){var m=new s(p);return m.process(l)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s,(function(){for(var l in r)t[l]=r[l];for(var p in i)t[p]=i[p]})();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(vC,vC.exports);var Ch=vC.exports,_1e=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},S1e=(function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=f_(f_({},Ch.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,l,p){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?i.sanitizeUrl(l):Ch.safeAttrValue(n,o,l,p)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!r?s=t:t&&r?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(n){if(n==="whiteList")s.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(n==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(l){return s.css.whiteList[l]=o[l]})}else s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new Ch.FilterXSS(s)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,s=i===void 0?!0:i,n=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",l=/^#/.test(t),p=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||l||p?Ch.escapeAttrValue(t):!n&&!s?Ch.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,s):Ch.safeAttrValue(t,r,i,s)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,s){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(s){Array.isArray(i[s])&&Array.isArray(r[s])?r[s]=r[s].concat(i[s]):r[s]=i[s]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(l,p){var m=i.validate(p,r);return m.isValid?l.concat([p]):(s=!0,l.concat([m.sanitized]))},[]);else if(_1e(t)){var o=Object.keys(t);n=o.reduce(function(l,p){var m=t[p],v=i.validate(m,r);return v.isValid?l[p]=m:(s=!0,l[p]=v.sanitized),l},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e})();const E1e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],T1e=E1e.reduce(((e,t)=>(e[t]=[],e)),{}),$1e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],SW=new S1e({whiteList:T1e,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if($1e.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),EW="http://www.w3.org/",nE=`${EW}2000/svg`,TW=`${EW}1999/xlink`;let gD=[],eO=(e,t)=>{let r={};return Object.keys(e).forEach((i=>{r[i]=e[i]})),t&&Object.keys(t).forEach((i=>{r[i]=t[i]})),r},tO=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),$W=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},x1e=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(tO(e[i],t))return i}return-1},N3=(e,t,r,i)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let l=e[o];if(tO(l,s))throw new Error(`${r.vnodeSelector} had a ${s.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},I1e=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},bC=[],_C=!1,xW=e=>{(e.children||[]).forEach(xW),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},vD=()=>{_C=!1,bC.forEach(xW),bC.length=0},wD=e=>{bC.push(e),_C||(_C=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(vD,{timeout:16}):setTimeout(vD,16))},bD=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),wD(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),wD(e))},M1e=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let l=s[o],p=t[l];if(l==="className")throw new Error('Property "className" is not supported, use "class".');if(l==="class")EC(e,p,!0);else if(l==="classes"){let m=Object.keys(p),v=m.length;for(let _=0;_<v;_++){let E=m[_];p[E]&&e.classList.add(E)}}else if(l==="styles"){let m=Object.keys(p),v=m.length;for(let _=0;_<v;_++){let E=m[_],$=p[E];$&&($W($),r.styleApplyer(e,E,$))}}else if(l!=="key"&&p!=null){let m=typeof p;m==="function"?(l.lastIndexOf("on",0)===0&&(i&&(p=i(l,p,e,t)),l==="oninput"&&(function(){let v=p;p=function(_){v.apply(this,[_]),_.target["oninput-value"]=_.target.value}})()),e[l]=p):r.namespace===nE?l==="href"?e.setAttributeNS(TW,l,p):e.setAttribute(l,p):m==="string"&&l!=="value"?l==="innerHTML"?e[l]=SW.sanitize(p):SC(e)&&l in e?e[l]=p:e.setAttribute(l,p):e[l]=p}}};function SC(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let y_,C1e=(e,t,r)=>{if(t)for(let i of t)Og(i,e,void 0,r)},IW=(e,t,r)=>{C1e(e,t.children,r),t.text&&(e.textContent=t.text),M1e(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},Og=(e,t,r,i)=>{let s,n=0,o=e.vnodeSelector,l=t.ownerDocument;if(o==="")s=e.domNode=l.createTextNode(e.text),r!==void 0?t.insertBefore(s,r):t.appendChild(s);else{for(let p=0;p<=o.length;++p){let m=o.charAt(p);if(p===o.length||m==="."||m==="#"){let v=o.charAt(n-1),_=o.slice(n,p);v==="."?s.classList.add(_):v==="#"?s.id=_:(_==="svg"&&(i=eO(i,{namespace:nE})),i.namespace!==void 0?s=e.domNode=l.createElementNS(i.namespace,_):(s=e.domNode=e.domNode||l.createElement(_),_==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(s,r):s.parentNode!==t&&t.appendChild(s)),n=p+1}}IW(s,e,i)}},EC=(e,t,r)=>{t&&t.split(" ").forEach((i=>{i&&e.classList.toggle(i,r)}))},k1e=(e,t,r,i)=>{if(!r)return;let s=!1,n=Object.keys(r),o=n.length;for(let l=0;l<o;l++){let p=n[l],m=r[p],v=t[p];if(p==="class")v!==m&&(EC(e,v,!1),EC(e,m,!0));else if(p==="classes"){let _=e.classList,E=Object.keys(m),$=E.length;for(let M=0;M<$;M++){let k=E[M],N=!!m[k];N!==!!v[k]&&(s=!0,N?_.add(k):_.remove(k))}}else if(p==="styles"){let _=Object.keys(m),E=_.length;for(let $=0;$<E;$++){let M=_[$],k=m[M];k!==v[M]&&(s=!0,k?($W(k),i.styleApplyer(e,M,k)):i.styleApplyer(e,M,""))}}else if(m||typeof v!="string"||(m=""),p!=="value"||SC(e)){if(m!==v){let _=typeof m;_==="function"&&i.eventHandlerInterceptor||(i.namespace===nE?p==="href"?e.setAttributeNS(TW,p,m):e.setAttribute(p,m):_==="string"?p==="innerHTML"?e[p]=SW.sanitize(m):p==="role"&&m===""?e.removeAttribute(p):SC(e)&&p in e?e[p]=m:e.setAttribute(p,m):e[p]!==m&&(e[p]=m),s=!0)}}else{let _=e[p];_!==m&&(e["oninput-value"]?_===e["oninput-value"]:m!==v)&&(e[p]=m,e["oninput-value"]=void 0),m!==v&&(s=!0)}}return s},R1e=(e,t,r,i,s)=>{if(r===i)return!1;i=i||gD;let n,o=(r=r||gD).length,l=i.length,p=0,m=0,v=!1;for(;m<l;){let _=p<o?r[p]:void 0,E=i[m];if(_!==void 0&&tO(_,E))v=y_(_,E,s)||v,p++;else{let $=x1e(r,E,p+1);if($>=0){for(n=p;n<$;n++)bD(r[n]),N3(r,n,e,"removed");v=y_(r[$],E,s)||v,p=$+1}else Og(E,t,p<o?r[p].domNode:void 0,s),I1e(E),N3(i,m,e,"added")}m++}if(o>p)for(n=p;n<o;n++)bD(r[n]),N3(r,n,e,"removed");return v};y_=(e,t,r)=>{let i=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,s=!0,s}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=eO(r,{namespace:nE})),e.text!==t.text&&(n=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,n=R1e(t,i,e.children,t.children,r)||n,n=k1e(i,e.properties,t.properties,r)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),s};let yw=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,y_(i,r,t)},domNode:e.domNode});const O1e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let Uy=e=>eO(O1e,e),Ic={append:(e,t,r)=>(r=Uy(r),Og(t,e,void 0,r),yw(t,r)),insertBefore:(e,t,r)=>(r=Uy(r),Og(t,e.parentNode,e,r),yw(t,r)),merge:(e,t,r)=>(r=Uy(r),t.domNode=e,IW(e,t,r),yw(t,r)),replace:(e,t,r)=>(r=Uy(r),Og(t,e.parentNode,e,r),e.parentNode.removeChild(e),yw(t,r))},MW,P1e=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};MW=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let N1e=(e,t)=>{let r=e;return t.forEach((i=>{r=r&&r.children?MW(r.children,(s=>s.domNode===i)):void 0})),r},L1e=(e,t,r)=>{let i=function(s){r("domEvent",s);let n=t(),o=P1e(s.currentTarget,n.domNode);o.reverse();let l,p=N1e(n.getLastRender(),o);return e.scheduleRender(),p&&(l=p.properties[`on${s.type}`].apply(p.properties.bind||this,arguments)),r("domEventProcessed",s),l};return(s,n,o,l)=>i},_D=e=>{let t,r,i=Uy(e),s=i.performanceLogger,n=!0,o=!1,l=[],p=[],m=(_,E,$)=>{let M,k=()=>M;i.eventHandlerInterceptor=L1e(t,k,s),M=_(E,$(),i),l.push(M),p.push($)},v=()=>{if(r=void 0,n){n=!1,s("renderStart",void 0);for(let _=0;_<l.length;_++){let E=p[_]();s("rendered",void 0),l[_].update(E),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:v,scheduleRender:()=>{r||o||(r=requestAnimationFrame(v))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(_,E)=>{m(Ic.append,_,E)},insertBefore:(_,E)=>{m(Ic.insertBefore,_,E)},merge:(_,E)=>{m(Ic.merge,_,E)},replace:(_,E)=>{m(Ic.replace,_,E)},detach:_=>{for(let E=0;E<p.length;E++)if(p[E]===_)return p.splice(E,1),l.splice(E,1)[0];throw new Error("renderFunction was not found")}},t},Uu=class extends je{constructor(){super(...arguments),this.items=new Te,this._watchUpdatingTracking=new xp,this._callbacks=new Map,this._projector=_D(),this._hiddenProjector=_D()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(r=>{for(const i of r.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of r.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}}))}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach((t=>this._projector.detach(t))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let s;const n=()=>(s=t.render(),s);i.append(r,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s!=null&&s.domNode){const l=s.domNode.getBoundingClientRect();o.left=l.left,o.top=l.top,o.right=l.right,o.bottom=l.bottom}for(i.detach(n);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),s=this.computeBoundingRect(r);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some((t=>t.visible))}async prepare(){await document.fonts.load(this._fontString()).catch((()=>{}))}renderCanvas(t,r){const i=!!(r!=null&&r.disableDecorations);if(!this.items.some((n=>n.visible&&!(i&&n.isDecoration))))return;const s=t.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach((n=>{i&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())})),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};a([A({readOnly:!0})],Uu.prototype,"surface",void 0),a([A({readOnly:!0})],Uu.prototype,"items",void 0),a([A({readOnly:!0})],Uu.prototype,"needsRender",null),a([A({readOnly:!0})],Uu.prototype,"_watchUpdatingTracking",void 0),a([A({readOnly:!0})],Uu.prototype,"updating",null),Uu=a([P("esri.views.overlay.ViewOverlay")],Uu);const SD=Uu,L3=[0,0];function D1e(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return L3[0]=r.left+((t==null?void 0:t.pageXOffset)??0),L3[1]=r.top+((t==null?void 0:t.pageYOffset)??0),L3}function ED(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function F1e(e){const t=document.createElement("div");return e.appendChild(t),t}const kh=16,Gm=750,j1e=512,B1e=2,U1e=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:kh,time:Gm},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Qe((()=>this.cursor),(i=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",i)})),Qe((()=>this.navigating),(i=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",i.toString())}))])}initialize(){this.addHandles([Qe((()=>this.ui),((r,i)=>this._handleUIChange(r,i)),Vi),this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){var r;this.destroyed||((r=this.ui)==null||r.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),s=Y4(r);if(s||typeof r!="string"||de.getLogger(this).error("#container",`element with id '${r}' not found`),i===s)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(ED(this.root),this._set("root",null)),this.userContent&&(hD(this.userContent,i),ED(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",hD(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,o.appendChild(l),this._set("surface",l);const p=new SD;o.appendChild(p.surface),this._set("overlay",p),this.addHandles(Qe((()=>p.needsRender),(m=>{m&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=A0({render:()=>{var v;return(v=this.overlay)==null?void 0:v.render()}}):this._overlayRenderTaskHandle=vr(this._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const i=this._get("ui");i!==r&&(i==null||i.destroy()),this._set("ui",r)}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,i,s){const n=this.position;return r-=n?n[0]:0,i-=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}containerToPage(r,i,s){const n=this.position;return r+=n?n[0]:0,i+=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(Qe((()=>this.root),(s=>{r.container=s?F1e(s):null}),Vi),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=kh,r.time=Gm;const i=A0({prepare:o=>{const l=this._measure(),p=this._freqInfo;if(p.time+=o.deltaTime,l&&(p.freq=kh,this._get("resizing")||this._set("resizing",!0)),p.time<p.freq)return;p.time=0;const m=this._position();p.freq=m||l?kh:Math.min(Gm,p.freq*B1e),!l&&p.freq>=j1e&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver((o=>{r.freq=kh,r.time=Gm,i.resume()}));this.container!=null&&s.observe(this.container);const n=Lt((()=>s.disconnect()));this.addHandles([U0(window,"resize",(()=>{r.freq=kh,r.time=Gm,i.resume()})),n,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,s=r?r.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return i===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:i,height:s}),!0)}_position(){const r=this.container,i=this.position,s=r&&D1e(r);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return a([A()],t.prototype,"container",null),a([A({readOnly:!0})],t.prototype,"focused",null),a([A({readOnly:!0})],t.prototype,"height",void 0),a([A()],t.prototype,"messagesCommon",void 0),a([A({type:SD})],t.prototype,"overlay",void 0),a([A({readOnly:!0})],t.prototype,"position",void 0),a([A({readOnly:!0})],t.prototype,"resizing",void 0),a([A({readOnly:!0})],t.prototype,"root",void 0),a([A({value:null,readOnly:!0})],t.prototype,"size",null),a([A({readOnly:!0})],t.prototype,"surface",void 0),a([A({readOnly:!0})],t.prototype,"suspended",void 0),a([A({nonNullable:!0})],t.prototype,"ui",null),a([A({readOnly:!0})],t.prototype,"userContent",void 0),a([A({readOnly:!0})],t.prototype,"width",void 0),a([A()],t.prototype,"widthBreakpoint",void 0),t=a([P("esri.views.DOMContainer")],t),t},CW=K("mac")?"Meta":"Control",V1e=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),z1e=e=>V1e.has(e);let G1e=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},yi=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((t=>t.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback((r=>this._handleEvent(r))),t.setUninstallCallback((()=>this._onUninstall())),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let s;typeof r=="function"?(i=r,s=[]):s=r||[];const n=typeof t=="string"?new G1e(t,s):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=v=>{const _=this._incoming[v.match.eventType];if(_){const E=_.indexOf(v);_.splice(E,1),o(),this._manager&&this._manager.updateDependencies()}},p=new q1e(n,i,{onPause:l,onRemove:l,onResume:v=>{const _=this._incoming[v.match.eventType];_&&!_.includes(v)&&(_.push(v),o(),this._manager&&this._manager.updateDependencies())}});let m=this._incoming[n.eventType];return m||(m=[],this._incoming[n.eventType]=m),m.push(p),o(),this._manager&&this._manager.updateDependencies(),p}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new H1e(t,{onEmit:(i,s,n,o)=>{var l;(l=this._manager)==null||l.emit(i.eventType,s,n,o)},onRemove:i=>{var s;delete this._outgoing[i.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var i;const r=this._incoming[t.type];if(r){for(const s of r)if(s.match.matches(t)&&((i=s.callback)==null||i.call(s,t),t.shouldStopPropagation()))break}}},q1e=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},H1e=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},W1e=class extends yi{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",(r=>this._update(r.data)))}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:s}=t;r===this._value&&this._x===i&&this._y===s||(this._value=r,this._x=i,this._y=s,this._onChange(r,i,s))}},Q1e=class extends yi{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Xp(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},J1e=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const s=t[i],n=new wj(s,void 0,void 0,2,2);this._properties[i]={pool:n,acquired:[]}}this._afterDispatchHandle=gee((()=>this._release()))}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)YP(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let s=i.pool.acquire();for(i.acquired.push(s);s===r;)i.acquired.push(s),s=i.pool.acquire();return s}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const s of r.acquired)YP(s)?r.acquired[i++]=s:r.pool.release(s);r.acquired.length=i}}},Un=class extends je{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=CW,this._latestPointerType="mouse",this._propertiesPool=new J1e({latestPointerLocation:K1e},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((t=>t.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=au.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const s={name:t,handlers:r.map((n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[t]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,p,m,v,_)=>{this._emitInputEvent(o.priorityIndex+1,l,p,m,_,v)},setPointerCapture:(l,p)=>{this._setPointerCapture(s,o,l,p)},setEventCallback:l=>{o.eventCallback=l},setUninstallCallback:l=>{o.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach((i=>{var s;i.removed=!0,(s=i.uninstallCallback)==null||s.call(i)})),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):de.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(t.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){t.add(o.eventType);for(const l of o.keyModifiers)z1e(l)||r.add(l)}s.active=n}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const s=this._get("latestPointerLocation");if(s==null||s.x!==r||s.y!==i){const n=this._propertiesPool.get("latestPointerLocation");n.x=r,n.y=i,this._set("latestPointerLocation",n)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const n=r;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,s=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,s)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const s=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},n=(l,p)=>{p&&!this._activeKeyModifiers.has(l)?(s(),this._activeKeyModifiers.add(l)):!p&&this._activeKeyModifiers.has(l)&&(s(),this._activeKeyModifiers.delete(l))};if(t==="key-down"||t==="key-up"){const l=r.key;this._keyModifiers.has(l)&&n(l,t==="key-down")}const o=r.native;n("Alt",!!(o!=null&&o.altKey)),n("Control",!!(o!=null&&o.ctrlKey)),n("Ctrl",!!(o!=null&&o.ctrlKey)),n("Shift",!!(o!=null&&o.shiftKey)),n("Meta",!!(o!=null&&o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new W1e(((t,r,i)=>this._setLatestPointer(t,r,i))),this._multiTouchHandler=new Q1e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],au.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,au.INTERNAL)}_setPointerCapture(t,r,i,s){const n=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((t=>!t.removed)),this.updateDependencies()}_emitInputEventFromSource(t,r,i,s){this._emitInputEvent(0,t,r,i,s)}_emitInputEvent(t,r,i,s,n,o){const l=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),p=n!==void 0&&n,m={event:new Z1e(r,i,l,o||this._activeKeyModifiers,p),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(m):this._doNewPropagation(m)}_doNewPropagation(t){this._currentPropagation={events:new nv,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,i,s;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:n,priorityIndex:o}=t.events.pop(),l=(r=n.data)==null?void 0:r.eventId;if(!(l!=null&&this._stoppedPropagationEventIds.has(l)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!n.shouldStopPropagation()&&((s=(i=t.currentHandler).eventCallback)==null||s.call(i,n)),n.shouldStopPropagation()){l!=null&&this._stoppedPropagationEventIds.add(l);break}if(n.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:n,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new nv;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const s of r.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const n=i.keyModifiers.filter((o=>s.keyModifiers.includes(o)));if(n.length===i.keyModifiers.length!=(n.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let s=0;for(;s<r.length&&this._compareHandlerPriority(i,r[s])>=0;)s++;r.splice(s,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t((()=>this._onEventReceived(r,i)))},disablePointerCapture:t}}};a([A({readOnly:!0})],Un.prototype,"hasPendingInputs",null),a([A({constructOnly:!0})],Un.prototype,"eventSource",void 0),a([A({constructOnly:!0})],Un.prototype,"recognizers",void 0),a([A()],Un.prototype,"_latestPointerType",void 0),a([A()],Un.prototype,"latestPointerType",null),a([A()],Un.prototype,"multiTouchActive",null),a([A({readOnly:!0})],Un.prototype,"latestPointerLocation",void 0),a([A()],Un.prototype,"_paused",void 0),a([A({readOnly:!0})],Un.prototype,"updating",null),Un=a([P("esri.views.input.InputManager")],Un);let Z1e=class{constructor(t,r,i,s,n){this.type=t,this.data=r,this.timestamp=i,this.modifiers=s,this.cancelable=n,this._propagationState=nc.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=nc.STOPPED}shouldStopPropagation(){return(this._propagationState&nc.STOPPED)!==0}defer(t){this._propagationState|=nc.PAUSED;const r=(i,s)=>{this._propagationState&=~nc.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw i;return i};return(typeof t=="function"?t():t).then((i=>r(i,!1)),(i=>r(i,!0)))}shouldPausePropagation(t){return!!(this._propagationState&nc.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var nc;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(nc||(nc={}));const au={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let Y1e=class{};const K1e=Y1e;function ku(e){return e!=null&&"open"in e&&"declaredClass"in e}function TD(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const X1e=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Qe((()=>[this.ui,this.popup]),(([r,i],s)=>{const n="popup",o="manual";if(s){const[l,p]=s;l&&ku(p)&&(p.view=null,TD(p)&&(l.remove(p,n),p!==i&&i&&p.destroy()))}r&&ku(i)&&(i.view=this,TD(i)&&r.add(i,{key:n,position:o,internal:!0}))}),vs),this.on("click",(r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(ku(this.popup)?this.popup.viewModel.handleViewClick(r):r.defer((async()=>{await this.setupPopup(),ku(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)})))}),au.WIDGET)]),Qv((()=>this.ready&&this.popupEnabled&&!this.updating)).then((()=>{ce(()=>import("./Popup-CaNNh6jG.js").then(r=>r.P),__vite__mapDeps([191,17,192,22,193,194,176,35,195,196,189,85,83,84,11,10,12,6,197,198,130,199]),import.meta.url)}))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(ku(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void de.getLogger(this).error(new Q("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),ku(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!ku(this.popup))return this._popupSetupTask=GS((async i=>{const{default:s}=await ce(()=>import("./Popup-CaNNh6jG.js").then(o=>o.P),__vite__mapDeps([191,17,192,22,193,194,176,35,195,196,189,85,83,84,11,10,12,6,197,198,130,199]),import.meta.url);if(dr(i),!this.popup||ku(this.popup))return;const n=this.popup;delete n.open,delete n.close,this.popup=new s(n)})),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},s){const n=[],o=[];let l=!1;const p=JX(s,K("popup-view-fetch-timeout")??twe),m=E=>{const $=new ewe(E);return o.push($),n.push($.promise),$},v=E=>{const $=o.at(-1);return $&&$.layerView===E&&!l?$:m(E)};for(const E of i)"graphic"in E?(v(E.layerView).graphics.push(E.graphic),l=!1):(n.push(E.layerView.fetchPopupFeaturesAtLocation(E.mapPoint,p)),l=!0);o.map((E=>E.resolve(p)));const _=QX(n).then((E=>E.filter(($=>!!$)).flat()));return{pendingFeatures:n,allGraphicsPromise:_,location:r}}async _getPopupHits(r,i){const{hits:s,location:n}=await this.popupHitTest(r);dr(i);const o=[];for(const l of s)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,i)){const p=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;o.push({graphic:l.graphic,layerView:p})}}else this._isValidPopupLocationLayerView(l.layerView)&&o.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:o,location:n}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i==null?void 0:i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return a([A()],t.prototype,"popup",void 0),a([A()],t.prototype,"popupEnabled",void 0),t=a([P("esri.views.PopupView")],t),t};let ewe=class{constructor(t){this.layerView=t,this._resolver=Cn(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:s}=this;if(!r)return s.resolve(i),s.promise;let n;return r.fetchPopupFeaturesFromGraphics(i,t).catch((o=>(n=o,null))).then((o=>{o?s.resolve(o):s.reject(n)})),s.promise}};const twe=5e3;async function oE(e,t){return await e.load(),rwe(e,t)}async function rwe(e,t){const r=[],i=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?i(...o):Te.isCollection(o)?o.forEach((l=>i(l))):os.isLoadable(o)&&r.push(o))};t(i);let s=null;if(await Vpe(r,(async n=>{const o=await zS(iwe(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)})),s)throw s.error;return e}function iwe(e){return"loadAll"in e&&typeof e.loadAll=="function"}async function swe(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await yG("esri/t9n/basemaps");return r[e]||r[t]}const M0={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Or("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Or("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Or("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Or("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Or("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Or("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};let bl=class extends je{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const t=this.language;let r=t==="local"||t==="global"?t:gG(t??sn())??"global";return r=r==="no"?"nb":r,r}};a([A()],bl.prototype,"apiKey",void 0),a([A()],bl.prototype,"id",void 0),a([A()],bl.prototype,"language",void 0),a([A()],bl.prototype,"places",void 0),a([A()],bl.prototype,"serviceUrl",void 0),a([A()],bl.prototype,"worldview",void 0),bl=a([P("esri.support.BasemapStyle")],bl);const nwe=bl,owe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),kW=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),awe=new Set([...kW,"link-chart"]);function lwe(e){switch(e.layerContainerType){case"basemap":return owe;case"operational-layers":return e.origin==="link-chart"?awe:kW;default:return null}}function uwe(e,t){if(t.restrictedWebMapWriting){const r=lwe(t);return r==null||r.has(e.type)&&!qS(e)}return!0}function cwe(e,t){var r;if(t)if(qS(e)){const i=uS("featureCollection.layers",t),s=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;s&&$D(e,s)}else e.type!=="group"&&$D(e,t)}function $D(e,t){"maxScale"in e&&(t.maxScale=$b(e.maxScale)??void 0),"minScale"in e&&(t.minScale=$b(e.minScale)??void 0)}function dwe(e,t){if(cwe(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=$b(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(qS(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function TC(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new Q("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(qS(e)&&!e.isTable)t=e.resourceInfo;else if(uwe(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&dwe(e,t=H(t)),t}var Vy;let pwe=0,yn=Vy=class extends ee.JSONSupportMixin(os){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+pwe++,this.baseLayers=new Te,this.referenceLayers=new Te;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&de.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",(i=>t(i.item))),this.referenceLayers.on("after-add",(i=>t(i.item))),this.baseLayers.on("after-remove",(i=>r(i.item))),this.referenceLayers.on("after-remove",(i=>r(i.item)))])}initialize(){this.when().catch((e=>{de.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=cr(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",uu(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach((s=>{const n=TC(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&i.push(n)})),this.referenceLayers.forEach((s=>{const n=TC(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&(s.type!=="scene"&&(n.isReference=!0),i.push(n))}))),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",uu(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return oE(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map((t=>hb(t)?t.clone():t)),referenceLayers:this.referenceLayers.map((t=>hb(t)?t.clone():t))};return this.loaded&&(e.loadStatus="loaded"),new Vy({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((i=>{const s=H(i);return s.url&&Qa(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&Qa(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s}))),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;dr(e);const s=[];if(t){const n=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;s.push(swe(o).then((l=>{l&&this.read({title:l},t.context)})))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,r){var p,m;const i=(p=this.resourceInfo)==null?void 0:p.context,s=((m=this.portalItem)==null?void 0:m.portal)||(i==null?void 0:i.portal)||null,n=Awe[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await ce(async()=>{const{populateOperationalLayers:v}=await import("./layersCreator-D-MkJNrY.js");return{populateOperationalLayers:v}},__vite__mapDeps([200,29,28,27,30,26]),import.meta.url),l=[];if(dr(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const v={context:{...i,origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},_=M=>n==="web-scene"&&M.layerType==="ArcGISSceneServiceLayer"||M.isReference,E=o(this.baseLayers,e.baseMapLayers.filter((M=>!_(M))),v);l.push(E);const $=o(this.referenceLayers,e.baseMapLayers.filter(_),v);l.push($)}await Promise.allSettled(l)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),s=mi(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:hwe[e.type||""]??"web-map",portal:e.portal||me.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||me.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,n=e.apiKey??Pt.apiKeys.basemapStyles,[o,l]=await Promise.all([(await Nt(i,{query:{token:n},signal:t==null?void 0:t.signal})).data,(await Nt(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:n},signal:t==null?void 0:t.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=o.thumbnailUrl);const p=mi(s);if(this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:p}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:l.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,p,t),n)for(const m of[...this.baseLayers,...this.referenceLayers])"apiKey"in m&&(m.apiKey=n)}static fromId(e){const t=M0[e];return t?t.itemId?new Vy({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):Vy.fromJSON(t,t.is3d?{origin:"web-scene",portal:new me({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}};a([A({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Te}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],yn.prototype,"baseLayers",null),a([A({type:String,json:{origins:{"web-scene":{write:!0}}}})],yn.prototype,"id",void 0),a([A({type:et})],yn.prototype,"portalItem",void 0),a([A()],yn.prototype,"referenceLayers",null),a([A({readOnly:!0})],yn.prototype,"resourceInfo",void 0),a([A({type:Ce})],yn.prototype,"spatialReference",void 0),a([A({type:nwe})],yn.prototype,"style",void 0),a([A()],yn.prototype,"thumbnailUrl",void 0),a([A({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],yn.prototype,"title",void 0),a([ye("title")],yn.prototype,"writeTitle",null),yn=Vy=a([P("esri.Basemap")],yn);const hwe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Awe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Pg=yn,fwe=Object.freeze(Object.defineProperty({__proto__:null,default:Pg},Symbol.toStringTag,{value:"Module"}));var $C;let z2=$C=class extends ee{constructor(e){super(e),this.type="none"}clone(){return new $C({type:this.type})}};a([Ne({none:"none",stayAbove:"stay-above"}),A({json:{write:{isRequired:!0}}})],z2.prototype,"type",void 0),z2=$C=a([P("esri.ground.NavigationConstraint")],z2);const mwe=Symbol("GroundInstance");var xD,xC,j9;let _l=xC=(j9=class extends ee.JSONSupportMixin(os){constructor(e){super(e),this[xD]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Te;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&de.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",(i=>t(i.item))),this.layers.on("after-remove",(i=>r(i.item)))])}initialize(){this.when().catch((e=>{zi(e)||de.getLogger(this).error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)cr(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get layers(){return this._get("layers")}set layers(e){this._set("layers",uu(e,this._get("layers")))}writeLayers(e,t,r,i){const s=[];e&&(i={...i,layerContainerType:"ground"},e.forEach((n=>{if("write"in n){const o={};iX(n)().write(o,i)&&s.push(o)}else i!=null&&i.messages&&i.messages.push(new Q("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))}))),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return oE(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await ce(()=>import("./ElevationQuery-CdLkQXD5.js"),[],import.meta.url);dr(t);const i=new r,s=this.layers.filter(ID).toArray();return i.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await ce(()=>import("./ElevationQuery-CdLkQXD5.js"),[],import.meta.url);dr(t);const i=new r,s=this.layers.filter(ID).toArray();return i.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:H(this.surfaceColor),navigationConstraint:H(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new xC({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=(t==null?void 0:t.origin)||"web-scene",s=(t==null?void 0:t.portal)||null,n=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await ce(async()=>{const{populateOperationalLayers:p}=await import("./layersCreator-D-MkJNrY.js");return{populateOperationalLayers:p}},__vite__mapDeps([200,29,28,27,30,26]),import.meta.url);dr(r);const l=[];if(e.layers&&Array.isArray(e.layers)){const p={context:{origin:i,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};l.push(o(this.layers,e.layers,p))}await Promise.allSettled(l)}},xD=mwe,j9);function ywe(e){return e&&"createElevationSampler"in e}function ID(e){return e.type==="elevation"||ywe(e)}a([A({json:{read:!1,write:{isRequired:!0}}})],_l.prototype,"layers",null),a([ye("layers")],_l.prototype,"writeLayers",null),a([A({readOnly:!0})],_l.prototype,"resourceInfo",void 0),a([A({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Et,read:{reader:sv,source:"transparency"},write:{writer:(e,t)=>{t.transparency=RS(e)},target:"transparency"}}})],_l.prototype,"opacity",void 0),a([A({type:Ke,json:{type:[Et],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],_l.prototype,"surfaceColor",void 0),a([A({type:z2,json:{write:!0}})],_l.prototype,"navigationConstraint",void 0),_l=xC=a([P("esri.Ground")],_l);const g_=_l;function gwe(e){return e&&"getAtOrigin"in e&&"originOf"in e}function IC(e){return rO[vwe(e)]||bwe}function vwe(e){return e.type==="json"?"application/json":e.type==="blob"?e.blob.type:wwe(e.url)}function wwe(e){const t=hV(e);return MC[t]||RW}const rO={},RW="text/plain",bwe=rO[RW],MC={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const e in MC)rO[MC[e]]=e;function _we(e){const t=(e==null?void 0:e.origins)??[void 0];return(r,i)=>{const s=Swe(e,r,i);for(const n of t){const o=Zk(r,n,i);for(const l in s)o[l]=s[l]}}}function Swe(e,t,r){if((e==null?void 0:e.type)==="resource")return Ewe(e,t,r);switch((e==null?void 0:e.type)??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:i,write:s}=zne;return{read:i,write:s}}}}function Ewe(e,t,r){var s,n;const i=Dv(t,r);return{type:String,read:(o,l,p)=>{const m=TS(o,l,p);return i.type===String?m:typeof i.type=="function"?new i.type({url:m}):void 0},write:{isRequired:(n=(s=i.json)==null?void 0:s.write)==null?void 0:n.isRequired,writer(o,l,p,m){if(!(m!=null&&m.resources))return typeof o=="string"?void(l[p]=zp(o,m)):void(l[p]=o.write({},m));const v=xwe(o),_=zp(v,{...m,verifyItemRelativeUrls:m!=null&&m.verifyItemRelativeUrls?{writtenUrls:m.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},g0.NO),E=i.type!==String&&(!gwe(this)||(m==null?void 0:m.origin)&&this.originIdOf(r)>tu(m.origin)),$={object:this,propertyName:r,value:o,targetUrl:_,dest:l,targetPropertyName:p,context:m,params:e};m!=null&&m.portalItem&&_&&!nn(_)?E&&(e!=null&&e.contentAddressed)?CC($):E?Twe($):$we($):m!=null&&m.portalItem&&(_==null||gV(_)!=null||K0(_)||E)?CC($):l[p]=_}}}}function CC(e){var M;const{targetUrl:t,params:r,value:i,context:s,dest:n,targetPropertyName:o}=e;if(!s.portalItem)return;const l=vV(t),p=PW(i,t,s);if(r!=null&&r.contentAddressed&&p.type!=="json")return void((M=s.messages)==null?void 0:M.push(new Q("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${p.type} with content addressing. Content addressing is only supported for json resources.`,{content:p})));const m=r!=null&&r.contentAddressed&&p.type==="json"?R4(p.jsonString):(l==null?void 0:l.filename)??sm(),v=Up((r==null?void 0:r.prefix)??(l==null?void 0:l.prefix),m),_=`${v}.${IC(p)}`;if(r!=null&&r.contentAddressed&&s.resources&&p.type==="json"){const k=s.resources.toKeep.find((({resource:N})=>N.path===_))??s.resources.toAdd.find((({resource:N})=>N.path===_));if(k)return void(n[o]=k.resource.itemRelativeUrl)}const E=s.portalItem.resourceFromPath(_);K0(t)&&s.resources&&s.resources.pendingOperations.push(Cne(t).then((k=>{E.path=`${v}.${IC({type:"blob",blob:k})}`,n[o]=E.itemRelativeUrl})).catch((()=>{})));const $=(r==null?void 0:r.compress)??!1;s.resources&&OW({...e,resource:E,content:p,compress:$,updates:s.resources.toAdd}),n[o]=E.itemRelativeUrl}function Twe(e){const{context:t,targetUrl:r,params:i,value:s,dest:n,targetPropertyName:o}=e;if(!t.portalItem)return;const l=t.portalItem.resourceFromPath(r),p=PW(s,r,t),m=IC(p),v=hV(l.path),_=(i==null?void 0:i.compress)??!1;m===v?(t.resources&&OW({...e,resource:l,content:p,compress:_,updates:t.resources.toUpdate}),n[o]=r):CC(e)}function $we({context:e,targetUrl:t,dest:r,targetPropertyName:i}){e.portalItem&&e.resources&&(e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(t),compress:!1}),r[i]=t)}function OW({object:e,propertyName:t,updates:r,resource:i,content:s,compress:n}){const o=l=>{Iwe(e,t,l)};r.push({resource:i,content:s,compress:n,finish:o})}function PW(e,t,r){return typeof e=="string"?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(r))}}function xwe(e){return e==null?null:typeof e=="string"?e:e.url}function Iwe(e,t,r){typeof e[t]=="string"?e[t]=r.url:e[t].url=r.url}let G2=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.color=null}};a([A({type:Ke,json:{type:[Et],write:!0}})],G2.prototype,"color",void 0),G2=a([P("esri.effects.FocusAreaOutline")],G2);const Mwe=G2;var q2;let kC=q2=class extends ee.JSONSupportMixin(Te.ofType(ur)){constructor(e){super(e)}clone(){return new q2(this.items.map((e=>e.clone())))}write(e,t){return this.toJSON(t)}toJSON(e){var r;const t=(r=e==null?void 0:e.layer)==null?void 0:r.spatialReference;return t?this.toArray().map((i=>{var n;if(!t.equals(i.spatialReference)){if(!co(i.spatialReference,t))return(n=e==null?void 0:e.messages)==null||n.push(new kn("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;const o=new ur;Bq(i,o,t),i=o}const s=i.toJSON(e);return delete s.spatialReference,s})).filter((i=>i!=null)):this.toArray().map((i=>i.toJSON(e)))}static fromJSON(e,t){const r=new q2;return e.forEach((i=>r.add(ur.fromJSON(i,t)))),r}};kC=q2=a([P("esri.layers.support.PolygonCollection")],kC);const Ng=kC;let Sl=class extends ee.JSONSupportMixin(Ge){constructor(t){super(t),this.id=`focusarea-${sm()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new Ng}readGeometries(t,r,i){var s,n;Array.isArray(t)?this.geometries=Ng.fromJSON(t,i):(n=(s=i.hooks)==null?void 0:s.onAfterLoad)==null||n.call(s,(()=>this._loadGeometries(nh(t,i),i)))}async _loadGeometries(t,r){const i=await Nt(t,{responseType:"json"});this.geometries=Ng.fromJSON(i.data,r)}};a([A({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),A()],Sl.prototype,"id",void 0),a([A({type:String,json:{write:!0}})],Sl.prototype,"title",void 0),a([A({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Sl.prototype,"enabled",void 0),a([A({type:Mwe,json:{write:!0}})],Sl.prototype,"outline",void 0),a([A({type:Ng,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:e=>new Ng(e.items.map((t=>t.clone())))}),_we({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Sl.prototype,"geometries",void 0),a([pe(["web-scene","portal-item"],"geometries")],Sl.prototype,"readGeometries",null),Sl=a([P("esri.effects.FocusArea")],Sl);const Cwe=Sl;let zy=class extends ee.JSONSupportMixin(Ge){constructor(t){super(t),this.areas=new Te,this.style="bright"}};a([A({type:Te.ofType(Cwe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:e=>new Te(e.items.map((t=>t.clone())))})],zy.prototype,"areas",void 0),a([A({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],zy.prototype,"style",void 0),zy=a([P("esri.effects.FocusAreas")],zy);const NW=zy;function kwe(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function Rwe(e){var t,r;return!(!kwe(e)||!((r=(t=Ype(e))==null?void 0:t.operations)!=null&&r.supportsEditing)||"editingEnabled"in e&&!Xpe(e)||u4(e))}function n6e(e,t){var i;const r=e.allLayerViews.find((s=>s.uid===t));return(r==null?void 0:r.layer.parent)===((i=e.map)==null?void 0:i.basemap)}function Owe(e){let t=null;const r=Dwe(e),i=!(r!=null&&r.baseLayers.length);for(const s in M0){const n=Bwe(r,LW(M0[s]),{mustMatchReferences:i});if(n==="equal"){t=s;break}n==="base-layers-equal"&&(t=s)}return t}function o6e(e){return!!(e!=null&&e.baseLayers.concat(e.referenceLayers).some(Pwe))}function Pwe(e){if(MD(e.url))return!0;if(e.type==="vector-tile")for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(MD(r==null?void 0:r.sourceUrl))return!0}return!1}function Nwe(e,t){var n;if(t==null||e==null)return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const r=t.baseLayers.at(0);switch(r.loadStatus){case"not-loaded":r.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const i=(("supportedSpatialReferences"in r?r.supportedSpatialReferences:null)||["tileInfo"in r?(n=r.tileInfo)==null?void 0:n.spatialReference:r.spatialReference]).filter(Boolean),s=e.spatialReference;return s?{spatialReference:i.find((o=>s.equals(o)))??i[0]??null,updating:!1}:{spatialReference:i[0],updating:!1}}const Lwe=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function MD(e){if(!e)return!1;const t=new kc(en(e));return!!t.authority&&Lwe.test(t.authority)}function Dwe(e){return e?!e.loaded&&e.resourceInfo?LW(e.resourceInfo.data):{baseLayers:CD(e.baseLayers),referenceLayers:CD(e.referenceLayers)}:null}function CD(e){return(Te.isCollection(e)?e.toArray():e).map(Fwe)}function Fwe(e){var t,r;return{type:e.type,effect:"effect"in e?e.effect:void 0,url:DW("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||e.sublayers==null||(t=e.sublayers)==null?void 0:t.map((i=>({id:i.id,visible:i.visible}))),activeLayerId:e.type==="wmts"?(r=e.activeLayer)==null?void 0:r.id:void 0}}function kD(e){return e.isReference||e.layerType==="ArcGISSceneServiceLayer"}function LW(e){return e?{baseLayers:RD((e.baseMapLayers??[]).filter((t=>!kD(t)))),referenceLayers:RD((e.baseMapLayers??[]).filter((t=>kD(t))))}:null}function RD(e){return e.map((t=>jwe(t)))}function jwe(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:DW(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function Bwe(e,t,r){return e!=null!=(t!=null)?"not-equal":!e||!t?"equal":OD(e.baseLayers,t.baseLayers)?OD(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function OD(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Uwe(e[r],t[r]))return!1;return!0}function Uwe(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity||!Cde(e.effect,t.effect))return!1;if(e.activeLayerId!=null||t.activeLayerId!=null)return e.activeLayerId===t.activeLayerId;if(e.sublayers!=null||t.sublayers!=null){if(e.sublayers==null||t.sublayers==null||e.sublayers.length!==t.sublayers.length)return!1;for(let r=0;r<e.sublayers.length;r++){const i=e.sublayers.at(r),s=t.sublayers.at(r);if((i==null?void 0:i.id)!==(s==null?void 0:s.id)||(i==null?void 0:i.visible)!==(s==null?void 0:s.visible))return!1}}return!0}function DW(e){return e?no(e).replace(/^\s*https?:/i,"").toLowerCase():""}function FW(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const r=Owe(e);return r?M0[r].thumbnailUrl:nj(e.baseLayers,Vwe)}function Vwe(e){var t;return"portalItem"in e?(t=e.portalItem)==null?void 0:t.thumbnailUrl:void 0}const D3=()=>de.getLogger("esri.support.basemapUtils");function zwe(){return{}}function jW(e){for(const t in e){const r=e[t];cr(r),delete e[t]}}function H2(e,t){let r;if(typeof e=="string"){const i=e in M0,s=!i&&e.includes("/");if(!i&&!s){if(yx())D3().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(M0).filter((([o,l])=>l.classic||l.is3d)).map((([o])=>`"${o}"`)).sort().join(", ");D3().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`)}return null}t&&(r=t[e]),r||(r=i?Pg.fromId(e):new Pg({style:{id:e}}),t&&(t[e]=r))}else r=Br(Pg,e);return r!=null&&r.destroyed&&(D3().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function Gwe(e){return new Pa({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function F3(e){for(const t of e.values())t==null||t.destroy();e.clear()}const PD={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function qwe(e){let t=null;if(typeof e=="string")if(e in PD){const r=PD[e];t=new g_({resourceInfo:{data:{layers:[r]}}})}else de.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Br(g_,e);return t}function RC(e,t,r){let i,s;if(e)for(let n=0,o=e.length;n<o;n++){if(i=e.at(n),(i==null?void 0:i[t])===r)return i;if((i==null?void 0:i.type)==="group"&&(s=RC(i.layers,t,r),s))return s}}const Hwe=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new Te;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||de.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",(o=>{if(o.item===this)return o.preventDefault(),void de.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)})),this.layers.on("after-add",(o=>s(o.item))),this.layers.on("after-remove",(o=>n(o.item)))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",uu(r,this._get("layers")))}add(r,i){const s=this.layers;if(i=s.getNextIndex(i),r instanceof br){const n=r;n.parent===this?this.reorder(n,i):s.add(n,i)}else Xa(r)?r.then((n=>{this.destroyed||this.add(n,i)})):de.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const s=this.layers;let n=s.getNextIndex(i);r.slice().forEach((o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)}))}findLayerById(r){return RC(this.layers,"id",r)}findLayerByUid(r){return RC(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return a([A()],t.prototype,"layers",null),t=a([P("esri.support.LayersMixin")],t),t},Wwe=new Set(["feature","subtype-group"]);function OC(e,t,r){if(e)for(let i=0,s=e.length;i<s;i++){const n=e.at(i);if(n[t]===r)return n;if((n==null?void 0:n.type)==="group"){const o=OC(n.tables,t,r);if(o)return o}}}const Qwe=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new Te,this.addHandles([this.tables.on("after-add",(i=>{const s=i.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,Wwe.has(s.type)||de.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(i=>{i.item.parent=null}))])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",uu(r,this._get("tables")))}findTableById(r){return OC(this.tables,"id",r)}findTableByUid(r){return OC(this.tables,"uid",r)}};return a([A()],t.prototype,"tables",null),t=a([P("esri.support.TablesMixin")],t),t};let Vn=class extends Qwe(Hwe(el.EventedMixin(je))){constructor(t){super(t),this.allLayers=new Pa({getCollections:()=>{var r,i,s;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.focusAreas=new NW,this.allTables=Gwe(this),this.basemap=null,this.editableLayers=new Pa({getCollections:()=>[this.allLayers],itemFilterFunction:Rwe}),this.ground=new g_,this._basemapCache=zwe()}destroy(){jW(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=cr(this.basemap),cr(this.ground),this._set("ground",null)}castBasemap(t){return H2(t,this._basemapCache)}castGround(t){return qwe(t)??this._get("ground")}findLayerById(t){return this.allLayers.find((r=>r.id===t))}findTableById(t){return this.allTables.find((r=>r.id===t))}};a([A({readOnly:!0,dependsOn:[]})],Vn.prototype,"allLayers",void 0),a([A({type:NW,nonNullable:!0,json:{write:{overridePolicy:e=>({enabled:e.areas.length>0,ignoreOrigin:!0})}}})],Vn.prototype,"focusAreas",void 0),a([A({readOnly:!0})],Vn.prototype,"allTables",void 0),a([A({type:Pg,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Vn.prototype,"basemap",void 0),a([Ft("basemap")],Vn.prototype,"castBasemap",null),a([A({readOnly:!0})],Vn.prototype,"editableLayers",void 0),a([A({type:g_,nonNullable:!0})],Vn.prototype,"ground",void 0),a([Ft("ground")],Vn.prototype,"castGround",null),a([A()],Vn.prototype,"undoRedo",void 0),Vn=a([P("esri.Map")],Vn);const BW=Vn;let Lg=class extends Te{constructor(t){super(t),this.addHandles([this.on("before-add",(r=>{r.item==null&&r.preventDefault()})),this.on("after-add",(r=>this._own(r.item))),this.on("after-remove",(r=>this._release(r.item)))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Te.ofType(this.itemType.Type))(t):new Te(t)}};function ND(e,t){return{type:e,cast:bz,set(r){const i=uu(r,this._get(t),e);i.owner=this,this._set(t,i)}}}a([A()],Lg.prototype,"owner",null),Lg=a([P("esri.core.support.OwningCollection")],Lg);let v_=class extends Lg{constructor(t){super(t),this.addHandles(this.on("before-add",(r=>{r.item!=null&&r.item.parent===this.owner&&(de.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())})))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};v_=a([P("esri.support.AnalysesCollection")],v_);let Dg=class extends Lg{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};a([eR({Type:Sr,ensureType:Br(Sr)})],Dg.prototype,"itemType",void 0),Dg=a([P("esri.support.GraphicsCollection")],Dg);let Vu=class extends je{constructor(t){super(t),this.view=null,this.baseLayerViews=new Te,this.referenceLayerViews=new Te,this._loadingHandle=Qe((()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap}),(r=>{r&&r.load().catch((()=>{}))}),Vi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){var t;return((t=this.view)==null?void 0:t.suspended)??!0}get updating(){var r,i,s;if((r=this.view)!=null&&r.suspended)return!1;const t=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap;return!!(t!=null&&t.loaded)&&(this.baseLayerViews.some((n=>n.updating))||this.referenceLayerViews.some((n=>n.updating)))}};a([A({constructOnly:!0})],Vu.prototype,"view",void 0),a([A({readOnly:!0})],Vu.prototype,"baseLayerViews",void 0),a([A({readOnly:!0})],Vu.prototype,"referenceLayerViews",void 0),a([A({readOnly:!0})],Vu.prototype,"suspended",null),a([A({type:Boolean,readOnly:!0})],Vu.prototype,"updating",null),Vu=a([P("esri.views.BasemapView")],Vu);const Jwe=Vu;let gn=class extends je{constructor(t){super(t),this.factor=1.5,this.offset=Oi(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};a([A({type:Number})],gn.prototype,"factor",void 0),a([A({nonNullable:!0})],gn.prototype,"offset",void 0),a([A()],gn.prototype,"position",void 0),a([A({type:Number,range:{min:0}})],gn.prototype,"size",void 0),a([A()],gn.prototype,"maskUrl",void 0),a([A()],gn.prototype,"maskEnabled",void 0),a([A()],gn.prototype,"overlayUrl",void 0),a([A()],gn.prototype,"overlayEnabled",void 0),a([A({readOnly:!0})],gn.prototype,"version",null),a([A({type:Boolean})],gn.prototype,"visible",void 0),gn=a([P("esri.views.Magnifier")],gn);const UW=gn;let W2=class{constructor(t){this._observable=new G0,this._map=new Map(t)}get size(){return Ze(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return Ze(this._observable),this._map.entries()}forEach(t,r){Ze(this._observable),this._map.forEach(((i,s)=>t.call(r,i,s,this)),r)}get(t){return Ze(this._observable),this._map.get(t)}has(t){return Ze(this._observable),this._map.has(t)}keys(){return Ze(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return Ze(this._observable),this._map.values()}[Symbol.iterator](){return Ze(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};function Ru(e){return!(e==null||typeof e!="object"||!("createQuery"in e)||!e.createQuery)}let zn=class extends el.EventedAccessor{constructor(t){super(t),this._selectionMap=new W2,this._sources=new Te,this._trashCan=[],this._layerEditHandles=new Te,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([Qe((()=>[this.view,this.showHighlight]),(()=>this._refreshVisualization())),Qe((()=>this.view),(t=>{t==null||t.when().then((()=>this.syncSources()))}),Vi),Vc((()=>this.sources),"change",(t=>{var s;const r=this._selectionMap,i=[];for(const n of t.removed){const o=r.get(n);o&&(r.delete(n),(s=o.highlightHandle)==null||s.remove(),i.push({layer:n,selection:[],added:[],removed:[...o.selection]}))}this._refreshListeners(),i.length&&this._onSelectionChange(i)}),{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(vr)}get selections(){return Array.from(this._selectionMap.entries()).map((t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}}))}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){uu(t,this._sources)}syncSources(){var s;const t=new Set,r=(s=this.view)==null?void 0:s.map;if(!r)return;const i=n=>{var o,l,p,m,v;Zpe(n)?((o=n.layers)==null||o.forEach(i),(l=n.tables)==null||l.forEach(i)):Jpe(n)?((p=n.sublayers)==null||p.forEach(i),(m=n.subtables)==null||m.forEach(i)):ML(n)?(v=n.sublayers)==null||v.forEach(i):Ru(n)&&t.add(n)};r.allLayers.forEach(i),r.allTables.forEach(i),this.sources=[...t]}async getSelectedFeatures(t,r={},i="layerView"){const{view:s,selections:n}=this;if(!s&&i==="layerView")return de.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(t!=null&&t.length?n.filter((l=>t.includes(l.layer))):n).map((async l=>{const{layer:p,selection:m}=l;if(!m.length)return;const v=dc(p)?p.parent:p;if(v!=null){if(s&&i==="layerView"&&!LD(v)&&DD(v)){const _=await s.whenLayerView(v).catch((()=>null));if(_)return FD(_,m,r)}return FD(v,m,r)}})).filter(Ga);return(await Promise.all(o)).filter(Ga)}updateSelection(t){const r=new Map;for(const[n,o]of this._selectionMap)r.set(n,[...o.selection]);let i=!1;const s=t.current.concat(t.added);for(const n of s){const o=n.sourceLayer,l=n.getObjectId();if(this.sources.includes(o)&&(Ru(o)||dc(o))&&l!==null){const p=rh(r,o,(()=>[]));p.includes(l)||(p.push(l),i=!0)}}for(const n of t.removed){const o=n.sourceLayer,l=n.getObjectId();if(this.sources.includes(o)&&(Ru(o)||dc(o))&&l!==null){const p=r.get(o),m=p==null?void 0:p.indexOf(l);m!==void 0&&m>=0&&(p==null||p.splice(m,1),i=!0)}}if(i){const{_selectionMap:n,_trashCan:o}=this,l=[];for(const[p,m]of r){const v=n.get(p);v!==void 0&&o.push(v),n.set(p,{selection:m}),l.push({layer:p,selection:m,...RP(v!==void 0?v.selection:[],m)})}this._onSelectionChange(l)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){const r=this._selectionMap.get(t);return r==null?void 0:r.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),s=i!==void 0?[...i.selection]:[];for(const n of r)s.includes(n)||s.push(n);this._setSelection(t,s)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const s=[];for(const n of i.selection)r.includes(n)||s.push(n);this._setSelection(t,s)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const s=new Set(i.selection),n=new Set(r),o=cee(s,n);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,s]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;for(this._vizTaskId++;this._trashCan.length>0;){const l=this._trashCan.pop();(o=l==null?void 0:l.highlightHandle)==null||o.remove()}if(this.view==null)return;const{sources:t,view:r,_selectionMap:i,showHighlight:s}=this,n=this._vizTaskId;for(const l of t){const p=i.get(l),m=dc(l)?l.parent:l;if(m!=null&&DD(m)){if(LD(m))continue;r.whenLayerView(m).then((v=>{var _;(_=p==null?void 0:p.highlightHandle)==null||_.remove(),p!=null&&s&&n===this._vizTaskId&&"highlight"in v&&typeof v.highlight=="function"&&p.selection.length>0&&(p.highlightHandle=v.highlight(p.selection,this.highlightName))})).catch((()=>{var v;(v=p==null?void 0:p.highlightHandle)==null||v.remove()}))}}}_refreshListeners(){this._layerEditHandles.drain(vr);const t=new Set(this.sources.map((r=>dc(r)?r.parent:r)));for(const r of t)Ru(r)&&"on"in r&&r.on&&this._layerEditHandles.push(r.on("edits",(i=>this._onLayerEdit(i,r))))}_onLayerEdit(t,r){if(ML(r))this._onParentLayerEdit(t,r);else if(t.deletedFeatures.length&&this._selectionMap.has(r)){const i=[];t.deletedFeatures.forEach((({error:s,objectId:n})=>{n!=null&&s==null&&i.push(n)})),this.removeFromSelection(r,i)}}_onParentLayerEdit(t,r){var o;const{deletedFeatures:i,edits:s,updatedFeatures:n}=t;if((o=s==null?void 0:s.updateFeatures)==null||o.forEach((l=>{var _;const p=l.getObjectId()??l.attributes[r.objectIdField];if(p==null||(_=n.find((E=>E.objectId===p)))!=null&&_.error)return;const m=r.findSublayerForFeature(l);if(!Ru(m))return;const v=r.sublayers.find((E=>{var $;return!(!Ru(E)||!(($=this.getSelection(E))!=null&&$.includes(p)))}));Ru(v)&&v!==m&&(this.removeFromSelection(v,[p]),this.appendToSelection(m,[p]))})),i.length){const l=[];i.forEach((({error:p,objectId:m})=>{m!=null&&p==null&&l.push(m)})),r.sublayers.forEach((p=>{Ru(p)&&this._selectionMap.has(p)&&this.removeFromSelection(p,l)}))}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!Ywe(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const s={layer:t,selection:[...r],...RP(i!==void 0?i.selection:[],r)};this._onSelectionChange([s])}}};a([A()],zn.prototype,"_selectionMap",void 0),a([A()],zn.prototype,"_sources",void 0),a([A({readOnly:!0,nonNullable:!0})],zn.prototype,"selections",null),a([A({readOnly:!0,nonNullable:!0})],zn.prototype,"count",null),a([A()],zn.prototype,"view",void 0),a([A({readOnly:!0,nonNullable:!0})],zn.prototype,"hasSelection",null),a([A()],zn.prototype,"showHighlight",void 0),a([A()],zn.prototype,"sources",null),a([A()],zn.prototype,"highlightName",void 0),zn=a([P("esri.views.SelectionManager")],zn);const LD=e=>{var t;return dc(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},Zwe=e=>e.layer!==void 0,DD=e=>(e==null?void 0:e.when)!==void 0,Ywe=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let s=0;s<r.length;s++)if(r[s]!==i[s])return!1}return!0},FD=async(e,t,r={})=>{let i;if(Zwe(e)){const s=e;i=s===void 0?null:await s.queryFeatures(new Ve({...r,objectIds:t})).then((n=>({data:n,layer:e.layer})))}else{const s=e;i=s===void 0?null:await s.queryFeatures(new Ve({...r,objectIds:t})).then((n=>({data:n,layer:s})))}return i},Kwe=zn;let Gy=class extends Ge.ClonableMixin(je){constructor(t){super(t),this.accentColor=new Ke([255,127,0]),this.textColor=new Ke([255,255,255])}};a([A({type:Ke,nonNullable:!0})],Gy.prototype,"accentColor",void 0),a([A({type:Ke,nonNullable:!0})],Gy.prototype,"textColor",void 0),Gy=a([P("esri.views.Theme")],Gy);const PC=Gy;var jD;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(jD||(jD={}));const VW=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],zW={};function GW(e){return!!zW[e]}function Xwe(e){for(const t of e)if(!GW(t))return!1;return!0}VW.forEach((e=>{zW[e]=!0}));let qW=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach((({handler:r,priority:i},s)=>{var n;return(n=this.inputManager)==null?void 0:n.installHandlers(s,[r],i)}))}disconnect(){this.inputManager&&this._handlers.forEach(((t,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)})),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,s){const n=Array.isArray(t)?t:t.split(",");if(!Xwe(n))return n.some(GW)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,l;Array.isArray(r)?l=r:(o=r,l=[]),typeof i=="function"?o=i:s=i,s=s??au.DEFAULT;const p=this._createUniqueGroupName(),m=new e2e(this.view,n,l,o);this._handlers.set(p,{handler:m,priority:s});for(const v of n){const _=this._handlerCounts.get(v)||0;this._handlerCounts.set(v,_+1)}return this.inputManager&&this.inputManager.installHandlers(p,[m],s),Lt((()=>this._removeHandler(p,n)))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const s=this._handlerCounts.get(i);s===void 0||(s===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},e2e=class extends yi{constructor(t,r,i,s){super(!0),this._latestDragStart=void 0,this.view=t;for(const n of r)switch(n){case"click":this.registerIncoming("click",i,(o=>s(i2e(t,o))));break;case"double-click":this.registerIncoming("double-click",i,(o=>s(s2e(t,o))));break;case"immediate-click":this.registerIncoming("immediate-click",i,(o=>s(n2e(t,o))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,(o=>s(o2e(t,o))));break;case"hold":this.registerIncoming("hold",i,(o=>s(a2e(t,o))));break;case"drag":this.registerIncoming("drag",i,(o=>{const l=this._wrapDrag(o);l&&s(l)}));break;case"key-down":this.registerIncoming("key-down",i,(o=>s(l2e(o))));break;case"key-up":this.registerIncoming("key-up",i,(o=>s(u2e(o))));break;case"pointer-down":this.registerIncoming("pointer-down",i,(o=>s(qm(o,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",i,(o=>s(qm(o,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",i,(o=>s(qm(o,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,(o=>s(c2e(o))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,(o=>s(d2e(o))));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,(o=>s(qm(o,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,(o=>s(qm(o,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",i,(o=>{s(p2e(o))}));break;case"focus":this.registerIncoming("focus",i,(o=>{s(t2e(o))}));break;case"blur":this.registerIncoming("blur",i,(o=>{s(r2e(o))}))}}_wrapDrag(t){const r=t.data,{x:i,y:s}=r.center,{action:n,pointerType:o,button:l}=r;if(n==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const p=r.pointer.native,m=r.buttons,{cancelable:v,timestamp:_}=t,E={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:i,y:s,origin:E,pointerType:o,button:l,buttons:m,radius:r.radius,angle:DU(r.angle),native:p,timestamp:_,cancelable:v,stopPropagation:()=>t.stopPropagation(),defer:$=>t.defer($),preventDefault:()=>t.preventDefault()}}};function t2e(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function r2e(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function i2e(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:p}=t.data,{cancelable:m,timestamp:v}=t;return{type:"click",pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:v,screenPoint:Oi(n,o),mapPoint:n1(e,n,o),eventId:p,cancelable:m,stopPropagation:()=>t.stopPropagation(),defer:_=>t.defer(_),preventDefault:()=>t.preventDefault()}}function s2e(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:p}=t.data,{cancelable:m,timestamp:v}=t;return{type:"double-click",pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:v,mapPoint:n1(e,n,o),eventId:p,cancelable:m,stopPropagation:()=>t.stopPropagation(),defer:_=>t.defer(_),preventDefault:()=>t.preventDefault()}}function n2e(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:p}=t.data,m=l.pointerId,{cancelable:v,timestamp:_}=t;return{type:"immediate-click",pointerId:m,pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:_,mapPoint:n1(e,n,o),eventId:p,cancelable:v,stopPropagation:()=>t.stopPropagation(),defer:E=>t.defer(E),preventDefault:()=>t.preventDefault()}}function o2e(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l,eventId:p}=t.data,m=l.pointerId,{cancelable:v,timestamp:_}=t;return{type:"immediate-double-click",pointerId:m,pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:_,mapPoint:n1(e,n,o),eventId:p,cancelable:v,stopPropagation:()=>t.stopPropagation(),defer:E=>t.defer(E),preventDefault:()=>t.preventDefault()}}function a2e(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:l}=t.data,{cancelable:p,timestamp:m}=t;return{type:"hold",pointerType:r,button:i,buttons:s,x:n,y:o,native:l,timestamp:m,mapPoint:n1(e,n,o),cancelable:p,stopPropagation:()=>t.stopPropagation(),defer:v=>t.defer(v),preventDefault:()=>t.preventDefault()}}function n1(e,t,r){return e.toMap(Oi(t,r),{exclude:[]})}function l2e(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),defer:o=>e.defer(o),preventDefault:()=>e.preventDefault()}}function u2e(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:s}=e;return{type:"key-up",key:t,native:r,timestamp:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),defer:n=>e.defer(n),preventDefault:()=>e.preventDefault()}}function qm(e,t){const{x:r,y:i,button:s,buttons:n,native:o,eventId:l}=e.data,p=o.pointerId,m=o.pointerType,{cancelable:v,timestamp:_}=e;return{type:t,x:r,y:i,pointerId:p,pointerType:m,button:s,buttons:n,native:o,timestamp:_,eventId:l,cancelable:v,stopPropagation:()=>e.stopPropagation(),defer:E=>e.defer(E),preventDefault:()=>e.preventDefault()}}function c2e(e){const{x:t,y:r,buttons:i,native:s,eventId:n}=e.data.currentEvent,{button:o}=e.data.startEvent,l=e.data.startEvent.native.pointerId,p=e.data.startEvent.native.pointerType,m=e.data.action,v={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:_,timestamp:E}=e;return{type:"pointer-drag",x:t,y:r,pointerId:l,pointerType:p,button:o,buttons:i,action:m,origin:v,native:s,timestamp:E,eventId:n,cancelable:_,stopPropagation:()=>e.stopPropagation(),defer:$=>e.defer($),preventDefault:()=>e.preventDefault()}}function d2e(e){const{cancelable:t,data:r,timestamp:i}=e,{x:s,y:n,deltaY:o,native:l}=r;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:l,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),defer:p=>e.defer(p),preventDefault:()=>e.preventDefault()}}function p2e(e){const{action:t,state:r,device:i}=e.data,{cancelable:s,timestamp:n}=e,{buttons:o,axes:l}=r;return{type:"gamepad",device:i,timestamp:n,action:t,buttons:o,axes:l,cancelable:s,stopPropagation:()=>e.stopPropagation(),defer:p=>e.defer(p),preventDefault:()=>e.preventDefault()}}var gv,BD,UD;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(gv||(gv={})),(function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"})(BD||(BD={})),(function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"})(UD||(UD={}));const h2e="z",A2e="r",HW={cancel:"Escape",complete:"Enter"},g6e={...HW,redo:A2e,undo:h2e,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},v6e={toggle:"Control"},w6e={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},b6e={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:CW,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let _6e=class{constructor(){this._bindings=new Map}add(t,r){return this.addToggle(t,(i=>{i.type==="key-down"&&r(i)}))}addToggle(t,r){const i=f2e.fromDefinition(t,r),s=rh(this._bindings,i.key,(()=>[]));return s.push(i),Lt((()=>Dk(s,i)))}register(t,r=au.WIDGET){return th([t.on("key-down",(i=>this.dispatch(t.inputManager,i)),r),t.on("key-up",(i=>this.dispatch(t.inputManager,i)),r)])}dispatch(t,r){const i=r.key,s=this._bindings.get(i);if(s)for(const n of s)n.process(t,r)}},f2e=class NC{constructor(t,r,i,s,n){this.key=t,this.modifiers=r,this.repeats=i,this.continuePropagation=s,this.callback=n}process(t,r){if(!(r.key!==this.key||"repeat"in r&&r.repeat&&!this.repeats)){for(const i of this.modifiers)if(!t.isModifierKeyDown(i))return;this.continuePropagation||r.stopPropagation(),this.callback(r)}}static fromDefinition(t,r){if(typeof t=="string")return new NC(t,[],!1,!1,r);const{key:i,modifier:s,repeats:n,continuePropagation:o}=t;return new NC(i,s?Array.isArray(s)?s:[s]:[],!!n,!!o,r)}};function m2e(e){return[e.on("before-add",(t=>{const r=t.item;if(r==null||e.includes(r))return de.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()})),e.on("after-remove",(t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()}))]}function LC(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(gv.USER)&&e.getEditableFlag(gv.MANAGER)}function y2e(e){return e.type==="key-down"&&e.key===HW.cancel}function pa(e){return Oi(e.x,e.y)}function WW(e,t){var i;const r=(i=e instanceof HTMLElement?e:e.surface)==null?void 0:i.getBoundingClientRect();return r?Oi(t.clientX-r.left,t.clientY-r.top):Oi(0,0)}function QW(e,t){return t instanceof Event?WW(e,t):pa(t)}function JW(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let g2e=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":zD(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!GD(t))break;const s=pa(t),n=Rh(s,t.pointerType,r.forEachTool);if(n==null)break;const o=n.manipulator,l=n.tool;o==null||l==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&l!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:l,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!GD(t))break;const s=this._grabbedManipulators.get(t.pointerId),n=s==null?void 0:s.manipulator,o=s==null?void 0:s.tool;if(n==null||o==null)break;const l=pa(t);l.x=lo(l.x,0,r.view.width),l.y=lo(l.y,0,r.view.height);const p=s.start,m=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,m?n.events.emit("drag",{action:"update",start:p,screenPoint:l}):n.events.emit("drag",{action:"start",start:p,screenPoint:l,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:n,start:p}));break;case"end":n.dragging=!1,m&&n.events.emit("drag",{action:"end",start:p,screenPoint:l}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const s=pa(t),n=Rh(s,t.pointerType,r.forEachTool);if(v2e(t)||r.forEachTool((m=>{if((n==null||n.tool!==m||m.automaticManipulatorSelection)&&m.manipulators){let v=!1;m.manipulators.forEach((({manipulator:_})=>{_.selected&&(_.selected=!1,v=!0)})),v&&m.onManipulatorSelectionChanged&&m.onManipulatorSelectionChanged()}})),n==null)break;const{manipulator:o,tool:l}=n;if(!o.interactive)break;o.selectable&&l.automaticManipulatorSelection&&(o.selected=!o.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const p=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:p,stopPropagation:i}),j3(o,i);break}case"click":{const s=pa(t),n=Rh(s,t.pointerType,r.forEachTool),o=n==null?void 0:n.manipulator;if(o==null||!o.interactive)break;const l=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l}),i();break}case"double-click":{const s=pa(t),n=Rh(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const l=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),j3(o,i);break}case"immediate-double-click":{const s=pa(t),n=Rh(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const l=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),t.pointerType==="mouse"&&j3(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:pa(r)}),this._grabbedManipulators.forEach((({manipulator:s},n)=>{s===t&&this._grabbedManipulators.delete(n)})),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){var s;const i=(s=this._grabbedManipulators.get(t.pointerId))==null?void 0:s.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:pa(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=VD(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=VD(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach((({tool:s})=>{r.add(s)})),this._hoveredManipulators.forEach((({tool:s})=>{i.add(s)})),t((s=>{s.hasGrabbedManipulators=r.has(s),s.hasHoveredManipulators=i.has(s);const n=this._grabbedManipulators.values(),o=rX(n,(({tool:l})=>l===s));s.firstGrabbedManipulator=o!=null?o.manipulator:null}))}clearPointers(t,{forEachTool:r,setActiveTool:i},s=!0,n){const o=(l,p)=>l===t&&(n==null||n===p);this._grabbedManipulators.forEach((({tool:l,manipulator:p,pointerType:m},v)=>{o(l,p)&&(this._grabbedManipulators.delete(v),p.grabbing=!1,p.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:m}))})),this._draggedManipulators.forEach((({tool:l,manipulator:p},m)=>{o(l,p)&&(this._draggedManipulators.delete(m),p.dragging=!1,p.events.emit("drag",{action:"cancel"}))})),s&&this._hoveredManipulators.forEach((({tool:l,manipulator:p},m)=>{o(l,p)&&(this._hoveredManipulators.delete(m),p.hovering=!1)})),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach(((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Oi(r.x,r.y),i,r.pointerType,t)}))}handleHoverEvent(t,r){const i=t.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!zD(t.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(pa(t),t.pointerId,t.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(t,r,i,s){var l;let n=Rh(t,i,s);const o=(l=this._hoveredManipulators.get(r))==null?void 0:l.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(r,n)):this._hoveredManipulators.delete(r),this._onFocusChange(s))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach((({manipulator:r},i)=>{t===i&&(this._hoveredManipulators.delete(t),r.hovering=!1)}))}};function VD(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function Rh(e,t,r){let i=null;return r((s=>{if(s.manipulators==null||!LC(s))return!1;const n=s.manipulators.intersect(e,t);return n!=null&&(i={tool:s,manipulator:n},!0)})),i}function zD(e){return e==="mouse"}function GD(e){return e.pointerType!=="mouse"||e.button===0}function v2e(e){return!!e.native.shiftKey}function j3(e,t){e!=null&&e.consumesClicks&&t()}const qD="attached",B3="tools",w2e=1e3;let ha=class extends je{constructor(t){super(t),this._updatingHandles=new xp,this._clock=B0,this._manipulatorState=new g2e,this.tools=new Te,this.cursor=null,this._interacting=!1,this._interactingTimeout=w2e,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(VW,(t=>{this._handleInputEvent(t)}),au.TOOL),...m2e(this.tools),this.tools.on("before-add",(({item:t})=>{this._updateToolEditableFlag(t)})),this.tools.on("before-remove",(({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.activeTool=null,this.tools.drain((t=>t.destroy())),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void de.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const s=LC(i);this.activeTool!=null&&s||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some((t=>t.updating))}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=vr(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout((()=>this._interacting=!1),this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([Qe((()=>{const{state:r}=this.view;return"camera"in r&&r.camera}),(()=>this._forEachManipulator((r=>r.onViewChange())))),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",(r=>this._forEachManipulator((i=>i.onElevationChange(r)))))],qD):this.addHandles(Qe((()=>this.view.extent),(()=>this._forEachManipulator((r=>r.onViewChange())))))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(qD),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool((r=>{r.manipulators&&r.manipulators.forEach((({manipulator:i})=>t(i,r)))}))}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool((s=>{!r&&s.visible&&s.handleInputEvent(i)})),!r&&y2e(t)&&this.activeTool&&(t.stopPropagation(),t.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(B3),this._forEachTool((t=>{if(t instanceof je){const r=Qe((()=>[t.cursor,t.visible,t.editable]),(()=>{LC(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}));this.addHandles(r,B3)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",(r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)})),t.manipulators.on("change",(()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}))],B3)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,gv.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool((r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0))),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter((r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel)).forEach((r=>{this.tools.remove(r)}))}get test(){}};a([A({constructOnly:!0,nonNullable:!0})],ha.prototype,"view",void 0),a([A({value:null})],ha.prototype,"activeTool",null),a([A({readOnly:!0,type:Te})],ha.prototype,"tools",void 0),a([A({readOnly:!0})],ha.prototype,"cursor",void 0),a([A({readOnly:!0})],ha.prototype,"updating",null),a([A()],ha.prototype,"_interacting",void 0),a([A({readOnly:!0})],ha.prototype,"interacting",null),ha=a([P("esri.views.ToolViewManager")],ha);const b2e=new Ke("cyan"),_2e=1,S2e=.25,E2e=new Ke("black"),T2e=.4,$2e=.2,$6e=.25,ZW="default",x2e="temporary",I2e=new Ke("yellow");var DC;let vn=DC=class extends je{constructor(e){super(e),this.name=ZW,this.color=b2e.clone(),this.haloColor=null,this.haloOpacity=_2e,this.fillOpacity=S2e,this.shadowColor=E2e.clone(),this.shadowOpacity=T2e,this.shadowDifference=$2e,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){var e,t;return new DC({...this,color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),shadowColor:(t=this.shadowColor)==null?void 0:t.clone()})}assignFrom(e){var t;this.color=e.color.clone(),this.haloColor=(t=e.haloColor)==null?void 0:t.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};a([A({type:String,constructOnly:!0,nonNullable:!0})],vn.prototype,"name",void 0),a([A({type:Ke,nonNullable:!0})],vn.prototype,"color",void 0),a([A({type:Ke})],vn.prototype,"haloColor",void 0),a([A({nonNullable:!0})],vn.prototype,"haloOpacity",void 0),a([A({nonNullable:!0})],vn.prototype,"fillOpacity",void 0),a([A({type:Ke,nonNullable:!0})],vn.prototype,"shadowColor",void 0),a([A({nonNullable:!0})],vn.prototype,"shadowOpacity",void 0),a([A({nonNullable:!0})],vn.prototype,"shadowDifference",void 0),a([A({nonNullable:!0})],vn.prototype,"haloWidth",void 0),a([A({nonNullable:!0})],vn.prototype,"haloBlur",void 0),vn=DC=a([P("esri.views.support.HighlightOptions")],vn);const Nc=vn;function M2e(){return new(Te.ofType(Nc))([new Nc({name:ZW}),new Nc({name:x2e,color:I2e})])}let cA=class extends je{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":C2e.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return k2e[this.deviceType]}};a([A({nonNullable:!0,readOnly:!0})],cA.prototype,"nativeIndex",void 0),a([A({type:String,readOnly:!0})],cA.prototype,"deviceType",null),a([A({type:Number,readOnly:!0})],cA.prototype,"axisThreshold",null),cA=a([P("esri.views.input.gamepad.GamepadInputDevice")],cA);const iO=cA,C2e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),k2e={standard:.15,spacemouse:.025,unknown:0};let qy=class extends je{constructor(...t){super(...t),this.devices=new Te,this.enabledFocusMode="document"}};a([A({type:Te.ofType(iO),readOnly:!0})],qy.prototype,"devices",void 0),a([A({type:["document","view","none"]})],qy.prototype,"enabledFocusMode",void 0),qy=a([P("esri.views.input.gamepad.GamepadSettings")],qy);const R2e=qy;let Q2=class extends je{constructor(){super(...arguments),this.gamepad=new R2e}};a([A({readOnly:!0})],Q2.prototype,"gamepad",void 0),Q2=a([P("esri.views.input.Input")],Q2);const O2e=Q2,YW=()=>Pt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,U3=()=>A({type:["pan","rotate","zoom","none"],nonNullable:!0});let Bd=class extends je{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};a([U3()],Bd.prototype,"dragPrimary",void 0),a([U3()],Bd.prototype,"dragSecondary",void 0),a([U3()],Bd.prototype,"dragTertiary",void 0),a([A({type:["zoom","none"],nonNullable:!0})],Bd.prototype,"mouseWheel",void 0),Bd=a([P("esri.views.navigation.NavigationActionMap")],Bd);const sO=Bd;let zu=class extends je{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};a([A({type:Boolean,nonNullable:!0})],zu.prototype,"enabled",void 0),a([A({type:iO})],zu.prototype,"device",void 0),a([A({type:["pan","zoom"],nonNullable:!0})],zu.prototype,"mode",void 0),a([A({type:["forward-down","forward-up"],nonNullable:!0})],zu.prototype,"tiltDirection",void 0),a([A({type:Number,nonNullable:!0})],zu.prototype,"velocityFactor",void 0),zu=a([P("esri.views.navigation.gamepad.GamepadSettings")],zu);const KW=zu;let Gu=class extends je{constructor(t){super(t),this.actionMap=new sO,this.browserTouchPanEnabled=!0,this.gamepad=new KW,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!YW()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){V9(de.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};a([A({type:sO,nonNullable:!0})],Gu.prototype,"actionMap",void 0),a([A({type:Boolean})],Gu.prototype,"browserTouchPanEnabled",void 0),a([A({type:KW,nonNullable:!0})],Gu.prototype,"gamepad",void 0),a([A({type:Boolean})],Gu.prototype,"momentumEnabled",void 0),a([A({type:Boolean})],Gu.prototype,"mouseWheelZoomEnabled",null),Gu=a([P("esri.views.navigation.Navigation")],Gu);const aE=Gu;function O6e(e,t,r){const i=XW(e),s=t,n=P2e(i,s,r);if(i){const o=ms.deriveUnitFromSR(i,e.spatialReference).heightUnit;if(!r&&o!==i.heightUnit){const l=new Q("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new Q("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:l})}}if(!N2e(e)||n===Ys.Unsupported)return new Q("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i});switch(n){case Ys.Units:{const o=(i==null?void 0:i.heightUnit)||"unknown",l=(s==null?void 0:s.heightUnit)||"unknown",p=new Q("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${l})`,{layerUnit:o,sceneUnit:l});return new Q("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:p})}case Ys.HeightModel:{const o=(i==null?void 0:i.heightModel)||"unknown",l=(s==null?void 0:s.heightModel)||"unknown",p=new Q("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${l})`,{layerHeightModel:o,sceneHeightModel:l});return new Q("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:p})}case Ys.CRS:{const o=(i==null?void 0:i.vertCRS)||"unknown",l=(s==null?void 0:s.vertCRS)||"unknown",p=new Q("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${l})`,{layerDatum:o,sceneDatum:l});return new Q("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:p})}}return null}function P2e(e,t,r){if(!HD(e)||!HD(t))return Ys.Unsupported;if(e==null||t==null)return Ys.Ok;if(!r&&e.heightUnit!==t.heightUnit)return Ys.Units;if(e.heightModel!==t.heightModel)return Ys.HeightModel;switch(e.heightModel){case"gravity-related-height":return Ys.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Ys.Ok:Ys.CRS;default:return Ys.Unsupported}}var Ys;function HD(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function N2e(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!rQ(e)}function XW(e){var i;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?Ja(e.url):void 0;return!(((i=e.spatialReference)==null?void 0:i.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&eQ(e)&&e.heightModelInfo?e.heightModelInfo:rQ(e)?ms.deriveUnitFromSR(D2e,e.spatialReference):null}function eQ(e){return"heightModelInfo"in e}function tQ(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function rQ(e){return tQ(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):iQ(e)}function L2e(e){return e.layers!=null||iQ(e)||tQ(e)||eQ(e)}function iQ(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Ys||(Ys={}));const D2e=new ms({heightModel:"gravity-related-height"});var w_;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(w_||(w_={}));let FC,V3=null;async function F2e(e){V3||(V3=ce(()=>import("./geometryServiceUtils-DOtZTk4D.js"),[],import.meta.url).then((t=>FC=t))),await V3,dr(e)}async function sQ(e,t,r,i){if(!e)return null;const s=e.spatialReference;return Au()||co(s,t)?td(e,t):FC?FC.projectGeometry(e,t,r,i):(await Promise.race([F2e(i),cu(i)]),sQ(e,t,r,i))}async function P6e(e,t){try{return e!=null&&e.spatialReference?await Lq(e,t):null}catch{return null}}let Xt=class extends je{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=h0(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,s,n,o;const t=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(s=t==null?void 0:t.basemap)==null?void 0:s.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(n=t==null?void 0:t.ground)==null?void 0:n.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,(i=>{const s=this._getSupportedSpatialReferences(i);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(t,s);n!=null&&(t=n)}return(t==null?void 0:t.length)===1}))&&(t==null?void 0:t.length)!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(t);return{spatialReference:(r==null?void 0:r.spatialReference)??null,viewingMode:(r==null?void 0:r.viewingMode)??null,updating:!1}}get _tileInfoTask(){var n,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(n=this.map)==null?void 0:n.call(this),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const s=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],(l=>{var p;return!(!("tileInfo"in l)||!((p=l.tileInfo)!=null&&p.spatialReference.equals(r)))&&(i=l,!0)}),(l=>"tileInfo"in l));return i?{tileInfo:i.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){var i;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const r=this._collectLayers(this.mapCollections,(s=>{var o,l;const n=XW(s);return!!n&&(t={heightModelInfo:n,vcsWkid:(o=s.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(l=s.spatialReference)==null?void 0:l.latestVcsWkid},!0)}),(s=>L2e(s)));return{...t,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],r=this._collectLayers(this.mapCollections,(i=>{const s="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find((l=>l.spatialReference.equals(this.spatialReference)))??n;if(o)return t.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const l of s)t.push({extent:l,layer:i});return!1}));return{candidates:t,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=h0(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:GS((async n=>{try{const o=await sQ(i.extent,s,"portalItem"in i.layer?i.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(oo(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const s of t)for(const n of r){if(!s.spatialReference.equals(n.spatialReference))continue;const o=B2e(s.viewingMode,n.viewingMode);if(o!==!1){i.push({spatialReference:s.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some((({spatialReference:i})=>i.equals(r)))&&(t=t.filter((({spatialReference:i})=>i.equals(r)))),t.length>1&&t.some((({viewingMode:i})=>i!==w_.Local))&&(t=t.filter((({viewingMode:i})=>i!==w_.Local))),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const s of r){const n=this.getSpatialReferenceSupport(s,t);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:l,viewingMode:p}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!l.equals(this.userSpatialReference)||i.push({spatialReference:l,viewingMode:p})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find((({extent:i})=>r.equals(i.spatialReference)))||t[0]}_collectLayers(t,r,i=()=>!0){var n;switch(this._loadMaybe((n=this.map)==null?void 0:n.call(this))){case"loading":return!0;case"failed":return!1}const s=new j2e(i,r);for(const o of t)if(this._collectCollection(o,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers)if(r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch((r=>{zi(r)})),"loading"):t.loadStatus:"loaded"}};a([A()],Xt.prototype,"required",void 0),a([A({constructOnly:!0})],Xt.prototype,"map",void 0),a([A({constructOnly:!0})],Xt.prototype,"getSpatialReferenceSupport",void 0),a([A()],Xt.prototype,"defaultSpatialReference",void 0),a([A()],Xt.prototype,"userSpatialReference",void 0),a([A()],Xt.prototype,"sourcePreloadCount",void 0),a([A()],Xt.prototype,"priorityCollection",void 0),a([A()],Xt.prototype,"requiresExtentInSpatialReference",void 0),a([A()],Xt.prototype,"suspended",void 0),a([A({readOnly:!0})],Xt.prototype,"ready",null),a([A({readOnly:!0})],Xt.prototype,"heightModelInfoReady",null),a([A({readOnly:!0})],Xt.prototype,"spatialReference",null),a([A({readOnly:!0})],Xt.prototype,"extent",null),a([A({readOnly:!0})],Xt.prototype,"heightModelInfo",null),a([A({readOnly:!0})],Xt.prototype,"vcsWkid",null),a([A({readOnly:!0})],Xt.prototype,"latestVcsWkid",null),a([A({readOnly:!0})],Xt.prototype,"viewingMode",null),a([A({readOnly:!0})],Xt.prototype,"tileInfo",null),a([A({readOnly:!0})],Xt.prototype,"mapCollections",null),a([A({readOnly:!0})],Xt.prototype,"_spatialReferenceTask",null),a([A({readOnly:!0})],Xt.prototype,"_tileInfoTask",null),a([A({readOnly:!0})],Xt.prototype,"_heightModelInfoTask",null),a([A({readOnly:!0})],Xt.prototype,"_extentCandidatesTask",null),a([A()],Xt.prototype,"_extentTask",null),a([A()],Xt.prototype,"_projectExtentTask",void 0),Xt=a([P("esri.views.support.DefaultsFromMap")],Xt);let j2e=class{constructor(t,r){this.layerFilter=t,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function B2e(e,t){return e!=null?t!=null?e===t&&e:e:t}function U2e(e){return"tryRecycleWith"in e}let V2e=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=Cn(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ko(this._controller.signal,(()=>{var n;(n=this._recycleController)==null||n.abort();const s=new Q("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)}))}tryRecycle(t){var s;if(!this.done||!this.layerView||!U2e(this.layerView))return null;(s=this._recycleController)==null||s.abort(),this._recycleController=new AbortController;const r=this.layer.type,i=this._recycleController.signal;for(let n=0;n<t.length;n++){const o=t[n];if(o.type!==r)continue;const l=this.layerView.tryRecycleWith(o,{signal:i});if(l){t.splice(n,1),this.layer=o;const p=this.layerView,m=p.view;return this.promise=l.then((()=>(dr(i),o.emit("layerview-destroy",{view:m,layerView:p}),m.emit("layerview-destroy",{view:m,layerView:p}),o.emit("layerview-create",{view:m,layerView:p}),m.emit("layerview-create",{view:m,layerView:p}),p))),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){var s,n;const{view:t}=this;if(this._started||!t.map)return;this._started=!0;const{_controller:{signal:r},layer:i}=this;this._map=t.map;try{let o,l;if(await i.load({signal:r}),i.prefetchResources&&await i.prefetchResources({signal:r}),z2e(i))o=await i.createLayerView(t,{signal:r});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new Q("layer:view-not-supported","No layerview implementation was found");const v=await this.layerViewImporter.importLayerView(i);dr(r),o="default"in v?new v.default({layer:i,view:t}):new v({layer:i,view:t})}const p=()=>{l=vr(l),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};l=Ko(r,p),dr(r);try{await o.when()}catch(v){throw p(),v}if(!((n=(s=this._map)==null?void 0:s.allLayers)==null?void 0:n.includes(i)))return p(),void this._deferred.reject(new Q("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=o,i.emit("layerview-create",{view:t,layerView:o}),t.emit("layerview-create",{layer:i,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){i.emit("layerview-create-error",{view:t,error:o}),t.emit("layerview-create-error",{layer:i,error:o}),this.done=!0,this._deferred.reject(new Q("layerview:create-error","layerview creation failed",{layer:i,error:o}))}}};function z2e(e){return e.createLayerView!==br.prototype.createLayerView}function G2e(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let wn=class extends je{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new xp,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i,s;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const n of r)((s=this.layerViewFilter)==null?void 0:s.call(this,n))!==!1&&this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Cn(),this._workPromise.promise.catch((()=>{}))),this.removeHandles("reschedule"),this.addHandles(jv(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var v,_,E;const r=this.view.map;if(this.destroyed||!r)return void this.clear();if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,s=[],n=this.view.ready,o=$=>{var M;if($!=null){for(const k of $)if(k){if(((M=this.layerViewFilter)==null?void 0:M.call(this,k))===!1)continue;i.add(k);const N=this._layerLayerViewInfoMap.get(k);N&&n?N.start():N||this._recyclingInfoMap.has(k)||s.push(k),"layers"in k&&k.layers&&o(k.layers)}}};for(const $ of this._rootCollectionNames)o(qo(this,$));const l=new Array,p=$=>{const M=$.tryRecycle(s);M?(this._recyclingInfoMap.set($.layer,$),this.notifyChange("updating"),M.then((()=>{this._recyclingInfoMap.delete($.layer),this._layerLayerViewInfoMap.set($.layer,$),this._reschedule(),this.notifyChange("updating")})).catch((k=>{zi(k)||(this._recyclingInfoMap.delete($.layer),$.destroy(),this._reschedule(),this.notifyChange("updating"))}))):l.push($)};for(const $ of this._layerLayerViewInfoMap.values())i.has($.layer)||(this._layerLayerViewInfoMap.delete($.layer),p($));for(const $ of this._recyclingInfoMap.values())i.has($.layer)||(this._recyclingInfoMap.delete($.layer),p($));for(const $ of s)this._createLayerView($);this._refreshCollections(),l.forEach(($=>$.destroy()));const m=[(v=r==null?void 0:r.ground)==null?void 0:v.layers,(_=r==null?void 0:r.basemap)==null?void 0:_.baseLayers,(E=r==null?void 0:r.basemap)==null?void 0:E.referenceLayers,r==null?void 0:r.layers].filter(($=>!!$));i.forEach(($=>"layers"in $&&m.push($.layers))),this.addHandles(m.map(($=>this._watchUpdatingTracking.addOnCollectionChange((()=>$),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Vc((()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers}),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Qe((()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]}),(()=>this._reschedule()),vs)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),F3(this._recyclingInfoMap),F3(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(rr()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Tee(this._layerLayerViewInfoMap,(t=>!t.done))||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(this._clearCollections(),F3(this._layerLayerViewInfoMap))}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new Q("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){var n;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const s=i.layerView;return!(!s||!r||s.parent===r)||!!(i.done&&s&&"layers"in t&&((n=t.layers)!=null&&n.length))&&t.layers.some((o=>this.isCreatingLayerViewsForLayer(o,s)))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(qo(this,t),qo(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){var t;for(const r of this._layersToLayerViews.values())(t=qo(this,r))==null||t.removeAll()}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r==null?void 0:r.removeAll());let s=0;for(const n of t){const o=this._layerLayerViewInfoMap.get(n);if(!(o!=null&&o.layerView))continue;const l=o.layerView;l.layer=n,l.parent=i,r.at(s)!==l&&r.splice(s,0,l),"layers"in n&&G2e(l)&&this._populateLayerViewsOwners(n.layers,l.layerViews,l),s+=1}s<r.length&&r.splice(s)}_createLayerView(t){t.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new V2e(t,this.view,this.layerViewImporter);r.promise.then((()=>this._refreshCollections()),(i=>{i&&(zi(i)||i.name==="cancelled:layerview-create")||de.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};a([A()],wn.prototype,"_workPromise",void 0),a([A({readOnly:!0})],wn.prototype,"_watchUpdatingTracking",void 0),a([A({readOnly:!0})],wn.prototype,"_layersToLayerViews",null),a([A({readOnly:!0})],wn.prototype,"_rootCollectionNames",null),a([A({constructOnly:!0})],wn.prototype,"layerViewFilter",void 0),a([A()],wn.prototype,"layerViewImporter",void 0),a([A()],wn.prototype,"supportsGround",void 0),a([A({readOnly:!0})],wn.prototype,"updating",null),a([A({readOnly:!0})],wn.prototype,"updatingRemaining",null),a([A({constructOnly:!0})],wn.prototype,"view",void 0),wn=a([P("esri.views.support.LayerViewManager")],wn);const q2e=wn;let dA=class extends je{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};a([A()],dA.prototype,"featureTitleFields",void 0),a([A()],dA.prototype,"utilityNetworkFields",void 0),a([A()],dA.prototype,"globalIdField",void 0),dA=a([P("esri.views.support.RequiredFieldsOptions")],dA);const H2e=dA;var Hy,Pp;let Be=(Pp=class extends el.EventedMixin(Fa.EsriPromiseMixin(je)){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.handles=new F0,this.updatingHandles=new xp,this.allLayerViews=new Pa({getCollections:()=>{var r,i,s;return[(r=this.basemapView)==null?void 0:r.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:Q2e}),this.analyses=new v_,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Dg,this.groundView=null,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Te,this.magnifier=new UW,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new O2e,this.navigation=new aE,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new qW(this),this.persistableViewModels=new Te,this.requiredFieldsOptions=new H2e,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(Qe((()=>this.preconditionsReady),(r=>{var s,n;const i=this.ready;if(r?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Hy.views.add(this)):(this._lockedSpatialReference=null,Hy.views.remove(this)),this.notifyChange("spatialReference"),!r&&i)(s=this.toolViewManager)==null||s.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(r&&!i){try{this._startup()}catch(o){return void queueMicrotask((()=>{this.fatalError=new Q("view:startup-error","View._startup failed",o)}))}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}}),Wa))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then((()=>(this._isValid=!0,Qv((()=>this.ready)))))),this.basemapView=new Jwe({view:this}),this.layerViewManager=new q2e({view:this,layerViewFilter:t=>{var r;return((r=this.layerViewFilter)==null?void 0:r.call(this,t))??!0},layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new ha({view:this}),this.selectionManager=new Kwe({view:this}),this.addHandles([ks((()=>this.readyState==="map-content-error"&&!this.spatialReference),(()=>{de.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),Qe((()=>this.initialExtentRequired),(t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t}),vs),Qe((()=>this.ready),(t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)}),Wa),Qe((()=>this._userSpatialReference),(t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)}),vs)])}destroy(){var t,r;this.destroyed||(Hy.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=cr(this.graphics),this.analyses=cr(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),cr(this.analysisViewManager),this.toolViewManager=cr(this.toolViewManager),this.layerViewManager=cr(this.layerViewManager),this.selectionManager=cr(this.selectionManager),this.basemapView=cr(this.basemapView),(t=this.groundView)==null||t.destroy(),(r=this.layerViews)==null||r.forEach((i=>i.destroy())),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=cr(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return de.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Xt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(t,r)=>this.getSpatialReferenceSupport(t,r),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??M2e()}set highlights(t){this._set("highlights",uu(t,this._get("highlights"),Te.ofType(Nc)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||os.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(de.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),os.isLoadable(t)&&t.load().catch((()=>{})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",t))}get readyState(){var t,r,i,s;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((t=this.defaultsFromMap)==null?void 0:t.ready)??!1)&&!this.spatialReference){const n=!("loaded"in this.map)||this.map.loaded,o=this.map.ground.loaded,l=((r=this.map.basemap)==null?void 0:r.loaded)??!0;return n&&l&&o&&!((i=this.map)!=null&&i.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=GS((p=>Ej(K("view-readyState-waiting-delay"),null,p))),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(s=this._readyStateWaitingTask)!=null&&s.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=h0(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var r,i;const t=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(t&&((i=(r=this.defaultsFromMap)==null?void 0:r.required)!=null&&i.heightModelInfo)){const s=t.clone();return s.vcsWkid=this.defaultsFromMap.vcsWkid,s.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,s}return t}set spatialReference(t){const r=!Jr(t,this._get("spatialReference"));this._set("_userSpatialReference",t),r&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(t){this._userTimeExtent=t}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??ao}set timeZone(t){this._userTimeZone=t,Bse(t)||de.getLogger(this).warn("#timeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){var t;return((t=this.toolViewManager)==null?void 0:t.cursor)??this._cursor??"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new PC}whenLayerView(t){var r;return((r=this.layerViewManager)==null?void 0:r.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(t){throw new Q("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport(t)!=null}when(t,r){return this.isResolved()&&!this.ready&&de.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,r)}forceReadyCycle(){this.ready&&(ks((()=>this.destroyed||this.preconditionsReady===!1),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}},Hy=Pp,Pp.views=new Te,Pp);a([A()],Be.prototype,"_userSpatialReference",void 0),a([A()],Be.prototype,"activeTool",null),a([A({readOnly:!0})],Be.prototype,"allLayerViews",void 0),a([A(ND(v_,"analyses"))],Be.prototype,"analyses",void 0),a([A()],Be.prototype,"animation",null),a([A()],Be.prototype,"basemapView",void 0),a([A()],Be.prototype,"center",null),a([A()],Be.prototype,"defaultsFromMapSettings",null),a([A()],Be.prototype,"defaultsFromMap",null),a([A()],Be.prototype,"displayFilterEnabled",void 0),a([A({type:At})],Be.prototype,"extent",null),a([A()],Be.prototype,"fatalError",void 0),a([A(ND(Dg,"graphics"))],Be.prototype,"graphics",void 0),a([A()],Be.prototype,"groundView",void 0),a([A({readOnly:!0,type:ms})],Be.prototype,"heightModelInfo",null),a([A({type:Te.ofType(Nc)})],Be.prototype,"highlights",null),a([A({readOnly:!0})],Be.prototype,"interacting",null),a([A({constructOnly:!0})],Be.prototype,"layerViewFilter",void 0),a([A({readOnly:!0})],Be.prototype,"navigating",null),a([A({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Be.prototype,"preconditionsReady",null),a([A({readOnly:!0})],Be.prototype,"typeSpecificPreconditionsReady",void 0),a([A({type:Te,readOnly:!0})],Be.prototype,"layerViews",void 0),a([A()],Be.prototype,"resolution",null),a([A({type:UW})],Be.prototype,"magnifier",void 0),a([A({value:null,type:BW})],Be.prototype,"map",null),a([A()],Be.prototype,"padding",void 0),a([A({readOnly:!0})],Be.prototype,"ready",void 0),a([A()],Be.prototype,"_readyStateWaitingTask",void 0),a([A({readOnly:!0})],Be.prototype,"readyState",null),a([A({type:Ce})],Be.prototype,"spatialReference",null),a([A()],Be.prototype,"stationary",null),a([A({readOnly:!0})],Be.prototype,"supportsGround",void 0),a([A({type:qt})],Be.prototype,"timeExtent",null),a([A({type:String,nonNullable:!0})],Be.prototype,"timeZone",null),a([A()],Be.prototype,"tools",null),a([A()],Be.prototype,"toolViewManager",void 0),a([A({readOnly:!0})],Be.prototype,"type",void 0),a([A({type:Number})],Be.prototype,"scale",void 0),a([A({readOnly:!0})],Be.prototype,"updating",void 0),a([A({readOnly:!0})],Be.prototype,"initialExtentRequired",void 0),a([A({readOnly:!0})],Be.prototype,"initialExtent",null),a([A()],Be.prototype,"cursor",null),a([A({readOnly:!0})],Be.prototype,"input",void 0),a([A({type:aE,nonNullable:!0})],Be.prototype,"navigation",void 0),a([A()],Be.prototype,"layerViewManager",void 0),a([A()],Be.prototype,"analysisViewManager",void 0),a([A()],Be.prototype,"selectionManager",void 0),a([A()],Be.prototype,"width",void 0),a([A()],Be.prototype,"height",void 0),a([A({readOnly:!0})],Be.prototype,"resizing",void 0),a([A({value:null,readOnly:!0})],Be.prototype,"size",null),a([A({readOnly:!0})],Be.prototype,"suspended",void 0),a([A({readOnly:!0})],Be.prototype,"viewEvents",void 0),a([A({readOnly:!0})],Be.prototype,"persistableViewModels",void 0),a([A()],Be.prototype,"_isValid",void 0),a([A()],Be.prototype,"_readyCycleForced",void 0),a([A()],Be.prototype,"_lockedSpatialReference",void 0),a([A()],Be.prototype,"_userTimeZone",void 0),a([A()],Be.prototype,"_lockedTimeZone",void 0),a([A()],Be.prototype,"_userTimeExtent",void 0),a([A()],Be.prototype,"_lockedTimeExtent",void 0),a([A({type:PC})],Be.prototype,"theme",void 0),a([A({readOnly:!0,type:PC})],Be.prototype,"effectiveTheme",null),Be=Hy=a([P("esri.views.View")],Be);const z3=globalThis.$arcgis;z3&&!z3.views&&Object.defineProperty(z3,"views",{configurable:!1,enumerable:!0,writable:!1,value:Be.views});const W2e=Be;function Q2e(e){return e.layerViews}function hf(e,t){return e[0]=t[0],e[1]=t[1],e}function ki(e,t,r){return e[0]=t,e[1]=r,e}function nQ(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function vv(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function oQ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function aQ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function J2e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Z2e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Y2e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function K2e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function X2e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function o1(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function ebe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function lE(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function b_(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function __(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function lQ(e){const t=e[0],r=e[1];return t*t+r*r}function uQ(e,t){return e[0]=-t[0],e[1]=-t[1],e}function tbe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function jC(e,t){const r=t[0],i=t[1];let s=r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function cQ(e,t){return e[0]*t[0]+e[1]*t[1]}function dQ(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function rbe(e,t,r,i){const s=t[0],n=t[1];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e}function ibe(e,t=1){const r=2*DS()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function sbe(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s,e[1]=r[1]*i+r[3]*s,e}function Oa(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s+r[4],e[1]=r[1]*i+r[3]*s+r[5],e}function nbe(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[3]*s+r[6],e[1]=r[1]*i+r[4]*s+r[7],e}function obe(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[4]*s+r[12],e[1]=r[1]*i+r[5]*s+r[13],e}function abe(e,t,r,i){const s=t[0]-r[0],n=t[1]-r[1],o=Math.sin(i),l=Math.cos(i);return e[0]=s*l-n*o+r[0],e[1]=s*o+n*l+r[1],e}function lbe(e,t){const r=e[0],i=e[1],s=t[0],n=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let l=s*s+n*n;l>0&&(l=1/Math.sqrt(l));const p=(r*s+i*n)*o*l;return p>1?0:p<-1?Math.PI:Math.acos(p)}function ube(e){return"vec2("+e[0]+", "+e[1]+")"}function cbe(e,t){return e[0]===t[0]&&e[1]===t[1]}function dbe(e,t){const r=e[0],i=e[1],s=t[0],n=t[1],o=Ms();return Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))}function pbe(e,t,r,i,s){let n=t[0]-r[0],o=t[1]-r[1];const l=(i[0]*n+i[1]*o)*(s-1);return n=i[0]*l,o=i[1]*l,e[0]=t[0]+n,e[1]=t[1]+o,e}const hbe=__,nO=vv,Abe=oQ,fbe=aQ,mbe=lE,ybe=b_,gbe=lQ;Object.freeze(Object.defineProperty({__proto__:null,add:nQ,angle:lbe,ceil:J2e,copy:hf,cross:dQ,dist:mbe,distance:lE,div:fbe,divide:aQ,dot:cQ,equals:dbe,exactEquals:cbe,floor:Z2e,inverse:tbe,len:hbe,length:__,lerp:rbe,max:K2e,min:Y2e,mul:Abe,multiply:oQ,negate:uQ,normalize:jC,projectAndScale:pbe,random:ibe,rotate:abe,round:X2e,scale:o1,scaleAndAdd:ebe,set:ki,sqrDist:ybe,sqrLen:gbe,squaredDistance:b_,squaredLength:lQ,str:ube,sub:nO,subtract:vv,transformMat2:sbe,transformMat2d:Oa,transformMat3:nbe,transformMat4:obe},Symbol.toStringTag,{value:"Module"}));function xr(){return[0,0]}function vbe(e){return[e[0],e[1]]}function a1(e,t){return[e,t]}function wbe(e,t){return[e,t]}function bbe(e,t=xr()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function pQ(){return xr()}function hQ(){return a1(1,1)}function AQ(){return a1(1,0)}function fQ(){return a1(0,1)}const _be=pQ(),Sbe=hQ(),Ebe=AQ(),Tbe=fQ();Object.freeze(Object.defineProperty({__proto__:null,ONES:Sbe,UNIT_X:Ebe,UNIT_Y:Tbe,ZEROS:_be,clone:vbe,create:xr,freeze:wbe,fromArray:bbe,fromValues:a1,ones:hQ,unitX:AQ,unitY:fQ,zeros:pQ},Symbol.toStringTag,{value:"Module"}));function $be(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function mQ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function xbe(e,t,r,i,s,n,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e}function oO(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5];let p=r*n-i*s;return p?(p=1/p,e[0]=n*p,e[1]=-i*p,e[2]=-s*p,e[3]=r*p,e[4]=(s*l-n*o)*p,e[5]=(i*o-r*l)*p,e):null}function Ibe(e){return e[0]*e[3]-e[1]*e[2]}function yQ(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],p=t[5],m=r[0],v=r[1],_=r[2],E=r[3],$=r[4],M=r[5];return e[0]=i*m+n*v,e[1]=s*m+o*v,e[2]=i*_+n*E,e[3]=s*_+o*E,e[4]=i*$+n*M+l,e[5]=s*$+o*M+p,e}function l1(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],p=t[5],m=Math.sin(r),v=Math.cos(r);return e[0]=i*v+n*m,e[1]=s*v+o*m,e[2]=i*-m+n*v,e[3]=s*-m+o*v,e[4]=l,e[5]=p,e}function uE(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],p=t[5],m=r[0],v=r[1];return e[0]=i*m,e[1]=s*m,e[2]=n*v,e[3]=o*v,e[4]=l,e[5]=p,e}function C0(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],p=t[5],m=r[0],v=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=i*m+n*v+l,e[5]=s*m+o*v+p,e}function gQ(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function vQ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function aO(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Mbe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Cbe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function kbe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function wQ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function Rbe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function Obe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function Pbe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Nbe(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],p=t[0],m=t[1],v=t[2],_=t[3],E=t[4],$=t[5],M=Ms();return Math.abs(r-p)<=M*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-m)<=M*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-v)<=M*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(n-_)<=M*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(o-E)<=M*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(l-$)<=M*Math.max(1,Math.abs(l),Math.abs($))}const Lbe=yQ,Dbe=wQ;Object.freeze(Object.defineProperty({__proto__:null,add:kbe,copy:$be,determinant:Ibe,equals:Nbe,exactEquals:Pbe,frob:Cbe,fromRotation:gQ,fromScaling:vQ,fromTranslation:aO,identity:mQ,invert:oO,mul:Lbe,multiply:yQ,multiplyScalar:Rbe,multiplyScalarAndAdd:Obe,rotate:l1,scale:uE,set:xbe,str:Mbe,sub:Dbe,subtract:wQ,translate:C0},Symbol.toStringTag,{value:"Module"}));function Va(){return[1,0,0,1,0,0]}function Fbe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function jbe(e,t,r,i,s,n){return[e,t,r,i,s,n]}const Bbe=Va();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Bbe,clone:Fbe,create:Va,fromValues:jbe},Symbol.toStringTag,{value:"Module"}));const gw={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new $r({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ce.WebMercator}),minus180Line:new $r({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ce.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new $r({paths:[[[180,-180],[180,180]]],spatialReference:Ce.WGS84}),minus180Line:new $r({paths:[[[-180,-180],[-180,180]]],spatialReference:Ce.WGS84})}};function hp(e,t){return Math.ceil((e-t)/(2*t))}function bQ(e,t){const r=Fg(e);for(const i of r)for(const s of i)s[0]+=t;return e}function Fg(e){return rf(e)?e.rings:e.paths}function Ube(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function _Q(e){return typeof e=="string"?mi(e):H(e)}function Vbe(e,t,r){const i={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))i[s]=n.map((o=>Vbe(o)));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(r==null?void 0:r[s]);i[s]=t?o:JSON.stringify(o)}else i[s]=t?n:JSON.stringify(n);else i[s]=n}return i}function zbe(e,t){var r;return e?t&&NR(e)?t:PR(e)??((r=st==null?void 0:st.findCredential(e))==null?void 0:r.token):null}async function B6e(e,t,r){const i=zbe(e,t);if(i)return i;!st&&Pt.request.useIdentity&&await ce(()=>import("./IdentityManager-DGFZGQxo.js"),__vite__mapDeps([16,17]),import.meta.url);const s=await st.getCredential(e,r);return s==null?void 0:s.token}async function Gbe(e,t,r,i){const s=_Q(e),n=t[0].spatialReference,o={...i,responseType:"json",query:{...s.query,f:"json",sr:Hb(n),target:JSON.stringify({geometryType:em(t[0]),geometries:t}),cutter:JSON.stringify(r)}},l=await Nt(s.path+"/cut",o),{cutIndexes:p,geometries:m=[]}=l.data;return{cutIndexes:p,geometries:m.map((v=>{const _=Ya(v);return _.spatialReference=n,_}))}}function qbe(e){return{geometryType:em(e[0]),geometries:e.map((t=>t.toJSON()))}}function SQ(e,t,r){const i=Qae(t);return e.map((s=>{const n=i.fromJSON(s);return n.spatialReference=r,n}))}async function Hbe(e,t,r){const i=typeof e=="string"?mi(e):e,s=t[0].spatialReference,n=em(t[0]),o={...r,query:{...i.query,f:"json",sr:Hb(s),geometries:JSON.stringify(qbe(t))}},{data:l}=await Nt(i.path+"/simplify",o);return SQ(l.geometries,n,s)}const EQ=()=>de.getLogger("esri.geometry.support.normalizeUtils");function Wbe(e){return e.type==="polygon"}function Qbe(e){return e[0].type==="polygon"}function Jbe(e){return e[0].type==="polyline"}function WD(e){const t=[];let r=0,i=0;for(let s=0;s<e.length;s++){const n=e[s];let o=null;for(let l=0;l<n.length;l++)o=n[l],t.push(o),l===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function Zbe(e,t){if(!(e instanceof $r||e instanceof ur)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw EQ().error(s),new Q("internal:geometry",s)}const r=Fg(e),i=[];for(const s of r){const n=[];i.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const l=s[o][0],p=s[o][1],m=s[o+1][0],v=s[o+1][1],_=Math.sqrt((m-l)*(m-l)+(v-p)*(v-p)),E=(v-p)/_,$=(m-l)/_,M=_/t;if(M>1){for(let G=1;G<=M-1;G++){const W=G*t,Z=$*W+l,ie=E*W+p;n.push([Z,ie])}const k=(_+Math.floor(M-1)*t)/2,N=$*k+l,U=E*k+p;n.push([N,U])}n.push([m,v])}}return Wbe(e)?new ur({rings:i,spatialReference:e.spatialReference}):new $r({paths:i,spatialReference:e.spatialReference})}function QD(e,t,r){if(t){const i=Zbe(e,1e6);e=DA(i,!0)}return r&&(e=bQ(e,r)),e}function JD(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const s=hp(i,t);e[0]=i+s*(-2*t)}else if(i<r){const s=hp(i,r);e[0]=i+s*(-2*r)}}else{const i=e.x;if(i>t){const s=hp(i,t);e=e.clone().offset(s*(-2*t),0)}else if(i<r){const s=hp(i,r);e=e.clone().offset(s*(-2*r),0)}}return e}function Ybe(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const s=t.cutIndexes[i],n=t.geometries[i],o=Fg(n);for(let l=0;l<o.length;l++){const p=o[l];p.some((m=>{if(m[0]<180)return!0;{let v=0;for(let E=0;E<p.length;E++){const $=p[E][0];v=$>v?$:v}v=Number(v.toFixed(9));const _=-360*hp(v,180);for(let E=0;E<p.length;E++){const $=n.getPoint(l,E);n.setPoint(l,E,$.clone().offset(_,0))}return!0}}))}if(s===r){if(Qbe(e))for(const l of Fg(n))e[s]=e[s].addRing(l);else if(Jbe(e))for(const l of Fg(n))e[s]=e[s].addPath(l)}else r=s,e[s]=n}return e}async function Kbe(e,t,r){if(!Array.isArray(e))return Kbe([e],t);t&&typeof t!="string"&&EQ().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??Pt.geometryServiceUrl;let s,n,o,l,p,m,v,_,E=0;const $=[],M=[];for(const Z of e)if(Z!=null)if(s||(s=Z.spatialReference,n=Is(s),o=s.isWebMercator,m=o?102100:4326,l=gw[m].maxX,p=gw[m].minX,v=gw[m].plus180Line,_=gw[m].minus180Line),n)if(Z.type==="mesh")M.push(Z);else if(Z.type==="point")M.push(JD(Z.clone(),l,p));else if(Z.type==="multipoint"){const ie=Z.clone();ie.points=ie.points.map((ne=>JD(ne,l,p))),M.push(ie)}else if(Z.type==="extent"){const ie=Z.clone()._normalize(!1,!1,n);M.push(ie.rings?new ur(ie):ie)}else if(Z.extent){const ie=Z.extent,ne=hp(ie.xmin,p)*(2*l);let ge=ne===0?Z.clone():bQ(Z.clone(),ne);ie.offset(ne,0);let{xmin:we,xmax:xe}=ie;we=Number(we.toFixed(9)),xe=Number(xe.toFixed(9)),ie.intersects(v)&&xe!==l?(E=xe>E?xe:E,ge=QD(ge,o),$.push(ge),M.push("cut")):ie.intersects(_)&&we!==p?(E=xe*(2*l)>E?xe*(2*l):E,ge=QD(ge,o,360),$.push(ge),M.push("cut")):M.push(ge)}else M.push(Z.clone());else M.push(Z);else M.push(Z);let k=hp(E,l),N=-90;const U=k,G=new $r;for(;k>0;){const Z=360*k-180;G.addPath([[Z,N],[Z,-1*N]]),N*=-1,k--}if($.length>0&&U>0){const Z=Ybe($,await Gbe(i,$,G,r)),ie=[],ne=[];for(let xe=0;xe<M.length;xe++){const Ie=M[xe];if(Ie!=="cut")ne.push(Ie);else{const $e=Z.shift(),Re=e[xe];Re!=null&&Re.type==="polygon"&&Re.rings&&Re.rings.length>1&&$e.rings.length>=Re.rings.length?(ie.push($e),ne.push("simplify")):ne.push(o?Rc($e):$e)}}if(!ie.length)return ne;const ge=await Hbe(i,ie,r),we=[];for(let xe=0;xe<ne.length;xe++){const Ie=ne[xe];Ie!=="simplify"?we.push(Ie):we.push(o?Rc(ge.shift()):ge.shift())}return we}const W=[];for(let Z=0;Z<M.length;Z++){const ie=M[Z];if(ie!=="cut")W.push(ie);else{const ne=$.shift();W.push(o===!0?Rc(ne):ne)}}return W}function Xbe(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&Is(e.spatialReference);if(!r)return t;const[i,s]=r.valid,n=2*s,{width:o}=t;let l,{xmin:p,xmax:m}=t;if([p,m]=[m,p],e.type==="extent"||o===0||o<=s||o>n||p<i||m>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;l=WD(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;l=WD(e.paths);break;case"multipoint":l=e.points}const v=t.clone();for(let _=0;_<l.length;_++){let E=l[_][0];E<0?(E+=s,m=Math.max(E,m)):(E-=s,p=Math.min(E,p))}return v.xmin=p,v.xmax=m,v.width<o?(v.xmin-=s,v.xmax-=s,v):t}function lO(e,t,r){const i=Is(r);if(i==null)return e;const[s,n]=i.valid,o=2*n;let l=0,p=0;t>n?l=Math.ceil(Math.abs(t-n)/o):t<s&&(l=-Math.ceil(Math.abs(t-s)/o)),e>n?p=Math.ceil(Math.abs(e-n)/o):e<s&&(p=-Math.ceil(Math.abs(e-s)/o));let m=e+(l-p)*o;const v=m-t;return v>n?m-=o:v<s&&(m+=o),m}function U6e(e,t){const r=Is(t);if(r){const[i,s]=r.valid,n=s-i;if(e<i)for(;e<i;)e+=n;if(e>s)for(;e>s;)e-=n}return e}const TQ=96,$Q=39.37,e_e=180/Math.PI;function xQ(e){return e.wkid?e:e.spatialReference||Ce.WGS84}function uO(e,t){return t.type?ki(e,t.x,t.y):hf(e,t)}function IQ(e){return po(e)}function cE(e,t,r=0){let i=e.width,s=e.height;if(r!==0){const l=Wv(r),p=Math.abs(Math.cos(l)),m=Math.abs(Math.sin(l));i=e.width*p+e.height*m,s=e.width*m+e.height*p}const n=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/n,s/o)*l_e(e.spatialReference)}async function Wy(e,t,r,i){var l,p,m;let s,n;if(!e||Array.isArray(e)&&!e.length)return null;if(Te.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const v=e.every(($=>"attributes"in $)),_=e.some(($=>!$.geometry));let E=e;if(v&&_&&t&&t.allLayerViews){const $=new Map;for(const U of e){const G=U.layer,W=$.get(G)||[],Z=U.attributes[G.objectIdField];Z!=null&&W.push(Z),$.set(G,W)}const M=[];$.forEach(((U,G)=>{var Z;const W=(Z=t.allLayerViews)==null?void 0:Z.find((ie=>ie.layer.id===G.id));if(W&&"queryFeatures"in W){const ie=G.createQuery();ie.objectIds=U,ie.returnGeometry=!0,M.push(W.queryFeatures(ie))}}));const k=await Promise.all(M),N=[];for(const U of k)if(U&&U.features&&U.features.length)for(const G of U.features)G.geometry!=null&&N.push(G.geometry);E=N}for(const $ of E)i=await Wy($,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new Je(e);else if(e instanceof Ci)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const v=e.layer,_=(l=t.allLayerViews)==null?void 0:l.find((E=>E.layer.id===v.id));if(_&&"queryFeatures"in _){const E=v.createQuery();E.objectIds=[e.attributes[v.objectIdField]],E.returnGeometry=!0;const $=await _.queryFeatures(E);s=(m=(p=$==null?void 0:$.features)==null?void 0:p[0])==null?void 0:m.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new At({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=Xbe(s);break;default:n=s.extent}if(!n)return null;Au()||co(n.spatialReference,r)||await cu();const o=td(n,r);if(!o)return null;if(i){const v=o.center,_=v.clone();_.x=lO(v.x,i.center.x,r),_.x!==v.x&&o.centerAt(_),i=i.union(o)}else i=o;return i}function t_e(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const r=e.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(e)&&e.length&&e.every((r=>"layer"in r))){let r=0,i=0;for(const s of e){const n=s.layer;n!=null&&n.minScale&&n.maxScale&&(r=n.minScale<r?n.minScale:r,i=n.maxScale>i?n.maxScale:i)}return r&&i?{min:r,max:i}:null}}}function ZD(e,t){const r=xQ(e);return Jr(r,t)||r.imageCoordinateSystem||t.imageCoordinateSystem?e:td(e,t)}async function r_e(e,t){var N;if(!e||!t)return new fi({targetGeometry:new Je,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:s,viewpoint:n,size:o}=t,l=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let p=null;e instanceof fi?p=e:e.viewpoint?p=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(p=e.target);let m=null;p!=null&&p.targetGeometry?m=p.targetGeometry:e instanceof At?m=e:e instanceof Ci?m=await Wy(e,t,r):e&&(m=await Wy(e.center,t,r)||await Wy(e.target,t,r)||await Wy(e,t,r)),!m&&(n!=null&&n.targetGeometry)?m=n.targetGeometry:!m&&t.extent&&(m=t.extent),r||(r=xQ(t.spatialReference||t.extent||m)),Au()||Jr(m.spatialReference,r)||co(m.spatialReference,r)||await cu();const v=ZD(m,r),_="center"in v?v.center:v;t.pickClosestTarget!==!1&&_.type==="point"&&((N=n.targetGeometry)==null?void 0:N.type)==="point"&&(_.x=lO(_.x,n.targetGeometry.x,_.spatialReference));let E=0;p?E=p.rotation:e.hasOwnProperty("rotation")?E=e.rotation:n&&(E=n.rotation);let $=0;$=(p==null?void 0:p.targetGeometry)!=null&&p.targetGeometry.type==="point"?p.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(m)||m.type==="point"||m.type==="extent"&&m.width===0&&m.height===0?n.scale:cE(ZD(m.extent,r),l,E);const M=t_e(e.target??e);M&&(M.min&&M.min<$?$=M.min:M.max&&M.max>$&&($=M.max));let k=new fi({targetGeometry:_,scale:$,rotation:E});return i&&(k=i.fit(k),i.constrainByGeometry(k),i.rotationEnabled||(k.rotation=n.rotation)),k}function as(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function i_e(e,t,r){return r?ki(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):o1(e,t,.5)}const s_e=(function(){const e=xr();return function(t,r,i){const s=r.targetGeometry;uO(e,s);const n=.5*um(r);return t.xmin=e[0]-n*i[0],t.ymin=e[1]-n*i[1],t.xmax=e[0]+n*i[0],t.ymax=e[1]+n*i[1],t.spatialReference=s.spatialReference,t}})();function n_e(e,t,r,i,s){var n;return BC(e,t,r.center),e.scale=cE(r,i),(n=s==null?void 0:s.constraints)==null||n.constrain(e),e}function o_e(e,t,r,i){return pO(e,t,r,i),oO(e,e)}const MQ=(function(){const e=xr();return function(t,r,i){return nO(t,u_e(t,r),i_e(e,r,i))}})(),a_e=(function(){const e=Va(),t=xr();return function(r,i,s,n){const o=um(i),l=cO(i);return ki(t,o,o),vQ(e,t),l1(e,e,l),C0(e,e,MQ(t,s,n)),C0(e,e,[0,n.top-n.bottom]),ki(r,e[4],e[5])}})();function um(e){var t;return e.scale*CQ((t=e.targetGeometry)==null?void 0:t.spatialReference)}function CQ(e){return Tn(e)?1/(IQ(e)*$Q*TQ):1}function cO(e){return r4(e.rotation)||0}function l_e(e){return Tn(e)?IQ(e)*$Q*TQ:1}function u_e(e,t){return o1(e,t,.5)}const dO=(function(){const e=xr(),t=xr(),r=xr();return function(i,s,n,o,l,p){return uQ(e,s),o1(t,n,.5*p),ki(r,1/o*p,-1/o*p),aO(i,t),l&&l1(i,i,l),uE(i,i,r),C0(i,i,e),i}})(),pO=(function(){const e=xr();return function(t,r,i,s){const n=um(r),o=cO(r);return uO(e,r.targetGeometry),dO(t,e,i,n,o,s)}})(),c_e=(function(){const e=xr();return function(t,r,i,s){const n=um(r);return uO(e,r.targetGeometry),dO(t,e,i,n,0,s)}})();function kQ(e){const t=Is(e);return t?t.valid[1]-t.valid[0]:0}function d_e(e,t){return Math.round(kQ(e)/t)}const p_e=(function(){const e=xr(),t=xr(),r=[0,0,0];return function(i,s,n){vv(e,i,s),jC(e,e),vv(t,i,n),jC(t,t),dQ(r,e,t);let o=Math.acos(cQ(e,t)/(__(e)*__(t)))*e_e;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),h_e=(function(){const e=xr();return function(t,r,i,s){const n=t.targetGeometry;return as(t,r),a_e(e,r,i,s),n.x+=e[0],n.y+=e[1],t}})(),BC=function(e,t,r){as(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},A_e=(function(){const e=xr();return function(t,r,i,s,n){n||(n="center"),nO(e,i,s),o1(e,e,.5);const o=e[0],l=e[1];switch(n){case"center":ki(e,0,0);break;case"left":ki(e,-o,0);break;case"top":ki(e,0,l);break;case"right":ki(e,o,0);break;case"bottom":ki(e,0,-l);break;case"top-left":ki(e,-o,l);break;case"bottom-left":ki(e,-o,-l);break;case"top-right":ki(e,o,l);break;case"bottom-right":ki(e,o,-l)}return dE(t,r,e),t}})();function V6e(e,t,r){return as(e,t),e.rotation+=r,e}function f_e(e,t,r){return as(e,t),e.rotation=r,e}const m_e=(function(){const e=xr();return function(t,r,i,s,n){return as(t,r),isNaN(i)||i===0||(OQ(e,s,r,n),t.scale=r.scale*i,PQ(e,e,t,n),dE(t,t,ki(e,e[0]-s[0],s[1]-e[1]))),t}})();function YD(e,t,r){return as(e,t),e.scale=r,e}const RQ=(function(){const e=xr();return function(t,r,i,s,n,o){return as(t,r),isNaN(i)||i===0||(OQ(e,n,r,o),t.scale=r.scale*i,t.rotation+=s,PQ(e,e,t,o),dE(t,t,ki(e,e[0]-n[0],n[1]-e[1]))),t}})(),z6e=(function(){const e=xr(),t=xr();return function(r,i,s,n,o,l,p){return MQ(t,l,p),nQ(e,o,t),n?RQ(r,i,s,n,e,l):m_e(r,i,s,e,l)}})(),OQ=(function(){const e=Va();return function(t,r,i,s){return Oa(t,r,o_e(e,i,s,1))}})(),PQ=(function(){const e=Va();return function(t,r,i,s){return Oa(t,r,pO(e,i,s,1))}})(),dE=(function(){const e=xr(),t=Va();return function(r,i,s){as(r,i);const n=um(i),o=r.targetGeometry;return gQ(t,cO(i)),uE(t,t,a1(n,n)),Oa(e,s,t),o.x+=e[0],o.y+=e[1],r}})();function NQ(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function y_e(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function g_e(e,t,r,i,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function LQ(e,t,r,i){const s=t[i],n=t[i+1];e[i]=r[0]*s+r[2]*n+r[4],e[i+1]=r[1]*s+r[3]*n+r[5]}function v_e(e,t,r,i=0,s=0,n=2){const o=s||t.length/n;for(let l=i;l<o;l++)LQ(e,t,r,l*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:y_e,create:NQ,fromValues:g_e,transform:LQ,transformMany:v_e},Symbol.toStringTag,{value:"Module"}));function w_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function b_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function DQ(e,t,r,i,s,n,o,l,p,m){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=l,e[7]=p,e[8]=m,e}function FQ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function __e(e,t){if(e===t){const r=t[1],i=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function S_e(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],p=t[6],m=t[7],v=t[8],_=v*o-l*m,E=-v*n+l*p,$=m*n-o*p;let M=r*_+i*E+s*$;return M?(M=1/M,e[0]=_*M,e[1]=(-v*i+s*m)*M,e[2]=(l*i-s*o)*M,e[3]=E*M,e[4]=(v*r-s*p)*M,e[5]=(-l*r+s*n)*M,e[6]=$*M,e[7]=(-m*r+i*p)*M,e[8]=(o*r-i*n)*M,e):null}function E_e(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],p=t[6],m=t[7],v=t[8];return e[0]=o*v-l*m,e[1]=s*m-i*v,e[2]=i*l-s*o,e[3]=l*p-n*v,e[4]=r*v-s*p,e[5]=s*n-r*l,e[6]=n*m-o*p,e[7]=i*p-r*m,e[8]=r*o-i*n,e}function T_e(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],l=e[6],p=e[7],m=e[8];return t*(m*n-o*p)+r*(-m*s+o*l)+i*(p*s-n*l)}function hO(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],p=t[5],m=t[6],v=t[7],_=t[8],E=r[0],$=r[1],M=r[2],k=r[3],N=r[4],U=r[5],G=r[6],W=r[7],Z=r[8];return e[0]=E*i+$*o+M*m,e[1]=E*s+$*l+M*v,e[2]=E*n+$*p+M*_,e[3]=k*i+N*o+U*m,e[4]=k*s+N*l+U*v,e[5]=k*n+N*p+U*_,e[6]=G*i+W*o+Z*m,e[7]=G*s+W*l+Z*v,e[8]=G*n+W*p+Z*_,e}function UC(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],p=t[5],m=t[6],v=t[7],_=t[8],E=r[0],$=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=l,e[5]=p,e[6]=E*i+$*o+m,e[7]=E*s+$*l+v,e[8]=E*n+$*p+_,e}function jQ(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],l=t[4],p=t[5],m=t[6],v=t[7],_=t[8],E=Math.sin(r),$=Math.cos(r);return e[0]=$*i+E*o,e[1]=$*s+E*l,e[2]=$*n+E*p,e[3]=$*o-E*i,e[4]=$*l-E*s,e[5]=$*p-E*n,e[6]=m,e[7]=v,e[8]=_,e}function $_e(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function x_e(e,t,r){const i=r[0],s=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function I_e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function M_e(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function C_e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function k_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function R_e(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,l=i+i,p=s+s,m=r*o,v=i*o,_=i*l,E=s*o,$=s*l,M=s*p,k=n*o,N=n*l,U=n*p;return e[0]=1-_-M,e[3]=v-U,e[6]=E+N,e[1]=v+U,e[4]=1-m-M,e[7]=$-k,e[2]=E-N,e[5]=$+k,e[8]=1-m-_,e}function O_e(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],l=t[6],p=t[8],m=t[9],v=t[10],_=v*o-l*m,E=-v*n+l*p,$=m*n-o*p,M=r*_+i*E+s*$;if(!M)return null;const k=1/M;return e[0]=_*k,e[1]=(-v*i+s*m)*k,e[2]=(l*i-s*o)*k,e[3]=E*k,e[4]=(v*r-s*p)*k,e[5]=(-l*r+s*n)*k,e[6]=$*k,e[7]=(-m*r+i*p)*k,e[8]=(o*r-i*n)*k,e}function P_e(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],l=t[5],p=t[6],m=t[7],v=t[8],_=t[9],E=t[10],$=t[11],M=t[12],k=t[13],N=t[14],U=t[15],G=r*l-i*o,W=r*p-s*o,Z=r*m-n*o,ie=i*p-s*l,ne=i*m-n*l,ge=s*m-n*p,we=v*k-_*M,xe=v*N-E*M,Ie=v*U-$*M,$e=_*N-E*k,Re=_*U-$*k,pt=E*U-$*N;let qe=G*pt-W*Re+Z*$e+ie*Ie-ne*xe+ge*we;return qe?(qe=1/qe,e[0]=(l*pt-p*Re+m*$e)*qe,e[1]=(p*Ie-o*pt-m*xe)*qe,e[2]=(o*Re-l*Ie+m*we)*qe,e[3]=(s*Re-i*pt-n*$e)*qe,e[4]=(r*pt-s*Ie+n*xe)*qe,e[5]=(i*Ie-r*Re-n*we)*qe,e[6]=(k*ge-N*ne+U*ie)*qe,e[7]=(N*Z-M*ge-U*W)*qe,e[8]=(M*ne-k*Z+U*G)*qe,e):null}function N_e(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function L_e(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function D_e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function F_e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function BQ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function j_e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function B_e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function U_e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function V_e(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],p=e[6],m=e[7],v=e[8],_=t[0],E=t[1],$=t[2],M=t[3],k=t[4],N=t[5],U=t[6],G=t[7],W=t[8],Z=Ms();return Math.abs(r-_)<=Z*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-E)<=Z*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(s-$)<=Z*Math.max(1,Math.abs(s),Math.abs($))&&Math.abs(n-M)<=Z*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(o-k)<=Z*Math.max(1,Math.abs(o),Math.abs(k))&&Math.abs(l-N)<=Z*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(p-U)<=Z*Math.max(1,Math.abs(p),Math.abs(U))&&Math.abs(m-G)<=Z*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(v-W)<=Z*Math.max(1,Math.abs(v),Math.abs(W))}function z_e(e){const t=Ms(),r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5],p=e[6],m=e[7],v=e[8];return Math.abs(1-(r*r+n*n+p*p))<=t&&Math.abs(1-(i*i+o*o+m*m))<=t&&Math.abs(1-(s*s+l*l+v*v))<=t}const G_e=hO,q_e=BQ;Object.freeze(Object.defineProperty({__proto__:null,add:F_e,adjoint:E_e,copy:b_e,determinant:T_e,equals:V_e,exactEquals:U_e,frob:D_e,fromMat2d:k_e,fromMat4:w_e,fromQuat:R_e,fromRotation:M_e,fromScaling:C_e,fromTranslation:I_e,identity:FQ,invert:S_e,isOrthoNormal:z_e,mul:G_e,multiply:hO,multiplyScalar:j_e,multiplyScalarAndAdd:B_e,normalFromMat4:P_e,normalFromMat4Legacy:O_e,projection:N_e,rotate:jQ,scale:$_e,scaleByVec2:x_e,set:DQ,str:L_e,sub:q_e,subtract:BQ,translate:UC,transpose:__e},Symbol.toStringTag,{value:"Module"}));function J2(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function H_e(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function W_e(e,t,r,i,s,n,o,l,p){const m=new Float32Array(9);return m[0]=e,m[1]=t,m[2]=r,m[3]=i,m[4]=s,m[5]=n,m[6]=o,m[7]=l,m[8]=p,m}Object.freeze(Object.defineProperty({__proto__:null,clone:H_e,create:J2,fromValues:W_e},Symbol.toStringTag,{value:"Module"}));function UQ(){return new Float32Array(2)}function Q_e(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function k0(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function VQ(){return UQ()}function zQ(){return k0(1,1)}function GQ(){return k0(1,0)}function qQ(){return k0(0,1)}const J_e=VQ(),Z_e=zQ(),Y_e=GQ(),K_e=qQ();Object.freeze(Object.defineProperty({__proto__:null,ONES:Z_e,UNIT_X:Y_e,UNIT_Y:K_e,ZEROS:J_e,clone:Q_e,create:UQ,fromValues:k0,ones:zQ,unitX:GQ,unitY:qQ,zeros:VQ},Symbol.toStringTag,{value:"Module"}));function X_e(e){return e instanceof Float32Array&&e.length>=2}function eSe(e){return Array.isArray(e)&&e.length>=2}function G3(e){return X_e(e)||eSe(e)}var VC;const nl=[0,0];let El=VC=class extends ee{constructor(e){super(e),this._viewpoint2D={center:xr(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new At,this.id=0,this.inverseTransform=Va(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Va(),this.transformNoRotation=Va(),this.displayMat3=J2(),this.displayViewMat3=J2(),this.viewMat3=J2(),this.viewMat2d=NQ(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=as(r,e.viewpoint),this._set("size",hf(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new VC({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return G3(t)?Oa(e,t,this.inverseTransform):(nl[0]=t,nl[1]=r,Oa(e,nl,this.inverseTransform))}toScreen(e,t,r){return G3(t)?Oa(e,t,this.transform):(nl[0]=t,nl[1]=r,Oa(e,nl,this.transform))}toScreenNoRotation(e,t,r){return G3(t)?Oa(e,t,this.transformNoRotation):(nl[0]=t,nl[1]=r,Oa(e,nl,this.transformNoRotation))}wrapMapCoordinate(e,t){hf(e,t);const[r]=t,[i]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:l}=s;if(n.isWrappable){const p=kQ(n)/2;o=Math.max(o,i-p),l=Math.min(l,i+p)}return(r<o||r>l)&&(e[0]=lO(r,i,n)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size");return dO(e,r,s,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new fi({targetGeometry:new Je(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!n||!t||!r)return;this.resolution=um(o),this.rotation=i,this.scale=r,this.spatialReference=t,hf(this.center,e);const l=n[0]!==0?2/n[0]:0,p=n[1]!==0?-2/n[1]:0;DQ(this.displayMat3,l,0,0,0,p,0,-1,1,1);const m=FQ(this.viewMat3),v=k0(n[0]/2,n[1]/2),_=k0(-n[0]/2,-n[1]/2),E=r4(i);UC(m,m,v),jQ(m,m,E),UC(m,m,_),hO(this.displayViewMat3,this.displayMat3,m);const $=aO(this.viewMat2d,v);return l1($,$,E),C0($,$,_),s_e(this.extent,o,n),pO(this.transform,o,n,s),oO(this.inverseTransform,this.transform),c_e(this.transformNoRotation,o,n,s),this.worldScreenWidth=d_e(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};a([A({readOnly:!0})],El.prototype,"id",void 0),a([A({value:1,json:{write:!0}})],El.prototype,"pixelRatio",null),a([A({json:{write:!0}})],El.prototype,"size",null),a([A()],El.prototype,"spatialReference",void 0),a([A({type:fi,json:{write:!0}})],El.prototype,"viewpoint",null),a([A({readOnly:!0})],El.prototype,"visibleArea",null),El=VC=a([P("esri.views.2d.ViewState")],El);const KD=El;var zC,GC;let Wl=zC=class extends je{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new zC({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};a([A()],Wl.prototype,"left",void 0),a([A()],Wl.prototype,"top",void 0),a([A()],Wl.prototype,"right",void 0),a([A()],Wl.prototype,"bottom",void 0),Wl=zC=a([P("esri.views.2d.PaddedViewState.Padding")],Wl);let pA=GC=class extends KD{constructor(...e){super(...e),this.paddedViewState=new KD,this._updateContent=(()=>{const t=xr();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const s=this.paddedViewState;ki(t,i.left+i.right,i.top+i.bottom),vv(t,r,t),hf(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(Qe((()=>[this.size,this.padding]),(()=>this._updateContent()),Wa)),this.padding=new Wl,this.size=[0,0]}set padding(e){this._set("padding",e||new Wl)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const r=this._get("padding");r&&(t=h_e(e.clone(),e,this._get("size"),r));const{targetGeometry:i,rotation:s,scale:n}=t,{x:o,y:l,spatialReference:p}=i,m=this._viewpoint2D;m.center[0]=o,m.center[1]=l,m.rotation=s,m.scale=n,m.spatialReference=p,this._update()}}clone(){return new GC({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};a([A()],pA.prototype,"paddedViewState",void 0),a([A({type:Wl})],pA.prototype,"padding",null),a([A()],pA.prototype,"viewpoint",null),pA=GC=a([P("esri.views.2d.PaddedViewState")],pA);const AO=pA;var Xi;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Xi||(Xi={}));const HQ=Symbol("Yield");let tSe=class{constructor(){this._tasks=new Array,this._numPendingTasks=Xp(0),this._running=Xp(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get running(){return this._running.value}_updateRunning(){this._running.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return HQ;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,i){return new Promise(((s,n)=>{this._tasks.push(new XD(s,n,t,r,i)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}unshift(t,r,i){return new Promise(((s,n)=>{this._tasks.unshift(new XD(s,n,t,r,i)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}_process(t){var i;if(this._tasks.length===0)return!1;const r=this._tasks.shift();this._updateRunning();try{const s=oo(r.signal);if(s&&!r.abortCallback)r.reject(rr());else{const n=s?(i=r.abortCallback)==null?void 0:i.call(r,rr()):r.callback(t);Xa(n)?n.then(r.resolve,r.reject):r.resolve(n)}}catch(s){r.reject(s)}return!0}cancelAll(){const t=rr();for(const r of this._tasks)if(r.abortCallback){const i=r.abortCallback(t);r.resolve(i)}else r.reject(t);this._tasks.length=0,this._updateRunning()}},XD=class{constructor(t,r,i,s=void 0,n=void 0){this.resolve=t,this.reject=r,this.callback=i,this.signal=s,this.abortCallback=n}},Qy=class extends je{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};a([A()],Qy.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),a([A()],Qy.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Qy=a([P("esri.views.support.debugFlags")],Qy);const rSe=new Qy;function iSe(){return new S_.Scheduler}var bt;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.OVERLAY_RENDERER="overlay renderer",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(bt||(bt={}));const Qn=0,eF=new Map([[bt.RESOURCE_CONTROLLER_IMMEDIATE,Qn],[bt.RESOURCE_CONTROLLER,4],[bt.SLIDE,Qn],[bt.STREAM_DATA_LOADER,Qn],[bt.ELEVATION_QUERY,Qn],[bt.TERRAIN_SURFACE,1],[bt.SURFACE_GEOMETRY_UPDATES,1],[bt.LOD_RENDERER,2],[bt.GRAPHICS_CORE,2],[bt.I3S_CONTROLLER,2],[bt.POINT_CLOUD_LAYER,2],[bt.FEATURE_TILE_FETCHER,2],[bt.CLOUDS_GENERATOR,2],[bt.OVERLAY,4],[bt.OVERLAY_RENDERER,4],[bt.STAGE,4],[bt.GRAPHICS_DECONFLICTOR,4],[bt.FILTER_VISIBILITY,4],[bt.SCALE_VISIBILITY,4],[bt.FRUSTUM_VISIBILITY,4],[bt.POINT_OF_INTEREST_FREQUENT,6],[bt.POINT_OF_INTEREST_INFREQUENT,30],[bt.LABELER,8],[bt.FEATURE_QUERY_ENGINE,8],[bt.FEATURE_TILE_TREE,16],[bt.FEATURE_TILE_TREE_ACTIVE,Qn],[bt.ELEVATION_ALIGNMENT,12],[bt.ELEVATION_ALIGNMENT_SCENE,14],[bt.TEXT_TEXTURE_ATLAS,12],[bt.TEXTURE_UNLOAD,12],[bt.LINE_OF_SIGHT_TOOL,16],[bt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Qn],[bt.SNAPPING,Qn],[bt.SHADOW_ACCUMULATOR,30],[bt.MAPVIEW_FETCH_QUEUE,Qn],[bt.MAPVIEW_LAYERVIEW_UPDATE,2],[bt.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Qn]]);function tF(e){return eF.has(e)?eF.get(e):typeof e=="number"?e:1}const sSe=6.5,rF=1,nSe=30,oSe=1e3/30,aSe=100,iF=.9;var S_,hd;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((n=>n.needsUpdate))}constructor(){this._updating=Xp(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new ag("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=Xi.INTERACTING,this._tasks=new lg,this._runQueue=new lg,this._load=0,this._idleStateCallbacks=new lg,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Qe((()=>rSe.SCHEDULER_LOG_SLOW_TASKS),(n=>this._debug=n),Vi);for(const n of Object.keys(bt))this.performanceInfo.tasks.set(bt[n],new ag(bt[n]))}destroy(){this._tasks.toArray().forEach((n=>n.remove())),this._tasks.clear(),vr(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())})))}registerTask(n,o){const l=new r(this,n,o);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new ag(n)),l}registerIdleStateCallbacks(n,o){const l={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(l),this.state===Xi.IDLE&&this._idleUpdatesStartFired&&l.idleBegin();const p=this;return{remove:()=>this._removeIdleStateCallbacks(l),set idleBegin(m){p._idleUpdatesStartFired&&(l.idleEnd(),p._state===Xi.IDLE&&m()),l.idleBegin=m},set idleEnd(m){l.idleEnd=m}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==Xi.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((o=>o.idleEnd()))))}get state(){return this._state}frame(n){this._startFrameTaskTimes();const o=this._updateBudget(n);if(o){const l=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-l)}else this._recordFrameTaskTimes(0);return o}_updateBudget(n){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=sSe,l=n.frameDuration,p=rF;switch(this.state){case Xi.IDLE:o=0,l=Math.max(aSe,n.frameDuration),p=nSe;break;case Xi.INTERACTING:l=Math.max(oSe,n.frameDuration);case Xi.ANIMATING:}return l=l-n.elapsedFrameTime-o,this.state!==Xi.IDLE&&l<rF&&!this._forceTask?(this._forceTask=!0,!1):(l=Math.max(l,p),this._budget.reset(l),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Xi.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((n=>n.idleBegin()))),this._runIdle();break;case Xi.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll((o=>{o.name===n&&o.setPriority(n)}))}_getState(n){if(this._runQueue.some((l=>l.name===n)))return hd.SCHEDULED;let o=hd.IDLE;return this._tasks.forAll((l=>{l.name===n&&l.needsUpdate&&(l.schedulePriority<=1?o=hd.READY:o!==hd.READY&&(o=hd.WAITING))})),o}_getRuntime(n){let o=0;return this._tasks.forAll((l=>{l.name===n&&(o+=l.runtime)})),o}_resetRuntimes(){this._tasks.forAll((n=>n.runtime=0))}_getRunning(){const n=new Map;if(this._tasks.forAll((l=>{l.needsUpdate&&n.set(l.name,(n.get(l.name)||0)+1)})),n.size===0)return null;let o="";return n.forEach(((l,p)=>{o+=l>1?` ${l}x ${p}`:` ${p}`})),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce(((o,l)=>l.needsUpdate?++o:o),0);this._load=this._load*iF+n*(1-iF)}_schedule(){for(this._runQueue.filterInPlace((n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1))),this._tasks.forAll((n=>{n.basePriority===Qn&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)}));this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll((l=>{l.needsUpdate&&l.schedulePriority!==0&&l.basePriority!==Qn&&l.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,l.basePriority),l.schedulePriority===1?(l.schedulePriority=0,this._runQueue.push(l)):--l.schedulePriority)})),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const n=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===HQ&&(o.blockFrame=this._frameNumber)}catch(p){de.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,p),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,bt.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const l=this._budget.now()-n;if(o.runtime+=l,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+l),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const n of Object.keys(bt))this._frameTaskTimes.set(bt[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach(((o,l)=>this.performanceInfo.tasks.get(l).push(o))),this.performanceInfo.total.push(n)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,o,l){this._scheduler=n,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new tSe,this._handles=new F0,this._basePriority=tF(o),this.schedulePriority=this._basePriority,this._task=Xp(l??this._queue),this._handles.add(ks((()=>this.task.running),(p=>n.taskRunningChanged(p))))}remove(){this.processQueue(fO),this._scheduler.removeTask(this),this.schedule=sF.schedule,this.reschedule=sF.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){if(this.name===n)return;this.name=n;const o=tF(n);this._basePriority!==Qn&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,l){return this._queue.push(n,o,l)}reschedule(n,o,l){return this._queue.unshift(n,o,l)}processQueue(n){return this._queue.runTask(n)}}class i{constructor(){this._begin=(performance==null?void 0:performance.now())??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n){this._begin=this.now(),this._budget=n,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i})(S_||(S_={})),(function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"})(hd||(hd={}));const fO=new S_.Budget;fO.enabled=!1;let lSe=class{remove(){}processQueue(){}schedule(t,r,i){try{if(oo(r)){const s=rr();return i?Promise.resolve(i(s)):Promise.reject(s)}return m$(t(fO))}catch(s){return Promise.reject(s)}}reschedule(t,r,i){return this.schedule(t,r,i)}};const sF=new lSe;let uSe=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=iSe(),this._schedulerHandle=ks((()=>this._scheduler.updating),(()=>this.requestFrame())),this.stationary=!0,this.prepare=()=>{var r;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((r=this.view.animation)==null?void 0:r.target)==null||Xa(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{var l,p,m;if(this._updateRequested=!1,(l=this.view)==null?void 0:l.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:n,state:{id:o}}=this.view;i==null||i.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),(p=this.view.graphicsTileStore)==null||p.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=Xi.ANIMATING:this.view.interacting?this._scheduler.state=Xi.INTERACTING:this._scheduler.state=Xi.IDLE,this._scheduler.frame(r)||this._updateRequested||this._scheduler.state!==Xi.IDLE||((m=this._frameTaskHandle)==null||m.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new AO,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Qe((()=>t.stationary),(r=>{this.stationary=r,this.requestFrame()})),this._frameTaskHandle=A0(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var s;if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((s=t.layerViews)==null||s.forEach(this._updateLayerView,this))}};function cSe(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let s,n,o,l;const p=[0,0],m=dSe(e);for(let E=0;E<m.length;E++){const $=m[E];for(let M=0;M<$.length-1;M++){mae(p,i,$,M);const k=lE(i,p);(s==null||k<s)&&(s=k,n=[...p],o=E,l=M)}}if(s==null||!n||o==null||l==null)throw new Q("nearest-coordinate:failed","Failed to find the nearest coordinate");const[v,_]=n;return{coordinate:new Je({x:v,y:_,spatialReference:r}),distance:s}}function dSe(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}var qC;let sp=qC=class extends J0.NumericIdentifiableMixin(je){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return td(this.geometry,this.spatialReference)}catch(e){return de.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Jv(this.normalizedGeometry,r):UR(this.normalizedGeometry,r))return e;const{coordinate:i}=cSe(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new qC({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};a([A({constructOnly:!0})],sp.prototype,"geometry",void 0),a([A({readOnly:!0})],sp.prototype,"normalizedGeometry",null),a([A({constructOnly:!0})],sp.prototype,"spatialReference",void 0),sp=qC=a([P("esri.views.2d.constraints.GeometryConstraint")],sp);var HC;let Jy=HC=class extends J0.NumericIdentifiableMixin(je){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new HC({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};a([A()],Jy.prototype,"enabled",void 0),a([A()],Jy.prototype,"rotationEnabled",void 0),Jy=HC=a([P("esri.views.2d.constraints.RotationConstraint")],Jy);const WQ=Jy;var WC;let Us=WC=class extends J0.NumericIdentifiableMixin(je){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:s,maxZoom:n}=this,o=-1,l=-1,p=!1,m=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!(t!=null&&t.length))return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map((v=>v.clone())),t.sort(((v,_)=>_.scale-v.scale)),t.forEach(((v,_)=>v.level=_));for(const v of t)!p&&r>0&&r>=v.scale&&(o=v.level,p=!0),!m&&i>0&&i>=v.scale&&(l=e?e.level:-1,m=!0),e=v;s===-1&&(s=r===0?0:o),n===-1&&(n=i===0?t.length-1:l),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),r=t[s].scale,i=t[n].scale,t.splice(0,s),t.splice(n-s+1),t.forEach(((v,_)=>{this._lodByScale[v.scale]=v,this._scales[_]=v.scale})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=i!==0&&e.scale<i,l=r!==0&&e.scale>r;if(o||l){const p=l?r:i;if(t&&n){const m=(p-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*m,s.y=n.y+(s.y-n.y)*m}e.scale=p}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(r=t[s],i=t[s+1],i===e)return s+this.effectiveMinZoom+1;if(r>e&&i<e)return s+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new WC({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t),this._scales[0])),this._lodByScale[e].scale}};a([A({readOnly:!0})],Us.prototype,"effectiveLODs",void 0),a([A({readOnly:!0})],Us.prototype,"effectiveMinZoom",void 0),a([A({readOnly:!0})],Us.prototype,"effectiveMaxZoom",void 0),a([A({readOnly:!0})],Us.prototype,"effectiveMinScale",void 0),a([A({readOnly:!0})],Us.prototype,"effectiveMaxScale",void 0),a([A()],Us.prototype,"lods",void 0),a([A()],Us.prototype,"minZoom",void 0),a([A()],Us.prototype,"maxZoom",void 0),a([A()],Us.prototype,"minScale",void 0),a([A()],Us.prototype,"maxScale",void 0),a([A()],Us.prototype,"snapToZoom",void 0),Us=WC=a([P("esri.views.2d.constraints.ZoomConstraint")],Us);const QQ=Us,pSe={base:null,key:"type",typeMap:{extent:At,polygon:ur}};let Cr=class extends je{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Te}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var r,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new sp({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new WQ({rotationEnabled:this.rotationEnabled})}get _zoom(){var p;const t=this._get("_zoom"),r=this.lods||((p=this.view)==null?void 0:p.constraintsInfo.lods),i=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,l=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===s&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===l?t:new QQ({lods:r,minZoom:i,maxZoom:s,minScale:n,maxScale:o,snapToZoom:l})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach((i=>i.constrain(t,r))),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach((r=>{var i;return(i=r.applyPanConstraint)==null?void 0:i.call(r,t)})),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};a([A({readOnly:!0})],Cr.prototype,"effectiveLODs",null),a([A({readOnly:!0})],Cr.prototype,"effectiveMinScale",null),a([A({readOnly:!0})],Cr.prototype,"effectiveMaxScale",null),a([A({readOnly:!0})],Cr.prototype,"effectiveMinZoom",null),a([A({readOnly:!0})],Cr.prototype,"effectiveMaxZoom",null),a([A({types:pSe,value:null})],Cr.prototype,"geometry",null),a([A({type:[Ui]})],Cr.prototype,"lods",void 0),a([A()],Cr.prototype,"minScale",void 0),a([A()],Cr.prototype,"maxScale",void 0),a([A()],Cr.prototype,"minZoom",void 0),a([A()],Cr.prototype,"maxZoom",void 0),a([A()],Cr.prototype,"rotationEnabled",void 0),a([A()],Cr.prototype,"snapToZoom",void 0),a([A({type:Te})],Cr.prototype,"customConstraints",void 0),a([A()],Cr.prototype,"view",void 0),a([A({readOnly:!0})],Cr.prototype,"version",null),a([A({type:sp,readOnly:!0})],Cr.prototype,"_geometry",null),a([A({type:WQ})],Cr.prototype,"_rotation",null),a([A({readOnly:!0,type:QQ})],Cr.prototype,"_zoom",null),Cr=a([P("esri.views.2d.MapViewConstraints")],Cr);const nF=Cr;let Yi=class extends je{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Qe((()=>{var r;return(r=this.constraints)==null?void 0:r.version}),(r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))}),Wa)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new Je({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void de.getLogger(this).error(new Q("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:s}))}const i=this.viewpoint;BC(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void de.getLogger(this).error(new Q("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void de.getLogger(this).error(new Q("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;n_e(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;f_e(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;YD(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var n;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new Q("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new Q("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new Q("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void de.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new fi({targetGeometry:new Je,scale:0,rotation:0});as(s,r),(n=this.constraints)==null||n.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var s,n;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((s=this.constraints)==null?void 0:s.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;YD(i,i,r),this.viewpoint=i,this._set("zoom",((n=this.constraints)==null?void 0:n.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),l=this._get("rotation"),p=this._get("viewpoint"),m=this._get("zoom"),v=m!=null&&i!=null&&i.zoomToScale(m)||void 0;let _,E,$;const M=p==null?void 0:p.rotation,k=p==null?void 0:p.targetGeometry;(k==null?void 0:k.type)==="extent"?_=k:(k==null?void 0:k.type)==="point"&&(E=k,$=p==null?void 0:p.scale);const N=n??_;return{center:s??E??(N==null?void 0:N.center),rotation:l??M,scale:(o??v??$??(N&&cE(N,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,s){var o;const n=t.targetGeometry;try{this._project(t,i)}catch(l){de.getLogger(this).warn(new kn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:i,error:l})),t.targetGeometry=s||new Je({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new AO({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new Je({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(t){var p;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const m=r.viewpoint.clone();m.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=m}const i=r.clone(),[s,n]=r.center;let o=null;try{o=this._project(new Je({x:s,y:n,spatialReference:r.spatialReference}),t)}catch(m){LR()||de.getLogger(this).warn(new kn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:m}))}o||(o=new Je({x:0,y:0,spatialReference:t}));const l=BC(new fi({targetGeometry:new Je,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=l;try{const v=[r.size[0]/2,r.size[1]/2],_=[v[0]+20,v[1]],E=r.toMap([0,0],_),{x:$,y:M}=this._project(new Je({x:E[0],y:E[1],spatialReference:r.spatialReference}),t);E[0]=$,E[1]=M,i.toScreen(E,E);const k=p_e(v,E,_),N=Math.hypot(E[0]-v[0],E[1]-v[1])/20;!Number.isFinite(N)||Math.abs(N)>4?(l.rotation=0,l.targetGeometry=new Je({x:0,y:0,spatialReference:t})):(l.scale*=N,l.scale>K("mapview-srswitch-adjust-rotation-scale-threshold")?l.rotation=0:l.rotation+=Number.isFinite(k)?k:0)}catch{}(p=this._get("constraints"))==null||p.constrain(l,void 0),this._get("state").viewpoint=l}resize(t,r){var o;if(!this.ready)return;const i=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();i.size=[t,r],A_e(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=((o=this.constraints)==null?void 0:o.constrain(s,void 0))??s,this.state.viewpoint=s}toMap(t){if(!this.ready)return null;const r=[0,0],[i,s]=this.state.toMap(r,[t.x,t.y]),n=this.state.spatialReference;return new Je({x:i,y:s,spatialReference:n})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),s=[i.x,i.y];return(r==null?void 0:r.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Oi(s[0],s[1])}_project(t,r){var n;const i=(t==null?void 0:t.targetGeometry)||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||(n=i.spatialReference)!=null&&n.imageCoordinateSystem||Jr(r,i.spatialReference))return t;const s=td(i,r);if(!s)throw new Q("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return hSe(t)?(t.targetGeometry=s,t):s}};function hSe(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}a([A({type:Je})],Yi.prototype,"center",null),a([A()],Yi.prototype,"constraints",void 0),a([A({type:At})],Yi.prototype,"extent",null),a([A({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Yi.prototype,"padding",null),a([A()],Yi.prototype,"ready",void 0),a([A()],Yi.prototype,"resizeAlign",void 0),a([A({readOnly:!0})],Yi.prototype,"resolution",null),a([A({type:Number})],Yi.prototype,"rotation",null),a([A({type:Number})],Yi.prototype,"scale",null),a([A({readOnly:!0})],Yi.prototype,"state",void 0),a([A({type:fi})],Yi.prototype,"viewpoint",null),a([A({readOnly:!0})],Yi.prototype,"visibleArea",null),a([A()],Yi.prototype,"zoom",null),Yi=a([P("esri.views.2d.ViewStateManager")],Yi);const oF=160;let Zy=class extends je{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval((()=>{performance.now()-this._timestamp>=oF&&this.clear()}),oF))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};a([A()],Zy.prototype,"_timer",void 0),a([A()],Zy.prototype,"stationary",null),Zy=a([P("esri.views.2d.support.StationaryManager")],Zy);const ASe=e=>{let t=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Yi({constraints:new nF({view:this})}),this.stationaryManager=new Zy,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new uSe(this),this.viewEvents=new qW(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Qe((()=>this.viewpoint),(()=>this.stationaryManager.flip()),Wa)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var r;return((r=this.stateManager)==null?void 0:r.extent)??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{var n;this.destroyed||r===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame())};r.when(s,s)}get constraints(){var r;return(r=this.stateManager)==null?void 0:r.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i==null||i.destroy()}get padding(){var r;return(r=this.stateManager)==null?void 0:r.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return a([A({readOnly:!0})],t.prototype,"animationManager",void 0),a([A({readOnly:!0})],t.prototype,"fullOpacity",void 0),a([A()],t.prototype,"stateManager",void 0),a([A()],t.prototype,"constraintsInfo",null),a([A()],t.prototype,"extent",null),a([A({readOnly:!0})],t.prototype,"state",null),a([A({readOnly:!0})],t.prototype,"mapViewNavigation",void 0),a([A()],t.prototype,"renderingOptions",void 0),a([A({readOnly:!0})],t.prototype,"interacting",null),a([A()],t.prototype,"stationary",null),a([A()],t.prototype,"animation",null),a([A({type:nF})],t.prototype,"constraints",null),a([A()],t.prototype,"padding",null),a([A()],t.prototype,"resizeAlign",null),a([A()],t.prototype,"rotation",null),a([A({readOnly:!0})],t.prototype,"viewEvents",void 0),a([A({type:fi})],t.prototype,"viewpoint",null),t=a([P("esri.views.Viewport2DBaseMixin")],t),t};let qu=class extends Fa{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Cn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new Q("view:animation-stopped","ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=Xa(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};a([A({readOnly:!0})],qu.prototype,"done",null),a([A({readOnly:!0,type:String})],qu.prototype,"state",void 0),a([A()],qu.prototype,"target",void 0),qu=a([P("esri.views.ViewAnimation")],qu),(function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}})(qu||(qu={}));const QC=qu;let Z2=class extends je{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void de.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new QC;this.view.animation=i,await Qv((()=>this.view.ready),r);const s={...r,animate:(r==null?void 0:r.animate)??!YW(),animationMode:(r==null?void 0:r.animationMode)??"auto"},{extent:n,spatialReference:o,size:l,viewpoint:p,constraints:m,padding:v,allLayerViews:_}=this.view,E=r_e(t,{extent:n,spatialReference:o,size:l,viewpoint:p,constraints:m,padding:v,allLayerViews:_,pickClosestTarget:(r==null?void 0:r.pickClosestTarget)??!0});return i==null||i.update(E),this._gotoTask={},s.animate?this._gotoAnimated(E,s):this._gotoImmediate(E,s)}_gotoImmediate(t,r){const i=this._gotoTask,s=this.view.animation,n=t.then((o=>{if(dr(r),i!==this._gotoTask)throw new Q("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()}));return this._cancellableGoTo(i,s,n,r)}_gotoAnimated(t,r){const i=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=t.then((o=>{if(dr(r),i!==this._gotoTask)throw new Q("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,r),s.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(i,s,n,r)}_cancellableGoTo(t,r,i,s){const n=()=>t===this._gotoTask;return Sj(i,s).finally((()=>{n()&&(r.done||r.stop())}))}};a([A({constructOnly:!0})],Z2.prototype,"view",void 0),Z2=a([P("esri.views.2d.GoToManager")],Z2);function JQ(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}function ZQ(e,t){return t.some((r=>JQ(e,r)))}function aF(e,{dragPrimary:t,dragSecondary:r,dragTertiary:i}){return[{key:"primary",value:t},{key:"secondary",value:r},{key:"tertiary",value:i}].filter((s=>s.value===e)).map((s=>s.key))}let lF=class extends yi{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,(i=>this._handleDoubleClick(i,r)))}_handleDoubleClick(t,r){JQ(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},fSe=class extends yi{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,(s=>this._handleDoubleTapDrag(s)))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=r,{view:o}=this,{mapViewNavigation:l}=o;switch(s){case"begin":{const{scale:p}=o;this._startScale=p,this._currentScale=p,this._previousDelta=n,l.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const p=1.015**n.y,m=this._startScale*p,v=m/this._currentScale;l.setViewpointImmediate(v),this._currentScale=m;break}case"end":{const{constraints:p}=o,{effectiveLODs:m,snapToZoom:v}=p;if(!v||!m)return void l.end();const _=p.snapScale(this._currentScale),E=(n.y>0?Math.max(_,p.snapToPreviousScale(this._startScale)):Math.min(_,p.snapToNextScale(this._startScale)))/this._currentScale;l.zoom(E).then((()=>{l.end()}));break}}}},pE=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,i;this._startEvent=t,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},mSe=class extends yi{constructor(t,r,i){super(!0),this.view=t,this.pointerActions=r,this.registerIncoming("drag",i,(s=>this._handleDrag(s))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(t){super.onInstall(t),this._dragEventSeparator=new pE({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&ZQ(i.data,this.pointerActions)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},ySe=class extends yi{constructor(t,r,i){super(!0),this._view=t,this.pointerActions=r;const s=this._view.mapViewNavigation;this._dragEventSeparator=new pE({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&ZQ(o.data,this.pointerActions)}),this.registerIncoming("drag",i,(n=>this._dragEventSeparator.handle(n)))}};function YQ(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function gSe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function vSe(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function wSe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function KQ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function XQ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function eJ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function bSe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function _Se(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function SSe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function ESe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function TSe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function $Se(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function xSe(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function ISe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function tJ(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function MSe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function rJ(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}function iJ(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return r*r+i*i+s*s}function sJ(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function CSe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function kSe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function JC(e,t){const r=t[0],i=t[1],s=t[2];let n=r*r+i*i+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function nJ(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function RSe(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],l=r[1],p=r[2];return e[0]=s*p-n*l,e[1]=n*o-i*p,e[2]=i*l-s*o,e}function OSe(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],l=r[1],p=r[2],m=s*p-n*l,v=n*o-i*p,_=i*l-s*o,E=Math.sqrt(m*m+v*v+_*_);return e[0]=m/E,e[1]=v/E,e[2]=_/E,e}function PSe(e,t,r,i){const s=t[0],n=t[1],o=t[2];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e}function NSe(e,t,r,i,s,n){const o=n*n,l=o*(2*n-3)+1,p=o*(n-2)+n,m=o*(n-1),v=o*(3-2*n);return e[0]=t[0]*l+r[0]*p+i[0]*m+s[0]*v,e[1]=t[1]*l+r[1]*p+i[1]*m+s[1]*v,e[2]=t[2]*l+r[2]*p+i[2]*m+s[2]*v,e}function LSe(e,t,r,i,s,n){const o=1-n,l=o*o,p=n*n,m=l*o,v=3*n*l,_=3*p*o,E=p*n;return e[0]=t[0]*m+r[0]*v+i[0]*_+s[0]*E,e[1]=t[1]*m+r[1]*v+i[1]*_+s[1]*E,e[2]=t[2]*m+r[2]*v+i[2]*_+s[2]*E,e}function DSe(e,t=1){const r=DS,i=2*r()*Math.PI,s=2*r()-1,n=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=s*t,e}function FSe(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12],e[1]=r[1]*i+r[5]*s+r[9]*n+r[13],e[2]=r[2]*i+r[6]*s+r[10]*n+r[14],e}function jSe(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=i*r[0]+s*r[3]+n*r[6],e[1]=i*r[1]+s*r[4]+n*r[7],e[2]=i*r[2]+s*r[5]+n*r[8],e}function BSe(e,t,r){const i=r[0],s=r[1],n=r[2],o=r[3],l=t[0],p=t[1],m=t[2],v=s*m-n*p,_=n*l-i*m,E=i*p-s*l,$=s*E-n*_,M=n*v-i*E,k=i*_-s*v,N=2*o;return e[0]=l+v*N+2*$,e[1]=p+_*N+2*M,e[2]=m+E*N+2*k,e}function USe(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0],n[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),n[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function VSe(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),n[1]=s[1],n[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function zSe(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),n[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),n[2]=s[2],e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function GSe(e,t){JC(uF,e),JC(cF,t);const r=nJ(uF,cF);return r>1?0:r<-1?Math.PI:Math.acos(r)}const uF=Yc(),cF=Yc();function qSe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function HSe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function WSe(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=t[0],o=t[1],l=t[2],p=Ms();return Math.abs(r-n)<=p*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-o)<=p*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-l)<=p*Math.max(1,Math.abs(s),Math.abs(l))}function QSe(e,t,r){const i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2];let o=i*i+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const JSe=KQ,ZSe=XQ,YSe=eJ,KSe=rJ,XSe=iJ,eEe=YQ,tEe=sJ;Object.freeze(Object.defineProperty({__proto__:null,abs:SSe,add:wSe,angle:GSe,bezier:LSe,ceil:bSe,clamp:xSe,copy:gSe,cross:RSe,crossAndNormalize:OSe,direction:QSe,dist:KSe,distance:rJ,div:YSe,divide:eJ,dot:nJ,equals:WSe,exactEquals:HSe,floor:_Se,hermite:NSe,inverse:kSe,len:eEe,length:YQ,lerp:PSe,max:$Se,min:TSe,mul:ZSe,multiply:XQ,negate:CSe,normalize:JC,random:DSe,rotateX:USe,rotateY:VSe,rotateZ:zSe,round:ISe,scale:tJ,scaleAndAdd:MSe,set:vSe,sign:ESe,sqrDist:XSe,sqrLen:tEe,squaredDistance:iJ,squaredLength:sJ,str:qSe,sub:JSe,subtract:KQ,transformMat3:jSe,transformMat4:FSe,transformQuat:BSe},Symbol.toStringTag,{value:"Module"}));function bo(e){let t=e*e;return e<0&&(t*=-1),t}function rEe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function iEe(e,t,r){const i=r,s=e.state,n=e.device,o=t.tiltDirection==="forward-down"?1:-1,l=1;return n.deviceType==="standard"?(i.translation[0]=bo(s.axes[0]),i.translation[1]=bo(s.axes[1]),i.translation[2]=bo(s.buttons[7])-bo(s.buttons[6]),i.heading=bo(s.axes[2]),i.tilt=bo(s.axes[3])):n.deviceType==="spacemouse"&&(i.translation[0]=1.2*bo(s.axes[0]),i.translation[1]=1.2*bo(s.axes[1]),i.translation[2]=2*-bo(s.axes[2]),i.heading=1.2*bo(s.axes[5]),i.tilt=1.2*bo(s.axes[3])),i.tilt*=o,tJ(i.translation,i.translation,l),i}function sEe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let nEe=class extends yi{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new F0,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",(r=>this._handleGamePadEvent(r))),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([Qe((()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled}),(r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=A0({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),Vi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var i;const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,rEe(this._transformation)):(this._currentDevice=t.data.device,iEe(t.data,this._view.navigation.gamepad,this._transformation)),(i=this._frameTask)==null||i.resume())}_frameUpdate(t){var _;const r=this._transformation;if(sEe(r))return void((_=this._frameTask)==null?void 0:_.pause());const i=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=aEe*s*t;dE(i,i,[r.translation[0]*n,-r.translation[1]*n]);const o=1+r.translation[2]*lEe*t,l=this._view.constraints.rotationEnabled?-r.heading*oEe*t:0,p=this._view.size,m=[p[0]/2,p[1]];RQ(i,i,o,l,m,p);const v=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=v}};const oEe=.06,aEe=.7,lEe=6e-4;function oJ(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),Lt((()=>document.removeEventListener("visibilitychange",t)))}let uEe=class extends yi{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout((()=>{this._isSticky&&this._handlePopKey()}))}else{const l=this._timeout===void 0,p=this._pressedKeys.size>0;l||p?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=oJ((s=>s?null:this._stopMovement()))}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout((()=>{this._timeout=void 0,t()}),this._stickyKeyDuration)}},cEe=class extends yi{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(r),this.registerIncoming("key-down",i,(s=>this._handleKeyDown(s))),this.registerIncoming("key-up",i,(s=>this._handleKeyUp(s))),this.registerIncoming("blur",i,(()=>this._handleStop())),this._visibilityHandle=oJ((s=>s?null:this._handleStop()))}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,r){for(const i of t)this._keyToDirection.set(i,r)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(t.data.key);if(this._pressed=s!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var JA;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(JA||(JA={}));let dEe=class extends yi{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,(s=>this._handleKeyDown(s))),r.zoomIn.forEach((s=>this._keysToZoomAction[s]=JA.IN)),r.zoomOut.forEach((s=>this._keysToZoomAction[s]=JA.OUT))}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(s){case JA.IN:o=n.zoomIn();break;case JA.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then((()=>n.end())),t.stopPropagation()}};const pEe=.6;let hEe=class extends yi{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,(i=>this._handleMouseWheel(i)))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:s,deltaY:n}=t.data,o=1/pEe**(1/60*n),l=r.zoom(o,[i,s]);l&&(this._canZoom=!1,l.catch((()=>{})).then((()=>{this._canZoom=!0,r.end()})))}},AEe=class extends yi{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",(i=>this._handleDrag(i))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const r=this.view.mapViewNavigation;this._dragEventSeparator=new pE({start:(i,s)=>{r.pinch.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{r.pinch.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{r.pinch.end(this.view),s.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function dF(e){const t=e.native;return t?{buttons:t.buttons.map((r=>r.pressed?r.value||1:0)),axes:t.axes.map((r=>yEe(r,e.axisThreshold)))}:{buttons:[],axes:[]}}function fEe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function mEe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function yEe(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let gEe=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,l=o.index,p=this._inputDevices[l];p&&(this._emitGamepadEvent(o,dF(p),!1),this._inputDevices.splice(l,1),this._latestUpdate.splice(l,1),this._input.gamepad.devices.remove(p),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(pF((n=>this._connectGamepad(n))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new iO(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=A0({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;pF((s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],l=dF(n),p=i||mEe(l);o&&(o.timestamp===s.timestamp||!o.active&&p||fEe(o.state,l))||this._emitGamepadEvent(s,l,!p)}))}_emitGamepadEvent(t,r,i){const s=this._latestUpdate[t.index],n=s&&s.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function vEe(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function pF(e){for(const t of navigator.getGamepads())vEe(t)&&e(t)}const hF=K("edge"),wEe=K("chrome"),bEe=K("ff"),_Ee=K("safari"),AF="esri-view-surface",Oh={touchNone:`${AF}--touch-none`,touchPan:`${AF}--touch-pan`};var Np;let SEe=(Np=class{constructor(t,r){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new gEe(t,r),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach((t=>this._releasePointerCaptureSafe(t))),this._activePointerCaptures.clear(),this._gamepadSource=cr(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(q3[r],i),delete this._active[r]}t&&t.forEach((r=>{if(!this._active[r]&&q3[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(q3[r],i),this._active[r]=i}})),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1)}setPointerCapture(t,r){r?this._setPointerCaptureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Oh.touchNone:Oh.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Oh.touchPan:Oh.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Oh.touchNone),this._element.classList.remove(Oh.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=WW(this._element,t);return Np.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const s={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&K("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:hF&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}hF?i*=.7:wEe||_Ee?i*=.6:bEe&&(i*=1.375);const s=100,n=Math.abs(i);n>s&&(i=i/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}},Np.test={disableSubpixelCoordinates:!1},Np);const q3={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let EEe=class extends yi{constructor(){super(!0),this.registerIncoming("context-menu",(t=>t.data.native.preventDefault()))}};const aJ=()=>({maximumClickDelay:300}),TEe=(e={})=>({...aJ(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...e}),mO=(e={})=>({...aJ(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...e});function E_(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function $Ee(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function xEe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Oi()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[W,Z]=e,[ie,ne]=[Z.x-W.x,Z.y-W.y];return t.radius=Math.sqrt(ie*ie+ne*ne)/2,t.center.x=(W.x+Z.x)/2,t.center.y=(W.y+Z.y)/2,t}let r=0,i=0;for(let W=0;W<e.length;W++)r+=e[W].x,i+=e[W].y;r/=e.length,i/=e.length;const s=e.map((W=>W.x-r)),n=e.map((W=>W.y-i));let o=0,l=0,p=0,m=0,v=0,_=0,E=0;for(let W=0;W<s.length;W++){const Z=s[W],ie=n[W],ne=Z*Z,ge=ie*ie;o+=ne,l+=ge,p+=Z*ie,m+=ne*Z,v+=ge*ie,_+=Z*ge,E+=ie*ne}const $=.5*(m+_),M=.5*(v+E),k=o*l-p*p,N=($*l-M*p)/k,U=(o*M-p*$)/k,G=Oi(N+r,U+i);return{radius:Math.sqrt(N*N+U*U+(o+l)/e.length),center:G}}function Ip(e){const{native:t}=e,{pointerId:r,button:i,pointerType:s}=t;return s==="mouse"?`${r}:${i}`:`${s}`}let IEe=class extends yi{constructor(t={},r=B0){super(!1),this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Oi(0,0),this._pointerState=new Map,this._parameters=mO(t),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new pE({start:(i,s)=>this._dragStart(i,s),update:(i,s)=>this._dragUpdate(s),end:(i,s)=>this._dragEnd(s)}),this.registerIncoming("drag",(i=>this._dragEventSeparator.handle(i))),this.registerIncoming("pointer-down",(i=>this._handlePointerDown(i))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((t=>{t.doubleTapTimeout=vr(t.doubleTapTimeout)}))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=vr(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=r,{center:n}=i;this._dragStartCenter=n;const o=H3("begin",Oi(0,0),i);this._doubleTapDrag.emit(o,void 0,s),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=H3("update",Oi(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=H3("end",Oi(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=Ip(r),s=this._pointerState.get(i),{pointerType:n}=r.native;if(s){const o=n==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(i),E_(s.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,s=Ip(r),n=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._clearPointerDown(s)),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function H3(e,t,r){const{button:i,buttons:s,pointer:n,pointers:o,pointerType:l,timestamp:p}=r;return{action:e,delta:t,button:i,buttons:s,pointer:n,pointers:o,pointerType:l,timestamp:p}}let MEe=class extends yi{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:s,pointers:CEe(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=vw(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,s);const n=Y2(s,lJ(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=vw(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=vw(this._activePointerMap);this._activePointerMap.forEach((i=>{i.initialAngle=Y2(i,r)-t,i.lastAngle=Y2(i,r)-t}))}_emitEvent(t,r,i){const s=vw(this._activePointerMap);this._drag.emit(this._createPayload(t,r,s,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,s=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function lJ(e){const t=[];return e.forEach((r=>{t.push(Oi(r.event.x,r.event.y))})),xEe(t)}function vw(e){const t=lJ(e);let r=0;return e.forEach((i=>{let s=Y2(i,t),n=s-i.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=i.lastAngle+n,i.lastAngle=s;const o=s-i.initialAngle;r+=o})),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function CEe(e){const t=new Map;return e.forEach(((r,i)=>t.set(i,r.event))),t}function Y2(e,t){const r=e.event,i=r.x-t.center.x,s=r.y-t.center.y;return Math.atan2(s,i)}var fF;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(fF||(fF={}));let kEe=class extends yi{constructor(t={},r=B0){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=mO(t),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=Ip(r);if(!this._pointerState.has(i)){const s={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,s),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=Ip(r),s=this._pointerState.get(i);if(s&&s.downButton===r.native.button){const n=s.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),E_(n,t.data)>o?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,n.modifiers),this._removeState(r))):E_(s,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(t.data)),i)}}_removeState(t){const r=Ip(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},REe=class extends yi{constructor(t={},r=B0){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=TEe(t),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",(i=>this._handlePointerDown(i))),this.registerIncoming("pointer-up",(i=>this._handlePointerLoss(i,"pointer-up"))),this.registerIncoming("pointer-capture-lost",(i=>this._handlePointerLoss(i,"pointer-capture-lost"))),this.registerIncoming("pointer-cancel",(i=>this._handlePointerLoss(i,"pointer-cancel"))),this._moveHandle=this.registerIncoming("pointer-move",(i=>this._handlePointerMove(i))),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((t=>{t.holdTimeout=vr(t.holdTimeout)})),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout((()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const l=o.previousEvent;this._pointerHold.emit(l,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}}),this._parameters.holdDelay));const n={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(ww("update",s,r),void 0,s.modifiers):$Ee(r,s.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),s.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach((s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(ww("start",s,r)):this._pointerDrag.emit(ww("start",s,s.previousEvent),t.timestamp))}))}_handlePointerLoss(t,r){const i=t.data,s=i.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(ww("end",n,r==="pointer-up"?i:n.previousEvent),void 0,n.modifiers):r==="pointer-up"&&n.downButton===i.native.button&&t.timestamp-n.startTimestamp<=this._parameters.maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function ww(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let OEe=class extends yi{constructor(t={},r=B0){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=mO(t),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",(i=>this._handleImmediateClick(i))),this.registerIncoming("pointer-down",(i=>this._handlePointerDown(i)))}onUninstall(){this._pointerState.forEach((t=>t.doubleClickTimer=vr(t.doubleClickTimer)))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=vr(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,s=PEe(r);if(!this._pointerState.has(s))return void this._startClick(t);const n=this._pointerState.get(s),{data:o,modifiers:l}=n.event,p=i==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;E_(o,r)>p?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,l))}_handlePointerDown(t){const r=Ip(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,s=Ip(r),n=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(s)),n);this._pointerState.set(s,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function PEe(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const bw={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},mF=Symbol("handles");let Ud=class extends je{initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this.addHandles([ks((()=>!t()),(()=>this._disconnect())),ks(t,(()=>this._connect()))])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var r;return((r=this._inputManager)==null?void 0:r.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(mF),this._inputManager=cr(this._inputManager)}_connect(){const t=this.view.surface,r=new SEe(t,this.view.input),i=[new kEe,new REe,new OEe,new MEe(this.view.navigation),new IEe],s=new Un({eventSource:r,recognizers:i}),n=new mSe(this.view,["primary"]),o=new ySe(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new EEe],au.INTERNAL),s.installHandlers("navigation",[new AEe(this.view),new nEe(this.view),new hEe(this.view),new lF(this.view),new lF(this.view,[bw.counter]),n,new uEe(this.view,bw.pan),new dEe(this.view,bw.zoom),new cEe(this.view,bw.rotate),o,new fSe(this.view,"touch")],au.INTERNAL),this.view.viewEvents.connect(s),this._source=r,this._inputManager=s,this.addHandles([Qe((()=>{var l,p;return(p=(l=this.view)==null?void 0:l.navigation)==null?void 0:p.browserTouchPanEnabled}),(l=>{this._source&&(this._source.browserTouchPanningEnabled=!l)}),Vi),Qe((()=>{const{actionMap:l}=this.view.navigation;return{panActions:aF("pan",l),rotateActions:aF("rotate",l)}}),(({panActions:l,rotateActions:p})=>{n.pointerActions=l,o.pointerActions=p}),vs)],mF)}get test(){}};a([A()],Ud.prototype,"view",void 0),a([A()],Ud.prototype,"latestPointerType",null),a([A()],Ud.prototype,"latestPointerLocation",null),a([A()],Ud.prototype,"multiTouchActive",null),Ud=a([P("esri.views.2d.input.MapViewInputManager")],Ud);const NEe=Ud,LEe=e=>{let t=class extends e{constructor(...r){super(...r),this.goToManager=new Z2({view:this}),this.inputManager=new NEe({view:this}),this.addHandles([this.on("resize",(i=>this.stateManager.resize(i.width,i.height)))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,i,s,n){return this.inputManager&&this.viewEvents.on(r,i,s,n)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}toMap(r){if(!this.ready)return null;const i=JW(r)?QW(this,r):r;return this.stateManager.toMap(i)}};return a([A()],t.prototype,"goToManager",void 0),a([A({readOnly:!0})],t.prototype,"interacting",null),a([A()],t.prototype,"stationary",null),a([A({readOnly:!0})],t.prototype,"inputManager",void 0),t=a([P("esri.views.Viewport2DMixin")],t),t};let yF=class{constructor(t){this._view=t,this.viewpoint=new fi({targetGeometry:new Je,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return CQ(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,r){r.pan=WV(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=Wv(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:s,rotate:n,zoom:o,zoomOffset:l}=i,{center:p}=this;p.spatialReference=t.center.spatialReference,p.x=cy(t.center.x,r.center.x,s),p.y=cy(t.center.y,r.center.y,s),this.viewpoint.scale=cy(t.scale,r.scale+l,o);let m=t.rotation;const v=r.rotation;Math.abs(v-m)>=180&&(m+=360*(m<v?1:-1)),this.viewpoint.rotation=cy(m,v,n)}copyFrom(t){as(this.viewpoint,t.viewpoint),this._view=t.view}};function Hm(e,t,r,i){const s=3*e,n=3*(r-e)-s,o=1-s-n,l=3*t,p=3*(i-t)-l,m=1-l-p;function v(M){return((o*M+n)*M+s)*M}function _(M){return((m*M+p)*M+l)*M}function E(M){return(3*o*M+2*n)*M+s}function $(M,k){let N,U,G,W,Z,ie;for(G=M,ie=0;ie<8;ie++){if(W=v(G)-M,Math.abs(W)<k)return G;if(Z=E(G),Math.abs(Z)<1e-6)break;G-=W/Z}if(N=0,U=1,G=M,G<N)return N;if(G>U)return U;for(;N<U;){if(W=v(G),Math.abs(W-M)<k)return G;M>W?N=G:U=G,G=.5*(U-N)+N}return G}return function(M,k=1e-6){return _($(M,k))}}const Zn={};Zn.ease=Hm(.25,.1,.25,1),Zn.linear=Hm(0,0,1,1),Zn.easeIn=Zn["ease-in"]=Hm(.42,0,1,1),Zn.easeOut=Zn["ease-out"]=Hm(0,0,.58,1),Zn.easeInOut=Zn["ease-in-out"]=Hm(.42,0,.58,1);const DEe=e=>e,wv=e=>e*e,T_=e=>1-wv(1-e),gF=e=>e<.5?wv(2*e)/2:(T_(2*(e-.5))+1)/2,$_=e=>e*e*e,ZC=e=>1-$_(1-e),vF=e=>e<.5?$_(2*e)/2:(ZC(2*(e-.5))+1)/2,x_=e=>e*e*e*e,YC=e=>1-x_(1-e),wF=e=>e<.5?x_(2*e)/2:(YC(2*(e-.5))+1)/2,I_=e=>e*e*e*e*e,KC=e=>1-I_(1-e),bF=e=>e<.5?I_(2*e)/2:(KC(2*(e-.5))+1)/2,M_=e=>1-Math.cos(e*Math.PI/2),XC=e=>1-M_(1-e),_F=e=>e<.5?M_(2*e)/2:(XC(2*(e-.5))+1)/2,C_=e=>2**(10*(e-1)),k_=e=>1-C_(1-e),SF=e=>e<.5?C_(2*e)/2:(k_(2*(e-.5))+1)/2,R_=e=>-(Math.sqrt(1-e*e)-1),ek=e=>1-R_(1-e),EF=e=>e<.5?R_(2*e)/2:(ek(2*(e-.5))+1)/2;function ho(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function Ao(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const TF=Ao(ho(1),1),$F=Ao(ho(1),0),O_=Ao(ho(1),.5),xF=Ao(ho(2),1),IF=Ao(ho(2),0),MF=Ao(ho(2),.5),CF=Ao(ho(3),1),kF=Ao(ho(3),0),RF=Ao(ho(3),.5),OF=Ao(ho(4),1),PF=Ao(ho(4),0),NF=Ao(ho(4),.5),LF={linear:DEe,"in-quad":wv,"out-quad":T_,"in-out-quad":gF,"in-coast-quad":TF,"out-coast-quad":$F,"in-out-coast-quad":O_,"in-cubic":$_,"out-cubic":ZC,"in-out-cubic":vF,"in-coast-cubic":xF,"out-coast-cubic":IF,"in-out-coast-cubic":MF,"in-quart":x_,"out-quart":YC,"in-out-quart":wF,"in-coast-quart":CF,"out-coast-quart":kF,"in-out-coast-quart":RF,"in-quint":I_,"out-quint":KC,"in-out-quint":bF,"in-coast-quint":OF,"out-coast-quint":PF,"in-out-coast-quint":NF,"in-sine":M_,"out-sine":XC,"in-out-sine":_F,"in-expo":C_,"out-expo":k_,"in-out-expo":SF,"in-circ":R_,"out-circ":ek,"in-out-circ":EF,"quad-in":wv,"quad-out":T_,"quad-in-out":gF,"quad-in-coast":TF,"quad-out-coast":$F,"quad-in-out-coast":O_,"cubic-in":$_,"cubic-out":ZC,"cubic-in-out":vF,"cubic-in-coast":xF,"cubic-out-coast":IF,"cubic-in-out-coast":MF,"quart-in":x_,"quart-out":YC,"quart-in-out":wF,"quart-in-coast":CF,"quart-out-coast":kF,"quart-in-out-coast":RF,"quint-in":I_,"quint-out":KC,"quint-in-out":bF,"quint-in-coast":OF,"quint-out-coast":PF,"quint-in-out-coast":NF,"sine-in":M_,"sine-out":XC,"sine-in-out":_F,"expo-in":C_,"expo-out":k_,"expo-in-out":SF,"circ-in":R_,"circ-out":ek,"circ-in-out":EF,ease:e=>Zn.ease(e),"ease-in":e=>Zn.easeIn(e),"ease-out":e=>Zn.easeOut(e),"ease-in-out":e=>Zn.easeInOut(e)};let FEe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const P_={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},uJ={maxDuration:4e3};let jEe=class cJ{constructor(t){this._createCamera=t,this.compared=new FEe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:P_.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new cJ(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??P_.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Ms()}get hasFov(){return Math.abs(this.compared.fov)>Ms()}get hasRotate(){return this.compared.rotate>Ms()}},BEe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},UEe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce(((t,r)=>t+r.time),0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,s=0;const n=this.definition,o=this.segments.reduce(((l,p)=>l||p.definition.hasZoom),!1);for(let l=0;l<this.segments.length;l++){const p=this.segments[l],m=p.definition;if(t<=p.time||l===this.segments.length-1){if(this.segmentInterpolateComponentsAt(p,p.time===0?0:t/p.time,r),n.hasPan&&!isNaN(r.pan)&&isFinite(n.compared.pan)?r.pan=(i+m.compared.pan*r.pan)/n.compared.pan:r.pan=1,n.hasRotate&&!isNaN(r.rotate)&&isFinite(n.compared.rotate)?r.rotate=(s+m.compared.rotate*r.rotate)/n.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(m.compared.targetZoom)){const{sourceZoom:v,targetZoom:_}=m.compared,E=r.zoom*(_-v)+v,$=this.segments[0].definition.compared.sourceZoom,M=this.segments[this.segments.length-1].definition.compared.targetZoom,k=Math.abs(_-$)>Math.abs(v-$)?_:v;r.zoomOffset=k-M,r.zoom=(E-$)/(k-$)}else r.zoom=1;return r}t-=p.time,i+=m.compared.pan,s+=m.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},W3=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,s=r.targetZoom;this._zoomSign=i>s?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const n=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*n}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:s,hasRotate:n}=this.definition;let o=0,l=0;i&&(s&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(l=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const p=this.definition.desiredPixelFlow;if(i&&s&&n){const m=o+l+o*l;this._zoomPixelFlow=o*l/m*p,this._panPixelFlow=l/m*p,this._rotatePixelFlow=o/m*p}else if(i&&s){const m=1+o;this._zoomPixelFlow=o/m*p,this._panPixelFlow=1/m*p}else if(i&&n){const m=1+l;this._zoomPixelFlow=l/m*p,this._rotatePixelFlow=1/m*p}else if(s&&n){const m=this._panPixelsAtSource/this._rotatePixels,v=1+m;this._panPixelFlow=m/v*p,this._rotatePixelFlow=1/v*p}else s?this._panPixelFlow=p:i?this._zoomPixelFlow=p:n&&(this._rotatePixelFlow=p);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const m=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=m,this._panPixelFlow/=m,this._rotatePixelFlow/=m}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/VEe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const VEe=Wv(45);function zEe(e,t,r){const i=t-e.compared.sourceZoom,s=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+s)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*s)}function GEe(e,t,r){const i=1/t,s=Math.log(e.compared.sourceZoom*i),n=1/e.desiredPixelFlow,o=1/Math.LN2,l=t-e.compared.sourceZoom,p=1/l,m=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(l))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*n*o*p*m-e.halfWindowSize*s*n*o*p+e.halfWindowSize*s*n*o*m/(l*l)}function qEe(e,t,r){const i=t-e.compared.sourceZoom,s=1/i,n=1/t,o=Math.log(e.compared.sourceZoom*n),l=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*l+2*s*o+2*n-2*o*l/(i*i)-l/(t*t))/(e.desiredPixelFlow*Math.LN2)}function HEe(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function WEe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function QEe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function JEe(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function ZEe(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function YEe(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function KEe(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function XEe(e,t,r){const i=Math.log(t/e.compared.targetZoom),s=1/e.desiredPixelFlow,n=1/Math.LN2,o=-t+e.compared.targetZoom,l=1/o,p=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*s*n*l+e.halfWindowSize*i*s*n*p/(o*o)+e.halfWindowSize*s*n*l*p/t}function eTe(e,t,r){const i=t-e.compared.targetZoom,s=1/i,n=1/t,o=Math.log(t/e.compared.targetZoom),l=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*l-2*s*o+2*n+2*o*l/(i*i)-l/(t*t))/(e.desiredPixelFlow*Math.LN2)}function tTe(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function rTe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function iTe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function sTe(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,s=e.halfWindowPanAtZoom(i),n=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*s);return e.compared.sourceZoom<=e.compared.targetZoom?n*(r-s):n*(r+s)}function nTe(e,t){let r=oTe(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},s=i.ascensionFactor===0,n=i.descensionFactor===0,o=s?HEe:zEe,l=s?WEe:GEe,p=s?QEe:qEe,m=n?tTe:KEe,v=n?rTe:XEe,_=n?iTe:eTe,E=ie=>o(e,ie,i)+JEe(e,ie,i)+m(e,ie,i),$=ie=>l(e,ie,i)+ZEe(e,ie,i)+v(e,ie,i),M=ie=>p(e,ie,i)+YEe(e,ie,i)+_(e,ie,i);let k=E(r);const N=sTe(e);let U;const G=t.maximumIterations||20,W=t.maximumDistance!=null?t.maximumDistance:1/0;for(U=0;U<G;U++){const ie=t.desiredSlope??1e-6;let ne=$(r);Math.abs(ne)>ie&&(ne+=ie);const ge=ne/M(r);if(isNaN(ge)||r>=W&&ge<0){if(!isFinite(W))return null;r=W,k=E(r);break}if(r-=ge,r<=e.compared.sourceZoom||r<=e.compared.targetZoom)return null;const we=E(r);if(Math.abs(we-k)/k<=.005)break;k=we}return isNaN(k)||k>N*(1-.3)||r<=e.compared.sourceZoom||r<=e.compared.targetZoom?null:r}function oTe(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let aTe=class extends UEe{constructor(t,r){super(),this._preallocSegments=[new W3,new W3,new W3],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r!=null&&r.apex?nTe(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r==null?void 0:r.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=T_(i.zoom):t===this._descensionSegment&&(i.zoom=wv(i.zoom))}_updateWithApex(t,r){const[i,s,n]=this._preallocSegments,o=(r==null?void 0:r.ascensionFactor)??.5,l=Math.min(1-o,(r==null?void 0:r.ascensionFactor)!=null&&r.descensionFactor!=null?r.descensionFactor:.5),p=1-o-l;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),p>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=t,s.definition.compared.targetZoom=t,s.definition.compared.pan=this.definition.compared.pan*p,s.definition.compared.rotate=this.definition.compared.rotate*p,s.definition.segmentStart=i.definition.segmentEnd,s.definition.segmentEnd=i.definition.segmentEnd+p,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=t,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=o+p,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const lTe=new BEe;let uTe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=O_,this.definition=new jEe(t),this.path=new aTe}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(ZX(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?O_:k_)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,lTe);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,s=r.minDuration??P_.minDuration/i,n=r.maxDuration??P_.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,s),n)}};const cTe=2e3,dTe=64;let pTe=class{constructor(t){this._view=t,this._animation=new uTe((()=>new yF(this._view))),this._current=new yF(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){as(this._current.viewpoint,t),as(this._source.viewpoint,t),as(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),as(t,this._current.viewpoint)}},hA=class extends je{constructor(t){super(t),this._animation=null,this._destinationViewState=new AO,this.updateFunction=null,this.easing=LF.ease,this.viewpoint=new fi({targetGeometry:new Je,scale:0,rotation:0}),this._updateTask=A0({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new pTe(t.view)}destroy(){this._updateTask=vr(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const s=this.viewpoint;as(s,r);const n=t.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(r.scale,n.scale)*dTe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?1/0:(i==null?void 0:i.maxDuration)??uJ.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:(typeof(i==null?void 0:i.easing)=="string"?LF[i.easing]:i==null?void 0:i.easing)||this.easing}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,hTe(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:0}));const o=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new QC({target:t.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,s;const r=this.animation;if(r&&r.state!==QC.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const n=performance.now()-this._startTime,o=this._transition.duration,l=o>0?n/o:1,p=l>=1;this._transition.applyRatio(this.viewpoint,l),p&&((s=this.animation)==null||s.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function hTe(e,t,r,i){if((t==null?void 0:t.duration)!=null)return!0;const{time:s,isLinear:n}=e,o=(t==null?void 0:t.speedFactor)||1;if(s>((t==null?void 0:t.maxDuration)??uJ.maxDuration/o))return!1;if(n){const p=xr(),m=Oi(...i.toScreen(p,...r.center)),v=Oi(...r.toScreen(p,...i.center)),_=v!=null&&v.x>-1*r.size[0]&&v.x<(1.5+.5)*r.size[0]&&v.y>-1*r.size[1]&&v.y<(1.5+.5)*r.size[1],E=m!=null&&m.x>-1*i.size[0]&&m.x<(1.5+.5)*i.size[0]&&m.y>-1*i.size[1]&&m.y<(1.5+.5)*i.size[1];if(s>cTe/o&&!_&&!E)return!1}return!0}a([A()],hA.prototype,"easing",void 0),a([A()],hA.prototype,"view",void 0),a([A()],hA.prototype,"viewpoint",void 0),hA=a([P("esri.views.2d.AnimationManager")],hA);const ATe=hA;function or(){return Promise.all([ce(()=>import("./webglDeps-BZ9ojuHp.js"),__vite__mapDeps([201,202,11,203,204]),import.meta.url),ce(()=>import("./mapViewDeps-EFNVvGjo.js"),__vite__mapDeps([205,130,96,97,10,11,98,99,100,101,95,68,206,105,207,203,202,168,146,208,102,209,120,210,153,152,108,9,12,103,15,211,106,107,174,34,151,201,204,212,115,213,214,215,165,162,144,216,84,94,47,43,49,217,218,104,219,110,220,112,73,92,221,222,223,224,161,225,226]),import.meta.url)])}const Wm=()=>or().then((()=>ce(()=>import("./TileLayerView2D-CVTgZBVw.js"),__vite__mapDeps([227,130,100,96,97,10,11,98,99,101,95,68,174,34,210,209,202,120,153,152,108,9,12,151,212,207,203,168,146,208,102,115,213,214,84,105,206,103,15,106,107,165,162,144,220,94,47,43,49,112,73,92,228,229,230,224,231,199,232,222,223,233,234,235,236,237,238]),import.meta.url))),Ad=()=>or().then((()=>ce(()=>import("./FeatureLayerView2D-BfhMOyhJ.js").then(e=>e.F),__vite__mapDeps([239,210,9,10,11,12,240,241,190,47,43,52,231,199,223,96,97,98,99,100,101,95,68,203,202,224,209,120,153,152,108,206,105,207,168,146,208,102,103,15,115,211,242,114,42,235,238,233]),import.meta.url))),DF={"base-dynamic":()=>or().then((()=>ce(()=>import("./BaseDynamicLayerView2D-D4fBFIjg.js"),__vite__mapDeps([243,244,209,95,68,202,11,120,210,153,152,108,9,10,12,229,207,203,168,146,105,230,231,199,245,233]),import.meta.url))),"base-tile":Wm,"bing-maps":Wm,catalog:()=>or().then((()=>ce(()=>import("./CatalogLayerView2D-CAYmR_Lm.js"),__vite__mapDeps([246,231,210,199]),import.meta.url))),"catalog-dynamic-group":()=>or().then((()=>ce(()=>import("./CatalogDynamicGroupLayerView2D-CYyXUrar.js"),__vite__mapDeps([247,231,210,199]),import.meta.url))),"catalog-footprint":()=>or().then((()=>ce(()=>import("./CatalogFootprintLayerView2D-B2J7ehSx.js"),__vite__mapDeps([248,239,210,9,10,11,12,240,241,190,47,43,52,231,199,223,96,97,98,99,100,101,95,68,203,202,224,209,120,153,152,108,206,105,207,168,146,208,102,103,15,115,211,242,114,42,235,238,233]),import.meta.url))),csv:Ad,"geo-rss":()=>or().then((()=>ce(()=>import("./GeoRSSLayerView2D-BZi-PDoa.js"),__vite__mapDeps([249,231,210,199,221,222,223,96,97,10,11,98,99,100,101,95,68,203,202,224,209,120,153,152,108,9,12,206,105,207,168,146,208,102,103,15,220,174,130,34,94,47,43,49,112,73,92]),import.meta.url))),feature:Ad,geojson:Ad,parquet:Ad,graphics:()=>or().then((()=>ce(()=>import("./GraphicsLayerView2D-DKWdOO03.js"),__vite__mapDeps([250,231,210,199,221,222,223,96,97,10,11,98,99,100,101,95,68,203,202,224,209,120,153,152,108,9,12,206,105,207,168,146,208,102,103,15,220,174,130,34,94,47,43,49,112,73,92]),import.meta.url))),group:()=>or().then((()=>ce(()=>import("./GroupLayerView2D-Bt9RekvM.js"),__vite__mapDeps([251,231,210,199]),import.meta.url))),imagery:()=>or().then((()=>ce(()=>import("./ImageryLayerView2D-CVozHDBx.js"),__vite__mapDeps([252,253,202,11,68,128,209,95,120,210,153,152,108,9,10,12,231,199,220,96,97,98,99,100,101,174,130,34,94,102,47,43,49,206,105,207,203,168,146,208,103,15,112,73,92,232,222,223,224,244,229,230,245,133,240,238,233]),import.meta.url))),"imagery-tile":()=>or().then((()=>ce(()=>import("./ImageryTileLayerView2D-BmlYrsk-.js"),__vite__mapDeps([254,255,253,202,11,68,128,209,95,120,210,153,152,108,9,10,12,231,199,132,256,224,207,203,168,146,105,230,208,102,257,133,240,238,233]),import.meta.url))),kml:()=>or().then((()=>ce(()=>import("./KMLLayerView2D-Cdwx0d8v.js"),__vite__mapDeps([258,259,229,210,207,203,202,11,168,146,105,230,244,209,95,68,120,153,152,108,9,10,12,231,199,221,222,223,96,97,98,99,100,101,224,206,208,102,103,15,220,174,130,34,94,47,43,49,112,73,92,219,110,133,215,201,204,165,162,144,213,256]),import.meta.url))),"knowledge-graph":()=>or().then((()=>ce(()=>import("./KnowledgeGraphLayerView2D-gU-UJwOW.js"),__vite__mapDeps([260,231,210,199]),import.meta.url))),"link-chart":()=>or().then((()=>ce(()=>import("./KnowledgeGraphLayerView2D-gU-UJwOW.js"),__vite__mapDeps([260,231,210,199]),import.meta.url))),"knowledge-graph-sublayer":Ad,"map-image":()=>or().then((()=>ce(()=>import("./MapImageLayerView2D-Bv8yOdzd.js"),__vite__mapDeps([261,244,209,95,68,202,11,120,210,153,152,108,9,10,12,229,207,203,168,146,105,230,231,199,220,96,97,98,99,100,101,174,130,34,94,102,47,43,49,206,208,103,15,112,73,92,232,222,223,224,245,262,235,237,240,233,234,236,238]),import.meta.url))),"map-notes":()=>or().then((()=>ce(()=>import("./MapNotesLayerView2D-Cy3y0GKz.js"),__vite__mapDeps([263,231,210,199,221,222,223,96,97,10,11,98,99,100,101,95,68,203,202,224,209,120,153,152,108,9,12,206,105,207,168,146,208,102,103,15,220,174,130,34,94,47,43,49,112,73,92]),import.meta.url))),media:()=>or().then((()=>ce(()=>import("./MediaLayerView2D-CfLkPPew.js"),__vite__mapDeps([264,265,112,73,130,100,96,97,10,11,98,99,101,95,68,174,34,210,209,202,120,153,152,108,9,12,151,212,207,203,168,146,208,102,115,213,214,84,105,206,103,15,106,107,165,162,144,220,94,47,43,49,92,217,266,218,231,199]),import.meta.url))),"ogc-feature":()=>or().then((()=>ce(()=>import("./OGCFeatureLayerView2D-2YzF01Qo.js"),__vite__mapDeps([267,239,210,9,10,11,12,240,241,190,47,43,52,231,199,223,96,97,98,99,100,101,95,68,203,202,224,209,120,153,152,108,206,105,207,168,146,208,102,103,15,115,211,242,114,42,235,238,233]),import.meta.url))),"open-street-map":Wm,"oriented-imagery":Ad,route:()=>or().then((()=>ce(()=>import("./RouteLayerView2D-BfHzu-0U.js"),__vite__mapDeps([268,269,270,231,210,199,221,222,223,96,97,10,11,98,99,100,101,95,68,203,202,224,209,120,153,152,108,9,12,206,105,207,168,146,208,102,103,15,220,174,130,34,94,47,43,49,112,73,92]),import.meta.url))),stream:()=>or().then((()=>ce(()=>import("./StreamLayerView2D-DzEsV0dQ.js"),__vite__mapDeps([271,239,210,9,10,11,12,240,241,190,47,43,52,231,199,223,96,97,98,99,100,101,95,68,203,202,224,209,120,153,152,108,206,105,207,168,146,208,102,103,15,115,211,242,114,42,235,238,233]),import.meta.url))),"subtype-group":()=>or().then((()=>ce(()=>import("./SubtypeGroupLayerView2D-BURNzTon.js"),__vite__mapDeps([272,239,210,9,10,11,12,240,241,190,47,43,52,231,199,223,96,97,98,99,100,101,95,68,203,202,224,209,120,153,152,108,206,105,207,168,146,208,102,103,15,115,211,242,114,42,235,238,233]),import.meta.url))),tile:Wm,"vector-tile":()=>or().then((()=>ce(()=>import("./VectorTileLayerView2D-s1x0zyXn.js"),__vite__mapDeps([273,151,101,84,11,99,100,214,152,98,153,202,209,95,68,120,210,108,9,10,12,224,55,154,155,130,231,199,233]),import.meta.url))),video:()=>or().then((()=>ce(()=>import("./VideoLayerView2D-DlWIY5c-.js"),__vite__mapDeps([274,275,276,196,195,266,120,209,95,68,202,11,210,153,152,108,9,10,12,206,96,97,98,99,100,101,105,207,203,168,146,208,102,103,15,218,231,199,221,222,223,224,220,174,130,34,94,47,43,49,112,73,92]),import.meta.url))),wcs:()=>or().then((()=>ce(()=>import("./ImageryTileLayerView2D-BmlYrsk-.js"),__vite__mapDeps([254,255,253,202,11,68,128,209,95,120,210,153,152,108,9,10,12,231,199,132,256,224,207,203,168,146,105,230,208,102,257,133,240,238,233]),import.meta.url))),"web-tile":Wm,wfs:Ad,wms:()=>or().then((()=>ce(()=>import("./WMSLayerView2D-CDsfO3u-.js"),__vite__mapDeps([277,244,209,95,68,202,11,120,210,153,152,108,9,10,12,229,207,203,168,146,105,230,231,199,245,233,278,240]),import.meta.url))),wmts:()=>or().then((()=>ce(()=>import("./WMTSLayerView2D-C5PorHaT.js"),__vite__mapDeps([279,228,229,210,207,203,202,11,168,146,105,230,209,95,68,120,153,152,108,9,10,12,224,231,199,233]),import.meta.url))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function fTe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Q(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const FF={hasLayerViewModule:e=>DF[e.type]!=null,importLayerView:e=>{const t=DF[e.type];if(t==null)throw fTe(e);return t(e)}};var _n;let cm=(_n=class{static getId(t,r,i,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${s}`}constructor(t,r,i,s){this.set(t,r,i,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,s){this.set(t,r,i,s)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new _n(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[n,o,l,p]=t.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(l),this.world=parseFloat(p)}else this.level=+t,this.row=+r,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new _n(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,r,i){const s=this.clone();return s.col+=t,s.row+=r,i.normalizeKey(s),s}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,s=this.world;return[new _n(t,r,i,s),new _n(t,r,i+1,s),new _n(t,r+1,i,s),new _n(t,r+1,i+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}},_n.pool=new j0(_n,null,null,25,50),_n);function Ph(e,t){return[e,t]}function fd(e,t,r){return e[0]=t,e[1]=r,e}function mTe(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}const _o=new cm("0/0/0/0");let yTe=class dJ{static create(t,r,i=null){const s=Is(t.spatialReference),n=r.origin||Ph(t.origin.x,t.origin.y),o=Ph(t.size[0]*r.resolution,t.size[1]*r.resolution),l=Ph(-1/0,-1/0),p=Ph(1/0,1/0),m=Ph(1/0,1/0);i!=null&&(fd(l,Math.max(0,Math.floor((i.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymax)/o[1]))),fd(p,Math.max(0,Math.floor((i.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymin)/o[1]))),fd(m,p[0]-l[0]+1,p[1]-l[1]+1));const{cols:v,rows:_}=r;let E,$,M,k;return!i&&v&&_&&(fd(l,v[0],_[0]),fd(p,v[1],_[1]),fd(m,v[1]-v[0]+1,_[1]-_[0]+1)),t.isWrappable?(E=Ph(Math.ceil(Math.round((s.valid[1]-s.valid[0])/r.resolution)/t.size[0]),m[1]),$=!0,M=s.origin,k=s.valid):(E=m,$=!1),new dJ(r.level,r.resolution,r.scale,n,l,p,m,o,E,$,M,k)}constructor(t,r,i,s,n,o,l,p,m,v,_,E){this.level=t,this.resolution=r,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=l,this.norm=p,this.worldSize=m,this.wrap=v,this._spatialReferenceOrigin=_,this._spatialReferenceValid=E}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}normalizeKey(t){if(!this.wrap)return;const r=this.worldSize[0],i=t.col;i<0?(t.col=i+r,t.world-=1):i>=r&&(t.col=i-r,t.world+=1)}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const r=this.origin[0]+t*this.norm[0],i=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&i&&s?r===i[0]?s[0]:this.origin[0]===i[0]&&t===this.worldSize[0]?s[1]:r:r}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){_o.set(r);const s=i?_o.col:this.denormalizeCol(_o.col,_o.world),n=_o.row;return mTe(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,r,i=!1){_o.set(r);const s=i?_o.col:this.denormalizeCol(_o.col,_o.world);return Array.isArray(t)?fd(t,this.getXForColumn(s),this.getYForRow(_o.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(_o.row)),t}};var Lp;let yO=(Lp=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:s}of this.spans)for(let n=i;n<=s;n++){const o=t.getWorldForColumn(n);yield new cm(t.level,r,t.normalizeCol(n),o)}}forEach(t,r){const{spans:i,lodInfo:s}=this,{level:n}=s;if(i.length!==0)for(const{row:o,colFrom:l,colTo:p}of i)for(let m=l;m<=p;m++)t.call(r,n,o,s.normalizeCol(m),s.getWorldForColumn(m))}},Lp.pool=new j0(Lp),Lp),Q3=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const Ar=new cm("0/0/0/0");let gTe=class pJ{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,s]=t,[n,o]=r,l=n-i,p=o-s,m=p!==0?l/p:0,v=(Math.ceil(s)-s)*m,_=(Math.floor(s)-s)*m;return new pJ(i,Math.floor(s),Math.ceil(o),m,l<0?v:_,l<0?_:v,l<0?n:i,l<0?i:n)}constructor(t,r,i,s,n,o,l,p){this.x=t,this.ymin=r,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=l,this.rightBound=p}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const un=[[0,0],[0,0],[0,0],[0,0]],vTe=1e-6;let wTe=class{constructor(t,r=null,i=t.lods[0].level,s=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=t.lods.filter((l=>l.level>=i&&l.level<=s));this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map((l=>yTe.create(t,l,r)));n.forEach(((l,p)=>{this._infoByLevel[l.level]=o[p],this._infoByScale[l.scale]=o[p],this.scales[p]=l.scale}),this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){Ar.set(r);const s=this._infoByLevel[Ar.level];return s?s.getTileBounds(t,Ar,i):t}getTileCoords(t,r,i=!1){Ar.set(r);const s=this._infoByLevel[Ar.level];return s?s.getTileCoords(t,Ar,i):t}getTileCoverage(t,r=192,i=!0,s="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=yO.pool.acquire(n),l=this._wrap;let p,m,v,_=1/0,E=-1/0;const $=o.spans;un[0][0]=un[0][1]=un[1][1]=un[3][0]=-r,un[1][0]=un[2][0]=t.size[0]+r,un[2][1]=un[3][1]=t.size[1]+r;for(const U of un)t.toMap(U,U),U[0]=n.getColumnForX(U[0]),U[1]=n.getRowForY(U[1]);const M=[];let k=3;for(let U=0;U<4;U++){if(un[U][1]===un[k][1]){k=U;continue}const G=gTe.create(un[U],un[k]);_=Math.min(G.ymin,_),E=Math.max(G.ymax,E),M[G.ymin]===void 0&&(M[G.ymin]=[]),M[G.ymin].push(G),k=U}if(_==null||E==null||E-_>100)return null;let N=[];for(p=_;p<E;){M[p]!=null&&(N=N.concat(M[p])),m=1/0,v=-1/0;for(let U=N.length-1;U>=0;U--){const G=N[U];m=Math.min(m,G.getLeftCol()),v=Math.max(v,G.getRightCol())}if(m=Math.floor(m),v=Math.floor(v),p>=n.first[1]&&p<=n.last[1])if(l)if(n.size[0]<n.worldSize[0]){const U=Math.floor(v/n.worldSize[0]);for(let G=Math.floor(m/n.worldSize[0]);G<=U;G++)$.push(new Q3(p,Math.max(n.getFirstColumnForWorld(G),m),Math.min(n.getLastColumnForWorld(G),v)))}else $.push(new Q3(p,m,v));else m>n.last[0]||v<n.first[0]||(m=Math.max(m,n.first[0]),v=Math.min(v,n.last[0]),$.push(new Q3(p,m,v)));p+=1;for(let U=N.length-1;U>=0;U--){const G=N[U];G.ymax>=p?G.incrRow():N.splice(U,1)}}return o}getTileParentId(t){Ar.set(t);const r=this._infoByLevel[Ar.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(Ar,this._lodInfos[i],Ar),Ar.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Ar.set(r);const i=this._infoByLevel[Ar.level],s=t.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(Ar,s,Ar);const o=s.denormalizeCol(Ar.col,Ar.world);for(const l of t.spans)if(l.row===Ar.row&&l.colFrom<=o&&l.colTo>=o)return!0}if(s.resolution<i.resolution){const[o,l,p,m]=t.spans.reduce(((k,N)=>(k[0]=Math.min(k[0],N.row),k[1]=Math.max(k[1],N.row),k[2]=Math.min(k[2],N.colFrom),k[3]=Math.max(k[3],N.colTo),k)),[1/0,-1/0,1/0,-1/0]),v=i.denormalizeCol(Ar.col,Ar.world),_=s.getColumnForX(i.getXForColumn(v)),E=s.getRowForY(i.getYForRow(Ar.row)),$=s.getColumnForX(i.getXForColumn(v+1))-1,M=s.getRowForY(i.getYForRow(Ar.row+1))-1;return!(_>m||$<p||E>l||M<o)}const n=s.denormalizeCol(Ar.col,Ar.world);return t.spans.some((o=>o.row===Ar.row&&o.colFrom<=n&&o.colTo>=n))}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const s=Is(this.tileInfo.spatialReference),n=-i*(s.valid[1]-s.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+vTe)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce(((i,s)=>Math.abs(s-t)<Math.abs(i-t)?s:i),r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const s=this._infoByLevel[i.level];return t.set(i),r.resolution<s.resolution?null:(r.resolution===s.resolution||(t.level=r.level,t.col=Math.floor(i.col*s.resolution/r.resolution+.01),t.row=Math.floor(i.row*s.resolution/r.resolution+.01)),t)}},bTe=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},_Te=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new W2,this._controllers=new W2,this._processingItems=new W2,this._pausedSignal=Xp(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new nv(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=vr(this._schedule),this._task=vr(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach((r=>t.push(r))),this._controllers.clear(),t.forEach((r=>r.abort())),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach(((r,i)=>t(i)))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const s=new AbortController;let n=null;r&&(n=Ko(r,(()=>s.abort())));const o=()=>{const v=this._processingItems.get(t);v&&v.controller.abort(),l(),m.reject(rr())},l=()=>{p.remove(),n!=null&&n.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},p=Gk(s.signal,o),m=Cn();return this._deferreds.set(t,m),this._controllers.set(t,s),m.promise.then(l,l),this._queue.push(t),this._scheduleNext(),m.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var r;const t=this._queue.popLast();return t&&((r=this._deferreds.get(t))==null||r.reject(rr()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=jv((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,s=new bTe(t,i);this._processingItems.set(t,s);try{r=this.process(t,i.signal)}catch(n){this._processError(s,n)}Xa(r)?(s.promise=r,r.then((n=>this._processResult(s,n)),(n=>this._processError(s,n)))):this._processResult(s,r)}get test(){}};const jF=[0,0];let Tl=class extends je{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:r,scheduler:i,priority:s}=this;this._queue=new _Te({concurrency:t,scheduler:i,priority:s,process:(n,o)=>{const l=this._keyToItem.get(n);return r(l,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=cr(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),s=this.tileInfoView.getTileScale(t.key),n=rh(this._tilesByScale,s,(()=>new Set)),o=()=>{n.delete(t.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(r)};return n.add(t.key),this._keyToItem.set(r,t),i.then(o,o),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const r=new Set;for(const o of t)r.add(this._keyToItem.get(o).key);const i=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,l]of this._tilesByScale)if(Ij(l,(p=>r.has(p)))){const p=Math.abs(o-i);p<n&&(s=l,n=p)}return this._getClosestTileKey(s,t).id}_getClosestTileKey(t,r){const i=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const l of t)if(r.has(l.id)){i.getTileCoords(jF,l);const p=lE(jF,s);p<o&&(o=p,n=l)}return n}};a([A({constructOnly:!0})],Tl.prototype,"concurrency",void 0),a([A({constructOnly:!0})],Tl.prototype,"priority",void 0),a([A({constructOnly:!0})],Tl.prototype,"process",void 0),a([A({constructOnly:!0})],Tl.prototype,"scheduler",void 0),a([A()],Tl.prototype,"state",void 0),a([A({constructOnly:!0})],Tl.prototype,"tileInfoView",void 0),Tl=a([P("esri.views.2d.tiling.TileQueue")],Tl);const ODe=Tl;let STe=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,s=this._tileKeysPerLevel[i];BF(this._tilePerId,t);for(let n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const s=r.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(r)}prune(t,r,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,r,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,r,i,t))}_pruneAroundCenterTile(t,r,i,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return t;const{size:o,origin:l}=this._tileInfoView.tileInfo,p=i*o[0],m=i*o[1],v=[0,0],_=[0,0];for(n.sort(((E,$)=>(v[0]=l.x+p*(E.col+.5),v[1]=l.y-m*(E.row+.5),_[0]=l.x+p*($.col+.5),_[1]=l.y-m*($.row+.5),b_(v,r)-b_(_,r))));n.length>0;){const E=n.pop();if(this._removeTile(E.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),BF(this._tilePerId,t)}};function BF(e,t){e.delete(t)}const md=new cm(0,0,0,0),ol=new Map,Qm=[],J3=[];let NDe=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new STe(t.cacheSize,this.tileInfoView,(r=>{this.releaseTile(r)})))}destroy(){this.tileIndex.clear()}update(t){var U,G;const{resampling:r,tileIndex:i}=this,{scale:s,center:n,resolution:o}=t.state,{minScale:l,maxScale:p}=this.tileInfoView,m=!t.stationary&&s>this._previousScale;if(this._previousScale=s,!r&&(s>l||s<p))return this.tiles.length=0,void this.clear();const v=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!v)return this.tiles.length=0,void this.clear();const{spans:_,lodInfo:E}=v,{level:$}=E;this.tiles.length=0,i.forEach((W=>W.visible=!0));let M=0,k=0;if(_.length>0)for(const{row:W,colFrom:Z,colTo:ie}of _)for(let ne=Z;ne<=ie;ne++){M++;const ge=md.set($,W,E.normalizeCol(ne),E.getWorldForColumn(ne)).id;let we=i.get(ge);if(we)we.isReady?(ol.set(ge,we),k++):m||this._addParentTile(ge,ol);else{if((U=this._tileCache)!=null&&U.has(ge)){if(we=this._tileCache.pop(ge),this.tileIndex.set(ge,we),we.isReady){ol.set(ge,we),k++;continue}}else we=this.acquireTile(md),this.tileIndex.set(ge,we);m||this._addParentTile(ge,ol)}}const N=k===M;for(const[W,Z]of i){if(ol.has(W))continue;md.set(W);const ie=this.tileInfoView.intersects(v,md),ne=this.cachePolicy==="purge"?md.level!==$:md.level>$;!ie||!m&&N?!ne&&ie||Qm.push(Z):Z.isReady?ne&&this.cachePolicy==="purge"&&this._hasReadyAncestor(md,$)?Qm.push(Z):J3.push(Z):ne&&Qm.push(Z)}for(const W of J3)W.isReady&&ol.set(W.key.id,W);for(const W of Qm)this._tileCache?this._tileCache.add(W):this.releaseTile(W),i.delete(W.key.id);for(const W of ol.values())this.tiles.push(W);for(const W of i.values())ol.has(W.key.id)||(W.visible=!1);(G=this._tileCache)==null||G.prune($,n,o),yO.pool.release(v),J3.length=0,Qm.length=0,ol.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const i of this.tileIndex.values())t(i);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var n;let i=t,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s==null?void 0:s.isReady){r.has(s.key.id)||r.set(s.key.id,s);break}}else if((n=this._tileCache)!=null&&n.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s==null?void 0:s.isReady)){r.has(s.key.id)||r.set(s.key.id,s);break}}_hasReadyAncestor(t,r){const i=Ts();this.tileInfoView.getTileBounds(i,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=r&&s.key.level<t.level){const n=Ts();if(this.tileInfoView.getTileBounds(n,s.key,!0),Rae(n,i))return!0}return!1}},ETe=class{constructor(t,r={}){this.events=new el,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,t!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),t.contains(this._canvas)||t.appendChild(this._canvas)):r.canvas!=null&&(this._canvas=r.canvas);const i={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let s=this._canvas.getContext("webgl2",i);s||(s=this._canvas.getContext("webgl2",{...i,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=s,this._handles=th([U0(this._canvas,"webglcontextlost",(n=>this.events.emit("webgl-context-lost",n)))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(t,r){if(this._hasMajorPerformanceCaveat||K("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=K("esri-performance-mode-frames-between-render")&&(r(),this._lastRenderViewState=t.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[i,s,n,o,l,p]=this._computeViewTransform(this._lastRenderViewState,t.state);this._canvas.style.transform=`matrix(${i}, ${s}, ${n}, ${o}, ${l}, ${p})`}}else r()}resize(t){const r=this._canvas,i=r.style,{state:{size:s},pixelRatio:n}=t,o=s[0],l=s[1],p=Math.round(o*n),m=Math.round(l*n);r.width===p&&r.height===m||(r.width=p,r.height=m),i.width=o+"px",i.height=l+"px"}_computeViewTransform(t,r){const[i,s]=t.center,[n,o]=r.center,[l,p]=t.toScreen([0,0],n,o),[m,v]=t.toScreen([0,0],i,s),_=m-l,E=v-p,$=t.scale/r.scale,M=r.rotation-t.rotation,k=Va();return mQ(k),uE(k,k,[$,$]),l1(k,k,Wv(M)),C0(k,k,[_,E]),k}};function TTe(e,t,r,i,s){hJ(e,t,r||0,i||e.length-1,s||$Te)}function hJ(e,t,r,i,s){for(;i>r;){if(i-r>600){var n=i-r+1,o=t-r+1,l=Math.log(n),p=.5*Math.exp(2*l/3),m=.5*Math.sqrt(l*p*(n-p)/n)*(o-n/2<0?-1:1);hJ(e,t,Math.max(r,Math.floor(t-o*p/n+m)),Math.min(i,Math.floor(t+(n-o)*p/n+m)),s)}var v=e[t],_=r,E=i;for(Jm(e,r,t),s(e[i],v)>0&&Jm(e,r,i);_<E;){for(Jm(e,_,E),_++,E--;s(e[_],v)<0;)_++;for(;s(e[E],v)>0;)E--}s(e[r],v)===0?Jm(e,r,E):Jm(e,++E,i),E<=t&&(r=E+1),t<=E&&(i=E-1)}}function Jm(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function $Te(e,t){return e<t?-1:e>t?1:0}function N_(e,t){if(!(this instanceof N_))return new N_(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function xTe(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function Nh(e,t){Yy(e,0,e.children.length,t,e)}function Yy(e,t,r,i,s){s||(s=AA(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=t;o<r;o++)n=e.children[o],Ky(s,e.leaf?i(n):n);return s}function Ky(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function UF(e,t){return e.minX-t.minX}function VF(e,t){return e.minY-t.minY}function Z3(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function _w(e){return e.maxX-e.minX+(e.maxY-e.minY)}function ITe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function MTe(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-r)*Math.max(0,n-i)}function Y3(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Sw(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function AA(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function zF(e,t,r,i,s){for(var n,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(n=t+Math.ceil((r-t)/i/2)*i,TTe(e,n,t,r,s),o.push(t,n,n,r))}N_.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!Sw(e,t))return r;for(var s,n,o,l,p=[];t;){for(s=0,n=t.children.length;s<n;s++)o=t.children[s],Sw(e,l=t.leaf?i(o):o)&&(t.leaf?r.push(o):Y3(e,l)?this._all(o,r):p.push(o));t=p.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!Sw(e,t))return!1;for(var i,s,n,o,l=[];t;){for(i=0,s=t.children.length;i<s;i++)if(n=t.children[i],Sw(e,o=t.leaf?r(n):n)){if(t.leaf||Y3(e,o))return!0;l.push(n)}t=l.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=AA([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,s,n,o=this.data,l=this.toBBox(e),p=[],m=[];o||p.length;){if(o||(o=p.pop(),i=p[p.length-1],r=m.pop(),n=!0),o.leaf&&(s=xTe(e,o.children,t))!==-1)return o.children.splice(s,1),p.push(o),this._condense(p),this;n||o.leaf||!Y3(o,l)?i?(r++,o=i.children[r],n=!1):o=null:(p.push(o),m.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:UF,compareMinY:VF,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var s,n=r-t+1,o=this._maxEntries;if(n<=o)return Nh(s=AA(e.slice(t,r+1)),this.toBBox),s;i||(i=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,i-1))),(s=AA([])).leaf=!1,s.height=i;var l,p,m,v,_=Math.ceil(n/o),E=_*Math.ceil(Math.sqrt(o));for(zF(e,t,r,E,this.compareMinX),l=t;l<=r;l+=E)for(zF(e,l,m=Math.min(l+E-1,r),_,this.compareMinY),p=l;p<=m;p+=_)v=Math.min(p+_-1,m),s.children.push(this._build(e,p,v,i-1));return Nh(s,this.toBBox),s},_chooseSubtree:function(e,t,r,i){for(var s,n,o,l,p,m,v,_;i.push(t),!t.leaf&&i.length-1!==r;){for(v=_=1/0,s=0,n=t.children.length;s<n;s++)p=Z3(o=t.children[s]),(m=ITe(e,o)-p)<_?(_=m,v=p<v?p:v,l=o):m===_&&p<v&&(v=p,l=o);t=l||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,s=r?e:i(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),Ky(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);var n=this._chooseSplitIndex(r,s,i),o=AA(r.children.splice(n,r.children.length-n));o.height=r.height,o.leaf=r.leaf,Nh(r,this.toBBox),Nh(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=AA([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Nh(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,s,n,o,l,p,m,v;for(p=m=1/0,i=t;i<=r-t;i++)o=MTe(s=Yy(e,0,i,this.toBBox),n=Yy(e,i,r,this.toBBox)),l=Z3(s)+Z3(n),o<p?(p=o,v=i,m=l<m?l:m):o===p&&l<m&&(m=l,v=i);return v},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:UF,s=e.leaf?this.compareMinY:VF;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,s)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var s,n,o=this.toBBox,l=Yy(e,0,t,o),p=Yy(e,r-t,r,o),m=_w(l)+_w(p);for(s=t;s<r-t;s++)n=e.children[s],Ky(l,e.leaf?o(n):n),m+=_w(l);for(s=r-t-1;s>=t;s--)n=e.children[s],Ky(p,e.leaf?o(n):n),m+=_w(p);return m},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)Ky(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():Nh(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function CTe(e,{timeZone:t,timeExtent:r}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:r==null?void 0:r.start,currentEnd:r==null?void 0:r.end}}}}let GF=class AJ{constructor(t,r){this.key=new cm(0,0,0,0),this.bounds=Ts(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Cae(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return CTe(this.scale,t)}createChildTiles(){const t=this.key.getChildKeys(),r=ws.acquire();for(let i=0;i<t.length;i++)r[i]=new AJ(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return ec.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const yd={added:[],removed:[]},K3=new Set,kTe=new cm(0,0,0,0);function RTe(e,t){const r=Is(t);if(!r)return null;const[i,s]=r.valid;return e[2]>s?[Ts([e[0],e[1],s,e[3]]),Ts([i,e[1],i+e[2]-s,e[3]])]:e[0]<i?[Ts([i,e[1],e[2],e[3]]),Ts([s-(i-e[0]),e[1],s,e[3]])]:null}let OTe=class extends el{constructor(t){super(),this._tiles=new Map,this._index=N_(9,K("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||zR(t)===0||GR(t)===0)return[];const r=RTe(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const s=new GF(this.tileScheme,i);this._tiles.set(i,s),this._index.insert(s),r.added.push(s)}for(const i of t.removed)if(this.has(i)){const s=this.get(i);this._tiles.delete(i),this._index.remove(s),r.removed.push(s)}this.tiles.length=0,this._tiles.forEach((i=>this.tiles.push(i))),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:s}=r,{level:n}=s;if(i.length>0)for(const{row:o,colFrom:l,colTo:p}of i)for(let m=l;m<=p;m++){const v=kTe.set(n,o,s.normalizeCol(m),s.getWorldForColumn(m)).id;if(K3.add(v),!this.has(v)){const _=new GF(this.tileScheme,v);this._tiles.set(v,_),this._index.insert(_),this.tiles.push(_),yd.added.push(_)}}for(let o=this.tiles.length-1;o>=0;o--){const l=this.tiles[o];K3.has(l.id)||(this._tiles.delete(l.id),this.tiles.splice(o,1),this._index.remove(l),yd.removed.push(l))}(yd.added.length||yd.removed.length)&&this.emit("update",yd),yO.pool.release(r),K3.clear(),yd.added.length=0,yd.removed.length=0}};const jDe=1e-30,qF=512,Ew=16777216,BDe=8,UDe=29,VDe=24,zDe=4,GDe=0,qDe=0,HDe=0,WDe=1,QDe=2,JDe=3,ZDe=4,YDe=5,KDe=6,XDe=12,eFe=13,tFe=5,PTe=6,rFe=5,iFe=6;var HF;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(HF||(HF={}));const fJ=6,NTe=1<<fJ,sFe=NTe<<1,nFe=1.05,oFe=3,aFe=1,lFe=3,uFe=3,cFe=5,dFe=6,pFe=1.15,LTe=4,hFe=128,DTe=256,AFe=DTe-2*LTe,fFe=2,mFe=128,yFe=1,gFe=10,vFe=1024,wFe=128,bFe=4,_Fe=1,SFe=1<<20,EFe=.75,TFe=10,$Fe=.75,xFe=256,IFe=32,MFe=512,CFe=0,kFe=1,FTe=1,RFe=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],OFe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Zm=256;var WF,QF,JF,ZF,YF,tk,KF,XF,Ea,rk,jg,_r,L_,to,ik,Wr,ze,D_,R0,Mp,sk,bv,e7,t7,r7;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(WF||(WF={})),(function(e){e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(QF||(QF={})),(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(JF||(JF={})),(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(ZF||(ZF={})),(function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(YF||(YF={})),(function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(tk||(tk={})),(function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(KF||(KF={})),(function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"})(XF||(XF={})),(function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"})(Ea||(Ea={})),(function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"})(rk||(rk={})),(function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"})(jg||(jg={})),(function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(_r||(_r={})),(function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(L_||(L_={})),(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(to||(to={})),(function(e){e[e.MIN_LOD=33082]="MIN_LOD",e[e.MAX_LOD=33083]="MAX_LOD",e[e.BASE_LEVEL=33084]="BASE_LEVEL",e[e.MAX_LEVEL=33085]="MAX_LEVEL",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE"})(ik||(ik={})),(function(e){e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"})(Wr||(Wr={})),(function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"})(ze||(ze={})),(function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(D_||(D_={})),(function(e){e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(R0||(R0={})),(function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F"})(Mp||(Mp={})),(function(e){e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8"})(sk||(sk={})),(function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(bv||(bv={})),(function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"})(e7||(e7={})),(function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"})(t7||(t7={})),(function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(r7||(r7={}));const PFe=33984;var F_,i7;(function(e){e[e.Texture=0]="Texture",e[e.TileTexture=1]="TileTexture",e[e.BufferObject=2]="BufferObject",e[e.VertexArrayObject=3]="VertexArrayObject",e[e.Shader=4]="Shader",e[e.Program=5]="Program",e[e.FramebufferObject=6]="FramebufferObject",e[e.Renderbuffer=7]="Renderbuffer",e[e.TransformFeedback=8]="TransformFeedback",e[e.Sync=9]="Sync",e[e.UNCOUNTED=10]="UNCOUNTED",e[e.LinesOfCode=10]="LinesOfCode",e[e.Uniform=11]="Uniform",e[e.COUNT=12]="COUNT"})(F_||(F_={})),(function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"})(i7||(i7={}));const NFe=36064,LFe=36065,DFe=36066,FFe=33306,jFe=36096,BFe=36128;var Ii,s7,n7,o7,a7,l7,u7,oc,c7;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Ii||(Ii={})),(function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(s7||(s7={})),(function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"})(n7||(n7={})),(function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"})(o7||(o7={})),(function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"})(a7||(a7={})),(function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(l7||(l7={})),(function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(u7||(u7={})),(function(e){e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL"})(oc||(oc={})),(function(e){e[e.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR"})(c7||(c7={}));const jTe=()=>de.getLogger("esri.views.webgl.checkWebGLError");function BTe(e){switch(e){case oc.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case oc.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case oc.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case oc.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case oc.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case oc.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const mJ=!!K("enable-feature:webgl-debug");function yJ(){return mJ}function UFe(){return mJ}function gd(e,t=yJ()){if(t){const r=e.getError();if(r){const i=BTe(r),s=new Error().stack;jTe().error(new Q("webgl-error","WebGL error occurred",{message:i,stack:s}))}}}var j_;(function(e){e[e.TextureDescriptor=0]="TextureDescriptor",e[e.Texture=1]="Texture",e[e.Renderbuffer=2]="Renderbuffer"})(j_||(j_={}));function UTe(e){switch(e){case Ea.BYTE:case Ea.UNSIGNED_BYTE:return 1;case Ea.SHORT:case Ea.UNSIGNED_SHORT:case Ea.HALF_FLOAT:return 2;case Ea.FLOAT:case Ea.INT:case Ea.UNSIGNED_INT:return 4}}function VTe(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function VFe(e,t,r,i,s=0){var o;const n=e.gl;e.bindBuffer(r);for(const l of i){const p=t.get(l.name);if(p==null){console.warn(`There is no location for vertex attribute '${l.name}' defined.`);continue}const m=s*l.stride;if(l.count<=4)n.vertexAttribPointer(p,l.count,l.type,l.normalized,l.stride,l.offset+m),n.enableVertexAttribArray(p),l.divisor>0&&e.gl.vertexAttribDivisor(p,l.divisor);else if(l.count===9)for(let v=0;v<3;v++)n.vertexAttribPointer(p+v,3,l.type,l.normalized,l.stride,l.offset+12*v+m),n.enableVertexAttribArray(p+v),l.divisor>0&&e.gl.vertexAttribDivisor(p+v,l.divisor);else if(l.count===16)for(let v=0;v<4;v++)n.vertexAttribPointer(p+v,4,l.type,l.normalized,l.stride,l.offset+16*v+m),n.enableVertexAttribArray(p+v),l.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(p+v,l.divisor));else console.error("Unsupported vertex attribute element count: "+l.count);if(yJ()){const v=VTe(e),_=UTe(l.type),E=l.offset,$=Math.round(_/E)!==_/E?`. Offset not a multiple of stride. DataType requires ${_} bytes, but descriptor has an offset of ${E}`:"";v&&console.error(`Unable to bind vertex attribute "${l.name}" with baseInstanceOffset ${m}${$}:`,v,l)}}}function zFe(e,t,r,i){var n,o,l;const s=e.gl;e.bindBuffer(r);for(const p of i){const m=t.get(p.name);if(p.count<=4)s.disableVertexAttribArray(m),p.divisor&&p.divisor>0&&((n=e.gl)==null||n.vertexAttribDivisor(m,0));else if(p.count===9)for(let v=0;v<3;v++)s.disableVertexAttribArray(m+v),p.divisor&&p.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(m+v,0));else if(p.count===16)for(let v=0;v<4;v++)s.disableVertexAttribArray(m+v),p.divisor&&p.divisor>0&&((l=e.gl)==null||l.vertexAttribDivisor(m+v,0));else console.error("Unsupported vertex attribute element count: "+p.count)}e.unbindBuffer(tk.ARRAY_BUFFER)}function zTe(e){switch(e){case Wr.ALPHA:case Wr.LUMINANCE:case Wr.RED:case Wr.RED_INTEGER:case ze.R8:case ze.R8I:case ze.R8UI:case ze.R8_SNORM:case sk.STENCIL_INDEX8:return 1;case Wr.LUMINANCE_ALPHA:case Wr.RG:case Wr.RG_INTEGER:case ze.RGBA4:case ze.R16F:case ze.R16I:case ze.R16UI:case ze.RG8:case ze.RG8I:case ze.RG8UI:case ze.RG8_SNORM:case ze.RGB565:case ze.RGB5_A1:case Mp.DEPTH_COMPONENT16:return 2;case Wr.RGB:case Wr.RGB_INTEGER:case ze.RGB8:case ze.RGB8I:case ze.RGB8UI:case ze.RGB8_SNORM:case ze.SRGB8:case Mp.DEPTH_COMPONENT24:return 3;case Wr.RGBA:case Wr.RGBA_INTEGER:case ze.RGBA8:case ze.R32F:case ze.R11F_G11F_B10F:case ze.RG16F:case ze.R32I:case ze.R32UI:case ze.RG16I:case ze.RG16UI:case ze.RGBA8I:case ze.RGBA8UI:case ze.RGBA8_SNORM:case ze.SRGB8_ALPHA8:case ze.RGB9_E5:case ze.RGB10_A2UI:case ze.RGB10_A2:case Mp.DEPTH_COMPONENT32F:case R0.DEPTH24_STENCIL8:return 4;case R0.DEPTH32F_STENCIL8:return 5;case ze.RGB16F:case ze.RGB16I:case ze.RGB16UI:return 6;case ze.RG32F:case ze.RG32I:case ze.RG32UI:case ze.RGBA16F:case ze.RGBA16I:case ze.RGBA16UI:return 8;case ze.RGB32F:case ze.RGB32I:case ze.RGB32UI:return 12;case ze.RGBA32F:case ze.RGBA32I:case ze.RGBA32UI:return 16;case Ii.COMPRESSED_RGB_S3TC_DXT1_EXT:case Ii.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Ii.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Ii.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Ii.COMPRESSED_R11_EAC:case Ii.COMPRESSED_SIGNED_R11_EAC:case Ii.COMPRESSED_RGB8_ETC2:case Ii.COMPRESSED_SRGB8_ETC2:case Ii.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Ii.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Ii.COMPRESSED_RG11_EAC:case Ii.COMPRESSED_SIGNED_RG11_EAC:case Ii.COMPRESSED_RGBA8_ETC2_EAC:case Ii.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let gJ=class{constructor(t=0,r=t){this.width=t,this.height=r,this.type=j_.TextureDescriptor,this.target=to.TEXTURE_2D,this.pixelFormat=Wr.RGBA,this.dataType=bv.UNSIGNED_BYTE,this.samplingMode=_r.LINEAR,this.wrapMode=L_.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function GTe(e){return e.width<=0||e.height<=0||e.depth<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:zTe(e.internalFormat))*(e.target===to.TEXTURE_CUBE_MAP?6:1))}const Ym=()=>de.getLogger("esri/views/webgl/textureUtils");function Km(e){const{width:t,height:r,depth:i}=e;(t!=null&&t<0||r!=null&&r<0||i!=null&&i<0)&&Ym().error("Negative dimension parameters are not allowed!");const{internalFormat:s}=e;if(s&&(vJ(s)||wJ(s))){const{linearFilterDepth:n,compareEnabled:o,samplingMode:l,hasMipmap:p}=e;p&&Ym().error("Depth textures cannot have mipmaps"),n?l!==_r.LINEAR&&l!==_r.NEAREST&&Ym().error("Depth textures cannot sample mipmaps"):(l!==_r.NEAREST&&Ym().error("Depth textures without filtering must use NEAREST filtering"),o&&Ym().error("Depth textures without filtering cannot use compare function"))}}function qTe(e){return e in ze}function vJ(e){return e in Mp}function wJ(e){return e in R0}function HTe(e){return e!=null&&e in Ii}function fA(e){return e!=null&&"type"in e&&e.type==="compressed"}function WTe(e){return e!=null&&"byteLength"in e}function d7(e){return e!=null&&!fA(e)&&!WTe(e)}function Lh(e){return e===to.TEXTURE_3D||e===to.TEXTURE_2D_ARRAY}function p7(e,t,r,i=1){let s=Math.max(t,r);return e===to.TEXTURE_3D&&(s=Math.max(s,i)),Math.floor(Math.log2(s))+1}function Tw(e){if(e.internalFormat!=null)return e.internalFormat;switch(e.dataType){case bv.FLOAT:switch(e.pixelFormat){case Wr.RGBA:return ze.RGBA32F;case Wr.RGB:return ze.RGB32F;default:throw new Q("texture:unknown-format","Unable to derive format")}case bv.UNSIGNED_BYTE:switch(e.pixelFormat){case Wr.RGBA:return ze.RGBA8;case Wr.RGB:return ze.RGB8}}const{pixelFormat:t}=e;return e.internalFormat=t===D_.DEPTH_STENCIL?R0.DEPTH24_STENCIL8:t===D_.DEPTH_COMPONENT?Mp.DEPTH_COMPONENT24:t,e.internalFormat}function QTe(e){let t="width"in e?e.width:e.codedWidth,r="height"in e?e.height:e.codedHeight;return e instanceof HTMLVideoElement&&(t=e.videoWidth,r=e.videoHeight),{width:t,height:r,depth:1}}let JTe=class bJ extends gJ{constructor(t,r){switch(super(),this.context=t,Object.assign(this,r),this.internalFormat){case ze.R16F:case ze.R32F:case ze.R8_SNORM:case ze.R8:this.pixelFormat=Wr.RED;break;case ze.R8I:case ze.R8UI:case ze.R16I:case ze.R16UI:case ze.R32I:case ze.R32UI:this.pixelFormat=Wr.RED_INTEGER}}static validate(t,r){return new bJ(t,r)}};const al=()=>de.getLogger("esri/views/webgl/Texture");var Xr;let ZTe=(Xr=class{constructor(t,r=null,i=null){if(this.type=j_.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in t)this._descriptor=t,i=r;else{const s=JTe.validate(t,r);if(!s)throw new Q("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=s}this._descriptor.target===to.TEXTURE_CUBE_MAP?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return GTe(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this._descriptor.context.gl&&this.hasWebGLTextureObject&&(this._descriptor.context.instanceCounter.decrement(F_.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,r){const i=this._descriptor;if(i.width!==t||i.height!==r){if(this._wasImmutablyAllocated)throw new Q("texture:immutable-resize","Immutable textures can't be resized!");i.width=t,i.height=r,this._descriptor.target===to.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.compress=t}disableCompression(){this._descriptor.compress=void 0}setData(t){this.abortCompression(),!fA(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in Ii&&(this._descriptor.internalFormat=void 0),this._setData(t),!fA(t)&&this._descriptor.compress&&this._compressOnWorker(t)}updateData(t,r,i,s,n,o,l=0){o||al().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||al().error("An attempt to update uninitialized texture!");const p=this._descriptor;p.internalFormat=Tw(p);const{context:m,pixelFormat:v,dataType:_,target:E,isImmutable:$}=p;if($&&!this._wasImmutablyAllocated)throw new Q("texture:uninitialized","Cannot update immutable texture before allocation!");const M=m.bindTexture(this,Xr.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+s>p.width||i+n>p.height)&&al().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:k}=m;l&&(s&&n||al().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),k.pixelStorei(k.UNPACK_SKIP_ROWS,l)),d7(o)?k.texSubImage2D(E,t,r,i,s,n,v,_,o):fA(o)?k.compressedTexSubImage2D(E,t,r,i,s,n,p.internalFormat,o.levels[t]):k.texSubImage2D(E,t,r,i,s,n,v,_,o),l&&k.pixelStorei(k.UNPACK_SKIP_ROWS,0),m.bindTexture(M,Xr.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,r,i,s,n,o,l,p){p||al().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||al().error("An attempt to update an uninitialized texture!");const m=this._descriptor;m.internalFormat=Tw(m);const{context:v,pixelFormat:_,dataType:E,isImmutable:$,target:M}=m;if($&&!this._wasImmutablyAllocated)throw new Q("texture:uninitialized","Cannot update immutable texture before allocation!");Lh(M)||al().warn("Attempting to set 3D texture data on a non-3D texture");const k=v.bindTexture(this,Xr.TEXTURE_UNIT_FOR_UPDATES);v.setActiveTexture(Xr.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||s<0||r+n>m.width||i+o>m.height||s+l>m.depth)&&al().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:N}=v;if(fA(p))p=p.levels[t],N.compressedTexSubImage3D(M,t,r,i,s,n,o,l,m.internalFormat,p);else{const U=p;N.texSubImage3D(M,t,r,i,s,n,o,l,_,E,U)}v.bindTexture(k,Xr.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new Q("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,Km(t)}t.samplingMode===_r.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=_r.LINEAR_MIPMAP_NEAREST):t.samplingMode===_r.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=_r.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,Xr.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Xr.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(r,Xr.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new Q("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,Km(t)}t.samplingMode===_r.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=_r.LINEAR):t.samplingMode===_r.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=_r.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,Km(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(t){t!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=t,this.setSamplingMode(t?_r.LINEAR:_r.NEAREST),Km(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=h0(this._compressionAbortController)}_setData(t,r){var p;const i=this._descriptor,s=(p=i.context)==null?void 0:p.gl;if(!s)return;gd(s),this.hasWebGLTextureObject||(this._glName=s.createTexture(),i.context.instanceCounter.increment(F_.Texture,this)),Km(i);const n=i.context.bindTexture(this,Xr.TEXTURE_UNIT_FOR_UPDATES);i.context.setActiveTexture(Xr.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),gd(s);const o=r??i.target,l=Lh(o);if(d7(t))this._setDataFromTexImageSource(t,o);else{const{width:m,height:v,depth:_}=i;if(m==null||v==null)throw new Q("texture:missing-size","Width and height must be specified!");if(l&&_==null)throw new Q("texture:missing-depth","Depth must be specified!");if(i.internalFormat=Tw(i),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,i.internalFormat,i.hasMipmap,m,v,_),fA(t)){if(!HTe(i.internalFormat))throw new Q("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(t,i.internalFormat,o)}else this._texImage(o,0,i.internalFormat,m,v,_,t),gd(s),i.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),gd(s),i.context.bindTexture(n,Xr.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let r=to.TEXTURE_CUBE_MAP_POSITIVE_X;r<=to.TEXTURE_CUBE_MAP_NEGATIVE_Z;r++)this._setData(t,r)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:s}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(t,r){const{gl:i}=this._descriptor.context,s=this._descriptor;s.internalFormat=Tw(s);const n=Lh(r),{width:o,height:l,depth:p}=QTe(t);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=l),n&&s.depth,n&&(s.depth=p),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,s.internalFormat,s.hasMipmap,o,l,p),this._texImage(r,0,s.internalFormat,o,l,p,t),gd(i),s.hasMipmap&&(this.generateMipmap(),gd(i))}_setDataFromCompressedSource(t,r,i){const s=this._descriptor,{width:n,height:o,depth:l}=s,p=t.levels,m=p7(i,n,o,l),v=Math.min(m,p.length)-1;this._descriptor.context.gl.texParameteri(s.target,ik.MAX_LEVEL,v),this._forEachMipmapLevel(((_,E,$,M)=>{const k=p[Math.min(_,p.length-1)];this._compressedTexImage(i,_,r,E,$,M,k)}),v)}_texStorage(t,r,i,s,n,o){const{gl:l}=this._descriptor.context;if(!qTe(r)&&!vJ(r)&&!wJ(r))throw new Q("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const p=i?p7(t,s,n,o):1;if(Lh(t)){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texStorage3D(t,p,r,s,n,o)}else l.texStorage2D(t,p,r,s,n);this._wasImmutablyAllocated=!0}_texImage(t,r,i,s,n,o,l){const p=this._descriptor.context.gl,m=Lh(t),{isImmutable:v,pixelFormat:_,dataType:E}=this._descriptor;if(v){if(l!=null){const $=l;if(m){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");p.texSubImage3D(t,r,0,0,0,s,n,o,_,E,$)}else p.texSubImage2D(t,r,0,0,s,n,_,E,$)}}else{const $=l;if(m){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");p.texImage3D(t,r,i,s,n,o,0,_,E,$)}else p.texImage2D(t,r,i,s,n,0,_,E,$)}}_compressedTexImage(t,r,i,s,n,o,l){const p=this._descriptor.context.gl,m=Lh(t);if(this._descriptor.isImmutable){if(l!=null)if(m){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");p.compressedTexSubImage3D(t,r,0,0,0,s,n,o,i,l)}else p.compressedTexSubImage2D(t,r,0,0,s,n,i,l)}else if(m){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");p.compressedTexImage3D(t,r,i,s,n,o,0,l)}else p.compressedTexImage2D(t,r,i,s,n,0,l)}async _compressOnWorker(t){var $,M,k,N;const{width:r,height:i,context:s,flipped:n,preMultiplyAlpha:o,hasMipmap:l}=this._descriptor,p=($=this._descriptor.compress)==null?void 0:$.compressionTracker,m=(M=this._descriptor.compress)==null?void 0:M.compressionCallback,{compressedTextureETC:v,compressedTextureS3TC:_}=s.capabilities;if(!((k=Xr.compressionWorkerHandle)!=null&&k.isCompressible(t,this._descriptor))||!v&&!_)return;this.abortCompression();const E=new AbortController;this._compressionAbortController=E,p==null||p.increment();try{let U;t instanceof Uint8Array?U=t.buffer:(U=await createImageBitmap(t,{imageOrientation:n?"flipY":"none"}),dr(E));const G={data:U,width:r,height:i,needsFlip:t instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===Wr.RGBA?4:3,preMultiplyAlpha:o,hasMipmap:l,hasETC:!!v,hasS3TC:!!_},W=await Xr.compressionWorkerHandle.invoke(G,E.signal,"low");if(dr(E),W.compressedTexture&&this.hasWebGLTextureObject){const Z=this.usedMemory;this._descriptor.internalFormat=W.internalFormat,this._setData(W.compressedTexture),m==null||m(Z-this.usedMemory)}}catch(U){zi(U)||al().error("Texture compression failed!")}finally{p==null||p.decrement(),(N=this._compressionAbortController)!=null&&N.signal.aborted&&(this._compressionAbortController=null)}}_forEachMipmapLevel(t,r=1/0){let{width:i,height:s,depth:n,hasMipmap:o,target:l}=this._descriptor;const p=l===to.TEXTURE_3D;if(i==null||s==null||p&&n==null)throw new Q("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let m=0;t(m,i,s,n),o&&(i!==1||s!==1||p&&n!==1)&&!(m>=r);++m)i=Math.max(1,i>>1),s=Math.max(1,s>>1),p&&(n=Math.max(1,n>>1))}_applySamplingMode(){var n;const t=this._descriptor,r=(n=t.context)==null?void 0:n.gl;let i=t.samplingMode,s=t.samplingMode;i===_r.LINEAR_MIPMAP_NEAREST||i===_r.LINEAR_MIPMAP_LINEAR?(i=_r.LINEAR,t.hasMipmap||(s=_r.LINEAR)):i!==_r.NEAREST_MIPMAP_NEAREST&&i!==_r.NEAREST_MIPMAP_LINEAR||(i=_r.NEAREST,t.hasMipmap||(s=_r.NEAREST)),r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,i),r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){var i;const t=this._descriptor,r=(i=t.context)==null?void 0:i.gl;typeof t.wrapMode=="number"?(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode)):(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode.s),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode.t))}_applyShadowMode(){var s;const t=this._descriptor,r=(s=t.context)==null?void 0:s.gl,i=t.compareEnabled?r.COMPARE_REF_TO_TEXTURE:r.NONE;r.texParameteri(t.target,r.TEXTURE_COMPARE_MODE,i),t.compareEnabled&&r.texParameteri(t.target,r.TEXTURE_COMPARE_FUNC,r.GREATER),gd(r)}_applyAnisotropicFilteringParameters(){const t=this._descriptor,r=t.context.capabilities.textureFilterAnisotropic;r&&t.context.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}},Xr.TEXTURE_UNIT_FOR_UPDATES=0,Xr.compressionWorkerHandle=null,Xr);const X3=()=>de.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function YTe(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const KTe=[0,0,0,0];let _J=class{constructor(){this.type="single",this._highlightOptions=new Nc,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*Zm),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,r){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,PTe),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<fJ)-1,activeGradient:this}]}_updateGradientTexture(t){const r=XTe(this._highlightOptions);if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,YTe(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,s=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,n=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,l=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,p=Math.sqrt(Math.PI/2)*FTe,m=Math.abs(s)>p?Math.round(10*(Math.abs(s)-p))/10:0,v=Math.abs(l)>p?Math.round(10*(Math.abs(l)-p))/10:0;let _;m&&!v?X3().error("The outer rim of the highlight is "+m+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!m&&v?X3().error("The inner rim of the highlight is "+v+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):m&&v&&X3().error("The highlight is "+Math.max(m,v)+"px away from the edge of the feature; consider reducing some width values.");const E=[void 0,void 0,void 0,void 0];function $(k,N,U){E[0]=(1-U)*k[0]+U*N[0],E[1]=(1-U)*k[1]+U*N[1],E[2]=(1-U)*k[2]+U*N[2],E[3]=(1-U)*k[3]+U*N[3]}const{_texelData:M}=this;for(let k=0;k<Zm;++k)_=s+k/(Zm-1)*(l-s),_<s?(E[0]=0,E[1]=0,E[2]=0,E[3]=0):_<n?$(KTe,i.outlineColor,(_-s)/(n-s)):_<o?[E[0],E[1],E[2],E[3]]=i.outlineColor:_<l?$(i.outlineColor,i.fillColor,(_-o)/(l-o)):[E[0],E[1],E[2],E[3]]=i.fillColor,M[4*k]=255*E[0],M[4*k+1]=255*E[1],M[4*k+2]=255*E[2],M[4*k+3]=255*E[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=l,!this._shadeTex){const k=new gJ;k.wrapMode=L_.CLAMP_TO_EDGE,k.width=Zm,k.height=1,this._shadeTex=new ZTe(t,k)}this._shadeTex.updateData(0,0,0,Zm,1,this._texelData)}};function XTe(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}let e3e=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let r=0;r<t.length;r++)this.gradients[r]||(this.gradients[r]=new _J),this.gradients[r].setHighlightOptions(t[r]);for(let r=t.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const r=[];for(let i=0;i<this.gradients.length;i++){const s=this.gradients[i];r.push({activeReasons:t,activeGradient:s}),t<<=1}return r}};var h7,A7,f7,m7,y7,g7,B_,v7,w7;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(h7||(h7={})),(function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(A7||(A7={})),(function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"})(f7||(f7={})),(function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(m7||(m7={})),(function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"})(y7||(y7={})),(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"})(g7||(g7={})),(function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"})(B_||(B_={})),(function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"})(v7||(v7={})),(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"})(w7||(w7={}));const SJ={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:rk.EQUAL,mask:255,op:{fail:jg.KEEP,zFail:jg.KEEP,zPass:jg.REPLACE}}}},t3e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},r3e={...SJ,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function i3e({pixelRatio:e,state:t,displayLevel:r,requiredLevel:i},s){const n=1/2**(r-s.key.level),o=1/2**(i-s.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:t.scale,currentZoom:r,metersPerSRUnit:po(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function EJ(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function TJ(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function s3e(e){if(!TJ(e))return null;const{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}=e.passOptions;return{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}}function n3e(e){if(!EJ(e))return null;const{activeReasons:t,highlightAll:r}=e.passOptions;return{activeReasons:t,highlightAll:r?1:0}}function WFe(e,t,r){const i={};for(const s in r)typeof r[s]!="function"?i[s]=r[s]:i[s]=r[s](e,t);return i}function QFe(e,t){const{attributeView:r,context:i}=e;return{storage:r.getUniforms(i),view:i3e(e,t),hittestRequest:s3e(e),highlight:n3e(e)}}function JFe(e){return{inside:e.selection===B_.InsideEffect,outside:e.selection===B_.OutsideEffect}}function o3e(e){return TJ(e)?t3e:EJ(e)&&e.passOptions.stepType==="clear"?r3e:SJ}function ZFe(e){const{row:t,col:r}=e.key,i=r*qF,s=t*qF;return{tileOffsetFromLocalOrigin:[i%Ew,s%Ew],maxIntsToLocalOrigin:[Math.floor(i/Ew),Math.floor(s/Ew)]}}const a3e=new ct({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function YFe(e){return a3e.toJSON(e)}function KFe(e){const{bandCount:t,attributeTable:r,colormap:i,pixelType:s}=e.raster.rasterInfo;return t===1&&(r!=null||i!=null||s==="u8"||s==="s8")}function l3e(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new e3e:new _J),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function XFe(e,t,r,i){const{painter:s,highlightGradient:n}=e,{highlight:o}=s.effects;if(!n)return;const l=e.passOptions,p=n.getReasonsWithGradients();for(let m=0;m<p.length;m++){const v={...e,passOptions:{type:"highlight",activeGradient:p[m].activeGradient,activeReasons:p[m].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(v),r(v),m<p.length-1){let E=0;for(let $=m+1;$<p.length;$++)E|=p[$].activeReasons;r({...e,passOptions:{type:"highlight",activeGradient:p[m].activeGradient,activeReasons:E,stepType:"clear",highlightAll:t}})}const _={...e,passOptions:{type:"highlight",activeGradient:p[m].activeGradient,activeReasons:p[m].activeReasons,stepType:"draw",highlightAll:t}};s.setPipelineState(o3e(e)),s.updatePipelineState(e.context),o.draw(_),o.unbind()}e.passOptions=l}const $w=e=>parseFloat(e)/100;function u3e(e,t,r){const i=typeof e.left=="string"?$w(e.left)*t:e.left,s=typeof e.right=="string"?$w(e.right)*t:e.right,n=typeof e.top=="string"?$w(e.top)*r:e.top,o=typeof e.bottom=="string"?$w(e.bottom)*r:e.bottom,l=n;return{xmin:i,xmax:Math.max(t-s,i),ymin:l,ymax:Math.max(r-o,n)}}function $J(e,t,r,i){switch(t.type){case"rect":{const{width:s,height:n}=e,{xmin:o,xmax:l,ymin:p,ymax:m}=u3e(t,s,n),{x:v,y:_}=r;return v>o&&v<l&&_>p&&_<m}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||VR(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?UR(t.geometry,i):Jv(t.geometry,i))}}function c3e(e){if(!e.highlights)return null;const t=e.highlights.findIndex((r=>r.name==="default"));return t===-1?null:e.highlights.items[t]}function d3e(e,t){if(!e.highlights){if(!t)return;e.highlights=new Te([new Nc])}const r=e.highlights.findIndex((i=>i.name==="default"));t?e.highlights.items[r].assignFrom(t):(e.highlights.removeAt(r),e.highlights.length===0&&(e.highlights=null))}async function p3e(e,t,r){const i=JW(t)?QW(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set;const n=new Set;let o=!1,l=null,p=null;r!=null&&r.include?_7(r.include,b7(e,(E=>{s.add(E),e$(E,($=>n.add($)))}),((E,$)=>{n.add(E),s.add($)}),(E=>{l||(l=new Set),l.add(E)}),(E=>s.add(E)),(()=>o=!0))):(o=!0,s=new Set(e.allLayerViews),s.forEach((E=>{e$(E,($=>n.add($)))}))),r!=null&&r.exclude&&_7(r.exclude,b7(e,(E=>{s.delete(E),e$(E,($=>n.delete($)))}),(E=>n.delete(E)),(E=>{p||(p=new Set),p.add(E)})));const m=e.toMap(i),v=e.allLayerViews.filter((E=>!E.suspended&&s.has(E)&&E.clips.every(($=>$J(e,$,i,m))))).reverse();let _=[...o?e.graphicsView.hitTest(m).map((E=>({type:"graphic",graphic:E,layer:null,mapPoint:m}))):[],...await Promise.all(v.map((E=>E.hitTest(m,i))).toArray())].filter(Ga).flat().filter(Ga);return _=_.filter((E=>{var $;return E.type!=="graphic"||(($=E.layer)==null?void 0:$.type)!=="subtype-group"||n.has(E.graphic.layer)})),l&&(_=_.filter((E=>!("graphic"in E)||!E.graphic||(l==null?void 0:l.has(nk(E.graphic)))))),p&&(_=_.filter((E=>!("graphic"in E)||!E.graphic||!(p!=null&&p.has(nk(E.graphic)))))),{screenPoint:i,results:_}}function b7(e,t,r,i,s,n){return o=>{if(o instanceof Sr){if(o.layer===e)n==null||n();else{const l=e.allLayerViews.find((p=>p.layer===o.layer));l&&(s==null||s(l))}i(nk(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const l=e.allLayerViews.find((p=>p.layer===o.parent));l&&r(o,l)}else{const l=e.allLayerViews.find((p=>p.layer===o));l&&t(l)}}}function _7(e,t){if(e)if(pb(e))for(const r of e)if(pb(r))for(const i of r)t(i);else t(r);else t(e)}function nk(e){var r,i;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((i=e.sourceLayer)==null?void 0:i.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function e$({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach((r=>{t(r)}))}let Xm=null,U_=!0;function h3e(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(U_)try{return new ImageData(e,t)}catch{U_=!1}return xJ(e,t,r)}function e7e(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(U_)try{return new ImageData(e,t,r)}catch{U_=!1}const s=xJ(t,r,i);return s.data.set(e,0),s}function A3e(){return Xm||(Xm=document.createElement("canvas"),Xm.width=1,Xm.height=1),Xm}function xJ(e,t,r){return r||(r=A3e()),r.getContext("2d").createImageData(e,t)}async function f3e(e,t){const r=window.URL.createObjectURL(e);try{const{data:i}=await Nt(r,{...t,responseType:"image"});return i}catch(i){throw zi(i)?i:new Q("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function t7e(e,t){const{arrayBuffer:r,mediaType:i}=await m3e(e,t),s=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await ce(()=>import("./gif-SjXu7IuY.js"),[],import.meta.url);if(n(r))return o(r,t)}if(s){const{isAnimatedPNG:n,parseApng:o}=await ce(()=>import("./apng-BVz8s8td.js"),__vite__mapDeps([280,41,42]),import.meta.url);if(n(r))return o(r,t)}return f3e(new Blob([r],{type:i}),t)}async function m3e(e,t){var s;const r=Vp(e);if(r!=null&&r.isBase64)return{arrayBuffer:eV(r.data),mediaType:r.mediaType};const i=await Nt(e,{responseType:"array-buffer",...t});return{arrayBuffer:i.data,mediaType:((s=i.getHeader)==null?void 0:s.call(i,"Content-Type"))??""}}function IJ(e,t,r){const{ctx:i,canvas:s}=CJ(e,r),n=i.getImageData(0,0,e.width,e.height),o=RJ(s,t);return kJ(s),{dataUrl:o,data:n}}function MJ(e,t){const{ctx:r,canvas:i}=CJ(e,t),s=r.getImageData(0,0,e.width,e.height);return kJ(i),s}function CJ(e,t){const r=y3e();t.premultipliedAlpha&&b3e(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&w3e(i),{ctx:i,canvas:r}}function kJ(e){e.width=0,e.height=0}function y3e(){return t$==null&&(t$=document.createElement("canvas")),t$}let t$=null;function RJ(e,t){const r=_3e[t.format],i=t.quality/100;return e.toDataURL(r,i)}function OJ(e,t){const r=v3e(e),i=E3e[r];return{format:r,quality:lo(t??i,0,100)}}function PJ(e,t){return t/Math.max(e[0],e[1])}function g3e(e,t,r,i=0,s=0,n=e.width-i,o=e.height-s,l=!1){const{data:p}=e,{width:m,height:v,data:_}=t,E=n/m,$=o/v,M=Math.ceil(E/2),k=Math.ceil($/2),N=e.width;for(let U=0;U<v;U++)for(let G=0;G<m;G++){const W=4*(G+(l?v-U-1:U)*m);let Z=0,ie=0,ne=0,ge=0,we=0,xe=0;const Ie=(U+.5)*$;for(let $e=Math.floor(U*$);$e<(U+1)*$;$e++){const Re=Math.abs(Ie-($e+.5))/k,pt=(G+.5)*E,qe=Re*Re;for(let Ot=Math.floor(G*E);Ot<(G+1)*E;Ot++){const ni=Math.abs(pt-(Ot+.5))/M,Ct=Math.sqrt(qe+ni*ni);if(Ct>=1)continue;let It=2*Ct*Ct*Ct-3*Ct*Ct+1;const Gi=4*(i+Ot+(s+$e)*N);xe+=It*p[Gi+3],ie+=It,!r&&p[Gi+3]<255&&(It=It*p[Gi+3]/255),ne+=It*p[Gi],ge+=It*p[Gi+1],we+=It*p[Gi+2],Z+=It}}_[W]=ne/Z,_[W+1]=ge/Z,_[W+2]=we/Z,_[W+3]=xe/ie}return t}function v3e(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return S3e}}function w3e(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function b3e(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const s=t[i+3];if(s!==255&&s>0){const n=255/s;t[i]=t[i]*n,t[i+1]=t[i+1]*n,t[i+2]=t[i+2]*n}}}const _3e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},S7=98,S3e="png",E3e={png:100,jpg:S7,jpeg:S7},r7e=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:h3e,encode:IJ,encodeData:MJ,getFormatAndQuality:OJ,getMaximumResolutionScale:PJ,resampleHermite:g3e,toDataUrl:RJ},Symbol.toStringTag,{value:"Module"})),NJ={flipY:!0,premultipliedAlpha:!0};async function T3e(e,t){const r=await LJ(e,t),{format:i,quality:s}=OJ(t==null?void 0:t.format,t==null?void 0:t.quality);return IJ(r,{format:i,quality:s},NJ)}async function $3e(e,t){const r=await LJ(e,t);return MJ(r,NJ)}function LJ(e,t){const r=M3e(t||{},I3e(e.stage,e.size),e.size,e.padding),i=x3e(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t==null?void 0:t.rotation)}function x3e(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach((i=>{const s=t.find((n=>n.layer.id===i.id));s!=null&&s.container&&r.push(s.container)})),r}function I3e(e,t){return Math.min(4,PJ(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function M3e(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let s=null;e.width!=null&&e.height!=null?s=[e.width,e.height]:e.width==null&&e.height!=null?s=[e.height,e.height]:e.width!=null&&e.height==null?s=[e.width,e.width]:e.width==null&&e.height==null&&(s=null);const n=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let l,p,m=e.area||{x:0,y:0,width:n,height:o};if(s){const v=n/o,_=s[0]/s[1];if(_>v){const E=m.width/_;m={x:m.x,y:Math.round(m.y+(m.height-E)/2),width:m.width,height:Math.round(E)}}else{const E=m.height*_;m={x:Math.round(m.x+(m.width-E)/2),y:m.y,width:Math.round(E),height:m.height}}}else s=[m.width,m.height];return s[0]>m.width?(l=Math.min(s[0]/m.width,t),p=s[0]/m.width/l):(l=1,p=s[0]/m.width),{cropArea:{x:Math.round((m.x+i.left)*l),y:Math.round((m.y+i.top)*l),width:Math.round(m.width*l),height:Math.round(m.height*l)},outputScale:p,resolutionScale:l}}const C3e=e=>e.includes("Brush");let DJ=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),C3e(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}},k3e=class{constructor(t){this.getUnmaskedRenderer=t}};function R3e(e){const t=e.getExtension("WEBGL_debug_renderer_info");return t?new k3e((()=>e.getParameter(t.UNMASKED_RENDERER_WEBGL))):null}let E7;function O3e(){return E7??(E7=L3e()),E7}let P3e=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function N3e(e){var s;if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=t.getContext("webgl2"),r!=null&&(e.majorPerformanceCaveat=!0,e.unmaskedRenderer=((s=R3e(r))==null?void 0:s.getUnmaskedRenderer())??"unknown")),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function L3e(){const e=new P3e,t=N3e(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function D3e(e){const t=O3e();return t.available?e==="3d"&&t.majorPerformanceCaveat?new Q("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new Q("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new Q("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new Q("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function F3e(e){return e&&"nodeType"in e}function j3e(e){return e&&typeof e.render=="function"}const T7={component:"esri-component"};let Vd=class extends je{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,r;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((r=this.node)==null?void 0:r.id)}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(T7.component),r&&r.classList.remove(T7.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||F3e(t)?(this._set("widget",null),Y4(t)):(j3e(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};a([A()],Vd.prototype,"id",null),a([A()],Vd.prototype,"node",null),a([Ft("node")],Vd.prototype,"castNode",null),a([A({readOnly:!0})],Vd.prototype,"widget",void 0),Vd=a([P("esri.views.ui.Component")],Vd);const K2=Vd,FJ="calcite-mode-",jJ="dark",B3e="light",U3e=/\W/g,V3e="--esri-calcite-mode-name";function BJ(){return getComputedStyle(document.body).getPropertyValue(V3e).replaceAll(U3e,"").toLowerCase()}function a7e(){return BJ()===jJ}function z3e(){const e=BJ();switch(e){case jJ:case B3e:return`${FJ}${e}`;default:return null}}function G3e(e){const t=z3e();t&&(q3e(e),e.classList.add(t))}function q3e(e){Array.from(e.classList).forEach((t=>{t.startsWith(FJ)&&e.classList.remove(t)}))}const hE=new Map;function UJ(){hE.clear()}function H3e(e){return hE.get(e)}function W3e(e,t){hE.set(e,t)}function r$(e){hE.delete(e)}function Q3e(...e){const t=ws.acquire();for(let i=0;i<e.length;i++){const s=e[i],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const r=t.join(" ");return ws.release(t),r}(()=>{const e=new Map,t=new ResizeObserver((i=>{var s;UJ();for(const n of i)(s=e.get(n.target))==null||s(n)})),r=(i,s,n)=>(e.set(i,s),t.observe(i,n),Lt((()=>{t.unobserve(i),e.delete(i)})));return(i,s,n)=>{let o=null;return th([Qe((()=>typeof i=="function"?i():i),(l=>{o==null||o.remove(),l&&(o=r(l,s,n))}),vs),Lt((()=>o==null?void 0:o.remove()))])}})();function J3e(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function l7e(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function u7e(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function Z3e(e){return e==="Enter"||e===" "}async function Y3e(e,t){await nee(Fv(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const K3e={left:0,top:0,bottom:0,right:0},VJ={bottom:30,top:15,right:15,left:15},ll="esri-ui",Ns={ui:ll,corner:`${ll}-corner`,innerContainer:`${ll}-inner-container`,manualContainer:`${ll}-manual-container`,cornerContainer:`${ll}-corner-container`,topLeft:`${ll}-top-left`,topRight:`${ll}-top-right`,bottomLeft:`${ll}-bottom-left`,bottomRight:`${ll}-bottom-right`};function X3e(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function xw(e){return e===0?"0":`${e}px`}function i$(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function s$(e,{top:t,bottom:r,left:i,right:s}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=s}let Aa=class extends el.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=sn(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&s$(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&s$(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Qe((()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]}),this._applyViewPadding,Vi),Qe((()=>this.padding),this._applyUIPadding,Vi),Qe((()=>[this.container,this._locale]),(([t,r])=>{t&&t.setAttribute("lang",r)}),Vi),EU((t=>{this._locale=t}))])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(Ns.ui),G3e(t),this._attachContainers(t)),r&&(r.classList.remove(Ns.ui),s$(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",t))}get height(){var n;const t=((n=this.view)==null?void 0:n.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:s}=r;return Math.max(t-i-s,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...VJ,...t}}get width(){var n;const t=((n=this.view)==null?void 0:n.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:s}=r;return Math.max(t-i-s,0)}add(t,r){let i,s,n;if(Array.isArray(t))return void t.forEach((l=>this.add(l,r)));const o=i$(t);o&&({index:i,position:r,component:t,key:s}=o),r&&typeof r=="object"&&({index:i,key:s,position:r,internal:n}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i??this._getNumComponentsAtPosition(r),s,n)}remove(t,r){var s;if(!t)return;if(Array.isArray(t))return t.map((n=>this.remove(n,r)));const i=this._find(t);if(i){const n=this._componentMap.get(i);if(!n||n.key!==r)return;const o=this._components.indexOf(i),l=i.node.parentNode;return l==null||l.removeChild(i.node),this._componentMap.delete(i),(s=i.widget)==null||s.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach((p=>{const m=this._componentMap.get(p);m&&m.position===n.position&&m.index>n.index&&m.index--})),this._components.splice(o,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const n of t)this.empty(n,r);return}const i=this._positionNameToContainerLookup[t??"manual"],s=Array.prototype.slice.call(i.children).map((n=>this._findByNode(n))).filter((n=>{var o;return n==null?!1:!(((o=this._componentMap.get(n))==null?void 0:o.internal)??!1)||r.removeInternal}));for(const n of s)this.remove(n)}move(t,r){if(Array.isArray(t)&&t.forEach((o=>this.move(o,r))),!t)return;let i;const s=i$(t)||i$(r);if(s&&(i=s.index,r=s.position,t=s.component||t),r&&!this._isValidPosition(r))return;const n=this.remove(t);n&&this.add(n,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap((i=>this._getComponentsAtPosition(i,r))):this._getComponentsAtPosition(t,r):this._components.filter((i=>{var s;return r.includeInternal||!((s=this._componentMap.get(i))!=null&&s.internal)})).map((({widget:i,node:s})=>i??s))}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,s,n){t instanceof K2||(t=new K2({node:t}));const{widget:o}=t;o!=null&&o instanceof je&&o.addHandles(Lt((()=>{queueMicrotask((()=>this.remove(t)))})),this._removeWidgetHandleKey),this._components.some((l=>{var p,m;return((p=this._componentMap.get(l))==null?void 0:p.position)===r&&((m=this._componentMap.get(l))==null?void 0:m.index)===i}))&&this._components.forEach((l=>{const p=this._componentMap.get(l);p&&p.position===r&&p.index>=i&&p.index++})),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:s,position:r,internal:n,index:i})}_find(t){return t?t instanceof K2?this._findByComponent(t):typeof t=="string"?this._findById(t):"domNode"in t?this._findByNode(t.domNode):this._findByNode(t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??K3e}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Ns.innerContainer,Ns.cornerContainer);const r=document.createElement("div");r.classList.add(Ns.innerContainer,Ns.manualContainer);const i=document.createElement("div");i.classList.add(Ns.topLeft,Ns.corner),t.appendChild(i);const s=document.createElement("div");s.classList.add(Ns.topRight,Ns.corner),t.appendChild(s);const n=document.createElement("div");n.classList.add(Ns.bottomLeft,Ns.corner),t.appendChild(n);const o=document.createElement("div");o.classList.add(Ns.bottomRight,Ns.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const l=J3e();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":l?s:i,"top-trailing":l?i:s,"bottom-leading":l?o:n,"bottom-trailing":l?n:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var p,m;const r=t.position??"manual",{component:i,index:s}=t,n=this._positionNameToContainerLookup[r],o=s!=null&&s>-1;if(X3e(i.widget)&&i.widget.startup(),!o)return void n.appendChild(i.node);const l=Array.from(n.children);if(l.length!==0){for(const v of l){const _=this._findByNode(v);if(_&&s<(((p=this._componentMap.get(_))==null?void 0:p.index)??0))return void((m=v.parentNode)==null?void 0:m.insertBefore(i.node,v))}n.appendChild(i.node)}else n.appendChild(i.node)}_toPixelPosition(t){return{top:xw(t.top),left:xw(t.left),right:xw(t.right),bottom:xw(t.bottom)}}_findByComponent(t){return this._components.find((r=>r===t))??null}_findById(t){return this._components.find((({id:r})=>r===t))??null}_findByNode(t){return t?this._components.find((({node:r})=>r===t)):null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map((s=>this._findByNode(s))).filter(Ga).filter((s=>{var n;return r.includeInternal||!((n=this._componentMap.get(s))!=null&&n.internal)})).map((({widget:s,node:n})=>s??n))}_getNumComponentsAtPosition(t){const r=this._positionNameToContainerLookup[t];return(r==null?void 0:r.children.length)??0}};a([A()],Aa.prototype,"_locale",void 0),a([A()],Aa.prototype,"container",null),a([A()],Aa.prototype,"height",null),a([A({value:VJ})],Aa.prototype,"padding",null),a([Ft("padding")],Aa.prototype,"castPadding",null),a([A()],Aa.prototype,"view",void 0),a([A()],Aa.prototype,"width",null),Aa=a([P("esri.views.ui.UI")],Aa);const e$e=Aa,t$e={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},r$e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},i$e=e=>({...r$e,...e}),s$e=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},n$e=(e,t)=>e.find(t),$7=(e,t,r=!1)=>{let i=e;return t.forEach(((s,n)=>{const o=i!=null&&i.children?n$e(i.children,(l=>l.domNode===s)):void 0;r&&!o&&n!==t.length-1||(i=o)})),i},o$e=e=>{let t;const r={...t$e,...e},i=i$e(r),s=i.performanceLogger;let n,o=!0,l=!1;const p=[],m=[],v=(E,$,M)=>{var U;let k;i.eventHandlerInterceptor=(G,W,Z,ie)=>function(ne){let ge;s("domEvent",ne);const we=s$e(ne.currentTarget,k.domNode),xe=we.some(($e=>{var Re;return customElements.get((Re=$e==null?void 0:$e.tagName)==null?void 0:Re.toLowerCase())}));if(ne.eventPhase===Event.CAPTURING_PHASE||!xe)we.reverse(),ge=$7(k.getLastRender(),we);else{const $e=ne.composedPath(),Re=$e.slice($e.indexOf(ne.currentTarget),$e.indexOf(k.domNode)).reverse();ge=$7(k.getLastRender(),Re,!0)}let Ie;return ge&&(Ie=r.handleInterceptedEvent(t,ge,this,ne)),s("domEventProcessed",ne),Ie},(U=r.postProcessProjectionOptions)==null||U.call(r,i);const N=M();k=E($,N,i),i.eventHandlerInterceptor=void 0,p.push(k),m.push(M),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(k,N)};let _=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let E=0;E<p.length;E++){const $=m[E]();s("rendered",void 0);try{p[E].update($)}catch(M){console.error(M)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(_=r.modifyDoRenderImplementation(_,p,m)),t={renderNow:_,scheduleRender:()=>{n||l||(n=requestAnimationFrame(_))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),l=!0},resume:()=>{l=!1,o=!0,t.scheduleRender()},append:(E,$)=>{v(Ic.append,E,$)},insertBefore:(E,$)=>{v(Ic.insertBefore,E,$)},merge:(E,$)=>{v(Ic.merge,E,$)},replace:(E,$)=>{v(Ic.replace,E,$)},detach:E=>{for(let $=0;$<m.length;$++)if(m[$]===E)return m.splice($,1),p.splice($,1)[0];throw new Error("renderFunction was not found")}},t},Tr=(e,t,...r)=>{try{return e==null?void 0:e.call(t,...r)}catch(i){console.error(i,e)}},ok=async(e,t,...r)=>{try{return await(e==null?void 0:e.call(t,...r))}catch(i){console.error(i,e)}},gO=Symbol.for("controller"),a$e=e=>typeof e=="object"&&e!==null&&(gO in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),l$e=e=>typeof(e==null?void 0:e.then)=="function";let Xy;const ZA=e=>{Xy!==e&&(Xy=e,queueMicrotask(()=>Xy===e?Xy=void 0:0))},AE=e=>Xy;let zd=[];const zJ=e=>{if(e===void 0){zd=[];return}const t=zd.indexOf(e);zd=t===-1?[...zd,e]:zd.slice(0,t+1),queueMicrotask(()=>zd=[])},GJ=()=>zd;let YA;const u$e=e=>{YA!==e&&(YA=e,queueMicrotask(()=>YA===e?YA=void 0:0))},c$e=()=>{const e=YA;return YA=void 0,e},d$e=async(e,t)=>{const r=vO(e);if(r===void 0)return e;if(await r.ready,typeof t=="function"){const i=r.watchExports(s=>t(s,i))}return r.exports},p$e=async e=>{const t=vO(e);return await t.ready,t},vO=e=>{const r=AE().manager.X(e);if(r!==void 0)return r;if(a$e(e))return e;const i=c$e();if(i!==void 0)return i};let ak=!1;const h$e=e=>{ak=!0;try{return e()}finally{ak=!1}};class _v{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}const A$e=(e,t)=>{const r=t/f$e;let i=0;const s=setInterval(()=>{i+=r,i>=t&&(clearInterval(s),e())},r);return s},f$e=4,m$e=(e,t,r)=>{const i=Object.keys(e),s=i.length;Mc===void 0&&queueMicrotask(fE),Mc??(Mc=new Map);let n=Mc.get(e);return n===void 0&&(n={callbacks:[],keyCount:s},Mc.set(e,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(i)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const l=m=>Tr(t,null,m),p=o[s];p===void 0?l(void 0):e[p]===r?l(p):l(void 0)}),r};let Mc;const fE=()=>{Mc==null||Mc.forEach(({callbacks:e},t)=>{const r=Object.keys(t);e.forEach(i=>i(r))}),Mc=void 0},y$e=(e,t,r)=>{const i=e.manager;return i.V!==xt&&i.V!==r&&i.S(void 0,void 0),i.T.length===0&&queueMicrotask(()=>i.S(void 0,void 0)),i.V=r,i.T.push((s,n)=>Tr(t,void 0,r===n?s:void 0)),r},qJ=(e=[AE(),...GJ()],t,r)=>{const i=Array.isArray(e)?e:[e];let s=i.length+1;const n=o=>{s-=1,o!==void 0&&(s=Math.min(s,0)),s===0&&t(o)};i.forEach(o=>m$e(o,l=>n(l===void 0?void 0:{key:l,host:o,isReactive:!1}),r));for(const o of i)if("manager"in o&&o.manager.component===o){y$e(o,l=>n(l===void 0?void 0:{key:l,host:o,isReactive:!0}),r);break}return r},g$e=(e="",t={},r=AE())=>{const i={emit:s=>{e===""&&fE();const n=new CustomEvent(e,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(n),n}};return e===""&&qJ(void 0,s=>e=s.key,i),i},d7e=g$e.bind(null,"");var HJ;HJ=gO;var Kf,Xf,vp,e0,t0,r0,i0,s0,mc,wp,Ws,Ma,Yl,n0,X2;class wO{constructor(t){Ue(this,n0);Ue(this,Kf);Ue(this,Xf);Ue(this,vp);Ue(this,e0);Ue(this,t0);Ue(this,r0);Ue(this,i0);Ue(this,s0);Ue(this,mc);Ue(this,wp);Ue(this,Ws);Ue(this,Ma);Ue(this,Yl);Oe(this,Kf,[]),Oe(this,Xf,[]),Oe(this,vp,[]),Oe(this,e0,[]),Oe(this,t0,[]),Oe(this,r0,[]),Oe(this,i0,[]),Oe(this,s0,[]),Oe(this,mc,[]),Oe(this,wp,!1),this.P=new _v,this.connectedCalled=!1,this.loadedCalled=!1,this[HJ]=!0,Oe(this,Yl,[]);const r=this,i=t??AE();Oe(r,Ws,i),r.ready=r.P.promise,Oe(r,Ma,I7(r)),r.component=i,Y(r,Ws).addController(r),Y(r,Ws).manager===void 0||(zJ(r),queueMicrotask(()=>r.catchUpLifecycle()))}catchUpLifecycle(){const{manager:t}=Y(this,Ws);t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),Y(t,wp)&&this.triggerLoad().then(()=>t.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return Y(this,Ma)}set exports(t){const r=Y(this,Ma);r!==t&&(Oe(this,Ma,t),Y(this,Yl).forEach(Tr),this.connectedCalled&&this.O!==!1&&Y(this,Ws).requestUpdate(this.O,r)),this.P.resolve(t)}setProvisionalExports(t,r=!0){Oe(this,Ma,r?I7(t):t),Y(this,Yl).forEach(Tr)}watchExports(t){const r=()=>t(Y(this,Ma));return Y(this,Yl).push(r),()=>void Y(this,Yl).splice(Y(this,Yl).indexOf(r),1)}get use(){return ZA(Y(this,Ws)),d$e}get useRef(){return ZA(Y(this,Ws)),p$e}get useRefSync(){return ZA(Y(this,Ws)),vO}controllerRemoved(){Y(this,Ws).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){Y(this,Kf).push(t)}onDisconnected(t){Y(this,Xf).push(t)}onLoad(t){Y(this,vp).push(t)}onLoaded(t){Y(this,e0).push(t)}onUpdate(t){Y(this,t0).push(t)}onUpdated(t){Y(this,r0).push(t)}onDestroy(t){Y(this,i0).push(t)}onLifecycle(t){Y(this,s0).push(t),this.connectedCalled&&Y(this,Ws).el.isConnected&&Pi(this,n0,X2).call(this,t)}triggerConnected(){const t=this;t.hostConnected&&Tr(t.hostConnected,t),Y(t,Kf).forEach(Tr),t.triggerLifecycle(),t.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&Tr(t.hostDisconnected,t),Y(t,Xf).forEach(Tr),Y(t,mc).forEach(Tr),Oe(t,mc,[])}async triggerLoad(){if(Y(this,wp))return;Oe(this,wp,!0);const t=this;t.hostLoad&&await ok(t.hostLoad,t),Y(this,vp).length>0&&await Promise.allSettled(Y(this,vp).map(ok)),this.P.resolve(Y(this,Ma))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Tr(this.hostLoaded,this),Y(this,e0).forEach(Tr),this.loadedCalled=!0)}triggerUpdate(t){this.hostUpdate&&Tr(this.hostUpdate,this,t),Y(this,t0).forEach(x7,t)}triggerUpdated(t){this.hostUpdated&&Tr(this.hostUpdated,this,t),Y(this,r0).forEach(x7,t)}triggerDestroy(){this.hostDestroy&&Tr(this.hostDestroy,this),Y(this,i0).forEach(Tr)}triggerLifecycle(){this.hostLifecycle&&Pi(this,n0,X2).call(this,()=>this.hostLifecycle()),Y(this,s0).forEach(Pi(this,n0,X2),this)}}Kf=new WeakMap,Xf=new WeakMap,vp=new WeakMap,e0=new WeakMap,t0=new WeakMap,r0=new WeakMap,i0=new WeakMap,s0=new WeakMap,mc=new WeakMap,wp=new WeakMap,Ws=new WeakMap,Ma=new WeakMap,Yl=new WeakMap,n0=new WeakSet,X2=function(t){ZA(Y(this,Ws));const r=Tr(t);(Array.isArray(r)?r:[r]).forEach(s=>{typeof s=="function"?Y(this,mc).push(s):typeof s=="object"&&typeof s.remove=="function"&&Y(this,mc).push(s.remove)})};function x7(e){Tr(e,void 0,this)}const v$e=wO,I7=e=>{if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t={get(i,s,n){if(!((s==="exports"||s==="_exports")&&s in i&&i[s]===r)&&(s in i||s in Promise.prototype||typeof s=="symbol"))return typeof i=="function"?i[s]:Reflect.get(i,s,n)}},r=new Proxy(e,t);return r},w$e=e=>e.replace(b$e,(t,r)=>`${r===0?"":"-"}${t.toLowerCase()}`),b$e=/[A-Z]+(?![a-z])|[A-Z]/gu,_$e=1,S$e=2,E$e=4,T$e=8,$$e=16,x$e=32,I$e=64,WJ=e=>{var r,i;let t=e;for(;t=t.parentNode??t.host;)if((r=t==null?void 0:t.constructor)!=null&&r.lumina){const s=t;return(i=s.manager)!=null&&i.loadedCalled||(s.J??s._offspring).push(e),(s.I??s._postLoad).promise}return!1},M7={};function QJ(){}const eb=Object.defineProperty,M$e=globalThis.HTMLElement??QJ;var Qs,Kl,o0,Iv,lk;const PO=class PO extends M$e{constructor(){var s,n;super();Ue(this,Iv);Ue(this,Qs);Ue(this,Kl);Ue(this,o0);Oe(this,Kl,{}),Oe(this,o0,[]),this.I=new _v,this.H=new _v,this.J=[];const r=this,i=r.constructor;r._offspring=r.J,r._postLoad=r.I,(s=i.C)==null||s.forEach(o=>{Object.hasOwn(r,o)&&(Y(r,Kl)[o]=r[o],delete r[o])}),i.A?Pi(n=r,Iv,lk).call(n,{a:i.A}):i.B.then(async o=>{var l,p;await i.K.p,Pi(p=r,Iv,lk).call(p,await(((l=o.default)==null?void 0:l.then(m=>typeof m=="function"?{a:m}:m))??o))}).catch(o=>{r.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const r of this.C??[])eb(this.prototype,r,{configurable:!0,enumerable:!0,get(){return Y(this,Kl)[r]},set(i){Y(this,Kl)[r]=i}});for(const r of this.E??[])eb(this.prototype,r,{async value(...i){return Y(this,Qs)||await this.H.promise,await Y(this,Qs)[r](...i)},configurable:!0});for(const r of this.D??[])eb(this.prototype,r,{value(...i){return Y(this,Qs)[r](...i)},configurable:!0})}get manager(){var r;return(r=Y(this,Qs))==null?void 0:r.manager}attributeChangedCallback(r,i,s){var n;(n=Y(this,Qs))==null||n.attributeChangedCallback(r,i,s),Y(this,Qs)||Y(this,o0).push(r)}connectedCallback(){var r,i;Y(this,Qs)?(i=(r=Y(this,Qs)).connectedCallback)==null||i.call(r):queueMicrotask(()=>this.G=WJ(this))}disconnectedCallback(){var r,i;(i=(r=Y(this,Qs))==null?void 0:r.disconnectedCallback)==null||i.call(r)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var r;(r=Y(this,Qs))==null||r.requestUpdate()}};Qs=new WeakMap,Kl=new WeakMap,o0=new WeakMap,Iv=new WeakSet,lk=function(r){var E;const i=this.constructor,s=i.L,n=Y(this,Kl),o=Object.values(r).find($=>$.L===s),l=`${s}--lazy`;let p=o;for(;p&&!Object.hasOwn(p,"lumina");)p=Object.getPrototypeOf(p);k$e(p),!i.A&&(i.A=o,customElements.define(l,o)),o.N=this;const v=document.createElement(l);o.N=void 0,Oe(this,Qs,v),Oe(this,Kl,v),Y(this,o0).forEach($=>v.attributeChangedCallback($,null,this.getAttribute($))),Object.entries(n).forEach(C$e,v);const _=this.isConnected;(_||this.G)&&((E=v.connectedCallback)==null||E.call(v),_||v.disconnectedCallback())},PO.lumina=!0;let C7=PO;function C$e([e,t]){this[e]=t}const k$e=e=>{const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(s,n){r.setAttribute.call(this.el,s,n)},t.removeAttribute=function(s){r.removeAttribute.call(this.el,s)},eb(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Bg=(e,t)=>{var i;const r=e._$AN;if(r===void 0)return!1;for(const s of r)(i=s._$AO)==null||i.call(s,t,!1),Bg(s,t);return!0},V_=e=>{let t,r;do{if((t=e._$AM)===void 0)break;r=t._$AN,r.delete(e),e=t}while((r==null?void 0:r.size)===0)},JJ=e=>{for(let t;t=e._$AM;e=t){let r=t._$AN;if(r===void 0)t._$AN=r=new Set;else if(r.has(e))break;r.add(e),P$e(t)}};function R$e(e){this._$AN!==void 0?(V_(this),this._$AM=e,JJ(this)):this._$AM=e}function O$e(e,t=!1,r=0){const i=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(t)if(Array.isArray(i))for(let n=r;n<i.length;n++)Bg(i[n],!1),V_(i[n]);else i!=null&&(Bg(i,!1),V_(i));else Bg(this,e)}const P$e=e=>{e.type==q4.CHILD&&(e._$AP??(e._$AP=O$e),e._$AQ??(e._$AQ=R$e))};let N$e=class extends W4{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,r,i){super._$AT(t,r,i),JJ(this),this.isConnected=t._$AU}_$AO(t,r=!0){var i,s;t!==this.isConnected&&(this.isConnected=t,t?(i=this.reconnected)==null||i.call(this):(s=this.disconnected)==null||s.call(this)),r&&(Bg(this,t),V_(this))}setValue(t){if(dve(this._$Ct))this._$Ct._$AI(t,this);else{const r=[...this._$Ct._$AH];r[this._$Ci]=t,this._$Ct._$AI(r,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ZJ=()=>new L$e;let L$e=class{};const n$=new WeakMap,uk=H4(class extends N$e{render(e){return xt}update(e,[t]){var i;const r=t!==this.G;return r&&this.G!==void 0&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.G=t,this.ht=(i=e.options)==null?void 0:i.host,this.rt(this.ct=e.element)),xt}rt(e){if(this.isConnected||(e=void 0),typeof this.G=="function"){const t=this.ht??globalThis;let r=n$.get(t);r===void 0&&(r=new WeakMap,n$.set(t,r)),r.get(this.G)!==void 0&&this.G.call(this.ht,void 0),r.set(this.G,e),e!==void 0&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){var e,t;return typeof this.G=="function"?(e=n$.get(this.ht??globalThis))==null?void 0:e.get(this.G):(t=this.G)==null?void 0:t.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var Xl,Lo,a0;class D$e extends v$e{constructor(r){super(r);Ue(this,Xl);Ue(this,Lo);Ue(this,a0);this.destroyed=!1,this.R=!1,this.V=xt,this.T=[],Oe(this,a0,new WeakMap),Oe(this,Lo,r),this.exports=void 0,this.hasDestroy=ck in r&&typeof r.destroy=="function",ou.prototype.addController.call(r,{hostConnected:()=>{if(this.destroyed){const i=r.el.localName;throw r.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${ck} prop.`)}Y(this,Xl)!==void 0&&clearTimeout(Y(this,Xl)),fE();for(const i of r.M)"triggerConnected"in i?i.triggerConnected():Tr(i.hostConnected,i)},hostDisconnected:()=>{for(const i of r.M)"triggerDisconnected"in i?i.triggerDisconnected():Tr(i.hostDisconnected,i);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const i of r.M)"triggerUpdate"in i?i.triggerUpdate(this.Q):Tr(i.hostUpdate,i,this.Q)},hostUpdated:()=>{for(const i of r.M)"triggerUpdated"in i?i.triggerUpdated(this.Q):Tr(i.hostUpdated,i,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),ZA(r)}async destroy(){if(!this.destroyed){Y(this,Lo).el.isConnected&&(this.hasDestroy=!1,Y(this,Lo).el.remove()),Oe(this,Xl,void 0),this.destroyed=!0;for(const r of Y(this,Lo).M)"triggerDestroy"in r?r.triggerDestroy():Tr(r.hostDestroy,r);Y(this,Lo).M.splice(0)}}U(){Y(this,Xl)!==void 0&&clearTimeout(Y(this,Xl)),!Y(this,Lo).el.isConnected&&!Y(this,Lo).autoDestroyDisabled&&Oe(this,Xl,A$e(()=>void Y(this,Lo).destroy(),F$e))}S(r,i){const s=this.T;this.V=xt,this.T=[],s.forEach(n=>n(r,i))}W(r,i){(typeof i=="object"&&i!==null||typeof i=="function")&&Y(this,a0).set(i,r)}X(r){if(typeof r=="object"&&r!==null||typeof r=="function")return Y(this,a0).get(r)}}Xl=new WeakMap,Lo=new WeakMap,a0=new WeakMap;let F$e=1e3;const ck="autoDestroyDisabled";var bp,Mv,Cv,_p,Ca,D0,YJ,KJ;const Vg=class Vg extends ou{constructor(){super();Ue(this,D0);Ue(this,bp);Ue(this,Mv);Ue(this,Cv);Ue(this,_p);Ue(this,Ca);this.M=[],this.manager=new D$e(this);const r=this,i=r.constructor,s=i.N,n=i.K.o,o=Vg.prototype.shouldUpdate;Oe(r,_p,(s==null?void 0:s.H)??new _v),r.I=(s==null?void 0:s.I)??new _v,r.J=(s==null?void 0:s.J)??[],r._offspring=r.J,r._postLoad=r.I,r.el=s??r,Oe(r,Cv,r.enableUpdating),r.enableUpdating=QJ,r.shouldUpdate!==o&&(Oe(r,Mv,r.shouldUpdate),r.shouldUpdate=o),n&&(Oe(r,bp,new Map),i.elementProperties.forEach((l,p)=>Y(r,bp).set(p,n())))}static finalizeStyles(r){var n;const i=super.finalizeStyles(r),s=this.shadowRootOptions===M7;return((n=this.K)==null?void 0:n.commonStyles)===void 0||s?i:[this.K.commonStyles,...i]}static createProperty(r,i){const s=typeof i=="number"?i:Array.isArray(i)?i[0]:0,n=Array.isArray(i)?i[1]:void 0,o=(n==null?void 0:n.hasChanged)??tE,l={attribute:s&_$e&&typeof r=="string"?w$e(r):!1,reflect:!!(s&S$e),type:s&E$e?Boolean:s&T$e?Number:void 0,state:!!(s&$$e),readOnly:!!(s&x$e),noAccessor:!!(s&I$e),c:!1,...n,hasChanged(p,m){const v=o(p,m);return l.c=v,v}};super.createProperty(r,l)}static getPropertyDescriptor(r,i,s){const n=this.K,o=super.getPropertyDescriptor(r,i,s);return s.d=o,{...o,get(){var l,p;return(l=n.t)==null||l.call(n,Y(this,bp).get(r)),(p=o.get)==null?void 0:p.call(this)},set(l){var m,v;const p=this.manager;if(s.readOnly&&!ak&&(p.R||p.connectedCalled))throw Error(`Cannot assign to read-only property "${r}" of ${this.el.localName}. Trying to assign "${l}"`);o.set.call(this,l??void 0),s.c&&((v=(m=Y(this,bp))==null?void 0:m.get(r))==null||v.notify()),p.T.length>0&&(fE(),p==null||p.S(r,l))}}}connectedCallback(){var s,n;if(this.el.hasAttribute("defer-hydration"))return;const r=(n=(s=this.constructor.K).c)==null?void 0:n.call(s,()=>this.requestUpdate());Oe(this,Ca,r);const i=!this.manager.connectedCalled;super.connectedCallback(),i?queueMicrotask(()=>Pi(this,D0,KJ).call(this).catch(o=>{Y(this,_p).reject(o),setTimeout(()=>{throw o})})):r&&this.requestUpdate()}disconnectedCallback(){var r;super.disconnectedCallback(),(r=Y(this,Ca))==null||r.destroy(),Oe(this,Ca,void 0)}createRenderRoot(){const r=this.el.shadowRoot,i=this.constructor,s=i.shadowRootOptions,o=r??(s===M7?this.el:this.el.attachShadow(s));if(this.isConnected){const l=o.getRootNode();l.adoptedStyleSheets=[...l.adoptedStyleSheets,...i.elementStyles.map(p=>"styleSheet"in p?p.styleSheet:p)]}return o}shouldUpdate(r){var i;return this.manager.Q=r,((i=Y(this,Mv))==null?void 0:i.call(this,r))??!0}update(r){Y(this,Ca)?Pi(this,D0,YJ).call(this,r):super.update(r)}listen(r,i,s){const n=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(this.el.addEventListener(r,n,s),()=>this.el.removeEventListener(r,n,s)))}listenOn(r,i,s,n){const o=(s==null?void 0:s.bind(this))??s;this.manager.onLifecycle(()=>(r.addEventListener(i,o,n),()=>r.removeEventListener(i,o,n)))}async componentOnReady(){return await Y(this,_p).promise,this}addController(r){var i;this.M.push(r),!(gO in r)&&this.renderRoot&&this.el.isConnected&&((i=r.hostConnected)==null||i.call(r))}removeController(r){var i;this.M.splice(this.M.indexOf(r),1),(i=r.controllerRemoved)==null||i.call(r)}};bp=new WeakMap,Mv=new WeakMap,Cv=new WeakMap,_p=new WeakMap,Ca=new WeakMap,D0=new WeakSet,YJ=function(r){try{Y(this,Ca).clear(),this.constructor.K.r(Y(this,Ca),()=>ST(Vg.prototype,this,"update").call(this,r))}catch(i){throw Y(this,Ca).clear(),i}},KJ=async function(){var n,o;const r=this.el.G??WJ(this.el);r&&await r;const i=[];for(const l of this.M)"triggerLoad"in l?i.push(l.triggerLoad()):i.push(ok(l.hostLoad,l));await Promise.all(i),await((n=this.load)==null?void 0:n.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(l=>l.has(ck)&&this.manager.U()),Y(this,Cv).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const s=this.J.filter(l=>{var p;return!((p=l.manager)!=null&&p.loadedCalled)});s.length&&await Promise.allSettled(s.map(async l=>await l.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const l of this.M)"triggerLoaded"in l?l.triggerLoaded():Tr(l.hostLoaded,l);(o=this.loaded)==null||o.call(this),Y(this,_p).resolve()},Vg.lumina=!0;let O0=Vg;const j$e=e=>{let t;const r=s=>{var n;t=new URL(s,((n=globalThis.location)==null?void 0:n.href)||void 0).href},i={...e,getAssetPath(s){var o;const n=new URL(s,t);return n.origin!==((o=globalThis.location)==null?void 0:o.origin)?n.href:n.pathname},setAssetPath:r,customElement(s,n){n.K=i,n.L=s,customElements.get(s)||customElements.define(s,n)}};return r(e.defaultAssetPath),i},Xs=e=>typeof e=="object"&&e!=null?XH(e):e,B$e=e=>typeof e=="object"&&e!=null?tW(e):e,A7e=xt;function U$e(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}const V$e={toAttribute:e=>e===!0?"":e===!1?null:e},z$e="calcite-mode-auto",G$e="calcite-mode-dark",f7e={rtl:"calcite--rtl"},m7e={filter:250,nextTick:0,resize:150,reposition:100},y7e=25;function k7(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(G$e)||e.contains(z$e)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&i(o),n=o};let n=r();i(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const lu=globalThis.calciteConfig,g7e=(lu==null?void 0:lu.focusTrapStack)||[],q$e=(lu==null?void 0:lu.logLevel)||"info",R7="3.3.3",H$e="2025-10-08",W$e="7391af08e";function Q$e(){if(lu&&lu.version)return;console.info(`Using Calcite Components ${R7} [Date: ${H$e}, Revision: ${W$e}]`);const e=lu||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:R7,writable:!1}),globalThis.calciteConfig=e}document.readyState==="interactive"?k7():document.addEventListener("DOMContentLoaded",k7,{once:!0});queueMicrotask(Q$e);const J$e=j$e({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:mE,getAssetPath:XJ,setAssetPath:Z$e}=J$e;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */let eZ=!1;const Y$e=e=>{eZ=!0,Z$e(e)};let tZ;function K$e(){eZ||Y$e(en(Or(tZ)))}function bO(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}tZ="components/assets";const rZ=Symbol("widget"),iZ=Symbol("widget-test-data"),X$e=[],exe={},z_=new WeakMap;function sZ(e,t){let r=t.children;if(r!=null&&r.length)for(let s=0;s<r.length;++s)r[s]=sZ(e,r[s]);else r=X$e;const i=t.vnodeSelector;if(G_(i)){const s=t.properties||exe,n=s.key||i,o={key:n,afterCreate:txe,afterUpdate:rxe,afterRemoved:nZ,parentWidget:e,widgetConstructor:i,widgetProperties:{...s,key:n,children:r}};return{vnodeSelector:i.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function txe(e,t,r,{parentWidget:i,widgetConstructor:s,widgetProperties:n}){var l;const o=new s(n);o.container=e,z_.set(e,o),(l=o.afterCreate)==null||l.call(o,o,e),i.addHandles(Lt((()=>nZ(e)))),queueMicrotask((()=>{o[iZ].projector.renderNow()}))}function rxe(e,t,r,{widgetProperties:i}){var n;const s=z_.get(e);s&&(s.set(i),(n=s.afterUpdate)==null||n.call(s,s,e))}function nZ(e){var r;const t=z_.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),z_.delete(e))}function G_(e){return typeof e=="function"&&e[rZ]}const O7=new Set;function ixe(e){O7.add(e),e.finally((()=>O7.delete(e)))}function sxe(e){return Lt()}var P7;let nxe=0;function oZ(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?oZ(e[i],t[i]):e[i]=t[i]);return e}const oxe=o$e({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,s,n,o)=>{const l=t==null?void 0:t(i,s,n,o),p=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in n)||p){const m=i[2].toLowerCase()+i.slice(3),v=$=>l==null?void 0:l.call(n,$);n.addEventListener(m,v,p);const _=()=>n.removeEventListener(m,v,p),E=o.afterRemoved;o.afterRemoved=$=>{E==null||E($),_()}}return l}},handleInterceptedEvent(e,t,r,i){const{eventPhase:s,type:n}=i,o=s===Event.CAPTURING_PHASE;let l=`on${n}${o?"capture":""}`;const p=t.properties;(p&&l in p||(l=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,p&&l in p))&&(UJ(),e.scheduleRender(),p[l].call(p.bind||r,i))}});let o$=!1;var Dp;let Ei=(Dp=class extends Fa.EsriPromiseMixin(el.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=oxe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=pS((async()=>{var p;if((p=this._messageBundleProps)!=null&&p.length){const m=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:v,propertyName:_})=>{if(this.destroyed)return;let E=await yG(v);this.uiStrings&&Object.keys(this.uiStrings)&&(E=oZ(H(E),this.uiStrings)),this[_]=E})));if(this.destroyed)return;for(const v of m)v.status==="rejected"&&de.getLogger(this).error("widget-intl:locale-error",this.declaredClass,v.reason)}await this.loadLocale()})),this.addHandles(sxe()),K$e();const i="esri-widget-uid-"+sm(),s=this.render.bind(this);this._trackingTarget=new Bv((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const n=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var _,E;if(!this._readyForTrueRender||this.destroyed)return null;const p=s()??n(),m=p.properties??(p.properties={});if(m.key??(m.key=i),G_(p.vnodeSelector)){if(!this.visible)return n()}else this.visible?m.styles||(m.styles={}):(m.class="",m.styles={display:"none"}),(_=m.styles).display??(_.display="");let v=0;return(E=p.children)==null||E.forEach(($=>{var M;G_($.vnodeSelector)||($.properties??($.properties={}),(M=$.properties).key??(M.key=`${this.id}--${v++}`))})),sZ(this,p)};this.render=()=>{if(o$)return o();let p=H3e(this)??null;if(p)return p;this._trackingTarget.clear(),o$=!0;try{p=qa(this._trackingTarget,o)}catch(m){throw de.getLogger(this).error(m),m}finally{o$=!1}return p&&W3e(this,p),p};const l=this.beforeFirstRender();l?this._resourcesFetch=l.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),ixe(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){var r;const t=this.loadDependencies();return(r=this._messageBundleProps)!=null&&r.length||t?Promise.all([t,this._loadLocale()]).then((()=>{})).catch(WP):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(cr(this._trackingTarget),cr(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,r$(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return Y4(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+nxe++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(P7=rZ,iZ)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(r$(this),this._projector.scheduleRender())}classes(...t){return Q3e.apply(this,t)}renderNow(){r$(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this.addHandles(Qe((()=>this.viewModel),((i,s)=>{s&&this.removeHandles("delegated-events"),i&&dS(i)&&this.addHandles(this._delegatedEventNames.map((n=>U0(i,n,(o=>{this.emit(n,o)})))),"delegated-events")}),vs)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(WP),this.scheduleRender()};this.addHandles([EU(t),Qe((()=>this.uiStrings),t)]),this.addHandles(ks((()=>this.container),(i=>{this.destroyed||this._attach(i)}),{initial:!0,once:!0}))}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=t==null?void 0:t.parentNode)==null||r.removeChild(t)}},Dp[P7]=!0,Dp.vnodeSelector="div",Dp);a([A()],Ei.prototype,"_readyForTrueRender",void 0),a([A({value:null})],Ei.prototype,"container",null),a([Ft("container")],Ei.prototype,"castContainer",null),a([A()],Ei.prototype,"icon",null),a([A()],Ei.prototype,"id",null),a([A()],Ei.prototype,"label",null),a([A()],Ei.prototype,"renderable",null),a([A()],Ei.prototype,"uiStrings",void 0),a([A()],Ei.prototype,"viewModel",void 0),a([A({value:!0})],Ei.prototype,"visible",null),a([A()],Ei.prototype,"key",void 0),a([A()],Ei.prototype,"children",void 0),a([A()],Ei.prototype,"afterCreate",void 0),a([A()],Ei.prototype,"afterUpdate",void 0),a([A()],Ei.prototype,"afterRemoved",void 0),Ei=a([P("esri.widgets.Widget")],Ei);const yE=Ei;var N7,L7,D7,F7,j7,B7,U7,V7,z7,G7,q7,H7,W7,Q7,J7;(function(e){e.U8="U8",e.I8="I8",e.U16="U16",e.I16="I16",e.U32="U32",e.I32="I32",e.F32="F32",e.F64="F64",e.Utf8String="Utf8String",e.NotSet="NotSet"})(N7||(N7={})),(function(e){e.Png="Png",e.Jpeg="Jpeg",e.Dds="Dds",e.Raw="Raw",e.Dxt1="Dxt1",e.Dxt5="Dxt5",e.Bc7="Bc7",e.Basis="Basis",e.Etc1="Etc1",e.Etc2="Etc2",e.Astc="Astc",e.Pvrtc="Pvrtc",e.NotSet="NotSet"})(L7||(L7={})),(function(e){e.Position="Position",e.Normal="Normal",e.TexCoord="TexCoord",e.Color="Color",e.Tangent="Tangent",e.FeatureIndex="FeatureIndex",e.UvRegion="UvRegion",e.FeatureVariable="FeatureVariable",e.NotSet="NotSet"})(D7||(D7={})),(function(e){e.Opaque="Opaque",e.Mask="Mask",e.Blend="Blend"})(F7||(F7={})),(function(e){e.None="None",e.Mask="Mask",e.Alpha="Alpha",e.PreMultAlpha="PreMultAlpha",e.NotSet="NotSet"})(j7||(j7={})),(function(e){e.Points="Points",e.Lines="Lines",e.LineStrip="LineStrip",e.Triangles="Triangles",e.TriangleStrip="TriangleStrip",e.NotSet="NotSet"})(B7||(B7={})),(function(e){e.None="None",e.WrapXBit="WrapXBit",e.WrapYBit="WrapYBit",e.WrapXy="WrapXy",e.NotSet="NotSet"})(U7||(U7={})),(function(e){e.Linear="Linear",e.Nearest="Nearest",e.NotSet="NotSet"})(V7||(V7={})),(function(e){e.Linear="Linear",e.Nearest="Nearest",e.NearestMipmapNearest="NearestMipmapNearest",e.LinearMipmapNearest="LinearMipmapNearest",e.NearestMipmapLinear="NearestMipmapLinear",e.LinearMipmapLinear="LinearMipmapLinear",e.NotSet="NotSet"})(z7||(z7={})),(function(e){e.FeatureId="FeatureId",e.GlobalUid="GlobalUid",e.UnspecifiedDateTime="UnspecifiedDateTime",e.EcmaIso8601DateTime="EcmaIso8601DateTime",e.EcmaIso8601DateOnly="EcmaIso8601DateOnly",e.TimeOnly="TimeOnly",e.TimeStamp="TimeStamp",e.ColorRgb="ColorRgb",e.ColorRgba="ColorRgba",e.Unrecognized="Unrecognized",e.NotSet="NotSet"})(G7||(G7={})),(function(e){e.Texture="Texture",e.VertexAtrb="VertexAtrb",e.Implicit="Implicit",e.NotSet="NotSet"})(q7||(q7={})),(function(e){e.Front="Front",e.Back="Back",e.None="None",e.NotSet="NotSet"})(H7||(H7={})),(function(e){e.Pbr="Pbr",e.Unlit="Unlit"})(W7||(W7={})),(function(e){e.Rgb8="Rgb8",e.Rgba8="Rgba8",e.R8="R8",e.Bgr8="Bgr8",e.Bgra8="Bgra8",e.Rg8="Rg8",e.Ga8="Ga8",e.Etc1="Etc1",e.Etc2="Etc2",e.Dxt1="Dxt1",e.Dxt5="Dxt5",e.Bc7="Bc7",e.NotSet="NotSet"})(Q7||(Q7={})),(function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed",e[e.MissingInputs=2]="MissingInputs"})(J7||(J7={}));const axe=new Map;function lxe(e){return axe.get(e)}function Z7(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function uxe(e,t){return e.length!==t.length||e.some(((r,i)=>r.text!==t[i].text))}function ey(e,t,r){!r||!t||e.find((i=>i.layerView===t&&i.text===r))||e.push({text:r,layerView:t})}function cxe(e){return e.type==="bing-maps"}const ul=[];let mA=class extends je{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Te,this.view=null,this._allLayerViewsChange=t=>{var i;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(i=this.view)==null?void 0:i.allLayerViews;r&&(this.addHandles(r.map((s=>Qe((()=>{var n;return[s.suspended,(n=s.layer)==null?void 0:n.attributionVisible]}),(()=>this._updateAttributionItems())))).toArray(),"suspension"),r.forEach((s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",(()=>this._updateAttributionItems())),"visible-geometry-changed")}))),t!=null&&t.removed&&t.removed.forEach((s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)})),this._updateAttributionItems()},this.addHandles([Vc((()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews}),"change",(t=>this._allLayerViewsChange(t)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),ks((()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0}),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e==null?void 0:e.allLayerViews;if(ul.length=0,!e||!t)return void this._clear();t.forEach((i=>{var o,l;if(i.suspended||!((o=i.layer)!=null&&o.attributionVisible))return;const s=i.layer;if(Z7(s,"user"))return void ey(ul,i,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(i)){const p=this._fetchedAttributionData.get(i);return void(p?ey(ul,i,this._getDynamicAttribution(p,e,s)):Z7(s)&&ey(ul,i,s.copyright))}return void this._fetchAttributionData(i)}const n="portalItem"in s?(l=s.portalItem)==null?void 0:l.accessInformation:void 0;ey(ul,i,n||s.copyright)}));const r=t.find((i=>{var s;return((s=i.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"}));if(this.view&&r){const i=lxe(this.view);if(i){const s=i.getAttributionText();for(let n=0;n<s.length;++n)ey(ul,r,s[n])}}uxe(this.items,ul)&&(this.items.removeAll(),this.items.addMany(ul)),ul.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await zS(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=t.ok?this._createContributionIndex(t.value,cxe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,t){const r=e.contributors,i={};if(!r)return i;for(let s=0;s<r.length;s++){const n=r[s],o=n.coverageAreas;if(!o)return;for(const l of o){const p=l.bbox,m=l.zoomMin-(t&&l.zoomMin?1:0),v=l.zoomMax-(t&&l.zoomMax?1:0),_=new At({xmin:p[1],ymin:p[0],xmax:p[3],ymax:p[2],spatialReference:Ce.WGS84}),E={extent:Rc(_),attribution:n.attribution||"",score:l.score!=null?l.score:100,id:s};for(let $=m;$<=v;$++)i[$]??(i[$]=[]),i[$].push(E)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,r){var m;const{extent:i,scale:s}=t;let n=((m=r.tileInfo)==null?void 0:m.scaleToZoom(s))??0;if(n=Math.min(e.maxKey??0,Math.round(n)),!i||n==null||n<=-1)return"";const o=e[n],l=MS(i.center.clone().normalize(),Ce.WebMercator),p=new Set;return o?o.filter((v=>{const _=v.id,E=!p.has(_)&&l&&v.extent&&Jv(v.extent,l);return E&&p.add(_),E})).sort(((v,_)=>_.score-v.score||v.objectId-_.objectId)).map((v=>v.attribution)).join(", "):""}};a([A({readOnly:!0,type:Te})],mA.prototype,"items",void 0),a([A({readOnly:!0})],mA.prototype,"state",null),a([A()],mA.prototype,"view",void 0),mA=a([P("esri.widgets.Attribution.AttributionViewModel")],mA);const aZ=mA,za={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function dxe(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:hxe(e[t])}}}function pxe(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function hxe(e){return function(t,...r){pxe(t)?Z3e(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function gE(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var Axe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},lZ=function(e,t){for(var r=0,i=e.length;r<i;r++){var s=e[r];Array.isArray(s)?lZ(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=Axe(s)),t.push(s))}},fxe=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var s=[];return lZ(r,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function rn(e,t,...r){return typeof e!="function"||G_(e)?fxe(e,t??null,...r):e(t,...r)}function v7e(...e){return e}const Dh="esri-attribution",Fh={base:Dh,poweredBy:`${Dh}__powered-by`,sources:`${Dh}__sources`,open:`${Dh}--open`,sourcesOpen:`${Dh}__sources--open`,link:`${Dh}__link`};let hs=class extends yE{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((i=>i.forEach((({target:s})=>this._checkSourceTextOverflow(s))))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new aZ}initialize(){this.addHandles(Vc((()=>{var t;return(t=this.viewModel)==null?void 0:t.items}),"change",(()=>this.scheduleRender())))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((t,r)=>(t.includes(r.text)||t.push(r.text),t)),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Fh.open]:this._isOpen};return rn("div",{bind:this,class:this.classes(Fh.base,za.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return rn("div",{class:Fh.poweredBy},"Powered by"," ",rn("a",{class:Fh.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:s}=this,n={[Fh.sourcesOpen]:t,[za.interactive]:r};return rn("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Fh.sources,n),innerHTML:s,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=t,o=n>s,l=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,l&&(r=!0),this._isOpen){const p=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,p&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};a([A()],hs.prototype,"_isOpen",void 0),a([A()],hs.prototype,"_isInteractive",null),a([A()],hs.prototype,"_attributionTextOverflowed",void 0),a([A()],hs.prototype,"_prevSourceNodeHeight",void 0),a([A({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],hs.prototype,"attributionText",null),a([A()],hs.prototype,"icon",null),a([A()],hs.prototype,"itemDelimiter",void 0),a([A()],hs.prototype,"label",null),a([A(),gE("esri/widgets/Attribution/t9n/Attribution")],hs.prototype,"messages",void 0),a([A()],hs.prototype,"view",null),a([A({type:aZ})],hs.prototype,"viewModel",void 0),a([dxe()],hs.prototype,"_toggleState",null),hs=a([P("esri.widgets.Attribution")],hs);const mxe=hs;function yxe(){const e=K("mapview-essential-goto-duration");return e==null?e:e}function gxe(e){var t,r;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((r=e==null?void 0:e.spatialReference)==null?void 0:r.isGeographic)||!1}function vxe(e,t,r){return e.goTo(t,r)}const wxe=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return sj(i),this.goToOverride?this.goToOverride(i,r):vxe(i,r.target,r.options)}};return a([A()],t.prototype,"goToOverride",void 0),a([A()],t.prototype,"view",void 0),t=a([P("esri.widgets.support.GoTo")],t),t};let Gd=class extends wxe(je){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Vi)}destroy(){this.view=null}get canShowNorth(){return gxe(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,r;(t=this.view)!=null&&t.ready&&(((r=this.view)==null?void 0:r.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:yxe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?Qe((()=>t==null?void 0:t.rotation),this._updateForRotation,Vi):Qe((()=>t==null?void 0:t.camera),this._updateForCamera,Vi))}_watchForView(t){this.addHandles(Qe((()=>this.view),this._updateRotationWatcher,t))}};a([A({readOnly:!0})],Gd.prototype,"canShowNorth",null),a([A({readOnly:!0})],Gd.prototype,"orientation",void 0),a([A({readOnly:!0})],Gd.prototype,"state",null),a([A()],Gd.prototype,"view",void 0),Gd=a([P("esri.widgets.Compass.CompassViewModel")],Gd);const uZ=Gd,Y7="esri-compass",K7={base:Y7,iconContainer:`${Y7}__icon-container`};let $l=class extends yE{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new uZ,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return bO({button:()=>ce(()=>Promise.resolve().then(()=>RO),void 0,import.meta.url),icon:()=>ce(()=>Promise.resolve().then(()=>yCe),void 0,import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return rn("div",{class:this.classes(K7.base,za.widget)},rn("calcite-button",{class:za.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},rn("div",{"aria-hidden":"true",class:K7.iconContainer,title:i.reset},rn("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};a([A()],$l.prototype,"goToOverride",null),a([A()],$l.prototype,"icon",null),a([A()],$l.prototype,"label",null),a([A(),gE("esri/widgets/Compass/t9n/Compass")],$l.prototype,"messages",void 0),a([A()],$l.prototype,"view",null),a([A({type:uZ})],$l.prototype,"viewModel",void 0),$l=a([P("esri.widgets.Compass")],$l);const bxe=$l,X7="esri-navigation-toggle",e9={base:X7,isLayoutHorizontal:`${X7}--horizontal`};let yA=class extends je{constructor(t){super(t),this._navigationMode="pan",this.view=null,t!=null&&t.isDefaultViewModel||eX(de.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(t={}){const{isDefaultViewModel:r,...i}=t;return i}initialize(){this.addHandles(ks((()=>{var t,r;return(r=(t=this.view)==null?void 0:t.navigation)==null?void 0:r.actionMap}),(()=>this._updateNavigationActionMap())))}destroy(){this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var i,s;const t=(s=(i=this.view)==null?void 0:i.navigation)==null?void 0:s.actionMap;if(!t)return;const r=this._navigationMode==="pan";t.dragPrimary=r?"pan":"rotate",t.dragSecondary=r?"rotate":"pan"}};a([A({readOnly:!0})],yA.prototype,"state",null),a([A()],yA.prototype,"_navigationMode",void 0),a([A()],yA.prototype,"view",void 0),yA=a([P("esri.widgets.NavigationToggle.NavigationToggleViewModel")],yA);const cZ=yA;let xl=class extends yE{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new cZ({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var s;const i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan"?this._rotateButton:this._panButton;Y3e(i),this.toggle()},t!=null&&t.isDefaultUI||XK(de.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(t={}){const{isDefaultUI:r,...i}=t;return i}loadDependencies(){return bO({button:()=>ce(()=>Promise.resolve().then(()=>RO),void 0,import.meta.url)})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var s,n;const t=((s=this.viewModel)==null?void 0:s.state)==="disabled",r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan",i=this.messages.toggle;return rn("div",{class:this.classes(e9.base,za.widget,{[e9.isLayoutHorizontal]:this.layout==="horizontal"})},rn("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:r?"outline-fill":"solid",class:za.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),rn("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:r?"solid":"outline-fill",class:za.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};a([A()],xl.prototype,"icon",null),a([A()],xl.prototype,"label",null),a([A({value:"vertical"})],xl.prototype,"layout",null),a([A(),gE("esri/widgets/NavigationToggle/t9n/NavigationToggle")],xl.prototype,"messages",void 0),a([A()],xl.prototype,"view",null),a([A({type:cZ})],xl.prototype,"viewModel",void 0),xl=a([P("esri.widgets.NavigationToggle")],xl);const _xe=xl;let qd=class extends je{get canZoomIn(){var i,s,n;if(!((i=this.view)==null?void 0:i.ready))return!1;const r=(n=(s=this.view)==null?void 0:s.constraints)==null?void 0:n.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){var s;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const i=(s=t.constraints)==null?void 0:s.effectiveMinScale;return i===0||this._scale<i}get _scale(){var r,i,s;const t=(i=(r=this.view)==null?void 0:r.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((s=this.view)==null?void 0:s.scale)??0}};a([A({readOnly:!0})],qd.prototype,"canZoomIn",null),a([A({readOnly:!0})],qd.prototype,"canZoomOut",null),a([A()],qd.prototype,"view",void 0),a([A()],qd.prototype,"_scale",null),qd=a([P("esri.widgets.Zoom.ZoomConditions2D")],qd);const Sxe=qd;let gA=class extends je{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};a([A({readOnly:!0})],gA.prototype,"canZoomIn",null),a([A({readOnly:!0})],gA.prototype,"canZoomOut",null),a([A()],gA.prototype,"view",void 0),gA=a([P("esri.widgets.Zoom.ZoomConditions3D")],gA);const Exe=gA;let Hu=class extends je{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new Sxe({view:t}):t.type==="3d"&&(this._zoomConditions=new Exe({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():Wg(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():Wg(t.goTo({zoomFactor:.5})))}};a([A()],Hu.prototype,"_zoomConditions",void 0),a([A()],Hu.prototype,"canZoomIn",null),a([A()],Hu.prototype,"canZoomOut",null),a([A({readOnly:!0})],Hu.prototype,"state",null),a([A()],Hu.prototype,"view",null),Hu=a([P("esri.widgets.Zoom.ZoomViewModel")],Hu);const dZ=Hu,t9={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Il=class extends yE{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new dZ,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return bO({button:()=>ce(()=>Promise.resolve().then(()=>RO),void 0,import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[t9.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return rn("div",{class:this.classes(t9.base,za.widget,t)},rn("calcite-button",{class:za.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),rn("calcite-button",{class:za.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};a([A()],Il.prototype,"icon",null),a([A()],Il.prototype,"label",null),a([A({value:"vertical"})],Il.prototype,"layout",null),a([A(),gE("esri/widgets/Zoom/t9n/Zoom")],Il.prototype,"messages",void 0),a([A()],Il.prototype,"view",null),a([A({type:dZ})],Il.prototype,"viewModel",void 0),Il=a([P("esri.widgets.Zoom")],Il);const Txe=Il;function $xe(e){return(e==null?void 0:e.view)!==void 0}let tb=class extends e$e{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach((i=>{const s=this._find(i),n=s==null?void 0:s.widget;$xe(n)&&(n.view=r)}))},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([Qe((()=>this.components),this._componentsWatcher,Vi),Qe((()=>this.view),this._updateViewAwareWidgets,Vi)])}_add(t,r,i,s,n){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,r,i,s,n)}_removeComponents(t){t.forEach((r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())}))}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach((r=>this.add(this._createComponent(r),this._defaultPositionLookup[r])))}_createComponent(t){const r=this._createWidget(t);return new K2({id:t,node:r})}_createWidget(t){const r=this.view;switch(t){case"attribution":return new mxe({view:r});case"compass":return new bxe({view:r});case"navigation-toggle":return new _xe({view:r,isDefaultUI:!0});case"zoom":return new Txe({view:r})}}};a([A()],tb.prototype,"components",void 0),tb=a([P("esri.views.ui.DefaultUI")],tb);const pZ=tb;let rb=class extends pZ{constructor(t){super(t),this.components=["attribution","zoom"]}};a([A()],rb.prototype,"components",void 0),rb=a([P("esri.views.ui.2d.DefaultUI2D")],rb);const hZ=rb;let Af=class extends Jq{constructor(t,r){super(t,r,"webmap")}};function a$(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}const AZ=new Af(2,34);var dk;let ib=dk=class extends ee{constructor(e){super(e),this.color=new Ke([0,0,0,1])}clone(){return new dk(H({color:this.color}))}};a([A({type:Ke,json:{write:!0}})],ib.prototype,"color",void 0),ib=dk=a([P("esri.webmap.background.ColorBackground")],ib);const vE=ib;let fZ,mZ,yZ,gZ,vZ,wZ,bZ;async function xxe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([ce(()=>import("./webglDeps-BZ9ojuHp.js"),__vite__mapDeps([201,202,11,203,204]),import.meta.url),ce(()=>import("./mapViewDeps-EFNVvGjo.js"),__vite__mapDeps([205,130,96,97,10,11,98,99,100,101,95,68,206,105,207,203,202,168,146,208,102,209,120,210,153,152,108,9,12,103,15,211,106,107,174,34,151,201,204,212,115,213,214,215,165,162,144,216,84,94,47,43,49,217,218,104,219,110,220,112,73,92,221,222,223,224,161,225,226]),import.meta.url)]);mZ=e,yZ=t,gZ=r,vZ=i,wZ=s,bZ=n,fZ=o}var l0;let Mt=(l0=class extends LEe(ASe(kve(X1e(U1e(W2e))))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Pa({getCollections:()=>{var r,i;return[(r=this.basemapView)==null?void 0:r.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new aE({actionMap:new sO({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new Te,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new DJ,this.type="2d",this.view2dType=null,this.ui=new hZ,this.test={takeScreenshot:async r=>$3e(this._getScreenshotView(r),r)},this.padding={top:0,right:0,bottom:0,left:0},dce()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=cr(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new OTe(this.featuresTilingScheme)}get constraintsInfo(){var i,s;const t=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,r=this.spatialReference;return{lods:(s=t==null?void 0:t.spatialReference)!=null&&s.equals(r)?t.lods:null,spatialReference:r}}get initialExtentRequired(){var l;if(!this.stateManager)return!1;const{scale:t,constraints:r,center:i,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((l=this.map.initialViewProperties)!=null&&l.viewpoint))&&!n&&(r!=null&&r.effectiveLODs||(o=-1),(!i||t===0&&o===-1)&&((s==null?void 0:s.targetGeometry)==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const r=t.targetGeometry,i=this.spatialReference;return Oq(r.spatialReference,i)}get background(){return a$(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get highlightOptions(){return c3e(this)}set highlightOptions(t){d3e(this,t)}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var i,s,n,o;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((i=this._magnifierView)!=null&&i.updatingHandles.updating)),r=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some((l=>!l.destroyed&&!("layerViews"in l)&&l.updating===!0))||t);if(K("esri-2d-log-updating")){const l=this.allLayerViews.reduce(((p,m)=>({...p,[`${m.layer.id}(${m.layer.type})`]:!m.destroyed&&!("layerViews"in m)&&m.updating})),{});console.log(`Updating MapView: ${r}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(s=this.layerViewManager)==null?void 0:s.updating}
-> labelManager.updating: ${(n=this.labelManager)==null?void 0:n.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(l)}
-> updatingMagnifier: ${t}
`)}return r}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new ur({rings:[t.map((r=>[r[0],r[1]]))],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}async hitTest(t,r){return p3e(this,t,r)}async takeScreenshot(t){return T3e(this._getScreenshotView(t),t)}toScreen(t,r){return this.stateManager.toScreen(t,r)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise((t=>{this.ready?t(this):this._resolveWhenReady.push(t)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}getDefaultTimeZone(){return a$(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return a$(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return FF.hasLayerViewModule(t)}importLayerView(t){return FF.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(de.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var m;const r=this.toMap(t),i=await this.hitTest(t),s=this.allLayerViews.toArray().filter((v=>v.clips.every((_=>$J(this,_,t,r))))).reverse(),n=new globalThis.Map(s.map((v=>[v.layer.uid,v]))),o=[];let l=0,p=0;for(;l<i.results.length||p<s.length;){const v=i.results.at(l);if(v&&v.type!=="graphic"){++l;continue}const _=n.get((m=(v==null?void 0:v.layer)??(v==null?void 0:v.graphic.layer))==null?void 0:m.uid);if((!v||_)&&p<s.length&&s.at(p)!==_){const E=s.at(p);"fetchPopupFeaturesAtLocation"in E&&o.push({mapPoint:r,layerView:E}),++p}else v&&(o.push({graphic:v.graphic,layerView:_}),++l)}return{hits:o,location:r}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=D3e(this.type);if(K("safari")&&K("safari")<9&&(t=new Q("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:K("safari")})),t!=null){de.getLogger(this).warn("#validate()",t.message);const r=document.createElement("div");r.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const i=document.createElement("div");i.innerHTML="Unable to display map. WebGL2 support is required.",i.setAttribute("style","font-size: 24px; font-weight: bold;");const s=document.createElement("div");s.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",s.setAttribute("style","font-size: 18px;");const n=document.createElement("a");throw n.innerHTML="https://esriurl.com/systemRequirements",n.target="_blank",n.setAttribute("style","font-size: 18px;"),n.href="https://esriurl.com/systemRequirements",r.appendChild(i),r.appendChild(s),r.appendChild(n),this.surface.appendChild(r),t}}loadAsyncDependencies(){return xxe()}_getDefaultViewpoint(){var N;const{constraints:t,initialExtent:r,map:i,padding:s,size:n}=this;if(!t)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,l=this.stateManager.getUserStartupOptions(this.size),p=o==null?void 0:o.viewpoint,m=((N=p==null?void 0:p.targetGeometry)==null?void 0:N.extent)??r,v=m==null?void 0:m.center,_=(p==null?void 0:p.rotation)??0,E=(p==null?void 0:p.scale)||m&&cE(m,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),$=l.center??v,M=l.rotation??_,k=l.scale??E;return $&&k?new fi({targetGeometry:$,scale:k,rotation:M}):null}_startup(){var p;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(p=this.defaultsFromMap.extent)==null?void 0:p.center),this.graphics.owner=this;const r=new ETe(this.surface),i=new fZ(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline},r);this.stage=i,this._magnifierView=new wZ,this._magnifierView.magnifier=this.magnifier,this._gridView=new bZ;const s=new gZ({view:this});this._set("labelManager",s);const n=new ATe({view:this});this._set("animationManager",n);const o=new vZ({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),i.on("webgl-error",(m=>this.fatalError=m.error)),Qe((()=>this.stationary),(m=>i.stationary=m),vs),Qe((()=>this.background),(m=>{i.backgroundColor=m==null?void 0:m.color,this._magnifierView.backgroundColor=m==null?void 0:m.color}),vs),Qe((()=>this.magnifier),(m=>this._magnifierView.magnifier=m),vs),Qe((()=>this.grid),(m=>this._gridView.grid=m),vs),Qe((()=>this.renderingOptions),(m=>i.renderingOptions=m),vs),Qe((()=>this.highlights.items.map((m=>({name:m.name,options:{fillColor:m.color,haloColor:m.haloColor,fillOpacity:m.fillOpacity,haloOpacity:m.haloOpacity,haloWidth:m.haloWidth,haloBlur:m.haloBlur}})))),(()=>{i.highlightGradient=l3e(i.highlightGradient,this.highlights.items)}),vs),Qe((()=>this.state.id),(()=>i.state=this.state),vs)],"map-view"),this._updateStageChildren();const l=this._resolveWhenReady;this._resolveWhenReady=[],l.forEach((m=>m(this))),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach((r=>{this.stage.addChild(r.container)}));const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new wTe(Di.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const r=new mZ({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new yZ(t)});this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var o;const{allLayerViews:r,padding:i,size:s,stage:n}=this;return{allLayerViews:r,backgroundColor:t!=null&&t.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:i,size:s,stage:n}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const r of this.allLayerViews)r.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const r of this.allLayerViews)r.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},l0.type="2d",l0);a([A({constructOnly:!0})],Mt.prototype,"deactivatedWebGLExtensions",void 0),a([A({constructOnly:!0})],Mt.prototype,"debugWebGLExtensions",void 0),a([A({readOnly:!0})],Mt.prototype,"featuresTilingScheme",void 0),a([A({readOnly:!0})],Mt.prototype,"graphicsTileStore",null),a([A()],Mt.prototype,"graphicsView",void 0),a([A()],Mt.prototype,"constraintsInfo",null),a([A()],Mt.prototype,"initialExtentRequired",null),a([A()],Mt.prototype,"labelManager",void 0),a([A({type:aE,nonNullable:!0})],Mt.prototype,"navigation",void 0),a([A({constructOnly:!0})],Mt.prototype,"renderCanvas",void 0),a([A()],Mt.prototype,"renderingOptions",void 0),a([A({constructOnly:!0})],Mt.prototype,"supersampleScreenshotsEnabled",void 0),a([A({readOnly:!0})],Mt.prototype,"supportsGround",void 0),a([A()],Mt.prototype,"defaultsFromMapSettings",null),a([A({readOnly:!0})],Mt.prototype,"typeSpecificPreconditionsReady",null),a([A({type:vE})],Mt.prototype,"background",null),a([A()],Mt.prototype,"center",null),a([A({type:Te})],Mt.prototype,"floors",void 0),a([A()],Mt.prototype,"grid",void 0),a([A({type:Nc})],Mt.prototype,"highlightOptions",null),a([A()],Mt.prototype,"map",void 0),a([A()],Mt.prototype,"padding",null),a([A({readOnly:!0})],Mt.prototype,"rendering",null),a([A({readOnly:!0})],Mt.prototype,"resolution",null),a([A()],Mt.prototype,"scale",null),a([A({constructOnly:!0})],Mt.prototype,"spatialReferenceLocked",void 0),a([A({readOnly:!0})],Mt.prototype,"tileInfo",null),a([A({type:DJ,readOnly:!0})],Mt.prototype,"timeline",void 0),a([A({readOnly:!0})],Mt.prototype,"type",void 0),a([A({readOnly:!0})],Mt.prototype,"updating",null),a([A({readOnly:!0})],Mt.prototype,"view2dType",void 0),a([A({readOnly:!0})],Mt.prototype,"visibleArea",null),a([A()],Mt.prototype,"zoom",null),a([A({readOnly:!0})],Mt.prototype,"navigating",null),a([A(),Ft((e=>e instanceof pZ?e:Vv(hZ,e)))],Mt.prototype,"ui",void 0),Mt=a([P("esri.views.View2D")],Mt);const Ixe=Mt;let sb=class extends Ixe{constructor(t){super(t),this.view2dType="map"}};a([A({readOnly:!0})],sb.prototype,"view2dType",void 0),sb=a([P("esri.views.MapView")],sb);const Mxe=sb;let Wu=class extends ee{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};a([A({type:String,json:{write:{isRequired:!0}}})],Wu.prototype,"facilityIdField",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],Wu.prototype,"layerId",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],Wu.prototype,"nameField",void 0),a([A({type:String,json:{write:!0}})],Wu.prototype,"siteIdField",void 0),a([A({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Wu.prototype,"sublayerId",void 0),Wu=a([P("esri.layers.support.FacilityLayerInfo")],Wu);const Cxe=Wu;let ko=class extends ee{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};a([A({type:String,json:{write:{isRequired:!0}}})],ko.prototype,"facilityIdField",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],ko.prototype,"layerId",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],ko.prototype,"levelIdField",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],ko.prototype,"levelNumberField",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],ko.prototype,"longNameField",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],ko.prototype,"shortNameField",void 0),a([A({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ko.prototype,"sublayerId",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],ko.prototype,"verticalOrderField",void 0),ko=a([P("esri.layers.support.LevelLayerInfo")],ko);const kxe=ko;let Hd=class extends ee{constructor(t){super(t),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};a([A({type:String,json:{write:{isRequired:!0}}})],Hd.prototype,"layerId",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],Hd.prototype,"nameField",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],Hd.prototype,"siteIdField",void 0),a([A({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Hd.prototype,"sublayerId",void 0),Hd=a([P("esri.layers.support.SiteLayerInfo")],Hd);const Rxe=Hd;let vA=class extends ee{constructor(t){super(t),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};a([A({type:kxe,json:{write:{isRequired:!0}}})],vA.prototype,"levelLayer",void 0),a([A({type:Cxe,json:{write:{isRequired:!0}}})],vA.prototype,"facilityLayer",void 0),a([A({type:Rxe,json:{write:!0}})],vA.prototype,"siteLayer",void 0),vA=a([P("esri.support.MapFloorInfo")],vA);const Oxe=vA;var pk;let wA=pk=class extends ee{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new pk(H({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};a([A({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],wA.prototype,"activeRange",void 0),a([A({type:[Number],json:{write:!0}})],wA.prototype,"currentRangeExtent",void 0),a([A({type:[Number],json:{write:!0}})],wA.prototype,"fullRangeExtent",void 0),wA=pk=a([P("esri.webdoc.RangeInfo")],wA);const _O=wA;var hk;let fa=hk=class extends ee{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new hk(H({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};a([A({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],fa.prototype,"enabled",void 0),a([A({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],fa.prototype,"longNames",void 0),a([A({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],fa.prototype,"minimized",void 0),a([A({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],fa.prototype,"pinnedLevels",void 0),a([A({type:String,json:{read:{source:"site"},write:{target:"site"}}})],fa.prototype,"site",void 0),a([A({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],fa.prototype,"facility",void 0),a([A({type:String,json:{read:{source:"level"},write:{target:"level"}}})],fa.prototype,"level",void 0),fa=hk=a([P("esri.webdoc.widgets.FloorFilter")],fa);const Pxe=fa;var Ak;const Iw=new ct({slider:"slider",picker:"picker"});let bA=Ak=class extends ee{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Ak({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};a([A({type:Iw.apiValues,nonNullable:!0,json:{type:Iw.jsonValues,default:null,read:{reader:Iw.read},write:{isRequired:!0,writer:Iw.write}}})],bA.prototype,"interactionMode",void 0),a([A({type:Et,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],bA.prototype,"numStops",void 0),a([A({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],bA.prototype,"stopInterval",void 0),bA=Ak=a([P("esri.webdoc.widgets.Range")],bA);const Nxe=bA;var fk;let ui=fk=class extends ee{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){return e?qt.fromArray(e):void 0}writeCurrentTimeExtent(e,t,r){e&&jr(r,e.toArray(),t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const i=r.endTime!=null?new Date(r.endTime):null,s=r.startTime!=null?new Date(r.startTime):null;return new qt({start:s,end:i})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},i=e.end,s=e.start;i&&(r.endTime=i!=null?i.getTime():null),s&&(r.startTime=s!=null?s.getTime():null)}readStopInterval(e,t,r){return e?Qo.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,i){if(!e)return;const s=e.toJSON(i);jr("properties.timeStopInterval",{interval:s.value,units:s.unit},t)}readStops(e){return e!=null&&e.length?e.map((t=>new Date(t))):null}writeStops(e,t,r){e!=null&&e.length&&jr(r,e.map((i=>i.getTime())),t)}clone(){return new fk(H({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};a([A({type:qt,json:{type:[[Et,V0]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],ui.prototype,"currentTimeExtent",void 0),a([pe("currentTimeExtent")],ui.prototype,"readCurrentTimeExtent",null),a([ye("currentTimeExtent")],ui.prototype,"writeCurrentTimeExtent",null),a([A({type:qt,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],ui.prototype,"fullTimeExtent",void 0),a([pe("fullTimeExtent")],ui.prototype,"readFullTimeExtent",null),a([ye("fullTimeExtent")],ui.prototype,"writeFullTimeExtent",null),a([A({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],ui.prototype,"loop",void 0),a([A({type:Et,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var i;const e=!!this.stopInterval,t=!!((i=this.stops)!=null&&i.length),r=!(e||t);return{enabled:r,isRequired:r}}}}})],ui.prototype,"numStops",void 0),a([A({type:[1,2],nonNullable:!0,json:{type:Et,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],ui.prototype,"numThumbs",void 0),a([A({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],ui.prototype,"stopDelay",void 0),a([A({type:Qo,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:O4.jsonValues.filter((e=>e!=="esriTimeUnitsUnknown"))}},overridePolicy(){var r;const e=this.numStops!=null,t=!!((r=this.stops)!=null&&r.length);return{enabled:!t,isRequired:!(e||t)}}}}})],ui.prototype,"stopInterval",void 0),a([pe("stopInterval")],ui.prototype,"readStopInterval",null),a([ye("stopInterval")],ui.prototype,"writeStopInterval",null),a([A({type:[Date],json:{type:[Et],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],ui.prototype,"stops",void 0),a([pe("stops")],ui.prototype,"readStops",null),a([ye("stops")],ui.prototype,"writeStops",null),ui=fk=a([P("esri.webdoc.widgets.TimeSlider")],ui);const Lxe=ui;var mk;let _A=mk=class extends ee{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new mk(H({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};a([A({type:Nxe,json:{write:!0}})],_A.prototype,"range",void 0),a([A({type:Lxe,json:{write:!0}})],_A.prototype,"timeSlider",void 0),a([A({type:Pxe,json:{write:!0}})],_A.prototype,"floorFilter",void 0),_A=mk=a([P("esri.webdoc.Widgets")],_A);const Dxe=_A,Fxe={width:600,height:400},Mw=1.5;function jxe(e,t){t=t||Fxe;let{width:r,height:i}=t;const s=r/i;return s<Mw?i=r/Mw:s>Mw&&(r=i*Mw),r>e.width&&(i*=e.width/r,r=e.width),i>e.height&&(r*=e.height/i,i=e.height),{width:Math.round(r),height:Math.round(i)}}function Bxe(e,t){return{..._Z(e,t),readResourcePaths:[]}}function D7e(e,t,r){const i=mi(e.itemUrl);return{..._Z(e,t),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:i?{rootPath:i.path,writtenUrls:[]}:null,resources:r?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function _Z(e,t){return{origin:t,url:mi(e.itemUrl),portal:e.portal||me.getDefault(),portalItem:e}}let ac=class extends ee{constructor(t){super(t),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const t=this.geometries.map((s=>s.toJSON())),r=this.geometries[0],i={};return i.outSR=Hb(this.outSpatialReference),i.inSR=Hb(r.spatialReference),i.geometries=JSON.stringify({geometryType:em(r),geometries:t}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};a([A()],ac.prototype,"geometries",void 0),a([A({type:Ce,json:{read:{source:"outSR"}}})],ac.prototype,"outSpatialReference",void 0),a([A()],ac.prototype,"transformation",void 0),a([A()],ac.prototype,"transformForward",void 0),ac=a([P("esri.rest.support.ProjectParameters")],ac);const Uxe=Br(ac);async function Vxe(e,t,r){t=Uxe(t);const i=_Q(e),s={...i.query,f:"json",...t.toJSON()},n=t.outSpatialReference,o=em(t.geometries[0]),l=Ube(s,r);return Nt(i.path+"/project",l).then((({data:{geometries:p}})=>SQ(p,o,n)))}function zxe(e,t){var r;return t.resourceInfo?SZ(t,t.resourceInfo,{origin:e.origin}):(r=t.portalItem)!=null&&r.id?Gxe(e,t,t.portalItem):Promise.resolve()}function SZ(e,t,r){const i={context:{...r,layerContainerType:"operational-layers"}};return e.portalItem&&(i.context.portal=e.portalItem.portal||me.getDefault()),ce(()=>import("./layersCreator-D-MkJNrY.js"),__vite__mapDeps([200,29,28,27,30,26]),import.meta.url).then((({populateOperationalLayers:s})=>{const n=[],o=t.operationalLayers;o!=null&&o.length&&n.push(s(e.layers,o,i));const l={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},p=t.tables;return p!=null&&p.length&&n.push(s(e.tables,p,l)),Promise.allSettled(n).then((()=>{}))}))}async function Gxe(e,t,r){var o;if(await r.load().catch((l=>{throw new Q(`${e.name}:load-portal-item`,"Failed to load portal item",{error:l})})),r.type!==e.itemType)throw new Q(`${e.name}:invalid-portal-item`,`Invalid portal item type '${r.type}', expected '${e.itemType}'`,{type:r.type});const i=await r.fetchData();t.resourceInfo=i;const s=Bxe(r,e.origin);await qxe(e,t,i,s),t.resourceReferences={portalItem:r,paths:s.readResourcePaths};const n=await Wxe(t.initialViewProperties,r,de.getLogger(t));if(n){const l=((o=t.initialViewProperties)==null?void 0:o.clone())??e.createInitialViewProperties();l.viewpoint=n,t.initialViewProperties=l}}function qxe(e,t,r,i){const s=Hxe(e,r);return t.read(s,i),SZ(t,s,i)}function Hxe(e,t){const r=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(r),t.version=`${r.major}.${r.minor}`,t}async function Wxe(e,t,r){var n;if((n=e==null?void 0:e.viewpoint)==null?void 0:n.targetGeometry)return null;const s=await Qxe(e,t,r);return s?new fi({targetGeometry:s}):null}async function Qxe(e,t,r){const i=e==null?void 0:e.spatialReference,s=t==null?void 0:t.extent;if(!i||!s)return null;if(i.isWGS84)return s.clone();if(i.isWebMercator)return Rc(s);const{getGeometryServiceURL:n}=await ce(()=>import("./geometryServiceUtils-DOtZTk4D.js"),[],import.meta.url);try{const o=await n(t),l=new ac({geometries:[s],outSpatialReference:i});return(await Vxe(o,l))[0]}catch(o){r.error("Error projecting item's extent:",o)}return null}function r9(e){return{enabled:!!(e!=null&&e.length)}}var yk;let SA=yk=class extends ee{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new yk({exactMatch:this.exactMatch,type:this.type,name:this.name})}};a([A({type:Boolean,json:{write:!0}})],SA.prototype,"exactMatch",void 0),a([A({type:String,json:{write:!0}})],SA.prototype,"name",void 0),a([Ne(e4)],SA.prototype,"type",void 0),SA=yk=a([P("esri.webdoc.applicationProperties.SearchLayerField")],SA);const Jxe=SA;var gk;let EA=gk=class extends ee{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new gk(H({field:this.field,id:this.id,subLayer:this.subLayer}))}};a([A({type:Jxe,json:{write:{isRequired:!0}}})],EA.prototype,"field",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],EA.prototype,"id",void 0),a([A({type:Et,json:{write:!0}})],EA.prototype,"subLayer",void 0),EA=gk=a([P("esri.webdoc.applicationProperties.SearchLayer")],EA);const Zxe=EA;var vk;let TA=vk=class extends ee{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new vk({exactMatch:this.exactMatch,type:this.type,name:this.name})}};a([A({type:Boolean,json:{write:!0}})],TA.prototype,"exactMatch",void 0),a([A({type:String,json:{write:!0}})],TA.prototype,"name",void 0),a([Ne(e4)],TA.prototype,"type",void 0),TA=vk=a([P("esri.webdoc.applicationProperties.SearchTableField")],TA);const Yxe=TA;var wk;let eg=wk=class extends ee{constructor(e){super(e),this.field=null,this.id=null}clone(){return new wk(H({field:this.field,id:this.id}))}};a([A({type:Yxe,json:{write:{isRequired:!0}}})],eg.prototype,"field",void 0),a([A({type:String,json:{write:{isRequired:!0}}})],eg.prototype,"id",void 0),eg=wk=a([P("esri.webdoc.applicationProperties.SearchTable")],eg);const Kxe=eg;var bk;const EZ=Te.ofType(Zxe),TZ=Te.ofType(Kxe);let ma=bk=class extends ee{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new EZ,this.tables=new TZ}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new bk(H({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};a([A({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],ma.prototype,"addressSearchEnabled",void 0),a([pe("addressSearchEnabled")],ma.prototype,"readAddressSearchEnabled",null),a([ye("addressSearchEnabled")],ma.prototype,"writeAddressSearchEnabled",null),a([A({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],ma.prototype,"enabled",void 0),a([A({type:String,json:{write:!0}})],ma.prototype,"hintText",void 0),a([A({type:EZ,json:{write:{overridePolicy:r9},origins:{"web-scene":{write:{isRequired:!0}}}}})],ma.prototype,"layers",void 0),a([A({type:TZ,json:{read:!0,write:{overridePolicy:r9}}})],ma.prototype,"tables",void 0),ma=bk=a([P("esri.webdoc.applicationProperties.Search")],ma);const Xxe=ma;var _k;let nb=_k=class extends ee{constructor(e){super(e),this.search=null}clone(){return new _k(H({search:this.search}))}};a([A({type:Xxe,json:{write:!0}})],nb.prototype,"search",void 0),nb=_k=a([P("esri.webdoc.applicationProperties.Viewing")],nb);const eIe=nb;var Sk;let $A=Sk=class extends ee{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Sk(H({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};a([A({json:{write:!0}})],$A.prototype,"editing",void 0),a([A({json:{write:!0}})],$A.prototype,"offline",void 0),a([A({type:eIe,json:{write:!0}})],$A.prototype,"viewing",void 0),$A=Sk=a([P("esri.webmap.ApplicationProperties")],$A);const tIe=$A;var Ek;let eu=Ek=class extends ee{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return lV(this.url)}get isDataURI(){return pu(this.url)}clone(){return new Ek({url:this.url})}};a([A({type:String,json:{write:{isRequired:!0}}})],eu.prototype,"url",void 0),a([A()],eu.prototype,"isSecureUrl",null),a([A()],eu.prototype,"isDataURI",null),eu=Ek=a([P("esri.webdoc.support.SlideThumbnail")],eu);const rIe={type:qt,json:{read:{source:"timeExtent",reader:e=>e?Array.isArray(e)?qt.fromArray(e):qt.fromJSON(e):null},write:{writer:(e,t,r,i)=>{e&&(e.isEmpty?i!=null&&i.messages&&i.messages.push(new Q("invalid-timeExtent","TimeExtent cannot be empty")):t[r]=e.toArray())},target:{timeExtent:{type:[[Et,V0]]}}}}};var Tk;let ya=Tk=class extends J0.IdentifiableMixin(ee){constructor(e){super(e),this.name=null,this.thumbnail=new eu,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new eu({url:e}):Br(eu,e)}set viewpoint(e){const{targetGeometry:t,scale:r}=e;t!=null&&t.type==="point"&&r==null&&de.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:r,viewpoint:i}=t;return fi.fromJSON(i||{targetGeometry:r})}writeViewpoint(e,t,r,i){if(!e)return;const{targetGeometry:s}=e;if(s==null||s.type==="extent")s!=null&&(t.extent=s.toJSON()),t[r]=e.toJSON();else{const n="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";i!=null&&i.messages?i.messages.push(new Q("property:unsupported",n)):de.getLogger(this).error(n)}}clone(){return new Tk(H({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};a([A({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],ya.prototype,"name",void 0),a([A({type:eu,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],ya.prototype,"thumbnail",void 0),a([Ft("thumbnail")],ya.prototype,"castThumbnail",null),a([A(rIe)],ya.prototype,"timeExtent",void 0),a([A({type:fi,nonNullable:!0,json:{write:!0}})],ya.prototype,"viewpoint",null),a([pe("viewpoint",["extent","viewpoint"])],ya.prototype,"readViewpoint",null),a([ye("viewpoint")],ya.prototype,"writeViewpoint",null),ya=Tk=a([P("esri.webmap.Bookmark")],ya);const iIe=ya;let Ml=class extends Ge.ClonableMixin(je){constructor(t){super(t),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=ao,this.viewpoint=null}};a([A({type:vE})],Ml.prototype,"background",void 0),a([A({type:_O})],Ml.prototype,"rangeInfo",void 0),a([A({type:Ce})],Ml.prototype,"spatialReference",void 0),a([A({type:qt})],Ml.prototype,"timeExtent",void 0),a([A({nonNullable:!0})],Ml.prototype,"timeZone",void 0),a([A({type:fi})],Ml.prototype,"viewpoint",void 0),Ml=a([P("esri.webmap.InitialViewProperties")],Ml);const q_=Ml,$Z=Te.ofType(iIe),sIe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),nIe="ArcGIS Pro",oIe=$4.JSAPI;let nr=class extends OS(os.LoadableMixin(Fa.EsriPromiseMixin(BW))){constructor(t){super(t),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new $Z,this.floorInfo=null,this.initialViewProperties=new q_,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=pS((async(r,i,s)=>{const{save:n,saveAs:o}=await ce(()=>import("./webdocSaveUtils-FjlU6KTV.js"),__vite__mapDeps([281,178,282,283,180]),import.meta.url);switch(r){case ja.SAVE:return n(this.context,this,i);case ja.SAVE_AS:return o(this.context,this,s,i)}})),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=cr(this.portalItem)}initialize(){if(this.when().catch((t=>{de.getLogger(this).error("#load()","Failed to load web map",t)})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(r){return void this.addResolvingPromise(Promise.reject(r))}this.read(t)}}set authoringApp(t){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",t)}writeAuthoringApp(t,r){t&&this._isAuthoringAppSetByUser?r.authoringApp=t:r.authoringApp=oIe}set authoringAppVersion(t){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",t)}writeAuthoringAppVersion(t,r){t&&this._isAuthoringAppVersionSetByUser?r.authoringAppVersion=t:r.authoringAppVersion=yV}readInitialViewProperties(t,r){var o,l;const i=new q_;r.background&&(i.background=vE.fromJSON(r.background));const s=(o=r.initialState)==null?void 0:o.timeExtent;s&&(i.timeExtent=qt.fromArray(s));const n=(l=r.initialState)==null?void 0:l.viewpoint;return n&&(n.rotation&&Af.parse(r.version||"","webmap").lessThan(2,20)&&r.authoringApp===nIe&&(n.rotation*=-1),i.viewpoint=fi.fromJSON(n)),r.mapRangeInfo&&(i.rangeInfo=_O.fromJSON(r.mapRangeInfo)),r.spatialReference&&(i.spatialReference=Ce.fromJSON(r.spatialReference)),r.timeZone&&(i.timeZone=r.timeZone),i}writeInitialViewProperties(t,r,i,s){var l;if(!t)return;(l=t.background)!=null&&l.color&&(r.background=t.background.write({},s));const{timeExtent:n,viewpoint:o}=t;if(o||n){const p={};o&&(p.viewpoint=o.write({},s)),n&&(p.timeExtent=n.toArray()),r.initialState=p}t.rangeInfo&&(r.mapRangeInfo=t.rangeInfo.toJSON(s)),t.spatialReference&&(r.spatialReference=t.spatialReference.write({},s)),r.timeZone=t.timeZone}writeLayers(t,r,i,s){r[i]=this._writeLayers(t,s,"operational-layers")}readSourceVersion(t,r){const[i,s]=r.version.split(".");return new Af(parseInt(i,10),parseInt(s,10))}writeSourceVersion(t,r,i){r[i]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(t,r,i,s){const n=this._writeLayers(t,s,"tables");n.length&&(r[i]=n)}get thumbnailUrl(){var t;return((t=this.portalItem)==null?void 0:t.thumbnailUrl)||null}set thumbnailUrl(t){t?(this._override("thumbnailUrl",t),this._thumbnailFilename=this._generateCustomThumbnailFilename(t)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(t){return this.addResolvingPromise(zxe(this.context,this)),Promise.resolve(this)}loadAll(){return oE(this,(t=>{t(this.ground,this.basemap,this.layers,this.tables)}))}read(t,r){r={...r,origin:this.context.origin};const i=this._getAuthoringPropsState();eB(this,t,(s=>super.read(t,s)),r),this._restoreAuthoringPropsFromState(i)}write(t,r){if(this.loadStatus!=="loaded"){const i=new Q("webmap:not-loaded","Web map must be loaded before it can be serialized");throw de.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),i}return this._removeDanglingLayerRefs(),r={...r,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(t,r)}async save(t){return this._debouncedSaveOperations(ja.SAVE,t)}async saveAs(t,r){return this._debouncedSaveOperations(ja.SAVE_AS,r,t)}async updateFrom(t,r){const i=this._updateFromInternal(t,r);this._updateFromPromise=i,await i,i===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(t){var i,s,n,o;const r=this.resourceInfo;return this._collectAllLayersJSON([...((i=r==null?void 0:r.baseMap)==null?void 0:i.baseMapLayers)||[],...(r==null?void 0:r.operationalLayers)||[],...((o=(n=(s=this.basemap)==null?void 0:s.resourceInfo)==null?void 0:n.data)==null?void 0:o.baseMapLayers)||[]]).find((l=>l.id===t.id))}async updateItemThumbnail(){var t;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((t=this.portalItem)==null?void 0:t.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let t=this.thumbnailUrl;return t&&(t=this._isOverridden("thumbnailUrl")?t:pV(t,"w","8192")),{thumbnailUrl:t,filename:this._thumbnailFilename}}restoreThumbnailFromState(t){this.thumbnailUrl=t.thumbnailUrl,this._thumbnailFilename=t.filename}_collectAllLayersJSON(t){return t.reduce(((r,i)=>(r.push(i),i.layerType==="GroupLayer"&&(r=r.concat(this._collectAllLayersJSON(i.layers||[]))),r)),[])}_writeLayers(t,r,i){return r={...r,layerContainerType:i},t.map((s=>TC(s,i==="tables"?null:this.getLayerJSONFromResourceInfo(s),r))).filter(Ga).toArray()}_validateJSON(t){const r=Af.parse(t.version||"","webmap");return this.context.currentVersion.validate(r),t.version=`${r.major}.${r.minor}`,t}_removeDanglingLayerRefs(){var o,l;const t=this.applicationProperties,r=(o=t==null?void 0:t.viewing)==null?void 0:o.search,i=p=>this.allLayers.some((m=>m.id===p));if(r!=null&&r.layers&&(r.layers=r.layers.filter((p=>i(p.id)))),r!=null&&r.tables&&(r.tables=r.tables.filter((p=>this.tables.some((m=>m.id===p.id))))),t){const p=(l=t.editing)==null?void 0:l.locationTracking;p!=null&&p.info&&!i(p.info.layerId)&&(t.editing=null)}const s="presentation"in this?this.presentation:null,n=s==null?void 0:s.slides;n&&n.forEach((p=>{p.visibleLayers&&(p.visibleLayers=p.visibleLayers.filter((m=>i(m.id))))}))}async _updateFromInternal(t,r){if(r??(r={}),await Qv((()=>t.ready)),this._updateInitialViewProperties(t,r),t.map===this)for(const i of t.allLayerViews)"visible"in i&&"visible"in i.layer&&i._isOverridden("visible")&&(i.layer.visible=i.visible),"featureEffect"in i&&"featureEffect"in i.layer&&i._isOverridden("featureEffect")&&(i.layer.featureEffect=i.featureEffect);await this._updateThumbnailUrl(t,r)}_updateInitialViewProperties(t,r){var i,s;if(r.backgroundExcluded||(this.initialViewProperties.background=(i=t.background)==null?void 0:i.clone()),this.initialViewProperties.spatialReference=(s=t.spatialReference)==null?void 0:s.clone(),this.initialViewProperties.timeZone=t.timeZone,r.viewpointExcluded||(this.initialViewProperties.viewpoint=new fi({rotation:t.rotation,scale:r.scalePreserved?t.scale:null,targetGeometry:this._getViewExtent(t)})),!r.widgetsExcluded)for(const n of t.persistableViewModels)n.updateWebDocument(this)}_getViewExtent(t){const r=t.center.clone().normalize(),i=t.extent.clone(),s=i.width/2;return i.xmin=r.x-s,i.xmax=r.x+s,i}async _updateThumbnailUrl(t,r){if(r.thumbnailExcluded)return;const i=jxe(t,r.thumbnailSize),s=await t.takeScreenshot({format:"png",width:i.width,height:i.height});this._setAutoGeneratedThumbnail(s.dataUrl)}_setAutoGeneratedThumbnail(t){this.thumbnailUrl=t,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(t){if(pu(t)){const r=Vp(t),i=r==null?void 0:r.mediaType,s=i&&sIe.get(i.toLowerCase())||null,n=`thumbnail${Date.now()}`;return s?`${n}.${s}`:n}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(t){t.isAuthoringAppSetByUser?this.authoringApp=t.authoringApp:this._isAuthoringAppSetByUser=!1,t.isAuthoringAppVersionSetByUser?this.authoringAppVersion=t.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};a([A()],nr.prototype,"_updateFromPromise",void 0),a([A({type:tIe,json:{write:!0}})],nr.prototype,"applicationProperties",void 0),a([A({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],nr.prototype,"authoringApp",null),a([ye("authoringApp")],nr.prototype,"writeAuthoringApp",null),a([A({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],nr.prototype,"authoringAppVersion",null),a([ye("authoringAppVersion")],nr.prototype,"writeAuthoringAppVersion",null),a([A({type:$Z,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],nr.prototype,"bookmarks",void 0),a([A({type:Oxe,json:{name:"mapFloorInfo",write:!0}})],nr.prototype,"floorInfo",void 0),a([A({type:q_,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:vE},"initialState.timeExtent":{type:qt},"initialState.viewpoint":{type:fi},mapRangeInfo:{type:_O},spatialReference:{type:Ce},"timeZone:":{type:String}}}}})],nr.prototype,"initialViewProperties",void 0),a([pe("initialViewProperties")],nr.prototype,"readInitialViewProperties",null),a([ye("initialViewProperties")],nr.prototype,"writeInitialViewProperties",null),a([A({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],nr.prototype,"layers",void 0),a([ye("layers")],nr.prototype,"writeLayers",null),a([A({type:et})],nr.prototype,"portalItem",void 0),a([A()],nr.prototype,"resourceInfo",void 0),a([A({readOnly:!0,type:Af,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],nr.prototype,"sourceVersion",void 0),a([pe("sourceVersion")],nr.prototype,"readSourceVersion",null),a([ye("sourceVersion")],nr.prototype,"writeSourceVersion",null),a([A({json:{read:!1,write:{ignoreOrigin:!0}}})],nr.prototype,"tables",void 0),a([ye("tables")],nr.prototype,"writeTables",null),a([A()],nr.prototype,"thumbnailUrl",null),a([A()],nr.prototype,"updatingFromView",null),a([A({type:Dxe,json:{write:!0}})],nr.prototype,"widgets",void 0),nr=a([P("esri.WebDocument2D")],nr);const aIe=nr;let Cl=class extends ee{constructor(t){super(t),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};a([A({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],Cl.prototype,"moment",void 0),a([A({type:Boolean,json:{write:!0}})],Cl.prototype,"fullUpdate",void 0),a([A({type:Boolean,json:{write:!0}})],Cl.prototype,"validateErrorsCreated",void 0),a([A({type:Boolean,json:{write:!0}})],Cl.prototype,"exceededTransferLimit",void 0),a([A({type:[Object],json:{write:!0}})],Cl.prototype,"serviceEdits",void 0),a([A({type:[Object],json:{write:!0}})],Cl.prototype,"discoveredSubnetworks",void 0),Cl=a([P("esri.rest.networks.support.ValidateNetworkTopologyResult")],Cl);const lIe=Cl,uIe=si()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Qu=class extends lIe{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const r={...t,query:{f:"json"}},{data:i}=await Nt(this.statusUrl,r);return this.read(i),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(t={}){const{interval:r=1e3,statusCallback:i}=t;return new Promise(((s,n)=>{this._clearTimer();const o=setInterval((()=>{this._timer||n(rr()),this.checkJobStatus().then((l=>{const{status:p}=l;switch(this.status=p,p){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":i&&i(this)}}),(l=>{this._clearTimer(),n(l)}))}),r);this._timer=o}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};a([A()],Qu.prototype,"editsResolver",void 0),a([A({type:String,json:{write:!0}})],Qu.prototype,"statusUrl",void 0),a([Ne(uIe)],Qu.prototype,"status",void 0),a([A({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],Qu.prototype,"submissionTime",void 0),a([A({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],Qu.prototype,"lastUpdatedTime",void 0),Qu=a([P("esri.networks.support.TopologyValidationJobInfo")],Qu);const cIe=Qu;var Dr;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTContainment=2]="RTContainment",e[e.RTAttachment=3]="RTAttachment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Dr||(Dr={}));const Cw=new ct({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),z7e=new ct({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),dIe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},G7e=new ct({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});function pIe(e,t,r="from"){const{fromRuleElement:i,viaRuleElement:s,toRuleElement:n}=xZ(e),o=[];switch(e.ruleType){case Dr.RTContainment:case Dr.RTAttachment:r==="from"&&Vo(t,i,!1)?o.push(n):r==="to"&&Vo(t,n,!1)&&o.push(i);break;case Dr.RTJunctionEdgeConnectivity:case Dr.RTJunctionJunctionConnectivity:Vo(t,i,!0)?o.push(n):Vo(t,n,!0)&&o.push(i);break;case Dr.RTEdgeJunctionEdgeConnectivity:s&&(Vo(t,s,!0)?(o.push(i),o.push(n)):(Vo(t,i,!0)||Vo(t,n,!0))&&o.push(s));break;default:return[]}return o}function tg(e,t,r){const{fromRuleElement:i,viaRuleElement:s,toRuleElement:n}=xZ(e);switch(e.ruleType){case Dr.RTContainment:case Dr.RTAttachment:return kw(t,r,i,n,!1,!1);case Dr.RTJunctionEdgeConnectivity:case Dr.RTJunctionJunctionConnectivity:return kw(t,r,i,n,!0,!0);case Dr.RTEdgeJunctionEdgeConnectivity:return kw(t,r,i,s,!0,!0)||kw(t,r,n,s,!0,!0);default:return!1}}function kw(e,t,r,i,s,n){if(!r||!i)return!1;const o=Vo(e,r,n),l=Vo(t,i,n);if(s){const p=Vo(e,i,n),m=Vo(t,r,n);return o&&l||p&&m}return o&&l}function hIe(e,t){var s;const r=(s=e.terminal)==null?void 0:s.terminalId,i=t.terminalId;return r==null&&i==null||(r===1?i==null||i===1:r===i)}function Vo(e,t,r){var n,o,l,p;const{assetGroupCode:i,assetTypeCode:s}=e;return("layerId"in e?e.layerId===((n=t.networkSource)==null?void 0:n.layerId):e.networkSourceId===((o=t.networkSource)==null?void 0:o.sourceId))&&(i==null||i===((l=t.assetGroup)==null?void 0:l.assetGroupCode))&&(s==null||s===((p=t.assetType)==null?void 0:p.assetTypeCode))&&(!r||!("terminalId"in e)||hIe(t,e))}function xZ(e){return{fromRuleElement:{networkSource:e.fromNetworkSource,assetGroup:e.fromAssetGroup,assetType:e.fromAssetType,terminal:e.fromTerminal},viaRuleElement:e.viaNetworkSource?{networkSource:e.viaNetworkSource,assetGroup:e.viaAssetGroup,assetType:e.viaAssetType,terminal:e.viaTerminal}:void 0,toRuleElement:{networkSource:e.toNetworkSource,assetGroup:e.toAssetGroup,assetType:e.toAssetType,terminal:e.toTerminal}}}function jh(e){var s;let t=null,r=null,i=null;if(nB(e))t=$k(e),[r,i]=AIe(e);else if(dc(e)){t=((s=e.parent)==null?void 0:s.layerId)??null;const[n]=H_(e);n===e.subtypeField&&(r=e.subtypeCode)}else t=e.layerId??null;return{layerId:t,assetGroupCode:r,assetTypeCode:i}}function $k(e){var i;const{sourceLayer:t}=e;let r;return Qpe(t)?r=t.layerId:dc(t)&&(r=(i=t.parent)==null?void 0:i.layerId),r??null}function AIe(e){const[t,r]=H_(e.sourceLayer);return[t?e.attributes[t]:null,r?e.attributes[r]:null]}function H_(e){return!e||!("fieldsIndex"in e)?[null,null]:[e.fieldsIndex.normalizeFieldName("assetGroup")??null,e.fieldsIndex.normalizeFieldName("assetType")??null]}async function i9(e,t){if(e==="Utility Network Layer"){const{default:r}=await ce(()=>Promise.resolve().then(()=>xIe),void 0,import.meta.url);return new r({layerUrl:t})}return null}async function fIe(e){var o;let t="portalItem"in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof et||(t={...t,portalItem:new et(t.portalItem)});const r=t.portalItem;if(await r.load(),r.type!=="Feature Service")throw new Q("portal:unknown-item-type","Unknown item type '${type}'",{type:r.type});const i=r.url,s=await Nt(i,{responseType:"json",query:{f:"json"}}),n="Network Layer";if((o=s.data.type)!=null&&o.includes(n))return i9(s.data.type,i);if(s.data.layers){const l=s.data.layers.find((p=>p.type.includes(n)));if(l){const p=`${i}/${l.id}`;return i9(l.type,p)}}return null}let zr=class extends OS(os){static fromPortalItem(e){return fIe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=t=>{const{serviceUrl:r,gdbVersion:i,result:s}=t,n=r===this.featureServiceUrl,o=_g(r,i,this.gdbVersion);n&&o&&s.then((l=>{E2(r,i)&&(this.historicMoment=l.historicMoment)}))},this._updateMomentHandler=t=>{const{serviceUrl:r,gdbVersion:i,moment:s}=t,n=r===this.featureServiceUrl,o=_g(r,i,this.gdbVersion);n&&o&&(this.historicMoment=s)},this.when().then((()=>{this.addHandles([HG(this._applyEditsHandler),WG(this._updateMomentHandler)])}),(()=>{}))}initialize(){this.when().catch((e=>{zi(e)||de.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return mi(this.layerUrl)}get featureServiceUrl(){return Ja(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Ja(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(!this.dataElement)return null;const t=this._layerIdBySourceId.get(e);if(t!=null)return t;const r=this.dataElement.domainNetworks,i=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return i>=0?i:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const t=this._sourceIdByLayerId.get(e);if(t!=null)return t;const r=this.dataElement.domainNetworks,i=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return i>=0?i:null}getObjectIdsFromElements(e){const t=[],r=new Map;for(const s of e){const n=this.getLayerIdBySourceId(s.networkSourceId);if(n==null)continue;let o=r.get(n);o===void 0&&(o=[]),o.push(s.objectId),r.set(n,o)}const i=this.featureServiceUrl;return r.forEach(((s,n)=>t.push({layerUrl:`${i}/${n}`,objectIds:s}))),t}async queryNamedTraceConfigurations(e,t){var o;const[{queryNamedTraceConfigurations:r},{default:i}]=await Promise.all([ce(()=>import("./queryNamedTraceConfigurations-BwbBZXi2.js"),[],import.meta.url),ce(()=>import("./QueryNamedTraceConfigurationsParameters-Doo15ELC.js"),[],import.meta.url)]),s=this.networkServiceUrl,n=i.from(e);return(o=await r(s,n,{...t}))==null?void 0:o.namedTraceConfigurations}async validateTopology(e,t){var m,v,_;if(!e.validateArea)throw new Q("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:i}]=await Promise.all([ce(()=>import("./validateNetworkTopology-BjKalQ0o.js"),[],import.meta.url),ce(()=>import("./ValidateNetworkTopologyParameters-btRfFC7i.js"),[],import.meta.url)]),s=i.from(e);E2(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=ZI,await yL(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const n=this.networkServiceUrl,o=this.featureServiceUrl,l=gL(o,null,this.gdbVersion,!0),p=await r(n,s,{...t});if(p!=null&&p.serviceEdits){const E=[];for(const $ of p.serviceEdits){const{editedFeatures:M}=$,k=M!=null&&M.spatialReference?new Ce(M.spatialReference):null;E.push({layerId:$.layerId,editedFeatures:{adds:((m=M==null?void 0:M.adds)==null?void 0:m.map((N=>Rw(N,k))))||[],updates:((v=M==null?void 0:M.updates)==null?void 0:v.map((N=>({original:Rw(N[0],k),current:Rw(N[1],k)}))))||[],deletes:((_=M==null?void 0:M.deletes)==null?void 0:_.map((N=>Rw(N,k))))||[],spatialReference:k}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:E,exceededTransferLimit:!1,historicMoment:p.moment})}return p}async submitTopologyValidationJob(e,t){let r=null;if(!e.validateArea)throw new Q("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const m=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await Nt(m,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:i},{default:s}]=await Promise.all([ce(()=>import("./validateNetworkTopology-BjKalQ0o.js"),[],import.meta.url),ce(()=>import("./ValidateNetworkTopologyParameters-btRfFC7i.js"),[],import.meta.url)]),n=s.from(e);E2(this.featureServiceUrl,this.gdbVersion||null)?(n.sessionID=ZI,await yL(this.featureServiceUrl,this.gdbVersion,!0)):n.sessionID=null,n.gdbVersion=this.gdbVersion||r;const o=this.networkServiceUrl,l=this.featureServiceUrl?gL(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,p=await i(o,n,{...t});return new cIe({statusUrl:p,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const t of this.dataElement.domainNetworks)for(const r of[t.edgeSources??[],t.junctionSources??[]])for(const i of r)if(i.sourceId===e)return r===t.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,t,r,i,s){for(const n of e)for(const o of[n.edgeSources??[],n.junctionSources??[]])for(const l of o)if(l[r]===s)return t.set(s,l[i]),l[i];return-1}async _fetchLayerMetaData(e,t){const r=await Nt(e,{responseType:"json",query:{f:"json"},...t});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,t,r){if(this.dataElement)return;const i=await Nt(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...r}).then((s=>{var n;return(n=s.data.layerDataElements)==null?void 0:n[0]}));i&&this.read(i,{origin:"service"})}};function Rw(e,t){return new Sr({attributes:e.attributes,geometry:Ya({...e.geometry,spatialReference:t})})}a([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],zr.prototype,"id",void 0),a([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],zr.prototype,"title",void 0),a([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],zr.prototype,"layerUrl",void 0),a([A({type:Object,json:{origins:{service:{read:!0}},read:!1}})],zr.prototype,"dataElement",void 0),a([A({type:At,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],zr.prototype,"fullExtent",void 0),a([A({type:Ce,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],zr.prototype,"spatialReference",void 0),a([A({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],zr.prototype,"type",void 0),a([A({readOnly:!0})],zr.prototype,"datasetName",null),a([A({readOnly:!0})],zr.prototype,"owner",null),a([A({readOnly:!0})],zr.prototype,"schemaGeneration",null),a([A({readOnly:!0})],zr.prototype,"parsedUrl",null),a([A({readOnly:!0})],zr.prototype,"featureServiceUrl",null),a([A({readOnly:!0})],zr.prototype,"networkServiceUrl",null),a([A({readOnly:!0})],zr.prototype,"layerId",null),a([A()],zr.prototype,"sourceJSON",void 0),a([A({readOnly:!0})],zr.prototype,"networkSystemLayers",null),a([A()],zr.prototype,"gdbVersion",void 0),a([A({type:Date})],zr.prototype,"historicMoment",void 0),zr=a([P("esri.networks.Network")],zr);const mIe=zr;let Ju=class extends ee.JSONSupportMixin(os){constructor(t){super(t),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Nt}initialize(){}async load(t){const r=this.rulesLayer.load(t).then((()=>this._initializeRulesTable()));return this.addResolvingPromise(r),this}getFeaturesCanAssociateWithClause(t,r,i){const s=new Map,[n,o]=H_(t.sourceLayer);if(!n||!o)return"";const l=jh(t),p=jh(r);i.forEach((v=>{const{type:_,direction:E}=v;this._getRulesForAssociationType(_).forEach(($=>{pIe($,l,E).filter((M=>{var k;return((k=M.networkSource)==null?void 0:k.layerId)===p.layerId})).forEach((M=>{var U,G;const k=(U=M.assetGroup)==null?void 0:U.assetGroupCode,N=(G=M.assetType)==null?void 0:G.assetTypeCode;if(k!=null&&N!=null){const W=s.get(k)??new Set;W.add(N),s.set(k,W)}}))}))}));let m=[];return this._mergeAssetCodes(s).forEach(((v,_)=>{const E=`${n} IN (${_})`,$=Tte(o,[...v]);E&&$&&m.push(Gw(E,$))})),m.length>1&&(m=m.map((v=>`(${v})`))),m.join(" OR ")}getFeaturesCanAssociateWith(t,r,i){return $k(t)==null?[]:r.filter((s=>this.canAssociateFeatures(t,s,i)))}canAssociateFeatures(t,r,i){if(!this._canSupportAssociations([t,r]))return!1;const s=jh(t),n=jh(r);return i.some((o=>{const{type:l,direction:p}=o;return this._getRulesForAssociationType(l).some((m=>p==="to"?tg(m,n,s):tg(m,s,n)))}))}getLayersCanAssociateWith(t,r,i){return $k(t)==null?[]:r.filter((s=>this.canAssociateFeatureToLayer(t,s,i)))}canAssociateFeatureToLayer(t,r,i){if(!this._canSupportAssociations([t,r]))return!1;const s=jh(t),n=jh(r);return i.some((o=>{const{type:l,direction:p}=o;return this._getRulesForAssociationType(l).some((m=>p==="to"?tg(m,n,s):tg(m,s,n)))}))}getFeatureSQL(t,r){var m,v;const i=t.layerId.toString(),s=(m=t.fieldsIndex)==null?void 0:m.normalizeFieldName("assetGroup"),n=(v=t.fieldsIndex)==null?void 0:v.normalizeFieldName("assetType"),o=s?r.attributes[s]:null,l=n?r.attributes[n]:null,p=this.rulesHash[i];if(p){const _=p.assetGroupHash[o];if(_)return _.assetTypeHash[l]||null}return null}async _initializeRulesTable(){var s,n,o,l,p,m,v,_,E,$,M;const t={};let r;(function(k){k[k.from=0]="from",k[k.to=1]="to",k[k.via=2]="via"})(r||(r={}));const i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const k of this.rules){if(k.ruleType===Dr.RTAttachment){this.rulesCategorized.attachment.push(k);continue}if(k.ruleType===Dr.RTContainment){this.rulesCategorized.containment.push(k);continue}if(k.ruleType===Dr.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(k);continue}this.rulesCategorized.connectivity.push(k);let N=[[r.from,r.to],[r.to,r.from]];k.ruleType===Dr.RTEdgeJunctionEdgeConnectivity&&(N=[[r.from,r.via],[r.via,r.from],[r.to,r.via],[r.via,r.to]]);for(const U of N){const G=U.shift(),W=U.shift();let Z=!1;switch(k.ruleType){case Dr.RTEdgeJunctionEdgeConnectivity:Z=G===r.from||G===r.to;break;case Dr.RTJunctionEdgeConnectivity:Z=G===r.to}const ie=i[G],ne=((s=k[ie.networkSourceId])==null?void 0:s.layerId.toString())??"",ge=(o=(n=k[ie.assetGroupId])==null?void 0:n.assetGroupCode)==null?void 0:o.toString(),we=k[ie.assetTypeId],xe=(l=we==null?void 0:we.assetTypeCode)==null?void 0:l.toString(),Ie=i[W],$e=((p=k[Ie.networkSourceId])==null?void 0:p.layerId.toString())??"",Re=(v=(m=k[Ie.assetGroupId])==null?void 0:m.assetGroupCode)==null?void 0:v.toString(),pt=k[Ie.assetTypeId],qe=(_=pt==null?void 0:pt.assetTypeCode)==null?void 0:_.toString(),Ot=t[ne]??{assetGroupHash:{}};if(!(ge&&xe&&Re&&qe))continue;const ni=Ot.assetGroupHash[ge]??{assetTypeHash:{}},Ct=ni.assetTypeHash[xe]??{};if(Ct[$e]=Ct[$e]??{},Z){Ct[ne]=Ct[ne]??{};const Gi=Gw(`assetgroup = ${ge}`,`assettype = ${xe}`);(pt==null?void 0:pt.connectivityPolicy)==="esriNECPEndVertex"?Ct[ne].endVertex=(E=Ct[ne])!=null&&E.endVertex?`${Ct[ne].endVertex}`:`(${Gi})`:Ct[ne].anyVertex=Ct[ne].anyVertex?`${Ct[ne].anyVertex}`:`(${Gi})`}const It=Gw(`assetgroup = ${Re}`,`assettype = ${qe}`);(pt==null?void 0:pt.connectivityPolicy)==="esriNECPEndVertex"?Ct[$e].endVertex=($=Ct[$e])!=null&&$.endVertex?I$(Ct[$e].endVertex,It):`(${It})`:Ct[$e].anyVertex=(M=Ct[$e])!=null&&M.anyVertex?I$(Ct[$e].anyVertex,It):`(${It})`,ni.assetTypeHash[xe]=Ct,Ot.assetGroupHash[ge]=ni,t[ne]=Ot}}this._set("rulesHash",t)}_getRulesForAssociationType(t){const{rulesCategorized:r}=this;switch(t){case"attachment":return r.attachment;case"containment":return r.containment;case"connectivity":case"junction-junction-connectivity":return r.connectivity.filter((i=>i.ruleType===Dr.RTJunctionJunctionConnectivity));case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return r.connectivity.filter((i=>i.ruleType===Dr.RTJunctionEdgeConnectivity||i.ruleType===Dr.RTEdgeJunctionEdgeConnectivity));default:return[]}}_areSetsEqual(t,r){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}_mergeAssetCodes(t){const r=new Map,i=new Set;for(const[s,n]of t){const o=new Set([s]);for(const[p,m]of t)s!==p&&!i.has(p)&&this._areSetsEqual(n,m)&&(o.add(p),i.add(p));const l=Array.from(o).sort().join(",");r.set(l,n)}return r}_canSupportAssociations(t){return t.every((r=>{const i=nB(r)?r.sourceLayer:r,[s,n]=H_(i);return s!=null&&n!=null}))}};a([A({constructOnly:!0})],Ju.prototype,"rulesLayer",void 0),a([A({constructOnly:!0})],Ju.prototype,"rules",void 0),a([A({readOnly:!0})],Ju.prototype,"rulesHash",void 0),a([A()],Ju.prototype,"rulesCategorized",void 0),a([A({constructOnly:!0})],Ju.prototype,"request",void 0),Ju=a([P("esri.networks.RulesTable")],Ju);let Gn=class extends ee{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};a([A({type:[Object],json:{write:!0}})],Gn.prototype,"conditionBarriers",void 0),a([A({type:[Object],json:{write:!0}})],Gn.prototype,"outputConditions",void 0),a([A({type:[Object],json:{write:!0}})],Gn.prototype,"functions",void 0),a([A({type:[Object],json:{write:!0}})],Gn.prototype,"functionBarriers",void 0),a([A({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Gn.prototype,"traversabilityScope",void 0),a([A({type:String,json:{write:!0}})],Gn.prototype,"shortestPathNetworkAttributeName",void 0),a([A({type:Boolean,json:{write:!0}})],Gn.prototype,"includeBarriers",void 0),a([A({type:Boolean,json:{write:!0}})],Gn.prototype,"validateConsistency",void 0),a([A({type:Boolean,json:{write:!0}})],Gn.prototype,"ignoreBarriersAtStartingPoints",void 0),Gn=a([P("esri.networks.support.TraceConfiguration")],Gn);const SO=Gn;let er=class extends SO{constructor(t){super(t),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};a([A({type:[Object],json:{write:!0}})],er.prototype,"filterBarriers",void 0),a([A({type:String,json:{write:!0}})],er.prototype,"arcadeExpressionBarrier",void 0),a([A({type:String,json:{write:!0}})],er.prototype,"circuitName",void 0),a([A({type:String,json:{write:!0}})],er.prototype,"domainNetworkName",void 0),a([A({type:String,json:{write:!0}})],er.prototype,"filterBitsetNetworkAttributeName",void 0),a([A({type:[Object],json:{write:!0}})],er.prototype,"filterFunctionBarriers",void 0),a([A({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],er.prototype,"filterScope",void 0),a([A({type:Boolean,json:{write:!0}})],er.prototype,"includeContainers",void 0),a([A({type:Boolean,json:{write:!0}})],er.prototype,"includeContent",void 0),a([A({type:Boolean,json:{write:!0}})],er.prototype,"includeIsolated",void 0),a([A({type:Boolean,json:{write:!0}})],er.prototype,"includeStructures",void 0),a([A({type:Boolean,json:{write:!0}})],er.prototype,"allowIndeterminateFlow",void 0),a([A({type:Boolean,json:{write:!0}})],er.prototype,"includeUpToFirstSpatialContainer",void 0),a([A({type:Boolean,json:{write:!0}})],er.prototype,"inferConnectivity",void 0),a([A({type:Number,json:{write:!0}})],er.prototype,"maxHops",void 0),a([A({type:Object,json:{write:!0}})],er.prototype,"nearestNeighbor",void 0),a([A({type:Number,json:{write:!0}})],er.prototype,"numPaths",void 0),a([A({type:[Object],json:{write:!0}})],er.prototype,"outputFilterCategories",void 0),a([A({type:[Object],json:{write:!0}})],er.prototype,"outputFilters",void 0),a([A({type:[Object],json:{write:!0}})],er.prototype,"propagators",void 0),a([A({type:String,json:{write:!0}})],er.prototype,"subnetworkName",void 0),a([A({type:String,json:{write:!0}})],er.prototype,"targetTierName",void 0),a([A({type:String,json:{write:!0}})],er.prototype,"diagramTemplateName",void 0),a([A({type:String,json:{write:!0}})],er.prototype,"tierName",void 0),a([A({type:Boolean,json:{write:!0}})],er.prototype,"validateLocatability",void 0),er=a([P("esri.networks.support.UNTraceConfiguration")],er);const yIe=er;let Vs=class extends _I{constructor(t){super(t),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(t,r){return t.tierName!==void 0?yIe.fromJSON(t):SO.fromJSON(t)}};a([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Vs.prototype,"globalId",void 0),a([A({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Vs.prototype,"title",void 0),a([A({type:SO,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vs.prototype,"traceConfiguration",void 0),a([pe("service","traceConfiguration")],Vs.prototype,"readTraceConfiguration",null),a([A({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vs.prototype,"creationDate",void 0),a([A({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vs.prototype,"creator",void 0),a([A({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vs.prototype,"description",void 0),a([A({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Vs.prototype,"minStartingPoints",void 0),a([A({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vs.prototype,"resultTypes",void 0),a([A({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Vs.prototype,"tags",void 0),a([A({type:Cw.apiValues,json:{type:Cw.jsonValues,origins:{service:{read:Cw.read,write:Cw.write}},read:!1}})],Vs.prototype,"traceType",void 0),Vs=a([P("esri.networks.support.NamedTraceConfiguration")],Vs);const gIe=Vs;function vIe(e){var $,M,k,N,U,G,W,Z,ie,ne,ge;const t=e==null?void 0:e.fieldsIndex,r="fromnetworksourceid",i="fromglobalid",s="fromterminalid",n="tonetworksourceid",o="toglobalid",l="toterminalid",p="status",m="associationtype",v="iscontentvisible",_="percentalong",E="globalid";return{fromNetworkSourceId:(($=t==null?void 0:t.get(r))==null?void 0:$.name)??r,fromGlobalId:((M=t==null?void 0:t.get(i))==null?void 0:M.name)??i,fromTerminalId:((k=t==null?void 0:t.get(s))==null?void 0:k.name)??s,toNetworkSourceId:((N=t==null?void 0:t.get(n))==null?void 0:N.name)??n,toGlobalId:((U=t==null?void 0:t.get(o))==null?void 0:U.name)??o,toTerminalId:((G=t==null?void 0:t.get(l))==null?void 0:G.name)??l,status:((W=t==null?void 0:t.get(p))==null?void 0:W.name)??p,associationType:((Z=t==null?void 0:t.get(m))==null?void 0:Z.name)??m,isContentVisible:((ie=t==null?void 0:t.get(v))==null?void 0:ie.name)??v,percentAlong:((ne=t==null?void 0:t.get(_))==null?void 0:ne.name)??_,globalId:((ge=t==null?void 0:t.get((e==null?void 0:e.globalIdField)??E))==null?void 0:ge.name)??E}}function J7e(e,t){if(t.type!=="feature"&&t.type!=="subtype-group")return[];if(!t.url)return[];const r="utilityNetworks"in e.map?e.map.utilityNetworks??[]:[];for(const i of r)if(i.isUtilityLayer(t)){const s=t.fieldsIndex.get("assetgroup"),n=t.fieldsIndex.get("assettype");return[s==null?void 0:s.name,n==null?void 0:n.name].filter((o=>o!=null))}return[]}let qn=class extends je{constructor(t){super(t),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var t;(t=this.associationsTable)==null||t.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const{associationsTableUrl:t}=this;if(!t)throw new Q("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new Le({url:t})}return await this.associationsTable.load(),this.associationsTable}};a([A({constructOnly:!0})],qn.prototype,"rulesTableId",void 0),a([A({constructOnly:!0})],qn.prototype,"rulesTableUrl",void 0),a([A({constructOnly:!0})],qn.prototype,"subnetworksTableId",void 0),a([A({constructOnly:!0})],qn.prototype,"subnetworksTableUrl",void 0),a([A({constructOnly:!0})],qn.prototype,"dirtyAreasLayerId",void 0),a([A({constructOnly:!0})],qn.prototype,"dirtyAreasLayerUrl",void 0),a([A()],qn.prototype,"associationsTable",void 0),a([A({constructOnly:!0})],qn.prototype,"associationsTableId",void 0),a([A({constructOnly:!0})],qn.prototype,"associationsTableUrl",void 0),qn=a([P("esri.networks.support.NetworkSystemLayers")],qn);let xA=class extends ee{constructor(t){super(t),this.id=null,this.name=null}};a([A({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],xA.prototype,"id",void 0),a([A({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],xA.prototype,"name",void 0),a([A({type:Boolean,json:{write:!0}})],xA.prototype,"isUpstreamTerminal",void 0),xA=a([P("esri.networks.support.Terminal")],xA);const wIe=xA,Ow=new ct({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Vl=class extends ee{constructor(t){super(t),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};a([A({type:String,json:{write:!0}})],Vl.prototype,"defaultConfiguration",void 0),a([A({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Vl.prototype,"id",void 0),a([A({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Vl.prototype,"name",void 0),a([A({type:[wIe],json:{write:!0}})],Vl.prototype,"terminals",void 0),a([A({type:Ow.apiValues,json:{type:Ow.jsonValues,read:Ow.read,write:Ow.write}})],Vl.prototype,"traversabilityModel",void 0),Vl=a([P("esri.networks.support.TerminalConfiguration")],Vl);let IA=class extends ee{constructor(t){super(t),this.line=null,this.multipoint=null,this.polygon=null}};a([A({type:$r,json:{write:!0},readOnly:!0})],IA.prototype,"line",void 0),a([A({type:Kn,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],IA.prototype,"multipoint",void 0),a([A({type:ur,json:{write:!0},readOnly:!0})],IA.prototype,"polygon",void 0),IA=a([P("esri.rest.networks.support.AggregatedGeometry")],IA);const bIe=IA;let Gs=class extends ee{constructor(t){super(t),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};a([A({json:{write:!1}})],Gs.prototype,"type",void 0),a([A({type:Number,json:{write:!0}})],Gs.prototype,"assetGroupCode",void 0),a([A({type:Number,json:{write:!0}})],Gs.prototype,"assetTypeCode",void 0),a([A({type:String,json:{write:!0}})],Gs.prototype,"globalId",void 0),a([A({type:Number,json:{write:!0}})],Gs.prototype,"networkSourceId",void 0),a([A({type:Number,json:{write:!0}})],Gs.prototype,"objectId",void 0),a([A({type:Number,json:{write:!0}})],Gs.prototype,"positionFrom",void 0),a([A({type:Number,json:{write:!0}})],Gs.prototype,"positionTo",void 0),a([A({type:Number,json:{write:!0}})],Gs.prototype,"terminalId",void 0),Gs=a([P("esri.rest.networks.support.NetworkElement")],Gs);let Na=class extends Gs{constructor(t){super(t),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};a([A({json:{write:!1}})],Na.prototype,"type",void 0),a([A({json:{write:!0}})],Na.prototype,"firstUnit",void 0),a([A({json:{write:!0}})],Na.prototype,"numUnits",void 0),Na=a([P("esri.rest.networks.support.TelecomNetworkElement")],Na);let kl=class extends ee{constructor(t){super(t),this.edgeElement=null,this.junctionElement=null}readEdgeElement(t,r){return new Na({networkSourceId:r.edgeNetworkSourceId,globalId:r.edgeGlobalId,objectId:r.edgeObjectId,positionFrom:r.edgePositionFrom,positionTo:r.edgePositionTo,firstUnit:r.edgeFirstUnit,numUnits:r.edgeNumUnits})}writeEdgeElement(t,r){r.edgeNetworkSourceId=t.networkSourceId,r.edgeGlobalId=t.globalId,r.edgeObjectId=t.objectId,r.edgePositionFrom=t.positionFrom,r.edgePositionTo=t.positionTo,r.edgeFirstUnit=t.firstUnit,r.edgeNumUnits=t.numUnits}readJunctionElement(t,r){return new Na({networkSourceId:r.junctionNetworkSourceId,globalId:r.junctionGlobalId,objectId:r.junctionObjectId,terminalId:r.junctionTerminalId,firstUnit:r.junctionFirstUnit,numUnits:r.junctionNumUnits})}writeJunctionElement(t,r){r.junctionNetworkSourceId=t.networkSourceId,r.junctionGlobalId=t.globalId,r.junctionObjectId=t.objectId,r.junctionTerminalId=t.terminalId,r.junctionFirstUnit=t.firstUnit,r.junctionNumUnits=t.numUnits}};a([A({type:Na,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],kl.prototype,"edgeElement",void 0),a([pe("edgeElement")],kl.prototype,"readEdgeElement",null),a([ye("edgeElement")],kl.prototype,"writeEdgeElement",null),a([A({type:Na,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],kl.prototype,"junctionElement",void 0),a([pe("junctionElement")],kl.prototype,"readJunctionElement",null),a([ye("junctionElement")],kl.prototype,"writeJunctionElement",null),kl=a([P("esri.rest.networks.support.CircuitPathConnectivityElement")],kl);const _Ie=kl,Pw=new ct({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"});let ga=class extends ee{constructor(t){super(t),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null}};a([A({type:String,json:{write:!0}})],ga.prototype,"globalId",void 0),a([A({type:Boolean,json:{write:!0}})],ga.prototype,"isFilterBarrier",void 0),a([A({type:Number,json:{write:!0}})],ga.prototype,"percentAlong",void 0),a([A({type:Number,json:{write:!0}})],ga.prototype,"terminalId",void 0),a([A({type:Pw.apiValues,json:{type:Pw.jsonValues,read:{reader:Pw.read,source:"traceLocationType"},write:{writer:Pw.write,target:"traceLocationType"}}})],ga.prototype,"type",void 0),a([A({type:Number,json:{write:!0}})],ga.prototype,"firstUnit",void 0),a([A({type:Number,json:{write:!0}})],ga.prototype,"numUnits",void 0),ga=a([P("esri.rest.networks.support.TraceLocation")],ga);const s9=ga;let Rl=class extends ee{constructor(t){super(t),this.pathId=null,this.orderId=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};a([A({type:Number,json:{write:!0}})],Rl.prototype,"pathId",void 0),a([A({type:Number,json:{write:!0}})],Rl.prototype,"orderId",void 0),a([A({type:s9,json:{write:!0}})],Rl.prototype,"startingPoint",void 0),a([A({type:s9,json:{write:!0}})],Rl.prototype,"stoppingPoint",void 0),a([A({type:[_Ie],json:{write:!0}})],Rl.prototype,"pathConnectivity",void 0),a([A({type:$r,json:{write:!0}})],Rl.prototype,"geometry",void 0),Rl=a([P("esri.rest.networks.support.CircuitPath")],Rl);const EO=Rl;let Wd=class extends ee{constructor(t){super(t),this.circuit=null,this.geometry=null,this.path=null}readCircuit(t,r){var s;const i=(s=r.sections)==null?void 0:s.map((n=>({...n,path:EO.fromJSON(n.path)})));return{name:r.name,globalId:r.globalId,isSectioned:r.isSectioned,sectionOrder:r.sectionOrder,startLocation:r.startLocation,stopLocation:r.stopLocation,sections:i,subcircuits:r.subcircuits,lastVerifiedTime:r.lastVerifiedTime?new Date(r.lastVerifiedTime):null,lastExportedTime:r.lastExportedTime?new Date(r.lastExportedTime):null,circuitType:r.circuitType,status:r.status}}};a([A({type:Object,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],Wd.prototype,"circuit",void 0),a([pe("circuit")],Wd.prototype,"readCircuit",null),a([A({type:$r,json:{write:!0}})],Wd.prototype,"geometry",void 0),a([A({type:EO,json:{write:!0}})],Wd.prototype,"path",void 0),Wd=a([P("esri.rest.networks.support.CircuitTraceResult")],Wd);const SIe=Wd;let MA=class extends ee{constructor(t){super(t),this.functionType=null,this.networkAttributeName=null,this.result=null}};a([A({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],MA.prototype,"functionType",void 0),a([A({type:String,json:{write:!0},readOnly:!0})],MA.prototype,"networkAttributeName",void 0),a([A({type:Number,json:{write:!0},readOnly:!0})],MA.prototype,"result",void 0),MA=a([P("esri.rest.networks.support.FunctionResult")],MA);const EIe=MA;let bn=class extends ee{constructor(t){super(t),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(t,r){return r.elements!=null?r.elements.map((i=>"firstUnit"in i&&"numUnits"in i?new Na({...i}):new Gs({...i}))):[]}writeNetworkElements(t,r){r.elements=t.map((i=>i.toJSON()))}};a([A({type:bIe,json:{write:!0},readOnly:!0})],bn.prototype,"aggregatedGeometry",void 0),a([A({type:[SIe],json:{write:!0},readOnly:!0})],bn.prototype,"circuits",void 0),a([A({type:[Gs],json:{write:!0},readOnly:!0})],bn.prototype,"elements",void 0),a([pe("elements")],bn.prototype,"readNetworkElements",null),a([ye("elements")],bn.prototype,"writeNetworkElements",null),a([A({type:[EIe],json:{write:!0},readOnly:!0})],bn.prototype,"globalFunctionResults",void 0),a([A({type:Boolean,json:{write:!0},readOnly:!0})],bn.prototype,"kFeaturesForKNNFound",void 0),a([A({type:[EO],json:{write:!0},readOnly:!0})],bn.prototype,"paths",void 0),a([A({type:Boolean,json:{write:!0},readOnly:!0})],bn.prototype,"startingPointsIgnored",void 0),a([A({type:[String],json:{write:!0},readOnly:!0})],bn.prototype,"warnings",void 0),bn=a([P("esri.rest.networks.support.TraceResult")],bn);const TIe=si()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Qd=class extends bn{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const r={...t,query:{f:"json"}},{data:i}=await Nt(this.statusUrl,r),s=i.traceResults?{...i.traceResults,...i}:i;return this.read(s),this}async waitForJobCompletion(t={}){const{interval:r=1e3,statusCallback:i}=t;return new Promise(((s,n)=>{this._clearTimer();const o=setInterval((()=>{this._timer||n(rr()),this.checkJobStatus().then((l=>{const{status:p}=l;switch(this.status=p,p){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":i&&i(this)}}),(l=>{this._clearTimer(),n(l)}))}),r);this._timer=o}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};a([A({type:String,json:{write:!0}})],Qd.prototype,"statusUrl",void 0),a([Ne(TIe)],Qd.prototype,"status",void 0),a([A({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],Qd.prototype,"submissionTime",void 0),a([A({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],Qd.prototype,"lastUpdatedTime",void 0),Qd=a([P("esri.networks.support.TraceJobInfo")],Qd);let va=class extends mIe{constructor(t){super(t),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map,this._circuitManagerMap=new Map,this._unitIdentifierManager=null}get serviceTerritoryFeatureLayerId(){var t;return((t=this.dataElement)==null?void 0:t.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var t,r,i,s,n,o,l,p;return new qn({rulesTableId:(t=this.sourceJSON)==null?void 0:t.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(r=this.sourceJSON)==null?void 0:r.systemLayers.rulesTableId}`:null,subnetworksTableId:(i=this.sourceJSON)==null?void 0:i.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(s=this.sourceJSON)==null?void 0:s.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(n=this.sourceJSON)==null?void 0:n.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(l=this.sourceJSON)==null?void 0:l.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(p=this.sourceJSON)==null?void 0:p.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var t;return((t=this.dataElement)==null?void 0:t.terminalConfigurations.map((r=>Vl.fromJSON(r))))||[]}get domainNetworkNames(){var t;return((t=this.dataElement)==null?void 0:t.domainNetworks.map((r=>r.domainNetworkName)))||[]}get _utilityLayerList(){var r,i;const t=new Set;return(i=(r=this.dataElement)==null?void 0:r.domainNetworks)==null||i.map((s=>{var n,o;(n=s==null?void 0:s.edgeSources)==null||n.map((({layerId:l,sourceId:p})=>{this._layerIdBySourceId.set(p,l),this._sourceIdByLayerId.set(l,p),t.add(l)})),(o=s==null?void 0:s.junctionSources)==null||o.map((({layerId:l,sourceId:p})=>{this._layerIdBySourceId.set(p,l),this._sourceIdByLayerId.set(l,p),t.add(l)}))})),t}get hasTelecomNetwork(){var t;return((t=this.dataElement)==null?void 0:t.domainNetworks.some((r=>r.isTelecomNetwork)))??!1}async load(t){return this.addResolvingPromise(super.load(t)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(t)),this}getTerminalConfiguration(t){var m,v,_,E;let r=null,i=null;const s=t.sourceLayer;let n=null;if((s==null?void 0:s.type)==="feature"){if(n=s.layerId,n===null)return null}else if((s==null?void 0:s.type)!=="subtype-sublayer"||(n=((m=s==null?void 0:s.parent)==null?void 0:m.layerId)??null,n===null))return null;const o=t.attributes;if(o==null)return null;for(const $ of Object.keys(o))$.toUpperCase()==="ASSETGROUP"&&(r=t.getAttribute($)),$.toUpperCase()==="ASSETTYPE"&&(i=t.getAttribute($));if(!this.dataElement)return null;let l=null;const p=this.dataElement.domainNetworks;for(const $ of p){const M=(v=$.junctionSources)==null?void 0:v.find((k=>k.layerId===n));if(M){const k=(_=M.assetGroups)==null?void 0:_.find((N=>N.assetGroupCode===r));if(k){const N=(E=k.assetTypes)==null?void 0:E.find((U=>U.assetTypeCode===i));if(N!=null&&N.isTerminalConfigurationSupported){l=N.terminalConfigurationId;break}}}}if(l!=null){const $=this.dataElement.terminalConfigurations,M=$==null?void 0:$.find((k=>k.terminalConfigurationId===l));return M?Vl.fromJSON(M):null}return null}getTierNames(t){var i,s;const r=(i=this.dataElement)==null?void 0:i.domainNetworks.find((n=>n.domainNetworkName===t));return((s=r==null?void 0:r.tiers)==null?void 0:s.map((n=>n.name)))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}async getCircuitManager(t){var s;if(!this.hasTelecomNetwork)return null;const r=(s=this.dataElement)==null?void 0:s.domainNetworks.find((n=>n.domainNetworkName===t&&n.isTelecomNetwork));if(!r)return null;const{default:i}=await ce(()=>import("./CircuitManager-B7MesJzc.js"),[],import.meta.url);return rh(this._circuitManagerMap,t,(()=>new i({utilityNetwork:this,telecomDomainNetwork:r})))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:t}=await ce(()=>import("./UnitIdentifierManager-BIqu6ZlX.js"),[],import.meta.url);return this._unitIdentifierManager=new t({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(t){if(!this.dataElement||t==null)return null;const r=this._terminalById.get(t);return r??(this.terminalConfigurations.forEach((i=>{i.terminals.forEach((s=>{this._terminalById.set(s.id,s)}))})),this._terminalById.get(t))}isUtilityLayer(t){var r,i;return"layerId"in t?this._utilityLayerList.has(t==null?void 0:t.layerId)&&(((r=t.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1):!(t.type!=="subtype-sublayer"||!t.parent)&&this._utilityLayerList.has(t.parent.layerId)&&(((i=t.parent.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(t,r){const[{queryAssociations:i},{default:s}]=await Promise.all([ce(()=>import("./queryAssociations-C4op-eEs.js"),__vite__mapDeps([284,285]),import.meta.url),ce(()=>import("./QueryAssociationsParameters-DrKkXWPr.js"),[],import.meta.url)]),n=s.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await i(this.networkServiceUrl,n,r)).associations}async synthesizeAssociationGeometries(t){const[{synthesizeAssociationGeometries:r},{default:i}]=await Promise.all([ce(()=>import("./synthesizeAssociationGeometries-X4Go3z1i.js"),__vite__mapDeps([286,285]),import.meta.url),ce(()=>import("./SynthesizeAssociationGeometriesParameters-Baqq76VS.js"),[],import.meta.url)]),s=i.from(t);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,r(this.networkServiceUrl,s)}async trace(t){const[{trace:r},{default:i}]=await Promise.all([ce(()=>import("./trace-UVywwPQN.js"),[],import.meta.url),ce(()=>import("./TraceParameters-D9x6wx1C.js"),[],import.meta.url)]),s=i.from(t);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,r(this.networkServiceUrl,s)}async submitTraceJob(t){const[{submitTraceJob:r},{default:i}]=await Promise.all([ce(()=>import("./trace-UVywwPQN.js"),[],import.meta.url),ce(()=>import("./TraceParameters-D9x6wx1C.js"),[],import.meta.url)]),s=i.from(t);s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment;const n=await r(this.networkServiceUrl,s);return new Qd({statusUrl:n})}async canAddAssociation(t){const r=await this.getRulesTable();if(!r)return!1;const{fromNetworkElement:i,toNetworkElement:s}=t;if(!i||!s)return!1;await r.load();let n=null;switch(t.associationType){case"containment":n=r.rulesCategorized.containment;break;case"attachment":n=r.rulesCategorized.attachment;break;default:n=r.rulesCategorized.connectivity}return n.some((o=>tg(o,i,s)))}generateAddAssociations(t){const{associationsTable:r}=this.networkSystemLayers,{fromNetworkSourceId:i,fromGlobalId:s,fromTerminalId:n,toNetworkSourceId:o,toGlobalId:l,toTerminalId:p,associationType:m,isContentVisible:v,percentAlong:_,globalId:E}=vIe(r);return{addFeatures:t.map(($=>{var M,k,N,U,G,W;return new Sr({attributes:{[i]:(M=$.fromNetworkElement)==null?void 0:M.networkSourceId,[s]:(k=$.fromNetworkElement)==null?void 0:k.globalId,[n]:(N=$.fromNetworkElement)==null?void 0:N.terminalId,[o]:(U=$.toNetworkElement)==null?void 0:U.networkSourceId,[l]:(G=$.toNetworkElement)==null?void 0:G.globalId,[p]:(W=$.toNetworkElement)==null?void 0:W.terminalId,[m]:dIe[$.associationType],[v]:$.isContentVisible==null?void 0:$.isContentVisible?1:0,[_]:$.percentAlong,[E]:$.globalId}})})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(r==null?void 0:r.globalIdField)??"globalid",objectIdField:(r==null?void 0:r.objectIdField)??"objectid"}}}generateDeleteAssociations(t){const{associationsTable:r,associationsTableId:i}=this.networkSystemLayers;return{deleteFeatures:t.map((s=>({globalId:s.globalId}))),id:i,identifierFields:{globalIdField:(r==null?void 0:r.globalIdField)??"globalid",objectIdField:(r==null?void 0:r.objectIdField)??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(t){var s;if(((s=this.sharedNamedTraceConfigurations)==null?void 0:s.length)===0)return;const r=this.sharedNamedTraceConfigurations.map((n=>n.globalId)),i=await this.queryNamedTraceConfigurations({globalIds:r},t);for(const n of this.sharedNamedTraceConfigurations){const o=i==null?void 0:i.find((l=>l.globalId===n.globalId));if(o){const l=o.write({},{origin:"service"});n.read(l,{origin:"service"})}}}async _createRulesTable(){var o;const t=this.networkSystemLayers.rulesTableUrl,r=new Le({url:t});await r.load();const i=(o=this.dataElement)==null?void 0:o.domainNetworks;if(!i)return null;const s=i.flatMap((l=>[...l.edgeSources||[],...l.junctionSources||[]])),n=(await $Ie(r)).map((l=>this._hydrateRuleInfo(r,s,l)));return new Ju({rulesLayer:r,rules:n})}_hydrateRuleInfo(t,r,i){const s=t.fieldsIndex,n=s.get("RULETYPE"),o=s.get("CREATIONDATE"),l=s.get("FROMNETWORKSOURCEID"),p=s.get("FROMASSETGROUP"),m=s.get("FROMASSETTYPE"),v=s.get("FROMTERMINALID"),_=s.get("TONETWORKSOURCEID"),E=s.get("TOASSETGROUP"),$=s.get("TOASSETTYPE"),M=s.get("TOTERMINALID"),k=s.get("VIANETWORKSOURCEID"),N=s.get("VIAASSETGROUP"),U=s.get("VIAASSETTYPE"),G=s.get("VIATERMINALID"),W=i.attributes[n.name],Z=new Date(i.attributes[o.name]),ie=[{networkSourceId:i.attributes[l.name],assetGroupId:i.attributes[p.name],assetTypeId:i.attributes[m.name],terminalId:i.attributes[v.name]},{networkSourceId:i.attributes[_.name],assetGroupId:i.attributes[E.name],assetTypeId:i.attributes[$.name],terminalId:i.attributes[M.name]},{networkSourceId:i.attributes[k.name],assetGroupId:i.attributes[N.name],assetTypeId:i.attributes[U.name],terminalId:i.attributes[G.name]}];let ne;(function(we){we[we.from=0]="from",we[we.to=1]="to",we[we.via=2]="via"})(ne||(ne={}));const ge={ruleType:W,creationDate:Z};for(const we of[ne.from,ne.to,ne.via]){if(W!==Dr.RTEdgeJunctionEdgeConnectivity&&we===ne.via)continue;const xe=ie[we],Ie=r.find((Ot=>Ot.sourceId===xe.networkSourceId)),$e=Ie==null?void 0:Ie.assetGroups.find((Ot=>Ot.assetGroupCode===xe.assetGroupId)),Re=$e==null?void 0:$e.assetTypes.find((Ot=>Ot.assetTypeCode===xe.assetTypeId)),pt=this._getTerminal(Re,xe);let qe="";switch(we){case ne.from:qe="from";break;case ne.to:qe="to";break;case ne.via:qe="via"}ge[`${qe}NetworkSource`]=Ie,ge[`${qe}AssetGroup`]=$e,ge[`${qe}AssetType`]=Re,ge[`${qe}Terminal`]=pt==null?void 0:pt.toJSON()}return ge}_getTerminal(t,r){var n,o;const i=t==null?void 0:t.terminalConfigurationId,s=(n=this.terminalConfigurations)==null?void 0:n.find((l=>l.id===i));return((o=s==null?void 0:s.terminals)==null?void 0:o.find((l=>l.id===r.terminalId)))??null}};async function $Ie(e){const t=new Ve({where:"1=1",outFields:["*"]});return(await rq(e,t)).features}a([A({type:[gIe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],va.prototype,"sharedNamedTraceConfigurations",void 0),a([A({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],va.prototype,"type",void 0),a([A({readOnly:!0})],va.prototype,"serviceTerritoryFeatureLayerId",null),a([A({readOnly:!0})],va.prototype,"networkSystemLayers",null),a([A({readOnly:!0})],va.prototype,"terminalConfigurations",null),a([A({readOnly:!0})],va.prototype,"domainNetworkNames",null),a([A({readOnly:!0})],va.prototype,"hasTelecomNetwork",null),va=a([P("esri.networks.UtilityNetwork")],va);const IZ=va,xIe=Object.freeze(Object.defineProperty({__proto__:null,default:IZ},Symbol.toStringTag,{value:"Module"}));let CA=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.expression=null,this.returnType="string",this.title=null}};a([A({type:String,json:{write:{isRequired:!0}}})],CA.prototype,"expression",void 0),a([A({type:["number","string"],json:{write:!0}})],CA.prototype,"returnType",void 0),a([A({type:String,json:{write:!0}})],CA.prototype,"title",void 0),CA=a([P("esri.webdoc.geotriggersInfo.ExpressionInfo")],CA);const MZ=CA,Nw=new ct({deviceLocation:"device-location"});let rg=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.filterExpression=null,this.type="device-location"}};a([A({type:MZ,json:{write:!0}})],rg.prototype,"filterExpression",void 0),a([A({type:Nw.apiValues,readOnly:!0,json:{type:Nw.jsonValues,read:Nw.read,write:Nw.write}})],rg.prototype,"type",void 0),rg=a([P("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],rg);const IIe=rg;let ig=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.geometry=null,this.where=null}};a([A({types:tm,json:{read:Ya,write:!0}})],ig.prototype,"geometry",void 0),a([A({type:String,json:{write:!0}})],ig.prototype,"where",void 0),ig=a([P("esri.webdoc.geotriggersInfo.FeatureFilter")],ig);const MIe=ig;let kA=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};a([A({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],kA.prototype,"layerId",void 0),a([A({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],kA.prototype,"layerUrl",void 0),a([Ne({featureLayer:"feature-layer"},{readOnly:!0})],kA.prototype,"type",void 0),kA=a([P("esri.webdoc.geotriggersInfo.FeatureLayerSource")],kA);const CIe=kA;let Jd=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};a([A({type:CIe,json:{write:{isRequired:!0}}})],Jd.prototype,"fenceSource",void 0),a([A({type:MIe,json:{write:!0}})],Jd.prototype,"filter",void 0),a([A({type:Number,json:{write:!0}})],Jd.prototype,"bufferDistance",void 0),a([Ne({features:"features"},{readOnly:!0})],Jd.prototype,"type",void 0),Jd=a([P("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Jd);const kIe=Jd;let ob=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.type="fence"}};a([Ne({fence:"fence"},{readOnly:!0})],ob.prototype,"type",void 0),ob=a([P("esri.webdoc.geotriggersInfo.Geotrigger")],ob);const CZ=ob;let sg=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.expressionInfo=null,this.requestedActions=null}};a([A({type:MZ,json:{write:!0}})],sg.prototype,"expressionInfo",void 0),a([A({type:[String],json:{write:!0}})],sg.prototype,"requestedActions",void 0),sg=a([P("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],sg);const RIe=sg,OIe=new ct({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),PIe=new ct({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),Lw=new ct({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Ro=class extends CZ{constructor(t){super(t),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};a([Ne(OIe)],Ro.prototype,"enterExitRule",void 0),a([A({type:IIe,json:{write:{isRequired:!0}}})],Ro.prototype,"feed",void 0),a([Ne(PIe)],Ro.prototype,"feedAccuracyMode",void 0),a([A({type:Lw.apiValues,json:{type:Lw.jsonValues,read:Lw.read,write:{writer:Lw.write,isRequired:!0}}})],Ro.prototype,"fenceNotificationRule",void 0),a([A({type:kIe,json:{write:{isRequired:!0}}})],Ro.prototype,"fenceParameters",void 0),a([A({type:String,json:{write:!0}})],Ro.prototype,"name",void 0),a([A({type:RIe,json:{write:!0}})],Ro.prototype,"notificationOptions",void 0),a([Ne({fence:"fence"},{readOnly:!0})],Ro.prototype,"type",void 0),Ro=a([P("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Ro);const NIe=Ro,LIe={base:CZ,key:"type",typeMap:{fence:NIe}};let ab=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.geotriggers=null}};a([A({types:[LIe],json:{write:{isRequired:!0}}})],ab.prototype,"geotriggers",void 0),ab=a([P("esri.webdoc.GeotriggersInfo")],ab);const DIe=ab;let lb=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.enabled=!0}};a([A({type:Boolean,nonNullable:!0,json:{write:!0}})],lb.prototype,"enabled",void 0),lb=a([P("esri.webdoc.ips.AppleIPSProperties")],lb);const FIe=lb;let ub=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.enabled=!0}};a([A({type:Boolean,nonNullable:!0,json:{write:!0}})],ub.prototype,"enabled",void 0),ub=a([P("esri.webdoc.ips.GNSSProperties")],ub);const jIe=ub;let RA=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.enabled=!0,this.distance=5,this.units="meter"}};a([A({type:Boolean,nonNullable:!0,json:{write:!0}})],RA.prototype,"enabled",void 0),a([A({type:Number,nonNullable:!0,json:{write:!0}})],RA.prototype,"distance",void 0),a([A({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],RA.prototype,"units",void 0),RA=a([P("esri.webdoc.ips.PathSnappingProperties")],RA);const BIe=RA;let cb=class extends Ge.ClonableMixin(ee){constructor(e){super(e),this.enabled=!0}};a([A({type:Boolean,nonNullable:!0,json:{write:!0}})],cb.prototype,"enabled",void 0),cb=a([P("esri.webdoc.ips.SmoothingProperties")],cb);const UIe=cb;let Zd=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};a([A({type:FIe,json:{name:"AppleIPS",write:!0}})],Zd.prototype,"appleIPS",void 0),a([A({type:jIe,json:{name:"GNSS",write:!0}})],Zd.prototype,"gnss",void 0),a([A({type:UIe,json:{write:!0}})],Zd.prototype,"smoothing",void 0),a([A({type:BIe,json:{write:!0}})],Zd.prototype,"pathSnapping",void 0),Zd=a([P("esri.webdoc.ips.Configuration")],Zd);const VIe=Zd;let OA=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.portalItem=null}readPortalItem(t,r,i){const{itemId:s}=r;if(s)return new et({id:s,portal:i==null?void 0:i.portal})}writePortalItem(t,r){t!=null&&t.id&&(r.itemId=t.id)}};a([A({type:et,json:{write:{isRequired:!0}}})],OA.prototype,"portalItem",void 0),a([pe("portalItem",["itemId"])],OA.prototype,"readPortalItem",null),a([ye("portalItem",{itemId:{type:String}})],OA.prototype,"writePortalItem",null),OA=a([P("esri.webdoc.ips.PositioningService")],OA);const zIe=OA;let ng=class extends Ge.ClonableMixin(ee){constructor(t){super(t),this.positioningService=null,this.configuration=null}};a([A({type:zIe,json:{write:{isRequired:!0}}})],ng.prototype,"positioningService",void 0),a([A({type:VIe,json:{write:!0}})],ng.prototype,"configuration",void 0),ng=a([P("esri.webdoc.IPSInfo")],ng);const GIe=ng,qIe={currentVersion:AZ,createInitialViewProperties:()=>new q_,parseVersion:Af.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},HIe=Te.ofType(IZ);var u0;let Yd=(u0=class extends aIe{constructor(t){super(t),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const t=this.utilityNetworks.removeAll();for(const r of t)r.destroy();this.utilityNetworks.destroy()}}get context(){return qIe}loadAll(){return oE(this,(t=>{var r,i;t(this.ground,this.basemap,this.layers,this.tables,(i=(r=this.ipsInfo)==null?void 0:r.positioningService)==null?void 0:i.portalItem)}))}static fromJSON(t){if(t)return new this({resourceInfo:t});throw new Q("webmap:empty-resource","Expected a JSON resource but got nothing")}},u0.VERSION=AZ,u0);a([A({type:DIe,json:{write:!0}})],Yd.prototype,"geotriggersInfo",void 0),a([A({type:GIe,json:{write:!0,name:"mapIPSInfo"}})],Yd.prototype,"ipsInfo",void 0),a([A({json:{write:!0}})],Yd.prototype,"presentation",void 0),a([A({type:HIe,json:{read:!0,write:!0}})],Yd.prototype,"utilityNetworks",void 0),Yd=a([P("esri.WebMap")],Yd);const WIe=Yd;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */function Dw(e){e.el.childElem&&(e.el.childElem.ownedBy=e.el);const t=QIe(e);if(!t){const r=tMe(e);if(!r){RZ(e);return}return o9(r,e,!0),r}return JIe(t,e.el.parent)||(e.el.parent=t,t.localName==="arcgis-expand"?ZIe(t,e):t.localName==="arcgis-placement"?YIe(t,e):o9(t,e,!1)),t}function QIe({el:e}){for(let t=e.parentElement;t;t=(t==null?void 0:t.parentElement)??null){if(n9.has(t.localName))return t;if("ownedBy"in t&&t.ownedBy instanceof HTMLElement&&n9.has(t.ownedBy.localName))return t.ownedBy}}const n9=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function JIe(e,t){if(e!==t)return!1;const r=e.localName;return r==="arcgis-expand"||r==="arcgis-placement"}function wE(e,t,r="arcgisReady"){const i=e;if(i.view)t(i.view);else{let s=function(n){n.target===e&&(wE(e,t,r),e.removeEventListener(r,s))};e.addEventListener(r,s)}}const ZIe=(e,t)=>wE(e,r=>{var i;t.el.childElem&&e.content!=null&&e.content.append(t.el.childElem),e.expandIcon=t.icon||((i=t.widget)==null?void 0:i.icon)||e.expandIcon,t.position=e.position,t.el.view=r}),YIe=(e,t)=>wE(e,r=>{t.el.childElem&&t.el.append(t.el.childElem),t.position=e.position,t.el.view=r}),o9=(e,t,r)=>wE(e,i=>{r?RZ(t):t.el.childElem&&KIe(e,t),t.el.view=i},"arcgisViewReadyChange");function KIe(e,t){var p;const r=t.el.childElem??t.el,i=e==null?void 0:e.childElem,s=[...e.children],n={};for(const m of s){if(m===i)continue;const v=m.position??"manual";n[v]??(n[v]=[]),n[v].push({child:m,position:v,index:s.indexOf(m)})}const o=(p=n[t.position??"manual"])==null?void 0:p.findIndex(({child:m})=>m===t.el),l=e.view.ui;l.remove(r),l.add(r,{position:t.position,index:o})}function XIe(e,t){return t===void 0||(e==null?void 0:e.targetGeometry)!==(t==null?void 0:t.targetGeometry)||(e==null?void 0:e.rotation)!==(t==null?void 0:t.rotation)||(e==null?void 0:e.scale)!==(t==null?void 0:t.scale)}function eMe(e,t){return kZ(t==null?void 0:t.center,e)}function kZ(e,t){if(typeof t=="string")return kZ(e,t.split(",").map(Number));if(!e)return t;if(Array.isArray(t)){const r=t[0],i=t[1],s=t.length>2?t[2]:void 0;if(r!==e.longitude||i!==e.latitude||s!==e.z)return t}else if(t&&!(e!=null&&e.equals(t)))return t}function RZ(e){e.el.childElem&&(e.el.shadowRoot??e.el).append(e.el.childElem)}function tMe(e,t){const r=e.referenceElement;if(typeof r!="string")return r??void 0;const i=r.includes("#")||r.includes(".")||r.includes("["),s=e.el.getRootNode();return(i?void 0:s.querySelector(`#${r}`))??s.querySelector(r)??void 0}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const rMe=ah`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,iMe=oW(WIe),sMe=oW(Mxe),zg=class zg extends Q4{constructor(){super(),this._map=iMe(this),this.view=sMe(this),this.allLayerViews=this.view.allLayerViews,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewChange=A_(),this.arcgisViewClick=Li(()=>this.view,"click"),this.arcgisViewDoubleClick=Li(()=>this.view,"double-click"),this.arcgisViewDrag=Li(()=>this.view,"drag"),this.arcgisViewHold=Li(()=>this.view,"hold"),this.arcgisViewImmediateClick=Li(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=Li(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=Li(()=>this.view,"key-down"),this.arcgisViewKeyUp=Li(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=Li(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=Li(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=Li(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=Li(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=Li(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=Li(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=Li(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=Li(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=Li(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=A_(),this.view.ui={components:["attribution"]}}get center(){return this.view.center}set center(t){const r=eMe(t,this.view);r&&(this.view.center=r)}get extent(){return this.view.extent}set extent(t){var r;t&&!((r=this.extent)!=null&&r.equals(t))&&(this.view.extent=t)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(t){this.map&&(this.map.focusAreas=t)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){var t;return(t=this._map.portalItem)==null?void 0:t.id}set itemId(t){$ve(this._map,this),this._map.portalItem={id:t},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(t){this.view.scale=t}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(t){XIe(this.viewpoint,t)&&(this.view.viewpoint=t)}get zoom(){return this.view.zoom}set zoom(t){this.view.zoom=t}async addLayer(t,r){var i;(i=this.map)==null||i.add(t,r)}async addLayers(t,r){var i;(i=this.map)==null||i.addMany(t,r)}async addTable(t){var r;(r=this.map)==null||r.tables.add(t)}async addTables(t,r){var i;(i=this.map)==null||i.tables.addMany(t,r)}async closePopup(){this.view.closePopup()}async destroy(){await this.manager.destroy()}async goTo(t,r){return await this.view.goTo(t,r)}async hitTest(t,r){return await this.view.hitTest(t,r)}async openPopup(t){await this.view.openPopup(t)}async takeScreenshot(t){return await this.view.takeScreenshot(t)}toMap(t){return this.view.toMap(t)}toScreen(t,r){return this.view.toScreen(t,r)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async whenLayerView(t){return await this.view.whenLayerView(t)}async viewOnReady(t,r){return await this.componentOnReady(),await this.view.whenReady().then(()=>t==null?void 0:t()).catch(r)}load(){const t=this;t.el.childElem=document.createElement("div"),t.el.append(t.el.childElem),this.view.container=t.el.childElem}loaded(){this.map||(this.map=this._map),this.manager.onLifecycle(()=>[Qe(()=>this.map,t=>{t&&(this._map=t)},{initial:!0,sync:!0}),Qe(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),Qe(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}};zg.properties={_map:16,view:32,allLayerViews:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9},zg.shadowRootOptions=yv,zg.styles=rMe;let xk=zg;J4("arcgis-map",xk);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function nMe(e){return e.map(t=>{let r="";for(let i=0;i<t;i++)r+=((1+Math.random())*65536|0).toString(16).substring(1);return r}).join("-")}const oMe=()=>nMe([2,1,1,1,3]),aMe=e=>(...t)=>{const r=GJ(),i=new e(...t),s=i.exports;zJ(r.at(-1));const n=i.component.manager;n.W(i,s),i.watchExports(n.W.bind(n,i)),u$e(i);const o=[i.component,...r].reverse();return qJ(o,l=>l===void 0?void 0:lMe(i,l,s),s)},lMe=(e,{host:t,key:r,isReactive:i},s)=>{var _;const n=t,o=n[r]!==e.exports,l=n[r]!==s,p=s!==e.exports;if(o&&!l&&p&&(n[r]=e.exports),t===e.component){if(i){const E=e.component.manager;l&&E.W(e,n[r]),e.onUpdate($=>{if($.has(r)){const M=n[r];M!==e.exports&&E.W(e,M)}})}e.O=i?void 0:r}const v=(_=e.component.constructor.elementProperties.get(r))==null?void 0:_.readOnly;e.watchExports(()=>{n[r]!==e.exports&&(v?h$e(()=>{n[r]=e.exports}):n[r]=e.exports)})},uMe=(e,t)=>{let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r.parentNode instanceof ShadowRoot?r=r.parentNode.host:r=r.parentNode}return!1},cMe=(e,t,r)=>{const i=dMe(t).subscribe;return i(s=>{s.some(o=>uMe(e,o.target))&&r()})},l$={},dMe=e=>{const t=e.join(","),r=l$[t];if(r!==void 0)return r;const i=new Set,s=new MutationObserver(o=>i.forEach(l=>l(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const n={subscribe:o=>(i.add(o),()=>{i.delete(o),i.size===0&&(s.disconnect(),l$[t]=void 0)})};return l$[t]=n,n},pMe=(e,t)=>{var i,s;let r=e;for(;r;){const n=(i=r.closest)==null?void 0:i.call(r,t);if(n)return n;const o=(s=r.getRootNode)==null?void 0:s.call(r);if(o===globalThis.document)return;r=o.host}},hMe=(e,t,r)=>{const i=pMe(e,`[${t}]`);return(i==null?void 0:i.getAttribute(t))??r},AMe="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),fMe=new Set(AMe),W_="en",mMe={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},yMe=async(e,t,r="")=>{const i=`${t}/${r}`,s=`${i}${e}.json`;return u$[s]??(u$[s]=OZ(e,i)),await u$[s]},u$={},OZ=async(e,t)=>{const r=`${t}${e}.json`;try{const i=await fetch(r);if(i.ok)return await i.json()}catch(i){return console.error(i),{}}return e===W_?{}:await OZ(W_,t)},PZ=e=>{var r;const t=hMe(e,"lang",((r=globalThis.navigator)==null?void 0:r.language)||W_);return{lang:t,t9nLocale:NZ(t)}},NZ=e=>{const[t,r]=e.split("-"),i=t.toLowerCase();let s=i;return r&&(s=`${i}-${r.toUpperCase()}`),s=mMe[s]??s,fMe.has(s)?s:r?NZ(i):W_},gMe=(e,t,r,i)=>{let s;const n=()=>vMe(e,t(),i).then(o=>{((s==null?void 0:s.lang)!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&r(o),s=o}).catch(console.error);return queueMicrotask(n),cMe(e,["lang"],n)},vMe=async(e,t,r=e.localName.split("-").slice(1).join("-"))=>{const{lang:i,t9nLocale:s}=PZ(e),n=`${t}/${r}/t9n`,l=r===null?{}:await yMe(s,n,"messages.");return{lang:i,t9nLocale:s,t9nStrings:l}},wMe=e=>LZ(void 0,e),bMe=e=>t=>LZ(t,e);let _Me=class extends wO{constructor(t,r){super(t);const i=this.exports;try{ZA(this.component);const s=r(this.component,this),n=this.exports!==i;if(l$e(s)){n||this.setProvisionalExports(s);const o=s.then(l=>{this.exports=l,super.catchUpLifecycle()}).catch(l=>{this.P.reject(l),console.error(l)});this.onLoad(async()=>await o)}else(!n||s!==void 0)&&(this.exports=s),queueMicrotask(()=>super.catchUpLifecycle())}catch(s){this.P.reject(s),console.error(s)}}catchUpLifecycle(){}};const LZ=aMe(_Me),SMe=(e,t)=>new EMe(e,t);var c0,d0,kv;class EMe extends wO{constructor(r,i){super();Ue(this,c0);Ue(this,d0);Ue(this,kv);Oe(this,d0,r),Oe(this,kv,i),Oe(this,c0,new MutationObserver(s=>{s.forEach(n=>{r.includes(n.attributeName)&&i.call(this.component,this.component.el.getAttribute(n.attributeName),n.oldValue,n.attributeName)})}))}hostConnected(){Y(this,d0).forEach(r=>{this.component.el.hasAttribute(r)&&Y(this,kv).call(this.component,null,this.component.el.getAttribute(r),r)}),Y(this,c0).observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:Y(this,d0)})}hostDisconnected(){Y(this,c0).disconnect()}}c0=new WeakMap,d0=new WeakMap,kv=new WeakMap;const TMe=e=>(t={})=>wMe((r,i)=>{const s=PZ(r.el),n={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=r;i.onLifecycle(()=>gMe(r.el,()=>e("./assets"),({t9nLocale:p,t9nStrings:m,lang:v})=>{const _={...m,_lang:v,_t9nLocale:p,_loading:!1};i.exports=_;const E=m.componentLabel;typeof E=="string"&&"label"in r&&r.label==null&&(r.label??(r.label=E)),l(o.messageOverrides)},t.name));const l=p=>{const m=i.exports,v=m._original??m,_=DZ(v,p);p&&(_._original=v),i.exports=_};return"messageOverrides"in o&&i.onUpdate(p=>{p.has("messageOverrides")&&l(o.messageOverrides)}),t.blocking?(i.setProvisionalExports(n,!1),i.ready):n}),DZ=(e,t)=>{if(!t)return e;const r={...e};return Object.entries(t).forEach(([i,s])=>{typeof s=="object"?r[i]=DZ(e[i],s):r[i]=s??e[i]}),r};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const TO=TMe(XJ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Bh={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},$Me=ah`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,rS=class rS extends O0{constructor(){super(...arguments),this.messages=TO({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(t){t.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(t.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||t.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(t){return{s:32,m:64,l:96}[t]}getInlineSize(t){return{s:12,m:16,l:24}[t]}updateFormatter(){var t;this.type!=="determinate-value"||((t=this.formatter)==null?void 0:t.resolvedOptions().locale)===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:t,inline:r,label:i,text:s,type:n,value:o}=this,l=t.id||oMe(),p=n!=="indeterminate",m=Math.floor(o);return this.el.ariaLabel=i,this.el.ariaValueMax=p?"100":void 0,this.el.ariaValueMin=p?"0":void 0,this.el.ariaValueNow=p?m.toString():void 0,U$e(this.el,"id",l),this.el.role="progressbar",ri`<div class=${Xs(Bh.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!r&&p&&ri`<div class=${Xs(Bh.percentage)}>${this.formatValue()}</div>`||""}</div>${!r&&s&&ri`<div class=${Xs(Bh.text)}>${s}</div>`||""}`}renderRing(t){const{inline:r,scale:i,value:s}=this,n=r?this.getInlineSize(i):this.getSize(i),l=n*.45;let p;if(t==="progress"){const m=2*l*Math.PI,v=(this.type.startsWith("determinate")?s:24)/100*m,_=m-v;p={"stroke-dasharray":`${v} ${_}`}}return ri`<svg aria-hidden=true class=${Xs({[Bh.ring]:!0,[Bh.trackRing]:t==="track",[Bh.progressRing]:t==="progress"})} style=${B$e(p)} viewBox=${`0 0 ${n} ${n}`}>${dC`<circle cx=${n/2} cy=${n/2} r=${l??xt} />`}</svg>`}};rS.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},rS.styles=$Me;let Q_=rS;mE("calcite-loader",Q_);const $9e=Object.freeze(Object.defineProperty({__proto__:null,Loader:Q_},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var xMe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ik=xMe.join(","),FZ=typeof Element>"u",Sv=FZ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,J_=!FZ&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Z_=function e(t,r){var i;r===void 0&&(r=!0);var s=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"inert"),n=s===""||s==="true",o=n||r&&t&&e(t.parentNode);return o},IMe=function(t){var r,i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return i===""||i==="true"},jZ=function(t,r,i){if(Z_(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Ik));return r&&Sv.call(t,Ik)&&s.unshift(t),s=s.filter(i),s},BZ=function e(t,r,i){for(var s=[],n=Array.from(t);n.length;){var o=n.shift();if(!Z_(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),p=l.length?l:o.children,m=e(p,!0,i);i.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else{var v=Sv.call(o,Ik);v&&i.filter(o)&&(r||!t.includes(o))&&s.push(o);var _=o.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(o),E=!Z_(_,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(o));if(_&&E){var $=e(_===!0?o.children:_.children,!0,i);i.flatten?s.push.apply(s,$):s.push({scopeParent:o,candidates:$})}else n.unshift.apply(n,o.children)}}return s},UZ=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},VZ=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||IMe(t))&&!UZ(t)?0:t.tabIndex},MMe=function(t,r){var i=VZ(t);return i<0&&r&&!UZ(t)?0:i},CMe=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},zZ=function(t){return t.tagName==="INPUT"},kMe=function(t){return zZ(t)&&t.type==="hidden"},RMe=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(i){return i.tagName==="SUMMARY"});return r},OMe=function(t,r){for(var i=0;i<t.length;i++)if(t[i].checked&&t[i].form===r)return t[i]},PMe=function(t){if(!t.name)return!0;var r=t.form||J_(t),i=function(l){return r.querySelectorAll('input[type="radio"][name="'+l+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=i(window.CSS.escape(t.name));else try{s=i(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var n=OMe(s,t.form);return!n||n===t},NMe=function(t){return zZ(t)&&t.type==="radio"},LMe=function(t){return NMe(t)&&!PMe(t)},DMe=function(t){var r,i=t&&J_(t),s=(r=i)===null||r===void 0?void 0:r.host,n=!1;if(i&&i!==t){var o,l,p;for(n=!!((o=s)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(s)||t!=null&&(p=t.ownerDocument)!==null&&p!==void 0&&p.contains(t));!n&&s;){var m,v,_;i=J_(s),s=(m=i)===null||m===void 0?void 0:m.host,n=!!((v=s)!==null&&v!==void 0&&(_=v.ownerDocument)!==null&&_!==void 0&&_.contains(s))}}return n},a9=function(t){var r=t.getBoundingClientRect(),i=r.width,s=r.height;return i===0&&s===0},FMe=function(t,r){var i=r.displayCheck,s=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var n=Sv.call(t,"details>summary:first-of-type"),o=n?t.parentElement:t;if(Sv.call(o,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof s=="function"){for(var l=t;t;){var p=t.parentElement,m=J_(t);if(p&&!p.shadowRoot&&s(p)===!0)return a9(t);t.assignedSlot?t=t.assignedSlot:!p&&m!==t.ownerDocument?t=m.host:t=p}t=l}if(DMe(t))return!t.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return a9(t);return!1},jMe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var i=0;i<r.children.length;i++){var s=r.children.item(i);if(s.tagName==="LEGEND")return Sv.call(r,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}r=r.parentElement}return!1},Mk=function(t,r){return!(r.disabled||Z_(r)||kMe(r)||FMe(r,t)||RMe(r)||jMe(r))},l9=function(t,r){return!(LMe(r)||VZ(r)<0||!Mk(t,r))},BMe=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},UMe=function e(t){var r=[],i=[];return t.forEach(function(s,n){var o=!!s.scopeParent,l=o?s.scopeParent:s,p=MMe(l,o),m=o?e(s.candidates):l;p===0?o?r.push.apply(r,m):r.push(l):i.push({documentOrder:n,tabIndex:p,item:s,isScope:o,content:m})}),i.sort(CMe).reduce(function(s,n){return n.isScope?s.push.apply(s,n.content):s.push(n.content),s},[]).concat(r)},VMe=function(t,r){r=r||{};var i;return r.getShadowRoot?i=BZ([t],r.includeContainer,{filter:l9.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:BMe}):i=jZ(t,r.includeContainer,l9.bind(null,r)),UMe(i)},zMe=function(t,r){r=r||{};var i;return r.getShadowRoot?i=BZ([t],r.includeContainer,{filter:Mk.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):i=jZ(t,r.includeContainer,Mk.bind(null,r)),i};const GZ={getShadowRoot:!0};function GMe(e){const i=dm(e,"[dir]");return i?i.getAttribute("dir"):"ltr"}function bE(e){return e.getRootNode()}function x9e(e){const t=bE(e);return"host"in t?t:null}function qZ(e){return e.host||null}function $O(e,{selector:t,id:r}){if(!e)return null;e.assignedSlot&&(e=e.assignedSlot);const i=bE(e);return(r?"getElementById"in i?i.getElementById(r):null:t?i.querySelector(t):null)||$O(qZ(i),{selector:t,id:r})}function dm(e,t){return e?e.closest(t)||dm(qZ(bE(e)),t):null}function qMe(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function HZ(e,t=!1,r="tabbable",i,s){return e?qMe(e)&&i!==e?e.setFocus(s):(r==="tabbable"?WMe:JMe)(e,t,s):void 0}function HMe(e,t){if(e)return VMe(e,{...GZ,includeContainer:t})[0]??e}function WMe(e,t,r){var i;(i=HMe(e,t))==null||i.focus(r)}function QMe(e,t){if(e)return zMe(e,{...GZ,includeContainer:t})[0]??e}function JMe(e,t,r){var i;(i=QMe(e,t))==null||i.focus(r)}function ZMe(e,t){return e.filter(r=>r.matches(t))}function I9e(e,t,r){if(typeof t=="string"&&t!=="")return t;if(t===""||t===!0)return e[r]}function YMe(e){return(!!e).toString()}function KMe(e){return iCe(e)||tCe(e)}function XMe(e){return rCe(e).filter(t=>t.nodeType===Node.TEXT_NODE).map(t=>t.textContent).join("").trim()}function eCe(e){var t;for(const r of e.childNodes)if(r.nodeType===Node.TEXT_NODE&&((t=r.textContent)==null?void 0:t.trim())!==""||r.nodeType===Node.ELEMENT_NODE)return!0;return!1}function tCe(e){return!!XMe(e)}function rCe(e){return e.currentTarget.assignedNodes({flatten:!0})}function iCe(e){return!!sCe(e).length}function sCe(e,t){return nCe(e.currentTarget,t)}function nCe(e,t){const r=e.assignedElements({flatten:!0});return t?ZMe(r,t):r}function M9e(e){return!!(e.isPrimary&&e.button===0)}function C9e(e){return e.detail===0}const k9e=(e,t,r,i=!0,s=!0,n=!1)=>{const o=e.indexOf(t),l=o===0,p=o===e.length-1;i&&(r=r==="previous"&&l?"last":r==="next"&&p?"first":r);let m;return r==="previous"?m=e[o-1]||e[i?e.length-1:o]:r==="next"?m=e[o+1]||e[i?0:o]:r==="last"?m=e[e.length-1]:m=e[0],HZ(m,s,"tabbable",n?m:void 0),m};function oCe(e,t){if(e.parentNode!==t.parentNode)return!1;const r=Array.from(e.parentNode.children);return r.indexOf(e)<r.indexOf(t)}async function R9e(e,t){return WZ(e,t,"animation")}async function O9e(e,t){return WZ(e,t,"transition")}function u9(e,t,r){const i=t==="transition"?"transitionProperty":"animationName";return e.getAnimations().find(s=>s[i]===r)}async function WZ(e,t,r){let i=u9(e,r,t);if(i||(await aCe(),i=u9(e,r,t)),!!i)try{await i.finished}catch{}}async function aCe(){await new Promise(e=>requestAnimationFrame(()=>e()))}function P9e(e){return e.endsWith("px")?parseFloat(e):e.endsWith("vw")?c9(parseFloat(e),window.innerWidth):e.endsWith("vh")?c9(parseFloat(e),window.innerHeight):0}function c9(e,t){return e*t/100}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Y_(e,t,r){const i=lCe(e);return new i(t,r)}function lCe(e){class t extends window.MutationObserver{constructor(i){super(i),this.observedEntry=[],this.callback=i}observe(i,s){return this.observedEntry.push({target:i,options:s}),super.observe(i,s)}unobserve(i){const s=this.observedEntry.filter(n=>n.target!==i);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),s.forEach(n=>this.observe(n.target,n.options))}}return(function(){return e==="intersection"?window.IntersectionObserver:e==="mutation"?t:window.ResizeObserver})()}function uCe(e,t,r,i){if(e&&(t&&e.unobserve(t),!!r)){if(e instanceof MutationObserver){e.observe(r,i);return}e.observe(r)}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const d9=new Set,p9={trace:0,debug:1,info:2,warn:4,error:8,off:10};function cCe(e){return p9[e]>=p9[q$e]}function PA(e,...t){if(!cCe(e))return;console[e].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...t)}let c$;const dCe={debug:e=>PA("debug",e),info:e=>PA("info",e),warn:e=>PA("warn",e),error:e=>PA("error",e),trace:e=>PA("trace",e),deprecated:pCe};function pCe(e,{component:t,name:r,suggested:i,removalVersion:s}){const n=`${e}:${e==="component"?"":t}${r}`;if(d9.has(n))return;d9.add(n);const o=Array.isArray(i);o&&!c$&&(c$=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const l=`[${r}] ${e} is deprecated and will be removed in ${s==="future"?"a future version":`v${s}`}.${i?` Use ${o?c$.format(i.map(p=>`"${p}"`)):`"${i}"`} instead.`:""}`;PA("warn",l)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const h9={flipRtl:"flip-rtl",svg:"svg"},QZ={},d$={},JZ={s:16,m:24,l:32};function ZZ({icon:e,scale:t}){const r=JZ[t],i=fCe(e),s=i.charAt(i.length-1)==="F";return`${s?i.substring(0,i.length-1):i}${r}${s?"F":""}`}async function hCe(e){const t=ZZ(e),r=YZ(t);if(r)return r;d$[t]||(d$[t]=fetch(XJ(`./assets/icon/${t}.json`)).then(s=>s.json()).catch(()=>(dCe.error(`${e.icon} (${e.scale}) icon failed to load`),"")));const i=await d$[t];return QZ[t]=i,i}function ACe(e){return YZ(ZZ(e))}function YZ(e){return QZ[e]}function fCe(e){const t=!isNaN(Number(e.charAt(0))),r=e.split("-");if(r.length>0){const s=/[a-z]/i;e=r.map((n,o)=>n.replace(s,function(p,m){return o===0&&m===0?p:p.toUpperCase()})).join("")}return t?`i${e}`:e}const mCe=ah`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,iS=class iS extends O0{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(t){(t.has("icon")&&(this.hasUpdated||this.icon!==null)||t.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this.intersectionObserver)==null||t.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:t,scale:r,visible:i}=this;if(!t||!i)return;const s={icon:t,scale:r},n=ACe(s)||await hCe(s);t===this.icon&&(this.pathData=n)}waitUntilVisible(t){if(this.intersectionObserver=Y_("intersection",r=>{r.forEach(i=>{i.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,t())})},{rootMargin:"50px"}),!this.intersectionObserver){t();return}this.intersectionObserver.observe(this.el)}render(){const{el:t,flipRtl:r,pathData:i,scale:s,textLabel:n}=this,o=GMe(t),l=JZ[s],p=!!n,m=[].concat(i||"");return this.el.ariaHidden=YMe(!p),this.el.ariaLabel=p?n:null,this.el.role=p?"img":null,ri`<svg aria-hidden=true class=${Xs({[h9.flipRtl]:o==="rtl"&&r,[h9.svg]:!0})} fill=currentColor height=100% viewBox=${`0 0 ${l} ${l}`} width=100% xmlns=http://www.w3.org/2000/svg>${m.map(v=>typeof v=="string"?dC`<path d=${v??xt} />`:dC`<path d=${v.d??xt} opacity=${("opacity"in v?v.opacity:1)??xt} />`)}</svg>`}};iS.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},iS.styles=mCe;let K_=iS;mE("calcite-icon",K_);const yCe=Object.freeze(Object.defineProperty({__proto__:null,Icon:K_},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xO=Symbol.for(""),gCe=e=>{if((e==null?void 0:e.r)===xO)return e==null?void 0:e._$litStatic$},N9e=e=>({_$litStatic$:e,r:xO}),A9=(e,...t)=>({_$litStatic$:t.reduce((r,i,s)=>r+(n=>{if(n._$litStatic$!==void 0)return n._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${n}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(i)+e[s+1],e[0]),r:xO}),f9=new Map,vCe=e=>(t,...r)=>{const i=r.length;let s,n;const o=[],l=[];let p,m=0,v=!1;for(;m<i;){for(p=t[m];m<i&&(n=r[m],(s=gCe(n))!==void 0);)p+=s+t[++m],v=!0;m!==i&&l.push(n),o.push(p),m++}if(m===i&&o.push(t[i]),v){const _=o.join("$$lit$$");(t=f9.get(_))===void 0&&(o.raw=o,f9.set(_,t=o)),r=l}return e(t,...r)},wCe=vCe(ri);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const bCe=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function _Ce(e){return`${e.split("-").map((i,s)=>s===0?i:`${i[0].toUpperCase()}${i.slice(1)}`).join("")}${bCe.includes(e)?"Input":"Change"}`}const Ck="hidden-form-input";function IO(e){return"checked"in e}const kk=new WeakMap,MO=new WeakSet;function SCe(e,t){if(dm(t.parentElement,"[form]"))return!0;const i="calciteInternalFormComponentRegister";let s=!1;return e.addEventListener(i,n=>{s=n.composedPath().some(o=>MO.has(o)),n.stopPropagation()},{once:!0}),t.dispatchEvent(new CustomEvent(i,{bubbles:!0,composed:!0})),s}function ECe(e,{status:t,message:r,icon:i}){"status"in e&&(e.status=t),"validationIcon"in e&&typeof e.validationIcon!="string"&&(e.validationIcon=i),"validationMessage"in e&&!e.validationMessage&&(e.validationMessage=r)}function KZ(e){return e.nodeName==="CALCITE-RADIO-BUTTON"?dm(e,"calcite-radio-button-group"):e}const TCe=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function m9(e){var l;const t=e==null?void 0:e.target,r=t==null?void 0:t.validationMessage,i=KZ(t==null?void 0:t.parentElement);if(!i)return;const s=(l=i==null?void 0:i.nodeName)==null?void 0:l.toLowerCase(),n=s==null?void 0:s.split("-");if(n.length<2||n[0]!=="calcite")return;e==null||e.preventDefault(),"validity"in i&&(i.validity=t==null?void 0:t.validity),i.dispatchEvent(TCe),ECe(i,{message:r,icon:!0,status:"invalid"});const o=_Ce(s);i.addEventListener(o,()=>{"status"in i&&(i.status="idle"),"validationIcon"in i&&(i.validationIcon===""||i.validationIcon===!0)&&(i.validationIcon=!1),"validationMessage"in i&&i.validationMessage===r&&(i.validationMessage=""),"validity"in i&&(i.validity=t==null?void 0:t.validity)},{once:!0})}function $Ce(e){const{formEl:t}=e;return t?(t.addEventListener("invalid",m9,!0),t.requestSubmit(),t.removeEventListener("invalid",m9,!0),requestAnimationFrame(()=>{const r=t.querySelectorAll("[status=invalid]");for(const i of r)if(i!=null&&i.validationMessage){i==null||i.setFocus();break}}),!0):!1}function xCe(e){var t;(t=e.formEl)==null||t.reset()}function L9e(e){const{el:t,value:r}=e,i=XZ(e);if(!i||SCe(i,t))return;e.formEl=i,e.defaultValue=r,IO(e)&&(e.defaultChecked=e.checked);const s=ICe.bind(e);i.addEventListener("reset",s),kk.set(e.el,s),MO.add(t)}function XZ(e){const{el:t,form:r}=e;return r?$O(t,{id:r}):dm(t,"form")}function ICe(){var e;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),IO(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(e=this.onFormReset)==null||e.call(this)}function D9e(e){const{el:t,formEl:r}=e;if(!r)return;const i=kk.get(t);r.removeEventListener("reset",i),kk.delete(t),e.formEl=null,MO.delete(t)}const MCe="calciteInternalHiddenInputInput",eY=e=>{e.target.dispatchEvent(new CustomEvent(MCe,{bubbles:!0}))},y9=e=>e.removeEventListener("input",eY);function CCe(e){const{el:t,formEl:r,name:i,value:s}=e,{ownerDocument:n}=t,o=t.querySelectorAll(`input[slot="${Ck}"]`);if(!r||!i){o.forEach(_=>{y9(_),_.remove()});return}const l=Array.isArray(s)?s:[s],p=[],m=new Set;o.forEach(_=>{const E=l.find($=>$==_.value);E!=null?(m.add(E),g9(e,_,E)):p.push(_)});let v;l.forEach(_=>{if(m.has(_))return;let E=p.pop();E||(E=n.createElement("input"),E.ariaHidden="true",E.slot=Ck),v||(v=n.createDocumentFragment()),v.append(E),E.addEventListener("input",eY),g9(e,E,_)}),v&&t.append(v),p.forEach(_=>{y9(_),_.remove()})}function g9(e,t,r){var m;const{defaultValue:i,disabled:s,form:n,name:o,required:l}=e;t.defaultValue=i,t.disabled=s,t.name=o,t.required=l,t.tabIndex=-1,n?t.setAttribute("form",n):t.removeAttribute("form"),IO(e)?(t.checked=e.checked,t.defaultChecked=e.defaultChecked,t.value=e.checked?r||"on":""):t.value=r||"",(m=e.syncHiddenFormInput)==null||m.call(e,t);const p=KZ(e.el);if(p&&"validity"in p)for(const v in{...t==null?void 0:t.validity})p.validity[v]=t.validity[v]}const F9e=({component:e})=>(CCe(e),ri`<slot name=${Ck}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function kCe(){const{disabled:e}=this;e||HTMLElement.prototype.click.call(this)}function tY(e){e.target.disabled&&e.preventDefault()}const rY=["mousedown","mouseup","click"];function iY(e){e.target.disabled&&(e.stopImmediatePropagation(),e.preventDefault())}const X_={capture:!0};function RCe(e){if(e.disabled){e.el.setAttribute("aria-disabled","true"),e.el.contains(document.activeElement)&&document.activeElement.blur(),OCe(e);return}NCe(e),e.el.removeAttribute("aria-disabled")}function OCe(e){e.el.click=kCe,PCe(e.el)}function PCe(e){e.addEventListener("pointerdown",tY,X_),rY.forEach(t=>e.addEventListener(t,iY,X_))}function NCe(e){delete e.el.click,LCe(e.el)}function LCe(e){e.removeEventListener("pointerdown",tY,X_),rY.forEach(t=>e.removeEventListener(t,iY,X_))}const DCe={container:"interaction-container"},FCe=({children:e,disabled:t})=>ri`<div class=${Xs(DCe.container)} .inert=${t}>${e}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const sY="calciteInternalLabelClick",CO="calciteInternalLabelConnected",Rk="calciteInternalLabelDisconnected",v9="calcite-label",P0=new WeakMap,Ug=new WeakMap,Ev=new WeakMap,eS=new WeakMap,Cp=new Set,jCe=e=>{const{id:t}=e,r=t&&$O(e,{selector:`${v9}[for="${t}"]`});if(r)return r;const i=dm(e,v9);return!i||BCe(i,e)?null:i};function BCe(e,t){let r;const i="custom-element-ancestor-check",s=o=>{o.stopImmediatePropagation();const l=o.composedPath();r=l.slice(l.indexOf(t),l.indexOf(e))};return e.addEventListener(i,s,{once:!0}),t.dispatchEvent(new CustomEvent(i,{composed:!0,bubbles:!0})),e.removeEventListener(i,s),r.filter(o=>o!==t&&o!==e).filter(o=>{var l;return(l=o.tagName)==null?void 0:l.includes("-")}).length>0}function kO(e){if(!e)return;const t=jCe(e.el);if(Ug.has(t)&&t===e.labelEl||!t&&Cp.has(e))return;const r=GCe.bind(e);if(t){e.labelEl=t;const i=P0.get(t)||[];i.push(e),P0.set(t,i.sort(nY)),Ug.has(e.labelEl)||(Ug.set(e.labelEl,w9),e.labelEl.addEventListener(sY,w9)),Cp.delete(e),document.removeEventListener(CO,Ev.get(e)),eS.set(e,r),document.addEventListener(Rk,r)}else Cp.has(e)||(r(),document.removeEventListener(Rk,eS.get(e)))}function UCe(e){if(!e||(Cp.delete(e),document.removeEventListener(CO,Ev.get(e)),document.removeEventListener(Rk,eS.get(e)),Ev.delete(e),eS.delete(e),!e.labelEl))return;const t=P0.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(sY,Ug.get(e.labelEl)),Ug.delete(e.labelEl)),P0.set(e.labelEl,t.filter(r=>r!==e).sort(nY)),e.labelEl=null}function nY(e,t){return oCe(e.el,t.el)?-1:1}function VCe(e){var t,r;return e.label||((r=(t=e.labelEl)==null?void 0:t.textContent)==null?void 0:r.trim())||""}function w9(e){const t=e.detail.sourceEvent.target,r=P0.get(this),i=r.find(o=>o.el===t);if(r.includes(i))return;const n=r[0];n.disabled||n.onLabelClick(e)}function zCe(){Cp.has(this)&&kO(this)}function GCe(){Cp.add(this);const e=Ev.get(this)||zCe.bind(this);Ev.set(this,e),document.addEventListener(CO,e)}async function j9e(e){var i;if(await e.componentOnReady(),P0.has(e))return;const r=(i=e.ownerDocument)==null?void 0:i.getElementById(e.for);r&&requestAnimationFrame(()=>{for(const s of Cp)if(s.el===r){kO(s);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function b9(e){return e==="l"?"m":"s"}async function qCe(e){await e.componentOnReady(),await e.updateComplete}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const HCe=()=>bMe((e,t)=>{let r;function i(){r==null||r.abort()}return t.onLoad(()=>{e.listen("focus",()=>{r=new AbortController,e.el.addEventListener("focusout",i,{signal:r.signal})})}),t.onDisconnected(()=>{e.el.removeEventListener("focusout",i)}),async(s,n)=>{if(e.disabled)return;const o=QCe(s());if(!o)return;const{target:l,includeContainer:p,strategy:m}=o,v=bE(e.el),_=v.activeElement;if(await qCe(e),!(_!==v.activeElement||r&&!(r!=null&&r.signal.aborted)))return e.el.removeEventListener("focus",i),HZ(l,p,m,e.el,n)}});function WCe(e){return"target"in e&&("includeContainer"in e||"strategy"in e)}function QCe(e){if(e)return WCe(e)?e:{target:e}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const cn={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},JCe=ah`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;box-shadow:var(--calcite-button-shadow, var(--calcite-shadow-none));background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}.icon--start,.icon--end{color:var(--calcite-button-icon-color, var(--calcite-icon-color, var(--calcite-ui-icon-color)))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,sS=class sS extends O0{constructor(){super(...arguments),this.attributeWatch=SMe(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentRef=ZJ(),this.mutationObserver=Y_("mutation",()=>this.updateHasContent()),this.resizeObserver=Y_("resize",()=>this.setTooltipText()),this.focusSetter=HCe()(this),this.messages=TO(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(t){return this.focusSetter(()=>this.childEl,t)}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),kO(this),this.formEl=XZ(this)}async load(){this.updateHasContent()}updated(){RCe(this)}loaded(){this.setTooltipText()}disconnectedCallback(){var t,r;super.disconnectedCallback(),(t=this.mutationObserver)==null||t.disconnect(),UCe(this),(r=this.resizeObserver)==null||r.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=eCe(this.el)}setupTextContentObserver(){var t;(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:t}=this;this.href||(t==="submit"?$Ce(this):t==="reset"&&xCe(this))}setTooltipText(){const{contentRef:{value:t}}=this;t&&(this.tooltipText=t.offsetWidth<t.scrollWidth&&this.el.innerText||null)}setChildEl(t){uCe(this.resizeObserver,this.childEl,t),this.childEl=t}render(){const t=this.href?"a":"button",r=this.href?A9`a`:A9`button`,i=this.loading?ri`<div class=${Xs(cn.buttonLoader)}><calcite-loader class=${Xs(this.loading?cn.loadingIn:cn.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,s=!this.iconStart&&!this.iconEnd,n=ri`<calcite-icon class=${Xs({[cn.icon]:!0,[cn.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${b9(this.scale)}></calcite-icon>`,o=ri`<calcite-icon class=${Xs({[cn.icon]:!0,[cn.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${b9(this.scale)}></calcite-icon>`,l=ri`<span class=${Xs(cn.content)} ${uk(this.contentRef)}><slot></slot></span>`;return FCe({disabled:this.disabled,children:wCe`<${r} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:VCe(this)} aria-live=polite class=${Xs({[cn.buttonPadding]:s,[cn.buttonPaddingShrunk]:!s,[cn.contentSlotted]:this.hasContent,[cn.iconStartEmpty]:!this.iconStart,[cn.iconEndEmpty]:!this.iconEnd})} .disabled=${t==="button"?this.disabled:null} download=${(t==="a"?this.download===!0||this.download===""?"":this.download||null:null)??xt} href=${(t==="a"&&this.href)??xt} name=${(t==="button"&&this.name)??xt} @click=${this.handleClick} rel=${(t==="a"&&this.rel)??xt} tabindex=${(this.disabled?-1:null)??xt} target=${(t==="a"&&this.target)??xt} title=${this.tooltipText??xt} type=${(t==="button"?this.type:null)??xt} ${uk(this.setChildEl)}>${i}${this.iconStart?n:null}${this.hasContent?l:null}${this.iconEnd?o:null}</${r}>`})}};sS.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:V$e},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},sS.styles=JCe;let tS=sS;mE("calcite-button",tS);const RO=Object.freeze(Object.defineProperty({__proto__:null,Button:tS},Symbol.toStringTag,{value:"Module"})),ZCe=e=>KCe(void 0,e);class YCe extends ZH{constructor(t,r){super(t);const i=this.exports;try{HA(this.component);const s=r(this.component,this),n=this.exports!==i;if(Wge(s)){n||this.setProvisionalExports(s);const o=s.then(l=>{this.exports=l,super.catchUpLifecycle()}).catch(l=>{this.P.reject(l),console.error(l)});this.onLoad(async()=>await o)}else(!n||s!==void 0)&&(this.exports=s),queueMicrotask(()=>super.catchUpLifecycle())}catch(s){this.P.reject(s),console.error(s)}}catchUpLifecycle(){}}const KCe=iE(YCe),XCe=e=>(t={})=>ZCe((r,i)=>{const s=LH(r.el),n={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=r;i.onLifecycle(()=>_ge(r.el,()=>e("./assets"),({t9nLocale:p,t9nStrings:m,lang:v})=>{const _={...m,_lang:v,_t9nLocale:p,_loading:!1};i.exports=_;const E=m.componentLabel;typeof E=="string"&&"label"in r&&r.label==null&&(r.label??(r.label=E)),l(o.messageOverrides)},t.name));const l=p=>{const m=i.exports,v=m._original??m,_=oY(v,p);p&&(_._original=v),i.exports=_};return"messageOverrides"in o&&i.onUpdate(p=>{p.has("messageOverrides")&&l(o.messageOverrides)}),t.blocking?(i.setProvisionalExports(n,!1),i.ready):n}),oY=(e,t)=>{if(!t)return e;const r={...e};return Object.entries(t).forEach(([i,s])=>{typeof s=="object"?r[i]=oY(e[i],s):r[i]=s??e[i]}),r},aY=e=>tke,eke="arcgisPropertyChange",tke=(...e)=>{const t=lm(),r=z4(eke,void 0,t);let i=!0;return t.manager.onUpdated(s=>{if(i||!t.el.isConnected){i=!1;return}for(const n of e)s.has(n)&&r.emit({name:n})}),r};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const lY=XCe(wve);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const rke=e=>ike(e);var yc,Rv,p0,Ov,Ok,B9;let uY=(B9=class extends G4{constructor(r){super(r);Ue(this,Ov);Ue(this,yc,yve(void 0));Ue(this,Rv);Ue(this,p0,!1);const{el:i}=r,s=i.view;this.setProvisionalExports(void 0),Object.defineProperty(i,"view",{get:()=>Y(this,yc).value,set:n=>{if(this.exports===n)return;const o=i.view;Y(this,yc).value=n,this.exports=n,this.component.requestUpdate("view",o),Pi(this,Ov,Ok).call(this)},configurable:!0,enumerable:!0}),r!==i&&Object.defineProperty(r,"view",{get:()=>i.view,set:n=>{i.view=n}}),queueMicrotask(()=>s?i.view=s:0)}hostConnected(){this.component.manager.hasDestroy&&(Y(this,Rv)??Oe(this,Rv,ks(()=>{var r;return(r=Y(this,yc).value)==null?void 0:r.destroyed},()=>{var r,i;return void((i=(r=this.component).destroy)==null?void 0:i.call(r).catch(console.error))},{sync:!0})),this.onDestroy(()=>{var r;return(r=Y(this,Rv))==null?void 0:r.remove()})),this.component.manager.loadedCalled&&Dw(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){var s;const{el:r}=this.component,i=((s=r.shadowRoot)==null?void 0:s.firstElementChild)??r.firstElementChild??void 0;r.childElem??(r.childElem=i),Oe(this,p0,!0),Pi(this,Ov,Ok).call(this),r.isConnected&&Dw(this.component)}hostDisconnected(){var r,i;typeof this.component.el.childElem=="object"&&((i=(r=Y(this,yc).value)==null?void 0:r.ui)==null||i.remove(this.component.el.childElem))}hostUpdate(r){r.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&Dw(this.component),r.has("referenceElement")&&Dw(this.component)}},yc=new WeakMap,Rv=new WeakMap,p0=new WeakMap,Ov=new WeakSet,Ok=function(){!Y(this,p0)||Y(this,yc).value==null||(Oe(this,p0,!1),this.component.arcgisReady.emit())},B9);const ike=iE(uY);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const Uh={base:"arcgis-zoom",horizontalLayout:"arcgis-zoom--horizontal",button:"esri-widget--button",zoomIn:"arcgis-zoom__zoom-in",zoomOut:"arcgis-zoom__zoom-out"};function ske(e){var i;if(e.type==="3d")return!!e.ready;if(!(e!=null&&e.ready))return!1;const t=cY(e),r=(i=e.constraints)==null?void 0:i.effectiveMaxScale;return r===0||t>r}function nke(e){var i;if(e.type==="3d")return!!e.ready;if(!(e!=null&&e.ready))return!1;const t=cY(e),r=(i=e.constraints)==null?void 0:i.effectiveMinScale;return r===0||t<r}function cY(e){var r;const t=(r=e==null?void 0:e.animation)==null?void 0:r.target;return(t&&"then"in t||t==null?void 0:t.scale)??(e==null?void 0:e.scale)??0}const oke=ah`@layer{arcgis-zoom,.arcgis-zoom{display:flex;flex-flow:column nowrap;box-shadow:0 1px 2px #0000004d}.arcgis-zoom__zoom-out{border-block-start:solid 1px var(--calcite-color-border-1)}.arcgis-zoom--horizontal{flex-flow:row-reverse nowrap}.arcgis-zoom--horizontal .arcgis-zoom__zoom-out{border-block-start:none;border-inline-end:solid 1px var(--calcite-color-border-1)}}`,Gg=class Gg extends Q4{constructor(){super(...arguments),this.messages=lY({}),this.view=rke(this),this.canZoomIn=!1,this.canZoomOut=!1,this.autoDestroyDisabled=!1,this.icon="magnifying-glass-plus",this.layout="vertical",this.position="top-left",this.state="disabled",this.arcgisPropertyChange=aY()("state"),this.arcgisReady=A_()}async destroy(){await this.manager.destroy()}async zoomIn(){const{view:t}=this;!this.canZoomIn||!t||(t.type==="2d"?t.mapViewNavigation.zoomIn():Wg(t.goTo({zoomFactor:2})))}async zoomOut(){const{view:t}=this;!this.canZoomOut||!t||(t.type==="2d"?t.mapViewNavigation.zoomOut():Wg(t.goTo({zoomFactor:.5})))}loaded(){this.manager.onLifecycle(()=>[ks(()=>{var t;return(t=this.view)==null?void 0:t.stationary},()=>{this.canZoomIn=ske(this.view),this.canZoomOut=nke(this.view)},{initial:!0}),ks(()=>{var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"},t=>{this.state=t},{sync:!0,initial:!0})])}render(){const t={[Uh.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this,{zoomIn:s,zoomOut:n}=this.messages;return ri`<div class=${Wn(dp(Uh.base,t))}><calcite-button class=${Wn(dp(Uh.button,Uh.zoomIn))} .disabled=${!r} icon-start=plus kind=neutral .label=${s} @click=${this.zoomIn} title=${s??QA}></calcite-button><calcite-button class=${Wn(dp(Uh.button,Uh.zoomOut))} .disabled=${!i} icon-start=minus kind=neutral .label=${n} @click=${this.zoomOut} title=${n??QA}></calcite-button></div>`}};Gg.properties={canZoomIn:16,canZoomOut:16,autoDestroyDisabled:5,icon:1,label:1,layout:3,messageOverrides:0,position:1,referenceElement:1,state:3},Gg.shadowRootOptions=yv,Gg.styles=oke;let Pk=Gg;J4("arcgis-zoom",Pk);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const _9={scrim:"scrim",content:"content"},S9={s:72,l:480},ake=ah`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity: 0}to{--tw-text-opacity: 1}}.scrim{position:absolute;inset:0;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,nS=class nS extends O0{constructor(){super(...arguments),this.loaderRef=ZJ(),this.resizeObserver=Y_("resize",()=>this.handleResize()),this.messages=TO(),this.hasContent=!1,this.loading=!1}connectedCallback(){var t;super.connectedCallback(),(t=this.resizeObserver)==null||t.observe(this.el)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this.resizeObserver)==null||t.disconnect()}handleDefaultSlotChange(t){this.hasContent=KMe(t)}getScale(t){return t<S9.s?"s":t>=S9.l?"l":"m"}handleResize(){const{el:t}=this;this.loaderScale=this.getScale(Math.min(t.clientHeight,t.clientWidth)??0)}render(){const{hasContent:t,loading:r,loaderScale:i,messages:s}=this;return ri`<div class=${Xs(_9.scrim)}>${r&&i?ri`<calcite-loader .label=${s.loading} .scale=${i} ${uk(this.loaderRef)}></calcite-loader>`:null}<div class=${Xs(_9.content)} .hidden=${!t}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div>`}};nS.properties={hasContent:[16,{},{state:!0}],loaderScale:[16,{},{state:!0}],loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}]},nS.styles=ake;let Nk=nS;mE("calcite-scrim",Nk);function lke(e){return FW(e)}let Hn=class extends je{constructor(e){super(e),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=H2("hybrid",this._basemapCache),this.view=null}initialize(){Qe((()=>this.nextBasemap),(e=>{e&&!e.loaded&&e.load().catch((()=>{}))}),Vi)}destroy(){this.view=null,jW(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return Nwe(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:e}=this;return!e||!("spatialReferenceLocked"in e)||e.spatialReferenceLocked}get activeBasemap(){var e,t;return H2(((t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap)??"topo-vector",this._basemapCache)}castNextBasemap(e){return H2(e,this._basemapCache)}get state(){const{view:e}=this;if(!(e!=null&&e.ready)||this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:t}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&t!=null&&!e.spatialReference.equals(t)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:e,nextBasemap:t,state:r,view:i}=this;if(!i||r==="disabled"||r==="incompatible-next-basemap")return;const s=this._viewSpatialReferenceLocked;if(!s){if(await Qv((()=>!this._nextBasemapSpatialReferenceTask.updating)),t!==this.nextBasemap||e!==this.activeBasemap)return;const{spatialReference:n}=this._nextBasemapSpatialReferenceTask;if(n==null||Jr(i.spatialReference,n)||Au()||co(i.spatialReference,n)||(this._loadingProjectionEngine=!0,await cu(),this._loadingProjectionEngine=!1),t!==this.nextBasemap||e!==this.activeBasemap)return}i.map.basemap=t,s||this._nextBasemapSpatialReferenceTask.spatialReference==null||Jr(i.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(i.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=e}static getThumbnailUrl(e){return FW(e)}};a([A()],Hn.prototype,"_loadingProjectionEngine",void 0),a([A({readOnly:!0})],Hn.prototype,"_nextBasemapSpatialReferenceTask",null),a([A({readOnly:!0})],Hn.prototype,"_viewSpatialReferenceLocked",null),a([A({readOnly:!0})],Hn.prototype,"activeBasemap",null),a([A()],Hn.prototype,"nextBasemap",void 0),a([Ft("nextBasemap")],Hn.prototype,"castNextBasemap",null),a([A({readOnly:!0})],Hn.prototype,"state",null),a([A()],Hn.prototype,"view",void 0),a([A()],Hn.prototype,"toggle",null),Hn=a([P("esri.widgets.BasemapToggle.BasemapToggleViewModel")],Hn);const uke=Hn;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const cke=(e,t)=>r=>pke(r,e);var Pv;class dke extends aW{constructor(r,i){super(r,i);Ue(this,Pv);new uY(this.component)}hostLoad(){Oe(this,Pv,Qe(()=>this.component.el.view,r=>{this.instance.view=r,this.instance.map=r==null?void 0:r.map},{sync:!0,initial:!0}))}hostDestroy(){var r;(r=Y(this,Pv))==null||r.remove(),super.hostDestroy()}}Pv=new WeakMap;const pke=iE(dke);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const E9={loaderAnimation:"esri-widget__loader-animation",widget:"esri-widget esri-component"};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.24 */const hke=ah`@layer{arcgis-basemap-toggle{display:block}.esri-basemap-toggle__title-wrap{text-wrap:wrap}}`,Ou="esri-basemap-toggle",ty="esri-basemap-thumbnail",So={base:Ou,secondaryBasemapImage:`${Ou}__image--secondary`,container:`${ty} ${Ou}__container`,image:`${ty}__image ${Ou}__image`,imageLoading:`${Ou}__image--loading`,overlay:`${ty}__overlay ${Ou}__image-overlay`,title:`${ty}__title ${Ou}__title`,titleWrap:`${Ou}__title-wrap`,overlayScrim:`${ty}__overlay-scrim`},Ake=cke(uke),qg=class qg extends Q4{constructor(){super(...arguments),this.messages=lY(),this.viewModel=Ake(this),this.activeBasemap=this.viewModel.activeBasemap,this.autoDestroyDisabled=!1,this.icon="layer-basemap",this.nextBasemap=this.viewModel.nextBasemap,this.position="top-left",this.showTitle=!1,this.state=this.viewModel.state,this.arcgisPropertyChange=aY()("activeBasemap","nextBasemap","state"),this.arcgisReady=A_()}async destroy(){await this.manager.destroy()}async toggle(){return await this.viewModel.toggle()}_getThumbnailStyles(t){const r=lke(t);return r?{backgroundImage:`url(${r})`}:{backgroundImage:""}}render(){const t=this.viewModel,r=t.state==="disabled"?null:t.activeBasemap,i=t.state==="disabled"?null:t.nextBasemap,s=t.state==="loading",n=t.state==="incompatible-next-basemap",o=(i==null?void 0:i.title)??"",l=i&&i.loadStatus!=="loaded";let p;const m=this.showTitle&&o,v=n,_=m||v,E=this._getThumbnailStyles(r),$=this._getThumbnailStyles(i);return _&&(p=ri`<div class=${Wn(So.overlay)}>${m?ri`<span class=${Wn(dp(So.title,So.titleWrap))} title=${o??QA}>${o}</span>`:null}${v?ri`<calcite-scrim class=${Wn(So.overlayScrim)} title=${this.messages.incompatibleSpatialReference??QA}><calcite-icon icon=exclamation-mark-triangle></calcite-icon></calcite-scrim>`:null}</div>`),ri`<div class=${Wn(dp(So.base,E9.widget))}><calcite-button appearance=transparent data-basemap-id=${(i?i.id:"")??QA} .disabled=${n} kind=neutral .label=${this.label??void 0} @click=${()=>void this.toggle()} title=${this.label??void 0??QA}><div class=${Wn(dp(So.container,So.secondaryBasemapImage))}><div class=${Wn(So.image)} style=${cD(E)}></div></div><div class=${Wn(So.container)}><div class=${Wn(dp(So.image,l?So.imageLoading:null))} style=${cD($)}>${l||s?ri`<calcite-scrim><span aria-hidden=true class=${Wn(E9.loaderAnimation)} role=presentation></span></calcite-scrim>`:null}</div>${p}</div></calcite-button></div>`}};qg.properties={activeBasemap:0,autoDestroyDisabled:5,icon:1,label:1,messageOverrides:0,nextBasemap:1,position:3,referenceElement:1,showTitle:5,state:3},qg.shadowRootOptions=yv,qg.styles=hke;let Lk=qg;J4("arcgis-basemap-toggle",Lk);const N0=document.querySelector("#indicator-combobox"),fke=document.querySelector("#place-combobox"),T9=document.querySelector("#comparison-region calcite-radio-button-group"),mke=document.querySelector("arcgis-map"),OO=mke.view,yke=document.getElementById("updateIndicatorsBtn");uge(OO);lge(OO);const dY=document.getElementById("legend-container");OO.ui.add(dY,"bottom-left");dY.style.display="block";sge(N0,e=>{OH(e)});N0.addEventListener("calciteComboboxChange",()=>{N0.selectedItems.length===0&&OH([])});N0.selectionDisplay="single";N0.selectAllEnabled=!0;N0.requestUpdate();ige(fke,async e=>{e?(await Z6(`${e}_low.parquet`,!0),Z6(`${e}.parquet`,!1)):dge()});nge(T9,()=>{cge(T9.selectedItem.value)});yke.addEventListener("click",()=>{pge()});export{Vbe as $,oNe as A,qS as B,me as C,Pwe as D,$4 as E,H4e as F,hM as G,aNe as H,mi as I,ee as J,E2 as K,Ga as L,ZI as M,yL as N,gL as O,a as P,A as Q,IZ as R,DA as S,P as T,Vv as U,At as V,$ne as W,ye as X,_Q as Y,Ube as Z,ce as _,T4 as a,Ms as a$,Nt as a0,bn as a1,s9 as a2,yIe as a3,Cw as a4,gwe as a5,nNe as a6,os as a7,pS as a8,Qe as a9,U4e as aA,Sr as aB,Ya as aC,Rhe as aD,Ohe as aE,Phe as aF,H as aG,ci as aH,Yc as aI,wle as aJ,rm as aK,gle as aL,Xce as aM,EG as aN,hde as aO,F5e as aP,Cn as aQ,Te as aR,Kbe as aS,Xpe as aT,Ype as aU,Vp as aV,FNe as aW,e4e as aX,X0 as aY,Hp as aZ,Za as a_,K as aa,$Ae as ab,hce as ac,D5e as ad,ct as ae,qt as af,jb as ag,Up as ah,Pt as ai,Dk as aj,Ej as ak,jr as al,ka as am,de as an,R5e as ao,UNe as ap,Ve as aq,HSe as ar,Je as as,dr as at,NAe as au,ZS as av,Sfe as aw,co as ax,R2 as ay,oOe as az,Hne as b,jp as b$,R0e as b0,J0e as b1,nJ as b2,RSe as b3,eEe as b4,JC as b5,z0e as b6,gH as b7,j0e as b8,vH as b9,Bse as bA,Ne as bB,tm as bC,Mo as bD,wpe as bE,Br as bF,eh as bG,uS as bH,_5e as bI,hR as bJ,W2 as bK,Xp as bL,nv as bM,vr as bN,Ko as bO,Gk as bP,rr as bQ,jv as bR,Xa as bS,Kfe as bT,st as bU,a4e as bV,$se as bW,b5e as bX,Ese as bY,mse as bZ,l4e as b_,yH as ba,Z0e as bb,G0e as bc,C0e as bd,O0e as be,DS as bf,gSe as bg,Wv as bh,Sle as bi,Ele as bj,Tle as bk,DU as bl,Kce as bm,GSe as bn,vz as bo,rf as bp,wz as bq,gz as br,sj as bs,EN as bt,OPe as bu,$Oe as bv,qOe as bw,j0 as bx,cX as by,Ge as bz,Cfe as c,hRe as c$,d4e as c0,c4e as c1,u4e as c2,fse as c3,KRe as c4,XRe as c5,Uc as c6,A7 as c7,B_ as c8,XFe as c9,hp as cA,gae as cB,Ts as cC,Lt as cD,WM as cE,ARe as cF,fJ as cG,sm as cH,dRe as cI,qk as cJ,hV as cK,z7e as cL,Gs as cM,pe as cN,Na as cO,Kn as cP,Di as cQ,QP as cR,zi as cS,pce as cT,xi as cU,Pe as cV,h0e as cW,iu as cX,p0e as cY,sn as cZ,Vke as c_,g8 as ca,y8 as cb,Ke as cc,am as cd,Pke as ce,q9 as cf,yz as cg,hFe as ch,LTe as ci,YF as cj,ZF as ck,XF as cl,KF as cm,Pr as cn,HNe as co,GNe as cp,qNe as cq,$r as cr,ur as cs,lo as ct,t7e as cu,Is as cv,Zg as cw,gw as cx,UOe as cy,bQ as cz,RP as d,xke as d$,rh as d0,G0 as d1,Ze as d2,ELe as d3,$Le as d4,TLe as d5,_0e as d6,b0e as d7,xve as d8,eOe as d9,gr as dA,qb as dB,bx as dC,Ex as dD,gJ as dE,ze as dF,bv as dG,_r as dH,L_ as dI,ZTe as dJ,Wr as dK,HT as dL,Zv as dM,Jx as dN,zOe as dO,fPe as dP,NPe as dQ,uu as dR,bz as dS,je as dT,Gw as dU,k5e as dV,Pa as dW,vs as dX,si as dY,lg as dZ,p$ as d_,rOe as da,tOe as db,iOe as dc,sOe as dd,nOe as de,kx as df,Dg as dg,wTe as dh,ODe as di,bt as dj,NDe as dk,ZW as dl,cm as dm,Vc as dn,QRe as dp,vS as dq,_t as dr,Vi as ds,Z0 as dt,n8e as du,Ss as dv,ks as dw,cr as dx,po as dy,_x as dz,rNe as e,td as e$,TTe as e0,z9 as e1,tpe as e2,Kme as e3,br as e4,ml as e5,ND as e6,lIe as e7,G7e as e8,Soe as e9,GS as eA,em as eB,Gie as eC,wU as eD,yse as eE,r4e as eF,Tn as eG,bU as eH,t4e as eI,S4e as eJ,MV as eK,goe as eL,LR as eM,en as eN,MS as eO,KQ as eP,sJ as eQ,tJ as eR,wSe as eS,iJ as eT,Ite as eU,kn as eV,rX as eW,Eke as eX,lV as eY,Ua as eZ,CR as e_,GN as ea,r8e as eb,t8e as ec,lle as ed,Fv as ee,el as ef,RPe as eg,jOe as eh,Ea as ei,m4e as ej,Z9 as ek,xS as el,IS as em,$oe as en,FR as eo,jR as ep,Toe as eq,r1 as er,dv as es,E4 as et,f4e as eu,DV as ev,n_ as ew,e4 as ex,sse as ey,YRe as ez,Bxe as f,nn as f$,G4e as f0,Jae as f1,YQ as f2,Xc as f3,FSe as f4,Gce as f5,vSe as f6,rJ as f7,QSe as f8,w4e as f9,lOe as fA,U5e as fB,Yme as fC,Dme as fD,Gme as fE,OS as fF,Fpe as fG,Npe as fH,Qr as fI,Fr as fJ,hi as fK,fs as fL,En as fM,Ppe as fN,Ece as fO,rpe as fP,Sce as fQ,nh as fR,Wa as fS,TSe as fT,$Se as fU,JSe as fV,_we as fW,Lpe as fX,Hg as fY,tu as fZ,zp as f_,Zb as fa,aS as fb,lS as fc,_j as fd,Ft as fe,DNe as ff,L4e as fg,z4e as fh,dL as fi,Hb as fj,H4 as fk,W4 as fl,xt as fm,k8e as fn,O9e as fo,Xs as fp,uk as fq,dC as fr,ri as fs,O0 as ft,d7e as fu,CO as fv,j9e as fw,Rk as fx,ah as fy,mE as fz,Nwe as g,xr as g$,tye as g0,ja as g1,M5e as g2,oE as g3,uye as g4,Pb as g5,Et as g6,Le as g7,MOe as g8,vfe as g9,Y_ as gA,HCe as gB,R9e as gC,TO as gD,RCe as gE,GMe as gF,FCe as gG,dR as gH,wke as gI,HZ as gJ,iCe as gK,b9 as gL,_Pe as gM,DPe as gN,jc as gO,xp as gP,Yke as gQ,au as gR,Zke as gS,Z4e as gT,Y4e as gU,oMe as gV,U$e as gW,$O as gX,x9e as gY,vv as gZ,dQ as g_,BOe as ga,Cae as gb,Au as gc,cu as gd,Wt as ge,yN as gf,Ui as gg,tv as gh,l0e as gi,mt as gj,nB as gk,lLe as gl,DRe as gm,FRe as gn,zv as go,Ci as gp,cLe as gq,L2 as gr,LRe as gs,pLe as gt,jRe as gu,Rc as gv,bke as gw,_ke as gx,bMe as gy,ZJ as gz,oS as h,gIe as h$,is as h0,uo as h1,r6 as h2,K8 as h3,mOe as h4,E0 as h5,Oq as h6,lO as h7,C5e as h8,zSe as h9,CPe as hA,gPe as hB,COe as hC,V9 as hD,Nne as hE,iAe as hF,$Ne as hG,wNe as hH,Zz as hI,gg as hJ,Gl as hK,rAe as hL,xNe as hM,INe as hN,ZPe as hO,$n as hP,K5e as hQ,_le as hR,c3 as hS,th as hT,Wg as hU,_pe as hV,F0 as hW,U0 as hX,Hke as hY,Oi as hZ,bc as h_,b0 as ha,Sj as hb,QX as hc,aX as hd,zLe as he,s2 as hf,FM as hg,LA as hh,CS as hi,GOe as hj,oh as hk,qLe as hl,QLe as hm,WLe as hn,ULe as ho,fLe as hp,wLe as hq,_Le as hr,KS as hs,Zbe as ht,JM as hu,y4e as hv,yFe as hw,yOe as hx,nFe as hy,Or as hz,Jr as i,Upe as i$,P_e as i0,E4e as i1,w_e as i2,jSe as i3,hOe as i4,uN as i5,NV as i6,LV as i7,Ir as i8,b4e as i9,uCe as iA,V$e as iB,I9e as iC,Qwe as iD,Hwe as iE,Gwe as iF,TC as iG,Cs as iH,Mve as iI,Ske as iJ,ms as iK,Wne as iL,OR as iM,Jne as iN,Zne as iO,Gp as iP,TS as iQ,J0 as iR,Ume as iS,hpe as iT,Nme as iU,Epe as iV,rye as iW,V5 as iX,pU as iY,dye as iZ,OAe as i_,Dce as ia,SG as ib,CSe as ic,TG as id,boe as ie,ife as ig,te as ih,Vce as ii,rfe as ij,FS as ik,_G as il,$ke as im,Uw as io,Lke as ip,BSe as iq,MSe as ir,J7 as is,Qb as it,dPe as iu,cPe as iv,$le as iw,ez as ix,ar as iy,sCe as iz,Qv as j,h0 as j$,VS as j0,V6 as j1,lr as j2,dM as j3,US as j4,yme as j5,i1 as j6,Ope as j7,$a as j8,iye as j9,to as jA,r7 as jB,D_ as jC,e7 as jD,tk as jE,yJ as jF,sk as jG,BFe as jH,R0 as jI,FFe as jJ,Mp as jK,jFe as jL,J2 as jM,JF as jN,U6e as jO,FQ as jP,hO as jQ,UC as jR,k0 as jS,$_e as jT,jQ as jU,v7 as jV,WF as jW,Wke as jX,iee as jY,oo as jZ,O as j_,Bq as ja,zke as jb,vN as jc,Sa as jd,kc as je,Lne as jf,Qa as jg,no as jh,pv as ji,g4 as jj,Bpe as jk,jpe as jl,Dpe as jm,koe as jn,Uoe as jo,HV as jp,hLe as jq,m7e as jr,fNe as js,nPe as jt,b_ as ju,ePe as jv,zTe as jw,j_ as jx,F_ as jy,NFe as jz,et as k,e_ as k$,TR as k0,yV as k1,xOe as k2,__e as k3,ki as k4,E_e as k5,DQ as k6,vke as k7,jg as k8,rk as k9,_q as kA,vAe as kB,XU as kC,oV as kD,y7e as kE,P9e as kF,Jq as kG,ZNe as kH,Mq as kI,Jk as kJ,eA as kK,li as kL,f8e as kM,Rpe as kN,nA as kO,Fme as kP,fn as kQ,jo as kR,z0 as kS,Gr as kT,sr as kU,xn as kV,ps as kW,wAe as kX,EAe as kY,Aq as kZ,h4 as k_,kQ as ka,r4 as kb,ij as kc,ble as kd,SSe as ke,XSe as kf,tEe as kg,R_e as kh,H0e as ki,_oe as kj,Cq as kk,vle as kl,XS as km,Moe as kn,w_ as ko,ESe as kp,XQ as kq,yb as kr,PSe as ks,Ii as kt,ip as ku,Tee as kv,Cue as kw,Rfe as kx,mpe as ky,uAe as kz,KNe as l,jNe as l$,tr as l0,MAe as l1,aAe as l2,lAe as l3,dAe as l4,pAe as l5,SAe as l6,hAe as l7,AAe as l8,fAe as l9,xde as lA,Ide as lB,HF as lC,KDe as lD,YDe as lE,ZDe as lF,JDe as lG,eFe as lH,XDe as lI,QDe as lJ,WDe as lK,x_e as lL,WP as lM,HDe as lN,IRe as lO,VR as lP,lae as lQ,kae as lR,Rae as lS,jk as lT,Bke as lU,Bk as lV,Uke as lW,Jse as lX,ZX as lY,fRe as lZ,BNe as l_,mAe as la,yAe as lb,gAe as lc,Ti as ld,gX as le,bs as lf,Pq as lg,ii as lh,q4e as li,SW as lj,mte as lk,dCe as ll,HMe as lm,Fke as ln,jke as lo,Dke as lp,pu as lq,Ine as lr,zS as ls,H9 as lt,pa as lu,Kke as lv,ML as lw,Qpe as lx,DAe as ly,jG as lz,Mfe as m,lQ as m$,Tq as m0,Sq as m1,Qne as m2,JR as m3,yPe as m4,APe as m5,J_e as m6,Z_e as m7,eJ as m8,Sbe as m9,J4e as mA,yE as mB,bO as mC,rn as mD,gE as mE,v7e as mF,za as mG,z3e as mH,Y3e as mI,dX as mJ,D4e as mK,KU as mL,ES as mM,V4e as mN,Bp as mO,Y5 as mP,sX as mQ,fz as mR,_ae as mS,SOe as mT,Oz as mU,fO as mV,Nq as mW,lE as mX,F8e as mY,D8e as mZ,cQ as m_,JP as ma,dc as mb,tNe as mc,R4e as md,wOe as me,XV as mf,g6e as mg,J9 as mh,nae as mi,pae as mj,Jv as mk,AOe as ml,_D as mm,qpe as mn,LOe as mo,Wk as mp,bRe as mq,wRe as mr,lpe as ms,uee as mt,lee as mu,ROe as mv,ome as mw,Cke as mx,e7e as my,Rt as mz,_I as n,cy as n$,ebe as n0,rbe as n1,gd as n2,Q9 as n3,kke as n4,t7 as n5,UFe as n6,c7 as n7,VFe as n8,b8 as n9,NTe as nA,Nc as nB,l3e as nC,c3e as nD,d3e as nE,Fa as nF,N9e as nG,A9 as nH,wCe as nI,g7e as nJ,GZ as nK,YMe as nL,M9e as nM,C9e as nN,sne as nO,W4e as nP,VNe as nQ,epe as nR,t_ as nS,Lce as nT,Fce as nU,qce as nV,_s as nW,Nl as nX,cc as nY,pi as nZ,Wle as n_,qF as na,gQ as nb,NQ as nc,C0 as nd,Oa as ne,gFe as nf,nO as ng,jC as nh,nQ as ni,o1 as nj,TRe as nk,ALe as nl,Qo as nm,Ng as nn,_Ae as no,URe as np,kAe as nq,LNe as nr,NNe as ns,Ig as nt,Oc as nu,sv as nv,eye as nw,MNe as nx,H_e as ny,sFe as nz,D7e as o,Ape as o$,rSe as o0,UQ as o1,f7 as o2,zDe as o3,UTe as o4,nme as o5,hf as o6,ame as o7,a1 as o8,abe as o9,IR as oA,ede as oB,Yce as oC,kSe as oD,Zce as oE,Cle as oF,S_e as oG,g4e as oH,gV as oI,g0 as oJ,K0 as oK,F4e as oL,IC as oM,CW as oN,_6e as oO,b6e as oP,Ebe as oQ,yO as oR,Yhe as oS,Zhe as oT,m4 as oU,che as oV,Q4e as oW,sB as oX,Bl as oY,T0 as oZ,Xde as o_,sme as oa,lme as ob,Efe as oc,vOe as od,gOe as oe,Sae as of,Yv as og,Kv as oh,Xv as oi,Uce as oj,jce as ok,Bce as ol,W9 as om,uV as on,N4e as oo,FV as op,eN as oq,wV as or,O3e as os,sLe as ot,sh as ou,Ra as ov,r0e as ow,T4e as ox,hPe as oy,pPe as oz,Ja as p,The as p$,fpe as p0,Spe as p1,Sme as p2,Bme as p3,R4 as p4,xh as p5,oX as p6,bE as p7,i7 as p8,oc as p9,J5e as pA,YPe as pB,KPe as pC,XPe as pD,qo as pE,ap as pF,Sc as pG,AR as pH,pRe as pI,ec as pJ,Oke as pK,CQ as pL,yxe as pM,fi as pN,dE as pO,MQ as pP,RQ as pQ,i_e as pR,V6e as pS,p_e as pT,z6e as pU,om as pV,fr as pW,ohe as pX,nhe as pY,Dt as pZ,ic as p_,R3e as pa,PFe as pb,QF as pc,VTe as pd,l7 as pe,a7 as pf,Jo as pg,T_e as ph,_4e as pi,zR as pj,GR as pk,N_ as pl,iz as pm,lFe as pn,oFe as po,aFe as pp,yNe as pq,gNe as pr,mNe as ps,I_e as pt,Hm as pu,A4e as pv,ws as pw,Q5e as px,rwe as py,$z as pz,j4e as q,gv as q$,dq as q0,Uo as q1,zo as q2,GA as q3,kce as q4,A5e as q5,Bi as q6,$i as q7,OOe as q8,FPe as q9,pbe as qA,_Oe as qB,Rwe as qC,eNe as qD,uOe as qE,ru as qF,gs as qG,iNe as qH,Qke as qI,xbe as qJ,yQ as qK,w7 as qL,TJ as qM,SFe as qN,EFe as qO,TFe as qP,$Fe as qQ,cFe as qR,pFe as qS,dFe as qT,u3e as qU,Boe as qV,Va as qW,Fbe as qX,oO as qY,wae as qZ,bOe as q_,BPe as qa,LPe as qb,see as qc,Xke as qd,Kc as qe,Z4 as qf,lbe as qg,Tbe as qh,v6e as qi,a$ as qj,f5e as qk,__ as ql,_be as qm,WSe as qn,cbe as qo,Wb as qp,aOe as qq,BRe as qr,Dfe as qs,bLe as qt,ao as qu,Bc as qv,xFe as qw,QV as qx,bbe as qy,dbe as qz,ac as r,ILe as r$,kj as r0,sF as r1,Y2e as r2,K2e as r3,fOe as r4,l_ as r5,GLe as r6,MFe as r7,IFe as r8,UDe as r9,zRe as rA,HRe as rB,GRe as rC,WRe as rD,qRe as rE,JRe as rF,xs as rG,I$ as rH,Tte as rI,YFe as rJ,RNe as rK,NP as rL,VRe as rM,Yb as rN,Qoe as rO,Woe as rP,dOe as rQ,U9 as rR,Mee as rS,JLe as rT,QM as rU,ZLe as rV,MLe as rW,HLe as rX,vLe as rY,FLe as rZ,kLe as r_,VDe as ra,v8 as rb,mQ as rc,l1 as rd,xx as re,S5e as rf,cOe as rg,w6e as rh,Q3e as ri,YW as rj,nee as rk,X4e as rl,K4e as rm,joe as rn,J3e as ro,G3e as rp,XOe as rq,Ai as rr,BS as rs,e8e as rt,BDe as ru,Pd as rv,J7e as rw,P5e as rx,kNe as ry,ZRe as rz,Q as s,NLe as s$,E0e as s0,CLe as s1,$6 as s2,E6 as s3,T6 as s4,DLe as s5,LLe as s6,BLe as s7,jLe as s8,ZM as s9,M_e as sA,B8 as sB,N8 as sC,fae as sD,L8 as sE,X8 as sF,D8 as sG,F8 as sH,VOe as sI,Tae as sJ,z8 as sK,a6 as sL,l6 as sM,u6 as sN,Pae as sO,EOe as sP,yae as sQ,Ox as sR,c6 as sS,TOe as sT,UPe as sU,v_e as sV,xLe as sW,VLe as sX,IOe as sY,YLe as sZ,POe as s_,mFe as sa,S0e as sb,vFe as sc,$0e as sd,fFe as se,SLe as sf,JTe as sg,AFe as sh,y7 as si,GDe as sj,qDe as sk,wFe as sl,bFe as sm,CFe as sn,kFe as so,tFe as sp,RFe as sq,OFe as sr,PTe as ss,FTe as st,uFe as su,DJ as sv,A0 as sw,_Fe as sx,ETe as sy,B4e as sz,cye as t,LFe as t$,PLe as t0,g6 as t1,R8 as t2,w6 as t3,y6 as t4,G8 as t5,T8 as t6,E8 as t7,S8 as t8,k8 as t9,nde as tA,ofe as tB,mbe as tC,g5e as tD,m0e as tE,CTe as tF,jV as tG,DOe as tH,N5e as tI,Gue as tJ,_Ne as tK,bNe as tL,GF as tM,KFe as tN,JFe as tO,ZFe as tP,QFe as tQ,WFe as tR,o3e as tS,EJ as tT,iFe as tU,rFe as tV,i3e as tW,jDe as tX,Xne as tY,uX as tZ,KSe as t_,Jn as ta,RLe as tb,OLe as tc,Ise as td,l7e as te,u7e as tf,fR as tg,Ec as th,Xse as ti,a7e as tj,Kg as tk,ev as tl,y0 as tm,Cse as tn,Gke as to,rq as tp,ane as tq,lne as tr,wR as ts,wxe as tt,FOe as tu,$6e as tv,ode as tw,uQ as tx,Mz as ty,Ij as tz,YNe as u,Do as u$,DFe as u0,IPe as u1,MPe as u2,O_e as u3,mde as u4,fde as u5,Iz as u6,bH as u7,Mte as u8,vJ as u9,Ade as uA,mH as uB,tPe as uC,B5e as uD,L2e as uE,O6e as uF,Ehe as uG,Sh as uH,Hhe as uI,PPe as uJ,bPe as uK,TPe as uL,SPe as uM,qke as uN,HPe as uO,qPe as uP,Nke as uQ,vPe as uR,kOe as uS,kPe as uT,J1e as uU,tSe as uV,HQ as uW,ERe as uX,ew as uY,o8 as uZ,n6e as u_,Ta as ua,B6e as ub,q4 as uc,dve as ud,Jc as ue,f7e as uf,B$e as ug,SMe as uh,kO as ui,L9e as uj,MCe as uk,UCe as ul,D9e as um,$Ce as un,VCe as uo,F9e as up,XZ as uq,xCe as ur,A7e as us,oLe as ut,aLe as uu,uLe as uv,o_ as uw,k9e as ux,aCe as uy,rde as uz,Ce as v,vNe as v0,Mi as v1,qM as v2,P6e as v3,EPe as v4,Oce as v5,mPe as v6,gLe as v7,BA as v8,Ile as v9,jD as vA,tde as vB,hNe as vC,CNe as vD,WNe as vE,JNe as vF,y8e as vG,r7e as vH,$9e as vI,yCe as vJ,RO as vK,oPe as va,Mke as vb,nX as vc,Ike as vd,wPe as ve,zFe as vf,vbe as vg,v4e as vh,sbe as vi,xle as vj,mRe as vk,EU as vl,yG as vm,sPe as vn,$Pe as vo,iPe as vp,UD as vq,rPe as vr,NOe as vs,BD as vt,_4 as vu,aj as vv,Jke as vw,xPe as vx,Wce as vy,zce as vz,Vxe as w,sNe as x,o6e as y,ehe as z};
