const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-Bdk4Sca1.js","./index-DE10eTWw.css"])))=>i.map(i=>d[i]);
import{aa as w,mm as A,b$ as L,_ as O}from"./index-Bdk4Sca1.js";import{L as b,M as F,N as W}from"./utils-jkmNxsH5.js";import"./colorUtils-CZMGde11.js";var n;(function(i){i[i.size=22]="size",i[i.lineWidth=50]="lineWidth",i[i.maxSize=120]="maxSize",i[i.maxOutlineSize=80]="maxOutlineSize",i[i.tallSymbolWidth=20]="tallSymbolWidth"})(n||(n={}));const g=w("android");w("chrome")||g&&g>=4;A();n.size;n.maxSize;n.maxOutlineSize;n.lineWidth;n.tallSymbolWidth;function z(i){return i&&"opacity"in i?i.opacity*z(i.parent):1}async function E(i,e){var f;if(!i)return;const h=i.sourceLayer,p=(e!=null&&e.useSourceLayer?h:i.layer)??h,s=e!=null&&e.ignoreOpacity?1:z(p);if(i.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const l=i.symbol.type==="web-style"?await i.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):i.symbol.clone();return b(l,null,s),l}const r=(e==null?void 0:e.renderer)??C(p);let a=r&&"getSymbolAsync"in r?await r.getSymbolAsync(i,e):null;if(!a)return;if(a=a.type==="web-style"?await a.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):a.clone(),!r||!("visualVariables"in r)||!((f=r.visualVariables)!=null&&f.length))return b(a,null,s),a;if("arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const l={...e};l.arcade=await L(),e=l}const{getColor:V,getOpacity:v,getAllSizes:x,getRotationAngle:_}=await O(()=>import("./index-Bdk4Sca1.js").then(l=>l.vC),__vite__mapDeps([0,1]),import.meta.url),c=[],u=[],t=[],d=[];for(const l of r.visualVariables)switch(l.type){case"color":c.push(l);break;case"opacity":u.push(l);break;case"rotation":d.push(l);break;case"size":l.target||t.push(l)}const S=!!c.length&&c[c.length-1],y=S?V(S,i,e):null,m=!!u.length&&u[u.length-1];let o=m?v(m,i,e):null;if(s!=null&&(o=o!=null?o*s:s),e!=null&&e.ignoreOpacity&&(o=1),y!=null&&m&&o!=null&&(y.a=1),b(a,y,o),t.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const l=x(t,i,e);await F(a,l)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const l of d)W(a,_(l,i,e),l.axis);return a}function C(i){if(i)return"renderer"in i?i.renderer:void 0}export{E as x};
