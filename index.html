<!doctype html >
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Risk Assessment Viewer</title>
  <script type="module" src="https://js.arcgis.com/calcite-components/3.3.0/calcite.esm.js"></script>
</head>

<body>
  <calcite-shell>
    <!-- HEADER WITH LOGO -->
    <calcite-navigation slot="header">
      <calcite-navigation-logo slot="logo" heading="Risk Assessment Viewer"
        thumbnail="https://raw.githubusercontent.com/DLCDOfficial/dlcd-logos/refs/heads/main/DLCD_logo_only.png"></calcite-navigation-logo>
    </calcite-navigation>
    
  
	
    <!-- SIDE PANEL CONTROLS -->
    <calcite-shell-panel slot="panel-start" position="start" id="shell-panel-start">
      <calcite-action-bar slot="action-bar" expanded>
        <calcite-action-group>
          <calcite-action active text="Configure" icon="configure" text-enabled></calcite-action>
        </calcite-action-group>

        <calcite-action-group slot="bottom-actions">
          <calcite-action text="About" icon="information" text-enabled></calcite-action>
        </calcite-action-group>
      </calcite-action-bar>
  
      <calcite-panel heading="Configure" id="panel-start">
        <calcite-block heading="Place" description="Select a County" icon-start="h3-hexagon" expanded>
          <calcite-combobox id="place-combobox" placeholder="Select a County" selection-mode="single">
            <!-- Populate with place names -->
          </calcite-combobox>
        </calcite-block>
        
        <calcite-block collapsible heading="Indicators" description="Select Harms & Vulnerabilities" icon-start="effects" expanded>
          <calcite-combobox id="indicator-combobox" placeholder="Indicators" selection-mode="multiple"
            selected-items-label="single" style="z-index: 1000;">
            <!-- Populate with indicators -->
            <calcite-combobox-item-group label="Vulnerabilities"></calcite-combobox-item-group>
            <calcite-combobox-item-group label="Harms"></calcite-combobox-item-group>
          </calcite-combobox>
        </calcite-block>
    
              <div id="run-button-holder" style="display: flex; align-items: center; gap: 8px;">
        <calcite-fab
          id="updateIndicatorsBtn"
          icon="play"
          kind="brand"
          scale="l"
        ></calcite-fab>
        <span>Run Model</span>
      </div>

      </calcite-panel>
    </calcite-shell-panel>

    </calcite-shell-panel>
>
    <calcite-panel>
      <arcgis-map basemap="gray-vector" center="-120.70, 44.12" zoom="6">
        <arcgis-zoom position="top-right"></arcgis-zoom>
        <!-- Spinner overlay -->
       <div id="loader" class="hidden"></div>
  </div>
    </calcite-panel>
  </calcite-shell>

  <!-- CUSTOM LEGEND TO INJECT INTO MAP UI-->
  <div id="legend-container" style="background:white; padding:20px; z-index:100; display: none">
    <!-- Main Title -->

    <!-- Grid Container -->
    <div style="display:grid; 
              grid-template-columns: 50px repeat(4, 50px); 
              grid-template-rows: repeat(4, 50px) 20px; 
              gap:2px; 
              position:relative;">

      <!-- Y axis label -->
      <div
        style="position:absolute; left:5px; top:50px; writing-mode: vertical-rl; font-weight:bold; text-align:center;">
        ← Higher Vulnerabilities
      </div>

      <!-- Percentage labels y direction -->
      <div
        style="grid-row:1; grid-column:1; writing-mode: vertical-rl; text-align:center; font-size:10px; align-self:center;">
        75-100%</div>
      <div
        style="grid-row:2; grid-column:1; writing-mode: vertical-rl; text-align:center; font-size:10px; align-self:center;">
        50-75%</div>
      <div
        style="grid-row:3; grid-column:1; writing-mode: vertical-rl; text-align:center; font-size:10px; align-self:center;">
        25-50%</div>
      <div
        style="grid-row:4; grid-column:1; writing-mode: vertical-rl; text-align:center; font-size:10px; align-self:center;">
        0-25%</div>

      <!-- Color matrix cells -->
      <!-- Rows are reversed from how they are represented in the renderer strings.. 4 = 1-->
      <!-- Row 1 -->
      <div id="4,1" style="grid-row:1; grid-column:2; background:#169dd0;"></div>
      <div id="4,2" style="grid-row:1; grid-column:3; background:#16869e;"></div>
      <div id="4,3" style="grid-row:1; grid-column:4; background:#166d68;"></div>
      <div id="4,4" style="grid-row:1; grid-column:5; background:#174f28;"></div>

      <!-- Row 2 -->
      <div id="3,1" style="grid-row:2; grid-column:2; background:#5fb2d1;"></div>
      <div id="3,2" style="grid-row:2; grid-column:3; background:#60979f;"></div>
      <div id="3,3" style="grid-row:2; grid-column:4; background:#617b69;"></div>
      <div id="3,4" style="grid-row:2; grid-column:5; background:#635929;"></div>

      <!-- Row 3 -->
      <div id="2,1" style="grid-row:3; grid-column:2; background:#9cc4d2;"></div>
      <div id="2,2" style="grid-row:3; grid-column:3; background:#9ea69f;"></div>
      <div id="2,3" style="grid-row:3; grid-column:4; background:#a08769;"></div>
      <div id="2,4" style="grid-row:3; grid-column:5; background:#a36229;"></div>

      <!-- Row 4 -->
      <div id="1,1" style="grid-row:4; grid-column:2; background:#d3d3d3;"></div>
      <div id="1,2" style="grid-row:4; grid-column:3; background:#d6b3a0;"></div>
      <div id="1,3" style="grid-row:4; grid-column:4; background:#d9926a;"></div>
      <div id="1,4" style="grid-row:4; grid-column:5; background:#dd6a29;"></div>

      <!-- Percentage labels x direction -->
      <div style="grid-row:5; grid-column:2; text-align:center; font-size:10px;">0-25%</div>
      <div style="grid-row:5; grid-column:3; text-align:center; font-size:10px;">25-50%</div>
      <div style="grid-row:5; grid-column:4; text-align:center; font-size:10px;">50-75%</div>
      <div style="grid-row:5; grid-column:5; text-align:center; font-size:10px;">75-100%</div>

      <!-- Large X Axis Label -->
      <div style="grid-row:6; grid-column:2/6; text-align:center; font-weight:bold;">
        Higher Harms →
      </div>

    </div>
  </div>


  <div id="hover-tooltip"></div>
  <script type="module" src="./src/main.js"></script>
</body>

</html>
